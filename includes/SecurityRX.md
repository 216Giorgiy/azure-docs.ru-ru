# Руководство по безопасности Azure

## Аннотация

При разработке приложений для Azure идентификация и доступ —
основные вопросы безопасности, о которых необходимо помнить.
В этом разделе описываются ключевые вопросы безопасности, связанные с идентификацией и доступом в облаке,
а также способы защиты облачных приложений.

## Обзор

Безопасность приложения зависит от его контактной зоны. Чем более явно выступает поверхность приложения,
тем важнее проблемы с безопасностью.
Например, приложение автоматически и
неявно обрабатывает одинаковый ряд процессов на общедоступном с точки зрения безопасности веб-сайте.

При переходе в облако можно меньше беспокоиться об
инфраструктуре и сетях, поскольку они управляются в центрах обработки данных
с использованием механизмов, средств и технологий безопасности мирового уровня. С другой стороны,
облако предоставляет большую контактную зону для приложения,
которая может быть использована злоумышленниками. Это происходит
потому, что множество облачных технологий и служб представляются как конечные точки,
а не компоненты в памяти. Хранилище Azure, Service Bus, база
данных SQL (ранее SQL Azure) и многие другие службы доступны
через их конечные точки по сети.

В облачных приложениях на плечи разработчиков приложений ложится больше нагрузки,
связанной с проектированием, разработкой и поддержкой облачных приложений
в соответствии со стандартами безопасности высокого уровня для защиты от злоумышленников.
Рассмотрим следующую диаграмму (из документа [Заметки о безопасности
Azure (PDF)][Заметки о безопасности
Azure (PDF)], автор Дж. Д. Майер (J.D. Meier)): обратите внимание, как к компоненту инфраструктуры обращается
поставщик облачных служб, в нашем случае это Azure, из-за чего на долю разработчиков приложений
выпадает больше работы, связанной с безопасностью.

![Защита приложения][Защита приложения]

Хорошие новости: все уже известные вам рекомендации,
принципы и методы по обеспечению безопасности при разработке
по-прежнему применимы при разработке облачных приложений. Рассмотрим следующий ключевые области, которые необходимо
учитывать.

-   Для всех входных данных проверяется тип, длина, диапазон и строковые шаблоны,
    чтобы предотвратить атаки с внедрением кода, а все данные, возвращаемые приложением,
    должны быть надежно санированы.
-   Конфиденциальные данные должны быть защищены при хранении и передаче
    по сети для снижения угрозы подмены данных и раскрытия информации.
-   Аудит и ведение журнала должны быть правильно реализованы для ликвидации
    угрозы отрицания авторства.
-   Проверка подлинности и авторизация должны быть реализованы с помощью проверенных
    механизмов, предоставляемых платформой, для предотвращения подделки удостоверений и
    повышения привилегий.

Полный список угроз, атак, уязвимостей и
контрмер см. в документах [Памятка: механизм
безопасности веб-приложения][Памятка: механизм
безопасности веб-приложения] и [Руководство по безопасности для приложений][Руководство по безопасности для приложений].

В облаке механизмы управления доступом и проверки подлинности сильно
отличаются от доступных для локальных приложений. Для облачных приложений
доступно гораздо больше вариантов проверки подлинности
и управления доступом, что может привести к путанице
и в результате изъянам реализации. Еще больше путаницы возникает при определении того, что считается
облачным приложением. Например, приложение может быть развернуто в облаке, но
его механизм проверки подлинности может быть предоставлен службой каталогов Active Directory. С
другой стороны, приложение может быть развернуто локально, а
механизмы проверки подлинности находятся в облаке (например, контроль
доступа Azure AD, ранее — служба Access Control,
или ACS).

## Угрозы, уязвимости и атаки

Угроза — это потенциально опасный результат, которого вы хотите избежать, например
раскрытие конфиденциальной информации или выход службы из строя.
Традиционно угрозы классифицируются с использованием аббревиатуры STRIDE:

-   **S**poofing — спуфинг или кража личных данных
-   **T**ampering — подмена данных
-   **R**epudiation — отрицание действий
-   **I**nformation disclosure — разглашение информации
-   **D**enial of service — отказ в обслуживании
-   **E**levation of privileges — повышение прав

Уязвимости — это ошибки, которые мы, как разработчики, допускаем в коде
и которые позволяют злоумышленникам атаковать приложение. Например, отправка
конфиденциальных данных в незашифрованном виде представляет угрозу
раскрытия информации за счет перехвата трафика.

Атаки — использование таких уязвимостей для причинения вреда
приложению. Например, межсайтовые сценарии (XSS) — это
атаки, использующие непроверенные выходные данные. Другим примером служит
перехват данных по сети для получения учетных данных, передаваемых в незашифрованном виде. Эти атаки
также могут привести к подделке личных данных. Для простоты
считайте угрозы, уязвимости и атаки вредными событиями.
Рассмотрим следующие схемы как общее представление вредных событий,
связанных с веб-приложением, развернутым в Azure (из документа
[Заметки о безопасности Azure (PDF)][Заметки о безопасности
Azure (PDF)], автор Дж. Д. Майер (J.D. Meier)).

![Угрозы, уязвимости и атаки][Угрозы, уязвимости и атаки]

Вы как разработчик можете контролировать уязвимости. Чем меньше
уязвимостей вы вносите, тем меньше возможностей у
злоумышленников.

Уязвимости, связанные с идентификацией и доступом, позволяют реализовать
все угрозы из модели STRIDE. Например, неправильно реализованный
механизм проверки подлинности может привести к подделке личных данных и в результате
раскрытию информации, подмене данных, выполнению операций с повышенными правами
или даже полному отключению службы. Рассмотрим следующие
вопросы, которые помогут определить потенциальные уязвимости в реализации
механизмов идентификации и доступа в вашем облачном приложении.

-   Вы отправляете учетные данные службам Azure по сети
    в незашифрованном виде?
-   Вы храните учетные данные служб Azure в незашифрованном виде?
-   Ваши учетные данные служб Azure соответствуют политикам
    надежности паролей?
-   Вы полагаетесь на Azure для проверки учетных данных или
    используете собственные механизмы проверки?
-   Вы ограничиваете срок действия сеансов проверки подлинности или маркеров
    безопасности служб Azure приемлемым временным окном?
-   Вы проверяете разрешения для каждой точки входа Azure
    вашего распределенного приложения?
-   При возникновении ошибки ваш механизм авторизации не раскрывает
    конфиденциальную информацию и не предоставляет неограниченный доступ?

## Меры противодействия

Лучшие меры противодействия атакам — это использование механизмов
идентификации и доступа, предоставляемых платформой вместо механизмов
собственной реализации. Рассмотрим следующие технологии идентификации и управления доступом:

**Windows Identity Foundation (WIF).** WIF — это библиотека среды выполнения .NET,
входящая в состав платформы .NET Framework 4.5 (она также доступна как отдельный
компонент для .NET 3.5 и 4.0). На WIF возлагается вся трудная работа по обработке
протоколов, таких как WS-Federation и WS-Trust, и обработке маркеров,
например для языка SAML, поэтому вам не потребуется писать
очень сложный код для защиты приложения. Следующие
ресурсы содержат подробные сведения о службах AD FS:

-   [Примеры Windows Identity Foundation 4.5][Примеры Windows Identity Foundation 4.5] в коллекции примеров кода MSDN.
-   [Средства Windows Identity Foundation 4.5 для Visual Studio 11 Beta][Средства Windows Identity Foundation 4.5 для Visual Studio 11 Beta] в
    коллекции примеров кода MSDN.
-   [Среда выполнения Windows Identity Foundation (.Net 3.5/4.0)][Среда выполнения Windows Identity Foundation (.Net 3.5/4.0)] на портале MSDN.
-   [Примеры Windows Identity Foundation 3.5/4.0 и шаблоны Visual Studio
    2008/2010][Примеры Windows Identity Foundation 3.5/4.0 и шаблоны Visual Studio
    2008/2010] на портале MSDN.

**Контроль доступа Azure AD (ранее известный как ACS)**.
Контроль доступа Azure AD — облачная служба, которая обеспечивает службу
маркеров безопасности (STS) и федерацию с разными поставщиками удостоверений
(IdP), такими как корпоративная служба Active Directory или интернет-поставщики, например
Windows Live ID, учетная запись Майкрософт, Facebook, Google, Yahoo! и
Open ID 2.0. Следующие ресурсы содержат подробные
сведения о контроле доступа Azure AD:

-   [Служба Access Control 2.0][Служба Access Control 2.0]
-   [Сценарии и решения с использованием ACS][Сценарии и решения с использованием ACS]
-   [Практические руководства по работе со службой Service Bus][Практические руководства по работе со службой Service Bus]
-   [Руководство по идентификации, основанной на утверждениях и контроле доступа][Руководство по идентификации, основанной на утверждениях и контроле доступа]
-   [Учебный набор для разработчиков служб идентификации][Учебный набор для разработчиков служб идентификации]
-   [Обучающий курс MSDN для разработчиков служб идентификации][Обучающий курс MSDN для разработчиков служб идентификации]

**Службы федерации Active Directory (AD FS).**Службы федерации
Active Directory (AD FS) 2.0 поддерживают решения с идентификацией
на основе утверждений, которые используют технологии Windows Server
и Active Directory. Службы AD FS 2.0 поддерживают протоколы WS-Trust, WS-Federation
и SAML. Следующие ресурсы содержат подробные сведения о службах
AD FS:

-   [Карта содержимого AD FS 2.0][Карта содержимого AD FS 2.0]
-   [Проектирование единого входа в Интернете][Проектирование единого входа в Интернете]
-   [Проектирование федеративного единого входа в Интернете][Проектирование федеративного единого входа в Интернете]

**Подписи коллективного доступа Azure.** Подписи коллективного доступа
позволяют точно настроить доступ к BLOB-объекту или контейнеру. Следующие
ресурсы содержат подробные сведения о подписях коллективного
доступа.

-   [Управление доступом к BLOB-объектам и контейнерам][Управление доступом к BLOB-объектам и контейнерам]
-   [Новые возможности хранилища: подписи коллективного доступа][Новые возможности хранилища: подписи коллективного доступа]
-   [Подписи коллективного доступа в наши дни стали намного проще][Подписи коллективного доступа в наши дни стали намного проще]

## Карта сценариев

В этом разделе кратко описываются ключевые сценарии, представленные в этой статье.
Используйте его как карту, чтобы определить нужное решение идентификации для вашего
приложения.

-   **Приложение веб-форм ASP.NET с федеративной проверкой подлинности.** В
    этом сценарии вы управляете доступом к приложению веб-форм ASP.NET с помощью
    интернет-удостоверения, например Live ID или учетной записи Майкрософт,
    или корпоративного удостоверения, контролируемого Windows Server Active Directory.
-   **Служба WCF (SOAP) с федеративной проверкой подлинности.**В этом
    сценарии вы управляете доступом к службе WCF (SOAP) с помощью удостоверений службы,
    контролируемых службой контроля доступа Azure AD.
-   **Служба WCF (SOAP) с федеративной проверкой подлинности, удостоверения в
    Active Directory.** В этом сценарии вы управляете доступом к веб-службе WCF
    (SOAP) с помощью удостоверений, контролируемых корпоративной службой Windows
    Server Active Directory.
-   **Служба WCF (REST) с федеративной проверкой подлинности.**В этом
    сценарии вы управляете доступом к службе WCF (REST) с помощью удостоверений службы,
    контролируемых службой контроля доступа Azure AD.
-   **Служба WCF (REST) с Live ID или учетной записью Майкрософт, Facebook,
    Google, Yahoo!, Open ID.** В этом сценарии вы управляете доступом к
    службе WCF (REST), используя интернет-удостоверение, например Live ID или
    учетную запись Майкрософт.
-   **Веб-приложение ASP.NET с REST-службой WCF с использованием общего маркера SWT.** В
    этом сценарии имеется распределенное приложение,
    состоящее из интерфейсного веб-приложения ASP.NET и подчиненной службы REST.
    Вам требуется передавать контекст пользователя через физические уровни.
-   **Авторизации доступа на основе ролей (RBAC) в приложениях и службах,
    поддерживающих утверждения.** В этом сценарии вы можете реализовать
    логику авторизации в приложении на основе ролей.
-   **Авторизации на основе утверждений в приложениях и службах,
    поддерживающих утверждения.** В этом сценарии вы можете реализовать логику авторизации
    в приложении на основе комплексных правил авторизации.
-   **Сценарии идентификации и контроля доступа для службы хранилища Azure.**В
    этом сценарии вы должны реализовать безопасный общий доступ к контейнерам и
    BLOB-объектам хранилища Azure.
-   **Сценарии идентификации и контроля доступа базы данных SQL Azure.**База данных SQL
    поддерживает только проверку подлинности SQL Server. Проверка подлинности
    Windows (встроенный механизм безопасности) не поддерживается. Пользователи должны
    предоставлять учетные данные (имя входа и пароль) при каждом подключении
    к базе данных SQL.
-   **Сценарии идентификации и контроля доступа Azure Service Bus.**В этом
    сценарии вы должны предоставлять безопасный доступ к очередям Azure Service Bus.
-   **Сценарии идентификации и контроля доступа для кэша в памяти.**В этом сценарии
    необходимо предоставлять безопасный доступ к данным, управляемым службой кэша в памяти.
-   **Сценарии идентификации и контроля доступа Azure Marketplace.**В этом
    сценарии вы должны предоставлять безопасный доступ к наборам данных
    Azure Marketplace.

## Сценарии идентификации и контроля доступа Azure

В этом разделе описываются распространенные сценарии идентификации и управления доступом
для различных архитектур приложений. Для быстрой ориентации используйте
карту сценариев.

### Приложение веб-форм ASP.NET с федеративной проверкой подлинности

В этом варианте архитектуры ваше веб-приложение может быть развернуто
в Azure или локально. Пользователи приложения должны
проходить проверку подлинности корпоративной службы Active Directory или
интернет-поставщиков удостоверений.

Для реализации этих сценариев используйте контроль доступа Azure AD и Windows
Identity Foundation.

![Контроль доступа Azure AD][Контроль доступа Azure AD]

Для реализации этого сценария обратитесь к следующим ресурсам:

-   [Практическое руководство. Создание первого приложения ASP.NET с поддержкой утверждений с помощью ACS][Практическое руководство. Создание первого приложения ASP.NET с поддержкой утверждений с помощью ACS]
-   [Практическое руководство. Размещение страниц входа в веб-приложении ASP.NET][Практическое руководство. Размещение страниц входа в веб-приложении ASP.NET]
-   [Практическое руководство. Реализация авторизации на основе утверждений в приложении ASP.NET с поддержкой утверждений с помощью WIF и ACS][Практическое руководство. Реализация авторизации на основе утверждений в приложении ASP.NET с поддержкой утверждений с помощью WIF и ACS]
-   [Практическое руководство. Реализация управления доступом на основе ролей (RBAC) в приложении ASP.NET
    с поддержкой утверждений с помощью WIF и ACS][Практическое руководство. Реализация управления доступом на основе ролей (RBAC) в приложении ASP.NET
    с поддержкой утверждений с помощью WIF и ACS]
-   [Практическое руководство. Настройка доверия между службой ACS и веб-приложениями ASP.NET
    с помощью сертификатов X.509][Практическое руководство. Настройка доверия между службой ACS и веб-приложениями ASP.NET
    с помощью сертификатов X.509]
-   [Пример кода: простые формы ASP.NET][Пример кода: простые формы ASP.NET]

### Служба WCF (SOAP) с удостоверением службы

В этом варианте архитектуры ваша служба WCF (SOAP) может быть развернута
в Azure или локально. Доступ к службе осуществляется
как к подчиненной службе через веб-приложение или другую
веб-службу. Вам необходимо контролировать доступ к службе с использованием определенного
удостоверения приложения. Его можно сравнить с учетной записью пула приложений,
используемой в службах IIS. Хотя технологии различаются, подходы
схожи в том, что доступ к службе осуществляется с помощью
учетной записи приложения, а не учетной записи конечного пользователя.

Используйте удостоверение службы контроля доступа Azure AD.
Это похоже на учетную запись пула приложений IIS, которая используется
при развертывании приложений в Windows Server и службах IIS. Настройте контроль
доступа Azure AD для выдачи SAML-маркеров, которые будут обрабатываться WIF
в службе WCF (SOAP).

![Служба WCF (SOAP)][Служба WCF (SOAP)]

Для реализации этого сценария обратитесь к следующим ресурсам:

-   [Практическое руководство. Добавление удостоверений службы с сертификатом X.509, паролем
    или симметричным ключом][Практическое руководство. Добавление удостоверений службы с сертификатом X.509, паролем
    или симметричным ключом]
-   [Практическое руководство. Проверка подлинности с помощью сертификата клиента в службе WCF,
    защищенной ACS][Практическое руководство. Проверка подлинности с помощью сертификата клиента в службе WCF,
    защищенной ACS]
-   [Практическое руководство. Проверка подлинности с помощью имени пользователя и пароля в службе WCF,
    защищенной ACS][Практическое руководство. Проверка подлинности с помощью имени пользователя и пароля в службе WCF,
    защищенной ACS]
-   [Пример кода: проверка подлинности с использованием сертификата WCF][Пример кода: проверка подлинности с использованием сертификата WCF]
-   [Пример кода: проверка подлинности с помощью имени пользователя WCF][Пример кода: проверка подлинности с помощью имени пользователя WCF]

### Служба WCF (SOAP) с федеративной проверкой подлинности, удостоверения в Active Directory

В этом сценарии ваша служба WCF (SOAP) может быть развернута
в Azure или локально. Вам необходимо управлять доступом к ней,
используя удостоверение, контролируемое корпоративной службой Windows Server
Active Directory (AD).

Использование службы контроля доступа Azure AD, настроенной для
федерации с Windows Server AD FS. В этом случае не требуется настраивать удостоверение службы
в службе контроля доступа Azure AD. Агент, которому необходим
доступ к службе WCF (SOAP), предоставляет учетные данные службам AD FS и
после успешной проверки подлинности получает от AD FS токен. Затем маркер
отправляется службе контроля доступа Azure AD и возвращается
агенту. Агент использует маркер для отправки запроса службе
WCF (SOAP).

![Служба WCF (SOAP) с AD][Служба WCF (SOAP) с AD]

Для реализации этого сценария обратитесь к следующим ресурсам:

-   [Практическое руководство. Добавление удостоверений службы с сертификатом X.509, паролем
    или симметричным ключом][Практическое руководство. Добавление удостоверений службы с сертификатом X.509, паролем
    или симметричным ключом]
-   [Практическое руководство. Настройка служб AD FS 2.0 как поставщика удостоверений][Практическое руководство. Настройка служб AD FS 2.0 как поставщика удостоверений]
-   [Практическое руководство. Использование службы управления для настройки служб AD FS 2.0 как
    корпоративного поставщика удостоверений][Практическое руководство. Использование службы управления для настройки служб AD FS 2.0 как
    корпоративного поставщика удостоверений]
-   [Пример кода: федеративная проверка подлинности WCF с использованием служб AD FS 2.0][Пример кода: федеративная проверка подлинности WCF с использованием служб AD FS 2.0]

### Служба WCF (REST) с удостоверениями службы

В этом сценарии ваша служба WCF (REST) может быть развернута в
Azure или локально. Доступ к службе осуществляется как к подчиненной службе через
веб-приложение или другую веб-службу. Вам необходимо управлять доступом
к ней с помощью удостоверения приложения. Его можно сравнить
с учетной записью пула приложений, используемой в службах IIS. Хотя технологии
различаются, подходы схожи в том, что доступ к службе осуществляется
с помощью учетной записи приложения, а не учетной записи пользователя.

Используйте удостоверение службы контроля доступа Azure AD.
Настройка контроля доступа Azure AD для выдачи
маркеров SWT. Для обработки маркеров SWT на стороне службы REST можно
реализовать настраиваемый обработчик токенов и подключить его к конвейеру WIF
или "вручную" проанализировать его без использования
инфраструктуры WIF.

Рассмотрим следующую диаграмму (WIF использовать необязательно):

![Служба REST][Служба REST]

Для реализации этого сценария обратитесь к следующим ресурсам:

-   [Практическое руководство. Настройка доверия между службой ACS и службой WCF с помощью симметричных
    ключей][Практическое руководство. Настройка доверия между службой ACS и службой WCF с помощью симметричных
    ключей]
-   [Практическое руководство. Проверка подлинности REST-службы WCF, развернутой в Azure,
    с помощью ACS][Практическое руководство. Проверка подлинности REST-службы WCF, развернутой в Azure,
    с помощью ACS]
-   [Пример кода: веб-служба ASP.NET][Пример кода: веб-служба ASP.NET]
-   [Пример кода: приложение Windows Phone 7][Пример кода: веб-служба ASP.NET]
-   [Служба REST WCF с использованием маркера SWT, выданного службой
    контроля доступа Azure (ACS)][Служба REST WCF с использованием маркера SWT, выданного службой
    контроля доступа Azure (ACS)]

### Служба WCF (REST) с Live ID или учетной записью Майкрософт, Facebook, Google, Yahoo!, Open ID

В этом сценарии ваша служба WCF (REST) может быть развернута в
Azure или локально. Вам необходимо управлять доступом к ней, используя общедоступное
интернет-удостоверение, например Live ID, учетную запись Майкрософт или Facebook.

Использование службы контроля доступа Azure AD для выдачи маркеров SWT. Для обработки
маркеров SWT на стороне службы REST можно реализовать настраиваемый обработчик
маркеров и подключить его к конвейеру WIF или "вручную" проанализировать
его без использования инфраструктуры WIF.

Важно отметить, что для реализации этого сценария приложение
должно использовать функции управления браузером для получения учетных данных
конечного пользователя. Из-за этого сценарии, в которых доступ к службе REST
осуществляется из веб-приложения ASP.NET, не поддерживаются. Такой подход применим
только для сценариев, в которых доступ к службе REST осуществляется
клиентским приложением пользователя, например приложением Windows Phone 7 или
полнофункциональным клиентом для настольных ПК. Главная причина для использования
средств управления браузера в том, что интернет-удостоверения не поддерживают сценарии
с активным профилем (сценарии веб-служб). Интернет-удостоверения в основном поддерживают сценарии
пассивного профиля (веб-приложения), зависящие от перенаправлений браузера: здесь
средства управления браузером могут пригодиться.

Рассмотрим следующую диаграмму (WIF использовать необязательно, поэтому она не показана):

![WIF использовать необязательно.][WIF использовать необязательно.]

Для реализации этого сценария обратитесь к следующим ресурсам:

-   [Практическое руководство. Проверка подлинности REST-службы WCF, развернутой в Azure, с помощью ACS][Практическое руководство. Проверка подлинности REST-службы WCF, развернутой в Azure,
    с помощью ACS]
-   [Практическое руководство. Настройка Google как поставщика удостоверений][Практическое руководство. Настройка Google как поставщика удостоверений]
-   [Практическое руководство. Настройка Facebook как поставщика удостоверений][Практическое руководство. Настройка Facebook как поставщика удостоверений]
-   [Практическое руководство. Настройка Yahoo! как поставщика удостоверений][Практическое руководство. Настройка Yahoo! как поставщика удостоверений]
-   [Пример кода: приложение Windows Phone 7][Пример кода: веб-служба ASP.NET]
-   [Служба REST WCF с использованием маркера SWT, выданного службой
    контроля доступа Azure (ACS)][Служба REST WCF с использованием маркера SWT, выданного службой
    контроля доступа Azure (ACS)]

### Веб-приложение ASP.NET с REST-службой WCF с использованием общего маркера SWT

В этом сценарии имеется распределенное приложение, состоящее из интерфейсного
веб-приложения ASP.NET и подчиненной службы REST. Вам требуется передавать
контекст пользователя через физические уровни. Иногда это необходимо
при реализации логики авторизации или ведения журнала на основе удостоверения
конечного пользователя в подчиненной службе REST.

Настройка службы контроля доступа Azure AD для выдачи маркеров SWT. Токен SWT
выдается интерфейсному веб-приложению ASP.NET, а затем предоставляется
подчиненной службе REST. В этом случае в службе контроля доступа Azure AD
настраивается только одна проверяющая сторона. Однако существует
ряд особенностей.

-   Поскольку WIF не предоставляет встроенный обработчик маркеров SWT, необходимо
    реализовать пользовательский обработчик для веб-приложения
    ASP.NET. Воспользуйтесь встроенными возможностями поддержки протокола
    WS-Federation в WIF, которые основаны на перенаправлениях браузера,
    а не делайте всю тяжелую работу по реализации самостоятельно.
-   При реализации пользовательского обработчика маркеров SWT убедитесь,
    что маркер начальной загрузки обрабатывается и сохраняется.
    В противном случае вы не сможете совместно использовать его и отправить его
    подчиненной службе REST.
-   Не нужно использовать WIF в службе REST. Вместо этого можно проанализировать
    маркер "вручную", так как в данном случае нет необходимости обрабатывать
    перенаправления.

![Веб-приложение ASP.NET][Веб-приложение ASP.NET]

Для реализации этого сценария обратитесь к следующим ресурсам:

-   [Практическое руководство. Настройка Google как поставщика удостоверений][Практическое руководство. Настройка Google как поставщика удостоверений]
-   [Практическое руководство. Настройка Facebook как поставщика удостоверений][Практическое руководство. Настройка Facebook как поставщика удостоверений]
-   [Практическое руководство. Настройка Yahoo! как поставщика удостоверений][Практическое руководство. Настройка Yahoo! как поставщика удостоверений]
-   [Делегирование веб-приложения ASP.NET REST-службе WCF с использованием общего
    маркера SWT][Делегирование веб-приложения ASP.NET REST-службе WCF с использованием общего
    маркера SWT]

### Управление доступом на основе ролей (RBAC) в приложениях и службах, поддерживающих утверждения

В этом сценарии необходимо реализовать авторизацию в веб-приложении
или службе на основе ролей пользователей: пользователи с необходимыми ролями
получают доступ, но не пользователи без соответствующих ролей. Проще говоря,
ваше приложение должно ответить на простой вопрос. Есть ли у пользователя
роль X?

Существует несколько способов реализации этого сценария. Можно использовать службу
контроля доступа Azure AD, диспетчер проверки подлинности утверждений WIF,
сопоставление samlSecurityTokenRequirement или диспетчер ролей клиента.

WIF используется во всех случаях. WIF поддерживает метод
IPrincipal.IsInRole("MyRole"). В большинстве случаев необходимо убедиться, что в маркере есть утверждение о типе роли
с URI
<http://schemas.microsoft.com/ws/2008/06/identity/claims/role>, чтобы служба WIF
могла успешно проверить членство в роли
при вызове метода IsInRole.

**Контроль доступа Azure AD**. В этой реализации используется
модуль правил преобразования утверждений службы контроля доступа Azure AD. С помощью
этого модуля можно преобразовать любое входящее утверждение
в утверждение типа роли, чтобы после поступления маркера
в приложение или службу WIF могла проанализировать это утверждение роли
для успешного вызова метода IsInRole.

![][]

**WIF ClaimsAuthenticationManager**. Эта реализация использует
ClaimsAuthenticationManager как точку расширения WIF. При таком подходе
вы преобразуете все входящие утверждения в тип утверждения роли
в приложении. Сложность преобразования ограничивается
только написанным кодом.

![][1]

**Сопоставление samlSecurityTokenRequriement** В этой реализации конфигурация
samlSecurityTokenRequirement в файле web.config используется, чтобы сообщить WIF,
какие типы утверждений действуют как типы утверждения роли. Например,
если маркер содержит утверждение типа группы, его можно сопоставить с типом
утверждения роли. При таком подходе можно добиться только простых сопоставлений.

![][2]

**Пользовательский интерфейс RoleManager.** В этой реализации можно создать пользовательский
интерфейс RoleManager. WIF используется для проверки входящих утверждений при реализации
пользовательских методов интерфейса RoleManager, например GetAllRoles().

![][3]

Для реализации этого сценария обратитесь к следующим ресурсам:

-   [Практическое руководство. Реализация управления доступом на основе ролей (RBAC) в приложении ASP.NET
    с поддержкой утверждений с помощью WIF и ACS][Практическое руководство. Реализация управления доступом на основе ролей (RBAC) в приложении ASP.NET
    с поддержкой утверждений с помощью WIF и ACS]
-   [Практическое руководство. Реализация логики преобразования маркеров с помощью правил][Практическое руководство. Реализация логики преобразования маркеров с помощью правил]
-   [Авторизация с использованием RoleManager для веб-приложений ASP.NET (WIF)
    с поддержкой утверждений][Авторизация с использованием RoleManager для веб-приложений ASP.NET (WIF)
    с поддержкой утверждений]
-   Пример кода: использование утверждений в IsInRole в [Windows Identity
    Foundation SDK][Windows Identity
    Foundation SDK]

### Авторизации на основе утверждений в приложениях и службах, поддерживающих утверждения

В этом сценарии вам необходимо реализовать сложную логику авторизации
в веб-приложении или службе, а метод IsInRole()
для авторизации не подходит. Если ваш подход
к авторизации зависит от ролей, следует реализовать управление доступом
на основе ролей, описанное в предыдущем разделе.

Использование ClaimsAuthorizationManager в качестве точки расширения WIF.
ClaimsAuthorizationManager позволяет выполнять вызовы проверки внешнего доступа, поэтому
код приложения будет более понятным, чем
при реализации проверки доступа в коде приложения.

![][4]

Для реализации этого сценария обратитесь к следующим ресурсам:

-   [Практическое руководство. Реализация логики преобразования маркеров с помощью правил][Практическое руководство. Реализация логики преобразования маркеров с помощью правил]
-   [Практическое руководство. Реализация авторизации на основе утверждений в приложении ASP.NET
    с поддержкой утверждений с помощью WIF и ACS][Практическое руководство. Реализация авторизации на основе утверждений в приложении ASP.NET с поддержкой утверждений с помощью WIF и ACS]
-   Пример кода: авторизация на основе утверждений в [Windows Identity
    Foundation SDK][Windows Identity
    Foundation SDK]

## Сценарии идентификации и контроля доступа службы хранилища Azure

В этом сценарии вам необходимо обеспечить безопасный общий доступ
к хранилищу BLOB-объектов и контейнеров Azure.

Использование подписей коллективного доступа. Для доступа к учетной записи службы хранилища
из собственного приложения используйте общий хэш, который доступен
на портале Azure при настройке учетных записей
службы хранилища и управлении ими. Если необходимо предоставить другому пользователю доступ к BLOB-объектам и
контейнерам в вашей учетной записи службы хранилища, используйте URL-адрес
подписи коллективного доступа.

Особое внимание следует уделить безопасному управлению информацией,
чтобы предотвратить ее разглашение. Также уделите внимание сроку действия
подписей коллективного доступа.

![][5]

Для реализации этого сценария обратитесь к следующим ресурсам:

-   [Управление доступом к BLOB-объектам и контейнерам][Управление доступом к BLOB-объектам и контейнерам]
-   [Новые возможности хранилища: подписи коллективного доступа][Новые возможности хранилища: подписи коллективного доступа]
-   [Подписи коллективного доступа в наши дни стали намного проще][Подписи коллективного доступа в наши дни стали намного проще]

## Сценарии идентификации и контроля доступа базы данных SQL Azure

База данных SQL поддерживает только проверку подлинности SQL Server. Проверка подлинности
Windows (встроенный механизм безопасности) не поддерживается. Пользователи должны
предоставлять учетные данные (имя входа и пароль) при каждом подключении
к базе данных SQL. Уделите особое внимание управлению именами пользователей
и паролями, чтобы избежать раскрытия информации.

![][6]

Для реализации этого сценария обратитесь к следующим ресурсам:

-   [Рекомендации и ограничения системы безопасности (база данных SQL)][Рекомендации и ограничения системы безопасности (база данных SQL)]
-   [Практическое руководство. Подключение к базе данных SQL с помощью sqlcmd][Практическое руководство. Подключение к базе данных SQL с помощью sqlcmd]
-   [Практическое руководство. Подключение к базе данных SQL с помощью ADO.NET][Практическое руководство. Подключение к базе данных SQL с помощью ADO.NET]
-   [Практическое руководство. Подключение к базе данных SQL через ASP.NET][Практическое руководство. Подключение к базе данных SQL через ASP.NET]
-   [Практическое руководство. Подключение к базе данных SQL через службы данных WCF][Практическое руководство. Подключение к базе данных SQL через службы данных WCF]
-   [Практическое руководство. Подключение к базе данных SQL с помощью PHP][Практическое руководство. Подключение к базе данных SQL с помощью PHP]
-   [Практическое руководство. Подключение к базе данных SQL с помощью JDBC][Практическое руководство. Подключение к базе данных SQL с помощью JDBC]
-   [Практическое руководство. Подключение к базе данных SQL с помощью ADO.NET Entity Framework][Практическое руководство. Подключение к базе данных SQL с помощью ADO.NET Entity Framework]

## Сценарии идентификации и контроля доступа Azure Service Bus

У служб Service Bus и контроля доступа Azure AD есть особая связь.
Она состоит в том, что каждое пространство имен Service Bus объединяется
с соответствующим пространством имен службы контроля доступа с таким же именем
с помощью суффикса -sb. Причина такой связи в том, что
Service Bus и служба контроля доступа управляют отношением взаимного доверия
и связанной секретной информацией шифрования. Дополнительные сведения
см. в следующих ресурсах.

![][7]

Для реализации этого сценария обратитесь к следующим ресурсам:

-   [Защита Service Bus с помощью службы ACS][Защита Service Bus с помощью службы ACS] (видео)
-   [Защита Service Bus с помощью службы ACS][8] (слайды)
-   [Проверка подлинности и авторизация Service Bus с помощью службы
    контроля доступа][Проверка подлинности и авторизация Service Bus с помощью службы
    контроля доступа]

## Сценарии идентификации и контроля доступа для кэша в памяти

Кэш в памяти (ранее известный как кэш Azure) использует для проверки подлинности
контроля доступа Azure AD общие ключи,
доступные через портал управления. Используйте ключи в коде или
файлах конфигурации при обращении к кэшу. Обязательно храните ключи
в безопасности, чтобы избежать раскрытия информации.

![][9]

Для реализации этого сценария обратитесь к следующим ресурсам:

-   [Практическое руководство. Настройка кэша клиента программным способом для
    Azure Caching][Практическое руководство. Настройка кэша клиента программным способом для
    Azure Caching]
-   [Практическое руководство. Настройка клиента кэша с помощью файла конфигурации приложения
    для Azure Caching][Практическое руководство. Настройка клиента кэша с помощью файла конфигурации приложения
    для Azure Caching]
-   [Примеры использования Azure Service Bus и Caching][Примеры использования Azure Service Bus и Caching] (раздел
    примеров Caching)

## Сценарии идентификации и контроля доступа Azure Marketplace

При каждом обращении к набору данных Azure Marketplace, бесплатном или
платном, необходимо проверить подлинность пользователя перед предоставлением доступа. При создании
приложения в код необходимо добавить процесс проверки
подлинности. Рассмотрим наиболее распространенные сценарии:

### Я получаю доступ к моему набору данных

В этом сценарии вы создаете приложение, которое использует наборы данных
вашей подписки на Marketplace. Вы являетесь пользователем приложения.
Приложение может быть развернуто в Azure, локально или в Marketplace.

Используйте общий ключ, который доступен по подписке на
Marketplace. Общий ключ можно получить с помощью портала Магазина.

![][10]

Для реализации этого сценария обратитесь к следующим ресурсам:

-   [Использование обычной проверки подлинности HTTP в приложении Marketplace][Использование обычной проверки подлинности HTTP в приложении Marketplace]

### Пользователи получают доступ к моему набору данных

В этом сценарии создается приложение, которое позволяет пользователям
получить доступ к вашему набору данных. Приложение может быть развернуто в Azure,
локально или в Marketplace.

Для реализации этого сценария используйте делегирование OAuth. Пользователям будет предложено
ввести их учетные данные Live ID или учетной записи Майкрософт, после чего
реализуется процесс согласия.

![][11]

Для реализации этого сценария обратитесь к следующим ресурсам:

-   [Пример веб-клиента OAuth][Пример веб-клиента OAuth]
-   [Пример полнофункционального клиента OAuth][Пример полнофункционального клиента OAuth]

### Приложение получает доступ к API Marketplace

В этом сценарии создается приложение, которое обращается к
API Marketplace. Для успешного выполнения вызовов к API Marketplace
необходимо пройти проверку подлинности. Приложение развертывается в
Azure Marketplace.

![][12]

Дополнительные сведения о реализации проверки подлинности
см. в комплекте публикации для Marketplace.

Для реализации этого сценария обратитесь к следующим ресурсам:

-   [Загрузка комплекта публикации приложения][Загрузка комплекта публикации приложения]
-   [Представляем Azure Marketplace для приложений][Представляем Azure Marketplace для приложений]

## Приспособления безопасности

В данном разделе описываются другие меры безопасности Windows Identity Foundation и
контроля доступа Azure AD. Используйте его как базовый контрольный список
для этих технологий при разработке и развертывании приложения.

### Windows Identity Foundation

Ниже приведены основные приспособления безопасности WIF. Приведенные ниже сведения являются
выдержкой из документов [Вопросы проектирования WIF][Вопросы проектирования WIF] и [Безопасность Windows Identity Foundation
(WIF) для веб-приложений ASP.NET — угрозы и контрмеры][Безопасность Windows Identity Foundation
(WIF) для веб-приложений ASP.NET — угрозы и контрмеры].

-   **IssuerNameRegistry**. Определяет доверенные службы маркеров безопасности
    (STS). Убедитесь, что отображается только одна доверенная служба STS.
-   **cookieHandler requireSsl="true"**. Указывает, переданы ли
    файлы cookie сеанса по протоколу SSL.
-   **wsFederation's requireHttps="true"**. Указывает, было ли
    взаимодействие протокола федерации с поставщиком удостоверений выполнено
    по протоколу SSL.
-   **tokenReplayDetection enabled="true"**. Указывает, включена ли
    функция обнаружения воспроизведения маркеров. Помните, что эта функция
    создает сходство сервера при управлении локальными копиями используемых маркеров.
-   **audienceUris**. Указывает целевую аудиторию токена. Если приложение
    получает токен, который не предназначен для него,
    маркер будет отклонен WIF.
-   **requestValidation** и **httpRuntime requestValidationType**.
    Включает или отключает функцию проверки ASP.NET. См. инструкции
    в документе [Windows Identity Foundation (WIF): обнаружено потенциально
    опасное значение Request.Form от клиента][Windows Identity Foundation (WIF): обнаружено потенциально
    опасное значение Request.Form от клиента].

### Контроль доступа Azure AD

Рассмотрим следующие меры безопасности в развертывании
контроля доступа Azure AD. Приведенные ниже сведения являются выдержкой из документов [Рекомендации по безопасности
ACS][Рекомендации по безопасности
ACS] и [Рекомендации по управлению сертификатами и ключами][Рекомендации по управлению сертификатами и ключами].

-   **Срок действия маркера STS**. Используйте портал контроля доступа Azure AD
    для настройки агрессивного срока действия маркеров.
-   **Проверка данных при использовании URL-адреса ошибки**. Для использования
    URL-адреса ошибки контроля доступа Azure AD требуется анонимный доступ
    к странице приложения, с которой отправляются сообщения об ошибках. Считайте все данные, поступающие
    на эту страницу, опасными и полученными из ненадежного источника.
-   **Шифрование маркеров для сценариев с высокой степенью конфиденциальности**. Шифруйте маркеры,
    чтобы устранить угрозу раскрытия информации
    в маркере.
-   **Шифрование файлов cookie с помощью RSA при развертывании в Azure**.
    WIF по умолчанию шифрует файлы cookie с помощью DPAPI. Служба создает
    сходство сервера, что может привести к исключениям при развертывании в веб-ферме
    и средах Azure. Вместо этого используйте RSA для веб-ферм
    и Azure.
-   **Сертификаты подписи маркеров**. Периодически обновляйте сертификаты
    подписи маркеров, чтобы предотвратить атаки "отказ в обслуживании". Azure AD Access
    Control подписывает все выдаваемые маркеры безопасности. Сертификаты X.509
    используются для подписи при создании приложения, которое применяет маркеры
    SAML, выданные ACS. Когда срок действия сертификатов подписи истекает,
    при попытке получить маркер будут возникать ошибки.
-   **Ключи подписи маркеров**. Периодически обновляйте ключи подписи маркеров,
    чтобы предотвратить атаки "отказ в обслуживании". Служба контроля доступа Azure AD подписывает все
    выдаваемые маркеры безопасности. 256-разрядные симметричные ключи используются
    для подписи при создании приложения, которое применяет маркеры SWT,
    выданные ACS. Когда срок действия ключей подписи истекает, при попытке получить маркер
    будут возникать ошибки.
-   **Сертификаты шифрования маркеров**. Периодически обновляйте
    сертификаты шифрования маркеров, чтобы предотвратить атаки "отказ в обслуживании". Токен
    шифрования необходим, если приложение проверяющей стороны является
    веб-службой, использующей токены подтверждения владения по протоколу WS-Trust.
    В других случаях шифрование маркеров не является обязательным. Когда срок действия
    сертификатов шифрования истекает, при попытке получить маркер будут
    возникать ошибки.
-   **Сертификаты расшифровки маркеров**. Периодически обновляйте сертификаты
    расшифровки маркеров, чтобы предотвратить атаки "отказ в обслуживании". Служба
    контроля доступа Azure AD может принимать зашифрованные маркеры поставщиков удостоверений
    WS-Federation (например, служб федерации Active Directory 2.0). Для расшифровки используется
    сертификат X.509, размещенный в службе контроля доступа Azure AD.
    Когда срок действия сертификатов расшифровки истекает, при попытке получить маркер
    будут возникать ошибки.
-   **Учетные данные удостоверения службы**. Периодически обновляйте учетные данные
    удостоверения службы, чтобы предотвратить атаки "отказ в обслуживании". Удостоверения службы
    используют глобально настроенные учетные данные для пространства имен службы
    контроля доступа Azure AD, которое позволяет приложениям или клиентам
    проходить проверку подлинности непосредственно в службе контроля доступа Azure AD
    и получать токен. Существует три типа учетных данных,
    с которыми можно связать идентификатор службы контроля доступа Azure AD: симметричный
    ключ, пароль и сертификат X.509. Когда срок действия учетных данных
    закончится, вы начнете получать исключения.
-   **Учетные данные учетной записи службы контроля доступа
    Azure AD**. Периодически обновляйте учетные данные службы управления,
    чтобы предотвратить атаки "отказ в обслуживании". Служба контроля доступа Azure AD
    является ключевым компонентом, который позволяет
    программно настраивать параметры пространства имен
    службы контроля доступа Azure AD и управлять ими. Существует три типа учетных данных,
    с которыми можно связать учетную запись службы управления. Это
    симметричный ключ, пароль и сертификат X.509. Когда
    срок действия учетных данных закончится, вы начнете получать исключения.
-   **Сертификаты подписи и шифрования поставщика удостоверений
    WS-Federation**. Проверяйте действительность сертификата
    поставщика удостоверений WS-Federation, чтобы предотвратить атаки "отказ в обслуживании". Сертификат
    поставщика удостоверений WS-Federation доступен через его метаданные.
    При настройке поставщика удостоверений WS-Federation, например служб федерации Active Directory,
    сертификат подписи WS-Federation настраивается с помощью метаданных WS-Federation,
    доступных через URL-адрес или в виде файла. После настройки
    поставщика удостоверений WS-Federation используйте службу
    контроля доступа Azure AD для запроса действительности
    сертификатов. Когда срок действия сертификата закончится, вы начнете
    получать исключения.

## Совместное размещение с помощью веб-сайтов Azure

Все сценарии и решения, описанные в этой статье, допустимы, если приложение
размещено на веб-сайтах Azure.

## Виртуальные машины Azure

Все сценарии и решения, описанные в этой статье, допустимы, если приложение
размещено на виртуальных машинах Azure.

## Ресурсы

-   [Учебный набор для разработчиков служб идентификации][13]
-   [Обучающий курс MSDN для разработчиков служб идентификации][14]
-   [Руководство по идентификации, основанной на утверждениях и контроле доступа][15]
-   [Служба контроля доступа][Служба контроля доступа]
-   [Практические советы по работе с сервером управления доступом][Практические руководства по работе со службой Service Bus]
-   [Защита веб-приложения ASP.NET с веб-ролью Azure средствами службы управления доступом 2.0][Защита веб-приложения ASP.NET с веб-ролью Azure средствами службы управления доступом 2.0]
-   [Ученые видеофильмы по серверу управления доступом (ACS) Azure AD][Ученые видеофильмы по серверу управления доступом (ACS) Azure AD]
-   [Жизненный цикл разработки средств безопасности Майкрософт][Жизненный цикл разработки средств безопасности Майкрософт]
-   [Средство моделирования угроз SDL Threat Modeling Tool 3.1.8][Средство моделирования угроз SDL Threat Modeling Tool 3.1.8]
-   [Блоги, посвященные безопасности и конфиденциальности][Блоги, посвященные безопасности и конфиденциальности]
-   [Центр Security Response Center][Центр Security Response Center]
-   [Отчет службы безопасности][Отчет службы безопасности]
-   [Жизненный цикл разработки средств безопасности][Жизненный цикл разработки средств безопасности Майкрософт]
-   [Центр разработчиков средств безопасности (MSDN)][Центр разработчиков средств безопасности (MSDN)]

  [Заметки о безопасности
  Azure (PDF)]: http://blogs.msdn.com/b/jmeier/archive/2010/08/03/now-available-azure-security-notes-pdf.aspx
  [Защита приложения]: ./media/SecurityRX/01_SecuringTheApplication.gif
  [Памятка: механизм
  безопасности веб-приложения]: http://msdn.microsoft.com/ru-ru/library/ff649461.aspx
  [Руководство по безопасности для приложений]: http://msdn.microsoft.com/ru-ru/library/ff650760.aspx
  [Угрозы, уязвимости и атаки]: ./media/SecurityRX/02_ThreatsVulnerabilitiesandAttacks.gif
  [Примеры Windows Identity Foundation 4.5]: http://code.msdn.microsoft.com/site/search?f%5B0%5D.Type=SearchText&f%5B0%5D.Value=wif&f%5B1%5D.Type=Topic&f%5B1%5D.Value=claims-based%20authentication
  [Средства Windows Identity Foundation 4.5 для Visual Studio 11 Beta]: http://visualstudiogallery.msdn.microsoft.com/e21bf653-dfe1-4d81-b3d3-795cb104066e
  [Среда выполнения Windows Identity Foundation (.Net 3.5/4.0)]: http://www.microsoft.com/ru-ru/download/details.aspx?id=17331
  [Примеры Windows Identity Foundation 3.5/4.0 и шаблоны Visual Studio
  2008/2010]: http://www.microsoft.com/ru-ru/download/details.aspx?displaylang=en&id=4451
  [Служба Access Control 2.0]: http://msdn.microsoft.com/library/gg429786.aspx
  [Сценарии и решения с использованием ACS]: http://msdn.microsoft.com/ru-ru/library/gg185920.aspx
  [Практические руководства по работе со службой Service Bus]: http://msdn.microsoft.com/ru-ru/library/windowsazure/gg185939.aspx
  [Руководство по идентификации, основанной на утверждениях и контроле доступа]: http://msdn.microsoft.com/ru-ru/library/ff423674.aspx
  [Учебный набор для разработчиков служб идентификации]: http://www.microsoft.com/ru-ru/download/details.aspx?id=14347
  [Обучающий курс MSDN для разработчиков служб идентификации]: http://msdn.microsoft.com/ru-ru/IdentityTrainingCourse
  [Карта содержимого AD FS 2.0]: http://social.technet.microsoft.com/wiki/contents/articles/2735.ad-fs-2-0-content-map.aspx
  [Проектирование единого входа в Интернете]: http://technet.microsoft.com/ru-ru/library/dd807033(WS.10).aspx
  [Проектирование федеративного единого входа в Интернете]: http://technet.microsoft.com/ru-ru/library/dd807050(WS.10).aspx
  [Управление доступом к BLOB-объектам и контейнерам]: http://msdn.microsoft.com/ru-ru/library/ee393343.aspx
  [Новые возможности хранилища: подписи коллективного доступа]: http://blog.smarx.com/posts/new-storage-feature-signed-access-signatures
  [Подписи коллективного доступа в наши дни стали намного проще]: http://blog.smarx.com/posts/shared-access-signatures-are-easy-these-days
  [Контроль доступа Azure AD]: ./media/SecurityRX/03_WindowsAzureADAccesscontrol.gif
  [Практическое руководство. Создание первого приложения ASP.NET с поддержкой утверждений с помощью ACS]: http://msdn.microsoft.com/ru-ru/library/gg429779.aspx
  [Практическое руководство. Размещение страниц входа в веб-приложении ASP.NET]: http://msdn.microsoft.com/ru-ru/library/gg185926.aspx
  [Практическое руководство. Реализация авторизации на основе утверждений в приложении ASP.NET с поддержкой утверждений с помощью WIF и ACS]: http://msdn.microsoft.com/ru-ru/library/gg185907.aspx
  [Практическое руководство. Реализация управления доступом на основе ролей (RBAC) в приложении ASP.NET
  с поддержкой утверждений с помощью WIF и ACS]: http://msdn.microsoft.com/ru-ru/library/gg185914.aspx
  [Практическое руководство. Настройка доверия между службой ACS и веб-приложениями ASP.NET
  с помощью сертификатов X.509]: http://msdn.microsoft.com/ru-ru/library/gg185947.aspx
  [Пример кода: простые формы ASP.NET]: http://msdn.microsoft.com/ru-ru/library/gg185938.aspx
  [Служба WCF (SOAP)]: ./media/SecurityRX/04_WCF(SOAP)Service.gif
  [Практическое руководство. Добавление удостоверений службы с сертификатом X.509, паролем
  или симметричным ключом]: http://msdn.microsoft.com/ru-ru/library/gg185924.aspx
  [Практическое руководство. Проверка подлинности с помощью сертификата клиента в службе WCF,
  защищенной ACS]: http://msdn.microsoft.com/ru-ru/library/hh289316.aspx
  [Практическое руководство. Проверка подлинности с помощью имени пользователя и пароля в службе WCF,
  защищенной ACS]: http://msdn.microsoft.com/ru-ru/library/gg185954.aspx
  [Пример кода: проверка подлинности с использованием сертификата WCF]: http://msdn.microsoft.com/ru-ru/library/gg185952.aspx
  [Пример кода: проверка подлинности с помощью имени пользователя WCF]: http://msdn.microsoft.com/ru-ru/library/gg185927.aspx
  [Служба WCF (SOAP) с AD]: ./media/SecurityRX/05_AzureADAccessControl.gif
  [Практическое руководство. Настройка служб AD FS 2.0 как поставщика удостоверений]: http://msdn.microsoft.com/ru-ru/library/gg185961.aspx
  [Практическое руководство. Использование службы управления для настройки служб AD FS 2.0 как
  корпоративного поставщика удостоверений]: http://msdn.microsoft.com/ru-ru/library/gg185905.aspx
  [Пример кода: федеративная проверка подлинности WCF с использованием служб AD FS 2.0]: http://msdn.microsoft.com/ru-ru/library/hh127796.aspx
  [Служба REST]: ./media/SecurityRX/06_RESTService.gif
  [Практическое руководство. Настройка доверия между службой ACS и службой WCF с помощью симметричных
  ключей]: http://msdn.microsoft.com/ru-ru/library/gg185958.aspx
  [Практическое руководство. Проверка подлинности REST-службы WCF, развернутой в Azure,
  с помощью ACS]: http://msdn.microsoft.com/ru-ru/library/hh289317.aspx
  [Пример кода: веб-служба ASP.NET]: http://msdn.microsoft.com/ru-ru/library/gg983271.aspx
  [Служба REST WCF с использованием маркера SWT, выданного службой
  контроля доступа Azure (ACS)]: http://code.msdn.microsoft.com/REST-WCF-With-SWT-Token-123d93c0
  [WIF использовать необязательно.]: ./media/SecurityRX/07_WIFisOptional.gif
  [Практическое руководство. Настройка Google как поставщика удостоверений]: http://msdn.microsoft.com/ru-ru/library/gg185976.aspx
  [Практическое руководство. Настройка Facebook как поставщика удостоверений]: http://msdn.microsoft.com/ru-ru/library/gg185919.aspx
  [Практическое руководство. Настройка Yahoo! как поставщика удостоверений]: http://msdn.microsoft.com/ru-ru/library/gg185977.aspx
  [Веб-приложение ASP.NET]: ./media/SecurityRX/08_ASPNETWebApptoREST.gif
  [Делегирование веб-приложения ASP.NET REST-службе WCF с использованием общего
  маркера SWT]: http://code.msdn.microsoft.com/ASPNET-Web-App-To-REST-WCF-b2b95f82
  []: ./media/SecurityRX/09_RBAC.gif
  [1]: ./media/SecurityRX/10_WIFClaimsAuthenticationManager.gif
  [2]: ./media/SecurityRX/11_SecurityTokenRequriementmapping.gif
  [3]: ./media/SecurityRX/12_CustomRoleManager.gif
  [Практическое руководство. Реализация логики преобразования маркеров с помощью правил]: http://msdn.microsoft.com/ru-ru/library/gg185955.aspx
  [Авторизация с использованием RoleManager для веб-приложений ASP.NET (WIF)
  с поддержкой утверждений]: http://blogs.msdn.com/b/alikl/archive/2010/11/18/authorization-with-rolemanager-for-claims-aware-wif-asp-net-web-applications.aspx
  [Windows Identity
  Foundation SDK]: http://www.microsoft.com/downloads/details.aspx?FamilyID=c148b2df-c7af-46bb-9162-2c9422208504
  [4]: ./media/SecurityRX/13_ClaimsAuthorizationManager.gif
  [5]: ./media/SecurityRX/14_WindowsAzurestorage.gif
  [6]: ./media/SecurityRX/15_SQLAzureIdentityandAccessScenarios.gif
  [Рекомендации и ограничения системы безопасности (база данных SQL)]: http://msdn.microsoft.com/ru-ru/library/windowsazure/ff394108.aspx#authentication
  [Практическое руководство. Подключение к базе данных SQL с помощью sqlcmd]: http://msdn.microsoft.com/ru-ru/library/windowsazure/ee336280.aspx
  [Практическое руководство. Подключение к базе данных SQL с помощью ADO.NET]: http://msdn.microsoft.com/ru-ru/library/windowsazure/ee336243.aspx
  [Практическое руководство. Подключение к базе данных SQL через ASP.NET]: http://msdn.microsoft.com/ru-ru/library/windowsazure/ee621781.aspx
  [Практическое руководство. Подключение к базе данных SQL через службы данных WCF]: http://msdn.microsoft.com/ru-ru/library/windowsazure/ee621789.aspx
  [Практическое руководство. Подключение к базе данных SQL с помощью PHP]: http://msdn.microsoft.com/ru-ru/library/windowsazure/ff394110.aspx
  [Практическое руководство. Подключение к базе данных SQL с помощью JDBC]: http://msdn.microsoft.com/ru-ru/library/windowsazure/gg715284.aspx
  [Практическое руководство. Подключение к базе данных SQL с помощью ADO.NET Entity Framework]: http://msdn.microsoft.com/ru-ru/library/windowsazure/ff951633.aspx
  [7]: ./media/SecurityRX/16_WindowsAzureServiceBusIdentity.gif
  [Защита Service Bus с помощью службы ACS]: http://channel9.msdn.com/posts/Securing-Service-Bus-with-ACS
  [8]: https://skydrive.live.com/view.aspx?cid=123CCD2A7AB10107&resid=123CCD2A7AB10107%211849
  [Проверка подлинности и авторизация Service Bus с помощью службы
  контроля доступа]: http://msdn.microsoft.com/ru-ru/library/hh403962.aspx
  [9]: ./media/SecurityRX/17_WindowsAzureCacheIdentity.gif
  [Практическое руководство. Настройка кэша клиента программным способом для
  Azure Caching]: http://msdn.microsoft.com/ru-ru/library/windowsazure/gg618003.aspx
  [Практическое руководство. Настройка клиента кэша с помощью файла конфигурации приложения
  для Azure Caching]: http://msdn.microsoft.com/ru-ru/library/windowsazure/gg278346.aspx
  [Примеры использования Azure Service Bus и Caching]: http://msdn.microsoft.com/ru-ru/library/ee706741.aspx
  [10]: ./media/SecurityRX/18_IAccessMyDataset.gif
  [Использование обычной проверки подлинности HTTP в приложении Marketplace]: http://msdn.microsoft.com/ru-ru/library/gg193417.aspx
  [11]: ./media/SecurityRX/19_UsersAccessMyDatasets.gif
  [Пример веб-клиента OAuth]: http://go.microsoft.com/fwlink/?LinkId=219162
  [Пример полнофункционального клиента OAuth]: http://go.microsoft.com/fwlink/?LinkId=219163
  [12]: ./media/SecurityRX/20_ApplicationAccessMarketplaceAPI.gif
  [Загрузка комплекта публикации приложения]: http://go.microsoft.com/fwlink/?LinkId=221323
  [Представляем Azure Marketplace для приложений]: https://datamarket.azure.com/
  [Вопросы проектирования WIF]: http://msdn.microsoft.com/ru-ru/library/ee517298.aspx
  [Безопасность Windows Identity Foundation
  (WIF) для веб-приложений ASP.NET — угрозы и контрмеры]: http://blogs.msdn.com/b/alikl/archive/2010/12/02/windows-identity-foundation-wif-security-for-asp-net-web-applications-threats-amp-countermeasures.aspx
  [Windows Identity Foundation (WIF): обнаружено потенциально
  опасное значение Request.Form от клиента]: http://social.technet.microsoft.com/wiki/contents/articles/1725.windows-identity-foundation-wif-a-potentially-dangerous-request-form-value-was-detected-from-the-client-wresult-t-requestsecurityto.aspx
  [Рекомендации по безопасности
  ACS]: http://msdn.microsoft.com/ru-ru/library/gg185962.aspx
  [Рекомендации по управлению сертификатами и ключами]: http://msdn.microsoft.com/ru-ru/library/hh204521.aspx
  [13]: http://go.microsoft.com/fwlink/?LinkId=214555
  [14]: http://go.microsoft.com/fwlink/?LinkId=214561
  [15]: http://go.microsoft.com/fwlink/?LinkId=214562
  [Служба контроля доступа]: http://msdn.microsoft.com/ru-ru/library/windowsazure/gg429786.aspx
  [Защита веб-приложения ASP.NET с веб-ролью Azure средствами службы управления доступом 2.0]: http://social.technet.microsoft.com/wiki/contents/articles/2590.aspx
  [Ученые видеофильмы по серверу управления доступом (ACS) Azure AD]: http://social.technet.microsoft.com/wiki/contents/articles/2777.aspx
  [Жизненный цикл разработки средств безопасности Майкрософт]: http://www.microsoft.com/security/sdl/default.aspx
  [Средство моделирования угроз SDL Threat Modeling Tool 3.1.8]: http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=2955
  [Блоги, посвященные безопасности и конфиденциальности]: http://www.microsoft.com/about/twc/en/us/blogs.aspx
  [Центр Security Response Center]: http://www.microsoft.com/security/msrc/default.aspx
  [Отчет службы безопасности]: http://www.microsoft.com/security/sir/
  [Центр разработчиков средств безопасности (MSDN)]: http://msdn.microsoft.com/security/
