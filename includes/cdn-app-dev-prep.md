## Подготовка

Прежде чем можно будет создавать код управления CDN, необходимо выполнить определенную подготовку. В первую очередь следует создать группу ресурсов для профиля CDN, который мы создадим в этом учебнике. Затем мы настроим Azure Active Directory, чтобы обеспечить аутентификацию нашего приложения. После этого мы применим разрешения для группы ресурсов, чтобы только авторизованные пользователи могли с помощью клиента Azure AD взаимодействовать с профилем CDN.

### Создание группы ресурсов

1. Войдите на [портал Azure](https://portal.azure.com).

2. Нажмите кнопку **Создать** в верхнем левом углу, затем щелкните **Управление** и **Группа ресурсов**.
	
	![Создание новой группы ресурсов](./media/cdn-app-dev-prep/cdn-new-rg-1.png)

3. Назовите группу ресурсов *CdnConsoleTutorial*. Выберите свою подписку и ближайшее расположение. При необходимости можно установить флажок **Закрепить на панели мониторинга**, чтобы закрепить группу ресурсов на панели мониторинга на портале. Так ее будет проще найти. Выбрав необходимые параметры, нажмите кнопку **Создать**.

	![Присвоение имени группе ресурсов](./media/cdn-app-dev-prep/cdn-new-rg-2.png)

4. Если вы не закрепили созданную группу ресурсов на панели мониторинга, то ее можно найти, щелкнув **Обзор** > **Группы ресурсов**. Щелкните группу ресурсов, чтобы открыть ее. Запишите **идентификатор подписки**. Он понадобится нам позднее.

	 ![Присвоение имени группе ресурсов](./media/cdn-app-dev-prep/cdn-subscription-id.png)

### Создание приложения Azure AD

Существует два подхода к аутентификации приложения с помощью Azure Active Directory: использование отдельных пользователей или субъекта-службы. Субъект-служба аналогичен учетной записи службы в Windows. Вместо того, чтобы предоставить разрешения на взаимодействие с профилями CDN определенному пользователю, мы предоставляем их субъекту-службе. Субъекты-службы обычно используются для автоматических, неинтерактивных процессов. Несмотря на то, что в этом учебнике создается интерактивное приложение консоли, мы будем использовать субъект-службу.

Создание субъекта-службы состоит из нескольких шагов, включая создание приложения Azure Active Directory. Для этого воспользуемся [инструкциями данного учебника](../articles/resource-group-create-service-principal-portal.md).

> [AZURE.IMPORTANT] Обязательно выполните все шаги [связанного учебника](../articles/resource-group-create-service-principal-portal.md). *Крайне важно* выполнить все в точности, как описано. Обязательно запишите **код клиента**, **доменное имя клиента** (обычно это домен *.onmicrosoft.com*, если не был выбран личный домен), **идентификатор клиента** и **ключ аутентификации клиента**, так как они понадобятся позже. Следует очень ответственно отнестись к защите **идентификатора клиента** и **ключа аутентификации**, так как с помощью этих учетных данных любой пользователь может выполнять операции в качестве субъекта-службы.
> 	
> На шаге [Настройка мультитенантного приложения](../articles/resource-group-create-service-principal-portal.md#configure-multi-tenant-application) выберите **Нет**.
> 
> На шаге [Назначение роли приложению](../articles/resource-group-create-service-principal-portal.md#assign-application-to-role) укажите группу ресурсов *CdnConsoleTutorial*, созданную ранее, но вместо роли **Читатель** назначьте роль **CDN Profile Contributor** (Участник профиля CDN). Назначив приложению роль **CDN Profile Contributor** (Участник профиля CDN) для группы ресурсов, вернитесь к данному учебнику.

После создания субъекта-службы и назначения роли **CDN Profile Contributor** (Участник профиля CDN) колонка **Пользователи** вашей группы ресурсов должна иметь следующий вид.

![Колонка "Пользователи"](./media/cdn-app-dev-prep/cdn-service-principal.png)


### Интерактивная аутентификация пользователей

Если вместо субъекта-службы требуется настроить интерактивную аутентификацию отдельных пользователей, то необходимые действия будут похожи на настройку субъекта-службы. На самом деле потребуется выполнить ту же самую процедуру, но с незначительными изменениями.

>[AZURE.IMPORTANT] Выполните следующие шаги, только если решили использовать аутентификацию отдельных пользователей, а не субъект-службу.

1. При создании приложения вместо **Веб-приложение** выберите **Native application** (Собственное приложение).
	
	![Собственное приложение](./media/cdn-app-dev-prep/cdn-native-application.png)
	
2. На следующей странице вам будет предложено ввести **универсальный код ресурса (URI) перенаправления**. Универсальный код ресурса (URI) не будет проверяться, но запомните, что вы ввели. Он понадобится вам позднее.

3. Нет необходимости создавать **ключ аутентификации клиента**.

4. Вместо того, чтобы назначить роль **CDN Profile Contributor** (Участник роли CDN) участнику-службе, мы назначим ее отдельным пользователям или группам. В этом примере можно видеть, что пользователю *CDN Demo User* назначена роль **CDN Profile Contributor** (Участник роли CDN).
	
	![Индивидуальный доступ пользователей](./media/cdn-app-dev-prep/cdn-aad-user.png)

<!---HONumber=AcomDC_0629_2016-->