---
title: включение файла
description: включение файла
services: storage
author: tamram
ms.service: storage
ms.topic: include
ms.date: 03/26/2018
ms.author: jeking
ms.custom: include file
ms.openlocfilehash: f5b6e0e74bbab33b9ae6fbacca5c55ea434d3e41
ms.sourcegitcommit: d4c076beea3a8d9e09c9d2f4a63428dc72dd9806
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/01/2018
ms.locfileid: "39399963"
---
Геоизбыточное хранилище (GRS) предназначено для обеспечения устойчивости объектов на уровне 99,99999999999999 % (16 девяток) в течение определенного года за счет репликации данных в дополнительный регион, который находится в сотнях километров от основного региона. Если в учетной записи хранения включена репликация GRS, данные будут устойчивы даже в случае отключения электричества во всем регионе или аварии, при которой первичный регион не может быть восстановлен.

Если вы решите использовать GRS, вы можете выбрать один из двух связанных вариантов.

* GRS реплицирует данные в другой центр обработки данных в дополнительном регионе, но эти данные будут доступны для чтения, только если корпорация Майкрософт инициирует отработку отказа из основного региона в дополнительный. 
* Геоизбыточное хранилище с доступом на чтение (RA-GRS) основано на GRS. RA-GRS реплицирует данные в другой центр обработки данных в дополнительном регионе, а также предоставляет возможность чтения данных из дополнительного региона. При использовании RA-GRS вы можете считывать данные из дополнительного региона, независимо от того, инициировала ли корпорация Майкрософт отработку отказа из основного региона в дополнительный. 

Для учетной записи хранения с включенным GRS или RA-GRS все данные вначале реплицируются с использованием локально избыточного хранилища (LRS). Обновление сначала фиксируется в основное расположение и реплицируется с использованием локально избыточного хранилища. Затем обновление реплицируется асинхронно в дополнительный регион, используя геоизбыточное хранилище. При записи данных в дополнительное расположение они также реплицируются в этом расположении с использованием LRS. 

Основной и дополнительный регионы управляют репликами в отдельных доменах сбоя и доменах обновления в рамках единицы масштабирования хранилища. Единица масштабирования хранилища — это основная единица репликации в центре обработки данных. Репликация на этом уровне предоставляется с помощью LRS. Дополнительные сведения см. в разделе [Локально избыточное хранилище (LRS). Недорогая избыточность данных для службы хранилища Azure](../articles/storage/common/storage-redundancy-lrs.md).

При выборе варианта репликации учитывайте следующие моменты.

* Хранилище, избыточное в пределах зоны (ZRS), обеспечивает высокую доступность при синхронной репликации и для некоторых сценариев может быть предпочтительнее, чем GRS или RA-GRS. Дополнительные сведения о ZRS см. [здесь](../articles/storage/common/storage-redundancy-zrs.md).
* Так как асинхронная репликация подразумевает задержку, в случае региональной аварии есть вероятность, что изменения, еще не реплицированные в дополнительный регион, могут быть потеряны, если данные будет невозможно восстановить из основного региона.
* С геоизбыточным хранилищем реплика будет недоступна, пока корпорация Майкрософт не инициирует отработку отказа в дополнительном регионе. Если корпорация Майкрософт инициирует отработку отказа в дополнительный регион, то у вас будет доступ на чтение и запись к этим данным после того, как отработка отказа завершится. Дополнительные сведения см. в [руководстве по аварийному восстановлению](../articles/storage/common/storage-disaster-recovery-guidance.md).
* Если приложению необходимо считывать данные из дополнительного региона, включите RA-GRS.

## <a name="read-access-geo-redundant-storage"></a>Геоизбыточное хранилище с доступом для чтения

Геоизбыточное хранилище с доступом для чтения (RA-GRS) максимально увеличивает доступность учетной записи хранения. Оно предоставляет доступ только для чтения к данным во вторичном местоположении в дополнение к георепликации между двумя регионами.

При включении доступа только для чтения для данных во вторичном регионе ваши данные будут доступны как в первичной конечной точке, так и во вторичной конечной точке учетной записи хранения. Вторичная конечная точка аналогична первичной конечной точке, но к имени учетной записи добавляется суффикс `–secondary` . Например, если первичная конечная точка для службы BLOB-объектов — `myaccount.blob.core.windows.net`, то вторичная конечная точка — `myaccount-secondary.blob.core.windows.net`. Ключи доступа для учетной записи хранения одинаковые как для первичной, так и для вторичной конечных точек.

Рекомендации при работе с RA-GRS:

* При использовании RA-GRS для приложения необходимо указать, с какой конечной точкой взаимодействовать.
* Так как асинхронная репликация подразумевает задержку, изменения, еще не реплицированные в дополнительный регион, могут быть потеряны, если данные будет невозможно восстановить из основного региона, например в случае региональной аварии.
* Вы можете проверить время последней синхронизации своей учетной записи хранения. Время последней синхронизации — это значение даты и времени по Гринвичу. Все данные, записанные в основное расположение до последней синхронизации, были успешно записаны в дополнительное расположение. Это значит, что они доступны для чтения в дополнительном расположении. Данные, записанные в основное расположение после последней синхронизации, могут быть как доступны, так и не доступны для чтения. Вы можете запросить это значение с помощью [портала Azure](https://portal.azure.com/), [Azure PowerShell](../articles/storage/common/storage-powershell-guide-full.md) или с помощью одной из клиентских библиотек службы хранилища Azure.
* Если корпорация Майкрософт инициирует отработку отказа в дополнительный регион, то у вас будет доступ на чтение и запись к этим данным после того, как отработка отказа завершится. Дополнительные сведения см. в статье [Что делать в случае простоя службы хранилища Azure](../articles/storage/common/storage-disaster-recovery-guidance.md).
* Сведения о том, как переключиться на дополнительный регион, см. в статье [Что делать в случае простоя службы хранилища Azure](../articles/storage/common/storage-disaster-recovery-guidance.md).
* RA-GRS предназначено для обеспечения высокой доступности. Дополнительные сведения по масштабируемости см. в статье [Производительность хранилища Microsoft Azure и контрольный список масштабируемости](../articles/storage/common/storage-performance-checklist.md).
* Рекомендации по обеспечению высокого уровня доступности с RA-GRS см. в статье [Проектирование высокодоступных приложений с использованием RA-GRS](../articles/storage/common/storage-designing-ha-apps-with-ragrs.md).

## <a name="what-is-the-rpo-and-rto-with-grs"></a>Что такое RPO и RTO для GRS?
**Целевая точка восстановления (RPO).** В хранилищах GRS и RA-GRS служба хранилища асинхронно геореплицирует данные из основного расположения в дополнительное. Если произойдет серьезная региональная авария в основном регионе, корпорация Майкрософт выполнит отработку отказа в дополнительный регион, а последние изменения, которые не были геореплицированы, могут быть утеряны. Число минут, за которые возможна потеря данных, называется целевой точкой восстановления (она указывает точку во времени, до которой можно восстановить данные). Обычно RPO в службе хранилища Azure не превышает 15 минут, хотя на данный момент нет какого-либо соглашения об уровне обслуживания, регулирующего длительность георепликации.

**Цель времени восстановления (RTO).** RTO — это время, необходимое для выполнения отработки отказа и возобновления работы учетной записи хранения. Время, затрачиваемое на отработку отказа, обусловлено следующими действиями:

   * Время, затрачиваемое корпорацией Майкрософт, чтобы определить, можно ли восстановить данные в основном расположении или нужно ли выполнить отработку отказа.
   * Время на выполнение отработки отказа учетной записи путем изменения основных DNS-записей для указания на дополнительное расположение.

   Корпорация Майкрософт ответственно относится к сохранению ваших данных. Если есть хоть какая-нибудь возможность восстановить данные, корпорация Майкрософт не торопится выполнить отработку отказа и сосредотачивается на восстановлении данных. В будущих версиях этой службы вы сможете активировать отработку отказа на уровне учетной записи, чтобы иметь возможность самостоятельно управлять RTO.

## <a name="paired-regions"></a>Пары регионов 

При создании учетной записи хранения вы выбираете первичный регион для учетной записи. Парный дополнительный регион определяется на основе основного региона, его невозможно изменить. Обновленную информацию о регионах, поддерживаемых Azure, см. в статье [Непрерывность бизнес-процессов и аварийное восстановление в службах BizTalk: пары регионов Azure](../articles/best-practices-availability-paired-regions.md).
