###<a name="server-auth"></a>Практическое руководство. Аутентификация с помощью поставщика (серверный поток)

Чтобы мобильная служба могла выполнять процесс аутентификации в вашем приложении, необходимо зарегистрировать приложение у поставщика удостоверений. Затем в службе приложений Azure необходимо настроить код приложения и секретный код, предоставленный поставщиком. Дополнительные сведения см. в учебнике [Добавление проверки подлинности в приложение].

После регистрации у поставщика удостоверений просто вызовите метод .login() с указанием имени вашего поставщика. Например, для входа в систему через Facebook используйте следующий код.

```
client.login("facebook").done(function (results) {
     alert("You are now logged in as: " + results.userId);
}, function (err) {
     alert("Error: " + err);
});
```

Если используется поставщик удостоверений, отличный от Facebook, измените значение, передаваемое в метод login выше, на одно из следующих: `microsoftaccount`, `facebook`, `twitter`, `google` или `aad`.

В этом случае служба приложений Azure управляет потоком проверки подлинности OAuth 2.0, отображая страницу входа выбранного поставщика и генерируя маркер проверки подлинности службы приложений после успешного соединения с поставщиком удостоверений. Функция login после завершения работы возвращает объект JSON (user), который содержит и идентификатор пользователя, и маркер проверки подлинности службы приложений в полях userId, и authenticationToken соответственно. Этот маркер можно кэшировать и повторно использовать до истечения срока его действия.

###<a name="client-auth"></a>Практическое руководство. Аутентификация с помощью поставщика (клиентский поток)

Приложение может также независимо связаться с поставщиком удостоверений и сообщить возвращаемый маркер вашей службе приложений для проверки подлинности. Этот клиентский поток позволяет пользователям выполнять единый вход или получать дополнительные данные о пользователе от поставщика удостоверений.

#### Простой пример проверки подлинности на основе учетной записи социальной сети

В этом примере используется пакет SDK для клиента Facebook для проверки подлинности:

```
client.login(
     "facebook",
     {"access_token": token})
.done(function (results) {
     alert("You are now logged in as: " + results.userId);
}, function (err) {
     alert("Error: " + err);
});
```
В этом примере предполагается, что маркер, предоставленный соответствующим поставщиком SDK, сохраняется в переменной token.

#### Пример учетной записи Майкрософт

В следующем примере используется пакет SDK Live, поддерживающий единый вход в приложения Магазина Windows с использованием учетной записи Майкрософт:

```
WL.login({ scope: "wl.basic"}).then(function (result) {
      client.login(
            "microsoftaccount",
            {"authenticationToken": result.session.authentication_token})
      .done(function(results){
            alert("You are now logged in as: " + results.userId);
      },
      function(error){
            alert("Error: " + err);
      });
});
```

Этот пример получает маркер из Live Connect, который предоставляется вашей службе приложений путем вызова функции login.

###<a name="auth-getinfo"></a>Практическое руководство. Получение сведений о пользователе, прошедшем аутентификацию

Сведения о аутентификации текущего пользователя можно получить из конечной точки `/.auth/me` с помощью метода AJAX. Например, чтобы использовать API выборки:

```
var url = client.applicationUrl + '/.auth/me';
fetch(url)
    .then(function (data) {
        return data.json()
    }).then(function (user) {
        // The user object contains the claims for the authenticated user
    });
```

Для получения информации можно также использовать jQuery или другой API AJAX. Данные будут получены в виде объекта JSON.

<!---HONumber=AcomDC_0323_2016-->