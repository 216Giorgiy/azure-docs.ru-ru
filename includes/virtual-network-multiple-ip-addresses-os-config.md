## <a name="a-nameos-configaadd-ip-addresses-to-a-vm-operating-system"></a><a name="os-config"></a>Добавление IP-адресов в операционную систему виртуальной машины

Подключитесь к виртуальной машине, созданной с несколькими частными IP-адресами, и войдите в нее. Все частные IP-адреса (включая основные), добавленные в виртуальную машину, необходимо добавить вручную. Сделайте следующее для операционной системы виртуальной машины:

### <a name="windows"></a> Windows

1. В командной строке введите *ipconfig /all*.  Отображается только *первичный* частный IP-адрес (через службу DHCP).
2. Введите *ncpa.cpl* в командной строке, чтобы открыть окно **Сетевые подключения**.
3. Откройте свойства **Подключения к локальной сети**.
4. Дважды щелкните Internet Protocol version 4 (IPv4) (Протокол IP версии 4 (IPv4)).
5. Выберите **Использовать следующий IP-адрес** и введите следующие значения:

    * **IP-адрес**— *первичный* частный IP-адрес.
    * **Маска подсети**— в зависимости от своей подсети. Например, если подсеть — /24, то маска подсети — 255.255.255.0.
    * **Шлюз по умолчанию**— первый IP-адрес в подсети. Если подсеть — 10.0.0.0/24, то IP-адрес шлюза по умолчанию — 10.0.0.1.
    * Щелкните **Использовать следующие адреса DNS-серверов** и введите следующие значения:
        * **Предпочитаемый DNS-сервер**. Введите 168.63.129.16, если собственный DNS-сервер не используется.  При использовании собственного DNS-сервера введите IP-адрес своего сервера.
    * Нажмите кнопку **Дополнительно** и добавьте дополнительные IP-адреса. Добавьте каждый вторичный частный IP-адрес, указанный на шаге 8, для сетевого интерфейса с той же подсетью, которая указана для первичного IP-адреса.
    * Нажмите кнопку **ОК**, чтобы закрыть настройки TCP/IP, а затем нажмите кнопку **ОК** еще раз, чтобы закрыть параметры адаптера. После этого подключение к удаленному рабочему столу восстановится.
6. В командной строке введите *ipconfig /all*. Отобразятся все добавленные IP-адреса, а DHCP будет отключен.
    
### <a name="linux-ubuntu"></a>Linux (Ubuntu)

1. Откройте окно терминала.
2. Нужно войти с правами привилегированного пользователя. В противном случае введите следующую команду:

    ```bash
    sudo -i
    ```

3. Обновите файл конфигурации сетевого интерфейса (предполагается "eth0").

    * Сохраните имеющийся элемент строки для DHCP. Основной IP-адрес остается настроенным, как и ранее.
    * Добавьте конфигурацию для дополнительного статического IP-адреса с помощью следующих команд:

        ```bash
        cd /etc/network/interfaces.d/
        ls
        ```

    Должен отобразиться CFG-файл.
4. Откройте файл: vi *имя файла*.

    В конце этого файла будут следующие строки:

    ```bash
    auto eth0
    iface eth0 inet dhcp
    ```

5. Добавьте следующие строки после имеющихся строк в этом файле:

    ```bash
    iface eth0 inet static
    address <your private IP address here>
    ```

6. Сохраните файл с помощью следующей команды:

    ```bash
    :wq
    ```

7. Сбросьте сетевой интерфейс, выполнив следующую команду:

    ```bash
    sudo ifdown eth0 && sudo ifup eth0
    ```

    > [!IMPORTANT]
    > Если используется удаленное подключение, запустите скрипты ifdown и ifup в одной и той же строке.
    >

8. Проверьте, добавлен ли IP-адрес к сетевому интерфейсу, с помощью следующей команды:

    ```bash
    Ip addr list eth0
    ```

    Должен отобразиться IP-адрес, добавленный как часть списка.
    
### <a name="linux-redhat-centos-and-others"></a>Linux (Redhat, CentOS и другие)

1. Откройте окно терминала.
2. Нужно войти с правами привилегированного пользователя. В противном случае введите следующую команду:

    ```bash
    sudo -i
    ```

3. Введите пароль и следуйте инструкциям. После того как вы станете привилегированным пользователем, перейдите к сетевой папке скриптов, используя следующую команду:

    ```bash
    cd /etc/sysconfig/network-scripts
    ```

4. Выведите список связанных IFCFG-файлов, используя следующую команду:

    ```bash
    ls ifcfg-*
    ```

    В списке файлов должен быть файл *ifcfg-eth0* .

5. Скопируйте файл *ifcfg-eth0* и назовите его *ifcfg-eth0:0*, используя следующую команду:

    ```bash
    cp ifcfg-eth0 ifcfg-eth0:0
    ```

6. Измените файл *ifcfg-eth0:0* , используя следующую команду:

    ```bash
    vi ifcfg-eth1
    ```

7. Измените имя устройства на соответствующее имя в файле, в этом случае на *eth0:0*. Для этого используйте следующую команду:

    ```bash
    DEVICE=eth0:0
    ```

8. Измените строку *IPADDR = YourPrivateIPAddress* в соответствии с IP-адресом.
9. Сохраните файл, используя следующую команду:

    ```bash
    :wq
    ```

10. Перезапустите сетевые службы и убедитесь, что изменения вступили в силу, выполнив следующие команды:

    ```bash
    /etc/init.d/network restart
    Ipconfig
    ```

    В возвращенном списке должен содержаться добавленный IP-адрес — *eth0:0*.


<!--HONumber=Dec16_HO1-->


