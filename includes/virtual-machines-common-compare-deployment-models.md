


## Преимущества интеграции вычислительных ресурсов, сетевых ресурсов и ресурсов службы хранилища с использованием модели развертывания Azure Resource Manager

Модель развертывания Azure Resource Manager предлагает возможность легко использовать предварительно созданные шаблоны, а также создавать новые шаблоны приложений для развертывания в Azure вычислительных ресурсов, сетевых ресурсов и ресурсов хранения, а также управления ими. В этом разделе мы рассмотрим преимущества развертывания ресурсов с помощью модели, предполагающей использование Azure Resource Manager.

-	Упрощение сложных приложений — создавайте и интегрируйте сложные приложения, а также совместно работайте с приложениями, которые могут включать весь спектр ресурсов Azure (например, веб-сайты, базы данных SQL, виртуальные машины или виртуальные сети) из общего файла шаблона.
-	Гибкость при создании повторяемых развертываний для специалистов по разработке и системных администраторов с помощью одного и того же файла шаблона.
-	Тесная интеграция расширений виртуальных машин (пользовательские сценарии, DSC, Chef, Puppet и т.д.) с диспетчером ресурсов Azure в файле шаблона позволяет легко управлять конфигурацией установки виртуальной машины.
-	Определение тегов и выставления счетов за распространение этих тегов для вычислительных и сетевых ресурсов, а также ресурсов хранения.
-	Простое и точное управление доступом к ресурсам организации с помощью управления доступом на основе ролей (RBAC).
-	Упрощение процедуры обновления путем изменения и повторного развертывания исходного шаблона.


## Усовершенствования интерфейсов API вычислительных ресурсов, сети и службы хранилища в диспетчере ресурсов Azure

Помимо упомянутых выше преимуществ, в выпущенных интерфейсах API существенно усовершенствована производительность.

-	Возможность крупного и параллельного развертывания виртуальных машин.
-	Поддержка 3 доменов сбоя в группах доступности.
-	Улучшенное расширение пользовательского сценария, которое позволяет выполнять спецификацию сценариев в любом общедоступном настраиваемом URL-адресе.
- Интеграция виртуальных машин с хранилищем ключей Azure для обеспечения высокой степени безопасности развертывания из хранилища и закрытого развертывания конфиденциальных данных из [аппаратных модулей обеспечения безопасности](http://wikipedia.org/wiki/Hardware_security_module), прошедших проверку [по стандартам FIPS](http://wikipedia.org/wiki/FIPS_140-2).
-	Предоставление базовых стандартных сетевых блоков через интерфейсы API позволяет пользователям создавать сложные приложения, включая сетевые интерфейсы, подсистемы балансировки нагрузки и виртуальные сети.
-	Сетевые интерфейсы в качестве нового объекта обеспечивают устойчивость сложной конфигурации сети и ее повторное использование для виртуальных машин.
-	Подсистемы балансировки нагрузки в качестве ресурсов первого класса позволяют назначать IP-адреса.
-	Интерфейсы API для детального управления виртуальными сетями позволяют упростить управление отдельными виртуальными сетями.

## Концептуальные различия после введения новых интерфейсов API

В этом разделе мы рассмотрим некоторые из наиболее важных концептуальных различий между современными интерфейсами API на базе XML и интерфейсами API на базе JSON, доступными в диспетчере ресурсов Azure, для вычислительных и сетевых ресурсов, а также ресурсов хранения.

 Элемент | Управление службами Azure (на базе XML) | Поставщики вычислительных и сетевых ресурсов, а также ресурсов хранения (на базе JSON)
 ---|---|---
| Облачная служба для виртуальных машин |	Облачная служба представляла собой контейнер для хранения виртуальных машин, которым требовались доступность использования на платформе и балансировка нагрузки. | Облачная служба больше не является объектом, необходимым для создания виртуальной машины в новой модели. |
| Группы доступности | Доступность на платформе указывалась путем задания одного и того же параметра AvailabilitySetName на виртуальных машинах. Максимальное число доменов сбоя — 2. | Группа доступности — это ресурс, предоставляемый поставщиком Microsoft.Compute. Виртуальные машины, требующие высокого уровня доступности, должны быть включены в группу доступности. Теперь максимальное число доменов сбоя — 3. |
| Территориальные группы |	Территориальные группы требовались для создания виртуальных сетей. Но с появлением региональных виртуальных сетей необходимость в них отпала. |Для упрощения концепция территориальных групп больше не применяется в интерфейсах API, предоставляемых в диспетчере ресурсов Azure. |
| Балансировка нагрузки | При создании облачных служб предоставляется скрытая подсистема балансировки нагрузки для развернутых виртуальных машин. | Подсистема балансировки нагрузки — это ресурс, предоставляемый поставщиком Microsoft.Network. Основной сетевой интерфейс виртуальных машин, для которых необходимо сбалансировать нагрузку, должен ссылаться на подсистему балансировки нагрузки. Подсистемы балансировки нагрузки могут быть внутренними или внешними. [Подробная информация.](../articles/resource-groups-networking.md) |
|Виртуальный IP-адрес | При добавлении виртуальной машины в облачную службу облачные службы получат виртуальный IP-адрес по умолчанию. Виртуальный IP-адрес — это адрес, связанный со скрытой подсистемой балансировки нагрузки. | Общедоступный IP-адрес — это ресурс, предоставляемый поставщиком Microsoft.Network. Общедоступный IP-адрес может быть статическим (зарезервированным) или динамическим. Динамические общедоступные IP-адреса могут быть назначены подсистеме балансировки нагрузки. Их можно защитить с помощью групп безопасности. |
|Зарезервированный IP-адрес|	Вы можете зарезервировать IP-адрес в Azure и связать его с облачной службой, чтобы убедиться, что его можно назначить. | Общедоступный IP-адрес можно создать в режиме «Статический», который предлагает те же возможности, что и зарезервированный IP-адрес. Сейчас статический общедоступный IP-адрес можно назначить только подсистеме балансировки нагрузки. |
|Отдельный общедоступный IP-адрес для каждой виртуальной машины | Общедоступный IP-адреса можно также связать с виртуальной машиной напрямую. | Общедоступный IP-адрес — это ресурс, предоставляемый поставщиком Microsoft.Network. Общедоступный IP-адрес может быть статическим (зарезервированным) или динамическим. Тем не менее сейчас чтобы получить отдельный общедоступный IP-адрес для каждой виртуальной машины, виртуальному интерфейсу можно назначать только динамические общедоступные IP-адреса. |
|Конечные точки| Чтобы входные конечные точки служили в качестве открытых элементов, обеспечивающих подключение, в определенных портах, их необходимо было настроить в виртуальной машине. Один из распространенных способов подключения к виртуальным машинам — это настройка входных конечных точек. | В подсистеме балансировки нагрузки можно настроить правила преобразования сетевых адресов (NAT) для входящих подключений, чтобы получить ту же возможность включения конечных точек в определенных портах для подключения к виртуальным машинам. |
|DNS-имя| Облачная служба получит скрытое глобальное уникальное DNS-имя. Например, `mycoffeeshop.cloudapp.net`. | DNS-имена являются необязательными параметрами, которые можно указать в ресурсе общедоступного IP-адреса. Формат полного доменного имени будет следующим — `<domainlabel>.<region>.cloudapp.azure.com`. |
|Сетевые интерфейсы | Первичный и вторичный сетевой интерфейс и их свойства были определены в качестве конфигурации сети виртуальной машины. | Сетевой интерфейс — это ресурс, предоставляемый поставщиком Microsoft.Network. Жизненный цикл сетевого интерфейса не связан с виртуальной машиной. |

## Приступая к работе с шаблонами Azure для виртуальных машин

Вы можете начать работу с шаблонами Azure, использовав множество доступных инструментов для разработки и развертывания на платформе.

### Портал Azure

На портале Azure сохранится возможность параллельного развертывания виртуальных машин с классической моделью развертывания и виртуальных машин с моделью развертывания диспетчера ресурсов. На портале Azure можно будет также выполнять развертывания на основе настраиваемого шаблона.

### Azure PowerShell

В Azure PowerShell будет доступно два режима развертывания — **AzureServiceManagement** и **AzureResourceManager**. Теперь режим AzureResourceManager будет также содержать командлеты для управления виртуальными машинами, виртуальными сетями и учетными записями хранения. Подробнее об этом можно прочитать[здесь](../articles/powershell-azure-resource-manager.md).

### Инфраструктура CLI Azure

В интерфейсе командной строки Azure будет доступно два режима развертывания — **AzureServiceManagement** и **AzureResourceManager**. Теперь режим AzureResourceManager будет также содержать команды для управления виртуальными машинами, виртуальными сетями и учетными записями хранения. Подробнее об этом можно прочитать[здесь](../articles/xplat-cli-azure-resource-manager.md).

### Visual Studio

В новом выпуске пакета SDK для Azure для Visual Studio можно создавать и развертывать виртуальные машины и сложные приложения непосредственно из Visual Studio. Visual Studio предлагает возможность развертывания на базе списка предварительно созданных шаблонов или начала работы с пустого шаблона.

### Интерфейсы API REST

Подробную документацию по REST API для поставщиков вычислительных и сетевых ресурсов, а также ресурсов хранения см. [здесь](https://msdn.microsoft.com/library/azure/dn790568.aspx).

## Часто задаваемые вопросы

**Могу ли я создать виртуальную машину с помощью нового диспетчера ресурсов Azure для развертывания в виртуальной сети или учетной записи хранения, которые созданы с помощью API управления службами Azure?**

Сейчас такая возможность не поддерживается. Вы не можете развернуть виртуальную машину с помощью нового диспетчера ресурсов Azure в виртуальной сети, созданной с помощью интерфейсов API управления службами Azure.

**Могу ли я создать виртуальную машину с помощью новых интерфейсов API диспетчера ресурсов Azure, используя образ пользователя, который создан с помощью интерфейсов API управления службами Azure?**

Сейчас такая возможность не поддерживается. Тем не менее вы можете скопировать VHD-файлы из учетной записи хранения, созданной с помощью API управления службами, и добавить их в новую учетную запись с помощью новых интерфейсов API диспетчера ресурсов Azure.

**Как использование новых ресурсов влияет на квоту моей подписки?**

Квоты для виртуальных машин, виртуальных сетей и учетных записей хранения, созданных с помощью новых интерфейсов API диспетчера ресурсов Azure, используются отдельно от имеющихся квот. Каждая подписка получает новые квоты на создание ресурсов с помощью новых интерфейсов API. Дополнительную информацию о дополнительных квотах см. [здесь](../articles/azure-subscription-service-limits.md).

**Могу ли я продолжить использовать свои автоматизированные сценарии для подготовки виртуальных машин, виртуальных сетей, учетных записей хранения и прочего с помощью новых интерфейсов API диспетчера ресурсов Azure?**

Все автоматизированные сценарии и сценарии, созданные вами, будут продолжать действовать в существующих виртуальных машинах и виртуальных сетях, созданных в режиме управления службами Azure. Тем не менее эти сценарии необходимо обновить, чтобы использовать новую схему создания тех же ресурсов в новом режиме диспетчера ресурсов Azure.

**Где можно найти примеры шаблонов диспетчера ресурсов Azure?**

Полный набор начальных шаблонов можно найти в разделе [шаблонов быстрого запуска для диспетчера ресурсов Azure](https://azure.microsoft.com/documentation/templates/).

<!---HONumber=AcomDC_0629_2016-->