

По умолчанию все запросы к ресурсам мобильной службы ограничены клиентами, представляющими ключ приложения, что не позволяет обеспечить четкий и безопасный контроль доступа к ресурсам. Для защиты ресурсов необходимо ограничить доступ, предоставив его только тем клиентам, которые прошли проверку.

1. В Visual Studio откройте проект мобильной службы, разверните папку "Контроллеры" и откройте файл **TodoItemController.cs**. Класс **TodoItemController** реализует доступ к данным для таблицы TodoItem. Добавьте следующую инструкцию `using`:

		using Microsoft.WindowsAzure.Mobile.Service.Security;

2. Примените следующий атрибут _AuthorizeLevel_ к классу **TodoItemController**. Благодаря этому только прошедший проверку пользователь сможет выполнять все операции с таблицей _TodoItem_.

		[AuthorizeLevel(AuthorizationLevel.User)]

	>[AZURE.NOTE]Примените атрибут AuthorizeLevel к отдельным методам, чтобы задать определенные уровни авторизации для методов, предоставляемых контроллером.

3. (Необязательно.) Если вы хотите выполнить локальную отладку проверки подлинности, разверните папку `App_Start`, откройте файл **WebApiConfig.cs** и добавьте следующий код в метод **Register**:

		config.SetIsHosted(true);

	Благодаря этому проект локальной мобильной службы будет выполняться так, словно он размещен в Azure (включая использование параметров *AuthorizeLevel*). Без этого параметра все направляемые в localhost HTTP-запросы разрешаются без проверки подлинности, не учитывая при этом параметр *AuthorizeLevel*. Если включен режим резидентной среды, также понадобится задать значение для ключа локального приложения.

4. (Необязательно.) В файле проекта web.config задайте строковое значение для параметра приложения `MS_ApplicationKey`. Это пароль, который используется (без имени пользователя) для проверки страниц справки по API при локальном запуске службы.

	>[AZURE.NOTE]Это строковое значение не используется действующим сайтом в Azure. Вам не нужно использовать действительный ключ приложения: подойдет любое допустимое строковое значение.
 
4. Повторно опубликуйте проект.

<!---HONumber=62-->