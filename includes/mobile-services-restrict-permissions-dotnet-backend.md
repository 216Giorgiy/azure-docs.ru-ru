

По умолчанию все запросы к ресурсам мобильной службы ограничены клиентами, представляющими ключ приложения, что не позволяет обеспечить четкий и безопасный контроль доступа к ресурсам. Для защиты ресурсов необходимо ограничить доступ, предоставив его только тем клиентам, которые прошли проверку.

1. В Visual Studio откройте проект мобильной службы, разверните папку "Контроллеры" и откройте **TodoItemController.cs**. Класс **TodoItemController** реализует доступ к данным для таблицы TodoItem. Добавьте следующую инструкцию `using`:

		using Microsoft.WindowsAzure.Mobile.Service.Security;

2. Примените следующий атрибут _AuthorizeLevel_ attribute к классу **TodoItemController**. Это обеспечит, что только прошедший проверку пользователь сможет производить все операции с таблицей _TodoItem_.

		[AuthorizeLevel(AuthorizationLevel.User)]

	>[AZURE.NOTE]Примените атрибут AuthorizeLevel к отдельным методам, чтобы задать определенные уровни авторизации для методов, предоставляемых контроллером.

3. Если вы хотите выполнить локальную отладку аутентификации, разверните папку `App_Start`, откройте файл **WebApiConfig.cs** и добавьте следующий код в метод **Register**:  

		config.SetIsHosted(true);

	Благодаря этому проект локальной мобильной службы выполняется так, как если бы он размещался в Azure, включая использование параметров *AuthorizeLevel*. Без этого параметра все направляемые в localhost HTTP-запросы разрешаются без аутентификации без учета параметра *AuthorizeLevel*. 

4. Повторно опубликуйте проект.

<!--HONumber=47-->
