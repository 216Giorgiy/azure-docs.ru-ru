

По умолчанию все запросы к ресурсам мобильной службы ограничены клиентами, представляющими ключ приложения, что не позволяет обеспечить четкий и безопасный контроль доступа к ресурсам. Для защиты ресурсов необходимо предоставлять доступ только тем клиентам, которые прошли проверку подлинности.

1. В Visual Studio откройте проект, содержащий вашу мобильную службу. 

2. В обозревателе решений разверните папку "Контроллеры" и откройте файл проекта TodoItemController.cs.

	Класс **TodoItemController** реализует доступ к данным для таблицы TodoItem. 

3. Добавьте следующий оператор `using` в верхнюю часть страницы кода:

		using Microsoft.WindowsAzure.Mobile.Service.Security;

4. Примените следующий атрибут AuthorizeLevel к классу **TodoItemController**:

		[AuthorizeLevel(AuthorizationLevel.User)] 

	Это обеспечит, что только прошедший проверку пользователь сможет производить все операции с таблицей **TodoItem**. 

	>[AZURE.NOTE]Примените атрибут AuthorizeLevel к отдельным методам, чтобы задать определенные уровни авторизации для методов, предоставляемых контроллером.

5. Если вы хотите выполнить локальную отладку аутентификации, откройте папку App_Start, откройте файл проекта WebApiConfig.cs и добавьте следующий код в метод **Register**:

		config.SetIsHosted(true);
	
	Благодаря этому проект локальной мобильной службы выполняется так, как если бы он размещался в Azure, включая использование параметров AuthorizeLevel. Без этого параметра все направляемые в *localhost* HTTP-запросы разрешаются без аутентификации, несмотря на параметр AuthorizeLevel.  

6. Повторно опубликуйте проект службы.

<!--HONumber=42-->
