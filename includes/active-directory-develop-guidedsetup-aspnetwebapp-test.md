## <a name="test-your-code"></a>Тестирование кода

Чтобы протестировать приложение в Visual Studio, нажмите клавишу **F5** для запуска проекта. Откроется браузер http://<span></span>localhost: {port} расположение отобразится **вход с Microsoft** кнопки. Нажмите кнопку, чтобы начать процесс входа в систему.

Когда вы будете готовы к запуску теста, используйте учетную запись Microsoft Azure Active Directory (Azure AD) (рабочая или учебная учетная запись) или личную учетную запись Майкрософт (<span>live.</span> COM или <span>outlook.</span> COM) для входа.

![Войдите с помощью Microsoft](media/active-directory-develop-guidedsetup-aspnetwebapp-test/aspnetbrowsersignin.png)
<br/><br/>
![Войдите учетную запись Майкрософт](media/active-directory-develop-guidedsetup-aspnetwebapp-test/aspnetbrowsersignin2.png)

#### <a name="view-application-results"></a>Просмотр результатов приложения
После входа, пользователь перенаправляется на домашнюю страницу веб-сайта. Домашняя страница — HTTPS URL-адрес, указанный в данных приложения в портал регистрации приложений Майкрософт. Домашняя страница содержит приветственное сообщение «Hello \<пользователя >, «ссылку, чтобы выйти из системы и ссылку, чтобы просмотреть утверждения пользователя. Переходит по ссылке на утверждениях пользователя **авторизовать** контроллера, которое было создано ранее.

### <a name="browse-to-see-the-users-claims"></a>Ознакомьтесь с утверждения пользователя
Для просмотра, утверждения пользователей, выберите эту ссылку для перехода к представлению контроллера, которая доступна только пользователям, прошедшим проверку.

#### <a name="view-the-claims-results"></a>Просмотр результатов утверждений
После перейти к представлению контроллера, вы увидите, что таблица, содержащая основные свойства для пользователя:

|Свойство |Значение |ОПИСАНИЕ |
|---|---|---|
|**Имя** |Полное имя пользователя | Пользователь и фамилию имя.
|**Имя пользователя** |пользователь<span>@domain.com</span> | Имя пользователя, который используется для идентификации пользователя.
|**Тема** |Субъект |Строка, уникально идентифицирует пользователя в Интернете.|
|**ИД клиента** |Guid | Объект **guid** , уникальным образом представляет пользователя Azure AD организации.|

Кроме того вы увидите таблицы все утверждения, которые находятся в запросе проверки подлинности. Дополнительные сведения см. в разделе [список утверждений, которые находятся в маркер идентификатора Azure AD](https://docs.microsoft.com/azure/active-directory/develop/active-directory-token-and-claims).


### <a name="test-access-to-a-method-that-has-an-authorize-attribute-optional"></a>Проверка доступа метода, имеющего атрибут Authorize (необязательно)
Для тестирования доступа к **авторизовать** контроллера для утверждения пользователя как анонимный пользователь, выполните следующие действия:
1. Выберите ссылку, чтобы выйти из системы пользователя и завершить процесс выхода.
2. В окне браузера введите http://<span></span>localhost: {port} / прошедшего проверку подлинности для доступа к контроллер с защитой **авторизовать** атрибута.

#### <a name="expected-results-after-access-to-a-protected-controller"></a>Ожидаемые результаты после доступа к защищенным контроллера
Появится запрос для проверки подлинности для использования защищенных контроллера представления.

## <a name="additional-information"></a>Дополнительная информация

<!--start-collapse-->
### <a name="protect-your-entire-website"></a>Защита вашей всего веб-сайта
Для защиты всего веб-сайта в **Global.asax** файл, добавьте **AuthorizeAttribute** атрибут **GlobalFilters** фильтр в **приложения За_пустить** метод:

```csharp
GlobalFilters.Filters.Add(new AuthorizeAttribute());
```
<!--end-collapse-->

### <a name="restrict-sign-in-access-to-your-application"></a>Ограничение доступа вход в приложение
По умолчанию личные учетные записи, такие как outlook.com, live.com и другие можно войти в приложение. Рабочие учетные записи в организации, которые интегрированы с Azure AD можно также выполнить вход, по умолчанию.

Для ограничения входа доступа пользователя для приложения, доступно несколько параметров.

#### <a name="restrict-access-to-a-single-organization"></a>Ограничение доступа для одной организации
Вы можете ограничить доступ входа для приложения только для учетных записей, которые находятся в одной организации Azure AD:
1. В **web.config** файл, измените значение **клиента** параметра. Измените значение с **Общие** к имени клиента организации, таких как **contoso.onmicrosoft.com**.
2. В вашей **запуска OWIN** класса, задайте **ValidateIssuer** аргумент **true**.

#### <a name="restrict-access-to-a-list-of-organizations"></a>Ограничение доступа к списку организаций
Можно ограничить входа доступ к только учетные записи пользователей в организации Azure AD, которая находится в списке разрешенных организаций.
1. В **web.config** файл вашей **запуска OWIN** класса, задайте **ValidateIssuer** аргумент **true**.
2. Установите для параметра **ValidIssuers** параметр в список разрешенных организаций.

#### <a name="use-a-custom-method-to-validate-issuers"></a>Использовать пользовательский метод для проверки издателей
Можно реализовать пользовательский метод для проверки издателей с помощью **IssuerValidator** параметра. Дополнительные сведения об использовании этого параметра, узнайте, как [TokenValidationParameters класс](https://msdn.microsoft.com/library/system.identitymodel.tokens.tokenvalidationparameters.aspx) на сайте MSDN.

[!INCLUDE  [Help and support](./active-directory-develop-help-support-include.md)]
