<span id="what-are-service-bus-queues"></span></a>

## Что такое очереди Service Bus?

Очереди Service Bus поддерживают модель **опосредованного обмена сообщениями**
. При использовании очередей компоненты распределенного приложения не
взаимодействуют между собой напрямую, а обмениваются сообщениями через
очередь, которая выступает в качестве посредника. Поставщик сообщений (отправитель)
передает сообщение в очередь, а затем продолжает ее обработку.
Напротив, потребитель сообщений (получатель) извлекает сообщение из
очереди и обрабатывает его. Поставщику не нужно ждать ответа
от потребителя, чтобы продолжить обработку и отправку дальнейших
сообщений. Очереди предлагают доставку сообщений конкурирующим потребителям
по принципу **FIFO**. То есть обычно получатели
принимают и обрабатывают сообщения в том порядке, в котором они были
добавлены в очередь, и каждое сообщение принимается и обрабатывается только
одним потребителем сообщений.

![QueueConcepts][]

Очереди служебной шины — это технология общего назначения, которая может использоваться для
разнообразных сценариев:

-   Взаимодействие между веб-ролью и рабочей ролью в многоуровневом
    приложении Windows Azure
-   Взаимодействие между локальными приложениями и приложениями, размещенными
    в Azure, в гибридном решении
-   Связь между компонентами распределенного приложения,
    которое работает в другой организации или в другом подразделении данной
    организации

С помощью очередей можно лучше масштабировать приложения и
придать вашей архитектуре большую устойчивость.

<span id="create-a-service-namespace"></span></a>

## Создание пространства имен службы

</p>
Чтобы начать использование очередей служебной шины в Azure, необходимо сначала
создать пространство имен службы. Это пространство имен службы предоставляет
контейнер для адресации ресурсов служебной шины в вашем приложении.

Создание пространства имен службы:

1.  Выполните вход на [портал управления Azure][].

2.  В левой области навигации портала управления нажмите кнопку
    **Служебная шина**.

3.  В нижней части портала управления нажмите кнопку **Создать**.
    ![][]

4.  В диалоговом окне **Добавление нового пространства имен** введите имя пространства имен.
     Система сразу проверит, доступно ли имя.
    ![][1]

5.  Убедившись, что имя пространства имен доступно, выберите страну
     или регион, где будет размещаться пространство имен (убедитесь, что
     используете страну или регион, где развертываете вычислительные
     ресурсы).

    ВАЖНО! Выберите **тот же регион**, который собираетесь выбрать
     для развертывания приложения. Это обеспечит наилучшую производительность.

6.  Щелкните значок галочки. Теперь система создает пространство
     имен службы и включает его. Возможно, придется подождать несколько минут,
     пока система выделит ресурсы для вашей учетной записи.

    ![][2]

Созданное пространство имен появится на портале управления, его
активация займет некоторое время. Прежде чем продолжать,
подождите, пока состояние не изменится на **Активное**.

<span id="obtain-default-credentials"></span></a>

## Получение учетных данных управления по умолчанию для пространства имен

</p>
Для выполнения операций управления, таких как создание очереди в
новом пространстве имен, необходимо получить учетные данные управления для
пространства имен. Эти учетные данные можно получить с портала управления или из обозревателя серверов Visual Studio.

### Получение учетных данных управления с портала

1.  В левой области навигации щелкните узел **Служебная шина**, чтобы
    отобразить список доступных пространств имен:
    ![][3]

2.  Выберите из отображенного списка пространство имен, которое вы только что создали.
    ![][4]

3.  Нажмите кнопку **Сведения о подключении**.
    ![][5]

4.  В диалоговом окне **Сведения по доступу к подключению** найдите записи **Издатель по умолчанию** и **Ключ по умолчанию**. Запишите эти значения, так как эти сведения будут использованы ниже для выполнения операций с пространством имен.

### Получение учетных данных управления с обозревателя серверов

Чтобы получить сведения о подключении с помощью Visual Studio, а не портала управления, выполните процедуру, описанную [здесь][], в разделе **Подключение к Azure из Visual Studio**. При входе в Azure узел **Service Bus** в дереве **Microsoft Azure** в обозревателе серверов автоматически заполняется уже созданными пространствами имен. Щелкните правой кнопкой мыши любое пространство имен и выберите **Свойства**, чтобы увидеть строку подключения и другие метаданные, связанные с этим пространством имен, которые отображаются в области **Свойства** Visual Studio.

Запишите значение **SharedAccessKey** или скопируйте его в буфер обмена.

![][6]

  [QueueConcepts]: ./media/howto-service-bus-queues/sb-queues-08.png
  [портал управления Azure]: http://manage.windowsazure.com
  []: ./media/howto-service-bus-queues/sb-queues-03.png
  [1]: ./media/howto-service-bus-queues/sb-queues-04.png
  [2]: ./media/howto-service-bus-queues/getting-started-multi-tier-27.png
  [3]: ./media/howto-service-bus-queues/sb-queues-13.png
  [4]: ./media/howto-service-bus-queues/sb-queues-09.png
  [5]: ./media/howto-service-bus-queues/sb-queues-06.png
  [здесь]: http://http://msdn.microsoft.com/en-us/library/windowsazure/ff687127.aspx
  [6]: ./media/howto-service-bus-queues/VSProperties.png
