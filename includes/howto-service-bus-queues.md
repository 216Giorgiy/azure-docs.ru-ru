<a id="what-are-service-bus-queues"></a>
##Что такое очереди Service Bus?

Очереди Service Bus поддерживают модель **опосредованного обмена сообщениями**. При использовании очередей компоненты распределенного приложения не взаимодействуют между собой напрямую, а обмениваются сообщениями через очередь, которая выступает в качестве посредника. Производитель (отправитель) передает сообщение в очередь, а затем продолжает его обработку.
Потребитель сообщения (получатель) асинхронно извлекает сообщение из очереди и обрабатывает его. Производителю не нужно ждать ответа от потребителя, чтобы продолжить обработку и отправку дальнейших сообщений. Очереди предлагают доставку сообщений конкурирующим потребителям по принципу **Первым пришел, первым вышел (FIFO)**. То есть обычно получатели принимают и обрабатывают сообщения в том порядке, в котором они были добавлены в очередь, и каждое сообщение принимается и обрабатывается только одним потребителем сообщений.

![QueueConcepts](./media/howto-service-bus-queues/sb-queues-08.png)

Очереди Service Bus — это технология общего назначения, которая может использоваться для разнообразных сценариев:

-   Взаимодействие между веб-ролью и ролью работника в многоуровневом приложении Azure
-   Взаимодействие между приложениями на предприятии и приложениями, размещенными в Azure, в гибридном решении
-   Связь между компонентами распределенного приложения, которое работает в другой организации или в другом подразделении данной организации

С помощью очередей можно лучше масштабировать приложения и придать вашей архитектуре большую устойчивость.

<a id="create-a-service-namespace"></a>
<h2>Создание пространства имен службы</h2>

Чтобы начать использование очередей Service Bus в Azure, необходимо сначала
создать пространство имен службы. Это пространство имен службы предоставляет область ограничений для адресации ресурсов Service Bus в вашем приложении.

Создание пространства имен службы:

1.  Выполните вход на [портал управления Azure][].

2.  В левой области навигации портала управления щелкните **Service Bus**.

3.  В нижней области портала управления щелкните **Создать**.   
	![](./media/howto-service-bus-queues/sb-queues-03.png)

4.  В диалоговом окне **Добавить новое пространство имен** введите имя пространства имен.
    Система немедленно проверяет, доступно ли оно.   
	![](./media/howto-service-bus-queues/sb-queues-04.png)

5.  Убедившись, что имя пространства имен доступно, выберите страну или регион, где будет размещаться пространство имен (обязательно используйте страну или регион, где развертываете ресурсы среды выполнения приложений).

	ВАЖНО! Выберите **тот же регион**, который собираетесь выбрать
    для развертывания приложения. Это обеспечит наилучшую производительность.

6. 	Щелкните значок галочки. Теперь система создает пространство имен службы и включает его. Возможно, вам придется подождать несколько минут, пока система выделит ресурсы для вашей учетной записи.

	![](./media/howto-service-bus-queues/getting-started-multi-tier-27.png)

Созданное пространство имен появится в портале управления; его активация займет некоторое время. Прежде чем продолжать, подождите, пока состояние не станет **Активным**.

<a id="obtain-default-credentials"></a>
<h2>Получение учетных данных управления по умолчанию для пространства имен</h2>

Для выполнения операций управления, таких как создание очереди, над новым пространством имен необходимо получить учетные данные управления для пространства имен. Эти учетные данные можно получить с портала управления или из обозревателя серверов Visual Studio.

###Получение учетных данных управления с портала

1.  В левой области навигационной панели щелкните узел **Service Bus**, чтобы отобразить список доступных пространств имен:   
	![](./media/howto-service-bus-queues/sb-queues-13.png)

2.  Выберите из отображенного списка пространство имен, которое вы только что создали:   
	![](./media/howto-service-bus-queues/sb-queues-09.png)

3.  Щелкните **Сведения о подключении**.   
	![](./media/howto-service-bus-queues/sb-queues-06.png)

4.  В диалоговом окне **Сведения по доступу к подключению** найдите записи **Издатель по умолчанию** и **Ключ по умолчанию**. Запишите эти значения, так как эти сведения будут использованы ниже для выполнения операций с пространством имен.

###Получение учетных данных управления с обозревателя серверов

Чтобы получить сведения о подключении с помощью Visual Studio, а не портала управления, выполните процедуру, описанную [здесь](http://http://msdn.microsoft.com/ru-ru/library/windowsazure/ff687127.aspx), в разделе **Подключение к Azure из Visual Studio**. При входе в Azure узел **Service Bus** в дереве **Microsoft Azure** в обозревателе серверов автоматически заполняется уже созданными пространствами имен. Щелкните правой кнопкой мыши любое пространство имен и выберите **Свойства**, чтобы увидеть строку подключения и другие метаданные, связанные с этим пространством имен, которые отображаются в области **Свойства** Visual Studio. 

Запишите значение **SharedAccessKey** или скопируйте его в буфер обмена.

![][34]

  [Портал управления Azure]: http://manage.windowsazure.com
  [Портал управления Azure]: http://manage.windowsazure.com

  [34]: ./media/howto-service-bus-queues/VSProperties.png

