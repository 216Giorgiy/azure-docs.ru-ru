## Что такое очереди служебной шины?

Очереди служебной шины поддерживают модель **обмена сообщениями через посредника**. При использовании очередей компоненты распределенного приложения не взаимодействуют между собой напрямую, а обмениваются сообщениями через очередь, которая выступает в качестве посредника. Производитель (отправитель) передает сообщение в очередь, а затем продолжает его обработку. Потребитель сообщения (получатель) асинхронно извлекает сообщение из очереди и обрабатывает его. Поставщику не нужно ждать ответа от потребителя, чтобы продолжить обработку и отправку дальнейших сообщений. Очереди предлагают доставку сообщений конкурирующим потребителям по типу **FIFO** (первым пришел, первым вышел). То есть обычно получатели принимают и обрабатывают сообщения в том порядке, в котором они были добавлены в очередь, и каждое сообщение принимается и обрабатывается только одним потребителем сообщений.

![QueueConcepts](./media/howto-service-bus-queues/sb-queues-08.png)

Очереди служебной шины — это технология общего назначения, которая может использоваться для разнообразных сценариев:

-   Взаимодействие между веб-ролями и рабочими ролями в многоуровневом приложении Azure.
-   Взаимодействие между локальными приложениями и приложениями, размещенными в Azure, в гибридном решении.
-   Связь между компонентами распределенного приложения, которое работает в другой организации или в другом подразделении данной организации.

С помощью очередей можно лучше масштабировать приложения и придать вашей архитектуре большую устойчивость.

## Создание пространства имен службы

Чтобы начать использовать очереди служебной шины в Azure, необходимо сначала создать пространство имен службы. Пространство имен предоставляет контейнер для адресации ресурсов служебной шины в вашем приложении.

Создание пространства имен службы:

1.  Выполните вход на [портал управления Azure][].

2.  В левой области навигации портала управления нажмите кнопку **Service Bus**.

3.  В нижней части портала управления нажмите кнопку **Создать**. ![](./media/howto-service-bus-queues/sb-queues-03.png)

4.  В диалоговом окне**Добавление нового пространства имен** введите имя пространства имен. Система немедленно проверит, доступно ли это имя. ![](./media/howto-service-bus-queues/sb-queues-04.png)

5.  Убедившись, что имя пространства имен доступно, выберите страну или регион, где будет размещено ваше пространство имен (необходимо указать страну и регион развертывания своих вычислительных ресурсов).

	ВАЖНО! Выберите **тот же регион**, который собираетесь выбрать для развертывания приложения. Это обеспечит наилучшую производительность.

6. 	Оставьте в остальных полях диалогового окна значения по умолчанию ("Обмен сообщениями" и **Уровень Standard**), а затем установите флажок. Теперь система создает пространство имен и включает его. Вероятно, придется подождать несколько минут, пока система не выделит ресурсы для вашей учетной записи.

	![](./media/howto-service-bus-queues/getting-started-multi-tier-27.png)

Созданное пространство имен появится на портале управления, его активация займет некоторое время. Прежде чем продолжать, подождите, пока состояние не изменится на **Активное**.

## Получение учетных данных управления по умолчанию для пространства имен

Для выполнения операций управления, таких как создание очереди в новом пространстве имен, необходимо получить учетные данные управления для пространства имен. Эти учетные данные можно получить с портала управления Azure или из обозревателя серверов Visual Studio.

###Получение учетных данных управления с портала

1.  В левой области навигации щелкните узел **Служебная шина**, чтобы отобразить список доступных пространств имен: ![](./media/howto-service-bus-queues/sb-queues-13.png)

2.  Выберите пространство имен, которое вы только что создали, из появившегося списка: ![](./media/howto-service-bus-queues/sb-queues-09.png)

3.  Щелкните **Сведения о подключении**. ![](./media/howto-service-bus-queues/sb-queues-06.png)

4.  В области **Сведения о доступе к подключению** найдите строку подключения, которая содержит ключ SAS и имя ключа.

	![](./media/howto-service-bus-queues/multi-web-45.png)
    
5.  Запишите ключ или скопируйте его в буфер обмена.

### Получение учетных данных управления с обозревателя серверов

Чтобы получить сведения о подключении с помощью Visual Studio, а не портала управления, выполните процедуру, описанную [здесь](http://msdn.microsoft.com/library/ff687127.aspx), в разделе **Подключение к Azure из Visual Studio**. При входе в Azure узел **служебной шины** в дереве **Azure** в обозревателе серверов автоматически заполняется уже созданными пространствами имен. Щелкните правой кнопкой мыши любое пространство имен и выберите **Свойства**, чтобы увидеть строку подключения и другие метаданные, связанные с этим пространством имен, которые отображаются в области **Свойства** Visual Studio.

Запишите значение **SharedAccessKey** или скопируйте его в буфер обмена.

![][34]

  [Azure Management Portal]: http://manage.windowsazure.com
  [портал управления Azure]: http://manage.windowsazure.com

  [34]: ./media/howto-service-bus-queues/VSProperties.png

<!---HONumber=July15_HO4-->