# Введение в Azure

Azure — это платформа приложений корпорации Майкрософт для общедоступного облака. Вы можете использовать данную платформу множеством разных способов. Например, вы можете использовать Azure для создания веб-приложения, которое выполняется и хранит свои данные в центрах обработки данных Azure. Вы можете использовать Azure просто для хранения данных, при этом использующие их приложения могут выполняться локально (то есть за пределами общедоступного облака). Вы можете использовать Azure, чтобы создавать виртуальные машины для разработки и тестирования или для запуска приложений SharePoint и других приложений. Вы можете использовать Azure для создания приложений со значительными возможностями масштабирования и огромным количеством пользователей. Все это — и многое другое — возможно благодаря обширному диапазону служб, предоставляемому платформой.

Однако для выполнения любой из указанных задач необходимо разобраться в основах. Даже если вам ничего не известно об облачных вычислениях, данная статья поможет вам ознакомиться с основными понятиями и принципами работы Azure. Ее задачей является сформировать у вас основу для понимания и использования этой облачной платформы.


## Оглавление

-   [Компоненты Azure](#components)
-   [Модели выполнения и среда выполнения приложений](#models)
-   [Управление данными](#data)
-   [Работа в сети](#networking)
-   [Бизнес-аналитика](#analytics)
-   [Обмен сообщениями](#messaging)
-   [Компонент Caching](#caching)
-   [Удостоверение](#identity)
-   [Высокопроизводительные вычислительные системы (HPC)](#HPC)
-   [Служба мультимедиа](#media)
-   [Приложения для коммерции](#commerce)
-   [Пакеты SDK](#sdk)
-   [Приступая к работе](#start)




<h2><a id="components"></a>Компоненты Azure</h2>

Чтобы понять, что именно предлагает платформа Azure, удобно сгруппировать ее службы по конкретным категориям. На рисунке 1 показан один из способов такой группировки.

![Компоненты Azure](./media/intro-to-azure/IntroAzure1.png)   
 **Рисунок 1. Azure предоставляет доступные через Интернет службы приложений, выполняемые в центрах обработки данных Azure.**

Чтобы начать работу с платформой Azure, вам требуется получить хотя бы базовое представление о каждом из ее компонентов. Вы можете воспользоваться плакатом [Что такое Azure](http://www.microsoft.com/ru-ru/download/details.aspx?id=35473), чтобы получить краткий визуальный обзор. Цвета полей на рисунке 1 соответствуют их группировке на афише. 

В оставшейся части статьи рассматриваются указанные на рисунке технологии с описанием того, что каждая из них предлагает и в какой ситуации вы можете ее использовать.



<h2><a id="models"></a>Модели выполнения и среда выполнения приложений</h2>

Одной из основных задач облачной платформы является выполнение приложений. Azure предоставляет четыре варианта для этого: виртуальные машины, облачные службы, веб-сайты и мобильные службы.  Каждая из моделей выполнения Azure занимает свою нишу. 

Виртуальные машины Azure предоставляют универсальную вычислительную среду по запросу. Облачные службы очень удобны для создания масштабируемых, надежных приложений с низким административными расходами. Веб-сайты Azure предлагают широкий спектр приложений, платформ и шаблонов, чтобы быстро создавать большие масштабируемые веб-приложения и веб-сайты, а затем эффективно управлять разработкой, тестированием и работой. Аналогичным образом мобильные службы Azure ускоряют разработку приложений для мобильных устройств, предоставляя готовые способы хранения данных в облаке, проверки подлинности пользователей и отправления извещающих уведомлений.

Можно использовать эти технологии раздельно или объединить их для создания подходящего основания для своего приложения. Выбор конкретного подхода зависит от стоящих перед вами проблем.


###Виртуальные машины###

Возможность создания виртуальной машины по запросу — из стандартного или предоставленного вами образа — может оказаться крайне полезной. Добавьте сюда возможность поминутной оплаты такой виртуальной машины и только за время ее работы, и эта идея станет еще привлекательнее. Именно такой подход, который обычно называют "инфраструктура как услуга" (IaaS), и предлагает модель виртуальных машин Azure. 

Чтобы создать виртуальную машину, вы указываете используемый виртуальный жесткий диск и размер виртуальной машины. После этого вы оплачиваете время, когда виртуальная машина работает. Виртуальные машины для Azure предлагают коллекцию виртуальных жестких дисков для хранения. В нее входят варианты от корпорации Майкрософт, например Windows Server 2008 R2, Windows Server 2012 и Windows Server 2008 R2 с SQL Server, а также образы Linux, предоставленные партнерами корпорации Майкрософт. Вы также можете создавать виртуальные машины из собственных виртуальных жестких дисков и добавлять их в коллекцию.
 
Откуда бы ни был взят образ, вы можете на постоянной основе сохранять все изменения, внесенные во время работы виртуальной машины. При следующем создании виртуальной машины из данного виртуального жесткого диска работа начнется из того состояния, в котором была остановлена. Можно также скопировать измененный виртуальный жесткий диск из Azure и запустить его локально.

Виртуальные машины Azure можно использовать множеством разных способов. Вы можете использовать их для создания недорогой платформы для разработки и тестирования, которую по завершении работы можно будет удалить. Вы также можете создать и запустить приложения, использующие любые необходимые вам языки и библиотеки. Такие приложения могут использовать любые предоставляемые Azure варианты управления данными, и вы можете включить использование SQL Server или другой системы управления базами данных, запущенной в одной или нескольких виртуальных машинах. Другая возможность заключается в использовании виртуальных машин Azure в качестве расширения вашего локального центра обработки данных посредством запуска приложений SharePoint или других приложений. Чтобы обеспечить соответствующую поддержку, можно создать в облаке домены Windows, запустив Active Directory в виртуальных машинах Azure. Этот довольно общий подход к облачным вычислениям можно использовать для решения самых разных проблем. Вы сами решаете, что именно требуется сделать.

###Веб-сайты###

Одна из самых распространенных задач, которые люди выполняют в облаке, — запуск веб-сайтов и веб-приложений. Модель виртуальных машин Azure допускает это, однако требует от вас заниматься администрированием одной или нескольких виртуальных машин. А что если вы просто хотите получить веб-сайт, всю работу по администрированию которого выполняет кто-то другой?

Именно это и предоставляет модель веб-сайтов Azure. Эта модель выполнения предлагает управляемую веб-среду, а также API-интерфейсы с помощью портала управления Azure. Вы можете переместить имеющийся веб-сайт в модель веб-сайтов Azure без каких-либо изменений или можете создать новый веб-сайт прямо в облаке. После запуска сайта вы можете добавлять или удалять экземпляры динамически, при этом модель веб-сайтов Azure осуществляет балансировку нагрузки по запросам для них. Модель веб-сайтов Azure поддерживает два варианта — запуск веб-сайта в виртуальной машине с другими сайтами и стандартный вариант, предполагающий работу сайта в отдельной виртуальной машине. Стандартный вариант также позволяет увеличить размер (вычислительную мощность) экземпляров, в случае необходимости.

Модель веб-сайтов Azure окажется полезной для корпораций, разработчиков и для агентств, занимающихся веб-дизайном. Для корпораций это легко управляемое, масштабируемое, весьма доступное решение с высоким уровнем безопасности для работы веб-сайтов. Для ведения разработки она поддерживает .NET, PHP, Node.js и Python, а также базу данных SQL и MySQL (от компании ClearDB — партнера корпорации Майкрософт) для реляционного хранилища. Она также имеет встроенную поддержку нескольких популярных приложений, включая WordPress, Joomla и Drupal. Задача заключается в предоставлении экономичной, масштабируемой и универсальной платформы для создания веб-сайтов и веб-приложений в общедоступном облаке.

###Облачные службы###

Предположим, что вы хотите создать облачное приложение, которое может поддерживать множество одновременно работающих пользователей, не требует существенного администрирования и всегда остается в работоспособном состоянии. Например, вы можете быть поставщиком программного обеспечения, решившим воспользоваться идеей "программа как услуга" (SaaS), создав версию одного из своих приложений в облаке. Или вы можете недавно открыть компанию и заниматься созданием потребительского приложения, рост числа пользователей которого по вашим оценкам обещает быть довольно бурным. Если вы создаете продукт в Azure, какую модель выполнения вам следует выбрать?

Модель веб-сайтов Azure позволяет создать такое веб-приложение, однако есть некоторые ограничения. У вас нет административного доступа, то есть вы не можете, например, устанавливать произвольное программное обеспечение.  Модель виртуальных машин Azure обеспечивает высокую гибкость, включая административный доступ, и позволяет вам создать приложение со значительными возможностями масштабирования, однако вам придется самостоятельно заниматься многими аспектами надежности и администрирования. Вам бы хотелось располагать достаточным уровнем контроля, не выполняя самостоятельно работу по обеспечению надежности и администрированию.

Именно это и предлагает модель облачных служб Azure. Эта технология разработана специально для поддержки масштабируемых и надежных приложений с малым объемом работы по администрированию и представляет собой пример того, что называют "платформа как услуга" (PaaS). Чтобы использовать ее, вы создаете приложение с использованием выбранной вами технологии, такой как C#, Java, PHP, Python, Node.js или иной. После этого ваш код выполняется в виртуальных машинах ("экземпляры"), работающих под управлением Windows Server. 

Однако эти виртуальные машины отличаются от тех, которые вы создаете с помощью модели виртуальных машин Azure. Прежде всего, Azure управляет ими самостоятельно, устанавливая исправления операционной системы и автоматически развертывая новые исправленные образы. (Это подразумевает, что ваше приложение не должно сохранять состояние в экземплярах веб-роли или рабочей роли, вместо этого оно должно храниться в одном из средств управления данными Azure, описанных в следующем разделе.) Azure также отслеживает виртуальные машины, перезапуская их в случае сбоя. 

При создании экземпляра у вас есть выбор из двух ролей, основанных на Windows Server. Основное различие между ними заключается в том, что в экземпляре веб-роли выполняются службы IIS, а в экземпляре рабочей роли — нет. Управление ими осуществляется аналогично, и часто приложение использует обе эти роли. Например, экземпляр веб-роли может принимать запросы от пользователей, а затем передавать их в экземпляр рабочей роли для обработки. Чтобы осуществлять масштабирование вашего приложения, вы можете запросить создание в Azure дополнительных экземпляров любой из ролей или завершение работы имеющихся экземпляров. Как и в случае с моделью виртуальных машин Azure, с вас взимается оплата только за время выполнения каждого экземпляра веб-роли или рабочей роли. 


###Мобильные службы###

Если вы создаете приложение для мобильного устройства, мобильные службы Azure ускоряют разработку, предоставляя готовый способ хранения данных в облаке, проверки подлинности пользователей и отправления извещающих уведомлений.  
Библиотеки собственного клиента для Android, iOS, HTML/JavaScript, Windows Phone и Windows Store упрощают работу приложений, доступных на всех основных мобильных платформах.  Открытый и гибкий API REST также позволяет использовать данные и функциональные возможности мобильных служб с приложениями на практически любой платформе.  Одна мобильная служба может поддерживать несколько клиентских приложений, так что вы можете предоставить пользователю согласованный интерфейс между устройствами. 

Мобильные службы позволяют выполнять простую подготовку и управление данными, хранящимися в базе данных SQL, проверять подлинность пользователей с помощью известных поставщиков идентификаторов, например учетных записей Facebook, Twitter, Microsoft или Google, и использовать службы уведомлений для доставки push-уведомлений в ваше приложение. Серверный код позволяет с легкостью использовать дополнительные варианты хранения данных, например хранилище больших двоичных объектов (BLOB) или MongoDB, использовать надстройки из магазина Azure, например SendGrid или Pusher, использовать другие службы Azure, например шину Service Bus и рабочие роли, или даже подключиться к локальным системам.  Службы можно масштабировать по мере того, как приложение становится более популярным и поддерживается отслеживание и ведение журнала.

Хотя серверную часть для мобильных приложений безусловно можно создавать с использованием виртуальных машин, облачных служб или веб-сайтов, с помощью мобильных служб можно тратить гораздо меньше времени на написание базовых компонентов службы.


<h2><a id="data"></a>Управление данными</h2>

Приложениям требуются данные, причем разным видам приложений требуются разные виды данных. В связи с этим Azure предоставляет несколько разных способов для хранения данных и управления ими. 

Один из них уже упоминался: возможность запускать SQL Server или другую систему управления базами данных в виртуальной машине, созданной с помощью модели виртуальных машин Azure. (Важно понимать, что данная возможность не ограничивается реляционными системами, то есть вы свободно можете использовать технологии NoSQL, такие как MongoDB и Cassandra.) Запуск собственной системы баз данных вполне рационален — она реплицирует все то, к чему мы привыкли в своих центрах обработки данных, однако в этом случае требуется осуществлять администрирование такой системы управления базами данных. Чтобы упростить пользователям жизнь, Azure предлагает три варианта управления данными, в которых основная часть работы выполняется за вас. На рисунке 2 показаны доступные варианты выбора.


![Управление данными в Azure](./media/intro-to-azure/IntroAzure3.png)   
 **Рисунок 2. Для управления данными Azure предлагает реляционное хранилище, масштабируемые таблицы NoSQL и неструктурированное двоичное хранилище.**

Каждый из этих трех способов предназначен для разных нужд: реляционное хранилище, быстрый доступ к потенциально большим объемам простых типизированных данных и неструктурированное двоичное хранилище. Во всех трех случаях данные автоматически реплицируются по трем разным компьютерам в центре обработки данных Azure для обеспечения высокой доступности. Следует также отметить, что все три варианта доступны как приложениям Azure, так и приложениям, выполняемым в другом месте, например в локальном центре обработки данных, на ноутбуке или на телефоне. И независимо от того, как вы их применяете, вы оплачиваете все службы управления данными Azure по мере использования, включая взнос за количество гигабайт хранимых данных в месяц. 

###База данных SQL###

Для реляционного хранилища Azure предоставляет базу данных SQL. База данных SQL, которая ранее называлась SQL Azure, предоставляет все ключевые возможности системы управления реляционной базой данных, включая атомарные транзакции, одновременный доступ к данным несколькими пользователями с обеспечением целостности данных, SQL-запросы ANSI и привычную модель программирования. Как и в случае с SQL Server, доступ к Базе данных SQL можно осуществить с использованием Entity Framework, ADO.NET, JDBC и других привычных технологий доступа к данным. Она также поддерживает основную часть языка T-SQL и средства SQL Server, такие как SQL Server Management Studio. У любого человека, знакомого с SQL Server (или другой реляционной базой данных), использование базы данных SQL не вызовет никаких затруднений.

Однако база данных SQL представляет собой не просто систему управления базами данных в облаке — это служба PaaS. Вы продолжаете контролировать свои данные и доступ к ним других лиц, однако База данных SQL берет на себя рутинные задачи администрирования, например управляет инфраструктурой оборудования и автоматически обновляет программное обеспечение базы данных операционной системы до актуальных версий. База данных SQL также предоставляет возможность федерации, распределяющую данные по нескольким серверам. Это удобно для приложений, которые работают с большими объемами данных или которым требуется распределить запросы на доступ к данным по нескольким серверам для повышения производительности.

Если вы создаете приложение Azure (с использованием любой из трех моделей выполнения), которому требуется реляционное хранилище, база данных SQL может оказаться подходящим вариантом. Приложения, выполняемые за пределами облака, также могут использовать данную службу, хотя существует и множество других сценариев. Например, доступ к данным, хранящимся в Базе данных SQL, может осуществляться из разных клиентских систем, включая настольные компьютеры, ноутбуки, планшетные ПК и телефоны. А благодаря наличию встроенной функции высокой доступности, реализуемой посредством репликации, использование базы данных SQL позволяет свести время простоя к минимуму.

###Таблицы###

Предположим, что вы хотите создать приложение Azure, которому требуется быстрый доступ к типизированным данным (возможно, большого объема), но не требуется выполнять для этих данных сложные SQL-запросы. Например, представьте, что вы создаете потребительское приложение, которому требуется для каждого пользователя сохранять сведения профиля клиента. Ваше приложение станет очень популярным, поэтому для него необходимо предусмотреть возможность работы с большим объемом данных, однако к этим данным будут применяться только простейшие операции сохранения и извлечения. Именно для такого сценария и подходят таблицы Azure.

Не обманывайтесь названием: эта технология не предоставляет реляционное хранилище. (Фактически, это пример подхода NoSQL под названием "хранилище ключ/значение".) Вместо этого таблицы Azure позволяют приложению сохранять свойства различных типов, например строк, целых чисел и дат. Позднее приложение может извлечь группу свойств, предоставив для нее уникальный ключ. Хотя сложные операции, такие как присоединение, не поддерживаются, таблицы обеспечивают быстрый доступ к типизированным данным. Кроме того, они обладают значительными возможностями масштабирования — отдельная таблица может вмещать в себя до терабайта данных. А благодаря простоте использовать таблицы обычно дешевле, чем реляционное хранилище базы данных SQL. 

###BLOB-объекты###

Третий вариант управления данными — BLOB-объекты Azure — предназначен для хранения неструктурированных двоичных данных. Как и таблицы, BLOB-объекты предоставляют экономичное хранилище, а в отдельном BLOB-объекте может храниться до одного терабайта данных. Приложение, которое сохраняет видео, осуществляет резервное копирование данных или других двоичных сведений, может использовать BLOB-объекты в качестве простого и недорогого хранилища. Приложения Azure также могут использовать диски Azure, что позволяет BLOB-объектам обеспечивать постоянное хранение для файловой системы Windows, подключенной в экземпляре Azure. Приложение видит обычные файлы Windows, однако на самом деле это содержимое хранится в BLOB-объекте.


<h2><a id="networking"></a>Работа в сети</h2>

Сейчас Azure выполняется в нескольких центрах обработки данных в США, Европе и Азии. Когда вы запускаете приложение или сохраняете данные, то можете выбрать один или несколько таких центров обработки данных, которые требуется использовать. Вы также можете различными способами подключаться к этим центрам обработки данных:

- Вы можете использовать виртуальную сеть Azure для подсоединения собственной локальной сети к заданному набору виртуальных машин Azure.

- Если ваше приложение Azure выполняется в нескольких центрах обработки данных, вы можете использовать Azure Traffic Manager для разумного перенаправления запросов пользователей по экземплярам этого приложения.

Эти варианты представлены на рисунке 3.

![Сеть Azure](./media/intro-to-azure/IntroAzure4.png)   
 **Рисунок 3. Azure позволяет создавать облака VPN и разумно распределять запросы пользователей между различными центрами обработки данных.**

###Виртуальная сеть###

Один из полезных способов использования общедоступного облака заключается в том, чтобы представить его в виде расширения вашего центра обработки данных. Поскольку вы можете создавать виртуальные машины по запросу и затем удалять эти виртуальные машины (и прекращать платить за них), когда они больше не требуются, вы можете получать вычислительные мощности только в том случае, когда они действительно необходимы. А поскольку модель виртуальных машин Azure позволяет вам создавать виртуальные машины с SharePoint, Active Directory и другим знакомым локальным программным обеспечением, такой подход можно применять к уже имеющимся приложениям.

В целях обеспечения максимальной эффективности ваши пользователи должны иметь возможность работать с этими приложениями, как если бы они выполнялись в вашем центре обработки данных. Именно это и предоставляет виртуальная сеть Azure. Используя устройство шлюза VPN, администратор может настроить виртуальную частную сеть (VPN) между вашей локальной сетью и заданной группой виртуальных машин, запущенных в Azure. Поскольку вы назначаете облачным виртуальным машинам собственные адреса IP v4, создается впечатление, что они находятся в вашей сети. Пользователи в вашей организации могут осуществлять доступ к содержащимся в этих виртуальных машинах приложениям, как если бы они выполнялись локально.

###Traffic Manager###

Если пользователи приложения Azure располагаются в одном регионе, оно может выполняться всего в одном центре обработки данных Azure. Если пользователи приложения расположены в разных странах по всему миру, более вероятно, что приложение выполняется в нескольких центрах обработки данных, а, возможно, и во всех сразу. В этом втором случае вы сталкиваетесь с проблемой: как разумно назначать пользователей экземплярам приложения? Вероятно, вы хотите, чтобы основную часть времени каждый пользователь работал с ближайшим к нему центром обработки данных, так как это повышает вероятность оптимального времени ответа. Но что делать, если экземпляр приложения перегружен или недоступен? В этом случае было бы желательно автоматически перенаправить запрос пользователя в другой центр обработки данных. Именно это и делает Azure Traffic Manager. 

Владелец приложения определяет правила, указывающие, как запросы от пользователей перенаправляются в центры обработки данных, а затем доверяет выполнение этих правил Traffic Manager. Например, в общем случае пользователи могли бы направляться в ближайший центр обработки данных Azure, но будут направлены в какой-нибудь другой, если время ответа от их центра обработки данных по умолчанию превышает время ответа от других центров обработки данных. Для глобальных распределенных приложений с большим количеством пользователей наличие встроенной службы, устраняющей такие проблемы, может оказаться полезным.


<h2><a id="analytics"></a>Бизнес-аналитика</h2>

Анализ данных является основой для использования информационных технологий на предприятиях. Облачная платформа предоставляет пул ресурсов по запросу с оплатой по мере использования, что делает ее подходящей основой для таких вычислений. Соответственно, служба хранения Azure предоставляет два варианта для бизнес-аналитики. Доступные для выбора варианты представлены на рисунке 4.

![Аналитика Azure](./media/intro-to-azure/IntroAzure5.png)   
 **Рисунок 4. Для проведения бизнес-аналитики Azure предоставляет возможности ведения отчетов и поддержку больших данных.**

Анализ данных может принимать множество разных форм, поэтому эти два варианта существенно отличаются друг от друга. Следует рассмотреть каждый из них в отдельности.

###Отчеты с базой данных SQL###
Одним из наиболее распространенных способов использования сохраненных данных является создание основанных на них отчетов.
 
Выполнение служб SQL Server Reporting Services (SSRS) в виртуальных машинах Azure позволяет легко встраивать в приложение Azure возможности работы с отчетами. Можно создавать отчеты с таблицами, диаграммами, картами, индикаторами и прочим в различных форматах, включая HTML, XML, PDF и Excel. 

Можно также проводить анализ в базе данных SQL с использованием локальных средств бизнес-аналитики, включая SSRS. Для клиента База данных SQL выглядит как SQL Server, поэтому одни и те же технологии могут работать с обоими этими продуктами.  
 

###HDInsight (Hadoop)###

В течение многих лет основная часть анализа производилась над реляционными данными, сохраненными в хранилище данных, которое создавалось с использованием системы управления реляционными базами данных. Этот тип бизнес-аналитики до сих пор сохраняет свою важность и будет применяться еще очень долго. Но что делать, если объем анализируемых данных настолько велик, что реляционные базы данных не способны обработать его? И предположим, что эти данные не являются реляционными? Это могут быть серверные журналы в центре обработки данных, полученные с датчиков данные об имевших место событиях или что-то еще. В таких случаях вы сталкиваетесь с так называемой проблемой большого объема данных. Вам требуется использовать иной подход.

Основной технологией для анализа больших данных сейчас является Hadoop. Эта технология, представляющая собой проект Apache с открытым исходным кодом, сохраняет данные с использованием распределенной файловой системы Hadoop (HDFS), а затем позволяет разработчикам создать задания MapReduce для анализа таких данных. HDFS распределяет данные по нескольким серверам, затем выполняет на каждом из них блоки задания MapReduce, способствуя параллельной обработке больших данных.

HDInsight — это имя службы Azure на основе Apache Hadoop. Как видно на рисунке 4, HDInsight позволяет HDFS хранить данные в кластере и распространять их через несколько виртуальных машин. Она также распределяет логику работы MapReduce по этим виртуальным машинам. Как и в случае с локальной Hadoop, данные обрабатываются локально — логическая схема и обрабатываемые ей данные находятся в одной виртуальной машине — и параллельно для повышения производительности. HDInsight также может хранить данные в хранилище Azure Storage Vault (ASV), которое использует BLOB-объекты.  ASV позволяет сэкономить деньги, поскольку можно удалить неиспользуемый кластер HDInsight, но по-прежнему сохранить данные в облаке.
 
HDinsight поддерживает также другие компоненты в экосистеме Hadoop, включая Hive и Pig. Корпорация Майкрософт создала также компоненты, облегчающие работу с данными, полученных при использовании HDInsight традиционных средств бизнес-аналитики, например адаптера HiveODBC и Data Explorer, работающего с Excel.





<h2><a id="messaging"></a>Обмен сообщениями</h2>

Независимо от выполняемых операций коду часто приходится взаимодействовать с другим кодом.  В некоторых ситуациях достаточно обычного обмена сообщениями с организацией очереди. В других случаях требуются более сложные механизмы взаимодействия. Azure предоставляет несколько разных способов для решения таких проблем. Доступные для выбора варианты представлены на рисунке 5. 

![Сообщения Azure](./media/intro-to-azure/IntroAzure6.png)   
 **Рисунок 5. Для соединения с приложениями Azure предлагает очереди, публикацию/подписку и синхронные соединения через облако.**

###Очереди###

Идея организации очереди довольно проста: одно приложение помещает в очередь сообщение, которое в конечном итоге считывается другим приложением. Если вашему приложению достаточно такого прямолинейного механизма, оптимальным выбором может стать такой компонент Azure, как Очереди. 

Один из наиболее распространенных сейчас способов использования компонента Очереди заключается в том, чтобы позволить экземпляру веб-роли взаимодействовать с экземпляром рабочей роли внутри одного приложения облачных служб. Например, предположим, что вы создаете приложение Azure для общего доступа к видео. Такое приложение состоит из кода PHP, выполняемого в веб-роли, что позволяет пользователям отправлять и просматривать видео, и реализованной на C# рабочей роли, которая преобразует отправленное видео в различные форматы. Когда экземпляр веб-роли получает от пользователя новое видео, он может сохранить это видео в BLOB-объекте, а затем посредством очереди отправить в рабочую роль сообщение с информацией о расположении этого нового видео. Затем экземпляр рабочей роли — неважно, какой именно — считает это сообщение из очереди и выполнит необходимое преобразование видео в фоновом режиме. Такое структурирование приложения позволяет реализовать асинхронную обработку, а также упрощает масштабирование приложения, так как число экземпляров веб-роли и рабочей роли можно изменять независимо друг от друга.

###Service Bus###

Независимо от места выполнения — в облаке, в центре обработки данных, на мобильном устройстве или в любом другом месте — приложениям требуется взаимодействовать. Задача Azure Service Bus заключается в предоставлении приложениям, выполняемым практически где угодно, возможности обмена данными.

Как показано на рисунке 5, Service Bus предоставляет службу очереди. Однако данная служба отличается от описанного выше компонента очередей. В отличие от очередей Azure Service Bus предоставляет механизм публикации и подписки. При публикации и подписке приложение может отправлять сообщения в раздел, а другие приложения могут создавать подписки на этот раздел. Это позволяет реализовать в наборе приложений взаимодействие по принципу "один ко многим", то есть одно сообщение может быть считано несколькими приложениями. Но организация очереди не является единственным доступным вариантом: Service Bus также обеспечивает прямую связь через службу ретрансляции, предоставляя защищенный метод взаимодействия через брандмауэры. Ретрансляции Service Bus позволяют приложениям взаимодействовать путем обмена сообщениями через конечную точку, размещенную в облаке, а не локально.

Приложения, взаимодействующие через Service Bus, могут быть приложениями Azure или программным обеспечением, выполняемым на другой облачной платформе. При этом это также могут быть и приложения, выполняемые за пределами облака. Например, представьте авиакомпанию, службы резервирования которой реализованы на компьютерах, расположенных в ее центре обработки данных. Этой авиакомпании требуется предоставлять такие службы множеству клиентов, включая киоски регистрации в аэропортах, терминалы агентов по бронированию и, возможно, даже телефоны заказчиков. Для этого авиакомпания может воспользоваться Service Bus, создавая слабосвязанные взаимодействия между различными приложениями.



<h2><a id="caching"></a>Caching</h2>

Для приложений характерно снова и снова обращаться к одним и тем же данным. Один из способов повышения производительности заключается в хранении копии таких данных ближе к приложению, чтобы минимизировать время, затрачиваемое на их извлечение. Azure представляет для этого две разных службы: кэширование данных, используемых приложениями Azure, в памяти и сеть кэширующих серверов (CDN), которая кэширует данные BLOB-объектов на диске, расположенном ближе к пользователям этих данных. На рисунке 6 показаны обе этих службы.

![Azure Caching](./media/intro-to-azure/IntroAzure7.png)   
 **Рисунок 6. Приложение Azure может кэшировать данные в памяти, а копии BLOB-объекта могут кэшироваться на сайтах по всему миру.**

###Caching###

Доступ к данным, сохраненным в любой из служб управления данными Azure (база данных SQL, таблицы или BLOB-объекты), осуществляется довольно быстро. Однако доступ к данным, находящимся в памяти, осуществляется еще быстрее. В связи с этим наличие в памяти копии часто используемых данных может улучшить производительность приложения. Для этого вы можете использовать компонент Azure Caching в памяти. 

Приложение облачных служб может сохранять данные в таком кэше, а затем извлекать их без необходимости доступа к постоянному хранилищу. Как показано на рисунке 6, кэш может размещаться внутри виртуальных машин приложения или предоставляться виртуальными машинами, выделенными исключительно для кэширования. В любом случае такой кэш может быть распределенным, то есть содержащиеся в нем данные распределяются по нескольким виртуальным машинам в центре обработки данных Azure. 

Такой вид кэширования может оказать положительное влияние на работу приложения, которое многократно считывает каталог продукции, благодаря ускоренному предоставлению требуемых данных. Данная технология также поддерживает блокировку, что позволяет использовать ее как для данных, доступных для чтения/записи, так и для данных, доступных только для чтения. А приложения ASP.NET могут использовать данную службу для хранения данных сеанса после простого изменения конфигурации. 

###CDN###

Предположим, вам требуется сохранить данные BLOB-объекта, которые будут использоваться пользователями по всему миру. Возможно, это видеозапись с последнего чемпионата мира по футболу, обновления драйверов или популярная электронная книга. В этом случае может помочь сохранение копии данных в нескольких центрах обработки данных Azure, однако при слишком большом количестве пользователей этого, скорее всего, будет недостаточно. Для дальнейшего повышения производительности вы можете воспользоваться Azure CDN.

CDN имеет десятки сайтов по всему миру, на каждом из которых могут храниться копии BLOB-объектов Azure. Когда пользователь, расположенный в некотором регионе, впервые обращается к определенному BLOB-объекту, содержащаяся в нем информация копируется из центра обработки данных Azure в локальное хранилище CDN, расположенное в данном географическом регионе. После этого для всех обращений из этого региона используется данная копия BLOB-объекта, кэшированная в CDN, благодаря чему не требуется направлять запросы в ближайший центр обработки данных Azure. В результате у пользователей во всем мире увеличивается скорость доступа к часто используемым данным.



<h2><a id="identity"></a>Удостоверение</h2>

Работа с удостоверением характерна для большинства приложений. Например, сведения о том, кем является пользователь, позволяют приложению принять решение о разрешении взаимодействия с ним. Чтобы помочь вам в этом, корпорация Майкрософт предоставляет Azure Active Directory.

Как и многие службы каталогов, Azure Active Directory сохраняет информацию о пользователях и организациях, к которым они относятся. Это позволяет пользователям выполнять вход в систему и получать маркеры, которые они могут предоставлять приложениям в качестве своего удостоверения. Кроме того, это позволяет синхронизировать информацию о пользователях с Windows Server Active Directory, выполняемой локально в вашей локальной сети. Хотя механизмы и форматы данных, используемые в Azure Active Directory, отличаются от механизмов и форматов в Windows Server Active Directory, они выполняют схожие функции. 

Важно понимать, что служба Azure Active Directory разработана в первую очередь для использования облачными приложениями. Она может использоваться приложениями, выполняемыми в Azure или на других облачных платформах. Ее также могут использовать собственные облачные приложения корпорации Майкрософт, например, входящие в состав Office 365.  Однако Azure Active Directory не подходит в том случае, если вы хотите расширить свой центр обработки данных в облако с помощью виртуальных машин Azure и виртуальной сети Azure. Вместо этого рекомендуется запустить Windows Server Active Directory в облачных виртуальных машинах, как описано выше.

Чтобы приложения могли осуществлять доступ к содержащейся в ней информации, служба Azure Active Directory предоставляет API REST под названием Azure Active Directory Graph. Этот API позволяет приложениям, выполняемым на любой платформе, получать доступ к объектам каталога и отношениям между ними.  Например, авторизованное приложение может использовать данный API для получения сведений о пользователе, группах, к которым он принадлежит, и другой информации. Приложения также могут просматривать отношения между пользователями — их социальные профили, что позволяет им более разумно подходить к связям между людьми.

Другой компонент данной службы — Azure Active Directory Access Control — упрощает получение приложением сведений об удостоверениях от Facebook, Google, Windows Live ID и других популярных поставщиков удостоверений. Вместо того чтобы требовать от приложения поддержки обширного набора форматов данных и протоколов, используемых каждым из таких поставщиков, Access Control преобразует их один единый формат. Это также позволяет приложению принимать входы в систему из одного или нескольких доменов Active Directory . Например, поставщик, предлагающий приложение SaaS, может использовать Azure Active Directory Access Control для предоставления пользователям каждого из клиентов возможности единого входа в это приложение.

Службы каталогов представляют собой базовую основу для локальной обработки. Нет ничего удивительного в том, что они играют важную роль и в облаке.

<h2><a id="media"></a>Служба мультимедиа</h2>

Сегодня видео составляют большую часть интернет-трафика, а завтра этот процент будет еще больше. При этом предоставлять видео в Интернете непросто. Существует множество переменных, например алгоритм кодирования и разрешение экрана пользователя. Для видео также характерны всплески спроса, например в субботу вечером, когда многие люди предпочитают смотреть фильм через Интернет. 

Учитывая популярность видео, многие новые приложения наверняка будут создаваться с его использованием. Но все они должны решить некоторое количество одних и тех же проблем, нет смысла каждому из них решать их самостоятельно. Лучшим подходом является создание платформы, которая предоставляет общие решения для использования многими приложениями. И построение этой платформы в облаке имеет некоторые явные преимущества. Она может быть широко доступна на основе оплаты по мере использования, и она может также обрабатывать разброс спроса на видео, с которым часто сталкиваются приложения.

Службы мультимедиа Azure устраняют эту проблему. Они предоставляет набор облачных компонентов, которые упрощают создание и запуск приложений, использующих видео и мультимедиа. Технология представлена на рисунке 7.

![Службы мультимедиа Azure](./media/intro-to-azure/IntroAzure8.png)   
 **Рисунок 7. Службы мультимедиа — это платформа для приложений, которые предоставляют клиентам по всему миру видео и мультимедиа.**


Как показано на рисунке, службы мультимедиа предоставляют набор компонентов для приложений, работающих с видео и другими мультимедиа. Например, они включают компонент поглощения медиа для передачи видео в службах мультимедиа (где они хранятся в BLOB-объектах Azure), компонент кодировки, который поддерживает различные форматы видео и аудио, компонент защиты содержимого, который обеспечивает управление цифровыми правами, компонент для вставки рекламы в поток видео, компоненты для потоковой передачи и многое другое. Партнеры корпорации Майкрософт также могут предоставлять компоненты для этой платформы, а Майкрософт будет распространять эти компоненты и взимать оплату в их пользу. 

Приложения, использующие эту платформу, можно запускать в Azure или в другом месте. Например, классическое приложение для производства видео может позволять пользователям загружать видео в службы мультимедиа, а затем обрабатывать его различными способами. Или же служба управления содержимым на основе облака, работающая на Azure, может полагаться на службы мультимедиа для обработки и распространения видео. Независимо от того, где и над чем работает каждое приложение, оно выбирает необходимые для использования компоненты, связываясь с ними через интерфейсы REST. 

Для распространения своего продукта приложение может использовать сеть доставки содержимого Azure CDN, другую сеть CDN или просто отправить биты непосредственно пользователям. Независимо от способа доставки, видео, созданные с помощью служб мультимедиа, можно размещать на различных клиентских системах, включая Windows, Macintosh, HTML 5, iOS, Android, Windows Phone, Flash и Silverlight. Цель состоит в том, чтобы упростить создание современных мультимедийных приложений. 

Чтобы более наглядно ознакомиться с работой служб мультимедиа, загрузите [афишу служб мультимедиа Azure][Azure Media Services Poster].


<h2><a id="HPC"></a>Высокопроизводительные вычислительные системы</h2>

Одним из наиболее привлекательных способов использования облачной платформы является создание высокопроизводительных вычислительных систем (HPC). Принцип работы HPC заключается в одновременном выполнении кода на множестве компьютеров. В Azure это соответствует одновременному выполнению множества виртуальных машин, которые параллельно работают над решением некоторой проблемы. Для этого требуется произвести некоторое планирование приложений, чтобы распределить их работу по всем таким экземплярам. Именно для этой цели Azure предоставляет планировщик HPC Scheduler. 

Этот компонент может работать с приложениями HPC, поддерживающими отраслевой стандарт MPI (Message Passing Interface — интерфейс передачи сообщений). Одним из примеров приложений такого типа является программное обеспечение, осуществляющее анализ методом конечных элементов, например, моделирующее автомобильные катастрофы, но существует и множество других примеров. HPC Scheduler также можно использовать с так называемыми "приложениями с усложненным параллелизмом", например приложения для моделирования методом Монте-Карло. Независимо от решаемой проблемы, суть одна: HPC Scheduler осуществляет комплексную задачу по планированию параллельной обработки в большом количестве виртуальных машин Azure. Цель в том, чтобы упростить построение приложений HPC в облаке. 

<h2><a id="commerce"></a>Приложения для коммерции</h2>

Возникновение службы Software отражает трансформацию подхода к созданию приложений. Она также изменяет то, как мы продаем приложения. Поскольку приложение SaaS живет в облаке, разумно, что потенциальные клиенты будут искать решения в Интернете. И это изменение касается не только приложений, но и данных. Почему бы людям не обращаться в облако за наборами данных, доступными на коммерческой основе? Майкрософт решает обе эти проблемы с помощью магазинов [Azure Marketplace](http://datamarket.azure.com/) и [Azure Store](/ru-ru/store/overview/); см. рис. 8.

![Коммерция в Azure](./media/intro-to-azure/IntroAzure9.png)   
 **Рисунок 8. Магазины Azure Marketplace и Azure Store позволяют найти и купить коммерческие наборы данных и приложений Azure.**

Они отличаются тем, что Marketplace находится за пределами портала управления Azure, а доступ к Store может осуществляться из портала. Потенциальные клиенты могут искать приложения Azure, которые удовлетворяют их потребностям, а затем регистрироваться для их использования через автора приложения или непосредственно через магазины Marketplace или Store. Клиенты также могут искать коммерческие наборы данных, включая демографические, финансовые, географические данные и многое другое. Когда они нашли то, что нужно, они могут получить доступ либо через поставщика, непосредственно из магазинов Marketplace или Store, либо, в некоторых случаях, с портала управления. Приложения также могут использовать в Marketplace интерфейс Bing Search, что даст им доступ к результатам поиска в Интернете.


<h2><a id="sdk"></a>Пакеты SDK</h2>

В 2008 году самая первая предварительная версия Azure поддерживала только разработки .NET. Однако сегодня можно создавать приложения Azure практически на любом языке. В настоящее время корпорация Майкрософт предоставляет языковые пакеты SDK для .NET, Java, PHP, Node.js, Ruby и Python. Имеется также общий пакет SDK Azure, который обеспечивает базовую поддержку для любого языка, например C++. 

Эти пакеты SDK помогают строить, разворачивать и управлять приложениями Azure. Они доступны из www.windowsazure.com или GitHub, и их можно использовать с Visual Studio и Eclipse. Azure также предлагает средства командной строки, которые разработчики могут использовать в любой среде редактора или разработки, включая средства для развертывания приложений Azure с системами Linux и Macintosh. 

Помимо помощи в построении приложений Azure, эти пакеты SDK также предоставляют клиентские библиотеки, помогающие создавать работающее за пределами облака программное обеспечение, которое использует службы Azure. Например, можно создать приложение, работающее на хостере, использующем BLOB-объекты Azure, или создать инструмент, который выполняет развертывание приложений Azure через интерфейс управления Azure. 


<h2><a id="start"></a>Приступая к работе</h2>

Теперь, когда вы получили общее представление, следующим шагом будет написание вашего первого приложения Azure. Выберите язык, [получите соответствующий SDK](/ru-ru/downloads/) и начинайте работу. Облачные вычисления предоставляют новый вариант по умолчанию — начинать работу сразу.



[Афиша служб мультимедиа Azure]: http://www.microsoft.com/ru-ru/download/details.aspx?id=38195

