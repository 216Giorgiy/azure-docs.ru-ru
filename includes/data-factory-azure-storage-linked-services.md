## Связанная служба хранилища Azure

**Связанная служба хранилища Azure** позволяет связать учетную запись хранения Azure с фабрикой данных Azure с помощью **ключа учетной записи**. В этом случае фабрика данных получает глобальный доступ к хранилищу Azure. В таблице ниже приведено описание элементов JSON, которые относятся к связанной службе хранилища Azure.

| Свойство | Описание | Обязательно |
| :-------- | :----------- | :-------- |
| type | Для свойства type необходимо задать значение **AzureStorage**. | Да |
| connectionString | В свойстве connectionString указываются сведения, необходимые для подключения к службе хранилища Azure. | Да |

Действия по просмотру или копированию ключа учетной записи для хранилища Azure см. в статье [Просмотр, копирование и повторное создание ключей доступа к хранилищу](../storage/storage-create-storage-account.md#view-copy-and-regenerate-storage-access-keys).

**Пример**
  
	{  
		"name": "StorageLinkedService",  
		"properties": {  
			"type": "AzureStorage",  
			"typeProperties": {  
				"connectionString": "DefaultEndpointsProtocol=https;AccountName=<accountname>;AccountKey=<accountkey>"  
			}  
		}  
	}  


## Связанная служба SAS хранилища Azure  
Подписанный URL-адрес (SAS) обеспечивает делегированный доступ к ресурсам в вашей учетной записи хранения. Это означает, что клиенту можно предоставить ограниченное право на работу с объектами в вашей учетной записи хранения на определенный период времени и с определенным набором разрешений, не сообщая ему ключи доступа к своей учетной записи. Подпись общего доступа — это URI, который в своих параметрах запроса содержит все сведения, необходимые доступа к ресурсу хранилища с прохождением проверки подлинности. Для доступа к ресурсам хранилища с помощью SAS клиенту достаточно передать SAS в соответствующий конструктор или метод. Дополнительные сведения о подписанном URL-адресе см. в разделе [Подписанный URL-адрес: общие сведения о модели SAS](../storage/storage-dotnet-shared-access-signature-part-1.md).
  
Связанная служба SAS хранилища Azure позволяет связать учетную запись хранения Azure с фабрикой данных Azure с помощью подписанного URL-адреса (SAS). В этом случае фабрика данных получает ограниченный или привязанный ко времени доступ ко всем или конкретным ресурсам (BLOB-объектам или контейнерам) в хранилище. В таблице ниже приведено описание элементов JSON, которые относятся к связанной службе SAS хранилища Azure.

| Свойство | Описание | Обязательно |
| :-------- | :----------- | :-------- |
| type | Для свойства type необходимо задать значение **AzureStorageSas**. | Да |
| sasUri | Укажите URI подписанного URL-адреса к ресурсам хранилища Azure, например BLOB-объектам, контейнерам или таблицам. Подробные сведения см. ниже. | Да | 


**Пример**
  
	{  
		"name": "StorageSasLinkedService",  
		"properties": {  
			"type": "AzureStorageSas",  
			"typeProperties": {  
				"sasUri": "<storageUri>?<sasToken>"   
			}  
		}  
	}  

При создании **URI SAS** следует принять во внимание следующие моменты:

- Фабрика данных Azure поддерживает только **SAS службы**, а не SAS учетной записи. Сведения об этих двух типах см. в разделе [Типы подписанных URL-адресов](../storage/storage-dotnet-shared-access-signature-part-1.md#types-of-shared-access-signatures).
- Для объектов следует задать соответствующие **разрешения** на чтение или запись. Они устанавливаются с учетом назначения связанной службы (чтение, запись, чтение и запись) в фабрике данных.
- Необходимо соответствующим образом задать **время окончания срока действия**. Убедитесь, что срок действия доступа к объектам хранилища Azure не истекает в период активности конвейера.
- В зависимости от потребности URI следует создать на нужном уровне контейнера, большого двоичного объекта или таблицы. URI SAS для большого двоичного объекта Azure позволяет службе фабрики данных обращаться к данному конкретному большому двоичному объекту. URI SAS для контейнера больших двоичных объектов Azure позволяет службе фабрики данных выполнять итерацию по большим двоичным объектам в этом контейнере. Чтобы предоставить доступ к большему или меньшему количеству объектов позднее или обновить URI SAS, не забудьте обновить связанную службу с помощью нового URI.   

<!---HONumber=AcomDC_0128_2016-->