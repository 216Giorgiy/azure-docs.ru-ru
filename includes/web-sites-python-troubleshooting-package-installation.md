Некоторые пакеты могут не установиться с помощью pip при запуске Azure.  Возможно, пакет просто недоступен в каталоге пакетов Python.  Может требоваться компилятор (компилятор недоступен на виртуальной машине, где запущен веб-сайт Azure).

В этом разделе будут рассмотрены способы решения этой проблемы.

### Запрос архивов wheel

Если для установки пакета требуется компилятор, необходимо обратиться к владельцу пакета для получения доступа к wheel для пакета.

Благодаря недавней доступности [Компилятора Microsoft Visual C++ для Python 2.7][] теперь проще создавать пакеты с машинным кодом для Python 2.7.

### Сборки wheel (требуется Windows)

Примечание. При использовании этого параметра выполняйте компиляцию пакета с помощью среды Python, совпадающей с платформой, архитектурой или версией, которая использовалась на веб-сайте Azure (Windows, 32-разрядная версия, 2.7 или 3.4).

Если пакет не установился из-за того, что требуется компилятор, можно установить компилятор на локальном компьютере и выполнить сборку wheel для пакета, который потом будет включен в репозиторий.

Пользователи Mac или Linux. Если у вас нет доступа к компьютеру под управлением Windows, сведения о создании виртуальной машины в Azure см. в разделе [Создание виртуальной машины под управлением Windows][].  С его помощью можно выполнить сборки wheel, добавить их в репозиторий и при необходимости удалить виртуальную машину. 

Для Python 2.7 можно установить [Компилятор Microsoft Visual C++ для Python 2.7][].

Для Python 3.4 можно установить [Microsoft Visual C++ 2010 Express][].

Для выполнения сборки архива wheel потребуется пакет wheel.

    env\scripts\pip install wheel

Для компиляции зависимости будет использоваться `pip wheel`.

    env\scripts\pip wheel azure==0.8.4

В папке \wheelhouse будет создан WHL-файл.  Добавьте папку \wheelhouse и файлы wheel в репозиторий.

Добавьте параметр "--find-links" в начало файла requirements.txt. Это позволит pip искать точное совпадение в локальной папке перед тем, как перейти к каталогу пакетов Python.

    --find-links wheelhouse
    azure==0.8.4
			
Если необходимо включить все зависимости в папку \wheelhouse и не использовать каталог пакетов Python, можно задать в pip принудительный пропуск каталога пакетов, добавив "--no-index" в начало файла requirements.txt.

    --no-index

### Настройка установки

Скрипт развертывания можно настроить для установки пакета в виртуальной среде с помощью другого установщика, например, easy\_install.  Закомментированный пример см. в файле deploy.cmd.  Убедитесь, что такие пакеты не указаны в файле requirements.txt, чтобы команда pip не устанавливала их.

Добавьте следующее в скрипт развертывания:

    env\scripts\easy_install somepackage

Вы также сможете использовать easy\_install для установки из установщика EXE-файлов (некоторые совместимы с ZIP-файлами, и  easy\_install поддерживает их).  Добавьте установщик в свой репозиторий и вызовите easy\_install, передав путь к исполняемому файлу.

Добавьте следующее в скрипт развертывания:

    env\scripts\easy_install "%DEPLOYMENT_SOURCE%\installers\somepackage.exe"

### Включите виртуальную среду в репозиторий (требуется Windows)

Примечание. При использовании этого параметра убедитесь, что используется виртуальная среда, совпадающая с платформой, архитектурой или версией, которая используется на веб-сайте Azure (Windows, 32-разрядная версия, 2.7 или 3.4).

При включении виртуальной среды в репозиторий можно предотвратить выполнение скриптом развертывания управления виртуальной средой Azure, создав пустой файл:

    .skipPythonDeployment

Рекомендуется удалить существующую виртуальную среду на сайте, чтобы при автоматическом управлении виртуальной средой не оставались лишние файлы.


[Создание виртуальной машины под управлением Windows]: http://azure.microsoft.com/documentation/articles/virtual-machines-windows-tutorial/
[Компилятор Microsoft Visual C++ для Python 2.7]: http:://aka.ms/vcpython27
[Microsoft Visual C++ 2010 Express]: http://go.microsoft.com/?linkid=9709949
<!--HONumber=42-->
