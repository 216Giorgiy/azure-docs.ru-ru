---
title: 'Azure Content Moderator: задания модерации и проверки с участием человека | Документация Майкрософт'
description: Применение человеческого контроля к машинной модерации для получения наилучших результатов.
services: cognitive-services
author: sanjeev3
manager: mikemcca
ms.service: cognitive-services
ms.component: content-moderator
ms.topic: article
ms.date: 1/21/2018
ms.author: sajagtap
ms.openlocfilehash: 35b3cdaa410712c3fd08d3df4ebe4c83e3955d50
ms.sourcegitcommit: 95d9a6acf29405a533db943b1688612980374272
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/23/2018
ms.locfileid: "35380269"
---
# <a name="moderation-jobs-and-reviews"></a>Задания модерации и проверки

Объединение машинной модерации и человеческого контроля с использованием [API проверки](https://westus.dev.cognitive.microsoft.com/docs/services/580519463f9b070e5c591178/operations/580519483f9b0709fc47f9c5) Azure Content Moderator для получения наилучших результатов для вашего бизнеса.

API проверки предлагает включить человеческий контроль в процесс модерации контента следующими способами.

* Операции `Job` используются для запуска машинной модерации и создания пользовательской проверки в один этап.
* Операции `Review` используются для создания пользовательской проверки после этапа модерации.
* Операции `Workflow` используются для управления рабочими процессами, автоматизирующими проверку, с порогами для создания проверок.

Операции `Job` и `Review` принимают конечные точки обратного вызова для получения состояния и результатов.

В этой статье рассматриваются операции `Job` и `Review`. Прочитайте [обзор рабочих процессов](workflow-api.md), чтобы узнать, как создать, изменить и получить определения рабочих процессов.

## <a name="job-operations"></a>операции заданий;

### <a name="start-a-job"></a>Запустите задание
С помощью операции `Job.Create` можно запустить задание модерации и создания пользовательской проверки. Content Moderator проверяет содержимое и оценивает указанный рабочий процесс. На основании результатов рабочего процесса он создает проверки либо пропускает этот шаг. Он также отправляет теги после модерации и после проверки на конечную точку обратного вызова.

Входные данные содержат следующую информацию:

- идентификатор команды проверки;
- содержимое, предназначенное для модерации;
- имя рабочего процесса (имя рабочего процесса по умолчанию — default);
- точка обратного вызова API для уведомлений.
 
В приведенном ниже ответе показан идентификатор задания, которое было запущено. Идентификатор задания позволяет получить состояние задания и подробные сведения о нем.

    {
        "JobId": "2018014caceddebfe9446fab29056fd8d31ffe"
    }

### <a name="get-job-status"></a>Получение состояния задания

С помощью операции `Job.Get` и идентификатора задания можно получить сведения о выполняющемся или завершенном задании. Эта операция возвращает результат немедленно, так как задание модерации выполняется асинхронно. Результаты возвращаются через конечную точку обратного вызова.

Входные данные содержат следующую информацию:

- идентификатор команды проверки: идентификатор задания, возвращенный предыдущей операцией.

Ответ содержит следующие данные:

- идентификатор созданной проверки (с его помощью можно получить окончательные результаты проверки);
- состояние задания (завершено или выполняется): назначенные теги модерации (пары "ключ-значение");
- отчет о выполнении задания.
 
 
        {
            "Id": "2018014caceddebfe9446fab29056fd8d31ffe",
            "TeamName": "some team name",
            "Status": "Complete",
            "WorkflowId": "OCR",
            "Type": "Image",
            "CallBackEndpoint": "",
            "ReviewId": "201801i28fc0f7cbf424447846e509af853ea54",
            "ResultMetaData":[
            {
            "Key": "hasText",
            "Value": "True"
            },
            {
            "Key": "ocrText",
            "Value": "IF WE DID \r\nALL \r\nTHE THINGS \r\nWE ARE \r\nCAPABLE \r\nOF DOING, \r\nWE WOULD \r\nLITERALLY \r\nASTOUND \r\nOURSELVE \r\n"
            }
            ],
            "JobExecutionReport": [
            {
                "Ts": "2018-01-07T00:38:29.3238715",
                "Msg": "Posted results to the Callbackendpoint: https://requestb.in/vxke1mvx"
                },
                {
                "Ts": "2018-01-07T00:38:29.2928416",
                "Msg": "Job marked completed and job content has been removed"
                },
                {
                "Ts": "2018-01-07T00:38:29.0856472",
                "Msg": "Execution Complete"
                },
            {
                "Ts": "2018-01-07T00:38:26.7714671",
                "Msg": "Successfully got hasText response from Moderator"
                },
                {
                "Ts": "2018-01-07T00:38:26.4181346",
                "Msg": "Getting hasText from Moderator"
                },
                {
                "Ts": "2018-01-07T00:38:25.5122828",
                "Msg": "Starting Execution - Try 1"
                }
            ]
        }
 
![Проверка изображений модераторами-пользователями](images/ocr-sample-image.PNG)

## <a name="review-operations"></a>Операции проверки

### <a name="create-reviews"></a>Создание проверок

Используйте `Review.Create` операцию, чтобы создавать пользовательские проверки. Их можно модерировать отдельно или использовать пользовательскую логику для назначения тегов модерации.

Входные данные для выполнения этой операции следующие:

- содержимое, предназначенное для проверки;
- назначенные теги (пары "ключ-значение") для проверки модераторами-пользователями.

Ниже приведен ответ с идентификатором проверки.

    [
        "201712i46950138c61a4740b118a43cac33f434",
    ]


### <a name="get-review-status"></a>Получение состояния проверки
С помощью операции `Review.Get` можно получить результаты выполненной пользовательской проверки прошедшего модерацию изображения. Уведомление доставляется с помощью указанной конечной точки обратного вызова. 

Эта операция возвращает два набора тегов: 

* теги, назначенные службой модерации;
* теги, назначенные по завершении пользовательской проверки.

Входные данные содержат как минимум следующие сведения:

- имя команды проверки;
- идентификатор проверки, возвращенный предыдущей операцией.

Ответ содержит следующие данные:

- состояние проверки;
- теги (пары "ключ-значение"), подтвержденные модератором-пользователем;
- теги (пары "ключ-значение"), назначенные службой модерации.

В следующем примере ответа показаны и теги, назначенные рецензентом (**reviewerResultTags**), и начальные теги (**metadata**).

    {
        "reviewId": "201712i46950138c61a4740b118a43cac33f434",
        "subTeam": "public",
        "status": "Complete",
        "reviewerResultTags": [
        {
            "key": "a",
            "value": "False"
        },
        {
            "key": "r",
            "value": "True"
        },
        {
            "key": "sc",
            "value": "True"
        }
        ],
        "createdBy": "{teamname}",
        "metadata": [
        {
            "key": "sc",
            "value": "true"
        }
        ],
        "type": "Image",
        "content": "https://reviewcontentprod.blob.core.windows.net/{teamname}/IMG_201712i46950138c61a4740b118a43cac33f434",
        "contentId": "0",
        "callbackEndpoint": "{callbackUrl}"
    }

## <a name="next-steps"></a>Дополнительная информация

* Проверьте в работе [консоль API заданий](try-review-api-job.md) и примеры кода для REST API. Также изучите [краткое руководство по работе с заданиями с помощью .NET](moderation-jobs-quickstart-dotnet.md), если вы уже знакомы с Visual Studio и C#. 
* Чтобы использовать проверки, начните работу с [консолью API проверки](try-review-api-review.md) и воспользуйтесь примерами кода для REST API. Затем изучите [краткое руководство по работе с проверками с помощью .NET](moderation-reviews-quickstart-dotnet.md).
* Чтобы использовать проверки видео, изучите [краткое руководство по проверке видео](video-reviews-quickstart-dotnet.md) и узнайте, как [добавить расшифровки в проверку видео](video-transcript-reviews-quickstart-dotnet.md).
