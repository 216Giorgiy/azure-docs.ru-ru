---
title: Использование свойства "ожидаемые сущности" в действиях средства для обучения ведению диалога — Microsoft Cognitive Services | Документация Майкрософт
titleSuffix: Azure
description: Узнайте, как использовать свойство "ожидаемые сущности" в приложении средства для обучения ведению диалога.
services: cognitive-services
author: v-jaswel
manager: nolachar
ms.service: cognitive-services
ms.component: conversation-learner
ms.topic: article
ms.date: 04/30/2018
ms.author: v-jaswel
ms.openlocfilehash: 83911eba8112cf356af8c4cd562a87f746fbabc5
ms.sourcegitcommit: 95d9a6acf29405a533db943b1688612980374272
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/23/2018
ms.locfileid: "35381796"
---
# <a name="how-to-use-the-expected-entity-property-of-actions"></a>Использование свойства "ожидаемые сущности" в действиях

В этом руководстве демонстрируется назначение поля "Ожидаемые сущности" в свойствах действия.

## <a name="requirements"></a>Требования
Для работы с этим руководством требуется запущенный бот обучения общего назначения.

    npm run tutorial-general

## <a name="details"></a>Сведения
Поле "Ожидаемые сущности" в действии позволяет передать системе сведения о том, какие данные (какую сущность) вы предполагаете получить в ответе пользователя на это действие.

На техническом уровне, если в поле "ожидаемые сущности" указано $entity, система выполнит перечисленные ниже действия для следующего высказывания пользователя.

1. Прежде всего, как обычно, выполняется поиск сущностей с помощью модели извлечения сущностей на основе машинного обучения.
2. Если сущности на первом шаге не обнаружены, используется эвристический подход: полное высказывание пользователя сохраняется в $entity.
3. Далее обычным образом вызывается `EntityDetectionCallback` и система переходит к выбору действия.

## <a name="steps"></a>Действия

### <a name="create-the-application"></a>Создание приложения

1. В пользовательском веб-интерфейсе щелкните New App (Новое приложение).
2. В поле "Имя" введите ExpectedEntities. Затем щелкните "Создать".

### <a name="create-an-entity"></a>Создание сущности

1. Щелкните Entities (Сущности), затем — New Entity (Новая сущность).
2. В поле "Имя сущности" введите произвольное имя.
3. Нажмите кнопку "Создать"

Обратите внимание, что для этой сущности указан тип "пользовательская", то есть ее можно обучать.  Существуют также предварительно созданные сущности, поведение которых нельзя изменять — они описаны в другом руководстве.

![](../media/tutorial4_entities.PNG)

### <a name="create-two-actions"></a>Создание двух действий

1. Щелкните Actions (Действия), а затем New Action (Новое действие).
2. В поле "Ответ" введите "Как тебя зовут?".
3. В поле "Ожидаемые сущности" введите $name. Щелкните Сохранить.
    - Теперь, когда в ответе пользователя на этот вопрос не удастся обнаружить сущности, бот будет предполагать, что нужной сущностью указанного типа является весь ответ пользователя.
2. Выберите Actions (Действия), затем New Action (Создать действие), чтобы создать второе действие.
3. В поле Response (Ответ) введите "Привет, $name".
    - Обратите внимание, что эта сущность автоматически сохраняется как дисквалифицируемая. 
4. Щелкните Сохранить

Теперь у вас есть два действия.

![](../media/tutorial4_actions.PNG)

### <a name="train-the-bot"></a>Обучение бота

1. Щелкните Train Dialogs (Обучение диалогам), а затем — New Train Dialog (Обучение новому диалогу).
2. Введите "привет".
3. Щелкните Score Actions (Оценка действий) и выберите "Как тебя зовут?".
    - Вы увидите, что ответ "Привет, $name" выбрать невозможно, поскольку для него должна быть определена сущность $name, которой пока нет в памяти бота.
2. Введите "Давид". 
    - Обратите внимание, что введенное имя отмечается как сущность. Именно так действует эвристическое правило, которое мы настроили выше — весь ответ считается нужной сущностью.
5. Щелкните Score Actions (Оценить действия).
    - Вы увидите, что значение имени сохранилось в памяти бота.
    - Теперь становится доступен ответ "Привет, $name". 
6. Выберите "Привет, $name".
7. Щелкните Done Teaching (Завершить обучение).

Ниже приведены два примера, в которых модель извлечения сущностей на основе машинного обучения обнаруживает имя, а значит эвристическое правило "ожидаемых сущностей" не применяется.

1. Щелкните New Train Dialog (Обучение новому диалогу).
2. Введите "меня зовут Давид".
    - В этом примере Давид сразу определяется как сущность name, поскольку система уже встречала это слово.
2. Щелкните Score Actions (Оценить действия).
3. Выберите "Привет, $name".
4. Введите "меня зовут Сергей".
    - Имя Сергей также опознается правильно, поскольку система знакома с этой формулировкой.
2. Щелкните Score Actions (Оценить действия).
2. Выберите "Привет, Сергей".
3. Щелкните Done Teaching (Завершить обучение).

В следующих двух примерах эвристическое правило "ожидаемой сущности" срабатывает, но дает неправильные результаты. В них мы покажем, как внести необходимые исправления.

1. Введите строку "называй меня Иосиф".
    - Вы можете заметить, что система не распознала это имя как сущность.
2. Щелкните "Иосиф" и выберите сущность name.
3. Щелкните Score Actions (Оценить действия).
4. Выберите "Привет, $name".
5. Щелкните Done Teaching (Завершить обучение).
1. Щелкните New Train Dialog (Обучение новому диалогу).
2. Введите "здравствуйте".
3. В ответ на "Как тебя зовут" введите "Меня называют Михаил".
    - Обратите внимание, что фраза выделяется целиком. В этом случае статистическая модель не смогла найти имя, поэтому применяется эвристическое правило, которое заносит весь ответ в сущность name.
2. Чтобы исправить это, щелкните выделенную фразу, а затем щелкните красный крестик. 
3. Теперь выберите отдельно слово "Михаил"и щелкните сущность name.
2. Щелкните Score Actions (Оценить действия).
3. Выберите "Привет, $name".
4. Щелкните Done Teaching (Завершить обучение).

![](../media/tutorial4_dialogs.PNG)

## <a name="next-steps"></a>Дополнительная информация

> [!div class="nextstepaction"]
> [Отрицаемые сущности](./5-negatable-entities.md)
