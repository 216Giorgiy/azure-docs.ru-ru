---
title: Использование свойства "ожидаемые сущности" в действиях средства для обучения ведению диалога — Microsoft Cognitive Services | Документация Майкрософт
titleSuffix: Azure
description: Узнайте, как использовать свойство "ожидаемые сущности" в модели Conversation Learner.
services: cognitive-services
author: v-jaswel
manager: nolachar
ms.service: cognitive-services
ms.component: conversation-learner
ms.topic: article
ms.date: 04/30/2018
ms.author: v-jaswel
ms.openlocfilehash: fb9193066c9501341efb779b9f9e2ccace02cccf
ms.sourcegitcommit: f1e6e61807634bce56a64c00447bf819438db1b8
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/24/2018
ms.locfileid: "42888210"
---
# <a name="how-to-use-the-expected-entity-property-of-actions"></a>Использование свойства "ожидаемые сущности" в действиях

В этом руководстве демонстрируется назначение поля "Ожидаемые сущности" в свойствах действия.

## <a name="video"></a>Видео

[![Предварительная версия руководства 4](http://aka.ms/cl-tutorial-04-preview)](http://aka.ms/blis-tutorial-04)

## <a name="requirements"></a>Требования
Для работы с этим руководством требуется запущенный бот обучения общего назначения.

    npm run tutorial-general

## <a name="details"></a>Сведения
Поле "Ожидаемые сущности" в действии позволяет передать системе сведения о том, какие данные (какую сущность) вы предполагаете получить в ответе пользователя на это действие.

На техническом уровне, если в поле "ожидаемые сущности" указано $entity, система выполнит перечисленные ниже действия для следующего высказывания пользователя.

1. Прежде всего, как обычно, выполняется поиск сущностей с помощью модели извлечения сущностей на основе машинного обучения.
2. Если сущности на первом шаге не обнаружены, используется эвристический подход: полное высказывание пользователя сохраняется в $entity.
3. Далее обычным образом вызывается `EntityDetectionCallback` и система переходит к выбору действия.

## <a name="steps"></a>Действия

### <a name="create-the-model"></a>Создание модели

1. В пользовательском веб-интерфейсе щелкните "Новая модель".
2. В поле "Имя" введите ExpectedEntities. Затем щелкните "Создать".

### <a name="create-an-entity"></a>Создание сущности

1. Щелкните Entities (Сущности), затем — New Entity (Новая сущность).
2. В поле "Entity Name" (Имя сущности) введите имя.
3. Щелкните Создать. 

> [!NOTE]
> Тип сущности — "custom". Это означает, что сущность может обучаться.  Существуют также предварительно созданные сущности, поведение которых нельзя изменять.  Сведения о таких сущностях приведены в статье [Добавление предварительно созданных сущностей](./7-built-in-entities.md).

![](../media/tutorial4_entities.PNG)

### <a name="create-two-actions"></a>Создание двух действий

1. Щелкните "Actions" (Действия) и "New Action" (Новое действие).
2. В поле "Ответ" введите "Как тебя зовут?".
3. В поле "Ожидаемые сущности" введите $name. Щелкните Сохранить.
    - Данное значение указывает, что когда в ответе пользователя на этот вопрос не удастся обнаружить сущности, бот будет предполагать, что нужной сущностью указанного типа является весь ответ пользователя.
2. Выберите "Actions" (Действия), затем "New Action" (Создать действие), чтобы создать второе действие.
3. В поле Response (Ответ) введите "Привет, $name".
    - Сущность автоматически добавляется как требуемая. 
4. Щелкните Сохранить.

Теперь у вас есть два действия.

![](../media/tutorial4_actions.PNG)

### <a name="train-the-bot"></a>Обучение бота

1. Щелкните "Train Dialogs" (Обучение диалогам), а затем — "New Train Dialog" (Обучение новому диалогу).
2. Введите "привет".
3. Щелкните Score Actions (Оценка действий) и выберите "Как тебя зовут?".
    - Ответ "Привет, $name" выбрать невозможно, поскольку для него необходимо определить сущность $name, которой пока нет в памяти бота.
2. Введите "Давид". 
    - Введенное имя отмечается как сущность. Именно так действует эвристическое правило, которое мы настроили выше — весь ответ считается нужной сущностью.
5. Щелкните "Score Actions" (Оценить действия).
    - Теперь значение имени перемещено в память бота.
    - Теперь становится доступен ответ "Привет, $name". 
6. Выберите "Привет, $name".
7. Щелкните Done Teaching (Завершить обучение).

Ниже приведены два примера, в которых модель извлечения сущностей на основе машинного обучения обнаруживает имя, а значит эвристическое правило "ожидаемых сущностей" не применяется.

1. Щелкните New Train Dialog (Обучение новому диалогу).
2. Введите "меня зовут Давид".
    - В модели имя Давид сразу определяется как сущность name, поскольку система уже встречала это слово.
2. Щелкните "Score Actions" (Оценить действия).
3. Выберите "Привет, $name".
4. Введите "my name is susan" (Меня зовут Светлана).
    - Модель определяет фразу Светлана как имя, поскольку система знакома с этим шаблоном.
2. Щелкните Score Actions (Оценить действия).
2. Выберите "Привет, Сергей".
3. Щелкните Done Teaching (Завершить обучение).

В следующих примерах эвристическое правило "ожидаемой сущности" срабатывает, но дает неправильные результаты. В них будет показано, как внести необходимые исправления.

1. Введите строку "называй меня Иосиф".
    - Модель не распознала это имя как сущность.
2. Щелкните "Иосиф" и выберите сущность name.
3. Щелкните Score Actions (Оценить действия).
4. Выберите "Привет, $name".
5. Щелкните Done Teaching (Завершить обучение).
1. Щелкните New Train Dialog (Обучение новому диалогу).
2. Введите "здравствуйте".
3. В ответ на "Как тебя зовут" введите "Меня называют Михаил".
    - Фраза выделяется целиком. В этом случае статистическая модель не смогла найти имя, поэтому применяется эвристическое правило, которое заносит весь ответ в сущность name.
2. Чтобы исправить это, щелкните выделенную фразу, а затем щелкните красный крестик. 
3. Теперь выберите отдельно слово "Михаил"и щелкните сущность name.
2. Щелкните Score Actions (Оценить действия).
3. Выберите "Привет, $name".
4. Щелкните Done Teaching (Завершить обучение).

![](../media/tutorial4_dialogs.PNG)

## <a name="next-steps"></a>Дополнительная информация

> [!div class="nextstepaction"]
> [Отрицаемые сущности](./5-negatable-entities.md)
