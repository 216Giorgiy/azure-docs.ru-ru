---
title: Запись диалогов в приложении Conversation Learner в Microsoft Cognitive Services | Документация Майкрософт
titleSuffix: Azure
description: Сведения о том, как записывать диалоги в приложении Conversation Learner.
services: cognitive-services
author: v-jaswel
manager: nolachar
ms.service: cognitive-services
ms.component: conversation-learner
ms.topic: article
ms.date: 04/30/2018
ms.author: v-jaswel
ms.openlocfilehash: 477545c48aeca05d56fdae28ac65a8f381a482fe
ms.sourcegitcommit: 95d9a6acf29405a533db943b1688612980374272
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/23/2018
ms.locfileid: "35381833"
---
# <a name="how-to-log-dialogs-in-a-conversation-learner-application"></a>Запись диалогов в приложении Conversation Learner.

В этом руководстве показано, как выполнять тестирование от лица пользователя в интерфейсе Conversation Learner, сохранять диалоги и вносить исправления в сохраненные диалоги для улучшения модели.

## <a name="requirements"></a>Требования
Для работы с этим руководством требуется запущенный бот обучения общего назначения.

    npm run tutorial-general

## <a name="details"></a>Сведения
Вы можете просмотреть сохраненные диалоги с пользователями и внести в них исправления.  Кроме того, вы можете исправить метки сущностей и выбранные действия, чтобы повысить производительность обученной модели и системы в целом. 

## <a name="steps"></a>Действия

### <a name="create-the-application"></a>Создание приложения

1. В пользовательском веб-интерфейсе щелкните New App (Новое приложение).
2. В поле Name (Имя) введите LogDialogs. Затем щелкните Create (Создать).

### <a name="create-an-entity"></a>Создание сущности

1. Щелкните Entities (Сущности), затем New Entity (Новая сущность).
2. В поле Entity Name (Имя сущности) введите city.
3. Щелкните Создать.

### <a name="create-two-actions"></a>Создание двух действий

1. Щелкните Actions (Действия), а затем New Action (Новое действие).
2. В поле Response (Ответ) введите Which city? (Какой город?).
3. В поле Disqualifying Entities (Блокирующие сущности) введите $city.
3. Нажмите кнопку "Создать"

Теперь создайте второе действие.

1. Щелкните Actions (Действия), а затем New Action (Новое действие).
3. В поле Response (Ответ) введите The weather in $city is probably sunny (Погода в городе $city скорее всего солнечная).
4. В поле Required Entities (Обязательные сущности) введите $city.
4. Щелкните Создать.

Теперь у вас есть два действия.

### <a name="train-the-bot"></a>Обучение бота

1. Щелкните Train Dialogs (Обучение диалогам), а затем New Train Dialog (Обучение новому диалогу).
2. Введите what's the weather (Какая погода?).
3. Щелкните Score Actions (Оценить действия) и выберите Which city? (Какой город?)
2. Введите Seattle (Сиэтл).
3. Дважды щелкните Seattle (Сиэтл) и выберите сущность city.
    - Выбранный текст помечается как сущность city.
5. Щелкните Score Actions (Оценить действия).
6. Выберите The weather in $city is probably sunny (Погода в городе $city скорее всего солнечная).
7. Щелкните Done Teaching (Завершить обучение).

Добавьте другой пример диалога.

1. Щелкните New Action (Новое действие), а затем New Train Dialog (Обучение новому диалогу).
2. Введите what's the weather in Seattle? (Какая погода в Сиэтле?). Обратите внимание, что Seattle (Сиэтл) помечается как сущность.
5. Щелкните Score Actions (Оценить действия). 
6. Выберите The weather in $city is probably sunny (Погода в городе $city скорее всего солнечная).
7. Щелкните Done Teaching (Завершить обучение).

### <a name="try-the-bot-as-the-user"></a>Проверка бота от имени пользователя
Предположим, что мы развернули этот бот для пользователей.

1. Щелкните Log Dialogs (Записать диалоги).
2. Щелкните New Chat Session (Новый сеанс чата).
    - Бот будет представлен так, как если бы пользователь взаимодействовал с ним с помощью элемента управления веб-чатом в левой части пользовательского интерфейса. Пустое пространство справа можно просто игнорировать.
3. Введите hello (Привет).
4. Бот ответит: which city? (Какой город?)
4. Введите Boston (Бостон).
5. Бот ответит: which city? (Какой город?)
    - Это выглядит неправильно. Давайте сохраним этот диалог.
2. Щелкните Done Testing (Завершить тестирование).

Начните новый сеанс.

2. Щелкните New Chat Session (Новый сеанс чата).
3. Введите forecast for Boston (Прогноз погоды в Бостоне).
4. Бот ответит: which city? (Какой город?)
2. Щелкните Done Teaching (Завершить обучение).

Теперь давайте внесем правки во второй диалог.

1. Щелкните forecast for Boston (Прогноз погоды в Бостоне) в разделе Log Dialogs (Запись диалогов).
    - Откроется окно с текстом диалога.
    - Щелкнув мышью на пользовательской стороне диалога (здесь это текст "forecast for Boston" (Прогноз погоды в Бостоне)), вы можете изменить метки сущности.
    - Щелкнув мышью на стороне системы (здесь это текст which city (Какой город)), вы можете изменить выбор действия.
5. Щелкните forecast for Boston (Прогноз погоды в Бостоне). 
    - Проблема заключается в том, что Boston (Бостон) не был отмечен как сущность. Это нужно изменить.
    - Дважды щелкните Boston (Бостон) и выберите city (Город).
    - Щелкните Submit Changes (Отправить изменения), а затем Save (Сохранить). Это действие создаст обучающий диалог с учетом внесенных изменений, а затем вы перейдете в созданный обучающий диалог в точке, где вносились эти изменения.
6. Выберите The weather in $city is probably sunny (Погода в городе $city скорее всего солнечная).
7. Щелкните Done Teaching (Завершить обучение). Перейдите в раздел Train Dialogs (Обучение диалогам) и убедитесь, что добавлено новое действие.

![](../media/tutorial9_logdiag1.PNG)

Теперь давайте внесем правки в другой диалог.

1. Щелкните hello (Привет) в разделе Log Dialogs (Запись диалогов).
    - Откроется окно с текстом диалога.
3. Обратите внимание, что для hello (Привет) выбирается ответ "which city" (Какой город). Нам нужно это изменить, чтобы ответ выглядел более логичным. Лучше всего отвечать что-то в духе hello, I'm the weather bot (Привет, я бот, который сообщает прогноз погоды). Но у нас пока нет подходящего действия, поэтому мы создадим его.
4. Щелкните Action (Действие).
    - В поле Respose (Ответ), введите I'm the weather bot. I can help with forecasts (Я бот, который сообщает прогноз погоды).
6. Снимите флажок Wait for Response (Ожидать ответ), чтобы наше действие применялось без ожидания.
7. Щелкните Создать.
8. Щелчком выберите это новое действие. Нажмите кнопку "Сохранить".
    - Теперь вы вернетесь к этой же точке, но уже в сеансе обучения.
6. Щелчком выберите which city? (Какой город?).
7. Введите Boston (Бостон). Дважды щелкните Boston, чтобы пометить его как сущность, если вы еще не сделали это.
8. Щелкните Score Actions (Оценить действия).
9. Щелчком выберите The weather in $city is probably sunny (Погода в городе $city скорее всего солнечная).
10. Щелкните Done Teaching (Завершить обучение).

![](../media/tutorial9_addnewaction.PNG)

## <a name="next-steps"></a>Дополнительная информация

> [!div class="nextstepaction"]
> [Обратный вызов обнаружения сущностей](./10-entity-detection-callback.md)
