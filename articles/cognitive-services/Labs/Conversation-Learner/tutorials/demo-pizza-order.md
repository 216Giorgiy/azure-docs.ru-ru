---
title: Демонстрационное приложение Conversation Learner для заказа пиццы (Microsoft Cognitive Services) | Документация Майкрософт
titleSuffix: Azure
description: Узнайте, как создать демонстрационное приложение Conversation Learner.
services: cognitive-services
author: v-jaswel
manager: nolachar
ms.service: cognitive-services
ms.component: conversation-learner
ms.topic: article
ms.date: 04/30/2018
ms.author: v-jaswel
ms.openlocfilehash: 99cd89c4f4430f2d65ed0963e3092d51a83842d7
ms.sourcegitcommit: 95d9a6acf29405a533db943b1688612980374272
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/23/2018
ms.locfileid: "35381840"
---
# <a name="demo-pizza-order"></a>Демонстрация. Заказ пиццы
В этом примере демонстрируется бот, принимающий заказы на пиццу. Он поддерживает заказ одной пиццы со следующими возможностями:

- распознавание начинок для пиццы из высказываний пользователя;
- проверка наличия на складе начинок для пиццы и реагирование с учетом наличия;
- сохранение списка начинок из предыдущего заказа и предложение начать новый заказ с того же списка начинок.

## <a name="requirements"></a>Требования
Для работы с этим руководством требуется запущенный бот заказа пиццы.

    npm run demo-pizza

### <a name="open-the-demo"></a>Запуск демонстрационного примера

В веб-интерфейсе в списке приложений выберите TutorialDemo Pizza Order (Демонстрационный пример для заказа пиццы). 

## <a name="entities"></a>Сущности

Мы создали три сущности.

- Toppings сохраняет начинки, выбранные пользователем. Она содержит только допустимые и имеющиеся на складе начинки. Эта сущность проверяет, есть ли нужная начинка в наличии.
- OutofStock используется для того, чтобы сообщить пользователю об отсутствии выбранной начинки на складе.
- LastToppings после размещения заказа содержит список начинок из последнего заказа, чтобы предложить их пользователю.

![](../media/tutorial_pizza_entities.PNG)

### <a name="actions"></a>Действия

Мы создали набор действий, в том числе запросы к пользователю о выборе начинок для пиццы, информирование об уже добавленных начинках и т. д.

Также есть два вызова API.

- FinalizeOrder размещает заказ на пиццу.
- UseLastToppings переносит начинки из предыдущего заказа в новый. 

![](../media/tutorial_pizza_actions.PNG)

### <a name="training-dialogs"></a>Обучающие диалоги
Мы также определили несколько обучающих диалогов. 

![](../media/tutorial_pizza_dialogs.PNG)

В качестве примера давайте проведем сеанс обучения.

1. Щелкните Train Dialogs (Обучение диалогам), а затем — New Train Dialog (Обучение новому диалогу).
1. Введите "order a pizza" (заказать пиццу).
2. Щелкните Score Action (Оценить действие).
3. Выберите элемент "what would you like on your pizza?" (Что вы хотите добавить в пиццу?).
4. Введите "mushrooms and cheese" (грибы и сыр).
    - Обратите внимание, что LUIS пометил оба слова как Toppings (Начинки). Если на этом шаге будет допущена ошибка, выделите ее и исправьте.
    - Знак "+", рядом с именем сущности означает, что она добавлена в список начинок.
5. Щелкните Score Actions (Оценить действия).
    - Обратите внимание, что грибы и сыр не сохранены в памяти начинок (Toppings).
3. Щелкните "you have $Toppings on your pizza" (В вашей пицце есть $Toppings?).
    - Поскольку это действие без ожидания, бот сразу запросит следующее действие.
6. Выберите "Would you like anything else?" (Вы хотите добавить что-то еще?).
7. Введите "remove mushrooms and add peppers" (Убрать грибы и добавить перцы).
    - Обратите внимание, что рядом с **mushroom** (грибы) появился знак "-", обозначающий удаление. Также появилась сущность peppers (перцы) со знаком "+", то есть добавляемая в список начинок.
2. Щелкните Score Action (Оценить действие).
    - Теперь сущность **peppers** (перцы) выделяется полужирным шрифтом, как новая сущность. А сущность **mushrooms** (грибы) отображается перечеркнутой.
8. Щелкните "you have $Toppings on your pizza" (В вашей пицце есть $Toppings?).
6. Выберите "Would you like anything else?" (Вы хотите добавить что-то еще?).
7. Введите "add peas" (добавить фасоль).
    - Фасоль в этом примере является начинкой, которая отсутствует на складе. Обратите внимание, что она все равно помечается как начинка.
2. Щелкните Score Action (Оценить действие).
    - Peas (фасоль) помечается как OutOfStock.
    - Чтобы увидеть причину, откройте код из файла C:\<\путь_установки>\src\demos\demoPizzaOrder.ts. Обратите здесь внимание на метод EntityDetectionCallback. Этот метод вызывается для каждой начинки, чтобы проверить ее наличие на складе. Если начинка отсутствует, метод удаляет ее из списка Toppings и помещает в сущность OutOfStock. Прямо перед этим методом определена переменная InStock, которая содержит список имеющихся начинок.
6. Выберите "We don't have $OutOfStock" (У нас сейчас нет начинки $OutOfStock).
7. Выберите "Would you like anything else?" (Вы хотите добавить что-то еще?).
8. Введите "no" (Нет).
9. Щелкните Score Action (Оценить действие).
10. Выберите вызов API FinalizeOrder. 
    - Это действие вызывает функцию FinalizeOrder, определенную в нашем коде. Она очищает начинки и возвращает сообщение "your order is on its way" (ваш заказ выполняется). 
2. Введите "order another" (заказать еще). Начинаем новый заказ.
9. Щелкните Score Action (Оценить действие).
    - Как видно, сыр и перцы сразу помещаются в память, поскольку были выбраны как начинки в предыдущем заказе.
1. Выберите "Would you like $LastToppings" (Хотите ли добавить $LastToppings?).
2. Введите Yes (Да).
3. Щелкните Score Action (Оценить действие).
    - Теперь бот хочет выполнить действие UseLastToppings. Это второй из наших двух методов обратного вызова. Этот метод копирует начинки из предыдущего заказа в новы заказ и очищает переменную начинок из прошлого заказа. Этот механизм позволяет запомнить прошлый заказ и предлагать пользователю возможность повторить его, когда он заказывает новую пиццу.
2. Щелкните "you have $Toppings on your pizza" (В вашей пицце есть $Toppings).
3. Выберите "Would you like anything else?" (Вы хотите добавить что-то еще?).
8. Введите "no" (Нет).
4. Щелкните Done Teaching (Завершить обучение).

![](../media/tutorial_pizza_callbackcode.PNG)

![](../media/tutorial_pizza_apicalls.PNG)

## <a name="next-steps"></a>Дополнительная информация

> [!div class="nextstepaction"]
> [Демонстрация. Средство запуска приложений виртуальной реальности](./demo-vr-app-launcher.md)
