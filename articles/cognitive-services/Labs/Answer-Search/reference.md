---
title: Справочник по поиску ответов в проектах в Microsoft Cognitive Services | Документация Майкрософт
description: Справочник по конечной точке поиска ответов в проектах.
services: cognitive-services
author: mikedodaro
manager: rosh
ms.service: cognitive-services
ms.technology: project-answer-search
ms.topic: article
ms.date: 04/13/2018
ms.author: rosh, v-gedod
ms.openlocfilehash: 8c95fac0c031ec62a9d98d6c3278bd3b3f345140
ms.sourcegitcommit: 95d9a6acf29405a533db943b1688612980374272
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/23/2018
ms.locfileid: "35381868"
---
# <a name="project-answer-search-v7-reference"></a>Справочник по поиску ответов в проектах версии 7

API поиска ответов Bing принимает параметр запроса и возвращает `searchResponse` с `answerType`: `facts` или `entities`. 

Приложения, использующие API поиска ответов Bing, отправляют запросы в конечную точку с URL-адресом для предварительного просмотра в параметре запроса.  Запрос должен включать параметр `q=searchTerm` и заголовок *Ocp-Apim-Subscription-Key*.   

Ответ JSON может быть проанализирован на наличие фактов и сущностей, которые содержат сведения об объекте поиска.

## <a name="endpoint"></a>Конечная точка
Чтобы запросить результаты поиска ответов, отправьте запрос в следующую конечную точку. Для определения дополнительных спецификаций используйте заголовки и параметры URL-адреса.

GET конечной точки: 
````
https://api.labs.cognitive.microsoft.com/answerSearch/v7.0/search?q=<searchTerm>&subscription-key=0123456789ABCDEF&mkt=en-us

````

Запрос должен использовать протокол HTTPS и включать следующий параметр запроса:
-  q =<URL> — запрос, который определяет объект поиска

Примеры, демонстрирующие способы создания запросов, см. в статье [Project Answer Search query in C#](c-sharp-quickstart.md) (Запрос поиска ответов в проектах в C#) и [Project Answer Search query in Java](java-quickstart.md) (Запрос поиска ответов в проектах в Java). 

В следующих разделах приведены технические сведения об объектах ответа, параметрах запроса и заголовках, которые влияют на результаты поиска. 
  
Сведения о заголовках, которые должны включать запросы, см. в разделе [Заголовки](#headers).  
  
Сведения о параметрах, которые должны включать запросы, см. в разделе [Параметры запроса](#query-parameters).  
  
Сведения об объектах JSON, которые содержит ответ, см. в разделе [Объекты ответа](#response-objects).

Максимальная длина URL-адреса запроса составляет 2048 символов. Чтобы длина вашего URL-адреса не превышала ограничение, максимальная длина ваших параметров запроса должна быть менее 1500 символов. Если URL-адрес превышает 2048 символов, сервер возвращает ошибку 404 — страница не найдена.  

Сведения о разрешенном использовании и отображении результатов см. в статье [Project Answer Search use and display requirements](use-display-requirements.md) (Использование и отображение требований поиска ответов в проектах). 

> [!NOTE]
> Некоторые заголовки запросов, которые важны для других API поиска, не влияют на предварительную версию URL-адреса.
> - Pragma. Вызывающая сторона не имеет контроля над тем, использует ли предварительная версия URL-адреса кэш.
> - Cache-Control. Вызывающая сторона не имеет контроля над тем, использует ли предварительная версия URL-адреса кэш.
> - User-Agent

> Кроме того, некоторые параметры в настоящее время не являются важными для API предварительной версии URL-адреса, но могут использоваться в будущем для повышения глобализации. 
 
## <a name="headers"></a>Заголовки  
Ниже приведены заголовки, которые могут включать запрос и ответ.  
  
|Заголовок|ОПИСАНИЕ|  
|------------|-----------------|  
|Принять|Дополнительный заголовок запроса.<br /><br /> Тип мультимедиа по умолчанию — это приложение или JSON. Чтобы указать, что в ответе используется [JSON-LD](http://json-ld.org/), задайте для заголовка Accept приложение или JSON+LD в качестве значения.|  
|<a name="acceptlanguage" />Accept-Language|Дополнительный заголовок запроса.<br /><br /> Список языков, разделенных запятыми, используемых для строк пользовательского интерфейса. В этом списке языки указаны в порядке убывания по приоритету. Дополнительные сведения, включая ожидаемый формат, см. в [этой статье](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html).<br /><br /> Этот заголовок и параметр запроса [setLang](#setlang) являются взаимоисключающими &mdash;, не указывайте оба.<br /><br /> Если задать этот заголовок, также необходимо указать параметр запроса [cc](#cc). Чтобы определить рынок для возврата результатов, Bing использует первый поддерживаемый язык, который он находит в списке, и объединяет его со значением параметра `cc`. Если в список не включен поддерживаемый язык, Bing находит ближайший язык и рынок, который поддерживает запрос, или использует вычисление или рынок по умолчанию для результатов. Чтобы определить рынок, используемый Bing, см. заголовок BBingAPIs-Market.<br /><br /> Используйте этот заголовок и параметр запроса `cc`, только если указывается несколько языков. В противном случае используйте параметры запроса [mkt](#mkt) и [setLang](#setlang).<br /><br /> Строка интерфейса пользователя. Это строка, которая используется как метка в пользовательском интерфейсе. Есть несколько строк пользовательского интерфейса в объектах ответа JSON. Все ссылки на свойства Bing.com в объектах ответа применяют указанный язык.|  
|<a name="market" />BingAPIs-Market|Заголовок ответа.<br /><br /> Рынок, используемый для запроса. Форма — \<languageCode\>-\<countryCode\>. Например, en-US.|  
|<a name="traceid" />BingAPIs-TraceId|Заголовок ответа.<br /><br /> Идентификатор записи журнала, содержащей сведения о запросе. В случае ошибки запишите этот идентификатор. Если вы не может определить и устранить проблему, включите этот идентификатор вместе с другой информацией, которую вы предоставляете группе поддержки.|  
|<a name="subscriptionkey" />Ocp-Apim-Subscription-Key|Обязательный заголовок запроса.<br /><br /> Ключ подписки, полученный при регистрации этой службы в [Cognitive Services](https://www.microsoft.com/cognitive-services/).|  
|<a name="pragma" />Pragma|Дополнительный заголовок запроса.<br /><br /> По умолчанию Bing возвращает кэшированное содержимое, если оно доступно. Чтобы Bing не возвращал кэшированное содержимое, установите для заголовка Pragma значение no-cache (например, Pragma:no-cache).
|<a name="useragent" />User-Agent|Дополнительный заголовок запроса.<br /><br /> Агент пользователя, отправившего запрос. Bing использует агент пользователя, чтобы обеспечить оптимизированное взаимодействие для мобильных пользователей. Приведенный ниже заголовок является необязательным, но его также рекомендуется указать.<br /><br /> Пользовательский агент должен иметь ту же строку, которую отправляет и любой используемый браузер. Дополнительные сведения об агентах пользователя см. в [этой статье](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html).<br /><br /> Ниже приведены примеры использования строк user-agent.<br /><ul><li>Windows Phone &mdash; Mozilla/5.0 (совместим; MSIE 10.0; Windows Phone 8.0; Trident/6.0; IEMobile/10.0; ARM; Touch; NOKIA; Lumia 822)<br /><br /></li><li>Android &mdash; Mozilla/5.0 (Linux; U; Android 2.3.5; en-us; Sch-I500 сборки/GINGERBREAD) AppleWebKit/533.1 (KHTML; как Gecko) версии/4.0 Mobile Safari/533.1<br /><br /></li><li>iPhone &mdash; Mozilla/5.0 (iPhone; ЦП 6_1 iPhone ОС, как Mac OS X) AppleWebKit/536.26 (KHTML; как Gecko) iPhone4 Mobile/10B142; 1 BingWeb/3.03.1428.20120423<br /><br /></li><li>Компьютер &mdash; Mozilla/5.0 (Windows NT 6.3; WOW64; Trident/7.0; Touch; rv:11.0), как Gecko<br /><br /></li><li>iPad &mdash; Mozilla/5.0 (iPad; ОС ЦП 7_0, как Mac OS X) AppleWebKit/537.51.1 (KHTML, как Gecko) версия/7.0 Mobile/11A465 Safari/9537.53</li></ul>|
|<a name="clientid" />X-MSEdge-ClientID|Дополнительный заголовок запроса и ответа.<br /><br /> Bing использует этот заголовок для предоставления пользователям возможности согласованного поведения вызовов API Bing. В Bing часто тестируются новые функции и улучшения и используется идентификатор клиента в качестве ключа для назначения трафика на разных тестируемых возможностях. Если вы не используете один и тот же идентификатор клиента для пользователя в нескольких запросах, Bing может назначить пользователю несколько конфликтующих тестируемых возможностей. Это может привести к несогласованной работе пользователя. Например, если первому и второму запросу назначены разные тестируемые возможности, взаимодействие может происходить неожиданным образом. Кроме того, Bing может использовать идентификатор клиента, чтобы адаптировать результаты веб-поиска к истории поиска этого идентификатора клиента, обеспечивая более широкие возможности взаимодействия с пользователем.<br /><br /> Bing также использует этот заголовок, чтобы повысить рейтинг результатов путем анализа активности, создаваемой идентификатором клиента. Усовершенствования релевантности помогают улучшить качество результатов API Bing, что в свою очередь обеспечивает больше переходов по ссылкам для потребителей API.<br /><br /> **ВАЖНО!** Считайте этот заголовок обязательным, хоть это и не так. Сохранение идентификатора клиента по нескольким запросам для одной и той же комбинации пользователя и устройства позволяет 1) потребителю API получать согласованный пользовательский интерфейс и 2) больше переходов по ссылкам благодаря лучшему качеству результатов от Bing API.<br /><br /> Ниже приведены базовые правила использования, применяемые к этому заголовку.<br /><ul><li>Каждый пользователь, работающий с приложением на устройстве, должен иметь уникальный идентификатор клиента Bing.<br /><br/>Если этот заголовок не включается в запрос, Bing создает идентификатор и возвращает его в заголовке ответа X-MSEdge-ClientID. Этот заголовок не следует включать в запрос, только когда пользователь в первый раз использует приложение на этом устройстве.<br /><br/></li><li>Используйте идентификатор клиента при каждом запросе Bing API, который делает приложения для этого пользователя на устройстве.<br /><br/></li><li>**ВНИМАНИЕ!** Нужно убедиться, что этот идентификатор клиента не связан с какой-либо аутентифицируемой информацией учетной записи пользователя.</li><br/><li>Сохраните идентификатор клиента. Чтобы сохранить идентификатор в приложении браузера, используйте постоянный HTTP-файл cookie, чтобы убедиться, что идентификатор используется во всех сеансах. Не используйте файл cookie сеанса. Для других приложений, таких как мобильные приложения, для хранения идентификатора можно использовать постоянное хранилище устройства.<br /><br/>В следующий раз, когда пользователь использует приложение на этом устройстве, получите сохраненный идентификатор клиента.</li></ul><br /> **ПРИМЕЧАНИЕ.** Ответы Bing могут содержать этот заголовок, а могут и не содержать его. Если в ответе есть этот заголовок, запишите идентификатор клиента и используйте его для всех последующих запросов Bing к пользователю на этом устройстве.<br /><br /> **ПРИМЕЧАНИЕ.** При добавлении X-MSEdge-ClientID не добавляйте файлы cookie в запрос.|  
|<a name="clientip" />X-MSEdge-ClientIP|Дополнительный заголовок запроса.<br /><br /> IPv4- или IPv6-адреса клиентского устройства. IP-адрес используется для обнаружения расположения пользователя. Bing использует сведения о расположении для определения поведения при безопасном поиске.<br /><br /> **ПРИМЕЧАНИЕ.** Приведенный ниже заголовок является необязательным, однако всегда рекомендуется указывать его и заголовок X-Search-Location.<br /><br /> Не маскируйте адрес (например, изменив последний октет на 0). Это приводит к тому, что расположение не находится где-либо рядом с фактическим расположением устройства, что может привести к тому, что Bing будет предоставлять ошибочные результаты.|  
|<a name="location" />X-Search-Location|Дополнительный заголовок запроса.<br /><br /> Список пар "ключ-значение", разделенных точкой с запятой, которые описывают географическое расположение клиента. Bing использует сведения о расположении для определения поведения при безопасном поиске и возвращении релевантного локального содержимого. Укажите пару "ключ-значение" в формате \<ключ\>:\<значение\>. Ниже приведены разделы, которые можно использовать для определения расположения пользователя.<br /><br /><ul><li>lat &mdash; широта расположения клиента, в градусах. Широта должна быть не меньше −90,0 и не больше +90,0. Отрицательные значения указывают южную широту, а положительные значения — северную.<br /><br /></li><li>long &mdash; долгота расположения клиента, в градусах. Долгота должна быть не меньше –180.0 и не больше +180.0. Отрицательные значения указывают на западную долготу, а положительные — на восточную.<br /><br /></li><li>re &mdash; радиус, в метрах, который определяет горизонтальную точность координат. Передайте значение, возвращаемое службой расположения устройства. Типичные значения: 22 м для GPS или Wi-Fi, 380 м для триангуляции базовой станции и 18 000 м для обратного просмотра IP-адресов.<br /><br /></li><li>ts &mdash; метка времени UTC UNIX, когда клиент находился в этом расположении. (Метка времени UNIX — количество секунд, прошедших с 1 января 1970 года.)<br /><br /></li><li>head &mdash; необязательный ключ. Относительный заголовок или направление движения клиента. Укажите направление движения в градусах от 0 до 360, считая по часовой стрелке относительно севера. Укажите этот ключ, только если ключ `sp` имеет ненулевое значение.<br /><br /></li><li>sp &mdash; горизонтальная скорость (скорость), в метрах в секунду, с которой клиентское устройство перемещается.<br /><br /></li><li>alt &mdash; высота клиентского устройства, в метрах.<br /><br /></li><li>are &mdash; необязательный ключ. Радиус, в метрах, который определяет вертикальную точность координат. Радиус по умолчанию — 50 километров. Укажите этот ключ, только если указан ключ `alt`.<br /><br /></li></ul> **ПРИМЕЧАНИЕ.** Хотя эти ключи не являются обязательными, чем больше информации вы предоставляете, тем точнее результаты поиска.<br /><br /> **ПРИМЕЧАНИЕ.** Рекомендуется всегда указывать географическое расположение пользователя. Это особенно важно, если IP-адрес клиента не точно отражает физическое расположение пользователя (например, если клиент использует VPN). Для получения оптимальных результатов следует включать этот заголовок и заголовок X-MSEdge-ClientIP. Как минимум, следует включать этот заголовок.|

> [!NOTE] 
> Помните, что условия использования требуют соблюдения всех применимых законов, в том числе в отношении использования этих заголовков. Например, в некоторых юрисдикциях, таких как Европа, есть требования на получение согласия пользователя перед размещением определенных устройств отслеживания на пользовательских устройствах.
  

## <a name="query-parameters"></a>Параметры запроса  
Запрос может включать следующие параметры запроса. См. столбец "Обязательно", чтобы узнать об обязательных параметрах. Параметры запроса нужно закодировать в URL-адресе.  
  
  
|ИМЯ|Значение|type|Обязательно|  
|----------|-----------|----------|--------------|  
|<a name="mkt" />mkt|Рынок, по которому возвращаются результаты. <br /><br />Список возможных значений рынка см. в разделе [Коды рынка](#market-codes).<br /><br /> **ПРИМЕЧАНИЕ.** API предварительной версии URL-адреса в настоящее время поддерживает только рынок и язык en-us.<br /><br />|Строка|Yes|  
|<a name="query" />q|URL-адрес для предварительного просмотра|Строка|Yes|  
|<a name="responseformat" />responseFormat|Тип мультимедиа, используемый для ответа. Ниже приведены возможные значения, в которых не учитывается регистр.<br /><ul><li>JSON</li><li>JSONLD</li></ul><br /> По умолчанию используется JSON. Сведения об объектах JSON, которые содержат ответ, см. в разделе [Объекты ответа](#response-objects).<br /><br />  При указании JsonLd текст ответа включает объекты JSON-LD, содержащие результаты поиска. Сведения о JSON-LD см. на [этом сайте](http://json-ld.org/).|Строка|Нет |  
|<a name="safesearch" />safeSearch|Фильтр, используемый для фильтрации содержимого для взрослых. Ниже приведены возможные значения фильтра, в которых не учитывается регистр.<br /><ul><li>Off &mdash; возвращаются веб-страницы с текстом, изображениями или видео для взрослых.<br /><br/></li><li>Moderate &mdash; возвращаются веб-страницы с текстом для взрослых, но не изображениями или видео.<br /><br/></li><li>Strict &mdash; веб-страницы с текстом, изображениями или видео для взрослых не возвращаются.</li></ul><br /> По умолчанию используется значение Moderate.<br /><br /> **ПРИМЕЧАНИЕ.** Если запрос поступает с рынка, для которого политика для взрослых Bing требует параметра `safeSearch` со значением Strict, Bing игнорирует значение `safeSearch` и использует Strict.<br/><br/>**ПРИМЕЧАНИЕ.** Если вы используете оператор запроса `site:`, в зависимости от запроса есть вероятность, что ответ включает содержимое для взрослых независимо от значения параметра запроса `safeSearch`. Используйте `site:`, только если вам известно о содержимом на сайте, и ваш сценарий поддерживает возможность использования содержимого для взрослых. |Строка|Нет |  
|<a name="setlang" />setLang|Язык, используемый для строк пользовательского интерфейса. Укажите язык, используя двухбуквенный код ISO 639-1. Например, код для английского языка — EN. Он и является кодом по умолчанию.<br /><br /> Хотя это необязательно, всегда следует указывать язык. Обычно для `setLang` задается язык, указанный в параметре `mkt`, если только пользователь не хочет, чтобы строки пользовательского интерфейса отображались на другом языке.<br /><br /> Этот параметр и заголовок [Accept-Language](#acceptlanguage) являются взаимоисключающими. Не указывайте оба.<br /><br /> Строка интерфейса пользователя. Это строка, которая используется как метка в пользовательском интерфейсе. Есть несколько строк пользовательского интерфейса в объектах ответа JSON. Кроме того, все ссылки на свойства Bing.com в объектах ответа применяют указанный язык.|Строка|Нет | 


## <a name="response-objects"></a>Объекты ответа  
Схема ответа — либо [WebPage], либо ErrorResponse, как для API поиска в Интернете. Если запрос завершается с ошибкой, то объектом верхнего уровня будет являться [ErrorResponse](#errorresponse).


|Объект.|ОПИСАНИЕ|  
|------------|-----------------|  
|[WebPage]|Объект верхнего уровня JSON, содержащий атрибуты предварительной версии.|  
|[Fact]|Объект верхнего уровня JSON, содержащий факты.| 
|[Entities]|Объект верхнего уровня JSON, содержащий подробности.| 

  
### <a name="error"></a>Ошибка  
Определяет возникшую ошибку.  
  
|Элемент|ОПИСАНИЕ|type|  
|-------------|-----------------|----------|  
|<a name="error-code" />code|Код ошибки, определяющий ее категорию. Список возможных кодов см. в разделе [Коды ошибок](#error-codes).|Строка|  
|<a name="error-message" />message|Описание ошибки.|Строка|  
|<a name="error-moredetails" />moreDetails|Описание, которое предоставляет дополнительную информацию об ошибке.|Строка|  
|<a name="error-parameter" />parameter|Параметр запроса в запросе, который вызвал ошибку.|Строка|  
|<a name="error-subcode" />subCode|Код ошибки, по которому определяется ошибка. Например, если `code` — InvalidRequest, то `subCode` может иметь значение ParameterInvalid или ParameterInvalidValue. |Строка|  
|<a name="error-value" />value|Недопустимое значение параметра запроса.|Строка|  
  

### <a name="errorresponse"></a>ErrorResponse  
Объект верхнего уровня, который включает ответ при неудачном запросе.  
  
|ИМЯ|Значение|type|  
|----------|-----------|----------|  
|_type|Указание типа.|Строка|  
|<a name="errors" />errors|Список ошибок, описывающих причины сбоя запроса.|[Ошибка](#error)[]|  

  
  
### <a name="license"></a>License  
Определяет лицензию, в рамках которой можно использовать текст или фотографию.  
  
|ИМЯ|Значение|type|  
|----------|-----------|----------|  
|name|Имя лицензии.|Строка|  
|URL-адрес|URL-адрес веб-сайта, где пользователь может получить дополнительные сведения о лицензии.<br /><br /> Используйте имя и URL-адрес для создания гиперссылки.|Строка|  
  

### <a name="licenseattribution"></a>LicenseAttribution  
Определяет правило контракта для определения принадлежности лицензии.  
  
|ИМЯ|Значение|type|  
|----------|-----------|----------|  
|_type|Указание типа, который имеет значение LicenseAttribution.|Строка|  
|license|Лицензия, по которой может использоваться содержимое.|[Лицензия](#license)|  
|licenseNotice|Лицензия для отображения рядом с целевым полем. Например, "Текст в рамках лицензии CC-BY-SA".<br /><br /> Используйте имя и URL-адрес лицензии в поле `license`, чтобы создать гиперссылки на веб-сайт со сведениями о лицензии. Замените имя лицензии в строке `licenseNotice` (например, CC-BY-SA) гиперссылкой, которая была только что создана.|Строка|  
|mustBeCloseToContent|Логическое значение, определяющее, следует ли содержимое правила поместить рядом с полем, к которому оно применяется. Если возвращается значение **true**, содержимое нужно расположить в непосредственной близости. Если возвращается значение **false** или этого поля не существует, содержимое может размещаться по усмотрению вызывающего.|Логическое|  
|targetPropertyName|Имя поля, к которому применяется правило.|Строка|  
  

### <a name="link"></a>Ссылка  
Определяет компоненты гиперссылки.  
  
|ИМЯ|Значение|type|  
|----------|-----------|----------|  
|_type|Указание типа.|Строка|  
|текст|Отображаемый текст.|Строка|  
|URL-адрес|URL-адрес. Используйте URL-адрес и отображаемый текст для создания гиперссылки.|Строка|  
  

### <a name="linkattribution"></a>LinkAttribution  
Определяет правило контракта для определения принадлежности ссылки.  
  
|ИМЯ|Значение|type|  
|----------|-----------|----------|  
|_type|Указание типа, которое имеет значение LinkAttribution.|Строка|  
|mustBeCloseToContent|Логическое значение, определяющее, следует ли содержимое правила поместить рядом с полем, к которому оно применяется. Если возвращается значение **true**, содержимое нужно расположить в непосредственной близости. Если возвращается значение **false** или этого поля не существует, содержимое может размещаться по усмотрению вызывающего.|Логическое|  
|targetPropertyName|Имя поля, к которому применяется правило.<br /><br /> Если цель не указана, определение принадлежности применяется к сущности в целом и должно отображаться сразу после презентации сущности. Если имеется несколько правил определения принадлежности текста и ссылок, которые не указывают цель, их нужно объединить и отобразить с помощью метки "Data from:". Например, "Data from: <имя поставщика 1\> | <имя поставщика 2\>".|Строка|  
|текст|Текст определения принадлежности.|Строка|  
|URL-адрес|URL-адрес для веб-сайта поставщика. Используйте `text` и URL-адрес для создания гиперссылки.|Строка|  
  
  
### <a name="mediaattribution"></a>MediaAttribution  
Определяет правило контракта для определения принадлежности мультимедиа.  
  
|ИМЯ|Значение|type|  
|----------|-----------|----------|  
|_type|Указание типа, которое имеет значение MediaAttribution.|Строка|  
|mustBeCloseToContent|Логическое значение, определяющее, следует ли содержимое правила поместить рядом с полем, к которому оно применяется. Если возвращается значение **true**, содержимое нужно расположить в непосредственной близости. Если возвращается значение **false** или этого поля не существует, содержимое может размещаться по усмотрению вызывающего.|Логическое|  
|targetPropertyName|Имя поля, к которому применяется правило.|Строка|  
|URL-адрес|URL-адрес, который используется для создания гиперссылки содержимого мультимедиа. Например, если целевой объект — это изображение, URL-адрес используется, чтобы сделать изображение интерактивными.|Строка|  
  
  
  
### <a name="organization"></a>План  
Определяет издателя.  
  
Обратите внимание, что издатель может предоставить свое имя или веб-сайт, или и то, и другое.  
  
|ИМЯ|Значение|type|  
|----------|-----------|----------|  
|name|Имя издателя.|Строка|  
|URL-адрес|URL-адрес для веб-сайта издателя.<br /><br /> Обратите внимание, что издатель может не предоставить веб-сайт.|Строка|  
  
  

### <a name="webpage"></a>WebPage  
Определяет сведения о веб-странице в режиме предварительного просмотра.  
  
|ИМЯ|Значение|type|  
|----------|-----------|----------|
|name|Заголовок страницы, не обязательно заголовок HTML|Строка|
|URL-адрес|URL-адрес, чье сканирование фактически выполняется (запрос может иметь последующее перенаправление)|Строка|  
|description|Краткое описание страницы и содержимого|Строка|  
|isFamilyFriendly|Наиболее точно для элементов в веб-индексе. В режиме реального времени это обнаружение основано исключительно на URL-адресе, а не на содержимом страницы.|Логическое|
|primaryImageOfPage/contentUrl|URL-адрес примера изображения для включения в предварительную версию|Строка| 
  
  
### <a name="querycontext"></a>QueryContext  
Определяет содержимое запроса, который Bing использует для запроса.  
  
|Элемент|ОПИСАНИЕ|type|  
|-------------|-----------------|----------|  
|adultIntent|Логическое значение, указывающее, есть ли в указанном запросе содержимое для взрослых. Значение равно **true**, если запрос имеет запрос на содержимое для взрослых, в противном случае — **false**.|Логическое|  
|alterationOverrideQuery|Строка запроса для принудительного использования исходной строки в Bing. Например, если строка запроса *saling downwind*, строка запроса переопределения будет *+saling downwind*. Помните, что необходимо закодировать строку запроса, в результате чего будет получена строка *%2Bsaling+downwind*.<br /><br /> Это поле включается, только если исходная строка запроса содержит орфографическую ошибку.|Строка|  
|alteredQuery|Строка запроса, используемая для выполнения запроса Bing. Bing использует измененную строку запроса, если исходная строка запроса содержит орфографические ошибки. Например, если строка запроса — `saling downwind`, измененная строка запроса будет `sailing downwind`.<br /><br /> Это поле включается, только если исходная строка запроса содержит орфографическую ошибку.|Строка|  
|askUserForLocation|Логическое значение, указывающее, требуется ли Bing расположение пользователя для получения точных результатов. При указании расположения пользователя с помощью заголовков [X-MSEdge-ClientIP](#clientip) и [X-Search-Location](#location) это поле можно игнорировать.<br /><br /> Для запросов с учетом расположения, таких как "сегодняшняя погода" или "рестораны рядом со мной", которым требуется расположение пользователя для получения точных результатов, это поле имеет значение **true**.<br /><br /> Для запросов с учетом расположения, которые включают расположение (например, "погода в Сиэтле"), это поле имеет значение **false**. Для этого поля также установлено значение **false** для запросов, которые не относятся к расположению, например "бестселлеры".|Логическое|  
|originalQuery|Строка запроса, как указано в запросе.|Строка|  

### <a name="identifiable"></a>Identifiable
|ИМЯ|Значение|type|  
|-------------|-----------------|----------|
|id|Идентификатор ресурса|Строка|
 
### <a name="rankinggroup"></a>RankingGroup
Определяет группу результатов поиска, такие как основное поле.
|ИМЯ|Значение|type|  
|-------------|-----------------|----------|
|items|Список результатов поиска для отображения в группе.|RankingItem|

### <a name="rankingitem"></a>RankingItem
Определяет элемент в результатах поиска для отображения.
|ИМЯ|Значение|type|  
|-------------|-----------------|----------|
|resultIndex|Отсчитываемый от нуля индекс элемента в ответе для отображения. Если в элементе нет этого поля, в ответе могут отобразиться все элементы. Например, можно отобразить все статьи в ответе "Новости".|Целое число |
|answerType|Ответ, содержащий элемент, который необходимо отобразить. Например, "Новости".<br /><br />Используйте этот тип, чтобы найти ответ в объекте SearchResponse. Тип — это имя поля SearchResponse.<br /><br /> Тем не менее используйте тип ответа, только если этот объект включает поле значения; в противном случае игнорируйте его.|Строка|
|textualIndex|Индекс ответов в textualAnswers для отображения.| Целое число без знака|
|value|Идентификатор, который определяет либо ответ для отображения, либо элемент ответа для отображения. Если идентификатор определяет ответ, покажите все элементы ответов.|Identifiable|

### <a name="rankingresponse"></a>RankingResponse  
Определяет, где должно быть размещено содержимое на странице результатов поиска и в каком порядке.  
  
|ИМЯ|Значение|  
|----------|-----------|  
|<a name="ranking-mainline" />mainline|Результаты поиска для отображения в основном поле.|  
|<a name="ranking-pole" />pole|Результаты поиска, которые должны отображаться в самом заметном месте (например, над основным полем и боковой панелью).|  
|<a name="ranking-sidebar" />sidebar|Результаты поиска для отображения на боковой панели.| 


### <a name="searchresponse"></a>SearchResponse  
Определяет объект верхнего уровня, который включает ответ при удачном запросе.  
  
Обратите внимание, что если служба подозревает, что совершается атака типа "отказ в обслуживании", запрос будет успешно завершен (код состояния HTTP: 200 OК). Однако текст ответа будет пустым.  
  
|ИМЯ|Значение|type|  
|----------|-----------|----------|  
|_type|Указание типа, которому задано значение SearchResponse.|Строка|  
|WebPage|Объект JSON, который определяет предварительную версию|строка|  
  
  
### <a name="textattribution"></a>TextAttribution  
Определяет правило контракта для определения принадлежности обычного текста.  
  
|ИМЯ|Значение|type|  
|----------|-----------|----------|  
|_type|Укажите тип, который имеет значение TextAttribution.|Строка|  
|текст|Текст определения принадлежности.<br /><br /> Определение принадлежности текста применяется к сущности в целом и должно отображаться сразу после презентации сущности. Если имеется несколько правил определения принадлежности текста или ссылок, которые не указывают цель, их нужно объединить и отобразить с помощью метки "Data from:".|Строка| 


## <a name="error-codes"></a>Коды ошибок

Ниже приведены возможные коды состояния HTTP, которые возвращает запрос.  
  
|Код состояния|ОПИСАНИЕ|  
|-----------------|-----------------|  
|200|Успешно.|  
|400|Один из параметров запроса отсутствует или является недопустимым.|  
|401|Ключ подписки отсутствует или является недопустимым.|  
|403|Пользователь проходит проверку подлинности (например, используется допустимый ключ подписки), но не имеет разрешений для обращения к запрошенному ресурсу.<br /><br /> Bing также может вернуть это состояние, если вызывающий объект превысил свои квоты в месяц.|  
|410|В запросе использовался протокол HTTP вместо HTTPS. HTTPS является единственным поддерживаемым протоколом.|  
|429|Вызывающий превысил свою квоту на число запросов в секунду.|  
|500|Непредвиденная ошибка сервера.|

Если запрос завершается с ошибкой, ответ будет содержать объект [ErrorResponse](#errorresponse), который содержит список объектов [Error](#error), описывающих причину ошибки. Если ошибка связана с параметром, поле `parameter` идентифицирует параметр, который является причиной проблемы. Если ошибка связана со значением параметра, поле `value` идентифицирует недопустимое значение.

```json
{
  "_type": "ErrorResponse", 
  "errors": [
    {
      "code": "InvalidRequest", 
      "subCode": "ParameterMissing", 
      "message": "Required parameter is missing.", 
      "parameter": "q" 
    }
  ]
}

{
  "_type": "ErrorResponse", 
  "errors": [
    {
      "code": "InvalidAuthorization", 
      "subCode": "AuthorizationMissing", 
      "message": "Authorization is required.", 
      "moreDetails": "Subscription key is not recognized."
    }
  ]
}
```

Ниже приведены возможные коды ошибок и кодовые значения вложенных ошибок.

|Код|SubCode|ОПИСАНИЕ
|-|-|-
|ServerError|UnexpectedError<br/>ResourceError<br/>NotImplemented|Код состояния HTTP — 500.
|InvalidRequest|ParameterMissing<br/>ParameterInvalidValue<br/>HttpNotAllowed<br/>Заблокировано|Bing возвращает ошибку InvalidRequest всякий раз, когда любая часть запроса недопустима. Например, отсутствует обязательный параметр или значение параметра недопустимо.<br/><br/>В случае ошибки ParameterMissing или ParameterInvalidValue кодом состояния HTTP будет 400.<br/><br/>Если вместо HTTPS используется протокол HTTP, Bing возвращает HttpNotAllowed, а код состояния HTTP будет 410.
|RateLimitExceeded|Вложенный код отсутствует|Bing возвращает ошибку RateLimitExceeded всякий раз при превышении квоты запросов в секунду (QPS) или запросов в месяц (QPM).<br/><br/>При превышении QPS Bing возвращает код состояния HTTP 429, а если превысить QPM, Bing вернет код 403.
|InvalidAuthorization|AuthorizationMissing<br/>AuthorizationRedundancy|Bing возвращает ошибку InvalidAuthorization при невозможности проверить подлинность вызывающей стороны в Bing. Например, когда заголовок `Ocp-Apim-Subscription-Key` отсутствует или при недопустимом ключе подписки.<br/><br/>Избыточность возникает, если указать несколько способов проверки подлинности.<br/><br/>При ошибке InvalidAuthorization кодом состояния HTTP будет 401.
|InsufficientAuthorization|AuthorizationDisabled<br/>AuthorizationExpired|Bing возвращает InsufficientAuthorization, когда вызывающая сторона не имеет разрешений на доступ к ресурсу. Это может произойти, если ключ подписки отключен или срок его действия истек. <br/><br/>При ошибке InsufficientAuthorization кодом состояния HTTP будет 403.

## <a name="next-steps"></a>Дополнительная информация
- [Project Answer Search query in C#](c-sharp-quickstart.md) (Запрос службы поиска ответов в проекте на языке C#)
- [Project Answer Search query in Java](java-quickstart.md) (Запрос службы поиска ответов в проекте на языке Java)
- [Project Answer Search Node quickstart](node-quickstart.md) (Краткое руководство по запросам Node в службе поиска ответов в проекте)
- [Project Answer Search Python quickstart](python-quickstart.md) (Краткое руководство по запросам Python в службе поиска ответов в проекте)

