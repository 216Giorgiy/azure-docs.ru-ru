---
title: Оценка достоверности с помощью Microsoft Cognitive Services | Документация Майкрософт
titleSuffix: Azure
description: Объяснение оценки достоверности
services: cognitive-services
author: tulasim88
manager: pchoudh
ms.service: cognitive-services
ms.component: QnAMaker
ms.topic: article
ms.date: 09/27/2018
ms.author: tulasim
ms.openlocfilehash: 9bcd2ccfc5fb8ddc71d2df178dd214be2a67160d
ms.sourcegitcommit: 67abaa44871ab98770b22b29d899ff2f396bdae3
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/08/2018
ms.locfileid: "48856859"
---
# <a name="confidence-score"></a>Оценка надежности
Когда пользовательский запрос сопоставляется с базой знаний, API службы QnA Maker возвращает соответствующие ответы вместе с оценкой достоверности. Эта оценка означает степень достоверности того, что ответ соответствует этому запросу пользователя. 

Оценка достоверности находится в пределах от 0 до 100. Оценка 100, скорее всего, указывает на точное соответствие, а оценка 0 означает, что соответствия не обнаружено. Чем выше оценка — тем больше уверенность в ответе. Для запроса может вернуться несколько ответов. В этом случае ответы возвращаются в порядке уменьшения оценки достоверности.

В приведенном ниже примере представлена одна сущность QnA с 2 вопросами. 


![Пример пары QnA](../media/qnamaker-concepts-confidencescore/ranker-example-qna.png)

В приведенном выше примере для разных типов пользовательских запросов можно ожидать такие оценки, как в диапазоне оценок ниже:


![Ранжированный диапазон оценок](../media/qnamaker-concepts-confidencescore/ranker-score-range.png)


В этой таблице приведено описание типичной достоверности и связанная с ней оценка.

|Значение оценки|Описание оценки|Пример запроса|
|--|--|--|
|90–100|Практически точное совпадение с запросом пользователя и вопросом о базе знаний|"После публикации мои изменения в базе знаний не обновляются"|
|> 70|Высокий уровень достоверности. Обычно это правильный ответ, который полностью отвечает на запрос пользователя|"Опубликованная база знаний не обновляется"|
|50–70|Средний уровень достоверности. Обычно довольно хороший ответ, соответствующий основному намерению в запросе пользователя.|"Следует ли сохранять обновления перед публикацией базы знаний?"|
|30–50|Низкий уровень достоверности. Обычно связанный ответ, который частично соответствует намерению в запросе пользователя.|"Что делает сохранение и обучение?"|
|< 30|Очень низкая достоверность. Обычно ответ на запрос пользователя не предоставляется, но выводятся некоторые совпадения слов или фраз. |"Где можно добавить синонимы в мою базу знаний"|
|0|Нет соответствия, поэтому ответ не возвращается.|"Сколько стоит использование службы"|

## <a name="choose-a-score-threshold"></a>Указание порогового значения оценки
В приведенной выше таблице показаны оценки, ожидаемые в большинстве баз знаний. Тем не менее, так как все базы знаний отличаются и содержат различные типы слов, намерений и целей, рекомендуем протестировать с разными пороговыми значениями и выбрать то, которое подходит вам лучше всего. Рекомендуемое стандартное пороговое значение, которое подходит для большинства баз знаний, — **50**.

При выборе порогового значения не забывайте про баланс между точностью и охватом и настраивайте порог в соответствии со своими требованиями.

- Если **точность** важнее для вашего сценария, увеличьте пороговое значение. Таким образом, каждый возвращаемый ответ будет иметь гораздо более высокую степень достоверности и намного вероятнее будет соответствовать запросу пользователя. В этом случае многие другие вопросы могут остаться без ответа. *Например*, если пороговое значение — **70**, можно пропустить некоторые неоднозначные примеры, такие как "Что такое сохранение и обучение?".

- Если **охват** (или полнота) важнее, снизьте пороговое значение. Это поможет ответить на максимальное количество вопросов, даже при наличии только частичного отношения к вопросу пользователя. Это означает, что может быть больше случаев, когда ответ не соответствует фактическому запросу пользователя, а предоставляет лишь некоторые связанные сведения. **Например**, если задать пороговое значение *30*, вы не получите точные ответы, как в примере выше, для таких запросов, как "Где я могу изменить свою базу знаний?".


## <a name="improve-confidence-scores"></a>Улучшение оценок достоверности
Чтобы улучшить оценку достоверности конкретного ответа на запрос пользователя, можно добавить запрос пользователя в базу знаний в качестве альтернативного вопроса для этого ответа.


## <a name="similar-confidence-scores"></a>Аналогичные оценки достоверности
Если несколько ответов имеют аналогичные оценки достоверности, вполне вероятно, что запрос был слишком общим и, следовательно, соответствовал с равной вероятностью с несколькими ответами. Попытайтесь структурировать QnAs лучше, чтобы каждый объект QnA имел четкое намерение.


## <a name="confidence-score-differences"></a>Различия оценки достоверности
Оценка достоверности ответа может незначительно измениться между тестируемой и опубликованной версией базы знаний, даже если содержимое одинаковое. Это связано с тем, что содержание тестируемой и опубликованной базы знаний находится в разных индексах поиска Azure.
См. здесь, как работает операция [публикации](../How-To/publish-knowledge-base.md).


## <a name="no-match-found"></a>Совпадения не найдены
Если ни одно из подходящих совпадений не найдено ранжировщиком, возвращается оценка достоверности 0.0 или "Нет", а ответ по умолчанию – "Нет хорошего соответствия в базе знаний". Вы можете переопределить этот ответ по умолчанию в коде бота или приложения, вызывающего конечную точку. В качестве альтернативы вы также можете установить переопределение ответа в Azure, и это изменит значение по умолчанию для всех баз знаний, развернутых в определенной службе QnA Maker.

1. Перейдите на [портал Azure](https://portal.azure.com) и перейдите к группе ресурсов, которая представляет созданный вами сервис QnA Maker.

2. Щелкните, чтобы открыть **службы приложений**.

    ![Служба доступа к приложениям](../media/qnamaker-concepts-confidencescore/set-default-response.png)

3. Щелкните **Параметры приложения** и укажите в поле **DefaultAnswer** требуемый ответ по умолчанию. Выберите команду **Сохранить**.

    ![Изменить ответ по умолчанию](../media/qnamaker-concepts-confidencescore/change-response.png)

4. Перезапустите службу приложений

    ![Перезапуск службы приложений QnA Maker](../media/qnamaker-faq/qnamaker-appservice-restart.png)


## <a name="next-steps"></a>Дополнительная информация
> [!div class="nextstepaction"]
> [Поддерживаемые источники данных](./data-sources-supported.md)
## <a name="see-also"></a>См. также 
[Общие сведения о QnA Maker](../Overview/overview.md)
