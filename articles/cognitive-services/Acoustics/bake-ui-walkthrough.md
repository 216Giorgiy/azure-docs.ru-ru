---
title: Акустическая обработка с помощью Project Acoustics
titlesuffix: Azure Cognitive Services
description: В этом документе описывается процесс акустической обработки с помощью расширения редактора Unity.
services: cognitive-services
author: kegodin
manager: nitinme
ms.service: cognitive-services
ms.subservice: acoustics
ms.topic: conceptual
ms.date: 08/17/2018
ms.author: kegodin
ms.openlocfilehash: ce377234cceb22bc2c6979bedd92d800355e75da
ms.sourcegitcommit: 90cec6cccf303ad4767a343ce00befba020a10f6
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/07/2019
ms.locfileid: "55872090"
---
# <a name="bake-acoustics"></a>Наложение звука

В этом документе описывается процесс акустической обработки с помощью расширения редактора Unity. Дополнительные сведения о Project Acoustics можно получить в [этой статье](what-is-acoustics.md). Краткое руководство вы найдете [здесь](getting-started.md).

## <a name="import-the-plugin"></a>Импорт подключаемого модуля

Импортируйте в свой проект пакет подключаемого модуля Acoustics. Откройте пользовательский интерфейс Acoustics, выбрав элементы **Window > Acoustics** (Окно > Acoustics) из меню Unity:

![Открытие окна инструмента Acoustics](media/WindowAcoustics.png)

## <a name="principles"></a>Принципы работы

Окно инструмента Acoustics собирает информацию, которая нужна акустической подсистеме для расчета акустических характеристик сцены. Наложение выполняется в пять шагов:

1. создание или выбор навигационной сетки для игрока;
2. разметка акустической геометрии;
3. присвоение этой геометрии свойств акустических материалов;
4. размещение зондов предварительной проверки;
5. наложение.

Когда наложение завершится, вы можете выполнить необязательные шаги дополнительной обработки, которые описаны в [этой статье](design-process.md).

## <a name="create-or-mark-a-navigation-mesh"></a>Создание или выбор навигационной сетки

Навигационная сетка используется для размещения точек зондов для моделирования. Для этого этапа можно использовать [рабочий процесс навигационной сетки](https://docs.unity3d.com/Manual/nav-BuildingNavMesh.html) в Unity или создать собственную сетку. Навигационные сетки, создаваемые в интегрированном рабочем процессе Unity, автоматически применяются системой акустики. Чтобы применить собственные сетки, отметьте их на вкладке **Objects** (Объекты), как описано в следующем шаге.

## <a name="objects-tab"></a>Вкладка Objects (Объекты)

Откройте вкладку **Objects** (Объекты) в окне **Acoustics**. На этой вкладке вы можете отмечать в сцене объекты, чтобы добавить к ним компоненты **AcousticsGeometry** или **AcousticsNavigation**. Можно также использовать [стандартный рабочий процесс компонента Unity](https://docs.unity3d.com/Manual/UsingComponents.html) для добавления и снятия меток.

Выберите один или несколько объектов в окне сцены или иерархическом списке, затем установите или снимите метки для компонентов **AcousticsGeometry** или **AcousticsNavigation**, как описано ниже. Если ничего не выбрано, метки устанавливаются или снимаются для всех объектов сцены сразу.

Метки поддерживаются только для отрисовщиков сетки и ландшафтов. Объекты всех остальных типов игнорируются. Флажки добавляют или снимают метки для всех затронутых объектов.

Если в вашей сцене ничего не выбрано, она будет выглядеть как на рисунке ниже:

![Вкладка Objects (Объекты), ничего не выбрано](media/ObjectsTabNoSelectionDetail.png)

Если в вашей сцене или в иерархическом списке выбраны некоторые объекты, окно будет выглядеть как на рисунке ниже:

![Вкладка Objects (Объекты), ничего не выбрано](media/ObjectsTabWithSelectionDetail.png)

### <a name="objects-tab-parts"></a>Элементы вкладки Objects (Объекты)

Страница этой вкладки состоит из следующих элементов.

1. Кнопки выбора вкладок (среди которых выбрана вкладка **Objects** (Объекты)). Эти кнопки позволяют переключаться между разными этапами наложения акустики (по порядку слева направо).
2. Краткое описание действий, выполняемых с помощью этой страницы.
3. Доступные фильтры для окна иерархии. Здесь вы можете отфильтровать список в окне иерархии по определенному типу объектов, чтобы их легче было пометить. Если вы еще ничего не отметили для акустики, последние два варианта здесь возвращают пустой список. Но они очень удобны для быстрого поиска помеченных объектов, когда они появятся.
4. Если нет выбранных объектов, в этом разделе отображается состояние всех объектов в сцене:
    * Total (Всего) — общее число активных нескрытых объектов в сцене.
    * Ignored (Игнорируется) — число объектов, которые не являются отрисовщиками сетки или ландшафтами.
    * Mesh (Сетка) — число объектов отрисовщика сетки в сцене.
    * Terrain (Ландшафт) — число объектов ландшафта в сцене.
    * Geometry (Геометрия) — число объектов сетки и ландшафта в сцене, помеченных как "Acoustics Geometry" (Геометрия акустики).
    * Navigation (Навигация) — число объектов сетки и ландшафта в сцене, помеченных как "Acoustics Navigation" (Навигация акустики). Это число не включает Unity NavMesh.
5. Здесь отображается общее число объектов в сцене, которые вы можете пометить, то есть отрисовщиков сетки и ландшафтов. Отображаются флажки, которые вы можете установить для использования выбранных объектов в роли геометрии или навигации для акустики (этот выбор добавляет к объектам соответствующий компонент).
6. Если ничего не выбрано, отображается напоминание о необходимости выбрать объекты для маркировки. Вы также можете пометить все объекты на сцене, установив любой из флажков (или оба сразу) без выбора отдельных элементов.
7. После выбора объектов в этом разделе отображается состояние только для выбранных объектов.
8. Отображает общее число выбранных объектов, для которых можно поставить отметку. Установка или снятие флажков в этом случае применяется только к выделенным объектам.

Если отмечена только часть выбранных объектов, соответствующий флажок будет отображаться в "неопределенном" состоянии:

![Флажок в неопределенном состоянии](media/MixedObjectSelectionDetail.png)

Щелчок по такому флажку помечает все выбранные объекты, а повторный щелчок — снимает отметки со всех выбранных объектов.

Объекты можно помечать одновременно для геометрии и навигации.

### <a name="guidelines-for-marking-objects"></a>Рекомендации по маркировке объектов

Обязательно отметьте объекты как **Acoustics Geometry** (Геометрия акустики), если они должны скрывать, отражать или поглощать звук. Геометрия акустики может включать такие объекты, как, например, пол, стена, крыша, окна и стекла, ковры и крупная мебель. Вполне допустимо добавлять и объекты меньшего размера, например декоративные элементы, лампы и световые приборы, так как они не сильно усложнят расчет наложения. Важно не упустить все основные элементы, такие как пол и потолок. Также следите за тем, чтобы не отметить очевидно лишние объекты, например сетки конфликтов.

В результатах наложения фиксируется форма объекта, существовавшая на момент вычисления зонда (на вкладке **Probes** (Зонды), как описано ниже). Если потребуется переместить любой из помеченных в сцене объектов, необходимо повторить расчет зонда и наложение сцены.

## <a name="materials-tab"></a>Вкладка Materials (Материалы)

Завершив пометку объектов, щелкните кнопку **Materials** (Материалы), чтобы перейти на вкладку Materials (Материалы).

### <a name="parts-of-the-materials-tab"></a>Элементы вкладки Materials (Материалы)

![Подробные сведения о вкладке Materials (Материалы)](media/MaterialsTabDetail.png)

1. Кнопка перехода на вкладку **Materials** (Материалы) позволяет открыть эту страницу.
2. Краткое описание действий, выполняемых с помощью этой страницы.
3. Если установлен этот флажок, в список включаются только те материалы, которые используются для объектов с пометкой **Acoustics Geometry** (Геометрия акустики). В противном случае перечисляются все материалы, использованные в сцене.
4. Эти параметры позволяют изменить порядок объектов в меню, которое отображается при нажатии кнопки раскрывающегося списка в столбце Acoustics (Акустика) (№6) на рисунке ниже. Вариант **Name** (Имя) сортирует акустические материалы по имени. Вариант Absorptivity (Коэффициент поглощения) сортирует материалы в порядке возрастания коэффициента поглощения.
5. Список материалов, используемых в сцене, отсортированный в алфавитном порядке. Если установить флажок **Show Marked Only** (Показать только отмеченные) (№3), здесь отображаются только те материалы, которые используются объектами с пометкой **Acoustics Geometry** (Геометрия акустики). Щелчок по любому из этих материалов выбирает все объекты в сцене, для которых используется этот материал.
6. Отображает акустический материал, которому назначен материал сцены. Щелкните раскрывающийся список, чтобы изменить назначение материала сцены для разных акустических материалов. Вы можете изменить порядок сортировки в меню, которое отображается при щелчке по элементу, с помощью описанных выше вариантов **Sort Acoustics By:** (Сортировать акустику по:) (№4).
7. Отображает коэффициент акустического поглощения для материала, выбранного в предыдущем столбце. Значение "0" означает, что материал ничего не поглощает (полное отражение), а значение "1" — полное поглощение (без отражения). Коэффициент поглощения нельзя изменить для всех материалов, кроме пользовательских (Custom).
8. Если материал помечен как пользовательский (Custom), этот ползунок активируется и позволяет изменить коэффициент поглощения. Также можно сразу ввести числовое значение. Дополнительные сведения о свойствах материалов см. в статье [Design process overview](design-process.md) (Общие сведения о процессе проектирования).

### <a name="guidelines-for-assigning-materials-or-absorption-values"></a>Рекомендации по назначению материалов (или коэффициентов поглощения)

На этой вкладке выполняется попытка прогнозировать коэффициент поглощения по имени материала. Например, если материал для сцены называется LivingRoom_WoodTable (гостиная — деревянный стол), ему будет изначально присвоен акустический материал wood (дерево). Если для материала невозможно сопоставить известный материал, ему назначается значение Default (По умолчанию) с коэффициентом поглощения, близким к бетону.

Вы можете переназначить акустические материалы для любого материала сцены. Например, если комната звучит слишком гулко, выберите для стен, пола или потолка акустический материал с более высоким коэффициентом поглощения. Назначенный акустический материал применяется ко всем объектам, использующим этот материал сцены.

## <a name="probes-tab"></a>Вкладка Probes (Зонды)

После назначения материалов переходите на вкладку **Probes** (Зонды).

### <a name="parts-of-the-probes-tab"></a>Элементы вкладки Probes (Зонды)

![Подробные сведения о вкладке Probes (Зонды)](media/ProbesTabDetail.png)

1. Кнопка перехода на вкладку **Probes** (Зонды) позволяет открыть эту страницу.
2. Краткое описание действий, выполняемых с помощью этой страницы.
3. Позволяют выбрать низкое (Coarse) или высокое (Fine) разрешение для грубого или точного моделирования соответственно. Грубое выполняется быстрее, но допускает некоторые неточности. Разница подробнее описана в разделе [Низкое и высокое разрешение](#Coarse-vs-Fine-Resolution) ниже.
4. В этом поле выберите расположение для файлов акустических данных. Нажмите кнопку с символом многоточия (...), чтобы воспользоваться средством выбора папки. По умолчанию используется папка **Assets/AcousticsData**. В этом расположении будет создана вложенная папка **Editor**. Дополнительные сведения о файлах данных см. в разделе [Файлы данных](#Data-Files) ниже.
5. Указанный здесь префикс будет использоваться для именования всех файлов данных этой сцены. По умолчанию используется формат "Acoustics_[имя сцены]".
6. После вычисления зондов описанные выше элементы управления отключаются. Нажмите кнопку **Clear** (Очистить), чтобы удалить все результаты вычислений и включить элементы управления, если вам нужно повторить расчеты с новыми параметрами.
7. Нажмите кнопку **Calculate...** (Вычислить...), чтобы пересчитать сцену в объемных пикселях и вычислить размещение точек зондов. Этот процесс выполняется на локальном компьютере и является обязательным этапом перед наложением.

В этой версии Project Acoustics вы не можете размещать зонды вручную, а только через автоматизированный процесс на вкладке **Probes** (Зонды).

### <a name="what-the-calculate-button-calculates"></a>Что делает кнопка Calculate... (Вычислить...)

Кнопка **Calculate...** (Вычислить...) принимает все предоставленные данные (геометрия, навигация, материалы и разрешение вычислений) и выполняет следующие шаги.

1. Извлекает сведения о геометрии из сеток сцены и вычисляет объемное пространство. Объемное пространство представляет собой трехмерную координатную сетку, составленную из кубических объемных пикселей, которая вмещает всю созданную сцену. Размер объемных пикселей определяется частотой моделирования, которая зависит от значения параметра **Simulation Resolution** (Разрешение моделирования). Каждый объемный пиксель считается "воздушным пространством" или содержит часть геометрии сцены. Если объемный пиксель содержит геометрию, ему присваивается цифрой коэффициент, соответствующий материалу этого элемента геометрии.
2. На основе данных навигации вычисляет акустически интересные места, в которых может оказаться игрок. Выбирается по возможности минимальный набор таких мест, состоящий из отдельных небольших зон: дверные проемы и коридоры, комнаты, открытые пространства. Для небольших сцен обычно удается подобрать не более 100 мест, а для больших это количество может доходить до 1000.
3. Для каждого найденного места расположения слушателя вычисляется ряд акустических параметров, например "открытость" пространства, размер окружающей комнаты и т. д.
4. Результаты вычислений сохраняются в файлах в указанном расположении (см. раздел [Файлы данных](#Data-Files) ниже).

В зависимости от размера сцены и скорости компьютера эти вычисления могут занять несколько минут.

Когда вычисления завершаться, вы можете проверить данные об объемных пикселях и точках расположения зондов, чтобы гарантировать хорошие результаты наложения. Крупные проблемы, такие как плохая сетка навигации, лишние или отсутствующие геометрические объекты, обычно хорошо заметны в режиме предварительного просмотра и легко исправляются.

### <a name="scene-rename"></a>Переименование сцены

Имя сцены используется для сопоставления сцены с файлами, в которых хранятся данные о точках размещения зондов и объемных пикселях. Если вы переименуете сцену после расчета точек расположения зондов, все данные о назначении материалов и размещении объектов будут утрачены и придется повторно выполнить вычисления.

## <a name="debug-display-through-gizmos"></a>Отладка отображения с помощью инструментов

По умолчанию всегда включены инструменты **Probes** (Пробы) и **Voxels** (Объемные пиксели). Они позволяют увидеть вычисленные характеристики объемных пикселей и точки расположения зондов. Их можно включить или отключить через меню Gizmos (Инструменты).

![Меню Gizmos (Инструменты)](media/GizmosMenu.png)

### <a name="voxels"></a>Объемные пиксели

Объемные пиксели отображаются в окне сцены в виде зеленых кубиков вокруг учитываемых объектов геометрии. Объемные пиксели с "воздушным пространством" не отображаются. Вокруг всей сцены вы видите большой зеленый параллелепипед, который ограничивает участвующее в моделировании объемное пространство.
Покрутите сцену на экране и убедитесь, что объемные пиксели расположены везде, где должны присутствовать объекты геометрии. Объемные пиксели отображаются только в том случае, если расстояние от камеры сцены до объекта не превышает 5 метров.

Сравнивая объемные пиксели, созданные в режимах грубого и точного моделирования, вы легко заметите, что в низком разрешении создаются пиксели вдвое большего размера.

![Предварительный просмотр объемных пикселей](media/VoxelCubesPreview.png)

### <a name="probe-points"></a>Точки размещения зондов

Точки размещения зондов обозначают то же самое, что и возможные места расположения игрока (слушателя). При создании наложения вычисляются акустические характеристики для источников звука, расположенных в любом месте сцены, по каждой точке размещения зонда. Если игрок расположен не точно в точке размещения зонда, параметры для него вычисляются методом интерполяции на основе характеристик ближайшей к нему точки размещения зонда.

Поэтому очень важно следить за тем, чтобы точки размещения зонда были расположены во всех местах сцены, куда может переместиться игрок, уделяя достаточное внимание всем небольшим пространствам и дверным проемам. Точки размещения зондов автоматически вычисляются подсистемой Project Acoustics по заданной геометрии сцены, и вы не можете изменять или перемещать их в этой предварительной версии конструктора. Но зато они позволяют проверить правильность отметок геометрии и данных навигации.

![Предварительный просмотр зондов](media/ProbesPreview.png)

### <a name="Coarse-vs-Fine-Resolution"></a>Низкое и высокое разрешение

Единственное различие между низким и высоким разрешением — частота моделирования. Высокое разрешение использует вдвое большую частоту по сравнению с низким.
Это звучит очень просто, но добавляет ряд важных эффектов для акустического моделирования.

* Для низкого разрешения длина волны вдвое больше, чем для высокого, и объемные пиксели также вдвое больше.
* Время вычисления модели напрямую зависит от размера объемного пикселя, и в результате грубое моделирование вычисляется примерно в 16 раз быстрее, чем точное.
* Невозможно учесть в расчетах проемы (окна, двери и т. п.), размер которых не превышает размер объемного пикселя. Выбор низкого разрешения (Coarse) может привести к тому, что некоторые из таких проемов не будут учтены в модели, а значит не будут пропускать звук при выполнении сцены. Чтобы заметить такую проблему, изучите расположение объемных пикселей.
* Низкая частота моделирования снижает влияние дифракции на углах и ребрах.
* Источники звука не могут располагаться внутри "заполненных", то есть содержащих геометрические объекты, объемных пикселей. В таких местах звук создаваться не будет. Это усложняет размещение источников звука, если используются более крупные объемные пиксели для низкого разрешения.
* Крупные объемные пиксели больше закрывают проемы, как показано ниже. Первое изображение создано в режиме грубого моделирования (Coarse), а второе — для того же дверного проема в режиме точного моделирования (Fine). Как легко заметить по красным отметкам, дверной проем намного меньше перекрывается в режиме высокого разрешения. Синяя линия обозначает границы проема по данным геометрии, а красная линия — действующие границы акустического проема с учетом размера объемных пикселей. Как проявится такое перекрытие в конкретной ситуации — зависит от того, как расположение объемных пикселей соотносится с геометрией проема, то есть от соотношения размеров и расположений всех объектов в этой сцене.

![Дверной проем в низком разрешении](media/CoarseVoxelDoorway.png)

![Дверной проем в высоком разрешении](media/FineVoxelDoorway.png)

## <a name="bake-tab"></a>Вкладка Bake (Наложение)

Когда вы проверите все данные в режиме предварительного просмотра, перейдите на вкладку **Bake** (Наложение), чтобы отправить результаты вычислений в облако.

### <a name="parts-of-the-bake-tab"></a>Элементы Bake (Наложение)

![Подробные сведения о вкладке Bake (Наложение)](media/BakeTabDetails.png)

1. Кнопка перехода на вкладку Bake (Наложение) позволяет открыть эту страницу.
2. Краткое описание того, что можно сделать на этой странице.
3. Поля для ввода учетных данных Azure после создания учетной записи Azure. Дополнительные сведения см. в [этой статье](create-azure-account.md).
4. Тег образа Docker для набора инструментов акустической обработки.
5. Позволяет запустить портал Azure, чтобы управлять подписками, отслеживать потребление, просматривать информацию о выставлении счетов и т. д. 
6. Тип вычислительного узла в Пакетной службе Azure, используемого для вычислений. Можно использовать только те типы узлов, которые поддерживаются в расположении центра обработки данных Azure. Если у вас нет данных о поддержке, сохраните здесь значение **Standard_F8s_v2**.
7. Количество узлов, используемых для вычислений. Введенное здесь число влияет на время создания наложения, но ограничивается количеством выделенных ядер в Пакетной службе Azure. Распределение по умолчанию допускает только два узла по 8 ядер или один узел с 16 ядрами. Эти характеристики можно увеличить. Дополнительные сведения об ограничениях для выделения ядер см. в статье [о создании учетной записи Пакетной службы Azure](create-azure-account.md).
8. Установите этот флажок, чтобы настроить пул вычислений для использования [узлов с низким приоритетом](https://docs.microsoft.com/azure/batch/batch-low-pri-vms). Затраты на узлы с низким приоритетом намного меньше, однако эти узлы не всегда доступны и могут быть замещены в любое время.
9. Количество зондов в обрабатываемой сцене, которое было вычислено на вкладке **Probes** (Зонды). Количество зондов определяет количество процессов моделирования, которые нужно выполнить в облаке. Число узлов не может превышать число зондов.
10. Прогноз времени, которое будет затрачено на выполнение этого задания в облаке. Сюда не входит время запуска узлов. Это значение примерно соответствует длительности периода с начала выполнения задания до получения результатов. Не забывайте, что это всего лишь приблизительное значение.
11. Общая длительность вычислений для выполнения этого моделирования. Это общая длительность работы вычислительных узлов, которые будут запущены в Azure. Дополнительные сведения об использовании этого значения приводятся в разделе [Оценка затрат на наложение](#Estimating-bake-cost) ниже.
12. Это сообщение содержит информацию о расположении результатов наложения после завершения задания.
13. (Только для опытных пользователей) Если вам по какой-либо причине нужно, чтобы редактор Unity очистил информацию о переданном наложении (например, если вы скачали эти результаты на другой компьютер), нажмите кнопку **Clear State** (Очистить состояние). Все данные о переданном задании будут уничтожены. Обратите внимание, что в этом случае готовый файл результатов **не** будет скачиваться, и **это действие не аналогично отмене задания**. Само задание в облаке, если оно уже запущено, продолжит выполняться.
14. Нажмите кнопку Bake (Наложение), чтобы передать результаты наложения в облако. Пока задание выполняется, надпись на этой кнопке сменяется на **Cancel Job** (Отменить задание).
15. Выполняет подготовку к обработке имитации звука на локальных компьютерах. Дополнительные сведения см. в разделе [Локальная имитация](#Local-bake).  
16. В этой области отображается состояние процесса наложения. Когда он завершится, здесь отобразится состояние **Downloaded** (Скачано).

Полные сведения об активных заданиях, вычислительных пулах и хранилищах вы всегда можете получить на [портале Azure](https://portal.azure.com).

Пока выполняется задание, кнопка **Bake** (Наложение) сменяется кнопкой **Cancel Job** (Отменить задание). Используйте эту кнопку, чтобы отменить выполняющееся задание. Система предложит подтвердить отмену, а затем прекратит выполнение задания. Отмену задания невозможно отменить, и вы не получите никаких результатов, но вам будет выставлен счет за уже использованное время вычислений в Azure.

Начав процесс создания наложения, можно закрыть Unity. Вычисление наложения в облаке может занять несколько часов в зависимости от характеристик проекта, типа и количества узлов. Состояние задания наложения обновляется, когда вы при перезагружаете проект и открываете окно Acoustics. Если задание уже завершено, сразу же скачивается выходной файл.

Учетные данные Azure безопасно сохраняются на локальном компьютере и прикрепляются к редактору Unity. Они используются исключительно для создания безопасного подключения к Azure.

### <a name="Estimating-bake-cost"></a> Оценка затрат на имитацию звука в Azure

Чтобы оценить стоимость вычисления наложения, умножьте значение из поля **Estimated Compute Cost** (Предполагаемые затраты на вычисления), которое обозначает длительность вычислений, на стоимость одного часа вычислений в местной валюте для выбранного **типа узла виртуальной машины**. Этот результат не учитывает время работы узлов, необходимое для их включения и настройки. Например, если вы выбрали тип узла **Standard_F8s_v2** со стоимостью 0,40 долл. США в час, а расчетное время вычислений составляет 3 часа 57 минут, общую приблизительную стоимость этого задания можно оценить так: 0,40 долл. США × 4 часа = ~ 1,60 долл. США. Фактическая стоимость, скорее всего, будет немного выше за счет времени на подготовку узлов к работе. Стоимость одного часа работы узла вы можете получить на странице [цен на пакетную службу Azure](https://azure.microsoft.com/pricing/details/virtual-machines/linux) (выберите категорию "Оптимизированные для вычислений" или "Для высокопроизводительных вычислений").

### <a name="reviewing-the-bake-results"></a>Просмотр результатов наложения

Когда завершится вычисление наложения, убедитесь, что все объемные пиксели и точки расположения зондов размещаются в правильных местах, запустив для этого подключаемый модуль среды выполнения. Дополнительные сведения можно получить в статье [Design process overview](design-process.md) (Общие сведения о процессе проектирования).

## <a name="Local-bake"></a>Локальная имитация
Локальная имитация звука выполняется на вашем ПК, а не отправляется в вычислительный кластер пакетной службы Azure. Эта функция позволяет экспериментировать со звуком, не требуя наличия подписки Azure. Обратите внимание, что имитация звука требует вычислительных мощностей и может занять много времени в зависимости от размера сцены, конфигурации имитации и базовой вычислительной мощности компьютера обработки.

### <a name="minimum-hardware-requirements"></a>Минимальные требования к оборудованию
64-разрядный процессор Intel с минимум 8 ядрами, 32 ГБ ОЗУ или больше.

Например, на компьютере с 8 ядрами, процессором Intel Xeon E5-1660 3 ГГц и 32 ГБ ОЗУ:
* для небольшой сцены со 100 проверками грубая имитация занимает примерно 2 часа, а точная имитация — примерно 32 часа;
* для большей сцены с 1000 проверок грубая имитация может занять до 20 часов, а точная имитация — примерно 21 день.

### <a name="setup-docker"></a>Установка Docker
Установите и настройте Docker на ПК, где будет обрабатываться имитация:
1. Установите [набор инструментов Docker](https://www.docker.com/products/docker-desktop).
2. Запустите параметры Docker, перейдите к расширенным параметрам и выделите ресурсам не менее 8 ГБ ОЗУ. Чем больше ЦП вы можете выделить Docker, тем быстрее завершится имитация. ![Пример параметров Docker](media/DockerSettings.png)
3. Перейдите в раздел Shared Drives (Общие диски) и включите общий доступ к диску, используемому для обработки.![DockerDriveSharing](media/DockerSharedDrives.png)

### <a name="run-local-bake"></a>Выполнение локальной имитации
1. Нажмите кнопку Prepare Local Bake (Подготовить локальную имитацию) на вкладке "Bake" (Имитация) и выберите папку, где будут сохранены входные файлы и скрипты выполнения. Имитацию затем можно выполнить на любом компьютере, который соответствует минимальным требованиям к оборудованию и на котором установлен Docker. Для этого нужно скопировать папку на этот компьютер.
2. Запустите имитацию с помощью скрипта runlocalbake.bat. Этот скрипт будет извлекать образ Docker Project Acoustics с использованием набора инструментов, необходимого для обработки имитации и ее запуска. 
3. После завершения имитации скопируйте полученный ACE-файл обратно в проект Unity. Чтобы убедиться в том, что Unity распознает его как двоичный файл, добавьте bytes в расширение файла (например, Scene1.ace.bytes). Подробные журналы имитации сохраняются в файле AcousticsLog.txt. Если вы столкнетесь с какими-либо проблемами, поделитесь этим файлом, чтобы получить помощь в диагностике.

## <a name="Data-Files"></a>Файлы данных

Этот подключаемый модуль на разных этапах работы создает четыре файла данных. Только один из них потребуется во время выполнения, поэтому все остальные размещаются в папке с именем Editor и не компилируются вместе с проектом.

* **Assets/Editor/[имя_сцены]\_AcousticsParameters.asset**. В этом файле хранятся данные, которые вводятся в поля в пользовательском интерфейсе Acoustics. Вы не можете изменять расположение и имя этого файла. В этом файле есть еще несколько значений, которые влияют на создание наложения, но они предназначены только для опытных пользователей и их не следует изменять.
* **Assets/AcousticsData/Acoustics\_[имя_сцены].ace.bytes**. Этот файл создается в процессе моделирования наложения и содержит данные для поиска, которые применяются во время выполнения для вычисления акустических характеристик сцены. Расположение и имя этого файла можно изменить через поля данных на вкладке **Probes** (Зонды).
* **Assets/AcousticsData/Editor/Acoustics_[имя_сцены].vox**. Этот файл хранит вокселизированную геометрию Acoustics и свойства материалов. Эти данные вычисляются по кнопке **Calculate...** (Вычислить...) на вкладке Probes (Зонды). Расположение и имя этого файла можно изменить через поля данных на вкладке **Probes** (Зонды).
* **Assets/AcousticsData/Editor/Acoustics\_[имя_сцены]\_config.xml**. В этом файле хранятся параметры, вычисленные с помощью кнопки **Calculate...** (Расчет...) на вкладке **Пробы**. Расположение и имя этого файла можно изменить через поля данных на вкладке **Probes** (Зонды).

Соблюдайте осторожность, чтобы не удалить файл *.ace.bytes, скачанный после создания наложения. Этот файл невозможно восстановить без повторного вычисления всего наложения.

## <a name="next-steps"></a>Дополнительная информация
* Примените результаты вычисления наложения к источникам звука, как описано в [обзорном руководстве по процессу проектирования](design-process.md).

