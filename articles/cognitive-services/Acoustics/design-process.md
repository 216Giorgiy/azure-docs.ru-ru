---
title: Общие сведения о процессе разработки для Project Acoustics
titlesuffix: Azure Cognitive Services
description: В этом документе описывается, как выразить намерение проектирования на всех трех этапах рабочего процесса Project Acoustics.
services: cognitive-services
author: kegodin
manager: nitinme
ms.service: cognitive-services
ms.subservice: acoustics
ms.topic: conceptual
ms.date: 08/17/2018
ms.author: kegodin
ms.openlocfilehash: bb5f309a96feac2caea85fbe81b7216eecfc4b79
ms.sourcegitcommit: 90cec6cccf303ad4767a343ce00befba020a10f6
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/07/2019
ms.locfileid: "55873943"
---
# <a name="design-process-overview"></a>Обзор процесса проектирования
Вы можете выразить свое намерение проектирования на всех трех этапах рабочего процесса Project Acoustics: предварительная настройка сцены, размещение источника звука и проектирование после создания. Процесс требует меньше разметки, связанной с размещением томов реверберации, сохраняя при этом контроль разработчика над звучанием сцены.

## <a name="pre-bake-design"></a>Предварительное проектирование
В процессе предварительной настройки сцены создается сцена и метаданные, которые используются для моделирования звуковой волны, что включает выбор элементов сцены, которые будут участвовать в моделировании для эффекта окклюзии, отражения и реверберации. Метаданные для сцены — это выбранные акустические материалы для каждого элемента сцены. Акустические материалы контролируют объем звуковой энергии, отраженной от каждой поверхности.

По умолчанию коэффициент поглощения для всех поверхностей составляет 0,04, и это сильное отражение. Вы можете достичь эстетических и игровых эффектов, настроив коэффициенты поглощения различных материалов по всей сцене, которые особенно заметны для слушателей при переходах из одной области сцены в другую. Например, переход из темной отражающей комнаты в светлую сцену вне помещения, в которой нет реверберации, усиливает эффект перехода. Чтобы добиться этого, настройте высокие коэффициенты поглощения материалов для сцены вне помещения.

Время реверберации данного материала в помещении обратно пропорционально его коэффициенту поглощения, причем большинство материалов имеют коэффициент поглощения в диапазоне от 0,01 до 0,20. Материалы с коэффициентами поглощения вне этого диапазона имеют очень высокий уровень поглощения.

![График времени реверберации](media/ReverbTimeGraph.png)

В [пошаговом руководстве по пользовательскому интерфейсу сборки](bake-ui-walkthrough.md) подробно описываются элементы управления для предварительного проектирования.

## <a name="sound-source-placement"></a>Размещение звукового источника
Просмотр объемных элементов и точек размещения проб во время выполнения может помочь с отладкой проблем, когда звуковые источники застревают внутри акустической геометрии. Для переключения отображения сетки объемных элементов и точек размещения проб установите соответствующий флажок в меню Gizmos (Инструменты) в правом верхнем углу представления сцены. Если источник звука находится внутри трехмерной стены, переместите его в воздушный объемный элемент.

![Меню Gizmos (Инструменты)](media/GizmosMenu.png)  

Отображение объемных элементов может помочь определить, применяется ли к визуальным компонентам в игре преобразование. Если это так, примените одно и то же преобразование к GameObject с помощью **Acoustics Manager**.

### <a name="voxel-size-discrepancies"></a>Несоответствия размеров объемных пикселей
Вы можете заметить, что размеры объемных пикселей, используемых для иллюстрации того, какие сетки сцены участвуют в акустической обработке, отличаются в представлениях во время разработки и во время выполнения. Это различие не влияет на качество и степень детализации выбранной частоты моделирования, а является, скорее, побочным продуктом использования трехмерной сцены в среде выполнения. В среде выполнения объемные пиксели моделирования "уточнены" для поддержки интерполяции между исходными местоположениями. Благодаря этому во время разработки также можно размещать источники звука ближе к сеткам сцены, чем позволяет размер объемного пикселя моделирования, так как источники внутри объемного пикселя, содержащие акустическую сетку, не создают звука.

Ниже приведены два изображения, на которых показана разница между объемными пикселями времени разработки (предварительного проектирования) и среды выполнения (после создания), которые визуализированы с помощью подключаемого модуля Unity.

Объемные пиксели времени разработки:

![VoxelsDesignTime](media/VoxelsDesignTime.png)

Объемные пиксели среды выполнения:

![VoxelsRuntime](media/VoxelsRuntime.png)

Решение о том, правильно ли трехмерная сетка представляет архитектурные или структурные сетки сцены, должно приниматься на основе объемных пикселей времени разработки, а не визуализации уточненных объемных пикселей в среде выполнения.

## <a name="post-bake-design"></a>Проектирование после создания
Результаты создания хранятся в ACE-файле в качестве параметров окклюзии и реверберации для всех пар расположения "источник — слушатель" в пределах всей сцены. Этот физически точный результат можно использовать для вашего проекта "как есть". Это отличная отправная точка для проектирования. Процесс проектирования после создания определяет правила для преобразования параметров результата создания в среде выполнения.

### <a name="distance-based-attenuation"></a>Затухание, связанное с расстоянием
Аудио DSP, предоставляемое подключаемым модулем пространственного анализа Unity в **Microsoft Acoustics**, учитывает затухание, связанное с расстоянием к источнику, встроенное в Unity Editor. Элементы управления затуханием, связанным с расстоянием, находятся в компоненте **Audio Source** (Источник звука), который можно найти на панели источников звуков **Inspector** в разделе **3D Sound Settings** (Параметры 3D-звуков):

![Затухания на основе расстояния](media/distanceattenuation.png)

Acoustics выполняет вычисления в области моделирования, размещенной вокруг расположения игрока. Если источник звука удален от игрока, расположенного за пределами этой области моделирования, только геометрия в этой области будет влиять на распространение звука (например, вызывать окклюзию), которое работает достаточно хорошо, когда объекты, вызывающие окклюзию, находятся поблизости от игрока. Однако в случаях, когда игрок находится в открытом пространстве, но объекты, вызывающие окклюзию, находятся вблизи отдаленного источника звука, звук может стать нереалистичным (без окклюзии). В таких случаях рекомендуется уменьшить ослабление звука до 0 при расстоянии в 45 м (это стандартное горизонтальное расстояние от игрока до края области).

### <a name="tuning-scene-parameters"></a>Настройка параметров сцены
Чтобы отрегулировать параметры для всех источников, щелкните полосу канала **Audio Mixer** (Аудиомикшер) в Unity и настройте параметры эффекта в **Project Acoustics Mixer**.

![Настройка микшера](media/MixerParameters.png)

* **Wetness Adjust**. Корректирует мощность реверберации в базе данных во всех источниках на сцене, основываясь на расстоянии слушателя-источника. Положительные значения делают звук более реверберирующим, а отрицательные — более сухим.
* **Масштаб RT60**. Скаляр для умножения время реверберации.
* **Использование прокрутки**. Определяет аудиовыход как стереофоническую (0) или многоканальную прокрутку (1). Любое значение, отличное от 1, обозначает стереофонический аудиовыход. Стереофонический выход проектируется с помощью функции моделирования восприятия звука (HRTF) для использования с наушниками, а многоканальный выход — с помощью векторного амплитудного панорамирования (VBAP) для использования с многоканальными системами динамиков. При использовании многоканальной прокрутки не забудьте выбрать режим динамиков, который соответствует параметрам устройства, находящимся в **Параметры проекта** > **Аудио**.

![SpeakerMode](media/SpeakerMode.png)

### <a name="tuning-source-parameters"></a>Настройка параметров источника
Прикрепление скрипта **AcousticsAdjust** к источнику позволяет настроить параметры для этого источника. Чтобы прикрепить скрипт, щелкните **Add Component** (Добавить компонент) в нижней части панели **Inspector** и выберите **Scripts > Acoustics Adjust** (Скрипты > Настройка звука). В скрипте есть шесть элементов управления:

![AcousticsAdjust](media/AcousticsAdjust.png)

* **Enable Acoustics** (Включить акустику). Контролирует, применяется ли акустика к этому источнику. Если флажок снят, источник будет проектироваться с помощью функций HRTF или прокрутки, но акустики не будет. Это означает отсутствие задержек, помех и таких параметров реверберации динамиков, как уровень и время затухания. Реверберация по-прежнему применяется с фиксированным уровнем измерения и временем затухания.
* **Occlusion** (Окклюзия). Применяет множитель к уровню окклюзии в дБ, вычисленному акустической системой. Если этот множитель больше 1, окклюзия будет преувеличена, при значении меньше 1 эффект окклюзии будет более слабым, а значение 0 отключает окклюзию.
* **Transmission (dB)** (Передача (дБ)). Устанавливает ослабление (в дБ), вызванное передачей звука через геометрию помещения. Установите этот слайдер на самый низкий уровень, чтобы отключить передачу. Acoustics пространственно распределяет исходный "сухой" звук по мере приближения к геометрии сцены (прохождение). Передача обеспечивает дополнительное "сухое" перемещение, которое проецируется в направлении прямой видимости. Обратите внимание, что также применяется кривая ослабления с увеличением расстояния от источника.
* **Wetness (dB)** (Влажность (дБ)). Регулирует силу реверберации (в дБ) в зависимости от расстояния до источника. Положительные значения делают звук более реверберирующим, а отрицательные — более сухим. Щелкните элемент управления кривой (зеленая линия), чтобы открыть редактор кривой. Измените кривую, щелкнув левой кнопкой мыши, чтобы добавить точки, и перетащите эти точки для получения нужного эффекта. Ось X — это расстояние от источника, а ось Y — значение реверберации в дБ. Дополнительные сведения об изменении кривых см. в руководстве Unity [здесь](https://docs.unity3d.com/Manual/EditingCurves.html). Чтобы сбросить кривую до значений по умолчанию, щелкните правой кнопкой мыши **Wetness** (Влажность) и выберите **Reset** (Сбросить).
* **Decay Time Scale** (Шкала времени затухания). Регулирует множитель для времени затухания. Например, если результат создания определяет время затухания 750 мс, но значение этой шкалы равно 1,5, время затухания, применяемое к источнику, составляет 1,125 мс.
* **Outdoorness** (Открытое пространство). Аддитивная настройка того, как акустическая система должна обрабатывать источник звука, имитируя наружную среду. Значение 1 приведет к тому, что источник всегда будет полностью звучать как на открытом воздухе, а при значении –1 он будет звучать как в помещении.

Различным источникам могут требоваться разные параметры для достижения определенных эстетических или игровых эффектов. Диалог — один из возможных примеров. Человеческое ухо больше приспособлено к реверберации в речи, в то время как диалог должен быть понятным для игрового процесса. Чтобы учесть это, не делая диалог закадровым, уменьшите значение **Wetness** (Влажность), настройте параметр **Perceptual Distance Warp** (Ощущаемое искажение расстояния), как описано ниже, увеличьте значение **Transmission** (Передача) для усиления "сухого" звука, распространяющегося через стены, и (или) уменьшите значение **Occlusion** (Окклюзия) с 1 для дополнительного звука, поступающего через проемы.

Прикрепление скрипта **AcousticsAdjustExperimental** к источнику позволяет настроить дополнительные экспериментальные параметры для этого источника. Чтобы прикрепить скрипт, щелкните **Add Component** (Добавить компонент) в нижней части панели **Inspector** и выберите **Scripts > Acoustics Adjust Experimental** (Скрипты > Настройка экспериментальных параметров). В настоящее время имеется один экспериментальный элемент управления:

![AcousticsAdjustExperimental](media/AcousticsAdjustExperimental.png)

* **Perceptual Distance Warp** (Ощущаемое искажение расстояния). Позволяет применить экспоненциальное искажение к расстоянию, используемое для вычисления коэффициента "сухого" и "влажного" звука. Акустическая система вычисляет уровни влажности во всем пространстве, которые плавно изменяются с расстоянием и обеспечивают признаки удаленности расстояния. Подкрутка значения больше чем на 1 увеличит этот эффект, увеличивая уровни реверберации, делая звук "удаленным". Скручивание значения меньше 1 делает изменение реверберации на основе расстояния менее заметным, звук будет более "близким".

