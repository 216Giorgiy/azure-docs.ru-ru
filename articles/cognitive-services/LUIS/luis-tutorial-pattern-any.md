---
title: Руководство. Использование сущности Pattern.any для улучшения прогнозирования в Интеллектуальной службе распознавания речи (LUIS) в Azure | Документация Майкрософт
titleSuffix: Cognitive Services
description: Для улучшения прогнозирования намерений и сущностей LUIS в этом руководстве используется сущность Pattern.any.
services: cognitive-services
author: diberry
manager: cjgronlund
ms.service: cognitive-services
ms.technology: luis
ms.topic: article
ms.date: 08/02/2018
ms.author: diberry
ms.openlocfilehash: 1587debecd82072c29d4caffc2b81629b1f52b0e
ms.sourcegitcommit: 9819e9782be4a943534829d5b77cf60dea4290a2
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/06/2018
ms.locfileid: "39527370"
---
# <a name="tutorial-improve-app-with-patternany-entity"></a>Руководство. Улучшение приложения с помощью сущности Pattern.any

В этом руководстве используется сущность Pattern.any для улучшения прогнозирования намерений и сущностей.  

> [!div class="checklist"]
* Описано, как и когда использовать сущность Pattern.any
* Создание шаблона, который использует сущность Pattern.any
* Проверка улучшений прогнозирования

[!include[LUIS Free account](../../../includes/cognitive-services-luis-free-key-short.md)]

## <a name="before-you-begin"></a>Перед началом работы
Если у вас нет приложения для управления персоналом из руководства по [ролям шаблона](luis-tutorial-pattern-roles.md), [импортируйте](luis-how-to-start-new-app.md#import-new-app) файл JSON в новое приложение на веб-сайте [LUIS](luis-reference-regions.md#luis-website). Приложение, которое следует импортировать, находится в репозитории GitHub [LUIS-Samples](https://github.com/Microsoft/LUIS-Samples/blob/master/documentation-samples/quickstarts/custom-domain-roles-HumanResources.json).

Чтобы сохранить исходное приложение по управлению персоналом, клонируйте версию приложения на странице [Параметры](luis-how-to-manage-versions.md#clone-a-version) и назовите ее `patt-any`. Клонирование — это отличный способ поэкспериментировать с различными функциями LUIS без влияния на исходную версию. 

## <a name="the-purpose-of-patternany"></a>Назначение сущности Pattern.any
Сущность Pattern.any позволяет найти данные произвольной формы, в которых формулировка сущности затрудняет определение ее окончание из остальной части высказывания. 

Приложение управления персоналом помогает сотрудникам находить формы организаций. Формы были добавлены в статье [Руководство: 3 Добавление сущности регулярного выражения](luis-quickstart-intents-regex-entity.md). В именах форм из этого руководства использовалось регулярное выражение для извлечения имен форм, которые были хорошо отформатированы, например имена форм, выделенные жирным шрифтом в следующей таблице высказываний.

|Фраза|
|--|
|Где находится **HRF-123456**?|
|Кто написал **HRF-123234**?|
|Было ли **HRF-456098** опубликовано на французском языке?|

Тем не менее в каждой из форм присутствует как форматированное имя, используемое в предыдущей таблице, так и такое понятное имя, как `Request relocation from employee new to the company 2018 version 5`. 

Фразы с понятным названием формы выглядят следующим образом.

|Фраза|
|--|
|Где находится **Request relocation from employee new to the company 2018 version 5**?|
|Кто написал **Request relocation from employee new to the company 2018 version 5**?|
|Был ли **Request relocation from employee new to the company 2018 version 5** опубликован во Франции?|

Заголовки переменной длины включают фразы, из-за которых LUIS может неправильно определить окончание сущности. С помощью шаблонной сущности Pattern.any можно указать начало и конец названия формы, что позволит LUIS правильно извлекать ее имя.

**Хотя шаблоны и помогают указать меньше примеров фраз, но если сущности не обнаруживаются, шаблоны не совпадают.**

## <a name="add-example-utterances-to-the-existing-intent-findform"></a>Добавление примера фраз в существующее намерение сущности FindForm 
Удалите предварительно созданную сущность keyPhrase, если ее трудно создать и пометить меткой сущность FormName. 

1. В верхней панели навигации выберите **Сборка**, а затем выберите **Intents** (Намерения) из левой панели навигации.

2. Из списка намерений выберите **FindForm**.

3. Добавьте некоторые примеры фраз.

    |Пример фразы|
    |--|
    |Где находится форма **What to do when a fire breaks out in the Lab** и кто должен подписать ее после прочтения?|
    |Где находится **Request relocation from employee new to the company** на сервере?|
    |Кто создал **Health and wellness requests on the main campus** и какая ее текущая версия?|
    |Я ищу форму с именем **Office move request including physical assets**. |

    Если не используется сущность Pattern.any, LUIS будет трудно понять, где заканчивается название формы. Так происходит из-за множества вариантов имени формы.

## <a name="create-a-patternany-entity"></a>Создание сущности Pattern.any
Сущность Pattern.any извлекает сущности переменной длины. Эта сущность работает только в шаблоне, так как шаблон отмечает начало и окончание сущности. Если ваш шаблон, который включает сущность Pattern.any, извлекает сущности неправильно, используйте [явный список](luis-concept-patterns.md#explicit-lists), чтобы решить эту проблему. 

1. Выберите **Сущности** в меню навигации слева.

2. Выберите **Создать сущность**, введите имя `FormName` и в качестве типа выберите **Pattern.any**. Нажмите кнопку **Готово**. 

    Сущность невозможно пометить в намерении, так как Pattern.any действительна только в шаблоне. 

    Если необходимо, чтобы извлеченные данные включали другие сущности, например, число или datetimeV2, необходимо создать составную сущность, которая включает в себя Pattern.any, а также число и datetimeV2.

## <a name="add-a-pattern-that-uses-the-patternany"></a>Добавление шаблона, который использует сущность Pattern.any

1. Выберите **Шаблоны** в меню навигации слева.

2. Выберите намерение **FindForm**.

3. Введите следующие высказывания шаблона, использующие новую сущность.

    |Высказывания шаблона|
    |--|
    |Где находится форма ["]{FormName}["] и кто должен подписать ее после прочтения[?]|
    |Где находится форма ["]{FormName}["] на сервере[?]|
    |Кто создал ["]{FormName}["] и какая ее текущая версия [?]|
    |Я ищу форму с именем ["]{FormName}["][.]|

    Если необходимо учитывать вариации формы, например, одинарные кавычки вместо двойных кавычек или точка вместо вопросительного знака, тогда для каждого из вариантов требуется создать новый шаблон.

4. Если сущность keyPhrase была удалена, ее необходимо добавить обратно в приложение. 

## <a name="train-the-luis-app"></a>Обучение приложения LUIS

[!include[LUIS How to Train steps](../../../includes/cognitive-services-luis-tutorial-how-to-train.md)]

## <a name="test-the-new-pattern-for-free-form-data-extraction"></a>Проверка извлечения произвольных данных для нового шаблона
1. Выберите **Тестирование** на верхней панели навигации, чтобы открыть панель тестирования. 

2. Введите следующую фразу. 

    `Where is the form Understand your responsibilities as a member of the community and who needs to sign it after I read it?`

3. Выберите **Просмотр** под результатом для просмотра результатов теста для сущности и намерения.

    Сначала обнаруживается сущность `FormName`, затем шаблон, определяющий намерение. Если в результате вашего теста не удалось обнаружить сущности и, следовательно, определить шаблон, необходимо добавить дополнительные примеры высказываний в намерение (не в шаблон).

4. Закройте панель "Тестирование", нажав кнопку **Тестирование** на верхней панели навигации.

## <a name="clean-up-resources"></a>Очистка ресурсов

[!include[LUIS How to clean up resources](../../../includes/cognitive-services-luis-tutorial-how-to-clean-up-resources.md)]

## <a name="next-steps"></a>Дополнительная информация

> [!div class="nextstepaction"]
> [Tutorial: Improve app with pattern roles](luis-tutorial-pattern-roles.md) (Руководство. Улучшение приложения с помощью ролей шаблонов)