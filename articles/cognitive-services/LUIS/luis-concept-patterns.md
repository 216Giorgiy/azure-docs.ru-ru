---
title: Шаблоны, помогающие в прогнозировании
titleSuffix: Language Understanding - Azure Cognitive Services
description: Шаблон обеспечивает более высокую точность при определении намерения без необходимости предоставлять большое число дополнительных фраз.
services: cognitive-services
author: diberry
manager: cgronlun
ms.custom: seodec18
ms.service: cognitive-services
ms.subservice: language-understanding
ms.topic: conceptual
ms.date: 12/10/2018
ms.author: diberry
ms.openlocfilehash: ed7f50d51b46b9e6204522751fdc1a1e996442f2
ms.sourcegitcommit: 95822822bfe8da01ffb061fe229fbcc3ef7c2c19
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/29/2019
ms.locfileid: "55207587"
---
# <a name="patterns-improve-prediction-accuracy"></a>Шаблоны повышают точность прогнозирования
Шаблоны предназначены для повышения точности, когда несколько фраз очень похожи.  Шаблон обеспечивает более высокую точность при определении намерения без необходимости предоставлять большое число дополнительных фраз. 

## <a name="patterns-solve-low-intent-confidence"></a>Шаблоны устраняют низкую точность намерения
Рассмотрите приложение Human Resources, в котором сообщается об организационной структуре в отношении сотрудника. LUIS возвращает задействованных сотрудников на основе имени и связей сотрудника. Рассмотрим корпоративные связи сотрудника по имени Том. У него есть руководитель по имени Алиса и группа подчиненных с именами Майкл, Ребекка и Карл.

![Изображение схемы организации](./media/luis-concept-patterns/org-chart.png)

|Высказывания|Прогнозирование намерения|Показатель намерения|
|--|--|--|
|Кто подчиненный Тома?|GetOrgChart|.30|
|Кто подчиненный Тома?|GetOrgChart|.30|

Если приложение имеет от 10 до 20 фраз с разной длиной предложения, другим порядком слов и даже разными словами (синонимы "подчиненные", "управлять", "отчет"), LUIS может вернуть низкий показатель точности. Чтобы помочь LUIS понять важность порядка слов, создайте шаблон. 

Шаблоны помогают в таких ситуациях: 

* Когда показатель намерения низок.
* Когда правильное намерение не имеет самый высокий результат, но очень приближено к нему. 

## <a name="patterns-are-not-a-guarantee-of-intent"></a>Шаблоны не гарантируют прогнозирование намерения
Шаблоны используют различные технологии прогнозирования. Настройка намерения для примера фразы в шаблоне не является гарантией прогноза намерения, но является сильным сигналом. 

## <a name="patterns-do-not-improve-entity-detection"></a>Шаблоны не улучшают обнаружение сущности
Хотя шаблонам требуются сущности, шаблоны не помогают в их обнаружении. Шаблон предназначен только для помощи в прогнозировании намерений и ролей.  

Если свернуть несколько фраз в один шаблон, точность прогноза для сущности не повысится. Чтобы срабатывали простые сущности, нужно добавлять фразы или использовать сущности списка. Иначе шаблон не будет работать.

## <a name="patterns-use-entity-roles"></a>Шаблоны используют роли сущностей
Если две или более сущностей в шаблоне связаны контекстом, шаблоны используют [роли](luis-concept-roles.md) сущностей для извлечения контекстно-зависимой информации о сущностях. Эта возможность эквивалентна дочерним элементам иерархической сущности, но она доступна **только** в шаблонах. 

## <a name="prediction-scores-with-and-without-patterns"></a>Прогнозирование оценок с шаблонами и без них
При достаточном количестве примеров фраз LUIS может повысить точность прогнозирования без шаблонов. Шаблоны увеличивают показатель точности, не требуя предоставления большого количества фраз.  

## <a name="pattern-matching"></a>Сопоставление шаблонов
Шаблон сопоставляется на основе обнаружения сущностей в шаблоне, а затем проверки остальной части слов и порядка слов шаблона. Для сопоставления шаблона требуются сущности. Шаблон применяется на уровне маркеров, а не на уровне символов. 

## <a name="pattern-syntax"></a>Синтаксис шаблона
Синтаксис шаблона — это шаблон фразы. Шаблон должен содержать слова и сущности, к которым нужно найти совпадения, а также слова и знаки препинания, которые следует игнорировать. **Это не регулярное выражение.** 

Сущности в шаблонах заключены в фигурные скобки (`{}`). Шаблоны могут включать сущности и сущности с ролями. Pattern.any — это сущность, используемая только в шаблонах. Синтаксис разъясняется в следующих разделах.

### <a name="syntax-to-add-an-entity-to-a-pattern-template"></a>Синтаксис, предназначенный для добавления сущности в шаблон
Чтобы добавить сущность в шаблон, заключите имя сущности в фигурные скобки, например `Who does {Employee} manage?`. 

|Шаблон с сущностью|
|--|
|`Who does {Employee} manage?`|

### <a name="syntax-to-add-an-entity-and-role-to-a-pattern-template"></a>Синтаксис, предназначенный для добавления сущности и роли в шаблон
Роль сущности обозначается как `{entity:role}`: имя сущности, за которым следует двоеточие, а затем имя роли. Чтобы добавить сущность с ролью в шаблон, заключите имя сущности и имя роли в фигурные скобки, например `Book a ticket from {Location:Origin} to {Location:Destination}`. 

|Шаблон с ролями сущности|
|--|
|`Book a ticket from {Location:Origin} to {Location:Destination}`|

### <a name="syntax-to-add-a-patternany-to-pattern-template"></a>Синтаксис, предназначенный для добавления сущности Pattern.any в шаблон
Сущность Pattern.any позволяет добавлять сущность переменной длины в шаблон. Если формат шаблона соблюдается, Pattern.any может быть любой длины. 

Чтобы добавить сущность **Pattern.any** в шаблон, заключите сущность Pattern.any в фигурные скобки, например `How much does {Booktitle} cost and what format is it available in?`.  

|Шаблон с сущностью Pattern.any|
|--|
|`How much does {Booktitle} cost and what format is it available in?`|

|Наименования книг в шаблоне|
|--|
|Сколько **стоит эта книга** и в каком формате она доступна?|
|Сколько стоит **запрос** и в каком формате она доступна?|
|Сколько стоит **Загадочное ночное убийство собаки** и в каком формате она доступна?| 

В этих примерах контекстно-зависимые слова в названии книги не путают LUIS. LUIS знает, где заканчивается название книги, так как оно находится в шаблоне и помечено сущностью Pattern.any.

### <a name="explicit-lists"></a>Явные списки
Если шаблон содержит Pattern.any, а синтаксис шаблона допускает возможность некорректного извлечения сущности на основе фразы, создайте [явный список](https://westus.dev.cognitive.microsoft.com/docs/services/5890b47c39e2bb17b84a55ff/operations/5ade550bd5b81c209ce2e5a8) с помощью API авторизации, чтобы разрешить исключение. 

Предположим, имеется шаблон, содержащий и дополнительный синтаксис `[]` и синтаксис сущности `{}`, которые объединены так, что данные будут извлекаться некорректно.

Рассмотрим шаблон "[найти] сообщение о {тема} [от {человек}]". В следующей фразе сущности **тема** и **человек** извлекаются правильно и неправильно:

|Фраза|Сущность|Правильное извлечение|
|--|--|:--:|
|сообщение о собаках от Глеба|тема=собаки<br>человек=Глеб|✔|
|сообщение о мужчине из Ла-Манча|тема=мужчина<br>человек=Ла-Манч|X|

В предыдущей таблице в фразе `email about the man from La Mancha` темой должно быть`the man from La Mancha` (название книги), но так как тема включает необязательное слово `from`, заголовок спрогнозирован неправильно. 

Чтобы исправить это исключение в шаблоне, добавьте`the man from la mancha` как сопоставление явного списка для сущности {тема}, используя [API авторизации для явного списка](https://westus.dev.cognitive.microsoft.com/docs/services/5890b47c39e2bb17b84a55ff/operations/5ade550bd5b81c209ce2e5a8).

### <a name="syntax-to-mark-optional-text-in-a-template-utterance"></a>Синтаксис, предназначенный для отметки дополнительного текста в шаблоне фразы
Отметьте необязательный текст во фразе, используя синтаксис регулярного выражения с квадратными скобками `[]`. В необязательном тексте может быть не более двух экземпляров открывающих и закрывающих квадратных скобок.

|Шаблон с необязательным текстом|
|--|
|`[find] email about {subject} [from {person}]`|

Знаки препинания, такие как `.`, `!` и `?`, можно игнорировать с помощью квадратных скобок. Чтобы пропустить эти знаки, каждый знак должен находиться в отдельном шаблоне. Дополнительный синтаксис в настоящее время не поддерживает игнорирование элемента в списке из нескольких элементов.

## <a name="patterns-only"></a>Только шаблоны
LUIS позволяет использовать приложение без каких-либо примеров фраз в намерениях. Это допускается только в том случае, если используются шаблоны. В каждом шаблоне должна быть по крайней мере одна сущность. Для приложения только для шаблона шаблон не должен содержать сущности, обученные с помощью машинного обучения, так как им требуются примеры фраз. 

## <a name="best-practices"></a>Рекомендации
Ознакомьтесь с [рекомендациями](luis-concept-best-practices.md).

## <a name="next-steps"></a>Дополнительная информация

> [!div class="nextstepaction"]
> Узнайте, как реализовать шаблоны из [этого руководства](luis-tutorial-pattern.md).
