---
title: Создание классификатора с помощью Пользовательской службы визуального распознавания в Azure Cognitive Services | Документация Майкрософт
description: Узнайте, как с помощью Пользовательской службы визуального распознавания создать классификатор, который может распознавать объекты на фотографиях.
services: cognitive-services
author: anrothMSFT
manager: corncar
ms.service: cognitive-services
ms.component: custom-vision
ms.topic: article
ms.date: 05/02/2018
ms.author: anroth
ms.openlocfilehash: 6dc271c13f53a445c7d1101f5264d890208bd03c
ms.sourcegitcommit: 95d9a6acf29405a533db943b1688612980374272
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/23/2018
ms.locfileid: "35381029"
---
# <a name="how-to-build-a-classifier-with-custom-vision"></a>Как создать классификатор с помощью Пользовательской службы визуального распознавания

Перед применением Пользовательской службы визуального распознавания нужно создать классификатор. Из этого документа вы узнаете, как создать классификатор через веб-браузер.

## <a name="prerequisites"></a>предварительным требованиям

Чтобы создать классификатор, сначала нужно получить:

- Действительную [учетную запись Майкрософт](https://account.microsoft.com/account) или идентификатор OrgID в Azure Active Directory (рабочая или учебная учетная запись), чтобы войти в customvision.ai и приступить к работе.

    > [!IMPORTANT] 
    > В настоящее время поддержка входа с использованием OrgID для пользователей Azure Active Directory (Azure AD) из [национальных облаков](https://www.microsoft.com/en-us/trustcenter/cloudservices/nationalcloud) не поддерживается.

- Серию изображений для обучения классификатора (минимальное количество — 30 изображений для каждого тега).

- Несколько изображений для проверки классификатора после обучения.

- (Необязательно.) Подписку Azure, связанную с вашей учетной записью Майкрософт или OrgID. Если у вас еще нет подписки Azure, вы можете создать [бесплатную учетную запись](https://azure.microsoft.com/free/?WT.mc_id=A261C142F), прежде чем начинать работу.

    > [!IMPORTANT]
    > Без подписки Azure вы сможете создавать только проекты в __пробной версии с ограниченным временем действия__. Если у вас есть подписка Azure, вам будет предложено создать ресурсы "Обучение" и "Прогнозирование" Пользовательской службы визуального распознавания на портале [Azure](https://portal.azure.com/?microsoft_azure_marketplace_ItemHideKey=microsoft_azure_cognitiveservices_customvision#create/Microsoft.CognitiveServicesCustomVision) на протяжении создания проекта.   

## <a name="create-a-new-project"></a>Создание нового проекта

Чтобы создать проект, выполните следующие действия:

1. В веб-браузере перейдите на веб-страницу [Пользовательской службы визуального распознавания](https://customvision.ai). Щелкните __Вход__ для начала использования службы.

    ![Изображение страницы входа](./media/getting-started-build-a-classifier/custom-vision-web-ui.png)

    > [!NOTE]
    > После входа в Пользовательскую службу визуального распознавания на экране появится список проектов. Проекты связаны с ресурсом Azure, кроме двух проектов для тестирования пробной версии с ограниченным временем действия. Если вы являетесь пользователем Azure, вы увидите все проекты, связанные с доступными [ресурсами Azure](https://docs.microsoft.com/azure/guides/developer/azure-developer-guide#grant-access-to-resources). 

2. Для создания первого проекта щелкните **Новый проект**. Для вашего первого проекта вас попросят согласиться с условиями обслуживания. Установите флажок, а затем нажмите кнопку **Принимаю**. Откроется диалоговое окно **Новый проект**.

    ![В диалоговом окне нового проекта есть поля для имени, описания и доменов.](./media/getting-started-build-a-classifier/new-project.png)

3. Введите имя и описание проекта. Затем выберите один из доступных доменов. Каждый домен оптимизирует классификатор для определенных типов изображений, как описано в следующей таблице:

    |Домен|Назначение|
    |---|---|
    |__Общие вопросы__| Рассчитан на самые разные задачи классификации изображений. Если не подходит ни один из других доменов или вы не уверены, какой домен выбрать, выбирайте Generic. |
    |__Food__|Рассчитан для фотографий блюд, которые будут отображаться в меню ресторана. Если вы хотите классифицировать фотографии отдельных фруктов или овощей, используйте домен Food.|
    |__Landmarks__|Рассчитан на распознавание естественных и искусственных ориентиров. Этот домен работает лучше всего, когда ориентир четко виден на фотографии. Этот домен работает, даже если ориентир немного заслоняют люди.|
    |__Retail__|Рассчитан на изображения из каталогов товаров и торговых веб-сайтов. Если требуется высокая точность при распознавании таких объектов, как платья, брюки и рубашки, следует использовать этот домен.|
    |__Adult__|Рассчитан на определение материалов для взрослых. Например, если вы хотите блокировать изображения людей в купальниках, этот домен дает возможность создать соответствующий пользовательский классификатор.|
    |__Домены Compact__| Оптимизированы для ограничений классификации в режиме реального времени на мобильных устройствах. Модели, созданные доменами Compact, можно экспортировать для локального запуска.|

    Домены можно изменять.

4. Выберите группу ресурсов. В раскрывающемся списке группы ресурсов отображаются все группы ресурсов Azure, которые используют ресурсы Пользовательской службы визуального распознавания. Вы также можете создать __пробную версию с ограниченным временем действия__. Запись пробной версии с ограниченным временем действия — это единственная группа ресурсов, которую может выбрать пользователь, не являющийся пользователем Azure.

    Чтобы создать проект, щелкните __Создание проекта__.

## <a name="upload-and-tag-images"></a>Отправка и снабжение тегами изображений

1. Чтобы добавить изображения в классификатор, нажмите кнопку __Add images__ (Добавить изображения), а затем выберите __Обзор локальных файлов__. Выберите __Открыть__, чтобы переместить теги.

    > [!TIP]
    > После выбора изображений необходимо пометить их тегом. Тег применяется к группе изображений, которые вы выбрали для отправки, поэтому проще отправлять изображения по тегам, которые вы планируете использовать. Вы также можете изменить тег для выбранных изображений, после того как они были помечены тегами и отправлены.

    > [!TIP]
    > Отправляйте изображения с разным ракурсом камеры, освещением, фоном, типами, стилями, группами, размерами и т. д. Используйте различные типы фото, чтобы ваш классификатор не был односторонним и мог обобщить их.

    Пользовательская служба визуального распознавания принимает изображения для обучения в форматах BMP, PNG и JPG размером до 6 МБ. (Изображения прогнозирования могут быть размером до 4 МБ.) Рекомендуется, чтобы самый короткий край изображения имел размер 256 пикселей. Все изображения, размер которых меньше указанного, масштабируются Пользовательской службой визуального распознавания.

    ![Визуальный элемент для добавления изображений отображается в левом верхнем углу и в виде кнопки по центру снизу.](./media/getting-started-build-a-classifier/add-images01.png)

    ![Кнопка обзора локальных файлов отображается рядом, по центру снизу.](./media/getting-started-build-a-classifier/add-images02.png)

    >[!NOTE] 
    > REST API можно использовать для загрузки изображений для обучения по URL-адресу.

2. Чтобы задать тег, введите текст в поле__My Tags__ (Мои теги), а затем нажмите кнопку __+__. Чтобы отправить изображения и пометить их тегом, нажмите кнопку __Upload [number] files__ (Отправка файлов [число]). Можно добавить несколько тегов для изображений. 

    > [!NOTE]
    > Время отправки зависит от числа и размера выбранных изображений.

    ![Изображение тега и страницы передачи](./media/getting-started-build-a-classifier/add-images03.png)

3. После отправки изображений выберите __Готово__.

    ![Индикатор выполнения показывает все выполненные задачи.](./media/getting-started-build-a-classifier/add-images04.png)

4. Чтобы передать другой набор изображений, вернитесь к шагу 1. Например, если требуется различать собак и пони, отправьте и пометьте тегом изображения с пони.

## <a name="train-and-evaluate-the-classifier"></a>Обучение и анализ классификатора

Для обучения классификатора нажмите кнопку **Train** (Обучение).

![Кнопка обучения находится в правой верхней части окна браузера.](./media/getting-started-build-a-classifier/train01.png)

Обучение классификатора займет несколько минут. В течение этого времени отображается информация о процессе обучения.

![Кнопка обучения находится в правой верхней части окна браузера.](./media/getting-started-build-a-classifier/train02.png)

После обучения отобразится окно __Производительность__. Индикаторы точности и отзыва показывают, насколько хорош ваш классификатор, исходя из автоматического тестирования. Пользовательская служба визуального распознавания использует изображения, отправленные для обучения, для расчета этих значений, используя процесс, называемый [перекрестная проверка k сверток](https://en.wikipedia.org/wiki/Cross-validation_(statistics)).

![Результаты обучения показывают общую точность и отзыв, а также точность и отзыв для каждого тега в классификаторе.](./media/getting-started-build-a-classifier/train03.png)

> [!NOTE] 
> Каждый раз при выборе кнопки **Train** (Обучение) создается итерация классификатора. Можно просмотреть все старые итерации на вкладке **Производительность**, и вы можете удалить все, что может быть устаревшим. При удалении итерации удаляются изображения, которые уникальным образом связаны с ней.

Классификатор использует все изображения для создания модели, которая идентифицирует каждый тег. Чтобы проверить качество модели, классификатор тестирует каждое изображение в модели, чтобы увидеть, что она находит.

Отображаются качества результатов классификатора.

|Термин|Определение|
|---|---|
|__Точность__|Какова вероятность правильного определения изображения классификатором при классификации? Из всех изображений, на основе которых выполнялось обучение классификатора (собаки и пони), какой процент модель определила правильно? 99 правильных тегов из 100 изображений дают точность 99 %.|
|__Отзыв__|Из всех изображений какое количество классификатор определил правильно? Отзыв 100 % означает, что если на изображениях, которые использовались для обучения классификатора, было 38 изображений собак, то классификатор обнаружил их всех.|

## <a name="next-steps"></a>Дополнительная информация

[Test and retrain a model with Custom Vision Service](test-your-model.md) (Тестирование и повторное обучение модели с помощью Пользовательской службы визуального распознавания)

