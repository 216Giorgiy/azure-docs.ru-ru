<properties 
	pageTitle="Преобразование XML-документов" 
	description="Узнайте, как преобразовать XML-документы из одной схемы в другую." 
	authors="anuragdalmia" 
	manager="dwrede" 
	editor="" 
	services="app-service\logic" 
	documentationCenter=""/>

<tags
	ms.service="app-service-logic"
	ms.workload="integration"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="03/23/2015"
	ms.author="anuragdalmia"/>

#Преобразование XML-документов


## Общие сведения о приложении API преобразования BizTalk
Говоря простыми словами, приложение API преобразования BizTalk преобразует данные из одного формата в другой. Например, вы можете взять адреса для поставки и выставления счетов из заказа на покупку и вставить их в документ счета. Или, например, у вас есть входящее сообщение, содержащее текущую дату в формате *YearMonthDay*. Вы хотите преобразовать эту дату в формат *MonthDayYear*. 

Это можно сделать с помощью приложения API преобразования в службе приложений Microsoft Azure. Преобразование или сопоставление состоит из исходной схемы XML (входных данных) и целевой схемы XML (выходных данных). Вы можете использовать разные встроенные функции, помогающие работать с данными и управлять ими, включая действия со строками, условные назначения, арифметические выражения, модули форматирования даты и времени и даже циклические конструкции. 

Сопоставления создаются в Visual Studio с помощью [пакета SDK служб BizTalk Microsoft Azure](http://www.microsoft.com/download/details.aspx?id=39087). Закончив создание и тестирование сопоставления, вы отправляете его (TRFM-файл) в приложение API преобразования BizTalk.

Дополнительные функции включают следующее.

- Преобразование, создаваемое в сопоставлении, может быть простым, таким как копирование имени и адреса из одного документа в другой. Но вы также можете создавать и более сложные преобразования с помощью встроенных операций сопоставления.
- Многие операции или функции сопоставления легко доступны, включая строки, функции даты-времени и пр.
- Можно выполнять прямое копирование данных между схемами. В редакторе карт BizTalk это так же просто, как нарисовать линию, соединяющую элементы в исходной схеме с соответствующими элементами в целевой схеме.
- При создании сопоставления вы видите графическое представление сопоставления, включая все созданные вами отношения и связи.
- Используйте функцию **тестирования сопоставления**, чтобы добавить пример XML-сообщения. Тогда одним щелчком вы сможете протестировать созданное сопоставление и увидеть полученный результат.
- Отправляйте существующие сопоставления служб BizTalk Azure (TRFM-файлы) и используйте все преимущества приложения API преобразования.
- Включена поддержка формата XML.


## Создание нового приложения API преобразования BizTalk

1.	Войдите на портал Azure и перейдите на начальную панель (домашнюю страницу).

2.	Последовательно выберите **Создать** > **Мобильные и веб-приложения** > **Azure Marketplace** > **Приложения API**:

	   ![][1]
 
	Можно также выбрать **Marketplace** на начальной панели, а затем выбрать **Приложения API** в доступном списке:

	   ![][2]
 
3.	Найдите преобразование BizTalk, введя **Преобразование** и выбрав результат поиска **Служба преобразования BizTalk**:

	   ![][4] 
 
4.	В колонке **Служба преобразования BizTalk** нажмите кнопку **Создать**:

       ![][5]
 
5.	В колонке **нового приложения API** введите следующие сведения и нажмите кнопку **Создать**.

	- Имя - введите имя для приложения API преобразования. 
	- План обслуживания приложения - выберите или создайте новый план обслуживания приложения. 
	- Ценовая категория - выберите ценовую категорию для этого приложения. 
	- Группа ресурсов - выберите или создайте группу ресурсов, в которой должно находиться это приложение. 
	- Расположение - выберите географическое расположение, где планируется развернуть приложение.
	
	   ![][6]

6.	Нажмите кнопку **Создать**. В течение нескольких минут ваше приложение API преобразования BizTalk будет создано. 


## Загрузка схем из приложений API соединителей
Вы можете загрузить схемы XML для соединителей, таких как SQL, SAP и SharePoint, на странице сводки приложения API. Например, если вам нужно загрузить схемы XML для конкретного приложения API соединителя SAP, найдите это приложение API и откройте страницу сводки. Нажмите кнопку **Загрузить схемы**, и на ваш компьютер будет загружен ZIP-файл со всеми схемами, соответствующими действиям SAP. Вы можете использовать эти схемы для разработки сопоставления (TRFM-файла) в Visual Studio.

   ![][14]


## Создание и добавление сопоставления
Преобразования или сопоставления создаются в Visual Studio с помощью [пакета SDK служб BizTalk Microsoft Azure](http://www.microsoft.com/download/details.aspx?id=39087), который можно загрузить бесплатно. 

Дополнительные сведения по созданию сопоставления см. в статье [Создание сопоставления в Visual Studio](http://aka.ms/createamapinvs). После того как сопоставление будет создано и подготовлено для рабочей среды, вы можете добавить это сопоставление (TRFM-файл) в приложение API преобразования BizTalk, созданное на портале управления Azure. 

Если сопоставление изменяется после отправки, вы можете отправить обновленное сопоставление, и оно заменит существующее сопоставление в приложении API преобразования.

1.	Нажмите кнопку **Обзор** на портале управления Azure (с левой стороны экрана) и выберите пункт **Приложения API**. Если пункт **Приложения API** не отображается, нажмите **Все** и выберите **Приложения API** в имеющемся списке:

	![][7]

2.	Отображается список всех **приложений API**, созданных в вашей подписке Azure:

	![][8]

3.	Выберите приложение API преобразования BizTalk, созданное в предыдущем разделе.

4.	Откроется колонка настройки для этого приложения API. В разделе "Компоненты" вы можете видеть элемент **Сопоставления**:

	![][9]

5.	Щелкните элемент **Сопоставления**, чтобы открыть новую колонку со списком сопоставлений.

6.	Нажмите значок **Добавить сопоставление** вверху, чтобы открыть колонку **Добавление сопоставления**:

	![][10]

7.	Щелкните значок "Файл" и найдите файл сопоставления (TRFM-файл) на локальном компьютере.

8.  Нажмите кнопку **ОК**, и новое сопоставление будет создано. Оно отображается в списке сопоставлений.


## Использование приложения API преобразования BizTalk в приложении логики
После создания и тестирования сопоставления оно готово к использованию. Пользователи могут создать новое приложение логики (**Создать** > **Приложения логики**).

1. В приложении логики преобразование BizTalk можно найти в коллекции справа. Выберите в этой коллекции **службу преобразования BizTalk**. Преобразование добавляется в поток:

	![][11]

2. Выберите действие **Преобразование**. Отображаются входные параметры:

	![][12]

3. Чтобы завершить настройку действия **Преобразование**, введите следующие параметры.
		 
	- Входные XML-данные
		- Введите допустимое XML-содержимое, соответствующее исходной схеме сопоставления в приложении API преобразования. Это могут быть выходные данные предыдущего действия в приложении логики, такого как "Вызов RFC - SAP" или "Вставка в таблицу - SQL".
		
	- Имя сопоставления (необязательно)
		- Введите допустимое имя сопоставления, которое уже отправлено в приложение API преобразования. Если ни одно сопоставление не введено, то сопоставление выбирается автоматически на основе исходной схемы, которой соответствуют входные XML-данные.

	![][13]

4. Результат действия "Выходные XML-данные" может использоваться в последующих действиях в приложении логики.

<!--Image references-->
[1]: ./media/app-service-logic-transform-xml-documents/Create_Everything.png
[2]: ./media/app-service-logic-transform-xml-documents/Create_Marketplace.png
[4]: ./media/app-service-logic-transform-xml-documents/Search_TransformAPIApp.png
[5]: ./media/app-service-logic-transform-xml-documents/Transform_APIApp_Landing_Page.png
[6]: ./media/app-service-logic-transform-xml-documents/New_TransformAPIApp_Blade.png
[7]: ./media/app-service-logic-transform-xml-documents/Browse_APIApps.png
[8]: ./media/app-service-logic-transform-xml-documents/Select_APIApp_List.png
[9]: ./media/app-service-logic-transform-xml-documents/Configure_Transform_APIApp.png
[10]: ./media/app-service-logic-transform-xml-documents/Add_Map.png
[11]: ./media/app-service-logic-transform-xml-documents/Transform_action_flow.png
[12]: ./media/app-service-logic-transform-xml-documents/Transform_Inputs.png
[13]: ./media/app-service-logic-transform-xml-documents/Transform_configured.png
[14]: ./media/app-service-logic-transform-xml-documents/Download_Schemas.png




<!--HONumber=49-->