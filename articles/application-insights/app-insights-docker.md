<properties 
	pageTitle="Мониторинг узла Docker в Application Insights" 
	description="Счетчики производительности, события и исключения узла Docker могут отображаться в Application Insights вместе с данными телеметрии из контейнерных приложений." 
	services="application-insights" 
    documentationCenter=""
	authors="alancameronwills" 
	manager="douge"/>

<tags 
	ms.service="application-insights" 
	ms.workload="tbd" 
	ms.tgt_pltfrm="ibiza" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="11/20/2015" 
	ms.author="awills"/>
 
# Мониторинг узла Docker в Application Insights

В Application Insights можно просматривать счетчики производительности и отчеты об исключениях из узла [Docker](https://www.docker.com/) в виде диаграммы. Установите приложение [Application Insights](app-insights-overview.md) в контейнер в узле. Оно будет отображать общие счетчики производительности для этого узла, а также для других образов.

С помощью Docker ваши приложения распространяются в упрощенных контейнерах со всеми зависимостями. Их можно запустить на любом хост-компьютере с модулем Docker.

Application Insights может отслеживать производительность и активность контейнеров и узла Docker.

![пример](./media/app-insights-docker/00.png)

(Если вы владелец источника любых приложений в контейнерах, [установите пакет SDK Application Insights](app-insights-java-live) на каждом из них, чтобы включить ведение подробного журнала производительности и отслеживание использования.)

## Создание ресурса Application Insights

Ресурс Application Insights — это место, где вы можете просматривать и анализировать полученные данные. Он размещается на портале Microsoft Azure.

1.	Вам понадобится подписка [Microsoft Azure](https://azure.com). (Существует возможность оплаты по мере использования, когда вы не платите за неиспользуемые службы. Кроме того, вы можете использовать приложение Application Insights уровня «Бесплатный».)
2.	Войдите на [портал Azure](https://portal.azure.com) и создайте новый ресурс Application Insights. Выберите «Другое» в качестве типа приложения. (Этот параметр влияет только на начальный выбор отображаемых диаграмм; он не является особо важным.)

    ![пример](./media/app-insights-docker/01-new.png)
3.	Вы всегда можете перейти к новому ресурсу мониторинга с помощью элементов управления «Обзор» и «Все». Но, возможно, вы хотите закрепить плитку приложения на главной странице панели мониторинга, которая отображается при каждом переходе на портал.

    Откройте новый ресурс.
4.	Добавьте плитку Docker. Выберите **Изменить**, **Добавить плитки**, а затем перетащите плитку Docker из коллекции. Сначала будут отображены пустые диаграммы.

    ![пример](./media/app-insights-docker/03.png)

5. В раскрывающемся списке **Основные компоненты** скопируйте ключ инструментирования. Этот ключ указывает пакету SDK, куда отправлять данные телеметрии.

Не закрывайте это окно браузера: скоро вы будете просматривать в нем данные телеметрии.


## Установка Application Insights в узел
 
Теперь, когда вы создали ресурс для отображения данных телеметрии, можно настроить приложение, которое будет собирать и отправлять их. 1. Войдите на узел Docker. 2. Найдите образ Microsoft Application Insights в концентраторе Docker и извлеките его в узел. 3. Задайте ключ инструментирования:

    docker run -v /var/run/docker.sock:/docker.sock -d microsoft/applicationinsights ikey=000000-1111-2222-3333-444444444

4. Запустите образ.

## Просмотр телеметрии

Вернитесь к ресурсу Application Insights на портале Azure.

Вскоре вы увидите данные, поступающие из контейнера Docker, особенно при наличии других контейнеров, работающих в модуле Docker.

Щелкните любую диаграмму, чтобы увидеть подробные данные.

Ниже приведены примеры представлений данных.

### Счетчики производительности узла, активность образа


![пример](./media/app-insights-docker/10.png)

Щелкните имя любого образа, чтобы получить подробные данные. Чтобы настроить представление, щелкните любую диаграмму, заголовок сетки или нажмите кнопку «Добавить диаграмму».

[Дополнительные сведения об обозревателе метрик](app-insights-metrics-explorer.md).

## Отдельные события


![пример](./media/app-insights-docker/12.png)

Для анализа отдельных событий щелкните [Поиск](app-insights-diagnostic-search.md). Найдите и отфильтруйте нужные вам события. Щелкните любое событие, чтобы просмотреть подробные данные.
 
## Исключения по имени контейнера
 

![пример](./media/app-insights-docker/14.png)



## Вопросы и ответы

*Какие возможности Application Insights отсутствуют в Docker?*

* Подробные показатели счетчиков производительности по контейнерам и образам.
* Интегрированные данные контейнера и приложения на одной панели мониторинга.
* [Экспорт данных телеметрии](app-insights-export-telemetry.md) в базу данных, Power BI или другую панель мониторинга для дальнейшего анализа.

*Как получить данные телеметрии из самого приложения?*

* Установите пакет SDK Application Insights в приложении. Узнайте, как это сделать в [веб-приложениях Java](app-insights-java-get-started.md) и [веб-приложениях Windows](app-insights-asp-net.md).

<!---HONumber=AcomDC_1125_2015-->