<properties 
	pageTitle="Использование аналитики — эффективного инструмента поиска Application Insights | Microsoft Azure" 
	description="Использование аналитики — эффективного инструмента поиска по журналу диагностики Application Insights. " 
	services="application-insights" 
    documentationCenter=""
	authors="danhadari" 
	manager="douge"/>

<tags 
	ms.service="application-insights" 
	ms.workload="tbd" 
	ms.tgt_pltfrm="ibiza" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="07/15/2016" 
	ms.author="danha"/>


# Использование аналитики в Application Insights


[Аналитика](app-insights-analytics.md) — это эффективный инструмент поиска [Application Insights](app-insights-overview.md). На этих страницах описан язык запросов аналитики приложений.


## Открытие аналитики

В домашнем ресурсе вашего приложения в Application Insights щелкните "Аналитика".

![На сайте portal.azure.com откройте ресурс Application Insights и щелкните "Аналитика".](./media/app-insights-analytics-using/001.png)

Встроенный учебник подаст вам некоторые идеи о возможностях.

Смотрите [исчерпывающий обзор здесь](app-insights-analytics-tour.md).

## Запрос данных телеметрии

### Напишите запрос

![](./media/app-insights-analytics-using/150.png)

Начните с имен таблиц, перечисленных в левой части окна (либо с операторов [range](app-insights-analytics-reference.md#range-operator) или [union](app-insights-analytics-reference.md#union-operator)). Используйте `|` для создания конвейера [операторов](app-insights-analytics-reference.md#queries-and-operators). IntelliSense подскажет вам операторы и некоторые элементы выражений, которые можно использовать.

Сведения см. в [обзоре языка аналитики](app-insights-analytics-tour.md) и [справочнике по языку](app-insights-analytics-reference.md).

### Выполнение запроса

![Выполнение запроса](./media/app-insights-analytics-using/130.png)

1. В запросе можно использовать только однократные разрывы строк.
2. Поместите курсор внутри или в конце запроса, который необходимо выполнить.
3. Щелкните "Начать", чтобы выполнить запрос.
4. Не помещайте в запрос пустые строки. На одной вкладке запроса можно хранить несколько отдельных запросов, разделив их пустыми строками. Выполнится только тот запрос, в котором расположен курсор.

### Сохранение запроса

![Сохранение запроса](./media/app-insights-analytics-using/140.png)

1. Сохраните файл текущего запроса.
2. Откройте сохраненный файл запроса.
3. Создайте новый файл запроса.


## Просмотр подробных сведений

Чтобы просмотреть полный список свойств какой-либо строки, разверните ее в результатах. Можно также развернуть любое свойство, которое представляет собой структурированное значение, например пользовательские измерения или листинг стеков в исключении.

![Развертывание строки](./media/app-insights-analytics-using/070.png)

 

## Упорядочение результатов

Результаты, возвращаемые из запроса, можно сортировать, фильтровать, разбивать на страницы и группировать.

> [AZURE.NOTE] При сортировке, группировании и фильтрации в браузере запрос не выполняется повторно. При этом только переупорядочиваются результаты, возвращенные последним запросом.
> 
> Чтобы выполнить эти задачи на сервере до возвращения результатов, напишите запрос с операторами [sort](app-insights-analytics-reference.md#sort-operator), [summarize](app-insights-analytics-reference.md#summarize-operator) и [where](app-insights-analytics-reference.md#where-operator).

Выберите столбцы, которые необходимо просмотреть. Чтобы переупорядочить столбцы, необходимо перетащить их заголовки, а чтобы изменить их размер — перетащить их границы.

![Упорядочивание столбцов](./media/app-insights-analytics-using/030.png)

### Сортировка и фильтрация элементов

Чтобы отсортировать результаты, щелкните заголовок столбца. Щелкните еще раз, чтобы отсортировать в другом направлении, и третий раз, чтобы восстановить исходный порядок, возвращенный запросом.

С помощью значка фильтра можно сузить область поиска.

![Сортировка и фильтрация столбцов](./media/app-insights-analytics-using/040.png)



### Группирование элементов

Чтобы отсортировать по нескольким столбцам, можно использовать группирование. Сначала активируйте эту функцию, а затем перетащите заголовки столбцов в область над таблицей.

![Группа](./media/app-insights-analytics-using/060.png)



### Если некоторые результаты отсутствуют

В результатах, возвращаемых с портала, есть ограничение в 10 тысяч строк. Если вы превысите его, появится предупреждение. В этом случае при сортировке результатов в таблице не всегда будут представлены все первые или последние результаты.

Рекомендуется избегать превышения ограничения. Используйте такие операторы:

* [where timestamp > ago(3d)](app-insights-analytics-reference.md#where-operator);
* [top 100 by timestamp](app-insights-analytics-reference.md#top-operator);
* [take 100](app-insights-analytics-reference.md#take-operator);
* [summarize](app-insights-analytics-reference.md#summarize-operator)



## Схемы

Выберите тип схемы, которая вам нужна:

![](./media/app-insights-analytics-using/230.png)

Если у вас несколько столбцов правильных типов, можно выбрать оси X и Y, а также столбец измерений, чтобы разделить по ним результаты.

По умолчанию результаты изначально отображаются в виде таблицы, а схему вы выбираете вручную. Можно также использовать [директиву render](app-insights-analytics-reference.md#render-directive) в конце запроса, чтобы выбрать схему.

## Экспорт в Excel

После выполнения запроса можно скачать CSV-файл. Щелкните **Экспорт**, а затем выберите Excel.

## Экспорт в Power BI

1. Поместите курсор в запрос, щелкните **Экспорт** и выберите Power BI.

    ![](./media/app-insights-analytics-using/240.png)

    При этом скачивается файл скрипта M.

3. Скопируйте скрипт на языке M в расширенный редактор запросов Power BI Desktop.
 * Откройте экспортированный файл.
 * В Power BI Desktop выберите **"Получить данные", "Пустой запрос", "Расширенный редактор"** и вставьте этот скрипт на языке M.

    ![](./media/app-insights-analytics-using/250.png)

4. При необходимости измените учетные данные. Теперь можно строить отчет.

    ![](./media/app-insights-analytics-using/260.png)




[AZURE.INCLUDE [app-insights-analytics-footer](../../includes/app-insights-analytics-footer.md)]

<!---HONumber=AcomDC_0720_2016-->