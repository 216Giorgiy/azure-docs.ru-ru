<properties 
	pageTitle="Максимальная польза от Application Insights | Microsoft Azure" 
	description="Начав работу с Application Insights, ознакомьтесь с этим списком доступных функций." 
	services="application-insights" 
    documentationCenter=".net"
	authors="alancameronwills" 
	manager="douge"/>

.<tags 
	ms.service="application-insights" 
	ms.workload="tbd" 
	ms.tgt_pltfrm="ibiza" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="08/30/2016" 
	ms.author="awills"/>

# Дополнительные данные телеметрии из Application Insights

После [добавления Application Insights в код ASP.NET](app-insights-asp-net.md) можно сделать еще кое-что, чтобы получать дополнительные данные телеметрии.

## Если приложение выполняется на сервере IIS

Если приложение размещено на серверах IIS под вашим управлением, то установите монитор состояний Application Insights на них. Если он уже установлен, то ничего делать не нужно.

1. Войдите на каждый веб-сервер IIS с учетными данными администратора.
2. Скачайте и запустите [установщик монитора состояний](http://go.microsoft.com/fwlink/?LinkId=506648).
3. В мастере установки выполните вход в Microsoft Azure.

Больше ничего делать не нужно, но можно убедиться, что мониторинг вашего приложения включен.

.![Расширение в Azure](./media/app-insights-asp-net-more/025.png)

(Монитор состояний можно также использовать, чтобы [включить мониторинг во время выполнения](app-insights-monitor-performance-live-website-now.md), даже если вы не инструментировали приложения в Visual Studio.)

### Что вы получаете?

Если монитор состояний установлен на компьютерах серверов, то вы получаете дополнительные данные телеметрии:

* Данные телеметрии зависимостей (вызовы SQL и вызовы REST, выполненные вашим приложением) для приложений .NET 4.5. (В случае использования более поздних версий .NET для получения данных телеметрии зависимостей монитор состояний не требуется.)
* Трассировки стека исключений позволяют просмотреть более подробные сведения.
* Счетчики производительности. В Application Insights эти счетчики отображаются в колонке "Серверы".

.![Расширение в Azure](./media/app-insights-asp-net-more/070.png)

Чтобы видеть больше или меньше счетчиков, [измените диаграммы](app-insights-metrics-explorer.md). Если нужный счетчик производительности отсутствует в доступном наборе, то вы можете [добавить его в набор, данные для которого собирает модуль счетчиков производительности](app-insights-web-monitor-performance.md#system-performance-counters).

## Если это веб-приложение Azure

Если ваше приложение работает как веб-приложение Azure, перейдите к панели управления Azure этого приложения или виртуальной машины и добавьте расширение Application Insights. В разделе **Средства** щелкните **Мониторинг производительности** и настройте параметры **Application Insights**. При появлении запроса выберите уже созданный ресурс Application Insights.

![Расширение в Azure](./media/app-insights-asp-net-more/05-extend.png)

### Что вы получаете?

* Трассировки стека исключений позволяют просмотреть более подробные сведения.
* Данные телеметрии зависимостей (вызовы SQL и вызовы REST, выполненные вашим приложением) для приложений .NET 4.5. (В случае использования более поздних версий .NET для получения данных телеметрии зависимостей расширение не требуется.)

.![Расширение в Azure](./media/app-insights-asp-net-more/080.png)

(Данный метод можно также использовать, чтобы [включить мониторинг производительности во время выполнения](app-insights-monitor-performance-live-website-now.md), даже если вы не инструментировали приложения в Visual Studio.)

## Мониторинг на стороне клиента

Вы установили пакет SDK, который отправляет телеметрию с серверной стороны вашего приложения. Теперь можно добавить мониторинг на стороне клиента. Он предоставит данные о пользователях, сеансах, просмотрах страниц, а также исключениях и сбоях, возникших в браузере. Вы также можете написать собственный код для отслеживания работы пользователей с вашим приложением вплоть до детализации щелчков мышью и нажатий клавиш.

Добавьте фрагмент кода JavaScript Application Insights на каждую веб-страницу, чтобы получать данные телеметрии из браузеров клиентов.

1. В Azure откройте ресурс Application Insights для своего приложения.
2. Выберите "Быстрый запуск" > "Monitor Client Side" (Мониторинг клиентской стороны) и скопируйте фрагмент кода.
3. Вставьте его в заголовок каждой веб-страницы. Как правило, для этого его можно вставить в страницу с разметкой образца.

![Расширение в Azure](./media/app-insights-asp-net-more/100.png)

Обратите внимание, что код содержит ключ инструментирования, идентифицирующий ресурс приложения.

### Что вы получаете?

* Можно написать код JavaScript для отправки [пользовательских данных телеметрии с веб-страниц](app-insights-api-custom-events-metrics.md), например для отслеживания нажатий кнопок.
* В [Analytics](app-insights-analytics.md) данные доступны в `pageViews`, а данные AJAX — в `dependencies`.
* [Данные о производительности и использовании клиентов](app-insights-javascript.md) доступны в колонке "Браузеры".

![Расширение в Azure](./media/app-insights-asp-net-more/090.png)


[Дополнительные сведения об отслеживании веб-страниц](app-insights-web-track-usage.md)



## Отслеживание версии приложения

Убедитесь, что в процессе сборки MSBuild создается `buildinfo.config`. Добавьте в CSPROJ-файл:

```XML

    <PropertyGroup>
      <GenerateBuildInfoConfigFile>true</GenerateBuildInfoConfigFile>    <IncludeServerNameInBuildInfo>true</IncludeServerNameInBuildInfo>
    </PropertyGroup> 
```

При наличии данных сборки веб-модуль Application Insights автоматически добавляет **версию приложения** как свойство для каждого элемента телеметрии. Это позволяет применить фильтр по версии при [диагностическом поиске](app-insights-diagnostic-search.md) или [изучении метрик](app-insights-metrics-explorer.md).

Обратите внимание, что номер версии сборки создается только MS Build, а не в процессе сборки в Visual Studio.


## Доступность веб-тестов

Можно отправлять HTTP-запросы к веб-приложению через равные интервалы из разных точек мира. Мы вас известим, если отклик будет медленным или ненадежным.

В ресурсе Application Insights для своего приложения щелкните элемент "Доступность", чтобы добавить, изменить и просмотреть веб-тесты.

Можно добавить несколько тестов, выполняемых в нескольких расположениях.

.![Расширение в Azure](./media/app-insights-asp-net-more/110.png)

[Подробнее](app-insights-monitor-web-app-availability.md)

## Пользовательские данные телеметрии и ведение журнала

Пакеты Application Insights, добавленные в код, предоставляют API, который можно вызвать из приложения.

* [Создавайте собственные события и метрики](app-insights-api-custom-events-metrics.md), например для подсчета бизнес-событий или мониторинга производительности.
* [Записывайте трассировки журнала](app-insights-asp-net-trace-logs.md) из Log4Net, NLog или System.Diagnostics.Trace.
* [Фильтруйте, изменяйте или дополняйте](app-insights-api-filtering-sampling.md) стандартные данные телеметрии, отправляемые из приложения, создавая обработчики данных телеметрии.


## Мощные функции анализа и презентации

Существует множество способов изучения данных. Если вы недавно приступили к работе с Application Insights, то ознакомьтесь со следующими статьями:

||
|---|---
|[**Поиск данных экземпляров по журналу диагностики**](app-insights-visual-studio.md)<br/>Поиск и фильтрация событий, таких как запросы, исключения, вызовы зависимостей, журналы трассировки и просмотры страниц. В Visual Studio перейдите к коду из трассировки стека.|.![Visual Studio](./media/app-insights-asp-net/61.png)
|[**Обозреватель метрик для объединенных данных**](app-insights-metrics-explorer.md)<br/>Просмотр, фильтрация и сегментирование объединенных данных, таких как частоты запросов, ошибок и исключений, время отклика и время загрузки страницы.|.![Visual Studio](./media/app-insights-asp-net-more/060.png)
|[**Панели мониторинга**](app-insights-dashboards.md#dashboards)<br/>Объединение разнородных данных из нескольких ресурсов и их совместное использование с другими пользователями. Идеальное решение для многокомпонентных приложений, а также для непрерывного отображения в комнате команды. |.![Пример панели мониторинга](./media/app-insights-asp-net/62.png)
|[**Динамический поток метрик**](app-insights-metrics-explorer.md#live-metrics-stream)<br/>При развертывании новой сборки просматривайте эти индикаторы производительности в режиме, близком к реальному времени, чтобы убедиться, что все работает правильно.|.![Пример аналитики](./media/app-insights-asp-net-more/050.png)
|[**Аналитика**](app-insights-analytics.md)<br/>Получите ответы на сложные вопросы о производительности и использовании приложения с помощью этого мощного языка запросов.|![Пример аналитики](./media/app-insights-asp-net-more/010.png)
|[**Автоматические оповещения и оповещения вручную**](app-insights-alerts.md)<br/>Автоматические оповещения адаптируются к стандартным шаблонам телеметрии приложения и активируются, когда что-то не соответствует стандартному шаблону. Также можно настроить оповещения для определенных уровней пользовательских или стандартных метрик.|.![Пример оповещения](./media/app-insights-asp-net-more/020.png)

## Управление данными

|||
|---|---|
|[**Непрерывный экспорт**](app-insights-export-telemetry.md)<br/>Копирование всех данных телеметрии в хранилище, чтобы была возможность проанализировать их на свое усмотрение.|
|**API доступа к данным**<br/>Ожидается в ближайшее время.|
|[**Выборка**](app-insights-sampling.md)<br/>Снижает скорость передачи данных и помогает остаться в пределах своей ценовой категории.|![Элемент выборки](./media/app-insights-asp-net-more/030.png)

<!---HONumber=AcomDC_0907_2016-->