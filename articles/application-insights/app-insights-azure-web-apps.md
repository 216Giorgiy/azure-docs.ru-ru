---
title: Мониторинг производительности веб-приложения Azure | Microsoft Docs
description: Мониторинг производительности веб-приложений Azure. Диаграммы времени загрузки и ответа, информация о зависимостях и настройка оповещений о производительности.
services: application-insights
documentationcenter: .net
author: alancameronwills
manager: douge

ms.service: azure-portal
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 09/01/2016
ms.author: awills

---
# Мониторинг производительности веб-приложения Azure
На [портале Azure](https://portal.azure.com) можно настроить мониторинг производительности [веб-приложений Azure](../app-service-web/app-service-web-overview.md). Средства [Visual Studio Application Insights](app-insights-overview.md) инструментируют ваше приложение для отправки данных телеметрии о работе приложения в службу Application Insights, где эти данные хранятся и анализируются. В этой службе диаграммы метрик и инструменты поиска могут использоваться для диагностики неисправностей, улучшения производительности и анализа использования приложения.

## Время выполнения и время сборки
Вы можете настроить параметры мониторинга с помощью инструментирования приложения одним из следующих способов:

* **Во время выполнения.** Вы можете добавить расширение для мониторинга производительности, уже когда ваше веб-приложение будет работать. Для этого не обязательно выполнять повторную сборку или установку приложения. Вы получаете стандартный набор пакетов для отслеживания времени отклика, частоты успешных выполнений, исключений, зависимостей и т. д.
  
    Выберите одно из двух доступных расширений для мониторинга производительности во время выполнения: **Application Insights** или **New Relic**.
* **Во время сборки.** Вы можете добавить пакет в код своего приложения на этапе разработки. Этот способ является более гибким решением. Помимо установки стандартных пакетов, вы можете написать код для настройки данных телеметрии либо для отправки пользовательской телеметрии. Вы можете вести журнал действий или регистрировать события в соответствии с семантикой домена вашего приложения.
  
    **Application Insights** предоставляет пакеты для установки во время сборки.

## Создание приложения с пакетом Application Insights
Установите пакет SDK в свое приложение, чтобы воспользоваться более подробными сведениями телеметрии Application Insights.

В проект в Visual Studio (2013 с обновлением 2 или более поздней версии) добавьте пакет SDK для Application Insights.

![Щелкните правой кнопкой мыши веб-проект и выберите пункт "Добавить Application Insights".](./media/app-insights-azure-web-apps/03-add.png)

Если отобразится предложение войти, воспользуйтесь данными вашей учетной записи Azure.

Операция выполняет два действия:

1. Создает ресурс Application Insights, в котором выполняется отображение, хранение и анализ данных телеметрии.
2. Добавляет пакет NuGet Application Insights в код и настраивает его для отправки данных телеметрии в ресурс Azure.

Телеметрию можно проверить путем запуска приложения на компьютере разработчика (F5) или можно сразу повторно опубликовать приложение.

Пакет SDK предоставляет API-интерфейс, чтобы пользователь мог [написать пользовательские телеметрии](app-insights-api-custom-events-metrics.md) для отслеживания использования.

### Настройка ресурса вручную
Если пакет SDK не добавлен в Visual Studio, в Azure необходимо настроить ресурс Application Insights, где будут храниться, анализироваться и отображаться данные телеметрии.

![Последовательно выберите "Добавить", "Службы для разработчиков", "Application Insights". Выберите тип приложения ASP.NET.](./media/app-insights-azure-web-apps/01-new.png)

## Включить расширение
1. Перейдите к колонке управления веб-приложения или виртуальной машины, которую нужно инструментировать.
2. Добавьте расширение Application Insights или New Relic.
   
    Если вы инструментируете веб-приложение:

![Параметры, расширения, добавление, Application Insights](./media/app-insights-azure-web-apps/05-extend.png)

Или, если вы используете виртуальную машину:

![Щелкните плитку аналитики](./media/app-insights-azure-web-apps/10-vm1.png)

## Просмотр данных
1. Откройте ресурс Application Insights (непосредственно с использованием кнопки "Обзор" или с помощью средства наблюдения за производительностью в веб-приложении).
2. Щелкните любую диаграмму, чтобы получить более подробные сведения.
   
    ![В колонке "Обзор" Application Insights щелкните диаграмму](./media/app-insights-azure-web-apps/07-dependency.png)
   
    Вы можете [настроить колонки метрик](app-insights-metrics-explorer.md).
3. Вы можете щелкнуть отдельные события, чтобы просмотреть сведения о них и их свойства.
   
    ![Щелкните тип события, по которому нужно отфильтровать результаты поиска](./media/app-insights-azure-web-apps/08-requests.png)
   
    Если щелкнуть знак многоточия, откроются все свойства.
   
    Вы можете [настроить поисковые запросы](app-insights-diagnostic-search.md).

Для более эффективного поиска по данным телеметрии используйте [язык запросов аналитики](app-insights-analytics-tour.md).

## Вопросы и ответы
Как настроить отправку данных на другой ресурс Application Insights?

* *Если расширение Application Insights добавлено в код вашего приложения в Visual Studio*, щелкните проект правой кнопкой мыши, выберите **Application Insights > Настройка**, а затем выберите нужный ресурс. После этого вы сможете создать, заново собрать или повторно развернуть ресурс.
* *В противном случае* в Azure откройте колонку управления веб-приложением и выберите **Средства > Расширения**. Удалите расширение Application Insights. Затем выберите **Средства > Производительность**, "Щелкните здесь", выберите пункт Application Insights, а затем — нужный ресурс. (Если нужно создать ресурс Application Insights, сделайте это в первую очередь.)

## Дальнейшие действия
* [Включите отправку данных диагностики Azure](app-insights-azure-diagnostics.md) в Application Insights.
* [Отслеживайте метрики состояния службы](../azure-portal/insights-how-to-customize-monitoring.md), чтобы убедиться, что служба доступна и отвечает на запросы.
* [Получайте уведомления](../azure-portal/insights-receive-alert-notifications.md) при возникновении операционных событий или превышении пороговых значений метрик.
* Используйте [расширение Application Insights для приложений JavaScript и веб-страниц](app-insights-web-track-usage.md), чтобы получать данные телеметрии клиентов из браузеров, которые используются для открытия веб-страницы.
* [Настройте веб-тесты доступности](app-insights-monitor-web-app-availability.md), чтобы получать уведомления о сбоях в работе сайта.

<!---HONumber=AcomDC_0907_2016-->