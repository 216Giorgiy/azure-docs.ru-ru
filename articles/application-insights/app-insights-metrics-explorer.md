<properties 
	pageTitle="Исследование метрик в Application Insights" 
	description="Способ интерпретации диаграмм в обозревателе метрик и настройки колонок обозревателя метрик." 
	services="application-insights" 
    documentationCenter=""
	authors="alancameronwills" 
	manager="douge"/>

<tags 
	ms.service="application-insights" 
	ms.workload="tbd" 
	ms.tgt_pltfrm="ibiza" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="11/23/2015" 
	ms.author="awills"/>
 
# Исследование метрик в Application Insights

Метрики в [Application Insights][start] — это измеренные значения и счетчики событий, которые передаются как данные телеметрии из приложения. Они помогают обнаруживать проблемы производительности и отслеживать тенденции в использовании приложения. Существует широкий спектр стандартных метрик, и можно также создавать собственные пользовательские метрики и события.

Метрики и счетчики событий отображаются в диаграммах агрегированных значений, например как сумма, среднее или количество.

Вот пример диаграммы:

![Откройте колонку обзора приложения на портале Azure](./media/app-insights-metrics-explorer/01-overview.png)

Некоторые диаграммы сегментированы: общая высота диаграммы в любой точке представляет собой сумму отображаемых метрик. По умолчанию в условных обозначениях показывается наибольшее количество.

Пунктирной линией показано значение метрики за предыдущую неделю.



## Диапазон времени

В любой колонке можно изменить диапазон времени, охватываемый диаграммами или сетками.

![Откройте колонку обзора приложения на портале Azure](./media/app-insights-metrics-explorer/03-range.png)


Если ожидаются некоторые данные, которые еще не отобразились, нажмите кнопку "Обновить". Диаграммы самостоятельно обновляются через определенные интервалы, однако интервалы становятся длиннее при использовании более крупных временных отрезков. В режиме выпуска может потребоваться некоторое время, чтобы данные были переданы через конвейер анализа в диаграмму.

Чтобы увеличить масштаб части диаграммы, выделите его мышью и щелкните значок лупы:

![Перетащите часть диаграммы.](./media/app-insights-metrics-explorer/12-drag.png)



## Детализация и значения точек

Наведите указатель мыши на диаграммы для отображения значений метрик в той точке.

![Наведите указатель мыши на диаграмму](./media/app-insights-metrics-explorer/02-focus.png)

Значение метрики в определенной точке определяется как результат статистического вычисления за предыдущий интервал выборки.

Интервал выборки, или «степень детализации», отображается в верхней части колонки.

![Заголовок колонки.](./media/app-insights-metrics-explorer/11-grain.png)

Степень детализации можно настроить в колонке временного диапазона:

![Заголовок колонки.](./media/app-insights-metrics-explorer/grain.png)

Доступные степени детализации зависят от выбранного интервала времени. Вместо автоматической степени детализации для интервала времени можно выбрать явную степень детализации.

## Обозреватель метрик

Щелкните любую диаграмму в колонке "Обзор" для просмотра более подробного набора связанных диаграмм и сеток. Эти диаграммы и сетки можно изменить, чтобы получить именно те данные, которые вас интересуют.

Либо просто нажмите кнопку "Обозреватель метрик" в верхней части колонки "Обзор".

Например, щелкните диаграмму неудачно завершенных запросов веб-приложения:

![В колонке обзора щелкните диаграмму](./media/app-insights-metrics-explorer/14-trix.png)


## Что означают рисунки

В условных обозначениях сбоку по умолчанию отображается значение, вычисленное для периода диаграммы. При наведении указателя мыши на какую-либо точку диаграммы отображается значение в этой точке.

Каждая точка данных на диаграмме вычисляется на основе значений данных, полученных на предыдущем интервале выборки (степени детализации). Степень детализации отображается в верхней части колонки и зависит от общей шкалы времени диаграммы.

Метрики можно вычислять различными способами.

 * **Сумма**: суммирование значений всех точек данных, полученных в течение интервала выборки (периода диаграммы).
 * **Среднее**: деление значения "Сумма" на количество точек данных, полученных в течение интервала.
 * **Уникальные**: использование счетчиков для подсчета количества пользователей и учетных записей. На рисунке показано количество различных пользователей, обнаруженных в течение интервала выборки (периода диаграммы).


Вы можете изменить метод вычисления.

![Выделите диаграмму, а затем выберите способ вычисления.](./media/app-insights-metrics-explorer/05-aggregation.png)

При создании диаграммы для нее отображается метод по умолчанию.

![Отмените выбор всех метрик, чтобы отобразить значения по умолчанию.](./media/app-insights-metrics-explorer/06-total.png)


## Изменение диаграмм и сеток

Добавление новой диаграммы в колонку:

![В обозревателе метрик выберите "Добавить диаграмму"](./media/app-insights-metrics-explorer/04-add.png)

Выберите существующую или новую диаграмму для редактирования отображаемых данных:

![Выберите одну или несколько метрик](./media/app-insights-metrics-explorer/08-select.png)

Можно отобразить более одной метрики на диаграмме, хотя существуют ограничения по сочетаниям, которые могут отображаться одновременно. Когда выбрана одна метрика, некоторые другие становятся недоступными.

Если [пользовательские метрики][track] были добавлены в код приложения (вызовы TrackMetric и TrackEvent), они будут перечислены здесь.

## Сегментация данных

Выберите диаграмму или сетку, переключитесь на группировку и выберите свойство для группировки:

![Выберите "Объекты группировки", затем выберите свойство в списке "Группировать по"](./media/app-insights-metrics-explorer/15-segment.png)

Если [пользовательские метрики][track] были добавлены в код приложения и включают значения свойства, в списке можно будет выбрать это свойство.

Диаграмма слишком мала для сегментации данных? Измените ее высоту:


![Отрегулируйте положение ползунка](./media/app-insights-metrics-explorer/18-height.png)


## Фильтрация данных

Просмотр метрик только для выбранного набора значений свойства

![Щелкните "Фильтр", разверните свойство и проверьте некоторые значения](./media/app-insights-metrics-explorer/19-filter.png)

Если не выбирать какие-либо значения для конкретного свойства, это будет аналогично выбору их всех: нет фильтра по этому свойству.

Обратите внимание на счетчики событий рядом с каждым значением свойства. При выборе значений одного свойства счетчики, находящиеся рядом со значениями других свойств, корректируются.

### Добавление свойств в список фильтров

Вам необходимо фильтровать данные телеметрии по выбранным вами категориям? Например, вы распределили пользователей по различным категориям и хотели бы сегментировать данные по этим категориям.

[Создайте собственное свойство](app-insights-api-custom-events-metrics.md#properties). Задайте его в [инициализаторе телеметрии](app-insights-api-custom-events-metrics.md#telemetry-initializers), чтобы оно было включено во все данные телеметрии, включая стандартные данные телеметрии, отправляемые различными модулями SDK.

## Исключение программ-роботов и веб-тест трафика

Используйте фильтр **Реальный или искусственный трафик** и установите флажок **Реальный**.

Также можно фильтровать по **источнику искусственного трафика**.

## Изменение типа диаграммы

В частности, обратите внимание, что можно переключаться между сетками и диаграммами:

![Выберите сетку или диаграмму, затем выберите тип диаграммы](./media/app-insights-metrics-explorer/16-chart-grid.png)

## Сохранение колонки метрик

После создания диаграммы ее можно сохранить в список избранного. При использовании учетной записи организации можно выбрать, будут ли другие члены команды иметь к ней доступ.

![Выберите "Избранное"](./media/app-insights-metrics-explorer/21-favorite-save.png)

Чтобы снова увидеть эту колонку, **перейдите в колонку "Обзор"** и откройте "Избранное":

![В колонке "Обзор" выберите "Избранное"](./media/app-insights-metrics-explorer/22-favorite-get.png)

Если выбрать относительный диапазон времени при сохранении, колонка будет обновлена с использованием последних метрик. Если выбрать абсолютного диапазона времени, каждый раз будут отображаться те же данные.

## Сброс настроек колонки

Если после изменения колонки требуется вернуться к исходному сохраненному набору параметров, просто нажмите кнопку сброса.

![В кнопках верхней части обозревателя метрик](./media/app-insights-metrics-explorer/17-reset.png)

## Задание предупреждений

Чтобы получать уведомления по электронной почте о нетипичных значениях любой метрики, добавьте предупреждение. Можно выбрать отправку либо по электронной почте администраторам учетной записи, либо на указанный электронный адрес.

![В обозревателе метрик выберите последовательно «Правила предупреждений», «Добавить предупреждение»](./media/app-insights-metrics-explorer/appinsights-413setMetricAlert.png)

[Дополнительные сведения о предупреждениях][alerts].

## Экспорт в Excel

Вы можете экспортировать данные метрик, которые отображаются в обозревателе метрики, в файл Excel. Экспортированные данные включают данные из всех диаграмм и таблиц, отображаемых на портале.


![В обозревателе метрик выберите последовательно «Правила предупреждений», «Добавить предупреждение»](./media/app-insights-metrics-explorer/31-export.png)

Данные для каждой диаграммы или таблицы экспортируются в отдельный лист в файле Excel.

Вы можете наблюдать за процессом экспорта. Чтобы изменить диапазон экспортируемых данных, измените диапазон времени или фильтры. Если при работе с таблицами появляется команда **Загрузить еще**, то щелкнув ее до начала экспорта, вы сможете экспортировать больше данных.

*На данный момент экспортирование возможно только в браузерах Internet Explorer и Chrome. Мы работаем над поддержкой этой функции в других браузерах.*

### Непрерывный экспорт

Для внешней обработки данных вам понадобится непрерывный экспорт. Для этого используйте функцию [Непрерывный экспорт](app-insights-export-telemetry.md).

### Power BI

Если вам необходимы представления данных с еще большими возможностями, [экспортируйте данные в Power BI](http://blogs.msdn.com/b/powerbi/archive/2015/11/04/explore-your-application-insights-data-with-power-bi.aspx).

## Дальнейшие действия

* [Отслеживание использования Application Insights.](app-insights-overview-usage.md)
* [Использование диагностического поиска](app-insights-diagnostic-search.md)


<!--Link references-->

[alerts]: app-insights-alerts.md
[start]: app-insights-overview.md
[track]: app-insights-api-custom-events-metrics.md

 

<!---HONumber=AcomDC_1125_2015-->