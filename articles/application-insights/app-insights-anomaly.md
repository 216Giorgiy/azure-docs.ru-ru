<properties 
	pageTitle="Application Insights: упреждающее обнаружение аномалий" 
	description="Служба Application Insights выполняет глубокий анализ телеметрии вашего приложения и предупреждает о потенциальных проблемах производительности." 
	services="application-insights" 
    documentationCenter="windows"
	authors="alancameronwills" 
	manager="douge"/>

<tags 
	ms.service="application-insights" 
	ms.workload="tbd" 
	ms.tgt_pltfrm="ibiza" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="11/02/2015" 
	ms.author="awills"/>

#  Application Insights: упреждающие оповещения

*Доступна только предварительная версия Application Insights.*


Служба Application Insights выполняет глубокий анализ телеметрии вашего приложения и предупреждает о потенциальных проблемах производительности. Скорее всего, вы читаете эту статью, так как получили от нас письмо с предупреждением.

## Предупреждение

* *Почему мне направлено это предупреждение?*
 * Application Insights периодически анализирует данные с помощью правил распознавания шаблонов. Служба ищет аномалии, которые могут сигнализировать о проблемах с производительностью в вашем приложении.
* *Уведомление означает, что определенно возникла какая-то неполадка?*
 * Нет, это просто предложение обратить более пристальное внимание на ту или иную ситуацию. 
* *Что делать?*
 * [Просмотрите представленные данные](#responding-to-an-alert) и решите, сигнализируют ли они о неполадке. Если нет — хорошо.
* *Это означает, что вы отслеживаете мои данные?*
 * Нет, служба работает полностью в автоматическом режиме. Уведомления получаете только вы. Ваши данные [конфиденциальны](app-insights-data-retention-privacy.md).


## Процесс обнаружения

* *Какие виды аномалий обнаруживаются?*
 * Шаблоны, проверка которых займет у вас слишком много времени. Например, низкая производительность при определенном сочетании расположения, времени суток и платформы.
* *Можно создавать собственные правила обнаружения аномалий?*
 * Пока нет. Но вы можете сделать следующее:
 * [настроить предупреждения](app-insights-alerts.md), которые оповещают вас, когда метрика достигает порогового значения;
 * [экспортировать данные телеметрии](app-insights-export-telemetry.md) в [базу данных](app-insights-code-sample-export-sql-stream-analytics.md), [PowerBI](app-insights-export-power-bi.md) или [другие](app-insights-code-sample-export-telemetry-sql-database.md) средства, с помощью которых можно проанализировать информацию самостоятельно.
* *Как часто выполняется анализ?*
 * Мы не выполняем анализ на ресурсе приложения с небольшим показателем телеметрии. Вы вряд ли получите предупреждения о сеансе отладки.


## Реакция на предупреждения

Откройте отчет об аномалии из электронного письма или списка аномалий.

![](./media/app-insights-anomaly/02.png)

Примечание.

* Описание
* Отчет о влиянии, который показывает, скольких пользователей это затрагивает и как часто.

Щелкните диаграмму, чтобы открыть колонку с более подробной информацией.

Измените диапазон времени и фильтры для просмотра телеметрии.

## Получать такие предупреждения — хорошо. Но что можно сделать для повышения производительности?

Медленные и неудачные отклики доставляют большие неудобства пользователям веб-сайтов, как вы знаете из собственного опыта. Поэтому очень важно устранить проблемы.

### Рассмотрение

Во-первых, имеет ли это значение? Если страница всегда загружается медленно, но ее просматривает всего 1 % пользователей веб-сайта, наверное, вам лучше заняться более важными делами. С другой стороны, если страницу открывает только 1 % пользователей, но она каждый раз возвращает исключения, возможно, есть смысл в том, чтобы изучить проблему.

В общем, ориентируйтесь на отчет о влиянии в сообщении электронной почты. Но имейте в виду, что полностью полагаться на него нельзя. Соберите дополнительные данные для подтверждения.

Рассмотрите все аспекты проблемы. Причиной может быть географическое расположение. Выполните [тесты доступности](app-insights-monitor-web-app-availability.md), включив этот регион. Возможно, в этой области просто проблемы с сетью.

### Диагностика медленных загрузок страниц 

В чем суть проблемы? Сервер медленно отвечает на запросы, страница очень большая или браузеру требуется проделать большой объем работы, чтобы отобразить ее?

Откройте колонку метрик браузеров. [Сегментированное отображение показателей времени загрузки страницы в браузере](app-insights-javascript.md#explore-your-data) показывает, на что уходит время.

* Высокий показатель **времени отправки запроса** означает, что сервер отвечает медленно или запрос является публикацией с большим объемом данных. Чтобы узнать время отклика, просмотрите [показатели производительности](app-insights-web-monitor-performance.md#metrics). 
* Чтобы узнать, что замедляет работу — внешние службы или базы данных, настройте [отслеживание зависимостей](app-insights-dependencies.md).
* Если преобладает показатель **Получение ответа**, это значит, что страница и ее зависимые компоненты (JavaScript, CSS, изображения и т. п. — но не асинхронно загруженные данные) имеют большой размер. Настройте [тест доступности](app-insights-monitor-web-app-availability.md) и не забудьте установить параметр для загрузки зависимых компонентов. После получения результатов откройте сведения и разверните их, чтобы просмотреть показатели времени загрузки различных файлов.
* Высокое значение параметра **Время обработки клиента** может указывать на медленное выполнение скриптов. Если причина не очевидна, рекомендуем добавить код времени и отправить значения времени в вызовах trackMetric.

### Улучшение производительности медленных страниц

В Интернете достаточно советов о том, как ускорить ответы серверов и сократить время загрузки страниц, поэтому мы не будем повторять их здесь. Ниже приведено несколько советов, которые, вероятно, вам уже известны. Может, они натолкнут вас на нужные мысли.

* Медленная загрузка из-за большого размера файлов — загружайте скрипты и другие компоненты асинхронно. Используйте объединение скриптов. Разбейте главную страницу на мини-приложения, которые загружают свои данные по отдельности. Не используйте обычный HTML для отправки длинных таблиц — используйте скрипт для запроса данных в формате JSON (или другом компактном формате) и уже затем заполняйте таблицу. Для всего этого есть замечательные платформы. (Они, конечно же, также содержат большие скрипты).
* Медленные серверные зависимости — обратите внимание на географическое расположение компонентов. Например, при использовании Azure веб-сервер и база данных должны быть расположены в одном регионе. Проверьте, не получают ли запросы больше данных, чем требуется. Возможно, поможет кэширование или пакетная обработка.
* Проблемы мощности — просмотрите метрики времени ответа сервера и количества запросов. Если пики времени ответа непропорциональны пикам количества запросов, вполне вероятно, что ресурсы серверов исчерпаны. 


## Электронные уведомления

* *Мне необходимо подписаться на эту службу для получения уведомлений?*
 * Нет. Наша программа-робот периодически исследует данные от всех пользователей службы Application Insights и отправляет уведомления при обнаружении неполадок.
* *Можно отменить подписку или настроить пересылку уведомлений моим коллегам?*
 * Щелкните ссылку в предупреждении или письме. Откройте параметры аномалии.
 
    ![](./media/app-insights-anomaly/01.png)

    В настоящее время они направляются только тем, у кого есть [доступ на запись к ресурсу Application Insights](app-insights-resources-roles-access-control.md).
* *Не хочу, чтобы меня донимали этими сообщениями.*
 * Они ограничены до трех штук в день. Сообщения не отправляются повторно.
* *Если я ничего не сделаю, мне придет напоминание?*
 * Нет, вы получаете сообщение о каждой проблеме только один раз.
* *Я не могу найти письмо. Где найти уведомления на портале?*
 * В обзоре приложения службы Application Insights щелкните элемент **Аномалии**. 






 

<!---HONumber=Nov15_HO2-->