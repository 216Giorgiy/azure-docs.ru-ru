<properties 
	pageTitle="Хранилища и хранение данных в Application Insights" 
	description="Заявление о политике хранении и конфиденциальности" 
	services="application-insights" 
    documentationCenter=""
	authors="alancameronwills" 
	manager="douge"/>

<tags 
	ms.service="application-insights" 
	ms.workload="tbd" 
	ms.tgt_pltfrm="ibiza" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="08/11/2015" 
	ms.author="awills"/>

# Сбор и хранение данных в Application Insights 

*Доступна только предварительная версия Application Insights.*

## Обзор

Эта статья содержит ответы на вопросы о данных, собираемых [Visual Studio Application Insights][start], и описание способа их обработки и хранения.

Application Insights — это служба Azure в режиме предварительного просмотра. В режиме предварительного просмотра мы стараемся защитить ваши данные в соответствии с политиками, описанными в техническом документе [Безопасность, конфиденциальность и соответствие требованиям Azure](http://go.microsoft.com/fwlink/?linkid=392408).


## Коллекция

#### Как данные собираются в Application Insights?

Пакеты SDK Application Insights и агенты, которые можно объединить с приложением, передают данные в службу Application Insights. Данные обрабатываются службой, чтобы предоставить вам отчеты, предупреждения и другие функциональные возможности. К ним могут относиться данные, выбранные для сбора с помощью API-интерфейса, например свойства и пользовательские события.

#### Какой объем данных можно получить? 

**В секунду**: до 500 точек данных в секунду на один ключ инструментирования (то есть на приложение). Для [ценовой категории][pricing] «Бесплатно» ограничение составляет 100 точек данных в секунду.

Имеется три категории, которые подсчитываются отдельно:

* [Вызовы TrackTrace](app-insights-api-custom-events-metrics.md#track-trace) и [извлеченные журналы](app-insights-asp-net-trace-logs.md).
* [Исключения](app-insights-api-custom-events-metrics.md#track-exception), попадающие под более низкое ограничение в 50 в секунду.
* Все другие данные телеметрии (просмотры страниц, запросы, зависимости, метрики, пользовательские события и результаты веб-тестов).

**В месяц**: 5–15 миллионов точек данных каждый календарный месяц, в зависимости от [тарифного плана](http://azure.microsoft.com/pricing/details/application-insights/). Если ваша емкость закончилась, то в любой [ценовой категории][pricing], кроме категории «Бесплатно», вы можете купить дополнительную.


*Точка данных* — это элемент телеметрии приложения, отправляемый на портал Azure. Может быть отправлен:

* [модулями пакета SDK](app-insights-configuration-with-applicationinsights-config.md), которые автоматически собирают данные, например, для сообщения о запросе или сбое либо для измерения производительности;
* вызовами [API](app-insights-api-custom-events-metrics.md) `Track...`, которые вы написали, например `TrackEvent` или `trackPageView`;
* [веб-тестами доступности](app-insights-monitor-web-app-availability.md), которые вы настроили.

Данные телеметрии включают в себя:

* Каждую строку в [результатах поиска в журнале диагностики](app-insights-diagnostic-search.md).
* Необработанные данные каких диаграмм в [обозревателе метрик](app-insights-metrics-explorer.md) объединяются. Данные метрик, например данные счетчиков производительности, обычно не отображаются как отдельные точки в обозревателе метрик.
* Каждый результат веб-теста в отчете о [доступности](app-insights-monitor-web-app-availability.md).

Количество пользователей и сеансов не включаются в квоту для ценообразования.

*Как узнать, сколько точек данных отправляет приложение?*

* Чтобы отобразилась диаграмма тома данных, последовательно выберите элементы «Параметры» и «Квота и расценки».
* Или же в обозревателе метрик добавьте новую диаграмму и в качестве метрики выберите **том точек данных**. Переключитесь на представление "Группировка" и сгруппируйте по **типу данных**.


#### Как долго хранятся данные? 

Это зависит от [тарифного плана](http://azure.microsoft.com/pricing/details/application-insights/).

Необработанные точки данных (элементы, которые можно проверить с помощью поиска по журналу диагностики): от 7 до 30 дней.

Объединенные данные (то есть счетчики, средние значения и другие статистические данные, которые отображаются в обозревателе метрик) сохраняются со степенью детализации 1 минута в течение 30 дней, а со степенью детализации 1 час или 1 день (в зависимости от типа) — по крайней мере 13 месяцев.

#### Какие ограничения существуют для различных типов данных?

1.	Максимальное количество уникальных имен метрик — 200, а уникальных имен свойств — 200. Метрики включают данные, отправленные в TrackMetric, а также измерения по другим типам данных, таким как события. [Имена метрик и свойств][api] являются глобальными для каждого ключа инструментирования и не ограничиваются типом данных.
2.	[Свойства][apiproperties] можно использовать для фильтрации и группирования, только если на каждое свойство приходится менее 100 уникальных значений. После превышения максимального количества уникальных значений (100 уникальных значений), свойство можно по-прежнему использовать для поиска и фильтрации, но не для фильтров.
3.	Максимальное количество уникальных значений для стандартных свойств, таких как Request Name или Page URL, в неделю — 1000. После превышения максимального количества уникальных значений (1000 уникальных значений) дополнительные значения отмечаются как «Другие значения». Исходное значение можно по-прежнему использовать для полнотекстового поиска и фильтрации.


## Access

#### Кто может просматривать данные?

Данные видны вам и, если у вас есть учетная запись организации, членам вашей группы.

Вы и члены группы могут их экспортировать и скопировать в другое место, а также передать другим пользователям.

#### Что корпорация Майкрософт делает с данными, которые мое приложение отправляет службе Application Insights?

Корпорация Майкрософт использует данные только для предоставления вам возможностей службы.


## Расположение

#### Где хранятся данные? 

* В США. 

#### Можно ли хранить данные в другом регионе, например в Европе? 

* Пока нет. 

## Безопасность 

#### Насколько защищены мои данные? 

Данные хранятся на серверах Microsoft Azure. Для учетных записей предварительной версии портала Azure ограничения описаны в документе [Безопасность, конфиденциальность и соответствие нормативам Azure](http://go.microsoft.com/fwlink/?linkid=392408). Для учетных записей портала Visual Studio Online действует документ [Защита данных VS Online](http://download.microsoft.com/download/8/E/E/8EE6A61C-44C2-4F81-B870-A267F1DF978C/MicrosoftVisualStudioOnlineDataProtection.pdf).

Доступ к данным сотрудников Майкрософт ограничен. Доступ производится только с вашего разрешения и в случае, если это необходимо для поддержки использования вами Application Insights.

Совокупные данные от приложений всех наших клиентов (например, скорость передачи данных и средний размер трассировок) используются для улучшения Application Insights.

#### Могут ли данные телеметрии другого пользователя повлиять на мои данные Application Insights?

Дополнительные данные телеметрии могут отправляться в вашу учетную запись с помощью ключа инструментирования, который можно найти в коде веб-страниц. При достаточном объеме дополнительных данных вашим метрики неправильно представляют производительность и использование приложения.

Если вы совместно используете код в других проектах, не забудьте удалить ключ инструментирования.

## Шифрование

#### Зашифрованы ли данные на серверах Application Insights? 

В настоящее время данные на серверах не шифруются.

Все данные шифруются при перемещении между центрами обработки данных.

#### Данные шифруются при передаче из приложения на серверы Application Insights?

Да, мы используем HTTPS для отправки данных на портал практически из всех пакетов SDK, включая веб-серверы, устройства и веб-страницы HTTPS. Единственное исключение — данные, отправляемые с простых веб-страниц HTTP.

## Персональные данные

#### Будет ли персонально идентифицируемая информация отправляться в Application Insights? 

Да.

Общее руководство:

* Большинство стандартных данных телеметрии (которые отправляются без написания кода) не содержит явных персональных данных. Однако возможна идентификация отдельных пользователей за счет применения коллекции событий.
* Исключения и сообщения трассировки могут содержать личные данные.
* Пользовательские данные телеметрии (вызовы, такие как TrackEvent, добавленные в код с помощью API-интерфейса, или трассировки журнала) могут содержать любые выбранные вами данные.


Таблица в конце этого документа содержит более подробное описание собираемых данных.



#### Несу ли я ответственность за соблюдение законов и нормативов в отношении персональных данных?

Да. На вас лежит ответственность за то, чтобы убедиться, что сбор и использование данных соответствует законам и нормативам, а также требованиям использования Microsoft Online Services.

Вам следует соответствующим образом проинформировать клиентов о данных, которые ваше приложение собирает, и о том, как они используются.

#### Могут ли мои пользователи отключить Application Insights?

Не напрямую. Мы не предоставляем параметр, с помощью которого пользователи могут отключить Application Insights.

Однако вы можете реализовать такую возможность в своем приложении. Все пакеты SDK содержат параметр API, который отключает сбор данных телеметрии.

#### Мое приложение непреднамеренно собирает конфиденциальные сведения. Может ли Application Insights удалить их?

Application Insights не фильтрует и не удаляет данные. Вам следует правильно управлять данными и предотвращать отправку таких данных службе Application Insights.



## Данные, передаваемые службой Application Insights

На разных платформах пакеты SDK различаются, при этом существует несколько компонентов, которые можно установить. (См. раздел [Начало работы с Application Insights][start].) Каждый компонент отправляет различные данные.

#### Классы данных, передаваемых в различных сценариях

Ваше действие | Собираемые классы данных (см. следующую таблицу)
---|---
[Добавление пакета SDK Application Insights в веб-проект][greenbrown] | ServerContext<br/>Выводимые<br/>Счетчики производительности<br/>Запросы<br/>**Исключения**<br/>Сеанс<br/>пользователи
[Установка монитора состояния на сервере IIS][redfield]<br/>[Добавление расширения AI на виртуальную машину Azure или в веб-приложение][azure]|Зависимости<br/>ServerContext<br/>Выводимые<br/>Счетчики производительности
[Добавление пакета SDK Application Insights в веб-приложение Java][java]|ServerContext<br/>Выводимые<br/>Запрос<br/>Сеанс<br/>пользователи
[Добавление пакета SDK JavaScript на веб-страницу][client]|ClientContext<br/>Выводимые<br/>Страница<br/>ClientPerf
[Добавление пакета SDK в приложение Магазина Windows][windows]|DeviceContext<br/>Пользователи<br/>Данные о сбоях
[Определение свойств по умолчанию][apiproperties]|**Свойства** всех стандартных и настраиваемых событий
[Вызов TrackMetric][api]|Числовые значения<br/>**Свойства**
[Вызов Track*][api]|Имя события<br/>**Свойства**
[Вызов TrackException][api]|**Исключения**<br/>Дамп стека<br/>**Свойства**
Пакету SDK не может собрать данные. Например: <br/> — нет доступа к счетчикам производительности<br/> — исключение в инициализаторе телеметрии | Диагностика SDK
 

Для [пакетов SDK для других платформ][platforms] см. соответствующую документацию.



#### Классы собираемых данных

Собираемый класс данных | Включает (неисчерпывающий список) 
---|---
**Свойства**|**Все данные — определяется кодом**
DeviceContext |Идентификатор, IP-адрес, языковой стандарт, модель устройства, сеть, тип сети, имя изготовителя оборудования, разрешение экрана, экземпляр роли, имя роли, тип устройства
ClientContext |ОС, языковой стандарт, язык, сеть, разрешение окна
Сеанс | идентификатор сеанса
ServerContext |Имя компьютера, языковой стандарт, ОС, устройство, сеанс пользователя, контекст пользователя, операция 
Выводимые |географическое расположение на основе IP-адреса, отметка времени, ОС, браузер
Метрики | Имя и значение метрики
События | Имя и значение события
PageViews | URL-адрес и имя страницы или имя экрана
Производительность клиента | URL-адрес или имя страницы, время загрузки браузера
Requests (Запросы) |URL-адрес, длительность, код ответа
Зависимости|Тип (SQL, HTTP,...), строка подключения или URI, синхронный или асинхронный, длительность, успех, инструкция SQL (с монитором состояния)
**Исключения** | Тип, **сообщения**, стеки вызовов, исходный файл и номер строки, идентификатор потока
Сбои | Код процесса, код родительского процесса, код потока сбоя, исправление приложения, идентификатор, сборка, тип исключения, адрес, причина, скрытые символы и регистры, начальный и конечный двоичный адрес, имя и путь двоичного файла, тип ЦП
Трассировка | **Сообщение** и уровень серьезности
Счетчики производительности | Время процессора, объем доступной памяти, частота запросов, скорость исключения, байтов исключительного пользования процесса, скорость ввода-вывода, длительность запроса, длина очереди запросов
Доступность | Код ответа веб-теста, длительность каждого шага теста, имя теста, метка времени, успешное завершение, время отклика, расположение теста.
Диагностика SDK | Сообщение трассировки или исключение 

Вы можете [отключить некоторые данные, изменив файл ApplicationInsights.config][config]


## Благодарности

Этот продукт содержит данные GeoLite2, созданные MaxMind и доступные на веб-сайте [http://www.maxmind.com](http://www.maxmind.com).

## <a name="video"></a>Видео

#### Введение

> [AZURE.VIDEO application-insights-introduction]

#### Приступая к работе

> [AZURE.VIDEO getting-started-with-application-insights]




<!--Link references-->

[api]: app-insights-api-custom-events-metrics.md
[apiproperties]: app-insights-api-custom-events-metrics.md#properties
[azure]: ../insights-perf-analytics.md
[client]: app-insights-javascript.md
[config]: app-insights-configuration-with-applicationinsights-config.md
[greenbrown]: app-insights-start-monitoring-app-health-usage.md
[java]: app-insights-java-get-started.md
[platforms]: app-insights-platforms.md
[pricing]: http://azure.microsoft.com/pricing/details/application-insights/
[redfield]: app-insights-monitor-performance-live-website-now.md
[start]: app-insights-get-started.md
[windows]: app-insights-windows-get-started.md

 

<!---HONumber=August15_HO8-->