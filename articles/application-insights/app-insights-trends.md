<properties
	pageTitle="Анализ трендов в Visual Studio | Microsoft Azure"
	description="Сведения об анализе, визуализации и изучении трендов в данных телеметрии Application Insights в Visual Studio."
	services="application-insights"
    documentationCenter=".net"
	authors="numberbycolors"
	manager="douge"/>

<tags
	ms.service="application-insights"
	ms.workload="tbd"
	ms.tgt_pltfrm="ibiza"
	ms.devlang="na"
	ms.topic="get-started-article"
	ms.date="07/14/2016"
	ms.author="daviste"/>

# Анализ трендов в Visual Studio

Средство "Тренды Application Insights" визуализирует изменение важных событий телеметрии приложения с течением времени, помогая быстро выявлять проблемы и аномалии. В этом средстве можно перейти к более подробным диагностическим сведениям, что позволяет повысить производительность приложения, а также отслеживать причины исключений и анализировать данные пользовательских событий.

![Пример окна трендов](./media/app-insights-trends/app-insights-trends-hero-750.png)

> [AZURE.NOTE] Средство "Тренды Application Insights" доступно в Visual Studio 2015 с обновлением 3 и более поздними обновлениями, а также в [расширении средств анализа для разработчиков](https://visualstudiogallery.msdn.microsoft.com/82367b81-3f97-4de1-bbf1-eaf52ddc635a) 5.209 и более поздних версий.

## Открытие средства "Тренды Application Insights"

Окно "Тренды Application Insights" можно открыть одним из следующих способов:

* Выбрав **Обзор трендов телеметрии** на панели инструментов Application Insights.
* Щелкнув **Application Insights > Обзор трендов телеметрии** в контекстном меню проекта.
* Выбрав **Представление > Другие окна > Тренды Application Insights** в строке меню Visual Studio.

Затем может появиться запрос на выбор ресурса. Щелкните **Выбрать ресурс**, выполните вход, используя подписку Azure, а затем выберите ресурс Application Insights, для которого необходимо проанализировать тренды телеметрии.

## Выбор типа анализа трендов

![Меню общих типов анализа трендов](./media/app-insights-trends/app-insights-trends-1-750.png)

Сначала нужно выбрать один из пяти общих анализов трендов, каждый из которых анализирует данные за последние 24 часа.

* **Исследование проблем производительности запросов к серверу** — анализ запросов к службе, сгруппированных по времени ответа.
* **Анализ ошибок в запросах к серверу** — анализ запросов к службе, сгруппированных по коду ответа HTTP.
* **Проверка исключений в приложении** — анализ исключений в службе, сгруппированных по типу.
* **Проверка производительности зависимостей приложения** — анализ служб, которые вызывала ваша служба, сгруппированных по времени ответа.
* **Проверка настраиваемых событий** — анализ настроенных для службы пользовательских событий, сгруппированных по типу.

Чтобы перейти к этим готовым типам анализа, нужно нажать кнопку **Просмотреть общие типы анализа телеметрии** в верхнем левом углу окна трендов.

## Визуализация трендов в приложении

Средство "Тренды Application Insights" визуализирует данные телеметрии вашего приложения в виде временных рядов. Каждая такая визуализация представляет один тип данных телеметрии, сгруппированных по одному свойству, за определенный промежуток времени.

Например, можно просмотреть запросы к серверу, инициированные в определенной стране за последние 24 часа. В этом примере каждый пузырек на визуализации представляет число запросов к серверу, инициированных в определенной стране в течение часа.

С помощью элементов управления в верхней части окна можно настроить типы телеметрии, которые будут отображаться. Сначала выберите интересующие вас типы телеметрии, задав следующие параметры:

* **Тип телеметрии** — запросы к серверу, исключения, зависимости или пользовательские события.
* **Диапазон времени** — от последних 30 минут до последних 3 дней.
* **Группировать по** — по типу исключения, коду ошибки, стране или региону и т. д.

Затем щелкните **Анализировать данные телеметрии**, чтобы выполнить запрос.

Чтобы перемещаться между пузырьками в визуализации:

* Щелкните определенный пузырек, после чего в нижней части окна будут обновлены фильтры и выведены события, произошедшие за определенный период времени.
* Дважды щелкните пузырек, чтобы перейти к средству поиска и просмотреть отдельно все события телеметрии, произошедшие в течение этого периода времени.
* Удерживая нажатой клавишу **CTRL**, щелкните пузырек, чтобы отменить его выбор в визуализации.

> [AZURE.TIP] Средства анализа трендов и поиска позволяют выявлять события телеметрии, вызывающие неполадки в службе. Например, если пользователи заметят, что приложение стало хуже реагировать во второй половине дня, начните анализ проблемы с помощью трендов. Проанализируйте запросы к службе за последние несколько часов, сгруппированные по времени ответа. Просмотрите, нет ли необычайно большого ряда медленных запросов. Затем дважды щелкните этот пузырек, чтобы перейти к средству поиска, в котором задана фильтрация по этим событиям запроса. В этом средстве вы сможете просмотреть содержимое этих запросов и найти нужный код, чтобы устранить проблему.

## Фильтрация по определенным трендам

Элементы управления фильтрами, расположенные в нижней части окна, позволяют выявлять конкретные тренды. Чтобы применить фильтр, щелкните его название. Можно быстро переключаться между разными фильтрами, чтобы выявлять тренды, которые могут быть скрыты в определенном измерении телеметрии. При применении фильтра в одном измерении, например "Тип исключения", фильтры в других измерениях остаются активными, несмотря на то что они закрашены серым. Чтобы отменить фильтр, щелкните его еще раз. Удерживая нажатой клавишу **CTRL**, можно выбрать несколько фильтров в одном измерении.

![Фильтры тренда](./media/app-insights-trends/TrendsFiltering-750.png)

Вот как можно применить несколько фильтров:

1. Примените первый фильтр.
2. Нажмите кнопку **Apply selected filters and query again** (Применить выбранные фильтры и повторно отправить запрос) рядом с именем измерения первого фильтра. Таким образом будут повторно запрошены данные телеметрии по событиям, соответствующим первому фильтру.
3. Примените второй фильтр.
4. Повторите этот процесс, чтобы найти тренды в определенных подмножествах телеметрии. Например, можно найти запросы к серверу "GET Home/Index", инициированные в Германии и получившие код состояния 500.

Чтобы отменить один из этих фильтров, нажмите кнопку **Remove selected filters and query again** (Удалить выбранные фильтры и повторить запрос) для измерения.

![Несколько фильтров](./media/app-insights-trends/TrendsFiltering2-750.png)

## Поиск аномалий

Средство трендов может выделять пузырьки аномальных событий в одном временном ряду. В раскрывающемся меню **Тип представления** выберите **Количества за учетный период (выделение аномалий)** или **Проценты за учетный период (выделение аномалий)**. Красные пузырьки обозначают аномальные события.

Аномальными считаются события, связанные с которыми количество или процентный показатель в 2,1 раза превышают стандартное количество или процентный показатель, связанные с двумя последними периодами времени (например, 48 часов при просмотре событий за последние 24 часа).

![Цветные точки обозначают аномалии](./media/app-insights-trends/TrendsAnomalies-750.png)

> [AZURE.TIP] Выделение аномалий позволяет определить выбросы во временных рядах небольших пузырьков, которые трудно различить по размеру.

## <a name="next"></a>Дальнейшие действия


[Работа с Application Insights в Visual Studio](app-insights-visual-studio.md). Поиск телеметрии, просмотр данных в CodeLens и настройка Application Insights — все это в Visual Studio.

[Дополнительные данные телеметрии из Application Insights](app-insights-asp-net-more.md). Мониторинг использования, доступности, зависимостей и исключений. Интеграция трассировок из платформ ведения журналов. Написание пользовательской телеметрии.

[Навигация и панели мониторинга на портале Application Insights](app-insights-dashboards.md). Панели мониторинга, эффективные средства диагностики и анализа, оповещения, карта динамических зависимостей приложения, а также экспорт данных телеметрии.

<!---HONumber=AcomDC_0810_2016-->