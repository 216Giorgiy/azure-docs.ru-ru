<properties 
	pageTitle="Анализ трендов в Visual Studio | Microsoft Azure" 
	description="Сведения об анализе, визуализации и изучении трендов в данных телеметрии Application Insights в Visual Studio." 
	services="application-insights" 
    documentationCenter=".net"
	authors="numberbycolors" 
	manager="douge"/>

<tags 
	ms.service="application-insights" 
	ms.workload="tbd" 
	ms.tgt_pltfrm="ibiza" 
	ms.devlang="na" 
	ms.topic="get-started-article" 
	ms.date="07/14/2016" 
	ms.author="daviste"/>
	
# Анализ трендов в Visual Studio

Средство "Тренды Application Insights" визуализирует изменение важных событий телеметрии приложения с течением времени, помогая быстро выявлять проблемы и аномалии. В этом средстве можно перейти к более подробным диагностическим сведениям, что позволяет повысить производительность приложения, а также отслеживать причины исключений и анализировать данные пользовательских событий.

![Пример окна трендов](./media/app-insights-trends/app-insights-trends-hero-750.png)

> [AZURE.NOTE] Средство "Тренды Application Insights" доступно в Visual Studio 2015 с обновлением 3 и более поздними обновлениями, а также в [расширении средств анализа для разработчиков](https://visualstudiogallery.msdn.microsoft.com/82367b81-3f97-4de1-bbf1-eaf52ddc635a) 5.209 и более поздних версий.

## Открытие средства "Тренды Application Insights"

Открыть окно трендов Application Insights можно одним из следующих способов:

* Выбрав **Обзор трендов телеметрии** на панели инструментов Application Insights.
* Щелкнув **Application Insights > Обзор трендов телеметрии** в контекстном меню проекта.
* Выбрав **Представление > Другие окна > Тренды Application Insights** в строке меню Visual Studio.

Затем может появиться запрос на выбор ресурса. Щелкните **Выбрать ресурс**, выполните вход, используя подписку Azure, а затем в списке выберите ресурс Application Insights, для которого необходимо проанализировать тренды телеметрии.

## Выбор типа анализа трендов

![Меню общих типов анализа трендов](./media/app-insights-trends/app-insights-trends-1-750.png)

Сначала нужно выбрать один из пяти общих анализов трендов, каждый из которых анализирует данные за последние 24 часа.

* **Исследуйте проблемы производительности запросов к серверу** —анализ запросов к службе, сгруппированных по времени ответа.
* **Анализируйте ошибки в запросах к серверу** — анализ запросов к службе, сгруппированных по коду ответа HTTP.
* **Проверьте исключения в своем приложении** — анализ исключений в службе, сгруппированных по типу.
* **Check the performance of your application's dependencies** (Проверьте производительность зависимостей приложения) — анализ служб, которые вызывала ваша служба, сгруппированных по времени ответа.
* **Проверьте настраиваемые события** — анализ настроенных для службы пользовательских событий, сгруппированных по типу.

Чтобы перейти к этим готовым типам анализа, нужно нажать кнопку **Просмотреть общие типы анализа телеметрии** в верхнем левом углу окна трендов.

## Визуализация трендов в приложении

Средство "Тренды Application Insights" визуализирует данные телеметрии вашего приложения в виде временных рядов. Каждая такая визуализация представляет один тип данных телеметрии, сгруппированных по одному свойству, за определенный промежуток времени. Например, можно просмотреть запросы к серверу, инициированные в определенной стране за последние 24 часа. В этом примере каждый пузырек на визуализации представляет число запросов к серверу, инициированных в определенной стране или регионе в течение часа.

С помощью элементов управления в верхней части окна можно настроить типы телеметрии, которые будут отображаться. Сначала выберите интересующие вас типы телеметрии, задав следующие параметры:

* **Тип телеметрии** — запросы к серверу, исключения, зависимости или пользовательские события.
* **Диапазон времени** — от последних 30 минут до последних 3 дней.
* **Группировать по** —по типу исключения, коду ошибки, стране или региону и т. д.

Затем щелкните **Анализировать данные телеметрии**, чтобы выполнить запрос.

Чтобы перемещаться между пузырьками в визуализации:

* Щелкните определенный пузырек, после чего в нижней части окна будут обновлены фильтры и выведены события, произошедшие за определенный период времени.
* Дважды щелкните пузырек, чтобы перейти к средству поиска и просмотреть все события по отдельным данным телеметрии, произошедшие в течение этого периода времени.
* Удерживая нажатой клавишу CTRL, щелкните пузырек, чтобы отменить его выбор в визуализации.

> [AZURE.TIP] Средства анализа трендов и поиска, используемые совместно, позволяют выявить причины неполадок в службе среди тысяч событий телеметрии. Например, если в течение дня пользователи заметят, что приложение стало хуже реагировать, начните с трендов. Проанализируйте запросы к службе за последние несколько часов, сгруппированные по времени ответа. Просмотрите, нет ли необычайно большого ряда медленных запросов. Затем дважды щелкните этот пузырек, чтобы перейти к средству поиска для поиска по этим событиям запроса. В этом средстве вы сможете просмотреть содержимое этих запросов и перейти к соответствующему коду, чтобы устранить проблему.

## Фильтр

Элементы управления фильтрами, расположенные в нижней части окна, позволяют выявлять конкретные тренды. Чтобы применить фильтр, щелкните его название. Можно быстро переключаться между разными фильтрами, чтобы выявить тренды, которые могут быть скрыты в определенном измерении телеметрии. При применении фильтра в одном измерении, например тип исключения, фильтры в других измерениях остаются активными, несмотря на то, что они закрашены серым. Чтобы отменить фильтр, щелкните его еще раз. Удерживая нажатой клавишу CTRL, можно выбрать несколько фильтров в одном измерении.

![Фильтры тренда](./media/app-insights-trends/TrendsFiltering-750.png)

Вот как можно применить несколько фильтров:

1. Примените первый фильтр.
2. Нажмите кнопку **Apply selected filters and query again** (Применить выбранные фильтры и повторно отправить запрос) рядом с именем измерения первого фильтра. Таким образом, будут повторно запрошены данные телеметрии по событиям, соответствующим первому фильтру.
3. Примените второй фильтр.
4. Повторите этот процесс, чтобы найти тренды в определенных подмножествах телеметрии. Например, можно найти запросы к серверу GET Home/Index, _инициированные_ в Германии _и_ получившие код ответа 500.

Чтобы отменить один из этих фильтров, нажмите кнопку **Remove selected filters and query again** (Удалить выбранные фильтры и повторить запрос) для измерения.

![Несколько фильтров](./media/app-insights-trends/TrendsFiltering2-750.png)

## Поиск аномалий

Средство трендов может выделять пузырьки аномальных событий в одном временном ряду. В раскрывающемся списке "Тип представления" выберите **Количества за учетный период (выделение аномалий)** или **Проценты за учетный период (выделение аномалий)**. Красные пузырьки обозначают аномальные события. Аномальными считаются события, когда соответствующее количество или процентный показатель по таким же событиям за два последние периода времени (48 часов при просмотре событий за последние 24 часа и т. д.) превышает стандартное отклонение в 2,1 раза.

![Цветные точки обозначают аномалии](./media/app-insights-trends/TrendsAnomalies-750.png)

> [AZURE.TIP] Выделение аномалий позволяет определить выбросы во временных рядах небольших пузырьков, которые трудно различить по размеру.

## <a name="next"></a>Дальнейшие действия

||
|---|---
|**[Работа с Application Insights в Visual Studio](app-insights-visual-studio.md)**<br/>Поиск телеметрии, просмотр данных в CodeLens и настройка Application Insights — все это в Visual Studio |![Щелкните проект правой кнопкой мыши и последовательно выберите пункты "Application Insights" и "Поиск".](./media/app-insights-visual-studio/34.png)
|**[Добавление дополнительных данных](app-insights-asp-net-more.md)**<br/>Мониторинг использования, доступности, зависимостей и исключений. Интеграция трассировок из платформ ведения журналов. Написание пользовательской телеметрии. | ![Visual studio](./media/app-insights-asp-net/64.png)
|**[Работа с порталом Application Insights](app-insights-dashboards.md)**<br/>Панели мониторинга, эффективные средства диагностики и анализа, оповещения, карта динамических зависимостей приложения, а также экспорт телеметрии |![Visual Studio](./media/app-insights-asp-net/62.png)

<!---HONumber=AcomDC_0803_2016-->