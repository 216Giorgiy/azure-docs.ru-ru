---
title: 'Служба приложений Azure для развертывания на платформе Linux: пользовательский, многоконтейнерный или встроенный образ платформы  | Документация Майкрософт'
description: Выбор между пользовательским развертыванием контейнера Docker и многоконтейнерной или встроенной исполняющей средой для службы приложений на платформе Linux
keywords: служба приложений azure, веб-приложение, linux, oss
services: app-service
documentationCenter: ''
authors: msangapu
manager: cfowler
editor: ''
ms.assetid: ''
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/04/2018
ms.author: msangapu
ms.openlocfilehash: 012f78fc07f237e8ed532246c81a3c86bb6ab4ac
ms.sourcegitcommit: e221d1a2e0fb245610a6dd886e7e74c362f06467
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/07/2018
---
# <a name="custom-image-multi-container-or-built-in-platform-image"></a>Выбор между пользовательским, многоконтейнерным или встроенным образом платформы

[Служба приложений на платформе Linux](app-service-linux-intro.md) предусматривает три способа публикации приложения в Интернете:

- **Развертывание пользовательского образа.** Поместите свое приложение в образ Docker, который содержит все файлы и зависимости в готовом пакете.
- **Многоконтейнерное развертывание.** Поместите свое приложение в несколько контейнеров с помощью файла конфигурации Docker Compose или Kubernetes. Дополнительные сведения см. в разделе о [многоконтейнерном приложении](#multi-container-apps-supportability).
- **Развертывание приложения со встроенным образом платформы.** Наши встроенные в платформу образы содержат распространенные среды выполнения веб-приложений и зависимости, такие как Node и PHP. Используйте один из [методов развертывания службы приложений Azure](../app-service-deploy-local-git.md?toc=%2fazure%2fapp-service%2fcontainers%2ftoc.json) для развертывания приложения в хранилище веб-приложений, а затем используйте встроенный образ платформы для его запуска.

##<a name="which-method-is-right-for-your-app"></a>Какой метод подходит для приложения? 

Ниже приведены основные факторы, которые следует учитывать:

- **Доступность Docker в рабочем процессе разработки.** Развертывание пользовательского образа требует базового набора знаний о рабочем процессе разработки Docker. Для развертывания пользовательского образа для веб-приложения нужно опубликовать пользовательский образ на узле репозитория, таком как концентратор Docker. Если вы знакомы с Docker и можете добавлять задачи Docker в рабочий процесс сборки или уже опубликовали приложение в качестве образа Docker, пользовательский образ почти наверняка является лучшим вариантом.
- **Многоуровневая архитектура.** Позволяет развернуть несколько контейнеров, например для уровня веб-приложения и уровня API для разделения возможностей, с помощью многоконтейнерного образа. 
- **Производительность приложения.** Повысьте производительность многоконтейнерного приложения, например, кэш Redis. Для этого выберите многоконтейнерный образ.
- **Уникальные требования к среде выполнения.** Встроенные образы платформы соответствуют требованиям большинства веб-приложений, но ограничены в возможностях настройки. Приложение может иметь уникальные зависимости или другие требования среды выполнения, превышающие возможности встроенных образов.
- **Требования к сборке.** При [непрерывном развертывании](../app-service-continuous-deployment.md?toc=%2fazure%2fapp-service%2fcontainers%2ftoc.json) можно запустить приложение на платформе Azure непосредственно из исходного кода. Никакого внешнего процесса сборки или публикации не требуется. Однако имеется ограничение на возможность настройки и доступность средств сборки внутри обработчика развертывания [Kudu](https://github.com/projectkudu/kudu/wiki). Приложение может перерасти возможности Kudu, так как оно растет в своих зависимостях или требованиях для пользовательской логики сборки.
- **Требования к чтению и записи на диск.** Для всех веб-приложений выделяется том хранилища для веб-содержимого. Этот том, поддерживаемый службой хранилища Azure, подключается к `/home` в файловой системе приложения. В отличие от файлов в файловой системе контейнера, файлы в томе содержимого доступны для всех экземпляров масштабирования приложения, а модификации будут сохраняться между перезагрузками приложения. Однако задержка диска для тома содержимого выше и более изменчива, чем задержка локальной файловой системы контейнера. На доступ могут влиять обновления платформы, незапланированные простои и проблемы с сетевым подключением. Приложения, для которых требуется частый доступ только для чтения к файлам содержимого, могут получить преимущества от развертывания пользовательского образа, при котором файлы помещаются в файловую систему образа, а не на том содержимого.
- **Использование ресурсов сборки.** При развертывании приложения из исходного кода скрипты развертывания, выполняемые Kudu, используют те же вычислительные ресурсы и ресурсы хранения плана службы приложений, что и выполняемое приложение. Крупные развертывания приложений могут потреблять больше ресурсов или времени, чем необходимо. В частности, многие рабочие процессы развертывания создают большую активность на диске в томе содержимого приложения, который не оптимизирован для такой активности. Пользовательский образ доставляет все файлы и зависимости приложения в Azure в одном пакете без дополнительных передач файлов или действий по развертыванию.
- **Необходимость быстрой итерации.** Для создания приложения в образе Docker требуются дополнительные шаги сборки. Чтобы изменения вступили в силу, необходимо отправлять новый образ в репозиторий при каждом обновлении. Затем эти обновления извлекаются в среду Azure. Если один из встроенных контейнеров соответствует потребностям вашего приложения, развертывание из источника может обеспечить ускоренный рабочий процесс разработки.

## <a name="multi-container-apps-supportability"></a>Поддержка многоконтейнерного приложения

### <a name="supported-docker-compose-configuration-options"></a>Поддерживаемые параметры конфигурации Docker Compose:
- command;
- entrypoint;
- environment;
- image;
- ports;
- restart;
- services;
- volumes.

### <a name="unsupported-docker-compose-configuration-options"></a>Неподдерживаемые параметры конфигурации Docker Compose:
- build (недопустимо);
- depends_on (игнорируется);
- networks (игнорируется);
- secrets (игнорируется);
- порты, отличные от 80 и 8080 (игнорируются).

> [!NOTE]
> Другие параметры, которые не указаны здесь явно, также игнорируются в общедоступной предварительной версии.

### <a name="supported-kubernetes-configuration-options"></a>Поддерживаемые параметры конфигурации Kubernetes:
- args;
- command;
- containers;
- image;
- name;
- ports;
- spec.

> [!NOTE]
>Другие параметры Kubernetes, которые не указаны здесь явно, не поддерживаются в общедоступной предварительной версии.
>