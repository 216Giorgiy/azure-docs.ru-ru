---
title: "Создание внешней среды службы приложений Azure"
description: "Сведения о создании среды службы приложений Azure во время создания приложения или с помощью пользовательского интерфейса автономного создания."
services: app-service
documentationcenter: na
author: ccompy
manager: stefsch
ms.assetid: 94dd0222-b960-469c-85da-7fcb98654241
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/13/2017
ms.author: ccompy
ms.translationtype: Human Translation
ms.sourcegitcommit: cb4d075d283059d613e3e9d8f0a6f9448310d96b
ms.openlocfilehash: 3f1418b71a7327264e29e3f08ef97b254ee9930d
ms.contentlocale: ru-ru
ms.lasthandoff: 06/26/2017

---
# <a name="create-an-external-app-service-environment"></a>Создание внешней среды службы приложений #

Среда службы приложений (ASE) — это развернутая служба приложений Azure в подсети виртуальной сети Azure. Существует два способа развертывания ASE:

- с виртуальным IP-адресом на основе внешнего IP-адреса, что часто называют _внешней средой ASE_;
- с виртуальным IP-адресом на основе внутреннего IP-адреса, что часто называют _средой службы приложений с внутренней подсистемой балансировки нагрузки_, так как внутренней конечной точкой является внутренняя подсистема балансировки нагрузки (ILB).

В этой статье показано, как создать внешнюю среду ASE. Общие сведения о ASE см. в статье [Introduction to the App Service Environment] (Введение в среду службы приложения).[Intro] Сведения о создании среды ASE с внутренней подсистемой балансировки нагрузки см. в [этой статье][MakeILBASE].

## <a name="before-you-create-your-ase"></a>Перед созданием среды службы приложений ##

Важно помнить о параметрах, которые нельзя изменить после создания ASE:

- Расположение
- Подписка
- Группа ресурсов
- Используемая виртуальная сеть
- Используемая подсеть
- Размер подсети

> [!NOTE]
> При выборе виртуальной сети и подсети убедитесь, что они достаточно большие для расширения в будущем. Рекомендуемый размер — `/25` с 128 адресами.
>

## <a name="three-ways-to-create-an-ase"></a>Три способа создания ASE ##

Среду службы приложений можно создать тремя способами:

- При создании плана службы приложений (одновременно создается ASE и план службы приложений).
- Из пользовательского интерфейса автономного создания среды ASE (создается только ASE). Это расширенный пользовательский интерфейс создания ASE. Именно с его помощью создается среда службы приложений с внутренней подсистемой балансировки нагрузки.
- Из шаблона Resource Manager. Этот способ предназначен для опытных пользователей. Сведения о нем см. в статье [Создание среды службы приложений с внутренней подсистемой балансировки нагрузки с помощью шаблонов Azure Resource Manager][MakeASEfromTemplate].

Среда ASE, созданная без внутренней подсистемы балансировки нагрузки, имеет общедоступный виртуальный IP-адрес. Это означает, что весь HTTP-трафик к приложениям ASE будет проходить через доступный в Интернете IP-адрес. Среда ASE с внутренней подсистемой балансировки нагрузки содержит конечную точку в IP-адресе виртуальной сети. Эти приложения не доступны напрямую в Интернете.

## <a name="create-an-ase-and-an-app-service-plan-together"></a>Одновременное создание среды ASE и плана службы приложений ##

План службы приложений представляет собой контейнер приложений. При создании приложения в службе приложений всегда необходимо выбрать или создать план службы приложений. Модель контейнера имеет такой вид: среды содержат планы служб приложений, а планы служб приложений содержат приложения.

Чтобы создать среду ASE во время создания плана службы приложений, сделайте следующее:

1. На [портале Azure](https://portal.azure.com/) выберите **Создать &gt; Интернет + мобильные устройства &gt; Веб-приложение**.

    ![][1]
1. Выберите свою подписку. Если у вас есть несколько подписок, имейте в виду, что для создания приложения в среде ASE необходимо использовать ту же подписку, которая использовалась при создании самой среды ASE.
1. Выберите или создайте группу ресурсов. *Группы ресурсов* позволяют управлять ресурсами Azure как единым целым. Кроме того, они могут быть полезны при настройке правил *контроля доступа на основе ролей* (RBAC) для приложений. Дополнительные сведения см. в [обзоре Azure Resource Manager][ARMOverview].
1. Выберите план службы приложений и щелкните **Создать**.

    ![][2]
1. В раскрывающемся списке **Расположение** выбирайте регион, в котором необходимо создать среду ASE. Если вы выберете имеющуюся среду ASE, вы просто создадите в ней план службы приложений (то есть новая среда ASE не создается).
1. Щелкните пользовательский интерфейс **Pricing Plan** (Ценовой план) и выберите один из номеров SKU уровня **Isolated**. Выбор расположения и номера SKU уровня **Isolated**, недоступного в имеющейся среде ASE, означает, что вы хотите создать еще одну среду в этом расположении. После нажатия кнопки **Выбрать** на странице карты расценок отобразится пользовательский интерфейс создания ASE. Номер SKU уровня **Isolated** доступен только в среде ASE. Это также означает, что в среде ASE можно использовать только номер SKU уровня **Isolated**.

    ![][3]
1. Введите имя среды ASE. Это имя используется в имени для обращения к приложению. Если для ASE указано имя _appsvcenvdemo_, то именем поддомена будет *.appsvcenvdemo.p.azurewebsites.net*. Если затем создать веб-приложение с именем *mytestapp*, то к нему можно будет обращаться по адресу *mytestapp.appsvcenvdemo.p.azurewebsites.net*. В имени ASE нельзя использовать пробелы. Если вы используете в имени символы верхнего регистра, в доменном имени будут использоваться такие же символы нижнего регистра.

    ![][4]
1. Выберите **Создать** или **Выбрать существующую**. Параметр "Выбрать существующую" доступен только при наличии виртуальной сети в выбранном регионе. При выборе **Создать** необходимо указать имя виртуальной сети. После этого создается виртуальная сеть Resource Manager с тем же именем и адресным пространством `192.168.250.0/23` в выбранном регионе. Если вы выбрали параметр **Выбрать существующую**, вам потребуется:
    1. Выбрать блок адресов виртуальной сети (при наличии более одного).
    2. Указать новое имя подсети.
    3. Выбрать размер подсети. **Напоминание. Размер подсети следует задавать с учетом увеличения среды службы приложений в будущем.** Рекомендуемый размер подсети — `/25`, которая содержит 128 адресов и может обслуживать среду службы приложений максимального размера. Мы не советуем задавать, например, размер `/28`, так как доступно только 16 адресов. По требованиям инфраструктуры следует использовать по крайней мере 5 адресов. Это позволяет масштабировать 11 экземпляров в подсети `/28`.
    4. Выбрать диапазон IP-адресов подсети.

Создание среды ASE начинается после нажатия кнопки **Создать**. В течение этого процесса также создается приложение и план службы приложений. Среда ASE, план службы приложений и приложение создаются в рамках одной подписки и в той же группе ресурсов. Если вы хотите, чтобы среда, план службы приложений и приложение находились в разных подписках, или если нужно создать среду ASE с внутренней подсистемой балансировки нагрузки, тогда используйте пользовательский интерфейс автономного создания.

## <a name="create-an-ase-by-itself"></a>Автономное создание среды ASE ##

В процессе автономного создания создается только среда ASE без содержимого. В этом случае взимается ежемесячная плата за пустую инфраструктуру. Основные причины использования этого рабочего процесса заключаются в необходимости создать среду ASE с внутренней подсистемой балансировки нагрузки или в собственной группе ресурсов. После создания среды ASE вы можете создать в ней приложения, используя обычные методы или выбрав новую среду ASE в качестве расположения.

Чтобы получить доступ к пользовательскому интерфейсу создания среды ASE, выполните поиск в Azure Marketplace по запросу ***Среда службы приложений*** или выберите "Создать &gt; Интернет + мобильные устройства &gt; Среда службы приложений". Чтобы создать среды ASE с помощью автономного процесса создания, сделайте следующее:

1. Укажите имя среды ASE. Имя, указанное для ASE, будет использоваться для веб-приложений, созданных в этой среде ASE. Если для ASE указано имя *mynewdemoase*, то именем поддомена будет *.mynewdemoase.p.azurewebsites.net*. Если затем создать веб-приложение с именем *mytestapp*, то к нему можно будет обращаться по адресу *mytestapp.mynewdemoase.p.azurewebsites.net*. В имени ASE нельзя использовать пробелы. Если вы используете в имени символы верхнего регистра, в доменном имени будут использоваться такие же символы нижнего регистра. Если используется внутренний балансировщик нагрузки, то имя среды ASE не используется в поддомене, а указывается явно во время создания среды ASE.

    ![][5]
1.  Выберите свою подписку. Подписка, указанная для среды ASE, также будет использоваться для создания всех приложений в этой среде ASE. Невозможно разместить среду ASE в виртуальной сети, которая находится в другой подписке.
1.  Выберите или укажите новую группу ресурсов. Для среды ASE нужно использовать ту же группу ресурсов, что и для виртуальной сети. Если выбрать имеющуюся виртуальную сеть, то это соответствующим образом изменит выбор группы ресурсов для среды ASE.

    ![][6]
1. Выберите виртуальную сеть и расположение. Вы можете создать виртуальную сеть или выбрать имеющуюся. В случае выбора создания виртуальной сети можно указать ее имя и расположение. У новой виртуальной сети будет диапазон адресов 192.168.250.0/23 и подсеть **default**, определенная как 192.168.250.0/24. Вы можете выбрать только виртуальную сеть Resource Manager. Параметр **Тип VIP** определяет, возможен ли доступ к среде ASE непосредственно из Интернета (внешний) или через внутреннюю подсистему балансировки нагрузки. Дополнительные сведения см. в статье [Создание и использование внутренней подсистемы балансировки нагрузки со средой службы приложений][MakeILBASE]. Если для параметра "Тип VIP" выбрать значение **Внешний**, то можно будет выбрать количество внешних IP-адресов, с которыми создается система предназначенных для подключений SSL на основе IP-адреса. Если выбрать значение **Внутренний**, то потребуется указать поддомен, который будет использовать среда ASE. Среды ASE можно развертывать в виртуальных сетях, использующих *либо* диапазоны общедоступных адресов, *либо* адресные пространства RFC1918 (т. е. частные адреса). Чтобы использовать виртуальную сеть с диапазоном общедоступных адресов, потребуется создать ее заранее. В случае выбора имеющейся виртуальной сети во время создания среды ASE необходимо будет создать подсеть. **На портале невозможно использовать предварительно созданную подсеть. Создать среду ASE с имеющейся подсетью можно с помощью шаблона Resource Manager.** Сведения о создании среды ASE из шаблона см. в статье [Создание среды службы приложений с внутренней подсистемой балансировки нагрузки с помощью шаблонов Azure Resource Manager][MakeASEfromTemplate].

## <a name="app-service-environment-v1"></a>Среда службы приложений версии 1 ##

Вы по прежнему можете создать экземпляры первой версии среды ASE (ASEv1). Для этого выполните поиск в Azure Marketplace по запросу **Среда службы приложений версии 1**. Процесс создания совпадает с автономным созданием среды ASE. После создания ASEv1 вы получите два интерфейса и две рабочих роли. При использовании среды ASEv1 вам потребуется управлять этими интерфейсами и рабочими ролями. Они не добавляются автоматически при создании планов служб приложений. Внешний интерфейс выступает в качестве конечных точек HTTP или HTTPS и отправляет трафик в рабочие роли. Это роли, в которых размещены ваши приложения. Их количество можно изменить после создания среды ASE. Сведения об ASEv1 см. в статье [Введение в среду службы приложения][ASEv1Intro]. Дополнительные сведения о масштабировании и мониторинге среды ASEv1, а также управлении ею см. в статье [Настройка среды службы приложений][ConfigureASEv1].

<!--Image references-->
[1]: ./media/how_to_create_an_external_app_service_environment/createexternalase-create.png
[2]: ./media/how_to_create_an_external_app_service_environment/createexternalase-aspcreate.png
[3]: ./media/how_to_create_an_external_app_service_environment/createexternalase-pricing.png
[4]: ./media/how_to_create_an_external_app_service_environment/createexternalase-embeddedcreate.png
[5]: ./media/how_to_create_an_external_app_service_environment/createexternalase-standalonecreate.png
[6]: ./media/how_to_create_an_external_app_service_environment/createexternalase-network.png



<!--Links-->
[Intro]: ./intro.md
[MakeExternalASE]: ./create-external-ase.md
[MakeASEfromTemplate]: ./create-from-template.md
[MakeILBASE]: ./create-ilb-ase.md
[ASENetwork]: ./network-info.md
[ASEReadme]: ./readme.md
[UsingASE]: ./using-an-ase.md
[UDRs]: ../../virtual-network/virtual-networks-udr-overview.md
[NSGs]: ../../virtual-network/virtual-networks-nsg.md
[ConfigureASEv1]: ../../app-service-web/app-service-web-configure-an-app-service-environment.md
[ASEv1Intro]: ../../app-service-web/app-service-app-service-environment-intro.md
[webapps]: ../../app-service-web/app-service-web-overview.md
[mobileapps]: ../../app-service-mobile/app-service-mobile-value-prop.md
[APIapps]: ../../app-service-api/app-service-api-apps-why-best-platform.md
[Functions]: ../../azure-functions/index.yml
[Pricing]: http://azure.microsoft.com/pricing/details/app-service/
[ARMOverview]: ../../azure-resource-manager/resource-group-overview.md

