<properties
	pageTitle="Высокая плотность размещения в службе приложений Azure | Microsoft Azure"
	description="Высокая плотность размещения в службе приложений Azure"
	authors="btardif"
	manager="wpickett"
	editor=""
	services="app-service\web"
	documentationCenter=""/>

<tags
	ms.service="app-service-web"
	ms.workload="web"
	ms.tgt_pltfrm="na"
	ms.devlang="multiple"
	ms.topic="article"
	ms.date="08/07/2016"
	ms.author="byvinyal"/>

# Высокая плотность размещения в службе приложений Azure#

При использовании службы приложений ваше приложение будет отделено от емкости, выделяемой для него из 2 источников:

- **Приложение** — представляет приложение и конфигурацию его среды выполнения. Например, оно включает версию .NET, которую должна загружать среда выполнения, а также параметры приложения и т. д.

- **План службы приложений** — определяет характеристики емкости, доступный набор функций и расположение приложения. Это могут быть следующие характеристики: большие (четырехъядерные) компьютеры, четыре экземпляра или функции уровня "Премиум" в восточной части США.

Приложение всегда связано с одним планом службы приложений, но план службы приложений может предоставлять емкость для одного или нескольких приложений.

Это означает, что платформа обеспечивает гибкость, изолируя одно приложение или позволяя нескольким приложениям совместно использовать ресурсы путем совместного доступа к плану службы приложений.

Однако если несколько приложений совместно используют план службы приложений, один экземпляр этого приложения будет выполняться на каждом экземпляре данного плана службы приложений.

## Независимое масштабирование приложений##
*Независимое масштабирование приложений* — это функция, которую можно включить на уровне плана службы приложений и затем использовать для каждого приложения.

Она позволяет масштабировать приложение независимо от плана службы приложений, в котором оно размещено. Таким образом, план службы приложений может быть настроен на предоставление 10 экземпляров, а приложение можно настроить, например, на масштабирование только до 5 из них.

На основе приведенного ниже шаблона Azure Resource Manager можно создать план службы приложений, который масштабируется до 10 экземпляров, и приложение, которое независимо от плана службы приложений масштабируется только до 5 экземпляров.

Для этого план службы приложений присваивает свойству **per-site scaling** значение True (`"perSiteScaling": true`), а приложение для **количества используемых рабочих ролей** устанавливает значение 1 (`"properties": { "numberOfWorkers": "1" }`).

    {
        "$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
        "contentVersion": "1.0.0.0",
        "parameters":{
            "appServicePlanName": { "type": "string" },
            "appName": { "type": "string" }
         },
        "resources": [
        {
            "comments": "App Service Plan with per site perSiteScaling = true",
            "type": "Microsoft.Web/serverFarms",
            "sku": {
                "name": "S1",
                "tier": "Standard",
                "size": "S1",
                "family": "S",
                "capacity": 10
                },
            "name": "[parameters('appServicePlanName')]",
            "apiVersion": "2015-08-01",
            "location": "West US",
            "properties": {
                "name": "[parameters('appServicePlanName')]",
                "perSiteScaling": true
            }
        },
        {
            "type": "Microsoft.Web/sites",
            "name": "[parameters('appName')]",
            "apiVersion": "2015-08-01-preview",
            "location": "West US",
            "dependsOn": [ "[resourceId('Microsoft.Web/serverFarms', parameters('appServicePlanName'))]" ],
            "properties": { "serverFarmId": "[resourceId('Microsoft.Web/serverFarms', parameters('appServicePlanName'))]" },
            "resources": [ {
                    "comments": "",
                    "type": "config",
                    "name": "web",
                    "apiVersion": "2015-08-01",
                    "location": "West US",
                    "dependsOn": [ "[resourceId('Microsoft.Web/Sites', parameters('appName'))]" ],
                    "properties": { "numberOfWorkers": "1" }
             } ]
         }]
    }


## Рекомендуемая конфигурация для высокой плотности размещения

Независимое масштабирование приложений — это функция, которая включается как в общедоступных регионах Azure, так и в средах службы приложений. Однако рекомендуется использовать среды службы приложений, так как они предоставляют дополнительные возможности и пулы большей емкости.

Чтобы настроить высокую плотность размещения для приложений, выполните следующие действия.

1. Настройте среду службы приложений и выберите рабочий пул, который будет выделен для сценария с высокой плотностью размещения.

1. Создайте один план службы приложений и настройте его для использования всей доступной емкости в рабочем пуле.

1. Для плана службы приложений задайте флагу perSiteScaling значение True.

1. Новые сайты будут созданы и назначены этому плану службы приложений, при этом для свойства **numberOfWorkers** будет задано значение **1**. Это позволит достичь максимальной плотности в этом рабочем пуле.

1. Число рабочих ролей можно настроить отдельно для каждого сайта, чтобы предоставить дополнительные ресурсы согласно требованиям. Например, для сайта с высоким уровнем использования свойству **numberOfWorkers** можно задать значение **3**, чтобы обеспечить большую вычислительную мощность для этого приложения, а для сайтов с низким уровнем использования свойству **numberOfWorkers** можно задать значение **1**.

<!---HONumber=AcomDC_0907_2016-->