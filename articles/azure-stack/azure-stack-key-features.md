---
title: Основные возможности и концепции Azure Stack | Документация Майкрософт
description: Узнайте об основных возможностях и концепциях Azure Stack.
services: azure-stack
documentationcenter: ''
author: jeffgilb
manager: femila
editor: ''
ms.assetid: 09ca32b7-0e81-4a27-a6cc-0ba90441d097
ms.service: azure-stack
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/14/2019
ms.author: jeffgilb
ms.reviewer: unknown
ms.openlocfilehash: 1b533c945fdcfc3d1072a7d8a513126ca3f1f72a
ms.sourcegitcommit: 70471c4febc7835e643207420e515b6436235d29
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/15/2019
ms.locfileid: "54303590"
---
# <a name="key-features-and-concepts-in-azure-stack"></a>Основные возможности и концепции Azure Stack
Если вы новичок в работе с Microsoft Azure Stack, вам поможет данное описание условий и функций этого продукта.

## <a name="personas"></a>Люди
В Microsoft Azure Stack существуют два вида пользователей: оператор и пользователь.

* **Оператор** Azure Stack может настроить Azure Stack, управляя предложениями, планами, службами, квотами и ценами, чтобы предоставить ресурсы своим пользователям клиента. Операторы также управляют емкостью и реагируют на оповещения.  
* **Пользователь** Azure Stack (также называемый клиентом) использует службы, которые предлагает оператор. Пользователи могут подготавливать к работе, отслеживать и управлять службами, на которые они подписаны, например, веб-приложениями, хранилищем и виртуальными машинами.

## <a name="portal"></a>Microsoft Azure
Основными методами взаимодействия с Microsoft Azure Stack являются портал администрирования, пользовательский портал и PowerShell.

Каждый портал Azure Stack размещается в отдельных экземплярах Azure Resource Manager. Оператор использует портал администрирования для управления Azure Stack, а также для таких операций, как создание предложений клиентов. Пользовательский портал (также называемый порталом клиента) предоставляет возможность самообслуживания при использовании облачных ресурсов, например, виртуальных машин, учетных записей хранения и веб-приложений. Дополнительные сведения см. в разделе [Использование портала администрирования в Azure Stack](azure-stack-manage-portals.md).

## <a name="identity"></a>Удостоверение 
Azure Stack использует Azure Active Directory (Azure AD) или службы федерации Active Directory (AD FS) в качестве поставщика удостоверений.  

### <a name="azure-active-directory"></a>Azure Active Directory
Azure AD — это облачный, мультитенантный поставщик удостоверений Майкрософт. В большинстве гибридных сценариев в качестве хранилище удостоверений используется Azure AD.

### <a name="active-directory-federation-services"></a>службы федерации Active Directory;
Вы можете использовать службы федерации Active Directory (AD FS) для развертываний Azure Stack без подключения. Поставщики ресурсов Azure Stack и другие приложения работают с AD FS таким же образом, как и с Azure AD. Azure Stack включает собственный экземпляр Active Directory и API Graph Active Directory. Пакет средств разработки Azure Stack поддерживает следующие сценарии AD FS:

- вход в систему развертывания с помощью AD FS;
- создание виртуальной машины с секретами в хранилище ключей;
- создание хранилища для хранения секретов и получения доступа к ним;
- создание пользовательских ролей RBAC в подписке;
- назначение пользователям ролей RBAC в ресурсах;
- создание ролей RBAC в масштабе всей системы через Azure PowerShell;
- вход в качестве пользователя с помощью Azure PowerShell;
- создание субъектов-служб, чтобы использовать их для входа в Azure PowerShell.


## <a name="regions-services-plans-offers-and-subscriptions"></a>Регионы, службы, планы, предложения и подписки
В Azure Stack службы доставляются клиентам с помощью регионов, подписок, предложений и планов. Клиенты могут подписаться на несколько предложений. В предложении может быть один или несколько планов, а в плане может быть одна или несколько служб.

![](media/azure-stack-key-features/image4.png)

Пример иерархии подписок клиента на предложения с различными планами и службами.

### <a name="regions"></a>регионы
Регионы Azure Stack являются основным элементом масштаба и управления. Организация может иметь несколько регионов с ресурсами в каждом из них. В регионах также могут быть доступны различные предложения служб. В Пакете средств разработки Azure Stack поддерживается только один регион. Он по умолчанию называется *local*.

### <a name="services"></a>Службы
Microsoft Azure Stack позволяет поставщикам предоставлять самые разнообразные службы и приложения, такие как виртуальные машины, базы данных SQL Server, SharePoint, Exchange и многое другое.

### <a name="plans"></a>Планы
Планы — это группы, содержащие одну или несколько служб. Поставщик создает планы, чтобы предложить их клиентам. В свою очередь, клиенты подписываются на предложения, чтобы использовать содержащиеся в них планы и службы.

Для каждой службы, добавленной в план, можно задать параметры квоты, которые помогут управлять емкостью облака. Квоты могут задавать ограничения, например для виртуальных машин, ОЗУ и ЦП, и применяются к подписке пользователя. Квоты для разных расположений могут отличаться. Например, план, содержащий службы вычислений из региона А, может иметь квоту в две виртуальные машины, 4 ГБ ОЗУ и 10 ядер ЦП.

При создании предложения администратор служб может добавить **базовый план**. Эти базовые планы включаются по умолчанию, когда клиент подписывается на данное предложение. Когда пользователь подписывается (и создается подписка), он получает доступ к поставщикам ресурсов, указанным в этих базовых планах (с учетом установленных квот).

Кроме того, администратор служб может добавить в предложение **дополнительные планы** . Дополнительные планы не включаются по умолчанию в подписке. Это дополнительные планы (квоты), доступные в предложении, которые владелец подписки добавляет в свои подписки.

### <a name="offers"></a>Предложения
Предложения — это группы, содержащие один или несколько планов, которые поставщики предлагают клиентам купить (подписаться на них). Например, предложение "Альфа" может содержать план A с набором служб вычислений и план Б с набором служб хранения данных и сети.

Предложение включает в себя набор базовых планов, и администраторы служб могут создать дополнительные планы, которые клиенты могут добавить в свою подписку.

### <a name="subscriptions"></a>Подписки
Подписка позволяет клиентам покупать ваши предложения. Подписка представляет собой сочетание клиента и предложения. У клиента могут быть подписки на несколько предложений. Каждая подписка относится только к одному предложению. Подписки клиента определяют, какие к каким планам и службам у него есть доступ.

Подписки помогают поставщикам организовывать облачные ресурсы и службы и получать доступ к ним.

Для администратора во время развертывания создается подписка поставщика по умолчанию Эта подписка позволяет управлять Azure Stack, развертывать дополнительные поставщики ресурсов, а также создавать планы и предложения для клиентов. Подписка не должна использоваться для запуска клиентских рабочих нагрузок и приложений. Начиная с версии 1804, две дополнительные подписки дополняют подписку поставщика по умолчанию. Это подписка для контроля использования и подписка для контроля потребления. Эти подписки упрощают разделение управления базовой инфраструктурой, рабочими нагрузками и дополнительными поставщиками ресурсов.  

## <a name="azure-resource-manager"></a>Azure Resource Manager
Используя Azure Resource Manager, вы можете работать с ресурсами инфраструктуры в декларативной модели на основе шаблонов.   Он предоставляет единый интерфейс для развертывания компонентов решения и управления ими. Подробные сведения и рекомендации см. в разделе [Общие сведения об Azure Resource Manager](../azure-resource-manager/resource-group-overview.md).

### <a name="resource-groups"></a>Группы ресурсов
Группы ресурсов — это коллекции ресурсов, служб и приложений, и каждый ресурс имеет тип, такой как виртуальные машины, виртуальные сети, общедоступные IP-адреса, учетные записи хранения и веб-сайты. Каждый ресурс должен принадлежать к группе ресурсов. Таким образом, группы ресурсов позволяют логически упорядочить ресурсы, например по рабочей нагрузке или по расположению. В Azure Stack управление такими ресурсами, как планы и предложения, осуществляется в группах ресурсов.

В отличие от [Azure](../azure-resource-manager/resource-group-move-resources.md), ресурсы Azure Stack невозможно перемещать между группами ресурсов. При просмотре свойств ресурса или группы ресурсов на портале администрирования Azure Stack кнопка *Переместить* отключена и недоступна. Кроме того, применение действий **Изменить группу ресурсов** или **Изменить подписку** из группы ресурсов или свойств элемента группы ресурсов не поддерживается. Все попытки перемещения будут завершаться ошибкой.
 
### <a name="azure-resource-manager-templates"></a>Шаблоны Azure Resource Manager
С помощью Azure Resource Manager можно создать шаблон (в формате JSON), определяющий развертывание и конфигурацию приложения. Этот шаблон, который также называется шаблоном диспетчера ресурсов Azure, предоставляет декларативный способ определения развертывания. С помощью шаблона можно повторно развернуть приложение на протяжении всего его жизненного цикла и гарантировать, что ресурсы развертываются в согласованном состоянии.

## <a name="resource-providers-rps"></a>Поставщики ресурсов
Поставщики ресурсов — это веб-службы, которые образуют основу всех служб IaaS и PaaS на платформе Azure. Azure Resource Manager использует разные поставщики ресурсов для предоставления доступа к службам.

Существует четыре основных поставщика ресурсов: сеть, служба хранилища, вычислительная среда и хранилище ключей. Каждый из этих поставщиков ресурсов поможет вам настроить соответствующие ресурсы и управлять ими. Кроме того, администраторы служб могут добавлять новые поставщики ресурсов.

### <a name="compute-rp"></a>Поставщик вычислительных ресурсов
Поставщик вычислительных ресурсов позволяет клиентам Azure Stack создавать собственные виртуальные машины. Поставщик вычислительных ресурсов включает в себя возможность создания виртуальных машин, а также расширений виртуальной машины. Служба расширений виртуальной машины обеспечивает возможности IaaS для виртуальных машин Windows и Linux.  Например, вы можете использовать поставщика вычислительных ресурсов для предоставления виртуальной машины Linux и запускать Bash-скрипты во время развертывания для настройки виртуальной машины.

### <a name="network-rp"></a>Поставщик сетевых ресурсов
Поставщик сетевых ресурсов предоставляет ряд функций программно-конфигурируемой сети (SDN) и виртуализацию функций сети (NFV) для частного облака.  Кроме того, с помощью поставщика сетевых ресурсов можно создавать такие ресурсы, как балансировщики нагрузки ПО, общедоступные IP-адреса, группы безопасности сети и виртуальные сети.

### <a name="storage-rp"></a>Поставщик ресурсов хранилища
Поставщик ресурсов хранилища предоставляет четыре службы хранения, совместимые с Azure: большой двоичный объект, таблица, очередь и управление учетными записями. Он также предлагает облачную службу администрирования хранилища, чтобы облегчить администрирование служб совместимого с Azure хранилища. Служба хранилища Azure обеспечивает гибкость хранения и извлечения большого количества неструктурированных данных, таких как документы и мультимедийные файлы, с помощью больших двоичных объектов Azure, а также структурированных данных на основе NoSQL с помощью таблиц Azure. Дополнительные сведения о службе хранилища Azure см. в статье [Введение в хранилище Microsoft Azure](../storage/common/storage-introduction.md).

#### <a name="blob-storage"></a>Хранилище BLOB-объектов
Хранилище BLOB-объектов содержит любой набор данных. BLOB-объект может представлять собой текстовые или двоичные данные любого типа, такие как документ, файл мультимедиа или установщик приложения. Табличное хранилище содержит структурированные наборы данных. Табличное хранилище представляет собой хранилище данных NoSQL типа "ключ-атрибут", которое позволяет ускорить разработку и доступ к большим объемам данных. Хранилище очередей обеспечивает надежный обмен сообщениями для обработки рабочего процесса и для взаимодействия между компонентами облачных служб.

Все большие двоичные объекты организованы в контейнеры. Контейнеры также предоставляют удобный способ назначения политик безопасности группам объектов. Учетная запись хранения может содержать любое количество контейнеров, а контейнер может содержать любое количество больших двоичных объектов. Емкость учетной записи хранения ограничена 500 ТБ. Хранилище больших двоичных объектов предлагает три типа больших двоичных объектов: блочные, добавочные и страничные (диски). Блочные BLOB-объекты оптимизированы для потоковой передачи и хранения облачных объектов и отлично подходят для хранения документов, файлов мультимедиа, резервных копий и т. д. Добавочные большие двоичные объекты схожи с блочными BLOB-объектами, однако они оптимизированы для операций добавления. Добавочный большой двоичный объект можно обновить только путем добавления в его конец нового блока. Эти большие двоичные объекты — хороший вариант для таких сценариев, как ведение журнала, в которых новые данные должны записываться только в конец большого двоичного объекта. Страничные BLOB-объекты оптимизированы для представления дисков IaaS и поддержки произвольных записей и могут иметь размер до 1 ТБ. Сетевой диск IaaS, присоединенный к виртуальной машине Azure, представляет собой виртуальный жесткий диск (VHD), хранящийся в виде BLOB-объекта страничного типа.

#### <a name="table-storage"></a>Хранилище таблиц
Предоставляемое корпорацией Майкрософт хранилище таблиц представляет собой хранилище NoSQL типа "ключ-атрибут", имеющее бессхемную структуру в отличие от традиционных реляционных баз данных. Так как в хранилищах данных нет схем, данные можно легко адаптировать по мере развития потребностей приложения. Простое в использовании табличное хранилище позволяет разработчикам быстро создавать приложения. Табличное хранилище является хранилищем типа "ключ-атрибут", то есть каждая сущность в таблице хранится вместе с типовым именем свойства. Это имя свойства может использоваться для фильтрации и указания критериев выбора. Коллекция свойств с их значениями представляют собой сущность. Поскольку хранилище таблиц является бессхемным, две сущности в одной и той же таблице могут содержать разные коллекции свойств, и эти свойства могут относиться к разным типам. Табличное хранилище можно использовать для хранения гибких наборов данных, например пользовательских данных для веб-приложений, адресных книг, сведений об устройстве, а также метаданных любого другого типа, которые требуются вашей службе. В таблице можно хранить любое количество сущностей, а учетная запись хранения может содержать любое количество таблиц в пределах емкости учетной записи.

#### <a name="queue-storage"></a>Хранилище очередей
Хранилище очередей Azure — это служба, обеспечивающая обмен сообщениями в облаке между компонентами приложения. При разработке приложений для масштабирования компоненты приложения часто не связаны между собой, так что они могут масштабироваться независимо друг от друга. Хранилище очередей обеспечивает асинхронный обмен сообщениями для взаимодействия между компонентами приложения независимо от того, где они выполняются: в облаке, на рабочем столе, локальном сервере или мобильном устройстве. Хранилище очередей также поддерживает управление асинхронными задачами и создание рабочих процессов.

### <a name="keyvault"></a>Хранилище ключей
Поставщик ресурсов хранилища ключей обеспечивает управление секретами, в частности паролями и сертификатами, и их аудит. Например, клиент может использовать поставщика ресурсов хранилища ключей для предоставления паролей администратора или ключей во время развертывания виртуальной машины.

## <a name="high-availability-for-azure-stack"></a>Обеспечение высокого уровня доступности Azure Stack
Чтобы добиться высокого уровня доступности рабочих систем с несколькими виртуальными машинами в Azure, виртуальные машины размещаются в [группе доступности](https://docs.microsoft.com/azure/virtual-machines/windows/manage-availability#configure-multiple-virtual-machines-in-an-availability-set-for-redundancy), которая распределяет их между несколькими доменами сбоя и доменами обновления. При меньшем масштабе Azure Stack неисправный домен в группе доступности определяется как один узел в единице масштабирования.  

Инфраструктура Azure Stack уже устойчива к сбоям, но базовая технология (отказоустойчивая кластеризация) по-прежнему приводит к некоторому времени простоя виртуальных машин на поврежденном физическом сервере в случае сбоя оборудования. Azure Stack поддерживает группы доступности с максимально тремя доменами сбоя, что гарантирует согласованность с Azure.

- **Домены сбоя**. Виртуальные машины, размещенные в группе доступности, физически изолированы друг от друга и как можно более равномерно распределяются по нескольким доменам сбоя (узлы Azure Stack). В случае сбоя оборудования виртуальные машины из поврежденного домена сбоя перезагружаются в других доменах сбоя, но, если это возможно, остаются в доменах сбоя, отдельных от других виртуальных машин в той же группе доступности. После восстановления работоспособности оборудования виртуальные машины перераспределяются, что обеспечивает высокий уровень доступности. 
 
- **Домены обновления**. Домены обновления — это еще одна концепция Azure, обеспечивающая высокий уровень доступности в группах доступности. Домен обновления — это логическая группа базового оборудования, которое может одновременно обслуживаться. Во время планового обслуживания виртуальные машины в одном домене обновления перезапускаются вместе. При создании клиентом виртуальных машин в группе доступности платформа Azure автоматически распределяет их между такими доменами обновления. В Azure Stack виртуальные машины в реальном времени переносятся на другие доступные узлы в кластере до обновления их базового узла. Так как во время обновления узла клиент не простаивает, домен обновления в Azure Stack обеспечивает совместимость с Azure. 

## <a name="role-based-access-control-rbac"></a>Контроль доступа на основе ролей (RBAC)
RBAC можно использовать для предоставления доступа к системе для авторизованных пользователей, групп и служб, назначая им роли на уровне отдельного ресурса, группы ресурсов или подписки. Каждая роль определяет уровень доступа пользователя, группы или службы к ресурсам Microsoft Azure Stack.

Механизм RBAC Azure (управление доступом на основе ролей) включает в себя три основные роли, которые применяются ко всем типам ресурсов. Владелец, участник и читатель. Владелец имеет полный доступ ко всем ресурсам, включая право делегировать доступ другим. Участник может создавать все типы ресурсов Azure и управлять ими, но не может предоставить доступ другим. Читатель может только просматривать существующие ресурсы Azure. Остальные роли RBAC в Azure разрешают управление определенными ресурсами Azure. Например, роль участника виртуальной машины разрешает создавать виртуальные машины и управлять ими, но не разрешает управлять виртуальной сетью или подсетью, к которой подключается виртуальная машина.

## <a name="usage-data"></a>Данные об использовании
Microsoft Azure Stack собирает и объединяет данные об использовании всех поставщиков ресурсов и передает их в Azure для обработки с помощью коммерческого предложения Azure. Данные об использовании, собранные в Azure Stack, можно просмотреть с помощью REST API. Существует согласованный с Azure API клиента, а также API поставщика и делегированного поставщика для получения данных об использовании для всех подписок клиентов. Эти данные можно использовать во внешнем инструменте или службе, предназначенной для выставления счетов или взимания средств за использование. После того как данные о потреблении были обработаны коммерческим предложением Azure, их можно просмотреть на портале управления счетами и подписками Azure.

## <a name="next-steps"></a>Дополнительная информация
[Основы администрирования](azure-stack-manage-basics.md)

