---
title: Часто задаваемые вопросы об API использования | Документация Майкрософт
description: Список средств измерения в Azure Stack, сравнение с API использования в Azure, время использования и время сообщения, коды ошибок.
services: azure-stack
documentationcenter: ''
author: mattbriggs
manager: femila
editor: ''
ms.assetid: 847f18b2-49a9-4931-9c09-9374e932a071
ms.service: azure-stack
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/09/2018
ms.author: mabrigg
ms.reviewer: alfredop
ms.openlocfilehash: f0df9b02e7672faec3a1d94997c9b27ffca275e5
ms.sourcegitcommit: e2adef58c03b0a780173df2d988907b5cb809c82
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2018
ms.locfileid: "32159624"
---
# <a name="frequently-asked-questions-in-azure-stack-usage-api"></a>Часто задаваемые вопросы об API использования в Azure Stack
В этой статье содержатся ответы на некоторые часто задаваемые вопросы об API использования в Azure Stack.

## <a name="what-meter-ids-can-i-see"></a>Какие доступны идентификаторы средств измерения?
Отчеты об использовании для следующих поставщиков ресурсов:

| **Поставщик ресурсов** | **Идентификатор средства измерения** | **Имя средства измерения** | **Единица измерения** | **Дополнительные сведения** |
| --- | --- | --- | --- | --- |
| **Сеть** |F271A8A388C44D93956A063E1D2FA80B |Использование статических IP-адресов |IP-адреса;| Число используемых IP-адресов. При вызове API использования с детализацией до дней индикатор возвращает число IP-адресов, умноженное на количество часов. |
| |9E2739BA86744796B465F64674B822BA |Использование динамических IP-адресов |IP-адреса;| Число используемых IP-адресов. При вызове API использования с детализацией до дней индикатор возвращает число IP-адресов, умноженное на количество часов. |
| **Хранилище** |B4438D5D-453B-4EE1-B42A-DC72E377F1E4 |TableCapacity |ГБ\*ч |Общая емкость, потребляемая таблицами |
| |B5C15376-6C94-4FDD-B655-1A69D138ACA3 |PageBlobCapacity |ГБ\*ч |Общая емкость, потребляемая страничными BLOB-объектами |
| |B03C6AE7-B080-4BFA-84A3-22C800F315C6 |QueueCapacity |ГБ\*ч |Общая емкость, потребляемая очередью |
| |09F8879E-87E9-4305-A572-4B7BE209F857 |BlockBlobCapacity |ГБ\*ч |Общая емкость, потребляемая блочными BLOB-объектами |
| |B9FF3CD0-28AA-4762-84BB-FF8FBAEA6A90 |TableTransactions |Количество запросов (в десятках тысяч) |Запросы к службе таблиц (в десятках тысяч) |
| |50A1AEAF-8ECA-48A0-8973-A5B3077FEE0D |TableDataTransIn |Объем входящих данных, ГБ |Объем входящих данных службы таблиц (в ГБ) |
| |1B8C1DEC-EE42-414B-AA36-6229CF199370 |TableDataTransOut |Объем исходящих данных (в ГБ) |Объем исходящих данных службы таблиц, ГБ |
| |43DAF82B-4618-444A-B994-40C23F7CD438 |BlobTransactions |Количество запросов (в десятках тысяч) |Запросы к службе BLOB-объектов (в десятках тысяч) |
| |9764F92C-E44A-498E-8DC1-AAD66587A810 |BlobDataTransIn |Объем входящих данных, ГБ |Объем входящих данных службы BLOB-объектов (в ГБ) |
| |3023FEF4-ECA5-4D7B-87B3-CFBC061931E8 |BlobDataTransOut |Объем исходящих данных (в ГБ) |Объем исходящих данных службы BLOB-объектов (в ГБ) |
| |EB43DD12-1AA6-4C4B-872C-FAF15A6785EA |QueueTransactions |Количество запросов (в десятках тысяч) |Запросы к службе очередей (в десятках тысяч) |
| |E518E809-E369-4A45-9274-2017B29FFF25 |QueueDataTransIn |Объем входящих данных, ГБ |Объем входящих данных службы очередей (в ГБ) |
| |DD0A10BA-A5D6-4CB6-88C0-7D585CEF9FC2 |QueueDataTransOut |Объем исходящих данных (в ГБ) |Объем исходящих данных службы очередей, ГБ |
| **Sql RP**            | CBCFEF9A-B91F-4597-A4D3-01FE334BED82 | DatabaseSizeHourSqlMeter   | МБ\*часы   | Общая емкость базы данных в момент создания. При вызове API использования с детализацией до дней индикатор возвращает число мегабайтов, умноженное на количество часов. |
| **MySql RP**          | E6D8CFCD-7734-495E-B1CC-5AB0B9C24BD3 | DatabaseSizeHourMySqlMeter | МБ\*часы    | Общая емкость базы данных в момент создания. При вызове API использования с детализацией до дней индикатор возвращает число мегабайтов, умноженное на количество часов. |
| **Среда выполнения приложений** |FAB6EB84-500B-4A09-A8CA-7358F8BBAEA5 |Base VM Size Hours |Виртуальные ядра, в часах | Количество виртуальных ядер, умноженное на часы работы виртуальной машины. |
| |9CD92D4C-BAFD-4492-B278-BEDC2DE8232A |Windows VM Size Hours |Виртуальные ядра, в часах | Количество виртуальных ядер, умноженное на часы работы виртуальной машины. |
| |6DAB500F-A4FD-49C4-956D-229BB9C8C793 |VM size hours |Виртуальные машины, в часах |С учетом виртуальных машин Base и Windows. Корректировка по ядрам не учитывается |
| **хранилище ключей;** |EBF13B9F-B3EA-46FE-BF54-396E93D48AB4 |Key Vault transactions | Количество запросов (в десятках тысяч)| Число запросов, полученных REST API для плоскости данных хранилища ключей |
| |2C354225-B2FE-42E5-AD89-14F0EA302C87 |Advanced keys transactions | 10 000 транзакций|     Транзакции ключей RSA 3K или 4K, использующих технологию ECC (предварительная версия) |
| **Службы приложений** | 190C935E-9ADA-48FF-9AB8-56EA1CF9ADAA | Служба приложений | Виртуальные ядра, в часах | Количество виртуальных ядер, используемых для запуска службы приложений Примечание. На основе этой метрики корпорация Майкрософт взимает плату за использование Службы приложений в Azure Stack. Поставщики облачных служб могут рассчитывать использование ресурсов своими клиентами на основе других метрик Службы приложений (см. ниже) |
|  | 67CC4AFC-0691-48E1-A4B8-D744D1FEDBDE | Functions Requests | 10 запросов | Общее количество запрошенных выполнений (за 10 выполнений). Выполнения вычисляются при каждом выполнении функции в ответ на событие или активируются привязкой. |
|  | D1D04836-075C-4F27-BF65-0A1130EC60ED | Functions - Compute | ГБ/с | Потребление ресурсов измеряется в гигабайтах в секунду (ГБ/с). **Наблюдаемое потребление ресурсов** рассчитывается так: средний размер памяти в гигабайтах умножается на время выполнения функции в миллисекундах. Память, используемая функцией, округляется до ближайших 128 МБ (до максимального размера памяти, составляющего 1536 МБ), а время выполнения — до ближайшей 1 мс. Минимальные значения времени выполнения и памяти для однократного выполнения функции составляют 100 мс и 128 МБ соответственно. |
|  | 957E9F36-2C14-45A1-B6A1-1723EF71A01D | Shared App Service Hours | 1 час | За час использования общего плана Службы приложений. Тарификация по планам обслуживания производится на основе каждого приложения |
|  | 539CDEC7-B4F5-49F6-AAC4-1F15CFF0EDA9 | Free App Service Hours | 1 час | За час использования бесплатного плана Службы приложений. Тарификация по планам обслуживания производится на основе каждого приложения |
|  | 88039D51-A206-3A89-E9DE-C5117E2D10A6 | Small Standard App Service Hours | 1 час | Вычисляется на основе размера и количества экземпляров |
|  | 83A2A13E-4788-78DD-5D55-2831B68ED825 | Medium Standard App Service Hours | 1 час | Вычисляется на основе размера и количества экземпляров |
|  | 1083B9DB-E9BB-24BE-A5E9-D6FDD0DDEFE6 | Large Standard App Service Hours | 1 час | Вычисляется на основе размера и количества экземпляров |
|  | *Пользовательские рабочие уровни* | Пользовательские рабочие уровни | Часы | Детерминированный идентификатор метрики создается на основе SKU и пользовательского имени рабочего уровня. Этот идентификатор уникален для каждого пользовательского рабочего уровня |
|  | 264ACB47-AD38-47F8-ADD3-47F01DC4F473 | SNI SSL | На привязку SSL на основе SNI | Служба приложений поддерживает два типа SSL-подключений: указание имени сервера (SNI) и IP-адрес. SSL-подключения на основе SNI работают только в современных браузерах, в то время как SSL-подключения на основе IP-адресов работают во всех. |
|  | 60B42D72-DC1C-472C-9895-6C516277EDB4 | IP SSL | На привязку SSL на основе IP | Служба приложений поддерживает два типа SSL-подключений: указание имени сервера (SNI) и IP-адрес. SSL-подключения на основе SNI работают только в современных браузерах, в то время как SSL-подключения на основе IP-адресов работают во всех. |
|  | 73215A6C-FA54-4284-B9C1-7E8EC871CC5B | Web Process |  | Вычисляется за активный сайт в час |
|  | 5887D39B-0253-4E12-83C7-03E1A93DFFD9 | External Egress Bandwidth | GB | Общее количество байт ответа на входящий запрос + общее количество байт ответа на исходящий запрос + общее количество байт ответа на входящий запрос FTP + общее количество байт ответа на запросы веб-развертывания |

## <a name="how-do-the-azure-stack-usage-apis-compare-to-the-azure-usage-apihttpsmsdnmicrosoftcomlibraryazure1ea5b323-54bb-423d-916f-190de96c6a3c-currently-in-public-preview"></a>Какие различия между API использования в Azure Stack и [API использования в Azure](https://msdn.microsoft.com/library/azure/1ea5b323-54bb-423d-916f-190de96c6a3c) (в настоящее время в общедоступной предварительной версии)?
* API использования для клиента полностью совпадает с аналогичным API в Azure, за одним исключением: в настоящее время флаг *showDetails* для Azure Stack не поддерживается.
* API использования для поставщика относится только к Azure Stack.
* В настоящее время в Azure Stack недоступен [API RateCard](https://msdn.microsoft.com/library/azure/mt219004.aspx), который используется в Azure.

## <a name="what-is-the-difference-between-usage-time-and-reported-time"></a>В чем различия между временем использования и временем сообщения?
В отчетах об использовании учитываются два показателя времени:

* **Время сообщения**. Время, когда информация о событии использования поступила в систему учета использования.
* **Время использования**. Время, когда происходило использование ресурса Azure Stack.

Для некоторых событий использования вы можете заметить расхождения между временем использования временем сообщения. Задержка в любой среде может длиться до нескольких часов.

Сейчас запросы можно создавать только *по времени сообщения*.

## <a name="what-do-these-usage-api-error-codes-mean"></a>Что означают коды ошибок в API использования?
| **Код состояния HTTP** | **Код ошибки** | **Описание** |
| --- | --- | --- |
| 400/Bad Request |*NoApiVersion* |Не указан параметр запроса *api-version* (версия API). |
| 400/Bad Request |*InvalidProperty* |Свойство отсутствует или имеет недопустимое значение. Сообщение об ошибке определяет недостающее свойство в тексте ответа. |
| 400/Bad Request |*RequestEndTimeIsInFuture* |Значение *reportedEndTime* относится к будущему. Для этого аргумента не допускаются значения в будущем. |
| 400/Bad Request |*SubscriberIdIsNotDirectTenant* |В вызове к API-интерфейсу для поставщика использовался идентификатор подписки, который указывает на недопустимый клиент вызывающего объекта. |
| 400/Bad Request |*SubscriptionIdMissingInRequest* |Отсутствует идентификатор подписки вызывающего объекта. |
| 400/Bad Request |*InvalidAggregationGranularity* |В запросе указано недопустимое значение для степени детализации статистической обработки. Допустимые значения: daily (ежедневно) и hourly (каждый час). |
| 503 |*ServiceUnavailable* |Произошла повторяемая ошибка из-за перегрузки службы или регулирования запросов. |

## <a name="next-steps"></a>Дальнейшие действия
[Выставление счетов клиентам и начисление платы за использование Azure Stack](azure-stack-billing-and-chargeback.md)

[Provider Resource Usage API](azure-stack-provider-resource-api.md) (API использования ресурсов для поставщиков)

[Tenant Resource Usage API](azure-stack-tenant-resource-usage-api.md) (API использования ресурсов для клиентов)
