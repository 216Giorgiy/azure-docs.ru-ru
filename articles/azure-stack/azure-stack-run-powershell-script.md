---
title: "Развертывание комплекта разработки Azure Stack | Документация Майкрософт"
description: "Сведения о подготовке комплекта разработки Azure Stack и выполнении сценария PowerShell для его развертывания."
services: azure-stack
documentationcenter: 
author: ErikjeMS
manager: byronr
editor: 
ms.assetid: 0ad02941-ed14-4888-8695-b82ad6e43c66
ms.service: azure-stack
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 7/17/2017
ms.author: erikje
ms.openlocfilehash: b67cabf0ecdb48f137bfcfbce95eee568a1c298d
ms.sourcegitcommit: b979d446ccbe0224109f71b3948d6235eb04a967
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/25/2017
---
# <a name="deploy-the-azure-stack-development-kit"></a>Развертывание комплекта разработки Azure Stack

*Область применения: комплект разработки Azure Stack*

Чтобы развернуть [комплект разработки Azure Stack](azure-stack-poc.md), сделайте следующее:

1. [Скачайте пакет развертывания](https://azure.microsoft.com/overview/azure-stack/try/?v=try), чтобы получить файл Cloudbuilder.vhdx.
2. [Подготовьте файл Cloudbuilder.vhdx](#prepare-the-development-kit-host), выполнив сценарий asdk-installer.ps1, позволяющий настроить компьютер (узел комплекта разработки), на котором следует установить комплект разработки. После этого узел комплекта разработки загрузится в файл Cloudbuilder.vhdx.
3. [Разверните комплект разработки](#deploy-the-development-kit) на узле.

> [!NOTE]
> Чтобы получить оптимальные результаты, мы советуем выполнять развертывание с подключением к Интернету, даже если вы хотите использовать среду Azure Stack без доступа к Интернету. Это позволит активировать ознакомительную версию Windows Server 2016 во время развертывания.
> 
> 

## <a name="download-and-extract-the-development-kit"></a>Скачивание и извлечение комплекта разработки
1. Перед скачиванием убедитесь, что компьютер соответствует следующим предварительным требованиям:

   * Минимальное свободное место на диске: 60 ГБ.
   * На компьютере должна быть установлена платформа [.NET Framework 4.6 (или более поздняя версия)](https://aka.ms/r6mkiy).

2. [Перейдите на страницу "Начало работы"](https://azure.microsoft.com/overview/azure-stack/try/?v=try), укажите необходимые сведения и нажмите кнопку **Отправить**.
3. В разделе **Download the software** (Загрузить ПО) щелкните **Azure Stack Development Kit** (Комплект разработки Azure Stack).
4. Запустите скачанный файл AzureStackDownloader.exe.
5. В окне **загрузчика комплекта разработки Azure Stack** выполните шаги 1–5.
6. После скачивания нажмите кнопку **Запустить**, чтобы запустить файл MicrosoftAzureStackPOC.exe.
7. Просмотрите окно лицензионного соглашения и сведения мастера самоизвлечения, а затем нажмите кнопку **Далее**.
8. Просмотрите окно заявления о конфиденциальности и сведения мастера самоизвлечения, а затем нажмите кнопку **Далее**.
9. Выберите расположение для извлечения файлов и нажмите кнопку **Далее**.
   * Расположение по умолчанию: <drive letter>:\<текущая_папка>\Microsoft Azure Stack.
10. Просмотрите окно конечного расположения и сведения мастера самоизвлечения, а затем нажмите кнопку **Извлечь**, чтобы извлечь файл CloudBuilder.vhdx (примерно 25 ГБ) и ThirdPartyLicenses.rtf. Этот процесс может занять некоторое время.

> [!NOTE]
> После извлечения файлов вы можете удалить EXE- и BIN-файлы, чтобы освободить пространство на компьютере. Эти файлы также можно переместить в другое расположение, чтобы не скачивать их снова, если потребуется выполнить повторное развертывание.
> 
> 

## <a name="prepare-the-development-kit-host"></a>Подготовка узла комплекта разработки
1. Убедитесь, что вы можете физически подключиться к узлу комплекта разработки или имеете доступ к консоли (например, KVM). Доступ потребуется после перезагрузки узла комплекта разработки на шаге 13 ниже.
2. Узел комплекта разработки должен соответствовать [минимальным требованиям](azure-stack-deploy.md). Чтобы подтвердить требования, можно использовать [средство проверки развертывания Azure Stack](https://gallery.technet.microsoft.com/Deployment-Checker-for-50e0f51b).
3. Войдите на узел комплекта разработки от имени локального администратора.
4. Скопируйте или переместите файл CloudBuilder.vhdx в корень диска C:\ (C:\CloudBuilder.vhdx).
5. Выполните сценарий ниже, чтобы загрузить файл установщика комплекта разработки (asdk-installer.ps1) в папку C:\AzureStack_Installer на узле комплекта разработки.
    ```powershell
    # Variables
    $Uri = 'https://raw.githubusercontent.com/Azure/AzureStack-Tools/master/Deployment/asdk-installer.ps1'
    $LocalPath = 'c:\AzureStack_Installer'

    # Create folder
    New-Item $LocalPath -Type directory

    # Download file
    Invoke-WebRequest $uri -OutFile ($LocalPath + '\' + 'asdk-installer.ps1')
    ```
6. Откройте консоль PowerShell с повышенными привилегиями, выполните сценарий C:\AzureStack_Installer\asdk-installer.ps1 и щелкните **Prepare Environment** (Подготовка среды).
7. На странице **Select Cloudbuilder vhdx** (Выбор файла Cloudbuilder.vhdx) установщика найдите и выберите файл Cloudbuilder.vhdx, загруженный на предыдущих шагах.
8. Необязательно. Установите флажок **Добавление драйверов**, чтобы указать папку, содержащую дополнительные драйверы, которые нужно установить на узле.
9. На странице **Дополнительные параметры** укажите учетную запись локального администратора узла комплекта разработки. Если не предоставить эти учетные данные, во время установки потребуется KVM-доступ к узлу.
10. Кроме того, на странице **Дополнительные параметры** вы можете указать следующие параметры:
    - **Computername** (Имя компьютера). Задает имя узла комплекта разработки. Имя должно соответствовать требованиям к полному доменному имени, а его размер не должен превышать 15 символов. Значение по умолчанию — случайное имя компьютера, созданное Windows.
    - **Часовой пояс.** Задает часовой пояс узла комплекта разработки. Значение по умолчанию — "(UTC-08:00) Тихоокеанское время (США и Канада)".
    - **Static IP configuration** (Конфигурация статических IP-адресов). Задает использование статического IP-адреса в развертывании. В противном случае при перезагрузке установщика в файл Cloudbuilder.vhdx сетевые интерфейсы настраиваются с помощью протокола DHCP.
11. Щелкните **Далее**.
12. Если вы на предыдущем шаге выбрали конфигурацию статических IP-адресов, далее сделайте следующее:
    - Выберите сетевой адаптер. Проверьте, можете ли вы подключиться к адаптеру, а затем нажмите кнопку **Далее**.
    - Проверьте значения параметров **IP-адрес**, **Шлюз** и **DNS**, а затем нажмите кнопку **Далее**.
13. Нажмите кнопку **Далее**, чтобы запустить процесс подготовки.
14. Когда состояние подготовки изменится на **Завершено**, нажмите кнопку **Далее**.
15. Нажмите кнопку **Перезагрузить**, чтобы выполнить загрузку в файл Cloudbuilder.vhdx и продолжить процесс развертывания.

## <a name="deploy-the-development-kit"></a>Развертывание комплекта разработки
1. Войдите на узел комплекта разработки от имени локального администратора. Используйте учетные данные, указанные на предыдущих шагах.

    > [!IMPORTANT]
    > В случае с развертываниями Azure Active Directory для Azure Stack требуется непосредственное подключение к Интернету или через прозрачный прокси-сервер. В процессе развертывания поддерживается только один сетевой интерфейс. При наличии нескольких сетевых интерфейсов перед выполнением сценария развертывания в следующем разделе включите только один из них, а все остальные отключите.
    
2. Откройте консоль PowerShell с повышенными привилегиями, выполните сценарий \AzureStack_Installer\asdk-installer.ps1 (он может храниться на другом диске в файле Cloudbuilder.vhdx) и щелкните **Установить**.
3. В поле **Тип** выберите **Azure Cloud** (Облако Azure) или **ADFS**.
    - **Azure Cloud** (Облако Azure). Azure Active Directory используется в качестве поставщика удостоверений. Выберите этот параметр, чтобы указать конкретный каталог, где учетная запись AAD имеет разрешения глобального администратора. Полное имя клиента каталога AAD. Например, onmicrosoft.com. 
    - **ADFS.** Служба каталогов с меткой по умолчанию выступает в качестве поставщика удостоверений, используется учетная запись для входа по умолчанию azurestackadmin@azurestack.local и пароль, указанный при настройке.
4. В разделе **Пароль локального администратора** в поле **Пароль** введите пароль локального администратора (который должен соответствовать текущему паролю локального администратора) и нажмите кнопку **Далее**.
5. Выберите сетевой адаптер, который будет использоваться с комплектом разработки, и нажмите кнопку **Далее**.
6. Выберите конфигурацию сети виртуальной машины BGPNAT01: DHCP или статическую.
    - **DHCP** (по умолчанию). Виртуальная машина получает конфигурацию IP-сети с сервера DHCP.
    - **Статическая.** Используйте этот параметр только в том случае, если DHCP не удается назначить допустимый IP-адрес Azure Stack для доступа к Интернету. Статический IP-адрес не должен превышать длину маски подсети (например, 10.0.0.5/24).
7. При необходимости задайте следующие значения:
    - **ИД виртуальной ЛС.** Задает идентификатор виртуальной локальной сети. Используйте этот параметр только в том случае, если на узле и AzS-BGPNAT01 необходимо настроить идентификатор виртуальной сети для доступа к физической сети (и Интернету). 
    - **DNS forwarder** (DNS-перенаправитель). DNS-сервер, созданный в ходе развертывания Azure Stack. Чтобы разрешить компьютерам в решении разрешать имена, расположенные за пределами метки, укажите имеющийся DNS-сервер инфраструктуры. DNS-сервер, расположенный в этой метке, перенаправляет неизвестные запросы на сопоставление имен на этот DNS-сервер.
    - **Сервер времени**. Это обязательное поле задает сервер времени; оно должно содержать IP-адрес. Чтобы найти IP-адрес сервера времени, перейдите на сайт [pool.ntp.org](http:\\pool.ntp.org) или выполните проверку связи с сервером time.windows.com. 
8. Щелкните **Далее**. 
9. На странице **Verifying network interface card properties** (Проверка свойств сетевого адаптера) появится индикатор хода выполнения. 
    - Если там указано, что **обновление загрузить невозможно**, следуйте инструкциям на этой странице.
    - Когда состояние изменится на **Завершено**, нажмите кнопку **Далее**.
10. На странице **Сводка** нажмите кнопку **Развернуть**.
11. Если вы используете развертывание Azure Active Directory, отобразится запрос на ввод учетных данных учетной записи глобального администратора Azure Active Directory.
12. Процесс развертывания может занять несколько часов, в течение которых система автоматически перезагрузится один раз.
   
   > [!IMPORTANT]
   > Чтобы отследить ход выполнения развертывания, войдите в систему как azurestack\AzureStackAdmin. Если вы вошли в систему от имени локального администратора, после присоединения компьютера к домену ход выполнения развертывания отображаться не будет. В этом случае повторное развертывание выполнять не нужно. Чтобы проверить выполнение процесса, просто войдите в систему как azurestack\AzureStackAdmin.
   > 
   > 
   
    После завершения развертывания в окне консоли PowerShell отобразится следующее сообщение:**COMPLETE: Action ‘Deployment’** (Завершено: действие "Развертывание").
   
Если развертывание завершается сбоем, вы можете выполнить следующий сценарий повторного запуска в том же окне PowerShell с повышенными привилегиями:

```powershell
cd c:\CloudDeployment\Setup
.\InstallAzureStackPOC.ps1 -Rerun
```

Этот сценарий перезапустит развертывание из последнего выполненного успешно шага.

Вы также можете [повторно развернуть](azure-stack-redeploy.md) его с нуля.


## <a name="reset-the-password-expiration-to-180-days"></a>Настройка сброса срока действия пароля через 180 дней

Чтобы убедиться, что срок действия пароля узла комплекта разработки не завершится слишком быстро, после развертывания сделайте следующее:

Для изменения политики срока действия паролей из PowerShell сделайте следующее:
1. В окне Powershell выполните команду Set-ADDefaultDomainPasswordPolicy -MaxPasswordAge 180.00:00:00 -Identity azurestack.local.

Для изменения политики срока действия паролей вручную сделайте следующее:
1. На узле комплекта разработки откройте редактор **Управление групповыми политиками** и последовательно выберите **Управление групповой политикой**, **Лес: azurestack.local**, **Домены**, **azurestack.local**.
2. Щелкните правой кнопкой мыши **политику домена по умолчанию** и выберите **Изменить**.
3. В редакторе "Управление групповыми политиками" последовательно выберите **Конфигурация компьютера**, **Политики**, **Параметры Windows**, **Параметры безопасности**, **Политики учетных записей**, **Политика паролей**.
4. В области справа дважды щелкните параметр **Максимальный срок действия пароля**.
5. В диалоговом окне **Maximum password age Properties** (Свойства максимального срока действия пароля) измените значение параметра **Срок истечения действия пароля** на 180 и нажмите кнопку **ОК**.


## <a name="next-steps"></a>Дальнейшие действия

[Установка PowerShell](azure-stack-powershell-configure-quickstart.md)

[Register Azure Stack with your Azure subscription](azure-stack-register.md) (Регистрация Azure Stack с помощью подписки Azure)

[Подключение к Azure Stack](azure-stack-connect-azure-stack.md)

