---
title: "Средство Cosmos DB портала Azure: обозреватель скриптов | Документация Майкрософт"
description: "Узнайте об обозревателе скриптов Azure Cosmos DB, средстве портала Azure для управления артефактами программирования на стороне сервера Azure Cosmos DB, включая хранимые процедуры JavaScript, триггеры и определяемые пользователем функции."
keywords: "редактор JavaScript"
services: cosmosdb
author: kirillg
manager: jhubbard
editor: monicar
documentationcenter: 
ms.assetid: 9d0620da-2449-4c17-82a4-24aaa46e9b3e
ms.service: cosmosdb
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 02/14/2017
ms.author: kirillg
ms.translationtype: Human Translation
ms.sourcegitcommit: 71fea4a41b2e3a60f2f610609a14372e678b7ec4
ms.openlocfilehash: e9c3e92dd1c35ff6893565e61f7e7b940b6ede7e
ms.contentlocale: ru-ru
ms.lasthandoff: 05/10/2017


---
# <a name="create-and-run-stored-procedures-triggers-and-user-defined-functions-using-the-azure-cosmos-db-script-explorer"></a>Создавайте и запускайте хранимые процедуры, триггеры и определяемые пользователем функции с помощью обозревателя скриптов Azure Cosmos DB.
В этой статье приведены общие сведения об обозревателе скриптов [Microsoft Azure Cosmos DB](https://azure.microsoft.com/services/documentdb/), который представляет собой редактор JavaScript на портале Azure, позволяющий просматривать и запускать артефакты программирования на стороне сервера Cosmos DB, включая хранимые процедуры, триггеры и пользовательские функции. Дополнительные сведения о программировании Cosmos DB на стороне сервера см. в статье [Azure Cosmos DB server-side programming: Stored procedures, database triggers, and UDFs](documentdb-programming.md) (Программирование Azure Cosmos DB на стороне сервера: хранимые процедуры, триггеры баз данных и определяемые пользователем функции).

## <a name="launch-script-explorer"></a>Запуск обозревателя скриптов
1. На [портале Azure](https://portal.azure.com) в области навигации слева щелкните ![значок Azure Cosmos DB](./media/documentdb-query-collections-query-explorer/nosql-documentdb-portal-icon.png) **Azure Cosmos DB**. 

    Если служба **Azure Cosmos DB** не отображается, то выберите внизу пункт **Больше служб** и щелкните ![значок Azure Cosmos DB](./media/documentdb-query-collections-query-explorer/nosql-documentdb-portal-icon.png) **Azure Cosmos DB**.
2. В меню ресурсов выберите **Обозреватель скриптов**.
   
    ![Снимок экрана: команда "Обозреватель скриптов"](./media/documentdb-view-scripts/scriptexplorercommand.png)
   
    Раскрывающиеся списки **База данных** и **Коллекция** предварительно заполняются в зависимости от контекста запуска обозревателя скриптов.  Например, при запуске из панели базы данных предварительно заполняется текущая база данных.  Если запуск выполняется из панели коллекции, предварительно заполняется текущая коллекция.
3. Используйте раскрывающиеся списки **База данных** и **Коллекция** для удобного редактирования коллекции, сценарии которой просматриваются в настоящее время, без необходимости закрывать и повторно запускать обозреватель скриптов.  
4. Обозреватель скриптов также поддерживает фильтрацию загруженного в настоящий момент набора скриптов по их свойству id.  Просто введите необходимые данные в поле фильтра, и результаты в списке обозревателя скриптов будут отфильтрованы на основе предоставленных критериев.
   
    ![Снимок экрана: обозреватель скриптов с результатами фильтрации](./media/documentdb-view-scripts/scriptexplorerfilterresults.png)

    > [!IMPORTANT] 
    > Функциональные возможности фильтрации обозревателя скриптов обеспечивают только фильтрацию загруженного ***в настоящее время*** набора сценариев и не обновляют автоматически выбранную в данный момент коллекцию.

1. Чтобы обновить список скриптов, которые загружены в обозревателе скриптов, щелкните команду **Обновить** в верхней части колонки.
   
    ![Снимок экрана: команда обновления обозревателя скриптов](./media/documentdb-view-scripts/scriptexplorerrefresh.png)

## <a name="create-view-and-edit-stored-procedures-triggers-and-user-defined-functions"></a>Создание, просмотр и изменение хранимых процедур, триггеров и определяемых пользователем функций
Обозреватель скриптов позволяет с легкостью выполнять операции CRUD с артефактами программирования на стороне сервера Cosmos DB.  

* Чтобы создать скрипт, просто выберите соответствующую команду в окне обозревателя скриптов, укажите идентификатор, введите содержимое скрипта и щелкните **Сохранить**.
  
    ![Снимок экрана: команда создания обозревателя скриптов с редактором JavaScript](./media/documentdb-view-scripts/scriptexplorercreatecommand.png)
* При создании триггера необходимо также указать его тип и операцию
  
    ![Снимок экрана: параметр создания триггера в обозревателе скриптов](./media/documentdb-view-scripts/scriptexplorercreatetrigger.png)
* Чтобы просмотреть скрипт, просто щелкните его.
  
    ![Снимок экрана: интерфейс просмотра скрипта в обозревателе скриптов](./media/documentdb-view-scripts/scriptexplorerviewscript.png)
* Чтобы изменить скрипт, просто внесите необходимые изменения в редакторе JavaScript и щелкните **Сохранить**.
  
    ![Снимок экрана: интерфейс просмотра скрипта в обозревателе скриптов](./media/documentdb-view-scripts/scriptexplorereditscript.png)
* Чтобы отменить все несохраненные изменения скрипта, выберите команду **Отменить** .
  
    ![Снимок экрана: интерфейс отмены изменений в обозревателе скриптов](./media/documentdb-view-scripts/scriptexplorerdiscardchanges.png)
* Обозреватель скриптов также позволяет легко просмотреть системные свойства текущего загруженного скрипта: для этого достаточно щелкнуть команду **Свойства** .
  
    ![Снимок экрана: представление свойств скрипта в обозревателе скриптов](./media/documentdb-view-scripts/scriptproperties.png)
  
  > [!NOTE]
  > Свойство метки времени (_ts) внутренне представлено как время эпохи, но обозреватель скриптов отображает значение в читаемом формате GMT.
  > 
  > 
* Чтобы удалить скрипт, выберите его в окне обозревателя скриптов и выберите команду **Удалить** .
  
    ![Снимок экрана: команда удаления в обозревателе скриптов](./media/documentdb-view-scripts/scriptexplorerdeletescript1.png)
* Подтвердите удаление, нажав кнопку **Да**, или отмените операцию, нажав кнопку **Нет**.
  
    ![Снимок экрана: команда удаления в обозревателе скриптов](./media/documentdb-view-scripts/scriptexplorerdeletescript2.png)

## <a name="execute-a-stored-procedure"></a>Выполнение хранимой процедуры
> [!WARNING]
> Выполнение хранимых процедур в обозревателе скриптов пока не поддерживается для секционированных коллекций на стороне сервера. Дополнительные сведения см. в статье [Секционирование и масштабирование в Azure DocumentDB](documentdb-partition-data.md).
> 
> 

Обозреватель скриптов позволяет выполнять хранимые процедуры на стороне сервера на портале Azure.

* При открытии новой колонки создания хранимой процедуры скрипт по умолчанию (*prefix*) уже будет указан. Для запуска сценария *prefix* или собственного сценария добавьте *идентификатор* и *входные параметры*. Для хранимых процедур, которые принимают несколько параметров, все входные параметры должны находиться в массиве (например *["foo", "bar"]*).
  
    ![Снимок экрана: добавление входных данных и выполнение хранимой процедуры в колонке "Хранимые процедуры" в обозревателе скриптов](./media/documentdb-view-scripts/documentdb-execute-a-stored-procedure-input.png)
* Для выполнения хранимой процедуры просто щелкните команду **Сохранить и выполнить** в области редактора скриптов.
  
  > [!NOTE]
  > Команда **Сохранить и выполнить** сохранит хранимую процедуру перед выполнением, и это означает, что ранее сохраненная версия хранимой процедуры будет перезаписана.
  > 
  > 
* При успешном выполнении хранимая процедура будет иметь состояние *Хранимая процедура успешно сохранена и выполнена*, а возвращенные результаты отобразятся в области *Результаты*.
  
    ![Снимок экрана: выполнение хранимой процедуры в колонке "Хранимые процедуры" в обозревателе скриптов](./media/documentdb-view-scripts/documentdb-execute-a-stored-procedure.png)
* Если при выполнении возникает ошибка, она отобразится в области *Результаты* .
  
    ![Снимок экрана: представление свойств скрипта в обозревателе скриптов Ошибки при выполнении хранимой процедуры](./media/documentdb-view-scripts/documentdb-execute-a-stored-procedure-error.png)

## <a name="work-with-scripts-outside-the-portal"></a>Работа со сценариями вне портала
Обозреватель скриптов на портале Azure — это лишь один из способов работы с хранимыми процедурами, триггерами и определяемыми пользователем функциями в DocumentDB. Со скриптами также можно работать с помощью интерфейса REST API и [клиентских пакетов SDK](documentdb-sdk-dotnet.md). Документация по REST API включает примеры по работе [с хранимыми процедурами с помощью REST](https://msdn.microsoft.com/library/azure/mt489092.aspx), [с пользовательскими функциями с помощью REST](https://msdn.microsoft.com/library/azure/dn781481.aspx) и [с триггерами с помощью REST](https://msdn.microsoft.com/library/azure/mt489116.aspx). Также доступны примеры по работе [со сценариями с помощью C#](documentdb-dotnet-samples.md#server-side-programming-examples) и [со сценариями с помощью Node.js](documentdb-nodejs-samples.md#server-side-programming-examples).

## <a name="next-steps"></a>Дальнейшие действия
Дополнительные сведения о программировании DocumentDB на стороне сервера см. в статье [Программирование DocumentDB на стороне сервера: хранимые процедуры, триггеры баз данных и определяемые пользователем функции](documentdb-programming.md).



