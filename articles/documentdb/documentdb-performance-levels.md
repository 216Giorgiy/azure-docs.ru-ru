<properties 
	pageTitle="Уровни производительности в DocumentDB | Azure" 
	description="Узнайте, каким образом с помощью уровней производительности в DocumentDB можно резервировать пропускную способность для каждой коллекции." 
	services="documentdb" 
	authors="johnfmacintyre" 
	manager="jhubbard" 
	editor="monicar" 
	documentationCenter=""/>

<tags 
	ms.service="documentdb" 
	ms.workload="data-services" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="03/04/2015" 
	ms.author="johnmac"/>

# Уровни производительности в DocumentDB #

В этой статье приведены общие сведения об уровнях производительности в [Microsoft Azure DocumentDB](http://azure.microsoft.com/services/documentdb/). 

> [AZURE.IMPORTANT] Уровни производительности будут доступны после официального выпуска Azure DocumentDB. Выпуск запланирован на апрель 2015 г.

Ознакомившись с данной статьей, вы сможете ответить на следующие вопросы.  

-	Что такое уровень производительности?
-	Каким образом выполняется резервирование пропускной способности для учетной записи базы данных?
-	Как работать с уровнями производительности?
-	Как осуществляется выставление счетов по уровням производительности?

##<a id="Sub1"></a>Введение в уровни производительности##

Каждая коллекция DocumentDB созданная под стандартной учетной записью, подготавливается к работе со связанным уровнем производительности. Уровни производительности определяются как S1, S2 или S3, начиная с самого низкого и до самого высокого показателя производительности. Уровень производительности коллекции определяет объем ресурсов службы, зарезервированных для приложения. Каждая коллекция в базе данных может иметь разный уровень производительности, что позволяет выделять больший объем пропускной способности часто используемым коллекциям и меньший - редко используемым. 

Каждый уровень производительности имеет ограничение связанного показателя единицы запроса(RU). Это значение пропускной способности, которое будет зарезервировано для коллекции на основе ее уровня производительности и доступно для использования исключительно этой коллекцией. Коллекции можно создать на [портале Azure](http://portal.azure.com) или с помощью любого [пакета SDK DocumentDB](https://msdn.microsoft.com/library/azure/dn781482.aspx). API-интерфейсы DocumentDB позволяют задавать уровень производительности коллекции. 

<table> 
<tbody>
<tr>
<td valign="top" ><p><b>Уровень производительности коллекции</b></p></td>
<td valign="top" ><p><b>Зарезервированные пропускной способности</b></p></td>
</tr>

<tr>
<td valign="top" ><p>S1</p></td>
<td valign="top" ><p>250 RU/с</p></td>
</tr>

<tr>
<td valign="top" ><p>S2</p></td>
<td valign="top" ><p>1000 RU/с</p></td>
</tr>

<tr>
<td valign="top" ><p>S3</p></td>
<td valign="top" ><p>2500 RU/с</p></td>
</tr>

</tbody>
</table>

DocumentDB предлагает широкий набор операций в базе данных, включая запросы, запросы с определяемыми пользователем функциями, хранимыми процедурами и триггерами. Затраты на обработку, связанные с каждой из этих операций, зависят от типа процессора, операций ввода-вывода и объема памяти для выполнения операции. Вместо того чтобы думать об управлении аппаратными ресурсами, можно переключить внимание на единицу запроса (RU) как единую меру для ресурсов, необходимых для выполнения различных операций с базами данных и обслуживания запросов приложения.

> [AZURE.NOTE] Уровни производительности измеряются в единицах запроса. Каждый уровень производительности имеет связанный показатель максимального числа единиц запроса в секунду. Уровень производительности коллекции можно изменить с помощью API-интерфейсов или [портала Azure](https://portal.azure.com/).

##<a id="Sub2"></a>Установка уровней производительности для коллекций##
После создания коллекции для нее резервируется полное выделение единиц RU в зависимости от назначенного уровня производительности. Например, если коллекции назначен уровень S3, она может обрабатывать 2500 RU в секунду. Каждая коллекция резервирует выделенную ей пропускную способность и 10 ГБ хранилища базы данных. Цена коллекции зависит от выбранного уровня производительности (S1, S2, S3). Обратите внимание, что DocumentDB работает на основе резервирования емкости. При создании коллекции приложение имеет зарезервированные ресурсы и для него выставляется счет на зарезервированную пропускную способность и объем хранилища базы данных независимо от фактических показателей использования.

После создания коллекций можно изменить уровень производительности с помощью пакетов SDK DocumentDB или на портале управления Azure. 

> [AZURE.IMPORTANT] Счета для стандартных коллекций DocumentDB выставляются по почасовому тарифу. Для каждой создаваемой коллекции будет выставляться счет минимум за час использования. 

Если в течение часа происходило изменение уровня производительности коллекции, будет выставлен счет по самому высокому уровню производительности, задаваемому в течение часа. Например, если вы повышаете уровень производительности для коллекции в 8:53, вы будете оплачивать новый уровень с 8:00. Аналогично, если вы снижаете уровень производительности в 8:53, новый тариф начнет действовать с 9:00.

Единицы запросов зарезервированы для каждой коллекции на основе заданного уровня производительности. Использование единиц запросов вычисляется с учетом значений в секунду. К приложениям, которые превышают подготовленный показатель единиц запросов(или уровень производительности) в коллекции, будет применяться функция регулирования до тех пор, пока значение не станет меньше уровня, зарезервированного для этой коллекции. Если приложению требуется более высокий уровень пропускной способности, можно увеличить уровень производительности для каждой коллекции.

> [AZURE.NOTE] Если приложение превышает уровни производительности для одной или нескольких коллекций, будет выполнено регулирование запросов для каждой коллекции. Это значит, что некоторые запросы приложения могут выполняться успешно, а к другим может быть применено регулирование.

##<a id="Sub3"></a>Работа с уровнями производительности##
Коллекции DocumentDB позволяют секционировать данные на основе шаблонов запросов и с учетом требований производительности приложения. Дополнительные сведения о секционировании данных с помощью DocumentDB см. в [документации по секционированию данных](documentdb-partition-data.md). Благодаря автоматическому индексированию и поддержке запросов в DocumentDB совместное размещение разнородных документов в рамках одной коллекции является достаточно распространенной ситуацией. Принимая решение о необходимости использования отдельных коллекций для данных, необходимо обратить внимание на следующие моменты.

- Запросы - коллекция является областью для выполнения запроса. Если необходимо выполнить запрос в наборе документов, можно обратиться к самым эффективным шаблонам чтения, которые связаны с совместным размещением документов в одной коллекции.
- Транзакции - коллекция является областью транзакций для хранимых процедур и триггеров. Все транзакции относятся к одной коллекции. 
- Производительность - коллекция имеет связанный уровень производительности. Это гарантирует прогнозируемую производительность каждой коллекции в виде зарезервированных единиц RU. В зависимости от частоты доступа можно распределить данные по различным коллекциям, имеющим разные уровни производительности.

> [AZURE.IMPORTANT] Важно понимать, что счета будут выставляться по полным стандартным тарифам на основе количества коллекций, созданных в приложении.

Рекомендуется, чтобы в приложении использовалось небольшое количество коллекций. Кроме того, вы должны хорошо понимать шаблоны приложения для создания новых коллекций. Можно зарезервировать создание коллекции как действие управления, обрабатываемое вне приложения. Аналогично, изменение уровня производительности для коллекции приведет к изменению почасового тарифа, по которому выставляются счета для коллекции. Если приложение регулирует уровни производительности динамически, необходимо вести наблюдение за производительностью коллекции.

##<a name="NextSteps"></a>Дальнейшие действия

Дополнительные сведения о ценах и управление данными с помощью Azure DocumentDB см. в следующих статьях.
 
- [Цены на DocumentDB](http://azure.microsoft.com/pricing/details/documentdb/)
- [Управление емкостью DocumentDB](documentdb-manage.md) 
- [Моделирование данных в DocumentDB](documentdb-modeling-data.md)
- [Секционирование данных в DocumentDB](documentdb-partition-data.md)

Дополнительные сведения о DocumentDB см. в [документации](http://azure.microsoft.com/documentation/services/documentdb/) по Azure DocumentDB. 



<!--HONumber=49--> 