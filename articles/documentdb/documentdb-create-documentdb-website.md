<properties 
	pageTitle="Развертывание DocumentDB и веб-приложений службы приложений Azure с помощью шаблона диспетчера ресурсов Azure | Microsoft Azure" 
	description="В этом учебном курсе показано, как выполнять развертывание учетной записи DocumentDB, веб-приложений службы приложений Azure и примера веб-приложения с использованием шаблона диспетчера ресурсов Azure." 
	services="documentdb, app-service\web" 
	authors="stephbaron" 
	manager="jhubbard" 
	editor="monicar" 
	documentationCenter=""/>

<tags 
	ms.service="documentdb" 
	ms.workload="data-services" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="05/04/2016" 
	ms.author="stbaro"/>

# Развертывание DocumentDB и веб-приложений службы приложений Azure с помощью шаблона диспетчера ресурсов Azure

В этом учебнике показано, как использовать шаблон диспетчера ресурсов Azure для развертывания и интеграции [Microsoft Azure DocumentDB](https://azure.microsoft.com/services/documentdb/), веб-приложения [службы приложений Azure](http://go.microsoft.com/fwlink/?LinkId=529714), а также примера веб-приложения.

С помощью шаблонов Azure Resource Manager можно легко автоматизировать развертывание и настройку ресурсов Azure. В этом учебнике показано, как развернуть веб-приложение и автоматически задать сведения о подключении учетной записи DocumentDB.

После изучения этого учебника вы сможете ответить на следующие вопросы.

-	Как можно использовать шаблон диспетчера ресурсов Azure для развертывания и интеграции учетной записи DocumentDB и веб-приложения в службе приложений Azure?
-	Как можно использовать шаблон диспетчера ресурсов Azure для развертывания и интеграции учетной записи DocumentDB, веб-приложения в веб-приложениях службы приложений и приложения веб-развертывания?

<a id="Prerequisites"></a>
## Предварительные требования
> [AZURE.TIP] Хотя этот учебник не требует наличия опыта работы с шаблонами Azure Resource Manager или JSON, однако, если возникнет необходимость изменить ссылки шаблонов или варианты развертывания, потребуются знания в каждой из этих областей.

Перед выполнением инструкций в этом учебнике убедитесь в наличии следующих ресурсов.

- Подписка Azure. Azure — это платформа на основе подписок. Дополнительные сведения о получении подписки см. в разделах [Варианты приобретения](https://azure.microsoft.com/pricing/purchase-options/), [Предложения для участников](https://azure.microsoft.com/pricing/member-offers/) или [Бесплатное пробное использование](https://azure.microsoft.com/pricing/free-trial/).

##<a id="CreateDB"></a>Шаг 1. Загрузка файлов шаблонов ##
Давайте начнем с загрузки файлов шаблонов, которые будут использоваться в этом учебнике.

1. Скачайте [Пример создания учетной записи DocumentDB, веб-приложений и развертывания демонстрационного приложения](https://portalcontent.blob.core.windows.net/samples/DocDBWebsiteTodo.json) в локальную папку (например, C:\\DocumentDBTemplates). В этом примере разворачиваются учетная запись DocumentDB, веб-приложение службы приложений и веб-приложение. Также будет произведена автоматическая настройка веб-приложения для подключения к учетной записи DocumentDB.

2. Загрузите [Пример создания учетной записи DocumentDB и веб-приложений](https://portalcontent.blob.core.windows.net/samples/DocDBWebSite.json) в локальную папку (например, C:\\DocumentDBTemplates). В этом примере разворачиваются учетная запись DocumentDB, веб-приложение службы приложений и меняются настройки приложения сайта для упрощения доступа к данным о подключении DocumentDB, но в него не входит веб-приложение.

<a id="Build"></a>
##Шаг 2. Пример развертывания учетной записи DocumentDB, веб-приложения службы приложений и демонстрационного приложения

Теперь давайте развернем первый шаблон.

> [AZURE.TIP] Шаблон не проверяет, являются ли имя веб-приложения и имя учетной записи DocumentDB: а) действующими и б) доступными. Перед началом развертывания настоятельно рекомендуется проверить доступность имен, которые планируется использовать.

1. Выполните вход на [портал Azure](https://portal.azure.com), нажмите кнопку "Создать" и найдите пункт "Развертывание шаблона". ![Снимок экрана пользовательского интерфейса развертывания шаблона](./media/documentdb-create-documentdb-website/TemplateDeployment1.png)

2. Выберите пункт "Развертывание шаблона" и нажмите кнопку **Создать** ![Снимок экрана пользовательского интерфейса развертывания шаблона](./media/documentdb-create-documentdb-website/TemplateDeployment2.png)

3.  Нажмите кнопку **Изменить шаблон**, вставьте содержимое файла шаблона DocDBWebsiteTodo.json и нажмите кнопку **Сохранить**. ![Снимок экрана пользовательского интерфейса развертывания шаблона](./media/documentdb-create-documentdb-website/TemplateDeployment3.png)

4. Нажмите кнопку **Изменить параметры**, укажите значения для всех обязательных параметров и нажмите кнопку **ОК**. Он принимает перечисленные ниже параметры.

	1. SITENAME: задает имя веб-приложения службы приложений и используется для создания URL-адреса, который будет применяться для доступа к веб-приложению (например, если указать "mydemodocdbwebapp", то URL-адрес для доступа к веб-приложению будет иметь вид mydemodocdbwebapp.azurewebsites.net).

	2. HOSTINGPLANNAME: задает имя создаваемого плана размещения службы приложений.

	3. LOCATION: задает расположение Azure, в котором будут создаваться ресурсы DocumentDB и веб-приложения.

	4. DATABASEACCOUNTNAME: задает имя создаваемой учетной записи DocumentDB.

	![Снимок экрана пользовательского интерфейса развертывания шаблона](./media/documentdb-create-documentdb-website/TemplateDeployment4.png)

5. Выберите существующую группу ресурсов или укажите имя и расположение для создания новой группы ресурсов. ![Снимок экрана пользовательского интерфейса развертывания шаблона](./media/documentdb-create-documentdb-website/TemplateDeployment5.png)
  
6.  Выберите **Просмотр условий**, **Покупки** и нажмите кнопку **Создать** для начала развертывания. Выберите **Закрепить на панели мониторинга**, чтобы развертывание отображалось на домашней странице портала Azure. ![Снимок экрана пользовательского интерфейса развертывания шаблона](./media/documentdb-create-documentdb-website/TemplateDeployment6.png)

7.  После завершения развертывания откроется колонка группы ресурсов. ![Снимок экрана колонки группы ресурсов](./media/documentdb-create-documentdb-website/TemplateDeployment7.png)

8.  Чтобы использовать приложение, просто перейдите по URL-адресу веб-приложения (в приведенном выше примере это URL-адрес http://mydemodocdbwebapp.azurewebsites.net)). Вы увидите следующее веб-приложение.

	![Пример приложения Todo](./media/documentdb-create-documentdb-website/image2.png)

9. Теперь создайте несколько задач в веб-приложении и вернитесь в колонку группы ресурсов на портале Azure. Выберите ресурс учетной записи DocumentDB в списке ресурсов и нажмите кнопку **Обозреватель запросов**. ![Снимок экрана для колонки «Сводка» с выделенным веб-приложением myotherdocumentdbwebapp](./media/documentdb-create-documentdb-website/TemplateDeployment8.png)

10. Запустите запрос по умолчанию, «SELECT * FROM c», и ознакомьтесь с результатами. Обратите внимание, что запрос вернул JSON-представление элементов списка задач, которые были созданы на шаге 7 выше. Поэкспериментируйте с запросами, например попробуйте выполнить запрос «SELECT * FROM c WHERE c.isComplete = true», он вернет все элементы списка задач, которые были помечены как завершенные.

	![Снимок экрана для колонок «Обозреватель запросов» и «Результаты», где отображаются результаты запросов](./media/documentdb-create-documentdb-website/image5.png)

11. Не стесняйтесь исследовать портал экспериментов DocumentDB или вносить изменения в пример приложения Todo. Когда вы закончите, давайте развернем еще один шаблон.
	
<a id="Build"></a>
## Шаг 3: пример развертывания учетной записи Document и веб-приложения

Теперь давайте развернем второй шаблон. Этот шаблон наглядно показывает, как внедрить данные о подключении DocumentDB, например конечную точку учетной записи и главный ключ, в веб-приложение в качестве параметров приложения или в виде пользовательской строки подключения. Например, возможно, у вас имеется собственное веб-приложение, которое нужно развернуть с помощью учетной записи DocumentDB, причем сведения о подключении должны заполняться автоматически во время развертывания.

> [AZURE.TIP] Шаблон не проверяет, являются ли имя веб-приложения и имя учетной записи DocumentDB: а) действующими и б) доступными. Перед началом развертывания настоятельно рекомендуется проверить доступность имен, которые планируется использовать.

1. На [портале Azure](https://portal.azure.com) нажмите кнопку "Создать" и найдите пункт "Развертывание шаблона". ![Снимок экрана пользовательского интерфейса развертывания шаблона](./media/documentdb-create-documentdb-website/TemplateDeployment1.png)

2. Выберите пункт "Развертывание шаблона" и нажмите кнопку **Создать** ![Снимок экрана пользовательского интерфейса развертывания шаблона](./media/documentdb-create-documentdb-website/TemplateDeployment2.png)

3.  Нажмите кнопку **Изменить шаблон**, вставьте содержимое файла шаблона DocDBWebSite.json и нажмите кнопку **Сохранить**. ![Снимок экрана пользовательского интерфейса развертывания шаблона](./media/documentdb-create-documentdb-website/TemplateDeployment3.png)

4. Нажмите кнопку **Изменить параметры**, укажите значения для всех обязательных параметров и нажмите кнопку **ОК**. Он принимает перечисленные ниже параметры.

	1. SITENAME: задает имя веб-приложения службы приложений и используется для создания URL-адреса, который будет применяться для доступа к веб-приложению (например, если указать "mydemodocdbwebapp", то URL-адрес для доступа к веб-приложению будет иметь вид mydemodocdbwebapp.azurewebsites.net).

	2. HOSTINGPLANNAME: задает имя создаваемого плана размещения службы приложений.

	3. LOCATION: задает расположение Azure, в котором будут создаваться ресурсы DocumentDB и веб-приложения.

	4. DATABASEACCOUNTNAME: задает имя создаваемой учетной записи DocumentDB.

	![Снимок экрана пользовательского интерфейса развертывания шаблона](./media/documentdb-create-documentdb-website/TemplateDeployment4.png)

5. Выберите существующую группу ресурсов или укажите имя и расположение для создания новой группы ресурсов. ![Снимок экрана пользовательского интерфейса развертывания шаблона](./media/documentdb-create-documentdb-website/TemplateDeployment5.png)
  
6.  Выберите **Просмотр условий**, **Покупки** и нажмите кнопку **Создать** для начала развертывания. Выберите **Закрепить на панели мониторинга**, чтобы развертывание отображалось на домашней странице портала Azure. ![Снимок экрана пользовательского интерфейса развертывания шаблона](./media/documentdb-create-documentdb-website/TemplateDeployment6.png)

7.  После завершения развертывания откроется колонка группы ресурсов. ![Снимок экрана колонки группы ресурсов](./media/documentdb-create-documentdb-website/TemplateDeployment7.png)

8. Выберите "Ресурс веб-приложения" в списке ресурсов и нажмите кнопку **Параметры приложения** ![Снимок экрана группы ресурсов](./media/documentdb-create-documentdb-website/TemplateDeployment9.png)

9. Обратите внимание на наличие параметров приложения для конечной точки и каждого из главных ключей DocumentDB. ![Снимок экрана с параметрами приложения](./media/documentdb-create-documentdb-website/TemplateDeployment10.png)

10. Вы можете продолжить знакомство с порталом Azure либо воспользоваться одним из [примеров](http://go.microsoft.com/fwlink/?LinkID=402386) DocumentDB для создания собственного приложения DocumentDB.

	
	
<a name="NextSteps"></a>
## Дальнейшие действия

Поздравляем! Мы выполнили развертывание DocumentDB, веб-приложения службы приложений и примера веб-приложения с использованием шаблонов диспетчера ресурсов Azure.

- Для получения дополнительных сведений о DocumentDB щелкните [здесь](http://azure.com/docdb).
- Дополнительные сведения о веб-приложениях службы приложений Azure см. [здесь](http://go.microsoft.com/fwlink/?LinkId=325362).
- Дополнительные сведения о шаблонах диспетчера ресурсов Azure см. [здесь](https://msdn.microsoft.com/library/azure/dn790549.aspx).


## Изменения
* Указания по изменениям при переходе от веб-сайтов к службе приложений см. в разделе [Служба приложений Azure и ее влияние на существующие службы Azure](http://go.microsoft.com/fwlink/?LinkId=529714).
* Информацию о смене старого портала на новый см. в [справочнике по навигации на классическом портале Azure](http://go.microsoft.com/fwlink/?LinkId=529715).

>[AZURE.NOTE] Чтобы приступить к работе со службой приложений Azure до создания учетной записи Azure, перейдите к разделу [Пробное использование службы приложений](http://go.microsoft.com/fwlink/?LinkId=523751), где вы можете быстро создать кратковременное веб-приложение начального уровня в службе приложений. Никаких кредитных карт и обязательств.
 

<!---HONumber=AcomDC_0504_2016-->