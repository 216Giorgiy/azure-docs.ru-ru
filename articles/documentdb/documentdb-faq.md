---
title: "Часто задаваемые вопросы о базе данных DocumentDB | Документация Майкрософт"
description: "Ознакомьтесь с ответами на часто задаваемые вопросы о службе базы данных документов NoSQL Azure DocumentDB для JSON. Ответы на вопросы о емкости, уровнях производительности и масштабировании базы данных."
keywords: "Вопросы о базе данных DocumentDB — вопросы и ответы по DocumentDB | Microsoft Azure"
services: documentdb
author: mimig1
manager: jhubbard
editor: monicar
documentationcenter: 
ms.assetid: b68d1831-35f9-443d-a0ac-dad0c89f245b
ms.service: documentdb
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/08/2017
ms.author: mimig
translationtype: Human Translation
ms.sourcegitcommit: 97acd09d223e59fbf4109bc8a20a25a2ed8ea366
ms.openlocfilehash: 8ebc1aa663f298d1f3f495523d85bda8777d5d29
ms.lasthandoff: 03/10/2017


---
# <a name="frequently-asked-questions-about-documentdb"></a>Вопросы и ответы по DocumentDB
## <a name="database-questions-about-microsoft-azure-documentdb-fundamentals"></a>Вопросы об основах Microsoft Azure DocumentDB
### <a name="what-is-microsoft-azure-documentdb"></a>Что такое Microsoft Azure DocumentDB?
Microsoft Azure DocumentDB — это доступная по всему земному шару высокоскоростная база данных документов NoSQL как служба, предлагающая широкий набор разнообразных запросов к данным, не имеющим схемы, которая помогает добиться настраиваемого и надежного уровня производительности и позволяет осуществлять разработку в короткие сроки благодаря управляемой платформе, за которой стоит вся мощь и возможности Microsoft Azure. DocumentDB представляет собой отличное решение для веб-приложений, мобильных приложений, игр и приложений Интернета вещей, для которых необходимы предсказуемая пропускная способность, высокий уровень доступности, низкие задержки и модель данных без схемы. DocumentDB обеспечивает гибкость схемы и обширные возможности индексирования посредством встроенной модели данных JSON и включает поддержку транзакций нескольких документов с интегрированным JavaScript.  

Дополнительные вопросы о базах данных, ответы на них и инструкции по развертыванию и использованию этой службы см. на [странице документации по DocumentDB](https://azure.microsoft.com/documentation/services/documentdb/).

### <a name="what-kind-of-database-is-documentdb"></a>К какому виду принадлежит база данных DocumentDB?
DocumentDB — это база данных NoSQL, предназначенная для использования с документами, данные в которой хранятся в формате JSON.  DocumentDB поддерживает вложенные структуры автономных данных, к которым можно выполнять запросы с использованием многофункциональной [грамматики запросов SQL](documentdb-sql-query.md)DocumentDB. DocumentDB обеспечивает высокую производительность обработки транзакций для JavaScript на стороне сервера с помощью [хранимых процедур, триггеров и пользовательских функций](documentdb-programming.md). В базах данных предусмотрены разные [уровни производительности](documentdb-performance-levels.md)и уровни согласованности с возможностью настройки.

### <a name="do-documentdb-databases-have-tables-like-a-relational-database-rdbms"></a>Есть ли в базах данных DocumentDB таблицы как в реляционных СУБД?
Нет, DocumentDB хранит данные в коллекциях документов JSON.  Сведения о ресурсах DocumentDB см. в статье [Иерархическая модель ресурсов и понятия DocumentDB](documentdb-resources.md). Дополнительные сведения об отличиях решений NoSQL, таких как DocumentDB, от реляционных решений см. в статье [Базы данных NoSQL и SQL](documentdb-nosql-vs-sql.md).

### <a name="do-documentdb-databases-support-schema-free-data"></a>Поддерживают ли базы данных DocumentDB данные без схемы?
Да, DocumentDB позволяет приложениям хранить произвольные документы JSON без определения схемы и без указаний. Данные немедленно становятся доступными для запроса с помощью интерфейса запросов SQL DocumentDB.   

### <a name="does-documentdb-support-acid-transactions"></a>Поддерживает ли DocumentDB транзакции ACID?
Да, DocumentDB поддерживает транзакции между документами, выраженные в виде хранимых процедур и триггеров JavaScript. Транзакции объединяются в одну секцию в каждой коллекции и выполняются с помощью семантики ACID только полностью, изолированно от другого параллельно выполняемого кода и запросов пользователей.  Если в результате выполнения на стороне сервера кода JavaScript приложения возникает исключение, то выполняется откат всей транзакции. Дополнительные сведения о транзакциях см. в разделе [Транзакции программы базы данных](documentdb-programming.md#database-program-transactions).

### <a name="what-are-the-typical-use-cases-for-documentdb"></a>Каковы типичные примеры использования DocumentDB?
DocumentDB — это хороший выбор для новых веб-приложений, мобильных устройств, игр и приложений IoT, для которых важны автоматическое масштабирование, прогнозируемая производительность, быстрое (порядка нескольких миллисекунд) время отклика и возможность выполнения запросов к данным без схемы. DocumentDB предоставляет возможности для быстрой разработки и поддерживает непрерывную итерацию моделей данных приложения. В качестве [типичного сценария использования DocumentDB](documentdb-use-cases.md)можно привести приложения, управляющие содержимым пользователей и их данными.  

### <a name="how-does-documentdb-offer-predictable-performance"></a>Как DocumentDB обеспечивает прогнозируемую производительность?
Для измерения пропускной способности в DocumentDB используется [единица запроса](documentdb-request-units.md) . 1 единица запроса соответствует пропускной способности операций GET, выполняемых для документа объемом 1 КБ. Все операции в DocumentDB, в том числе операции чтения, записи, SQL-запросы и хранимые процедуры, имеют определенное значение единиц запроса, основанное на пропускной способности, необходимой для выполнения этой операции. Вместо того, чтобы думать о загрузке ЦП, операциях ввода-вывода и потребляемой памяти, а также о том, как они влияют на пропускную способность приложения, можно рассматривать единицу запроса как общий показатель производительности.

Каждую коллекцию DocumentDB можно зарезервировать с определенной пропускной способностью в единицах запроса пропускной способности в секунду. Для приложений любого масштаба можно выполнять оценку отдельных запросов для получения их единиц запроса и подготавливать коллекции для обработки суммарного количества единиц запроса для всех запросов. Также можно увеличивать или уменьшать пропускную способность вашей коллекции с изменением потребностей вашего приложения. Дополнительные сведения о единицах запроса и о том, как определить потребность в единицах запроса для своей коллекции, см. в статье [Оценка требований к пропускной способности](documentdb-request-units.md#estimating-throughput-needs). Также вы можете опробовать [калькулятор пропускной способности](https://www.documentdb.com/capacityplanner).

### <a name="is-documentdb-hipaa-compliant"></a>Соответствует ли DocumentDB HIPAA?
Да, DocumentDB соответствует HIPAA. HIPAA устанавливает требования к использованию, раскрытию и защите идентифицирующей личной медицинской информации. Дополнительные сведения см. в [центре управления безопасностью Майкрософт](https://www.microsoft.com/en-us/TrustCenter/Compliance/HIPAA).

### <a name="what-are-the-storage-limits-of-documentdb"></a>Каковы ограничения на использование хранилища в DocumentDB?
Общий объем данных, которые коллекция может хранить в DocumentDB, теоретически не ограничен.

### <a name="what-are-the-throughput-limits-of-documentdb"></a>Каковы ограничения пропускной способности DocumentDB?
Общий объем пропускной способности, который коллекция может поддерживать в DocumentDB, не ограничен, при условии что рабочую нагрузку можно распределить примерно поровну между достаточно большим количеством ключей секций.

### <a name="how-much-does-microsoft-azure-documentdb-cost"></a>Какова стоимость Microsoft Azure DocumentDB?
Дополнительные сведения см. на странице [DocumentDB. Цены](https://azure.microsoft.com/pricing/details/documentdb/). Плата за использование DocumentDB определяется количеством подготовленных коллекций, временем, в течение которого они были в сети, и подготовленной пропускной способностью для каждой коллекции.

### <a name="is-there-a-free-account-available"></a>Предусмотрена ли бесплатная учетная запись?
Если вы ранее не работали с Azure, то можете зарегистрироваться для получения [бесплатной учетной записи Azure](https://azure.microsoft.com/free/), действующей 30 дней и включающей 200 долларов, которые можно потратить на любые службы Azure. Кроме того, если у вас есть подписка на Visual Studio, вам доступны [кредиты Azure на сумму 150 долларов в месяц](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/), которые также можно потратить на любые службы Azure.  

Используя [эмулятор Azure DocumentDB](documentdb-nosql-local-emulator.md), можно локально разработать и протестировать приложение без создания подписки Azure, избежав затрат. Если приложение в эмуляторе DocumentDB работает правильно, вы можете использовать учетную запись Azure DocumentDB в облаке.

### <a name="how-can-i-get-additional-help-with-documentdb"></a>Как я могу получить помощь по работе с DocumentDB?
Если вам требуется поддержка, то обратитесь к нам через форум [Stack Overflow](http://stackoverflow.com/questions/tagged/azure-documentdb) либо договоритесь об индивидуальном чате с представителями технической службы DocumentDB, отправив письмо на адрес [askdocdb@microsoft.com](mailto:askdocdb@microsoft.com). Чтобы оставаться в курсе последних новостей о DocumentDB, подпишитесь на наши обновления в [Twitter](https://twitter.com/DocumentDB).

## <a name="set-up-microsoft-azure-documentdb"></a>Установка Microsoft Azure DocumentDB
### <a name="how-do-i-sign-up-for-microsoft-azure-documentdb"></a>Как зарегистрироваться в Microsoft Azure DocumentDB?
Служба Microsoft Azure DocumentDB доступна на [портале Azure][azure-portal].  Сначала необходимо оформить подписку на Microsoft Azure.  После оформления подписки на Microsoft Azure можно добавить учетную запись DocumentDB в подписку Azure. Инструкции по добавлению учетной записи DocumentDB см. в статье [Как создать учетную запись DocumentDB в базе данных NoSQL с помощью портала Azure](documentdb-create-account.md).   

### <a name="what-is-a-master-key"></a>Что такое главный ключ?
Главный ключ — это токен безопасности для доступа ко всем ресурсам учетной записи. Пользователи с этим ключом имеют доступ на чтение и запись во всех ресурсах в учетной записи базы данных. Будьте осторожны при распространении главных ключей. Первичный и вторичный главные ключи можно найти в колонке **Ключи** на [портале Azure][azure-portal]. Дополнительные сведения о ключах см. в разделе [Просмотр, копирование и повторное создание ключей доступа](documentdb-manage-account.md#keys).

### <a name="how-do-i-create-a-database"></a>Как создать базу данных?
Вы можете создавать базы данных с помощью [портала Azure]() в соответствии с инструкциями, описанными в статье [Создание коллекции и базы данных DocumentDB на портале Azure](documentdb-create-collection.md), используя один из [пакетов SDK для DocumentDB](documentdb-sdk-dotnet.md) или [интерфейсы REST API](https://msdn.microsoft.com/library/azure/dn781481.aspx).  

### <a name="what-is-a-collection"></a>Что такое коллекция?
Коллекция представляет собой контейнер документов JSON и связанной логики приложения на JavaScript. Коллекция представляет собой тарифицируемую сущность, и ее [стоимость](documentdb-performance-levels.md) определяется используемой пропускной способностью и хранилищем. Коллекции могут охватывать один или несколько разделов либо серверов и масштабироваться до практически неограниченных объемов хранилища или пропускной способности.

Коллекции также являются основанием для выставления счетов за использование DocumentDB. Счета за использование коллекции выставляются ежечасно на основе подготовленной пропускной способности и используемого объема хранилища. Дополнительные сведения см. на странице [DocumentDB. Цены](https://azure.microsoft.com/pricing/details/documentdb/).  

### <a name="how-do-i-set-up-users-and-permissions"></a>Как устанавливать настройки для пользователей и разрешений?
Создавать пользователей и разрешения можно с помощью одного из [пакетов SDK для DocumentDB](documentdb-sdk-dotnet.md) или [интерфейсов API REST](https://msdn.microsoft.com/library/azure/dn781481.aspx).   

## <a name="database-questions-about-developing-against-microsoft-azure-documentdb"></a>Вопросы о разработке с использованием Microsoft Azure DocumentDB
### <a name="how-to-do-i-start-developing-against-documentdb"></a>Как начать разработку для DocumentDB?
[Пакеты SDK](documentdb-sdk-dotnet.md) доступны для .NET, Python, Node.js, JavaScript и Java.  Разработчики также могут использовать интерфейсы [REST API HTTP](https://msdn.microsoft.com/library/azure/dn781481.aspx) для взаимодействия с ресурсами DocumentDB на разных платформах и с использованием разных языков программирования.

Примеры пакетов SDK DocumentDB для [.NET](documentdb-dotnet-samples.md), [Java](https://github.com/Azure/azure-documentdb-java), [Node.js](documentdb-nodejs-samples.md) и [Python](documentdb-python-samples.md) доступны на сайте GitHub.

### <a name="does-documentdb-support-sql"></a>Поддерживается ли SQL в DocumentDB?
Язык SQL-запросов DocumentDB включает в себя усовершенствованное подмножество функций обработки запросов, поддерживаемых SQL. Язык SQL-запросов DocumentDB обеспечивает разнообразные иерархические и реляционные операторы и расширяемость с помощью пользовательских функций (UDF) на JavaScript. Грамматика JSON позволяет моделировать документы JSON в виде деревьев с метками в виде узлов дерева, которые используются как технологиями автоматического индексирования DocumentDB, так и запросами на диалекте языка SQL DocumentDB.  Дополнительные сведения об использовании грамматики SQL см. в статье [SQL-запросы и синтаксис SQL в DocumentDB][query].

### <a name="does-documentdb-support-sql-aggregation-functions"></a>Поддерживает ли DocumentDB статистические функции SQL?
DocumentDB поддерживает агрегирование с низкой задержкой для любого масштаба с помощью статистических функций `COUNT`, `MIN`, `MAX`, `AVG` и `SUM` посредством грамматики SQL. Дополнительные сведения см. в разделе [Статистические функции](documentdb-sql-query.md#Aggregates).

### <a name="what-are-the-data-types-supported-by-documentdb"></a>Какие типы данных поддерживаются DocumentDB?
В DocumentDB поддерживаются те же простые типы данных, что и в JSON. JSON имеет систему простых типов, состоящую из типов данных String (строки), Number (числа IEEE754 с двойной точностью), Boolean (true и false) и Null (пустые значения). В DocumentDB встроена поддержка пространственных типов Point, Polygon и LineString, выраженных в формате GeoJSON. Более сложные типы данных, такие как DateTime, Guid, Int64 и Geometry, могут быть представлены в JSON и DocumentDB посредством создания вложенных объектов с помощью оператора { } и массивов с помощью оператора [ ].

### <a name="how-does-documentdb-provide-concurrency"></a>Каким образом DocumentDB обеспечивает согласованность?
DocumentDB поддерживает оптимистическое управление параллелизмом (OCC) посредством тегов сущностей HTTP или тегов ETag. У каждого ресурса DocumentDB есть тег ETag, а значение ETag задается на сервере при каждом обновлении документа. Заголовок и текущее значение ETag добавляются во все сообщения ответа. Чтобы сервер мог определить, нужно ли обновить ресурс, можно использовать теги ETag с заголовком If-Match. Значением If-Match является значение ETag, используемое для проверки. Если это значение ETag совпадает со значением ETag сервера, то ресурс будет обновлен. Если тег ETag больше не актуален, то сервер отклоняет операцию с кодом ответа "HTTP 412: ошибка в предусловии". После этого клиенту придется повторно получить ресурс, чтобы получить его текущее значение ETag. Кроме того, теги ETag можно использовать с заголовком If-None-Match, чтобы определять, требуется ли повторное получение ресурса.

Чтобы применить оптимистичный параллелизм в .NET, используйте класс [AccessCondition](https://msdn.microsoft.com/library/azure/microsoft.azure.documents.client.accesscondition.aspx) . Пример для .NET приведен в файле [Program.cs](https://github.com/Azure/azure-documentdb-dotnet/blob/master/samples/code-samples/DocumentManagement/Program.cs) примера DocumentManagement на сайте GitHub.

### <a name="how-do-i-perform-transactions-in-documentdb"></a>Как выполнять транзакции в DocumentDB?
DocumentDB поддерживает транзакции LINQ посредством хранимых процедур и триггеров JavaScript. Все операции с базами данных в скриптах выполняются при изоляции моментального снимка в коллекции, если это коллекция с одной секцией, или в документах с одинаковым ключом секции в коллекции, если эта коллекция секционирована. Моментальный снимок версий документов (ETag) выполняется в начале транзакции и фиксируется только в случае успешного выполнения скрипта. Если JavaScript выдает ошибку, выполняется откат транзакции. Дополнительные сведения см. в статье [Программирование DocumentDB на стороне сервера: хранимые процедуры, триггеры баз данных и определяемые пользователем функции](documentdb-programming.md).

### <a name="how-can-i-bulk-insert-documents-into-documentdb"></a>Как выполнять массовую вставку документов в DocumentDB?
Массовую вставку документов в DocumentDB можно выполнить тремя способами:

* с помощью средства миграции данных (см. статью [Импорт данных в DocumentDB с помощью средства миграции базы данных](documentdb-import-data.md));
* с помощью проводника документов на портале Azure (см. раздел [Массовое добавление документов](documentdb-view-json-document-explorer.md#bulk-add-documents));
* с помощью хранимых процедур (см. статью [Программирование DocumentDB на стороне сервера: хранимые процедуры, триггеры баз данных и определяемые пользователем функции](documentdb-programming.md)).

### <a name="does-documentdb-support-resource-link-caching"></a>Поддерживается ли в DocumentDB кэширование ссылок на ресурсы?
Да, поскольку DocumentDB — это служба RESTful, ссылки на ресурсы являются неизменяемыми и могут кэшироваться. Клиенты DocumentDB могут задавать заголовок "If-None-Match" для операций чтения в любом ресурсе, таком как документ или коллекция, и обновлять их локальные копии только при изменении версии сервера.

### <a name="is-a-local-instance-of-documentdb-available"></a>Доступен ли локальный экземпляр DocumentDB?
Да. [Эмулятор Azure DocumentDB](documentdb-nosql-local-emulator.md) предоставляет высокоточную эмуляцию службы DocumentDB. Его функциональные возможности аналогичны Azure DocumentDB, включая поддержку создания документов JSON и выполнения запросов к ним, подготовку и масштабирование коллекций, а также выполнение хранимых процедур и триггеров. С помощью эмулятора DocumentDB можно разрабатывать и тестировать приложения. Чтобы развернуть эти приложения в глобальной среде Azure, потребуется лишь изменить один параметр конфигурации для конечной точки подключения к DocumentDB.

## <a name="database-questions-about-developing-against-api-for-mongodb"></a>База данных: вопросы о разработке с использованием API для MongoDB
### <a name="what-is-documentdbs-api-for-mongodb"></a>Что такое API DocumentDB для MongoDB?
API Microsoft Azure DocumentDB для MongoDB — это слой совместимости, который позволяет приложениям легко и прозрачно взаимодействовать с ядром собственной СУБД DocumentDB с помощью существующих API MongoDB Apache и драйверов, которые поддерживаются сообществом разработчиков. Существующие инструменты MongoDB и актуальные навыки позволяют разработчикам создавать приложения, использующие DocumentDB. В этих приложениях будут задействованы преимущества уникальных возможностей DocumentDB, которые включают автоматическое индексирование, поддержку резервного копирования, финансово подкрепленные соглашения об уровне обслуживания и т. д.

### <a name="how-to-do-i-connect-to-my-api-for-mongodb-database"></a>Как подключиться к API для базы данных MongoDB?
Чтобы быстро подключиться к API DocumentDB для MongoDB, откройте [портал Azure](https://portal.azure.com). Перейдите к своей учетной записи. В учетной записи на *панели навигации слева* щелкните *Быстрый запуск*. *Быстрый запуск* позволяет оперативно получить фрагменты кода для подключения к базе данных. 

В DocumentDB строгие требования к безопасности и стандарты. Для учетных записей DocumentDB требуется проверка подлинности и безопасный обмен данными через *SSL*. Поэтому вы должны использовать TLSv1.2.

Дополнительные сведения см. в статье [Подключение приложения MongoDB к учетной записи DocumentDB с помощью строки подключения MongoDB](documentdb-connect-mongodb-account.md).

### <a name="are-there-additional-error-codes-for-an-api-for-mongodb-database"></a>Существуют ли дополнительные коды ошибок API для базы данных MongoDB?
В API для MongoDB есть собственные коды ошибок, помимо типовых кодов ошибок MongoDB.


| Ошибка               | Код  | Описание  | Решение  |
|---------------------|-------|--------------|-----------|
| TooManyRequests     | 16500 | Общее количество единиц запроса превысило подготовленное количество для коллекции и было отрегулировано. | Попробуйте масштабировать пропускную способность коллекции на портале Azure или повторите попытку. |
| ExceededMemoryLimit | 16501 | Так как в этой службе несколько клиентов, операция превысила выделенную память для клиента. | Уменьшите область операции, применив более строгие критерии запроса, или обратитесь в службу поддержки с [портала Azure](https://portal.azure.com/?#blade/Microsoft_Azure_Support/HelpAndSupportBlade). <br><br>*Например: &nbsp;&nbsp;&nbsp;&nbsp;db.getCollection('users').aggregate([<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{$match: {name: "Andy"}}, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{$sort: {age: -1}}<br>&nbsp;&nbsp;&nbsp;&nbsp;])*) |

[azure-portal]: https://portal.azure.com
[query]: documentdb-sql-query.md

