<properties 
   pageTitle="Развертывание топологий Storm в HDInsight и управление ими | Azure" 
   description="Узнайте, как развертывать и отслеживать топологии Storm, а также управлять ими с помощью панели мониторинга Storm, входящей в состав Apache Storm на HDInsight." 
   services="hdinsight" 
   documentationCenter="" 
   authors="Blackmist" 
   manager="paulettm" 
   editor="cgronlun"/>

<tags
   ms.service="hdinsight"
   ms.devlang="java"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="big-data" 
   ms.date="02/18/2015"
   ms.author="larryfr"/>

#Развертывание топологий Apache Storm в HDInsight и управление ими

Панель мониторинга Storm позволяет легко развернуть и запустить топологии Apache Storm в кластере HDInsight с помощью браузера. С помощью панели мониторинга можно также следить за топологиями и управлять их работой. Если используется Visual Studio, средства HDInsight для Visual Studio предоставляют аналогичные функциональные возможности в Visual Studio.

Панели мониторинга и функциональные возможности Storm в средствах HDInsight используют интерфейс REST API для Storm, который можно использовать для создания собственных решений для мониторинга и управления.

##Предварительные требования

* **Apache Storm в HDInsight** - см. статью <a href="../hdinsight-storm-getting-started/" target="_blank">"Приступая к работе с Apache Storm на HDInsight"</a> для получения указаний по созданию кластера.

* Для **панели мониторинга Storm** - современный браузер, который поддерживает HTML5

* Для **Visual Studio** - пакет SDK для Azure 2.5.1 или более поздней версии и средства HDInsight для Visual Studio. См. статью <a href="../hdinsight-hadoop-visual-studio-tools-getting-started/" target="_blank">"Приступая к работе с HDInsight средства для Visual Studio"</a> для установки и настройки инструментов HDInsight для Visual Studio.

	Одна из следующих версий Visual Studio:

	* Visual Studio 2012 <a href="http://www.microsoft.com/ru-ru/download/details.aspx?id=39305" target="_blank">с обновлением 4,</a>

	* Visual Studio 2013 <a href="http://www.microsoft.com/ru-ru/download/details.aspx?id=44921" target="_blank">с обновлением 4</a> или <a href="http://go.microsoft.com/fwlink/?LinkId=517284" target="_blank">Visual Studio 2013 Community.</a>

	* <a href="http://visualstudio.com/ru-ru/downloads/visual-studio-2015-ctp-vs" target="_blank">Visual Studio 2015, CTP-версия 6</a>

	> [AZURE.NOTE] В настоящее время инструменты HDInsight для Visual Studio поддерживают только Storm на кластере HDInsight версии 3.2.

##Панель мониторинга Storm

Панель мониторинга Storm доступна в кластере Storm. URL-адрес: **https://&lt;имя_кластера>.azurehdinsight.net/**, где **имя_кластера** - это имя Storm в кластере HDInsight. Панель мониторинга можно также открыть с помощью ссылки **Панель мониторинга Storm** на панели мониторинга кластера на портале Azure.

![the portal with storm dashboard highlighted][hdinsight-dashboard]

В верхней части панели мониторинга Storm выберите **Отправить топологию**. Следуйте указаниям на странице, чтобы запустить пример топологии или передать и запустить созданную вами топологию.

![the submit topology page][storm-dashboard-submit]

###Пользовательский интерфейс Storm

На панели мониторинга Storm выберите ссылку **Пользовательский интерфейс Storm**. Отобразится информация о кластере, а также всех запущенных топологиях.

![the storm ui][storm-dashboard-ui] 

####Главная страница

На главной странице пользовательского интерфейса Storm отображается следующая информация.

* **Сводка по кластерам** - основная информация о кластере Storm.

* **Сводка по топологиям** - список запущенных топологий. С помощью ссылок в этом разделе можно просмотреть дополнительную информацию об определенных топологиях.

* **Сводка по контролеру** - информация о контролере Storm.

* **Конфигурация Nimbus** - конфигурация Nimbus для кластера.

####Сводка по топологии

При выборе ссылки в разделе **Сводка по топологиям** отображается следующая информация о топологии.

* **Сводка по топологии** - основная информация о топологии.

* **Действия с топологией** - действия по управлению, которые можно выполнять с топологией.

	* **Активация** - возобновление обработки отключенной топологии.
	
	* **Отключить** - приостановка выполняемой топологии.
	
	* **Повторная балансировка** - корректировка параллелизма топологии. После изменения числа узлов в кластере необходимо выполнить повторную балансировку топологий. Это позволяет топологии скорректировать параллелизм для компенсации увеличения или уменьшения количества узлов в кластере.
	
		Дополнительную информацию см. в разделе <a href="http://storm.apache.org/documentation/Understanding-the-parallelism-of-a-Storm-topology.html" target="_blank">"Основная информация о параллелизме топологии Storm".</a>
	
	* **Удалить** - останавливает выполнение топологии Storm по истечении заданного времени ожидания.

* **Статистика топологии** - статика по топологии. С помощью ссылок в столбце **Окно** можно установить временные рамки для оставшихся записей на странице.

* **Воронки** - используемые в топологии источники данных, которые называются воронками (spout). С помощью ссылок в этом разделе можно получить дополнительную информацию об определенных воронках.

* **Сита** - используемые в топологии обработчики данных, которые называются ситами (bolt). С помощью ссылок в этом разделе можно получить дополнительную информацию об определенных ситах.

* **Конфигурация топологии** - конфигурация выбранной топологии.

####Сводка по воронкам и ситам

При выборе воронки в разделе **Воронки** или **Сита** отображаются следующую информацию о выбранном элементе.

* **Сводка по компоненту** - основная информация о воронке или сите.

* **Статистика по воронке или ситу** - статистика по воронке или ситу. С помощью ссылок в столбце **Окно** можно установить временные рамки для оставшихся записей на странице.

* **Статистика по входным данным** (только сита) - информация о входных потоках, проходящих через сито.

* **Статистика по выходным данным** - информация о потоках, создаваемых этой воронкой или ситом.

* **Исполнители** - информация об экземплярах воронки или сита. Выберите запись **Порт** для определенного исполнителя, чтобы просмотреть журнал диагностической информации, созданный для этого экземпляра.

* **Ошибки** - информация об ошибках для данной воронки или сита.

##Средства HDInsight для Visual Studio

Средства HDInsight можно использовать для отправки топологии C# или гибридной топологии в кластер Storm. Далее используется пример приложения. Информацию о создании собственных топологий, с помощью средств HDInsight см. в разделе [Разработка топологий на C# с помощью средств HDInsight для Visual Studio](../hdinsight-storm-develop-csharp-visual-studio-topology/).

Чтобы развернуть пример в Storm в кластере HDInsight, а затем просмотреть топологию и управлять ею, сделайте следующее.

1. Если вы еще не установили последнюю версию инструментов HDInsight для Visual Studio, см. раздел <a href="../hdinsight-hadoop-visual-studio-tools-getting-started/" target="_blank">"Приступая к работе с HDInsight средства для Visual Studio"</a>.

2. Откройте Visual Studio, выберите **Файл**, **Создать**, а затем - **Проект**.

3. В диалоговом окне **Новый проект** разверните **Установленные**, **Шаблоны** и выберите **HDInsight**. В списке шаблонов выберите **Пример Storm**. В нижней части диалогового окна введите имя приложения.

	![image](./media/hdinsight-storm-deploy-monitor/sample.png)

1. В **обозревателе решений** щелкните правой кнопкой мыши проект и выберите **Отправить в Storm в HDInsight**.

	> [AZURE.NOTE] При появлении запроса введите учетные данные входа для своей подписки Azure. Если у вас несколько подписок, воспользуйтесь той, что содержит ваш кластер Storm в HDInsight.

2. Выберите кластер Storm в HDInsight из раскрывающегося списка **Кластер Storm** и выберите **Отправить**. Вы можете отслеживать, выполняется ли отправка успешно или нет, с помощью окна **Выходные данные**.

3. После успешной отправки топологии должны появиться **топологии Storm** для кластера. Выберите топологию в списке, чтобы просмотреть информацию о выполняемой топологии.

	![visual studio monitor](./media/hdinsight-storm-deploy-monitor/vsmonitor.png)

	> [AZURE.NOTE] Можно также просмотреть **топологии Storm** из **обозревателя серверов**, развернув **Azure**, **HDInsight** и затем щелкнув правой кнопкой мыши кластер Storm в HDInsight и выбрав пункт **Просмотреть топологии Storm**.

	Используйте ссылки на компоненты spout или bolt, чтобы просмотреть информацию о них. Для каждого выбранного элемента открывается новое окно.

4. В представлении **Сводка по топологиям** выберите **Удалить**, чтобы остановить топологию.

	> [AZURE.NOTE] Топологии Storm выполняются, пока не будут удалены или пока не будет удален кластер.

##Интерфейс REST API

Пользовательский интерфейс Storm построен на базе REST API, поэтому функциональные возможности отслеживания и управление можно реализовать аналогичным образом с помощью API. С помощью REST API можно создать пользовательские средства для отслеживания топологий Storm и управления ими.

Интерфейс REST API для Storm описан в документе <a href="https://github.com/apache/storm/blob/master/STORM-UI-REST-API.md" target="_base">https://github.com/apache/storm/blob/master/STORM-UI-REST-API.md</a>. Следующая информация касается использования REST API с Apache Storm в HDInsight.

###Базовый универсальный код ресурса

Базовый универсальный код ресурса для интерфейса REST API в кластерах HDInsight - **https://&lt;имя_кластера>.azurehdinsight.net/stormui/api/v1/**, где **имя_кластера** - это имя Storm в кластере HDInsight.

###Проверка подлинности

Для запросов REST API необходимо использовать **обычную проверку подлинности** с помощью имени и пароля администратора кластера HDInsight. 

> [AZURE.NOTE] Так как при обычной проверке подлинности данные отправляются открытым текстом, следует **всегда** использовать HTTPS для защиты связи с кластером.

###Возвращаемые значения

Информацию, возвращаемую REST API, можно использовать только в пределах кластера или компьютеров в одной виртуальной сети Azure выполняющей функцию кластера. Например, полное доменное имя (FQDN), возвращаемое для серверов Zookeeper, не будет доступно из Интернета.

##Дальнейшие действия

Теперь, когда вы узнали, как развертывать и отслеживать топологии с помощью панели мониторинга Storm, можете переходить к изучению [разработки топологий на C# с помощью средств HDInsight для Visual Studio](../hdinsight-storm-develop-csharp-visual-studio-topology/) или [разработки топологий на платформе Java с помощью Maven](../hdinsight-storm-develop-java-topology/).


[hdinsight-dashboard]: ./media/hdinsight-storm-deploy-monitor/dashboard-link.png
[storm-dashboard-submit]: ./media/hdinsight-storm-deploy-monitor/submit.png
[storm-dashboard-ui]: ./media/hdinsight-storm-deploy-monitor/storm-ui-summary.png

<!--HONumber=45--> 
