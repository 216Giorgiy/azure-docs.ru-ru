<properties 
	pageTitle="Доставка мультимедиа по запросу с помощью служб мультимедиа Azure" 
	description="В этом разделе рассказывается об общих сценариях доставки мультимедиа по запросу с помощью служб мультимедиа Azure." 
	services="media-services" 
	documentationCenter="" 
	authors="Juliako" 
	manager="dwrede" 
	editor=""/>

<tags 
	ms.service="media-services" 
	ms.workload="media" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="03/10/2015" 
	ms.author="juliako"/>


#Доставка мультимедиа по запросу с помощью служб мультимедиа Azure

##Обзор

В этом разделе описан типичный рабочий процесс для видео по запросу в службах мультимедиа Azure (AMS) На каждом шаге перечисляются ссылки на соответствующие разделы. Для задач, которые можно выполнить с использованием различных технологий, предусмотрены кнопки, позволяющие выбрать соответствующую технологию (например, .NET или REST).   

Обратите внимание, что службы мультимедиа можно интегрировать с существующими средствами и процессами. Например, можно кодировать содержимое на сайте, а затем загружать его в службы мультимедиа для преобразования в различные форматы и доставки с помощью сети CDN Azure или сторонней сети CDN. 

На следующей диаграмме показаны основные части платформы служб мультимедиа, участвующих в рабочем процессе для видео по запросу.
![Рабочий процесс для видео по запросу][vod-overview]

##<a id="vod_scenarios"></a>Общие сценарии. Доставка мультимедиа по запросу. 

###Защита содержимого в хранилище и доставка потокового мультимедиа в незашифрованном виде

1. Передача мезонинного файла в высоком качестве в ресурс.
	
	Рекомендуется применять параметр шифрования хранилища для ресурса, чтобы защитить содержимое при отправке и хранении. 
1. Кодирование в набор MP4-файлов с адаптивной скоростью. 

	Рекомендуется применять параметр шифрования хранилища для выходного ресурса, чтобы защитить содержимое при хранении.
	
1. Настройка политики доставки ресурсов (используется динамической упаковкой). 
	
	Если ресурс зашифрован в хранилище, **необходимо** настроить политику доставки ресурсов. 

1. Опубликуйте ресурс, создав указатель OnDemand.

	Убедитесь, что есть как минимум одна зарезервированная единица потоковой передачи на конечной точке потоковой передачи, с которой необходимо выполнять потоковую передачу содержимого.

1. Потоковая передача содержимого.

###Защита содержимого в хранилище, доставка потокового мультимедиа с динамическим шифрованием  

Чтобы использовать динамическое шифрование, необходимо сначала получить как минимум одну зарезервированную единицу потоковой передачи на конечной точке потоковой передачи, с которой необходимо выполнять потоковую передачу содержимого.

1. Передача мезонинного файла в высоком качестве в ресурс. Примените к ресурсу параметр шифрования хранилища.
1. Кодирование в набор MP4-файлов с адаптивной скоростью. Примените к выходному ресурсу параметр шифрования хранилища.
1. Создайте ключ шифрования содержимого для ресурса, к которому необходимо применить динамическое шифрование при воспроизведении.
2. Настройте политику авторизации ключей содержимого.
1. Настройте политику доставки ресурсов (используется динамической упаковкой и динамическим шифрованием).
1. Опубликуйте ресурс, создав указатель OnDemand.
1. Потоковая передача содержимого. 

###Индексирование содержимого

1. Передача мезонинного файла в высоком качестве в ресурс.
1. Индексирование содержимого.

	Задание индексирования создает файлы, которые можно использовать в качестве субтитров при воспроизведении видео. Оно также создает файлы, которые дают возможность выполнять поиск в видео и переходить к определенному расположению в нем.	

1. Использование проиндексированного содержимого.


###Использование прогрессивного скачивания 

1. Передача мезонинного файла в высоком качестве в ресурс.
1. Кодирование в набор MP4-файлов с адаптивной скоростью или отдельный файл MP4.
1. Опубликуйте ресурс, создав указатель OnDemand или SAS.

	При использовании указателя OnDemand убедитесь, что есть как минимум одна зарезервированная единица потоковой передачи на конечной точке потоковой передачи, с которой планируется выполнять последовательное скачивание содержимого.

	При использовании указателя SAS содержимое скачивается из хранилища BLOB-объектов Azure. В этом случае нет необходимости в зарезервированных единицах потоковой передачи.
  
1. Прогрессивное скачивание содержимого.

Эта статья содержит ссылки на разделы, в которых показано, как настроить среду разработки и выполнить указанные выше задачи.


##Основные понятия

Информация о понятиях, связанных с доставкой содержимого по запросу, см. в разделе [Понятия служб мультимедиа](media-services-concepts.md).

##Создание учетной записи служб мультимедиа

Воспользуйтесь **порталом управления Azure** для [создания учетной записи служб мультимедиа Azure](media-services-create-account.md). 

##Настройка среды разработки  

Выберите **.NET** или **REST API** для среды разработки.

[AZURE.INCLUDE [media-services-selector-setup](../includes/media-services-selector-setup.md)]

##Программное подключение  

Выберите **.NET** или **REST API** для программного подключения к службам мультимедиа Azure.

[AZURE.INCLUDE [media-services-selector-connect](../includes/media-services-selector-connect.md)]


##Настройка конечных точек потоковой передачи

Обзор конечных точек потоковой передачи и сведения об управлении ими см. в разделе [Управление конечными точками потоковой передачи в учетной записи служб мультимедиа](media-services-manage-origins.md).

##Отправка мультимедиа 

Отправьте файлы с помощью **портала управления Azure**, **.NET** или **API REST**.

[AZURE.INCLUDE [media-services-selector-upload-files](../includes/media-services-selector-upload-files.md)]

##Создание заданий и задач

Задание - это сущность, которая содержит метаданные о наборе задач (например, кодирования или индексирования). Каждая задача выполняет атомарную операцию на входном ресурсе или ресурсах. Пример создания заданий кодирования см. в разделе:

Обзор см. в разделе [Работа с заданиями служб мультимедиа Azure](media-services-jobs.md).

Получите обработчик мультимедиа, соответствующий вашей задаче, с **.NET** или **REST API**.

[AZURE.INCLUDE [media-services-selector-get-media-processor](../includes/media-services-selector-get-media-processor.md)]

В следующих примерах создаются задания кодирования с **порталом управления Azure**, **.NET** или **REST API**.

[AZURE.INCLUDE [media-services-selector-encode](../includes/media-services-selector-encode.md)]

##Индексация

[AZURE.INCLUDE [media-services-selector-index-content](../includes/media-services-selector-index-content.md)]

##Кодирование 

**Обзор**: [Кодирование содержимого по запросу с помощью служб мультимедиа Azure](media-services-encode-asset.md).

Дополнительное кодирование с помощью **рабочего процесса Premium обработчика мультимедиа** с использованием **.NET**. 

[AZURE.INCLUDE [media-services-selector-advanced-encoding](../includes/media-services-selector-advanced-encoding.md)]

Кодирование **кодировщиком мультимедиа Azure** с помощью **портала управления Azure**, **.NET** или **API-интерфейса REST**.
 
[AZURE.INCLUDE [media-services-selector-encode](../includes/media-services-selector-encode.md)]

##Наблюдение за ходом выполнения задания

Мониторинг хода выполнения задания с помощью **портала управления Azure**, **.NET** или **API REST**.

[AZURE.INCLUDE [media-services-selector-job-progress](../includes/media-services-selector-job-progress.md)]

##Создание ключа содержимого

Создайте ключ содержимого с помощью которого необходимо шифровать ресурс с использованием **.NET** или **REST API**.

[AZURE.INCLUDE [media-services-selector-create-contentkey](../includes/media-services-selector-create-contentkey.md)]

##Настройка политики авторизации ключей содержимого 

Настройка защиты содержимого и политики авторизации ключа с помощью **.NET** или **API REST**.

[AZURE.INCLUDE [media-services-selector-content-key-auth-policy](../includes/media-services-selector-content-key-auth-policy.md)]

##Настройка политики доставки ресурсов

Настройте политики доставки ресурсов с помощью **.NET** или **REST API**.

[AZURE.INCLUDE [media-services-selector-asset-delivery-policy](../includes/media-services-selector-asset-delivery-policy.md)]

##Публикация и доставка ресурсов

**Обзор**: [Обзор доставки содержимого](media-services-deliver-content-overview.md)


Опубликуйте ресурсы (создав указатели) с помощью **портала управления Azure** или **.NET**.

[AZURE.INCLUDE [media-services-selector-publish](../includes/media-services-selector-publish.md)]

##Включение Azure CDN

Службы мультимедиа поддерживают интеграцию с Azure CDN. Сведения о включении Azure CDN см. в разделе [Управление конечными точками потоковой передачи в учетной записи служб мультимедиа](media-services-manage-origins.md#enable_cdn).

##Масштабирование учетной записи служб мультимедиа

Можно масштабировать **службы мультимедиа**, указав число **зарезервированных единиц потоковой передачи** и **зарезервированных единиц кодирования**, которые необходимо использовать при подготовке учетной записи. 

Можно также масштабировать учетную запись служб мультимедиа, добавляя к ней учетные записи хранения. Каждая учетная запись хранения ограничена 500 ТБ. Чтобы увеличить емкость хранилища за пределы ограничений по умолчанию, можно присоединить несколько учетных записей хранения для одной учетной записи служб мультимедиа.

[Этот](media-services-how-to-scale.md) раздел содержит ссылки на соответствующие разделы.

##Воспроизведение содержимого в существующих видеопроигрывателях

Дополнительные сведения см. в разделе [Воспроизведение содержимого с помощью существующих проигрывателей](media-services-playback-content-with-existing-players.md).


[vod-overview]: ./media/media-services-overview/media-services-video-on-demand.png


<!--HONumber=52-->