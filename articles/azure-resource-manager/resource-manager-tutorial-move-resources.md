---
title: Перемещение ресурсов Azure в другую группу ресурсов | Документация Майкрософт
description: Сведения о перемещении ресурсов Azure из одной группы ресурсов в другую, а также из одной подписки в другую.
services: azure-resource-manager
documentationcenter: ''
author: mumian
manager: dougeby
editor: tysonn
ms.service: azure-resource-manager
ms.workload: multiple
ms.tgt_pltfrm: na
ms.devlang: na
ms.date: 12/19/2018
ms.topic: tutorial
ms.author: jgao
ms.openlocfilehash: 3aadeb92fccc2baa445bce73e3d3111168aeecf6
ms.sourcegitcommit: 5978d82c619762ac05b19668379a37a40ba5755b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/31/2019
ms.locfileid: "55490283"
---
# <a name="tutorial-move-azure-resources-to-another-resource-group-or-subscription"></a>Руководство. Перемещение ресурсов Azure в другую группу ресурсов или подписку

В этом разделе показано, как перемещать ресурсы из одной группы ресурсов в другую. Вы также можете переместить ресурсы Azure из одной подписки Azure в другую подписку. В этом руководстве используется шаблон Resource Manager для развертывания двух групп ресурсов и одной учетной записи хранения. Затем переместите учетную запись хранения из одной группы ресурсов в другую.

В рамках этого руководства рассматриваются следующие задачи:

> [!div class="checklist"]
> * Подготовка ресурсов.
> * Проверка возможности перемещения ресурса.
> * Проверка по рекомендациям перед перемещением ресурсов.
> * Проверка операции перемещения.
> * Перемещение ресурсов.
> * Очистка ресурсов.

Если у вас еще нет подписки Azure, [создайте бесплатную учетную запись Azure](https://azure.microsoft.com/free/), прежде чем начинать работу.

[!INCLUDE [updated-for-az](../../includes/updated-for-az.md)]

## <a name="prepare-the-resources"></a>Подготовка ресурсов

Шаблон был создан и помещен в [общую учетную запись хранения](https://armtutorials.blob.core.windows.net/moveresources/azuredeploy.json). Шаблон определяет две группы ресурсов и одну учетную запись хранения. При развертывании шаблона необходимо указать имя проекта. Чтобы создать уникальные имена ресурсов, используется имя проекта.  Приведенный ниже код JSON извлечен из шаблона:

```json
"variables": {
  "resourceGroupSource": {
    "name": "[concat(parameters('projectName'), 'rg1')]",
    "location": "eastus"
  },
  "resourceGroupDestination": {
    "name": "[concat(parameters('projectName'), 'rg2')]",
    "location": "westus"      
  },
  "storageAccount": {
    "name": "[concat(parameters('projectName'), 'store')]",
    "location": "eastus"
  }
},
```

Обратите внимание на расположения, определенные в json. Две группы ресурсов расположены в восточной и западной частях США. Учетная запись хранения находится в регионе "Восточная часть США". При перемещении ресурса в другую группу ресурсов в другом расположении операция перемещения не изменяет расположение ресурса.

Щелкните **Попробовать**, чтобы открыть Cloud Shell, а затем выполните скрипт PowerShell в Cloud Shell:

```azurepowershell-interactive
$projectName = Read-Host -prompt "Enter a project name"
New-AzDeployment `
    -Name $projectname `
    -Location "centralus" `
    -TemplateUri "https://armtutorials.blob.core.windows.net/moveresources/azuredeploy.json" `
    -projectName $projectName
```

Подождите, пока скрипт успешно завершится, а затем откройте [портал Azure](https://portal.azure.com) и убедитесь,что группы ресурсов и учетная запись хранения развернуты должным образом.

> [!NOTE]
> Так как шаблон определяет две группы ресурсов, это развертывание считается развертыванием на уровне подписки. Развертывание шаблона портала не поддерживает развертывание на уровне подписки. Таким образом в этом руководстве используется Azure PowerShell. Интерфейс командной строки Azure также поддерживает развертывание на уровне подписки. Дополнительные сведения см. в статье [Создание групп ресурсов и ресурсов для подписки Azure](./deploy-to-subscription.md).

## <a name="verify-the-resource-can-be-moved"></a>Проверка возможности перемещения ресурса

Не все ресурсы можно переместить. Ресурс, используемый в этом руководстве, является учетной записью хранения, которую можно переместить. Сведения о том, как проверить, возможно ли перемещение ресурса, см. в разделе [Службы, которые можно переместить](./resource-group-move-resources.md#services-that-can-be-moved).

## <a name="checklist-before-moving-resources"></a>Рекомендации перед перемещением ресурсов

Этот шаг является необязательным в этом руководстве, так как он уже выполнен.

Вот некоторые важные особенности, которые следует учитывать перед перемещением ресурса. Дополнительные сведения см. в разделе [Рекомендации перед перемещением ресурсов](./resource-group-move-resources.md#checklist-before-moving-resources).

## <a name="validate-the-move"></a>Проверка перемещения

Проверка перемещения является необязательной в этом руководстве, так как она уже выполнена.

Операция проверки перемещения позволяет проверить сценарий перемещения без фактического перемещения ресурсов. Используйте эту операцию, чтобы определить, будет ли перемещение успешным. Дополнительные сведения см. в разделе [Проверка перемещения](./resource-group-move-resources.md#validate-move).

## <a name="move-the-resource"></a>Перемещение ресурсов

Учетная запись хранения находится внутри исходной группы ресурсов (rg1). Запустите следующий скрипт PowerShell, чтобы переместить ресурс в целевую группу ресурсов (rg2). Убедитесь, что имя проекта совпадает с именем, использованным при развертывании ресурсов.

```azurepowershell-interactive
$projectName = Read-Host -prompt "Enter a project name"
$resourceGroupSource = $projectName + "rg1"
$resourceGroupDestination = $projectName + "rg2"
$storageAccountName = $projectName + "store"

$storageAccount = Get-AzResource -ResourceGroupName $resourceGroupSource -ResourceName $storageAccountName
Move-AzResource -DestinationResourceGroupName $resourceGroupDestination -ResourceId $storageAccount.ResourceId
```

Откройте [портал Azure](https://portal.azure.com) и убедитесь, что учетная запись перемещена в другую группу ресурсов, а также что учетная запись по-прежнему расположена в восточной части США.

При перемещении ресурсов группа источника и группа назначения блокируются на время операции. Операции записи и удаления для групп ресурсов блокируются до завершения перемещения. Эта блокировка означает, что невозможно добавить, обновить или удалить ресурсы в группах ресурсов, но не означает, что эти ресурсы закреплены. Например, если переместить в новую группу ресурсов экземпляр SQL Server и его базу данных, то приложение, использующее эту базу данных, не будет испытывать простоев в работе. Оно по-прежнему сможет считывать данные из базы данных и записывать их в нее.

## <a name="clean-up-resources"></a>Очистка ресурсов

Если ресурсы Azure больше не нужны, их можно удалить. Для этого необходимо удалить группу ресурсов.

1. На портале Azure в меню слева выберите **Группа ресурсов**.
2. В поле **Фильтровать по имени** введите имя группы ресурсов.
3. Выберите имя исходной группы ресурсов.  
4. В главном меню выберите **Удалить группу ресурсов**.
5. Выберите расположение исходной группы ресурсов.  
6. В главном меню выберите **Удалить группу ресурсов**.

## <a name="next-steps"></a>Дополнительная информация

В этом руководстве вы узнали, как перенести учетную запись из одной группы ресурсов в другую. На данный момент вы работали с одной учетной записью хранения или с несколькими ее экземплярами. С помощью следующего руководства вы разработаете шаблон с несколькими ресурсами и несколькими типами ресурсов. Некоторые ресурсы обладают зависимыми ресурсами.

> [!div class="nextstepaction"]
> [Создание шаблонов Azure Resource Manager с зависимыми ресурсами](./resource-manager-tutorial-create-templates-with-dependent-resources.md)
