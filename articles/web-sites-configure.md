<properties linkid="manage-services-how-to-configure-websites" urlDisplayName="Настройка" pageTitle="Настройка веб-сайтов — управление службами Azure" metaKeywords="Веб-сайты Azure, настройка веб-сайтов Azure, база данных Azure SQL, Azure MySQL" description="Узнайте, как настраивать веб-сайты в Azure, включая способы настройки веб-сайта для использования базы данных SQL или MySQL." metaCanonical="" services="web-sites" documentationCenter="" title="Настройка веб-сайтов" authors="timamm" solutions="" manager="" editor="mollybos" />





# Настройка веб-сайтов #
На портале управления Azure можно изменить параметры конфигурации веб-сайта, а также связать веб-сайт с другими ресурсами Azure. Например, можно связать веб-сайты с базой данных SQL для обеспечения дополнительных функциональных возможностей. Можно также настроить веб-сайты для использования новой или существующей базы данных MySQL.

## Оглавление ##
- [Практическое руководство. Изменение параметров конфигурации веб-сайта](#howtochangeconfig)
- [Практическое руководство. Настройка веб-сайта для использования базы данных SQL](#howtoconfigSQL)
- [Практическое руководство. настройка веб-сайта для использования базы данных MySQL](#howtoconfigMySQL)
- [Практическое руководство. настройка имени пользовательского домена](#howtodomain)
- [Практическое руководство. Настройка веб-сайта для использования SSL](#howtoconfigSSL)
- [Дальнейшие действия](#next)



##<a name="howtochangeconfig"></a>Практическое руководство. Изменение параметров конфигурации веб-сайта

<!-- HOW TO: CHANGE CONFIGURATION OPTIONS FOR A WEB SITE -->

Для изменения параметров конфигурации веб-сайта выполните следующие шаги.

<ol>
	<li>На портале управления откройте страницы управления веб-сайтом.</li>
	<li>Нажмите вкладку <strong>Настройка</strong>, чтобы открыть страницу управления <strong>Настройка</strong>.</li>
	<li>Установите следующие параметры конфигурации для веб-сайта:
	<ul>

	<!-- GENERAL -->
	<li><strong>общие</strong>
<ul>
<li><strong>Версия .NET Framework</strong> - если веб-приложение использует платформу .NET Framework, установите версию, требуемую для веб-приложения.</li>

<li><strong>Версия PHP</strong> - если веб-приложение использует PHP, установите версию PHP, требуемую для веб-приложения.</li>
<li><strong>Версия </strong> - выберите отображаемую версию Java, чтобы разрешить ее использование в своем веб-приложении, или <strong>ВЫКЛ</strong>, чтобы отключить Java. Если включить Java для веб-приложения, параметр <strong>Веб-контейнер</strong> позволяет сделать выбор между версиями Tomcat и Jetty.
<p><strong>Примечание</strong>. По техническим причинам включение Java для веб-сайта отключает параметры .NET, PHP и Python.</p>
</li>
<li><strong>Версия Python</strong> - показывает версию Python (без возможности изменения).</li>
<li><strong>Режим управляемого конвейера</strong> - предлагаются два варианта: <strong>Классический</strong> и <strong>Интегрированный</strong>. Вариант по умолчанию — "Интегрированный". Устанавливайте режим управляемого конвейера "Классический" только при использовании устаревших веб-сайтов, выполняемых исключительно в предыдущих версиях IIS.</li>

<li><strong>Платформа</strong> - для веб-сайтов в стандартном режиме следует выбрать, выполнять ли приложение в 32-разрядной или в 64-разрядной среде. В режиме свободного и общего доступа всегда выполняйте приложения в 32-разрядной среде.</li>

<li><strong>Соединения WebSocket</strong> - выберите вариант <strong>Вкл.</strong>, чтобы разрешить веб-сайту использовать приложения с запросами в реальном времени, такие как чат.</li>

<li><strong>Всегда включено</strong> - в случае простоя в течение определенного периода времени веб-сайты будут по умолчанию выгружены. Это позволяет сэкономить системные ресурсы. Можно активировать параметр <strong>Всегда включено</strong> для сайта в стандартном режиме, если веб-сайт должен быть загружен всегда. Поскольку непрерывные веб-задания при деактивированном параметре <strong>Всегда включено</strong> могут работать ненадежно, выберите вариант <strong>Всегда включено</strong>, если на веб-сайте есть веб-задания, выполняемые непрерывно.</li>

<li><strong>Редактирование в Visual Studio Online</strong> - выберите <strong>Вкл.</strong> для изменения кода в реальном времени с помощью Visual Studio Online. После сохранения этого изменения конфигурации в разделе <strong>Сводка</strong> на вкладке ПАНЕЛЬ МОНИТОРИНГА будет отображаться ссылка <strong>Редактирование в Visual Studio Online</strong>. Щелкните ссылку для редактирования веб-сайта напрямую через Интернет. Если необходимо выполнить проверку подлинности, можно использовать базовые учетные данные развертывания. 
<p><strong>Примечание</strong>. Если активирован параметр "развертывания из системы управления версиями", при развертывании можно будет перезаписать изменения, внесенные в редакторе Visual Studio Online. Поэтому не следует использовать вариант "развертывание из системы управления версиями", если вы хотите редактировать содержимое веб-сайта непосредственно в Visual Studio Online.</p>
</li>



</ul></li>

<!-- CERTIFICATES -->
<li><strong>Сертификаты</strong> - только в стандартном режиме можно щелкнуть <strong>Загрузить</strong>, чтобы загрузить SSL-сертификат для настраиваемого домена. Здесь перечислены сертификаты, которые можно загрузить. Поддерживаются сертификаты с подстановочными знаками (сертификаты со звездочкой). После загрузки сертификата его можно назначить любому веб-сайту в подписке и регионе. Сертификат со звездочкой нужно загружать только один раз, при этом он может использоваться для любого сайта домена, для которого он действителен. Сертификат можно удалить только в том случае, если для него нет привязок на каком-либо из сайтов.
<br /><strong>Примечание.</strong>
Пользовательские домены доступны только в режиме общего доступа и в стандартном режиме, а поддержка SSL для пользовательских доменов имеется только в стандартном режиме. Информацию о настройке SSL для пользовательского домена в Azure см. в разделе <a href="http://www.windowsazure.com/ru-ru/documentation/articles/web-sites-configure-ssl-certificate/">Включение HTTPS для веб-сайта Azure</a>.
</li>

<!-- DOMAIN NAMES -->
<li><strong>Имена доменов</strong> - просмотр или добавление дополнительных имен доменов для веб-сайта. Можно добавить пользовательские домены, щелкнув <strong>Управление доменами</strong>. Пользовательские домены доступны только в режимах <strong>Общий доступ</strong> и <strong>Стандартный</strong>. Режим веб-сайта можно изменить на странице управления <strong>Масштаб</strong>. В бесплатном режиме пользовательские домены недоступны. Дополнительную информацию о настройке пользовательских доменов см. в разделе <a href="http://www.windowsazure.com/ru-ru/documentation/articles/web-sites-custom-domain-name/">Задание пользовательского имени домена для веб-сайта Azure</a>.</li>

<!-- SSL BINDINGS -->
<li><strong>Привязки SSL</strong> - привязки SSL для пользовательских доменов доступны только в стандартном режиме. Выберите режим SSL (<strong>SNI</strong>, <strong>IP</strong> или <strong>Без SSL</strong>) для конкретного имени домена. При выборе SNI или IP можно указать сертификат для домена, выбрав его из загруженных сертификатов. Информацию о настройке SSL для пользовательского домена в Azure см. в разделе <a href="http://www.windowsazure.com/ru-ru/documentation/articles/web-sites-configure-ssl-certificate/">Включение HTTPS для веб-сайта Azure</a>. Дополнительные сведения о SNI см. в разделе <a href="http://en.wikipedia.org/wiki/Server_Name_Indication">Подключение с указанием имени сервера</a>.</li>

<!-- DEPLOYMENTS  -->
<li><strong>Развернутые приложения</strong> - эти параметры используются для настройки развертываний.
<ul>
<li><strong>URL-адрес Git</strong> - при создании репозитория Git на веб-сайте Azure это будет его URL-адрес - расположение, в которое передается контент.</li>
<li><strong>URL-адреса для запуска развертывания</strong> - этот URL-адрес можно установить для GitHub, CodePlex, Bitbucket или на другом репозитории для запуска развертывания при принудительном направлении в репозиторий команды "Применить".</li>
<li><strong>Филиал для развертывания</strong> - позволяет указать филиал для развертывания при принудительной передаче содержимого.</li>
</ul>
</li>

<!-- APPLICATION DIAGNOSTICS  -->
<li><strong>Диагностика приложений</strong> - настройка параметров для сбора диагностической информации из веб-приложения, код которого поддерживает трассировку. Параметры ведения журнала для диагностики приложений:
<ul>
<!-- APPLICATION LOGGING (FILE SYSTEM) -->
<li><strong>Ведение журналов приложений (файловая система)</strong> - выберите <strong>Вкл.</strong>, чтобы в файловую систему веб-сайта записывались журналы приложений. При включении ведение журнала продолжается в течение 12 часов. Журналы доступны на общем ресурсе FTP веб-сайта. Ссылку на общий ресурс FTP можно найти на <strong>Панели мониторинга</strong>. В разделе <strong>Сводка</strong> выберите <strong>Журналы диагностики FTP</strong> или <strong>Журналы диагностики FTPS</strong>.</li>

<!-- APPLICATION LOGGING (STORAGE) -->
<li><strong>Ведение журналов приложений (хранилище)</strong> - выберите <strong>Вкл.</strong> для записи журналов приложений в учетную запись хранения Azure. Ведение журнала в учетной записи хранения не ограничивается по времени и остается включенным до момента принудительного отключения. По умолчанию файлы журнала хранятся в таблице WAWSAppLogTable.</li>
<li><strong>Уровень ведения журнала</strong> - если включено ведение журнала, этот параметр задает объем данных, который будет записан (ошибка, предупреждение, сведения или подробные сведения).</li>

<!-- DIAGNOSTIC STORAGE -->
<li><strong>Хранилище диагностики</strong> - нажатие кнопки <strong>Управление подключением</strong> открывает диалоговое окно <strong>Управление хранилищем диагностики</strong> со следующими параметрами для сохранения журналов в вашей учетной записи хранения Azure:
<ul>
<li><strong>Имя учетной записи хранения</strong> - выберите учетную запись хранения, в которую требуется сохранять журналы.</li>
<li><strong>Ключ доступа к хранилищу</strong> - отображает ключ к выбранной учетной записи хранения. Если вы выполняли восстановление ключа для учетной записи хранения, введите здесь новый ключ вручную или используйте одну из кнопок <strong>Синхронизировать</strong>. Кнопки "Синхронизировать" доступны только в том случае, если текущий пользователь имеет доступ к выбранной учетной записи хранения.
</li>
<li><strong>Синхронизировать основной ключ</strong> - возвращает последний первичный ключ вашей учетной записи хранения Azure.
</li>
<li><strong>Синхронизировать вторичный ключ</strong> - возвращает последний вторичный ключ вашей учетной записи хранения Azure.
<br /><strong>Примечание.</strong> Дополнительные сведения о ключах доступа к хранилищу Azure см. в статье <a href="http://www.windowsazure.com/ru-ru/documentation/articles/storage-manage-storage-account/#regeneratestoragekeys">Просмотр, копирование и повторное создание ключей доступа к хранилищу</a>.
</li></ul></li></ul></li>

<!-- SITE DIAGNOSTICS  -->
<li><strong>Диагностика сайта</strong> - настройка параметров для сбора диагностической 
	информации для веб-сайта, включая:
<ul>
<!-- WEB SERVER LOGGING -->
	<li><strong>Журналы веб-сервера</strong> - укажите, следует ли включить ведение журнала веб-сервера для веб-сайта. Журналы веб-сервера сохраняются в расширенном формате журнала W3C. Журналы можно сохранять в хранилище Azure или в файловую систему. 
<br /><strong>Подсказка</strong>. Максимальный размер хранилища журнала в файловой системе составляет 100 МБ. Если необходимо сохранить файл журнала большего размера, используйте хранилище Azure, обладающее гораздо большей емкостью.
	<ul>
		<li>Чтобы сохранить журналы веб-сервера в учетную запись хранения Azure, выберите <strong>Хранилище</strong>, а затем <strong>Управление хранилищем</strong>. В диалоговом окне <strong>Управление хранилищем для диагностики сайта</strong> используйте параметр <strong>Учетная запись хранения</strong> для выбора учетной записи хранения Azure в качестве контейнера, в котором будут храниться файлы журнала. Используйте параметр <strong>Контейнер BLOB-объектов Azure</strong> для выбора контейнера, в котором будут храниться журналы, или выберите <strong>Создать новый контейнер BLOB-объектов</strong> для включения поля <strong>Имя BLOB-объекта</strong>, в котором можно указать имя для нового контейнера.
<br /><strong>Примечание</strong>. Если у вас еще нет учетной записи хранения, перейдите в раздел <strong>Хранилище</strong> портала Azure, где с помощью кнопки <strong>Создать</strong> можно создать новую учетную запись. 
</li>
		<li>Если выбрать вариант <strong>Файловая система</strong>, журналы сохраняются на FTP-сайт, указанный в разделе <strong>Журналы диагностики FTP</strong> на странице управления "Панель мониторинга". Активация хранилища файловой системы также делает доступным поле <strong>Квота</strong>, в котором можно задать максимальный объем дискового пространства для файлов журналов. Минимальный размер составляет 25 МБ, максимальный — 100 МБ. По умолчанию используется значение 35MB. Когда квота исчерпана, самые старые файлы последовательно перезаписываются новыми.</li>
		<li>По умолчанию журналы веб-сервера в учетной записи хранения Azure никогда не удаляются. Чтобы задать период времени, после которого журналы будут удалены автоматически, выберите <strong>Задать хранение</strong> и введите число дней для хранения журналов в поле <strong>Срок хранения</strong>. Можно также использовать параметр <strong>Задать хранение</strong> для хранилища файловой системы.</li></ul>
</li>

<!-- DETAILED ERROR MESSAGES -->
	<li><strong>Подробные сообщения об ошибках</strong> - укажите, следует ли в вносить в журнал подробные сообщения об ошибках на этом веб-сайте. 
	Если параметр включен, подробные сообщения об ошибках сохраняются как файлы .htm на FTP-сайте, указанном в разделе "Журналы диагностики FTP" на странице управления "Панель мониторинга". 
	После подключения к указанному FTP-сайту выберите /LogFiles/DetailedErrors/, чтобы извлечь файлы .htm, которые содержат подробные сообщения об ошибках.</li>

<!-- FAILED REQUEST TRACING -->
	<li><strong>Трассировка неудачно завершенных запросов</strong> - укажите, следует ли включить трассировку неудачно завершенных запросов. Если параметр включен, 
	результаты трассировки неудачно завершенных запросов будут записываться в файлы XML с сохранением на FTP-сайт, указанный в разделе "Журналы диагностики FTP" на странице управления "Панель мониторинга". 
	После подключения к указанному FTP-сайту выберите /LogFiles/W3SVC######### (где ######### представляет уникальный идентификатор веб-сайта) 
	для получения XML-файлов, содержащих данные трассировки неудачно завершенных запросов.<br /><strong>Важно!</strong><br />В папке /LogFiles/W3SVC#########/ 
	содержатся XSL-файл и один или несколько XML-файлов. Убедитесь, что XSL-файл загружен в тот же каталог, что и XML-файлы, так как 
	XSL-файл предоставляет функциональные возможности для форматирования и фильтрации содержимого XML файлов при просмотре в обозревателе Internet Explorer.</li>

<!-- REMOTE DEBUGGING -->
<li><strong>Удаленная отладка</strong> - установите для этого параметра значение <strong>Вкл.</strong> для включения удаленной отладки в Visual Studio 2012 или Visual Studio 2013. После включения можно использовать удаленный отладчик в Visual Studio для прямого подключения к веб-сайту Azure.
<br />
<strong>Примечание</strong>. Удаленная отладка будет включена только в течение 48 часов и не будет работать, если имя сайта или имя пользователя содержит более 20 символов. 
</li>
	</ul>
	</li>

<!-- MONITORING  -->
<li><strong>Мониторинг</strong> - для веб-сайтов в стандартном режиме этот параметр можно использовать для проверки доступности конечных точек HTTP или HTTPS. Конечные точки можно проверять максимум из трех географически распределенных мест. Тест завершается с ошибкой, если код ответа HTTP больше или равен 400 или если на ответ требуется более 30 секунд. Конечная точка считается доступной, если тесты мониторинга завершились для нее успешно для всех указанных расположений.
</li>

<!-- DEVELOPER ANALYTICS -->
<li><strong>Аналитические средства для разработчиков</strong> - выберите <strong>Надстройка</strong>, чтобы выбрать аналитическую надстройку из списка, или же выберите надстройку в Магазине Azure. Выберите <strong>Настраиваемый</strong>, чтобы указать поставщика аналитических средств из списка, например New Relic. При использовании другого поставщика необходимо ввести лицензионный ключ в поле <strong>Ключ поставщика</strong>. 
<br /> <strong>Примечание</strong>. Дополнительные сведения об использовании New Relic для веб-сайтов Azure см. в разделе <a href="http://www.windowsazure.com/ru-ru/documentation/articles/store-new-relic-web-sites-dotnet-application-performance-management/">Средство управления производительностью приложений New Relic на веб-сайтах Azure</a>.
</li>

<!-- APP SETTINGS -->
	<li><strong>Параметры приложения</strong> - укажите пары имени и значения, которые будут загружаться при запуске веб-приложения. Параметры для веб-сайтов .NET 
	вносятся в конфигурацию .NET AppSettings во время выполнения, переопределяя текущие настройки. Параметры для веб-сайтов PHP и Node 
	будут доступны во время выполнения в виде переменных среды.</li>

<!-- CONNECTION STRINGS -->
	<li><strong>Строки подключения</strong> - просмотр строк подключения к связанным ресурсам. Для сайтов .NET эти строки подключения будут внесены в параметры connectionStrings конфигурации .NET во время выполнения, переопределяя существующие записи, для которых значение ключа равно имени связанной базы данных. Для сайтов PHP 
	и Node эти параметры будут доступны во время выполнения в виде переменных среды. В качестве префикса будет использоваться тип подключения. Префиксы переменных среды: <br />
<ul><li>SQL Server: SQLCONNSTR_</li>
<li>MySQL: MYSQLCONNSTR_</li>
<li>База данных SQL: SQLAZURECONNSTR_</li>
<li>Настраиваемый: CUSTOMCONNSTR_</li></ul>Например, если строка подключения MySql будет названа connectionstring1, доступ к ней будет выполняться через переменную среды <code>MYSQLCONNSTR_connectionString1</code>.
	<br /><strong>Примечание</strong>. Строки подключения создаются, когда ресурс базы данных связывается с веб-сайтом, и доступны только для чтения при просмотре на 
	странице управления "Конфигурация".</li>

<!-- DEFAULT DOCUMENTS -->
	<li><strong>Документы по умолчанию</strong> - добавьте в этот список свой документ по умолчанию для веб-сайта, если его еще там нет. Документ по умолчанию для веб-сайта 
	— это страница, которая отображается по умолчанию, когда пользователь переходит на веб-сайт без указания конкретной страницы. Например, в случае веб-сайта 
	http://contoso.com, если в качестве документа по умолчанию выбран default.htm, пользователь будет направлен на страницу http://www.contoso.com/default.htm, когда введет в своем браузере 
	http://www.contoso.com. Если в списке вашего веб-сайта содержится несколько файлов, убедитесь, что документ по умолчанию для веб-сайта 
	находится в верхней части списка, изменив порядок файлов в списке.</li>

<!-- HANDLER MAPPINGS -->
<li><strong>Сопоставления обработчиков</strong> -  добавьте пользовательские обработчики скриптов, которые будут обрабатывать запросы для файлов с определенными расширениями. Укажите расширение файла для обработки в поле <strong>Расширение</strong> (например, *.php или handler.fcgi). Запросы к файлам, соответствующим этому шаблону, будут обрабатываться обработчиком сценария, указанным в поле <strong>Путь к обработчику сценария</strong>. Для обработчика сценариев требуется абсолютный путь (путь D:\home\site\wwwroot может использоваться для ссылки на корневой каталог вашего веб-сайта). Необязательные аргументы командной строки для обработчика сценария могут быть указаны в поле <strong>Дополнительные аргументы (необязательные)</strong>.
</li>

<!-- VIRTUAL APPLICATIONS AND DIRECTORIES -->
<li><strong>Виртуальные приложения и каталоги</strong> -  чтобы настроить виртуальные приложения и каталоги, связанные с веб-сайтом, укажите каждый виртуальный каталог и соответствующий физический путь к нему относительно корня сайта. Или же можно установить флажок <strong>Приложение</strong>, чтобы пометить виртуальный каталог как приложение в конфигурации сайта.
</li>

	
</ul></li>
<li>Щелкните <strong>Сохранить</strong> в нижней части страницы управления <strong>Настройки</strong>, чтобы сохранить изменения конфигурации.</li>
</ol>

<!-- HOW TO: CONFIGURE A WEB SITE TO USE A SQL DATABASE -->
##<a name="howtoconfigSQL"></a>Практическое руководство. Настройка веб-сайта для использования базы данных SQL

Выполните следующие действия, чтобы связать веб-сайт с базой данных SQL:

1. На [портале управления](http://manage.windowsazure.com) выберите **Веб-сайты** для отображения списка веб-сайтов, созданных с использованием текущей учетной записи.

2. Выберите веб-сайт из списка, чтобы открыть страницы **Управления** веб-сайта.

3. Щелкните вкладку **Связанные ресурсы** и на странице **Связанные ресурсы** отобразится сообщение **У вас нет связанных ресурсов**.

4. Щелкните **Привязать ресурс**, чтобы открыть мастер **Привязка ресурса**.

5. Щелкните **Создать новый ресурс** для отображения списка типов ресурсов, которые можно связать с вашим веб-сайтом.

6. Щелкните **Базы данных SQL** для отображения мастера **Привязка базы данных**.

7. Заполните обязательные поля на страницах 3 и 4 мастера **Привязка базы данных**, а затем нажмите кнопку с галочкой **Готово** на странице 4.

Azure создаст базу данных SQL с указанными параметрами, а также свяжет базу данных с веб-сайтом.

<!-- HOW TO: CONFIGURE A WEB SITE TO USE A MYSQL DATABASE -->
##<a name="howtoconfigMySQL"></a>Практическое руководство. Настройка веб-сайта для использования базы данных MySQL##
Чтобы настроить веб-сайт для использования базы данных MySQL, выполните те же шаги, что и для базы данных SQL, но в мастере **Привязка ресурсов** выберите **База данных MySQL** вместо **База данных SQL**. 

Кроме того, можно создать веб-сайт, используя **Настраиваемое создание**. В раскрывающемся списке **База данных** выберите **Создать новую базу данных MySQL** или **Использовать существующую базу данных MySQL**. 

##<a name="howtodomain"></a>Практическое руководство. Настройка имени пользовательского домена

Информацию о настройке веб-сайта для использования имени пользовательского домена см. в разделе [Задание пользовательского имени домена для веб-сайта Azure](http://www.windowsazure.com/ru-ru/documentation/articles/web-sites-custom-domain-name/).

##<a name="howtoconfigSSL"></a>Практическое руководство. Настройка веб-сайта для использования SSL##

Информацию о настройке SSL для пользовательского домена в Azure см. в разделе [Включение HTTPS для веб-сайта Azure](http://www.windowsazure.com/ru-ru/documentation/articles/web-sites-configure-ssl-certificate/). 

##<a name="next"></a>Дальнейшие действия

* [Масштабирование веб-сайтов](http://www.windowsazure.com/ru-ru/documentation/articles/web-sites-scale/)

* [Как отслеживать веб-сайты](http://www.windowsazure.com/ru-ru/documentation/articles/web-sites-monitor/)


