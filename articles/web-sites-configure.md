<properties 
	pageTitle="Настройка веб-сайтов - управление службой Azure" 
	description="Узнайте, как настраивать веб-сайты в Azure, включая настройку веб-сайта для использования Базы данных SQL или базы данных MySQL." 
	services="web-sites" 
	documentationCenter="" 
	authors="MikeWasson" 
	manager="wpickett" 
	editor="mollybos"/>

<tags 
	ms.service="web-sites" 
	ms.workload="web" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="09/18/2014" 
	ms.author="mwasson"/>


# Настройка веб-сайтов #
На портале управления Azure можно изменить параметры конфигурации веб-сайтов и связать их с другими ресурсами Azure, например с базой данных.

## Оглавление ##
- [Практическое руководство. Изменение параметров конфигурации веб-сайта](#howtochangeconfig)
- [Практическое руководство. Настройка веб-сайта для использования базы данных SQL](#howtoconfigSQL)
- [Практическое руководство. Настройка веб-сайта для использования базы данных MySQL](#howtoconfigMySQL)
- [Практическое руководство. Настройка пользовательского имени домена](#howtodomain)
- [Практическое руководство. Настройка веб-сайта для использования SSL](#howtoconfigSSL)
- [Дальнейшие действия](#next)


##<a name="howtochangeconfig"></a>Практическое руководство. Изменение параметров конфигурации веб-сайта

<!-- HOW TO: CHANGE CONFIGURATION OPTIONS FOR A WEBSITE -->

Чтобы установить параметры конфигурации веб-сайта:

1. На [портале управления](https://manage.windowsazure.com/) откройте страницы управления веб-сайтом.
1. Выберите вкладку <strong>Настройка</strong>.

Вкладка **Настройка** состоит из следующих разделов:

### Общие

**Версии Framework**. Укажите эти параметры, если приложение использует какие-либо из этих инфраструктур разработки: 

- **.NET Framework**: Укажите версию .NET Framework. 
- **PHP**. Укажите версию PHP или установите значение **Выключено**, чтобы отключить PHP. 
- **Java**. Выберите отображаемую версию, чтобы включить использование Java, или задайте значение <strong>Выключено</strong>, чтобы отключить. 
- Если разрешено применение Java, для параметра <strong>Веб-контейнер</strong> укажите версию Tomcat или Jetty.
- **Python**. Выберите версию Python или задайте **Выключено**, чтобы отключить Python.

По техническим причинам включение Java для веб-сайта отключает использование .NET, PHP и Python.

<strong>Режим управляемого конвейера</strong>. Задает [режим конвейера](http://www.iis.net/learn/get-started/introduction-to-iis/introduction-to-iis-architecture#Application) IIS. Оставьте здесь значение "Интегрированный" (по умолчанию), кроме тех случаев, когда у вас есть старый веб-сайт, для которого требуется предыдущая версия IIS.

<strong>Платформа</strong>. Выберите разрядность среды выполнения приложения - 32 или 64 бита. Для 64-битной среды требуется режим "Базовый" или "Стандартный". В 32-разрядной среде режим свободного и общего доступа выполняются всегда.

<strong>Веб-сокеты</strong>. Установите значение **Включено**, чтобы разрешить использование протокола WebSocket, например если ваш веб-сайт использует [ASP.NET SignalR](http://www.asp.net/signalr) или [socket.io](http://azure.microsoft.com/documentation/articles/web-sites-nodejs-chat-app-socketio/).

<strong>Всегда включено</strong>. По умолчанию в случае простоя в течение определенного периода времени веб-сайты будут выгружены. Это позволяет сэкономить системные ресурсы. В режиме "Базовый" и "Стандартный" вы можете включить функцию <strong>Всегда включено</strong>, чтобы сайт постоянно оставался загруженным. Если сайт выполняет непрерывные веб-задания, следует включить функцию **Всегда включено**, иначе веб-задания могут не выполняться надежным образом.

<strong>Редактировать в Visual Studio Online</strong>. Позволяет вести редактирование кода в реальном времени с помощью Visual Studio Online. Если данная функция включена, вкладка <strong>Панель мониторинга</strong> будет содержать ссылку Редактировать в Visual Studio Online в разделе <strong>Краткое описание</strong>. Щелкните по этой ссылке для редактирования веб-сайта напрямую через Интернет. Если необходимо выполнить проверку подлинности, можно использовать базовые учетные данные развертывания.

Примечание. Если активировано развертывание из системы управления версиями, то возможно, что при развертывании будут перезаписаны изменения, внесенные в редакторе Visual Studio Online. 


### Сертификаты

В стандартном и базовом режиме можно загрузить SSL-сертификаты для настраиваемого домена. Дополнительную информацию см. в разделе [Включение HTTPS для веб-сайта Azure](http://azure.microsoft.com/documentation/articles/web-sites-configure-ssl-certificate/). 

Здесь перечислены загруженные сертификаты. После загрузки сертификата его можно назначить любому веб-сайту в вашей подписке и регионе. Групповые сертификаты могут использоваться для любого сайта в домене, для которых сертификат является действительным. Сертификат может быть удален только в том случае, если к нему нет активных привязок.

### Имена доменов

Просмотрите или добавьте дополнительные доменные имена для веб-сайта. Дополнительную информацию см. в разделе [Настройка личного доменного имени для веб-сайта Azure](http://azure.microsoft.com/documentation/articles/web-sites-custom-domain-name/).

### Привязки SSL

Если вы скачали SSL-сертификаты, их можно привязать к личным доменным именам. Дополнительную информацию см. в разделе [Включение HTTPS для веб-сайта Azure](http://azure.microsoft.com/documentation/articles/web-sites-configure-ssl-certificate/).

### Развернутые приложения

Этот раздел появляется только в том случае, если настроено развертывание из системы управления версиями. Используйте эти параметры для настройки развертываний.

- <strong>URL-адрес Git</strong>. Если для веб-сайта Azure был создан репозиторий Git, это URL-адрес для отправки содержимого сайта.
- <strong>URL-адрес запуска развертывания</strong>. Этот URL-адрес можно установить на GitHub, CodePlex, Bitbucket или на другой репозиторий для запуска развертывания при отправке изменений в репозиторий.
- <strong>Развертываемая ветка</strong>. Обозначает ветку, которая будет развертываться при отправке содержимого в репозиторий.

Чтобы настроить развертывание из системы контроля версий, перейдите на вкладку **Панель мониторинга** и выберите команду **Настроить развертывание из системы контроля версий**. 

### Диагностика приложения

Параметры записи журналов диагностики из веб-приложения, поддерживающего ведение журналов. 

- <strong>Файловая система</strong>. Записывает журналы в файловую систему веб-сайта. Ведение журнала в файловой системе продолжается в течение 12 часов. Журналы доступны на общем ресурсе FTP веб-сайта. (См. раздел [Учетные данные FTP](http://azure.microsoft.com/documentation/articles/web-sites-manage#ftp-credentials).)
- <strong>Табличное хранилище</strong>. Записывает журналы в хранилище таблиц Azure. Здесь нет ограничения по времени, а журналы ведутся, пока не будет отключена эта функция. 
- <strong>Хранилище больших двоичных объектов</strong>. Записывает журналы в хранилище больших двоичных объектов Azure. Здесь нет ограничения по времени, а журналы ведутся, пока не будет отключена эта функция.

<strong>Уровень ведения журнала</strong>. Если включено ведение журналов, этот параметр задает объем данных, который будет записан (ошибка, предупреждение, сведения или подробные сведения).

**Управление табличным хранилищем**. Если используется табличное хранилище, нажмите эту кнопку, чтобы указать учетную запись хранилища и название таблицы.

**Управлять хранилищем больших двоичных объектов.** Если используется хранилище больших двоичных объектов, нажмите эту кнопку, чтобы указать учетную запись и название хранилища.

### Диагностика сайта

Параметры сбора диагностической информации для веб-сайта.

<strong>Ведение журнала веб-сервера</strong>. Включает ведения журналов веб-сервера. Журналы сохраняются в расширенном формате журнала W3C. Журналы можно сохранять в хранилище Azure или в файловую систему веб-сайта.
 
- Если выбрать вариант <strong>Файловая система</strong>, журналы сохраняются на FTP-сайт, указанный как "Журналы диагностики FTP" на странице "Панель мониторинга". (См. раздел [Учетные данные FTP](http://azure.microsoft.com/documentation/articles/web-sites-manage#ftp-credentials).) 
- Если выбран вариант **Файловая система**, укажите в поле <strong>Квота</strong> максимальный объем дискового пространства для файлов журналов. Минимальный размер составляет 25 МБ, максимальный - 100 МБ. По умолчанию используется значение 35MB. Когда квота исчерпана, самые старые файлы последовательно перезаписываются новыми. Если необходимо хранить журнал более 100 Mб, используйте хранилище Azure, обладающее гораздо большей емкостью.
- Либо нажмите кнопку <strong>Указать срок хранения</strong>, чтобы файлы удалялись автоматически через некоторое время. По умолчанию журналы никогда не удаляются.   

<strong>Подробные сообщения об ошибках</strong>. Если задан данный параметр, подробные сообщения об ошибках сохраняются как файлы .htm. Для просмотра этих файлов следует перейти на FTP-сайт, указанный как "Журналы диагностики FTP" на странице "Панель мониторинга". Файлы сохраняются в каталоге "/LogFiles/DetailedErrors" FTP-сайта. (См. раздел [Учетные данные FTP](http://azure.microsoft.com/documentation/articles/web-sites-manage#ftp-credentials).)

<strong>Трассировка неудачно завершенных запросов</strong>. Если заданы данные параметры, неудавшиеся запросы записываются в XML-файлы. Для просмотра этих файлов следует перейти на FTP-сайт, указанный как "Журналы диагностики FTP" на странице "Панель мониторинга". (См. раздел [Учетные данные FTP](http://azure.microsoft.com/documentation/articles/web-sites-manage#ftp-credentials).) Файлы сохраняются в каталог /LogFiles/W3SVC*xxx*, где xxx - это уникальный идентификатор. Эта папка содержит XSL-файл и один или несколько XML-файлов. Обязательно загрузите XSL-файл, т. к. предоставляет средства форматирования и фильтрации содержимого XML-файлов.

<strong>Удаленная отладка</strong> включает в себя удаленную отладку. Если этот параметр включен, то вы сможете использовать удаленный отладчик Visual Studio для прямого подключения к веб-сайту Azure. Удаленная отладка останется включенной на 48 часов.

**Примечание**. Удаленная отладка не будет работать, если название сайта или имя пользователя имеет больше 20 символов. 

### Мониторинг

В базовом и стандартном режиме можно проверить доступность конечных точек HTTP и HTTPS из трех географических разнесенных мест. Тест мониторинга завершается с ошибкой, если код ответа HTTP говорит об ошибке (4xx или 5xx) или на ответ требуется более 30 секунд. Конечная точка считается доступной, если тесты мониторинга завершились для нее успешно для всех указанных расположений. 

Дополнительные сведения см. в разделе [Практическое руководство. Мониторинг состояния конечной точки веб-сайта](http://go.microsoft.com/fwLink/?LinkID=279906&clcid=0x409).


### Аналитические средства для разработчика

Выберите <strong>Надстройка</strong>, чтобы указать аналитическую надстройку из списка, или же выберите надстройку в Магазине Azure. Выберите <strong>Настраиваемый</strong>, чтобы указать поставщика аналитических средств из списка, например New Relic. При использовании другого поставщика необходимо ввести лицензионный ключ в поле<strong> Ключ поставщика</strong>. 

Дополнительную информацию об использовании New Relic для веб-сайтов Azure см. в разделе <a href="http://azure.microsoft.com/documentation/articles/store-new-relic-web-sites-dotnet-application-performance-management/">Инструмент управления производительностью приложений New Relic для веб-сайтов Azure</a> на веб-сайтах Azure.

### Параметры приложения

Пары "имя/значение", которые будут загружаться веб-приложением при запуске. 

- Для сайтов .NET эти параметры вносятся в конфигурацию .NET AppSettings во время выполнения, переопределяя текущие настройки. 

- Во время выполнения приложения PHP, Python, Java и Node могут обращаться к этим параметрам как к переменным среды. Для каждого параметра приложения создаются две переменные среды: одна с именем, указанным в параметре приложения, и другая с префиксом APPSETTING_. Обе содержат одинаковое значение.

### Строки подключения

Строки подключения для связанных ресурсов. 

Для сайтов .NET эти строки подключения будут внесены в параметры connectionStrings конфигурации .NET во время выполнения, переопределяя существующие записи, для которых значение ключа равно имени связанной базы данных. 

Для приложений PHP, Python, Java и Node эти параметры будут доступны во время выполнения в виде переменных среды. В качестве префикса будет использоваться тип подключения. Префиксы переменных среды: 

- SQL Server: SQLCONNSTR_
- MySQL: MYSQLCONNSTR_
- SQL Database: SQLAZURECONNSTR_
- Пользовательский: CUSTOMCONNSTR_

Например, если строка подключения MySql будет иметь имя connectionstring1, доступ к ней будет выполняться через переменную среды <code>MYSQLCONNSTR_connectionString1</code>..

<strong>Примечание</strong>. Строки подключения также создаются при связывании ресурса базы данных с веб-сайтом. Строки подключения, создаваемые таким образом, доступны только для чтения на 
странице управления конфигурацией.

### Стандартные документы

Документ по умолчанию для веб-сайта - это страница, которая отображается в том случае, если не указана определенная страница сайта. Если веб-сайт содержит более одного файла в списке, то обязательно поместите документ по умолчанию наверх списка.

Веб-приложения могут использовать модули, для которых выполняется маршрутизация на основе URL-адреса, вместо выдачи статичного содержимого. В таком случае документ по умолчанию не используется.   

### Сопоставления обработчиков

Добавьте пользовательские обработчики скриптов, которые будут обрабатывать запросы для файлов с определенными расширениями. 

- **Расширение**. Расширение обрабатываемого файла, например *.php или handler.fcgi. 
- **Путь к обработчику сценариев**. Абсолютный путь к обработчику сценариев. Запросы к файлам, совпадающим с расширением, будут обрабатываться обработчиком сценариев. Используйте <code>D:\home\site\wwwroot</code> для указания корневого каталога вашего сайта.
- **Дополнительные аргументы**. Необязательные аргументы для командной строки обработчика сценариев. 


### Виртуальные приложения и каталоги 

Чтобы настроить виртуальные приложения и каталоги, связанные с веб-сайтом, укажите каждый виртуальный каталог и соответствующий физический путь к нему относительно корня сайта. Или же можно установить флажок <strong>Приложение</strong>, чтобы пометить виртуальный каталог как приложение в конфигурации сайта.

	

<!-- HOW TO: CONFIGURE A WEBSITE TO USE A SQL DATABASE -->
##<a name="howtoconfigSQL"></a>Практическое руководство. Настройка веб-сайта для использования базы данных SQL

Выполните следующие действия, чтобы связать веб-сайт с базой данных SQL.

1. На [портале управления](http://manage.windowsazure.com) выберите **Веб-сайты**, чтобы просмотреть список веб-сайтов, созданных с использованием текущей учетной записи.

2. Выберите веб-сайт из списка, чтобы открыть страницы **управления** веб-сайтом.

3. Щелкните вкладку **Связанные ресурсы** и на странице **Связанные ресурсы** отобразится сообщение **Связанные ресурсы отсутствуют**.

4. Щелкните **Привязать ресурс**, чтобы открыть мастер **Привязка ресурса**.

5. Щелкните **Создать новый ресурс** для отображения списка типов ресурсов, которые можно связать с вашим веб-сайтом.

6. Щелкните **Базы данных SQL** для отображения мастера **Связать базу данных**.

7. Заполните обязательные поля на страницах 3 и 4 мастера **Связать базу данных**, а затем нажмите кнопку с галочкой **Готово** на странице 4.

Azure создаст базу данных SQL с указанными параметрами, а также свяжет базу данных с веб-сайтом.

<!-- HOW TO: CONFIGURE A WEBSITE TO USE A MYSQL DATABASE -->
##<a name="howtoconfigMySQL"></a>Практическое руководство. Настройка веб-сайта для использования базы данных MySQL##
Чтобы настроить веб-сайт на использование базы данных MySQL, выполните те же шаги, что и для базы данных SQL, но в мастере **Привязка ресурсов** выберите **База данных MySQL** вместо **База данных SQL**. 

Кроме того, можно создать веб-сайт, используя параметр **Настраиваемое создание**. В раскрывающемся списке **База данных** выберите **Создать новую базу данных MySQL** или **Использовать существующую базу данных MySQL**. 

##<a name="howtodomain"></a>Практическое руководство. Настройка пользовательского имени домена

Информацию о настройке веб-сайта для использования личного доменного имени см. в разделе [Настройка личного доменного имени для веб-сайта Azure](http://azure.microsoft.com/documentation/articles/web-sites-custom-domain-name/).

##<a name="howtoconfigSSL"></a>Практическое руководство. Настройка веб-сайта для использования SSL##

Информацию о настройке SSL для личного домена в Azure см. в разделе [Включение HTTPS для веб-сайта Azure](http://azure.microsoft.com/documentation/articles/web-sites-configure-ssl-certificate/). 

##<a name="next"></a>Дальнейшие действия

* [Как масштабировать веб-сайты](http://azure.microsoft.com/documentation/articles/web-sites-scale/)

* [Мониторинг веб-сайтов](http://azure.microsoft.com/documentation/articles/web-sites-monitor/)



<!--HONumber=42-->
