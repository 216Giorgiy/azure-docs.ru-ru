<properties linkid="provisioning-biztalk-service" urlDisplayName="Подготовка служб BizTalk на портале управления" pageTitle="Подготовка службы BizTalk на портале управления | Azure" metaKeywords="приступая к работе со службами biztalk Azure, подготовка, неструктурированные данные Azure" description="Узнайте, как подготовить службу BizTalk на портале управления Azure, а также создать дополнительный сервер базы данных SQL и учетную запись хранения." metaCanonical="http://www.windowsazure.com/ru-ru/manage/services/biztalk-services/provisioning-biztalk-service" services="biztalk-services" documentationCenter="" title="Службы BizTalk: подготовка с использованием портала управления Azure" authors="mandia" solutions="" manager="paulettm" editor="cgronlun" />



# Службы BizTalk: подготовка с использованием портала управления Azure

<div class="dev-callout"> 
<b>Подсказка</b> 
<p>Для входа на портал управления Azure требуются учетная запись Azure и подписка Azure. Если учетной записи нет, можно создать бесплатную пробную учетную запись всего за несколько минут. Дополнительные сведения см. в разделе <a href="http://go.microsoft.com/fwlink/p/?LinkID=239738">Бесплатная пробная версия Azure</a>.</p> 
</div>

Служба BizTalk Azure состоит из следующих компонентов:

<table border="1">
<tr bgcolor="FAF9F9">
        <td><strong>Требование</strong></td>
        <td><strong>Описание</strong></td>
</tr>
<tr>
<td>Подписка Azure</td>
<td><p>Подписка определяет доступ к порталу управления Azure и создается владельцем учетной записи Azure на странице <a HREF="https://account.windowsazure.com/Subscriptions"> Подписки Azure</a>.</p>
<p>Учетная запись Azure может иметь несколько подписок и управляться владельцем учетной записи Azure или другими пользователями или группами. Например, владелец учетной записи Azure создает подписку с именем <em>BizTalkServiceSubscription</em> и предоставляет администраторам BizTalk компании (например, ContosoBTSAdmins@live.com) доступ к этой подписке. В этом сценарии администраторы BizTalk входят на портал управления Azure с полными правами администратора на все размещенные службы в подписке, включая службы BizTalk Azure. Администраторы BizTalk не являются владельцами учетной записи Azure и, следовательно, не имеют доступа к каким-либо данным для выставления счетов.</p>
<a HREF="http://go.microsoft.com/fwlink/p/?LinkID=267577"> В разделе "Управление подписками и учетными записями хранения" на портале управления Azure</a> содержатся дополнительные сведения об учетных записях и подписках Azure.
</td>
</tr>
<tr>
<td>База данных SQL Azure</td>
<td><p>В базе данных SQL хранятся таблицы, представления и хранимые процедуры, которые используются службами BizTalk Azure.</p>
<p>При подготовке службы BizTalk можно использовать существующий сервер SQL Server Azure, базу данных SQL Azure или автоматически создать новый сервер или базу данных. Если выбрано создание нового сервера SQL Server и базы данных Azure, автоматически включаются службы Azure.</p>
<p>При создании новой базы данных SQL Azure на существующем сервере SQL Server Azure правила брандмауэра сервера не изменяются. В результате другие службы Azure могут не получить доступа к базам данных сервера.</p>
Минимальные требования к масштабированию в отношении параметров базы данных SQL отсутствуют.</td>
</tr>
<tr>
<td>Пространство имен Azure Access Control</td>
<td>Пространство имен Access Control осуществляет проверку подлинности при использовании служб BizTalk Azure. Это пространство имен Access Control вводится при развертывании проекта службы BizTalk из Visual Studio. Пространство имен Access Control создается автоматически при подготовке службы BizTalk.</td>
</tr>

<tr>
<td>Учетная запись хранения Azure</td>
<td><p>Учетная запись хранения Azure предоставляет доступ к таблицам, BLOB-объектам и очередям. При подготовке службы BizTalk можно использовать существующую учетную запись хранения или автоматически создать новую учетную запись хранения. Служба BizTalk использует таблицы, BLOB-объекты и очереди для следующих действий:</p>
<ul>
<li>Хранение файлов журналов, в которых отслеживается работа службы BizTalk. Выходные данные мониторинга отображаются также на вкладке "Мониторинг" на портале управления Azure.</li>
<li>При создании соглашения X12 или AS2 между партнерами можно включить функцию архивирования для сохранения свойств сообщений. Данные отслеживания сохраняются в этой учетной записи хранения.</li>
</ul>
</td>
</tr>

<tr>
<td>Закрытый сертификат SSL</td>
<td><p>В ходе подготовки служб BizTalk Azure создается URL-адрес, включающий имя вашей службы BizTalk. Этот закрытый SSL-сертификат (PFX) используется для проверки подлинности сертификата HTTPS-сервера при поступлении запросов по URL-адресу вашей службы BizTalk. Самозаверяющий сертификат создается автоматически при подготовке службы BizTalk. </p>
<strong>Важные сведения о SSL-сертификате</strong>

<ul>
<li>Сертификат должен иметь срок действия менее 5 лет.</li>
<li>Для всех закрытых сертификатов требуется пароль. Запомните этот пароль, а также сообщите его вашим администраторам.</li>
<li>Самозаверяющие сертификаты можно использовать в среде разработки или тестирования. При использовании самозаверяющих сертификатов импортируйте сертификат в хранилище личных сертификатов и хранилище доверенных корневых сертификатов.</li>
</ul>
<br/>При отправке центру сертификации запроса на сертификат для рабочей среды укажите следующие свойства сертификата:
<br/>

<ul>
<li><p><strong>Расширенное использование ключа</strong>. В сертификате может быть включено использование дополнительных ключей для проверки подлинности сервера. Как минимум, службы BizTalk Azure требуют проверки подлинности сервера.</p></li>
<li><p><strong>Общее имя</strong>. Введите полное доменное имя URL-адреса служб BizTalk Azure, который создается при подготовке службы BizTalk (см. подраздел <a HREF="#BizTalk">Подготовка службы BizTalk</a> в этом разделе).</p>
<p>Таким образом, необходимо знать URL-адрес, используемый при отправке запроса сертификата в центр сертификации. По завершении подготовки службы BizTalk можно добавить новый или другой сертификат.</p></li>
</ul>
<br/>
</td>
</tr>
</table>


В этом разделе перечислены шаги по подготовке служб BizTalk Azure, в том числе: 

-  [Шаг 1. Подготовка службы BizTalk](#BizTalk)
-  [Шаг 2. Действия после подготовки](#PostProv)
-  [Необязательно. Создание сервера базы данных SQL](#SQLDB)
-  [Необязательно. Создание учетной записи хранения](#Storage)

##<a name="BizTalk"></a>Шаг 1. Подготовка службы BizTalk

Служба BizTalk используется для размещения ваших приложений службы BizTalk Azure. При подготовке службы BizTalk автоматически создаются пространство имен Access Control и самозаверяющий SSL-сертификат. Вы можете создать новую базу данных SQL Azure и новую учетную запись хранилища. По завершении подготовки службы BizTalk некоторые из этих требований могут быть обновлены. 

Чтобы подготовить новую службу BizTalk Azure, выполните следующие действия:

1. Войдите на [портал управления Azure](http://go.microsoft.com/fwlink/p/?LinkID=213885).

2. В нижней части области навигации выберите **+СОЗДАТЬ**.

	![Выбор кнопки "Создать"][NEWButton]

3. Последовательно выберите элементы **СЛУЖБЫ ПРИЛОЖЕНИЙ**, **СЛУЖБА BIZTALK** и **НАСТРАИВАЕМОЕ СОЗДАНИЕ**.

	![Выбор элементов "Служба BizTalk" и "Настраиваемое создание"][NewBizTalkService]

4. Введите следующие параметры службы BizTalk:

	<table border="1">
	<tr>
	<td><strong>Имя службы BizTalk</strong></td>
	<td>Введите имя для службы BizTalk. К введенному имени автоматически добавляется ".biztalk.windows.net". В результате получается URL-адрес, который используется для доступа к службе BizTalk. Можно ввести любое имя, но рекомендуется использовать специальные имена. Некоторые примеры:<br/><br/>
	<em>моя_компания</em>.biztalk.windows.net<br/>
	<em>моя_компания_мое_приложение</em>.biztalk.windows.net<br/>
	<em>мое_приложение</em>.biztalk.windows.net
	</td>
	</tr>
	<tr>
	<td><strong>URL-адрес домена</strong></td>
	<td><strong>Необязательно</strong>. По умолчанию используется следующий URL-адрес домена: <em>имя_вашей_службы_BizTalk</em>.biztalk.windows.net. Можно также указать пользовательский домен. Например, если вы используете домен <em>contoso</em>, можно ввести: <br/><br/>
	<em>моя_компания</em>.contoso.com<br/>
	<em>моя_компания_мое_приложение</em>.contoso.com<br/>
	<em>мое_приложение</em>.contoso.com<br/>
	<em>имя_вашей_службы_BizTalk</em>.contoso.com<br/>
	</td>
	</tr>
	<tr>
	<td><strong>Выпуск</strong></td>
	<td>Доступные параметры:
	<ul>
	<li>Developer</li>
	<li>Standard</li>
	<li>Basic</li>
	<li>Premium</li>
	</ul>
	В разделе <a HREF="http://go.microsoft.com/fwlink/p/?LinkID=302279">Службы BizTalk: диаграмма выпусков Developer, Basic, Standard и Premium</a> перечислены различия между выпусками. На этапе тестирования или разработки выберите выпуск <strong>Developer</strong>. На этапе рабочего развертывания с помощью диаграммы выберите для своего бизнес-сценария оптимальный вариант: Premium, Standard или Basic.
	</td>
	</tr>
	<tr>
	<td><strong>Регион</strong></td>
	<td>Выберите географический регион для размещения службы BizTalk.</td>
	</tr>
	<tr>
	<td><strong>База данных отслеживания</strong></td>
	<td><p>Выберите базу данных SQL для хранения таблиц, используемых службой BizTalk. Выберите один из следующих параметров:</p>
	<ul>
	<li><strong>Использовать существующий экземпляр базы данных SQL</strong>. Выберите этот параметр, чтобы использовать существующую базу данных SQL Azure. Существующую базу данных SQL Azure можно использовать, если она не используется другой службой BizTalk. Потребуются имя и пароль для входа в систему, которые были указаны при создании сервера базы данных SQL Azure.</li>
	<li><p><strong>Создать новый экземпляр базы данных SQL</strong>. Выберите этот параметр, чтобы создать новую базу данных SQL.</p></li>
	<p><strong>Примечание.</strong></p>
	<p>В случае создания нового сервера SQL Server и базы данных Azure автоматически включаются службы Azure в базе дынных SQL. Включение служб Azure в базе данных SQL Azure необходимо службе BizTalk.</p>
	<p><strong>Подсказка</strong></p>
	Создайте базу данных отслеживания и учетную запись хранения для мониторинга и архивации в одном регионе службы BizTalk.
	</ul>
	</td>
	</tr>
	<tr>
	<td><strong>Подписка</strong></td>
	<td><strong>Необязательно</strong>. Доступно только при наличии нескольких подписок. Выберите подписку для размещения службы BizTalk.</td>
	</tr>
	</table>
Выберите стрелку ДАЛЕЕ.

5. Введите параметры базы данных.

	<table border="1">
	<tr>
	<td><strong>Подписка</strong></td>
	<td><strong>Необязательно</strong>. Доступно только при наличии нескольких подписок. Выберите подписку для размещения базы данных SQL Azure.</td>
	</tr>
	<tr>
	<td><strong>База данных</strong></td>
	<td><p>Доступно, если на предыдущем экране выбран параметр <strong>Использовать существующий экземпляр базы данных SQL</strong>.</p>
	Выберите базу данных SQL для хранения таблиц, используемых службой BizTalk.
	</td>
	</tr>
	<tr>
	<td><strong>Имя</strong></td>
	<td><p>Доступно, если на предыдущем экране выбран параметр <strong>Создать новый экземпляр базы данных SQL</strong>.</p>
	Введите имя базы данных SQL, которую будет использовать служба BizTalk. По умолчанию введено имя <em>имя_вашей_службы_BizTalk</em>_db.</td>
	</tr>
	<tr>
	<td><strong>Сервер</strong></td>
	<td><p>Доступно, если на предыдущем экране выбран параметр <strong>Создать новый экземпляр базы данных SQL</strong>.</p>
	Выберите существующий сервер базы данных SQL. Можно также выбрать параметр <strong>Создать сервер базы данных SQL</strong> для создания нового сервера базы данных SQL.</td>
	</tr>
	<tr>
	<td><strong>Имя входа сервера</strong></td>
	<td>Введите имя пользователя для входа в систему.</td>
	</tr>
	<tr>
	<td><strong>Пароль для входа на сервер</strong></td>
	<td>Введите пароль для входа.</td>
	</tr>
	<tr>
	<td><strong>Регион</strong></td>
	<td>Доступно, если выбран параметр <strong>Создать новый экземпляр базы данных SQL</strong>. Выберите географический регион для размещения вашей базы данных SQL.</td>
	</tr>
	</table>
Выберите стрелку ДАЛЕЕ.

6. Введите параметры мониторинга Azure.

	<table border="1">
	<tr>
	<td><strong>Мониторинг и архивирование учетной записи хранения</strong></td>
	<td>Выберите существующую учетную запись хранения или параметр <strong>Создать новую учетную запись хранения</strong>.</td>
	</tr><tr>
	<td><strong>Имя учетной записи хранения</strong></td>
	<td>Доступно, если выбран параметр <strong>Создать новую учетную запись хранения</strong>. Введите имя для учетной записи хранения, используемой службой BizTalk.</td>
	</tr>
	</table>

Установите флажок для завершения работы мастера. По завершении отображается значок хода выполнения.<br/>

![Значок хода выполнения, отображаемый при завершении процесса][ProgressComplete]


После завершения этого шага служба BizTalk Azure готова к использованию в приложениях.

Параметров по умолчанию достаточно. Если вы хотите изменить параметры по умолчанию, в левой области навигации выберите **СЛУЖБЫ BIZTALK**, а затем выберите нужную службу BizTalk. Дополнительные параметры отображаются на вкладках "Панель мониторинга", "Монитор" и "Масштаб".

В зависимости от состояния службы BizTalk некоторые операции завершить невозможно. Список этих операций см. в разделе [Службы BizTalk: диаграмма состояния службы BizTalk](http://go.microsoft.com/fwlink/p/?LinkID=329870).

##<a name="PostProv"></a>Шаг 2. Действия после подготовки

В этом разделе описываются следующие шаги: 

-  [Добавление закрытого сертификата](#AddCert)
-  [Извлечение пространства имен Access Control](#ACS)

####<a name="AddCert"></a>Добавление закрытого сертификата
В ходе подготовки службы BizTalk Azure создается URL-адрес, включающий имя вашей службы BizTalk. Закрытый SSL-сертификат (PFX) используется в качестве сертификата проверки подлинности HTTPS-сервера при поступлении запросов на URL-адрес вашей службы BizTalk. 

Самозаверяющий сертификат создается автоматически для вашей службы BizTalk. Этот сертификат можно загрузить или заменить на панели мониторинга службы BizTalk. Самозаверяющие сертификаты используются в средах разработки. 

Добавление готового сертификата для рабочей среды:

1. Войдите на [портал управления Azure](http://go.microsoft.com/fwlink/p/?LinkID=213885).
2. В левой области навигации выберите **СЛУЖБЫ BIZTALK**, затем выберите вашу службу BizTalk.
3. Перейдите на вкладку **Панель мониторинга**.
4. Выберите **Обновить SSL-сертификат**.<br/><br/>
![Изменение SSL-сертификата][QuickGlance]

5. Перейдите к своему закрытому SSL-сертификату (*CertificateName*.pfx), который содержит имя службы BizTalk, введите пароль и установите флажок.


####<a name="ACS"></a>Извлечение пространства имен Access Control

Пространство имен Access Control осуществляет проверку подлинности при использовании служб BizTalk Azure. Это пространство имен Access Control вводится при развертывании проекта службы BizTalk из Visual Studio. 

Пространство имен Access Control создается автоматически для вашей службы BizTalk. Чтобы извлечь пространство имен Access Control, издателя по умолчанию и ключ издателя, нажмите кнопку **Сведения о подключении** на панели мониторинга службы BizTalk.

Чтобы извлечь пространство имен Access Control, выполните следующие действия:

1. Войдите на [портал управления Azure](http://go.microsoft.com/fwlink/p/?LinkID=213885).
2. В левой области навигации выберите **СЛУЖБЫ BIZTALK**, затем выберите вашу службу BizTalk.
3. На панели задач выберите **Сведения о подключении**.<br/><br/>
![Выбор элемента "Сведения о подключении"][ACSConnectInfo]

Значения Access Control можно скопировать и вставить.

После создания пространства имен Access Control значения Access Control можно использовать в любом приложении. При подготовке служб BizTalk это пространство имен Access Control управляет проверкой подлинности при развертывании службы BizTalk. Для изменения подписки или управления пространством имен выберите **ACTIVE DIRECTORY** в левой области навигации, а затем выберите ваше пространство имен. Параметры перечисляются в нижней части области навигации.

Если щелкнуть **Управление**, откроется портал управления доступом. На портале управления доступом служба BizTalk использует **Идентификаторы службы**.<br/><br/>
![Идентификаторы службы ACS на портале управления доступом][ACSServiceIdentities]

Идентификатор службы Access Control — это набор учетных данных, позволяющих приложениям или клиентам проходить проверку подлинности непосредственно в службе Access Control и получать маркер. 

**Важно!**<br/>
Служба BizTalk использует значение **Владелец** в качестве идентификатора службы по умолчанию и значение **Пароль**. Если вместо значения пароля используется симметричный ключ, может появиться следующая ошибка:

*Не удалось подключиться к учетной записи службы управления Access Control с указанными учетными данными*

В разделе [Управление пространством имен ACS](http://go.microsoft.com/fwlink/p/?LinkID=285670) приведены некоторые правила и рекомендации.




##<a name="SQLDB"></a>Необязательно. Создание сервера базы данных SQL

При подготовке службы BizTalk Azure автоматически создается новый сервер базы данных SQL. Если вы предпочитаете создать сервер базы данных SQL независимо от службы BizTalk, см. раздел [Как использовать базу данных SQL Azure в приложениях .NET](http://go.microsoft.com/fwlink/p/?LinkID=251285).

В результате выполнения этого шага будет создана новая база данных SQL Azure, в которую вы можете войти и создать там таблицы, представления и хранимые процедуры. 

По умолчанию масштаб базы данных SQL настраивается с использованием следующих параметров:

- Выпуск Web Edition
- База данных размером 1 ГБ

Для службы BizTalk достаточно конфигурации по умолчанию. Если вы хотите изменить параметры конфигурации для масштаба, в левой области навигации выберите **БАЗЫ ДАННЫХ SQL**, дважды щелкните вашу базу данных SQL, а затем перейдите на вкладку **Настроить**. Изменение масштаба может повлиять на стоимость. Сведения о выпусках и счетах см. в разделе [Учетные записи и выставление счетов в базе данных SQL Azure](http://go.microsoft.com/fwlink/p/?LinkID=234930).


##<a name="Storage"></a>Необязательно. Создание учетной записи хранения

При подготовке службы BizTalk Azure автоматически создается учетная запись хранения Azure. Если вы предпочитаете создать учетную запись хранения Azure независимо от службы BizTalk, см. раздел [Создание учетной записи хранения](http://go.microsoft.com/fwlink/p/?LinkID=279823).

В результате выполнения этого шага создается новая учетная запись хранения Azure, которая предоставляет доступ к таблицам, BLOB-объектам и очередям. 

Для службы BizTalk достаточно параметров по умолчанию. Если вы хотите изменить параметры по умолчанию, в левой области навигации выберите **ХРАНИЛИЩЕ**, а затем выберите вашу учетную запись хранения. Параметры отображаются на вкладках "Панель мониторинга", "Монитор", "Настроить" и "Контейнеры".

При создании учетной записи хранения автоматически создаются первичный ключ и вторичный ключ. Эти ключи позволяют управлять доступом к учетной записи хранения. Служба BizTalk автоматически использует первичный ключ.

Сведения об учетной записи хранения см. в разделе [Хранилище](http://go.microsoft.com/fwlink/p/?LinkID=285671).



## Далее

Теперь, когда подготовка службы BizTalk завершена, вы можете ознакомиться с различными вкладками в разделе [Службы BizTalk: вкладки "Панель мониторинга", "Монитор" и "Масштаб"](http://go.microsoft.com/fwlink/p/?LinkID=302281). Служба BizTalk готова для использования в приложениях. Чтобы приступить к созданию приложений, перейдите по ссылке [Службы BizTalk Azure](http://go.microsoft.com/fwlink/p/?LinkID=235197).

## См. также
- [Службы BizTalk: диаграмма выпусков Developer, Basic, Standard и Premium](http://go.microsoft.com/fwlink/p/?LinkID=302279)<br/>
- [Службы BizTalk: диаграмма состояния службы BizTalk](http://go.microsoft.com/fwlink/p/?LinkID=329870)<br/>
- [Службы BizTalk: резервное копирование и восстановление](http://go.microsoft.com/fwlink/p/?LinkID=329873)<br/>
- [Службы BizTalk: регулирование](http://go.microsoft.com/fwlink/p/?LinkID=302282)<br/>
- [Службы BizTalk: имя и ключ издателя](http://go.microsoft.com/fwlink/p/?LinkID=303941)<br/>
- [Как приступить к работе с пакетом SDK для служб BizTalk Azure](http://go.microsoft.com/fwlink/p/?LinkID=302335)

[NewBizTalkService]: ./media/biztalk-provision-services/WABS_NewBizTalkService.png
[NEWButton]: ./media/biztalk-provision-services/WABS_New.png
[ProgressComplete]: ./media/biztalk-provision-services/WABS_ProgressComplete.png
[ACSConnectInfo]: ./media/biztalk-provision-services/WABS_ACSConnectInformation.png
[QuickGlance]: ./media/biztalk-provision-services/WABS_QuickGlance.png
[ACSServiceIdentities]: ./media/biztalk-provision-services/WABS_ACSServiceIdentities.png

