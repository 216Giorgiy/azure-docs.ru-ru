<properties linkid="manage-services-biztalk-services-throttling" urlDisplayName="Регулирование" pageTitle="Пороговые значения регулирования в службах BizTalk | Azure" metaKeywords="Службы BizTalk, регулирование, Azure" description="Сведения о пороговых значениях регулирования и соответствующее поведение среды выполнения для служб BizTalk. Регулирование основывается на использовании памяти и количестве одновременных сообщений." metaCanonical="" services="biztalk-services" documentationCenter="" title="Службы BizTalk: регулирование" authors="mandia" solutions="" manager="paulettm" editor="susanjo" />





# Службы BizTalk: регулирование

Службы Azure BizTalk реализуют регулирование служб на основе двух условий: использования памяти и числа одновременно обрабатываемых сообщений. В этом разделе содержатся сведения о пороговых значениях регулирования и описывается поведение среды выполнения при возникновении условия регулирования.


##Пороговые значения регулирования

В следующей таблице перечислены источник и пороговые значения регулирования:


<table border="1">

<tr bgcolor="FAF9F9">
        <th> </th>
        <td><strong>Описание</strong></td>
        <td><strong>Нижнее пороговое значение</strong></td>
        <td><strong>Верхнее пороговое значение</strong></td>
</tr>
    <tr>
        <td>Память</td>
        <td>% всей доступной системной памяти/количество_байтов_файла_подкачки. 
<br/><br/>
Итоговое доступное количество байтов файла подкачки приблизительно в 2 раза превышает ОЗУ в системе.</td>
        <td>60%</td>
        <td>70%</td>
    </tr>
    <tr>
        <td>Обработка сообщений</td>
        <td>Число сообщений, обрабатываемых одновременно</td>
        <td>40 * число ядер</td>
        <td>100 * число ядер</td>
    </tr>
</table>

При достижении верхнего порогового значения в службах BizTalk для Azure запускается регулирование. Регулирование прекращается при достижении нижнего порогового значения. Например, служба использует 65 % системной памяти. В этом случае служба не ведет регулирование. Использование системной памяти повышается до 70 %. В этом случае служба начинает регулирование, которое продолжается до того момента, пока загрузка системной памяти не снизится до 60 % (нижнее пороговое значение).

Службы BizTalk для Azure отслеживают состояние регулирования (обычный режим и регулируемый режим), а также продолжительность регулирования.


##Поведение в среде выполнения

Когда службы BizTalk для Azure переключаются в состояние регулирования, происходит следующее:

- Регулирование осуществляется по конкретным экземплярам роли. Например: <br/>
RoleInstanceA ведет регулирование. RoleInstanceB не ведет регулирование. В этом случае сообщения в RoleInstanceB обрабатываются как ожидалось. Сообщения в RoleInstanceA отклоняются и завершаются со следующей ошибкой:<br/><br/>
Сервер занят. Повторите попытку позже.<br/><br/>
- Ни один запрашивающий источник не проводит опрос и не загружает сообщение. Например: <br/>
Конвейер извлекает сообщения из внешнего FTP-источника. Экземпляр роли, посылающий запрос на извлечение, переходит в состояние регулирования. В этом случае загрузка дополнительных сообщений в конвейере приостанавливается до прекращения регулирования для этого экземпляра роли.
- Клиенту отправляется ответ, чтобы он мог повторно отправить это сообщение.
- Необходимо дождаться, когда регулирование будет разрешено. В частности, следует дождаться момента достижения нижнего порогового значения.

## Важные примечания
- Регулирование нельзя отключить.
- Пороговые значения регулирования нельзя изменить.
- Регулирование реализуется на уровне всей системы.
- Сервер базы данных SQL Azure также имеет встроенное регулирование.

##Дополнительные разделы по службам BizTalk в Azure

-  [Установка пакета служб BizTalk в Azure](http://go.microsoft.com/fwlink/p/?LinkID=241589)<br/>
-  [Учебные пособия по службам BizTalk в Azure](http://go.microsoft.com/fwlink/p/?LinkID=236944)<br/>
-  [Как приступить к работе с пакетом SDK для служб BizTalk Azure](http://go.microsoft.com/fwlink/p/?LinkID=302335)<br/>
-  [Службы Azure BizTalk](http://go.microsoft.com/fwlink/p/?LinkID=303664)<br/>

## См. также
- [Службы BizTalk: диаграмма выпусков Developer, Basic, Standard и Premium](http://go.microsoft.com/fwlink/p/?LinkID=302279)<br/>
- [Службы BizTalk: подготовка с использованием портала управления Azure](http://go.microsoft.com/fwlink/p/?LinkID=302280)<br/>
- [Службы BizTalk: диаграмма состояния подготовки](http://go.microsoft.com/fwlink/p/?LinkID=329870)<br/>
- [Службы BizTalk: вкладки "Панель мониторинга", "Монитор" и "Масштаб"](http://go.microsoft.com/fwlink/p/?LinkID=302281)<br/>
- [Службы BizTalk: резервное копирование и восстановление](http://go.microsoft.com/fwlink/p/?LinkID=329873)<br/>
- [Службы BizTalk: имя и ключ издателя](http://go.microsoft.com/fwlink/p/?LinkID=303941)<br/>

