---
title: Заметки о выпуске агента службы "Синхронизация файлов Azure" | Документация Майкрософт
description: Заметки о выпуске агента службы "Синхронизация файлов Azure".
services: storage
author: wmgries
ms.service: storage
ms.topic: article
ms.date: 12/10/2018
ms.author: wgries
ms.component: files
ms.openlocfilehash: 87e6f2c956766011adef23ce9a8565625483a244
ms.sourcegitcommit: c94cf3840db42f099b4dc858cd0c77c4e3e4c436
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/19/2018
ms.locfileid: "53635550"
---
# <a name="release-notes-for-the-azure-file-sync-agent"></a>Заметки о выпуске агента службы "Синхронизация файлов Azure"
Служба "Синхронизация файлов Azure" позволяет централизованно хранить файловые ресурсы организации в службе файлов Azure, обеспечивая гибкость, производительность и совместимость локального файлового сервера. Установки серверов Windows Server преобразовываются в быстрый кэш общего файлового ресурса Azure. Для локального доступа к данным вы можете использовать любой протокол, доступный в Windows Server (в том числе SMB, NFS и FTPS). Кроме того, вы можете создать любое количество кэшей.

В этой статье рассматриваются заметки о выпуске для поддерживаемых версий агента службы "Синхронизация файлов Azure".

## <a name="supported-versions"></a>Поддерживаемые версии
Служба "Синхронизация файлов Azure" поддерживает следующие версии агента:

| Веха | Номер версии агента | Дата выпуска | Status |
|----|----------------------|--------------|------------------|
| Накопительный пакет обновлений за декабрь — [KB4459990](https://support.microsoft.com/help/4459990)| 4.2.0.0 | 10 декабря, 2018 г. | Поддерживается (рекомендуемая версия) |
| Накопительный пакет обновлений за декабрь | 4.1.0.0 | 4 декабря 2018 г. | Поддерживаются |
| Выпуск версии 4 | 4.0.1.0 | 13 ноября 2018 г. | Поддерживаются |
| Накопительный пакет обновлений за сентябрь | 3.3.0.0 | 24 сентября 2018 г. | Поддерживаются |
| Накопительный пакет обновления за июнь | 3.2.0.0 | 15 августа 2018 г. | Поддерживаются |
| Общедоступная версия | 3.1.0.0 | 19 июля 2018 г. | Поддерживаются |
| Накопительный пакет обновления за июнь | 3.0.13.0 | 29 июня 2018 г. | Не поддерживается. Версия агента истекла 1 октября 2018 г. |
| Обновление 2 | 3.0.12.0 | 22 мая 2018 г. | Не поддерживается. Версия агента истекла 1 октября 2018 г. |
| Накопительный пакет обновления за апрель | 2.3.0.0 | 8 мая 2018 г. | Не поддерживается. Версия агента истекла 1 октября 2018 г. |
| Накопительный пакет обновления за март | 2.2.0.0 | 12 марта 2018 г. | Не поддерживается. Версия агента истекла 1 октября 2018 г. |
| Накопительный пакет обновления за февраль | 2.1.0.0 | 28 февраля 2018 г. | Не поддерживается. Версия агента истекла 1 октября 2018 г. |
| Обновление 1 | 2.0.11.0 | 8 февраля 2018 г. | Не поддерживается. Версия агента истекла 1 октября 2018 г. |
| Накопительный пакет обновления за январь | 1.4.0.0 | 8 января 2018 г. | Не поддерживается. Версия агента истекла 1 октября 2018 г. |
| Накопительный пакет обновления за ноябрь | 1.3.0.0 | 30 ноября 2017 г. | Не поддерживается. Версия агента истекла 1 октября 2018 г. |
| Накопительный пакет обновления за октябрь | 1.2.0.0 | 31 октября 2017 г. | Не поддерживается. Версия агента истекла 1 октября 2018 г. |
| Первоначальный выпуск предварительной версии | 1.1.0.0 | 26 сентября 2017 г. | Не поддерживается. Версия агента истекла 1 октября 2018 г. |

### <a name="azure-file-sync-agent-update-policy"></a>Политика обновления агента службы синхронизации файлов Azure
[!INCLUDE [storage-sync-files-agent-update-policy](../../../includes/storage-sync-files-agent-update-policy.md)]

## <a name="agent-version-4200"></a>Версия агента 4.2.0.0
Приведенные ниже заметки о выпуске относятся к версии агента службы "Синхронизация файлов Azure" 4.2.0.0 (выпущенной 10 декабря 2018 г.). Они являются дополнением к заметкам о выпуске для версии 4.0.1.0.

Список исправлений в этом выпуске:  
- При создании моментального снимка VSS может возникнуть STOP-ошибка 0x3B или STOP-ошибка 0x1E.  
- При включении распределения по уровням в облаке может произойти утечка памяти.  

## <a name="agent-version-4100"></a>Версия агента 4.1.0.0
Приведенные ниже заметки о выпуске относятся к версии агента службы "Синхронизация файлов Azure" 4.1.0.0 (выпущенной 4 декабря 2018 г.). Они являются дополнением к заметкам о выпуске для версии 4.0.1.0.

Список исправлений в этом выпуске:  
- Сервер может перестать отвечать из-за утечки памяти при распределении по уровням облака.  
- Установка агента завершается сбоем с ошибкой 1921, информирующей о том, что не удалось остановить службу агента синхронизации хранилища (FileSyncSvc) и что  вам нужно проверить наличие необходимых прав на остановку системных служб.  
- Выполнение службы агента синхронизации хранилища (FileSyncSvc) может завершиться сбоем при интенсивном использовании памяти.  
- Прочие улучшения надежности при распределении по уровням в облаке и синхронизации.

## <a name="agent-version-4010"></a>Версия агента 4.0.1.0
Приведенные ниже заметки о выпуске предназначены для версии агента службы "Синхронизация файлов Azure" 4.0.1.0 (выпущенной 13 ноября 2018 г.).

### <a name="evaluation-tool"></a>Средство оценки
Прежде чем развертывать службу "Синхронизация файлов Azure", следует оценить, совместима ли она с вашей системой, с помощью средства оценки этой службы. Это средство является командлетом Azure PowerShell, который проверяет наличие потенциальных проблем с файловой системой и набором данных, таких как неподдерживаемые символы или неподдерживаемая версия операционной системы. Инструкции по установке и использованию см. в разделе о [средстве оценки](https://docs.microsoft.com/azure/storage/files/storage-sync-files-planning#evaluation-tool) руководства по планированию. 

### <a name="agent-installation-and-server-configuration"></a>Установка агента и конфигурация сервера
Дополнительные сведения о том, как установить и настроить агент службы "Синхронизация файлов Azure" с помощью Windows Server, см. в статье о [планировании развертывания службы "Синхронизация файлов Azure"](storage-sync-files-planning.md) и [практическом руководстве по развертыванию службы "Синхронизация файлов Azure"](storage-sync-files-deployment-guide.md).

- Пакет установки агента нужно устанавливать с разрешениями более высокого уровня (администратора).
- Агент не поддерживается в развертываниях Windows Server Core или Nano Server.
- Агент поддерживается только в Windows Server 2016 и Windows Server 2012 R2.
- Агент требует по крайней мере 2 ГиБ памяти. Если сервер выполняется на виртуальной машине с включенной динамической памятью, в виртуальной машине должна быть настроена память объемом не менее 2048 МиБ.
- Служба агента синхронизации хранилища (FileSyncSvc) не поддерживает конечные точки сервера, которые размещены в томе со сжатым каталогом данных о системном томе (SVI). Использование этой конфигурации может привести к непредвиденным результатам.
- При создании моментального снимка VSS может возникнуть STOP-ошибка 0x3B или STOP-ошибка 0x1E.

### <a name="interoperability"></a>Возможность взаимодействия
- Антивирусные программы, приложения архивации, а также другие приложения, которые получают доступ к многоуровневым файлам, вызывают нежелательные отзывы, если они не учитывают автономный атрибут и пропускают чтение содержимого этих файлов. Дополнительные сведения см. в статье об [устранении неполадок службы "Синхронизация файлов Azure"](storage-sync-files-troubleshoot.md).
- Фильтры блокировки файлов FSRM могут стать причиной постоянных сбоев синхронизации.
- Запуск sysprep на сервере, где установлен агент службы "Синхронизация файлов Azure", не поддерживается и может привести к непредвиденным результатам. Устанавливать агент Синхронизации файлов Azure нужно после развертывания образа сервера и завершения мини-установки sysprep.
- Дедупликация данных и размещение данных по уровням облака не поддерживаются на одном томе.

### <a name="sync-limitations"></a>Ограничения синхронизации
Следующие элементы не синхронизируются, но остальная часть системы продолжает работать в обычном режиме:
- Файлы с неподдерживаемыми символами. Со списком неподдерживаемых символов можно ознакомиться в [руководстве по устранению неполадок](storage-sync-files-troubleshoot.md#handling-unsupported-characters).
- Файлы или каталоги, которые оканчиваются точкой.
- Пути длиной более 2048 символов.
- Часть списка управления доступом на уровне пользователей (DACL) в дескрипторе безопасности размером более 2 КБ. (Эта проблема возникает только при наличии более 40 записей контроля доступа (ACE) на одном элементе.)
- Часть системного списка управления доступом (SACL) в дескрипторе безопасности, который используется для аудита.
- Дополнительные атрибуты.
- Альтернативные потоки данных.
- Точки повторного анализа.
- Жесткие связи.
- Сжатие (для серверного файла) не сохраняется при синхронизации изменений в этом файле из других конечных точек.
- Файлы, зашифрованные с помощью файловой системы EFS (или другого пользовательского режима шифрования). Служба не может считывать такие данные.

    > [!Note]  
    > Служба "Синхронизация файлов Azure" всегда шифрует передаваемые данные. Неактивные данные можно зашифровать в Azure.
 
### <a name="server-endpoint"></a>Конечная точка сервера
- Конечную точку сервера можно создавать только на томе NTFS. Сейчас служба "Синхронизация файлов Azure" не поддерживает ReFS и FAT, FAT32 и другие файловые системы.
- Многоуровневые файлы станут недоступными для использования, если их не отозвать перед удалением конечной точки сервера. Чтобы восстановить доступ к файлам, повторно создайте конечную точку сервера. Если с момента удаления конечной точки сервера прошло 30 дней или если была удалена конечная точка облака, многоуровневые файлы, которые не были отозваны, станут непригодными для использования.
- Но для системного тома не поддерживается распределение по уровням облака. Чтобы создать конечную точку сервера на системном томе, отключите распределение по уровням облака при ее создании.
- Отказоустойчивую кластеризацию поддерживают только кластеризованные диски. Общие тома кластера (CSV) ее не поддерживают.
- Конечная точка сервера не может быть вложенной. Она может сосуществовать параллельно с другой конечной точкой на одном томе.
- Не храните файл ОС или файл подкачки приложения в расположении конечной точки сервера.
- В случае переименования сервера его имя на портале не обновляется. Чтобы обновить имя сервера на портале, отмените регистрацию сервера, а затем зарегистрируйте его повторно.

### <a name="cloud-endpoint"></a>Облачная конечная точка
- Служба "Синхронизация файлов Azure" поддерживает внесение изменений непосредственно в файловый ресурс Azure. Однако внесенные изменения сначала должны быть обнаружены заданием обнаружения изменений этой службы. Задание обнаружения изменений инициируется для облачной конечной точки каждые 24 часа. Кроме того, изменения, внесенные в файловый ресурс Azure с помощью протокола REST, не приведут к обновлению времени последнего изменения SMB и не будут распознаны как изменение службой синхронизации.
- Службу синхронизации хранилища и/или учетную запись хранения можно переместить в другую группу ресурсов или подписку в рамках существующего клиента Azure AD. Если учетная запись хранения перемещена, необходимо предоставить службе Hybrid File Sync доступ к учетной записи хранилища (см. в разделе [Убедитесь, что служба "Синхронизация файлов Azure" имеет доступ к учетной записи хранения](https://docs.microsoft.com/azure/storage/files/storage-sync-files-troubleshoot?tabs=portal1%2Cportal#troubleshoot-rbac)).

    > [!Note]  
    > Служба "Синхронизация файлов Azure" не поддерживает перемещение подписки в другой клиент Azure AD.

### <a name="cloud-tiering"></a>Распределение по уровням облака
- Параметр политики распределения по уровням в облаке на основе даты используется для указания файлов, которые должны кэшироваться при получении к ним доступа в течение указанного количества дней. Дополнительные сведения см. в разделе [Как можно принудительно переместить файл или каталог?](https://docs.microsoft.com/azure/storage/files/storage-sync-cloud-tiering#afs-force-tiering)
- Если многоуровневый файл копируется в другое расположение с помощью Robocopy, полученный файл не будет распределен по уровням. Вы можете задать автономный атрибут, так как Robocopy неправильно включает его в операциях копирования.
- При копировании файлов с помощью robocopy используйте параметр /MIR, чтобы сохранить метки времени файлов. Таким образом, старые файлы будут перемещены на другой уровень раньше, чем файлы, доступ к которым был получен недавно.
- При просмотре свойств файла из клиента SMB автономный атрибут может быть настроен неправильно из-за кэширования метаданных файла по протоколу SMB.

## <a name="agent-version-3300"></a>Версия агента 3.3.0.0
Приведенные ниже заметки о выпуске предназначены для версии агента службы "Синхронизация файлов Azure" 3.3.0.0, выпущенной 24 сентября 2018 г. Они являются дополнением к заметкам о выпуске для версии 3.1.0.0.

Список исправлений в этом выпуске:
- после обновления агента службы "Синхронизация файлов Azure" до версии 3.1 или 3.2 состояние зарегистрированного сервера отображается как "Не в сети";
- служба "Агент синхронизации хранилища Azure" (FileSyncSvc) аварийно завершает работу из-за файлов с длинными путями;
- Регистрация сервера завершается сбоем с ошибкой, информирующей о том, что не удалось загрузить файл или сборку Kailani.Afs.StorageSyncProtocol.V3.

## <a name="agent-version-3200"></a>Версия агента 3.2.0.0
Приведенные ниже заметки о выпуске предназначены для версии агента службы "Синхронизация файлов Azure" 3.2.0.0 (выпущенной 15 августа 2018 г.). Они являются дополнением к заметкам о выпуске для версии 3.1.0.0.

Этот выпуск включает следующее исправление:
- Сбой синхронизации при ошибке нехватки памяти (0x8007000e) из-за утечки памяти

## <a name="agent-version-3100"></a>Версия агента 3.1.0.0
Приведенные ниже заметки о выпуске предназначены для версии агента службы "Синхронизация файлов Azure" 3.1.0.0 (выпущенной 19 июня 2018 г.).

### <a name="evaluation-tool"></a>Средство оценки
Прежде чем развертывать службу "Синхронизация файлов Azure", следует оценить, совместима ли она с вашей системой, с помощью средства оценки этой службы. Это средство является командлетом Azure PowerShell, который проверяет наличие потенциальных проблем с файловой системой и набором данных, таких как неподдерживаемые символы или неподдерживаемая версия операционной системы. Инструкции по установке и использованию см. в разделе о [средстве оценки](https://docs.microsoft.com/azure/storage/files/storage-sync-files-planning#evaluation-tool) руководства по планированию. 

### <a name="agent-installation-and-server-configuration"></a>Установка агента и конфигурация сервера
Дополнительные сведения о том, как установить и настроить агент службы "Синхронизация файлов Azure" с помощью Windows Server, см. в статье о [планировании развертывания службы "Синхронизация файлов Azure"](storage-sync-files-planning.md) и [практическом руководстве по развертыванию службы "Синхронизация файлов Azure"](storage-sync-files-deployment-guide.md).

- Пакет установки агента нужно устанавливать с разрешениями более высокого уровня (администратора).
- Агент не поддерживается в развертываниях Windows Server Core или Nano Server.
- Агент поддерживается только в Windows Server 2016 и Windows Server 2012 R2.
- Агент требует по крайней мере 2 ГБ физической памяти.
- Служба агента синхронизации хранилища (FileSyncSvc) не поддерживает конечные точки сервера, которые размещены в томе со сжатым каталогом данных о системном томе (SVI). Использование этой конфигурации может привести к непредвиденным результатам.

### <a name="interoperability"></a>Возможность взаимодействия
- Антивирусные программы, приложения архивации, а также другие приложения, которые получают доступ к многоуровневым файлам, вызывают нежелательные отзывы, если они не учитывают автономный атрибут и пропускают чтение содержимого этих файлов. Дополнительные сведения см. в статье об [устранении неполадок службы "Синхронизация файлов Azure"](storage-sync-files-troubleshoot.md).
- Не используйте фильтр блокировки файлов диспетчера ресурсов файлового сервера (или другой). В противном случае могут возникать постоянные сбои синхронизации.
- Запуск sysprep на сервере, где установлен агент службы "Синхронизация файлов Azure", не поддерживается и может привести к непредвиденным результатам. Устанавливать агент и регистрировать сервер нужно после развертывания образа сервера и завершения мини-установки sysprep.
- Дедупликация данных и размещение данных по уровням облака не поддерживаются на одном томе.

### <a name="sync-limitations"></a>Ограничения синхронизации
Следующие элементы не синхронизируются, но остальная часть системы продолжает работать в обычном режиме:
- Пути длиной более 2048 символов.
- Часть списка управления доступом на уровне пользователей (DACL) в дескрипторе безопасности размером более 2 КБ. (Эта проблема возникает только при наличии более 40 записей контроля доступа (ACE) на одном элементе.)
- Часть системного списка управления доступом (SACL) в дескрипторе безопасности, который используется для аудита.
- Дополнительные атрибуты.
- Альтернативные потоки данных.
- Точки повторного анализа.
- Жесткие связи.
- Сжатие (для серверного файла) не сохраняется при синхронизации изменений в этом файле из других конечных точек.
- Файлы, зашифрованные с помощью файловой системы EFS (или другого пользовательского режима шифрования). Служба не может считывать такие данные.

    > [!Note]  
    > Служба "Синхронизация файлов Azure" всегда шифрует передаваемые данные. Неактивные данные можно зашифровать в Azure.
 
### <a name="server-endpoint"></a>Конечная точка сервера
- Конечную точку сервера можно создавать только на томе NTFS. Сейчас служба "Синхронизация файлов Azure" не поддерживает ReFS и FAT, FAT32 и другие файловые системы.
- Многоуровневые файлы станут недоступными для использования, если их не отозвать перед удалением сервера конечной точки.
- Но для системного тома не поддерживается распределение по уровням облака. Чтобы создать конечную точку сервера на системном томе, отключите распределение по уровням облака при ее создании.
- Отказоустойчивую кластеризацию поддерживают только кластеризованные диски. Общие тома кластера (CSV) ее не поддерживают.
- Конечная точка сервера не может быть вложенной. Она может сосуществовать параллельно с другой конечной точкой на одном томе.
- Не храните файл ОС или файл подкачки приложения в конечной точке сервера.
- В случае переименования сервера его имя на портале не обновляется. Чтобы обновить имя сервера на портале, отмените регистрацию сервера, а затем зарегистрируйте его повторно.

### <a name="cloud-endpoint"></a>Облачная конечная точка
- Служба "Синхронизация файлов Azure" поддерживает внесение изменений непосредственно в файловый ресурс Azure. Однако внесенные изменения сначала должны быть обнаружены заданием обнаружения изменений этой службы. Задание обнаружения изменений инициируется для облачной конечной точки каждые 24 часа. Кроме того, изменения, внесенные в файловый ресурс Azure с помощью протокола REST, не приведут к обновлению времени последнего изменения SMB и не будут распознаны как изменение службой синхронизации.
- Службу синхронизации хранилища и/или учетную запись хранения можно переместить в другую группу ресурсов или подписку в рамках существующего клиента Azure AD. Если учетная запись хранения перемещена, необходимо предоставить службе Hybrid File Sync доступ к учетной записи хранилища (см. в разделе [Убедитесь, что служба "Синхронизация файлов Azure" имеет доступ к учетной записи хранения](https://docs.microsoft.com/azure/storage/files/storage-sync-files-troubleshoot?tabs=portal1%2Cportal#troubleshoot-rbac)).

    > [!Note]  
    > Служба "Синхронизация файлов Azure" не поддерживает перемещение подписки в другой клиент Azure AD.

### <a name="cloud-tiering"></a>Распределение по уровням облака
- Если многоуровневый файл копируется в другое расположение с помощью Robocopy, полученный файл не будет распределен по уровням. Вы можете задать автономный атрибут, так как Robocopy неправильно включает его в операциях копирования.
- При просмотре свойств файла из клиента SMB автономный атрибут может быть настроен неправильно из-за кэширования метаданных файла по протоколу SMB.
