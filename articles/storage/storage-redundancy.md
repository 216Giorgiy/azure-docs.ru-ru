<properties
	pageTitle="Репликация службы хранилища Azure | Microsoft Azure"
	description="Данные в учетной записи хранения Microsoft Azure реплицируются для обеспечения устойчивости и высокого уровня доступности. Варианты репликации включают локально избыточное хранилище (LRS), хранилище, избыточное в пределах зоны (ZRS), геоизбыточное хранилище (GRS) и геоизбыточное хранилище с доступом для чтения (RA-GRS)." 
	services="storage" 
	documentationCenter=""
	authors="tamram"
	manager="adinah"
	editor=""/>

<tagsms.service="storage"
	ms.workload="storage"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="09/01/2015"
	ms.author="tamram"/>

# Репликация службы хранилища Azure

Данные в учетной записи хранения Microsoft Azure всегда реплицируются, обеспечивая надежность, высокий уровень доступности и соответствие [Соглашению об уровне обслуживания для службы хранилища Azure](http://azure.microsoft.com/support/legal/sla/) даже при временных сбоях оборудования.

При создании учетной записи хранения необходимо выбрать один из следующих вариантов репликации:

- [Локально избыточное хранилище (LRS)](#locally-redundant-storage)
- [Хранилище, избыточное в пределах зоны (ZRS)](#zone-redundant-storage)
- [Геоизбыточное хранилище (GRS)](#geo-redundant-storage)
- [Геоизбыточное хранилище с доступом для чтения (RA-GRS)](#read-access-geo-redundant-storage)

В таблице ниже представлено краткое описание различий между LRS, ZRS, GRS и RA-GRS, а в следующих разделах каждый тип репликации представлен более подробно.


|Стратегия репликации|LRS|ZRS|GRS|RA-GRS
|--------------------|---|---|---|------
|Данные реплицируются в нескольких помещениях.|Нет|Да|Да|Да|
|Данные можно считать как из основного, так и из дополнительного местоположений.|Нет|Нет|Нет|Да
|Количество обслуживаемых копий данных на отдельных узлах.|3|3|6|6


## Локально избыточное хранилище

Локально избыточное хранилище (LRS) реплицирует ваши данные в регионе, в котором создана учетная запись хранения. Для максимальной устойчивости каждый запрос данных в учетной записи хранения реплицируется три раза. Эти три реплики хранятся в отдельных доменах сбоя и доменах обновления. Домен сбоя — это группа узлов, представляющая физическую единицу сбоя, которая может рассматриваться как узлы, принадлежащие одному физическом блоку. Домен обновления — это группа узлов, которые обновляются одновременно во время обновления службы (развертывания). Эти три реплики распределяются по доменам обновления и доменам сбоя, обеспечивая доступность данных, даже если сбой оборудования затрагивает один блок, а также при обновлении узлов во время развертывания. Запрос возвращается только после того, как его записывают во все три реплики.

Хотя для большинства приложений рекомендуется использовать геоизбыточное хранилище (GRS), в некоторых случаях может потребоваться локально избыточное хранилище:

- LRS дешевле, чем GRS, а также предоставляет более высокую пропускную способность. Если в вашем приложении хранятся данные, которые можно легко воссоздать, можно выбрать LRS.

- Некоторые приложения реплицируют данные только в одном регионе из-за нормативных требований.

- Если в приложении содержится собственная стратегия георепликации, GRS может не потребоваться.


## Хранилище, избыточное в пределах зоны

Хранилище, избыточное в пределах зоны (ZRS), реплицирует данные в двух-трех помещениях в одном или двух регионах, предоставляя более высокую доступность по сравнению с LRS. Если в вашей учетной записи хранения включена репликация ZRS, данные будут устойчивы даже в случае сбоя в одном из помещений.


>[AZURE.NOTE]ZRS в настоящее время доступно только для блочных BLOB-объектов. Обратите внимание, что после создания учетной записи хранения и выбора хранилища, избыточного в пределах зоны, это хранилище невозможно преобразовать для использования другого типа репликации, и наоборот.


## Геоизбыточное хранилище

Геоизбыточное хранилище (GRS) реплицирует данные во вторичный регион, который находится в сотнях километров от первичного региона. Если в учетной записи хранения включена репликация GRS, данные будут устойчивы даже в случае отключения электричества во всем регионе или аварии, при которой первичный регион не может быть восстановлен.

Для учетной записи хранения с GRS обновление фиксируется сначала в первичном регионе, где оно реплицируется три раза. Затем обновление реплицируется во вторичном регионе (также три раза) в разных доменах сбоя и доменах обновления.


> [AZURE.NOTE]С GRS запросы на запись данных реплицируются асинхронно во вторичный регион. Важно обратить внимание, что выбор GRS не влияет на задержку запросов в первичном регионе. Однако так как асинхронная репликация подразумевает задержку, в случае региональной аварии есть вероятность, что изменения, еще не реплицированные во вторичный регион, могут быть потеряны, если данные будет невозможно восстановить из первичного региона.

При создании учетной записи хранения вы выбираете первичный регион для учетной записи. Вторичный регион определяется на основе первичного региона, его невозможно изменить. В таблице ниже показаны пары основных и дополнительных регионов.

|Главный |Вторичная
| ---------------   |----------------
|Северо-центральный регион США |Южно-центральный регион США
|Южно-центральный регион США |Северо-центральный регион США
|Восток США |Запад США
|Запад США |Восток США
|Восточная часть США 2 |Центральный регион США
|Центральный регион США |Восточная часть США 2
|Северная Европа |Западная Европа
|Западная Европа |Северная Европа
|Юго-Восточная Азия |Восточная Азия
|Восточная Азия |Юго-Восточная Азия
|Восточный Китай |Северный Китай
|Северный Китай |Восточный Китай
|Восточная часть Японии |Западная часть Японии
|Западная часть Японии |Восточная часть Японии
|Южная часть Бразилии |Южно-центральный регион США
|Восточная часть Австралии |Юго-Восточная часть Австралии
|Юго-Восточная часть Австралии|Восточная часть Австралии  


## Геоизбыточное хранилище с доступом для чтения

Геоизбыточное хранилище с доступом для чтения (RA-GRS) максимально увеличивает доступность для учетной записи хранения, обеспечивая доступ только для чтения к данным во вторичном местоположении в дополнение к репликации в двух регионах, предоставленной в GRS. В случае недоступности данных в первичном регионе ваше приложение может считывать данные из вторичного региона.

При включении доступа только для чтения для данных во вторичном регионе ваши данные будут доступны как в первичной конечной точке, так и во вторичной конечной точке учетной записи хранения. Вторичная конечная точка аналогична первичной конечной точке, но к имени учетной записи добавляется суффикс `–secondary`. Например, если первичная конечная точка для службы BLOB-объектов — `myaccount.blob.core.windows.net`, то вторичная конечная точка — `myaccount-secondary.blob.core.windows.net`. Ключи доступа для учетной записи хранения одинаковые как для первичной, так и для вторичной конечных точек.

## Дальнейшие действия

- [Целевые показатели масштабируемости и производительности хранилища Azure](storage-scalability-targets.md)
- [Варианты избыточности и геоизбыточное хранилище с доступом для чтения службы хранилища Microsoft Azure](http://blogs.msdn.com/b/windowsazurestorage/archive/2013/12/11/introducing-read-access-geo-replicated-storage-ra-grs-for-windows-azure-storage.aspx)  
- [Эмулятор хранения Microsoft Azure 3.1 с RA-GRS](http://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/08/microsoft-azure-storage-emulator-3-1-with-ra-grs.aspx)
- [Документ SOSP службы хранилища Azure](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/11/20/windows-azure-storage-a-highly-available-cloud-storage-service-with-strong-consistency.aspx)  

<!---HONumber=September15_HO1-->