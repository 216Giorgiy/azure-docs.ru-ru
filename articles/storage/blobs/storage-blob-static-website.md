---
title: Размещение статических веб-сайтов в службе хранилища Azure (предварительная версия) | Документы Майкрософт
description: Сейчас служба хранилища Azure предлагает размещение статических веб-сайтов (предварительная версия), предоставляя экономичное, масштабируемое решение для размещения современных веб-приложений.
services: storage
author: MichaelHauss
ms.service: storage
ms.topic: article
ms.date: 08/17/18
ms.author: mihauss
ms.component: blobs
ms.openlocfilehash: 65a1cd85baf18ac1f0d193e7e6d6c3139919fb59
ms.sourcegitcommit: a62cbb539c056fe9fcd5108d0b63487bd149d5c3
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/22/2018
ms.locfileid: "42617403"
---
# <a name="static-website-hosting-in-azure-storage-preview"></a>Размещение статических веб-сайтов в службе хранилища Azure (предварительная версия)
Сейчас служба хранилища Azure предлагает размещение статических веб-сайтов (предварительная версия), позволяя развертывать экономичные и масштабируемые современные веб-приложения в Azure. На статическом веб-сайте веб-страницы содержат статическое содержимое, созданное на JavaScript или другом клиентском коде. И наоборот, динамические веб-сайты зависят от серверного кода и могут быть размещены с помощью [веб-приложений Azure](/azure/app-service/app-service-web-overview).

Поскольку в развертываниях делается упор на применение гибких и экономичных моделей, важно обеспечить возможность доставки веб-содержимого без управления серверами. Это становится реальным благодаря размещению статических веб-сайтов в службе хранилища Azure с доступом к различным серверным функциям с бессерверными архитектурами, использующими [функции Azure](/azure/azure-functions/functions-overview) и другие службы PaaS.

## <a name="how-does-it-work"></a>Как это работает?
При включении статических веб-сайтов в учетной записи хранения создается конечная точка веб-службы в формате `<account-name>.<zone-name>.web.core.windows.net`.

Конечная точка веб-службы всегда предоставляет анонимный доступ для чтения, возвращает отформатированные HTML-страницы в ответ на ошибки службы и разрешает только операции на чтение объектов. Конечная точка веб-службы возвращает документ индекса в запрошенном каталоге для корня и всех его подкаталогов. Когда служба хранилища возвращает ошибку 404, конечная веб-точка возвращает настраиваемый документ об ошибке, если он настроен.

Содержимое для статического веб-сайта размещается в специальном контейнере "$web". Если контейнер "$web" отсутствует, он создается автоматически в ходе процесса включения. Доступ к содержимому в контейнере "$web" можно получить в корне учетной записи с помощью конечной веб-точки. Например, `https://contoso.z4.web.core.windows.net/` возвращает документ индекса, настроенный для веб-сайта, если документ с таким же именем существует в корневом каталоге $web.

При отправке содержимого на веб-сайт используйте конечную точку хранилища BLOB-объектов. Чтобы отправить BLOB-объект с именем "image.jpg", доступный в корне учетной записи, используйте следующий URL-адрес `https://contoso.blob.core.windows.net/$web/image.jpg`. Отправленное изображение можно просмотреть в веб-браузере в соответствующей конечной веб-точке `https://contoso.z4.web.core.windows.net/image.jpg`.


## <a name="custom-domain-names"></a>Имена пользовательских доменов
Для размещения веб-содержимого можно использовать личные домены. Соответствующие инструкции см. в статье [Настройка имени личного домена для учетной записи хранения Azure](storage-custom-domain-name.md). Сведения о доступе к веб-сайту, размещенному по имени личного домена по протоколу HTTPS, см. в статье [Использование Azure CDN для доступа к BLOB-объектам с пользовательскими доменами по протоколу HTTPS](storage-https-custom-domain-cdn.md). Направьте свою CDN на конечную веб-точку, а не на конечную точку BLOB-объекта и помните, что конфигурация CDN не происходит мгновенно, поэтому прежде чем ваш контент будет виден, может пройти несколько минут.

## <a name="pricing-and-billing"></a>Цены и выставление счетов
Размещение статических веб-сайтов осуществляется бесплатно. Дополнительные сведения о ценах на хранилище BLOB-объектов Azure см. на [странице цен](https://azure.microsoft.com/pricing/details/storage/blobs/).

## <a name="quickstart"></a>Быстрый запуск
### <a name="azure-portal"></a>Портал Azure
[Создайте учетную запись хранения GPv2](../common/storage-quickstart-create-account.md), если ее нет. Чтобы начать размещение веб-приложения, можно настроить функцию с помощью портала Azure, а затем в разделе "Параметры" в левой области навигации щелкнуть "Статический веб-сайт (предварительная версия)". Щелкните "Включено" и введите имя документа индекса и (необязательно) путь к настраиваемому документу ошибок.

![](media/storage-blob-static-website/storage-blob-static-website-portal-config.PNG)

Отправьте веб-активы в контейнер "$web", который был создан в ходе процесса включения статического веб-сайта. Это можно сделать непосредственно на портале Azure либо можно воспользоваться преимуществами [обозревателя хранилищ Azure](https://azure.microsoft.com/features/storage-explorer/) и отправить все структуры каталогов. Обязательно включите документ индекса с настроенным именем. В этом примере документу задано имя "index.html".

> [!NOTE]
> В имени документа учитывается регистр, поэтому оно должно точно совпадать с именем файла в хранилище.

И, наконец, перейдите к конечной веб-точке, чтобы протестировать веб-сайт.

### <a name="azure-cli"></a>Инфраструктура CLI Azure
Установите расширение предварительной версии хранилища:

```azurecli-interactive
az extension add --name storage-preview
```
Включение компонента:

```azurecli-interactive
az storage blob service-properties update --account-name <account-name> --static-website --404-document <error-doc-name> --index-document <index-doc-name>
```
Запрос URL-адреса конечной веб-точки:

```azurecli-interactive
az storage account show -n <account-name> -g <resource-group> --query "primaryEndpoints.web" --output tsv
```

Отправка объектов в контейнер $web:

```azurecli-interactive
az storage blob upload-batch -s deploy -d $web --account-name <account-name>
```

## <a name="faq"></a>Часто задаваемые вопросы
**Статические веб-сайты доступны для всех типов учетных записей хранения?**  
Нет, размещение статических веб-сайтов доступно только для стандартных учетных записей хранения общего назначения версии 2 (GPv2).

**Поддерживаются ли в новой конечной веб-точке правила виртуальной сети и брандмауэра службы хранилища?**  
Да, для новой конечной веб-точки действуют правила виртуальной сети и брандмауэра, настроенные для учетной записи хранения.

**Учитывает ли конечная веб-точка регистр?**  
Да, конечная веб-точка чувствительна к регистру так же, как и конечная точка BLOB-объектов. 

## <a name="next-steps"></a>Дополнительная информация
* [Использование Azure CDN для доступа к BLOB-объектам с помощью личных доменов по протоколу HTTPS](storage-https-custom-domain-cdn.md)
* [Настройка имени личного домена для конечной точки хранилища BLOB-объектов](storage-custom-domain-name.md)
* [Функции Azure](/azure/azure-functions/functions-overview)
* [Веб-приложения Azure](/azure/app-service/app-service-web-overview)
* [Создание первого бессерверного веб-приложения](https://aka.ms/static-serverless-webapp)
