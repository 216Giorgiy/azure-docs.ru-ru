<properties
    pageTitle="Перенос в хранилище Azure Premium| Microsoft Azure"
    description="Перенос в хранилище Azure Premium для поддержки высокопроизводительных дисков с низким уровнем задержки для интенсивного обмена данных на виртуальных машинах Azure."
    services="storage"
    documentationCenter="na"
    authors="tamram"
    manager="adinah"
    editor=""/>

<tags
    ms.service="storage"
    ms.workload="storage"
    ms.tgt_pltfrm="na"
    ms.devlang="na"
    ms.topic="article"
    ms.date="09/23/2015"
    ms.author="tamram"/>


# Перенос в хранилище Azure Premium

## Обзор

Это руководство призвано помочь новым пользователям хранилища Microsoft Azure класса Premium подготовиться к плавному переходу из своей текущей системы к хранилищу класса Premium. В руководстве рассматриваются три ключевых компонента процесса: планирование переноса в хранилище класса Premium, перенос существующих виртуальных жестких дисков (VHD) в хранилище класса Premium и создание экземпляров виртуальной машины Azure в хранилище класса Premium.

Для полного завершения процесса переноса могут потребоваться дополнительные действия, предваряющие описанные в этом руководстве инструкции и следующие за ними. Например, может потребоваться настройка виртуальных сетей или конечных точек, а также внесение изменений в код самого приложения. Эти действия будут отличаться для каждого приложения. Чтобы полный переход к хранилищу класса Premium был максимально эффективным, их следует выполнять в комплексе с инструкциями руководства.

Обзор функций хранилища класса Premium см. в статье [Хранилище класса Premium: высокопроизводительное хранилище для рабочих нагрузок виртуальных машин Azure](storage-premium-storage-preview-portal.md).

Данное руководство состоит из двух разделов, описывающих следующие два сценария переноса: [перенос виртуальных машин из хранилища за пределами Azure в хранилище Azure класса Premium](#migrating-vms-from-outside-azure-to-azure-premium-storage) и [перенос существующих виртуальных машин Azure в хранилище Azure класса Premium](#migrating-existing-azure-vms-to-azure-premium-storage).

В зависимости от используемого сценария выполняйте инструкции, описанные в соответствующем разделе.

## Перенос виртуальных машин из хранилища за пределами Azure в хранилище Azure класса Premium

### Предварительные требования
- Также вам понадобится подписка Azure. Если у вас нет подписки, можно оформить [бесплатную пробную](http://azure.microsoft.com/pricing/free-trial/) подписку на один месяц или посетить страницу [Цены Azure](http://azure.microsoft.com/pricing/) для ознакомления с дополнительными возможностями.
- Чтобы выполнить командлеты PowerShell, вам потребуется модуль Microsoft Azure PowerShell. Информацию о загрузке модуля см. в разделе [Загрузки Microsoft Azure](http://azure.microsoft.com/downloads/).
- Если вы планируете использовать виртуальные машины Azure в хранилище класса Premium, это должны быть виртуальные машины серии DS или GS. С виртуальными машинами серии DS можно использовать диски хранилища Standard и Premium. Диски хранилища Premium в будущем будут доступны с большим количеством типов виртуальных машин. Дополнительные сведения обо всех доступных типах и размерах дисков виртуальной машины Azure см. в разделе [Размеры виртуальных машин и облачных служб для Azure](http://msdn.microsoft.com/library/azure/dn197896.aspx).

### Рекомендации

#### Размеры виртуальной машины
Спецификации размеров виртуальных машин Azure перечислены в статье [Размеры виртуальных машин](https://azure.microsoft.com/ru-RU/documentation/articles/virtual-machines-size-specs/). Просмотрите характеристики виртуальных машин, которые работают с хранилищем класса Premium, и выберите размер виртуальной машины, наиболее подходящий для вашей рабочей нагрузки. Убедитесь, что виртуальная машина имеет достаточную пропускную способность для поддержки трафика диска.


#### Размеры диска
Существует три типа дисков, которые можно использовать с вашей виртуальной машиной, и каждый имеет определенные ограничения на операции ввода-вывода и пропускную способность. Учитывайте эти ограничения при выборе типа диска для вашей виртуальной машины в зависимости от потребностей приложения с точки зрения емкости, производительности, масштабируемости и пиковых нагрузок.

|Тип диска хранилища Premium|P10|P20|P30|
|:---:|:---:|:---:|:---:|
|Размер диска|128 ГБ|512 ГБ|1024 ГБ (1 ТБ)|
|Количество операций ввода-вывода в секунду на диск|500|2300|5000|
|Пропускная способность на диск|100 МБ в секунду|150 МБ в секунду|200 МБ в секунду|

#### Целевые показатели масштабируемости для учетной записи хранения

Учетные записи хранения Premium имеют следующие целевые показатели масштабируемости в дополнение к [целевым показателям масштабируемости и производительности хранилища Azure](http://msdn.microsoft.com/library/azure/dn249410.aspx). Если потребности вашего приложения превышают целевые показатели по масштабируемости для отдельной учетной записи хранения, при создании настройте приложение на использование нескольких учетных записей хранения и распределите данные между этими учетными записями.

|Общая емкость учетной записи|Общая пропускная способность для учетной записи локально избыточного хранилища|
|:--|:---|
|Емкость диска: 35 ТБ<br />Емкость для моментальных снимков: 10 ТБ|До 50 гигабит в секунду для входящих и исходящих подключений|

Дополнительные сведения о характеристиках хранилища класса Premium см. в разделе [Целевые показатели масштабируемости и производительности при использовании хранилища класса Premium](storage-premium-storage-preview-portal.md#scalability-and-performance-targets-whru-RUing-premium-storage).

#### Дополнительные диски с данными
В зависимости от рабочей нагрузки определите, требуются ли дополнительные диски данных для виртуальной машины. К виртуальной машине можно подключить несколько дисков постоянных данных. Если необходимо увеличить емкость и производительность тома, вы можете создать на дисках чередующийся том. Если вы создаете чередующийся том на дисках данных хранилища Premium с помощью [дисковых пространств](http://technet.microsoft.com/library/hh831739.aspx), необходимо настроить по одному столбцу для каждого используемого диска. В противном случае общая производительность чередующегося тома может быть ниже ожидаемой из-за неравномерного распределения трафика между дисками. Выполнить эту же операцию на виртуальных машинах под управлением Linux можно с помощью служебной программы *mdadm*. Подробную информацию см. в статье [Настройка программного RAID-массива в Linux](../virtual-machines-linux-configure-raid.md).

#### Политика кэширования диска
По умолчанию для политики кэширования дисков задано значение *только чтение* для всех дисков с данными класса Premium и *чтение и запись* — для дисков операционной системы класса Premium, подключенных к виртуальной машине. Этот параметр конфигурации рекомендуется использовать, чтобы достичь оптимальной производительности при операциях ввода-вывода приложения. Отключите кэширование дисков данных, которые отличаются высокой интенсивностью записи или используются только для записи (например, файлов журналов SQL Server), чтобы улучшить производительность приложения. Параметры кэша для существующих дисков данных можно обновить с помощью портала Azure или параметра *-HostCaching* командлета *Set-AzureDataDisk*.

#### Расположение
Выберите расположение, где доступно хранилище Azure Premium. Актуальную информацию о доступных расположениях см. на странице [служб Azure по регионам](http://azure.microsoft.com/regions/#services). Нахождение виртуальных машин в одном регионе с учетной записью хранения, в которой хранятся диски для виртуальной машины, обеспечит более высокую производительность, чем при нахождении в разных регионах.

#### Прочие параметры конфигурации виртуальной машины Azure

При создании виртуальной машины Azure будет предложено настроить некоторые параметры виртуальной машины. Помните, что существует несколько параметров, которые фиксируются на весь срок службы виртуальной машины, в то время как другие параметры можно изменить или добавить позднее. Просмотрите эти параметры конфигурации виртуальной машины Azure и убедитесь, что они настроены правильно в соответствии с требованиями вашей рабочей нагрузки.

## Подготовка к переносу виртуальных жестких дисков

В следующем разделе приведены инструкции по подготовке виртуальных жестких дисков из виртуальной машины к переносу. Виртуальный жесткий диск может представлять собой:

- обобщенный образ операционной системы, который может быть использован для создания нескольких виртуальных машин Azure;
- диск операционной системы, который может использоваться с экземпляром одной виртуальной машины Azure;
- диск данных, который может быть присоединен к виртуальной машине Azure для постоянного хранения.

### Предварительные требования

Чтобы перенести виртуальные машины, требуется следующее:

- Подписка Azure, учетная запись хранения и контейнер в данной учетной записи хранения для копирования вашего виртуального жесткого диска. Обратите внимание, что целевой учетной записью хранения может быть учетная запись хранения Standard или Premium в зависимости от требований.
- Средство для обобщения виртуального жесткого диска, если планируется создать из него несколько экземпляров виртуальной машины. Например, sysprep для Windows или virt-sysprep для Ubuntu.
- Средство загрузки VHD-файла в учетную запись хранения. Например, [AzCopy](storage-use-azcopy.md) или [обозреватель хранилищ Azure](http://blogs.msdn.com/b/windowsazurestorage/archive/2014/03/11/windows-azure-storage-explorers-2014.aspx). В этом руководстве описано копирование виртуального жесткого диска с помощью средства AzCopy.

> [AZURE.NOTE]Для достижения оптимальной производительности скопируйте виртуальный жесткий диск путем выполнения одного из средств виртуальной машины Azure, которая находится в одном регионе, что и целевая учетная запись хранения. При копировании виртуального жесткого диска из виртуальной машины Azure в другом регионе производительность может быть ниже.
>
> При копировании большого объема данных на фоне ограниченной пропускной способности можно использовать [службу импорта и экспорта Microsoft Azure](storage-import-export-service.md). Это позволит вам передать данные посредством доставки жестких дисков в центр обработки данных Azure. С помощью службы импорта и экспорта данных Azure можно скопировать данные только в учетную запись хранения Standard. После переноса данных в учетную запись хранения класса Standard их можно передать в учетную запись хранения Premium с помощью [API копирования BLOB-объектов](https://msdn.microsoft.com/library/azure/dd894037.aspx) или AzCopy.
>
> Обратите внимание, что Microsoft Azure поддерживает только файлы виртуальных жестких дисков фиксированного размера. VHDX-файлы или динамические виртуальные жесткие диски не поддерживаются. При наличии динамический виртуальный жесткий диск можно преобразовать в диск фиксированного размера с помощью командлета [Convert-VHD](http://technet.microsoft.com/library/hh848454.aspx).

### Сценарии подготовки виртуальных жестких дисков

Ниже рассмотрены некоторые варианты подготовки виртуальных жестких дисков.

#### Обобщенный виртуальный жесткий диск операционной системы для создания нескольких экземпляров виртуальной машины

При загрузке виртуального жесткого диска, который будет использоваться для создания нескольких экземпляров универсальной ВМ Azure, необходимо сначала произвести обобщение виртуального жесткого диска с помощью программы sysprep. Это применимо для локального или находящегося в облаке виртуального жесткого диска. Sysprep удаляет любую конкретную информацию машины с виртуального жесткого диска.

>[AZURE.IMPORTANT]Создайте моментальный снимок или резервную копию виртуальной машины перед ее обобщением. Команда sysprep удаляет экземпляр виртуальной машины. Выполните описанные ниже шаги, чтобы запустить sysprep для виртуального жесткого диска операционной системы Windows. Обратите внимание, что для запуска команды Sysprep потребуется завершить работу виртуальной машины. Дополнительные сведения о команде Sysprep см. в разделе [Обзор Sysprep](http://technet.microsoft.com/library/hh825209.aspx) или [Технический справочник по Sysprep](http://technet.microsoft.com/library/cc766049(v=ws.10).aspx).

1. Откройте окно командной строки с правами администратора.
2. Введите следующую команду, чтобы открыть Sysrep:

		%windir%\system32\sysprep\sysprep.exe

4. В средстве подготовки системы выберите «Ввод системной автоматизации OOBE», установите флажок «Обобщение», выберите **Завершение работы** и затем нажмите **ОК**, как показано на рисунке ниже. Будет выполнено обобщение операционной системы и завершение работы.

	![][1]

Для виртуальной машины Ubuntu используйте virt-sysrep для достижения этой же цели. Дополнительные сведения см. в [virt-sysprep](http://manpages.ubuntu.com/manpages/precise/man1/virt-sysprep.1.html). См. также прочее [программное обеспечение для подготовки серверов Linux](http://www.cyberciti.biz/tips/server-provisioning-software.html) с открытым кодом при использовании других операционных систем Linux.

#### Уникальный виртуальный жесткий диск операционной системы для создания одного экземпляра виртуальной машины

При наличии приложения, которое работает на виртуальной машине и для которого требуются данные конкретного компьютера, не обобщайте виртуальный жесткий диск. Необобщенный виртуальный жесткий диск может использоваться для создания уникального экземпляра виртуальной машины Azure. Например, при наличии контроллера домена на вашем виртуальном жестком диске выполнение команды sysprep сделает его неэффективным в качестве контроллера домена. Просмотрите приложения, выполняющиеся на виртуальной машине, и примените для них команду sysprep перед обобщением виртуального жесткого диска.

#### Данные на виртуальном жестком диске должны быть присоединены к экземплярам виртуальной машины

При наличии подлежащих переносу дисков с данными в облачном хранилище необходимо убедиться, что виртуальные машины, использующие эти диски данных, выключены. Для локальных дисков с данными создайте согласованный виртуальный жесткий диск.

## Скопируйте виртуальные жесткие диски в хранилище Azure

После того как виртуальный жесткий диск будет готов, выполните указанные в следующем разделе действия по загрузке диска в хранилище Azure и зарегистрируйте его как образ операционной системы, выделенный диск операционной системы или выделенный диск данных.

### Создание целевого объекта для виртуального жесткого диска

Создайте учетную запись хранения для обслуживания виртуальных жестких дисков. При планировании места хранения виртуальных жестких дисков необходимо учитывать следующие моменты.

- Целевой учетной записью хранения может быть хранилище Standard или Premium в зависимости от требований приложения.
- Расположение учетной записи хранения должно совпадать с расположением виртуальных машин Azure серии DS или GS, которые будут созданы на последнем этапе. Можно скопировать в новую учетную запись хранения или запланировать использование прежней учетной записи в зависимости от требований.
- Скопируйте и сохраните ключ целевой учетной записи хранения для следующего этапа.
- Для дисков с данными можно выбрать хранение нескольких дисков в учетной записи хранения Standard (например, для дисков с низкой температурой хранения) и нескольких дисков с высокой производительностью в учетной записи хранения Premium.

### Копирование виртуального жесткого диска из источника

Ниже описаны некоторые варианты копирования виртуального жесткого диска.

#### Копирование виртуального жесткого диска из хранилища Azure

При переносе виртуального жесткого диска из учетной записи хранения Azure Standard в учетную запись хранения Azure Premium необходимо скопировать исходный путь контейнера виртуального жесткого диска, имя файла виртуального жесткого диска и ключ исходной учетной записи хранения.

1. Выберите **Портал Azure > Виртуальные машины > Диски**.
2. Скопируйте и сохраните URL-адрес контейнера виртуального жесткого диска из столбца расположения. URL-адрес контейнера должен выглядеть так: `https://myaccount.blob.core.windows.net/mycontainer/`.

#### Копирование виртуального жесткого диска из облака, не относящегося к Azure

При переносе виртуального жесткого диска из облачного хранилища, не относящегося к Azure, в хранилище Azure необходимо сначала экспортировать виртуальный жесткий диск в локальный каталог. Скопируйте полный исходный путь к локальному каталогу, где хранится виртуальный жесткий диск.

1. При использовании AWS экспортируйте экземпляр EC2 на виртуальный жесткий диск в сегмент Amazon S3. Выполните действия, описанные в разделе [Экспорт экземпляров Amazon EC2](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ExportingEC2Instances.html), чтобы установить интерфейс командной строки (CLI) Amazon EC2. Затем выполните команду, чтобы экспортировать экземпляр EC2 в файл виртуального жесткого диска.

	При выполнении этой команды обязательно используйте **VHD** для переменной DISK&#95;IMAGE&#95;FORMAT. Экспортированный файл виртуального жесткого диска сохраняется в сегменте Amazon S3, назначенном во время этого процесса.

	![][2]

2. Загрузите VHD-файл из контейнеров S3. Выберите «Файл виртуального жесткого диска», а затем выберите **Действия** > **Загрузка**.

	![][3]|

#### Копирование виртуального жесткого диска из локальной среды

При переносе виртуального жесткого диска из локальной среды необходимо ввести исходный путь хранения виртуального жесткого диска. Это может быть адрес сервера или общей папки.

### Копирование виртуального жесткого диска с помощью AzCopy

С помощью AzCopy можно легко передать виртуальный жесткий диск через Интернет. В зависимости от размера виртуальных жестких дисков это может занять определенное время. Не забывайте проверять ограничения для исходящих и входящих данных учетной записи хранения при использовании этого параметра. Дополнительные сведения см. в статье [Целевые показатели производительности и масштабируемости службы хранилища Azure](storage-scalability-targets.md).

1. Загрузите и установите AzCopy по ссылке: [последняя версия AzCopy](http://aka.ms/downloadazcopy)
2. Откройте Azure PowerShell и перейдите в папку, где установлена AzCopy.
3. Используйте следующую команду для копирования файла виртуального жесткого диска из "Источника" в "Место назначения".

		AzCopy /Source: <source> /SourceKey: <source-account-key> /Dest: <destination> /DestKey: <dest-account-key> /BlobType:page /Pattern: <file-name>

	Ниже приведено описание параметров, используемых в команде AzCopy.

 - **/Source: *&lt;источник&gt;:*** расположение папки или URL-адрес контейнера хранения с виртуальным жестким диском.
 - **/SourceKey: *&lt;ключ\_исходной\_учетной\_записи&gt;:*** ключ исходной учетной записи хранения.
 - **/Dest: *&lt;назначение&gt;:*** URL-адрес контейнера хранилища для копирования виртуального жесткого диска.
 - **/DestKey: *&lt;ключ\_целевой\_учетной\_записи&gt;:*** ключ целевой учетной записи хранения.
 - **/BlobType: page:** указывает, что местом назначения является страничный BLOB-объект.
 - **/Pattern: *&lt;имя\_файла&gt;:*** указывает имя файла копируемого виртуального жесткого диска.

Дополнительные сведения об использовании средства AzCopy см. в разделе [Начало работы со служебной программой командной строки AzCopy](storage-use-azcopy.md).

### Копирование виртуального жесткого диска с помощью PowerShell
Вы также можете скопировать файл VHD с помощью командлета PowerShell Start-AzureStorageBlobCopy. Используйте следующую команду в Azure PowerShell, чтобы скопировать виртуальный жесткий диск: Замените значения в угловых скобках <> соответствующими значениями из исходной и целевой учетной записи хранения. Чтобы использовать эту команду, в целевой учетной записи хранения должен быть контейнер с именем vhds. Если контейнер не существует, создайте его, прежде чем выполнять команду.

    $sourceBlobUri = "https://sourceaccount.blob.core.windows.net/vhds/myvhd.vhd"
    $sourceContext = New-AzureStorageContext  –StorageAccountName <source-account> -StorageAccountKey <source-account-key>
    $destinationContext = New-AzureStorageContext  –StorageAccountName <dest-account> -StorageAccountKey <dest-account-key>
    Start-AzureStorageBlobCopy -srcUri $sourceBlobUri -SrcContext $sourceContext -DestContainer "vhds" -DestBlob "myvhd.vhd" -DestContext $destinationContext

### Другие возможности загрузки виртуального жесткого диска

Вы также можете загрузить виртуальный жесткий диск в учетную запись хранения с помощью одного из следующих средств.

- [API копирования BLOB-объекта хранилища Azure](https://msdn.microsoft.com/library/azure/dd894037.aspx)
- [Служба импорта и экспорта Azure](https://msdn.microsoft.com/library/dn529096.aspx)

>[AZURE.NOTE]Импорт и экспорт могут быть использованы только для копирования в учетную запись хранения Standard. Необходимо осуществить копирование из учетной записи хранения Standard в учетную запись хранения Premium с помощью схожего с AzCopy средства.

## Создайте виртуальные машины Azure с помощью хранилища Premium

После загрузки виртуального жесткого диска в необходимую учетную запись хранения следуйте инструкциям в данном разделе для регистрации диска в качестве образа ОС или диска ОС в зависимости от сценария и затем создайте из него экземпляр виртуальной машины. Диск данных виртуального жесткого диска можно прикрепить к виртуальной машине после ее создания.

### Регистрация виртуального жесткого диска

Для создания виртуальной машины из виртуального жесткого диска операционной системы или присоединения виртуального жесткого диска данных к новой виртуальной машине сначала их необходимо зарегистрировать. Выполните описанные ниже действия в зависимости от сценария.

#### Обобщенный виртуальный жесткий диск операционной системы для создания нескольких экземпляров виртуальной машины Azure

После загрузки обобщенного виртуального жесткого диска с образом ОС в учетную запись хранения зарегистрируйте его в качестве **образа ВМ Azure**, чтобы иметь возможность создать из него один или несколько экземпляров ВМ. Используйте следующие командлеты PowerShell для регистрации вашего виртуального жесткого диска в качестве образа ОС виртуальной машины Azure. Укажите полный URL-адрес контейнера, в который был скопирован виртуальный жесткий диск.

	Add-AzureVMImage -ImageName "OSImageName" -MediaLocation "https://storageaccount.blob.core.windows.net/vhdcontainer/osimage.vhd" -OS Windows

Скопируйте и сохраните имя этого нового образа виртуальной машины Azure. В приведенном выше примере это *OSImageName*.

#### Уникальный виртуальный жесткий диск операционной системы для создания одного экземпляра виртуальной машины Azure

После загрузки уникального виртуального жесткого диска операционной системы в учетную запись хранилища зарегистрируйте его как **диск ОС Azure**, чтобы иметь возможность создания из него экземпляра виртуальной машины. Используйте эти командлеты PowerShell для регистрации вашего виртуального жесткого диска в качестве диска операционной системы Azure. Укажите полный URL-адрес контейнера, в который был скопирован виртуальный жесткий диск.

	Add-AzureDisk -DiskName "OSDisk" -MediaLocation "https://storageaccount.blob.core.windows.net/vhdcontainer/osdisk.vhd" -Label "My OS Disk" -OS "Windows"

Скопируйте и сохраните имя этого нового образа операционной системы Azure. В приведенном выше примере это *OSDisk*.

#### Данные на виртуальном жестком диске должны быть присоединены к новым экземплярам виртуальной машины Azure

Загрузив диск данных виртуального жесткого диска в учетную запись хранения, зарегистрируйте его как диск данных Azure. Это позволит вам присоединить его к новому экземпляру виртуальной машины Azure серии DS или GS.

Используйте эти командлеты PowerShell для регистрации вашего виртуального жесткого диска в качестве диска данных Azure. Укажите полный URL-адрес контейнера, в который был скопирован виртуальный жесткий диск.

	Add-AzureDisk -DiskName "DataDisk" -MediaLocation "https://storageaccount.blob.core.windows.net/vhdcontainer/datadisk.vhd" -Label "My Data Disk"

Скопируйте и сохраните имя этого нового диска данных Azure. В приведенном выше примере это *DataDisk*.

### Создание виртуальной машины Azure серии DS

После регистрации образа ОС или диска ОС можно создать новый экземпляр виртуальной машины Azure серии DS. Будет использовано зарегистрированное имя образа или диска операционной системы. Выберите тип виртуальной машины из уровня хранилища Premium. В приведенном ниже примере мы используем размер виртуальной машины *Standard\_DS2*. Чтобы создать виртуальную машину серии GS, следуйте тем же инструкциям.

>[AZURE.NOTE]Обновите размер диска, чтобы обеспечить соответствие емкости, требований производительности и доступных размеров диска Azure.

Пошагово выполните нижеприведенные командлеты PowerShell для создания новой виртуальной машины. Сначала задайте общие параметры.

	$serviceName = "yourVM"
	$location = "location-name" (e.g., West US)
	$vmSize ="Standard_DS2"
	$adminUser = "youradmin"
	$adminPassword = "yourpassword"
	$vmName ="yourVM"
	$vmSize = "Standard_DS2"

Сначала создайте облачную службу, в которой будут размещаться новые виртуальные машины.

	New-AzureService -ServiceName $serviceName -Location $location

Затем в зависимости от сценария создайте экземпляр виртуальной машины Azure из зарегистрированного образа или диска ОС.

#### Обобщенный виртуальный жесткий диск операционной системы для создания нескольких экземпляров виртуальной машины Azure

Создайте один или несколько экземпляров виртуальной машины Azure серии DS с помощью зарегистрированного **образа ОС Azure**. Укажите имя этого образа ОС в конфигурации виртуальной машины при создании новой виртуальной машины, как показано ниже.

	$OSImage = Get-AzureVMImage –ImageName "OSImageName"

	$vm = New-AzureVMConfig -Name $vmName –InstanceSize $vmSize -ImageName $OSImage.ImageName

	Add-AzureProvisioningConfig -Windows –AdminUserName $adminUser -Password $adminPassword –VM $vm

	New-AzureVM -ServiceName $serviceName -VM $vm

#### Уникальный виртуальный жесткий диск операционной системы для создания одного экземпляра виртуальной машины Azure

Создайте новый экземпляр виртуальной машины Azure серии DS с помощью зарегистрированного **диска ОС Azure**. Укажите имя этого диска ОС в конфигурации виртуальной машины при создании новой виртуальной машины, как показано ниже.

	$OSDisk = Get-AzureDisk –DiskName "OSDisk"

	$vm = New-AzureVMConfig -Name $vmName -InstanceSize $vmSize -DiskName $OSDisk.DiskName

	New-AzureVM -ServiceName $serviceName –VM $vm

Укажите другие сведения о виртуальной машине Azure, например: облачную службу, регион, учетную запись хранения, группу доступности и политику кэширования. Обратите внимание, что экземпляр виртуальной машины должен быть связан с операционной системой или дисками данных. Следовательно, выбранная облачная служба, регион и учетная запись хранения должны находиться в том же месте, что и базовые виртуальные жесткие диски этих дисков.

### Присоединение диска данных

Наконец, зарегистрировав виртуальные жесткие диски в качестве дисков данных, присоедините их к новой виртуальной машине Azure серии DS или GS.

Используйте следующий командлет PowerShell, чтобы присоединить диск данных к новой виртуальной машине и указать политику кэширования. В примере ниже для политики кэширования установлено значение *ReadOnly*.

	$vm = Get-AzureVM -ServiceName $serviceName -Name $vmName

	Add-AzureDataDisk -ImportFrom -DiskName "DataDisk" -LUN 0 –HostCaching ReadOnly –VM $vm

	Update-AzureVM  -VM $vm

>[AZURE.NOTE]Для поддержки приложений могут потребоваться конкретные действия, не описанные в данном руководстве.

## Перенос существующих виртуальных машин Azure в хранилище Azure класса Premium

Если у вас есть виртуальная машина Azure, использующая диски хранилища класса Standard, выполните приведенные далее инструкции, чтобы перенести ее в хранилище класса Premium. Если в общих чертах, то перенос состоит из двух этапов: 1) перенос дисков из учетной записи хранения класса Standard в учетную запись хранения класса Premium; 2) преобразование размеров виртуальной машины из A, D и G в размеры DS или GS, необходимые для использования дисков хранилища класса Premium.

Также обратитесь к предыдущему разделу «Рекомендации», чтобы узнать, как оптимизировать приложения для использования с хранилищем класса Premium. В зависимости от методов оптимизации, применимых к вашим приложениям, процесс переноса может выполняться по одному из следующих сценариев переноса.

### Простой перенос
В этом простом сценарии вам нужно сохранить существующую конфигурацию во время переноса из хранилища класса Standard в хранилище класса Premium. Вы перемещаете каждый диск, а затем преобразовываете виртуальную машину. Преимуществом этого подхода является простота переноса. Недостатком является то, что полученную конфигурацию нельзя будет оптимизировать для минимизации затрат.

#### Подготовка
1. Убедитесь, что хранилище класса Premium доступно в регионе, в который вы переносите виртуальную машину.
2. Определите серию виртуальной машины, которую вы будете использовать. В зависимости от доступности в регионе и своих потребностей вы можете выбрать серию DS или GS.
3. Определите точный размер виртуальной машины, которую вы будете использовать. Размер виртуальной машины должен быть достаточно большим, чтобы поддерживать количество дисков данных, которые вы используете. Например, если вы используете 4 диска данных, виртуальная машина должна иметь минимум 2 ядра. Также учитывайте свои требования к вычислительной мощности, памяти и пропускной способности сети.
4. Создайте учетную запись хранения класса Premium в целевом регионе. Эту учетную запись вы будете использовать для новой виртуальной машины.
5. Держите сведения о текущей виртуальной машине под рукой, в том числе список дисков и соответствующих BLOB-объектов виртуальных жестких дисков.
6. Подготовьте приложение к простою. Чтобы выполнить чистый перенос, необходимо остановить все процессы, выполняющиеся в текущей системе. Только так вы получите стабильное состояние, которое можно перенести на новую платформу. Длительность простоя будет зависеть от объема данных на дисках для переноса.

#### Шаги выполнения
1.	Остановите виртуальную машину. Как упоминалось выше, виртуальная машина должна быть полностью выключена для перехода в исходное состояние. Простой будет длиться до завершения переноса.

2.	Когда виртуальная машина будет остановлена, скопируйте каждый виртуальный жесткий диск этой виртуальной машины в новую учетную запись хранения класса Premium. Необходимо скопировать BLOB-объект виртуального жесткого диска операционной системы, а также BLOB-объекты виртуального жесткого диска со всеми данными. Мы рекомендуем использовать для переноса средство AzCopy или CopyBlob. При желании можно использовать инструменты сторонних поставщиков.

  Информацию о командах см. в предыдущих разделах [Копирование виртуального жесткого диска с помощью AzCopy](#copy-a-vhd-with-azcopy) или [Копирование виртуального жесткого диска с помощью PowerShell](#copy-a-vhd-with-powershell).

3.	Убедитесь, что копирование завершено. Подождите, пока все диски будут скопированы. После того как все диски будут скопированы, вы сможете перейти к дальнейшим действиям, чтобы создать новую виртуальную машину.
4.	Создайте новый диск операционной системы с помощью BLOB-объекта виртуального жесткого диска ОС, скопированного в учетную запись хранения класса Premium. Это можно сделать с помощью следующего командлета PowerShell: Add-AzureDisk.

    Образец скрипта: Add-AzureDisk -DiskName "NewOSDisk1" -MediaLocation "https://newpremiumstorageaccount.blob.core.windows.net/vhds/MyOSDisk.vhd" -OS "Windows"
5. Создайте виртуальную машину серии DS (или серии GS), используя упомянутые выше диск ОС и диски данных.

    Образец скрипта для создания новой облачной службы и новой виртуальной машины в этой службе: New-AzureService -ServiceName "NewServiceName" -Location "East US 2"

        New-AzureVMConfig -Name "NewDSVMName" -InstanceSize "Standard_DS2" -DiskName "NewOSDisk1" | Add-AzureProvisioningConfig -Windows | Add-AzureDataDisk -LUN 0 -DiskLabel "DataDisk1" -ImportFrom -MediaLocation "https://newpremiumstorageaccount.blob.core.windows.net/vhds/Disk1.vhd" | Add-AzureDataDisk -LUN 1 -DiskLabel "DataDisk2" -ImportFrom -MediaLocation https://newpremiumstorageaccount.blob.core.windows.net/vhds/Disk2.vhd | New-AzureVM -ServiceName "NewServiceName" –Location “East US 2”

6.	После запуска новой виртуальной машины войдите на нее, используя идентификатор входа и пароль исходной виртуальной машины, и убедитесь, что все работает правильно. Все параметры, включая чередующиеся тома, будут присутствовать в новой виртуальной машине.

7.	Последним шагом является планирование резервного копирования и расписания обслуживания для новой виртуальной машины в соответствии с требованиями приложения.

### Автоматизация
Автоматизировать перенос нескольких виртуальных машин можно с помощью сценариев PowerShell. Ниже приведен пример сценария, который автоматизирует процесс переноса виртуальной машины. Обратите внимание, что этот сценарий является примером, что предполагает некоторые допущения в отношении дисков текущей виртуальной машины. Вам может понадобиться обновить скрипт в соответствии с ситуацией.

    <#
    .Synopsis
    This script is provided as an EXAMPLE to show how to migrate a vm from a standard storage account to a premium storage account. You can customize it according to your specific requirements.

    .Description
    The script will copy the vhds (page blobs) of the source vm to the new storage account.
    And then it will create a new vm from these copied vhds based on the inputs that you specified for the new VM.
    You can modify the script to satisfy your specific requirement but please be aware of the items specified
    in the Terms of Use section.

    .Terms of Use
    Copyright © 2015 Microsoft Corporation.  All rights reserved.

    THIS CODE AND ANY ASSOCIATED INFORMATION ARE PROVIDED “AS IS” WITHOUT WARRANTY OF ANY KIND,
    EITHER EXPRESSED OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE IMPLIED WARRANTIES OF MERCHANTABILITY
    AND/OR FITNESS FOR A PARTICULAR PURPOSE. THE ENTIRE RISK OF USE, INABILITY TO USE, OR
    RESULTS FROM THE USE OF THIS CODE REMAINS WITH THE USER.

    .Example (Save this script as Migrate-AzureVM.ps1)

    .\Migrate-AzureVM.ps1 -SourceServiceName CurrentServiceName -SourceVMName CurrentVMName –DestStorageAccount newpremiumstorageaccount -DestServiceName NewServiceName -DestVMName NewDSVMName -DestVMSize "Standard_DS2" –Location “Southeast Asia”

    .Link
    To find more information about how to set up Azure PowerShell, refer to the following links.
    http://azure.microsoft.com/documentation/articles/powershell-install-configure/
    http://azure.microsoft.com/documentation/articles/storage-powershell-guide-full/
    http://azure.microsoft.com/blog/2014/10/22/migrate-azure-virtual-machines-between-storage-accounts/

    #>

    Param(
    # the cloud service name of the VM.
    [Parameter(Mandatory = $true)]
    [string] $SourceServiceName,

    # The VM name to copy.
    [Parameter(Mandatory = $true)]
    [String] $SourceVMName,

    # The destination storage account name.
    [Parameter(Mandatory = $true)]
    [String] $DestStorageAccount,

    # The destination cloud service name
    [Parameter(Mandatory = $true)]
    [String] $DestServiceName,

    # the destination vm name
    [Parameter(Mandatory = $true)]
    [String] $DestVMName,

    # the destination vm size
    [Parameter(Mandatory = $true)]
    [String] $DestVMSize,

    # the location of destination VM.
    [Parameter(Mandatory = $true)]
    [string] $Location,

    # whether or not to copy the os disk, the default is only copy data disks
    [Parameter(Mandatory = $false)]
    [String] $DataDiskOnly = $true,

    # how frequently to report the copy status in sceconds
    [Parameter(Mandatory = $false)]
    [Int32] $CopyStatusReportInterval = 15,

    # the name suffix to add to new created disks to avoid conflict with source disk names
    [Parameter(Mandatory = $false)]
    [String]$DiskNameSuffix = "-prem"

    ) #end param

    #######################################################################
    #  Verify Azure PowerShell module and version
    #######################################################################

    #import the Azure PowerShell module
    Write-Host "`n[WORKITEM] - Importing Azure PowerShell module" -ForegroundColor Yellow
    $azureModule = Import-Module Azure -PassThru

    if ($azureModule -ne $null)
    {
        Write-Host "`tSuccess" -ForegroundColor Green
    }
    else
    {
        #show module not found interaction and bail out
        Write-Host "[ERROR] - PowerShell module not found. Exiting." -ForegroundColor Red
        Exit
    }


    #Check the Azure PowerShell module version
    Write-Host "`n[WORKITEM] - Checking Azure PowerShell module verion" -ForegroundColor Yellow
    If ($azureModule.Version -ge (New-Object System.Version -ArgumentList "0.8.14"))
    {
        Write-Host "`tSuccess" -ForegroundColor Green
    }
    Else
    {
        Write-Host "[ERROR] - Azure PowerShell module must be version 0.8.14 or higher. Exiting." -ForegroundColor Red
        Exit
    }

    #Check if there is an azure subscription set up in PowerShell
    Write-Host "`n[WORKITEM] - Checking Azure Subscription" -ForegroundColor Yellow
    $currentSubs = Get-AzureSubscription -Current
    if ($currentSubs -ne $null)
    {
        Write-Host "`tSuccess" -ForegroundColor Green
        Write-Host "`tYour current azure subscription in PowerShell is $($currentSubs.SubscriptionName)." -ForegroundColor Green
    }
    else
    {
        Write-Host "[ERROR] - There is no valid azure subscription found in PowerShell. Please refer to this article http://azure.microsoft.com/documentation/articles/powershell-install-configure/ to connect an azure subscription. Exiting." -ForegroundColor Red
        Exit
    }


    #######################################################################
    #  Check if the VM is shut down
    #  Stopping the VM is a required step so that the file system is consistent when you do the copy operation.
    #  Azure does not support live migration at this time..
    #######################################################################

    if (($sourceVM = Get-AzureVM –ServiceName $SourceServiceName –Name $SourceVMName) -eq $null)
    {
        Write-Host "[ERROR] - The source VM doesn't exist in the current subscription. Exiting." -ForegroundColor Red
        Exit
    }

    # check if VM is shut down
    if ( $sourceVM.Status -notmatch "Stopped" )
    {
        Write-Host "[Warning] - Stopping the VM is a required step so that the file system is consistent when you do the copy operation. Azure does not support live migration at this time. If you’d like to create a VM from a generalized image, sys-prep the Virtual Machine before stopping it." -ForegroundColor Yellow
        $ContinueAnswer = Read-Host "`n`tDo you wish to stop $SourceVMName now? Input 'N' if you want to shut down the vm mannually and come back later.(Y/N)"
        If ($ContinueAnswer -ne "Y") { Write-Host "`n Exiting." -ForegroundColor Red;Exit }
        $sourceVM | Stop-AzureVM

        # wait until the VM is shut down
        $VMStatus = (Get-AzureVM –ServiceName $SourceServiceName –Name $vmName).Status
        while ($VMStatus -notmatch "Stopped")
        {
            Write-Host "`n[Status] - Waiting VM $vmName to shut down" -ForegroundColor Green
            Sleep -Seconds 5
            $VMStatus = (Get-AzureVM –ServiceName $SourceServiceName –Name $vmName).Status
        }
    }

    # exporting the sourve vm to a configuration file, you can restore the original VM by importing this config file
    # see more information for Import-AzureVM
    $workingDir = (Get-Location).Path
    $vmConfigurationPath = $env:HOMEPATH + "\VM-" + $SourceVMName + ".xml"
    Write-Host "`n[WORKITEM] - Exporting VM configuration to $vmConfigurationPath" -ForegroundColor Yellow
    $exportRe = $sourceVM | Export-AzureVM -Path $vmConfigurationPath


    #######################################################################
    #  Copy the vhds of the source vm
    #  You can choose to copy all disks including os and data disks by specifying the
    #  parameter -DataDiskOnly to be $false. The default is to copy only data disk vhds
    #  and the new VM will boot from the original os disk.
    #######################################################################

    $sourceOSDisk = $sourceVM.VM.OSVirtualHardDisk
    $sourceDataDisks = $sourceVM.VM.DataVirtualHardDisks

    # Get source storage account information, not considering the data disks and os disks are in different accounts
    $sourceStorageAccountName = $sourceOSDisk.MediaLink.Host -split "\." | select -First 1
    $sourceStorageKey = (Get-AzureStorageKey -StorageAccountName $sourceStorageAccountName).Primary
    $sourceContext = New-AzureStorageContext –StorageAccountName $sourceStorageAccountName -StorageAccountKey $sourceStorageKey

    # Create destination context
    $destStorageKey = (Get-AzureStorageKey -StorageAccountName $DestStorageAccount).Primary
    $destContext = New-AzureStorageContext –StorageAccountName $DestStorageAccount -StorageAccountKey $destStorageKey

    # Create a container of vhds if it doesn't exist
    if ((Get-AzureStorageContainer -Context $destContext -Name vhds -ErrorAction SilentlyContinue) -eq $null)
    {
        Write-Host "`n[WORKITEM] - Creating a container vhds in the destination storage account." -ForegroundColor Yellow
        New-AzureStorageContainer -Context $destContext -Name vhds
    }


    $allDisksToCopy = $sourceDataDisks
    # check if need to copy os disk
    $sourceOSVHD = $sourceOSDisk.MediaLink.Segments[2]
    if ($DataDiskOnly)
    {
        # copy data disks only, this option requires to delete the source VM so that dest VM can boot
        # from the same vhd blob.
        $ContinueAnswer = Read-Host "`n`tMoving VM requires to remove the original VM (the disks and backing vhd files will NOT be deleted) so that the new VM can boot from the same vhd. Do you wish to proceed right now? (Y/N)"
        If ($ContinueAnswer -ne "Y") { Write-Host "`n Exiting." -ForegroundColor Red;Exit }
        $destOSVHD = Get-AzureStorageBlob -Blob $sourceOSVHD -Container vhds -Context $sourceContext
        Write-Host "`n[WORKITEM] - Removing the original VM (the vhd files are NOT deleted)." -ForegroundColor Yellow
        Remove-AzureVM -Name $SourceVMName -ServiceName $SourceServiceName

        Write-Host "`n[WORKITEM] - Waiting utill the OS disk is released by source VM. This may take up to several minutes."
        $diskAttachedTo = (Get-AzureDisk -DiskName $sourceOSDisk.DiskName).AttachedTo
        while ($diskAttachedTo -ne $null)
        {
    	    Start-Sleep -Seconds 10
    	    $diskAttachedTo = (Get-AzureDisk -DiskName $sourceOSDisk.DiskName).AttachedTo
        }

    }
    else
    {
        # copy the os disk vhd
        Write-Host "`n[WORKITEM] - Starting copying os disk $($disk.DiskName) at $(get-date)." -ForegroundColor Yellow
        $allDisksToCopy += @($sourceOSDisk)
        $targetBlob = Start-AzureStorageBlobCopy -SrcContainer vhds -SrcBlob $sourceOSVHD -DestContainer vhds -DestBlob $sourceOSVHD -Context $sourceContext -DestContext $destContext -Force
        $destOSVHD = $targetBlob
    }


    # Copy all data disk vhds
    # Start all async copy requests in parallel.
    foreach($disk in $sourceDataDisks)
    {
        $blobName = $disk.MediaLink.Segments[2]
        # copy all data disks
        Write-Host "`n[WORKITEM] - Starting copying data disk $($disk.DiskName) at $(get-date)." -ForegroundColor Yellow
        $targetBlob = Start-AzureStorageBlobCopy -SrcContainer vhds -SrcBlob $blobName -DestContainer vhds -DestBlob $blobName -Context $sourceContext -DestContext $destContext -Force
        # update the media link to point to the target blob link
        $disk.MediaLink = $targetBlob.ICloudBlob.Uri.AbsoluteUri
    }

    # Wait until all vhd files are copied.
    $diskComplete = @()
    do
    {
        Write-Host "`n[WORKITEM] - Waiting for all disk copy to complete. Checking status every $CopyStatusReportInterval seconds." -ForegroundColor Yellow
        # check status every 30 seconds
        Sleep -Seconds $CopyStatusReportInterval
        foreach ( $disk in $allDisksToCopy)
        {
            if ($diskComplete -contains $disk)
            {
                Continue
            }
            $blobName = $disk.MediaLink.Segments[2]
            $copyState = Get-AzureStorageBlobCopyState -Blob $blobName -Container vhds -Context $destContext
            if ($copyState.Status -eq "Success")
            {
                Write-Host "`n[Status] - Success for disk copy $($disk.DiskName) at $($copyState.CompletionTime)" -ForegroundColor Green
                $diskComplete += $disk
            }
            else
            {
                if ($copyState.TotalBytes -gt 0)
                {
                    $percent = ($copyState.BytesCopied / $copyState.TotalBytes) * 100
                    Write-Host "`n[Status] - $('{0:N2}' -f $percent)% Complete for disk copy $($disk.DiskName)" -ForegroundColor Green
                }
            }
        }
    }
    while($diskComplete.Count -lt $allDisksToCopy.Count)

    #######################################################################
    #  Create a new vm
    #  the new VM can be created from the copied disks or the original os disk.
    #  You can ddd your own logic here to satisfy your specific requirements of the vm.
    #######################################################################

    # Create a vm from the existing os disk
    if ($DataDiskOnly)
    {
        $vm = New-AzureVMConfig -Name $DestVMName -InstanceSize $DestVMSize -DiskName $sourceOSDisk.DiskName
    }
    else
    {
        $newOSDisk = Add-AzureDisk -OS $sourceOSDisk.OS -DiskName ($sourceOSDisk.DiskName + $DiskNameSuffix) -MediaLocation $destOSVHD.ICloudBlob.Uri.AbsoluteUri
        $vm = New-AzureVMConfig -Name $DestVMName -InstanceSize $DestVMSize -DiskName $newOSDisk.DiskName
    }
    # Attached the copied data disks to the new VM
    foreach ($dataDisk in $sourceDataDisks)
    {
        # add -DiskLabel $dataDisk.DiskLabel if there are labels for disks of the source vm
        $diskLabel = "drive" + $dataDisk.Lun
        $vm | Add-AzureDataDisk -ImportFrom -DiskLabel $diskLabel -LUN $dataDisk.Lun -MediaLocation $dataDisk.MediaLink
    }

    # Edit this if you want to add more custimization to the new VM
    # $vm | Add-AzureEndpoint -Protocol tcp -LocalPort 443 -PublicPort 443 -Name 'HTTPs'
    # $vm | Set-AzureSubnet "PubSubnet","PrivSubnet"

    New-AzureVM -ServiceName $DestServiceName -VMs $vm -Location $Location

### Оптимизация
Конфигурацию текущей виртуальной машины можно настроить для правильной работы с дисками хранилища класса Standard. Например, можно повысить производительность, используя несколько дисков в чередующемся томе. Поскольку диски хранилища класса Premium обеспечивают лучшую производительность, вы можете оптимизировать затраты за счет сокращения количества дисков. Например, приложению может потребоваться том, выполняющий 2000 операций ввода-вывода в секунду. Вы можете использовать чередующийся набор из 4 дисков хранилища класса Standard: 4 x 500 = 2000 операций ввода-вывода в секунду. Наличие в хранилище класса Premium одного диска размером 512 ГБ обеспечит выполнение 2300 операций ввода-вывода в секунду. Таким образом, вместо 4 отдельных дисков вы можете использовать в хранилище класса Premium один диск, чтобы оптимизировать затраты. Такие процессы оптимизации необходимо применять в индивидуальном порядке. Кроме того, эти операции требуют выполнения пользовательских действий после переноса. Также обратите внимание, что такая оптимизация может быть полезной для баз данных и приложений, которые зависят от разметки диска, определенной во время установки.

#### Подготовка
1.	Выполните простой перенос, как описано в предыдущем разделе. Оптимизация будет выполняться на новой виртуальной машине после переноса.
2.	Для создания оптимальной конфигурации необходимо определить размеры новых дисков.
3.	Определите сопоставление текущих дисков и томов со спецификациям нового диска.

#### Шаги выполнения
1.	Создайте новые диски нужного размера на виртуальной машине хранилища класса Premium.
2.	Войдите на виртуальную машину и скопируйте данные из текущего тома на новый диск, который сопоставлен с этим томом. Сделайте это для всех текущих томов, которые необходимо сопоставить с новым диском.
3.	Затем измените параметры приложения, чтобы переключиться на новые диски, и отключите старые тома.

###  Перенос приложений
Перенос баз данных и других сложных приложений может потребовать выполнения специальных действий, которые определяет поставщик приложений. См. документацию по соответствующему приложению. Например, обычно базы данных можно переносить путем резервного копирования и восстановления.

## Дальнейшие действия

Ознакомьтесь со следующими ресурсами для конкретных сценариев переноса виртуальных машин.

- [Перенос виртуальных машин Azure между учетными записями хранения.](http://azure.microsoft.com/blog/2014/10/22/migrate-azure-virtual-machines-between-storage-accounts/)
- [Создание и загрузка виртуального жесткого диска Windows Server в Azure.](../virtual-machines-create-upload-vhd-windows-server.md)
- [Создание и загрузка виртуального жесткого диска, содержащего операционную систему Linux.](../virtual-machines-linux-create-upload-vhd.md)
- [Перенос виртуальных машин из Amazon AWS в Microsoft Azure.](http://channel9.msdn.com/Series/Migrating-Virtual-Machines-from-Amazon-AWS-to-Microsoft-Azure)

Кроме того, см. следующие ресурсы для получения дополнительных сведений о хранилище Azure и виртуальных машинах Azure:

- [Хранилище Azure](http://azure.microsoft.com/documentation/services/storage/)
- [Виртуальные машины Azure](http://azure.microsoft.com/documentation/services/virtual-machines/)
- [Хранилище Premium: высокопроизводительное хранилище для рабочих нагрузок виртуальной машины Azure](storage-premium-storage-preview-portal.md)

[1]: ./media/storage-migration-to-premium-storage/migration-to-premium-storage-1.png
[2]: ./media/storage-migration-to-premium-storage/migration-to-premium-storage-1.png
[3]: ./media/storage-migration-to-premium-storage/migration-to-premium-storage-3.png

<!---HONumber=Oct15_HO3-->