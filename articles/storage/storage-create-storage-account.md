<properties
	pageTitle="Создание и удаление учетной записи хранения, а также управление ею на портале Azure | Microsoft Azure"
	description="Создание учетной записи хранения, управление ключами доступа к учетной записи и удаление учетной записи хранения на портале Azure. Дополнительные сведения об учетных записях хранения класса Standard и Premium."
	services="storage"
	documentationCenter=""
	authors="robinsh"
	manager="carmonm"
	editor="tysonn"/>

<tags
	ms.service="storage"
	ms.workload="storage"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="get-started-article"
	ms.date="02/14/2016"
	ms.author="robinsh"/>


# Об учетных записях хранения Azure

[AZURE.INCLUDE [storage-selector-portal-create-storage-account](../../includes/storage-selector-portal-create-storage-account.md)]

## Обзор

Учетная запись хранения Azure предоставляет доступ к службам больших двоичных объектов, очередей, таблиц и файлов в службе хранилища Azure. Учетная запись хранения предоставляет уникальное пространство имен для ваших объектов данных в службе хранилища Azure. По умолчанию данные в учетной записи доступны только владельцу учетной записи.

Существует два типа учетных записей хранения:

- Стандартная учетная запись хранения включает в себя хранилище для больших двоичных объектов, таблиц, очередей и файлов.
- Учетная запись хранения класса Premium в настоящее время поддерживает только диски виртуальных машин Azure. Подробный обзор хранилища класса Premium см. в статье [Хранилище Premium: высокопроизводительное хранилище для рабочих нагрузок виртуальных машин Azure](storage-premium-storage.md).

## Выставление счетов за использование учетной записи хранения

За пользование услугами службы хранилища Azure вам будет выставлен счет согласно вашей учетной записи хранения. Затраты на хранение основываются на четырех факторах: емкость хранилища, схема репликации, транзакции хранилища и передача данных.

- Объем хранилища определяет, какая часть выделенного объема учетной записи хранения используется для хранения данных. Стоимость простого хранения данных определяется в зависимости от объема хранящихся данных и способа их репликации.
- Репликация определяет, какое количество копий ваших данных следует хранить и где.
- Транзакции — это все операции чтения и записи в службе хранилища Azure.
- Передача данных означает данные, переданные из региона Azure. Когда к данным вашей учетной записи хранения обращается приложение, выполняемое в другом регионе, то независимо от типа приложения (облачная служба или приложение другого типа) вам начисляется плата за исходящие данные. (Для служб Azure можно сгруппировать данные и службы в одном центре обработки данных, чтобы уменьшить или исключить плату за передачу данных.)  

На странице [Цены на хранилища Azure](https://azure.microsoft.com/pricing/details/storage) представлена подробная информация о ценах на объемы хранилища, репликацию и транзакции. Подробные сведения о стоимости передачи данных см. на странице [Сведения о ценах — передача данных](https://azure.microsoft.com/pricing/details/data-transfers/).

Дополнительную информацию о емкости и пропускной способности учетной записи хранения см. в разделе [Целевые показатели масштабируемости и производительности службы хранилища Azure](storage-scalability-targets.md).

> [AZURE.NOTE] При работе с виртуальной машиной Azure учетная запись хранения создается автоматически в месте развертывания, если в этом расположении еще нет учетной записи хранения. Таким образом нет необходимости выполнять описанные ниже шаги для создания учетной записи хранения для дисков вашей виртуальной машины. Имя учетной записи хранения основывается на имени виртуальной машины. Дополнительную информацию см. в статье [Документация по виртуальным машинам Azure](https://azure.microsoft.com/documentation/services/virtual-machines/).

## Конечные точки учетной записи хранения

Каждый объект, который хранится в службе хранилища Azure, имеет уникальный URL-адрес. Имя учетной записи хранения образует поддомен этого адреса. Имя поддомена и доменное имя, уникальное для каждой службы, вместе образуют *конечную точку* учетной записи хранения.

Например, если учетная запись хранения имеет имя *mystorageaccount*, конечной точкой для учетной записи хранения будет:

- Служба BLOB-объектов: http://*mystorageaccount*.blob.core.windows.net

- Служба таблиц: http://*mystorageaccount*.table.core.windows.net

- Служба очередей: http://*mystorageaccount*.queue.core.windows.net

- Служба файлов: http://*mystorageaccount*.file.core.windows.net

URL-адрес для доступа к объекту в учетной записи хранения строится путем добавления местоположения объекта в учетной записи хранения к конечной точке. Например, адрес большого двоичного объекта может иметь следующий формат: http://*mystorageaccount*.blob.core.windows.net/*mycontainer*/*myblob*.

Для своей учетной записи хранения вы можете настроить имя домена. Подробные сведения о классических учетных записях хранения см. в статье [Настройка пользовательского доменного имени для конечной точки хранилища BLOB-объектов](storage-custom-domain-name.md). Если вы работаете с учетными записями хранения ARM, эта возможность еще не добавлена на [портал Azure](https://portal.azure.com), но ее можно настроить с помощью PowerShell. Дополнительные сведения см. на странице, посвященной командлету [Set-AzureRmStorageAccount](https://msdn.microsoft.com/library/mt607146.aspx).

## Создайте учетную запись хранения.

1. Войдите на [портал Azure](https://portal.azure.com).

2. В меню концентратора выберите **Создать** -> **Данные + хранилище** -> **Учетная запись хранения**.

3. Выберите имя для своей учетной записи хранения.

	> [AZURE.NOTE] Имя учетной записи хранения должно содержать от 3 до 24 символов и состоять только из цифр и строчных букв.
	>  
	> Имя учетной записи хранения должно быть уникальным в Azure. Портал Azure сообщит, если выбранное имя учетной записи хранения уже используется.

	Сведения об использовании имени учетной записи хранения для доступа к объектам в службе хранилища Azure см. в разделе [Конечные точки учетной записи хранения](#storage-account-endpoints) ниже.

4. Укажите модель развертывания: **Resource Manager** или **классическая**. Мы рекомендуем использовать **диспетчер ресурсов**. Подробнее об этих моделях можно узнать в статье [Общие сведения о развертывании диспетчера ресурсов и классическом развертывании](../resource-manager-deployment-model.md).

5. Укажите уровень производительности для учетной записи хранилища: **Стандартный** или **Premium**. Значение по умолчанию — **Стандартный**. Дополнительные сведения об учетных записях хранения в стандартном хранилище и хранилище класса Premium см. в статьях [Знакомство со службой хранилища Microsoft Azure](storage-introduction.md) и [Хранилище Premium: высокопроизводительное хранилище для рабочих нагрузок виртуальных машин Azure](storage-premium-storage.md).

6. Выберите вариант репликации для учетной записи хранения: **LRS**, **GRS**, **RA-GRS** или **ZRS**. Значение по умолчанию — **RA-GRS**. Дополнительные сведения о репликации службы хранилища Azure см. в статье [Репликация службы хранилища Azure](storage-redundancy.md).

7. Выберите подписку, в которой вы создаете учетную запись хранения.

8. Выберите существующую группу ресурсов или создайте новую. Дополнительные сведения о группах ресурсов Azure см. в статье [Развертывание ресурсов Azure и управление ими с помощью портала Azure](../azure-portal/resource-group-portal.md).

9. Выберите географический регион для учетной записи хранения.

10. Щелкните **Создать**, чтобы создать учетную запись хранения.

## Управление учетной записью хранения

### Изменение конфигурации учетной записи

После создания учетной записи хранения вы можете изменить ее конфигурацию. Например, можно изменить вариант репликации учетной записи. На портале Azure перейдите к учетной записи хранения, откройте раздел **Все параметры**, выберите элемент **Конфигурация**, чтобы просмотреть или изменить конфигурацию учетной записи. Изменение варианта репликации повлияет на цену.

> [AZURE.NOTE] В зависимости от уровня производительности, который вы выбрали во время создания учетной записи хранения, некоторые варианты репликации могут быть недоступными.

### Управление ключами доступа к хранилищу

При создании учетной записи хранения Azure создает два 512-битных кода доступа к хранилищу, которые используются для проверки подлинности при доступе к учетной записи хранения. Предоставляя два ключа доступа к хранилищу, Azure позволяет повторно создавать ключи без прерывания предоставления службы хранилища или доступа к этой службе.

> [AZURE.NOTE] Рекомендуем никому не сообщать свои ключи доступа к хранилищу. Чтобы предоставить доступ к ресурсам хранилища. не сообщая свои ключи доступа, можно использовать *подпись коллективного доступа*. Подпись коллективного доступа обеспечивает доступ к ресурсам вашей учетной записи на срок и с разрешениями, которые вы сами определяете. Дополнительные сведения см. в статье [Подписанные URL-адреса. Часть 1: общие сведения о модели SAS](storage-dotnet-shared-access-signature-part-1.md).

#### Просмотр и копирование ключей доступа к хранилищу

На [портале Azure](https://portal.azure.com) перейдите к своей учетной записи хранения, щелкните последовательно **Все параметры** и **Ключи доступа**, чтобы просмотреть, скопировать или заново создать ключи доступа к учетной записи. Колонка **Ключи доступа** также содержит предварительно настроенные строки подключения, в которых используются первичный и вторичный ключи. Вы можете скопировать эти строки и использовать в своих приложениях.

#### Повторное создание ключей доступа к хранилищу

Мы рекомендуем периодически изменять ключи доступа к учетной записи хранения, чтобы обеспечить безопасность при подключении к хранилищу. Назначаются два ключа доступа, которые позволяют обслуживать подключения к учетной записи хранения с помощью одного ключа доступа во время переназначения другого.

> [AZURE.WARNING] Повторное создание ключей доступа влияет на виртуальные машины, службы мультимедиа и любые приложения, которые зависят от учетной записи хранения. Все клиенты, использующие ключ доступа к учетной записи хранения, должны быть обновлены для использования нового ключа.

**Виртуальные машины** Если учетная запись хранения содержит какие-либо работающие виртуальные машины, необходимо будет повторно развернуть все виртуальные машины после повторного создания ключей доступа. Чтобы избежать повторного развертывания, завершите работу виртуальных машин, прежде чем повторно создавать ключи доступа.

**Службы мультимедиа**. Если у вас есть службы мультимедиа, которые зависят от учетной записи хранения, повторно созданные ключи доступа необходимо еще раз синхронизировать со службой мультимедиа.

**Приложения**. Если у вас есть веб-приложения или облачные службы, использующие учетную запись хранения, повторно созданные ключи необходимо обновить, иначе подключения будут разорваны.

Далее описан полный процесс смены ключей доступа.

1. Обновите строки подключения в коде приложения, чтобы ссылаться на дополнительный ключ доступа учетной записи хранения.

2. Повторное создание основного ключа доступа для вашей учетной записи хранения. В колонке **Ключи доступа** щелкните **Повторно создать ключ 1**, а затем нажмите кнопку **Да**, чтобы подтвердить создание ключа.

3. Обновите строки подключения в коде, чтобы они ссылались на новый основной ключ доступа.

4. Повторите процедуру, чтобы повторно создать вторичный ключ доступа.

## Удаление учетной записи хранения

Чтобы удалить учетную запись хранения, которая больше не используется, перейдите к ней на [портале Azure](https://portal.azure.com) и нажмите кнопку **Удалить**. При удалении учетной записи хранения будет удалена вся связанная с ней информация, в том числе все хранящиеся в ней данные.

> [AZURE.WARNING] Восстановить удаленную учетную запись хранения или ее содержимое невозможно. Создайте резервные копии нужных данных, прежде чем удалять учетную запись. Это касается также любых ресурсов в учетной записи. Восстановить удаленный BLOB-объект, таблицу, очередь или файл невозможно.

Чтобы удалить учетную запись хранения, которая связана с виртуальной машиной Azure, сначала убедитесь, что все диски виртуальной машины удалены. Если вы не удалите диски виртуальной машины, а сразу попытаетесь удалить учетную запись хранения, вы увидите сообщение об ошибке следующего содержания:

    Failed to delete storage account <vm-storage-account-name>. Unable to delete storage account <vm-storage-account-name>: 'Storage account <vm-storage-account-name> has some active image(s) and/or disk(s). Ensure these image(s) and/or disk(s) are removed before deleting this storage account.'.

Если для учетной записи хранения используется классическая модель развертывания, можно удалить диск виртуальной машины, выполнив следующие действия на [портале Azure](https://manage.windowsazure.com).

1. Перейдите на [классический портал](https://manage.windowsazure.com).
2. Перейдите на вкладку "Виртуальные машины".
3. Перейдите на вкладку "Диски".
4. Выберите диск данных, а затем нажмите кнопку "Удалить диск".
5. Чтобы удалить образы дисков, перейдите на вкладку "Образы" и удалите все образы, содержащиеся в учетной записи.

Дополнительные сведения см. в [документации по виртуальным машинам Azure](http://azure.microsoft.com/documentation/services/virtual-machines/).

## Дальнейшие действия

- [Репликация службы хранилища Azure](storage-redundancy.md)
- [Настройка строк подключения службы хранилища Azure](storage-configure-connection-string.md)
- [Приступая к работе со служебной программой командной строки AzCopy](storage-use-azcopy.md)
- Посетите [блог команды разработчиков хранилища Azure](http://blogs.msdn.com/b/windowsazurestorage/).

<!---HONumber=AcomDC_0406_2016-->