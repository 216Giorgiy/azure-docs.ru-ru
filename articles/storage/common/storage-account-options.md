---
title: Варианты учетной записи хранения Azure | Документы Майкрософт
description: Основные сведения о вариантах использования службы хранилища Azure.
services: storage
author: xyh1
manager: jwillis
ms.service: storage
ms.workload: storage
ms.topic: get-started-article
ms.date: 07/03/2018
ms.author: hux
ms.openlocfilehash: 6efc50bfee54c38511fb3346f1341f81741d14eb
ms.sourcegitcommit: 86cb3855e1368e5a74f21fdd71684c78a1f907ac
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/03/2018
ms.locfileid: "37445435"
---
# <a name="azure-storage-account-options"></a>Варианты учетной записи хранения Azure

## <a name="overview"></a>Обзор
Служба хранилища Azure предоставляет три варианта учетной записи с разными ценами и поддерживаемыми возможностями. Прежде чем создавать учетную запись хранения, рассмотрите эти различия, чтобы определить подходящий для ваших приложений вариант. Ниже приведены три различных варианта:

* Учетные записи **общего назначения версии 2 (GPv2)** 
* Учетные записи **общего назначения версии 1(GPv1)**
* Учетные записи **хранилища BLOB-объектов**

Каждый тип учетной записи описан более подробно в следующих разделах:

## <a name="storage-account-options"></a>Параметры учетной записи хранения

### <a name="general-purpose-v2"></a>Общего назначения версии 2

Учетные записи общего назначения v2 (GPv2) являются учетными записями хранения, которые поддерживают все новые функции для больших двоичных объектов, файлов, очередей и таблиц. Учетные записи GPv2 поддерживают все API и функции, поддерживаемые учетными записями хранилища BLOB-объектов и GPv1. Они также, подобно этим типам учетных записей, обеспечивают возможности устойчивости, доступности, масштабируемости и производительности. Ценообразование для учетных записей GPv2 было сформировано для обеспечения самых низких цен на гигабайт и конкурентоспособных цен на транзакции в отрасли.

Вы можете обновить учетную запись GPv1 или учетную запись хранилища BLOB-объектов до учетной записи GPv2 с помощью портала Azure, PowerShell или Azure CLI. 

Для блочных BLOB-объектов в учетной записи хранения GPv2 вы можете выбрать между горячим и холодным уровнями хранилища для учетной записи или между горячим, холодным и архивным уровнями для большого двоичного объекта. Чтобы оптимизировать затраты, храните данные, к которым часто, иногда и редко обращаются, на горячем, холодном и активном уровнях хранилища соответственно. 

Учетные записи GPv2 предоставляют атрибут **Access Tier** на уровне учетной записи. Этот атрибут указывает стандартный уровень учетной записи хранения: **горячий** или **холодный**. Стандартный уровень учетной записи хранения применяется ко всем большим двоичным объектам, для которых явно не указан уровень хранения. Если схема использования данных изменилась, вы в любое время можете изменить уровень хранилища. **Архивный уровень** можно применять только на уровне большого двоичного объекта.

> [!NOTE]
> За изменение уровня хранилища может взиматься дополнительная плата. Дополнительные сведения см. в разделе [Цены и выставление счетов](#pricing-and-billing).
>
> Корпорация Майкрософт рекомендует для большинства сценариев использовать учетные записи общего назначения версии 2 вместо учетных записей хранилища BLOB-объектов.

### <a name="upgrade-a-storage-account-to-gpv2"></a>Обновление учетной записи хранения до GPv2

Пользователи могут в любое время обновить учетную запись GPv1 или учетную запись хранилища BLOB-объектов до учетной записи GPv2 с помощью портала Azure, PowerShell или Azure CLI. Это изменение невозможно отменить, а другие изменения не разрешены.

#### <a name="upgrade-with-azure-portal"></a>Обновление с помощью портала Azure
Чтобы обновить учетную запись GPv1 или учетную запись хранилища BLOB-объектов до учетной записи GPv2 с помощью портала Azure, сначала войдите на [портал Azure](https://portal.azure.com) и выберите учетную запись хранилища. Выберите **Параметры** > **Конфигурация**. На экране появятся кнопка **Обновить** и примечание, касающееся процесса обновления.

#### <a name="upgrade-with-powershell"></a>Обновление с помощью PowerShell

Чтобы обновить учетную запись GPv1 или учетную запись хранилища BLOB-объектов до учетной записи GPv2 с помощью PowerShell, сначала обновите PowerShell, чтобы использовать последнюю версию модуля **AzureRm.Storage**. Дополнительные сведения об установке PowerShell см. [здесь](https://docs.microsoft.com/powershell/azure/install-azurerm-ps). Затем, чтобы обновить учетную запись, выполните следующую команду, заменив имя вашей группы ресурсов и учетной записи хранения:

```powershell
Set-AzureRmStorageAccount -ResourceGroupName <resource-group> -AccountName <storage-account> -UpgradeToStorageV2
```

#### <a name="upgrade-with-azure-cli"></a>Обновление с помощью Azure CLI

Чтобы обновить учетную запись GPv1 или учетную запись хранилища BLOB-объектов до учетной записи GPv2 с помощью Azure CLI, сначала установите последнюю версию Azure CLI. Сведения об установке Azure CLI 2.0 см. [здесь](https://docs.microsoft.com/cli/azure/install-azure-cli?view=azure-cli-latest). Затем, чтобы обновить учетную запись, выполните следующую команду, заменив имя вашей группы ресурсов и учетной записи хранения:

```cli
az storage account update -g <resource-group> -n <storage-account> --set kind=StorageV2
```` 

### <a name="general-purpose-v1"></a>Общего назначения версии 1

Учетные записи общего назначения версии 1 (GPv1) обеспечивают доступ ко всем службам хранилища Azure, однако не предоставляют новейших возможностей или низких цен за гигабайт. Например, "холодный" и архивный уровни хранилища не поддерживаются в GPv1. Цены для транзакций GPv1 ниже, поэтому этот тип учетной записи выгоден для рабочих нагрузок с высокой скоростью изменения данных или высокой скоростью чтения.

Учетные записи общего назначения версии 1 (GPv1) являются старой версией учетной записи хранения, и это единственный тип, который может использоваться в классической модели развертывания. 

### <a name="blob-storage-accounts"></a>Учетные записи хранения BLOB-объектов

Учетные записи хранилища BLOB-объектов поддерживают те же функции блочных BLOB-объектов, что и учетные записи GPv2. Однако эти учетные записи поддерживают лишь блочные BLOB-объекты. Цены в целом похожи на цену учетных записей общего назначения версии 2. Клиентам лучше обратить внимание на различия в ценах между учетными записями хранилища BLOB-объектов и GPv2, а также рассмотреть возможность перехода на GPv2. Это обновление окончательное.

> [!NOTE]
> Учетные записи хранения BLOB-объектов поддерживают только блочные и добавочные BLOB-объекты и не поддерживают страничные.
>
> Корпорация Майкрософт рекомендует для большинства сценариев использовать учетные записи общего назначения версии 2 вместо учетных записей хранилища BLOB-объектов.

## <a name="recommendations"></a>Рекомендации

Дополнительные сведения об учетных записях хранения см. в [этой статье](../common/storage-create-storage-account.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json).

Для приложений, которым требуются последние функции блочных или добавочных BLOB-объектов, лучше использовать учетные записи хранения GPv2. Это позволит получить преимущества дифференцированной модели ценообразования многоуровневого хранилища. Однако вы можете использовать учетную запись GPv1 в определенных сценариях, например:

* При этом все равно нужно использовать классическую модель развертывания. Учетные записи GPv2 и учетные записи хранилища BLOB-объектов доступны только при использовании модели развертывания с помощью Azure Resource Manager.
* Вы можете использовать большие объемы транзакций или пропускной способности георепликации, которые стоят больше в учетных записях GPv2 и хранилища BLOB-объектов, чем в GPv1. Они не имеют достаточного количества места для хранения, поэтому обеспечивают низкие цены на хранение в гигабайтах.
* Вы используете версию [REST API служб хранилища](https://msdn.microsoft.com/library/azure/dd894041.aspx), выпущенную раньше 14.02.2014, или клиентскую библиотеку версии ниже 4 и не можете установить новую версию приложения.

## <a name="pricing-and-billing"></a>Цены и выставление счетов
Модель ценообразования во всех учетных записях хранения учитывает уровень хранилища каждого большого двоичного объекта. При использовании учетной записи хранения счета выставляются следующим образом:

* **Расходы на хранение.** Плата за хранение данных зависит не только от их объема, но и от уровня хранилища. Чем холоднее уровень хранилища, тем меньше стоит каждый гигабайт.
* **Затраты на доступ к данным.** Чем холоднее уровень хранилища, тем дороже доступ к данным. На холодном и архивном уровнях хранилища взимается плата за чтение каждого гигабайта данных.
* **Затраты на транзакции.** Чем холоднее уровень хранилища, тем выше стоимость каждой транзакции для всех уровней.
* **Расходы на передачу данных георепликации**. Этот платеж касается только тех учетных записей, в которых настроена георепликация, включая GRS и RA-GRS. При передаче данных георепликации взимается плата за гигабайт данных.
* **Расходы на исходящий трафик.** Передача трафика (из региона Azure) предусматривает выставление счетов за использование пропускной способности по гигабайтам, как и при использовании учетных записей хранения общего назначения.
* **Изменение уровня хранилища.** Переход в учетной записи с холодного уровня хранилища на горячий оплачивается. Оплата равна стоимости операций чтения всех данных в учетной записи хранения. При этом стоимость перехода с горячего уровня хранилища на холодный равна стоимости операций записи всех данных на холодный уровень (только для учетных записей GPv2).

> [!NOTE]
> Дополнительные сведения о модели ценообразования для учетных записей хранения см. на странице с [ценами на службу хранилища Azure](https://azure.microsoft.com/pricing/details/storage/). Дополнительные сведения о ценах на исходящий трафик см. на странице с [ценами на передачу данных](https://azure.microsoft.com/pricing/details/data-transfers/).

## <a name="quickstart-scenarios"></a>Сценарии быстрого запуска

В этом разделе описаны следующие сценарии с использованием портала Azure:

* [создание учетной записи хранения GPv2](#create-a-gpv2-storage-account-using-the-azure-portal);
* [преобразование учетной записи GPv1 или учетной записи хранилища BLOB-объектов в учетную запись хранения GPv2](#convert-a-gpv1-or-blob-storage-account-to-a-gpv2-storage-account-using-the-azure-portal);
* [настройка уровня учетной записи для учетных записей GPv2 или хранилища BLOB-объектов](#change-the-storage-tier-of-a-gpv2-storage-account-using-the-azure-portal);
* [настройка уровня большого двоичного объекта для учетных записей GPv2 или хранилища BLOB-объектов](#change-the-storage-tier-of-a-blob-using-the-azure-portal).

В примерах ниже нельзя установить архивный уровень доступа, так как этот параметр применяется ко всей учетной записи хранения. Архивный уровень доступа можно устанавливать только для отдельных BLOB-объектов.

### <a name="create-a-gpv2-storage-account-using-the-azure-portal"></a>Создание учетной записи хранения GPv2 с помощью портала Azure

1. Войдите на [портал Azure](https://portal.azure.com).

2. В меню концентратора выберите **Создать ресурс** > **Данные+хранилище** > **Учетная запись хранения**.

3. Выберите имя для своей учетной записи хранения.

    Это имя должно быть уникальным глобально. Оно используется как часть URL-адреса, необходимого для доступа к объектам в учетной записи хранения.  

4. Выберите **Resource Manager** в качестве модели развертывания.

    Для многоуровневого хранилища можно использовать только учетные записи хранения Resource Manager. Это рекомендуемая модель развертывания для новых ресурсов. Дополнительные сведения см. в статье [Общие сведения о диспетчере ресурсов Azure](../../azure-resource-manager/resource-group-overview.md).  

5. В раскрывающемся списке **Account Kind** (Тип учетной записи) выберите **General Purpose v2** (Общего назначения версии 2).

    Для учетной записи GPv2 используется уровень производительности "Стандартный". Уровень Premium недоступен.

6. Выберите тип хранилища репликации для учетной записи хранения: **LRS**, **ZRS**, **GRS** или **RA-GRS**. Значение по умолчанию — **RA-GRS**.

    LRS — локально избыточное хранилище; ZRS — хранилище, избыточное в пределах зоны; GRS — геоизбыточное хранилище (два региона); RA-GRS — геоизбыточное хранилище с доступом для чтения (два региона с доступом для чтения во втором).

    Дополнительные сведения о репликации службы хранилища Azure см. [здесь](../common/storage-redundancy.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json).

7. Выберите нужный уровень хранилища в соответствии со своими потребностями, задав для параметра **Уровень доступа** значение **Холодный** или **Горячий**. По умолчанию используется значение **Горячий**.

8. Выберите подписку, в которой вы создаете учетную запись хранения.

9. Выберите существующую группу ресурсов или создайте новую. Дополнительные сведения о группах ресурсов см. в статье [Общие сведения об Azure Resource Manager](../../azure-resource-manager/resource-group-overview.md).

10. Выберите регион для вашей учетной записи хранения.

11. Щелкните **Создать**, чтобы создать учетную запись хранения.

### <a name="convert-a-gpv1-or-blob-storage-account-to-a-gpv2-storage-account-using-the-azure-portal"></a>Преобразование учетной записи GPv1 или учетной записи хранилища BLOB-объектов в учетную запись хранения GPv2 с помощью портала Azure

1. Войдите на [портал Azure](https://portal.azure.com).

2. Чтобы перейти к учетной записи хранения, выберите **Все ресурсы**, а затем учетную запись хранения.

3. В разделе "Параметры" щелкните **Конфигурация**.

4. В разделе **Тип учетной записи** щелкните **Обновить**.

5. В разделе **Подтвердить обновление** введите имя учетной записи. 

5. Щелкните кнопку "Обновить" в нижней части колонки.

### <a name="change-the-storage-tier-of-a-gpv2-storage-account-using-the-azure-portal"></a>Изменение уровня хранилища в учетной записи хранения GPv2 с помощью портала Azure

1. Войдите на [портал Azure](https://portal.azure.com).

2. Чтобы перейти к учетной записи хранения, выберите **Все ресурсы**, а затем учетную запись хранения.

3. В колонке "Параметры" щелкните **Конфигурация**, чтобы просмотреть и (или) изменить конфигурацию учетной записи.

4. Выберите нужный уровень хранилища в соответствии со своими потребностями, задав для параметра **Уровень доступа** значение **Холодный** или **Горячий**.

5. Щелкните "Сохранить" в верхней части колонки.

### <a name="change-the-storage-tier-of-a-blob-using-the-azure-portal"></a>Изменение уровня хранилища больших двоичных объектов с помощью портала Azure

1. Войдите на [портал Azure](https://portal.azure.com).

2. Чтобы перейти к большому двоичному объекту в своей учетной записи хранения, выберите **Все ресурсы**. Затем последовательно выберите учетную запись хранения, контейнер и большой двоичный объект.

3. В колонке свойств большого двоичного объекта в раскрывающемся меню **Уровень доступа** выберите **горячий**, **холодный** или **архивный** уровень хранилища.

5. Щелкните "Сохранить" в верхней части колонки.

> [!NOTE]
> За изменение уровня хранилища может взиматься дополнительная плата. Дополнительные сведения см. в разделе [Цены и выставление счетов](#pricing-and-billing).


## <a name="evaluating-and-migrating-to-gpv2-storage-accounts"></a>Оценка учетных записей хранения GPv2 и переход на них
В этом разделе описано, как выполнить оптимальный переход к использованию учетной записи хранения GPv2 вместо GPv1. Есть два пользовательских сценария:

* У вас есть учетная запись хранения GPv1, и вы хотите оценить последствия перехода на учетную запись хранения GPv2 с соответствующим уровнем хранилища.
* Вы решили использовать или уже используете учетную запись хранения GPv2. Теперь вы хотите выяснить, какой уровень хранилища использовать — "горячий" или "холодный".

В обоих случаях сначала стоит оценить затраты на хранение данных и доступ к ним в учетной записи хранения GPv2, а затем сравнить эти затраты с текущими.

## <a name="evaluating-gpv2-storage-account-tiers"></a>Оценка уровней учетной записи хранения GPv2

Чтобы оценить затраты на хранение данных и доступ к ним в учетной записи хранения GPv2, необходимо оценить существующую схему использования или приблизительно определить будущую. В общем, необходимо выяснить следующее:

* Использование хранилища. Сколько данных хранится и насколько меняется их объем каждый месяц?
* Схема доступа к хранилищу. Какой объем данных считывается из учетной записи и какой объем записывается в нее (в этих расчетах также должны учитываться новые данные)? Сколько транзакций используется для доступа к данным? Что это за транзакции?

## <a name="monitoring-existing-storage-accounts"></a>Мониторинг существующих учетных записей хранения

Чтобы отслеживать существующие учетные записи хранения и собирать данные о них, используйте службу "Аналитика Службы хранилища Azure", которая ведет журналы и хранит метрики учетной записи хранения. Служба "Аналитика Службы хранилища" может хранить метрики, включающие сводную статистику по транзакциям и данные о емкости запросов к службе хранилища для следующих типов учетных записей: GPv1, GPv2 и хранилища BLOB-объектов. Эти данные хранятся в общеизвестных таблицах в той же учетной записи хранения.

Дополнительные сведения см. в статьях о [метриках аналитики хранилища](https://msdn.microsoft.com/library/azure/hh343258.aspx) и [схеме таблиц для метрик аналитики хранилища](https://msdn.microsoft.com/library/azure/hh343264.aspx).

> [!NOTE]
> Учетные записи хранилища BLOB-объектов предоставляют конечную точку службы таблиц только для хранения данных метрик для этой учетной записи и доступа к этим данным. 

Чтобы отслеживать использование ресурсов хранения в хранилище BLOB-объектов, необходимо включить метрики емкости.
Если эти метрики включены, данные о емкости ежедневно будут записываться для службы учетной записи хранения больших двоичных объектов. Эти данные регистрируются как запись в таблице *$MetricsCapacityBlob* в той же учетной записи хранения.

Чтобы отслеживать схему доступа к данным для хранилища BLOB-объектов, включите почасовые метрики транзакций на уровне API. Если эти метрики включены, транзакции каждого API собираются каждый час. Эти данные регистрируются как запись таблицы, которая записывается в таблицу *$MetricsHourPrimaryTransactionsBlob* в той же учетной записи хранения. Транзакции учетных записей хранения RA-GRS записываются таблицей *$MetricsHourSecondaryTransactionsBlob* на вторую конечную точку.

> [!NOTE]
> Этот процесс оценки нельзя применить к учетной записи хранения общего назначения, в которой хранятся страничные BLOB-объекты и диски виртуальных машин или очереди, файлы или таблицы вместе с данными блочных или добавочных BLOB-объектов. Данные производительности не отличают блочные BLOB-объекты от других типов и не предоставляют сведения для других типов данных. Если вы используете эти типы, то также можете посмотреть на показатели в вашем последнем счете.

Чтобы понять, как используются данные и предоставляется доступ к ним, рекомендуем выбрать период хранения для метрик, отражающий эти закономерности, и экстраполировать полученные данные. Один из вариантов — хранить данные метрик в течение семи дней и собирать данные каждую неделю для анализа в конце месяца. Либо вы можете хранить данные метрик месяц, собирая и анализируя данные в конце 30-дневного периода.

Дополнительные сведения о включении, сборе и просмотре данных метрик см. в статье [Включение метрик хранилища Azure и просмотр данных метрик](../common/storage-enable-and-view-metrics.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json).

> [!NOTE]
> Хранение и загрузка данных аналитики, а также доступ к ним оплачиваются как для обычных данных пользователя.

### <a name="utilizing-usage-metrics-to-estimate-costs"></a>Оценка затрат с помощью метрик использования

#### <a name="storage-costs"></a>Затраты на хранение

Последняя запись в таблице метрик емкости *$MetricsCapacityBlob* с ключом строки *data* показывает емкость хранилища, которую потребляют данные пользователя. Последняя запись в таблице метрик емкости *$MetricsCapacityBlob* с ключом строки *analytics* показывает емкость хранилища, которую потребляют журналы службы аналитики.

Сведения об общей емкости, потребляемой данными пользователя и журналами службы аналитики (если они включены), позволяют оценить затраты на хранение данных в учетной записи хранения. Этот метод можно использовать для оценки затрат на хранение в учетных записях хранения GPv1.

#### <a name="transaction-costs"></a>Плата за транзакции

Сумма значений *TotalBillableRequests* во всех записях для API в таблице метрик транзакций означает общее количество транзакций для этого API. *Например*, общее количество транзакций *GetBlob* в течение указанного периода можно вычислить, просуммировав все оплачиваемые запросы для всех операций с ключом строки *user;GetBlob*.

Чтобы оценить затраты на транзакции для учетных записей хранения BLOB-объектов, разделите транзакции на три группы, так как для них установлены разные цены.

* Транзакции записи: *PutBlob*, *PutBlock*, *PutBlockList*, *AppendBlock*, *ListBlobs*, *ListContainers*, *CreateContainer*, *SnapshotBlob* и *CopyBlob*.
* Транзакции удаления: *DeleteBlob* и *DeleteContainer*.
* Все остальные транзакции.

Чтобы оценить затраты на транзакции для учетных записей хранения GPv1, просуммируйте стоимость всех транзакций независимо от операции или API.

### <a name="data-access-and-geo-replication-data-transfer-costs"></a>Стоимость передачи данных георепликации и доступа к данным

Служба аналитики службы хранилища не указывает объем данных, которые считываются из учетной записи хранения и записываются в нее. Но этот объем можно приблизительно оценить, просмотрев таблицу метрик транзакций. Сумма значений *TotalIngress* во всех записях для API в таблице метрик транзакций отображает общий объем входящих данных в байтах для этого API. Точно так же сумма значений *TotalEgress* отображает общий объем исходящих данных в байтах.

Чтобы оценить затраты на доступ к данным для учетных записей хранения BLOB-объектов, разделите транзакции на две группы:

* Чтобы оценить объем данных, полученных из учетной записи хранения, вы можете суммировать значения *TotalEgress* в первую очередь для операций *GetBlob* и *CopyBlob*.
* Чтобы оценить объем данных, записанных в учетную запись хранения, вы можете суммировать значения *TotalIngress* в первую очередь для операций *PutBlob*, *PutBlock*, *CopyBlob* и *AppendBlock*.

Расходы на передачу данных георепликации для учетных записей хранения BLOB-объектов также можно рассчитать, оценив объем данных, записанных в учетные записи хранения GRS или RA-GRS.

> [!NOTE]
> Более подробный пример расчета затрат на использование "горячего" или "холодного" уровня хранилища см. в ответе на вопрос *Что такое "горячий" и "холодный" уровень доступа и как определить, какой из них следует использовать?* на странице [Цены на хранилища Azure](https://azure.microsoft.com/pricing/details/storage/).

## <a name="migrating-existing-data"></a>Миграция существующих данных

Учетную запись GPv1 или учетную запись хранилища BLOB-объектов можно легко обновить до GPv2 без простоя или изменений API и без необходимости перемещения данных. Поэтому мы настоятельно рекомендуем преобразовать учетные записи GPv1 в учетные записи GPv2, а не в учетные записи хранилища BLOB-объектов. Дополнительные сведения об обновлении до учетной записи GPv2 см. в разделе [Обновление учетной записи хранения до GPv2](#upgrade-a-storage-account-to-gpv2).

Но если вам нужно перенести учетную запись из GPv1 в учетную запись хранилища BLOB-объектов и у вас нет возможности использовать учетную запись GPv2, вы можете использовать следующие инструкции. 

Учетная запись хранения BLOB-объектов предназначена для хранения только блочных и добавочных BLOB-объектов. Существующие учетные записи хранения общего назначения, в которых можно хранить таблицы, очереди, файлы, диски и большие двоичные объекты, нельзя преобразовать в учетные записи хранения BLOB-объектов. Чтобы использовать уровни хранилища, создайте учетные записи хранения BLOB-объектов и перенесите существующие данные в новые учетные записи. 

Чтобы перенести данные в учетную запись хранения BLOB-объектов из устройств локального хранилища, сторонних поставщиков облачного хранилища или учетной записи хранения общего назначения в Azure, можно использовать следующее:

### <a name="azcopy"></a>AzCopy

AzCopy — это программа командной строки Windows, предназначенная для быстрого копирования большого объема данных в службу хранилища Azure и из нее. С помощью AzCopy можно копировать данные в учетную запись хранения BLOB-объектов из существующих учетных записей хранения общего назначения или передать данные из локальных устройств хранения в учетную запись хранения BLOB-объектов.

Дополнительные сведения см. в разделе [Передача данных с помощью служебной программы AzCopy](../common/storage-use-azcopy.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json).

### <a name="data-movement-library"></a>Библиотека перемещения данных

В основе библиотеки перемещения данных службы хранилища Azure для .NET лежит основная платформа перемещения данных, на базе которой работает AzCopy. Библиотека предназначена для надежной и простой передачи данных при высокой производительности, как AzCopy. Благодаря ей вы можете пользоваться всеми преимуществами функций AzCopy в своем приложении без необходимости запускать внешние экземпляры AzCopy и выполнять их мониторинг.

Дополнительные сведения см. в статье [Библиотека перемещения данных службы хранилища Microsoft Azure (0.7.0)](https://github.com/Azure/azure-storage-net-data-movement).

### <a name="rest-api-or-client-library"></a>REST API или клиентская библиотека

Вы можете самостоятельно создать приложение, чтобы перенести данные в учетную запись хранения BLOB-объектов, используя одну из клиентских библиотек Azure или API REST служб хранения Azure. Служба хранилища Azure предоставляет богатые клиентские библиотеки для создания приложений с использованием .NET, Java, C++, Node.js, PHP, Ruby и Python. Клиентские библиотеки предлагают дополнительные возможности, такие как логический алгоритм повтора, ведение журнала и параллельная загрузка. Также есть возможность вести разработку непосредственно через интерфейс API REST, который можно вызывать в любом языке программирования, поддерживающем запросы HTTP/HTTPS.

Дополнительные сведения см. в статье [Приступая к работе с хранилищем BLOB-объектов Azure с помощью .NET](../blobs/storage-dotnet-how-to-use-blobs.md).

> [!IMPORTANT]
> Вместе с большими двоичными объектами, зашифрованными на стороне клиента, хранятся связанные с шифрованием метаданные. При копировании большого двоичного объекта, зашифрованного на стороне клиента, убедитесь, что при операции копирования сохраняются метаданные большого двоичного объекта и особенно метаданные, связанные с шифрованием. Если скопировать большой двоичный объект без метаданных шифрования, его содержимое нельзя будет извлечь повторно. Дополнительные сведения о метаданных, связанных с шифрованием, см. в статье [Шифрование на стороне клиента для службы хранилища Microsoft Azure](../common/storage-client-side-encryption.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json).

## <a name="faq"></a>Часто задаваемые вопросы

**Будут ли по-прежнему доступны существующие учетные записи хранения?**

Да, существующие учетные записи хранения (GPv1) будут доступны. Их функции и цена на их использование также не изменятся. Но вы не можете выбрать для учетных записей GPv1 уровень хранилища, и эта возможность не будет предоставляться в будущем.

**Когда и почему лучше начать использовать учетные записи хранения GPv2?**

Учетные записи хранения GPv2 обеспечивают самые низкие затраты на хранение в гигабайтах, одновременно обеспечивая конкурентоспособные транзакции в отрасли и низкие затраты на доступ к данным. Забегая вперед, можно отметить, что учетная запись хранения GPv2 — это рекомендуемое средство хранения соответствующих объектов, ведь в будущем планируется реализовать возможности уведомлений об изменениях на основе учетной записи этого типа. Тем не менее решение об обновлении следует принимать на основе требований своего бизнеса. Например, вы можете оптимизировать свои шаблоны транзакций для обновления.

Переход с GPv2 на использование более ранней версии не поддерживается, поэтому перед обновлением учетных записей до версии GPv2 следует тщательно проверить все возможные влияния на ценообразование.

**Можно ли изменить уровень учетной записи хранения на учетную запись хранения GPv2?**

Да. Учетные записи GPv1 или учетные записи хранилища BLOB-объектов можно легко обновить до GPv2 с помощью портала, PowerShell или CLI. 

Переход с GPv2 на использование более ранней версии не поддерживается, поэтому перед обновлением учетных записей до версии GPv2 следует тщательно проверить все возможные влияния на ценообразование.

**Можно ли хранить объекты на обоих уровнях хранилища в одной учетной записи?**

Да. Атрибут **Access Tier**, назначенный на уровне учетной записи, является уровнем по умолчанию. Он применяется ко всем объектам в этой учетной записи без явно указанного уровня. Но функция распределения BLOB-объектов по уровням позволяет задавать уровень доступа на уровне объекта независимо от параметра уровня доступа, назначенного в учетной записи. Большие двоичные объекты на любом из трех уровней хранилища (горячий, холодный и архивный) могут существовать в одной учетной записи.

**Можно ли изменить уровень хранилища для учетной записи хранения GPv2?**

Вы можете изменить уровень учетной записи хранения, установив для нее атрибут **Access Tier**. Изменение уровня хранилища учетной записи применяется ко всем объектам, которые хранятся в учетной записи и для которых явно не назначен уровень. Изменение уровня хранилища с "горячего" на "холодный" предусматривает оплату за операции записи (за каждые 10 000 операций). Это применимо только к учетным записям хранения GPv2. Изменение уровня хранилища с "холодного" на "горячий" предусматривает оплату за операции чтения (за каждые 10 000 операций) и за извлечение данных (за каждый ГБ) для чтения всех данных в учетной записи.

**Как часто можно изменять уровень хранилища для учетной записи GPv2 или хранилища BLOB-объектов?**

Ограничений на частоту изменения уровня хранилища нет. Но учитывайте, что изменение уровня хранилища с "холодного" на "горячий" связано с большими расходами. Часто менять уровень хранилища не рекомендуется.

**Отличается ли поведение BLOB-объектов на "холодном" уровне хранилища от поведения этих объектов на "горячем" уровне?**

Для больших двоичных объектов на горячем уровне хранилища учетных записей GPv2 и хранилища BLOB-объектов характерна такая же задержка, как для больших двоичных объектов в учетных записях хранения GPv1. Для больших двоичных объектов на "холодном" уровне хранилища характерна такая же задержка (в миллисекундах), как для больших двоичных объектов на "горячем" уровне. При доступе к большим двоичным объектам на архивном уровне хранилища может быть задержка в несколько часов.

Доступность BLOB-объектов на "холодном" уровне хранилища несколько ниже (в соответствии с соглашением об уровне обслуживания), чем у BLOB-объектов на "горячем" уровне. Дополнительные сведения см. в статье [Соглашение об уровне обслуживания для хранилища](https://azure.microsoft.com/support/legal/sla/storage).

**Можно ли хранить страничные BLOB-объекты и диски виртуальных машин в учетных записях хранения BLOB-объектов?**

Нет. Учетные записи хранения BLOB-объектов поддерживают только блочные и добавочные BLOB-объекты и не поддерживают страничные. Диски виртуальных машин Azure используют страничные BLOB-объекты, поэтому учетные записи хранения BLOB-объектов нельзя использовать для хранения дисков виртуальных машин. Но в учетных записях хранения BLOB-объектов можно хранить резервные копии дисков виртуальных машин в качестве блочных BLOB-объектов. Это одна из причин для использования учетных записей GPv2 вместо учетных записей хранилища BLOB-объектов.

**Можно ли применять уровни для страничных BLOB-объектов в учетных записях хранения GPv2?**

Нет. Страничные BLOB-объекты наследуют уровень хранилища от учетной записи, но это никак не влияет на их цену и доступность. Вы не сможете установить для страничного BLOB-объекта горячий, холодный или архивный уровень доступа. Операция изменения уровня BLOB-объекта разрешена для страничного BLOB-объекта в учетной записи хранения класса "Премиум", но этот уровень определяет только допустимый размер, объем операций ввода-вывода и пропускную способность для страничного BLOB-объекта класса "Премиум". См. дополнительные сведения о [настройке уровня для BLOB-объекта](https://docs.microsoft.com/en-us/rest/api/storageservices/set-blob-tier).

**Нужно ли изменять свои существующие приложения, чтобы использовать учетные записи хранения GPv2?**

Учетные записи хранения GPv2 полностью совместимы с API учетных записей GPv1 и учетных записей хранилища BLOB-объектов. Приложение будет работать при использовании блочных или добавочных BLOB-объектов и [REST API служб хранилища](https://msdn.microsoft.com/library/azure/dd894041.aspx) версии 14.02.2014 и выше. Если вы используете протокол старой версии, нужно обновить приложение, чтобы использовать новую версию и эффективно работать с учетными записями хранения обоих типов. В целом рекомендуется всегда использовать последнюю версию, независимо от того, учетную запись хранения какого типа вы используете.

Цены на транзакции и пропускную способность для GPv2 обычно выше, чем для GPv1. Поэтому перед обновлением следует оптимизировать структуру транзакций, чтобы ваши расходы не увеличились.

**Произойдут ли изменения в работе пользователей?**

Учетные записи хранения GPv2 очень похожи на учетные записи хранения GPv1. Они поддерживают все ключевые функции службы хранилища Azure, включая обеспечение высоких показателей надежности, доступности, масштабируемости, производительности и безопасности. Они отличаются только функциями, определенными ограничениями для учетных записей хранения BLOB-объектов, а также уровнями хранилища, описанными выше. При обновлении до уровня учетной записи GPv2 или учетной записи хранилища BLOB-объектов все остальное остается неизменным.

## <a name="next-steps"></a>Дополнительная информация

### <a name="evaluate-blob-storage-accounts"></a>Оценка учетных записей хранения BLOB-объектов

[Проверка доступности учетных записей хранения BLOB-объектов по региону](https://azure.microsoft.com/regions/#services)

[Оценка использования текущих учетных записей хранения путем включения метрик службы хранилища Azure](../common/storage-enable-and-view-metrics.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json)

[Проверка цен на хранилище BLOB-объектов по региону](https://azure.microsoft.com/pricing/details/storage/)

[Проверка сведений о ценах на передачу данных](https://azure.microsoft.com/pricing/details/data-transfers/)

### <a name="start-using-gpv2-storage-accounts"></a>Начало работы с учетными записями хранения GPv2

[Приступая к работе с хранилищем BLOB-объектов Azure](../blobs/storage-dotnet-how-to-use-blobs.md)

[Перемещение данных в службу хранилища Azure и обратно](../common/storage-moving-data.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json)

[Приступая к работе со служебной программой командной строки AzCopy](../common/storage-use-azcopy.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json)

[Обозреватель службы хранилища Microsoft Azure](http://storageexplorer.com/)
