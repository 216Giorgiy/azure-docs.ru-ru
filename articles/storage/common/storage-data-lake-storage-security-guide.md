---
title: Руководство по безопасности для службы хранилища Azure Data Lake Storage 2-го поколения | Документация Майкрософт
description: Здесь подробно описаны способы защиты службы хранилища Azure, включая, помимо прочего, управление доступом на основе ролей и шифрование службы хранения.
services: storage
author: roygara
ms.service: storage
ms.topic: article
ms.date: 12/04/2018
ms.author: rogarana
ms.component: common
ms.openlocfilehash: d2182942b8d1ce78fd4a72ff387c7a6a1cfead5a
ms.sourcegitcommit: 5d837a7557363424e0183d5f04dcb23a8ff966bb
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/06/2018
ms.locfileid: "52976720"
---
# <a name="azure-data-lake-storage-gen2-security-guide"></a>Руководство по безопасности для Azure Data Lake Storage 2-го поколения

Служба хранилища Azure Data Lake Storage 2-го поколения (предварительная версия) — это набор средств, встроенных в учетные записи хранилища Azure. Поэтому все ссылки в этой статье относятся к учетным записям службы хранилища Azure с включенным иерархическим пространством имен (возможности службы хранилища Data Lake Storage 2-го поколения).

- Все данные, записываемые в службу хранилища Azure, автоматически шифруются с помощью [шифрования службы хранилища (SSE)](storage-service-encryption.md). Дополнительные сведения см. в статье [Announcing Default Encryption for Azure Blobs, Files, Tables and Queue Storage](https://azure.microsoft.com/blog/announcing-default-encryption-for-azure-blobs-files-table-and-queue-storage/) (Представление стандартных методов шифрования для хранилища BLOB-объектов, файлов, таблиц и очередей Azure).
- Служба хранилища Azure поддерживает Azure Active Directory (Azure AD) и управление доступом на основе ролей (RBAC) для операций управления ресурсами и для операций с данными, как описано ниже:
    - Роли RBAC можно назначать субъектам безопасности в пределах учетной записи хранения и использовать Azure AD для авторизации операций управления ресурсами, таких как управление ключами.
    - Служба хранилища Azure поддерживает предварительную версию функции интеграции с Azure AD для операций с данными. Роли RBAC можно назначать субъекту безопасности или управляемому удостоверению для ресурсов Azure в пределах подписки, группы ресурсов, учетной записи хранения или отдельной файловой системы. Дополнительные сведения см. в статье [Authenticate access to Azure Storage using Azure Active Directory (Preview)](storage-auth-aad.md) (Аутентификация доступа к службе хранилища Azure с помощью Azure Active Directory (предварительная версия)).
- Делегированный доступ к объектам данных в службе хранилища Azure можно предоставлять с помощью [подписанных URL-адресов](../storage-dotnet-shared-access-signature-part-1.md).

В этой статье содержатся общие сведения о функциях безопасности, которые можно использовать в службе хранилища Azure. Также приводятся ссылки на статьи с подробным описанием каждой функции.

В этой статье рассматриваются указанные ниже темы:

* [Безопасность плоскости управления](#management-plane-security) — защита учетной записи хранения

  Плоскость управления состоит из ресурсов, используемых для управления учетной записью хранения. В этом разделе рассматривается модель развертывания с помощью Azure Resource Manager и использование управления доступом на основе ролей (RBAC) для контроля доступа к учетным записям хранения. Кроме того, здесь представлены сведения об управлении ключами учетной записи хранения и их повторном создании.
* [Безопасность плоскости данных](#data-plane-security) — защита доступа к данным

  В этом разделе объясняется, как предоставить доступ к объектам данных в учетной записи хранения, таким как файлы и каталоги, с помощью подписанных URL-адресов и хранимых политик доступа. Будут рассмотрены подписанные URL-адреса как уровня службы, так и уровня учетной записи. Вы также узнаете, как ограничить доступ к определенному IP-адресу (или диапазону IP-адресов), как запретить использование любых протоколов, кроме HTTPS, и как отозвать подписанный URL-адрес, не дожидаясь истечения срока его действия.
* [Шифрование при передаче](#encryption-in-transit)

Из этого раздела вы узнаете, как защитить данные при передаче в учетную запись хранения или из нее, если включена служба хранилища Data Lake Storage 2-го поколения. Мы рассмотрим рекомендуемые способы применения протокола HTTPS.

## <a name="management-plane-security"></a>Безопасность плоскости управления

Плоскость управления образуют операции, которые влияют на саму учетную запись хранения. Например, это такие операции, как создание или удаление учетной записи хранения, получение списка учетных записей хранения, имеющихся в подписке, извлечение ключей учетных записей хранения и их повторное создание.

Это руководство ориентировано на модель развертывания Resource Manager, которая является средством создания учетных записей хранения с возможностями Data Lake Storage 2-го поколения. С помощью учетных записей хранения Resource Manager вы можете не просто предоставить доступ ко всей подписке, а контролировать доступ к плоскости управления на детальном уровне, используя управление доступом на основе ролей (RBAC).

### <a name="how-to-secure-your-storage-account-with-role-based-access-control-rbac"></a>Защита учетной записи хранения с помощью управления доступом на основе ролей (RBAC)

Рассмотрим систему управления доступом на основе ролей и способы ее использования. Каждая подписка Azure имеет каталог Azure Active Directory. Пользователям, группам и приложениям из этого каталога может быть предоставлен доступ к управлению ресурсами в подписке Azure, для которых используется модель развертывания на основе Resource Manager. Этот тип безопасности называется управлением доступом на основе ролей (RBAC). Для управления доступом используйте параметр **Управление доступом (IAM)** на портале Azure.

При применении модели на основе Resource Manager учетная запись хранения помещается в группу ресурсов, а доступ к ее плоскости управления контролируется с помощью Azure Active Directory. Например, вы можете предоставить определенным пользователям доступ к ключам учетной записи хранения, а другим — запретить такой доступ, но разрешить просматривать информацию об учетной записи.

#### <a name="granting-access"></a>Предоставление доступа

Доступ предоставляется путем назначения соответствующей роли RBAC пользователям, группам и приложениям в подходящей области. Чтобы предоставить доступ ко всей подписке, назначьте роль на уровне подписки. Вы можете разрешить доступ всем ресурсам в группе ресурсов, предоставив разрешения самой группе. Вы также можете назначать определенные роли отдельным ресурсам, например учетным записям хранения.

Ниже приводятся основные моменты, которые необходимо знать об использовании RBAC для доступа к операциям управления учетной записью службы хранилища Azure.

* Чтобы у пользователя было разрешение на доступ к объектам данных в учетной записи хранения, вы можете предоставить ему разрешение на чтение ключей учетной записи хранения. С помощью этих ключей пользователь сможет получать доступ к файлам и каталогам.
* Роль можно назначить отдельной учетной записи пользователя, группе пользователей или отдельному приложению.
* Каждая роль имеет список разрешенных и запрещенных действий. Например, роль "Участник виртуальных машин" имеет разрешенное действие listKeys, которое позволяет читать ключи учетной записи хранения. Она также имеет запрещенные действия, например изменение прав доступа пользователей в Active Directory.
* Для службы хранилища доступны, помимо прочего, следующие роли:

  * "Владелец" — может управлять всем, включая доступ.
  * "Участник" — может выполнять те же действия, что и владелец, за исключением предоставления доступа. Пользователь с этой ролью может просматривать и повторно создавать ключи учетной записи хранения. С помощью этих ключей он может получать доступ к объектам данных.
  * "Читатель" — может просматривать сведения об учетной записи хранения, за исключением секретных данных. Например, если назначить пользователю роль читателя учетной записи хранения, то он сможет просматривать ее свойства, но не сможет вносить в них изменения или просматривать ключи учетной записи хранения.
  * "Участник учетных записей хранения" может управлять учетной записью хранения: читать сведения о ресурсах и группах ресурсов подписки, а также создавать развертывания групп ресурсов подписки и управлять ими. Он имеет доступ к ключам учетной записи хранения, а, следовательно, и к плоскости данных.
  * "Администратор доступа пользователей" — может управлять доступом пользователей к учетной записи хранения. Например, он может предоставить определенному пользователю доступ с правами читателя.
  * "Участник виртуальных машин" — может управлять виртуальными машинами, но не учетной записью хранения, к которой они подключены. Эта роль позволяет получать список ключей учетной записи хранения, поэтому пользователь с этой ролью может вносить изменения в плоскость данных.

    Чтобы пользователь мог создать виртуальную машину, у него должна быть возможность создать соответствующий файл VHD в учетной записи хранения. Для этого ему необходимо получить ключ учетной записи хранения и передать его в интерфейс API, с помощью которого создается виртуальная машина. Таким образом, пользователю требуется это разрешение для получения списка ключей учетной записи хранения.
* Возможность определять настраиваемые роли позволяет составлять наборы действий из списка доступных действий с ресурсами Azure.
* Прежде чем назначать роль пользователю, его необходимо создать в Azure Active Directory.
* С помощью PowerShell или интерфейса командной строки Azure можно создать отчет, содержащий сведения о том, кто предоставил или отозвал доступ, с какими правами, для каких пользователей и в какой области действия.

#### <a name="resources"></a>Ресурсы

* [Контроль доступа на основе ролей Azure Active Directory](../../role-based-access-control/role-assignments-portal.md)

  В этой статье описывается система управления доступом на основе ролей в Azure Active Directory и принципы ее работы.
* [Встроенные роли для ресурсов Azure](../../role-based-access-control/built-in-roles.md)

  В этой статье подробно описываются встроенные роли RBAC.
* [Общие сведения о развертывании диспетчера ресурсов и классическом развертывании](../../azure-resource-manager/resource-manager-deployment-model.md)

### <a name="managing-your-storage-account-keys"></a>Управление ключами учетной записи хранения

Ключи учетной записи хранения — это создаваемые в Azure 512-битные строки, которые можно использовать вместе с именем учетной записи хранения для доступа к хранящимся в ней объектам данных, например большим двоичным объектам, сущностям в таблице, сообщениям в очереди и файлам в файловом ресурсе Azure. Контролируя доступ к ключам учетной записи хранения, можно управлять доступом к ее плоскости данных.

Каждая учетная запись хранения имеет два ключа, которые называются "Ключ 1" и "Ключ 2", на [портале Azure](http://portal.azure.com/) и в командлетах PowerShell. Их можно повторно создавать вручную различными способами, в том числе с помощью [портала Azure](https://portal.azure.com/), PowerShell и Azure CLI, или программными средствами с помощью клиентской библиотеки хранилища .NET или интерфейса REST API служб хранилища Azure.

Повторное создание ключей учетной записи хранения может требоваться по самым разным причинам.

* Вы можете регулярно создавать новые ключи в целях безопасности.
* Ключи учетной записи хранения необходимо создать повторно, если злоумышленнику удалось взломать приложение и извлечь ключ, который был жестко задан в коде или сохранен в файле конфигурации, получив таким образом полный доступ к учетной записи хранения.
* Ключи учетной записи хранения может потребоваться создать повторно и в том случае, если один из членов покидает вашу рабочую группу, использующую приложение "Обозреватель хранилищ", в котором хранятся эти ключи. Если не сделать этого, покинувший группу пользователь сохранит доступ к вашей учетной записи хранения. Это основная причина, по которой были созданы подписанные URL-адреса уровня учетной записи — вы можете использовать такой URL-адрес вместо хранения ключей доступа в файле конфигурации.

#### <a name="key-regeneration-plan"></a>План повторного создания ключей

Повторное создание ключей необходимо правильно спланировать. Если этого не сделать, доступ к учетной записи хранения может в какой-то момент оказаться полностью невозможным, что приведет к длительному простою. Именно поэтому используются два ключа. Повторно создавать ключи следует только по одному.

Перед повторным созданием ключей следует составить список всех приложений, работа которых зависит от учетной записи хранения, а также других используемых служб Azure. Например, если вы используете службы мультимедиа Azure, которые зависят от учетной записи хранения, повторно созданный ключ доступа необходимо еще раз синхронизировать с ними. Если вы используете какие-либо приложения, например обозреватель хранилищ, им также необходимо предоставить новые ключи. Если у вас есть виртуальные машины, файлы VHD которых хранятся в учетной записи хранения, повторное создание ключей не повлияет на их работу.

Ключи можно создать повторно на портале Azure. На синхронизацию повторно созданных ключей со службами хранилища может потребоваться до 10 минут.

Если вы готовы приступить к смене ключа, ниже приводится общее описание процедуры. В этом случае предполагается, что вы используете ключ 1 и хотите переключить все службы и приложения на использование ключа 2.

1. Создайте ключ 2 повторно, чтобы обеспечить его надежность. Это можно сделать на портале Azure.
2. Во всех приложениях, в которых хранится ключ к хранилищу данных, измените его так, чтобы использовалось новое значение ключа 2. Протестируйте и опубликуйте приложение.
3. После успешного запуска всех приложений и служб повторно создайте ключ 1. Это необходимо для того, чтобы пользователи, которым вы не предоставили новый ключ явным образом, утратили доступ к учетной записи хранения.

Если в настоящее время вы используете ключ 2, то можете использовать ту же процедуру, но поменять имена ключей.

Переход может длиться несколько дней, в течение которых вы настраиваете в каждом приложении использование нового ключа, а затем публикуете приложение. По завершении необходимо создать повторно старый ключ, чтобы он больше не работал.

Другой вариант — поместить ключ учетной записи хранения в [хранилище ключей Azure](https://azure.microsoft.com/services/key-vault/) в качестве секрета, чтобы приложения извлекали его оттуда. При повторном создании ключа и обновлении хранилища ключей Azure приложения не нужно будет развертывать повторно, так как они будут получать новый ключ из хранилища автоматически. Приложение может считывать ключ каждый раз, когда он необходим. Либо же вы можете кэшировать ключ в памяти, а в случае сбоя повторно извлекать его из Azure Key Vault.

Хранилище ключей Azure обеспечивает еще один уровень безопасности для ключей к хранилищу данных. При использовании этого метода вам не придется жестко задавать ключ в файле конфигурации, что устраняет риск получения доступа к ключам со стороны лиц, не имеющих соответствующих разрешений.

Еще одно преимущество использования хранилища ключей Azure — возможность контроля доступа к ключам с помощью Azure Active Directory. Это означает, что вы можете предоставить доступ набору приложений, которым необходимо извлекать ключ из хранилища ключей Azure, и при этом быть уверенными в том, что другие приложения не получат доступ к ключам, если только вы не предоставите им такое разрешение явно.

> [!NOTE]
> Во всех приложениях рекомендуется использовать одновременно только один из ключей. Если в одних приложениях используется ключ 1, а в других — ключ 2, вы не сможете произвести смену ключей без того, чтобы некоторые приложения утратили доступ.

#### <a name="resources"></a>Ресурсы

* [Управление параметрами учетной записи хранения на портале Azure](storage-account-manage.md)
* [Справочник по API REST поставщика ресурсов службы хранилища Azure](https://msdn.microsoft.com/library/mt163683.aspx)

## <a name="data-plane-security"></a>Безопасность плоскости данных
Под безопасностью плоскости данных подразумеваются методы защиты объектов данных в службе хранилища Azure Storage. Мы рассмотрели методы шифрования и защиты данных в процессе их передачи. Теперь поговорим об управлении доступом к объектам.

Существует три способа авторизации доступа к объектам данных в службе хранилища Azure:

- Авторизация доступа к файловым системам и очередям с помощью Azure AD (предварительная версия). По сравнению с другими способами авторизации, авторизация с помощью Azure AD обеспечивает некоторые преимущества, в том числе отсутствие необходимости хранить секреты в коде. Дополнительные сведения см. в статье [Authenticate access to Azure Storage using Azure Active Directory (Preview)](storage-auth-aad.md) (Аутентификация доступа к службе хранилища Azure с помощью Azure Active Directory (предварительная версия)). 
- Использование ключей учетной записи хранения для авторизации с помощью общего ключа. Для авторизации с помощью общего ключа нужно хранить ключи учетной записи хранения в приложении. Поэтому корпорация Майкрософт рекомендует вместо этого использовать Azure AD (если возможно). Продолжайте использовать общий ключ для приложений в рабочей среде или для авторизации доступа к таблицам и файлам Azure, пока функция интеграции Azure AD находится на этапе предварительной версии.
- Использование подписанных URL-адресов для предоставления управляемых разрешений к определенным объектам данных на определенное время.

Помимо ограничения доступа с помощью проверки подлинности вы также можете использовать [брандмауэры и виртуальные сети](storage-network-security.md) для ограничения доступа к учетной записи хранения на основе правил сети.  Этот подход позволяет запретить доступ к открытому интернет-трафику и предоставить доступ только к определенным виртуальным сетям Azure или к диапазонам общедоступных IP-адресов в Интернете.

### <a name="storage-account-keys"></a>Ключи учетной записи хранения

Ключи учетной записи хранения — это создаваемые в Azure 512-битные строки, которые можно использовать вместе с именем учетной записи хранения для доступа к хранящимся в ней объектам данных.

Например, вы можете читать файлы. Многие из этих действий можно выполнять на портале Azure или с помощью различных приложений Storage Explorer. Для выполнения этих операций также можно написать код, использующий REST API.

Как указано в разделе [Безопасность плоскости управления](#management-plane-security), доступ к ключам для учетной записи хранения, использующей модель Azure Resource Manager, можно контролировать посредством управления доступом на основе ролей (RBAC).

### <a name="how-to-delegate-access-to-objects-in-your-account-using-shared-access-signatures-and-stored-access-policies"></a>Делегирование доступа к объектам в учетной записи с помощью подписанных URL-адресов и хранимых политик доступа

Подписанный URL-адрес — это строка с токеном безопасности, который можно связать с универсальным кодом ресурса (URI), позволяющим делегировать доступ к объектам в хранилище и указывать ограничения, например разрешения и период времени доступа.

Можно предоставить доступ к файлам или каталогам.

Вы можете предоставить клиенту токен SAS, с помощью которого можно отправлять изображения в файловую систему в хранилище BLOB-объектов, и предоставить веб-приложению разрешение на чтение этих изображений. В обоих случаях происходит разделение областей ответственности — каждому приложению можно предоставить только тот уровень доступа, который необходим ему для выполнения его задач. Это становится возможным благодаря использованию подписанных URL-адресов.

#### <a name="why-you-want-to-use-shared-access-signatures"></a>Причины использования подписанных URL-адресов.

Зачем использовать подписанный URL-адрес вместо того, чтобы просто предоставить ключ учетной записи хранения, что гораздо проще? Предоставляя ключ учетной записи хранения, вы открываете свободный доступ к хранилищу без каких-либо ограничений. С помощью этих ключей пользователь может, например, добавить всю свою коллекцию музыки в вашу учетную запись хранения. Он также может заменить ваши файлы на версии, зараженные вирусами, или украсть ваши данные. Предоставление неограниченного доступа к учетной записи хранения требует серьезного отношения.

С помощью подписанных URL-адресов вы можете предоставить клиенту только необходимые ему разрешения на ограниченный срок. Например, если кто-то отправляет файл в вашу учетную запись, вы можете предоставить ему разрешение на запись на то время, которое требуется для отправки этого файла (с учетом его размера, разумеется). Если вы изменили решение, то можете отозвать доступ.

Кроме того, вы можете указать, что запросы, совершаемые с помощью подписанного URL-адреса, ограничены определенным IP-адресом или диапазоном IP-адресов, внешним по отношению к Azure. Вы также можете указать, что запросы должны выполняться по определенному протоколу (HTTPS или HTTP/HTTPS). Например, если вы хотите разрешить только HTTPS-трафик, то можете задать HTTPS в качестве обязательного протокола, и HTTP-трафик будет блокироваться.

#### <a name="definition-of-a-shared-access-signature"></a>Определение подписанного URL-адреса

Подписанный URL-адрес — это набор параметров запроса, которые добавляются к URL-адресу, указывающему на ресурс.

Они содержат сведения о правах доступа и периоде времени, на который предоставляется доступ. Ниже приведен пример. Этот код URI предоставляет доступ для чтения BLOB-объекта на пять минут. Параметры запроса SAS должны иметь кодировку URL, например, двоеточие (:) должно обозначаться как %3A, а пробел — как %20.

```
http://mystorage.dfs.core.windows.net/myfilesystem/myfile.txt (URL to the file)
?sv=2015-04-05 (storage service version)
&st=2015-12-10T22%3A18%3A26Z (start time, in UTC time and URL encoded)
&se=2015-12-10T22%3A23%3A26Z (end time, in UTC time and URL encoded)
&sr=b (resource is a blob)
&sp=r (read access)
&sip=168.1.5.60-168.1.5.70 (requests can only come from this range of IP addresses)
&spr=https (only allow HTTPS requests)
&sig=Z%2FRHIX5Xcg0Mq2rqI3OlWTjEg2tYkboXr1P9ZUXDtkk%3D (signature used for the authentication of the SAS)
```

#### <a name="how-the-shared-access-signature-is-authorized-by-the-azure-storage-service"></a>Проверка подлинности подписанного URL-адреса службой хранилища Azure

Когда служба хранилища получает запрос, она создает на основе входных параметров запроса подпись, используя тот же метод, что и вызывающая программа. Затем она сравнивает две подписи. Если они совпадают, служба хранилища проверяет, допустима ли версия службы, приходятся ли текущие дата и время на указанный период времени, соответствует ли запрошенный уровень доступа типу запроса и т. д.

Так, если в приведенном выше примере URL-адрес указывал бы на файл, а не на BLOB-объект, запрос не был бы выполнен, так как в нем указано, что подписанный URL-адрес соответствует BLOB-объекту. Если вызывалась бы команда REST для изменения BLOB-объекта, она не была бы выполнена, так как в подписанном URL-адресе указано, что разрешен доступ только для чтения.

#### <a name="types-of-shared-access-signatures"></a>Типы подписанных URL-адресов

* Подписанный URL-адрес уровня службы можно использовать для доступа к определенным ресурсам в учетной записи хранения. В некоторых примерах список файлов извлекается в файловую систему или загружается отдельный файл.
* Подписанный URL-адрес уровня учетной записи можно использовать для доступа к тем же объектам, что и подписанный URL-адрес уровня службы. Кроме того, он позволяет выполнять определенные действия с ресурсами, которые невозможны при использовании подписанного URL-адреса службы, например создавать файловые системы.

#### <a name="creating-a-sas-uri"></a>Создание универсального кода ресурса (URI) SAS

1. Вы можете создавать URI по требованию, каждый раз определяя все параметры запроса.

   Этот подход обеспечивает гибкость, но если у вас есть логически связанный и относительно постоянный набор параметров, лучше использовать хранимую политику доступа.
2. Хранимую политику доступа можно создать для всей файловой системы, общей папки, таблицы или очереди. Затем ее можно использовать в качестве основы для создания кодов URI SAS. Разрешения на основе хранимых политик доступа можно легко отзывать. Для каждой файловой системы, очереди, таблицы или общей папки можно определить до пяти политик.

   Например, если вы предполагаете, что большое количество пользователей будет читать большие двоичные объекты в определенной файловой системе, то можно создать хранимую политику доступа, которая предоставляет доступ для чтения и содержит повторяющиеся параметры. Затем можно создать код URI SAS, используя параметры хранимой политики доступа и указав дату и время истечения срока действия. Преимущество в том, что вам не нужно каждый раз задавать все параметры запроса.

#### <a name="revocation"></a>Запрет доступа

Предположим, что подписанный URL-адрес был скомпрометирован или вы хотите изменить его в связи с корпоративными требованиями к безопасности или соответствию нормативам. Как запретить доступ к ресурсу, для которого используется этот подписанный URL-адрес? Это зависит от того, как был создан код URI SAS.

В случае с нерегламентированным кодом URI есть три варианта. Вы можете выдать токены SAS с коротким сроком действия и дождаться, когда этот срок истечет. Вы можете переименовать или удалить ресурс (при условии, что областью действия токена является один объект). Вы можете сменить ключи учетной записи хранения. Последний вариант может иметь существенные последствия, масштаб которых зависит от количества служб, использующих эту учетную запись хранения, и поэтому, как правило, требует определенного планирования.

Если подписанный URL-адрес был получен на основе хранимой политики доступа, то, чтобы запретить доступ, можно отменить хранимую политику доступа. Для этого можно указать, что срок ее действия истек, или полностью удалить ее. Это изменение вступает в силу немедленно и делает недействительными все подписанные URL-адреса, использующие эту хранимую политику доступа. Изменение или удаление хранимой политики доступа может повлиять на доступ пользователей к соответствующей файловой системе, общей папке, таблице или очереди с помощью подписанного URL-адреса. Но если клиенты разработаны таким образом, чтобы запрашивался новый подписанный URL-адрес, когда старый становится недействительным, проблем не возникнет.

Та как подписанный URL-адрес, полученный на основе хранимой политики доступа, можно отозвать немедленно, рекомендуется использовать хранимые политики доступа всегда, когда это возможно.

#### <a name="resources"></a>Ресурсы

Более подробные сведения об использовании подписанных URL-адресов и хранимых политик доступа, проиллюстрированные примерами, см. в перечисленных ниже статьях.

* Справочные статьи:

  * [Подписанный URL-адрес уровня службы](https://msdn.microsoft.com/library/dn140256.aspx)

    В этой статье приводятся примеры использования подписанного URL-адреса уровня службы с BLOB-объектами, сообщениями в очереди, диапазонами в таблице и файлами.
  * [Создание подписанного URL-адреса уровня службы](https://msdn.microsoft.com/library/dn140255.aspx)
  * [Создание подписанного URL-адреса уровня учетной записи](https://msdn.microsoft.com/library/mt584140.aspx)
* Учебники по использованию клиентской библиотеки .NET для создания подписанных URL-адресов и хранимых политик доступа.

  * [Использование подписанных URL-адресов (SAS)](../storage-dotnet-shared-access-signature-part-1.md)
  * [Подписанные URL-адреса. Часть 2: создание и использование подписанного URL-адреса в службе BLOB-объектов](../blobs/storage-dotnet-shared-access-signature-part-2.md)

    Эта статья содержит описание модели SAS, примеры подписанных URL-адресов и рекомендации по их использованию. Также рассматривается процедура отзыва предоставленных разрешений.

* Authentication

  * [Проверка подлинности для служб хранилища Azure](https://msdn.microsoft.com/library/azure/dd179428.aspx)
* Учебник по началу работы с подписанными URL-адресами

  * [Учебник по началу работы с подписанными URL-адресами](https://github.com/Azure-Samples/storage-dotnet-sas-getting-started)

## <a name="encryption-in-transit"></a>Шифрование при передаче

### <a name="transport-level-encryption--using-https"></a>Шифрование на уровне транспорта с помощью протокола HTTPS

Еще одна мера, которую необходимо принять для защиты данных в службе хранилища Azure, — это шифрование данных между клиентом и службой хранилища Azure. Во-первых, рекомендуется всегда использовать протокол [HTTPS](https://en.wikipedia.org/wiki/HTTPS) , который обеспечивает безопасный обмен данными через Интернет.

Чтобы обеспечить защищенный канал связи, всегда используйте протокол HTTPS при вызове интерфейсов REST API или доступе к объектам в хранилище. Кроме того, **подписанные URL-адреса**, которые можно применять для доступа к объектам в службе хранилища Azure, дают возможность указывать, что с ними может использоваться только протокол HTTPS. Это позволяет гарантировать, что все получатели ссылок с маркерами SAS будут применять надлежащий протокол.

Можно принудительно задать использование протокола HTTPS при вызове интерфейсов REST API для доступа к объектам в учетных записях хранения, включив параметр [Требуется безопасное перемещение](../storage-require-secure-transfer.md) для учетной записи хранения. После этого подключения по протоколу HTTP будут отклоняться.

## <a name="encryption-at-rest"></a>Шифрование при хранении

### <a name="storage-service-encryption-sse"></a>шифрования службы хранилища (SSE)

SSE включено для всех учетных записей хранения и его нельзя отключить. Оно автоматически шифрует данные при их записи в службу хранилища Azure. При считывании данных из службы хранилища Azure она расшифровывает их перед возвратом. SSE позволяет защитить данные, не изменяя код и не добавляя код в приложения.

Можно использовать ключи, управляемые корпорацией Майкрософт, или собственные настраиваемые ключи. Корпорация Майкрософт создает управляемые ключи и управляет их безопасным хранением, а также регулярной заменой в соответствии с внутренней политикой Майкрософт. Дополнительные сведения об использовании настраиваемых ключей см. в статье [Шифрование службы хранилища с помощью управляемых клиентом ключей в Azure Key Vault](storage-service-encryption-customer-managed-keys.md).