---
title: Аутентификация доступа к службе хранилища Azure с помощью Azure Active Directory (предварительная версия) | Документация Майкрософт
description: Аутентификация доступа к службе хранилища Azure с помощью Azure Active Directory (предварительная версия).
services: storage
author: tamram
ms.service: storage
ms.topic: article
ms.date: 06/01/2018
ms.author: tamram
ms.component: common
ms.openlocfilehash: 90868961475c2e9d0ac7d28c5d9a50c8eb281675
ms.sourcegitcommit: 9819e9782be4a943534829d5b77cf60dea4290a2
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/06/2018
ms.locfileid: "39525211"
---
# <a name="authenticate-access-to-azure-storage-using-azure-active-directory-preview"></a>Аутентификация доступа к службе хранилища Azure с помощью Azure Active Directory (предварительная версия)

Служба хранилища Azure поддерживает аутентификацию и авторизацию с помощью Azure Active Directory (AD) для служб больших двоичных объектов и очередей. С помощью Azure AD вы можете использовать управление доступом на основе ролей (RBAC) для предоставления доступа пользователям, группам или субъектам-службам приложений. 

Авторизация приложений, обращающихся к службе хранилища Azure, с помощью Azure AD обеспечивает превосходную безопасность и простоту использования по сравнению с другими вариантами авторизации. Хотя вы можете продолжать применять для приложений авторизацию с помощью общего ключа, благодаря использованию Azure AD не нужно хранить ключ доступа к учетной записи с кодом. Аналогичным образом вы можете продолжать использовать подписанные URL-адреса (SAS) для предоставления доступа с точной настройкой к ресурсам в учетной записи хранения, но Azure AD предлагает аналогичные возможности без необходимости управлять токенами SAS или беспокоиться об отзыве скомпрометированного SAS.

## <a name="about-the-preview"></a>Сведения о предварительной версии

Имейте в виду следующие моменты о предварительной версии:

- Интеграция с Azure AD доступна для служб BLOB-объектов и очередей только в предварительной версии.
- Интеграция с Azure AD доступна для учетных записей хранения GPv1, GPv2 и больших двоичных объектов во всех общедоступных регионах. 
- Поддерживаются только учетные записи хранения, созданные с помощью модели развертывания Resource Manager. 
- Скоро появится поддержка сведений об удостоверении вызывающего объекта в журналах решения "Аналитика Службы хранилища".
- В настоящее время поддерживается авторизация доступа Azure AD к ресурсам в стандартных учетных записях хранения. В ближайшее время будет объявлена поддержка авторизации доступа к страничным BLOB-объектам в учетных записях хранения уровня "Премиум".
- Служба хранилища Azure поддерживает встроенные и пользовательские роли RBAC. Роли можно назначать для подписки, группы ресурсов, учетной записи хранения, отдельного контейнера или очереди.
- Клиентские библиотеки службы хранилища Azure, которые в настоящее время поддерживают интеграцию с Azure AD, включают в себя:
    - [.NET](https://www.nuget.org/packages/WindowsAzure.Storage/9.2.0)
    - [Java](http://mvnrepository.com/artifact/com.microsoft.azure/azure-storage) (используйте 7.1.x (предварительная версия));
    - Python
        - [Большой двоичный объект](https://github.com/Azure/azure-storage-python/releases/tag/v1.2.0rc1-blob)
        - [Очередь](https://github.com/Azure/azure-storage-python/releases/tag/v1.2.0rc1-queue)
    - [Node.js](https://www.npmjs.com/package/azure-storage)
    - [JavaScript](https://aka.ms/downloadazurestoragejs).

> [!IMPORTANT]
> Эта предварительная версия не предназначена для использования в рабочей среде. Соглашения об уровне обслуживания (SLA) для рабочих сред не будут доступны до выпуска общедоступной версии интеграции с Azure AD для службы хранилища Azure. Если интеграция с Azure AD пока не поддерживается для вашего сценария, продолжайте использовать в приложениях авторизацию по общему ключу или маркеры SAS.
>
> На этапе предварительной версии назначение ролей RBAC может занимать до пяти минут.
>
> Интеграция Azure AD со службой хранилища Azure требует использования протокола HTTPS для операций службы хранилища Azure.

## <a name="get-started-with-azure-ad-for-storage"></a>Начало работы с Azure AD для службы хранилища

Первым шагом в использовании интеграции Azure AD со службой хранилища Azure является назначение ролей RBAC для данных хранилища субъекту-службы (пользователю, группе или субъекту-службе приложения) или управляемому удостоверению службы (MSI). Роли RBAC охватывают общие наборы разрешений для контейнеров и очередей. Узнайте больше о ролях RBAC для службы хранилища Azure, ознакомившись с разделом [Manage access rights to Azure Storage data with RBAC (Preview)](storage-auth-aad-rbac.md) (Управление правами доступа к данным в службе хранилища Azure с помощью RBAC (предварительная версия)).

Чтобы использовать Azure AD для авторизации доступа к ресурсам хранилища в приложениях, необходимо запросить токен доступа OAuth 2.0 из кода. Сведения о том, как запросить токен доступа и использовать его для авторизации запросов к службе хранилища Azure, см. в статье [Authenticate with Azure AD from an Azure Storage application (Preview)](storage-auth-aad-app.md) (Аутентификация с помощью Azure Active Directory из приложения службы хранилища Azure (предварительная версия)). Если вы используете управляемое удостоверение службы (MSI) Azure, ознакомьтесь со статьей [Аутентификация в Azure AD с помощью функции "Управляемое удостоверение службы Azure" (предварительная версия)](storage-auth-aad-msi.md).

Теперь Azure CLI и PowerShell поддерживают вход с использованием удостоверения Azure AD. После входа с использованием удостоверения Azure AD сеанс выполняется с этим идентификатором. Дополнительные сведения см. в статье [Использование удостоверения Azure AD для доступа к службе хранилища Azure с помощью интерфейса командной строки или PowerShell (предварительная версия)](storage-auth-aad-script.md).

## <a name="next-steps"></a>Дополнительная информация

Дополнительные сведения об интеграции Azure AD для очередей и больших двоичных объектов Azure доступны в записи блога команды разработчиков службы хранилища Azure [Announcing the Preview of Azure AD Authentication for Azure Storage](https://azure.microsoft.com/blog/announcing-the-preview-of-aad-authentication-for-storage/) (Объявление о выпуске предварительной версии аутентификации Azure AD для службы хранилища Azure).
