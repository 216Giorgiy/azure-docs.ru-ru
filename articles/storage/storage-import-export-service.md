<properties
	pageTitle="Использование службы экспорта и импорта для передачи данных BLOB-объектов в хранилище Microsoft Azure"
	description="Узнайте, как создавать задания импорта и экспорта на классическом портале Azure для передачи данных в хранилище BLOB-объектов."
	authors="renashahmsft"
	manager="aungoo"
	editor="tysonn"
	services="storage"
	documentationCenter=""/>

<tags
	ms.service="storage"
	ms.workload="storage"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="02/29/2016"
	ms.author="renash"/>


# Использование службы импорта и экспорта Azure для передачи данных в хранилище BLOB-объектов

## Обзор

Службу импорта и экспорта Azure можно использовать для передачи больших объемов данных файлов в хранилище BLOB-объектов Azure в случаях, когда затраты на передачу по сети слишком высоки или такая передача не представляется возможной. Служба импорта и экспорта можно также использовать для экономичной передачи больших объемов данных, находящихся в хранилище BLOB-объектов, на локальные ресурсы.

Для передачи больших объемов данных файлов в хранилище BLOB-объектов можно переслать один или несколько жестких дисков с нужными данными в центр обработки данных Azure, где данные будут загружены в вашу учетную запись хранения. Аналогичным образом для экспорта данных из хранилища BLOB-объектов можно отправить в центр обработки данных Azure пустые жесткие диски, после чего на них будут скопированы BLOB-данные из вашей учетной записи хранения и диски будут возвращены. Прежде чем отправить диск, содержащий данные, необходимо зашифровать данные на диске на диске; при экспорте службой импорта и экспорта ваших данных они также будут зашифрованы перед отправкой.

Можно создавать и управлять заданиями импорта и экспорта одним из двух способов:

- С помощью [классического портала](https://manage.windowsazure.com) Azure.
- с помощью интерфейса REST службы.

В этой статье представлен обзор службы импорта и экспорта, а также описано, как использовать классический портал Azure для работы со службой импорта и экспорта. Сведения об интерфейсе REST API см. в разделе [Справка по интерфейсу REST API службы импорта и экспорта хранилища](http://go.microsoft.com/fwlink/?LinkID=329099).

## Введение в службы импорта и экспорта ##

Чтобы начать процесс импорта или экспорта из хранилища BLOB-объектов, необходимо сначала создать *задание*. Заданием может являться *задание импорта* или *задание экспорта*:

- Создайте задание импорта, если необходимо передать локальные данные в большие двоичные объекты, которые содержатся в вашей учетной записи хранения Azure.
- Создайте задание экспорта, если необходимо передать данные, которые в настоящее время хранятся в BLOB-объектах вашей учетной записи хранения, на отправленные вам жесткие диски.

При создании задания вы уведомляете службу импорта и экспорта о том, что отправите один или несколько жестких дисков в центр обработки данных Azure. При создании задания импорта необходимо отправить жесткие диски, содержащие файлы данных. При создании задания экспорта необходимо отправить пустые жесткие диски.

Чтобы подготовить диск для отправки в рамках задания импорта, необходимо запустить **Средство импорт/экспорта Microsoft Azure**, которое облегчает копирование данных на диск, шифрование данных на диске с использованием BitLocker и создание файлов журналов для дисков, что обсуждается ниже.

> [AZURE.NOTE] Данные на диске должны быть зашифрованы с помощью технологии шифрования дисков BitLocker. Это защитит данные во время пересылки. В рамках задания экспорта служба импорта и экспорта зашифрует данные перед отправкой диска на ваш адрес.

При создании задания импорта или экспорта также понадобится *идентификатор диска*, который является серийным номером, назначенным производителем для определенного жесткого диска. Идентификатор отображается на внешней стороне диска.

### Требования и область применения

1.	**Подписки и учетные записи хранения:** для использования службы импорта и экспорта у вас должна быть действующая подписка Azure и одна или несколько классических учетных записей хранения. Каждое задание может использоваться для обмена данными только с одной классической учетной записью хранения. Другими словами задание не может распространяться на несколько учетных записей хранения. Сведения о создании новой учетной записи хранения см. в разделе [Создание учетной записи хранения](storage-create-storage-account.md#create-a-storage-account). 

  > [AZURE.NOTE] Учетные записи хранения, использующие модель ARM, пока не поддерживаются.

2.	**Жесткие диски:** для использования со службой импорта и экспорта поддерживаются только внутренние жесткие диски форм-фактора 3,5 дюйма, SATA II или III. Поддерживаются жесткие диски емкостью до 8 ТБ. В заданиях импорта на диске будет обрабатываться только первый том данных. Том с данными должен быть отформатирован в NTFS. Диск SATA II/III можно подключить как внешний диск к большинству компьютеров, используя для этого внешний USB-адаптер SATA II/III.
3.	**Шифрование BitLocker:** все данные, хранящиеся на жестких дисках, должны быть зашифрованы с помощью BitLocker с ключами шифрования, защищенными цифровыми паролями.
4.	**Целевые большие двоичные объекты:** данные могут быть переданы в блочные и страничные большие двоичные объекты или получены из них.
5.	**Количество заданий:** у клиента может быть до 20 заданий на одну учетную запись хранения.
6.	**Максимальный размер задания:** размер задания определяется емкостью используемых жестких дисков и максимальным объемом данных, который может быть сохранен в учетной записи хранения. Каждое задание может содержать не более 10 жестких дисков.
7.  **Поддерживаемые операционные системы:** клиент может использовать одну из следующих 64-разрядных операционных систем для подготовки жесткого диска с помощью средства импорта и экспорта Azure перед отправкой в Azure: Windows 7, Windows 8, Windows 8.1, Windows 10*, Windows Server 2008 R2, Windows Server 2012, Windows Server 2012 R2.  

  > [AZURE.IMPORTANT]
  >  
  >  - При использовании компьютера Windows 10 для подготовки жесткого диска скачайте последнюю версию средства импорта и экспорта Azure.
  >  
  >  - Эта служба не поддерживает внешние жесткие диски, имеющие встроенный USB-адаптер. Не подготавливайте внешний жесткий диск. Диск во внешнем корпусе также нельзя использовать для импорта данных. Используйте **внутренний** жесткий диск 3,5 дюйма, SATA II или III. Если диск SATA нельзя подключить непосредственно к компьютеру, воспользуйтесь внешним адаптером SATA-USB. Ознакомьтесь со списком рекомендуемых адаптеров в разделе вопросов и ответов.

## Создание задания импорта на классическом портале Azure##

Создание задания импорта для службы импорта и экспорта о том, что будет отправлен один или несколько дисков с данными в центр обработки данных для последующего импорта в учетную запись хранения.

### Подготовка дисков

Перед созданием задания импорта подготовьте свои диски с помощью средства импорта и экспорта Azure. Для получения дополнительной информации о средстве импорта и экспорта Azure см. раздел [Справочник по средству импорта и экспорта Azure](http://go.microsoft.com/fwlink/?LinkId=329032). [Средство импорта и экспорта Azure](http://go.microsoft.com/fwlink/?LinkID=301900&clcid=0x409) можно скачать как автономный пакет.

Для подготовки дисков выполните следующие три действия.

1.	Определите данные для импорта, а также количество дисков, которое понадобится.
2.	Определите целевые BLOB-объекты для ваших данных в хранилище BLOB-объектов.
3.	Используйте средство импорта и экспорта Azure для копирования данных на один или несколько жестких дисков.

Средство импорта и экспорта Azure создает файл *журнала диска* для каждого диска при его подготовке. Файл журнала диска хранится на локальном компьютере, а не на самом диске. Файл журнала передается при создании задания импорта. Файл журнала диска включает идентификатор диска и ключ BitLocker, а также другие сведения о диске.

### Создание задания импорта

1.	После подготовки диска перейдите к своей учетной записи хранения на [классическом портале](https://manage.windowsazure.com) Azure и просмотрите панель мониторинга. В разделе **Сводка**, щелкните **Создать задание импорта**

2.	На шаге 1 мастера укажите, что вы подготовили диск и уже имеется доступный файл журнала

3.	На шаге 2 предоставьте контактные сведения лица, ответственного за это задание импорта. Если необходимо сохранить подробные данные журнала задания импорта, установите флажок **Сохранить подробный журнал в контейнере blob-объектов 'waimportexport'**.

4.	На шаге 3 передайте файлы журналов диска, полученные на этапе подготовки диска. Необходимо передать один файл для каждого подготовленного диска.

	![Создание задание импорта – шаг 3][import-job-03]

5.	На шаге 4 введите описательное имя для задания импорта. Обратите внимание,что вводимое имя может содержать только строчные буквы, цифры, дефисы и подчеркивания, кроме того, оно должно начинаться с буквы и не содержать пробелов. Выбранное имя будет использоваться для отслеживания выполняемых заданий, а также после их завершения.

	Далее выберите регион своего центра обработки данных из списка. Регион центра обработки данных будет означать центр обработки данных, куда следует направить пакет. Дополнительные сведения см. в приведенном ниже разделе "Часто задаваемые вопросы".

6. 	На шаге 5 выберите транспортного агента из списка и введите его номер учетной записи. Майкрософт будет использовать эту учетную запись для отправки дисков вам обратно после завершения задания импорта.

	Если у вас есть номер для отслеживания отправки, выберите агента по доставке из списка и введите свой номер.

	Если у вас пока нет номера отслеживания, выберите **Я предоставлю данные об отправке этого задания импорта после отправки посылки**, затем завершите процесс импорта.

7. Чтобы ввести номер для отслеживания после отправки пакета, вернитесь на страницу **Импорт и экспорт** своей учетной записи хранения на классическом портале Azure, выберите задание из списка и параметр **Информация об отправке**. Просмотрите мастер и введите номер для отслеживания на шаге 2.

	Если номер отслеживания не обновляется в течение 2 недель с момента создания задания, срок действия задания истекает.

	Если задание находится в состоянии создания, отправки или передачи, можно также обновить номер учетной записи транспортного агента на шаге 2 мастера. После того, как задание переходит в состояние упаковки, обновить номер учетной записи транспортного агента для него нельзя.

## Создание задания экспорта на классическом портале Azure##

Создайте задание экспорта для уведомления службы импорта и экспорта о том, что вы отправите один или несколько пустых жестких дисков в центр обработке данных, чтобы данные были экспортированы из вашей учетной записи хранения на диски с последующей отправкой на ваш адрес.

1. 	Чтобы создать задание экспорта, перейдите к учетной записи хранения на [классическом портале](https://manage.windowsazure.com) Azure и просмотрите панель мониторинга. В разделе **Сводка** щелкните **Создать задание экспорта** и выполните указания мастера.

2. 	На шаге 2 предоставьте контактные сведения лица, ответственного за это задание экспорта. Если необходимо сохранить подробные данные журнала задания экспорта, установите флажок **Сохранить подробный журнал в контейнере blob-объектов 'waimportexport'**.

3.	На шаге 3 укажите, какие данные BLOB-объектов необходимо экспортировать из своей учетной записи хранения на пустой диск или диски. Можно экспортировать все данные blob-объектов в учетной записи хранения или выбрать blob-объекты, или их наборы.

	![Создание задание экспорта – шаг 3][export-job-03]

	- Чтобы указать blob-объект для экспорта, используйте селектор **Равно** и укажите относительный путь к blob-объекту, начиная с имени контейнера. Используйте *$root* для указания корневого контейнера.
	- Чтобы указать все blob-объекты, начинающиеся с префикса, используйте селектор **Начинается с** и укажите префикс, которому предшествует косая черта "/". Префикс может являться префиксом имени контейнера, полным именем контейнера или полным именем контейнера с префиксом имени blob-объекта.

	В таблице приведены примеры допустимых путей к blob-объектам:

	Выбор|Путь к BLOB-объекту|Описание
	---|---|---
	Начинается с|/|Экспорт всех blob-объектов в учетной записи хранения
	Начинается с|/$root/|Экспорт всех blob-объектов в корневом контейнере
	Начинается с|/book|Экспортирует все blob-объекты в любом контейнере, который начинается с префикса**book**
	Начинается с|/music/|Экспортирует все blob-объекты в контейнере **music**
	Начинается с|/music/love|Экспортирует все blob-объекты в контейнере **music**, которые начинаются с префикса **love**
	Равно|$root/logo.bmp|Экспортирует blob-объект **logo.bmp** в корневом контейнере
	Равно|videos/story.mp4|Экспортирует blob-объект **story.mp4** в контейнере **videos**


4.	На шаге 4 введите описательное имя для задания экспорта. Обратите внимание,что вводимое имя может содержать только строчные буквы, цифры, дефисы и подчеркивания, кроме того, оно должно начинаться с буквы и не содержать пробелов.

	Регион центра обработки данных будет означать центр обработки данных, куда следует направить посылку. Дополнительные сведения см. в приведенном ниже разделе "Часто задаваемые вопросы".

5. 	На шаге 5 выберите транспортного агента из списка и введите его номер учетной записи. Майкрософт будет использовать эту учетную запись для отправки дисков вам обратно после завершения задания экспорта.

	Если у вас есть номер для отслеживания отправки, выберите агента по доставке из списка и введите свой номер.

	Если у вас пока нет номера отслеживания, выберите **Я предоставлю данные об отправке этого задания экспорта после отправки пакета**, затем завершите процесс экспорта.

6. Чтобы ввести номер для отслеживания после отправки пакета, вернитесь на страницу **Импорт и экспорт** своей учетной записи хранения на классическом портале Azure, выберите задание из списка и параметр **Информация об отправке**. Просмотрите мастер и введите номер для отслеживания на шаге 2.

	Если номер отслеживания не обновляется в течение 2 недель с момента создания задания, срок действия задания истекает.

	Если задание находится в состоянии создания, отправки или передачи, можно также обновить номер учетной записи транспортного агента на шаге 2 мастера. После того, как задание переходит в состояние упаковки, обновить номер учетной записи транспортного агента для него нельзя.

> [AZURE.NOTE] Если BLOB-объекты для экспорта используются во время копирования на жесткий диск, службы импорта и экспорта Azure сделают снимок большого двоичного объекта и скопируют моментальный снимок.

## Отслеживание состояния задания на классическом портале##

Вы можете отслеживать состояние задания импорта или экспорта на классическом портале Azure. Перейдите в учетную запись хранения на классическом портале Azure, затем щелкните вкладку **Импорт и экспорт**. На странице появится список заданий. Можно отфильтровать список по состоянию задания, имени задания, типу задания или номеру отслеживания.

В таблице описывается, что означает каждое обозначение состояния задания.

Состояние задания|Описание
---|---
Создание|Ваше задание было создано, однако вы пока не предоставили данные об отправке.
Отправка|Ваше задание было создано, и вы предоставили данные об отправке.
Передача|Данные передаются с жесткого диска (для задания импорта) или на жесткий диск (для задания экспорта).
Упаковка|Передача данных завершена, жесткий диск подготавливается для отправки на ваш адрес.
Завершено|Жесткий диск был отправлен на ваш адрес.


## Просмотр ключей BitLocker для задания экспорта ##

Для заданий экспорта можно просмотреть и скопировать ключи BitLocker, созданные службой для вашего диска, чтобы можно было расшифровать экспортированные данные после получения дисков из центра обработки данных Azure. Перейдите в учетную запись хранения на классическом портале Azure, затем щелкните вкладку **Импорт и экспорт**. Выберите задание экспорта из списка и нажмите кнопку **Просмотреть ключи**. Ключи BitLocker отображаются, как показано ниже:

![Просмотр ключей BitLocker для задания экспорта][export-job-bitlocker-keys]

## Часто задаваемые вопросы ##

### Общие сведения

**Как определяется цена на службу импорта и экспорта?**

- Информацию о ценах см. в разделе [Цены на импорт и экспорт](http://go.microsoft.com/fwlink/?LinkId=329033).

**Сколько времени уйдет на импорт или экспорт моих данных?**

- Некоторое время уйдет на поставку дисков, а также несколько часов на копирование каждого ТБ данных.

**Какие типы интерфейсов поддерживаются?**

- Службы импорта и экспорта поддерживают 3,5-дюймовые внутренние жесткие диски (HDD) SATA II/III Можно использовать следующие конвертеры для передачи данных на устройствах с USB на SATA перед отправкой:
	- Anker 68UPSATAA-02BU
	- Anker 68UPSHHDS-BU
	- Startech SATADOCK22UE

> [AZURE.NOTE] Если вы используете конвертер, не указанный в списке выше, попробуйте проверить работу своего конвертера при работе со средством импорта и экспорта Azure для подготовки диска. Если все нормально, то приобретать поддерживаемый конвертер не нужно.

- Внешний жесткий диск со встроенным USB-адаптером не поддерживается.

**Что мне нужно делать, чтобы импортировать или экспортировать более 10 дисков?**

- В предварительной версии службы импорта и экспорта в рамках одного задания импорта или экспорта может обрабатываться только 10 дисков. Если необходимо поставить более 10 дисков, можно создать несколько заданий.

**Что произойдет, если я случайно отправлю диски, которые не соответствуют требованиям поддержки?**

- Центр обработки данных Azure вернет диски, которые не соответствуют требованиям поддержки. Если только некоторые диски в посылке соответствуют требованиям поддержки, эти диски будут обработаны, а диски, не соответствующие требованиям, будут возвращены вам.

### Управление заданиями импорта и экспорта

**Что произойдет с моими заданиями импорта и экспорта, если я удалю свою учетную запись хранения Azure?**

- При удалении вашей учетной записи хранения все задания импорта и экспорта Azure будут удалены вместе с вашей учетной записью.  

**Можно ли отменить свое задание?**

- Можно отменить задание, если его состояние указано как "Создание" или "Отправка".

**Как долго можно видеть состояние выполненных заданий на классическом портале Azure?**

- Состояние выполненных заданий можно просматривать в течение 90 дней. Через 90 дней все завершенные задания будут удалены.

**Является ли шифрование Bitlocker обязательным требованием?**

- Да. Все диски должны быть зашифрованы с помощью ключа BitLocker.

**Вы форматируете диски перед их возвращением?**

- Нет. Все диски должны быть подготовлены с использованием BitLocker.

**Нужно ли провести какую-либо подготовку диска при создании задания экспорта?**
- Нет, но рекомендуется использовать некоторые предварительные проверки. Проверьте необходимое количество дисков с помощью команды PreviewExport средства импорта и экспорта Azure. Дополнительные сведения см. в разделе [Предварительный просмотр использования диска для задания экспорта](https://msdn.microsoft.com/library/azure/dn722414.aspx). Это позволяет просмотреть использование диска для выбранных больших двоичных объектов в зависимости от объема дисков, которые вы собираетесь использовать. Также убедитесь, что вы можете считывать и записывать на жесткий диск, который будет предоставлен для задания экспорта.

### Отправка

**Работа с какими курьерскими службами поддерживается?**

- Для регионов в США и Европе поддерживается только [Federal Express](http://www.fedex.com/us/oadr/) (FedEx). Все посылки будут возвращаться только через FedEx Ground или FedEx International Economy (международный экономичный тариф).

- Для регионов в Азии поддерживается только [DHL](http://www.dhl.com/). Все посылки будут возвращаться через DHL Express Worldwide.

	> [AZURE.IMPORTANT] Необходимо предоставить номер отслеживания для службы импорта и экспорта Azure; в противном случае задание не будет обработано.

**Будем ли мы нести какие-либо расходы за обратную отправку?**

- Майкрософт будет использовать учетную запись транспортного агента, которую вы указали во время создания задания для отправки дисков на ваш обратный адрес из центра обработки данных. Не забудьте указать учетную запись транспортного агента для для региона ЦОД, который его поддерживает Вы можете создать учетную запись транспортного агента для [FedEx](http://www.fedex.com/us/oadr/) (США и Европа) или [DHL](http://www.dhl.com/) (Азия), если ее у вас еще нет.

- Стоимость обратной пересылки будет начисляться на вашу учетную запись транспортного агента в зависимости от того, с кем вы работаете.

**Откуда и куда можно пересылать свои данные?**

- Служба поддерживает импорт данных в учетные записи хранения и экспорт данных из учетных записей хранения в следующих регионах:
	- Восток США
	- Запад США
	- Северо-центральный регион США
	- Южно-центральный регион США
	- Северная Европа
	- Западная Европа
	- Восточная Азия
	- Юго-Восточная Азия

- Вам будет предоставлен почтовый адрес в регионе вашей учетной записи хранения. Например, если вы живете в США, в ваша учетная запись хранения размещена в Западной Европе, вам будет указан почтовый адрес в Западной Европе для отправки дисков.

	> [AZURE.IMPORTANT] Обратите внимание, что отправляемые физические носители могут пересекать международные границы. Вы несете ответственность за то, что ваши физические носители и данные импортируются и (или0 экспортируются в соответствии с действующим законодательством. Перед отправкой физических носителей проконсультируйтесь и удостоверьтесь, что они эти носители и данные могут быть отправлены в определенный центр обработки данных на законных основаниях. Это поможет Майкрософт своевременно получить посылку.

- При отправке пакетов должны соблюдаться условия раздела [Условия обслуживания Мicrosoft Azure](https://azure.microsoft.com/support/legal/services-terms/).

**Можно ли приобрести диски для заданий импорта и экспорта у корпорации Майкрософт?**

- 	Нет. Необходимо предоставлять собственные диски для заданий импорта и экспорта.

**Что должно быть в пакете?**

- Отправляйте только жесткие диски. Не посылайте ничего другого, например, кабели питания или USB-кабели.

**Почему мое состояние на классическом портале находится в состоянии *Доставка*, и при этом на веб-сайте оператора почтовой доставки моя посылка отображается как доставленная?**

- Изменение состояния с *Доставка* на *Передача* на портале происходит в момент начала обработки диска. Если диск поступил в наше распоряжение, но его обработка еще не началась, задание будет находиться в состоянии *Доставка*.

## См. также

[Приступая к работе со служебной программой командной строки AzCopy](storage-use-azcopy.md)


[import-job-03]: ./media/storage-import-export-service/import-job-03.png
[export-job-03]: ./media/storage-import-export-service/export-job-03.png
[export-job-bitlocker-keys]: ./media/storage-import-export-service/export-job-bitlocker-keys.png

<!---HONumber=AcomDC_0406_2016-->