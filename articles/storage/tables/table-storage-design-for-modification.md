---
title: Проектирование таблиц службы хранилища Azure для оптимизации изменения данных | Документация Майкрософт
description: Проектирование таблиц для оптимизации изменения данных в хранилище таблиц Azure.
services: storage
documentationcenter: na
author: MarkMcGeeAtAquent
manager: kfile
ms.assetid: 8e228b0c-2998-4462-8101-9f16517393ca
ms.service: storage
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-services
ms.date: 04/23/2018
ms.author: sngun
ms.openlocfilehash: 6c008175f01521ce4f96d13e58244dc72d9f6990
ms.sourcegitcommit: 266fe4c2216c0420e415d733cd3abbf94994533d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/01/2018
ms.locfileid: "34660382"
---
# <a name="design-for-data-modification"></a>Разработка для изменения данных
В этой статье рассматриваются вопросы разработки для оптимизации операций вставки, обновления и удаления. В некоторых случаях будет необходимо тщательно проанализировать модели оптимизации запросов и модели оптимизации изменения данных. Действия выполняются так же, как в модели для реляционных баз данных (несмотря на то, что в реляционной базе данных существуют другие методы управления компромиссами при разработке). В разделе [Шаблоны для разработки таблиц](#table-design-patterns) приводится описание шаблонов разработки для службы таблиц и рассматриваются некоторые компромиссные варианты. На практике вы увидите, что многие модели, оптимизированные для выполнения запросов к сущностям, также хорошо подходят для изменения сущностей.  

## <a name="optimize-the-performance-of-insert-update-and-delete-operations"></a>Оптимизация производительности операций вставки, обновления и удаления
Чтобы обновить или удалить сущность, ее необходимо определить с помощью значений **PartitionKey** и **RowKey**. В связи с этим при выборе значений **PartitionKey** и **RowKey** для изменения сущностей следует придерживаться тех же условий, которые действуют для поддержки точечных запросов. Это позволит максимально эффективно определять сущности. Следует исключить неэффективный просмотр раздела или таблицы для поиска сущности с целью обнаружения значений **PartitionKey** и **RowKey**, необходимых для ее обновления или удаления.  

Следующие шаблоны в разделе [Шаблоны для разработки таблиц](#table-design-patterns) будут полезны для оптимизации производительности операций вставки, обновления и удаления.  

* [Шаблон для удаления больших объемов сущностей](table-storage-design-patterns.md#high-volume-delete-pattern) — включение операции удаления больших объемов сущностей за счет сохранения всех сущностей для одновременного удаления в отдельной таблице. Удаление сущностей происходит при удалении таблицы.  
* [Шаблон для рядов данных](table-storage-design-patterns.md#data-series-pattern) — хранение целых рядов данных в одной сущности для сокращения количества выполняемых запросов.  
* [Шаблон для масштабных сущностей](table-storage-design-patterns.md#wide-entities-pattern) — использование нескольких физических сущностей для хранения логических сущностей с более чем 252 свойствами.  
* [Шаблон для сущностей больших размеров](table-storage-design-patterns.md#large-entities-pattern) — для хранения больших по объему значений свойств используйте хранилище больших двоичных объектов.  

## <a name="ensure-consistency-in-your-stored-entities"></a>Обеспечение согласованности хранимых сущностей
Другим фактором, который влияет на выбор ключей для оптимизации изменения данных, является обеспечение согласованности с помощью атомарных операций. Транзакции группы сущностей можно использовать только для работы с сущностями, хранящимися в одном разделе.  

Следующие шаблоны в разделе [Шаблоны для разработки таблиц](table-storage-design-patterns.md) предназначены для управления согласованностью.  

* [Шаблон вторичного индекса внутри раздела](table-storage-design-patterns.md#intra-partition-secondary-index-pattern) — хранение нескольких копий каждой сущности с помощью различных значений **RowKey** (в одном разделе) для выполнения быстрых и эффективных операций поиска и активации альтернативных порядков сортировки с помощью различных значений **RowKey**.  
* [Шаблон вторичного индекса в разных разделах](table-storage-design-patterns.md#inter-partition-secondary-index-pattern) — хранение нескольких копий каждой сущности с помощью различных значений RowKey в отдельных разделах или отдельных таблицах для выполнения быстрых и эффективных операций поиска и активации альтернативных порядков сортировки с помощью различных значений **RowKey**.  
* [Шаблон для согласованных транзакций](table-storage-design-patterns.md#eventually-consistent-transactions-pattern) — обеспечение согласованного поведения в рамках границ раздела или границ системы хранения с помощью запросов Azure.
* [Шаблон сущностей индекса](table-storage-design-patterns.md#index-entities-pattern) — поддержка сущностей индекса для выполнения эффективных операций поиска, возвращающих списки сущностей.  
* [Шаблон денормализации](table-storage-design-patterns.md#denormalization-pattern) — объединение связанных данных в одной сущности для извлечения необходимых данных с помощью одного точечного запроса.  
* [Шаблон для рядов данных](table-storage-design-patterns.md#data-series-pattern) — хранение целых рядов данных в одной сущности для сокращения количества выполняемых запросов.  

Сведения о транзакциях группы сущностей см. в [этом разделе](table-storage-design.md#entity-group-transactions).  

## <a name="ensure-your-design-for-efficient-modifications-facilitates-efficient-queries"></a>Использование эффективных запросов в разработке для эффективных изменений
Во многих случаях разработка эффективных запросов способствует эффективным изменениям. Однако в каждом конкретном случае всегда следует проверять, так ли это. Некоторые шаблоны в разделе [Шаблоны для разработки таблиц](table-storage-design-patterns.md) позволяют явным образом сопоставить выгоды и недостатки процессов создания запросов и изменения сущностей. Вместе с этим всегда необходимо учитывать количество операций каждого типа.  

Следующие шаблоны в разделе [Шаблоны для разработки](table-storage-design-patterns.md) таблиц предназначены для определения компромиссных вариантов между разработкой для эффективных запросов и разработкой для эффективного изменения данных.  

* [Шаблон составного ключа](table-storage-design-patterns.md#compound-key-pattern) — использование составных значений **RowKey** для предоставления клиенту возможности выполнять поиск связанных данных с помощью одного точечного запроса.  
* [Шаблон для заключительного фрагмента журнала](table-storage-design-patterns.md#log-tail-pattern) — извлечение *n* сущностей, недавно добавленных в раздел, с помощью значения **RowKey** , выполняющего сортировку по дате и времени в обратном порядке.  
