---
title: Настройка доменного имени для конечной точки хранилища BLOB-объектов | Microsoft Docs
description: Узнайте, как сопоставить пользовательский домен с конечной точкой хранилища BLOB-объектов для учетной записи хранения Azure на классическом портале Azure.
services: storage
documentationcenter: ''
author: tamram
manager: carmonm
editor: tysonn

ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 10/18/2016
ms.author: tamram

---
# <a name="configure-a-custom-domain-name-for-your-blob-storage-endpoint"></a>Настройка пользовательского доменного имени для конечной точки хранилища BLOB-объектов
## <a name="overview"></a>Обзор
Можно настроить пользовательский домен для доступа к BLOB-данным в учетной записи хранения Azure. Конечной точкой по умолчанию для хранилища BLOB-объектов является `<storage-account-name>.blob.core.windows.net`. После сопоставления личного домена и поддомена, например **www.contoso.com** , с конечной точкой больших двоичных объектов для вашей учетной записи хранения пользователи также смогут, используя этот домен, получать доступ к данным больших двоичных объектов в учетной записи хранения.

> [!IMPORTANT]
> Служба хранилища Azure пока не поддерживает протокол HTTPS для личных доменов. Мы понимаем, что такая возможность нужна пользователям, поэтому добавим ее в будущих выпусках.
> 
> 

Существует два способа указать пользовательский домен для конечной точки BLOB-объекта в учетной записи хранения. Самым простым способом является создание записи CNAME, сопоставляющей пользовательский домен и поддомен конечной точке BLOB-объекта. Запись CNAME — это компонент DNS, позволяющий сопоставить исходный и конечный домены. В этом случае исходный домен является пользовательским доменом и поддоменом — обратите внимание, что поддомен всегда является обязательным. Конечный домен является конечной точкой службы BLOB-объектов.

Однако при сопоставлении личного домена конечной точке BLOB-объекта возникает непродолжительный простой домена на время его регистрации на [классическом портале Azure](https://manage.windowsazure.com). Если пользовательский домен в это время поддерживает приложение с заданным соглашением об уровне обслуживания (SLA), не допускающим простоя, то для промежуточного шага регистрации можно использовать поддомен Azure **asverify** , чтобы пользователи могли получать доступ к вашему домену во время выполнения сопоставления DNS.

В следующей таблице приведены примеры URL-адресов для доступа к BLOB-данным в учетной записи хранения с именем **mystorageaccount**. Пользовательский домен, зарегистрированный для этой учетной записи хранения: **www.contoso.com**

| Тип ресурса | Форматы URL |
| --- | --- |
| Учетная запись хранения |**URL-адрес по умолчанию:** http://mystorageaccount.blob.core.windows.net<p>**URL-адрес личного домена:** http://www.contoso.com</td> |
| BLOB-объект |**URL-адрес по умолчанию:** http://mystorageaccount.blob.core.windows.net/mycontainer/myblob<p>**URL-адрес личного домена:** http://www.contoso.com/mycontainer/myblob |
| Корневой контейнер |**URL-адрес по умолчанию:** http://mystorageaccount.blob.core.windows.net/myblob или http://mystorageaccount.blob.core.windows.net/$root/myblob<p>**URL-адрес личного домена:** http://www.contoso.com/myblob или http://www.contoso.com/$root/myblob |

## <a name="register-a-custom-domain-for-your-storage-account"></a>Регистрация пользовательского домена для учетной записи хранения
Эта процедура используется для регистрации пользовательского домена, если допускается кратковременная недоступность домена для пользователей домена или если в пользовательском домене в данный момент не размещается никакое приложение.

Если личный домен поддерживает приложение, не допускающее простоя, то следует использовать процедуру, описанную в разделе <a href="#register-a-custom-domain-for-your-storage-account-using-the-intermediary-asverify-subdomain">Регистрация пользовательского домена для учетной записи хранения с помощью промежуточного поддомена asverify</a>.

Чтобы настроить имя пользовательского домена, необходимо создать новую запись CNAME с помощью вашего регистратора домена. Эта запись CNAME определяет псевдоним для имени домена. В этом случае она сопоставляет адрес пользовательского домена конечной точке хранилища BLOB-объектов для используемой учетной записи хранения.

Каждый регистратор имеет похожий, но немного отличный способ указания записи CNAME, хотя используется одна и та же концепция. Обратите внимание, что многие базовые пакеты регистрации домена не предлагают настройки DNS, поэтому может потребоваться обновить пакет регистрации домена, прежде чем создавать запись CNAME.

1. На [классическом портале Azure](https://manage.windowsazure.com)откройте вкладку **Хранилище** .
2. На вкладке **Хранилище** щелкните имя учетной записи хранения, для которой нужно выполнить сопоставление пользовательского домена.
3. Выберите вкладку **Настройка** .
4. В нижней части экрана щелкните **Управление доменом** и откройте окно **Управление личным доменом**. Верхняя часть диалогового окна содержит сведения о том, как создать запись CNAME. В рамках этой процедуры не обращайте внимания на указания, относящиеся к поддомену **asverify** .
5. Войдите на веб-сайт своего регистратора DNS и перейдите на страницу управления DNS. Это может быть такой раздел, как **Доменное имя**, **DNS** или **Управление сервером доменных имен**.
6. Найдите раздел управления записями CNAME. Может понадобиться перейти на страницу дополнительных параметров и найти слова **CNAME**, **Псевдоним** или **Поддомены**.
7. Создайте новую запись CNAME и укажите псевдоним поддомена, например **www** или **photos**. Введите имя узла, являющегося конечной точкой службы BLOB-объектов, в формате **mystorageaccount.blob.core.windows.net** (где **mystorageaccount** — имя вашей учетной записи хранения). Имя используемого узла содержится в тексте диалогового окна **Управление пользовательским доменом** .
8. Создав запись CNAME, вернитесь в диалоговое окно **Управление личным доменом** и введите имя своего личного домена, включая поддомен, в поле **Имя личного домена**. Например, если используются домен **contoso.com** и поддомен **www**, введите **www.contoso.com**. Если используется поддомен **photos**, введите **photos.contoso.com**. Обратите внимание, что поддомен является обязательным.
9. Чтобы зарегистрировать пользовательский домен, нажмите кнопку **Зарегистрировать** .
   
    Если регистрация прошла успешно, появится сообщение **Ваш пользовательский домен активен**. Теперь пользователи при наличии соответствующих разрешений могут просматривать BLOB-данные вашего пользовательского домена.

## <a name="register-a-custom-domain-for-your-storage-account-using-the-intermediary-asverify-subdomain"></a>Регистрация пользовательского домена для учетной записи хранения с помощью промежуточного поддомена asverify
Эта процедура используется для регистрации пользовательского домена, который в данное время поддерживает приложения с соглашением об уровне обслуживания, запрещающим простои. Создавая запись CNAME, указывающую из asverify.&lt;поддомен&gt;.&lt;пользовательский_домен&gt; в asverify.&lt;учетная_запись_хранения&gt;.blob.core.windows.net, можно выполнить предварительную регистрацию домена в Azure. Затем можно создать вторую запись CNAME, указывающую c &lt;поддомен&gt;.&lt;личный_домен&gt; на &lt;учетная_запись_хранения&gt;. blob.core.windows.net, и с этого момента трафик для личного домена будет направляться в конечную точку BLOB-объекта.

Поддомен asverify представляет собой специальный поддомен, распознаваемый Azure. Добавляя **asverify** в свой поддомен, вы разрешаете Azure распознавать ваш пользовательский домен без изменения DNS-записи для этого домена. После выполненного изменения DNS-запись для домена будет без простоя сопоставлена конечной точке BLOB-объекта.

1. На [классическом портале Azure](https://manage.windowsazure.com)откройте вкладку **Хранилище** .
2. На вкладке **Хранилище** щелкните имя учетной записи хранения, для которой нужно выполнить сопоставление пользовательского домена.
3. Выберите вкладку **Настройка** .
4. В нижней части экрана щелкните **Управление доменом** и откройте окно **Управление личным доменом**. Верхняя часть диалогового окна содержит сведения о том, как создать запись CNAME, используя поддомен **asverify** .
5. Войдите на веб-сайт своего регистратора DNS и перейдите на страницу управления DNS. Это может быть такой раздел, как **Доменное имя**, **DNS** или **Управление сервером доменных имен**.
6. Найдите раздел управления записями CNAME. Может понадобиться перейти на страницу дополнительных параметров и найти слова **CNAME**, **Псевдоним** или **Поддомены**.
7. Создайте новую запись CNAME и укажите псевдоним поддомена, который содержит поддомен asverify. Например, для поддомена может использоваться формат **asverify.www** или **asverify.photos**. Введите имя узла, являющегося конечной точкой службы BLOB-объектов, в формате **asverify.mystorageaccount.blob.core.windows.net** (где **mystorageaccount** — имя вашей учетной записи хранения). Имя используемого узла содержится в тексте диалогового окна **Управление пользовательским доменом** .
8. Создав запись CNAME, вернитесь в диалоговое окно **Управление личным доменом** и введите имя своего личного домена в поле **Имя личного домена**. Например, если используются домен **contoso.com** и поддомен **www**, введите **www.contoso.com**. Если используется поддомен **photos**, введите **photos.contoso.com**. Обратите внимание, что поддомен является обязательным.
9. Установите флажок **Дополнительно: использовать поддомен asverify для предварительной регистрации пользовательского домена**.
10. Чтобы предварительно зарегистрировать пользовательский домен, нажмите кнопку **Зарегистрировать** .
    
    Если предварительная регистрация прошла успешно, появится сообщение **Ваш пользовательский домен активен**.
11. На этом этапе ваш пользовательский домен был проверен Azure, но трафик, идущий в ваш домен, еще не маршрутизирован в вашу учетную запись хранения. Для завершения процесса вернитесь на веб-сайт регистратора DNS и создайте другую запись CNAME, сопоставляющую поддомен конечной точке службы BLOB-объектов. Например, можно указать дочерний домен как **www** или **photos**, а имя узла как **mystorageaccount.blob.core.windows.net** (где **mystorageaccount** — имя вашей учетной записи хранения). Это действие завершает регистрацию пользовательского домена.
12. Наконец, можно удалить запись CNAME, созданную с помощью **asverify**, так как она была необходима только в качестве промежуточного шага.

Теперь пользователи при наличии соответствующих разрешений могут просматривать BLOB-данные вашего пользовательского домена.

## <a name="verify-that-the-custom-domain-references-your-blob-service-endpoint"></a>Проверка того, что пользовательский домен ссылается на конечную точку службы BLOB-объектов
Чтобы убедиться, что ваш пользовательский домен действительно сопоставлен конечной точке службы BLOB-объектов, создайте BLOB-объект в общедоступном контейнере в вашей учетной записи хранения. Затем, чтобы получить доступ к этому BLOB-объекту, используйте в веб-браузере URI следующего формата:

* http://<*поддомен.пользовательский_домен*>/<*mycontainer*>/<*myblob*>

Например, можно использовать следующий URI для доступа к веб-форме через пользовательский поддомен **photos.contoso.com** (который выполняет сопоставление с BLOB-объектом в вашем контейнере **myforms**):

* http://photos.contoso.com/myforms/applicationform.htm

## <a name="unregister-a-custom-domain-from-your-storage-account"></a>Отмена регистрации пользовательского домена для учетной записи хранения
Чтобы отменить регистрацию пользовательского домена, выполните следующие действия. 

1. Перейдите на [классический портал Azure](https://manage.windowsazure.com). 
2. В области навигации щелкните **Хранилище**. 
3. На странице **Хранилище** щелкните имя учетной записи хранения, чтобы открыть панель мониторинга. 
4. На ленте щелкните **Управление доменом**. 
5. В диалоговом окне **Управление личным доменом** щелкните **Отменить регистрацию**. 

## <a name="additional-resources"></a>Дополнительные ресурсы
* [Как сопоставить личный домен с конечной точкой сети доставки содержимого (CDN)](../cdn/cdn-map-content-to-custom-domain.md)

<!--HONumber=Oct16_HO2-->


