<properties 
	pageTitle="Настройка имени домена для BLOB-данных в учетной записи хранения | Microsoft Azure" 
	description="Узнайте, как настроить пользовательский домен для доступа к данным больших двоичных объектов в учетной записи хранения Azure." 
	services="storage" 
	documentationCenter="" 
	authors="tamram" 
	manager="adinah" 
	editor=""/>

<tags 
	ms.service="storage" 
	ms.workload="storage" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="06/18/2015" 
	ms.author="tamram"/>


# Настройка имени домена для BLOB-данных в учетной записи хранения Azure

## Обзор

Можно настроить пользовательский домен для доступа к BLOB-данным в учетной записи хранения Azure. Конечная точка по умолчанию для службы BLOB-объектов: https://<*моя\_учетная\_запись\_хранения*>.blob.core.windows.net. После сопоставления личного домена и поддомена, например **www.contoso.com**, с конечной точкой больших двоичных объектов для вашей учетной записи хранения пользователи также смогут, используя этот домен, получать доступ к данным больших двоичных объектов в учетной записи хранения.


> [AZURE.NOTE]Процедуры в этом задании применяются к учетным записям хранения Azure. Информацию об облачных службах см. в статье <a href = "/develop/net/common-tasks/custom-dns/">Настройка пользовательского доменного имени для облачной службы Azure</a>, о веб-сайтах — в статье <a href="/develop/net/common-tasks/custom-dns-web-site/">Настройка пользовательского имени домена для веб-сайта Azure</a>.

Существует два способа указать пользовательский домен для конечной точки BLOB-объекта в учетной записи хранения. Самым простым способом является создание записи CNAME, сопоставляющей пользовательский домен и поддомен конечной точке BLOB-объекта. Запись CNAME — это компонент DNS, позволяющий сопоставить исходный и конечный домены. В этом случае исходный домен является пользовательским доменом и поддоменом — обратите внимание, что поддомен всегда является обязательным. Конечный домен является конечной точкой службы BLOB-объектов.

Однако процесс сопоставления пользовательского домена конечной точке BLOB-объекта приводит к краткому периоду простоя для домена в течение регистрации домена на портале управления Azure. Если пользовательский домен в это время поддерживает приложение с заданным соглашением об уровне обслуживания (SLA), не допускающим простоя, то для промежуточного шага регистрации можно использовать поддомен Azure **asverify**, чтобы пользователи могли получать доступ к вашему домену во время выполнения сопоставления DNS.

В следующей таблице приведены примеры URL-адресов для доступа к BLOB-данным в учетной записи хранения с именем **mystorageaccount**. Пользовательский домен, зарегистрированный для этой учетной записи хранения: **www.contoso.com**

Тип ресурса|Форматы URL
---|---
Учетная запись хранения|**URL-адрес по умолчанию:** http://mystorageaccount.blob.core.windows.net<p>**URL-адрес личного домена:** http://www.contoso.com</td>
BLOB-объект|**URL-адрес по умолчанию:** http://mystorageaccount.blob.core.windows.net/mycontainer/myblob<p>**URL-адрес личного домена:** http://www.contoso.com/mycontainer/myblob
Корневой контейнер|**URL-адрес по умолчанию:** http://mystorageaccount.blob.core.windows.net/myblob или http://mystorageaccount.blob.core.windows.net/$root/myblob<p>**URL-адрес личного домена:** http://www.contoso.com/myblob или http://www.contoso.com/$root/myblob

## Регистрация пользовательского домена для учетной записи хранения

Эта процедура используется для регистрации пользовательского домена, если допускается кратковременная недоступность домена для пользователей домена или если в пользовательском домене в данный момент не размещается никакое приложение.

Если личный домен поддерживает приложение, не допускающее простоя, то следует использовать процедуру, описанную в разделе <a href="#register-asverify">Регистрация пользовательского домена для учетной записи хранения с помощью промежуточного поддомена asverify</a>.

Чтобы настроить имя пользовательского домена, необходимо создать новую запись CNAME с помощью вашего регистратора домена. Эта запись CNAME определяет псевдоним для имени домена. В этом случае она сопоставляет адрес пользовательского домена конечной точке службы BLOB-объектов для используемой учетной записи хранения.

Каждый регистратор имеет похожий, но немного отличный способ указания записи CNAME, хотя используется одна и та же концепция. Обратите внимание, что многие базовые пакеты регистрации домена не предлагают настройки DNS, поэтому может потребоваться обновить пакет регистрации домена, прежде чем создавать запись CNAME.

1.  На портале управления перейдите на вкладку **Хранилище**.

2.  На вкладке **Хранилище** щелкните имя учетной записи хранения, для которой нужно выполнить сопоставление пользовательского домена.

3.  Выберите вкладку **Настройка**.

4.  В нижней части экрана щелкните **Управление доменом**, чтобы вывести диалоговое окно **Управление пользовательским доменом**. Верхняя часть диалогового окна содержит сведения о том, как создать запись CNAME. В рамках этой процедуры не обращайте внимания на указания, относящиеся к поддомену **asverify**.

5.  Войдите на веб-сайт своего регистратора DNS и перейдите на страницу управления DNS. Это может быть такой раздел, как **Имя домена**, **DNS** или **Управление сервером доменных имен**.

6.  Найдите раздел управления записями CNAME. Может понадобиться перейти на страницу дополнительных параметров и найти слова **CNAME**, **Псевдоним** или **Поддомены**.

7.  Создайте новую запись CNAME и укажите псевдоним поддомена, например **www** или **photos**. Введите имя узла, являющегося конечной точкой службы BLOB-объектов, в формате **mystorageaccount.blob.core.windows.net** (где **mystorageaccount** — имя вашей учетной записи хранения). Имя используемого узла содержится в тексте диалогового окна **Управление пользовательским доменом**.

8.  Создав запись CNAME, вернитесь в диалоговое окно **Управление пользовательским доменом** и введите имя своего пользовательского домена, включая поддомен, в поле **Имя пользовательского домена**. Например, если используются домен **contoso.com** и поддомен **www**, введите **www.contoso.com**. Если используется поддомен **photos**, введите **photos.contoso.com**. Обратите внимание, что поддомен является обязательным.

9. Чтобы зарегистрировать пользовательский домен, нажмите кнопку **Зарегистрировать**.

	Если регистрация прошла успешно, появится сообщение **Ваш пользовательский домен активен**. Теперь пользователи при наличии соответствующих разрешений могут просматривать BLOB-данные вашего пользовательского домена.

## Регистрация пользовательского домена для учетной записи хранения с помощью промежуточного поддомена asverify

Эта процедура используется для регистрации пользовательского домена, который в данное время поддерживает приложения с соглашением об уровне обслуживания, запрещающим простои. Создавая запись CNAME, указывающую из asverify.&lt;subdomain&gt;.&lt;customdomain&gt; в asverify.&lt;storageaccount&gt;.blob.core.windows.net, можно выполнить предварительную регистрацию домена в Azure. Затем можно создать вторую запись CNAME, указывающую из &lt;subdomain&gt;.&lt;customdomain&gt; в &lt;storageaccount&gt;.blob.core.windows.net, и с этого момента трафик для пользовательского домена будет направлен в конечную точку большого двоичного объекта.

Поддомен asverify представляет собой специальный поддомен, распознаваемый Azure. Добавляя **asverify** в свой поддомен, вы разрешаете Azure распознавать ваш пользовательский домен без изменения DNS-записи для этого домена. После выполненного изменения DNS-запись для домена будет без простоя сопоставлена конечной точке BLOB-объекта.

1.  На портале управления перейдите на вкладку **Хранилище**.

2.  На вкладке **Хранилище** щелкните имя учетной записи хранения, для которой нужно выполнить сопоставление пользовательского домена.

3.  Выберите вкладку **Настройка**.

4.  В нижней части экрана щелкните **Управление доменом**, чтобы вывести диалоговое окно **Управление пользовательским доменом**. Верхняя часть диалогового окна содержит сведения о том, как создать запись CNAME, используя поддомен **asverify**.

5.  Войдите на веб-сайт своего регистратора DNS и перейдите на страницу управления DNS. Это может быть такой раздел, как **Имя домена**, **DNS** или **Управление сервером доменных имен**.

6.  Найдите раздел управления записями CNAME. Может понадобиться перейти на страницу дополнительных параметров и найти слова **CNAME**, **Псевдоним** или **Поддомены**.

7.  Создайте новую запись CNAME и укажите псевдоним поддомена, который содержит поддомен asverify. Например, для поддомена может использоваться формат **asverify.www** или **asverify.photos**. Введите имя узла, являющегося конечной точкой службы BLOB-объектов, в формате **asverify.mystorageaccount.blob.core.windows.net** (где **mystorageaccount** — имя вашей учетной записи хранения). Имя используемого узла содержится в тексте диалогового окна **Управление пользовательским доменом**.

8.  Создав запись CNAME, вернитесь в диалоговое окно **Управление пользовательским доменом** и введите имя своего пользовательского домена в поле **Имя пользовательского домена**. Например, если используются домен **contoso.com** и поддомен **www**, введите **www.contoso.com**. Если используется поддомен **photos**, введите **photos.contoso.com**. Обратите внимание, что поддомен является обязательным.

9.	Установите флажок **Дополнительно: использовать поддомен asverify для предварительной регистрации пользовательского домена**.

10. Чтобы предварительно зарегистрировать пользовательский домен, нажмите кнопку **Зарегистрировать**.

	Если предварительная регистрация прошла успешно, появится сообщение **Ваш пользовательский домен активен**.

11. На этом этапе ваш пользовательский домен был проверен Azure, но трафик, идущий в ваш домен, еще не маршрутизирован в вашу учетную запись хранения. Для завершения процесса вернитесь на веб-сайт регистратора DNS и создайте другую запись CNAME, сопоставляющую поддомен конечной точке службы BLOB-объектов. Например, можно указать дочерний домен, как **www** или **photos**, а имя узла как **mystorageaccount.blob.core.windows.net** (где **mystorageaccount** — имя вашей учетной записи хранения). Это действие завершает регистрацию пользовательского домена.

12. Наконец, можно удалить запись CNAME, созданную с помощью **asverify**, так как она была необходима только в качестве промежуточного шага.

Теперь пользователи при наличии соответствующих разрешений могут просматривать BLOB-данные вашего пользовательского домена.

## Проверка того, что пользовательский домен ссылается на конечную точку службы BLOB-объектов

Чтобы убедиться, что ваш пользовательский домен действительно сопоставлен конечной точке службы BLOB-объектов, создайте BLOB-объект в общедоступном контейнере в вашей учетной записи хранения. Затем, чтобы получить доступ к этому BLOB-объекту, используйте в веб-браузере URI следующего формата:

-   http://<*поддомен.личный\_домен*>/<*мой\_контейнер*>/<*мой\_большой\_двоичный\_объект*>

Например, можно использовать следующий URI для доступа к веб-форме через пользовательский поддомен **photos.contoso.com**, который выполняет сопоставление с большим двоичным объектом в вашем контейнере **myforms**:

-   http://photos.contoso.com/myforms/applicationform.htm

## Дополнительные ресурсы

-   <a href="http://msdn.microsoft.com/library/azure/gg680307.aspx">Сопоставление содержимого CDN с личным доменом￼</a>
 

<!---HONumber=August15_HO6-->