<properties
   pageTitle="Тестирование производительности веб-приложения Azure | Microsoft Azure"
   description="Протестируйте производительность веб-приложения Azure, чтобы проверить, как оно справляется с пользовательской нагрузкой. Измерьте время отклика и найдите ошибки, которые могут свидетельствовать о проблемах."
   services="app-service\web"
   documentationCenter=""
   authors="ecfan"
   manager="douge"
   editor="jimbe"/>

<tags
   ms.service="app-service-web"
   ms.workload="web"
   ms.tgt_pltfrm="na"
   ms.devlang="na"
   ms.topic="article"
   ms.date="09/11/2015"
   ms.author="estfan; manasma"/>

# Тестирование производительности веб-приложения Azure под нагрузкой

Проверьте производительность своего веб-приложения, прежде чем запустить его или развернуть обновления в рабочей среде. Так можно точнее оценить, готово ли ваше приложение к выпуску. Кроме того, вы будете уверены, что ваше приложение справится с трафиком во время максимальной нагрузки или следующей маркетинговой кампании.

На стадии общедоступной предварительной версии протестировать производительность приложения можно бесплатно на портале предварительной версии Azure. Эти тесты имитируют пользовательскую нагрузку на приложение за определенный период времени и оценивают отклик приложения. Например, результаты теста показывают, как быстро приложение реагирует на обращение определенного количество пользователей. Они также отображают количество неудачных запросов, которые могут свидетельствовать о проблемах с приложением.

![Поиск проблем с производительностью веб-приложения][TestOverview]

## Перед началом работы

*	Вам потребуется [подписка Azure][AzureSubscription], если у вас ее еще нет. Узнайте, как можно [создать учетную запись Azure бесплатно][AzureFreeTrial].

*	Вам потребуется учетная запись [Visual Studio Team Services (VSTS)][WhatIsVSTS] для хранения журнала тестирования производительности. Создайте новую учетную запись после настройки теста производительности или воспользуйтесь существующей при наличии. [Какие еще возможности предоставляет учетная запись Visual Studio Team Services?](#VSTSAccount)

*	Разверните тестируемое приложение в нерабочей среде. Настройте для приложения план службы приложений, отличный от используемого в производственной среде. Таким образом вы не будете ни мешать работе существующих клиентов, ни замедлять работу приложения в рабочей среде.

## Настройка и запуск теста производительности

0.	Выполните вход на [портал предварительной версии Azure][AzurePortal]. Чтобы воспользоваться своей учетной записью Visual Studio Team Services, войдите как владелец учетной записи.

0.	Перейдите к своему веб-приложению.

	![Щелкните «Просмотреть все», «Веб-приложения» и выберите свое веб-приложение][WebApp]

0.	Выберите **Тест производительности**.

	![В меню «Инструменты» выберите «Тест производительности»][ExpandedTools]
 
0.	Теперь вы привяжете учетную запись [Visual Studio Team Services (VSTS)][WhatIsVSTS] для хранения журнала тестирования производительности.

	Если у вас уже есть учетная запись VSTS, выберите ее. Если учетной записи нет, создайте ее.

	![Выбор существующей учетной записи VSTS или создание новой][ExistingNewVSTSAccount]

0.	Создайте тест производительности, укажите необходимые сведения и запустите его. За результатами тестирования можно следить во время выполнения теста в режиме реального времени.

	Например, предположим, что у нас есть приложение, которое раздавало купоны на праздничной распродаже в прошлом году. Это событие длилось 15 минут с пиковой нагрузкой в 100 клиентов одновременно. В этом году мы хотим удвоить количество клиентов. Также мы хотим повысить удовлетворенность клиентов, сократив время загрузки страницы с 5 секунд до 2. Для этого мы протестируем производительность обновленного приложения с 250 пользователями на протяжении 15 минут.

	Мы смоделируем нагрузку на приложение, создав виртуальных пользователей (клиентов), которые посещают наш веб-сайт одновременно. При этом отобразится количество неудачных запросов или запросов, которые обрабатываются медленно.

	![Создание, настройка и запуск теста производительности][NewTest]

	 *	Стандартный URL-адрес веб-приложения добавляется автоматически. Вместо него можно указывать URL-адреса других страниц (только HTTP-запросы GET), которые нужно протестировать.

	 *	Чтобы смоделировать локальные условия и сократить задержку, для создания нагрузки выберите ближайшее к вашим пользователям расположение.

	Вот так выглядит окно выполняющегося тестирования. В течение первой минуты наша страница загружается медленнее, чем необходимо.

	![Тест производительности с данными в режиме реального времени][TestRunning]

	Результаты теста показали, что после первой минуты страница загружается гораздо быстрее. Эта информация помогает определить проблему, которую нужно устранить.

	![Результаты теста производительности, включая неудачные запросы][TestDone]
	
Мы будем рады вашим отзывам. Если у вас возникнут вопросы или проблемы, свяжитесь с нами по адресу <vsoloadtest@microsoft.com>.

##	Вопросы и ответы

#### Вопрос. Существуют ли ограничения продолжительности теста? 

Ответ. Да, на портале предварительной версии Azure тест может длиться не дольше часа.

#### Вопрос. Сколько у меня есть времени на тестирование производительности? 

Ответ. После выхода общедоступной предварительной версии каждая учетная запись Visual Studio Team Services ежемесячно будет получать 20 000 бесплатных минут виртуального пользователя (единиц VUM), которые можно расходовать на виртуальных пользователей. Единицы VUM — это количество виртуальных пользователей, умноженное на количество минут в тесте. Если вам нужно больше времени, вы можете купить больше минут и платить только за их фактическое использование.

#### Вопрос. Где можно проверить количество использованных единиц VUM?

Ответ. Это можно сделать на портале предварительной версии Azure.

![Переход в учетную запись VSTS][VSTSAccount]

![Проверка использованных единиц VUM][CheckTestTime]

<a name="VSOAccount"></a>
#### В. Какие еще возможности предоставляет учетная запись Visual Studio Team Services?

Ответ. Войти в свою учетную запись можно, перейдя по ссылке ```https://{accountname}.visualstudio.com```. С помощью своей учетной записи вы можете обмениваться кодом, компилировать сборки, тестировать ПО, отслеживать работу и распространять приложения — и все это в облаке, используя любые средства и языки. Узнайте больше о функциях и службах, которые упрощают взаимодействие внутри команды и позволяют создавать новые продукты, на веб-сайте [Visual Studio Team Services][WhatIsVSTS].

<!--Image references-->
[WebApp]: ./media/app-service-web-app-performance-test/azure-np-web-apps.png
[TestOverview]: ./media/app-service-web-app-performance-test/azure-np-perf-test-overview.png
[ExpandedTools]: ./media/app-service-web-app-performance-test/azure-np-web-app-details-tools-expanded.png
[ExistingNewVSTSAccount]: ./media/app-service-web-app-performance-test/azure-np-no-vso-account.png
[NewTest]: ./media/app-service-web-app-performance-test/azure-np-new-performance-test.png
[TestRunning]: ./media/app-service-web-app-performance-test/azure-np-running-perf-test.png
[TestDone]: ./media/app-service-web-app-performance-test/azure-np-perf-test-done.png
[VSTSAccount]: ./media/app-service-web-app-performance-test/azure-np-vso-accounts.png
[CheckTestTime]: ./media/app-service-web-app-performance-test/azure-np-vso-accounts-vum-summary.png

<!--Reference links -->
[AzurePortal]: https://portal.azure.com
[AzureSubscription]: https://account.windowsazure.com/subscriptions
[AzureFreeTrial]: https://azure.microsoft.com/pricing/free-trial/?WT.mc_id=A261C142F
[WhatIsVSTS]: https://www.visualstudio.com/products/what-is-visual-studio-online-vs

<!---HONumber=Nov15_HO4-->