---
title: Тестирование производительности веб-приложения Azure | Microsoft Docs
description: Протестируйте производительность веб-приложения Azure, чтобы проверить, как оно справляется с пользовательской нагрузкой. Измерьте время отклика и найдите ошибки, которые могут свидетельствовать о проблемах.
services: app-service\web
documentationcenter: ''
author: ecfan
manager: douge
editor: jimbe

ms.service: app-service-web
ms.workload: web
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/25/2016
ms.author: estfan; manasma; ahomer

---
# Тестирование производительности веб-приложения Azure под нагрузкой
Проверьте производительность своего веб-приложения, прежде чем запустить его или развернуть обновления в рабочей среде. Так можно точнее оценить, готово ли ваше приложение к выпуску. Кроме того, вы будете уверены, что ваше приложение справится с трафиком во время максимальной нагрузки или следующей маркетинговой кампании.

На стадии общедоступной предварительной версии протестировать производительность приложения можно на портале Azure бесплатно. Эти тесты имитируют пользовательскую нагрузку на приложение за определенный период времени и оценивают отклик приложения. Например, результаты теста показывают, как быстро приложение реагирует на обращение определенного количество пользователей. Они также отображают количество неудачных запросов, которые могут свидетельствовать о проблемах с приложением.

![Поиск проблем с производительностью веб-приложения](./media/app-service-web-app-performance-test/azure-np-perf-test-overview.png)

## Перед началом работы
* Вам потребуется [подписка Azure](https://account.windowsazure.com/subscriptions), если у вас ее еще нет. Узнайте, как можно [создать учетную запись Azure бесплатно](https://azure.microsoft.com/pricing/free-trial/?WT.mc_id=A261C142F).
* Вам потребуется учетная запись [Visual Studio Team Services](https://www.visualstudio.com/products/what-is-visual-studio-online-vs) для хранения журнала тестирования производительности. При настройке теста производительности подходящая учетная запись будет создана автоматически. Вы также можете создать учетную запись или использовать существующую, если являетесь ее владельцем.
* Разверните тестируемое приложение в нерабочей среде. Настройте для приложения план службы приложений, отличный от используемого в производственной среде. Таким образом вы не будете ни мешать работе существующих клиентов, ни замедлять работу приложения в рабочей среде.

## Настройка и запуск теста производительности
1. Войдите на [портал Azure](https://portal.azure.com). Чтобы воспользоваться своей учетной записью Visual Studio Team Services, войдите как владелец учетной записи.
2. Перейдите к своему веб-приложению.
   
   ![Щелкните «Просмотреть все», «Веб-приложения» и выберите свое веб-приложение](./media/app-service-web-app-performance-test/azure-np-web-apps.png)
3. Выберите **Тест производительности**.
   
   ![В меню «Инструменты» выберите «Тест производительности»](./media/app-service-web-app-performance-test/azure-np-web-app-details-tools-expanded.png)
4. Теперь вы привяжете учетную запись [Visual Studio Team Services](https://www.visualstudio.com/products/what-is-visual-studio-online-vs) для хранения журнала тестирования производительности.
   
    Если у вас уже есть учетная запись Team Services, выберите ее. Если учетной записи нет, создайте ее.
   
    ![Выбор существующей учетной записи Team Services или создание новой](./media/app-service-web-app-performance-test/azure-np-no-vso-account.png)
5. Создайте тест производительности, укажите необходимые сведения и запустите его.

За результатами тестирования можно следить во время выполнения теста в режиме реального времени.

Например, предположим, что у нас есть приложение, которое раздавало купоны на праздничной распродаже в прошлом году. Это событие длилось 15 минут с пиковой нагрузкой в 100 клиентов одновременно. В этом году мы хотим удвоить количество клиентов. Также мы хотим повысить удовлетворенность клиентов, сократив время загрузки страницы с 5 секунд до 2. Для этого мы протестируем производительность обновленного приложения с 250 пользователями на протяжении 15 минут.

Мы смоделируем нагрузку на приложение, создав виртуальных пользователей (клиентов), которые посещают наш веб-сайт одновременно. При этом отобразится количество неудачных запросов или запросов, которые обрабатываются медленно.

  ![Создание, настройка и запуск теста производительности](./media/app-service-web-app-performance-test/azure-np-new-performance-test.png)

* Стандартный URL-адрес веб-приложения добавляется автоматически. Вместо него можно указывать URL-адреса других страниц (только HTTP-запросы GET), которые нужно протестировать.
* Чтобы смоделировать локальные условия и сократить задержку, для создания нагрузки выберите ближайшее к вашим пользователям расположение.
  
  Вот так выглядит окно выполняющегося тестирования. В течение первой минуты наша страница загружается медленнее, чем необходимо.
  
  ![Тест производительности с данными в режиме реального времени](./media/app-service-web-app-performance-test/azure-np-running-perf-test.png)
  
  Результаты теста показали, что после первой минуты страница загружается гораздо быстрее. Эта информация помогает определить проблему, которую нужно устранить.
  
  ![Результаты теста производительности, включая неудачные запросы](./media/app-service-web-app-performance-test/azure-np-perf-test-done.png)

## Тестирование нескольких URL-адресов
Вы также можете выполнить тесты производительности с использованием нескольких URL-адресов, представляющие сквозные сценарии, отправляя файлы веб-тестов Visual Studio. Создать файл веб-теста Visual Studio можно следующим образом:

* [Захватить трафик с помощью Fiddler и экспортировать его как файл веб-теста Visual Studio.](http://docs.telerik.com/fiddler/Save-And-Load-Traffic/Tasks/VSWebTest)
* [Создать файл нагрузочного тестирования в Visual Studio.](https://www.visualstudio.com/docs/test/performance-testing/run-performance-tests-app-before-release)

Чтобы отправить и запустить файл веб-теста Visual Studio:

1. Выполните описанные выше действия, чтобы открыть колонку **Новый тест производительности**. В этой колонке выберите параметр "НАСТРОЙКА ТЕСТОВОГО ИСПОЛЬЗОВАНИЯ", чтобы открыть **одноименную колонку**.  
   
    ![Открытие колонки "Настройка нагрузочного тестирования"](./media/app-service-web-app-performance-test/multiple-01-authoring-blade.png)
2. Убедитесь, что в поле "ТИП ТЕСТА" выбрано значение **Веб-тест Visual Studio**, и выберите файл архива HTTP. Чтобы открыть диалоговое окно выбора файла, щелкните значок папки.
   
    ![Отправка файла веб-теста Visual Studio с несколькими URL-адресами](./media/app-service-web-app-performance-test/multiple-01-authoring-blade2.png)
   
    После отправки файла в разделе "СВЕДЕНИЯ ОБ URL-АДРЕСАХ" откроется список URL-адресов для тестирования.
3. Укажите пользовательскую нагрузку и продолжительность теста, а затем нажмите кнопку **Выполнить тест**.
   
    ![Выбор пользовательской нагрузки и длительности](./media/app-service-web-app-performance-test/multiple-01-authoring-blade3.png)
   
    Результаты выполнения теста отобразятся на двух панелях. На панели слева в виде последовательности графиков будет представлена информация о производительности.
   
    ![Панель результатов производительности](./media/app-service-web-app-performance-test/multiple-01a-results.png)
   
    На панели справа появится список неудачных запросов с указанием типов ошибок и количества случаев их появления.
   
    ![Панель ошибок запросов](./media/app-service-web-app-performance-test/multiple-01b-results.png)
4. Выполните тест еще раз, щелкнув значок **Повтор** в верхней части правой панели.
   
    ![Повторное выполнение теста](./media/app-service-web-app-performance-test/multiple-rerun-test.png)

## Вопросы и ответы
#### Вопрос. Существуют ли ограничения продолжительности теста?
**Ответ**. Да, на портале Azure тест может длиться не дольше часа.

#### Вопрос. Сколько у меня есть времени на тестирование производительности?
**Ответ**. После выхода общедоступной предварительной версии каждая учетная запись Visual Studio Team Services ежемесячно будет получать 20 000 бесплатных минут виртуального пользователя (единиц VUM), которые можно расходовать на виртуальных пользователей. Единицы VUM — это количество виртуальных пользователей, умноженное на количество минут в тесте. Если вам нужно больше времени, вы можете купить больше минут и платить только за их фактическое использование.

#### Вопрос. Где можно проверить количество использованных единиц VUM?
**Ответ**. Это можно сделать на портале Azure.

![Переход к учетной записи Team Services](./media/app-service-web-app-performance-test/azure-np-vso-accounts.png)

![Проверка использованных единиц VUM](./media/app-service-web-app-performance-test/azure-np-vso-accounts-vum-summary.png)

#### Вопрос. Что является параметром по умолчанию и повлияет ли он на уже существующие у меня тесты?
**Ответ**. Для нагрузочных тестов производительности по умолчанию используется параметр ручного тестирования, как и до того, как на портал был добавлен параметр тестирования с применением нескольких URL-адресов. Существующие тесты продолжают использовать заданный URL-адрес и выполняются как и раньше.

#### Вопрос. Какие функции не поддерживаются файлом веб-теста Visual Studio?
**Ответ**. В настоящее время эта функция не поддерживает подключаемые модули веб-тестов, источники данных и правила извлечения. Их необходимо удалить, изменив файл веб-теста. Мы надеемся добавить поддержку этих функций в будущих обновлениях.

#### Вопрос. Поддерживаются ли другие форматы файлов веб-тестов?
**Ответ**. В настоящее время поддерживаются только файлы форматирования веб-тестов Visual Studio. Сообщите, если вам необходима поддержка других форматов файлов. Пишите нам по адресу [vsoloadtest@microsoft.com](mailto:vsoloadtest@microsoft.com).

#### В. Какие еще возможности предоставляет учетная запись Visual Studio Team Services?
**Ответ**. Войти в свою учетную запись можно, перейдя по ссылке ```https://{accountname}.visualstudio.com```. С помощью своей учетной записи вы можете обмениваться кодом, компилировать сборки, тестировать ПО, отслеживать работу и распространять приложения — и все это в облаке, используя любые средства и языки. Узнайте больше о функциях и службах, которые упрощают взаимодействие внутри команды и позволяют создавать новые продукты, на веб-сайте [Visual Studio Team Services](https://www.visualstudio.com/products/what-is-visual-studio-online-vs).

## См. также
* [Выполнение простых тестов производительности облачных решений](https://www.visualstudio.com/docs/test/performance-testing/getting-started/get-started-simple-cloud-load-test)
* [Выполнение тестов производительности Apache Jmeter](https://www.visualstudio.com/docs/test/performance-testing/getting-started/get-started-jmeter-test)
* [Выполнение и воспроизведение нагрузочных тестов в облаке](https://www.visualstudio.com/docs/test/performance-testing/getting-started/record-and-replay-cloud-load-tests)
* [Тестирование производительности приложения в облаке](https://www.visualstudio.com/docs/test/performance-testing/getting-started/getting-started-with-performance-testing)

<!---HONumber=AcomDC_0525_2016-->