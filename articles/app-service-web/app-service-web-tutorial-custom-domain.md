---
title: "Сопоставление имени личного домена DNS с веб-приложением Azure | Документация Майкрософт"
description: "Сведения о том, как сопоставить имя личного домена DNS (именного домена) с веб-приложением, серверной частью мобильного приложения или приложением API в службе приложений Azure."
services: app-service\web
documentationcenter: nodejs
author: cephalin
manager: erikre
editor: 
ms.assetid: dc446e0e-0958-48ea-8d99-441d2b947a7c
ms.service: app-service-web
ms.workload: web
ms.tgt_pltfrm: na
ms.devlang: nodejs
ms.topic: article
ms.date: 03/29/2017
ms.author: cephalin
translationtype: Human Translation
ms.sourcegitcommit: 26d460a699e31f6c19e3b282fa589ed07ce4a068
ms.openlocfilehash: 25ddbd0c89ec7eee8eb240cf111245bb8b5add48
ms.lasthandoff: 04/04/2017


---
# <a name="map-a-custom-dns-name-to-an-azure-web-app"></a>Сопоставление имени личного домена DNS с веб-приложением Azure

В этом руководстве показано, как сопоставить DNS-имя домена (именного домена) с веб-приложением, серверной частью мобильного приложения или приложением API в [службе приложений Azure](../app-service/app-service-value-prop-what-is.md). 

![Переход к приложению Azure на портале](./media/app-service-web-tutorial-custom-domain/app-with-custom-dns.png)

В этом руководстве рассматривается пример сценария сопоставления двух DNS-имен с приложением в службе приложений:

- `contoso.com` — корневой домен. Вы будете сопоставлять его с Azure с помощью [записи А](https://en.wikipedia.org/wiki/List_of_DNS_record_types#A). 
- `www.contoso.com` — поддомен `contoso.com`. Вы можете использовать [запись А](https://en.wikipedia.org/wiki/List_of_DNS_record_types#A) или [запись CNAME](https://en.wikipedia.org/wiki/CNAME_record).

Здесь также показано, как сопоставить [DNS с подстановочными знаками](https://en.wikipedia.org/wiki/Wildcard_DNS_record) со службой приложений (например, `*.contoso.com`).

## <a name="before-you-begin"></a>Перед началом работы

Так как в этом руководстве показано, как сопоставить DNS-имя со службой приложений Azure, вы должны иметь административный доступ к странице конфигурации DNS соответствующего поставщика домена (например, GoDaddy). Например, чтобы сопоставить домены `contoso.com` и `www.contoso.com`, необходимо иметь возможность настроить записи DNS для `contoso.com`.

Если вы еще не зарегистрировали домен у поставщика доменов, вы в любое время можете просто [приобрести домен прямо из Azure и сопоставить его с вашим приложением](custom-dns-web-site-buydomains-web-app.md).

## <a name="step-1---prepare-your-app"></a>Шаг 1. Подготовка приложения
Чтобы сопоставить имя личного домена DNS, [план службы приложений](https://azure.microsoft.com/pricing/details/app-service/) должен иметь уровень **Общий** или выше. На этом шаге вы убедитесь, что приложение Azure находится в поддерживаемой ценовой категории.

### <a name="log-in-to-azure"></a>Вход в Azure

Перейдите на портал Azure. 

Для этого войдите на портал [https://portal.azure.com](https://portal.azure.com) с помощью вашей учетной записи Azure.

### <a name="navigate-to-your-app"></a>Переход к вашему приложению
В меню слева выберите **Служба приложений**, а затем щелкните имя своего приложения Azure.

![Переход к приложению Azure на портале](./media/app-service-web-tutorial-custom-domain/select-app.png)

Вы попадете в _колонку_ приложения (страница портала, открывшаяся горизонтально).  

### <a name="check-the-pricing-tier"></a>Проверка ценовой категории
На странице **Обзор**, которая открывается по умолчанию, убедитесь, что приложение не находится на уровне **Бесплатный**.

![Переход к приложению Azure на портале](./media/app-service-web-tutorial-custom-domain/check-pricing-tier.png)

Использование личного домена DNS не поддерживается на уровне **Бесплатный**. Если вам нужно перевести приложение в другую ценовую-категорию, перейдите к следующему разделу. В противном случае перейдите к [шагу 2]().

### <a name="scale-up-your-app-service-plan"></a>Изменение уровня плана службы приложений

Чтобы изменить уровень плана, нажмите кнопку **Увеличить масштаб (план службы приложений)** в области слева.

Выберите уровень, на который нужно перевести план службы приложений. Например, выберите **Общий**. Когда все будет готово, нажмите кнопку **Выбрать**.

![Переход к приложению Azure на портале](./media/app-service-web-tutorial-custom-domain/choose-pricing-tier.png)

Если вы увидите уведомление ниже, значит уровень плана службы приложений изменен.

![Переход к приложению Azure на портале](./media/app-service-web-tutorial-custom-domain/scale-notification.png)

<a name="info"></a>

## <a name="step-2---get-mapping-information"></a>Шаг 2. Получение информации о сопоставлении

На этом шаге вы получите данные, которые позже понадобятся вам для создания записей DNS. 

### <a name="open-the-custom-domain-ui"></a>Открытие интерфейса личного домена

В колонке вашего приложения в меню щелкните **Личные домены**. 

![Переход к приложению Azure на портале](./media/app-service-web-tutorial-custom-domain/custom-domain-menu.png)

### <a name="copy-the-mapping-information"></a>Копирование информации о сопоставлении

На странице **Личные домены** скопируйте **IP-адрес** приложения и имя узла по умолчанию в поле **Назначенные сайту имена узлов**.

Позже вам понадобится IP-адрес для сопоставления записи A, а имя узла по умолчанию для сопоставления записи CNAME.

![Переход к приложению Azure на портале](./media/app-service-web-tutorial-custom-domain/mapping-information.png)

## <a name="step-3---add-dns-records"></a>Шаг 3. Добавление записей DNS 

На этом шаге вы добавляете записи DNS, которые необходимы для сопоставления имени личного домена DNS с вашим приложением. При этом вы будете использовать собственного поставщика доменов.

### <a name="access-dns-records-with-domain-provider"></a>Доступ к записям DNS с помощью поставщика домена

Сначала войдите на веб-сайт своего поставщика домена.

Затем найдите страницу управления записями DNS. Каждый поставщик домена имеет свой собственный интерфейс записей DNS, поэтому вам следует обратиться к документации поставщика. Вам необходимо найти ссылки или области сайта, обозначенные как **Доменное имя**, **DNS** или **Name Server Management** (Управление сервером доменных имен). Часто ссылку можно найти, открыв сведения о своей учетной записи и найдя такую ссылку, как **Мои домены**. 

Поищите ссылку, которая позволяет управлять своими записями DNS. Эта ссылка может называться **Файл зоны**, **Записи DNS** или **Расширенная конфигурация**.

Ниже приведен пример того, как может выглядеть страница записей DNS:

![Переход к приложению Azure на портале](./media/app-service-web-tutorial-custom-domain/example-record-ui.png)

В примере снимка экрана вы щелкаете команду **Добавить** для создания записи. Некоторые поставщики имеют разные ссылки для добавления записей различных типов. Обратитесь к документации поставщика.

> [!NOTE]
> У некоторых поставщиков, например GoDaddy, изменения записей DNS не вступают в силу, пока вы не щелкнете ссылку **Сохранить изменения** после их создания. 
>
>

<a name="a"></a>

### <a name="create-an-a-record"></a>Создание записи A

В примере из руководства требуется добавить запись A для корневого домена `contoso.com`. 

Чтобы сопоставить запись А с вашим приложением, службе приложений требуется _две_ записи DNS:

- Запись **A** для сопоставления с IP-адресом вашего приложения.
- Запись **TXT** для сопоставления с именем узла по умолчанию вашего приложения. Эта запись позволяет службе приложений убедиться, что вы являетесь владельцем личного домена, который вы хотите сопоставить.

В следующей таблице показано, как можно настроить сопоставление записи A для поддерживаемых типов домена (`@` обычно представляет корневой домен). 

<table cellspacing="0" border="1">
  <tr>
    <th>Тип домена</th>
    <th>Тип записи</th>
    <th>Узел</th>
    <th>Значение</th>
  </tr>
  <tr>
    <td rowspan="2" align="left">Корневой домен<br>(например, <code>contoso.com</code>)</td>
    <td>Файл ,</td>
    <td>@</td>
    <td>IP-адрес из <a href="#info">шага 2</a></td>
  </tr>
  <tr>
    <td>TXT</td>
    <td>@</td>
    <td>Имя узла по умолчанию из <a href="#info">шага 2</a></td>
  </tr>
  <tr>
    <td rowspan="2" align="left">Поддомен<br>(например, <code>www.contoso.com</code>)</td>
    <td>Файл ,</td>
    <td>www</td>
    <td>IP-адрес из <a href="#info">шага 2</a></td>
  </tr>
  <tr>
    <td>TXT</td>
    <td>www</td>
    <td>Имя узла по умолчанию из <a href="#info">шага 2</a></td>
  </tr>
  <tr>
    <td rowspan="2" align="left">Домен с подстановочным знаком<br>(например, <code>*.contoso.com</code>)</td>
    <td>Файл ,</td>
    <td>\*</td>
    <td>IP-адрес из <a href="#info">шага 2</a></td>
  </tr>
  <tr>
    <td>TXT</td>
    <td>\*</td>
    <td>Имя узла по умолчанию из <a href="#info">шага 2</a></td>
  </tr>
</table>

Для примера домена `contoso.com` ваши записи DNS будут выглядеть как на снимке экрана ниже.

![Переход к приложению Azure на портале](./media/app-service-web-tutorial-custom-domain/a-record.png)

<a name="cname"></a>

### <a name="create-a-cname-record"></a>Создание записи CNAME
В примере из руководства требуется добавить запись CNAME для корневого домена `contoso.com`. 

В отличие от [сопоставления записи А](#a), сопоставление записи CNAME с вашим приложением не требует никаких дополнительных записей.

> [!IMPORTANT]
> Рекомендуется использовать сопоставление CNAME. Виртуальный IP-адрес может измениться при удалении и повторном создании приложения или переходе с выделенной ценовой категории на уровень **Общий**. Сопоставление CNAME действительно при таком изменении, в то время как сопоставление A потенциально недействительно с новым IP-адресом. 
>
> Тем не менее, _не создавайте_ запись CNAME для корневого домена (т. е. "корневую запись"). Дополнительные сведения см. в статье [Why can't a CNAME record be used at the root domain](http://serverfault.com/questions/613829/why-cant-a-cname-record-be-used-at-the-apex-aka-root-of-a-domain) (Почему запись CNAME невозможно использовать для корневого домена).
> Чтобы сопоставить корневой домен с приложением Azure, используйте [запись А](#a).
> 
> 

В следующей таблице показано, как можно настроить сопоставление записи CNAME для поддерживаемых типов домена.

Настройте запись CNAME следующим образом.

<table cellspacing="0" border="1">
  <tr>
    <th>Тип домена</th>
    <th>Узел записи CNAME</th>
    <th>Значение записи CNAME</th>
  </tr>
  <tr>
    <td>Поддомен<br>(например, <code>www.contoso.com</code>)</td>
    <td>www</td>
    <td>Имя узла по умолчанию из <a href="#info">шага 2</a></td>
  </tr>
  <tr>
    <td>Домен с подстановочным знаком<br>(например, <code>*.contoso.com</code>)</td>
    <td>\*</td>
    <td>Имя узла по умолчанию из <a href="#info">шага 2</a></td>
  </tr>
</table>

Для примера домена `www.contoso.com` ваши записи DNS будут выглядеть как на снимке экрана ниже.

![Переход к приложению Azure на портале](./media/app-service-web-tutorial-custom-domain/cname-record.png)

<a name="enable"></a>

## <a name="step-4---enable-the-custom-dns-in-your-app"></a>Шаг  4. Включение личного DNS-домена в приложении

Теперь вы готовы добавить настроенные имена DNS (например, `contoso.com` и `www.contoso.com`) в свое приложение.

В колонке **Личные домены** на портале Azure (см. [Шаг 1](#info)) необходимо добавить в список полное имя личного домена.

### <a name="add-the-a-hostname-to-your-app"></a>Добавление имени узла A в свое приложение

Щелкните значок **+** рядом с **Добавить имя узла**.

![Переход к приложению Azure на портале](./media/app-service-web-tutorial-custom-domain/add-host-name.png)

Введите полное доменное имя, для которого вы ранее настроили запись А (например, `contoso.com`), а затем нажмите кнопку **Проверить**.

Если вы пропустили шаг или допустили опечатку где-либо ранее, появится ошибка проверки в нижней части страницы.

![Переход к приложению Azure на портале](./media/app-service-web-tutorial-custom-domain/verification-error.png)

В противном случае активируется кнопка **Добавить имя узла**. 

Убедитесь, что в поле **Тип записи имени узла** выбрано значение **Запись А (example.com)**.

Чтобы добавить DNS-имя в приложение, щелкните **Добавить имя узла**.

![Переход к приложению Azure на портале](./media/app-service-web-tutorial-custom-domain/validate-domain-name.png)

Возможно, потребуется некоторое время для того, чтобы новое имя узла отобразилось на странице **Личные домены** вашего приложения. Попробуйте обновить браузер, чтобы обновить данные.

![Переход к приложению Azure на портале](./media/app-service-web-tutorial-custom-domain/a-record-added.png)

<a name="add-cname"></a>
### <a name="add-the-cname-hostname-to-your-app"></a>Добавление имени узла CNAME в свое приложение

Щелкните значок **+** рядом с **Добавить имя узла**.

![Переход к приложению Azure на портале](./media/app-service-web-tutorial-custom-domain/add-host-name-cname.png)

Введите полное доменное имя, для которого вы ранее настроили запись CNAME (например `www.contoso.com`), и нажмите кнопку **Проверить**.

Если вы пропустили шаг или допустили опечатку где-либо ранее, появится ошибка проверки в нижней части страницы.

![Переход к приложению Azure на портале](./media/app-service-web-tutorial-custom-domain/verification-error-cname.png)

В противном случае активируется кнопка **Добавить имя узла**. 

Убедитесь, что в поле **Тип записи имени узла** выбрано значение **Запись А (example.com)**.

Чтобы добавить DNS-имя в приложение, щелкните **Добавить имя узла**.

![Переход к приложению Azure на портале](./media/app-service-web-tutorial-custom-domain/validate-domain-name-cname.png)

Возможно, потребуется некоторое время для того, чтобы новое имя узла отобразилось на странице **Личные домены** вашего приложения. Попробуйте обновить браузер, чтобы обновить данные.

![Переход к приложению Azure на портале](./media/app-service-web-tutorial-custom-domain/cname-record-added.png)

### <a name="step-5---test-in-browser"></a>Шаг 5. Тестирование в браузере

В своем браузере перейдите к DNS-имени (именам), которые вы настроили ранее (`contoso.com` и `www.contoso.com`).

![Переход к приложению Azure на портале](./media/app-service-web-tutorial-custom-domain/app-with-custom-dns.png)

## <a name="more-resources"></a>Дополнительные ресурсы

[Приобретение и настройка личного домена для службы приложений Azure.](custom-dns-web-site-buydomains-web-app.md)

