---
title: "Сопоставление существующего настраиваемого DNS-имени с веб-приложениями Azure | Документация Майкрософт"
description: "Узнайте, как добавить существующее DNS-имя личного домена (именного домена) для веб-приложения, серверной части мобильного приложения или приложения API в службе приложений Azure."
services: app-service\web
documentationcenter: nodejs
author: cephalin
manager: erikre
editor: 
ms.assetid: dc446e0e-0958-48ea-8d99-441d2b947a7c
ms.service: app-service-web
ms.workload: web
ms.tgt_pltfrm: na
ms.devlang: nodejs
ms.topic: article
ms.date: 05/04/2017
ms.author: cephalin
ms.custom: mvc
ms.translationtype: Human Translation
ms.sourcegitcommit: 2db2ba16c06f49fd851581a1088df21f5a87a911
ms.openlocfilehash: 000440fb2c38eadc0ffdcab84a3c23bb034e834f
ms.contentlocale: ru-ru
ms.lasthandoff: 05/09/2017

---
# <a name="map-an-existing-custom-dns-name-to-azure-web-apps"></a>Сопоставление существующего настраиваемого DNS-имени с веб-приложениями Azure

В этом руководстве показано, как сопоставить существующее DNS-имя личного домена с [веб-приложением Azure](app-service-web-overview.md). 

![Переход к приложению Azure на портале](./media/app-service-web-tutorial-custom-domain/app-with-custom-dns.png)

Из этого руководства вы узнаете, как выполнять такие задачи:

> [!div class="checklist"]
> * Сопоставление поддомена (например, `www.contoso.com`) с помощью записи CNAME.
> * Сопоставление корневого домена (например, `contoso.com`) с помощью записи A.
> * Сопоставление домена с подстановочным знаком (например, `*.contoso.com`) с помощью записи CNAME.
> * Автоматизация сопоставления доменов с помощью скриптов.

Для сопоставления настраиваемого DNS-имени со службой приложений можно использовать **запись CNAME** или **запись A**.

> [!NOTE]
> Мы рекомендуем использовать записи CNAME для всех настраиваемых DNS-имен, кроме корневого домена (например, `contoso.com`). 
> 
> 

## <a name="prerequisites"></a>Предварительные требования

Для работы с этим руководством нужен доступ к реестру DNS поставщика домена (например, GoDaddy), а также разрешения на изменение конфигурации домена. 

Например, чтобы добавить записи DNS для `contoso.com` и `www.contoso.com`, необходим доступ для настройки параметров DNS для корневого домена `contoso.com`. 

> [!NOTE]
> Если у вас нет доменного имени, ознакомьтесь с [руководством по домену службы приложений](custom-dns-web-site-buydomains-web-app.md), чтобы узнать, как приобрести домен с помощью портала Azure. 
>
>

## <a name="prepare-your-app"></a>Подготовка приложения
Чтобы сопоставить настраиваемое DNS-имя, необходим платный уровень [плана службы приложений](https://azure.microsoft.com/pricing/details/app-service/) (**Общий**, **Базовый**, **Стандартный** или **Премиум**). На этом шаге следует убедиться, что приложение службы приложений находится в поддерживаемой ценовой категории.

### <a name="sign-in-to-azure"></a>Вход в Azure

Перейдите на портал Azure. Для этого войдите на портал [https://portal.azure.com](https://portal.azure.com) с помощью вашей учетной записи Azure.

### <a name="navigate-to-your-app"></a>Переход к вашему приложению
В меню слева выберите **Службы приложений**, а затем щелкните имя своего приложения.

![Переход к приложению Azure на портале](./media/app-service-web-tutorial-custom-domain/select-app.png)

Вы перешли в колонку управления приложением службы приложений (_колонка_: горизонтальная страница портала).  

### <a name="check-the-pricing-tier"></a>Проверка ценовой категории

В левой области навигации колонки приложения перейдите к разделу **Параметры** и выберите **Увеличить масштаб (план службы приложений)**.

![Меню увеличения масштаба](./media/app-service-web-tutorial-custom-domain/scale-up-menu.png)

Убедитесь, что приложение не находится в ценовой категории **Бесплатный**. Текущий уровень приложения выделен синей рамкой. 

![Проверка ценовой категории](./media/app-service-web-tutorial-custom-domain/check-pricing-tier.png)

Использование личного домена DNS не поддерживается на уровне **Бесплатный**. Если вам нужно перевести приложение в другую ценовую-категорию, перейдите к следующему разделу. В противном случае закройте колонку **Выбор ценовой категории** и перейдите к разделу [Сопоставление записи CNAME](#cname) или [Сопоставление записи A](#a).

### <a name="scale-up-your-app-service-plan"></a>Изменение уровня плана службы приложений

Выберите любой из платных уровней (**Общий**, **Базовый**, **Стандартный** или **Премиум**). 

Нажмите кнопку **Выбрать**.

![Проверка ценовой категории](./media/app-service-web-tutorial-custom-domain/choose-pricing-tier.png)

Если вы увидите уведомление ниже, значит уровень плана службы приложений изменен.

![Подтверждение операции масштабирования](./media/app-service-web-tutorial-custom-domain/scale-notification.png)

<a name="cname"></a>

## <a name="map-a-cname-record"></a>Сопоставление записи CNAME

В примере из руководства требуется добавить запись CNAME для поддомена `www` (`www.contoso.com`). 

### <a name="access-dns-records-with-domain-provider"></a>Доступ к записям DNS с помощью поставщика домена

Сначала войдите на веб-сайт своего поставщика домена.

Найдите страницу управления записями DNS. Каждый поставщик домена имеет свой собственный интерфейс записей DNS, поэтому вам следует обратиться к документации поставщика. Найдите ссылки или области сайта, обозначенные как **Имя домена**, **DNS** или **Управление сервером доменных имен**. 

Часто ссылку можно найти, открыв сведения о своей учетной записи и найдя такую ссылку, как **Мои домены**. Найдите ссылку, которая позволяет управлять своими записями DNS. Эта ссылка может называться **Файл зоны**, **Записи DNS** или **Расширенная конфигурация**.

На снимке экрана ниже показан пример страницы с записями DNS:

![Пример страницы с записями DNS](./media/app-service-web-tutorial-custom-domain/example-record-ui.png)

В примере снимка экрана вы щелкаете команду **Добавить** для создания записи. Некоторые поставщики имеют разные ссылки для добавления записей различных типов. Обратитесь к документации поставщика.

> [!NOTE]
> У некоторых поставщиков, например GoDaddy, изменения записей DNS не вступают в силу, пока вы не щелкнете ссылку **Сохранить изменения**. 
>
>

### <a name="create-the-cname-record"></a>Создание записи CNAME

Добавьте запись CNAME для сопоставления поддомена с именем узла по умолчанию своего приложения (`<app_name>.azurewebsites.net`).

Для примера домена `www.contoso.com` запись CNAME должна перенаправлять имя `www` в `<app_name>.azurewebsites.net`.

Страница записей DNS должна выглядеть, как на снимке экрана ниже.

![Переход к приложению Azure на портале](./media/app-service-web-tutorial-custom-domain/cname-record.png)

### <a name="enable-the-cname-record-mapping-in-your-app"></a>Включение сопоставления записи CNAME в приложении

Теперь все готово для добавления настроенного DNS-имени в приложение.

В левой области навигации колонки приложения щелкните **Личные домены**. 

![Меню личных доменов](./media/app-service-web-tutorial-custom-domain/custom-domain-menu.png)

В колонке **Личные домены** приложения необходимо добавить в список полное настраиваемое DNS-имя (`www.contoso.com`).

Щелкните значок **+** рядом с **Добавить имя узла**.

![Добавление имени узла](./media/app-service-web-tutorial-custom-domain/add-host-name-cname.png)

Введите полное доменное имя, для которого вы ранее настроили запись CNAME (например `www.contoso.com`), и щелкните **Проверить**.

В противном случае активируется кнопка **Добавить имя узла**. 

Убедитесь, что в поле **Тип записи имени узла** выбрано значение **Запись CNAME (example.com)**.

Чтобы добавить DNS-имя в приложение, щелкните **Добавить имя узла**.

![Добавление DNS-имени в приложение](./media/app-service-web-tutorial-custom-domain/validate-domain-name-cname.png)

Возможно, потребуется некоторое время для того, чтобы новое имя узла отобразилось на странице **Личные домены** вашего приложения. Попробуйте обновить браузер, чтобы обновить данные.

![Запись CNAME добавлена](./media/app-service-web-tutorial-custom-domain/cname-record-added.png)

Если вы пропустили шаг или допустили опечатку где-либо ранее, появится ошибка проверки в нижней части страницы.

![Ошибка проверки](./media/app-service-web-tutorial-custom-domain/verification-error-cname.png)

<a name="a"></a>

## <a name="map-an-a-record"></a>Сопоставление записи A

В примере из руководства требуется добавить запись A для корневого домена `contoso.com`. 

<a name="info"></a>

### <a name="copy-your-apps-ip-address"></a>Копирование IP-адреса приложения

Чтобы сопоставить запись A, необходим внешний IP-адрес вашего приложения. Этот IP-адрес можно найти в колонке **Личные домены**.

В левой области навигации колонки приложения щелкните **Личные домены**. 

![Меню личных доменов](./media/app-service-web-tutorial-custom-domain/custom-domain-menu.png)

На странице **Личные домены** скопируйте IP-адрес приложения.

![Переход к приложению Azure на портале](./media/app-service-web-tutorial-custom-domain/mapping-information.png)

### <a name="access-dns-records-with-domain-provider"></a>Доступ к записям DNS с помощью поставщика домена

Сначала войдите на веб-сайт своего поставщика домена.

Найдите страницу управления записями DNS. Каждый поставщик домена имеет свой собственный интерфейс записей DNS, поэтому вам следует обратиться к документации поставщика. Найдите ссылки или области сайта, обозначенные как **Имя домена**, **DNS** или **Управление сервером доменных имен**. 

Часто ссылку можно найти, открыв сведения о своей учетной записи и найдя такую ссылку, как **Мои домены**. Найдите ссылку, которая позволяет управлять своими записями DNS. Эта ссылка может называться **Файл зоны**, **Записи DNS** или **Расширенная конфигурация**.

На снимке экрана ниже показан пример страницы с записями DNS:

![Пример страницы с записями DNS](./media/app-service-web-tutorial-custom-domain/example-record-ui.png)

В примере снимка экрана вы щелкаете команду **Добавить** для создания записи. Некоторые поставщики имеют разные ссылки для добавления записей различных типов. Обратитесь к документации поставщика.

> [!NOTE]
> У некоторых поставщиков, например GoDaddy, изменения записей DNS не вступают в силу, пока вы не щелкнете ссылку **Сохранить изменения**. 
>
>

<a name="create-a"></a>

### <a name="create-the-a-record"></a>Создание записи A

Чтобы сопоставить запись А с вашим приложением, службе приложений требуется **две** записи DNS:

- Запись **A** для сопоставления с IP-адресом вашего приложения.
- Запись типа **TXT** для сопоставления с именем узла по умолчанию вашего приложения, `<app_name>.azurewebsites.net`. Эта запись позволяет службе приложений убедиться, что вы являетесь владельцем личного домена, который вы хотите сопоставить.

Для примера домена `www.contoso.com` создайте запись A и запись типа TXT в соответствии со следующей таблицей (`@` обычно представляет корневой домен). 

| Тип записи | Узел | Значение |
| - | - | - |
| Файл , | `@` | IP-адрес из раздела [Копирование IP-адреса приложения](#info). |
| TXT | `@` | `<app_name>.azurewebsites.net` |

Страница записей DNS должна выглядеть, как на снимке экрана ниже.

![Страница записей DNS](./media/app-service-web-tutorial-custom-domain/a-record.png)

<a name="enable-a"></a>

### <a name="enable-the-a-record-mapping-in-your-app"></a>Включение сопоставления записи A в приложении

Теперь все готово для добавления настроенного DNS-имени в приложение.

На странице **Личные домены** приложения на портале Azure необходимо добавить в список полное настраиваемое DNS-имя (`contoso.com`).

Щелкните значок **+** рядом с **Добавить имя узла**.

![Добавление имени узла](./media/app-service-web-tutorial-custom-domain/add-host-name.png)

Введите полное доменное имя, для которого вы ранее настроили запись A (например, `contoso.com`), и щелкните **Проверить**.

В противном случае активируется кнопка **Добавить имя узла**. 

Убедитесь, что в поле **Тип записи имени узла** выбрано значение **Запись А (example.com)**.

Чтобы добавить DNS-имя в приложение, щелкните **Добавить имя узла**.

![Добавление DNS-имени в приложение](./media/app-service-web-tutorial-custom-domain/validate-domain-name.png)

Возможно, потребуется некоторое время для того, чтобы новое имя узла отобразилось на странице **Личные домены** вашего приложения. Попробуйте обновить браузер, чтобы обновить данные.

![Запись добавлена](./media/app-service-web-tutorial-custom-domain/a-record-added.png)

Если вы пропустили шаг или допустили опечатку где-либо ранее, появится ошибка проверки в нижней части страницы.

![Ошибка проверки](./media/app-service-web-tutorial-custom-domain/verification-error.png)

<a name="wildcard"></a>

## <a name="map-a-wildcard-domain"></a>Сопоставление домена с подстановочными знаками

Вы можете сопоставить [DNS с подстановочными знаками](https://en.wikipedia.org/wiki/Wildcard_DNS_record) (например, `*.contoso.com`) с приложением службы приложений. 

Ниже приведены инструкции по сопоставлению домена с подстановочными знаками `*.contoso.com` с помощью записи CNAME. 

### <a name="access-dns-records-with-domain-provider"></a>Доступ к записям DNS с помощью поставщика домена

Сначала войдите на веб-сайт своего поставщика домена.

Найдите страницу управления записями DNS. Каждый поставщик домена имеет свой собственный интерфейс записей DNS, поэтому вам следует обратиться к документации поставщика. Найдите ссылки или области сайта, обозначенные как **Имя домена**, **DNS** или **Управление сервером доменных имен**. 

Часто ссылку можно найти, открыв сведения о своей учетной записи и найдя такую ссылку, как **Мои домены**. Найдите ссылку, которая позволяет управлять своими записями DNS. Эта ссылка может называться **Файл зоны**, **Записи DNS** или **Расширенная конфигурация**.

На снимке экрана ниже показан пример страницы с записями DNS:

![Пример страницы с записями DNS](./media/app-service-web-tutorial-custom-domain/example-record-ui.png)

В примере снимка экрана вы щелкаете команду **Добавить** для создания записи. Некоторые поставщики имеют разные ссылки для добавления записей различных типов. Обратитесь к документации поставщика.

> [!NOTE]
> У некоторых поставщиков, например GoDaddy, изменения записей DNS не вступают в силу, пока вы не щелкнете ссылку **Сохранить изменения**. 
>
>

### <a name="create-the-cname-record"></a>Создание записи CNAME

Добавьте запись CNAME для сопоставления имени с подстановочными знаками с именем узла по умолчанию своего приложения (`<app_name>.azurewebsites.net`).

Для примера домена `*.contoso.com` запись CNAME должна перенаправлять имя `*` в `<app_name>.azurewebsites.net`.

Страница записей DNS должна выглядеть, как на снимке экрана ниже.

![Переход к приложению Azure на портале](./media/app-service-web-tutorial-custom-domain/cname-record.png)

### <a name="enable-the-cname-record-mapping-in-your-app"></a>Включение сопоставления записи CNAME в приложении

Теперь можно добавить любой поддомен, соответствующий имени с подстановочными знаками.

Для примера имени с подстановочными знаками `*.contoso.com` можно добавить `sub1.contoso.com` и `sub2.contoso.com`. 

В левой области навигации колонки приложения щелкните **Личные домены**. 

![Меню личных доменов](./media/app-service-web-tutorial-custom-domain/custom-domain-menu.png)

Щелкните значок **+** рядом с **Добавить имя узла**.

![Добавление имени узла](./media/app-service-web-tutorial-custom-domain/add-host-name-cname.png)

Введите полное доменное имя поддомена, соответствующего домену с подстановочными знаками (например, `sub1.contoso.com`), затем щелкните **Проверить**.

В противном случае активируется кнопка **Добавить имя узла**. 

Убедитесь, что в поле **Тип записи имени узла** выбрано значение **Запись CNAME (example.com)**.

Чтобы добавить DNS-имя в приложение, щелкните **Добавить имя узла**.

![Добавление DNS-имени в приложение](./media/app-service-web-tutorial-custom-domain/validate-domain-name-cname-wildcard.png)

Возможно, потребуется некоторое время для того, чтобы новое имя узла отобразилось на странице **Личные домены** вашего приложения. Попробуйте обновить браузер, чтобы обновить данные.

Можно еще раз щелкнуть значок **+**, чтобы добавить другое имя узла, соответствующее домену с подстановочными знаками.

Например, добавьте имя `sub2.contoso.com`, следуя инструкциям выше.

![Запись CNAME добавлена](./media/app-service-web-tutorial-custom-domain/cname-record-added-wildcard2.png)

## <a name="test-in-browser"></a>Тестирование в браузере

В своем браузере перейдите к DNS-имени (именам), которые вы настроили ранее (`contoso.com` и `www.contoso.com`).

![Переход к приложению Azure на портале](./media/app-service-web-tutorial-custom-domain/app-with-custom-dns.png)

## <a name="automate-with-scripts"></a>Автоматизация с помощью сценариев

Управление личными доменами можно автоматизировать с помощью сценариев, воспользовавшись [Azure CLI](/cli/azure/install-azure-cli) или [Azure PowerShell](/powershell/azure/overview). 

### <a name="azure-cli"></a>Инфраструктура CLI Azure 

Приведенная ниже команда добавляет заданное настраиваемое DNS-имя для приложения службы приложений. 

```bash 
az appservice web config hostname add \
    --webapp <app_name> \
    --resource-group <resourece_group_name> \ 
    --name <fully_qualified_domain_name> 
``` 

Дополнительные сведения см. в статье [Сопоставление пользовательского домена с веб-приложением](scripts/app-service-cli-configure-custom-domain.md). 

### <a name="azure-powershell"></a>Azure PowerShell 

Приведенная ниже команда добавляет заданное настраиваемое DNS-имя для приложения службы приложений. 

```PowerShell  
Set-AzureRmWebApp `
    -Name <app_name> `
    -ResourceGroupName <resourece_group_name> ` 
    -HostNames @("<fully_qualified_domain_name>","<app_name>.azurewebsites.net") 
```

Дополнительные сведения см. в статье [Назначение пользовательского домена веб-приложению](scripts/app-service-powershell-configure-custom-domain.md).

## <a name="next-steps"></a>Дальнейшие действия

Из этого руководства вы узнали, как выполнять такие задачи:

> [!div class="checklist"]
> * Сопоставление поддомена с помощью записи CNAME.
> * Сопоставление корневого домена с помощью записи A.
> * Сопоставление домена с подстановочным знаком с помощью записи CNAME.
> * Автоматизация сопоставления доменов с помощью скриптов.

Перейдите к следующему руководству, чтобы научиться привязывать пользовательский SSL-сертификат к домену.

> [!div class="nextstepaction"]
> [Привязывание существующего настраиваемого SSL-сертификата к веб-приложениям Azure](app-service-web-tutorial-custom-ssl.md)

