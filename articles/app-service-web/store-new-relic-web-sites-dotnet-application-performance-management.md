<properties 
	pageTitle="Веб-приложение .NET в службе приложений Azure с управлением производительностью приложения от New Relic" 
	description="Узнайте, как использовать средство мониторинга производительности для приложений ASP.NET, работающих в службе приложений Azure." 
	services="app-service\web" 
	documentationCenter=".net" 
	authors="cephalin" 
	manager="wpickett" 
	editor=""/>

<tags 
	ms.service="app-service-web" 
	ms.workload="web" 
	ms.tgt_pltfrm="na" 
	ms.devlang="dotnet" 
	ms.topic="article" 
	ms.date="07/30/2015" 
	ms.author="stepsic"/>



# Веб-приложение .NET в службе приложений Azure с управлением производительностью приложения от New Relic

В этом руководстве описывается, как добавить соответствующее мировым стандартам средство мониторинга производительности New Relic в веб-приложение в [службе приложений Azure](http://go.microsoft.com/fwlink/?LinkId=529714). Вы узнаете, как быстро и просто добавить его в свое приложение, а также найдете описание некоторых функций New Relic. Дополнительные сведения об использовании New Relic см. в разделе [Использование New Relic](#using-new-relic)

## Что такое New Relic?

New Relic — это инструмент для разработчиков, который осуществляет мониторинг рабочих приложений и предоставляет подробные данные об их производительности и надежности. Таким образом, он позволяет быстрее выявлять и диагностировать возникающие проблемы с производительностью, а также предоставляет в ваше распоряжение данные, необходимые для решения этих проблем.

Инструмент New Relic отслеживает время загрузки и пропускную способность веб-транзакций как через сервер, так и через браузеры пользователей. Он позволяет увидеть, как долго вы пользуетесь базой данных, анализирует медленные запросы и веб-запросы, обеспечивает мониторинг бесперебойной работы и отображает соответствующие предупреждения, отслеживает исключения в приложениях, а также поддерживает множество других функций.

## Специальные цены на New Relic в Магазине Azure

New Relic Standard для пользователей Azure предлагается бесплатно. New Relic Pro предоставляется в виде нескольких разных пакетов в зависимости от используемого режима веб-сайта и размера экземпляра при использовании режима с резервированием.

Информацию по ценам см. на странице [New Relic в Microsoft Azure Marketplace](/marketplace/partners/newrelic/newrelic).

> [AZURE.NOTE]Версия, предлагаемая по указанной цене, поддерживает до 10 вычислительных операций. Если количество вычислительных операций превышает 10, стоимость корпоративного лицензирования вы можете узнать непосредственно в компании New Relic (sales@newrelic.com).

Клиенты Azure получают пробную двухнедельную подписку на New Relic Pro при развертывании агента New Relic.

Подписка на New Relic с использованием Azure Marketplace

New Relic тесно интегрируется с веб-ролями и рабочими ролями Azure, а также службой приложений Azure.

Чтобы подписаться на New Relic непосредственно из Azure Marketplace, выполните четыре простых шага, как указано далее.

## Шаг 1. Создание учетной записи New Relic

1. Перейдите на [портал Azure](https://portal.azure.com) и в углу нажмите кнопку **Создать**.
3. Щелкните **Developer services** (Службы для разработчиков) > **New Relic APM**.
4. Настройте учетную запись New Relic, заполнив следующие поля, а затем нажмите кнопку **Создать**.
	- **Имя**
	- **Ценовая категория**
	- **Группа ресурсов**
	- **Подписка**
	- **Расположение**
	- **Условия использования**

11. После нажатия кнопки **Создать** начнется процесс создания учетной записи New Relic. Чтобы отслеживать состояние, нажмите кнопку **Уведомления**. По завершении процесса создания отобразится колонка учетной записи New Relic.

12. Лицензионный ключ для New Relic указывается на панели **Основные компоненты** в верхней части колонки. Экземпляр вашего веб-приложения автоматически зарегистрирует этот лицензионный ключ в своих параметрах при интеграции веб-приложения с учетной записью New Relic.

## Шаг 2. Настройка интеграции New Relic для веб-приложения

1. Откройте колонку вашего веб-приложения на [портале Azure](https://portal.azure.com).
2. В меню «...» в верхней части колонки нажмите **Добавить плитки**.
3. На вкладке **Мониторинг** выберите **Сводка приложения** и перетащите плитку в нужное место в колонке своего веб-приложения.
4. Щелкните «Готово», чтобы завершить добавление плиток.
5. Щелкните плитку **Мониторинг приложений** и выберите **New Relic**.
6. Выберите учетную запись, созданную на предыдущем шаге, и нажмите кнопку **ОК**. 

	![](./media/store-new-relic-web-sites-dotnet-application-performance-management/configure-new-relic-integration.png)

	Когда операция сохранения завершится, нажмите кнопку **Все параметры** в колонке веб-приложения, а затем щелкните **Параметры приложения**. В раздел колонки **Параметры приложения** должен добавиться параметр **NEWRELIC\_LICENSEKEY** для поддержки New Relic.

	>[AZURE.NOTE]Для вступления новых параметров приложения в силу может потребоваться до 30 секунд. Чтобы немедленно применить параметры, перезапустите веб-приложение.

## Шаг 3. Публикация веб-приложения ASP.NET

Опубликуйте свое веб-приложение с помощью Visual Studio. Если вы уже публиковали свое веб-приложение, заново опубликуйте его, чтобы экземпляр веб-приложения добавил необходимые пакеты NuGet New Relic для активации мониторинга New Relic.

## Шаг 4. Проверка производительности приложения в New Relic

Для просмотра панели мониторинга New Relic:

2. Откройте колонку вашего веб-приложения на [портале Azure](https://portal.azure.com).
3. Щелкните **Мониторинг приложений** > **Имя приложения** > **Просмотреть в New Relic**.

	![](./media/store-new-relic-web-sites-dotnet-application-performance-management/view-new-relic-data.png)

3. Если вы впервые используете учетную запись, настройте сведения о ней.
3. В строке меню New Relic выберите **Приложения -> (имя приложения)**.

	Автоматически отобразится панель мониторинга **Мониторинг > Обзор**.

	![Панель мониторинга New Relic](./media/store-new-relic-web-sites-dotnet-application-performance-management/NewRelic_app.png)

	После выбора приложения из списка в меню **Приложения** на панели мониторинга **Обзор** будут показаны сведения о текущем сервере приложений, а также о браузере.

### <a id="using-new-relic"></a>Использование New Relic

После выбора приложения из списка в меню "Приложения" на панели мониторинга "Обзор" будут показаны сведения о текущем сервере приложений, а также о браузере. Для переключения между двумя представлениями щелкните кнопку **Сервер приложений** или **Браузер**.

Кроме функций <a href="https://newrelic.com/docs/site/the-new-relic-ui#functions">стандартного пользовательского интерфейса New Relic</a> и <a href="https://newrelic.com/docs/site/the-new-relic-ui#drilldown">детализации панели мониторинга</a>, на панели мониторинга "Обзор приложений" также доступны дополнительные функции.

<table border="1">
  <thead>
    <tr>
      <th><b>Задача</b></th>
      <th><b>Действия</b></th>
    </tr>
  </thead>
  <tbody>
    <tr>
       <td>Показать сведения о панели мониторинга для выбранного сервера приложений или браузера</td>
       <td>Нажмите кнопку <b>Сервер приложений</b> или <b>Браузер</b>.</td>
    </tr>
     <tr>
       <td>Просмотр пороговых значений оценки <a href="https://newrelic.com/docs/site/apdex" target="_blank">Apdex</a> по приложению.</td>
       <td>Выберите значок оценки Apdex <b>?<b>.</b></b></td>
    </tr>
    <tr>
       <td>Просмотр сведений Apdex по всему миру</td>
       <td>В разделе "Обзор" представления <b>Браузер</b> выберите любую точку на карте Global Apdex.<br /><b>Совет.</b> Чтобы напрямую перейти к панели мониторинга <a href="https://newrelic.com/docs/site/geography" target="_blank">География</a> для выбранного приложения, щелкните заголовок <b>Global Apdex</b> или выберите любую точку на карте Global Apdex.</td>
    </tr>
    <tr>
       <td>Просмотр панели мониторинга <a href="https://docs.newrelic.com/docs/applications-menu/transactions-dashboard" target="_blank">Веб-транзакции</a></td>
       <td>На панели мониторинга «Обзор приложений» выберите таблицу «Веб-транзакции». Либо щелкните название транзакции, чтобы просмотреть информацию об определенной веб-транзакции (включая <a href="https://newrelic.com/docs/site/key-transactions" target="_blank">Ключевые транзакции</a>).</td>
    </tr>
    <tr>
       <td>Просмотр панели мониторинга <a href="https://newrelic.com/docs/site/errors" target="_blank">Ошибки</a></td>
       <td>На панели мониторинга "Обзор " щелкните заголовок диаграммы "Частота ошибок".<br /><b>Совет.</b> Панель мониторинга также можно открыть, последовательно выбрав пункты <b>Приложения</b> -> (ваше приложение) > "События" > "Ошибки".</td>
    </tr>
    <tr>
       <td>Просмотр сведений о сервере приложений</td>
       <td><p>Выполните любое из следующих действий:<p>
        <ul>
          <li>Переключитесь между табличным представлением узлов и представлением отдельных показателей по каждому узлу.</li>
          <li>Щелкните имя одного из серверов.</li>
          <li>Выберите оценку Apdex для одного из серверов.</li>
          <li>Выберите "Использование процессора" или "Память" одного из серверов.</li>
        </ul>
       </p></p></td>
    </tr>
  </tbody>
</table>

Ниже приведен пример панели мониторинга "Обзор приложений" при выборе представления "Браузер".

![Консоль диспетчера пакетов](./media/store-new-relic-web-sites-dotnet-application-performance-management/NewRelic_app_browser.png)

## Дальнейшие действия

Для получения дополнительных сведений используйте следующие ресурсы:

 * [Установка агента .NET на веб-сайтах Azure](https://docs.newrelic.com/docs/agents/net-agent/azure-installation/azure-websites#manual): процедуры установки агента .NET New Relic. 
 * [Пользовательский интерфейс New Relic](https://newrelic.com/docs/site/the-new-relic-ui): обзор пользовательского интерфейса New Relic, настройка прав пользователей и профилей с использованием стандартных функций и детализированных данных панели мониторинга.
 * [Обзор приложений](https://newrelic.com/docs/site/applications-overview): возможности и функции при использовании панели мониторинга "Обзор приложений" в New Relic.
 * [Apdex](https://newrelic.com/docs/site/apdex): обзор способов, используемых Apdex для измерения степени удовлетворенности пользователей приложением.
 * [Мониторинг реального пользователя](https://newrelic.com/docs/features/real-user-monitoring): обзор способов, используемых RUM для подробного анализа времени, необходимого пользовательским браузерам для загрузки веб-страниц, а также получения данных о регионе пребывания пользователей и используемых браузерах.
 * [Поиск справки](https://newrelic.com/docs/site/finding-help): ресурсы, доступные через интерактивный центр справки New Relic.

>[AZURE.NOTE]Если вы хотите приступить к работе со службой приложений Azure до создания учетной записи Azure, перейдите к разделу [Пробное использование службы приложений](http://go.microsoft.com/fwlink/?LinkId=523751), где вы можете быстро создать кратковременное веб-приложение начального уровня в службе приложений. Никаких кредитных карт и обязательств.

## Изменения
* Указания по изменениям при переходе от веб-сайтов к службе приложений см. в разделе [Служба приложений Azure и ее влияние на существующие службы Azure](http://go.microsoft.com/fwlink/?LinkId=529714).


[vswebsite]: web-sites-dotnet-get-started.md

[wmnugetbutton]: ./media/store-new-relic-web-sites-dotnet-application-performce-management/nrwmnugetbutton.png
[wmnugetgallery]: ./media/store-new-relic-web-sites-dotnet-application-performce-management/nrwmnugetgallery.png

[newrelicconf]: ./media/store-new-relic-web-sites-dotnet-application-performce-management/nrwmlicensekey.png
[vslicensekey]: ./media/store-new-relic-web-sites-dotnet-application-performce-management/nrvslicensekey.png
[add-on]: ./media/store-new-relic-web-sites-dotnet-application-performce-management/nraddon.png
[custom]: ./media/store-new-relic-web-sites-dotnet-application-performce-management/nrcustom.png
 

<!---HONumber=AcomDC_1203_2015-->