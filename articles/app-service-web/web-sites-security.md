<properties
	pageTitle="Защита приложения в службе приложений Azure"
	description="Узнайте, как защитить веб-приложение, мобильное приложение или приложение API в службе приложений Azure."
	services="app-service"
	documentationCenter=""
	authors="cephalin"
	manager="wpickett"
	editor=""/>

<tags
	ms.service="app-service"
	ms.workload="na"
	ms.tgt_pltfrm="na"
	ms.devlang="multiple"
	ms.topic="article"
	ms.date="01/12/2016"
	ms.author="cephalin"/>


#Защита приложения в службе приложений Azure

В этой статье рассказывается о защите веб-приложений, серверной части мобильный приложений и приложений API в службе приложений Azure.

В службе приложений Azure безопасность обеспечивается на двух уровнях:

- **Безопасность инфраструктуры и платформы**: вы доверяете Azure заботу о безопасности ваших служб в облаке.
- **Безопасность приложения**: безопасность должна быть реализована в самом приложении. Сюда входит выбор способа интеграции с Azure Active Directory, управления сертификатами и контроля за безопасностью взаимодействия с другими службами. 

#### Безопасность инфраструктуры и платформы
Поскольку служба приложений поддерживает виртуальные машины Azure, хранилище, сетевые подключения, веб-платформы, управление, возможности интеграции и многое другое, она активно защищается, укрепляется и постоянно проходит тщательные проверки на предмет того, что:

- Приложения в вашей службе приложений изолированы как от Интернета, так и от ресурсов Azure других клиентов.
- Передача секретных данных (например строк подключения) между приложением из службы приложений и другими ресурсами Azure (например базой данных SQL) в группе ресурсов остается в пределах Azure и не выходит за рамки сети. Секретные данные всегда шифруются.
- Передача данных между приложением службы приложений и внешними ресурсами, такими как управление PowerShell, интерфейс командной строки, пакеты SDK для Azure, API REST и гибридные подключения, всегда шифруются.
- Круглосуточное предотвращение угроз защищает ресурсы службы приложений от вредоносных программ, атак типа "отказ в обслуживании" (DDoS), атак типа "злоумышленник посередине" (MITM) и других угроз. 

Дополнительные сведения о безопасности инфраструктуры и платформы см. в статье [Центр управления безопасностью Azure](/support/trust-center/security/).

#### Безопасность приложений

В то время как Azure отвечает за безопасность инфраструктуры и платформы, на которой работает ваше приложение, за безопасность самого приложения отвечаете вы. Другими словами, вы должны разработать и развернуть код и содержимое приложения, а также обеспечить безопасное управление. Без этого код или содержимое приложения будут уязвимы к таким угрозам, как:

- внедрение кода SQL;
- перехват сеансов;
- межсайтовые сценарии;
- MITM на уровне приложений;
- DDoS на уровне приложений.

Полное описание аспектов обеспечения безопасности веб-приложений выходит за рамки этого документа. В качестве отправной точки для дальнейшего изучения вопросов защиты приложений см. веб-сайт [открытого проекта безопасности веб-приложений (OWASP)](https://www.owasp.org/index.php/Main_Page), особенно раздел [10 лучших проектов](https://www.owasp.org/index.php/Category:OWASP_Top_Ten_Project), в котором перечислены текущие 10 самых важных пробелов в защите веб-приложений, согласно определению участников проекта OWASP.

## Проверка приложения на защиту от несанкционированного доступа

Один из самых простых способов запустить проверку приложения службы приложений на уязвимости — это [интеграция с системой Tinfoil Security](/blog/web-vulnerability-scanning-for-azure-app-service-powered-by-tinfoil-security/), позволяющей просканировать приложение одним щелчком мыши. Вы получите удобный отчет по результатам проверки и пошаговые инструкции по устранению уязвимостей.

Если вы хотите провести собственные тесты на защиту от несанкционированного доступа или воспользоваться другой системой сканирования или поставщиком услуг, выполните [процедуру утверждения тестов Azure на защиту от несанкционированного доступа](https://security-forms.azure.com/penetration-testing/terms) и получите предварительное разрешение на проведение желаемых тестов.

##<a name="https"></a> Безопасный обмен данными с клиентами

Если вы используете для своего веб-приложения доменное имя ***.azurewebsites.net**, для доступа к приложению службы приложений по протоколу HTTPS не нужны дополнительные действия. Это связано с тем, что сертификат SSL предоставляется для всех доменных имен ***.azurewebsites.net**. Если сайт использует [имя пользовательского домена](web-sites-custom-domain-name.md), можно отправить SSL-сертификат, чтобы [включить HTTPS](web-sites-configure-ssl-certificate.md) для пользовательского домена.

Включение [HTTPS](https://en.wikipedia.org/wiki/HTTPS) помогает защититься от MITM-атак на обмен данными между приложением и его пользователями.

## Уровень защиты данных

Служба приложений интегрируется с базой данных SQL таким образом, что все строки подключения шифруются по всей доске и расшифровываются только на той виртуальной машине, где запущено приложение, *и* только при его запуске. Кроме того, база данных SQL Azure включает множество функций безопасности, которые помогут вам защитить данные приложения от киберугроз, включая [шифрование статических данных](https://msdn.microsoft.com/library/dn948096.aspx), [постоянное шифрование](https://msdn.microsoft.com/library/mt163865.aspx), [динамическую маскировку данных](sql-database-dynamic-data-masking-get-started.md) и [обнаружение угроз](sql-database-threat-detection-get-started). Если у вас есть конфиденциальные данные или нормативные требования, обратитесь за дополнительной информацией по защите ваших данных к статье [Защита базы данных SQL](sql-database-security.md).

Если вы пользуетесь услугами стороннего поставщика баз данных, такого как ClearDB, см. рекомендации по обеспечению безопасности в документации поставщика.

##<a name="develop"></a> Безопасная разработка и развертывание

### Профиль публикации и параметры публикации

При разработке приложений, выполнении задач управления или автоматизации задач с помощью таких служебных программ, как **Visual Studio**, **Web Matrix**, **Azure PowerShell** или **интерфейс командной строки Azure (Azure CLI)**, можно использовать файл *параметров публикации* или *профиль публикации*. В обоих случаях выполняется проверка подлинности в Azure и требуется защита для предотвращения несанкционированного доступа.

* Файл **параметров публикации** содержит:

	* идентификатор подписки Azure;

	* сертификат управления, позволяющий выполнять задачи управления для подписки *без необходимости предоставления имени учетной записи или пароля*.

* Файл **профиля публикации** содержит:

	* Сведения о публикации в приложении

Если применяется служебная программа, использующая файл параметров или профиля публикации, импортируйте его в эту служебную программу, а затем **удалите** этот файл. Если файл необходимо сохранить, например для совместного использования с другими сотрудниками в проекте, сохраните его в безопасном месте, таком как *зашифрованный* каталог с ограниченными разрешениями.

Кроме того, импортированные учетные данные также необходимо защитить. Например, как **Azure PowerShell**, так и **интерфейс командной строки Azure** сохраняют импортированные данные в вашем **домашнем каталоге** (*~* в системах Linux или OS X и */users/имя\_пользователя* в системах Windows). Для дополнительной защиты можно **зашифровать** эти расположения с помощью средств шифрования, имеющихся в используемой операционной системе.

### Параметры конфигурации и строки подключения
Обычно строки подключения, учетные данные для проверки подлинности и другие конфиденциальные данные хранятся в файлах конфигурации. К сожалению, эти файлы могут быть раскрыты на веб-сайте или извлечены в общедоступный репозиторий, предоставляющий информацию из них. Например, простой поиск по [GitHub](https://github.com) может выявить в общедоступных репозиториях бесчисленное множество файлов конфигурации. содержащих секретные данные.

Подобную информацию лучше всего хранить в файлах конфигурации вашего приложения. Служба приложений позволяет хранить сведения о конфигурации как часть среды выполнения в виде **параметров приложений** и **строк подключения**. Эти значения предоставляются в приложение во время выполнения посредством *переменных среды* в большинстве языков программирования. Для приложений .NET эти значения вставляются в конфигурацию .NET во время выполнения. Кроме того, параметры конфигурации останутся зашифрованными, пока вы не откроете или не настроите их на [портале Azure](http://portal.azure.com) или в таких утилитах, как PowerShell или интерфейс командной строки Azure.

Хранение сведений о конфигурации в службе приложений позволяет администратору приложения блокировать конфиденциальную информацию для рабочих приложений. Разработчики могут использовать отдельный набор параметров конфигурации, которые будут автоматически заменены на параметры, настроенные в службе приложений. Даже разработчикам не нужно знать секретные данные, настроенные для рабочего приложения. Дополнительные сведения о настройке параметров приложений и строках подключения см. в статье [Настройка веб-приложений](web-sites-configure.md).

### FTPS

Служба приложений Azure предоставляет приложению защищенный доступ к файловой системе по протоколу **FTPS**. Это дает вам возможность безопасно работать с кодом приложения в веб-приложении, а также журналами диагностики. Рекомендуется всегда использовать FTPS вместо FTP.

Чтобы получить FTPS-ссылку на свое приложение, выполните следующие действия:

1. Откройте [портал Azure](http://portal.azure.com).
2. Выберите **Просмотреть все**.
3. В колонке **Обзор** выберите **Службы приложений**.
4. В колонке **Службы приложений** выберите нужное приложение.
5. В колонке приложений выберите **Все параметры**.
6. В колонке **Параметры** выберите **Свойства**.
7. Ссылки FTP и FTPS приведены в колонке **Параметры**. 

Дополнительные сведения о FTPS см. в статье [Протокол FTP](http://en.wikipedia.org/wiki/File_Transfer_Protocol).

## Дальнейшие действия

Дополнительные сведения о безопасности платформы Azure, о сообщениях об **инцидентах и нарушениях безопасности** и об информировании Майкрософт о предстоящем выполнении **теста на проникновение** на сайт см. раздел, посвященный безопасности, в [центре управления безопасностью Microsoft Azure](http://azure.microsoft.com/support/trust-center/security/).

Дополнительные сведения о файлах **web.config** и **applicationhost.config** в приложениях службы приложений см. в статье [Параметры конфигурации, разблокированные в веб-приложениях службы приложений Azure](http://azure.microsoft.com/blog/2014/01/28/more-to-explore-configuration-options-unlocked-in-windows-azure-web-sites/).

Сведения о ведении журнала приложений службы приложений, который может быть полезен при обнаружении атак, см. в статье [Включение ведения журнала диагностики](web-sites-enable-diagnostic-log.md).

>[AZURE.NOTE]Если требуется приступить к работе со службой приложений Azure до создания учетной записи Azure, перейдите к разделу [Пробное использование службы приложений](http://go.microsoft.com/fwlink/?LinkId=523751), который поможет быстро создать кратковременное приложение начального уровня в службе приложений. Никаких кредитных карт и обязательств.

## Изменения

* Указания по изменениям при переходе от веб-сайтов к службе приложений см. в разделе [Служба приложений Azure и ее влияние на существующие службы Azure](http://go.microsoft.com/fwlink/?LinkId=529714).

<!---HONumber=AcomDC_0114_2016-->