<properties
	pageTitle="Создание веб-приложения ASP.NET в службе приложений Azure"
	description="В данном учебнике демонстрируется, как создать веб-проект ASP.NET в Visual Studio 2013 и развернуть его в веб-приложении в службе приложений Azure. Менее чем за 15 минут вы получите приложение, которое работает в облаке."
	services="app-service\web"
	documentationCenter=".net"
	authors="tdykstra"
	manager="wpickett"
	editor="mollybos"/>

<tags
	ms.service="app-service-web"
	ms.workload="web"
	ms.tgt_pltfrm="na"
	ms.devlang="dotnet"
	ms.topic="get-started-article" 
	ms.date="06/26/2015"
	ms.author="tdykstra"/>

# Создание веб-приложения ASP.NET в службе приложений Azure

## Обзор

В этом учебнике показано, как создать веб-приложение ASP.NET и развернуть его [в веб-приложениях службы приложений Azure](http://go.microsoft.com/fwlink/?LinkId=529714) с помощью Visual Studio 2013 или Visual Studio 2013 for Web Express. Этот учебник разработан для читателей, не имеющих опыта использования Azure или ASP.NET. По завершении изучения этого учебника вы получите простое веб-приложение, работающее в облаке.

Вы узнаете следующее:

* Как подготовить компьютер к разработке для Azure путем установки пакета Azure SDK.
* Как создать веб-проект ASP.NET в Visual Studio и развернуть его в веб-приложении Azure.
* Как внести изменения в веб-проект и повторно развернуть приложение.
* Как использовать [портал Azure](http://go.microsoft.com/fwlink/?LinkId=529715) для мониторинга веб-приложения и управления им.

Для работы с этим учебником требуется учетная запись Azure.

* Вы можете [открыть учетную запись Azure бесплатно](/pricing/free-trial/?WT.mc_id=A261C142F) — вы получаете кредиты, которые можно использовать для опробования платных служб Azure, и даже после израсходования кредитов вы сохраняете учетную запись и возможность использовать бесплатные службы Azure, такие как веб-приложения службы приложений.
* Вы имеете возможность [активировать преимущества подписчика MSDN](/pricing/member-offers/msdn-benefits-details/?WT.mc_id=A261C142F) — ваша подписка MSDN каждый месяц приносит вам кредиты, которые можно использовать для оплаты за службы Azure.</li>

На следующем рисунке показано завершенное приложение:

![Домашняя страница веб-приложений](./media/web-sites-dotnet-get-started/deployedandazure.png)

##<a name="video"></a>Подписка на Microsoft Azure (видео)

В этом видео Скотт Хансельман (Scott Hanselman) демонстрирует. как легко можно подписаться на бесплатную пробную версию Microsoft Azure. (Длительность: 1:58)

> [AZURE.VIDEO sign-up-for-microsoft-azure]

[AZURE.INCLUDE [install-sdk-2013-only](../../includes/install-sdk-2013-only.md)]

## Создание веб-приложения ASP.NET

Первым шагом является создание проекта веб-приложения. Visual Studio автоматически создает веб-приложение Azure, в котором ваш проект будет развернут в дальнейшем.

1. Откройте Visual Studio 2013 или Visual Studio 2013 Express for Web.

2. В меню **Файл** выберите **Новый проект**.

3. В диалоговом окне **Новый проект** щелкните **C#** > **Интернет** > **Веб-приложение ASP.NET**. При желании вы можете выбрать **Visual Basic**.

3. Убедитесь, что в качестве целевой платформы выбрана **.NET Framework 4.5**.

4.  Служба [Application Insights](app-insights-overview.md) выполняет мониторинг доступности, производительности и использования веб-приложений. Снимите флажок **Добавить Application Insights в проект**, если вы не хотите попробовать эту службу.

4. Присвойте приложению имя **MyExample** и нажмите кнопку **ОК**

	![Диалоговое окно "Новый проект"](./media/web-sites-dotnet-get-started/GS13newprojdb.png)

5. В диалоговом окне **Новый проект ASP.NET** выберите шаблон **MVC**. Если вы предпочитаете работать с веб-формами ASP.NET, можно выбрать шаблон **Веб-формы**.

	[MVC и Web Forms](http://www.asp.net/get-started/websites) — это платформы ASP.NET для разработки веб-приложений. В этом учебнике вы можете выбрать любую из них. Однако при выборе веб-форм далее придется изменить *Default.aspx*, когда в учебнике даются указания на изменение *Index.cshtml*.

7. Щелкните **Изменить проверку подлинности**.

	![Диалоговое окно "Новый проект ASP.NET"](./media/web-sites-dotnet-get-started/GS13changeauth.png)

6. В диалоговом окне **Изменить аутентификацию** щелкните **Без аутентификации** и нажмите кнопку **ОК**.

	![Без аутентификации](./media/web-sites-dotnet-get-started/GS13noauth.png)

	В создаваемом примере приложения не будет функции входа пользователей в систему. В разделе [Дальнейшие действия](#next-steps) приводятся ссылки на учебник, в котором описывается реализация функций аутентификации и авторизации.

5. В диалоговом окне **Новый проект ASP.NET** оставьте параметры в разделе **MicrosoftAzure** без изменения и нажмите кнопку **OK**.

	![Диалоговое окно "Новый проект ASP.NET"](./media/web-sites-dotnet-get-started/GS13newaspnetprojdb.png)

	Эти параметры по умолчанию указывают, что Visual Studio создаст веб-приложение Azure для вашего веб-проекта. В следующем разделе учебника вы займетесь разворачиванием веб-проекта в только что созданном веб-приложении.

5. Если вы еще не вошли в Azure, Visual Studio покажет запрос для того, чтобы это сделать. Войдите, введя идентификатор и пароль учетной записи, которая используется для управления подпиской Azure.

	После выполнения входа появится диалоговое окно **Настройка параметров веб-приложения Microsoft Azure**, где вам будет предложено выбрать ресурсы, которые требуется создать.

	![Выполнен вход в Azure](./media/web-sites-dotnet-get-started/configuresitesettings.png)

3. В диалоговом окне **Настройка параметров веб-приложения Microsoft Azure** оставьте значение по умолчанию.

	Можно ввести другое **имя веб-приложения**, если необходимо, но имя должно быть уникальным в домене *azurewebsites.net*. Имя по умолчанию, предоставляемое Visual Studio, является уникальным.

	Azure будет использовать это имя в качестве префикса для URL-адреса приложения. Полный URL-адрес будет состоять из этого имени плюс *.azurewebsites.net* (как указано рядом с текстовым полем **Имя веб-приложения**). Например, если имя — `MyExample6442`, URL-адрес будет `MyExample6442.azurewebsites.net`. URL-адрес должен быть уникальным. Если кто-то уже использует введенный вами URL-адрес, справа появится красный восклицательный знак вместо зеленой галочки и потребуется ввести другое имя.

4. В раскрывающемся списке **План службы приложений** выберите пункт **Создать новый план службы приложений**.

	Раздел [Дальнейшие действия](#next-steps) в конце этого учебника содержит ссылки на информацию о планах службы приложений.

5. Введите *MyExamplePlan* или другое имя плана на ваш выбор.

6. В раскрывающемся списке **Группы ресурсов** выберите пункт **Создать новую группу ресурсов**.

	В разделе [Дальнейшие действия](#next-steps) имеются ссылки на информацию о группах ресурсов.

5. Введите *MyExampleResourceGroup* или другое имя группы ресурсов на ваш выбор.

5. В раскрывающемся списке **Регион** выберите ближайшее к вам расположение.

	Этот параметр указывает, в каком центре обработки данных Azure будет выполняться ваше веб-приложение. При работе с учебником вы можете выбрать любой регион, и это не будет оказывать существенного влияния. Однако для производственного веб-приложения необходимо, чтобы веб-сервер располагался максимально близко к браузерам, которые осуществляют доступ к вашему сайту, чтобы минимизировать [задержку](http://www.bing.com/search?q=web%20latency%20introduction&qs=n&form=QBRE&pq=web%20latency%20introduction&sc=1-24&sp=-1&sk=&cvid=eefff99dfc864d25a75a83740f1e0090).

5. Оставьте поле базы данных без изменений.

	В этом учебнике база данных не используется. В разделе [Дальнейшие действия](#next-steps) в конце данного учебника приводится ссылка на учебник, в котором показано, как использовать базу данных.

6. Нажмите кнопку **ОК**.

	![Выполнен вход в Azure](./media/web-sites-dotnet-get-started/configuresitesettings2.png)

	Через несколько секунд Visual Studio создаст веб-проект в указанной папке и создаст веб-приложение в выбранном регионе Azure.

	В окне **обозревателя решений** отображаются файлы и папки нового проекта.

	![Обозреватель решений](./media/web-sites-dotnet-get-started/solutionexplorer.png)

	В окне **Действие службы приложений Azure** показывается, что веб-приложение было создано.

	![Создано веб-приложение](./media/web-sites-dotnet-get-started/GS13sitecreated1.png)

	И вы можете видеть веб-приложение в обозревателе сервера.

	![Создано веб-приложение](./media/web-sites-dotnet-get-started/siteinse.png)

## Развертывание приложения в Azure

7. В окне **Действие службы приложений Azure** щелкните **Опубликовать MyExample в этом веб-приложении**.

	![Создано веб-приложение](./media/web-sites-dotnet-get-started/GS13sitecreated.png)

	Через несколько секунд появится мастер **веб-публикации**.

	Параметры, необходимые Visual Studio для развертывания проекта в Azure, были сохранены в *профиле публикации*. Мастер дает возможность просмотреть и изменить эти параметры.

8. На вкладке **Подключение** мастера **Публикация веб-сайта** щелкните **Проверить подключение**, чтобы убедиться, что Visual Studio может подключиться к Azure для развертывания веб-проекта.

	![Проверка подключения](./media/web-sites-dotnet-get-started/GS13ValidateConnection.png)

	После проверки подключения рядом с кнопкой **Проверить подключение** отображается зеленая галочка.

9. Нажмите кнопку **Далее**.

	![Успешно проверенное подключение](./media/web-sites-dotnet-get-started/GS13ValidateConnectionSuccess.png)

10. На вкладке **Параметры** нажмите кнопку **Далее**.

	![Вкладка "Параметры"](./media/web-sites-dotnet-get-started/GS13SettingsTab.png)

	Можно принять значения по умолчанию для **Конфигурации** и **Параметров публикации файла**.

	Раскрывающийся список **Конфигурация** позволяет развертывать отладочное построение для удаленной отладки. В разделе [Дальнейшие действия](#next-steps) приводятся ссылки на учебник, в котором описывается удаленный запуск Visual Studio в режиме отладки.

	Если развернуть **Параметры публикации файла**, вы увидите несколько параметров, позволяющие выполнять сценарии, которые не рассматриваются в данном учебнике:

	* удаление дополнительных файлов в месте назначения.

		Удаление любых файлов на сервере, которые не входят в ваш проект. Такая возможность может понадобиться, если вы развертываете проект в веб-приложении, в котором раньше был развернут другой проект.

	* Предварительная компиляция во время публикации.

		Может уменьшить время подготовки первого запроса для больших приложений.

	* Удаление файлов из папки App\_Data.

		При тестировании в папке App\_Data иногда находится файл базы данных SQL Server, который вы не хотите развертывать в производство.

11. На вкладке **Предварительный просмотр** нажмите кнопку **Начало предварительного просмотра**.

	![Кнопка "Начало предварительного просмотра" на вкладке "Предварительный просмотр"](./media/web-sites-dotnet-get-started/GS13Preview.png)

	На вкладке отображается список файлов, которые будут копироваться на сервер. Предварительный просмотр не является обязательным для публикации приложения, но это полезная функция, о которой нужно знать.

12. Щелкните **Опубликовать**.

	![Вывод файлов при нажатии кнопки "Начало предварительного просмотра"](./media/web-sites-dotnet-get-started/GS13previewoutput.png)

	Visual Studio начнет процесс копирования файлов в Azure.

	В окнах **Вывод** и **Действие веб-публикации** указывается, какие действия по развертыванию были выполнены, а также сообщается об успешном завершении развертывания.

	![Окно вывода с отчетом об успешном развертывании](./media/web-sites-dotnet-get-started/PublishOutput.png)

	После успешного развертывания URL-адрес развернутого веб-приложения автоматически открывается в используемом по умолчанию браузере, а созданное приложение теперь выполняется в облаке. URL-адрес в адресной строке браузера указывает на то, что веб-приложение загружается из Интернета.

	![Веб-приложение, выполняющееся в Azure](./media/web-sites-dotnet-get-started/GS13deployedsite.png)

13. Закройте браузер.

## Внесение изменений и повторное развертывание

В этом разделе учебника вы измените заголовок **h1** главной страницы, запустите проект локально на компьютере разработчика, чтобы проверить изменения, а затем развернете изменение в Azure.

2. Откройте файл *Views/Home/Index.cshtml* или *.vbhtml* в **Обозревателе решений**, измените заголовок **h1** с ASP.NET на ASP.NET and Azure и сохраните файл.

	![index.cshtml для MVC](./media/web-sites-dotnet-get-started/index.png)

	![Изменение h1 для MVC](./media/web-sites-dotnet-get-started/mvcandazure.png)

1. Нажмите клавиши CTRL+F5, чтобы увидеть обновленный заголовок, запустив веб-приложение на локальном компьютере.

	![Веб-приложение, выполняющееся локально](./media/web-sites-dotnet-get-started/localandazure.png)

	URL-адрес `http://localhost` указывает, что веб-приложение выполняется на локальном компьютере. По умолчанию он работает в IIS Express — упрощенной версии IIS, используемой на этапе разработки веб-приложений.

1. Закройте браузер.

1. В **Обозревателе решений** щелкните правой кнопкой проект и выберите пункт **Опубликовать**.

	![Выберите "Опубликовать"](./media/web-sites-dotnet-get-started/choosepublish.png)

	Появится вкладка "Предварительный просмотр" мастера **веб-публикации**. Если бы вам требовалось изменить какие-либо параметры публикации, вы бы выбрали другую вкладку, но нам нужно просто выполнить повторное развертывание с теми же параметрами.

2. В мастере **Публикация веб-сайтов** щелкните **Опубликовать**.

	![Нажмите кнопку "Опубликовать"](./media/web-sites-dotnet-get-started/clickpublish.png)

	Visual Studio развертывает проект в Azure и открывает веб-приложение в браузере по умолчанию.

	![Развернуты измененные веб-приложения](./media/web-sites-dotnet-get-started/deployedandazure.png)

**Совет:** можно включить панель инструментов **Веб-публикация одним щелчком** для еще более быстрого развертывания. Щелкните **Просмотр** > **Панели инструментов**, а затем выберите **Веб-публикация одним щелчком**. Панель инструментов позволяет выбрать профиль, нажать кнопку для публикации или кнопку, чтобы открыть мастер **Публикация веб-сайта**.

![Панель инструментов веб-публикации одним щелчком](./media/web-sites-dotnet-get-started/weboneclickpublish.png)

## Мониторинг веб-приложения и управление им с помощью портала управления

[Портал управления Azure](/services/management-portal/) — это веб-интерфейс, который позволяет отслеживать службы Azure, например только что созданное вами веб-приложение, и управлять ими. В этом разделе мы познакомимся с тем, что можно сделать в портале.

1. В браузере перейдите по адресу [https://portal.azure.com]() и войдите со своими учетными данными Azure.

2. Щелкните **Обзор > Веб-приложения**, затем щелкните имя веб-приложения.

	В колонке **Веб-приложения** для вашего веб-приложения отображается обзор статистики использования и ссылки на часто используемые функции управления веб-приложением.

	![Колонка веб-приложения](./media/web-sites-dotnet-get-started/portaldashboard.png)-->

	К этому моменту трафик вашего веб-приложения был незначительным, и на графике может ничего не показываться. Если вы перейдете к своему приложению, обновите страницу несколько раз, а затем обновите страницу портала, и вы увидите, как будет отображаться некоторая статистика.

3. Щелкните **Все параметры**, чтобы просмотреть дополнительные параметры для настройки веб-приложения.

	Появится список типов параметров.

	![](./media/web-sites-dotnet-get-started/portalconfigure1.png)-->

4. Щелкните **Параметры приложения**, чтобы увидеть пример различных параметров, которые можно настроить на портале.

	Например, вы можете управлять версией .NET, используемой для веб-приложения, включать компоненты, такие как [WebSockets](/blog/2013/11/14/introduction-to-websockets-on-windows-azure-web-sites/), задать [значения строки подключения](/blog/2013/07/17/windows-azure-web-sites-how-application-strings-and-connection-strings-work/) и многое другое.

	![Вкладка настройки веб-приложения на портале](./media/web-sites-dotnet-get-started/portalconfigure2.png)

Это всего лишь несколько функций управления порталом. Кроме этого, можно создавать новые веб-приложения, удалять существующие веб-приложения, останавливать и повторно запускать их, а также управлять различными службами Azure, такими как базы данных и виртуальные машины.

>[AZURE.NOTE]Если вы хотите приступить к работе со службой приложений Azure до создания учетной записи Azure, перейдите к разделу [Пробное использование службы приложений](http://go.microsoft.com/fwlink/?LinkId=523751), где вы можете быстро создать краткосрочное начальное веб-приложение в службе приложений. Никаких кредитных карт и обязательств.

## Дальнейшие действия

Из этого учебника вы узнали, как создать простое веб-приложение и развернуть его в веб-приложении Azure. Ниже приведены некоторые связанные разделы и ресурсы для изучения более подробных сведений:

* Другие способы развертывания веб-проекта

	В этом учебнике был показан самый быстрый способ создания веб-приложения и его развертывания одной операцией. Обзор других способов развертывания с помощью Visual Studio и [автоматизации развертывания](http://www.asp.net/aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/continuous-integration-and-continuous-delivery) из [системы управления версиями](http://www.asp.net/aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/source-control) см. в разделе [Развертывание веб-приложения Azure](web-sites-deploy.md).

	Visual Studio может также создавать скрипты Windows PowerShell, которые позволяют автоматизировать развертывание. Дополнительные сведения см. в разделе [Полная автоматизация (создание реальных облачных приложений в Azure)](http://www.asp.net/aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/automate-everything).

* Как управлять веб-приложением в Visual Studio

	Дополнительную информацию о функциях управления веб-приложениями, которые можно использовать в **обозревателе сервера**, см. в разделе [Устранение неполадок веб-приложений Azure в Visual Studio](web-sites-dotnet-troubleshoot-visual-studio.md).

* Как устранить неполадки веб-приложения

	Visual Studio предоставляет функции, упрощающие просмотр журналов Azure по мере их создания в режиме реального времени. Можно также работать в Azure удаленно в режиме отладки. Дополнительную информацию см. в разделе [Устранение неполадок веб-приложений Azure в Visual Studio](web-sites-dotnet-troubleshoot-visual-studio.md).

* Как добавить функции доступа к базе данных и авторизации

	Учебник по доступу к базе данных и ограничению некоторых функций приложения для использования авторизованными пользователями см. в разделе [Развертывание безопасного приложения ASP.NET MVC с членством, OAuth и базой данных SQL в веб-приложении Azure](/develop/net/tutorials/web-site-with-sql-database/).

* Добавление настраиваемого доменного имени и SSL

	Информацию об использовании SSL и собственного домена (например, www.contoso.com вместо contoso.azurewebsites.net) см. в следующих ресурсах:

	* [Настройка пользовательского имени домена для веб-сайта Azure](web-sites-custom-domain-name.md).
	* [Включение HTTPS для веб-приложения Azure](web-sites-configure-ssl-certificate.md)

* Как избежать затрат времени на ожидание пробуждения после времени простоя

	По умолчанию в случае простоя в течение определенного периода времени веб-приложения будут выгружены. Первый запрос после этого вынужден ожидать повторной загрузки веб-приложения. Чтобы избежать времени ожидания, можно включить функцию AlwaysOn. Дополнительные сведения см. в разделе, посвященном параметрам конфигурации, статьи [Настройка веб-приложений](web-sites-configure.md).

* Как добавить работающие в режиме реального времени функции, например, чат

	Если ваше веб-приложение будет содержать функции, работающие в режиме реального времени (например, служба чата, игра, тикер акций и т. д.), наилучшей производительности можно добиться при использовании [ASP.NET SignalR](http://www.asp.net/signalr) с методом транспортировки [WebSockets](/blog/2013/11/14/introduction-to-websockets-on-windows-azure-web-sites/). Дополнительную информацию см. в разделе [Использование SignalR с веб-приложениями Azure](http://www.asp.net/signalr/overview/signalr-20/getting-started-with-signalr-20/using-signalr-with-windows-azure-web-sites).

* Как выбрать между службой приложений, облачными службами и виртуальными машинами для веб-приложений

	Веб-приложения в Azure можно выполнять в веб-приложениях службы приложений Azure, как показано в этом учебнике, а также в облачных службах и на виртуальных машинах. Дополнительную информацию см. в разделах [Модели выполнения Azure](/develop/net/fundamentals/compute/) и [Веб-сайты Azure, облачные службы и виртуальные машины: когда они используются?](/manage/services/web-sites/choose-web-app-service/).

* [Как выбрать или создать план службы приложений](../app-service/azure-web-sites-web-hosting-plans-in-depth-overview.md)

* [Как выбрать или создать группу ресурсов](../azure-preview-portal-using-resource-groups.md)



## Изменения
* Указания по изменениям при переходе от веб-сайтов к службе приложений см. в разделе [Служба приложений Azure и ее влияние на существующие службы Azure](http://go.microsoft.com/fwlink/?LinkId=529714).
* Руководство по смене старого портала на новый портал см. в разделе [Справочник по навигации на предварительной версии портала](http://go.microsoft.com/fwlink/?LinkId=529715).
 

<!---HONumber=July15_HO5-->