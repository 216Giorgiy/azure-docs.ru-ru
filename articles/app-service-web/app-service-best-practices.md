<properties
	pageTitle="Рекомендации по использованию службы приложений Azure"
	description="Ознакомьтесь с рекомендациями и методами устранения неполадок для службы приложений Azure."
	services="app-service"
	documentationCenter=""
	authors="dariac"
	manager="wpickett"
	editor="mollybos"/>

<tags
	ms.service="app-service"
	ms.workload="na"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="05/05/2016"
	ms.author="dariagrigoriu"/>
    
# Рекомендации по использованию службы приложений Azure

В этой статье собраны рекомендации по использованию [службы приложений Azure](http://go.microsoft.com/fwlink/?LinkId=529714).

## <a name="resourcecomposition"></a>Проектирование архитектуры решения

### <a name="colocation"></a>Совместное размещение
Если входящие в решение ресурсы Azure, например веб-приложения и базы данных, находятся в разных регионах, возможны следующие последствия:
* увеличение задержки при взаимодействии между ресурсами,
* денежные расходы на передачу данных между регионами в соответствии со [стоимостью услуг Azure](https://azure.microsoft.com/pricing/details/data-transfers).

Мы рекомендуем размещать ресурсы Azure, составляющие решение, совместно в одном регионе. При создании ресурсов следует убедиться в том, что они находятся в одном регионе Azure, если иное не диктуется особенностями вашего бизнеса или структуры решения. Вы можете переместить приложение службы приложений в тот же регион, в котором расположена база данных, с помощью [функции клонирования службы приложений](app-service-web-app-cloning-portal.md). В настоящее время она доступна для приложений с планом обслуживания Premium.

## <a name="resourcemanagement"></a>Оптимизация работы среды выполнения

### <a name="memoryresources"></a>Если приложения используют больше памяти, чем ожидалось
Если вы заметите по данным мониторинга или по рекомендациям службы, что приложение использует больше памяти, чем ожидалось, попробуйте применить [функцию автоматического восстановления службы приложений](https://azure.microsoft.com/blog/auto-healing-windows-azure-web-sites). В одном из режимов работы функция автоматического восстановления выполняет действия с учетом заданного порога использования памяти. Возможные действия включают уведомления по электронной почте, исследования с помощью дампа памяти, мгновенное реагирование с перезапуском рабочего процесса. Функция автоматического восстановления настраивается через файл web.config или через удобный пользовательский интерфейс, как описано в записи блога [App Service Support Site Extension](https://azure.microsoft.com/blog/additional-updates-to-support-site-extension-for-azure-app-service-web-apps) (Расширение сайта поддержки для службы приложений).

### <a name="CPUresources"></a>Если приложения используют больше ресурсов ЦП, чем ожидалось
Если вы заметите по данным мониторинга или по рекомендациям службы, что приложение потребляет больше ресурсов ЦП, чем ожидалось, или регулярно создает пиковые нагрузки на ЦП, примените вертикальное или горизонтальное масштабирование плана службы приложений. Если приложение отслеживает состояние, допустимо только вертикальное масштабирование. Если же приложение работает без сохранения состояния, горизонтальное масштабирование более предпочтительно, поскольку оно обеспечит больше гибкости и возможностей.

Дополнительные сведения об отслеживании состояния в приложении можно получить в видеопрезентации [Planning a Scalable End-to-End Multi-Tier Application on Microsoft Azure Web App](https://channel9.msdn.com/Events/TechEd/NorthAmerica/2014/DEV-B414#fbid=?hashlink=fbid) (Проектирование масштабируемого полнофункционального многоуровневого приложения в службе приложений Microsoft Azure). Дополнительные сведения о масштабировании службы приложений и возможностях автоматического масштабирования см. в статье [Масштабирование веб-приложения в службе приложений Azure](web-sites-scale.md).

### <a name="socketresources"></a>Если исчерпаны ресурсы сокетов
Исчерпание резерва исходящих TCP-подключений обычно происходит, если используемые клиентские библиотеки не поддерживают повторное использование TCP-подключений или не используют метод проверки активности (Keep-Alive) для протоколов более высокого уровня (например, HTTP). Ознакомьтесь с документацией по каждой библиотеке, на которые ссылаются приложения в вашем плане службы приложений, и убедитесь, что настройка этих библиотек и методы их вызова обеспечивают эффективное повторное использование исходящих подключений. Также выполните все приведенные в документации рекомендации по правильному созданию, освобождению и очистке подключений, чтобы избежать утечки данных во время подключений. Пока выполняется эта проверка клиентских библиотек, последствия можно временно устранить, увеличив количество экземпляров.

<!---HONumber=AcomDC_0511_2016-->