<properties
	pageTitle="Сопоставление имени личного домена с приложением Azure"
	description="Сведения о сопоставлении имени личного домена с приложением в службе приложение Azure."
	services="app-service"
	documentationCenter=""
	authors="cephalin"
	manager="wpickett"
	editor="jimbe"
	tags="top-support-issue"/>

<tags
	ms.service="app-service"
	ms.workload="na"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="07/26/2016"
	ms.author="cephalin"/>

# Сопоставление имени личного домена с приложением Azure

[AZURE.INCLUDE [web-selector](../../includes/websites-custom-domain-selector.md)]

В этой статье показано, как вручную сопоставить имя личного домена с веб-приложением, серверной частью мобильного приложения и приложением API в [службе приложений Azure](../app-service/app-service-value-prop-what-is.md).

При создании приложению назначается уникальный поддомен azurewebsites.net. Например, если приложение называется **contoso**, оно будет иметь имя домена **contoso.azurewebsites.net**. Тем не менее вы можете сопоставить имя личного домена с приложением, чтобы URL-адрес, например `www.contoso.com`, представлял имя вашей компании.

>[AZURE.NOTE] Обратитесь за помощью к экспертам на [форумах Azure](https://azure.microsoft.com/support/forums/). Чтобы получить более квалифицированную помощь, перейдите на [сайт поддержки Azure](https://azure.microsoft.com/support/options/) и щелкните **Получить поддержку**.

[AZURE.INCLUDE [нижний колонтитул](../../includes/custom-dns-web-site-intro-notes.md)]

## Приобретение имени личного домена на портале Azure

Если вы еще не приобрели имя личного домена, его можно приобрести на [портале Azure](https://portal.azure.com) и там же управлять им непосредственно в параметрах приложения. Таким образом проще сопоставить личный домен с приложением, независимо от того, использует ли приложение [диспетчер трафика Azure](web-sites-traffic-manager-custom-domain-name.md).

Инструкции см. в статье [Приобретение и настройка личного домена для службы приложений Azure](custom-dns-web-site-buydomains-web-app.md).

## Сопоставление личного домена, приобретенного не на портале Azure

Если вы приобрели личный домен в службе [Azure DNS](https://azure.microsoft.com/services/dns/) или у стороннего поставщика, для его сопоставления с приложением необходимо выполнить три основных шага:

1. [Получить IP-адрес приложения *(только для записи A)*](#vip).
1. [Включить имя личного домена для приложения Azure](#enable).
    - **Где**: на [портале Azure](https://portal.azure.com).
    - **Почему**: чтобы приложение отвечало на запросы к имени личного домена.
2. [Создать записи DNS, которые сопоставляют домен с приложением](#dns).
    - **Где**: в средстве управления регистратора домена (например, Azure DNS, www.godaddy.com и т. д.).
    - **Почему**: чтобы ваш регистратор доменных имен сопоставлял нужный личный домен с приложением Azure.
3. [Проверить распространение DNS](#verify).

### Типы доменов, которые можно сопоставить

Служба приложений Azure позволяет сопоставить с приложением личные домены следующих типов:

- **Корневой домен** — имя домена, зарезервированное с помощью регистратора доменных имен (как правило, представлен записью узла `@`). Например, **contoso.com**.
- **Поддомен** — любой домен, который относится к вашему корневому домену. Например, **www.contoso.com** (представлен записью узла `www`). Разные поддомены одного корневого домена можно сопоставить с разными приложениями в Azure.
- **Домен с подстановочным знаком** — [любой поддомен, в имени которого в качестве крайней левой DNS-метки используется знак `*`](https://en.wikipedia.org/wiki/Wildcard_DNS_record) (например, записи узла `*` и `*.blogs`). Например, ***.contoso.com**.

### Типы записей DNS, которые можно использовать

В зависимости от потребностей для сопоставления личного домена можно использовать стандартные записи DNS двух типов:

- [A](https://en.wikipedia.org/wiki/List_of_DNS_record_types#A) — сопоставляет имя личного домена непосредственно с виртуальным IP-адресом приложения Azure.
- [CNAME](https://en.wikipedia.org/wiki/CNAME_record) — сопоставляет имя личного домена с доменным именем Azure, например **&lt;*имя\_приложения*>.azurewebsites.net**.

Преимущество записи CNAME заключается в том, что она сохраняется при изменении IP-адреса. Виртуальный IP-адрес может измениться при удалении и повторном создании приложения или переходе с более высокой ценовой категории на уровень **Общий**. В случае такого изменения запись CNAME останется действительной, а запись А потребует обновления.

В этом руководстве описана процедура использования как записи A, так и записи CNAME.

<a name="vip"></a>
## Шаг 1. Получение IP-адреса приложения *(только для записи A)*
Чтобы сопоставить имя личного домена с помощью записи A, требуется IP-адрес приложения Azure. Если для сопоставления будет использоваться запись CNAME, пропустите этот шаг и перейдите к следующему разделу.

1.	Войдите на [портал Azure](https://portal.azure.com).
2.	В меню слева щелкните **Службы приложений**.
4.	Выберите приложение и щелкните **Параметры** > **Личные домены и SSL** > **Предоставить внешние домены**.
5.	В разделе **Имена доменов** введите имя личного домена.
6.  Запишите IP-адрес. Он вам понадобится позже.
7.  Не закрывайте эту колонку портала. Вы вернитесь к ней после создания записей DNS.

<a name="dns"></a>
## Шаг 2. Создание записей DNS

Войдите в систему вашего регистратора доменных имен и воспользуйтесь его средством добавления записи A или записи CNAME. Пользовательские интерфейсы разных регистраторов несколько отличаются, поэтому следует просмотреть документацию своего поставщика. Ниже приведены некоторые общие рекомендации.

1.	Найдите страницу управления записями DNS. Найдите ссылки или области сайта, обозначенные как **Имя домена**, **DNS** или **Управление сервером доменных имен**. Часто ссылку можно найти, открыв сведения своей учетной записи и найдя такую ссылку, как **Мои домены**.
2.	Поищите ссылку, которая позволяет добавлять или изменять записи DNS. Это может быть **Файл зоны**, **Записи DNS** или ссылка на **Дополнительные настройки**.
3.  Создайте запись и сохраните изменения.
    - Инструкции по использованию записи A см. [здесь](#a).
    - Инструкции по использованию записи CNAME см. [здесь](#cname).

<a name="a"></a>
### Создание записи A

Чтобы выполнять сопоставление с IP-адресом приложения Azure по записи A, необходимо создать и запись A, и запись CNAME. Запись A нужна для разрешения DNS, а запись CNAME — для проверки того, что вы являетесь владельцем имени личного домена, осуществляемой в Azure.

Запись A необходимо настроить следующим образом (@ обычно представляет корневой домен):
 
<table cellspacing="0" border="1">
  <tr>
    <th>Пример полного доменного имени</th>
    <th>Узел, имя или имя узла</th>
    <th>Значение</th>
  </tr>
  <tr>
    <td>contoso.com (корневой домен)</td>
    <td>@</td>
    <td>IP-адрес, записанный на [шаге 1]()</td>
  </tr>
  <tr>
    <td>www.contoso.com (поддомен)</td>
    <td>www</td>
    <td>IP-адрес, записанный на [шаге 1]()</td>
  </tr>
  <tr>
    <td>*.contoso.com (с подстановочным знаком)</td>
    <td>*</td>
    <td>IP-адрес, записанный на [шаге 1]()</td>
  </tr>
</table>

Дополнительная запись CNAME использует соглашение, в соответствии с которым awverify.&lt;*поддомен*>.&lt;*корневой\_домен*> сопоставляется с awverify.&lt;*поддомен*>.azurewebsites.net. См. примеры ниже.

<table cellspacing="0" border="1">
  <tr>
    <th>Пример полного доменного имени</th>
    <th>Узел, имя или имя узла</th>
    <th>Значение</th>
  </tr>
  <tr>
    <td>contoso.com (корневой домен)</td>
    <td>awverify</td>
    <td>awverify.&lt;<i>имя_приложения</i>>.azurewebsites.net</td>
  </tr>
  <tr>
    <td>www.contoso.com (поддомен)</td>
    <td>awverify.www</td>
    <td>awverify.www.&lt;<i>имя_приложения</i>>.azurewebsites.net</td>
  </tr>
  <tr>
    <td>*.contoso.com (с подстановочным знаком)</td>
    <td>awverify</td>
    <td>awverify.&lt;<i>имя_приложения</i>>.azurewebsites.net</td>
  </tr>
</table>

<a name="cname"></a>
### Создание записи CNAME

Если вы используете запись CNAME для сопоставления с именем домена по умолчанию приложения Azure, не нужно создавать дополнительную запись CNAME, как при использовании записи A.

Запись CNAME необходимо настроить следующим образом (@ обычно представляет корневой домен):

<table cellspacing="0" border="1">
  <tr>
    <th>Пример полного доменного имени</th>
    <th>Узел, имя или имя узла</th>
    <th>Значение</th>
  </tr>
  <tr>
    <td>contoso.com (корневой домен)</td>
    <td>@</td>
    <td>&lt;<i>имя_приложения</i>>.azurewebsites.net</td>
  </tr>
  <tr>
    <td>www.contoso.com (поддомен)</td>
    <td>www</td>
    <td>&lt;<i>имя_приложения</i>>.azurewebsites.net</td>
  </tr>
  <tr>
    <td>*.contoso.com (с подстановочным знаком)</td>
    <td>*</td>
    <td>&lt;<i>имя_приложения</i>>.azurewebsites.net</td>
  </tr>
</table>


>[AZURE.NOTE] Azure DNS можно использовать для размещения необходимых записей доменов для веб-приложения. Информацию о настройке личного домена и создании записей в Azure DNS см. в статье [Создание пользовательских записей DNS для веб-приложения](../dns/dns-web-sites-custom-domain.md).

<a name="enable"></a>
## Шаг 3. Включение имени личного домена для приложения

В колонке **Предоставить внешние домены** на портале Azure (см. [Шаг 1](#vip)) необходимо добавить в список полное доменное имя личного домена.

1.	Вернитесь к колонке **Предоставить внешние домены** на портале Azure.

2.	Добавьте в список полное доменное имя личного домена (например, **www.contoso.com**).

    >[AZURE.NOTE] Azure проверит указанное здесь имя домена. Поэтому убедитесь, что оно соответствует имени домена, для которого создана запись DNS на [шаге 2](#dns). Если вы уверены, что

6.  Щелкните **Сохранить**.

7.  Настроив новое имя личного домена, перейдите к вашему личному домену в браузере. Теперь ваше приложение должно быть запущено, а имя личного домена

<a name="verify"></a>
## Проверка распространения DNS

После завершения настройки в зависимости от поставщика DNS распространение изменений может занять некоторое время. Чтобы проверить, что распространение DNS выполняется соответствующим образом, перейдите по ссылке [http://digwebinterface.com/](http://digwebinterface.com/). Перейдя на веб-сайт, в соответствующем текстовом поле введите имена узлов и щелкните **Получить подробную информацию**. Просмотрите результаты, чтобы убедиться, что последние изменения вступили в силу.

![](./media/web-sites-custom-domain-name/1-digwebinterface.png)

> [AZURE.NOTE] Распространение записей DNS может занимать до 48 часов (иногда больше). Даже если настройка выполнена правильно, все равно нужно дождаться успешного выполнения распространения.

## Дальнейшие действия

Дополнительные сведения см. в статьях [Приступая к работе с Azure DNS](../dns/dns-getstarted-create-dnszone.md) и [Делегирование домена в Azure DNS](../dns/dns-domain-delegation.md)

>[AZURE.NOTE] Чтобы приступить к работе со службой приложений Azure до создания учетной записи Azure, перейдите к разделу [Пробное использование службы приложений](http://go.microsoft.com/fwlink/?LinkId=523751), где вы можете быстро создать кратковременное веб-приложение начального уровня в службе приложений. Никаких кредитных карт и обязательств.


<!-- Anchors. -->
[Overview]: #overview
[DNS record types]: #dns-record-types
[Find the virtual IP address]: #find-the-virtual-ip-address
[Create the DNS records]: #create-the-dns-records
[Enable the domain name on your web app]: #enable-the-domain-name-on-your-web-app

<!-- Images -->
[subdomain]: media/web-sites-custom-domain-name/azurewebsites-subdomain.png

<!---HONumber=AcomDC_0727_2016-->