---
title: "Сопоставление имени личного домена с приложением Azure"
description: "Сведения о сопоставлении имени личного домена с приложением в службе приложение Azure."
services: app-service
documentationcenter: 
author: cephalin
manager: wpickett
editor: jimbe
tags: top-support-issue
ms.assetid: 48644a39-107c-45fb-9cd3-c741974ff590
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/27/2016
ms.author: cephalin
translationtype: Human Translation
ms.sourcegitcommit: dcda8b30adde930ab373a087d6955b900365c4cc
ms.openlocfilehash: e25348cc1aa0ae284f0fcda7f11bdbe42ba1fa0a


---
# <a name="map-a-custom-domain-name-to-an-azure-app"></a>Сопоставление имени личного домена с приложением Azure
[!INCLUDE [web-selector](../../includes/websites-custom-domain-selector.md)]

В этой статье показано, как вручную сопоставить имя личного домена с веб-приложением, серверной частью мобильного приложения и приложением API в [службе приложений Azure](../app-service/app-service-value-prop-what-is.md). 

При создании приложению назначается уникальный поддомен azurewebsites.net. Например, если приложение называется **contoso**, то оно его доменным именем будет **contoso.azurewebsites.net**. Тем не менее вы можете сопоставить имя личного домена с приложением, чтобы URL-адрес, например `www.contoso.com`, представлял имя вашей компании.

> [!NOTE]
> Обратитесь за помощью к экспертам на [форумах Azure](https://azure.microsoft.com/support/forums/). Чтобы получить более квалифицированную помощь, перейдите на [сайт поддержки Azure](https://azure.microsoft.com/support/options/) и щелкните **Получить поддержку**.
> 
> 

[!INCLUDE [introfooter](../../includes/custom-dns-web-site-intro-notes.md)]

## <a name="buy-a-new-custom-domain-in-azure-portal"></a>Приобретение имени личного домена на портале Azure
Если вы еще не приобрели имя личного домена, его можно приобрести на [портале Azure](https://portal.azure.com)и там же управлять им непосредственно в параметрах приложения. Таким образом проще сопоставить личный домен с приложением, независимо от того, использует ли приложение [диспетчер трафика Azure](web-sites-traffic-manager-custom-domain-name.md) . 

Инструкции см. в статье [Приобретение и настройка личного домена для службы приложений Azure](custom-dns-web-site-buydomains-web-app.md).

## <a name="map-a-custom-domain-you-purchased-externally"></a>Сопоставление личного домена, приобретенного не на портале Azure
Если вы приобрели личный домен в службе [Azure DNS](https://azure.microsoft.com/services/dns/) или у стороннего поставщика, для его сопоставления с приложением необходимо выполнить три основных шага:

1. [*(только для записи A)* ](#vip).
2. [Создать записи DNS, которые сопоставляют домен с приложением](#createdns). 
   * **Где**: в средстве управления регистратора домена (например, Azure DNS, GoDaddy и т. д.).
   * **Почему**: чтобы ваш регистратор доменных имен сопоставлял нужный личный домен с приложением Azure.
3. [Включить имя личного домена для приложения Azure](#enable).
   * **Где**: на [портале Azure](https://portal.azure.com).
   * **Почему**: чтобы приложение отвечало на запросы к имени личного домена.
4. [Проверить распространение DNS](#verify).

### <a name="types-of-domains-you-can-map"></a>Типы доменов, которые можно сопоставить
Служба приложений Azure позволяет сопоставить с приложением личные домены следующих типов:

* **Корневой домен** — имя домена, зарезервированное с помощью регистратора доменных имен (как правило, представлен записью узла `@`). 
  Например, **contoso.com**.
* **Поддомен** — любой домен, который относится к вашему корневому домену. Например, **www.contoso.com** (представлен записью узла `www`).  Разные поддомены одного корневого домена можно сопоставить с разными приложениями в Azure.
* **Домен с подстановочными знаками** - [любой поддомен, в имени которого в качестве крайней левой DNS-метки используется знак `*`](https://en.wikipedia.org/wiki/Wildcard_DNS_record) (например, записи узла `*` и `*.blogs`). Например, **\*contoso.com**.

### <a name="types-of-dns-records-you-can-use"></a>Типы записей DNS, которые можно использовать
В зависимости от потребностей для сопоставления личного домена можно использовать стандартные записи DNS двух типов: 

* [A](https://en.wikipedia.org/wiki/List_of_DNS_record_types#A) — сопоставляет имя личного домена непосредственно с виртуальным IP-адресом приложения Azure. 
* [CNAME](https://en.wikipedia.org/wiki/CNAME_record) — сопоставляет имя личного домена с доменным именем Azure, например **&lt;*имя_приложения*>.azurewebsites.net**. 

Преимущество записи CNAME заключается в том, что она сохраняется при изменении IP-адреса. Виртуальный IP-адрес может измениться при удалении и повторном создании приложения или переходе с более высокой ценовой категории на уровень **Общий** . В случае такого изменения запись CNAME останется действительной, а запись А потребует обновления. 

В этом руководстве описана процедура использования как записи A, так и записи CNAME.

> [!IMPORTANT]
> Не создавайте запись CNAME для корневого домена (т. е. "корневую запись"). Дополнительные сведения см. в статье [Why can't a CNAME record be used at the root domain](http://serverfault.com/questions/613829/why-cant-a-cname-record-be-used-at-the-apex-aka-root-of-a-domain) (Почему запись CNAME невозможно использовать для корневого домена).
> Чтобы сопоставить корневой домен с приложением Azure, используйте запись А.
> 
> 

<a name="vip"></a>

## <a name="step-1-a-record-only-get-apps-ip-address"></a>Шаг 1. *(только для записи A)* 
Чтобы сопоставить имя личного домена с помощью записи A, требуется IP-адрес приложения Azure. Если для сопоставления будет использоваться запись CNAME, пропустите этот шаг и перейдите к следующему разделу.

1. Войдите на [портал Azure](https://portal.azure.com).
2. В меню слева щелкните **Службы приложений** .
3. Щелкните нужное приложение и нажмите кнопку **Личные домены**.
4. Запишите IP-адрес, указанный над разделом имен узлов.
   
   ![Сопоставление имени личного домена с помощью записи А: получение IP-адреса для приложения службы приложений Azure](./media/web-sites-custom-domain-name/virtual-ip-address.png)
5. Не закрывайте эту колонку портала. Вы вернитесь к ней после создания записей DNS.

<a name="createdns"></a>

## <a name="step-2-create-the-dns-records"></a>Шаг 2. Создание записей DNS
Войдите в систему вашего регистратора доменных имен и воспользуйтесь его средством добавления записи A или записи CNAME. Пользовательские интерфейсы разных регистраторов несколько отличаются, поэтому следует просмотреть документацию своего поставщика. Ниже приведены некоторые общие рекомендации.

1. Найдите страницу управления записями DNS. Найдите ссылки или области сайта, обозначенные как **Имя домена**, **DNS** или **Управление сервером доменных имен**. Часто ссылку можно найти, открыв сведения о своей учетной записи и найдя такую ссылку, как **Мои домены**.
2. Поищите ссылку, которая позволяет добавлять или изменять записи DNS. Это может быть ссылка **Файл зоны**, **Записи DNS** или **Дополнительно**.
3. Создайте запись и сохраните изменения.
   * Инструкции по использованию записи A см. [здесь](#a).
   * Инструкции по использованию записи CNAME см. [здесь](#cname).

<a name="a"></a>

### <a name="create-an-a-record"></a>Создание записи A
Чтобы выполнять сопоставление с IP-адресом приложения Azure по записи A, необходимо создать и запись A, и запись TXT. Запись A нужна для разрешения DNS, а запись TXT Azure используется для проверки того, что вы являетесь владельцем имени этого личного домена. 

Настройте запись A следующим образом ((@ обычно представляет корневой домен).

<table cellspacing="0" border="1">
  <tr>
    <th>Пример полного доменного имени</th>
    <th>Узел для записи A</th>
    <th>Значение для записи A</th>
  </tr>
  <tr>
    <td>contoso.com (корневой домен)</td>
    <td>@</td>
    <td>IP-адрес, записанный на <a href="#vip">шаге 1</a></td>
  </tr>
  <tr>
    <td>www.contoso.com (поддомен)</td>
    <td>www</td>
    <td>IP-адрес, записанный на <a href="#vip">шаге 1</a></td>
  </tr>
  <tr>
    <td>\*.contoso.com (с подстановочным знаком)</td>
    <td>\*</td>
    <td>IP-адрес, записанный на <a href="#vip">шаге 1</a></td>
  </tr>
</table>

Для дополнительной записи типа TXT применяется соглашение, в соответствии с которым &lt;*поддомен*>.&lt;*корневой_домен*> сопоставляется с адресом &lt;*имя_приложения*>.azurewebsites.net. Настройте запись TXT следующим образом.

<table cellspacing="0" border="1">
  <tr>
    <th>Пример полного доменного имени</th>
    <th>Узел, для которого задается TXT</th>
    <th>Значение TXT</th>
  </tr>
  <tr>
    <td>contoso.com (корневой домен)</td>
    <td>@</td>
    <td>&lt;<i>имя_приложения</i>>.azurewebsites.net</td>
  </tr>
  <tr>
    <td>www.contoso.com (поддомен)</td>
    <td>www</td>
    <td>&lt;<i>имя_приложения</i>>.azurewebsites.net</td>
  </tr>
  <tr>
    <td>\*.contoso.com (с подстановочным знаком)</td>
    <td>\*</td>
    <td>&lt;<i>имя_приложения</i>>.azurewebsites.net</td>
  </tr>
</table>

<a name="cname"></a>

### <a name="create-a-cname-record"></a>Создание записи CNAME
Если вы используете запись CNAME для сопоставления с доменным именем по умолчанию приложения Azure, то не нужно создавать дополнительную запись типа TXT, как при использовании записи A. 

> [!IMPORTANT]
> Не создавайте запись CNAME для корневого домена (т. е. "корневую запись"). Дополнительные сведения см. в статье [Why can't a CNAME record be used at the root domain](http://serverfault.com/questions/613829/why-cant-a-cname-record-be-used-at-the-apex-aka-root-of-a-domain) (Почему запись CNAME невозможно использовать для корневого домена).
> Чтобы сопоставить корневой домен с приложением Azure, используйте [запись А](#a).
> 
> 

Настройте запись CNAME следующим образом ((@ обычно представляет корневой домен).

<table cellspacing="0" border="1">
  <tr>
    <th>Пример полного доменного имени</th>
    <th>Узел записи CNAME</th>
    <th>Значение записи CNAME</th>
  </tr>
  <tr>
    <td>www.contoso.com (поддомен)</td>
    <td>www</td>
    <td>&lt;<i>имя_приложения</i>>.azurewebsites.net</td>
  </tr>
  <tr>
    <td>\*.contoso.com (с подстановочным знаком)</td>
    <td>\*</td>
    <td>&lt;<i>имя_приложения</i>>.azurewebsites.net</td>
  </tr>
</table>

<a name="enable"></a>

## <a name="step-3-enable-the-custom-domain-name-for-your-app"></a>Шаг 3. Включение имени личного домена для приложения
В колонке **Личные домены** на портале Azure (см. [шаг 1](#vip)) необходимо добавить в список полное доменное имя личного домена.

1. Перейдите на [портал Azure](https://portal.azure.com), если вы еще этого не сделали.
2. На портале Azure в меню слева щелкните **Службы приложений** .
3. Щелкните нужное приложение и нажмите кнопку **Личные домены** > **Добавить имя узла**.
4. Добавьте в список полное доменное имя личного домена (например, **www.contoso.com**).
   
   ![Сопоставление имени личного домена с приложением Azure: добавление в список имен доменов](./media/web-sites-custom-domain-name/add-custom-domain.png)
   
   > [!NOTE]
   > Azure попытается проверить доменное имя, указанное здесь. Убедитесь, что это доменное имя, для которого вы создали запись DNS на [шаге 2](#createdns). 
   > 
   > 
5. Щелкните **Проверить**.
6. После нажатия кнопки **Проверить** Azure запускает рабочий процесс проверки домена. Он проверяет владельца домена и доступность имени узла, после чего возвращается отчет об успешности проверки или об обнаруженных ошибках с рекомендациями по их устранению.    
7. После успешной проверки кнопка **Добавить имя узла** становится доступной. Теперь вы можете назначить имя узла. 
8. Когда Azure завершит настройку нового имени личного домена, перейдите по нему в браузере. В браузере откроется приложение Azure. Это означает, что пользовательское имя домена настроено правильно.

## <a name="migrate-an-active-domain-with-no-downtime"></a>Перенос активного домена без простоев 

При переносе активного сайта и его имени домена в службу приложений это имя домена уже обслуживает текущий трафик, и вам не нужны простои в работе DNS во время переноса. Поэтому для такого случая необходимо заблаговременно привязать имя домена к приложению Azure для проверки домена. Для этого выполните следующие измененные шаги:

1. Сначала создайте проверочную запись типа TXT с реестром DNS, выполнив действия, описанные на [шаге 2. Создайте записи DNS](#createdns).
Для дополнительной записи типа TXT применяется соглашение, в соответствии с которым &lt;*поддомен*>.&lt;*корневой_домен*> сопоставляется с адресом &lt;*имя_приложения*>.azurewebsites.net.
Примеры см. в таблице ниже.  
 
    <table cellspacing="0" border="1">
    <tr>
    <th>Пример полного доменного имени</th>
    <th>Узел, для которого задается TXT</th>
    <th>Значение TXT</th>
    </tr>
    <tr>
    <td>contoso.com (корневой домен)</td>
    <td>awverify.contoso.com</td>
    <td>&lt;<i>имя_приложения</i>>.azurewebsites.net</td>
    </tr>
    <tr>
    <td>www.contoso.com (поддомен)</td>
    <td>awverify.www.contoso.com</td>
    <td>&lt;<i>имя_приложения</i>>.azurewebsites.net</td>
    </tr>
    <tr>
    <td>\*.contoso.com (с подстановочным знаком)</td>
    <td>awverify.\*.contoso.com</td>
    <td>&lt;<i>имя_приложения</i>>.azurewebsites.net</td>
    </tr>
    </table>

2. Затем добавьте имя личного домена в приложение Azure, выполнив действия, описанные на [шаге 3. Включите имя личного домена для приложения](#enable).

    Теперь личный домен включен в приложении Azure. Единственное, что остается сделать, это обновить запись DNS с помощью регистратора домена.

3. Наконец, обновите запись DNS домена, чтобы она указывала на приложение Azure, как показано на [шаге 2. Создайте записи DNS](#createdns). 

    Пользовательский трафик должен перенаправляться в приложение Azure сразу после того, как произойдет распространение DNS.

<a name="verify"></a>

## <a name="verify-dns-propagation"></a>Проверка распространения DNS
После завершения настройки в зависимости от поставщика DNS распространение изменений может занять некоторое время. Чтобы проверить, что распространение DNS выполняется соответствующим образом, перейдите по ссылке [http://digwebinterface.com/](http://digwebinterface.com/). Перейдя на веб-сайт, в соответствующем текстовом поле введите имена узлов и щелкните **Получить подробную информацию**. Просмотрите результаты, чтобы убедиться, что последние изменения вступили в силу.  

![Сопоставление имени личного домена с приложением Azure: проверка распространения DNS](./media/web-sites-custom-domain-name/1-digwebinterface.png)

> [!NOTE]
> Распространение записей DNS может занимать до 48 часов (иногда больше). Даже если настройка выполнена правильно, все равно нужно дождаться успешного выполнения распространения.
> 
> 

## <a name="next-steps"></a>Дальнейшие действия
Узнайте, как защитить имя личного домена с помощью протокола HTTPS, [приобретя SSL-сертификат в Azure](web-sites-purchase-ssl-web-site.md) или [используя SSL-сертификат из другого источника](web-sites-configure-ssl-certificate.md).

> [!NOTE]
> Чтобы приступить к работе со службой приложений Azure до создания учетной записи Azure, перейдите к разделу [Пробное использование службы приложений](http://go.microsoft.com/fwlink/?LinkId=523751), где вы можете быстро создать кратковременное веб-приложение начального уровня в службе приложений. Никаких кредитных карт и обязательств.
> 
> 

[Приступая к работе с Azure DNS](../dns/dns-getstarted-create-dnszone.md)  
[Создание записей DNS для веб-приложения в пользовательском домене](../dns/dns-web-sites-custom-domain.md)  
[Делегирование домена в Azure DNS](../dns/dns-domain-delegation.md)

<!-- Images -->
[subdomain]: media/web-sites-custom-domain-name/azurewebsites-subdomain.png



<!--HONumber=Dec16_HO2-->


