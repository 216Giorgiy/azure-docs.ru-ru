<properties 
	pageTitle="Масштабирование веб-приложения в службе приложений Azure" 
	description="Увеличение и уменьшение масштаба, а также автоматическое масштабирование веб-приложения в службе приложений Azure." 
	services="app-service" 
	documentationCenter="" 
	authors="cephalin" 
	manager="wpickett" 
	editor="mollybos"/>

<tags 
	ms.service="app-service" 
	ms.workload="na" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="12/10/2015" 
	ms.author="cephalin"/>

# Масштабирование веб-приложения в службе приложений Azure #

Чтобы повысить производительность и пропускную способность веб-приложения в Microsoft Azure, на [портале Azure](http://go.microsoft.com/fwlink/?LinkId=529715) режим плана [службы приложений](http://go.microsoft.com/fwlink/?LinkId=529714) **Free** можно изменить на **Shared**, **Basic**, **Standard** или **Premium**.

[AZURE.INCLUDE [app-service-web-to-api-and-mobile](../../includes/app-service-web-to-api-and-mobile.md)]

Масштабирование веб-приложений Azure предполагает два связанных действия: перевод плана службы приложений на более высокий уровень обслуживания и последующую настройку некоторых параметров. В данной статье рассматриваются оба этих действия. Более высокие уровни обслуживания, например **Standard** и **Premium**, предлагают повышенную надежность и гибкость в определении способов использования ресурсов в Azure.

Применение этих параметров масштаба занимает всего несколько секунд, но они влияют на все веб-приложения в вашем плане службы приложений. Они не требуют ни изменения кода, ни повторного развертывания приложений.

Сведения о планах служб приложений см. в разделах [Что такое план размещения службы приложений?](../web-sites-web-hosting-plan-overview.md) и [Подробный обзор планов размещения службы приложений Azure](../app-service/azure-web-sites-web-hosting-plans-in-depth-overview.md). Сведения о ценах и функциях отдельных планов службы приложений см. в разделе [Сведения о ценах службы приложений](/pricing/details/web-sites/).

> [AZURE.NOTE]Прежде чем перевести веб-приложение из режима **Free** в режим **Basic**, **Standard** или **Premium**, следует снять существующие ограничения на расходы, установленные для вашей подписки на службу приложений Azure. Сведения о просмотре или изменении параметров подписки на службу приложений Microsoft Azure см. в разделе [Подписки Microsoft Azure][azuresubscriptions].

<a name="scalingsharedorbasic"></a>
<!-- ===================================== -->
## Масштабирование с переходом в режим Shared или Basic
<!-- ===================================== -->

1. В браузере откройте [портал Azure][portal].
	
2. В колонке веб-приложения последовательно щелкните пункты **Все параметры**, **Масштаб**, **Переход с плана Free с добавлением экземпляров и повышением производительности**.
	
	![Выбор плана][ChooseWHP]
	
4. В колонке **Выбор ценовой категории** укажите режим **Shared** или **Basic**, а затем щелкните **Выбрать**.
	
	После завершения операции на вкладке **Уведомления** появится зеленая надпись **ВЫПОЛНЕНО**.
	
5. Перетащите ползунок **Экземпляр** вправо, чтобы увеличить количество экземпляров, а затем щелкните в командной строке **Сохранить**. Параметр размера экземпляра недоступен в режиме **Shared**. Дополнительные сведения об использовании размеров экземпляров см. в разделе [Размеры виртуальных машин и облачных служб в Microsoft Azure][vmsizes].
	
	![Размер экземпляра для режима "Базовый"][ChooseBasicInstances]
	
	После завершения операции на вкладке **Уведомления** появится зеленая надпись **ВЫПОЛНЕНО**.
	
<a name="scalingstandard"></a>
<!-- ================================= -->
## Масштабирование с переходом в режим Standard или Premium
<!-- ================================= -->

> [AZURE.NOTE]Прежде чем изменять план службы приложений на **Standard** или **Premium**, следует снять существующие ограничения на расходы, установленные для вашей подписки на службу приложений Microsoft Azure. Иначе при достижении ограничения до истечения расчетного периода веб-приложение может стать недоступным. Сведения о просмотре или изменении параметров подписки на службу приложений Microsoft Azure см. в разделе [Подписки Microsoft Azure][azuresubscriptions].

1. Чтобы изменить режим на **Standard** или **Premium**, сначала выполните те же действия, что и при переходе в режим **Shared** или **Basic**. Затем в колонке **Выбор ценовой категории** выберите режим **Standard** или **Premium** и нажмите кнопку **Выбрать**. 
	
	По завершении операции на вкладке **Уведомления** появится зеленая надпись **ВЫПОЛНЕНО** и будет включен **Режим автомасштабирования**.
	
	![Масштабирование в режиме Standard или Premium][ScaleStandard]
	
	Вы по-прежнему можете перетащить ползунок **Экземпляр** для увеличения количества экземпляров вручную, как показано выше для режима **Basic**. Однако здесь вы узнаете, как использовать **Режим автомасштабирования**.
	
2. В разделе **Режим автомасштабирования** выберите **Производительность**, чтобы выполнить автомасштабирование на основе метрик.
	
	![Режим автомасштабирования имеет значение "Производительность"][Autoscale]
	
3. В разделе **Диапазон количества экземпляров** переместите два ползунка на значения минимального и максимального количества экземпляров, чтобы выполнить автоматическое масштабирование плана службы приложений. Для этого учебника переместите ползунок максимального количества на **6** экземпляров.
	
4. Щелкните в командной строке **Сохранить**.
	
4. В разделе **Целевые метрики** щелкните **>**, чтобы настроить правила автомасштабирования для метрик по умолчанию.
	
	![Задание целевых показателей][SetTargetMetrics]
	
	Вы можете настроить правила автомасштабирования для разных метрик производительности, включая ЦП, память, очередь диска, очередь HTTP и поток данных. Здесь вы настроите автомасштабирование процента ЦП следующим образом.
	
	- Увеличение масштаба на один экземпляр, если загрузка ЦП была больше 70 % в течение последних 10 минут
	- Увеличение масштаба на три экземпляра, если загрузка ЦП была больше 90 % в течение последних пяти минут
	- Уменьшение масштаба на один экземпляр, если загрузка ЦП была ниже 50 % в течение последних 30 минут 
	
	
4. Оставьте в раскрывающемся списке **Метрики** значение **Процент ЦП**.
	
5. В разделе **Правила увеличения масштаба** настройте первое правило, задав для параметра **Условие** значение **Больше**, для параметра **Пороговое значение** значение **70** (%), для параметра **За последние** значение **10** (в минутах), для параметра **Увеличение масштаба на** значение **1** (в экземплярах), а для параметра **Время простоя** значение **10** (в минутах).
	
	![Задание первого правила автомастшабирования][SetFirstRule]
	
	>[AZURE.NOTE]Параметр **Время простоя** указывает время ожидания правила между масштабированиями.
	
6. Щелкните **Добавить правило увеличения масштаба**, затем настройте второе правило, задав для параметра **Условие** значение **Больше**, для параметра **Пороговое значение** значение **90** (%), для параметра **За последние** значение **1** (в минутах), для параметра **Увеличение масштаба на** значение **3** (в экземплярах), для параметра **Время простоя** значение **1** (в минутах).
	
	![Задание второго правила автомастшабирования][SetSecondRule]
	
5. В разделе **Правила уменьшения масштаба** настройте третье правило, задав для параметра **Условие** значение **Меньше**, для параметра **Пороговое значение** значение **50** (%), для параметра **За последние** значение **30** (в минутах), для параметра **Уменьшение масштаба** значение **1** (в экземплярах), а для параметра **Время ожидания** значение **60** (в минутах).
	
	![Задание третьего правила автомастшабирования][SetThirdRule]
	
7. Щелкните в командной строке **Сохранить**. После этого правило автомасштабирования должно появиться в колонке **Масштаб**.
	
	![Задание результата правила автомасштабирования][SetRulesFinal]

<a name="ScalingSQLServer"></a>
##Масштабирование базы данных SQL Server, подключенной к веб-приложению
Если вы настроили одну или больше баз данных SQL Server, связанных с веб-приложением (независимо от режима плана службы приложений), вы можете быстро масштабировать ее в соответствии с потребностями.

1. Чтобы изменить масштаб одной из связанных баз данных, на [портале Azure][portal] откройте колонку веб-приложения. В раскрывающемся списке **Основные компоненты** щелкните ссылку **Группа ресурсов**. Затем в области **Сводка** колонки группы ресурсов щелкните одну из связанных баз данных.

	![Связанная база данных][ResourceGroup]
	
2. В колонке связанной базы данных SQL щелкните область **Ценовая категория**, укажите одну из категорий в зависимости от требований к производительности и щелкните **Выбрать**.
	
	![Масштабирование базы данных SQL][ScaleDatabase]
	
3. Вы можете также настроить георепликацию, чтобы увеличить возможности высокого уровня доступности и аварийного восстановления базы данных SQL. Для этого щелкните область **Георепликация**.
	
	![Настройка георепликации для базы данных SQL][GeoReplication]

<a name="devfeatures"></a>
## Возможности разработчика
В зависимости от режима веб-приложения будут доступны следующие возможности для разработчиков:

### Разрядность ###

- Режимы **Basic**, **Standard** и **Premium** поддерживают 64- и 32-разрядные приложения.
- Режимы планов **Free** и **Shared** поддерживают только 32-разрядные приложения.

### Поддержка отладчика ###

- Поддержка отладчика доступна в режимах **Free**, **Shared** и **Basic** при 1 одновременном подключении на план обслуживания приложений.
- Поддержка отладчика доступна в режимах **Standard** и **Premium** при 5 одновременных подключениях на план обслуживания приложений.

<a name="OtherFeatures"></a>
## Другие возможности

### Мониторинг конечных веб-точек ###

- Мониторинг конечных веб-точек доступен в режимах **Basic**, **Standard** и **Premium**. Дополнительные сведения о мониторинге конечных веб-точек см. в разделе [Мониторинг веб-приложений](web-sites-monitor.md).

- Подробные сведения обо всех оставшихся функциях в планах службы приложений, включая цены и функции, интересующие всех пользователей (в том числе разработчиков), см. в разделе [Сведения о ценах службы приложений](/pricing/details/web-sites/).

>[AZURE.NOTE]Если вы хотите приступить к работе со службой приложений Azure до создания учетной записи Azure, перейдите к разделу [Пробное использование службы приложений](http://go.microsoft.com/fwlink/?LinkId=523751), где вы можете быстро создать кратковременное веб-приложение начального уровня в службе приложений. Никаких кредитных карт и обязательств.

<a name="Next Steps"></a>
## Дальнейшие действия

- Чтобы начать работу с Azure, см. раздел [Бесплатная пробная версия Microsoft Azure](/pricing/free-trial/).
- Сведения о ценах, поддержке и соглашениях об уровне обслуживания см. по следующим ссылкам:
	
	[Сведения о ценах — передача данных](/pricing/details/data-transfers/)
	
	[Планы поддержки Microsoft Azure](/support/plans/)
	
	[Соглашения об уровне обслуживания](/support/legal/sla/)
	
	[Сведения о ценах — база данных SQL](/pricing/details/sql-database/)
	
	[Размеры виртуальных машин и облачных служб для Microsoft Azure][vmsizes]
	
	[Сведения о ценах на службу приложений](/pricing/details/web-sites/)
	
	[Сведения о ценах на службу приложений — SSL-соединения](/pricing/details/web-sites/#ssl-connections)

- Рекомендации по службе приложений Azure, в том числе по построению масштабируемой и устойчивой архитектуры, см. в разделе [Рекомендации. Веб-приложения службы приложений Azure](http://blogs.msdn.com/b/windowsazure/archive/2014/02/10/best-practices-windows-azure-websites-waws.aspx).

- Видео о масштабировании веб-приложений:
	
	- [Стефан Шаков (Stefan Schackow). Когда следует масштабировать веб-сайты Azure](/documentation/videos/azure-web-sites-free-vs-standard-scaling/)
	- [Стефан Шаков (Stefan Schackow). Автоматическое масштабирование веб-сайтов Azure, ЦП или по расписанию](/documentation/videos/auto-scaling-azure-web-sites/)
	- [Стефан Шаков (Stefan Schackow). Как масштабируются веб-сайты Azure](/documentation/videos/how-azure-web-sites-scale/)

## Изменения
* Указания по изменениям при переходе от веб-сайтов к службе приложений см. в разделе [Служба приложений Azure и ее влияние на существующие службы Azure](http://go.microsoft.com/fwlink/?LinkId=529714).

<!-- LINKS -->
[vmsizes]: http://go.microsoft.com/fwlink/?LinkId=309169
[SQLaccountsbilling]: http://go.microsoft.com/fwlink/?LinkId=234930
[azuresubscriptions]: http://go.microsoft.com/fwlink/?LinkID=235288
[portal]: https://portal.azure.com/

<!-- IMAGES -->
[ChooseWHP]: ./media/web-sites-scale/scale1ChooseWHP.png
[ChooseBasicInstances]: ./media/web-sites-scale/scale2InstancesBasic.png
[SaveButton]: ./media/web-sites-scale/05SaveButton.png
[BasicComplete]: ./media/web-sites-scale/06BasicComplete.png
[ScaleStandard]: ./media/web-sites-scale/scale3InstancesStandard.png
[Autoscale]: ./media/web-sites-scale/scale4AutoScale.png
[SetTargetMetrics]: ./media/web-sites-scale/scale5AutoScaleTargetMetrics.png
[SetFirstRule]: ./media/web-sites-scale/scale6AutoScaleFirstRule.png
[SetSecondRule]: ./media/web-sites-scale/scale7AutoScaleSecondRule.png
[SetThirdRule]: ./media/web-sites-scale/scale8AutoScaleThirdRule.png
[SetRulesFinal]: ./media/web-sites-scale/scale9AutoScaleFinal.png
[ResourceGroup]: ./media/web-sites-scale/scale10ResourceGroup.png
[ScaleDatabase]: ./media/web-sites-scale/scale11SQLScale.png
[GeoReplication]: ./media/web-sites-scale/scale12SQLGeoReplication.png
 

<!---HONumber=AcomDC_1217_2015-->