<properties 
	pageTitle="Резервное копирование веб-приложений в службе приложений Azure" 
	description="Узнайте, как создавать резервные копии веб-приложений в службе приложений Azure." 
	services="app-service\web" 
	documentationCenter="" 
	authors="cephalin" 
	manager="wpickett" 
	editor="mollybos"/>

<tags 
	ms.service="app-service-web" 
	ms.workload="web" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="03/24/2015" 
	ms.author="cephalin"/>

# Резервное копирование веб-приложений в службе приложений Azure


Компонент резервного копирования и восстановления в [веб-приложениях службы приложений Azure](http://go.microsoft.com/fwlink/?LinkId=529714) позволяет легко создавать резервные копии веб-приложений вручную или автоматически. Вы можете восстановить предыдущее состояние веб-приложения или создать новое на основе одной из резервных копий исходного приложения.

Сведения о восстановлении веб-приложения Azure из резервной копии см. в статье [Восстановление веб-приложения](web-sites-restore.md).

<a name="whatsbackedup"></a>
## Что включается в резервную копию 
Вот какая информация входит в резервную копию веб-приложения:

* конфигурация веб-приложения;
* содержимое файлов веб-приложения;
* подключенные к сайту базы данных MySQL или SQL Server (вы можете выбрать конкретные базы для включения в резервную копию).

Эта информация копируется в указанные контейнер и учетную запись хранения Azure.

> [AZURE.NOTE]Каждая резервная копия является полной автономной копией приложения, а не добавочным обновлением.

<a name="requirements"></a>
## Требования и ограничения

* Для компонента резервного копирования и восстановления сайт должен пребывать в режиме Standard. Дополнительные сведения о масштабировании веб-приложения для использования режима Standard см. в статье [Масштабирование веб-приложения в службе приложения Azure](web-sites-scale.md). Обратите внимание, что режим Premium позволяет ежедневно создавать большее количество резервных копий, чем режим Standard.

* Компоненту резервного копирования и восстановления требуется учетная запись хранения Azure и контейнер, принадлежащие к той же подписке, что и веб-приложение, резервную копию которого вы собираетесь создать. Если у вас еще нет учетной записи хранения, вы можете создать ее, щелкнув элемент **Учетная запись хранения** в колонке **Резервные копии** на [портале Azure](http://go.microsoft.com/fwlink/?LinkId=529715) и выбрав **учетную запись хранения** и **контейнер** из колонки **Место назначения**. Дополнительные сведения об учетных записях хранения Azure см. в [ссылках](#moreaboutstorage) в конце этой статьи.

* Компонент резервного копирования и восстановления поддерживает содержимое веб-сайта и базы данных объемом до 10 ГБ. Если компонент резервного копирования не может работать, поскольку объем полезных данных превышает этот предел, ошибка будет занесена в журналы операций.

<a name="manualbackup"></a>
## Создание резервной копии вручную

1. Выберите веб-приложение в колонке "Веб-приложения" на портале Azure. В результате в новой колонке появятся подробные сведения о веб-приложении.
2. Выберите элемент **Параметры**. Откроется колонка **Параметры**, в которой можно изменять свое веб-приложение.
	
	![Страница резервных копий][ChooseBackupsPage]

3. Выберите параметр **Резервные копии** в колонке **Параметры**. Откроется колонка **Резервные копии**.
	
4. Из колонки **Резервные копии** выберите расположение резервной копии, указав параметры **Учетная запись хранения** и **Контейнер**. Эта учетная запись хранения должна принадлежать к той же подписке, что и веб-приложение, резервную копию которого вы собираетесь создать.
	
	![Выбор учетной записи хранения][ChooseStorageAccount]
	
5. В разделе **Включенные базы данных** колонки **Резервные копии** выберите базы данных, подключенные к веб-приложениям (SQL Server или MySQL), резервные копии которых вы хотите создать.

	> [AZURE.NOTE]Чтобы база данных появилась в этом списке, ее строка подключения должна присутствовать в разделе **Строки подключения** колонки **Параметры веб-приложения** на портале.
	
6. В колонке **Резервные копии** щелкните элемент **Расположение резервной копии**. Выберите существующую учетную запись хранилища и контейнер.
7. На панели команд щелкните **Создать резервную копию**.
	
	![Кнопка создания резервной копии][BackUpNow]
	
	Во время процесса резервного копирования отображается сообщение о ходе выполнения.
	

В любое время можно выполнить резервное копирование вручную.

<a name="automatedbackups"></a>
## Настройка автоматического резервного копирования

1. В колонке **Резервные копии** включите параметр **Запланированное резервное копирование**.
	
	![Включение автоматически создаваемых резервных копий][SetAutomatedBackupOn]
	
2. Выберите учетную запись хранения, в которой нужно разместить резервную копию веб-приложения. Эта учетная запись хранения должна принадлежать к той же подписке, что и веб-приложение, резервную копию которого вы собираетесь создать.
	
	![Выбор учетной записи хранения][ChooseStorageAccount]
	
3. В поле **Частота** укажите, как часто требуется осуществлять автоматическое резервное копирование. Число дней должно быть в диапазоне от 1 до 90 включительно (от одного раза в день до одного раза каждые 90 дней).
	
4. Используйте параметр **Начало**, чтобы указать дату и время начала автоматического резервного копирования.
	
	> [AZURE.NOTE]Azure хранит значения времени резервного копирования в формате UTC, но отображает их в соответствии с системным временем на компьютере, где отображается портал.
	
5. В разделе **Включенные базы данных** выберите базы данных, подключенные к веб-приложению (SQL Server или MySQL), резервную копию которого вы хотите создать. Чтобы база данных появилась в списке, ее строка подключения должна присутствовать в разделе **Строки подключения** колонки **Параметры веб-приложения** на портале.
	
	> [AZURE.NOTE]Если требуется включить в резервную копию одну или несколько баз данных и указана частота менее 7 дней, выводится предупреждение о том, что такое частое резервное копирование может увеличить расходы на базу данных.
	
6. Кроме того, задайте для значения **Хранение (дни)** количество дней, на протяжении которых вы хотите сохранять резервную копию.
7. На панели команд нажмите кнопку **Сохранить**, чтобы сохранить изменения конфигурации (или выберите **Отменить**, чтобы отказаться от сохранения).
	
	![Кнопка сохранения][SaveIcon]

<a name="aboutbackups"></a>
## Как хранятся резервные копии

После создания одной или нескольких резервных копий они отображаются в колонке **Контейнеры** вашей **учетной записи хранения**, а также в веб-приложении. В **учетной записи хранения** каждая резервная копия состоит из ZIP-файла, содержащего резервную копию данных, и XML-файла, содержащего манифест для содержимого ZIP-файла.

Имена архивных ZIP- и XML-файлов состоят из имени веб-приложения, за которым через символ подчеркивания следует метка времени, обозначающая время создания резервной копии. Метка времени содержит дату в формате ГГГГММДД (в виде цифр без пробелов), а также время в 24-часовом формате UTC (например, fabrikam_201402152300.zip). Содержимое этих файлов можно распаковать и просмотреть, если требуется получить доступ к резервным копиям без фактического восстановления веб-приложения.

В файле XML, сохраняемом с файлом zip, имя файла базы данных обозначено в *backupdescription* > *databases* > *databasebackupdescription* > *filename*.

Файл резервной копии базы данных сохраняется в корне файла .zip. Для базы данных SQL это файл BACPAC (без расширения), и его можно импортировать. Чтобы создать новую базу данных SQL на основе экспорта BACPAC, выполните шаги, описанные в разделе [Импорт файла BACPAC для создания новой базы данных пользователя](http://technet.microsoft.com/library/hh710052.aspx).

Сведения о восстановлении веб-приложения (в том числе баз данных) с помощью портала Azure см. в статье [Восстановление веб-приложения в службе приложений Azure](web-sites-restore.md).

> [AZURE.NOTE]Изменение любого из этих файлов в контейнере **websitebackups** может привести к повреждению резервной копии и сделать восстановление из нее невозможным.

<a name="notes"></a>
## Примечания

* Чтобы компонент резервного копирования и восстановления мог включить ваши базы данных, убедитесь, что вы правильно настроили строки подключения для каждой базы данных в колонке **Параметры веб-приложения** раздела **Параметры**.
* Хотя вы можете выполнить резервное копирование нескольких веб-приложений в одну учетную запись хранения, для упрощения обслуживания рекомендуется создать отдельную учетную запись хранения для каждого веб-приложения.

>[AZURE.NOTE]Если вы хотите приступить к работе со службой приложений Azure до создания учетной записи Azure, перейдите к разделу [Пробное использование службы приложений](http://go.microsoft.com/fwlink/?LinkId=523751), где вы можете быстро создать кратковременное веб-приложение начального уровня в службе приложений. Никаких кредитных карт и обязательств.

<a name="nextsteps"></a>
## Дальнейшие действия
Сведения о восстановлении веб-приложения Azure из резервной копии см. в статье [Восстановление веб-приложения в службе приложений Azure](web-sites-restore.md).

Чтобы начать работу с Azure, см. раздел [Бесплатная пробная версия Microsoft Azure](/pricing/free-trial/).


<a name="moreaboutstorage"></a>
### Подробнее об учетных записях хранения

[Что такое учетная запись хранения?](../storage-whatis-account.md)

[Создание учетной записи хранения](../storage-create-storage-account/)

[Мониторинг учетной записи хранения](../storage-monitor-storage-account.md)

[Общая информация об оплате службы хранилища Azure](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/07/09/understanding-windows-azure-storage-billing-bandwidth-transactions-and-capacity.aspx)

## Изменения
* Указания по изменениям при переходе от веб-сайтов к службе приложений см. в разделе [Служба приложений Azure и ее влияние на существующие службы Azure](http://go.microsoft.com/fwlink/?LinkId=529714).
* Руководство по смене старого портала на новый портал см. в разделе [Справочник по навигации на предварительной версии портала](http://go.microsoft.com/fwlink/?LinkId=529715).

<!-- IMAGES -->
[ChooseBackupsPage]: ./media/web-sites-backup/01ChooseBackupsPage.png
[ChooseStorageAccount]: ./media/web-sites-backup/02ChooseStorageAccount.png
[IncludedDatabases]: ./media/web-sites-backup/03IncludedDatabases.png
[BackUpNow]: ./media/web-sites-backup/04BackUpNow.png
[BackupProgress]: ./media/web-sites-backup/05BackupProgress.png
[SetAutomatedBackupOn]: ./media/web-sites-backup/06SetAutomatedBackupOn.png
[Frequency]: ./media/web-sites-backup/07Frequency.png
[StartDate]: ./media/web-sites-backup/08StartDate.png
[StartTime]: ./media/web-sites-backup/09StartTime.png
[SaveIcon]: ./media/web-sites-backup/10SaveIcon.png

<!--HONumber=54--> 