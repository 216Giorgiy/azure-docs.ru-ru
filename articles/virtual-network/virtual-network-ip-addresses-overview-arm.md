---
title: "Типы IP-адресов в Azure | Документация Майкрософт"
description: "Сведения об использовании частных и общедоступных IP-адресов в Azure."
services: virtual-network
documentationcenter: na
author: jimdial
manager: carmonm
editor: tysonn
tags: azure-resource-manager
ms.assetid: 610b911c-f358-4cfe-ad82-8b61b87c3b7e
ms.service: virtual-network
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 04/27/2016
ms.author: jdial
ms.translationtype: Human Translation
ms.sourcegitcommit: 71fea4a41b2e3a60f2f610609a14372e678b7ec4
ms.openlocfilehash: 1156135200e05f8a2585467f37805a72d67279ba
ms.contentlocale: ru-ru
ms.lasthandoff: 05/10/2017


---
# <a name="ip-address-types-and-allocation-methods-in-azure"></a>Типы IP-адресов и методы распределения в Azure
Вы можете назначать IP-адреса ресурсам Azure, чтобы они могли взаимодействовать с другими ресурсами Azure, а также подключаться к вашей локальной сети и Интернету. В Azure можно использовать два типа IP-адресов.

* **Общедоступные IP-адреса**используются для доступа к Интернету, в том числе к общедоступным службам Azure.
* **Частные IP-адреса**используются для обмена данными в виртуальной сети Azure (VNet) или в локальной сети (если для расширения сети до масштабов Azure используется VPN-шлюз или канал ExpressRoute).

> [!NOTE]
> В Azure предлагаются две модели развертывания для создания ресурсов и работы с ними: [модель Resource Manager и классическая модель](../resource-manager-deployment-model.md).  В этой статье описывается использование модели развертывания c помощью Resource Manager. Для большинства новых развертываний мы рекомендуем использовать эту модель вместо [классической](virtual-network-ip-addresses-overview-classic.md).
> 

Если вы знакомы с классической моделью развертывания, ознакомьтесь с [различиями в IP-адресации для классической модели развертывания и модели Resource Manager](virtual-network-ip-addresses-overview-classic.md#differences-between-resource-manager-and-classic-deployments).

## <a name="public-ip-addresses"></a>Общедоступные IP-адреса
Общедоступные IP-адреса позволяют ресурсам Azure подключаться к Интернету и другим общедоступным службам Azure, таким как [кэш Redis для Azure](https://azure.microsoft.com/services/cache/), [концентраторы событий Azure](https://azure.microsoft.com/services/event-hubs/), [базы данных SQL](../sql-database/sql-database-technical-overview.md) и [служба хранилища Azure](../storage/storage-introduction.md).

В диспетчере ресурсов Azure [общедоступный IP-адрес](resource-groups-networking.md#public-ip-address) — это ресурс, который имеет собственные свойства. Связать ресурс общедоступного IP-адреса можно с любым из таких ресурсов:

* Виртуальные машины
* Балансировщики нагрузки, доступные в Интернете
* VPN-шлюзы
* Шлюзы приложений

### <a name="allocation-method"></a>Способ выделения
Существует два способа выделения IP-адреса *ресурсу с общедоступным IP-адресом*: *динамический* и *статический*. По умолчанию используется *динамический* способ выделения, в рамках которого IP-адрес выделяется **не** тогда, когда он создается, а тогда, когда вы запускаете (или создаете) связанный ресурс (например, виртуальную машину или балансировщик нагрузки). Если остановить или удалить ресурс, IP-адрес освобождается. Поэтому, если остановить, а потом снова запустить ресурс, IP-адрес изменится.

Чтобы IP-адрес связанного ресурса не изменялся, вы можете явным образом задать *статический* способ выделения. В рамках этого способа IP-адрес назначается немедленно, а освобождается только тогда, когда вы удаляете ресурс или задаете *динамический* способ выделения.

> [!NOTE]
> Даже если задан *статический* способ выделения, нельзя указать фактический IP-адрес, который нужно назначить *ресурсу с общедоступным IP-адресом*. Этот IP-адрес выделяется из пула доступных IP-адресов, находящегося в расположении Azure, в котором создан ресурс.
>

Статические общедоступные IP-адреса обычно используются в таких случаях:

* конечным пользователям необходимо обновлять правила брандмауэра для взаимодействия с ресурсами Azure;
* разрешение DNS-имени, в рамках которого изменение IP-адреса влечет за собой необходимость обновить записи A;
* ваши ресурсы Azure взаимодействуют с другими веб-приложениями или службами, которые используют модель безопасности, основанную на IP-адресах;
* вы используете SSL-сертификаты, связанные с IP-адресом.

> [!NOTE]
> Список диапазонов IP-адресов, из которых общедоступные IP-адреса (динамический или статический) выделяются ресурсам Azure, опубликован в файле [Диапазоны IP-адресов центра обработки данных Azure](https://www.microsoft.com/download/details.aspx?id=41653).
>

### <a name="dns-hostname-resolution"></a>Разрешение DNS-имен узлов
Вы можете указать DNS-имя домена для ресурса с общедоступным IP-адресом. В результате этого будут сопоставлены адрес *метка_домена*.*расположение*.cloudapp.azure.com и общедоступный IP-адрес на DNS-серверах под управлением Azure. Например, если создать ресурс с общедоступным IP-адресом и задать значение **contoso** в качестве *метки домена* в **расположении** Azure *Западная часть США*, полное доменное имя **contoso.westus.cloudapp.azure.com** будет разрешено в общедоступный IP-адрес ресурса. С помощью FQDN вы можете создать запись CNAME личного домена, указывающую на общедоступный IP-адрес в Azure.

> [!IMPORTANT]
> Каждая созданная метка имени домена должна быть уникальной в пределах своего расположения в Azure.  
>

### <a name="virtual-machines"></a>Виртуальные машины
Чтобы связать общедоступный IP-адрес с виртуальной машиной [Windows](../virtual-machines/windows/overview.md) или [Linux](../virtual-machines/virtual-machines-linux-about.md), назначьте этот адрес ее **сетевому интерфейсу**. Если используется виртуальная машина с несколькими сетевыми интерфейсами, можно назначить его только *основному* сетевому интерфейсу. Виртуальной машине можно назначить динамический или статический общедоступный IP-адрес.

### <a name="internet-facing-load-balancers"></a>Балансировщики нагрузки, доступные в Интернете
Чтобы связать общедоступный IP-адрес с [Azure Load Balancer](../load-balancer/load-balancer-overview.md), назначьте этот адрес для конфигурации **внешнего интерфейса** балансировщика нагрузки. Этот общедоступный IP-адрес будет выполнять функцию виртуального IP-адреса с балансировкой нагрузки. Конфигурации внешнего интерфейса балансировщика можно назначить динамический или статический общедоступный IP-адрес. Кроме того, подобной конфигурации можно назначить несколько общедоступных IP-адресов. Это позволит вам создавать сценарии с [несколькими виртуальными IP-адресами](../load-balancer/load-balancer-multivip.md) (например, среду с несколькими клиентами и веб-сайтами на основе SSL).

### <a name="vpn-gateways"></a>VPN-шлюзы
[VPN-шлюза Azure](../vpn-gateway/vpn-gateway-about-vpngateways.md) . Чтобы включить связь с удаленной сетью, нужно назначить общедоступный IP-адрес **конфигурации IP** шлюза. В настоящее время VPN-шлюзу можно назначить только *динамический* общедоступный IP-адрес.

### <a name="application-gateways"></a>Шлюзы приложений
Чтобы связать общедоступный IP-адрес со [шлюзом приложений](../application-gateway/application-gateway-introduction.md)Azure, назначьте этот адрес конфигурации **внешнего интерфейса** шлюза. Этот общедоступный IP-адрес будет выполнять функцию виртуального IP-адреса с балансировкой нагрузки. В настоящее время конфигурации, заданной для внешнего интерфейса шлюза приложений, можно назначить только *динамический* общедоступный IP-адрес.

### <a name="at-a-glance"></a>Краткий обзор
В следующей таблице показано, через какое свойство можно связать общедоступный IP-адрес с ресурсом верхнего уровня и какой метод распределения (динамический или статический) можно использовать.

| Ресурс верхнего уровня | Связанный IP-адрес | динамический | Статическое |
| --- | --- | --- | --- |
| Виртуальная машина. |сетевому интерфейсу |Да |Да |
| Подсистема балансировки нагрузки |Конфигурация клиентской части |Да |Да |
| VPN-шлюз |Конфигурация IP шлюза |Да |Нет |
| шлюзом приложений |Конфигурация клиентской части |Да |Нет |

## <a name="private-ip-addresses"></a>Частные IP-адреса
С помощью частных IP-адресов ресурсы Azure взаимодействуют с другими ресурсами в [виртуальной сети](virtual-networks-overview.md) либо в локальной сети через VPN-шлюз или канал ExpressRoute, и для этого не нужен IP-адрес, доступный через Интернет.

В модели развертывания Azure Resource Manager частный IP-адрес связан со следующими ресурсами Azure:

* Виртуальные машины
* Внутренние балансировщики нагрузки
* Шлюзы приложений

### <a name="allocation-method"></a>Способ выделения
Частный IP-адрес выделяется из диапазона адресов подсети, к которой подключен ресурс. Диапазон адресов подсети входит в диапазон адресов виртуальной сети.

Существует два способа выделения IP-адресов: *динамический* и *статический*. По умолчанию используется *динамический*способ, в рамках которого IP-адрес выделяется из подсети ресурса через протокол DHCP. Во время остановки и запуска ресурса этот IP-адрес может измениться.

Чтобы IP-адрес не изменялся, вы можете задать *статический* способ выделения. В этом случае нужно также указать допустимый IP-адрес, который является частью подсети ресурса.

Вот для чего обычно используются статические частные IP-адреса:

* для виртуальных машин, работающих в качестве контроллеров домена или DNS-серверов;
* для ресурсов, в которых правилам брандмауэра нужно использовать IP-адреса;
* для ресурсов, доступ к которым другие приложения и другие ресурсы получают через IP-адрес.

### <a name="virtual-machines"></a>Виртуальные машины
Частный IP-адрес назначается **сетевому интерфейсу** виртуальной машины [Windows](../virtual-machines/windows/overview.md) или [Linux](../virtual-machines/virtual-machines-linux-about.md). В виртуальной машине с несколькими сетевыми интерфейсами IP-адрес назначается каждому сетевому интерфейсу. IP-адрес может назначаться интерфейсу динамически или статически.

#### <a name="internal-dns-hostname-resolution-for-vms"></a>Разрешение внутренних DNS-имен узла (для виртуальных машин)
По умолчанию все виртуальные машины Azure связаны с [DNS-серверами, находящимися под управлением Azure](virtual-networks-name-resolution-for-vms-and-role-instances.md#azure-provided-name-resolution) (кроме случаев, когда отдельно заданы пользовательские DNS-серверы). Эти DNS-серверы обеспечивают внутреннее разрешение имен для виртуальных машин, находящихся в одной виртуальной сети.

Когда вы создаете виртуальную машину, в DNS-серверы, находящиеся под управлением Azure, добавляется сопоставление имени узла с частным IP-адресом. Если используется виртуальная машина с несколькими сетевыми интерфейсами, имя узла сопоставляется с частным IP-адресом основного сетевого интерфейса.

Виртуальные машины, связанные с DNS-серверами, находящимися под управлением Azure, могут сопоставлять имена узлов всех виртуальных машин виртуальной сети со своими частными IP-адресами.

### <a name="internal-load-balancers-ilb--application-gateways"></a>Внутренние балансировщики нагрузки и шлюзы приложений
Вы можете назначить частный IP-адрес конфигурации **внешнего интерфейса** [внутреннего балансировщика нагрузки Azure](../load-balancer/load-balancer-internal-overview.md) или [шлюза приложений Azure](../application-gateway/application-gateway-introduction.md). Этот IP-адрес является внутренней конечной точкой, доступной только для ресурсов виртуальной сети и подключенных к ней удаленных сетей. Конфигурации внешнего интерфейса можно назначить динамический или статический частный IP-адрес.

### <a name="at-a-glance"></a>Краткий обзор
В следующей таблице показано, через какое свойство можно связать частный IP-адрес с ресурсом верхнего уровня и какой метод распределения (динамический или статический) можно использовать.

| Ресурс верхнего уровня | Связанный IP-адрес | динамический | Статическое |
| --- | --- | --- | --- |
| Виртуальная машина. |сетевому интерфейсу |Да |Да |
| Подсистема балансировки нагрузки |Конфигурация клиентской части |Да |Да |
| шлюзом приложений |Конфигурация клиентской части |Да |Да |

## <a name="limits"></a>Ограничения
Ограничения IP-адресации указаны в полном списке [сетевых ограничений](../azure-subscription-service-limits.md#networking-limits) в Azure. Ограничения указаны по региону и по подписке. Для увеличения ограничений по умолчанию до максимальных ограничений в зависимости от потребностей вашего бизнеса вы можете [обратиться в службу поддержки](https://portal.azure.com/#blade/Microsoft_Azure_Support/HelpAndSupportBlade) .

## <a name="pricing"></a>Цены
За общедоступные IP-адреса взимается номинальная плата. Дополнительные сведения о ценах на IP-адреса в Azure см. на [соответствующей](https://azure.microsoft.com/pricing/details/ip-addresses) странице.

## <a name="next-steps"></a>Дальнейшие действия
* [Развертывание виртуальной машины со статическим общедоступным IP-адресом с использованием портала Azure](virtual-network-deploy-static-pip-arm-portal.md)
* [Развертывание виртуальной машины со статическим общедоступным IP-адресом с помощью шаблона](virtual-network-deploy-static-pip-arm-template.md)
* [Развертывание виртуальной машины со статическим частным IP-адресом с помощью портала Azure](virtual-networks-static-private-ip-arm-pportal.md)

