---
title: "Перенос виртуальной сети Azure из территориальной группы в регион | Классическая модель | Документация Майкрософт"
description: "Узнайте, как перенести виртуальную сеть из территориальной группы в регион."
services: virtual-network
documentationcenter: na
author: jimdial
manager: carmonm
editor: tysonn
ms.assetid: 84febcb9-bb8b-4e79-ab91-865ad9de41cb
ms.service: virtual-network
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 03/15/2016
ms.author: jdial
ms.translationtype: Human Translation
ms.sourcegitcommit: f74379c3e310a7bbcf659ef610727bff19639022
ms.openlocfilehash: c495af3e818758cc5fe99af9b5f07506a16b59ef
ms.contentlocale: ru-ru
ms.lasthandoff: 07/06/2017


---
# <a name="how-to-migrate-a-virtual-network-from-an-affinity-group-to-a-region"></a>Как перенести виртуальную сеть из территориальной группы в регион
Ресурсы, созданные внутри той же территориальной группы, физически находятся на серверах, расположенных в географической близости друг к другу. Это позволяет ресурсам взаимодействовать быстрее. В прошлом наличие территориальной группы было обязательным условием создания виртуальной сети (VNet). В то время служба диспетчера сети, которая управляла виртуальными сетями, могла работать только в пределах набора физических серверов или единицы масштабирования. Архитектурные усовершенствования позволили расширить масштабы управления сетью до региона.

В результате этих усовершенствований необходимость в наличии территориальных групп для виртуальных сетей отпала. Вместо территориальных групп для виртуальных сетей теперь используются регионы. Виртуальные сети, связанные с регионами, называются региональными виртуальными сетями.

Кроме того, территориальные группы не рекомендуется использовать вообще. Помимо требований виртуальной сети, территориальные группы также использовались для того, чтобы размещать рядом друг с другом такие ресурсы, как среды вычисления приложений и хранилища. Однако с текущей архитектурой сети Azure эти требования к размещению более не актуальны. В статье [Территориальные группы и виртуальные машины](#Affinity-groups-and-VMs) описаны несколько оставшихся актуальных случаев возможного использования территориальной группы.

## <a name="creating-and-migrating-to-regional-vnets"></a>Создание региональных виртуальных сетей и переход к ним
Забегая наперед, отметим, что при создании новых виртуальных сетей следует использовать параметр *Регион*. Вы увидите этот параметр на портале управления. Обратите внимание, что в файле конфигурации сети он отображается как *Location*(расположение).

> [!IMPORTANT]
> Создать виртуальную сеть, связанную с территориальной группой, по-прежнему технически возможно, но это не дает никаких преимуществ. Многие новые возможности, в частности группы безопасности сети, доступны только при использовании региональной виртуальной сети и недоступны для виртуальных сетей, связанных с территориальными группами.
> 
> 

### <a name="about-vnets-currently-associated-with-affinity-groups"></a>Виртуальные сети, связанные с территориальными группами
Виртуальные сети, которые сейчас связаны с территориальными группами, можно перенести в региональные виртуальные сети. Для переноса в региональную виртуальную сеть, выполните следующие действия:

1. Экспортируйте файл конфигурации сети. Для этого можно использовать PowerShell или портал управления. Инструкции по использованию портала управления см. в статье [Настройка виртуальной сети с помощью файла конфигурации сети](virtual-networks-using-network-configuration-file.md).
2. Измените файл конфигурации, заменив старые значения новыми. 
   
   > [!NOTE]
   > **Location** (расположение) — это регион, указанный для территориальной группы, которая связана с виртуальной сетью. Например, если виртуальная сеть связана с территориальной группой, расположенной на Западе США, во время переноса следует указать расположение "Запад США". 
   > 
   > 
   
    Измените следующие строки в файле конфигурации сети, заменив значения собственными. 
   
    **Старое значение:** \<VirtualNetworkSitename="VNetUSWest" AffinityGroup="VNetDemoAG"\>. 
   
    **Новое значение:** \<VirtualNetworkSitename="VNetUSWest" Location="West US"\>.
3. Сохраните изменения и [импортируйте](virtual-networks-using-network-configuration-file.md) конфигурацию сети в Azure.

> [!NOTE]
> Такая миграция НЕ вызывает простоев в работе ваших служб.
> 
> 

## <a name="affinity-groups-and-vms"></a>Территориальные группы и виртуальные машины
Как упоминалось ранее, территориальные группы больше не рекомендуется использовать для виртуальных машин. Территориальную группу следует использовать только в том случае, когда между набором виртуальных машин должна быть наименьшая задержка в сети. Размещение виртуальных машин в территориальной группе означает, что все они будут размещены в одном вычислительном кластере или единице масштабирования.

Обратите особое внимание на то, что использование территориальной группы может иметь два последствия, которые могут быть негативными.

* Набор размеров виртуальных машины не может превышать набор размеров, предлагаемый вычислительной единицей масштабирования.
* Существует высокая вероятность того, что вы не сможете выделить новую виртуальную машину. Это происходит в тех случаях, когда в определенной единице масштабирования для территориальной группы заканчивается доступная емкость.

### <a name="what-to-do-if-you-have-a-vm-in-an-affinity-group"></a>Действия при наличии виртуальной машины в территориальной группе
Виртуальные машины, которые сейчас находятся в территориальной группе, не нужно удалять из группы.

При развертывании виртуальной машины она попадает в одну единицу масштабирования. Территориальные группы могут ограничивать набор доступных размеров виртуальных машин для нового развертывания виртуальных машин, но существующая развернутая виртуальная машина уже ограничена набором размеров, доступных в единице масштабирования, в которой она развернута. По этой причине удаление виртуальной машины из территориальной группы не имеет смысла.


