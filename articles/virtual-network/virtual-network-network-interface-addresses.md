---
title: "Настройка IP-адресов для сетевых интерфейсов Azure | Документация Майкрософт"
description: "Узнайте, как добавлять, изменять и удалять общедоступные и частные IP-адреса для сетевых карт."
services: virtual-network
documentationcenter: na
author: jimdial
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 
ms.service: virtual-network
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 05/04/2017
ms.author: jdial
ms.translationtype: Human Translation
ms.sourcegitcommit: afa23b1395b8275e72048bd47fffcf38f9dcd334
ms.openlocfilehash: cf7dbc648136897772bbd068687313eec16bed75
ms.contentlocale: ru-ru
ms.lasthandoff: 05/12/2017


---

# <a name="add-change-or-remove-ip-addresses-for-azure-network-interfaces"></a>Добавление, изменение и удаление IP-адресов для сетевых интерфейсов Azure

Узнайте, как добавлять, изменять и удалять общедоступные и частные IP-адреса для сетевых интерфейсов (сетевых карт). Назначение частных IP-адресов сетевой карте позволяет виртуальной машине обмениваться данными с Интернетом и другим ресурсами, подключенными к виртуальной сети Azure. Назначение сетевой карте общедоступных IP-адресов обеспечивает передачу на виртуальную машину входящего трафика из Интернета. 

Если требуется создать, изменить или удалить сетевые карты, прочитайте статью [Сетевые интерфейсы](virtual-network-network-interface.md). Если требуется добавить или удалить сетевые карты виртуальных машин, прочитайте статью [Добавление или удаление сетевых интерфейсов виртуальных машин](virtual-network-network-interface-vm.md). 


## <a name="before"></a>Перед началом работы

Перед выполнением действий, описанных в любом разделе этой статьи, выполните следующие задачи.

- Ознакомьтесь со статьей [Подписка Azure, границы, квоты и ограничения службы](../azure-subscription-service-limits.md?toc=%2fazure%2fvirtual-network%2ftoc.json#azure-resource-manager-virtual-networking-limits), чтобы узнать об ограничениях для общедоступных и частных IP-адресов.
- Войдите на портал Azure, в интерфейс командной строки Azure (CLI) или Azure PowerShell с помощью учетной записи Azure. Если у вас нет учетной записи Azure, зарегистрируйтесь для получения [бесплатной пробной учетной записи](https://azure.microsoft.com/free).
- Если для выполнения задач в этой статье вы используете команды PowerShell, установите и настройте Azure PowerShell, выполнив инструкции в статье [Установка и настройка служб Azure PowerShell](/powershell/azureps-cmdlets-docs?toc=%2fazure%2fvirtual-network%2ftoc.json). Убедитесь, что у вас установлена самая последняя версия командлетов Azure PowerShell. Для получения справки по командам PowerShell с примерами введите `get-help <command> -full`.
- Если для выполнения задач в этой статье вы используете команды интерфейса командной строки Azure, установите и настройте Azure CLI, выполнив инструкции в статье [Установка и настройка интерфейса командной строки Azure](/cli/azure/install-azure-cli?toc=%2fazure%2fvirtual-network%2ftoc.json). Убедитесь, что у вас установлена самая последняя версия Azure CLI. Для получения справки по командам интерфейса командной строки введите `az <command> --help`.

## <a name="about"></a>О сетевых картах и IP-адресах

Каждой сетевой карте можно назначить несколько частных и общедоступных IP-адресов в пределах [ограничений Azure](../azure-subscription-service-limits.md?toc=%2fazure%2fvirtual-network%2ftoc.json#azure-resource-manager-virtual-networking-limits). Назначение нескольких IP-адресов сетевой карте полезно в следующих сценариях:
- Возможность размещать на одном сервере несколько веб-сайтов или служб с разными IP-адресами и SSL-сертификатами.
- Возможность использовать виртуальную машину в качестве виртуального сетевого устройства, такого как брандмауэр или балансировщик нагрузки.
- Возможность добавления любых частных IP-адресов любых сетевых карт во внутренний пул Azure Load Balancer. Раньше во внутренний пул можно было добавить только основной IP-адрес для основной сетевой карты. Дополнительные сведения о балансировке нагрузки в конфигурациях с несколькими IP-адресами см. в [этой статье](../load-balancer/load-balancer-multiple-ip.md?toc=%2fazure%2fvirtual-network%2ftoc.json).

IP-адреса назначаются IP-конфигурации. Сетевой карте всегда назначается **основная** IP-конфигурация, но ей также может быть назначено несколько **дополнительных** конфигураций. Каждой IP-конфигурации назначаются адреса одного или обоих следующих типов:
- **Частный**. Частные IP-адреса позволяют виртуальной машине обмениваться данными с другими ресурсами, которые подключены к виртуальной сети, в которой находится сетевая карта. IP-конфигурации должен быть назначен один частный IP-адрес. DHCP-сервер Azure назначает частный IP-адрес для основной IP-конфигурации сетевой карте в операционной системе виртуальной машины. Частный IP-адрес также позволяет виртуальной машине передавать данные в Интернет. Исходящие подключения используют механизм преобразования сетевых адресов SNAT. Чтобы узнать больше об исходящих интернет-подключениях Azure, прочитайте статью [Общие сведения об исходящих подключениях в Azure](../load-balancer/load-balancer-outbound-connections.md?toc=%2fazure%2fvirtual-network%2ftoc.json). К частному IP-адресу виртуальной машины невозможно подключиться из Интернета.
- **Общедоступный**. Общедоступные IP-адреса обеспечивают входящие подключения к виртуальной машине из Интернета. Исходящие подключения к Интернету не используют механизм SNAT. Можно назначить общедоступный IP-адрес IP-конфигурации, но это не обязательно. Чтобы узнать больше об общедоступных IP-адресах, прочитайте статью [Общедоступные IP-адреса](virtual-network-public-ip-address.md).

Число общедоступных и частных IP-адресов, которые можно назначить сетевой карте, ограничено. Дополнительные сведения см. в статье об [ограничениях в Azure](../azure-subscription-service-limits.md?toc=%2fazure%2fvirtual-network%2ftoc.json#azure-resource-manager-virtual-networking-limits).

Общедоступные и частные IP-адреса можно назначать, используя следующие типы выделения:
- **Динамическое выделение**. Динамические частные и общедоступные IP-адреса назначаются по умолчанию. Динамические адреса могут измениться, если виртуальная машина была остановлена (освобождена), а затем перезапущена. Если вы не хотите, чтобы IP-адрес виртуальной машины менялся на протяжении ее времени существования, используйте статический адрес.
- **Статическое выделение**. Статические адреса не изменяются вплоть до удаления виртуальной машины. Статический частный IP-адрес назначается из адресного пространства подсети, к которой подключена сетевая карта. Чтобы узнать больше о том, как Azure назначает статические общедоступные IP-адреса, прочитайте статью [Общедоступные IP-адреса](virtual-network-public-ip-address.md).

## <a name="create-ip-config"></a>Добавление IP-адресов

Вы можете добавить требуемое количество IP-адресов для сетевой карты в пределах, приведенных в статье [Подписка Azure, границы, квоты и ограничения службы](../azure-subscription-service-limits.md?toc=%2fazure%2fvirtual-network%2ftoc.json#azure-resource-manager-virtual-networking-limits).

1. Войдите на [портал Azure](https://portal.azure.com) с помощью учетной записи, которой назначены как минимум разрешения на роль "Участник сети" для подписки. Сведения о назначении ролей и разрешений учетным записям см. в статье [Встроенные роли для управления доступом на основе ролей в Azure](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor).
2. В верхней части портала Azure в поле с текстом *Поиск ресурсов* введите *сетевые интерфейсы*. Когда **сетевые интерфейсы** появятся в результатах поиска, щелкните их.
3. В появившейся колонке **Сетевые интерфейсы** щелкните сетевую карту, для которой нужно добавить IP-адрес.
4. В разделе **Параметры** колонки выбранной сетевой карты щелкните **Конфигурации IP**.
5. В появившейся колонке IP-конфигураций щелкните **+ Add** (+ Добавить).
6. Укажите следующие сведения и нажмите кнопку **ОК**, чтобы закрыть колонку **Добавить IP-конфигурацию**.

    |Настройка|Обязательный?|Сведения|
    |---|---|---|
    |Имя|Да|Должно быть уникальным для сетевой карты.|
    |Тип|Да|Так как вы добавляете IP-конфигурацию к существующей сетевой карте и каждая сетевая карта должна иметь основную IP-конфигурацию, единственным вариантом является **Вторичный**.|
    |"Private IP address assignment method" (Способ назначения общедоступных IP-адресов)|Да|**Динамический** адрес меняется, если до перезапуска виртуальная машина была остановлена (освобождена). Azure назначает доступный адрес из адресного пространства подсети, к которой подключена сетевая карта. **Статические** адреса не освобождаются, пока не будет удалена сетевая карта. Укажите IP-адрес из диапазона адресного пространства подсети, который сейчас не используется другой IP-конфигурацией.|
    |Общедоступный IP-адрес|Нет|**Отключено.** Сейчас с IP-конфигурацией не связан ресурс общедоступного IP-адреса. **Включено.** Выберите существующий общедоступный IP-адрес или создайте его. Дополнительные сведения о создании общедоступного IP-адреса см. в [этом разделе](virtual-network-public-ip-address.md#create).|
7. Добавьте дополнительный частный IP-адрес для операционной системы виртуальной машины вручную, выполнив инструкции в статье [Назначение виртуальным машинам нескольких IP-адресов с помощью портала Azure](virtual-network-multiple-ip-addresses-portal.md#os-config). Не добавляйте в операционную систему общедоступные IP-адреса.

**Команды**

|Средство|Команда|
|---|---|
|Интерфейс командной строки|[az network nic ip-config create](/cli/azure/network/nic/ip-config?toc=%2fazure%2fvirtual-network%2ftoc.json#create)|
|PowerShell|[Add-AzureRmNetworkInterfaceIpConfig](/powershell/resourcemanager/azurerm.network/v3.4.0/add-azurermnetworkinterfaceipconfig?toc=%2fazure%2fvirtual-network%2ftoc.json)|

## <a name="change-ip-config"></a>Изменение параметров IP-адреса

Может потребоваться изменить способ назначения IP-адресов, статический IP-адрес или общедоступный IP-адрес для сетевой карты. При изменении частного IP-адреса дополнительной IP-конфигурации, связанной с дополнительной сетевой картой виртуальной машины (узнайте больше об [основных и дополнительных сетевых картах](virtual-network-network-interface-vm.md#about)), переведите виртуальную машину в остановленное состояние (освободите ее), прежде чем выполнять приведенные ниже действия. 

1. Войдите на [портал Azure](https://portal.azure.com) с помощью учетной записи, которой назначены как минимум разрешения на роль "Участник сети" для подписки. Сведения о назначении ролей и разрешений учетным записям см. в статье [Встроенные роли для управления доступом на основе ролей в Azure](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor).
2. В верхней части портала Azure в поле с текстом *Поиск ресурсов* введите *сетевые интерфейсы*. Когда **сетевые интерфейсы** появятся в результатах поиска, щелкните их.
3. В появившейся колонке **Сетевые интерфейсы** щелкните сетевую карту, для которой нужно просмотреть или изменить параметры IP-адреса.
4. В разделе **Параметры** колонки выбранной сетевой карты щелкните **Конфигурации IP**.
5. В появившейся колонке IP-конфигурации в списке щелкните IP-конфигурацию, которую следует изменить.
6. Измените параметры требуемым образом, используя сведения о параметрах, приведенные на шаге 6 в разделе [Добавление IP-конфигурации](#create-ip-config) этой статьи. Нажмите кнопку **Сохранить**, чтобы закрыть колонку IP-конфигурации, которую вы изменили.

>[!NOTE]
>Если изменить частный IP-адрес основной IP-конфигурации в основной сетевой карте, которой назначено несколько IP-конфигураций, необходимо вручную переназначить все дополнительные IP-адреса сетевой карте в Windows (не требуется в Linux). Чтобы назначать IP-адрес сетевой карте в операционной системе вручную, см. статью [Назначение виртуальным машинам нескольких IP-адресов с помощью портала Azure](virtual-network-multiple-ip-addresses-portal.md#os-config). Не добавляйте в операционную систему общедоступные IP-адреса.

**Команды**

|Средство|Команда|
|---|---|
|Интерфейс командной строки|[az network nic ip-config update](/cli/azure/network/nic/ip-config?toc=%2fazure%2fvirtual-network%2ftoc.json#update)|
|PowerShell|[Set-AzureRMNetworkInterfaceIpConfig](/powershell/resourcemanager/azurerm.network/v3.4.0/set-azurermnetworkinterfaceipconfig?toc=%2fazure%2fvirtual-network%2ftoc.json)|

## <a name="delete-ip-config"></a>Удаление IP-адресов

Можно удалить частные и общедоступные IP-адреса сетевой карты, но у нее всегда должен быть по крайней мере один назначенный частный IP-адрес.

1. Войдите на [портал Azure](https://portal.azure.com) с помощью учетной записи, которой назначены как минимум разрешения на роль "Участник сети" для подписки. Сведения о назначении ролей и разрешений учетным записям см. в статье [Встроенные роли для управления доступом на основе ролей в Azure](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor).
2. В верхней части портала Azure в поле с текстом *Поиск ресурсов* введите *сетевые интерфейсы*. Когда **сетевые интерфейсы** появятся в результатах поиска, щелкните их.
3. В появившейся колонке **Сетевые интерфейсы** щелкните сетевую карту, для которой нужно удалить IP-адреса.
4. В разделе **Параметры** колонки выбранной сетевой карты щелкните **Конфигурации IP**.
5. Щелкните правой кнопкой мыши дополнительную IP-конфигурацию (основную конфигурацию удалить невозможно), которую нужно удалить, щелкните **Удалить**, затем нажмите кнопку **Да**, чтобы подтвердить удаление. Если с IP-конфигурацией был связан общедоступный IP-адрес, его связь с ней отменяется, но сам IP-адрес не удаляется.
6. Закройте колонку **Конфигурации IP**.

**Команды**

|Средство|Команда|
|---|---|
|Интерфейс командной строки|[az network nic ip-config delete](/cli/azure/network/nic/ip-config?toc=%2fazure%2fvirtual-network%2ftoc.json#delete)|
|PowerShell|[Remove-AzureRmNetworkInterfaceIpConfig](/powershell/resourcemanager/azurerm.network/v3.4.0/remove-azurermnetworkinterfaceipconfig?toc=%2fazure%2fvirtual-network%2ftoc.json)|


## <a name="next-steps"></a>Дальнейшие действия
Чтобы создать виртуальную машину с несколькими сетевыми картами или IP-адресами, прочитайте приведенные ниже статьи.

**Команды**

|Задача|Средство|
|---|---|
|Создание виртуальной машины с несколькими сетевыми адаптерами|[ИНТЕРФЕЙС КОМАНДНОЙ СТРОКИ](../virtual-machines/linux/multiple-nics.md?toc=%2fazure%2fvirtual-network%2ftoc.json)|
||[PowerShell](../virtual-machines/windows/multiple-nics.md?toc=%2fazure%2fvirtual-network%2ftoc.json)|
|Создание виртуальной машины с одной сетевой картой, которой назначено несколько IP-адресов|[ИНТЕРФЕЙС КОМАНДНОЙ СТРОКИ](virtual-network-multiple-ip-addresses-cli.md)|
||[PowerShell](virtual-network-multiple-ip-addresses-powershell.md)|

