---
title: "Создание, изменение или удаление подсетей в виртуальных сетях Azure | Документация Майкрософт"
description: "Узнайте, как создавать, изменять и удалять подсети в виртуальной сети."
services: virtual-network
documentationcenter: na
author: jimdial
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 
ms.service: virtual-network
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 05/10/2017
ms.author: jdial
ms.translationtype: Human Translation
ms.sourcegitcommit: 17c4dc6a72328b613f31407aff8b6c9eacd70d9a
ms.openlocfilehash: 38dcdf2f313c236a507e6a418c39812da16c6345
ms.contentlocale: ru-ru
ms.lasthandoff: 05/16/2017


---
# <a name="create-change-or-delete-virtual-network-subnets"></a>Создание, изменение и удаление подсетей в виртуальных сетях

Узнайте, как создавать, изменять и удалять подсети в виртуальной сети. Если вы не знакомы с виртуальными сетями, мы рекомендуем прочитать статьи [Виртуальная сеть Azure](virtual-networks-overview.md) и [Создание, изменение или удаление виртуальных сетей](virtual-network-manage-network.md), прежде чем создавать, изменять или удалять подсети. Ресурсы Azure, которые могут подключаться к виртуальной сети, подключаются к подсети в этой виртуальной сети. Обычно в виртуальной сети создается несколько подсетей для следующих задач:
- **Фильтрация трафика между подсетями**. К подсетям можно применить группы безопасности сети (NSG) для фильтрации входящего и исходящего сетевого трафика для всех ресурсов (например, виртуальных машин), подключенных к виртуальной сети. Чтобы узнать больше о том, как создавать группы безопасности сети, прочитайте статью [Создание групп безопасности сети с помощью портала Azure](virtual-networks-create-nsg-arm-pportal.md).
- **Управление маршрутизацией между подсетями**. Azure создает маршруты по умолчанию, чтобы трафик автоматически направлялся между подсетями. Можно переопределить маршруты по умолчанию Azure, создав определяемые пользователем маршруты (UDR). Дополнительные сведения об определяемых пользователем маршрутах см. в статье [Создание определяемых пользователем маршрутов с помощью PowerShell](virtual-network-create-udr-arm-ps.md). 

В этой статье описывается, как создавать, изменять и удалять подсети в виртуальных сетях, созданных посредством модели развертывания с помощью Azure Resource Manager.
 
## <a name="before"></a>Перед началом работы

Перед выполнением действий, описанных в любом разделе этой статьи, выполните следующие задачи.

- Если вы не знакомы с виртуальными сетями и подсетями в Azure, то прежде чем ознакомиться с этой статьей, мы рекомендуем вам выполнить упражнение в статье [Создание первой собственной виртуальной сети](virtual-network-get-started-vnet-subnet.md). Выполнив его, вы сможете освоить работу с виртуальными сетями и подсетями.
- Ознакомьтесь со статьей [Подписка Azure, границы, квоты и ограничения службы](../azure-subscription-service-limits.md?toc=%2fazure%2fvirtual-network%2ftoc.json#azure-resource-manager-virtual-networking-limits), чтобы узнать об ограничениях для подсетей и виртуальных сетей.
- Войдите на портал Azure, в интерфейс командной строки Azure (CLI) или Azure PowerShell с помощью учетной записи Azure. Если у вас нет учетной записи Azure, зарегистрируйтесь для получения [бесплатной пробной учетной записи](https://azure.microsoft.com/free).
- Чтобы использовать команды Azure PowerShell для выполнения задач в этой статье, сначала необходимо [установить и настроить Azure PowerShell](/powershell/azureps-cmdlets-docs?toc=%2fazure%2fvirtual-network%2ftoc.json). Убедитесь, что у вас установлена самая последняя версия командлетов Azure PowerShell. Для получения справки по командам PowerShell с примерами введите `get-help <command> -full`.
- Чтобы использовать команды интерфейса командной строки Azure (Azure CLI) для выполнения задач в этой статье, сначала необходимо [установить и настроить Azure CLI](/cli/azure/install-azure-cli?toc=%2fazure%2fvirtual-network%2ftoc.json). Убедитесь, что у вас установлена самая последняя версия Azure CLI. Для получения справки по командам интерфейса командной строки введите `az <command> --help`.


## <a name="create-subnet"></a>Создание подсети

1. Войдите на [портал](https://portal.azure.com) с помощью учетной записи, которой назначены как минимум разрешения роли "Участник сети" для подписки. Сведения о назначении ролей и разрешений учетным записям см. в статье [Встроенные роли для управления доступом на основе ролей в Azure](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor).
2. В верхней части портала Azure в поле с текстом *Поиск ресурсов* введите *виртуальные сети*. Когда в результатах поиска появится пункт **Виртуальные машины**, щелкните его.
3. В появившейся колонке **Виртуальные сети** щелкните виртуальную сеть, в которую требуется добавить подсеть.
4. В области, отображенной для выбранной виртуальной сети, щелкните **Подсети**.
5. Щелкните **+ Subnet**(+Подсеть).
6. В колонке **Добавление подсети** введите значения для следующих параметров:
    - **Имя**. Имя должно быть уникальным в пределах виртуальной сети.
    - **Диапазон адресов**. Диапазон должен быть уникальным в пределах адресного пространства виртуальной сети и не может перекрывать диапазоны адресов других подсетей в виртуальной сети. Адресное пространство должно быть указано с помощью нотации CIDR. Например, в виртуальной сети с адресным пространством 10.0.0.0/16 можно определить адресное пространство подсети 10.0.0.0/24. Наименьший допустимый диапазон — /29. Он обеспечивает восемь IP-адресов для подсети. Azure резервирует первый и последний адреса в каждой подсети для соответствия требованиям протоколов. Еще три адреса резервируются для служб Azure. Следовательно, если определить подсеть с диапазоном адресов /29, то в ней будет только три пригодных для использования IP-адреса. Если планируется подключить виртуальную сеть к VPN-шлюзу, необходимо создать подсеть шлюза. Узнайте больше о [рекомендациях по диапазонам адресов для подсетей шлюза](../vpn-gateway/vpn-gateway-about-vpn-gateway-settings.md?toc=%2fazure%2fvirtual-network%2ftoc.json#a-namegwsubagateway-subnet). При определенных условиях диапазон адресов после создания подсети можно изменить. Чтобы узнать, как изменить диапазон адресов подсети, прочитайте раздел [Изменение подсети](#change-subnet) этой статьи.
    - **Network security group (NSG)** (Группа безопасности сети (NSG)). С подсетью можно дополнительно связать существующую NSG, чтобы управлять фильтрацией входящего и исходящего сетевого трафика подсети. NSG должна существовать в тех же подписке и расположении, что и виртуальная сеть, и должна быть создана посредством модели развертывания с помощью Resource Manager. Чтобы узнать больше о том, как создавать группы безопасности сети, прочитайте статью [Создание групп безопасности сети с помощью портала Azure](virtual-networks-create-nsg-arm-pportal.md).
    - **Таблица маршрутов**. С подсетью можно связать существующую таблицу маршрутов, чтобы управлять маршрутизацией сетевого трафика в другие сети. Таблица маршрутов должна существовать в тех же подписке и расположении, что и виртуальная сеть, и должна быть создана посредством модели развертывания с помощью Resource Manager. Чтобы узнать больше о создании таблиц маршрутов, прочитайте статью [Создание определяемых пользователем маршрутов с помощью PowerShell](virtual-network-create-udr-arm-ps.md).
    - **Пользователи**. Можно управлять доступом к подсети, используя встроенные роли или собственные настраиваемые роли. Чтобы узнать больше о назначении ролей и пользователей для доступа к подсети, прочитайте статью [Использование управления доступом на основе ролей для контроля доступа к ресурсам в подписке Azure](../active-directory/role-based-access-control-configure.md?toc=%2fazure%2fvirtual-network%2ftoc.json#add-access).
7. Нажмите кнопку **ОК**, чтобы добавить подсеть в выбранную виртуальную сеть.

**Команды**

|Средство|Команда|
|---|---|
|Интерфейс командной строки|[az network vnet subnet create](/cli/azure/network/vnet/subnet?toc=%2fazure%2fvirtual-network%2ftoc.json#create)|
|PowerShell|[New-AzureRmVirtualNetworkSubnetConfig](/powershell/module/azurerm.network/new-azurermvirtualnetworksubnetconfig?view=azurermps-3.8.0?toc=%2fazure%2fvirtual-network%2ftoc.json), [Add-AzureRmVirtualNetworkSubnetConfig](/powershell/module/azurerm.network/add-azurermvirtualnetworksubnetconfig?view=azurermps-3.8.0?toc=%2fazure%2fvirtual-network%2ftoc.json)|

## <a name="change-subnet"></a>Изменение параметров подсети

Можно изменить NSG, таблицы маршрутов и параметры доступа пользователей к подсети с подключенными к ней ресурсами. Дополнительную информацию об этих параметрах можно получить, ознакомившись с шагом 6 в разделе [Создание подсети](#create-subnet) этой статьи. Чтобы изменить адресное пространство подсети, необходимо убедиться, что к ней не подключены ресурсы. В противном случае необходимо сначала удалить ресурсы, подключенные к подсети, и затем изменить диапазон адресов. Инструкции по удалению зависит от ресурса. Чтобы узнать, как удалить ресурсы, подключенные к подсетям, ознакомьтесь с документацией по типам ресурсов, которые требуется удалить. Выполните следующие действия, чтобы изменить диапазон адресов для подсети.

1. Войдите на [портал](https://portal.azure.com) с помощью учетной записи, которой назначены как минимум разрешения роли "Участник сети" для подписки. Сведения о назначении ролей и разрешений учетным записям см. в статье [Встроенные роли для управления доступом на основе ролей в Azure](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor).
2. В верхней части окна портала в поле с текстом *Поиск ресурсов* введите *виртуальные сети*. Когда в результатах поиска появится пункт **Виртуальные машины**, щелкните его.
3. В появившейся колонке **Виртуальные сети** щелкните виртуальную сеть, для подсети которой требуется изменить диапазон адресов.
4. Выберите подсеть, для которой нужно изменить диапазон адресов.
5. В появившейся колонке для выбранной подсети введите новый диапазон адресов в поле **Диапазон адресов**. Этот диапазон должен быть уникальным в пределах адресного пространства виртуальной сети и не может перекрывать диапазоны адресов других подсетей в виртуальной сети. Адресное пространство должно быть указано с помощью нотации CIDR. Например, в виртуальной сети с адресным пространством 10.0.0.0/16 можно определить адресное пространство подсети 10.0.0.0/24. Наименьший допустимый диапазон — /29. Он обеспечивает восемь IP-адресов для подсети. Azure резервирует первый и последний адреса в каждой подсети для соответствия требованиям протоколов. Еще три адреса резервируются для служб Azure. В результате подсеть с диапазоном адресов /29 содержит только три пригодных для использования IP-адреса. Если планируется подключить виртуальную сеть к VPN-шлюзу, необходимо создать подсеть шлюза. Узнайте больше о [рекомендациях по диапазонам адресов для подсетей шлюза](../vpn-gateway/vpn-gateway-about-vpn-gateway-settings.md?toc=%2fazure%2fvirtual-network%2ftoc.json#a-namegwsubagateway-subnet). При определенных условиях диапазон адресов после создания подсети можно изменить. Чтобы узнать, как изменить диапазон адресов подсети, прочитайте раздел [Изменение подсети](#change-subnet) этой статьи.
6. Щелкните **Сохранить**.

**Команды**

|Средство|Команда|
|---|---|
|Интерфейс командной строки|[az network vnet subnet update](/cli/azure/network/vnet?toc=%2fazure%2fvirtual-network%2ftoc.json#update)|
|PowerShell|[Set-AzureRmVirtualNetworkSubnetConfig](/powershell/module/azurerm.network/set-azurermvirtualnetworksubnetconfig?view=azurermps-3.8.0?toc=%2fazure%2fvirtual-network%2ftoc.json)|


## <a name="delete-subnet"></a>Удаление подсети

Подсеть можно удалить только в том случае, если к ней не подключены какие-либо ресурсы. В противном случае необходимо сначала удалить ресурсы, подключенные к подсети. Инструкции по удалению зависит от ресурса. Чтобы узнать, как удалить ресурсы, подключенные к подсетям, ознакомьтесь с документацией по типам ресурсов, которые требуется удалить.

1. Войдите на [портал](https://portal.azure.com) с помощью учетной записи, которой назначены как минимум разрешения роли "Участник сети" для подписки. Сведения о назначении ролей и разрешений учетным записям см. в статье [Встроенные роли для управления доступом на основе ролей в Azure](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor).
2. В верхней части портала Azure в поле с текстом *Поиск ресурсов* введите *виртуальные сети*. Когда в результатах поиска появится пункт **Виртуальные машины**, щелкните его.
3. В появившейся колонке **Виртуальные сети** щелкните виртуальную сеть, из которой требуется удалить подсеть.
4. В колонке, отображенной для выбранной виртуальной сети, в разделе **Параметры** щелкните **Подсети**.
5. В отобразившемся в колонке "Подсети" списке подсетей щелкните правой кнопкой мыши подсеть, которую нужно удалить, щелкните **Удалить**, затем щелкните **Да**, чтобы удалить подсеть.

**Команды**

|Средство|Команда|
|---|---|
|Интерфейс командной строки|[az network vnet delete](/cli/azure/network/vnet?toc=%2fazure%2fvirtual-network%2ftoc.json#delete)|
|PowerShell|[Remove-AzureRmVirtualNetworkSubnetConfig](/powershell/module/azurerm.network/remove-azurermvirtualnetworksubnetconfig?view=azurermps-3.8.0?toc=%2fazure%2fvirtual-network%2ftoc.json)|

## <a name="next-steps"></a>Дальнейшие действия

О том, как создать виртуальную машину и подключить ее к подсети, узнайте в статье [Создание первой собственной виртуальной сети](virtual-network-get-started-vnet-subnet.md#a-namecreate-vmsacreate-virtual-machines).
