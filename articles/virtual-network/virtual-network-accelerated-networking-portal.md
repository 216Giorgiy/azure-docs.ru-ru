---
title: "Повышение производительности сети для виртуальной машины с использованием портала | Документация Майкрософт"
description: "Сведения о настройке повышения производительности сети для виртуальной машины Azure с помощью портала Azure."
services: virtual-network
documentationcenter: na
author: jimdial
manager: carmonm
editor: 
tags: azure-resource-manager
ms.assetid: af4515c6-4377-4d4a-a104-18fe1348252c
ms.service: virtual-network
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 09/26/2016
ms.author: jdial
translationtype: Human Translation
ms.sourcegitcommit: 5919c477502767a32c535ace4ae4e9dffae4f44b
ms.openlocfilehash: 9ace0a47e8b804840ffda3f906bf3fb8584932cf


---
# <a name="accelerated-networking-for-a-virtual-machine"></a>Повышение производительности сети для виртуальной машины
> [!div class="op_single_selector"]
> * [Портал Azure](virtual-network-accelerated-networking-portal.md)
> * [PowerShell](virtual-network-accelerated-networking-powershell.md)
> 
> 

Функция повышения производительности сети позволяет использовать виртуализацию ввода-вывода с единым корнем (SR-IOV) для виртуальной машины. Этот высокопроизводительный метод обеспечивает обход узла на пути к данным, что уменьшает задержку, дрожание и нагрузку ЦП. Он предназначен для ресурсоемких рабочих нагрузок сети на виртуальных машинах поддерживаемых типов. В этой статье объясняется, как настроить повышение производительности сети в модели развертывания Azure Resource Manager с помощью портала Azure. Можно также создать виртуальную машину с функцией повышения производительности сети с помощью Azure PowerShell. Чтобы узнать, как это сделать, щелкните элемент PowerShell в верхней части этой статьи.

На следующем рисунке приведена схема обмена данными между двумя виртуальными машинами с функцией повышения производительности сети и без нее.

![Сравнение](./media/virtual-network-accelerated-networking-portal/image1.png)

Без использования функции повышения производительности сети весь входящий и исходящий сетевой трафик виртуальной машины должен проходить через узел и виртуальный коммутатор. Виртуальный коммутатор обеспечивает принудительное применение всех политик, таких как группы безопасности сети, списки управления доступом, изоляция, и использование других служб виртуализации сети для сетевого трафика. Дополнительные сведения см. в статье [Виртуализация сети Hyper-V и виртуальный коммутатор](https://technet.microsoft.com/library/jj945275.aspx).

При использовании функции повышения производительности сети трафик поступает на сетевую карту, а затем перенаправляется на виртуальную машину. Все сетевые политики, которые применяет виртуальный коммутатор без этой функции, разгружаются и применяются на аппаратном уровне. Благодаря применению политик на аппаратном уровне сетевая карта может перенаправлять сетевой трафик непосредственно на виртуальную машину в обход узла и виртуального коммутатора. При этом все политики, примененные на узле, сохраняются.

Возможности функции повышения производительности сети применяются только к той виртуальной машине, где она включена. Для получения наилучших результатов необходимо включить эту функцию по крайней мере на двух виртуальных машинах, подключенных к одной виртуальной сети. При обмене данными между виртуальными или локальными сетями эта функция практически не влияет на общую задержку.

[!INCLUDE [virtual-network-preview](../../includes/virtual-network-preview.md)]

## <a name="benefits"></a>Преимущества
* **Уменьшение задержки (больше пакетов в секунду).** Благодаря обходу виртуального коммутатора на пути к данным на узле не выполняется обработка политики пакетов. Таким образом, увеличивается число пакетов, которые могут быть обработаны на виртуальной машине.
* **Уменьшение дрожания.** Обработка с помощью виртуального коммутатора зависит от числа политик, которые необходимо применить, и рабочей нагрузки ЦП, выполняющего обработку. Так как принудительное применение политик осуществляется на аппаратном уровне, эта зависимость устраняется за счет доставки пакетов непосредственно на виртуальную машину. Это позволяет избежать обмена данными между узлом и виртуальной машиной, прерываний работы программного обеспечения и переключений контекста.
* **Уменьшение нагрузки ЦП.** Обход виртуального коммутатора на узле приводит к меньшему использованию ЦП для обработки сетевого трафика.

## <a name="limitations"></a>Ограничения
При использовании этой возможности действуют следующие ограничения:

* **Создание сетевого интерфейса.** Функцию повышения производительности сети можно включить только в новом сетевом интерфейсе.  Ее нельзя включить в имеющемся сетевом интерфейсе.
* **Создание виртуальной машины.** Сетевой интерфейс с включенным повышением производительности сети можно подключить к виртуальной машине при ее создании. Этого нельзя сделать для имеющейся виртуальной машины.
* **Регионы.** Эта функция доступна только в таких регионах Azure, как западно-центральная часть США и Западная Европа. Набор поддерживаемых регионов будет расширяться в будущем.
* **Поддерживаемые операционные системы.** Microsoft Windows Server 2012 R2 и Windows Server 2016 Technical Preview 5. Вскоре будет добавлена поддержка Linux и Windows Server 2012.
* **Размер виртуальной машины.** Standard_D15_v2 и Standard_DS15_v2 — единственные поддерживаемые размеры экземпляров виртуальных машин. Дополнительные сведения см. в статье [Размеры виртуальных машин в Azure](../virtual-machines/virtual-machines-windows-sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json). Набор поддерживаемых размеров экземпляров виртуальных машин будет расширяться в будущем.

Сведения об изменениях этих ограничений будут публиковаться на [этой странице](https://azure.microsoft.com/updates/accelerated-networking-in-preview).

## <a name="create-a-windows-vm-with-accelerated-networking"></a>Создание виртуальной машины Windows с повышением производительности сети
1. Зарегистрируйтесь для получения предварительной версии, отправив сообщение электронной почты с темой [Подписка на повышение производительности сети](mailto:axnpreview@microsoft.com?subject=Request%20to%20enable%20subscription%20%3csubscription%20id%3e), указав идентификатор подписки и описание предполагаемого использования. Не выполняйте оставшиеся действия до тех пор, пока не получите уведомление о возможности использовать предварительную версию.
2. Войдите на портал Azure по адресу http://portal.azure.com.
3. Создайте виртуальную машину, используя инструкции в статье [Создание первой виртуальной машины Windows на портале Azure](../virtual-machines/virtual-machines-windows-hero-tutorial.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json), и следуйте указанным ниже рекомендациям.
   
   * Выберите операционную систему, указанную в разделе "Ограничения" этой статьи.
   * Выберите расположение (регион), указанное в разделе "Ограничения" этой статьи.
   * Выберите размер виртуальной машины, указанный в разделе "Ограничения" этой статьи. Если одного из поддерживаемых размеров нет в списке, в колонке **Выбор размера** щелкните **Просмотреть все**, чтобы выбрать размер из расширенного списка.
   * В колонке **Параметры** выберите значение *Включено* для параметра **Ускоренная сеть**, как показано на следующем рисунке.
     
       ![Параметры](./media/virtual-network-accelerated-networking-portal/image3.png)
     
     > [!NOTE]
     > Параметр "Ускоренная сеть" будет отображаться, только если вы:
     > 
     > * используете предварительную версию;
     > * выбрали поддерживаемую операционную систему, расположение и размер виртуальной машины, указанные в разделе "Ограничения" этой статьи.
     > 
     > 
4. После создания виртуальной машины скачайте [драйвер повышения производительности сети](https://gallery.technet.microsoft.com/Azure-Accelerated-471b5d84), подключитесь к виртуальной машине, войдите в нее и запустите на ней программу установки драйвера.
5. Щелкните правой кнопкой мыши кнопку Windows и выберите **Диспетчер устройств**. Убедитесь, что в списке **сетевых адаптеров**, который нужно развернуть, есть виртуальный адаптер **Mellanox ConnectX-3 Virtual Function Ethernet Adapter**, как показано на следующем рисунке.
   
    ![Диспетчер устройств](./media/virtual-network-accelerated-networking-portal/image2.png)




<!--HONumber=Nov16_HO3-->


