---
title: "Добавление или удаление сетевых интерфейсов виртуальных машин Azure | Документация Майкрософт"
description: "Узнайте, как добавлять и удалять сетевые интерфейсы (сетевые карты) виртуальных машин."
services: virtual-network
documentationcenter: na
author: jimdial
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 
ms.service: virtual-network
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 05/04/2017
ms.author: jdial
ms.translationtype: Human Translation
ms.sourcegitcommit: afa23b1395b8275e72048bd47fffcf38f9dcd334
ms.openlocfilehash: 0d609b20040572e3fb371a277603109d64a0ba37
ms.contentlocale: ru-ru
ms.lasthandoff: 05/12/2017


---

# <a name="add-network-interfaces-to-or-remove-from-virtual-machines"></a>Добавление или удаление сетевых интерфейсов виртуальных машин

Узнайте, как добавить существующий сетевой интерфейс (сетевую карту) при создании виртуальной машины, а также как добавить или удалить сетевые карты существующей виртуальной машины, которая остановлена (освобождена). Сетевая карта позволяет виртуальной машине Azure взаимодействовать с Интернетом, Azure и локальными ресурсами. У виртуальной машины может быть одна или несколько сетевых карт. 

Если необходимо добавить, изменить или удалить IP-адреса для сетевой карты, прочитайте статью [Добавление, изменение и удаление IP-адресов для сетевых интерфейсов Azure](virtual-network-network-interface-addresses.md). Если требуется создать, изменить или удалить сетевые карты, прочитайте статью [Сетевые интерфейсы](virtual-network-network-interface.md).

## <a name="before"></a>Перед началом работы

Перед выполнением действий, описанных в любом разделе этой статьи, выполните следующие задачи.

- Чтобы узнать, сколько сетевых карт поддерживает каждый из размеров виртуальных машин Linux и Windows, прочитайте статьи [Размеры виртуальных машин Linux в Azure](../virtual-machines/linux/sizes.md?toc=%2fazure%2fvirtual-network%2ftoc.json) и [Размеры виртуальных машин Windows в Azure](../virtual-machines/virtual-machines-windows-sizes.md?toc=%2fazure%2fvirtual-network%2ftoc.json).
- Войдите на портал Azure, в интерфейс командной строки Azure (CLI) или Azure PowerShell с помощью учетной записи Azure. Если у вас нет учетной записи Azure, зарегистрируйтесь для получения [бесплатной пробной учетной записи](https://azure.microsoft.com/free).
- Если для выполнения задач в этой статье вы используете команды PowerShell, установите и настройте Azure PowerShell, выполнив инструкции в статье [Установка и настройка служб Azure PowerShell](/powershell/azureps-cmdlets-docs?toc=%2fazure%2fvirtual-network%2ftoc.json). Убедитесь, что у вас установлена самая последняя версия командлетов Azure PowerShell. Для получения справки по командам PowerShell с примерами введите `get-help <command> -full`.
- Если для выполнения задач в этой статье вы используете команды интерфейса командной строки Azure, установите и настройте Azure CLI, выполнив инструкции в статье [Установка и настройка интерфейса командной строки Azure](/cli/azure/install-azure-cli?toc=%2fazure%2fvirtual-network%2ftoc.json). Убедитесь, что у вас установлена самая последняя версия Azure CLI. Для получения справки по командам интерфейса командной строки введите `az <command> --help`.

## <a name="about"></a>О сетевых картах и виртуальных машинах

Можно добавить (подключить) существующую сетевую карту в виртуальную машину при создании этой виртуальной машины, если данная сетевая карта не подключена к другой виртуальной машине. Сетевую карту можно добавить в существующую виртуальную машину или удалить из нее (отключить), если эта виртуальная машина остановлена (освобождена). При создании виртуальной машины с помощью портала Azure автоматически создается сетевая карта с параметрами по умолчанию. На портале невозможно сделать следующее:

- Указать существующую сетевую карту для добавления при создании виртуальной машины.
- Создание виртуальной машины с несколькими сетевыми адаптерами
- Указать имя сетевой карты (портал создает ее с именем по умолчанию).

Чтобы создать сетевую карту или виртуальную машину с атрибутами, указанными выше, для которых нельзя использовать портал, можно применить Azure PowerShell или интерфейс командной строки. Прежде чем приступить к выполнению задач в следующих разделах, обратите внимание на следующие ограничения и поведение.

- Все размеры виртуальной машины поддерживают по крайней мере две сетевые карты, но некоторые размеры поддерживают более двух сетевых карт. В прошлом некоторые размеры виртуальной машины поддерживали только одну сетевую карту. Чтобы узнать, сколько сетевых карт поддерживается каждым из размеров виртуальной машины, ознакомьтесь со статьями [Размеры виртуальных машин Linux в Azure](../virtual-machines/linux/sizes.md?toc=%2fazure%2fvirtual-network%2ftoc.json) и [Размеры виртуальных машин Windows в Azure](../virtual-machines/virtual-machines-windows-sizes.md?toc=%2fazure%2fvirtual-network%2ftoc.json). 
- В прошлом сетевые адаптеры можно было добавлять только к виртуальным машинам, которые поддерживали несколько сетевых адаптеров и были созданы с по крайней мере двумя сетевыми адаптерами. Сетевой адаптер нельзя было добавить к виртуальной машине, которая была создана с одним сетевым адаптером, даже если размер виртуальной машины поддерживал несколько сетевых адаптеров. И наоборот, сетевые карты можно было удалять только из виртуальной машины по крайней мере с тремя сетевыми картами, так как виртуальные машины, созданные по крайней мере с двумя сетевыми картами, всегда должны были иметь по крайней мере две сетевые карты. Ни одно из этих ограничений больше не действует. Теперь можно создать виртуальную машину с любым количеством сетевых карт (не превышающим поддерживаемое размером виртуальной машины), а затем добавлять и удалять любое количество сетевых карт (для этого виртуальные машины должны быть остановлены (освобождены)), но так, чтобы виртуальная машина всегда имела по крайней мере одну сетевую карту.
- По умолчанию первая сетевая карта в виртуальной машине определяется в качестве *основной*. Все остальные сетевые карты, подключенные к виртуальной машине, считаются *дополнительными*.
- Основным сетевым картам DHCP-серверами Azure назначается шлюз по умолчанию, а дополнительным сетевым картам — не назначается. Так как дополнительным сетевым картам не назначается шлюз по умолчанию, по умолчанию они не могут обмениваться данными с ресурсами вне своей подсети. Чтобы позволить дополнительным сетевым картам виртуальной машины Windows взаимодействовать с ресурсами за пределами подсети этих карт, добавьте соответствующие маршруты операционной системы, выполнив команду `route add` в командной строке Windows. Так как для виртуальных машин Linux по умолчанию используется слабая модель маршрутизации узлов, мы советуем ограничивать трафик дополнительных сетевых карт одной подсетью. Если для дополнительных сетевых карт требуется подключение вне подсети, включите маршрутизацию на основе политик, чтобы для входящего и исходящего трафика использовалась одна сетевая карта.
- По умолчанию весь исходящий трафик виртуальной машины отправляется с IP-адреса, назначенного основной IP-конфигурации основной сетевой карты. Вы можете контролировать IP-адрес, используемый для отправки исходящего трафика в операционной системе виртуальной машины, но по умолчанию этот трафик проходит через основную сетевую карту.
- В прошлом все виртуальные машины в одной группе доступности должны были иметь одну или несколько сетевых карт. Теперь в одной группе доступности могут находиться виртуальные машины с любым количеством сетевых карт (в пределах количества, поддерживаемого размером виртуальной машины). Виртуальную машину можно добавить в группу доступности только при ее создании. Чтобы узнать больше о группах доступности, прочитайте статью [Управление доступностью виртуальных машин Windows в Azure](../virtual-machines/windows/manage-availability.md?toc=%2fazure%2fvirtual-network%2ftoc.json#configure-multiple-virtual-machines-in-an-availability-set-for-redundancy).
- Хотя сетевые карты, подключенные к одной виртуальной машине, можно подключить к разным подсетям в виртуальной сети, все они должны быть подключены к одной виртуальной сети.
- Вы можете добавить любой IP-адрес для любой IP-конфигурации любой основной или дополнительной сетевой карты во внутренний балансировщик нагрузки Azure. Раньше во внутренний пул можно было добавить только основной IP-адрес для основной сетевой карты. Чтобы узнать больше об IP-адресах и IP-конфигурациях, прочитайте статью [Добавление, изменение и удаление IP-адресов для сетевых интерфейсов Azure](virtual-network-network-interface-addresses.md).
- При удалении виртуальной машины подключенные к ней сетевые карты не удаляются. Когда виртуальная машина удаляется, сетевые карты отключаются от нее. Вы можете добавить эти сетевые карты в другие виртуальные машины или удалить их.

## <a name="vm-create"></a>Добавление существующих сетевых карт в новую виртуальную машину
При создании виртуальной машины с помощью портала автоматически создается сетевая карта с параметрами по умолчанию, которая подключается к виртуальной машине. На портале Azure невозможно добавить существующие сетевые карты в новую виртуальную машину или создать виртуальную машину с несколькими сетевыми картами. Это можно сделать с помощью интерфейса командной строки или PowerShell. В виртуальную машину можно добавить любое количество сетевых карт, поддерживаемое размером создаваемой виртуальной машины. Дополнительные сведения об определении числа сетевых карт, поддерживаемых каждым из размеров виртуальной машины, см. в статьях [Размеры виртуальных машин Linux в Azure](../virtual-machines/linux/sizes.md?toc=%2fazure%2fvirtual-network%2ftoc.json) и [Размеры виртуальных машин Windows в Azure](../virtual-machines/virtual-machines-windows-sizes.md?toc=%2fazure%2fvirtual-network%2ftoc.json). В настоящее время сетевые карты, добавляемые в виртуальную машину, невозможно подключить к другой виртуальной машине. Чтобы узнать больше о создании сетевых карт, прочитайте статью [Сетевые интерфейсы](virtual-network-network-interface.md#create-nic).

**Команды**

|Средство|Команда|
|---|---|
|Интерфейс командной строки|[az vm create](/cli/azure/vm?toc=%2fazure%2fvirtual-network%2ftoc.json#create)|
|PowerShell|[New-AzureRmVM](/powershell/resourcemanager/azurerm.compute/v2.5.0/new-azurermvm?toc=%2fazure%2fvirtual-network%2ftoc.json)|

## <a name="vm-add-nic"></a>Добавление существующих сетевых карт в имеющуюся виртуальную машину

В виртуальную машину можно добавить столько сетевых карт, сколько поддерживает ее размер. Чтобы узнать, сколько сетевых карт поддерживается каждым из размеров виртуальной машины, ознакомьтесь со статьями [Размеры виртуальных машин Linux в Azure](../virtual-machines/linux/sizes.md?toc=%2fazure%2fvirtual-network%2ftoc.json) и [Размеры виртуальных машин Windows в Azure](../virtual-machines/virtual-machines-windows-sizes.md?toc=%2fazure%2fvirtual-network%2ftoc.json). Виртуальная машина, в которую нужно добавить сетевую карту, должна поддерживать использование нескольких сетевых карт и должна быть остановлена (освобождена). В настоящее время сетевые карты, добавляемые в одну виртуальную машину, невозможно подключить к другой виртуальной машине. Невозможно добавить сетевые карты в существующую виртуальную машину с помощью портала Azure. Для этого необходимо использовать интерфейс командной строки или PowerShell.

|Средство|Команда|
|---|---|
|Интерфейс командной строки|[az vm nic add](/cli/azure/vm/nic?toc=%2fazure%2fvirtual-network%2ftoc.json#add)|
|PowerShell|[Add-AzureRmVMNetworkInterface](/powershell/resourcemanager/azurerm.compute/v2.5.0/add-azurermvmnetworkinterface?toc=%2fazure%2fvirtual-network%2ftoc.json)|

## <a name="vm-view-nic"></a>Просмотр сетевых карт виртуальной машины

Можно просмотреть сетевые карты, подключенные к виртуальной машине, чтобы изучить конфигурацию каждой из них, а также назначенные им IP-адреса. 

1. Войдите на [портал Azure](https://portal.azure.com) с помощью учетной записи, которой назначены роли "Владелец", "Участник" или "Участник сети" для подписки. Сведения о назначении ролей учетным записям см. в статье [Встроенные роли для управления доступом на основе ролей в Azure](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor).
2. В верхней части портала Azure в поле с текстом *Поиск ресурсов* введите *виртуальные машины*. Когда **виртуальные машины** появятся в результатах поиска, щелкните их.
3. В появившейся колонке **Виртуальные машины** щелкните имя виртуальной машины, для которой требуется просмотреть сетевые карты.
4. В разделе **Параметры** колонки "Виртуальная машина", которая отобразилась для выбранной виртуальной машины, щелкните **Сетевые интерфейсы**. Чтобы узнать о параметрах сетевых карт и их изменении, прочитайте статью [Сетевые интерфейсы](virtual-network-network-interface.md). Чтобы узнать о добавлении, изменении и удалении IP-адресов, назначенных сетевой карте, прочитайте статью [Добавление, изменение и удаление IP-адресов для сетевых интерфейсов Azure](virtual-network-network-interface-addresses.md).

**Команды**

|Средство|Команда|
|---|---|
|Интерфейс командной строки|[az vm show](/cli/azure/vm?toc=%2fazure%2fvirtual-network%2ftoc.json#show)|
|PowerShell|[Get-AzureRmVM](/powershell/resourcemanager/azurerm.compute/v1.3.4/get-azurermvm?toc=%2fazure%2fvirtual-network%2ftoc.json)|

## <a name="vm-remove-nic"></a> Удаление сетевых карт из виртуальной машины

Виртуальная машина, из которой следует удалить сетевую карту, должна быть остановлена (освобождена) и к ней должны быть подключены по крайней мере две сетевые карты. Вы можете удалить любую сетевую карту, но к виртуальной машине всегда должна быть подключена по крайней мере одна сетевая карта. При удалении основной сетевой карты Azure назначает основной сетевую карту, которая была подключена к виртуальной машине дольше всего. Кроме того, любую сетевую карту можно самостоятельно указать в качестве основной. С помощью портала Azure невозможно удалить сетевые карты из виртуальной машины или назначить сетевую карту основной. Эти операции можно выполнить с помощью интерфейса командной строки или PowerShell. 

**Команды**

|Средство|Команда|
|---|---|
|Интерфейс командной строки|[az vm nic remove](/cli/azure/vm/nic?toc=%2fazure%2fvirtual-network%2ftoc.json#remove)|
|PowerShell|[Remove-AzureRMVMNetworkInterface](/powershell/resourcemanager/azurerm.compute/v2.5.0/remove-azurermvmnetworkinterface?toc=%2fazure%2fvirtual-network%2ftoc.json)|

## <a name="next-steps"></a>Дальнейшие действия
Чтобы создать виртуальную машину с несколькими сетевыми картами или IP-адресами, прочитайте приведенные ниже статьи.

**Команды**

|Задача|Средство|
|---|---|
|Создание виртуальной машины с несколькими сетевыми адаптерами|[ИНТЕРФЕЙС КОМАНДНОЙ СТРОКИ](../virtual-machines/linux/multiple-nics.md?toc=%2fazure%2fvirtual-network%2ftoc.json)|
||[PowerShell](../virtual-machines/windows/multiple-nics.md?toc=%2fazure%2fvirtual-network%2ftoc.json)|
|Создание виртуальной машины с одной сетевой картой, которой назначено несколько IP-адресов|[ИНТЕРФЕЙС КОМАНДНОЙ СТРОКИ](virtual-network-multiple-ip-addresses-cli.md)|
||[PowerShell](virtual-network-multiple-ip-addresses-powershell.md)|

