<properties
   pageTitle="Защита базы данных в хранилище данных SQL | Microsoft Azure"
   description="Советы по защите базы данных в хранилище данных SQL для разработки решений."
   services="sql-data-warehouse"
   documentationCenter="NA"
   authors="sahaj08"
   manager="barbkess"
   editor=""/>

<tags
   ms.service="sql-data-warehouse"
   ms.devlang="NA"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="data-services"
   ms.date="06/22/2015"
   ms.author="sahajs"/>

# Защита базы данных в хранилище данных SQL

В этой статье рассматриваются основы защиты базы данных в хранилище данных SQL. В частности, эта статья содержит инструкции по началу работу с ресурсами для ограничения доступа, защиты данных и мониторинга действий с базой данных.

## Безопасность подключения

Под безопасностью подключения подразумеваются способы ограничения и защиты подключений к базе данных с помощью правил брандмауэра и шифрования подключения.

Правила брандмауэра используются как сервером, так и базой данных для отклонения попыток подключиться с IP-адресов, которые не были явно включены в белый список. Чтобы разрешить подключение к новой базе данных из вашего приложения или с клиентского компьютера с общедоступным IP-адресом, сначала необходимо создать правило брандмауэра уровня сервера. Для этого воспользуйтесь порталом управления Azure, API REST или PowerShell. В брандмауэре сервера рекомендуется максимально ограничить диапазоны разрешенных IP-адресов. Дополнительные сведения см. в статье [Брандмауэр базы данных SQL Azure][].


## Аутентификация

В процессе аутентификации предлагается подтвердить личность пользователя при подключении к базе данных. Хранилище данных SQL в настоящее время поддерживает аутентификацию SQL с использованием имени пользователя и пароля.

При создании логического сервера для базы данных вы указали имя для входа "Администратор сервера" и пароль. Используя эти учетные данные, можно выполнить проверку подлинности для любой базы данных на этом сервере в качестве владельца базы данных (или "dbo").

Однако в организации рекомендуется использовать другую учетную запись для аутентификации пользователей. Это позволит ограничить разрешения, предоставленные приложению, и снизить риски вредоносных действий, если код приложения уязвим для атак путем внедрения кода SQL. Рекомендуется создать пользователя автономной базы данных. Это позволит приложению выполнять аутентификацию непосредственно в отдельной базе данных с помощью имени пользователя и пароля. Чтобы создать пользователя автономной базы данных, можно выполнить следующий T-SQL при подключении к базе данных пользователя с указанным именем администратора сервера для входа:

```
CREATE USER ApplicationUser WITH PASSWORD = 'strong_password';
```

Дополнительные сведения о проверке подлинности в базе данных SQL см. в статье [Управление базами данных и именами пользователей в базе данных SQL Azure][].


## Авторизация

Авторизация подразумевает набор действий, которые можно выполнять в базе данных хранилища SQL Azure. Этот набор действий определяют разрешения учетной записи пользователя и присвоенные ей роли. Обычно пользователям рекомендуется предоставлять наименьшие необходимые привилегии. Хранилищем данных SQL Azure можно легко управлять с использованием ролей в T-SQL.

```
ALTER ROLE db_datareader ADD MEMBER ApplicationUser; -- allows ApplicationUser to read data
ALTER ROLE db_datawriter ADD MEMBER ApplicationUser; -- allows ApplicationUser to write data
```

Учетной записи администратора сервера, которая используется для подключения, присвоена роль db_owner, обладатель которой может выполнять любые действия в базе данных. Сохраните эту учетную запись для развертывания обновлений схемы и выполнения других действий по управлению. Для подключения к базе данных из приложения с использованием наименьших привилегий, необходимых приложению, используйте учетную запись "ApplicationUser" с более ограниченными разрешениями.

Вы можете ограничить действия пользователя в базе данных SQL Azure несколькими способами. Кроме db_datareader и db_datawriter вы можете использовать и другие [роли базы данных][], чтобы создавать учетные записи приложений с большими правами или учетные записи управления с меньшими правами. [Разрешения][] позволяют контролировать, какие операции можно выполнять в отдельных столбцах, таблицах, представлениях, процедурах и других объектах в базе данных. [Хранимые процедуры][] можно использовать для ограничения действий, которые могут быть выполнены в базе данных.

Управление базами данных и логическими серверами на портале управления Azure или с помощью API-интерфейса диспетчера ресурсов Azure контролируется путем назначения ролей для учетной записи пользователя портала. Дополнительные сведения об этой теме см. в статье [Контроль доступа на основе ролей в предварительной версии портала Azure][].


## Дальнейшие действия
Дополнительные советы по разработке см. в статье [Общие сведения о разработке][].

<!--Image references-->

<!--Article references-->
[Общие сведения о разработке]: sql-data-warehouse-overview-develop.md


<!--MSDN references-->
[Брандмауэр базы данных SQL Azure]: https://msdn.microsoft.com/library/ee621782.aspx
[роли базы данных]: https://msdn.microsoft.com/library/ms189121.aspx
[Управление базами данных и именами пользователей в базе данных SQL Azure]: https://msdn.microsoft.com/library/ee336235.aspx
[Разрешения]: https://msdn.microsoft.com/library/ms191291.aspx
[Хранимые процедуры]: https://msdn.microsoft.com/library/ms190782.aspx
[Transparent Data Encryption]: http://go.microsoft.com/fwlink/?linkid=526242&clcid=0x409

<!--Other Web references-->
[Контроль доступа на основе ролей в предварительной версии портала Azure]: http://azure.microsoft.com/documentation/articles/role-based-access-control-configure.aspx

<!---HONumber=July15_HO3-->