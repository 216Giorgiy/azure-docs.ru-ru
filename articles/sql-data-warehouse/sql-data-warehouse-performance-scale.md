<properties
   pageTitle="Эластичная производительность и масштабирование в хранилище данных SQL | Microsoft Azure"
   description="Сведения о том, как использовать эластичность хранилища данных SQL для увеличения и уменьшения количества вычислительных ресурсов. Статья содержит примеры кода."
   services="sql-data-warehouse"
   documentationCenter="NA"
   authors="TwoUnder"
   manager="barbkess"
   editor=""/>

<tags
   ms.service="sql-data-warehouse"
   ms.devlang="NA"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="data-services"
   ms.date="09/22/2015"
   ms.author="nicw;JRJ@BigBangData.co.uk;mausher"/>

# Эластичная производительность и масштабирование в хранилище данных SQL
Для эластичного увеличения или уменьшения вычислительной мощности вам нужно лишь назначить хранилищу данных SQL другое количество единиц использования хранилища данных (DWU). Единицы использования хранилища данных — это новая концепция в рамках хранилища данных SQL, которая позволяет управлять этим решением с легкостью и эффективностью. Эта статья содержит основные сведения о единицах DWU. Здесь объясняется, как с их помощью можно эластично масштабировать вычислительную мощность, и приведены основные рекомендации по определению нужного количества DWU для вашей среды.

## Что представляют собой единицы использования хранилища данных
Корпорация Майкрософт, не афишируя этого, проводит различные тесты производительности. С их помощью она определяет, какое количество оборудования и какая конфигурация позволят предложить рынку конкурентоспособные решения. Увеличение и уменьшение вычислительной мощности можно измерять в блоках, насчитывающих 100 DWU (не все варианты кратны 100).

## Сколько DWU нужно использовать
Мы не советуем изначально ориентироваться на определенное количество DWU, хотя для определенной категории клиентов такой способ и является совершенно приемлем. Вместо этого лучше подойти к вопросу с точки зрения практичности. Производительность в хранилище данных SQL масштабируется линейно, и переход с одного уровня производительности к другому (например, с 100 DWU к 2000) происходит в считанные секунды. Это дает возможность опробовать и определить лучший вариант для вашего сценария.

1. Если хранилище данных только создается, начните с небольшого количества DWU.
2. Отслеживайте производительность приложения, сравнивая ее с количеством выбранных DWU.
3. Определите, насколько выше или ниже должна быть производительность, которая оптимально соответствует требуемому вам уровню (учитывайте линейное масштабирование). 
4. Увеличьте или уменьшите количество выбранных DWU. Служба отреагирует незамедлительно и изменит количество вычислительных ресурсов в соответствии с вашими потребностями.
5. Вносите изменения, пока не достигнете уровня производительности, который оптимально отвечает вашим бизнес-требованиям.

Если рабочая нагрузка вашего приложения постоянно меняется, вы можете повышать и понижать производительность в соответствии с пиковыми и самыми низкими нагрузками. Например, если пиковый уровень нагрузки приходится на конец месяца, вы можете запланировать добавление DWU в пиковые дни и уменьшение производительности в конце этого периода.
 
## Повышение и понижение объема вычислительных ресурсов
Эластичность хранилища данных SQL не зависит от облачного хранилища. Вы можете повышать и понижать вычислительную мощность, а также приостанавливать вычислительную работу с помощью обычного ползунка изменения уровня производительности (количества DWU). Это дает вам необходимую гибкость в выборе вычислительной мощности, которая соответствует потребностям вашего бизнеса.

Чтобы повысить вычислительную мощность, можно добавить службе дополнительные DWU, используя ползунок масштабирования на портале Azure. Кроме того, можно добавить DWU через T-SQL, REST API или командлеты Powershell. Изменение уровня производительности (масштабирование как в сторону увеличения, так и в сторону понижения) приводит к отмене всех запущенных и поставленных в очередь действий. Но уже через несколько секунд вы сможете возобновить работу вычислительных ресурсов с уже повышенной или пониженной мощностью.

На [портале Azure][] щелкните значок "Масштаб" в верхней части страницы хранилища данных SQL, а затем с помощью ползунка увеличьте или уменьшите количество DWU, применяемых к хранилищу данных, и нажмите кнопку "Сохранить". Если вы предпочитаете изменять масштаб программно, ниже приведен пример кода T-SQL, который изменяет распределение единиц DWU в хранилище данных SQL.

```
ALTER DATABASE MySQLDW 
MODIFY (SERVICE_OBJECTIVE = 'DW1000')
;
```
Обратите внимание, что T-SQL должен быть запущен для логического сервера, а не для самого экземпляра хранилища данных SQL.

Тот же результат можно получить и с помощью Powershell, используя приведенный ниже код.

```
Set-AzureSQLDatabase -DatabaseName "MySQLDW" -ServerName "MyServer.database.windows.net" -ServiceObjective "DW1000"
```

## Приостановка работы вычислительных ресурсов
Хранилище данных SQL обладает уникальной возможностью приостанавливать и возобновлять вычисления, когда это необходимо. Если группа не планирует использовать экземпляр хранилища данных в течение какого-то времени (например, по ночам, на выходных, в праздники или по любой другой причине), экземпляр хранилища данных можно приостановить на это время, а потом продолжить с того места, на котором остановились.

Приостановка вычислений возвращает ваши вычислительные ресурсы обратно в пул доступных ресурсов в центре обработки данных, а возобновление — извлекает ресурсы (в соответствии с количеством DWU) и назначает их экземпляру хранилища данных SQL.

Приостановку и возобновление вычислений можно выполнить на [портале Azure][] с помощью Powershell или интерфейсов REST API. Приостановка работы вычислительных ресурсов отменяет все запущенные и поставленные в очередь действия. Вернувшись, вы можете возобновить их работу в считанные секунды.

Приведенный ниже пример код демонстрирует, как выполнять приостановку с помощью PowerShell.

```
Suspend-AzureSqlDatabase –ResourceGroupName "ResourceGroup11" –ServerName
"Server01" –DatabaseName "Database02"
```

Возобновить вычисления с помощью PowerShell тоже очень просто.

```
Resume-AzureSqlDatabase –ResourceGroupName "ResourceGroup11" –ServerName "Server01" –DatabaseName "Database02"
```

Дополнительные сведения об использовании PowerShell см. в статье [Введение в командлеты PowerShell][].

> [Azure.Note]Так как хранилище ни в чем не зависит от вычислительных ресурсов, то приостановка нисколько его не затрагивает.

## Дальнейшие действия
Общие сведения о производительности см. в статье [Общие сведения о производительности][].

<!--Image references-->

<!--Article references-->
[Общие сведения о производительности]: sql-data-warehouse-overview-performance.md
[Введение в командлеты PowerShell]: sql-data-warehouse-get-started-powershell-cmdlets.md

<!--MSDN references-->


<!--Other Web references-->

[портале Azure]: http://portal.azure.com/

<!---HONumber=Oct15_HO3-->