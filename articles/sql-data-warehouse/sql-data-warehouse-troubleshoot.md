<properties
   pageTitle="Устранение неполадок хранилища данных SQL Azure | Microsoft Azure"
   description="Диагностика и устранение неполадок хранилища данных SQL Azure."
   services="sql-data-warehouse"
   documentationCenter="NA"
   authors="sonyam"
   manager="barbkess"
   editor=""/>

<tags
   ms.service="sql-data-warehouse"
   ms.devlang="NA"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="data-services"
   ms.date="07/18/2016"
   ms.author="sonyama;barbkess"/>

# Устранение неполадок хранилища данных SQL Azure

В этом разделе рассмотрены общие вопросы наших клиентов об устранении неполадок.

## Подключение

| Проблема | Способы устранения: |
| :----------------------------------| :---------------------------------------------- |
| Ошибка CTAIP | Эта ошибка может возникнуть, когда имя для входа создано в базе данных master SQL Server, но не создано в базе данных хранилища данных SQL. Если возникла эта ошибка, ознакомьтесь со статьей с [общими сведениями о безопасности][]. В этой статье объясняется, как создать имя для входа в базе данных master, а затем создать пользователя в базе данных хранилища данных SQL.|
| Заблокировано брандмауэром |Базы данных SQL Azure защищены брандмауэрами на уровне сервера и базы данных. Это гарантирует, что доступ к базам данных возможен только с известных IP-адресов. Брандмауэры являются безопасными по умолчанию. Это означает, что перед подключением необходимо прямо разрешить доступ для IP-адреса или диапазона IP-адресов. Чтобы настроить брандмауэр для предоставления доступа, выполните указания в разделе о [настройке доступа брандмауэра сервера к IP-адресу клиента][] на странице, содержащей [указания по подготовке][].|
| Не удается подключиться с помощью средства или драйвера | В хранилище данных SQL для запроса данных рекомендуется использовать [Visual Studio 2013 или Visual Studio 2015][]. Для подключения клиентов рекомендуется использовать [собственный клиент SQL Server 10 или SQL Server 11 (ODBC)][].|


## Средства

| Проблема | Способы устранения: |
| :----------------------------------| :---------------------------------------------- |
| В обозревателе объектов Visual Studio отсутствуют пользователи AAD | Это известная проблема. В качестве обходного пути можно просмотреть сведения о пользователях в файле [sys.database\_principals][]. Дополнительные сведения об использовании Azure Active Directory с хранилищем данных SQL см. в статье [Аутентификация в хранилище данных SQL Azure][].|

## Производительность

| Проблема | Способы устранения: |
| :----------------------------------| :---------------------------------------------- |
| Устранение проблем с производительностью запросов | Если вы пытаетесь устранить проблему конкретного запроса, для начала ознакомьтесь со статьей, [посвященной мониторингу запросов][].|
| Низкая производительность и неправильные планы запросов в результате отсутствия статистики | Самая распространенная причина низкой производительности — отсутствие статистики таблиц. Дополнительные сведения о создании статистики и о том, почему она очень важна для производительности, см. в статье об [управлении статистикой таблиц][Statistics].|
| Низкий уровень параллелизма и помещение запросов в очередь | Чтобы обеспечить выделение памяти с учетом параллелизма, важно понимать принципы [управления рабочими нагрузками][].|
| Реализация рекомендаций | Лучше всего начать изучение способов повышения производительности запросов со статьи [Рекомендации по использованию хранилища данных SQL Azure][].|
| Повышение производительности за счет масштабирования | Иногда повысить производительность запросов позволяет простое увеличение вычислительной мощности, выделяемой для выполнения запросов, за счет [масштабирования хранилища данных SQL][].|
| Низкая производительность запросов как результат низкого качества индексов | Иногда выполнение запросов может замедляться из-за [низкого качества индекса Columnstore][]. Дополнительные сведения см. в статье об индексировании таблиц в разделе о [повторном создании индексов для повышения качества сегментов][].|

## Управление системой

| Проблема | Способы устранения: |
| :----------------------------------| :---------------------------------------------- |
| Msg 40847: не удалось выполнить операцию, так как сервер превысил допустимую квоту в 45 000 DTU. | Либо уменьшите значение [DWU][] создаваемой базы данных, либо [запросите увеличение квоты][].|
| Анализ использования пространства | Сведения об использовании пространства в системе см. в разделе о [размерах таблиц][].|
| Справка по управлению таблицами | Справочную информацию об управлении таблицами см. в статье, содержащей [общие сведения о таблицах][Overview]. Эта статья также включает в себя ссылки на разделы с более подробными сведениями о [типах данных таблиц][Data types], [распределении][Distribute], [индексировании][Index] и [секционировании таблицы][Partition], а также сведениями об [управлении статистикой таблиц][Statistics] и о [временных таблицах][Temporary].|

## PolyBase

| Проблема | Способы устранения: |
| :----------------------------------| :---------------------------------------------- |
| Ошибка UTF-8 | В настоящее время PolyBase поддерживает загрузку файлов данных только с кодировкой UTF-8. Рекомендации о том, как обойти это ограничение, см. в разделе [Обход требования PolyBase UTF-8][].|
| Ошибка загрузки из-за большого размера строк | В настоящее время для Polybase не поддерживаются строки большого размера. Таким образом, если ваша таблица содержит данные типа VARCHAR(MAX), NVARCHAR(MAX) или VARBINARY(MAX), для их загрузки нельзя использовать внешние таблицы. Строки больших размеров можно загружать только с помощью фабрики данных Azure (с использованием BCP), Azure Stream Analytics, служб SSIS, программы BCP или класса .NET SQLBulkCopy. Поддержка строк большого размера для PolyBase будет добавлена в будущем выпуске.|
| Ошибка загрузки таблицы с типом данных MAX с использованием BCP | Это известная проблема. Для ее решения в некоторых сценариях нужно поместить данные VARCHAR(MAX), NVARCHAR(MAX) или VARBINARY(MAX) в конец таблицы. Попытайтесь переместить столбцы с типом данных MAX в конец таблицы.|

## Отличия от базы данных SQL

| Проблема | Способы устранения: |
| :----------------------------------| :---------------------------------------------- |
| Неподдерживаемые функции базы данных SQL | Ознакомьтесь с разделом [Неподдерживаемые функции таблиц][].|
| Неподдерживаемые типы данных базы данных SQL | Ознакомьтесь с разделом [Неподдерживаемые типы данных][].|
| Ограничения относительно инструкций DELETE и UPDATE | Ознакомьтесь с обходных решениях для инструкций [UPDATE][] и [DELETE][], а также с [использованием инструкции CTAS для обхода неподдерживаемого синтаксиса UPDATE и DELETE][]. |
| Инструкция MERGE не поддерживается | Ознакомьтесь с [обходными решениями для инструкции MERGE][].|
| Ограничения хранимых процедур | Ознакомьтесь с [ограничениями хранимых процедур][].|
| Определяемые пользователем функции не поддерживают инструкции SELECT | Это текущее ограничение определяемых пользователем функций. Сведения о поддерживаемом синтаксисе см. в разделе документации об инструкции [CREATE FUNCTION][]. |
'<--LocComment: страница не найдена, раздел "Ограничения хранимых процедур" поврежден. Я попыталась исправить ссылку в справочных материалах к статье -->'

## Дальнейшие действия

Если не удалось найти решение для приведенной выше проблемы, то можно ознакомиться со следующими ресурсами, которые могут помочь.

- [Блоги]
- [Запросы функций]
- [Видеоролики]
- [Блоги группы CAT]
- [Создание запроса в службу поддержки]
- [Форум MSDN]
- [Форум Stack Overflow]
- [Twitter]

<!--Image references-->

<!--Article references-->
[общими сведениями о безопасности]: ./sql-data-warehouse-overview-manage-security.md
[Создание запроса в службу поддержки]: ./sql-data-warehouse-get-started-create-support-ticket.md
[масштабирования хранилища данных SQL]: ./sql-data-warehouse-manage-compute-overview.md
[DWU]: ./sql-data-warehouse-overview-what-is.md#data-warehouse-units
[запросите увеличение квоты]: ./sql-data-warehouse-get-started-create-support-ticket.md#request-quota-change
[посвященной мониторингу запросов]: ./sql-data-warehouse-manage-monitor.md
[указания по подготовке]: ./sql-data-warehouse-get-started-provision.md
[настройке доступа брандмауэра сервера к IP-адресу клиента]: ./sql-data-warehouse-get-started-provision.md#create-a-new-azure-sql-server-level-firewall
[Visual Studio 2013 или Visual Studio 2015]: ./sql-data-warehouse-get-started-connect.md
[Рекомендации по использованию хранилища данных SQL Azure]: ./sql-data-warehouse-best-practices.md
[размерах таблиц]: ./sql-data-warehouse-tables-overview.md#table-size-queries
[Неподдерживаемые функции таблиц]: ./sql-data-warehouse-tables-overview.md#unsupported-table-features
[Неподдерживаемые типы данных]: ./sql-data-warehouse-tables-data-types.md#unsupported-data-types
[Overview]: ./sql-data-warehouse-tables-overview.md
[Data types]: ./sql-data-warehouse-tables-data-types.md
[Distribute]: ./sql-data-warehouse-tables-distribute.md
[Index]: ./sql-data-warehouse-tables-index.md
[Partition]: ./sql-data-warehouse-tables-partition.md
[Statistics]: ./sql-data-warehouse-tables-statistics.md
[Temporary]: ./sql-data-warehouse-tables-temporary.md
[низкого качества индекса Columnstore]: ./sql-data-warehouse-tables-index.md#causes-of-poor-columnstore-index-quality
[повторном создании индексов для повышения качества сегментов]: ./sql-data-warehouse-tables-index.md#rebuilding-indexes-to-improve-segment-quality
[управления рабочими нагрузками]: ./sql-data-warehouse-develop-concurrency.md
[использованием инструкции CTAS для обхода неподдерживаемого синтаксиса UPDATE и DELETE]: ./sql-data-warehouse-develop-ctas.md#using-ctas-to-work-around-unsupported-features
[UPDATE]: ./sql-data-warehouse-develop-ctas.md#ansi-join-replacement-for-update-statements
[DELETE]: ./sql-data-warehouse-develop-ctas.md#ansi-join-replacement-for-delete-statements
[обходными решениями для инструкции MERGE]: ./sql-data-warehouse-develop-ctas.md#replace-merge-statements
[ограничениями хранимых процедур]: /sql-data-warehouse-develop-stored-procedures.md#limitations
[Аутентификация в хранилище данных SQL Azure]: ./sql-data-warehouse-authentication.md
[Обход требования PolyBase UTF-8]: ./sql-data-warehouse-load-polybase-guide.md#working-around-the-polybase-utf-8-requirement

<!--MSDN references-->
[собственный клиент SQL Server 10 или SQL Server 11 (ODBC)]: https://msdn.microsoft.com/library/ms131415.aspx
[sys.database\_principals]: https://msdn.microsoft.com/library/ms187328.aspx
[CREATE FUNCTION]: https://msdn.microsoft.com/library/mt203952.aspx

<!--Other Web references-->
[Блоги]: https://azure.microsoft.com/blog/tag/azure-sql-data-warehouse/
[Блоги группы CAT]: https://blogs.msdn.microsoft.com/sqlcat/tag/sql-dw/
[Запросы функций]: https://feedback.azure.com/forums/307516-sql-data-warehouse
[Форум MSDN]: https://social.msdn.microsoft.com/Forums/ru-RU/home?forum=AzureSQLDataWarehouse
[Форум Stack Overflow]: http://stackoverflow.com/questions/tagged/azure-sqldw
[Twitter]: https://twitter.com/hashtag/SQLDW
[Видеоролики]: https://azure.microsoft.com/documentation/videos/index/?services=sql-data-warehouse

<!---HONumber=AcomDC_0720_2016-->