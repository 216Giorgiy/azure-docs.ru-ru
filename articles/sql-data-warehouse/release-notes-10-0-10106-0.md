---
title: Заметки о выпуске для Хранилища данных SQL Azure | Документация Майкрософт
description: Заметки о выпуске для хранилища данных SQL Azure.
services: sql-data-warehouse
ms.service: sql-data-warehouse
ms.topic: conceptual
ms.subservice: manage
ms.date: 03/27/2019
author: anumjs
ms.author: anjangsh
ms.reviewer: jrasnick
manager: craigg
ms.openlocfilehash: ae9f2cbdd659b7eaf3558717be19f324e803d906
ms.sourcegitcommit: 6da4959d3a1ffcd8a781b709578668471ec6bf1b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2019
ms.locfileid: "58522338"
---
# <a name="azure-sql-data-warehouse-release-notes"></a>Заметки о выпуске для Хранилища данных SQL Azure

В этой статье перечислены новые функции и улучшения в последних выпусках [Хранилища данных SQL Azure](sql-data-warehouse-overview-what-is.md). В ней также указаны важные обновления содержимого, которые непосредственно не связанные с выпуском, но опубликованы в тот же интервал времени. Усовершенствования к другим службам Azure, см. в разделе [обновления службы](https://azure.microsoft.com/updates).

## <a name="march-2019"></a>Марта 2019 г.

| Улучшения службы | Сведения |
| --- | --- |
|**Важность рабочих нагрузок, теперь доступна для предварительного просмотра**|Важность рабочих нагрузок позволяет инженерам данных использовать важности для классификации запросов. Запросы с высокой важностью обеспечивается более быстрый доступ к ресурсам, что помогает в соответствии с соглашениями об уровне обслуживания.  Важность рабочих нагрузок позволяет работать значение особо важным для бизнеса в соответствии с соглашениями об уровне обслуживания в общей среде с меньшим объемом ресурсов.<br/><br/>Дополнительные сведения о важности рабочей нагрузки, см. в разделе [классификации](sql-data-warehouse-workload-classification.md) и [важности](sql-data-warehouse-workload-importance.md) обзорные статьи в документации. Ознакомьтесь с [СОЗДАНИЯ КЛАССИФИКАТОРА рабочей НАГРУЗКИ](/sql/t-sql/statements/create-workload-classifier-transact-sql?view=azure-sqldw-latest) также doc.<br/><br/>Важность рабочих нагрузок в действии см. в разделе ниже видео:<br/>[Основные понятия управления рабочей нагрузки](  https://www.youtube.com/embed/QcCRBAhoXpM)<br/>[Сценарии управления рабочей нагрузкой](https://www.youtube.com/embed/_2rLMljOjw8)|
|**GROUP BY ROLLUP**|Теперь оператор ROLLUP является поддерживаемый параметр GROUP BY в хранилище данных.   GROUP BY ROLLUP создает группу для каждого сочетания выражений столбцов. GROUP BY также «сведение» результатов в промежуточные и общие итоги. Чтобы сделать это, перемещается справа налево, уменьшая количество выражений столбцов, по которым он создает группы и агрегаты.  Порядок столбцов влияет на выходные данные ROLLUP и может повлиять на количество строк в результирующем наборе.<br/><br/>Дополнительные сведения о GROUP BY ROLLUP, см. в статье [GROUP BY (Transact-SQL)](/sql/t-sql/queries/select-group-by-transact-sql?view=azure-sqldw-latest)
|**Повышенная точность использовано DWU и метрик портала ЦП**|Хранилище данных SQL значительно повышает точность метрик на портале Azure.  Этот выпуск содержит исправления для определений метрик ЦП и использовано DWU для правильного отражения рабочей нагрузки на всех вычислительных узлах.|
|**Поддержка дополнительных T-SQL**|Контактную зону языка T-SQL для хранилища данных SQL была расширена для поддержки:<br/>&bull; &nbsp; [FORMAT (Transact-SQL)](/sql/t-sql/functions/format-transact-sql)<br/>&bull; &nbsp;    [STRING_ESCAPE (Transact-SQL)](/sql/t-sql/functions/string-escape-transact-sql)<br/>&bull; &nbsp; [STRING_SPLIT (Transact-SQL)](/sql/t-sql/functions/string-split-transact-sql)<br/>&bull; &nbsp; [ПЕРЕВОД (Transact-SQL)](/sql/t-sql/functions/translate-transact-sql)<br/>&bull; &nbsp; [TRIM (Transact-SQL)](/sql/t-sql/functions/trim-transact-sql)
| | |

### <a name="documentation-improvements"></a>Улучшения документации

| Улучшения документации | Сведения |
| --- | --- |
|Новые документы управления рабочими нагрузками |Дополнительные сведения см. в разделе [важности](sql-data-warehouse-workload-importance.md) и [классификации](sql-data-warehouse-workload-classification.md). |
| | |

## <a name="january-2019"></a>Январь 2019 г.

### <a name="service-improvements"></a>Улучшения службы

| Улучшения службы | Сведения |
| --- | --- |
|**Оптимизация возврата результатов запросов по порядку**|В этом выпуске повышается производительность запросов SELECT...ORDER BY.   Теперь все вычислительные узлы отправляют свои результаты на один вычислительный узел, который объединяет и сортирует результаты, которые возвращаются пользователю через вычислительный узел.  Объединение через один вычислительный узел обеспечивает прирост производительности, если результирующий набор запросов содержит большое количество строк. Ранее подсистема выполнения запросов упорядочивала результаты на каждом вычислительном узле и передавала их потоком на управляющий узел, где результаты объединялись.|
|**Усовершенствования перемещения данных для PartitionMove и BroadcastMove**|В Хранилище данных SQL Azure 2-го поколения действия перемещения данных типа ShuffleMove используют методики мгновенного перемещения данных, описанные в блоге по улучшениям производительности [здесь](https://azure.microsoft.com/blog/lightning-fast-query-performance-with-azure-sql-data-warehouse/). В этом выпуске типы перемещения данных PartitionMove и BroadcastMove теперь основаны на тех же методах мгновенного перемещения данных. Запросы пользователей, которые используют эти типы действий перемещения данных, будут выполняться с повышенной производительностью. Чтобы воспользоваться преимуществами улучшений производительности, не нужно вносить изменения в код.|
|**Важные ошибки**|Неправильная версия хранилища данных SQL Azure — `SELECT @@VERSION` может возвращать неправильная версия 10.0.9999.0. Правильная версия текущего выпуска — 10.0.10106.0. Эта ошибка нам известна и находится на рассмотрении.
| | |

### <a name="documentation-improvements"></a>Улучшения документации

| Улучшения документации | Сведения |
| --- | --- |
|Нет | |
| | |

## <a name="december-2018"></a>Декабрь 2018 г.

### <a name="service-improvements"></a>Улучшения службы

| Улучшения службы | Сведения |
| --- | --- |
|**Обычно доступных конечных точек службы виртуальной сети**|Этот выпуск включает общедоступную версию конечных точек службы виртуальной сети для Хранилища данных SQL Azure во всех регионах Azure. Конечные точки виртуальной сети позволяют изолировать подключение к логическому серверу из заданной подсети или набора подсетей в виртуальной сети. Трафик, поступающий из виртуальной сети в Хранилище данных SQL Azure, всегда остается в магистральной сети Azure. Этот прямой маршрут предпочтительнее, чем какие-либо специальные маршруты, предполагающие прием трафика из Интернета через виртуальные модули или локальные службы. Дополнительная плата за доступ к виртуальной сети через конечные точки службы не взимается. Текущая модель ценообразования для [Хранилища данных SQL Azure](https://azure.microsoft.com/pricing/details/sql-data-warehouse/gen2/) применяется без изменений.<br/><br/>В этом выпуске также реализовано подключение PolyBase к [Azure Data Lake Storage 2-го поколения](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-introduction) (ADLS) через драйвер [файловой системы больших двоичных объектов Azure](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-abfs-driver) (ABFS). Хранилище Azure Data Lake Storage 2-го поколения обладает всеми качествами, необходимыми для выполнения каждого из этапов жизненного цикла данных аналитики для службы хранилища Azure. В нем объединены возможности двух существующих служб хранилища Azure (хранилище BLOB-объектов Azure и ADLS 1-го поколения). Функции, описанные в статье [Документация по Azure Data Lake Storage Gen1](https://docs.microsoft.com/azure/data-lake-store/index), например семантика файловой системы, защита на уровне файлов и масштабирование, объединены с экономичностью, многоуровневостью, возможностями высокой доступности и аварийного восстановления [хранилища BLOB-объектов Azure](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction).<br/><br/>С помощью PolyBase также можно импортировать данные в Хранилище данных SQL Azure из хранилища Azure, закрепленного за вашей виртуальной сетью. Кроме того, PolyBase поддерживает экспорт данных из Хранилища данных SQL Azure в хранилище Azure, закрепленное за вашей виртуальной сетью.<br/><br/>Дополнительные сведения о конечных точках службы виртуальной сети в Хранилище данных SQL Azure см. в [записи блога](https://azure.microsoft.com/blog/general-availability-of-vnet-service-endpoints-for-azure-sql-data-warehouse/) или [документации](https://docs.microsoft.com/azure/sql-database/sql-database-vnet-service-endpoint-rule-overview?toc=/azure/sql-data-warehouse/toc.json).|
|**Автоматическое наблюдение (Предварительная версия)**|[Хранилище запросов](https://docs.microsoft.com/sql/relational-databases/performance/monitoring-performance-by-using-the-query-store?view=sql-server-2017) теперь доступно в предварительной версии для Хранилища данных SQL Azure. Хранилище запросов упрощает устранение проблем с производительностью запросов за счет отслеживания запросов, планов запросов, статистики среды выполнения и журнала запросов, с помощью которых можно выполнять мониторинг активности и производительности хранилища данных. Хранилище запросов — это набор внутренних хранилищ и динамических административных представлений (DMV), с помощью которых можно:<br/><br/>&bull; &nbsp; Выявление и настройка Топ-запросов использования ресурсов<br/>&bull; &nbsp; Определение и улучшение нерегламентированных рабочих нагрузок<br/>&bull; &nbsp; Оцените производительность запросов и влияние на план, изменения в статистические данные, индексы или размер системы (параметра DWU)<br/>&bull; &nbsp; Полный текст запроса для всех запросов, выполняемых см. в разделе<br/><br/>Хранилище запросов содержит три фактических хранилища:<br/>&bull; &nbsp; Хранилище планов для сохранения сведений о планах выполнения<br/>&bull; &nbsp; Хранилище статистики времени выполнения для сохранения сведений о статистике выполнения<br/>&bull; &nbsp; Хранилище статистики ожидания для сохранения информации статистики ожидания.<br/><br/>Хранилище данных SQL автоматически управляет этими магазинами и предоставляет неограниченное количество запросов, storied за последние семь дней без дополнительной платы. Чтобы включить хранилище запросов, просто выполните инструкцию T-SQL ALTER DATABASE: <br/>SQL---инструкции ALTER DATABASE [Имя_базы_данных] ЗАДАЙТЕ QUERY_STORE = ON;---Дополнительные сведения о запросе Store в хранилище данных SQL Azure см. в статье [наблюдение за производительностью с помощью Query Store](/sql/relational-databases/performance/monitoring-performance-by-using-the-query-store)и динамические административные представления запроса Store, таких как [sys.query_store_query](/sql/relational-databases/system-catalog-views/sys-query-store-query-transact-sql). Вот [запись блога](https://azure.microsoft.com/blog/automatic-performance-monitoring-in-azure-sql-data-warehouse-with-query-store/) с объявлением о выпуске.|
|**Более низкого уровня вычислений для Gen2 хранилище данных Azure SQL**|Хранилище данных SQL Azure 2-го поколения теперь поддерживает более низкие уровни вычислений. Клиенты могут оценить лучшую производительность, гибкость и возможности безопасности Хранилища данных SQL Azure, начиная со 100 cDWU ([вычислительные единицы использования хранилища данных](what-is-a-data-warehouse-unit-dwu-cdwu.md)), и увеличивать масштаб до 30 000 cDWU за считаные минуты. Начиная с середины декабря 2018 года клиенты могут использовать преимущества производительности и гибкость 2-го поколения на низких уровнях вычислений в [этих регионах](gen2-migration-schedule.md#automated-schedule-and-region-availability-table). Поддержка для остальных регионов станет доступна в течение 2019 года.<br/><br/>Обеспечив точку входа для хранилищ данных следующего поколения, корпорация Майкрософт открыла возможности для ориентированных на прибыль пользователей, которые хотят оценить все преимущества безопасного, высокопроизводительного хранилища данных, не тратя время на поиски наиболее подходящей для них пробной среды. Пользователи могут начать со 100 cDWU (ниже чем текущая точка входа в 500 cDWU). Хранилище данных SQL 2-го поколения продолжает поддерживать операции остановки и возобновления и выходит за пределы обеспечения гибкости в вычислениях. 2 поколение также поддерживает неограниченную емкость хранилища столбцов, а также в 2,5 раза больше памяти для каждого запроса, до 128 одновременных запросов и функции [адаптивного кэширования](https://azure.microsoft.com/blog/adaptive-caching-powers-azure-sql-data-warehouse-performance-gains/). Эти функции в среднем дают в пять раз большую производительность по сравнению с той же единицей использования хранилища данных 1-го поколения за ту же цену. Геоизбыточные резервные копии являются стандартными для 2-го поколения со встроенной гарантированной защитой данных. Хранилище данных SQL Azure 2-го поколения может выполнить масштабирование, когда вам нужно.|
|**Слияния в фоновом режиме ColumnStore**|По умолчанию хранилище данных SQL Azure (Azure SQL DW) хранит данные в столбчатом формате с микроразделами, называемыми [группами строк](sql-data-warehouse-memory-optimizations-for-columnstore-compression.md). Иногда, из-за ограничений памяти при построении индекса или времени загрузки данных, группы строк могут быть сжаты в размере (меньше оптимального размера миллионов строк). Группы строк могут также стать фрагментированными из-за удалений. Небольшие или фрагментированные группы строк приводят к более высокому потреблению памяти, а также к неэффективному выполнению запросов. В этом выпуске Azure SQL DW задача фонового обслуживания columnstore объединяет небольшие сжатые группы строк, создавая большие группы строк, чтобы лучше использовать память и ускорить выполнение запросов.
| | |

## <a name="october-2018"></a>Октябрь 2018 г.

### <a name="service-improvements"></a>Улучшения службы

| Улучшения службы | Сведения |
| --- | --- |
|**DevOps для хранения данных**|Часто запрашиваемая функция для хранилища данных SQL теперь доступна в режиме предварительной версии с поддержкой средств SQL Server Data Tools (SSDT) для Visual Studio! Теперь разработчики смогут использовать для совместной работы единую базу кода с управлением версиями и быстро распространять изменения на любой экземпляр в любой точке мира. Вас это тоже интересует? Эта функция уже предоставляется в режиме предварительной версии. Чтобы зарегистрироваться, посетите страницу [с формой регистрации для использования предварительной версии SQL Server Data Tools для Хранилища данных SQL для Visual Studio](https://forms.office.com/Pages/ResponsePage.aspx?id=v4j5cvGGr0GRqy180BHbR4-brmKy3TZOjoktwuHd7S1UODkwQ1lVMEw1NDBGRjNLRDNWOFlQRUpIRi4u). Учитывая высокий спрос, мы ограничиваем доступ к предварительной версии, чтобы обеспечить максимальное удобство для клиентов. Мы ставим задачу подтвердить ваш статус в течение семи рабочих дней после регистрации.|
|**Безопасность на уровне строк общедоступной**|Хранилище данных SQL Azure (хранилище данных SQL) теперь поддерживает безопасность на уровне строк (RLS), которая дает мощные возможности для защиты конфиденциальных данных. С появлением RLS вы сможете внедрять политики безопасности, которые управляют доступом конкретных пользователей к конкретным строкам в таблицах. RLS обеспечивает такой точный контроль доступа, не требуя изменять архитектуру хранилища данных. RLS упрощает реализацию системы безопасности в целом, перемещая логику ограничения доступа на уровень базы данных из уровня приложения, который отделен от данных. Также RLS избавляет от необходимости создавать представления специально для фильтрации строк при управлении доступом. Для всех наших клиентов эта функция безопасности корпоративного уровня предоставляется без дополнительной оплаты.|
|**Расширенные помощников**|Тонкая настройки для хранилища данных SQL Azure стала еще проще благодаря дополнительным рекомендациям и метрикам для хранилища данных. В Помощнике по Azure вам доступны дополнительные рекомендации по повышению производительности, в том числе следующие.<br/><br/>1. Адаптивный кэш — узнавайте, когда выполнять масштабирование, чтобы оптимизировать использование кэша.<br/>2. Распределение таблиц — определяйте, когда реплицировать таблицы, чтобы сократить перемещение данных и повысить производительность рабочих нагрузок.<br/>3. Tempdb — узнайте, когда потребуется масштабирование, и настройте классы ресурсов, чтобы снизить состязание за tempdb.<br/><br/>Метрики хранилища данных более тесно интегрированы с [Azure Monitor](https://azure.microsoft.com/blog/enhanced-capabilities-to-monitor-manage-and-integrate-sql-data-warehouse-in-the-azure-portal/), в том числе улучшена настраиваемая таблица мониторинга для метрик в колонке обзора, обновляемых практически в реальном времени. Вам больше не нужно покидать колонку обзора хранилища данных, чтобы получить доступ к метрикам Azure Monitor при отслеживании использования либо проверять и применять рекомендации для хранилища данных. Кроме того, доступны новые метрики, например использование tempdb и адаптивного кэша, дополняющие рекомендации по производительности.|
|**Дополнительной настройки с консультантами службы интеграции**|Дополнительная настройка Хранилища данных SQL Azure теперь стала еще проще благодаря новым рекомендациям и метрикам для хранилища данных и новому интерфейсу колонки сводных данных на портале, которая теперь объединяет функции помощника по Azure и Azure Monitor.|
|**Восстановление ускоренной базы данных (ADR)**|Ускоренное восстановление базы данных (ADR) для Хранилища данных SQL Azure теперь находится в режиме общедоступной предварительной версии. ADR — это новая функция ядра СУБД SQL Server, которая значительно повышает доступность базы данных, особенно при наличии длительных транзакций, благодаря полностью обновленному процессу восстановления. Основных преимуществ ADR: быстрое и согласованное восстановление базы данных и мгновенный откат транзакций.|
|**Журналы диагностики Azure Monitor**|Теперь Хранилище данных SQL предоставляет расширенные аналитические сведения о рабочих нагрузках благодаря непосредственной интеграции с журналами диагностики Azure Monitor. Эта новая возможность позволяет разработчикам анализировать поведение рабочих нагрузок в течение продолжительного времени и принимать обоснованные решения касательно оптимизации запросов или управления производительностью. Теперь мы добавили внешний процесс ведения журнала, который реализован через [журналы диагностики Azure Monitor](https://docs.microsoft.com/azure/monitoring/monitoring-data-collection?toc=/azure/azure-monitor/toc.json#logs) и предоставляет дополнительные сведения о рабочей нагрузке хранилища данных. Одним нажатием кнопки вы теперь можете настроить журналы диагностики для устранения неполадок по истории производительности запросов с применением [Log Analytics](https://docs.microsoft.com/azure/log-analytics/log-analytics-queries). Журналы диагностики Azure Monitor поддерживают настраиваемые периоды удержания за счет сохранения журналов в учетной записи хранения для аудита, возможность потоковой передачи журналов в концентраторы событий для получения аналитических данных телеметрии практически в реальном времени, а также возможность анализировать журналы, используя Log Analytics с запросами журналов. Журналы диагностики состоят из представлений телеметрии для хранилища данных, эквивалентных динамическим административным представлениям для устранения неполадок, связанных с производительностью Хранилища данных SQL. В этом первоначальном выпуске доступны следующие динамические административные представления системы:<br/><br/>&bull; &nbsp; [sys.dm_pdw_exec_requests](/sql/relational-databases/system-dynamic-management-views/sys-dm-pdw-exec-requests-transact-sql)<br/>&bull; &nbsp; [sys.dm_pdw_request_steps](/sql/relational-databases/system-dynamic-management-views/sys-dm-pdw-request-steps-transact-sql)<br/>&bull; &nbsp; [sys.dm_pdw_dms_workers](/sql/relational-databases/system-dynamic-management-views/sys-dm-pdw-dms-workers-transact-sql)<br/>&bull; &nbsp; [sys.dm_pdw_waits](/sql/relational-databases/system-dynamic-management-views/sys-dm-pdw-waits-transact-sql)<br/>&bull; &nbsp; [sys.dm_pdw_sql_requests](/sql/relational-databases/system-dynamic-management-views/sys-dm-pdw-sql-requests-transact-sql)|
|**Управление памятью ColumnStore**|По мере того как количество групп строк для хранилища столбцов возрастает, увеличивается и объем памяти, необходимый для управления внутренними метаданными сегментов столбцов для этих групп строк.  В результате общая производительность запросов и результативность запросов к одному из динамических административных представлений columnstore может снизиться.  В этом выпуске реализованы улучшения, которые позволят оптимизировать размер внутренних метаданных в таких случаях. Это обеспечит удобство и высокую производительность при выполнении запросов.|
|**Интеграция Gen2 хранилища Озера данных Azure (общедоступная версия**|Хранилище данных SQL Azure теперь имеет встроенную возможности интеграции с Azure Data Lake Storage 2-го поколения Клиенты теперь могут с помощью внешних таблиц загружать данные из ABFS в Хранилище данных SQL. Эта функция позволяет пользователям интегрировать пулы данных в Azure Data Lake Storage 2-го поколения.|
|**Важные ошибки**|CETAS к сбоям Parquet в классах ресурсов небольшого размера в хранилищах данных DW2000, и многое другое — это исправление правильно определяет пустую ссылку в создать внешние таблицы как путь кода Parquet.<br/><br/>Значение столбца идентификаторов может привести к потере в какой-либо операции CTAS - значение столбца удостоверений могут не сохраняться при CTASed с другой таблицей. В [блог](https://blog.westmonroepartners.com/azure-sql-dw-identity-column-bugs/).<br/><br/>Внутренний сбой в некоторых случаях, когда сеанс закрывается, хотя по-прежнему выполняется запрос — это исправление вызывает исключение InvalidOperationException, если сеанс закрывается, когда запрос по-прежнему выполняется.<br/><br/>(Развертывается в ноябре 2018 года) Пользователи испытывали проблемы повышения производительности, при попытке загрузить несколько небольших файлов из ADLS (поколение 1), с помощью Polybase. -Производительность системы был перегружены во время проверки маркера безопасности AAD. Кэширование маркеров безопасности помогло решить проблемы с производительностью. |
| | |

## <a name="next-steps"></a>Дальнейшие действия

- [создать хранилище данных SQL](./create-data-warehouse-portal.md)

## <a name="more-information"></a>Дополнительные сведения

- [Хранилище данных Azure SQL](https://azure.microsoft.com/blog/tag/azure-sql-data-warehouse/)
- [Блоги группы консультирования клиентов](https://blogs.msdn.microsoft.com/sqlcat/tag/sql-dw/)
- [Истории успеха клиентов](https://azure.microsoft.com/case-studies/?service=sql-data-warehouse)
- [Форум Stack Overflow](https://stackoverflow.com/questions/tagged/azure-sqldw)
- [Twitter](https://twitter.com/hashtag/SQLDW)
- [Видеоролики](https://azure.microsoft.com/documentation/videos/index/?services=sql-data-warehouse)
- [глоссарий Azure Глоссарий](../azure-glossary-cloud-terminology.md)
