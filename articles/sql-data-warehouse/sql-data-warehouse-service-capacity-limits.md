<properties
   pageTitle="Ограничения емкости хранилища данных SQL | Microsoft Azure"
   description="Максимальные значения для подключений, баз данных, таблиц и запросов для хранилища данных SQL."
   services="sql-data-warehouse"
   documentationCenter="NA"
   authors="sonyam"
   manager="barbkess"
   editor=""/>

<tags
   ms.service="sql-data-warehouse"
   ms.devlang="NA"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="data-services"
   ms.date="05/13/2016"
   ms.author="sonyama;barbkess;jrj"/>

# Ограничения емкости хранилища данных SQL

В следующих таблицах указаны максимальные значения, допустимые различными компонентами хранилища данных SQL Azure.


## Управление рабочей нагрузкой

| Категория | Описание | Максимальная |
| :------------------ | :------------------------------------------- | :----------------- |
| Единицы использования хранилища данных (DWU)| Вычислительная мощность, память и ресурсы ввода-вывода | 2000 |
| Подключение к базе данных | Количество параллельно открытых сеансов | 1024 <br/><br/>. Поддерживается не более 1024 активных подключений, c которых могут одновременно поступать запросы к каждой базе данных хранилища данных SQL. Обратите внимание, что есть ограничения количества запросов, которые действительно могут выполняться одновременно. При превышении ограничения на число параллельных запросов запрос помещается во внутреннюю очередь для ожидания обработки.|
| Подключение к базе данных | Максимальный объем памяти для подготовленных инструкций | 20 МБ |
| Управление рабочей нагрузкой | Максимальное число одновременных запросов | 32 <br/><br/>. По умолчанию хранилище данных SQL выполняет не более 32 параллельных запросов, а остальные запросы отправляются в очередь. <br/><br/> Допустимый объем параллельных запросов может понизиться, когда пользователям назначается более высокий класс ресурсов. Выполнение некоторых запросов, например запросов динамического административного представления, разрешено всегда. Дополнительные сведения см. в разделе [Управление параллелизмом и рабочей нагрузкой в хранилище данных SQL][].|


## Объекты базы данных

| Категория | Описание | Максимальная |
| :---------------- | :------------------------------------------- | :----------------- |
| База данных | Максимальный размер | 60 ТБ в сжатом виде на диске <br/><br/>. Хранилище данных SQL предоставляет до 60 ТБ места на диске для одной базы данных. Место на диске сжато для постоянных таблиц. Оно не зависит от размера временной базы данных или журнала и предназначено исключительно для постоянных таблиц. Кластеризованный индекс columnstore позволяет сжать данные в 5 раз. Это означает, что размер несжатых данных в базе данных может составлять примерно 300 TБ при условии, что кластеризованный индекс columnstore применен ко всем таблицам (тип таблицы по умолчанию). Перед выходом общедоступной версии предоставляемый объем места на диске увеличится с 60 до 240 ТБ, что позволит хранить в большинстве баз данных более 1 ПБ несжатых данных.|
| Таблица | Максимальный размер | 60 ТБ сжатых данных на диске |
| Таблица | Количество таблиц в базе данных | 2 миллиарда |
| Таблица | Количество столбцов в таблице | 1024 столбца |
| Таблица | Количество байт в столбце | 8000 байт |
| Таблица | Количество байт в строке (определенный размер) | 8060 байт <br/><br/>. Количество байтов в строке вычисляется так же, как и для SQL Server с включенным сжатием страниц. Как и SQL Server, хранилище данных SQL поддерживает хранение при превышении размера страницы данными строки, что позволяет столбцам переменной длины выходить за пределы строк. В главной записи столбцов переменной длины, выходящих за пределы строк, хранится только 24-байтовый корневой элемент. Дополнительные сведения см. в разделе [Превышающие размер страницы данные строки, составляющие более 8 КБ][] электронной документации по SQL Server. <br/><br/> Список размеров типов данных хранилища данных SQL см. в статье [CREATE TABLE (Azure SQL Data Warehouse)][] (СОЗДАНИЕ ТАБЛИЦЫ (хранилище данных SQL Azure)). |
| Таблица | Количество разделов в таблице | 15 000 <br/><br/>. Для повышения производительности советуем сократить количество разделов до минимума, который позволит выполнять ваши бизнес-задачи. С увеличением количества секций не только растут затраты на операции языка описания данных DDL и языка обработки данных DML, но и снижается производительность.|
| Таблица | Количество символов в разделе (граничное значение)| 4000 |
| Индекс | Количество некластеризованных индексов в таблице | 999 <br/><br/>. Применимо только к таблицам rowstore.|
| Индекс | Количество кластеризованных индексов в таблице | 1 <br><br/>. Применимо к таблицам rowstore и columnstore.|
| Индекс | Количество строк в группе rowgroup индекса columnstore | 1024 <br/><br/>. Каждый индекс columnstore реализован в виде нескольких индексов columnstore. Обратите внимание: когда вы вставляете 1024 строки в индекс columnstore хранилища данных SQL, не все строки попадают в одну группу rowgroup.|
| Индекс | Количество одновременных операций создания кластеризованных индексов columnstore | 32 <br/><br/>. Применимо, если все кластеризованные индексы columnstore создаются на основе разных таблиц. В каждой таблице можно создать только один кластеризованный индекс. Дополнительные запросы будут помещены в очередь для ожидания.|
| Индекс | Размер ключа индекса | 900 байт <br/><br/>. Применимо только к индексам rowstore. <br/><br/> В столбцах varchar могут создаваться индексы с размером более 900 байт, если при создании такого индекса размер существующих данных в этих столбцах не превышает 900 байт. Учтите, что при последующем выполнении в столбцах инструкций INSERT или UPDATE, которые приведут к превышению общего размера данных в 900 байт, соответствующие действия завершатся ошибкой.|
| Индекс | Количество ключевых столбцов в индексе | 16 <br/><br/>. Применимо только к индексам rowstore. Кластеризованные индексы columnstore включают все столбцы.|
| Статистика | Размер значений объединенных столбцов | 900 байт |
| Статистика | Количество столбцов в объекте статистики | 32 |
| Статистика | Количество объектов статистики для столбцов в таблице | 30 000 |
| Хранимые процедуры | Максимальное количество вложений | 8 |
| Просмотр | Количество столбцов в представлении | 1024 |


## Нагрузка

| Категория | Описание | Максимальная |
| :---------------- | :------------------------------------------- | :----------------- |
| Нагрузка Polybase | Количество байт в строке | 32 768 <br/><br/>. Нагрузка Polybase ограничивается загрузкой строк меньше 32 КБ и не позволяет загружать данные в переменные VARCHR(MAX), NVARCHAR(MAX) или VARBINARY(MAX). Это ограничение будет снято в ближайшее время. <br/><br/>


## Запросы

| Категория | Описание | Максимальная |
| :---------------- | :------------------------------------------- | :----------------- |
| Запрос | Количество помещенных в очередь запросов к пользовательским таблицам | 1000 |
| Запрос | Количество одновременных запросов к системным представлениям | 100 |
| Запрос | Количество помещенных в очередь запросов к системным представлениям | 1000 |
| Запрос | Максимальное количество параметров | 2098 |
| Пакетная служба | Максимальный размер | 65 536*4096 |
| Результаты SELECT | Количество столбцов в строке | 4096 <br/><br/>. В каждой строке результата SELECT может содержаться не более 4096 столбцов. Нет никакой гарантии, что их количество всегда будет равно 4096. Если планом запроса предусмотрено использование временной таблицы, в такой таблице может быть не более 1024 столбцов.|
| SELECT | Вложенные запросы | 32<br/><br/>Инструкция SELECT не может содержать более 32 вложенных запросов. Нет никакой гарантии, что их количество всегда будет равно 32. Например, с помощью инструкции JOIN можно включить в план запроса вложенный запрос. Количество вложенных запросов также может ограничиваться объемом доступной памяти.|
| SELECT | Количество столбцов в инструкции JOIN | 1024 столбца<br/><br/>Инструкция JOIN не может содержать более 1024 столбцов. Нет никакой гарантии, что их количество всегда будет равно 1024. Если планом для инструкции JOIN предусмотрено использование временной таблицы с количеством столбцов, которое превышает результат JOIN, к такой временной таблице применяется ограничение в 1024 столбца. |
| SELECT | Количество байт в именах столбцов GROUP BY | 8060<br/><br/>Длина имен столбцов в предложении GROUP BY не может превышать 8060 байт.|
| SELECT | Количество байт в именах столбцов ORDER BY | 8060<br/><br/>Длина имен столбцов в предложении ORDER BY не может превышать 8060 байт.|
| Количество идентификаторов и констант в инструкции | Количество идентификаторов и констант, на которые имеются ссылки. | 65 535 <br/><br/>. В хранилище данных SQL есть ограничение на количество идентификаторов и констант, которые могут содержаться в одном выражении запроса. оно равно 65 535. Превышение этого количества приводит к ошибке SQL Server (ошибка 8632). Дополнительные сведения см. в статье [Сообщение об ошибке при выполнении запроса в SQL Server 2005: "Внутренняя ошибка: был достигнут предел служб выражений"][].|


## Метаданные

| Системное представление | Максимальное количество строк |
| :--------------------------------- | :------------|
| sys.dm\_pdw\_component\_health\_alerts | 10 000 |
| sys.dm\_pdw\_dms\_cores | 100 |
| sys.dm\_pdw\_dms\_workers | Общее количество рабочих ролей DMS для последней 1000 запросов SQL. |
| sys.dm\_pdw\_errors | 10 000 |
| sys.dm\_pdw\_exec\_requests | 10 000 |
| sys.dm\_pdw\_exec\_sessions | 10 000 |
| sys.dm\_pdw\_request\_steps | Общее количество действий для последней 1000 запросов SQL, хранящихся в sys.dm\_pdw\_exec\_requests. |
| sys.dm\_pdw\_os\_event\_logs | 10 000 |
| sys.dm\_pdw\_sql\_requests | Последняя 1000 запросов SQL, которые хранятся в sys.dm\_pdw\_exec\_requests. |


## Дальнейшие действия
Дополнительные справочные сведения см. в обзоре [Общие справочные сведения о хранилище данных SQL][].

<!--Image references-->

<!--Article references-->
[Общие справочные сведения о хранилище данных SQL]: sql-data-warehouse-overview-reference.md
[Управление параллелизмом и рабочей нагрузкой в хранилище данных SQL]: sql-data-warehouse-develop-concurrency.md

<!--MSDN references-->
[Превышающие размер страницы данные строки, составляющие более 8 КБ]: https://msdn.microsoft.com/library/ms186981.aspx
[CREATE TABLE (Azure SQL Data Warehouse)]: https://msdn.microsoft.com/library/mt203953.aspx
[Сообщение об ошибке при выполнении запроса в SQL Server 2005: "Внутренняя ошибка: был достигнут предел служб выражений"]: https://support.microsoft.com/kb/913050

<!---HONumber=AcomDC_0518_2016-->