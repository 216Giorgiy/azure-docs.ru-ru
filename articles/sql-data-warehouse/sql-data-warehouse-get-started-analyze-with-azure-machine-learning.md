<properties
   pageTitle="Анализ данных с помощью машинного обучения Azure | Microsoft Azure"
   description="Учебник по использованию машинного обучения Azure с хранилищем данных SQL Azure для разработки решений."
   services="sql-data-warehouse"
   documentationCenter="NA"
   authors="sahaj08"
   manager="barbkess"
   editor=""/>

<tags
   ms.service="sql-data-warehouse"
   ms.devlang="NA"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="data-services"
   ms.date="10/21/2015"
   ms.author="sahajs"/>

# Анализ данных с помощью машинного обучения Azure
В этом учебнике показано, как построить прогнозную модель машинного обучения с помощью машинного обучения Azure и данных хранилища данных SQL Azure. В этом учебнике будет использоваться база данных AdventureWorksDW. Кроме того, мы классифицируем клиентов магазина по продаже велосипедов Adventure Works как заинтересованных и незаинтересованных покупателей в рамках создания целевой маркетинговой кампании.


## Предварительные требования
Для выполнения инструкций, приведенных в этом учебнике, вам понадобится следующее:

- хранилище данных SQL и образец базы данных AdventureWorksDW.

В статье [Создание хранилища данных SQL][] показано, как подготовить базу данных с образцами данных. Если у вас уже есть база данных хранилища данных SQL, но в ней нет образцов данных, вы можете [загрузить образцы данных вручную][].


## Шаг 1. Получение данных 
Мы получим данные из представления dbo.vTargetMail базы данных AdventureWorksDW.

1. Войдите в [Студию машинного обучения Azure][] и щелкните «Мои эксперименты».
2. Щелкните **+СОЗДАТЬ** и выберите **Пустой эксперимент**.
3. Введите для своего эксперимента имя «Целевой маркетинг».
4. Перетащите модуль **чтения** из области модулей на холст.
5. Укажите сведения о базе данных хранилища данных SQL на панели свойств. 
6. Создайте запрос к базе данных на чтение нужных данных.

```
SELECT [CustomerKey]
      ,[GeographyKey]
      ,[CustomerAlternateKey]
      ,[MaritalStatus]
      ,[Gender]
      ,cast ([YearlyIncome] as int) as SalaryYear
      ,[TotalChildren]
      ,[NumberChildrenAtHome]
      ,[EnglishEducation]
      ,[EnglishOccupation]
      ,[HouseOwnerFlag]
      ,[NumberCarsOwned]
      ,[CommuteDistance]
      ,[Region]
      ,[Age]
      ,[BikeBuyer]
  FROM [dbo].[vTargetMail]
```
7. Запустите эксперимент, щелкнув элемент **Пуск** под холстом эксперимента.
8. Чтобы просмотреть импортированные данные, щелкните порт вывода модуля чтения и выберите **Отобразить**.



## Шаг 2. Очистка данных
Мы удалим некоторые столбцы, которые не являются значимыми для этой модели.

1. Перетащите на холст модуль **Столбцы проекта**.
2. Щелкните на панели свойств **Запустить средство выбора столбцов**, чтобы указать столбцы, которые вы хотите удалить.
3. Исключите два столбца: CustomerAlternateKey и GeographyKey.



## Шаг 3. Сборка модели
Мы выполним разбивку данных в соотношении 80 к 20: 80 % для подготовки модели машинного обучения и 20 % для проверки модели. Для этой задачи бинарной классификации будут использоваться двухклассовые алгоритмы.

1. Перетащите модуль **разбивки** на холст.
2. Введите значение 0,8 в поле «Доля строк в первом наборе выходных данных» на панели свойств.
3. Перетащите на холст модуль **Двухклассовое увеличивающееся дерево принятия решений**.
4. Перетащите на холст модуль **Обучение модели** и укажите для первого входного набора данных алгоритм ML. Второй входной набор данных: данные для обучения алгоритму.
5. На панели свойств щелкните **Запустить средство выделения столбцов**, чтобы указать столбец, прогнозируемый моделью (это столбец BikeBuyer).


## Шаг 4. Оценка модели
Теперь мы протестируем эффективность модели с использованием тестовых данных. Мы сравним наш алгоритм выбора с другими алгоритмами и посмотрим, какой работает лучше.

1. Перетащите на холст модуль **Оценка модели**. Первый входной набор данных: обученная модель. Второй входной набор данных: тестовые данные.
2. Перетащите на холст эксперимента модуль **Двухклассная точечная машина Байеса**. Мы сравним производительность этого алгоритма в сравнении с алгоритмом увеличивающегося дерева принятия решений.
3. Скопируйте и вставьте модули «Обучение модели» и «Оценка модели» на холсте.
4. Перетащите на холст модуль **Оценка модели** для сравнения двух алгоритмов.
5. **Запустите** эксперимент.
6. Щелкните правой кнопкой мыши порт вывода модуля «Анализ модели», а затем щелкните «Отобразить».


Отображенные метрики представляют собой ROC-кривую, lift-кривую, а также диаграмму соотношения полноты и точности. При изучении этих метрик становится понятно, что первая модель является более эффективной, чем вторая. Чтобы узнать прогнозные значения первой модели, щелкните порт вывода модуля «Оценка модели» и щелкните «Отобразить».


Вы увидите два дополнительных столбца, добавленные в тестовый набор данных.

- Оценка вероятности: вероятность того, что клиент является покупателем велосипеда.
- Метка оценки: выполненная моделью классификация — покупатель велосипеда (1) или нет (0). Порог вероятности для маркировки равен 50 % и может быть изменен.

Сравнение столбца BikeBuyer (фактическое значение) и столбца «Метка оценки» (прогнозное значение) позволяет оценить эффективность выполнения модели. В дальнейшем эту модель можно использовать для прогнозирования количества новых клиентов. Вы можете затем опубликовать эту модель как веб-службу или записать результаты в хранилище данных SQL.

Дополнительные сведения см. в статье [Введение в машинное обучения Azure][].



<!--Article references-->
[Студию машинного обучения Azure]: https://studio.azureml.net/
[Введение в машинное обучения Azure]: ../machine-learning/machine-learning-what-is-machine-learning.md
[загрузить образцы данных вручную]: ./sql-data-warehouse-get-started-manually-load-samples.md
[Создание хранилища данных SQL]: ./sql-data-warehouse-get-started-provision.md

<!---HONumber=Oct15_HO4-->