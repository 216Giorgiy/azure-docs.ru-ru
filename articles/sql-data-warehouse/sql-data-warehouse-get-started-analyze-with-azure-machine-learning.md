<properties
   pageTitle="Анализ данных с помощью машинного обучения Azure | Microsoft Azure"
   description="Учебник по использованию машинного обучения Azure с хранилищем данных SQL Azure для разработки решений."
   services="sql-data-warehouse"
   documentationCenter="NA"
   authors="sahaj08"
   manager="barbkess"
   editor=""/>

<tags
   ms.service="sql-data-warehouse"
   ms.devlang="NA"
   ms.topic="get-started-article"
   ms.tgt_pltfrm="NA"
   ms.workload="data-services"
   ms.date="03/23/2016"
   ms.author="sahajs;barbkess;sonyama"/>

# Анализ данных с помощью машинного обучения Azure
В этом учебнике показано, как построить прогнозную модель машинного обучения с помощью машинного обучения Azure и данных хранилища данных SQL Azure. В этом руководстве мы создадим кампанию целевого маркетинга для Adventure Works (магазин велосипедов). Для этого мы предскажем, есть ли вероятность того, что клиент купит велосипед.

> [AZURE.VIDEO integrating-azure-machine-learning-with-azure-sql-data-warehouse]

## Предварительные требования
Для выполнения инструкций, приведенных в этом учебнике, вам понадобится следующее:

- хранилище данных SQL и образец базы данных AdventureWorksDW.

В статье [Создание хранилища данных SQL][] показано, как подготовить базу данных с образцами данных. Если база данных хранилища данных SQL уже существует, но не содержит демонстрационные данные, вы можете [загрузить демонстрационные данные вручную][].


## Шаг 1. Получение данных
Мы получим данные из представления dbo.vTargetMail базы данных AdventureWorksDW.

1. Войдите в [Студию машинного обучения Azure][] и щелкните «Мои эксперименты».
2. Щелкните **+СОЗДАТЬ** и выберите **Пустой эксперимент**.
3. Введите для своего эксперимента имя «Целевой маркетинг».
4. Перетащите модуль **чтения** из области модулей на холст.
5. Укажите сведения о базе данных хранилища данных SQL на панели свойств.
6. Создайте **запрос** к базе данных на чтение нужных данных.

```sql
SELECT [CustomerKey]
  ,[GeographyKey]
  ,[CustomerAlternateKey]
  ,[MaritalStatus]
  ,[Gender]
  ,cast ([YearlyIncome] as int) as SalaryYear
  ,[TotalChildren]
  ,[NumberChildrenAtHome]
  ,[EnglishEducation]
  ,[EnglishOccupation]
  ,[HouseOwnerFlag]
  ,[NumberCarsOwned]
  ,[CommuteDistance]
  ,[Region]
  ,[Age]
  ,[BikeBuyer]
FROM [dbo].[vTargetMail]
```

Запустите эксперимент, щелкнув элемент **Пуск** под холстом эксперимента. ![Запуск эксперимента][1]


Когда эксперимент будет завершен, щелкните порт вывода в нижней части модуля чтения и выберите **Отобразить**, чтобы просмотреть импортированные данные.![Просмотр импортированных данных][3]





## Шаг 2. Очистка данных
Мы удалим некоторые столбцы, которые не являются значимыми для этой модели.

1. Перетащите на холст модуль **Столбцы проекта**.
2. Щелкните на панели свойств **Запустить средство выбора столбцов**, чтобы указать столбцы, которые вы хотите удалить.![Столбцы проекта][4]

3. Исключите два столбца: CustomerAlternateKey и GeographyKey. ![Удаление ненужных столбцов][5]




## Шаг 3. Сборка модели
Мы выполним разбивку данных в соотношении 80 к 20: 80 % для подготовки модели машинного обучения и 20 % для проверки модели. Для этой задачи бинарной классификации будут использоваться двухклассовые алгоритмы.

1. Перетащите модуль **разбивки** на холст.
2. На панели свойств в поле «Доля строк в первом наборе выходных данных» введите значение 0,8. ![Разделение данных на обучающую и тестовую выборки][6]
3. Перетащите на холст модуль **Двухклассовое увеличивающееся дерево принятия решений**.
4. Перетащите на холст модуль **Обучение модели** и укажите входные данные. В области «Свойства» щелкните **Запустить средство выбора столбцов**.
      - Первый входной набор данных: алгоритм ML.
      - Второй входной набор данных: данные для обучения алгоритму. ![Подключение модуля «Обучение модели»][7]
5. Выберите столбец **BikeBuyer** в качестве прогнозируемого. ![Выбор столбца для прогнозирования][8]





## Шаг 4. Оценка модели
Теперь мы протестируем эффективность модели с использованием тестовых данных. Мы сравним наш алгоритм выбора с другими алгоритмами и посмотрим, какой работает лучше.

1. Перетащите на холст модуль **Оценка модели**. Первый входной набор данных: обученная модель. Второй входной набор данных: тестовые данные.![Оценка модели][9]
2. Перетащите на холст эксперимента модуль **Двухклассная точечная машина Байеса**. Мы сравним производительность этого алгоритма в сравнении с алгоритмом увеличивающегося дерева принятия решений.
3. Скопируйте и вставьте модули «Обучение модели» и «Оценка модели» на холсте.
4. Перетащите на холст модуль **Оценка модели** для сравнения двух алгоритмов.
5. **Запустите** эксперимент. ![Запуск эксперимента][10]
6. Щелкните правой кнопкой мыши порт вывода модуля «Анализ модели», а затем щелкните «Отобразить». ![Отображение результатов классификации][11]



Отображенные метрики представляют собой ROC-кривую, lift-кривую, а также диаграмму соотношения полноты и точности. При изучении этих метрик становится понятно, что первая модель является более эффективной, чем вторая. Чтобы узнать прогнозные значения первой модели, щелкните порт вывода модуля «Оценка модели» и щелкните «Отобразить». ![Отображение результатов вычисления][12]

Вы увидите два дополнительных столбца, добавленные в тестовый набор данных.

- Оценка вероятности: вероятность того, что клиент является покупателем велосипеда.
- Метка оценки: выполненная моделью классификация — покупатель велосипеда (1) или нет (0). Порог вероятности для маркировки равен 50 % и может быть изменен.

Сравнение столбца BikeBuyer (фактическое значение) и столбца «Метка оценки» (прогнозное значение) позволяет оценить эффективность выполнения модели. В дальнейшем эту модель можно использовать для прогнозирования количества новых клиентов. Вы можете затем опубликовать эту модель как веб-службу или записать результаты в хранилище данных SQL.

## Дальнейшие действия

Дополнительные сведения о создании прогнозных моделей машинного обучения см. в статье [Введение в машинное обучение в Azure][].



<!--Image references-->
[1]: ./media/sql-data-warehouse-get-started-analyze-with-azure-machine-learning/img1_reader.png
[2]: ./media/sql-data-warehouse-get-started-analyze-with-azure-machine-learning/img2_visualize.png
[3]: ./media/sql-data-warehouse-get-started-analyze-with-azure-machine-learning/img3_readerdata.png
[4]: ./media/sql-data-warehouse-get-started-analyze-with-azure-machine-learning/img4_projectcolumns.png
[5]: ./media/sql-data-warehouse-get-started-analyze-with-azure-machine-learning/img5_columnselector.png
[6]: ./media/sql-data-warehouse-get-started-analyze-with-azure-machine-learning/img6_split.png
[7]: ./media/sql-data-warehouse-get-started-analyze-with-azure-machine-learning/img7_train.png
[8]: ./media/sql-data-warehouse-get-started-analyze-with-azure-machine-learning/img8_traincolumnselector.png
[9]: ./media/sql-data-warehouse-get-started-analyze-with-azure-machine-learning/img9_score.png
[10]: ./media/sql-data-warehouse-get-started-analyze-with-azure-machine-learning/img10_evaluate.png
[11]: ./media/sql-data-warehouse-get-started-analyze-with-azure-machine-learning/img11_evalresults.png
[12]: ./media/sql-data-warehouse-get-started-analyze-with-azure-machine-learning/img12_scoreresults.png


<!--Article references-->
[Студию машинного обучения Azure]: https://studio.azureml.net/
[Введение в машинное обучение в Azure]: https://azure.microsoft.com/documentation/articles/machine-learning-what-is-machine-learning/
[загрузить демонстрационные данные вручную]: sql-data-warehouse-get-started-manually-load-samples.md
[Создание хранилища данных SQL]: sql-data-warehouse-get-started-provision.md

<!---HONumber=AcomDC_0330_2016-->