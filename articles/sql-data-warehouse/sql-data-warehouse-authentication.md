<properties
   pageTitle="Аутентификация в хранилище данных SQL Azure | Microsoft Azure"
   description="Применение аутентификации Azure Active Directory (AAD) и SQL Server для подключения к хранилищу данных SQL Azure."
   services="sql-data-warehouse"
   documentationCenter=""
   authors="byham"
   manager="barbkess"
   editor=""
   tags=""/>

<tags
   ms.service="sql-data-warehouse"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="data-management"
   ms.date="06/17/2016"
   ms.author="rickbyh;barbkess;sonyama"/>

# Аутентификация в хранилище данных SQL Azure

> [AZURE.SELECTOR]
- [Обзор](sql-data-warehouse-connect-overview.md)
- [Аутентификация](sql-data-warehouse-authentication.md)
- [Драйверы](sql-data-warehouse-connection-strings.md)

Для подключения к хранилищу данных SQL необходимо передавать учетные данные безопасности для проверки подлинности. После установки соединения вы можете обнаружить, что некоторые параметры подключения настраиваются при установке сеанса запроса.

Дополнительные сведения о безопасности и разрешении подключений к хранилищу данных см. в статье [Защита базы данных в хранилище данных SQL][].

## Аутентификация SQL
Для подключения к хранилищу данных SQL необходимо предоставить следующие сведения:

- Полное имя сервера
- Тип проверки подлинности SQL
- Имя пользователя
- Пароль
- База данных по умолчанию (необязательно)

Следует отметить, что пользователи должны проходить проверку подлинности с использованием проверки подлинности SQL. Доверенная проверка подлинности в настоящее время не поддерживается.

По умолчанию устанавливается подключение к основной, а не к пользовательской базе данных. Для подключения к пользовательской базе данных можно выполнить одно из следующих действий:

1. Укажите базу данных по умолчанию при регистрации сервера в обозревателе объектов SQL Server в SSDT или в строке подключения приложения. Например, включите параметр InitialCatalog для подключения ODBC.
2. Выделите пользовательскую базу данных перед созданием сеанса в SSDT.

> [AZURE.NOTE] Инструкции по подключению к хранилищу данных SQL с помощью SSDT см. в статье [Query Azure SQL Data Warehouse (Visual Studio)][] (Выполнение запросов к хранилищу данных SQL Azure (Visual Studio)).

Важно отметить, что использовать оператор **USE<your DB>** (Transact-SQL) для изменения базы данных, к которой осуществляется подключение, нельзя.


## Аутентификация Azure Active Directory (AAD)

Проверка подлинности Azure Active Directory — это механизм подключения к хранилищу данных SQL Microsoft Azure с помощью удостоверений в Azure Active Directory (Azure AD). С помощью проверки подлинности Azure Active Directory можно централизованно управлять удостоверениями пользователей базы данных и другими службами Майкрософт. Централизованное управление удостоверениями позволяет использовать единое расположение для управления пользователями хранилища данных SQL и упрощает управление разрешениями.

### Преимущества

Это дает такие преимущества:

- наличие альтернативного варианта проверки подлинности SQL Server;
- возможность остановить увеличение количества пользователей на серверах баз данных;
- изменение паролей в одном расположении;
- клиенты могут управлять разрешениями базы данных с помощью внешних групп (AAD);
- возможность исключить хранение паролей с помощью встроенной проверки подлинности Windows и других видов проверки подлинности, поддерживаемых Azure Active Directory;
- при проверке подлинности Azure Active Directory используются данные пользователей автономной базы данных для проверки подлинности удостоверений на уровне базы данных.
- Azure Active Directory поддерживает проверку подлинности на основе маркеров для приложений, подключающихся к хранилищу данных SQL.

> [AZURE.IMPORTANT] Проверка подлинности Azure Active Directory — это функция, работающая в режиме предварительной версии. Ее использование регулируется условиями предварительной версии, указанными в лицензионном соглашении (например, в соглашении Enterprise, соглашении для Microsoft Azure или соглашении Microsoft Online Subscription), а также любыми применимыми условиями, которые можно найти на странице [Дополнительные условия использования предварительных версий Microsoft Azure](https://azure.microsoft.com/support/legal/preview-supplemental-terms/).

### Этапы настройки

Для настройки и использования проверки подлинности Azure Active Directory выполните следующие действия.

1. Создание и заполнение каталога Azure Active Directory
2. Связывание каталога Active Directory с подпиской Azure или изменение каталога, который сейчас связан с этой подпиской (этот шаг можно пропустить)
3. Создание администратора Azure Active Directory для хранилища данных SQL Azure
4. Настройка клиентских компьютеров
5. Создание пользователей автономной базы данных в базе данных, сопоставленной с удостоверениями Azure AD
6. Подключение к хранилищу данных с помощью удостоверений Azure AD

Основное различие между использованием проверки подлинности Azure Active Directory с базой данных SQL Azure и хранилищем данных SQL Azure состоит в том, что для подключения к хранилищу данных SQL вы должны использовать SQL Server Data Tools вместо SQL Server Management Studio. Для хранилища данных SQL требуется версия SQL Server Data Tools для Visual Studio 2015, выпущенная в апреле 2016 г. (14.0.60311.1) или более поздняя. Сейчас пользователи Azure Active Directory не отображаются в обозревателе объектов SSDT. В качестве обходного пути сведения о пользователях можно просмотреть в файле [sys.database\_principals](https://msdn.microsoft.com/library/ms187328.aspx).
  
### Поиск подробных сведений
- Выполните подробные инструкции. Процедуры настройки и использования проверки подлинности Azure Active Directory практически идентичны для базы данных SQL Azure и хранилища данных SQL Azure. Выполните действия, описанные в разделе [Подключение к Базе данных SQL или хранилищу данных SQL c использованием проверки подлинности Azure Active Directory](../sql-database/sql-database-aad-authentication.md).
- Создайте пользовательские роли базы данных и назначьте их пользователям. Затем предоставьте ролям управляемые разрешения. Дополнительные сведения см. в разделе [Приступая к работе с разрешениями Database Engine](https://msdn.microsoft.com/library/mt667986.aspx).

## Дальнейшие действия

Чтобы приступить к отправке запросов к хранилищу данных с помощью Visual Studio и других приложений, ознакомьтесь с разделом [Query Azure SQL Data Warehouse (Visual Studio)][] (Выполнение запросов к хранилищу данных SQL Azure (Visual Studio)).

<!-- Article references -->
[Защита базы данных в хранилище данных SQL]: sql-data-warehouse-overview-manage-security.md
[Query Azure SQL Data Warehouse (Visual Studio)]: sql-data-warehouse-query-visual-studio.md

<!---HONumber=AcomDC_0622_2016-->