<properties
   pageTitle="Использование программы bcp для загрузки данных в хранилище данных SQL | Microsoft Azure"
   description="Узнайте, что такое программа bcp и как ее использовать в различных сценариях работы с хранилищем данных."
   services="sql-data-warehouse"
   documentationCenter="NA"
   authors="TwoUnder"
   manager="barbkess"
   editor="JRJ@BigBangData.co.uk"/>

<tags
   ms.service="sql-data-warehouse"
   ms.devlang="NA"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="data-services"
   ms.date="06/23/2015"
   ms.author="mausher;barbkess"/>


# Загрузка данных с помощью bcp
**[bcp][]** — это программа командной строки для массовой загрузки, которая позволяет копировать данные между SQL Server, файлами данных и хранилищем данных SQL. С помощью программы bcp можно выполнять импорт большого количества строк в таблицы хранилища данных SQL или экспорт данных из таблиц SQL Server в файлы данных. За исключением случаев использования с параметром queryout, для работы с программой bcp не требуется знание языка Transact-SQL.

Программа bcp — это быстрый и простой способ перемещения небольших наборов данных в базу данных хранилища данных SQL и из нее. Точный объем данных, который рекомендуется загружать или извлекать с помощью bcp, зависит от сетевого подключения с центром данных Azure. Обычно таблицы измерений можно загружать и извлекать, а вот на передачу относительно больших таблиц фактов может уходить значительно больше времени.

Программа bcp позволяет: – использовать простое средство командной строки для загрузки данных в хранилище данных SQL; – использовать простое средство командной строки для получения данных из хранилища данных SQL.

В этом учебнике показано, как выполнить: – импорт данных в таблицу с помощью программы bcp в командной строке; – экспорт данных из таблицы с помощью программы bcp в командной строке.

## Предварительные требования
Для пошагового изучения этого руководства потребуется: – база данных хранилища данных SQL; – установленная программа для командной строки bcp; – команда SQLCMD в установленной программе.

>[AZURE.NOTE]Вы можете загрузить служебные программы bcp и sqlcmd в [Центре загрузки Майкрософт][].

##Импорт данных в хранилище данных SQL
Работая с этим учебником, вы создадите таблицу в хранилище данных SQL Azure и импортируете в нее данные.

### Шаг 1. Создание таблицы в хранилище данных SQL Azure
С помощью командной строки подключитесь к своему экземпляру, для этого замените в следующей команде значения соответствующим образом.

```
sqlcmd.exe -S <server name> -d <database name> -U <username> -P <password> -I
```
После подключения скопируйте следующий скрипт таблицы в командную строку sqlcmd и нажмите клавишу "ВВОД".

```
CREATE TABLE DimDate2 (DateId INT NOT NULL, CalendarQuarter TINYINT NOT NULL, FiscalQuarter TINYINT NOT NULL);
```

В следующей строке введите признак конца пакетной службы GO и нажмите клавишу "ВВОД", чтобы выполнить инструкцию.

```
GO
```

### Шаг 2. Создание файла источника данных

Откройте Блокнот и скопируйте следующие строки данных в новый файл.

```
20150301,1,3
20150501,2,4
20151001,4,2
20150201,1,3
20151201,4,2
20150801,3,1
20150601,2,4
20151101,4,2
20150401,2,4
20150701,3,1
20150901,3,1
20150101,1,3
```

Сохраните файл в локальный временный каталог C:\\Temp\\DimDate2.txt.

> [AZURE.NOTE]Важно помнить, что bcp.exe не поддерживает кодировку UTF-8. Используйте файлы в кодировке ASCII или UTF-16 для файлов при работе с bcp.exe.

### Шаг 3. Подключение и импорт данных
С помощью программы bcp подключитесь и импортируйте данные, для чего замените в следующей команде значения соответствующим образом.

```
bcp DimDate2 in C:\Temp\DimDate2.txt -S <Server Name> -d <Database Name> -U <Username> -P <password> -q -c -t  ','
```

Вы можете проверить, что данные загружены, для этого подключитесь с помощью утилиты sqlcmd, как и раньше, и выполните следующую команду TSQL:

```
SELECT * FROM DimDate2 ORDER BY 1;
GO
```

Вы получите следующие результаты:

DateId |CalendarQuarter |FiscalQuarter
----------- |--------------- |-------------
20150101 |1 |3
20150201 |1 |3
20150301 |1 |3
20150401 |2 |4\.
20150501 |2 |4\.
20150601 |2 |4\.
20150701 |3 |1
20150801 |3 |1
20150801 |3 |1
20151001 |4\. |2
20151101 |4\. |2
20151201 |4\. |2

## Экспорт данных из хранилища данных SQL
Работая с этим учебником, вы создадите файл данных из таблицы, находящейся в хранилище данных SQL. Созданные данные будут экспортированы в новый файл данных DimDate2\_export.txt.

### Шаг 1. Экспорт данных

С помощью программы bcp подключитесь и экспортируйте данные, для чего замените в следующей команде значения соответствующим образом.

```
bcp DimDate2 out C:\Temp\DimDate2_export.txt -S <Server Name> -d <Database Name> -U <Username> -P <password> -q -c -t ','
```
Убедитесь, что данные экспортированы, открыв новый файл. Данные в файле должны совпадать с приведенным далее текстом:

```
20150301,1,3
20150501,2,4
20151001,4,2
20150201,1,3
20151201,4,2
20150801,3,1
20150601,2,4
20151101,4,2
20150401,2,4
20150701,3,1
20150901,3,1
20150101,1,3
```

>[AZURE.NOTE]Из-за особенностей распределенных систем порядок данных, взятых из разных баз данных хранилища данных SQL, может не совпадать. При необходимости параметр queryout может использоваться для указания, какой запрос Transact-SQL следует выполнить.

## Дальнейшие действия
Общие сведения о загрузке см. в разделе [Загрузка данных в хранилище данных SQL][]. Дополнительные советы по разработке см. в разделе [Общие сведения о разработке для хранилища данных SQL][].

<!--Image references-->

<!--Article references-->

[Загрузка данных в хранилище данных SQL]: ./sql-data-warehouse-overview-load/
[Общие сведения о разработке для хранилища данных SQL]: ./sql-data-warehouse-overview-develop/

<!--MSDN references-->
[bcp]: https://msdn.microsoft.com/library/ms162802.aspx


<!--Other Web references-->
[Центре загрузки Майкрософт]: http://www.microsoft.com/download/details.aspx?id=36433

<!---HONumber=August15_HO6-->