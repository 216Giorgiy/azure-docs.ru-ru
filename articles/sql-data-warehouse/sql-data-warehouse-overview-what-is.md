---
title: "Что такое хранилище данных SQL Azure? | Документация Майкрософт"
description: "Распределенная база данных корпоративного класса, способная обрабатывать петабайты реляционных и нереляционных данных. Это первое облачное хранилище в отрасли, в котором можно увеличивать и уменьшать количество вычислительных ресурсов, а также приостанавливать их работу в считанные секунды."
services: sql-data-warehouse
documentationcenter: NA
author: jrowlandjones
manager: bjhubbard
editor: 
ms.assetid: 4006c201-ec71-4982-b8ba-24bba879d7bb
ms.service: sql-data-warehouse
ms.devlang: NA
ms.topic: hero-article
ms.tgt_pltfrm: NA
ms.workload: data-services
ms.date: 2/28/2017
ms.author: jrj;mausher;kevin;barbkess;elbutter
translationtype: Human Translation
ms.sourcegitcommit: bf73ad830226626ddf41cc4ae80e714abf8bcfc2
ms.openlocfilehash: 19e87c61493bd4620120b39a533e9e4b64517538
ms.lasthandoff: 03/01/2017


---
# <a name="what-is-azure-sql-data-warehouse"></a>Что такое хранилище данных SQL Azure?
Хранилище данных SQL Azure — это развернутая в облаке масштабируемая реляционная база данных, способная обрабатывать большие объемы данных и использующая схему вычислений с массовым параллелизмом (MPP). 

Преимущества хранилища данных SQL:

* Объединяет возможности реляционной базы данных SQL Server и возможности развертывания в облаке Azure. 
* Отделяет ресурсы хранилища от вычислительных ресурсов.
* Позволяет увеличивать или уменьшать количество вычислительных ресурсов, а также приостанавливать или возобновлять вычисления. 
* Интеграция с платформой Azure.
* Использует средства SQL Server и Transact-SQL (T-SQL).
* Соответствует различным нормативным требованиям и требованиям к обеспечению безопасности бизнес-процессов, например SOC и ISO.

В этой статье описаны основные возможности хранилища данных SQL.

## <a name="massively-parallel-processing-architecture"></a>Архитектура вычислений с массовым параллелизмом
Хранилище данных SQL является распределенной системой баз данных с массовой параллельной обработкой (MPP). Хранилище данных SQL неявно распределяет данные по многим хранилищам и объектам обработки, не использующим общие ресурсы. Данные хранятся на уровне локально избыточного хранилища класса Premium, поверх которого динамически связанные вычислительные узлы выполняют запросы. При выполнении нагрузки и сложных запросов хранилище данных SQL использует метод разобщения. Запросы, полученные управляющим узлом, оптимизируются для распределения, а затем передаются в вычислительные узлы для работы в параллельном режиме.

Благодаря отделению ресурсов хранилища от вычислительных ресурсов хранилище данных SQL обеспечивает следующие возможности:

* увеличение или уменьшение размера хранилища независимо от вычислений;
* увеличение или уменьшение масштаба вычислений без перемещения данных;
* приостановка вычислений без изменения данных (вы платите только за хранилище);
* возобновление вычислений во время рабочих часов.

На следующей схеме эта архитектура показана более подробно.

![Архитектура хранилища данных SQL][1]

**Управляющий узел.** Отвечает за управление запросами и их оптимизацию. Это внешний интерфейс, который взаимодействует со всеми приложениями и подключениями. Управляющий узел в хранилище данных SQL работает на платформе базы данных SQL, и подключение к нему выполняется соответствующим образом. Управляющий узел скрыто координирует все перемещения данных и вычисления, необходимые для выполнения параллельных запросов к распределенным данным. При отправке T-SQL-запроса в хранилище данных SQL управляющий узел преобразует его в отдельные запросы, которые будут выполняться на каждом вычислительном узле в параллельном режиме.

**Вычислительные узлы.** Главный ресурс хранилища данных SQL. Это базы данных SQL, которые хранят данные и обрабатывают запросы. При добавлении данных хранилище данных SQL распределяет строки между вычислительными узлами. Вычислительные узлы также являются рабочими узлами, выполняющими параллельные запросы к данным. После обработки они передают результаты обратно на управляющий узел. Чтобы завершить запрос, управляющий узел объединяет результаты и возвращает конечный результат.

**Хранилище.** Данные хранятся в хранилище BLOB-объектов Azure. Когда вычислительные узлы взаимодействуют с данными, они выполняют запись и чтение непосредственно в хранилище BLOB-объектов. Так как служба хранилища Azure расширяется прозрачно и бесконечно, хранилище данных SQL обладает теми же свойствами. Вычисления и хранение данных не зависят друг от друга, поэтому хранилище данных SQL может автоматически масштабировать хранилище отдельно от масштабирования вычислений, и наоборот. Хранилище BLOB-объектов Azure также полностью отказоустойчиво и упрощает процесс резервного копирования и восстановления.

**Служба перемещения данных** (DMS) перемещает данные между узлами. DMS обеспечивает доступ вычислительных узлов к данным, необходимым для операций объединения и агрегирования. DMS не относится к службам Azure. Это служба Windows, которая работает вместе с базой данных SQL на всех узлах. Служба DMS выполняется в фоновом режиме. Вам не придется взаимодействовать с ней напрямую. Тем не менее, взглянув на планы запросов, вы можете узнать о времени выполнения операций DMS, так как перемещение данных требуется для выполнения каждого запроса в параллельном режиме.

## <a name="optimized-for-data-warehouse-workloads"></a>Оптимизация для рабочих нагрузок хранилища данных
Подход с использованием MPP поддерживает несколько средств оптимизации производительности, в том числе такие:

* Оптимизатор распределенных запросов и сложный статистический набор для всех данных. Информация о размере данных и их распределении помогает службе оптимизировать запросы. Для этого используется оценка стоимости конкретных распределенных операций с запросами.
* Усовершенствованные алгоритмы и методы, интегрированные в процесс перемещения данных, которые эффективно перемещают данные между вычислительными ресурсами в зависимости от потребности в выполнении запроса. Эти операции перемещения данных являются встроенными, а оптимизация службы перемещения данных происходит автоматически.
* Кластеризованные индексы **columnstore** (по умолчанию). В хранилище данных SQL, где принцип хранения данных основан на столбцах, наблюдается пятикратное (в среднем) увеличение сжатия данных (по сравнению с хранилищем с традиционным построчным хранением) и десятикратное (и более) увеличение производительности запросов. Аналитические запросы, которым необходимо сканировать большое количество строк, отлично работают в индексах columnstore.


## <a name="predictable-and-scalable-performance-with-data-warehouse-units"></a>Прогнозируемая и масштабируемая производительность и единицы использования хранилища данных
Хранилище данных SQL использует те же технологии, что и база данных SQL. Это означает, что пользователи могут ожидать непрерывную и прогнозируемую производительность при выполнении аналитических запросов. Кроме того, им следует ожидать пропорциональное изменение производительности при добавлении или вычитании вычислительных узлов. Распределение ресурсов в хранилище данных SQL измеряется в единицах использования хранилища данных (DWU). DWU — это единицы измерения основных ресурсов, таких как ЦП, память, операции ввода/вывода, выделяемых для хранилища данных SQL. Увеличение числа DWU увеличивает объем ресурсов и производительность. В частности, они обеспечивают такие возможности:

* масштабирование хранилища без привязки к базовому оборудованию или программному обеспечению;
* прогнозирование роста производительности на основе уровня DWU до изменения объема вычислительных ресурсов хранилища данных;
* изменение или перемещение базового оборудования и программного обеспечения экземпляра без влияния на производительность при рабочей нагрузке;
* улучшение базовой архитектуры службы специалистами корпорации Майкрософт без влияния на производительность при рабочей нагрузке;
* повышение производительности, обеспечивающее масштабируемость системы и равномерное влияние (благодаря возможности быстрого повышения производительности в хранилище данных SQL).

Единицы использования хранилища данных рассматриваются в качестве единиц измерения трех метрик, которые тесно связаны с производительностью при рабочей нагрузке хранилища данных. Приведенные ниже основные метрики рабочей нагрузки пропорционально изменяются в соответствии с выбранным количеством единиц DWU.

**Сканирование или объединение.** Стандартный запрос хранения данных, который сканирует большое количество строк, а затем выполняет сложное объединение. Эта операция требует большого количества операций ввода-вывода и интенсивного использования ЦП.

**Загрузка.** Возможность приема данных в службе. Лучше всего выполнять загрузку с помощью PolyBase из Azure Storage Blob или Azure Data Lake. Эта метрика предназначена для тестирования нагрузки сети и ЦП службы.

**Create Table As Select (CTAS)** измеряет возможность копирования таблицы. Эта функция предусматривает чтение данных из хранилища, их распространение по различным узлам устройства и повторную запись в хранилище. Она требует интенсивного использования ЦП и сети, а также большого количества операций ввода-вывода.

## <a name="built-on-sql-server"></a>На основе SQL Server
Хранилище данных SQL работает на основе ядра реляционной СУБД и предусматривает множество функций, необходимых для работы с корпоративным хранилищем данных. Если вы уже знакомы с T-SQL, вы можете легко применить свои знания при работе с хранилищем данных SQL. Примеры в документации помогут вам начать работу, независимо от того, есть ли у вас опыт или вы только приступаете к работе с хранилищем. В целом при разработке элементов языка для хранилища данных SQL мы предусмотрели следующие принципы:

* Хранилище данных SQL использует синтаксис T-SQL для выполнения многих операций. Оно также поддерживает широкий набор традиционных конструкций SQL, например хранимые процедуры, пользовательские функции, секционирование таблиц, индексы и параметры сортировки.
* Хранилище данных SQL также включает в себя разные новые функции SQL Server, в том числе кластеризованные индексы **columnstore**, интеграцию PolyBase и аудит данных (предусматривающий также оценку угроз).
* Некоторые элементы языка Transact-SQL используются не во всех рабочих нагрузках хранилищ данных, а только в более новых версиях SQL Server. Сейчас эти элементы могут быть недоступны. Дополнительные сведения см. в [документации по миграции][Migration documentation].

Используя Transact-SQL и схожесть функций между SQL Server, хранилищем данных SQL, базой данных SQL и системой аналитических платформ, можно разрабатывать решения, которые соответствуют вашим требованиям к хранению и обработке данных. Вы можете выбрать место для хранения данных, исходя из требований к производительности, безопасности и масштабированию, а затем переносить данные между разными системами.

## <a name="data-protection"></a>Защита данных
Все данные хранилища данных SQL хранятся в локально избыточном хранилище Azure класса Premium. Несколько синхронных копий данных сохраняются в локальном центре обработки данных для обеспечения прозрачной защиты данных в случае локальных сбоев. Кроме того, хранилище данных SQL автоматически создает резервные копии активных (используемых) баз данных через регулярные промежутки времени, используя моментальные снимки службы хранилища Azure. Сведения о резервном копировании и восстановлении см. [здесь][Backup and restore overview].

## <a name="integrated-with-microsoft-tools"></a>Интеграция с помощью средств Майкрософт
Хранилище данных SQL также интегрируется со многими знакомыми пользователям средствами SQL Server. Вот эти средства.

**Традиционные средства SQL Server**. Хранилище данных SQL полностью интегрировано со службами SQL Server Analysis Services, Integration Services и Reporting Services.

**Облачные инструменты.** Хранилище данных SQL поддерживает интеграцию с разными службами в Azure, включая фабрику данных, Stream Analytics, машинное обучение и Power BI. Полный список см. в [обзоре интегрированных средств][Integrated tools overview].

**Сторонние инструменты.** Сертифицированную интеграцию с хранилищем данных SQL поддерживает большое количество сторонних инструментов. Полный список см. в статье [Партнеры по бизнес-аналитике хранилища данных SQL][SQL Data Warehouse solution partners].

## <a name="hybrid-data-sources-scenarios"></a>Сценарии для гибридных источников данных
Технология PolyBase обеспечивает использование данных из различных источников, выполняя уже знакомые команды T-SQL. PolyBase позволяет отправлять запросы на нереляционные данные, которые находятся в хранилище BLOB-объектов Azure, как если бы они находились в обычной таблице. С помощью Polybase можно отправлять запросы к нереляционным данным или импортировать такие данные в хранилище данных SQL.

* Для доступа к нереляционным данным технология PolyBase использует внешние таблицы. Определения таблиц находятся в хранилище данных SQL. Их можно открывать с помощью SQL и любых других инструментов, подобно обычным реляционным данным.
* Интеграция Polybase не зависит используемых технологий. PolyBase предоставляет одинаковые компоненты и функциональные возможности для всех поддерживаемых ресурсов. Технология Polybase позволяет читать данные в различных форматах, включая файлы с разделителями и ORC-файлы.
* PolyBase можно использовать для доступа к хранилищу BLOB-объектов, которое также может служить хранилищем кластера HD Insight. Таким образом вы получаете доступ к одним и тем же данным как с помощью реляционных, так и нереляционных инструментов.

## <a name="sla"></a>Соглашение об уровне обслуживания
На хранилище данных SQL распространяется действие Соглашения об уровне обслуживания в рамках аналогичного Соглашения для служб Microsoft Online Services. С дополнительной информацией можно ознакомиться на странице [соглашения об уровне обслуживания для хранилища данных SQL][SLA for SQL Data Warehouse]. Для получения дополнительной информации об SLA для других продуктов посетите страницу [Соглашения об уровне обслуживания] на сайте Azure или скачайте текст соглашения на странице [корпоративного лицензирования][Volume Licensing]. 

## <a name="next-steps"></a>Дальнейшие действия
Теперь, когда вам уже известны некоторые сведения о хранилище данных SQL, узнайте о том, как [создать хранилище данных SQL][create a SQL Data Warehouse] и [загрузить демонстрационные данные][load sample data]. Если вы раньше не работали с Azure, используйте [глоссарий Azure][Azure glossary], чтобы узнать значение новых терминов. Или ознакомьтесь со следующими ресурсами, посвященными хранилищу данных SQL.  

* [Истории успеха клиентов]
* [Блоги]
* [Запросы функций]
* [Видеоролики]
* [Блоги группы консультирования клиентов]
* [Создание запроса в службу поддержки]
* [Форум MSDN]
* [Форум Stack Overflow]
* [Twitter]

<!--Image references-->
[1]: ./media/sql-data-warehouse-overview-what-is/dwarchitecture.png

<!--Article references-->
[Создание запроса в службу поддержки]: ./sql-data-warehouse-get-started-create-support-ticket.md
[load sample data]: ./sql-data-warehouse-load-sample-databases.md
[create a SQL Data Warehouse]: ./sql-data-warehouse-get-started-provision.md
[Migration documentation]: ./sql-data-warehouse-overview-migrate.md
[SQL Data Warehouse solution partners]: ./sql-data-warehouse-partner-business-intelligence.md
[Integrated tools overview]: ./sql-data-warehouse-overview-integrate.md
[Backup and restore overview]: ./sql-data-warehouse-restore-database-overview.md
[Azure glossary]: ../azure-glossary-cloud-terminology.md

<!--MSDN references-->

<!--Other Web references-->
[Истории успеха клиентов]: https://customers.microsoft.com/search?sq=&ff=story_products_services%26%3EAzure%2FAzure%2FAzure%20SQL%20Data%20Warehouse%26%26story_product_families%26%3EAzure%2FAzure%26%26story_product_categories%26%3EAzure&p=0
[Блоги]: https://azure.microsoft.com/blog/tag/azure-sql-data-warehouse/
[Блоги группы консультирования клиентов]: https://blogs.msdn.microsoft.com/sqlcat/tag/sql-dw/
[Запросы функций]: https://feedback.azure.com/forums/307516-sql-data-warehouse
[Форум MSDN]: https://social.msdn.microsoft.com/Forums/azure/en-US/home?forum=AzureSQLDataWarehouse
[Форум Stack Overflow]: http://stackoverflow.com/questions/tagged/azure-sqldw
[Twitter]: https://twitter.com/hashtag/SQLDW
[Видеоролики]: https://azure.microsoft.com/documentation/videos/index/?services=sql-data-warehouse
[SLA for SQL Data Warehouse]: https://azure.microsoft.com/en-us/support/legal/sla/sql-data-warehouse/v1_0/
[Volume Licensing]: http://www.microsoftvolumelicensing.com/DocumentSearch.aspx?Mode=3&DocumentTypeId=37
[Соглашения об уровне обслуживания]: https://azure.microsoft.com/en-us/support/legal/sla/

