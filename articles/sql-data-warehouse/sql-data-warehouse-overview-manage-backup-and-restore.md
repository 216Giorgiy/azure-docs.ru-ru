<properties
   pageTitle="Архивация и восстановление базы данных в хранилище данных SQL Azure (обзор) | Microsoft Azure"
   description="Обзор параметров архивации и восстановления для восстановления базы данных в хранилище данных SQL Azure."
   services="sql-data-warehouse"
   documentationCenter="NA"
   authors="elfisher"
   manager="barbkess"
   editor=""/>

<tags
   ms.service="sql-data-warehouse"
   ms.devlang="NA"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="data-services"
   ms.date="05/05/2016"
   ms.author="elfish;barbkess;sonyama"/>


# Архивация и восстановление базы данных в хранилище данных SQL Azure (обзор)

> [AZURE.SELECTOR]
- [Обзор](sql-data-warehouse-overview-manage-backup-and-restore.md)
- [Портал](sql-data-warehouse-manage-backup-and-restore-tasks-portal.md)
- [PowerShell](sql-data-warehouse-manage-backup-and-restore-tasks-powershell.md)
- [REST](sql-data-warehouse-manage-backup-and-restore-tasks-rest-api.md)

В этой статье рассматриваются основы планирования непрерывности бизнес-процессов и аварийного восстановления в хранилище данных SQL. Хранилища данных являются центральным репозиторием данных для компаний и имеют большое значение для ежедневных операций анализа и бизнес-аналитики на всех уровнях организации. Поэтому надежность хранилища данных, а также возможность восстановления и непрерывность бизнес-процессов имеют первостепенное значение. В этой статье показано, как хранилище данных SQL позволяет восстанавливать базу данных после ошибок пользователей и аварий с помощью таких функций, как восстановление базы данных и геовосстановление.

## Планирование восстановления 

Планы непрерывности бизнес-процессов и аварийного восстановления должны быть оптимизированы с учетом таких параметров:

**Цель времени восстановления (RTO)** — максимально допустимое время до полного восстановления базы данных после аварийного события, т. е. максимальное время недоступности во время сбоев.

**Цель точки восстановления (RPO)** — максимально допустимый интервал времени потерянных обновлений, когда база данных восстанавливается после аварийного события, т. е. максимальная потеря данных во время сбоев.

**Предполагаемое время восстановления (ERT)** — предполагаемый период времени, в течение которого, когда получен запрос на восстановление, база данных восстанавливается полностью.

Дополнительные сведения см. в статье [Непрерывность бизнес-процессов в базе данных SQL Azure][].

## Сценарии восстановления

**Восстановление после сбоев инфраструктуры** — это сценарий восстановления после ошибок инфраструктуры, например сбоев диска. Клиенту нужно обеспечить непрерывность бизнес-процессов в отказоустойчивой инфраструктуре высокой доступности.

**Восстановление после ошибки пользователя** — это сценарий восстановления после непреднамеренного или случайного повреждения либо удаления данных. Если пользователь непреднамеренно или случайно изменяет или удаляет данные, клиенту нужно обеспечить непрерывность бизнес-процессов путем восстановления базы данных до более ранней точки во времени.

**Восстановления после аварий (DR)** — это сценарий восстановления после крупной катастрофы. Если после аварийного события, например стихийного бедствия или регионального сбоя, база данных становится недоступной, клиенту потребуется восстановить базу данных в другом регионе для непрерывности бизнес-процессов.


## Возможности архивации и восстановления

Рассмотрим, как хранилище данных SQL повышает надежность базы данных и обеспечивает возможность восстановления и непрерывность работы в упомянутых выше случаях.


### Избыточность данных

Хранилище данных SQL разделяет вычисления и хранение. Все ваши данные записываются непосредственно в геоизбыточную службу хранилища Azure (RA-GRS). Геоизбыточное хранилище реплицирует данные во вторичный регион, который находится в сотнях километров от первичного региона. В основном и дополнительном регионах данные реплицируются трижды на разных доменах сбоя и доменах обновления. Это гарантирует, что данные будут доступны даже при полном региональном сбое или аварии, если один из регионов станет недоступен. Дополнительную информацию о геоизбыточном хранилище с доступом на чтение см. в статье [Варианты избыточности хранилища Azure][].

### Восстановление базы данных

Эта функция предназначена для восстановления до более ранней точки во времени. Служба хранилища данных SQL Azure защищает все базы данных. Для этого она автоматически создает моментальные снимки хранилища по меньшей мере каждые 8 часов и хранит их в течение 7 дней вместе с дискретным набором точек восстановления. Эти резервные копии хранятся в хранилище Azure RA-GRS и, следовательно, геоизбыточны по умолчанию. Функции автоматической архивации и автоматического восстановления помогают защитить базы данных от случайного повреждения или удаления. Дополнительные сведения о восстановлении базы данных см. в статье [Backup and restore tasks][] \(Задачи архивации и восстановления).

### Геовосстановление

Геовосстановление позволяет восстановить базу данных, если она становится недоступной из-за аварийного события. Так как резервная копия геоизбыточна, ее можно использовать для восстановления базы данных, даже если база данных недоступна из-за сбоя. Восстановленную базу данных можно создать на любом сервере в любом регионе Azure. Помимо восстановления после сбоя геовосстановление можно использовать в других случаях, таких как перемещение или копирование базы данных в другой сервер или регион.

**Время начала восстановления** Для выполнения операции восстановления необходимо изменить строку подключения SQL после восстановления. Операция может привести к безвозвратной потере данных. Поэтому ее следует выполнять, только если сбой будет длиться дольше, чем целевое время восстановления (RTO) приложения. Для подтверждения гарантированного восстановления используйте указанные далее точки данных.

- Постоянная ошибка подключения к базе данных.
- На портале Azure отображается предупреждение об инциденте в регионе с широким диапазоном влияния.


## Дальнейшие действия
Сведения о других важных задачах управления см. в статье [Management overview][] \(Обзор управления).

<!--Image references-->

<!--Article references-->
[Варианты избыточности хранилища Azure]: ../storage/storage-redundancy.md#read-access-geo-redundant-storage
[Backup and restore tasks]: sql-data-warehouse-backup-and-restore-tasks-portal.md
[Finalize a recovered database]: ../sql-database/sql-database-recovered-finalize.md
[Management overview]: sql-data-warehouse-overview-management.md
[Непрерывность бизнес-процессов в базе данных SQL Azure]: ../sql-database/sql-database-business-continuity.md

<!--MSDN references-->


<!--Other Web references-->

<!---HONumber=AcomDC_0518_2016-->