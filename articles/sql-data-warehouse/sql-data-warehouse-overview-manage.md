<properties
   pageTitle="Управление базами данных в хранилище данных SQL Azure | Microsoft Azure"
   description="Общие сведения об управлении базами данных в хранилище данных SQL. Рассматриваются средства управления, динамические административные представления и масштабирование производительности, устранение неполадок с запросами, создание надлежащих политик безопасности и восстановление базы данных после повреждения данных или регионального сбоя."
   services="sql-data-warehouse"
   documentationCenter="NA"
   authors="barbkess"
   manager="barbkess"
   editor=""/>

<tags
   ms.service="sql-data-warehouse"
   ms.devlang="NA"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="data-services"
   ms.date="05/03/2016"
   ms.author="barbkess;sonyama;"/>

# Управление базами данных в хранилище данных SQL Azure

Хранилище данных SQL позволяет автоматизировать многие аспекты управления базами данных. Например, для масштабирования производительности достаточно выбрать и оплатить необходимый уровень вычислительных ресурсов, после чего всю работу по увеличению и уменьшению масштаба выполнит хранилище данных SQL.

Без сомнения, вам потребуется отслеживать рабочую нагрузку для определения требований к производительности, а также устранять неполадки с долго выполняющимися запросами. Также нужно будет выполнить ряд задач безопасности, настроив разрешения для пользователей и имен входа.

В этом обзоре рассматриваются следующие аспекты управления хранилищем данных SQL.

- Средства управления
- Масштабирование вычислительных ресурсов
- Остановка и возобновление
- Рекомендации по производительности
- Мониторинг запросов
- Безопасность
- Архивация и восстановление

## Средства управления

Для управления базами данных в хранилище данных SQL можно использовать различные средства. По мере накопления опыта в управлении базами данных у вас появятся свои предпочитаемые средства для различных задач.

### Портал Azure
[Портал Azure][] — это веб-портал, где можно создавать, обновлять и удалять базы данных, а также отслеживать ресурсы базы данных. Это хороший инструмент для тех, кто только знакомится с Azure или управляет небольшим количеством баз данных хранилищ, а также для оперативного выполнения любой задачи по управлению.

Начало работы с порталом Azure описывается в статье [Создание хранилища данных SQL (портал Azure)][].

### SQL Server Data Tools в Visual Studio
Средства [SQL Server Data Tools][] \(SSDT) в Visual Studio предлагают возможности подключения, управления и разработки для баз данных. Если вы не новичок в разработке приложений и уже знакомы с Visual Studio или другими интегрированными средами разработки (IDE), предлагаем обратить внимание на SSDT в составе Visual Studio.

Средства SSDT содержат обозреватель объектов сервера SQL, который позволяет визуализировать, подключать и выполнять скрипты для баз данных хранилища данных SQL. Чтобы быстро подключиться к хранилищу данных SQL, нажмите кнопку **Открыть в Visual Studio** в командной строке во время просмотра сведений базы данных на классическом портале Azure.

Начало работы со средствами SSDT в Visual Studio описывается в статье [Подключение к хранилищу данных SQL Azure с помощью Visual Studio][].

### Программы командной строки
Средства командной строки идеально подходят для автоматизации рабочих нагрузок. PowerShell и sqlcmd предлагают отличные возможности по автоматизации процессов. Рекомендуется использовать эти средства для управления большим количеством логических серверов и развертывания изменений ресурсов в рабочей среде, так как обязательные задачи должны быть включены в скрипт, а затем автоматизированы.

### Динамические административные представления 

Динамические административные представления предлагают базовые средства управления хранилищем данных SQL. Практически все данные, которые появляются на портале, связаны с динамическими административными представлениями. Список динамических административных представлений хранилища данных SQL см. в статье [Системные представления хранилища данных SQL][].

Начало работы описывается в статьях [Подключение и выполнение запросов с помощью sqlcmd][] и [Создание базы данных (PowerShell)][].

## Масштабирование вычислительных ресурсов

В хранилище данных SQL можно быстро увеличить или уменьшить производительность, настроив объем вычислительных ресурсов ЦП, памяти и пропускной способности ввода-вывода. Для масштабирования производительности достаточно настроить число единиц использования хранилища данных, которые хранилище данных SQL выделяет для базы данных. Хранилище данных SQL быстро вносит изменения и применяет все базовые изменения в оборудовании или программном обеспечении.

Дополнительные сведения о масштабировании единиц использования хранилища данных см. в статье [Масштабирование производительности][].

##  Остановка и возобновление

Для сокращения затрат можно приостанавливать и возобновлять работу вычислительных ресурсов по требованию. Например, если база данных не будет использоваться ночью и по выходным, ее работу можно приостанавливать на это время и возобновлять днем. Когда работа база данных приостановлена, оплата за единицы DWU не взимается.

Дополнительные сведения см. в статьях [Приостановка работы вычислительных ресурсов][] и [Возобновление работы вычислительных ресурсов][].

## Рекомендации по производительности

Приступая к работе с новой технологией, можно сэкономить много времени благодаря советам и рекомендациям, которые правильнее всего использовать с самого начала. Рекомендации приводятся во многих разделах.

Перечень наиболее важных соображений по разработке рабочих нагрузок см. в статье [Рекомендации по использованию хранилища данных SQL][].

## Мониторинг запросов

Иногда какой-то запрос выполняется слишком долго, но не известно, какой именно. Хранилище данных SQL предлагает динамические административные представления, которые позволяют выяснить, какой запрос выполняется слишком долго.

Сведения о долго выполняющихся запросах см. в статье [Мониторинг рабочей нагрузки с помощью динамических административных представлений][].

## Безопасность

Для поддержания безопасности системы необходимо быть настороже и отслеживать различные типы несанкционированного доступа. В системе безопасности необходимо задать правила брандмауэра, разрешающие подключаться только с разрешенных IP-адресов. Также требуется надлежащая проверка подлинности учетных данных пользователя. После подключения пользователя к базе данных он должен иметь разрешения на выполнение только минимального количества действий. Для защиты данных можно использовать шифрование. Также важно внедрить политику аудита и отслеживания, чтобы иметь возможность восстанавливать события при обнаружении подозрительных действий.

Дополнительные сведения об управлении безопасностью см. в статье [Обзор вопросов безопасности][].

## Архивация и восстановление

Существует два способа восстановления базы данных. Если повреждены некоторые данные в базе данных или была допущена ошибка, можно восстановить моментальный снимок базы данных. При сбое или аварии, которые приводят к недоступности одного из регионов, можно воссоздать базу данных в другом регионе.

Хранилище данных SQL автоматически создает резервные копии базы данных через определенные интервалы. Расписание резервного копирования данных и политика хранения описываются в статье [Высокая надежность][].

### Геоизбыточное хранилище

Так как хранилище данных SQL разделяет процессы вычисления и хранения, все данные записываются непосредственно в геоизбыточное хранилище Azure (RA-GRS). Геоизбыточное хранилище реплицирует данные во вторичный регион, который находится в сотнях километров от первичного региона. В основном и дополнительном регионах данные реплицируются трижды на разных доменах сбоя и доменах обновления. Это гарантирует, что данные будут доступны даже при полном региональном сбое или аварии, если один из регионов станет недоступен. Дополнительную информацию о геоизбыточном хранилище с доступом на чтение см. в статье [Варианты избыточности хранилища Azure][].

### Восстановление базы данных

Эта функция предназначена для восстановления до более ранней точки во времени. Служба хранилища данных SQL защищает все базы данных. Для этого она автоматически создает моментальные снимки хранилища по меньшей мере каждые 8 часов и хранит их в течение 7 дней вместе с дискретным набором точек восстановления. Эти резервные копии хранятся в хранилище Azure RA-GRS и, следовательно, геоизбыточны по умолчанию. Функции автоматического резервного копирования и восстановления доступны без дополнительной оплаты, поэтому для защиты базы данных от случайного повреждения или удаления вам не нужно ничего платить и ничего администрировать.

Дополнительные сведения о восстановлении баз данных см. в статье [Восстановление из моментального снимка][].

### Геовосстановление

Геовосстановление позволяет восстановить базу данных, если она становится недоступной из-за аварийного события. Вы можете обратиться в службу поддержки для восстановления базы данных из геоизбыточной резервной копии и создания новой базы данных в любом регионе Azure. Так как резервная копия геоизбыточна, ее можно использовать для восстановления базы данных, даже если база данных недоступна из-за сбоя. Функция геовосстановления предоставляется без дополнительной оплаты.

Геовосстановление описывается в статье [Геовосстановление из моментального снимка][].

## Дальнейшие действия
Правильное проектирование баз данных упростит управление ими в хранилище данных SQL. Дополнительные сведения см. в статье [Общие сведения о разработке][].

<!--Image references-->

<!--Article references-->
[Варианты избыточности хранилища Azure]: storage-redundancy.md#read-access-geo-redundant-storage
[Создание хранилища данных SQL (портал Azure)]: sql-data-warehouse-get-started-provision.md
[Создание базы данных (PowerShell)]: sql-data-warehouse-get-started-provision-powershell
[connection]: sql-data-warehouse-develop-connections.md
[Подключение к хранилищу данных SQL Azure с помощью Visual Studio]: sql-data-warehouse-get-started-connect.md
[Подключение и выполнение запросов с помощью sqlcmd]: sql-data-warehouse-get-started-connect-sqlcmd.md
[Общие сведения о разработке]: sql-data-warehouse-overview-development.md
[Геовосстановление из моментального снимка]: sql-data-warehouse-backup-and-geo-restore-from-snapshot.md
[Высокая надежность]: sql-data-warehouse-overview-expectations.md#high-reliability
[Мониторинг рабочей нагрузки с помощью динамических административных представлений]: sql-data-warehouse-manage-monitor.md
[Приостановка работы вычислительных ресурсов]: sql-data-warehouse-overview-scalability.md#pause-compute-bk
[Восстановление из моментального снимка]: sql-data-warehouse-backup-and-restore-from-snapshot.md
[Возобновление работы вычислительных ресурсов]: sql-data-warehouse-overview-scalability.md#resume-compute-performance-bk
[Масштабирование производительности]: sql-data-warehouse-overview-scalability.md#scale-performance-bk
[Обзор вопросов безопасности]: sql-data-warehouse-overview-security.md
[Рекомендации по использованию хранилища данных SQL]: sql-data-warehouse-best-practices.md
[Системные представления хранилища данных SQL]: sql-data-warehouse-reference-tsql-system-views.md

<!--MSDN references-->
[SQL Server Data Tools]: https://msdn.microsoft.com/library/mt204009.aspx

<!--Other web references-->
[Портал Azure]: http://portal.azure.com/

<!---HONumber=AcomDC_0504_2016-->