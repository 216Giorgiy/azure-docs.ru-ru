<properties
   pageTitle="Начало работы. Подключение к хранилищу данных Azure SQL | Microsoft Azure"
   description="Начало работы. Подключение к хранилищу данных SQL и выполнение запросов."
   services="sql-data-warehouse"
   documentationCenter="NA"
   authors="jrowlandjones"
   manager="barbkess"
   editor=""/>

<tags
   ms.service="sql-data-warehouse"
   ms.devlang="NA"
   ms.topic="get-started-article"
   ms.tgt_pltfrm="NA"
   ms.workload="data-services"
   ms.date="10/01/2015"
   ms.author="JRJ@BigBangData.co.uk;barbkess"/>

# Начало работы. Подключение к хранилищу данных Azure SQL
В этом кратком руководстве рассматриваются подключение и отправка запроса к подготовленному экземпляру хранилища данных SQL с помощью двух разных средств:

- **Visual Studio** — встроенный редактор кода и отладчик Visual Studio под названием SQL Server Data Tools (SSDT) полностью совместим с хранилищем данных SQL. Это позволяет легко подключаться к хранилищу данных SQL, отправлять в него запросы и управлять им.  

> [AZURE.NOTE]Для хранилища данных SQL требуется по крайней мере предварительная версия 12.0.50623 служб SSDT или более поздняя версия.

- **sqlcmd** — это средство командной строки, которое обеспечивает простое подключение и отправку запросов.  

К концу статьи будут выполнены следующие задачи:

1. Установка и обновление Visual Studio 2013.
2. Создание подключения к хранилищу данных SQL с помощью SSDT.
3. Выполнение запросов к базе данных хранилища данных SQL.

>[AZURE.NOTE]Предполагается, что вы выполнили руководство по подготовке или у вас есть хранилище данных SQL. Если вы еще не подготовили хранилище данных SQL, ознакомьтесь с [кратким руководством по этому вопросу](sql-data-warehouse-get-started-provision.md).

## Настройка Visual Studio для разработки##
Для разработки группа по работе с хранилищем данных SQL рекомендует использовать Visual Studio 2013 или более поздней версии в сочетании со средствами SQL Server Data Tools. Далее рассматривается загрузка и обновление Visual Studio 2013, если у вас еще не установлена последняя версия этого продукта.

Дополнительные сведения о средствах SSDT см. в [полной документации по SSDT](https://msdn.microsoft.com/library/azure/hh272686.aspx).

### Установка Visual Studio 2013 ###
Перейдите на веб-сайт Visual Studio 2013, загрузите и установите копию Visual Studio. Обратите внимание, что для нужд хранилища данных SQL подойдет любой бесплатный выпуск. Выберите выпуск на свое усмотрение.

<a href="https://www.visualstudio.com/downloads/download-visual-studio-vs#DownloadFamilies_5" target="blank">Установка Visual Studio 2013</a>

### Обновление Visual Studio 2013 ###
Программа Visual Studio 2013 уже установлена? Отлично! Чтобы проверить, что у вас установлена последняя версия, выполните следующие действия. Вы можете перейти к следующему этапу.

1. Откройте Visual Studio 2013.
2. Откройте меню **Средства** и выберите пункт **Расширения и обновления**.
3. Перейдите далее к пунктам дерева **Обновления** и **Обновления продукта**.
4. Если доступных обновлений нет, можно закрыть окно **Расширения и обновления** и перейти к следующей задаче в этом кратком руководстве.

Если имеется обновление для Visual Studio, нажмите кнопку **Обновить**. Будет запущена загрузка последнего обновления для Visual Studio 2013.

Закройте окно **Расширения и обновления**, а также программу Visual Studio 2013, прежде чем продолжить.

5. Нажмите кнопку **Запустить**, чтобы установить последнее обновление Visual Studio 2013.

6. Примите условия лицензионного соглашения и нажмите кнопку **Установить**. Подтвердите сообщения в окне контроля учетных записей (UAC).

7. Чтобы выполнить установку, нажмите кнопку **Запуск**.

На этом обновление Visual Studio 2013 завершено.

### Обновление SSDT
> [AZURE.IMPORTANT]Для хранилища данных SQL требуется по крайней мере предварительная версия 12.0.50623 служб SSDT или более поздняя версия.

Разработчики служб SSDT часто обновляют подключаемый модуль, добавляя новые возможности, поэтому обновление нужно выполнять регулярно. Это очень просто. Чтобы проверить, требуется ли обновить службы SSDT, выполните следующие действия.

1. Откройте Visual Studio 2013.  
2. Откройте меню **Средства** и выберите пункт **Расширения и обновления**.
3. Перейдите далее к пунктам дерева **Обновления** и **Обновления продукта**.
4. Если доступных обновлений нет, можно закрыть окно **Расширения и обновления** и перейти к следующей задаче в этом кратком руководстве.

Если есть обновление с именем «Обновление Microsoft SQL Server для средств работы с базами данных», нажмите кнопку **Обновить**. Будет запущена загрузка последней версии служб SSDT.

5. Нажмите кнопку **Запустить**, чтобы установить последнюю версию служб SSDT.

6. Примите условия лицензионного соглашения, а затем нажмите кнопку **Установить**.

7. Нажмите кнопку **Закрыть**, чтобы завершить обновление служб SSDT.

8. Закройте окно **Расширения и обновления**.

Теперь у вас установлена последняя версия Visual Studio 2013 с обновленным расширением SSDT.

> [AZURE.NOTE]Сейчас мы рекомендуем использовать [предварительную версию 12.0.50623 служб SSDT для Visual Studio 2013 или более позднюю версию](http://go.microsoft.com/fwlink/?LinkID=616714&clcid=0x409).

## Подключение к Visual Studio 2013
Если вы используете нужную версию Visual Studio, подключиться к экземпляру хранилища данных SQL можно двумя способами.

### Подключение из Visual Studio
Чтобы установить подключение, достаточно открыть обозреватель объектов SQL Server и передать сведения о подключении.

1. Откройте Visual Studio.
2. В меню **Вид** выберите из раскрывающегося списка пункт **Обозреватель объектов SQL Server**.

> [AZURE.NOTE]Убедитесь, что выбран обозреватель объектов SQL Server, а *не* обозреватель серверов. Названия похожи, но это совершенно разные средства. Они располагаются рядом, поэтому будьте внимательны, чтобы правильно выбрать средство.

Обозреватель объектов SQL Server запущен.


3. В обозревателе объектов SQL Server нажмите кнопку **Добавить сервер**.

4. Заполните диалоговое окно **Подключение к серверу** значениями, которые вы выбрали при создании логического сервера. Кроме того, перед подключением нажмите кнопку «Параметры» и укажите базу данных, к которой осуществляется подключение (ваш экземпляр хранилища данных SQL).

Установите флажок **Запомнить пароль** по своему усмотрению. Он помогает экономить время, однако любой пользователь с физическим доступом к вашему профилю сможет выполнять запросы под вашей учетной записью.

> [AZURE.NOTE]Помните, что имя сервера должно быть полным. Имя сервера должно соответствовать правилу *ServerName*.database.windows.net, где *ServerName* — это имя, присвоенное логическому серверу.

После ввода учетных данных щелкните **Подключить**.

Теперь подключение установлено, и логический сервер хранилища данных SQL зарегистрирован в обозревателе объектов SQL Server.

### Подключение через портал Azure
Перейдите в Visual Studio непосредственно с портала Azure.

1. Войдите на [портал Azure](http://manage.windowsazure.com/).
2. Выберите экземпляр хранилища данных SQL в колонке **Обзор**.
3. В верхней части колонки хранилища данных SQL выберите **Открыть в Visual**.
4. Если вы не настроили брандмауэр для IP-адреса клиентской машины, выберите **Настройка брандмауэра**.

	а. Введите значения в поля **Имя правила**, **Начальный IP-адрес** и **Конечный IP-адрес**.

	b. Щелкните **Сохранить** в верхней части колонки.
5. Щелкните **Открыть в Visual Studio**.
6. Откроется программа Visual Studio и запрос на ввод учетных данных.
7. После ввода учетных данных и подключения сервер и экземпляры хранилища данных появятся на панели обозревателя объектов SQL Server.  

## Подключение к хранилищу данных SQL с помощью sqlcmd

Кроме того, подключиться к хранилищу данных SQL вы можете с помощью средства командной строки [sqlcmd](https://msdn.microsoft.com/library/azure/ms162773.aspx), которое входит в состав SQL Server или [Microsoft Command Line Utilities 11 для SQL Server](http://go.microsoft.com/fwlink/?LinkId=321501). Программа sqlcmd позволяет вводить инструкции Transact-SQL, системные процедуры и файлы скриптов в командной строке.

Чтобы подключиться к определенному экземпляру хранилища данных SQL с помощью sqlcmd, откройте командную строку и введите **sqlcmd** и строку подключения к базе данных хранилища данных SQL. Строка подключения должна содержать следующие параметры:

+ **User (-U):** пользователь сервера в формате `<`пользователь`>`@`<`имя сервера`>`.database.windows.net.
+ **Password (-P):** пароль, связанный с пользователем.
+ **Server (-S):** сервер в формате `<`имя сервера`>`.database.windows.net.
+ **Database (-D):** имя базы данных.
+ **Enable Quoted Identifiers (-I):** для подключения к экземпляру хранилища данных SQL необходимо включить нестандартные идентификаторы.

Таким образом, для подключения к экземпляру хранилища данных SQL нужно ввести следующее:

```
C:\>sqlcmd -S <Server Name>.database.windows.net -d <Database> -U <User> -P <Password> -I
```

После подключения можно подавать любые поддерживаемые инструкции Transact-SQL для экземпляра. Например, инструкция [CREATE TABLE](https://msdn.microsoft.com/library/azure/dn268335.aspx), используемая ниже, позволяет создать таблицу.

```
C:\>sqlcmd -S <Server Name>.database.windows.net -d <Database> -U <User> -P <Password> -I
1> CREATE TABLE table1 (Col1 int, Col2 varchar(20));
2> GO
3> QUIT
```

Дополнительные сведения о sqlcmd см. в [документации по sqlcmd](https://msdn.microsoft.com/library/azure/ms162773.aspx).

<!--NOTE: SQL DB does not support the -z/-Z parameters for changing users password with SQLCMD.  Do we support this? -->

## Запуск образцов запросов ##

Теперь, когда мы зарегистрировали сервер, давайте напишем запрос.

1. Щелкните пользовательскую базу данных в SSDT.

2. Нажмите кнопку **Создать запрос**. Откроется новое окно.

3. Напишите запрос. Введите следующий код в окне запроса:

	```
	SELECT  COUNT(*)
	FROM    sys.tables;
	```

4. Выполните запрос.

	Чтобы выполнить запрос, щелкните зеленую стрелку или воспользуйтесь сочетанием клавиш `CTRL`+`SHIFT`+`F5`.

## Дальнейшие действия ##
Теперь, когда вы можете подключиться и отправить запрос, попробуйте [загрузить демонстрационные данные][].

[загрузить демонстрационные данные]: ./sql-data-warehouse-get-started-load-samples.md
[developing code]: ./articles/sql-data-warehouse-overview-develop/

<!---HONumber=Oct15_HO2-->