<properties
   pageTitle="Начало работы. Подключение к хранилищу данных SQL | Microsoft Azure"
   description="Начало работы. Подключение к хранилищу данных SQL и выполнение запросов."
   services="sql-data-warehouse"
   documentationCenter="NA"
   authors="jrowlandjones"
   manager="barbkess"
   editor=""/>

<tags
   ms.service="sql-data-warehouse"
   ms.devlang="NA"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="data-services"
   ms.date="06/23/2015"
   ms.author="JRJ@BigBangData.co.uk;barbkess"/>
   
# Начало работы. Подключение к хранилищу данных SQL
В этом кратком руководстве рассматриваются подключение и отправка запроса к подготовленному экземпляру хранилища данных SQL с помощью двух разных средств:

**Visual Studio** — встроенный редактор кода и отладчик Visual Studio — и средства SQL Server Data Tools, которые полностью совместимы с SQLDW и обеспечивают простое подключение, отправку запросов и управление хранилищем данных SQL.

> [AZURE.NOTE]Для хранилища данных SQL требуется по крайней мере предварительная версия 12.0.50623 служб SSDT или более поздняя версия.

**sqlcmd** — это средство командной строки, которое обеспечивает простые возможности подключения и отправки запросов.

К концу статьи будут выполнены следующие задачи:

1. Установка и обновление Visual Studio 2013
2. Создание подключения к хранилищу данных SQL с помощью SSDT
3. Выполнение запросов к базе данных хранилища данных SQL

>[AZURE.NOTE]Предполагается, что вы выполнили руководство по подготовке или у вас есть хранилище данных SQL. Если вы еще не подготовили хранилище данных SQL, ознакомьтесь с кратким руководством по этому вопросу.

## Настройка Visual Studio для разработки##
Для разработки группа по работе с хранилищем данных SQL рекомендует использовать Visual Studio 2013 или более поздней версии в сочетании со средствами SQL Server Data Tools. Далее рассматривается загрузка и обновление Visual Studio 2013, если у вас еще не установлена последняя версия этого продукта.

Дополнительные сведения о средствах SSDT см. в [полной документации по SSDT](https://msdn.microsoft.com/library/azure/hh272686.aspx).

### Установка Visual Studio 2013 ###
Перейдите на веб-сайт Visual Studio 2013, загрузите и установите копию Visual Studio. Обратите внимание, что для нужд хранилища данных SQL подойдет любой бесплатный выпуск. Выберите версию на ваше усмотрение.

<a href="https://www.visualstudio.com/downloads/download-visual-studio-vs#DownloadFamilies_5" target="blank">Установка Visual Studio 2013</a>

### Обновление Visual Studio 2013 ###
Программа Visual Studio 2013 уже установлена? Отлично! Чтобы проверить, что у вас установлена последняя версия, выполните следующие действия. Вы можете перейти к следующему этапу.

1. Запустите Visual Studio 2013
2. Щелкните меню "Сервис" и выберите "Расширения и обновления...".
3. Перейдите далее к пунктам дерева объектов "Обновления" и "Обновления продукта".
4. Если доступных обновлений нет, можно закрыть окно "Расширения и обновления" и перейти к следующей задаче в этом кратком руководстве.

Если имеется обновление для Visual Studio, нажмите кнопку "Обновить". Будет запущена загрузка последнего обновления для Visual Studio 2013.

Закройте окно "Расширения и обновления", а также Visual Studio 2013, прежде чем продолжить.

5. Нажмите кнопку "Запустить", чтобы установить последнее обновление Visual Studio 2013.

6. Примите условия лицензионного соглашения и нажмите кнопку "Установить". Примите возможные сообщения со стороны контроля учетных записей UAC.

7. Для выполнения установки нажмите кнопку "Пуск".

На этом обновление Visual Studio 2013 завершено.

### Обновление SSDT 
> [AZURE.IMPORTANT]Для хранилища данных SQL требуется по крайней мере предварительная версия 12.0.50623 служб SSDT или более поздняя версия.

Разработчики служб SSDT обновляют плагин очень часто, добавляя новые возможности, поэтому обновление нужно выполнять регулярно. Это очень просто. Чтобы проверить, требуется ли обновить службы SSDT, выполните следующие действия.

1. Откройте Visual Studio 2013.  
2. Щелкните меню "Сервис" и выберите "Расширения и обновления...".
3. Перейдите далее к пунктам дерева объектов "Обновления" и "Обновления продукта".
4. Если доступных обновлений нет, можно закрыть окно "Расширения и обновления" и перейти к следующей задаче в этом кратком руководстве.

Если обновление с именем "Обновление Microsoft SQL Server для средств работы с базами данных" имеется, нажмите кнопку "Обновить".

Будет запущена загрузка последней версии служб SSDT. На следующем рисунке показана программа SSDTSetup.exe в диспетчере загрузок Internet Explorer.

5. Нажмите кнопку "Запустить", чтобы установить последнюю версию служб SSDT.

6. Примите условия лицензионного соглашения, а затем нажмите кнопку "Установить".

7. Нажмите кнопку "Закрыть", чтобы завершить обновление служб SSDT.

8. Закройте окно "Расширения и обновления".

Теперь у вас установлена последняя версия Visual Studio 2013 с обновленным расширением служб SSDT.

> [AZURE.NOTE]В настоящее время мы рекомендуем использовать [предварительную версию 12.0.50623 служб SSDT для Visual Studio 2013 или более позднюю версию](http://go.microsoft.com/fwlink/?LinkID=616714&clcid=0x409).

## Подключение к Visual Studio 2013
Если вы используете нужную версию Visual Studio, подключиться к экземпляру хранилища данных SQL можно двумя способами:

### Из Visual Studio
Чтобы установить соединение, все, что потребуется, — это открыть обозреватель объектов SQL Server и передать сведения о соединении.

1. Запустите Visual Studio
2. В меню "Вид" выберите "Обозреватель объектов SQL Server" в раскрывающемся списке.

> [AZURE.NOTE]Убедитесь, что выбран обозреватель объектов SQL Server, а ***не*** обозреватель серверов. Названия похожи, но это совершенно разные средства. Средства располагаются рядом, поэтому отнеситесь внимательно к выбору нужного средства.

Обозреватель объектов SQL Server запущен.


3. В обозревателе объектов SQL Server нажмите кнопку "Добавить сервер". Эта операция выделена на приведенном ниже рисунке.

4. Укажите данные в диалоговом окне "Подключение к серверу".

Используйте значения, которые были заданы при создании логического сервера.

Флажок "Запомнить пароль" можно установить по своему усмотрению. Можно сэкономить время, однако любой пользователь с физическим доступом к вашему профилю сможет выполнять запросы под этой учетной записью.

> [AZURE.NOTE]Помните, что имя сервера должно быть полным. Имя сервера должно соответствовать правилу ***ServerName***.database.windows.net, где ***ServerName*** — это имя, присвоенное логическому серверу.

Щелкните "Подключение" после ввода учетных данных.

Теперь подключение установлено, и логический сервер SQLDW зарегистрирован в обозревателе объектов SQL Server.
    
### На портале Azure
Перейдите в Visual Studio непосредственно с портала Azure.

1. Войдите на [портал управления Azure](http://manage.windowsazure.com/).
2. Выберите экземпляр SQLDW в колонке "Обзор". 
3. В верхней части колонки SQLDW выберите "Открыть в Visual...".
4. Если вы не настроили брандмауэр для IP-адреса клиентской машины, выберите "Настройка брандмауэра".
	1. Введите "Имя правила", "Начальный IP-адрес" и "Конечный IP-адрес". 
	2. Щелкните "Сохранить" в верхней части колонки.   
5. Щелкните "Открыть в Visual Studio". 
6. Visual Studio откроется и предложит ввести учетные данные 
7. После ввода учетных данных и установки соединения сервер и экземпляры хранилища данных появятся на панели обозревателя объектов SQL Server.  

## Подключение к хранилищу данных SQL с помощью sqlcmd

Вы также можете подключиться к хранилищу данных SQL с помощью средства командной строки [sqlcmd](https://msdn.microsoft.com/library/azure/ms162773.aspx), которое включено в состав SQL Server или [Microsoft Command Line Utilities 11 для SQL Server](http://go.microsoft.com/fwlink/?LinkId=321501). Программа sqlcmd позволяет вводить инструкции Transact-SQL, системные процедуры и файлы скриптов в командной строке.

Для подключения к определенному экземпляру хранилища данных SQL с помощью sqlcmd откройте командную строку и введите *sqlcmd* и строку подключения для базы данных хранилища данных SQL. Строка подключения должна содержать следующие параметры:

+ **User (-U):** пользователь сервера в виде `<`пользователь`>`@`<`имя сервера`>`.database.windows.net
+ **Password (-P):** пароль, связанный с пользователем
+ **Server (-S):** сервер в виде `<`имя сервера`>`.database.windows.net
+ **Database (-D):** имя базы данных 
+ **Enable Quoted Identifiers (-I):** идентификаторы в кавычках должны быть включены для подключения к экземпляру хранилища данных SQL. 

Таким образом, для подключения к экземпляру хранилища данных SQL нужно ввести следующее.

```
C:\>sqlcmd -U <User>@<Server Name>.database.windows.net -P <Password> -S <Server Name>.database.windows.net -d <Database> -I
```

После подключения можно подавать любые поддерживаемые инструкции Transact-SQL для экземпляра. Например, инструкция [CREATE TABLE](https://msdn.microsoft.com/library/azure/dn268335.aspx) позволяет создать таблицу.

```
C:\>sqlcmd -U <User>@<Server Name>.database.windows.net -P <Password> -S <Server Name>.database.windows.net -d <Database> -I
1> CREATE TABLE table1 (Col1 int, Col2 varchar(20));
2> GO
3> QUIT
```
	
Дополнительные сведения о sqlcmd см. в [документации по sqlcmd](https://msdn.microsoft.com/library/azure/ms162773.aspx).

<!--NOTE: SQL DB does not support the -z/-Z parameters for changing users password with SQLCMD.  Do we support this? -->

## Выполнение образцов запросов ##

Теперь, когда мы зарегистрировали сервер, давайте напишем запрос.

1. Щелкните пользовательскую базу данных в службах SSDT

2. Нажмите кнопку "Создать запрос"

   Откроется новое окно

3. Напишите запрос

	Введите следующий код в окне запроса:

	```
	SELECT  COUNT(*)
	FROM    sys.tables;
	```

4. Выполните запрос

	Чтобы выполнить запрос, щелкните зеленую стрелку ниже или воспользуйтесь сочетанием клавиш `CTRL`+`SHIFT`+`F5`.

## Дальнейшие действия ##
[Start developing code]: ./articles/sql-data-warehouse-overview-develop/

<!---HONumber=July15_HO4-->