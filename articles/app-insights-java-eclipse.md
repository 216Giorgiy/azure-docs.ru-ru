<properties 
	pageTitle="Приступая к работе с Application Insights на Java в Eclipse" 
	description="Используйте подключаемый модуль Eclipse, чтобы добавить в свой веб-сайт Java функцию Application Insights мониторинга производительности и использования." 
	services="application-insights" 
    documentationCenter="java"
	authors="alancameronwills" 
	manager="keboyd"/>

<tags 
	ms.service="application-insights" 
	ms.workload="tbd" 
	ms.tgt_pltfrm="ibiza" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="03/03/2015" 
	ms.author="awills"/>
 
# Приступая к работе с Application Insights на Java в Eclipse

Пакет SDK Application Insights передает данные телеметрии из веб-приложения Java, что позволяет вам анализировать параметры использования и производительности. Подключаемый модуль Eclipse для Application Insights автоматически устанавливает пакет SDK в проекте \(что позволяет вам получать актуальные данные телеметрии\) и интерфейс API, который можно использовать для написания пользовательских элементов телеметрии.


## Предварительные требования

В настоящее время подключаемый модуль работает для динамических веб-проектов в Eclipse. \([Добавление Application Insights в другие типы проектов Java][java].\)

Что вам понадобится:

* Oracle JRE 1.6 или более поздней версии;
* подписка на [Microsoft Azure](http://azure.microsoft.com/). \(Можно начать с [бесплатной пробной версии](http://azure.microsoft.com/pricing/free-trial/).\);
* [интегрированная среда разработки Eclipse для разработчиков Java EE](http://www.eclipse.org/downloads/), версия Indigo или более поздняя;
* Windows 7 или более поздней версии либо Windows Server 2008 или более поздней версии.

## Установка пакета SDK для Eclipse \(один раз\)

Необходимо выполнить один раз на каждом из компьютеров. На этом шаге устанавливается набор средств, который позволит добавить пакет SDK для каждого динамического веб-проекта.

1. В Eclipse щелкните "Help" \(Справка\), "Install New Software" \(Установка нового программного обеспечения\).

    ![Help, Install New Software](./media/app-insights-java-eclipse/0-plugin.png)

2. Пакет SDK находится по адресу http://dl.msopentech.com/eclipse в разделе Azure Toolkit.
3. Снимите флажок **Contact all update sites...** \(При установке обращаться ко всем сайтам обновления для поиска обновленного ПО\).

    ![Для установки пакета SDK Application Insights снимите флажок "Contact all update sites..."](./media/app-insights-java-eclipse/1-plugin.png)

Оставшиеся действия выполните для каждого проекта Java.

## Получение ключа инструментирования Application Insights

Аналитические данные по использованию и производительности будут отображаться в ресурсе Azure на веб-портале Azure. На этом шаге настраивается ресурс Azure для вашего приложения.

1. Войдите в [портал Microsoft Azure](https://portal.azure.com). \(Необходима [подписка Azure](http://azure.microsoft.com/).\)
2. Создание нового ресурса Application Insights

    ![Нажмите кнопку "+" и выберите пункт "Application Insights"](./media/app-insights-java-get-started/01-create.png)
3. Задайте тип приложения: веб-приложение Java.

    ![Введите имя, выберите веб-приложение Java и нажмите кнопку "Создать"](./media/app-insights-java-get-started/02-create.png)
4. Найдите ключ инструментирования нового ресурса. Он потребуется для вставки в проект Eclipse.

    ![В обзоре нового ресурса щелкните "Свойства" и скопируйте ключ инструментирования](./media/app-insights-java-get-started/03-key.png)

## Добавление пакета SDK в проект Java

1. Добавьте Application Insights из контекстного меню веб-проекта.

    ![В обзоре нового ресурса щелкните "Свойства" и скопируйте ключ инструментирования](./media/app-insights-java-eclipse/4-addai.png)
2. Вставьте ключ инструментирования, полученный на портале Azure.

    ![В обзоре нового ресурса щелкните "Свойства" и скопируйте ключ инструментирования](./media/app-insights-java-eclipse/5-config.png)


Ключ пересылается вместе с каждым элементом телеметрии; служба Application Insights отобразит его в ресурсе.

## Запуск приложения и просмотр метрик

Запустите приложение.

Вернитесь к ресурсу Application Insights в Microsoft Azure.

В колонке обзора появятся данные HTTP-запросов. \(Если данные отсутствуют, подождите несколько секунд и нажмите кнопку обновления\).

![Ответ сервера, счетчики запросов и сбои](./media/app-insights-java-track-http-requests/5-results.png)
 

Щелкните любую диаграмму, чтобы увидеть более подробные метрики.

![Счетчики запросов по имени](./media/app-insights-java-track-http-requests/6-barchart.png)


[Дополнительные сведения о метриках.][metrics]

 

При просмотре свойств запроса можно увидеть события телеметрии, связанные с ним, такие как запросы и исключения.
 
![Все трассировки для данного запроса](./media/app-insights-java-track-http-requests/7-instance.png)


## Телеметрия на стороне клиента

С помощью плитки быстрого запуска в колонке обзора можно получить скрипт для добавления на веб-страницы.

В колонке обзора будут отображены метрики просмотра страниц, пользователей и сеансов:

![Сеансы, пользователи и просмотры страниц](./media/appinsights/appinsights-47usage-2.png)

[Дополнительные сведения о настройке телеметрии на стороне клиента.][usage]

## Доступность веб-тестов

Application Insights может тестировать ваш веб-сайт через равные промежутки времени для проверки, работает ли он и правильно ли отвечает на запросы. Щелкните пустую диаграмму веб-тестов в колонке обзора и укажите общедоступный URL-адрес.

Если ваш сайт выйдет из строя, вы получите диаграмму значений времени ответа, а также уведомление по электронной почте.

![Пример веб-теста](./media/appinsights/appinsights-10webtestresult.png)

[Дополнительные сведения о доступности веб-тестов.][availability]

## Журналы диагностики

Если вы используете Logback или Log4J \(версия 1.2 или 2.0\) для трассировки, можно настроить автоматическую пересылку журналов в Application Insights, где вы сможете их изучить.

[Дополнительные сведения о журналах диагностики][javalogs]

## Пользовательская телеметрия 

Вставьте несколько строк кода в свое веб-приложение Java, чтобы узнать, как пользователи его используют, или для диагностики неполадок.

Код можно вставить на веб-страницу JavaScript и на стороне сервера Java.

[Дополнительные сведения о пользовательской телеметрии][track].



## Дальнейшие действия

#### Обнаружение и диагностика неполадок

* [Добавьте сбор данных телеметрии веб-клиента][usage] для получения телеметрии производительности от веб-клиента.
* [Настройте веб-тесты][availability], чтобы убедиться, что приложение работает и отвечает на запросы.
* [Выполняйте поиск событий и сведений в журналах][diagnostic] для диагностики неполадок.
* [Используйте функции ведения журналов Log4J или Logback][javalogs].

#### Отслеживание использования

* [Добавьте сбор данных телеметрии веб-клиента][usage] для отслеживания просмотров страниц и основных метрик пользователей.
* [Отслеживайте пользовательские события и метрики][track] для получения сведений об использовании приложения, как на клиенте, так и на сервере.


<!--Link references-->

[availability]: app-insights-monitor-web-app-availability.md
[diagnostic]: app-insights-diagnostic-search.md
[java]: app-insights-java-get-started.md
[javalogs]: app-insights-java-trace-logs.md
[metrics]: app-insights-metrics-explorer.md
[track]: app-insights-custom-events-metrics-api.md
[usage]: app-insights-web-track-usage.md


<!--HONumber=54-->