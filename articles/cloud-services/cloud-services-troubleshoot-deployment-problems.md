<properties
 pageTitle="Как устранять неполадки, которые могут возникнуть при развертывании облачной службы | Microsoft Azure"
 description="Во время развертывания облачной службы в Azure вы можете столкнуться с несколькими типичными проблемами. В этой статье приведены решения некоторых из них."
   services="cloud-services"
   documentationCenter=""
   authors="dalechen"
   manager="felixwu"
   editor=""
   tags="top-support-issue"/>
<tags
   ms.service="cloud-services"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="tbd"
   ms.date="01/20/2016"
   ms.author="daleche" />

# Как устранять неполадки, которые могут возникнуть при развертывании облачной службы

При развертывании пакета приложения облачной службы в Azure вы можете получить сведения о развертывании на панели **Свойства** на портале Azure. Вы можете использовать сведения, отображающиеся на этой панели, чтобы устранять неполадки в работе облачной службы. Кроме того, эту информацию вы можете передать в службу поддержки Azure, когда открываете новый запрос о поддержке.

Панель **Свойства** можно найти следующим образом.

* На портале Azure: щелкните развертывание нужной облачной службы, **Все параметры**, а затем нажмите кнопку **Свойства**.
* На классическом портале Azure: щелкните развертывание нужной облачной службы, затем **ПАНЕЛЬ МОНИТОРИНГА**, перейдите в правый нижний угол страницы (в раздел **сводки**). Имейте в виду, что название "Свойства" отсутствует для этой панели.

> [AZURE.NOTE] Содержимое панели «Свойства» можно скопировать в буфер обмена, для этого щелкните значок в правом верхнем углу панели.

## Обращение в службу поддержки клиентов Azure

Если на любом этапе изучения этой статьи вам потребуется дополнительная помощь, вы можете обратиться к экспертам по Azure на [форумах MSDN Azure и Stack Overflow](https://azure.microsoft.com/support/forums/).

Кроме того, можно зарегистрировать обращение в службу поддержки Azure. Перейдите на [сайт службы поддержки Azure](https://azure.microsoft.com/support/options/) и щелкните **Поддержка**. Дополнительные сведения об использовании службы поддержки Azure см. в статье [Часто задаваемые вопросы о поддержке Microsoft Azure](https://azure.microsoft.com/support/faq/).



## Проблема: у меня нет доступа к моему веб-сайту, несмотря на то, что мое развертывание запущено и все экземпляры роли готовы

URL-адрес веб-сайта, отображаемый на портале, не включает в себя порт. По умолчанию для веб-сайтов используется порт 80. Однако если в приложении настроено использование другого порта, то при открытии веб-сайта нужно добавить нужный порт в URL-адрес.

1. На портале Azure щелкните развертывание нужной облачной службы.
2. На панели **Свойства** портала Azure проверьте порты для экземпляров ролей (под входными конечными точками).
3. Если номер порта — не *80*, добавьте правильное значение порта в URL-адрес при доступе к приложению. Чтобы указать нестандартный порт, введите URL-адрес, после него поставьте двоеточие (:), а затем, не используя пробелов, укажите номер порта.

## Проблема: мои экземпляры ролей перезапускаются автоматически

Восстановление службы происходит автоматически, когда Azure обнаруживает проблемные узлы и перемещает экземпляры ролей в новые узлы. В этом случае экземпляры ролей могут перезапускаться автоматически. Чтобы определить, произошло ли восстановление службы, выполните следующие действия.

1. На портале Azure щелкните развертывание нужной облачной службы.
2. На панели **Свойства** портала Azure ознакомьтесь с информацией и определите, восстанавливалась ли служба тогда, когда перезапускались роли.

Кроме того, роли перезапускаются примерно раз в месяц, когда обновляются ОС узла и гостевая ОС. Дополнительные сведения см. в записи блога [Перезапуск экземпляра роли из-за обновлений ОС](http://blogs.msdn.com/b/kwill/archive/2012/09/19/role-instance-restarts-due-to-os-upgrades.aspx).

## Проблема: когда я пробую переключить виртуальный IP-адрес, отображается сообщение об ошибке

Переключение виртуального IP-адреса не допускается, если развертывание обновляется. Развертывание обновляется автоматически в таких случаях:

* доступна новая гостевая операционная система, и на вашем устройстве настроено автоматическое обновление;
* выполняется восстановление службы.

Чтобы узнать, препятствует ли автоматическое обновление переключению виртуального IP-адреса, выполните следующие действия.

1. На портале Azure щелкните развертывание нужной облачной службы.
2. На панели **Свойства** портала Azure найдите значение параметра **Состояние**. Если указано значение **Готово**, проверьте **последнюю операцию**: возможно, недавно выполнялась операция, которая могла помешать переключению виртуального IP-адреса.
3. Повторите шаги 1 и 2 для развертывания в производственной среде.
4. Если выполняется автоматическое обновление, дождитесь его завершения, прежде чем пытаться переключить виртуальный IP-адрес.

## Проблема: экземпляр роли циклически переключается между состояниями «Запущено», «Инициализация», «Занято» и «Остановлено»

Возможна проблема с кодом, пакетом или файлом конфигурации приложения. Если это так, состояние будет изменяться каждые несколько минут, а на портале Azure могут отображаться примерно такие состояния: **Перезапуск**, **Занято** или **Инициализация**. Это означает, что что-то не так с приложением и что эта проблема не дает работать экземпляру роли.

Дополнительные сведения об устранении этой проблемы см. в записях блога [Данные компьютерной диагностики PaaS Azure] и [Распространенные проблемы, которые вызывают повторное использование ролей](cloud-services-troubleshoot-common-issues-which-cause-roles-recycle.md).

## Проблема: мое приложение перестало работать

1. На портале Azure щелкните экземпляр роли.
2. На панели **Свойства** портала Azure ознакомьтесь со следующими условиями, связанными с устранением проблемы:
   * Если работа экземпляра роли недавно остановилась (вы можете проверить значение **счетчика прерываний**), развертывание, возможно, обновляется. Подождите: работа экземпляра роли может возобновиться автоматически.
   * Если экземпляр роли занят, проверьте код приложения: возможно, обрабатывается событие [StatusCheck](https://msdn.microsoft.com/library/microsoft.windowsazure.serviceruntime.roleenvironment.statuscheck). Может потребоваться добавить или исправить код, который обрабатывает это событие.
   * Просмотрите данные диагностики и сценарии устранения неполадок в записи блога [Данные компьютерной диагностики PaaS Azure].

>[AZURE.WARNING] Если перезапустить облачную службу, будут сброшены свойства развертывания, поэтому информация о первоначальной проблеме будет удалена.

## Дальнейшие действия

Просмотрите дополнительные [статьи об устранении неполадок](..\?tag=top-support-issue&service=cloud-services) в облачных службах.

Чтобы узнать, как устранять неполадки ролей облачной службы с помощью данных диагностики компьютеров Azure PaaS, обратитесь [к серии статей в блоге Кевина Уильямсона](http://blogs.msdn.com/b/kwill/archive/2013/08/09/windows-azure-paas-compute-diagnostics-data.aspx).

<!---HONumber=AcomDC_0128_2016-->