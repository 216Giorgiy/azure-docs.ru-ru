<properties 
	pageTitle="Рекомендации по производительности — Azure" 
	description="Изучите рекомендации по производительности в Azure." 
	services="cloud-services, sql-database, storage, service-bus, virtual-network" 
	documentationCenter=".net" 
	authors="Rboucher" 
	manager="jwhit" 
	editor=""/>

<tags 
	ms.service="multiple" 
	ms.workload="multiple" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="09/01/2014" 
	ms.author="robb"/>

# Рекомендации по улучшению производительности в приложениях Azure  #

В этом руководстве содержатся инструкции по оптимизации производительности приложений Azure.

Обратите внимание, что использование Azure предоставляет множество преимуществ, а производительность — это только одно из них. Рекомендации в данной статье направлены в основном на повышение производительности. Существуют ситуации, когда высокая производительность не ставится во главу угла, например в случае, если вам важна возможность передачи в Azure функций управления оборудованием или особенно востребован механизм "оплата по мере использования вами". В этой статье не рассматриваются сценарии, в которых производительность имеет относительно низкий приоритет.

## Обзор ##
 Производительность может быть определена как ["объем выполненной полезной работы с учетом затрат времени и ресурсов".](http://go.microsoft.com/fwlink/?LinkId=252650)


Это определение имеет две стороны: показатели и ресурсы. Показатели производительности являются числами, которые должны быть достигнуты для удовлетворения бизнес-требований. Сюда относятся такие показатели, как время отклика, пропускная способность, доступность, и т. д. Производительность также включает уровень использования ресурсов, требуемый для достижения заданного уровня показателей производительности. Поскольку стоимость почти всегда является бизнес-требованием, а ресурсы стоят денег, производительность подразумевает максимально эффективное использование ресурсов.

### Жизненный цикл производительности
Вы можете повлиять на производительность в двух точках жизненного цикла приложения:

- время разработки, когда принимаются основные архитектурные решения, которые могут повлиять на производительность;
- время выполнения, когда можно определить узкие места, провести мониторинг, измерения и т. д.

Оба действия необходимы. В этом официальном документе основное внимание уделяется главным образом этапу проектирования, поскольку ошибки в архитектуре труднее устранить во время выполнения.

#### Моделирование приложений
Важно построить модель наиболее важных клиентских сценариев приложения. Здесь под словом "важно" понимается, что это окажет наибольшее влияние на производительность. Выявление таких сценариев и требуемые действия приложения позволят вам выполнить тестирование концепции.

#### Тестирование концепции с точки зрения производительности ###

Полное тестирование производительности на всех стадиях цикла является важным этапом во время разработки и развертывания приложений. Приложения Azure состоят из множества частей. Они могут включать в себя как пользовательские компоненты, так и компоненты Майкрософт. Корпорация Майкрософт не имеет возможности проверить производительность для всех возможных комбинаций этих компонентов. Таким образом, полное тестирование производительности приложения на должном уровне является критически важным этапом любого развертывания.

С учетом построенной модели приложения следует при первой возможности выполнить тестирование концепции, а также подвергнуть ее нагрузочному тестированию для проверки архитектуры приложения, чтобы убедиться в том, что приложение удовлетворяет требованиям к производительности с точки зрения масштабируемости и задержек. Исключительно важно проверить начальную архитектуру и предположения. Очень неприятно понять, что приложение не может выдержать ожидаемую нагрузку, когда оно уже введено в эксплуатацию! Visual Studio предоставляет возможности для выполнения нагрузочного тестирования. О них можно узнать в статье [Обзор нагрузочного тестирования Visual Studio в Azure](http://www.visualstudio.com/get-started/load-test-your-app-vs).

### Отличия Azure с точки зрения производительности ###

Значительное повышение производительности в приложениях Azure достигается благодаря горизонтальному масштабированию и разделению ресурсов. Создание масштабируемых приложений в Azure осуществляется с помощью горизонтального масштабирования ресурсов: баз данных SQL, хранилищ, вычислительных узлов и др. Разделение обеспечивает параллельное выполнение задач приложения, как раз это и повышает производительность. В Azure доступны ресурсы всего центра обработки данных, и физическое разделение выполняется автоматически. Чтобы достичь этого уровня общей производительности, требуется использовать правильные шаблоны проектирования горизонтального масштабирования.


Парадоксально, но при такой высокой производительности приложения в целом каждая отдельная операция в Azure отличается меньшей производительностью по сравнению с локальным эквивалентом. Это происходит из-за задержек сети, переключения операций для повышения надежности работы и многих других причин. Параллельная обработка с правильным секционированием ресурсов компенсирует спад производительности в конкретных операциях.

### Требуемые действия при проектировании ###

Некоторые факторы производительности меняются в зависимости от сценария приложения. Следующая глава посвящена масштабированию и секционированию ресурсов, соответствующему поиску данных, а также оптимизации использования служб Azure.


Следующая глава посвящена аспектам производительности, которые относятся к любому приложению Azure: сетевым задержкам, временным подключениям и т. д.

## Проектирование для повышения производительности в облачной среде ##

При разработке приложения Azure или переносе локального приложения для Azure необходимо учесть следующее.

- Горизонтальное масштабирование и секционирование ресурсов: это основной механизм для обеспечения параллельной обработки, которая позволяет достичь высокой производительности. 
* Архитектура данных: какого рода хранилище данных должно использоваться для различных частей данных приложения 
* Оптимизация отдельных служб Windows Azure 

Преимущества Azure в области повышения производительности обусловлены возможностями масштабирования. Также необходимо учитывать разделение ресурсов и параллельное выполнение действий. Это очевидно, если речь идет о больших базах данных SQL в Azure, однако это справедливо и для любых ресурсов меньшего масштаба.

Правильный выбор варианта хранения данных окажет большое влияние на вашу производительность. Для этого Azure предлагает следующие решения:

* База данных SQL Azure 
* Кэширование Azure 
* Хранилище таблиц Azure 
* Хранилище blob-объектов Azure 
* Диски Azure 
* Очереди Azure 
* Управляемый обмен сообщениями Service Bus в Azure 
* Такие системы хранения "больших данных", как Hadoop 

Поскольку особенности могут меняться, мы обсудим, как сделать это в следующих сценариях:

* Облачная служба Azure с использованием базы данных SQL 
* Облачная служба Azure с интенсивным использованием очередей хранилища 
* Веб-сайт Azure, использующий MySQL в качестве базы данных для серверной части 
* Приложения для работы с данными большого размера 
* Приложения, использующие серверную базу данных MySQL 

### Сценарий: база данных SQL в облачной службе ###

К базе данных SQL Azure применяются принципы правильного проектирования. Существует огромное количество материалов, в которых рассматриваются вопросы проектирования эффективных схем для баз данных SQL Server или SQL в Azure. Ниже приведены несколько ссылок на схемы базы данных SQL.

* [Основы проектирования и моделирования баз данных](http://go.microsoft.com/fwlink/?LinkId=252675) 
* [Поэтапное проектирование баз данных](http://go.microsoft.com/fwlink/?LinkId=252676) 
* [Проектирование базы данных](http://go.microsoft.com/fwlink/?LinkId=252677) 

Существует два ключевых этапа проектирования в Azure.

* Эффективный поиск данных: может возникнуть необходимость переместить определенные реляционные данные в большие двоичные объекты Azure или таблицы Azure. 
* Обеспечение максимальной масштабируемости: определение необходимости и способа секционирования данных. 

#### Архитектура данных: перемещение данных из базы данных SQL ####

Некоторые данные, которые находятся на локальном сервере SQL Server, следует переместить в Azure.

##### Перемещение данных в BLOB-объекты Azure ####

Изображения или документы должны храниться не в базе данных SQL, а в хранилище BLOB-объектов в Azure. Хотя такие данные часто хранятся на локальном сервере SQL Server, в облаке гораздо эффективнее использовать хранилище BLOB-объектов. Обычно следует заменить внешние ключи, которые указывали на BLOB-данные, идентификаторами хранилища BLOB-объектов, чтобы обеспечить возможность извлечения BLOB-данных. Также потребуют изменения запросы, которые обращались к таким данным.

##### Перемещение таблиц SQL в хранилище таблиц Azure #####

Оцените соотношение стоимости и производительности при принятии решения об использовании таблицы хранилища Azure. Хранилище таблиц гораздо более экономично, чем хранение тех же данных в базе данных SQL. Однако необходимо тщательно продумать, до какой степени данные будут использовать реляционные функции SQL, такие как соединения, фильтрация, запросы и т. д. Если данные мало используют такие функции, то они являются хорошим кандидатом для хранения в таблице Azure.

Один из универсальных шаблонов проектирования, где можно рассматривать хранилище таблиц, представляет собой таблицу, содержащую много строк, например таблица Customers в примере общей базы данных AdventureWorks, где ряд столбцов используется лишь для малой части клиентов. Это универсальный шаблон проектирования для отделения столбцов в другую таблицу (например, с именем CustomerMiscellany), с необязательным отношением 1-0 между клиентом и второй таблицей. Можно, например, рассмотреть перемещение второй таблицы в хранилище таблиц. Необходимо рассчитать, сделают ли размер таблицы и схемы доступа такое перемещение эффективным с точки зрения затрат.

Дополнительное описание хранилищ таблиц см. в следующих статьях.

* [Хранилище таблиц Azure и база данных SQL Azure — сравнение и отличия](http://msdn.microsoft.com/library/jj553018.aspx)
* [Вопросы производительности хранилища таблиц Azure](http://go.microsoft.com/fwlink/?LinkId=252663) 
* [База данных SQL и хранилище таблиц Azure](http://go.microsoft.com/fwlink/?LinkId=252664) 
* [Повышение производительности с помощью пакетной обработки вставок в хранилище таблиц Azure](http://go.microsoft.com/fwlink/?LinkID=252665), где обсуждаются некоторые результаты производительности. 
* [Руководство по эластичности и производительности базы данных SQL](http://go.microsoft.com/fwlink/?LinkId=221876) 

#### Разделение данных ####

Один из наиболее часто разделяемых ресурсов — данные. При создании облачной службы Azure следует подумать о встроенной функции сегментирования базы данных SQL, доступной через федерации.

Общие сведения о федерациях базы данных SQL см. в статье [Федерации в базе данных SQL](http://go.microsoft.com/fwlink/?LinkId=252668)

##### Задачи проектирования для федераций SQL #####

Использование федераций базы данных SQL в облачной службе Azure требует внесения некоторых изменений в классические принципы проектирования. Однако большинство вещей, которые справедливы для локальной базы данных SQL Server, являются необходимой отправной точкой для разработки федераций базы данных SQL. Существуют две основные задачи проектирования, которые призваны определить следующее:

* объекты для включения в федерацию; 

* место размещения не включенных в федерацию таблиц.

Чтобы определить, какие объекты должны быть включены в федерацию, необходимо проверить схему базы данных и определить сводки по связанным таблицам. Сводка представляет собой набор таблиц, все из которых связаны отношениями "один ко многим" посредством внешних ключей, за исключением корня сводки.

В хорошо известном примере базы данных AdventureWorks возможен набор из Customer, Order, OrderLine и еще несколько таблиц. Также можно объединить Supplier, Product, OrderLine, Order.

Каждая сводка является кандидатом для федерации. Необходимо оценить, где ожидается увеличение размера, а также проверить рабочую нагрузку приложения: запросы, которые хорошо согласуются со схемой федерации, то есть для которых не требуются данные из нескольких членов федерации, будут работоспособны. Запросы, которые не согласуются со схемой федерации, требуют внедрения логики на уровне приложения, поскольку в настоящее время база данных SQL не поддерживает соединения между базами данных.

Пример анализа архитектуры, который просматривает базу данных AdventureWorks для его федерации и отображает пошаговые рекомендации по проектированию, см. в статье [Подход к проектированию баз данных с федерациями с акцентом на масштабирование: часть 1 — подбор федераций и ключа федерации](http://go.microsoft.com/fwlink/?LinkId=252671).

После выбора таблиц для федерации необходимо добавить первичный ключ корневой таблицы сводки в качестве столбца в каждую связанную таблицу.

После выбора таблиц для федерации еще одна проблема — это размещение таблиц ссылок, а также других объектов базы данных. Подробное обсуждение этой темы см. в статье [Подход к проектированию баз данных с федерациями с акцентом на масштабирование: часть 2 — создание примечаний и развертывание схемы федераций](http://go.microsoft.com/fwlink/?LinkId=252672). Выполнение более сложных запросов описано в разделе [Часть 2](http://go.microsoft.com/fwlink/?LinkId=252673).

                                            
##### Самостоятельное разделение #####

Существует ряд примеров, которые показывают способы разделения данных. Если решено не использовать федерации для разделения экземпляра базы данных SQL, необходимо выбрать метод разделения, соответствующий данному приложению. Ниже приведены некоторые примеры:

* Полный обзор, созданный до выхода функции федераций, см. в разделе [Способы секционирования с использованием базы данных SQL](http://go.microsoft.com/fwlink/?LinkId=252678). 
* [Библиотека сегментов баз данных SQL и SQL Server](http://go.microsoft.com/fwlink/?LinkId=252679) 

##### Разделение других ресурсов #####

Помимо базы данных SQL, можно разделять и другие ресурсы. Например, может потребоваться разделить серверы приложений и выделить их для конкретных баз данных. Предположим, что приложение содержит N серверов приложений и N баз данных. Если каждый сервер приложений сможет обращаться к любой базе данных и для этого будет использоваться N в квадрате подключений баз данных, то в некоторых случаях для Azure будет превышен фиксированный предел. Однако, если ограничить количество баз данных, доступных серверу приложений, число используемых подключений будет существенно снижено.

В зависимости от приложения сходные основания могут действовать и для других ресурсов.


#### Caching ####

Служба Azure Caching предоставляет распределенную эластичную память для кэширования данных. Среди них могут быть данные о состоянии сеанса ASP.net или часто используемые значения из ссылочных таблиц базы данных SQL. Так как объекты находятся в распределенной памяти, можно получить значительный выигрыш в производительности. Поскольку инфраструктура кэширования находится под управлением Azure, ее реализация потребует небольшого объема разработки.

Планируйте таким образом, чтобы обеспечить емкость кэширования, достаточную для кэширования часто используемых объектов. В базе данных SQL есть таблицы, к которым часто обращаются для преобразования числовых кодов в более длинные описательные символьные строки. Часто эти таблицы содержат данные, например названия страны и города, допустимые значения почтового индекса, названия отделов внутри организации и т. д. Небольшие таблицы имеет смысл полностью хранить в кэше, в случае более крупных таблиц можно хранить только наиболее часто используемые значения. Увеличение производительности достигается за счет запросов на соединение нескольких таблиц с использованием таких данных: каждое значение, хранящееся в кэше, позволяет избежать нескольких обращений к диску. Введение в тему, обсуждение производительности и кэширования в Azure см. в статье [Введение в службу Azure Caching](http://go.microsoft.com/fwlink/?LinkId=252680). Более актуальная запись по этой теме находится в блоге [Вопросы производительности Caching в Windows #Azure](http://go.microsoft.com/fwlink/?LinkId=252681).

#### Сценарий: использование очередей в приложениях Azure ####

Пример такого сценария — использование StreamInsight для заполнения очередей сообщениями, которые будут обработаны позже.

Очереди Azure используются для передачи сообщений, временного разъединения подсистем, а также для балансирования и выравнивания нагрузки.

В Azure доступны две альтернативные технологии очередей: очереди хранилища Azure и служебная шина.

Хранилища Azure доступны для очередей большого размера, отслеживания хода выполнения и многих других функций. Служба Service Bus предоставляет функции публикации/подписки, обеспечивает полную интеграцию с Windows Communication Foundation ("WCF"), автоматический поиск повторяющихся данных, гарантированную доставку по принципу FIFO (поступившие раньше передаются в первую очередь), а также многое другое.

Более полное и подробное сравнение этих двух технологий см. в статье [Очереди Azure и очереди Azure Service Bus — сходства и отличия](http://go.microsoft.com/fwlink/?LinkId=252682).

Обсуждение производительности служебной шины см. в статье [Советы и рекомендации по повышению производительности с помощью обмена сообщениями через посредника для служебной шины](http://go.microsoft.com/fwlink/?LinkID=252683).

#### Сценарий: приложения для работы с данными большого размера ####

Данные большого размера часто появляются в результате использования других систем или приложений. Примеры:

* Лог-файлы 

* Файлы других видов диагностики, аудита и мониторинга

* Журналы сейсмографии в нефтяной компании

* Данные о кликах и другие сведения, оставленные пользователями

Данные большого размера определяются по следующим критериям:

* Размер (как правило, сотни терабайтов или больше) 

* Тип: нереляционные, переменная схема, файлы в файловой системе

Такие данные обычно не подходят для обработки в реляционной базе данных.

Существует четыре основных типа хранилища данных, отличных от SQL:

* Пара "ключ-значение" 

* Документ

* График

* Группа столбцов

Azure предоставляет прямую поддержку Hadoop. Допускается использование и других технологий. Сведения о службе Azure HDInsight см. в следующих статьях.

* [Данные большого размера](../big-data.md) 
* [Служба Azure HDInsight](/documentation/services/hdinsight/)
* [Приступая к работе с Azure HDInsight](../hdinsight-get-started.md)

Обсуждение некоторых вопросов, связанных с различными методами хранилища noSQL см. в следующем разделе:

* [Знакомство с NoSQL в Azure](http://go.microsoft.com/fwlink/?LinkId=252729) 
* [AggregateOrientedDatabase](http://go.microsoft.com/fwlink/?LinkID=252731)
* [PolyglotPersistence](http://go.microsoft.com/fwlink/?LinkId=252732) 

#### Другие сведения об оптимизации производительности отдельных служб Azure ####

Многие из отдельных служб Azure обладают функциями и параметрами, влияющими на производительность. Все они требуют более детального рассмотрения.

##### Диски Azure #####

Можно моделировать использование жесткого диска существующим приложением с помощью диска Azure. Он поддерживается BLOB-объектами Windows и устойчив к сбою работы отдельных компьютеров.

##### Локальное хранилище #####

Хотя это хранилище не отличается устойчивостью к сбою компьютера, оно может содержать часто запрашиваемые данные или промежуточные результаты для использования в других местах. Это экономично, поскольку такое использование не требует дополнительных затрат.

##### Служба Azure Access Control Service (ACS) #####

На использование ресурсов в службе ACS и, соответственно, производительность, оказывают влияние два основных фактора — размер маркера и способ шифрования. Дальнейшее описание см. в статье [Рекомендации по производительности ACS](http://go.microsoft.com/fwlink/?LinkId=252747)

##### Сериализация #####

Сериализация не относится к очевидным областям оптимизации производительности, однако в некоторых сценариях приложений снижение сетевого трафика может быть значительным. Пример изменения размера сериализуемых данных в зависимости от протокола см. в статье [Веб-приложения и сериализация в Azure](http://go.microsoft.com/fwlink/?LinkId=252749), раздел о сокращениях.

Если проблемы с производительностью обусловлены объемом перемещаемых данных, следует использовать минимально доступный размер сериализации. В том случае, если производительности сериализации недостаточно, следует рассмотреть возможность использования собственных или сторонних форматов сериализации. Как всегда, ключевым моментом является тестирование концепции.


### Веб-сайты Azure, использующие mySQL ###

Ниже приведены ссылки на советы по производительности для MySQL.

* Поиск по слову *производительность* по адресу [http://mysql.com](http://go.microsoft.com/fwlink/?LinkId=252775) выдаст множество результатов. 
* Можно воспользоваться другими информативными ресурсами — форумами[ http://forums.mysql.com/list.php?24](http://go.microsoft.com/fwlink/?LinkId=252776). 



## Проектирование общих систем ##

Платформа Azure предназначена для одновременного выполнения нескольких приложений. Репликация при этом осуществляется на нескольких компьютерах, что удобно для переключения при сбоях. Это влияет на производительность приложения несколькими способами:

* Временные подключения 

* Регулирование ресурсов с ограничением максимального объема использования

* Задержки сети

* Физическое расположение служб

Эти рассуждения справедливы для всех архитектур приложений, так как они определяются физической инфраструктурой центров обработки данных Azure. Подробное обсуждение см. в [Руководстве по эластичности и производительности базы данных SQL](http://go.microsoft.com/fwlink/?LinkID=252666)

### Задержки сети ###

Azure — это платформа, которая работает на базе общих ресурсов. Это значит, что в ее работе могут возникать перерывы. Во-первых, это время, затраченное на отправку запроса и ответа через Интернет. Поскольку запросы и ответы могут проходить через неопределенное количество маршрутизаторов до их возврата клиенту, разрывы связи, в том числе по истечению срока ожидания, возникают чаще, чем в локальных, фиксированных сетях. Задержки в работе платформы могут быть связаны с созданием резервных копий данных, а также с заменой и перенаправлением запросов, адресованных в удаленные экземпляры. Эти задержки и сбои важны для понимания способов компенсации, позволяющих обеспечить выполнение требований к производительности приложения. Нагрузочное тестирование на уровне реальных данных позволит получить дополнительные сведения о задержках, которые наблюдаются в системе.

Следует принять во внимание, что с высокой вероятностью задержка будет больше, поскольку, скорее всего, центр обработки данных облачной платформы физически находится дальше, чем локальный сервер.

### Физическое расположение служб ###

Если это возможно, следует размещать по соседству различные узлы или уровни приложения в одном центре обработки данных. В противном случае задержки сети и стоимость будут больше.

Например, веб-приложение следует разместить в том же центре обработки данных, что и экземпляр базы данных SQL, к которому оно обращается, а не в другом центре обработки данных или на предприятии.

### Временные подключения ###

Приложение ДОЛЖНО иметь возможность обрабатывать разорванные подключения. Разорванные подключения неизбежны и присущи архитектуре облака (например, это такие операции, как замена отключенного узла, разбиение члена федерации в базе данных SQL и т. д.). Лучшая платформа для того, чтобы сделать это прямо сейчас — [Блок приложений для обработки временных сбоев](http://go.microsoft.com/fwlink/?LinkID=236901)

### Регулирование ###

В мире услуг ресурсы могут быть детализированы, и оплачивать требуется только те, что используются. Однако для всех ресурсов есть минимально гарантированные размер, скорость и пропускная способность — это важно, например, если нужна база данных больше определенного размера. Однако в некоторых службах также есть внешние ограничения для службы, которая является важной. Следует сказать, что приложения Azure выполняются в среде с общим доступом и используются для регулирования ресурсов. Если превысить предел регулирования для ресурса, дополнительный запрос для этого ресурса приведет к возникновению исключения.

### Физические мощности ###

Один из обязательных аспектов планирования производительности — планирование мощностей: если не удается обеспечить различные хранилища достаточной емкости, приложение может не запуститься вовсе. Аналогичным образом недостаточная мощность процессора или памяти способна значительно замедлить выполнение приложения.


Azure позволяет существенно сократить усилия по регулированию мощностей. Это связано с существенным изменением необходимых действий — получением и подготовкой компьютеров. Планирование больше не сосредоточено на физических вычислительных мощностях. Теперь оно требует представления о необходимом количестве следующих элементов:

* Вычислительные узлы 
* Хранилище BLOB-объектов 
* Хранилище таблиц 
* Очереди и т. д. 

Кроме того, благодаря масштабируемости Azure принятые вначале решения относительно мощностей не являются чем-то незыблемым: ресурсы Azure можно сравнительно легко увеличить (или сократить). Тем не менее точное планирование мощностей имеет важное значение, так как оно позволит избежать периода проб и ошибок в отношении мощностей при вводе приложения в эксплуатацию.

Для приложений, потребности в ресурсах которых существенно меняются со временем, следует рассмотреть возможность использования [Блока приложений для автоматического масштабирования](http://go.microsoft.com/fwlink/?LinkId=252873) Этот блок позволяет устанавливать правила для масштабирования экземпляров роли вверх и вниз. Определены два типа правил:

* Существуют ограничения, которые устанавливают максимальное и минимальное количество экземпляров в зависимости от времени суток. 

* Кроме того, есть правила, которые вступают в действие при определенных условиях, например при конкретном проценте загрузки ЦП.

Можно также определить собственные правила. Дополнительные сведения см. в разделе [Блок приложений для автоматического масштабирования](http://go.microsoft.com/fwlink/?LinkId=252873)



Планирование мощностей является отдельным видом работ и в этой статье предполагается, что этот этап уже выполнен. Подробное описание планирования мощностей в Azure см. в разделе [Планирование мощностей для очередей и разделов Service Bus](http://go.microsoft.com/fwlink/?LinkId=252875).



## Мониторинг производительности и настройка во время выполнения ##

Даже самое тщательное проектирование не гарантирует отсутствие проблем с производительностью во время выполнения, поэтому необходимо наблюдать на постоянной основе, отслеживать производительность приложения для проверки ее соответствия требуемым показателям, а также исправления ситуаций, в которых не удается достичь таких показателей. Даже хорошо спроектированные приложения могут оказаться уязвимыми перед непредвиденными событиями, такими как экспоненциальный рост нагрузки или возможные изменения в среде выполнения, что может привести к падению производительности, требующему изменения настроек. Часто поиск и устранение узких мест являются важной частью процесса.


Для устранения проблем с производительностью во время выполнения требуется предварительная работа по созданию системы ведения журналов и должной обработки исключений, которая позволит устранять неполадки при их появлении. Комплексные меры в этой области см. в разделе [Советы и рекомендации по устранению неполадок при разработки приложений Azure](http://go.microsoft.com/fwlink/?LinkID=252876).

Существуют инструменты для непрерывного наблюдения за производительностью каждой из служб Azure. Кроме того, в приложения должны быть встроены средства ведения журналов, которые содержат подробные сведения, необходимые для устранения неполадок и решения проблем в области производительности.

### База данных SQL ###

Обратите внимание, что на данный момент в Azure недоступен профилировщик SQL. Существует несколько обходных решений для получения требуемых сведений о производительности. Один из альтернативных способов во время разработки — выполнить первоначальное тестирование в локальной версии базы данных, где профилировщик SQL доступен.

Можно также воспользоваться командой Transact-SQL SET STATISTICS и использовать среду SQL Server Management Studio для просмотра создаваемого запросом плана выполнения, так как создание эффективных запросов является ключом к высокой производительности. Подробное описание и пошаговые объяснения того, как это сделать, см. в разделе [Получение представления о производительности базы данных SQL](http://go.microsoft.com/fwlink/?LinkId=252877). Другой интересный подход — анализ производительности между [Локальной базой данных SQL и локальным сервером SQL Server](http://go.microsoft.com/fwlink/?LinkId=252878)

Два указанных раздела содержат сведения о динамических административных представлениях.

* [Мониторинг базы данных SQL с помощью динамических представлений управления](http://go.microsoft.com/fwlink/?LinkId=236195) 
* [Полезные динамические административные представления для анализа базы данных SQL в случае отсутствия приложения SQL Profiler](http://go.microsoft.com/fwlink/?LinkId=252879) 

### Ресурсы и средства для анализа ###

Для анализа производительности Azure пригодятся инструменты сторонних независимых производителей, указанные ниже.

- [Cerebrata](http://go.microsoft.com/fwlink/?LinkId=252880) 
- [Тестирование производительности SQL Server и базы данных SQL: базовый уровень Enzo SQL](http://enzosqlbaseline.codeplex.com/) 

Другие ресурсы

* [Руководство по эластичности и производительности базы данных SQL](http://go.microsoft.com/fwlink/?LinkID=252666) 
* [База данных SQL](http://go.microsoft.com/fwlink/?LinkId=246930) 
* [Хранилище](http://go.microsoft.com/fwlink/?LinkId=246933) 
* [Сеть](http://go.microsoft.com/fwlink/?LinkId=252882) 
* [Служебная шина](http://go.microsoft.com/fwlink/?LinkId=246934) 
* [Планирование Azure — руководство по интеграции Azure в конкретной среде](http://go.microsoft.com/fwlink/?LinkId=252884) 
 

<!---HONumber=62-->