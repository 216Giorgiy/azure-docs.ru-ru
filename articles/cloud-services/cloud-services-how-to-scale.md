---
title: "Автомасштабирование облачной службы на портале | Документация Майкрософт"
description: "(классический) Узнайте, как с помощью классического портала настроить правила автомасштабирования для веб-роли или рабочей роли облачной службы в Azure."
services: cloud-services
documentationcenter: 
author: Thraka
manager: timlt
editor: 
ms.assetid: eb167d70-4eba-42a4-b157-d8d0688abf4b
ms.service: cloud-services
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 09/06/2016
ms.author: adegeo
translationtype: Human Translation
ms.sourcegitcommit: ee34a7ebd48879448e126c1c9c46c751e477c406
ms.openlocfilehash: 2d9b16dcd798ebb5a3d4797ed0398369aeb154ae


---
# <a name="how-to-auto-scale-a-cloud-service"></a>Автомасштабирование облачной службы
> [!div class="op_single_selector"]
> * [Портал Azure](cloud-services-how-to-scale-portal.md)
> * [Классический портал Azure](cloud-services-how-to-scale.md)
> 
> 

На странице "Масштабирование" классического портала Azure можно масштабировать веб-роль или рабочую роль вручную, а также включить автоматическое масштабирование в зависимости от нагрузки на ЦП или очереди сообщений.

> [!NOTE]
> Эта статья посвящена веб-ролям и рабочим ролям облачной службы. Виртуальные машины (классические), создаваемые напрямую, размещаются в облачной службе. Некоторые из представленных здесь сведений относятся к таким типам виртуальных машин. Масштабирование группы доступности виртуальных машин представляет собой включение и отключение этих машин в соответствии с заданными правилами. Дополнительные сведения о виртуальных машинах и группах доступности см. в статье [Как настроить группу доступности для виртуальных машин Windows в классической модели развертывания](../virtual-machines/virtual-machines-windows-classic-configure-availability.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json).
> 
> 

При настройке масштабирования приложения следует учитывать следующие сведения.

* Масштабирование зависит от использования ядер. Более крупные экземпляры ролей задействуют больше ядер. Масштабировать приложение можно только в пределах количества ядер для используемой подписки. Например, если подписка ограничена двадцатью ядрами и выполняется приложение с двумя средними по размерам облачными службами (всего четыре ядра), то можно увеличить масштаб других развернутых в рамках подписки облачных служб на шестнадцать ядер. Дополнительные сведения о размерах см. в статье [Размеры для облачных служб](cloud-services-sizes-specs.md).
* Прежде чем приступить к масштабированию приложения на основе порогового значения сообщений, необходимо создать очередь и связать ее с ролью. Дополнительные сведения см. в статье [Приступая к работе с хранилищем очередей Azure с помощью .NET](../storage/storage-dotnet-how-to-use-queues.md).
* Можно масштабировать ресурсы, привязанные к используемой облачной службе. Дополнительные сведения о связанных ресурсах см. в разделе [Практическое руководство. Привязка ресурсов к облачной службе](cloud-services-how-to-manage.md#how-to-link-a-resource-to-a-cloud-service).
* В целях обеспечения высокой доступности приложения необходимо убедиться, что приложение развернуто с двумя и более экземплярами ролей. Дополнительные сведения см. в разделе [Соглашения об уровне обслуживания](https://azure.microsoft.com/support/legal/sla/).

## <a name="schedule-scaling"></a>Планирование масштабирования
По умолчанию все роли следуют установленному расписанию. Это значит, что изменения в параметрах действуют все время в течение года. При желании вы можете настроить ручное или автоматическое масштабирование для следующих параметров:

* дни недели;
* выходные дни;
* ночное время будних дней;
* утреннее время будних дней;
* определенные даты;
* определенные диапазоны дат.

Эти параметры настраиваются на [Классический портал Azure](https://manage.windowsazure.com/) , страница  
**Облачные службы** > **\[Ваша облачная служба\]** > **Масштабирование** > **\[Рабочая или промежуточная среда\]**.

Нажмите кнопку **Настройка параметров расписания** для каждой роли, которую необходимо изменить.

![Автомасштабирование облачной службы по расписанию][scale_schedules]

## <a name="manual-scale"></a>Ручное масштабирование
На странице **Масштабирование** можно вручную увеличить или уменьшить количество работающих в облачной службе экземпляров. Эти параметры настраиваются для каждого создаваемого расписания, а если расписания нет, действуют постоянно.

1. На [классическом портале Azure](https://manage.windowsazure.com/)щелкните **Облачные службы**, затем щелкните имя облачной службы, чтобы открыть панель мониторинга.
   
   > [!TIP]
   > Если вы не видите облачную службу, измените **рабочую среду** на **промежуточную** или наоборот.
   > 
   > 
2. Щелкните пункт **Масштаб**.
3. Выберите расписание, для которого нужно изменить параметры масштабирования. Если расписание не определено, используется значение по умолчанию — *Не настроено* .
4. Найдите раздел **Масштабирование по метрике** и выберите параметр **Нет**. Это — значение по умолчанию для всех ролей.
5. Каждая роль в облачной службе имеет ползунок для изменения количества используемых экземпляров.
   
    ![Ручное масштабирование роли облачной службы][manual_scale]
   
    Если вам нужно несколько экземпляров, измените [размер виртуальной машины облачной службы](cloud-services-sizes-specs.md).
6. Щелкните **Сохранить**.  
   Экземпляры роли добавляются и удаляются в зависимости от пользовательского выбора.

> [!TIP]
> Увидев значок ![][tip_icon], наведите на него указатель мыши, и вы получите справку о том, что именно делает соответствующий параметр.
> 
> 

## <a name="automatic-scale---cpu"></a>Автоматическое масштабирование: ЦП
Действует, если средний процент использования ЦП превышает определенные пороговые значения или опускается ниже этих значений; выполняется создание или удаление экземпляров роли.

1. На [классическом портале Azure](https://manage.windowsazure.com/)щелкните **Облачные службы**, затем щелкните имя облачной службы, чтобы открыть панель мониторинга.
   
   > [!TIP]
   > Если вы не видите облачную службу, измените **рабочую среду** на **промежуточную** или наоборот.
   > 
   > 
2. Щелкните пункт **Масштаб**.
3. Выберите расписание, для которого нужно изменить параметры масштабирования. Если расписание не определено, используется значение по умолчанию — *Не настроено* .
4. Найдите раздел **Масштабирование по метрике** и выберите параметр **ЦП**.
5. Теперь можно настраивать минимальный и максимальный диапазон экземпляров ролей, целевой процент использования ЦП (для увеличения масштаба в случае необходимости) и число экземпляров, на которое следует увеличивать или уменьшать масштаб.

![Масштабирование роли облачной службы в зависимости от нагрузки на ЦП][cpu_scale]

> [!TIP]
> Увидев значок ![][tip_icon], наведите на него указатель мыши, и вы получите справку о том, что именно делает соответствующий параметр.
> 
> 

## <a name="automatic-scale---queue"></a>Автоматическое масштабирование: очередь
Автомасштабирование выполняется, если число сообщений в очереди поднимается выше или опускается ниже указанного предела; выполняется создание или удаление экземпляров роли.

1. На [классическом портале Azure](https://manage.windowsazure.com/)щелкните **Облачные службы**, затем щелкните имя облачной службы, чтобы открыть панель мониторинга.
   
   > [!TIP]
   > Если вы не видите облачную службу, измените **рабочую среду** на **промежуточную** или наоборот.
   > 
   > 
2. Щелкните пункт **Масштаб**.
3. Найдите раздел **Масштабирование по метрике** и выберите параметр **ЦП**.
4. Теперь можно настраивать минимальный и максимальный диапазон экземпляров ролей, очередь и число сообщений в очереди на обработку для каждого экземпляра, а также число экземпляров, на которое следует увеличивать или уменьшать масштаб.

![Масштабирование роли облачной службы в зависимости от очереди сообщений][queue_scale]

> [!TIP]
> Увидев значок ![][tip_icon], наведите на него указатель мыши, и вы получите справку о том, что именно делает соответствующий параметр.
> 
> 

## <a name="scale-linked-resources"></a>Масштабирование связанных ресурсов
Часто при масштабировании роли выгодно масштабировать также и базу данных, используемую приложением. Связав базу данных с облачной службой, вы сможете получить доступ к параметрам масштабирования для соответствующего ресурса, щелкнув соответствующую ссылку.

1. На [классическом портале Azure](https://manage.windowsazure.com/)щелкните **Облачные службы**, затем щелкните имя облачной службы, чтобы открыть панель мониторинга.
   
   > [!TIP]
   > Если вы не видите облачную службу, измените **рабочую среду** на **промежуточную** или наоборот.
   > 
   > 
2. Щелкните пункт **Масштаб**.
3. Найдите раздел **Связанные ресурсы** и щелкните **Управление масштабированием для этой базы данных**.
   
   > [!NOTE]
   > Если вы не видите раздел **Связанные ресурсы** , возможно, что таких ресурсов у вас нет.
   > 
   > 

![][linked_resource]

[manual_scale]: ./media/cloud-services-how-to-scale/manual-scale.png
[queue_scale]: ./media/cloud-services-how-to-scale/queue-scale.png
[cpu_scale]: ./media/cloud-services-how-to-scale/cpu-scale.png
[tip_icon]: ./media/cloud-services-how-to-scale/tip.png
[scale_schedules]: ./media/cloud-services-how-to-scale/schedules.png
[scale_popup]: ./media/cloud-services-how-to-scale/schedules-dialog.png
[linked_resource]: ./media/cloud-services-how-to-scale/linked-resources.png



<!--HONumber=Nov16_HO3-->


