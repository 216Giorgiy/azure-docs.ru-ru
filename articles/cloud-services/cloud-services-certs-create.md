<properties 
	pageTitle="Облачные службы Azure — все что нужно знать о сертификатах" 
	description="Узнайте, как создавать и использовать сертификаты с помощью Microsoft Azure" 
	services="cloud-services" 
	documentationCenter=".net" 
	authors="Thraka" 
	manager="timlt" 
	editor=""/>

<tags 
	ms.service="cloud-services" 
	ms.workload="tbd" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="07/16/2015"
	ms.author="adegeo"/>

# Общие сведения о сертификатах для облачных служб Azure
Сертификаты используются в Azure для облачных служб ([сертификаты службы](#what-are-service-certificates)), а также для проверки подлинности с помощью управления API ([сертификаты управления](#what-are-management-certificates)). В этом разделе приводится общий обзор этих двух типов сертификатов в контексте их [создания](#create) и [развертывания](#deploy) в Azure.

Сертификаты, используемые в Azure, являются сертификатами x.509 v3; они могут быть заверены другим доверенным сертификатом или быть самозаверяющими. Поскольку самозаверяющий сертификат подписывает его автор, он не считается надежным по умолчанию. Большинство браузеров может игнорировать это. Самозаверяющие сертификаты должны использоваться только при разработке и тестировании облачных служб.

Сертификаты, используемые в Azure, могут содержать закрытый или открытый ключ. Сертификаты имеют отпечаток, служащий для их однозначной идентификации. Этот отпечаток включен в [файл конфигурации](cloud-services-configure-ssl-certificate.md) Azure для определения сертификата, который будет использоваться облачной службой.

## Что такое сертификаты службы
Сертификаты службы присоединяются к облачным службам, обеспечивая безопасное взаимодействие со службой. Например, при развертывании веб-роли вам нужно указать сертификат, который может выполнять проверку подлинности доступной конечной точки HTTPS. Сертификаты службы, определенные в определении службы, автоматически развертываются в виртуальной машине с запущенным экземпляром роли.

Сертификаты службы можно отправить на портал управления с помощью портала управления или API управления службами. Сертификаты службы связаны с конкретной облачной службой; они назначаются для развертывания в файле определения службы.

Сертификатами службы можно управлять отдельно от служб. Это могут делать разные пользователи. Например, разработчик может передать пакет служб, который ссылается на сертификат, ранее загруженный ИТ-менеджером в Azure. ИТ-менеджер может управлять сертификатом, а также обновлять его, изменяя конфигурацию службы без необходимости загрузки нового пакета службы. Это возможно, поскольку логическое имя сертификата, а также имя хранилища и расположение указаны в файле определения службы, а отпечаток сертификата указан в файле конфигурации службы. Чтобы обновить сертификат, необходимо просто загрузить новый сертификат и изменить значение отпечатка в файле конфигурации службы.

## Что такое сертификаты управления
Сертификаты управления позволяют выполнять проверку подлинности в API управления службами, которые предоставляются Azure. Многие программы и средства (такие как Visual Studio или Azure SDK) будут использовать эти сертификаты для автоматизации настройки и развертывания разных служб Azure. Фактически они не связаны с облачными службами.

>[AZURE.WARNING]Будьте осторожны! Эти типы сертификатов позволяют каждому, кто прошел проверку подлинности, управлять подпиской, с которой они связаны.

### Ограничения
Существует ограничение в 100 сертификатов управления на одну подписку. Существует ограничение в 100 сертификатов управления для всех подписок в рамках конкретного идентификатора пользователя администратора службы. Если идентификатор пользователя администратора учетной записи уже используется для добавления 100 сертификатов управления и есть потребность в большем количестве сертификатов, можно добавить соадминистратора для добавления дополнительных сертификатов.

Перед добавлением более 100 сертификатов убедитесь, что существующий сертификат можно использовать повторно. Использование соадминистраторов может усложнить процесс управления сертификатами.


<a name="create"></a>
## Создание самозаверяющего сертификата
Можно использовать любое доступное средство для создания самозаверяющего сертификата при условии, что оно соответствует следующим параметрам.

* Используется сертификат X.509.
* Содержит закрытый ключ.
* Создано для обмена ключами (PFX-файл).
* Имя субъекта должно совпадать с именем домена, которое используется для обращения к облачной службе.
    > **contoso.net****contoso.cloudapp.net**
* Минимум 2048-разрядное шифрование.
* **Только сертификат службы**: клиентский сертификат должен находиться в *личном* хранилище сертификатов.

Существует два простых способа создания сертификатов в Windows: с помощью служебной программы `makecert.exe` или службы IIS.

### Makecert.exe

Эта программа устанавливается с Visual Studio 2013/2015. Это служебная программа консоли, которая позволяет создавать и устанавливать сертификаты. При запуске ярлыка **Командной строки разработчика для VS2015**, который создается при установке Visual Studio, появится командная строка, содержащая это средство в пути.

    makecert -sky exchange -r -n "CN=[CertificateName]" -pe -a sha1 -len 2048 -ss My -sv [CertificateName].pvk [CertificateName].cer


### Internet Information Services (IIS)

В Интернете вы найдете множество информации о том, как это сделать с помощью IIS. Как мне кажется, [здесь](https://www.sslshopper.com/article-how-to-create-a-self-signed-certificate-in-iis-7.html) неплохо раскрыта эта тема.

### Java
Можно использовать Java для [создания сертификата](../app-service-web/java-create-azure-website-using-java-sdk.md#create-a-certificate).

## Дальнейшие действия

[Загрузка сертификата службы на портал Azure](cloud-services-configure-ssl-certificate.md) (или [портал предварительной версии](cloud-services-configure-ssl-certificate-portal.md)) и его настройка для облачной службы.
 
Загрузка [сертификата управления API](../azure-api-management-certs.md) на портал Azure.

>[AZURE.NOTE]Портал предварительной версии Azure не использует сертификаты управления для доступа к API, обращаясь вместо этого к учетным записям пользователей.

<!---HONumber=July15_HO4-->