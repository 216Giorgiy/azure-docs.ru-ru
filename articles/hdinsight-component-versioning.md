<properties urlDisplayName="HDInsight Hadoop Version" pageTitle="Новые возможности версий кластеров Hadoop в HDInsight. | Azure" metaKeywords="hdinsight, hadoop, hdinsight hadoop, hadoop azure" description="HDInsight supports multiple Hadoop cluster versions deployable at any time. See the Hadoop and HortonWorks Data Platform (HDP) distribution versions supported." services="hdinsight" umbracoNaviHide="0" disqusComments="1" editor="cgronlun" manager="paulettm" title="What's new in the cluster versions provided by HDInsight?" authors="bradsev" />

<tags ms.service="hdinsight" ms.workload="big-data" ms.tgt_pltfrm="na" ms.devlang="na" ms.topic="article" ms.date="11/14/2014" ms.author="bradsev" />


#Новые возможности в версиях кластеров Hadoop, предоставляемых в HDInsight

##Версии HDInsight
HDInsight поддерживает несколько версий кластера Hadoop, которые могут быть развернуты в любое время. Каждая из версий содержит конкретную версию платформы HortonWorks Data Platform (HDP) и набор компонентов, содержащихся в этой версии. Версии компонентов, связанных с версиями кластера HDInsight, описываются в следующей таблице. Обратите внимание, что в настоящее время Azure HDInsight по умолчанию использует версию кластера 3.1 на основе HDP 2.1.7 (с 7.11.2014).


<table border="1">
<tr><th>Компонент</th><th>HDInsight версия 3.1 (по умолчанию)</th><th>HDInsight версия 3.0</th><th>HDInsight версия 2.1</th><th>HDInsight версия 1.6</th></tr>
<tr><td>Платформа данных Hortonworks Data Platform (HDP)</td><td>2.1.7</td><td>2.0</td><td>1,3</td><td>1,1</td></tr>
<tr><td>Apache Hadoop & YARN</td><td>2.4.0</td><td>2.2.0</td><td>1.2.0</td><td>1.0.3</td></tr>
<tr><td>Tez</td><td>0.4.0</td><td></td><td></td><td></td></tr>
<tr><td>Apache Pig</td><td>0.12.1</td><td>0.12.0</td><td>0.11.0</td><td>0.9.3</td></tr>
<tr><td>Apache Hive & HCatalog</td><td>0.13.1</td><td>0.12.0</td><td>0.11.0</td><td>0.9.0</td></tr>
<tr><td>HBase </td><td>0.98.0</td><td></td><td></td><td></td></tr>
<tr><td>Apache Sqoop</td><td>1.4.4</td><td>1.4.4</td><td>1.4.3</td><td>1.4.2</td></tr>
<tr><td>Apache Oozie</td><td>4.0.0</td><td>4.0.0</td><td>3.3.2</td><td>3.2.0</td></tr>
<tr><td>Apache HCatalog</td><td>Объединено с Hive</td><td>Объединено с Hive</td><td>Объединено с Hive</td><td>0.4.1</td></tr>
<tr><td>Apache Templeton</td><td>Объединено с Hive</td><td>Объединено с Hive</td><td>Объединено с Hive</td><td>0.1.4</td></tr>
<tr><td>Ambari</td><td>>=1.5.1</td><td>1.4.1</td><td>API v1.0</td><td></td></tr>
<tr><td>Zookeeper</td><td>3.4.5</td><td>3.4.5</td><td></td><td></td></tr>
<tr><td>Storm</td><td>0.9.1</td><td></td><td></td><td></td></tr>
<tr><td>Mahout</td><td>0.9.0</td><td></td><td></td><td></td></tr>
<tr><td>Phoenix</td><td>4.0.0.2.1.7.0-2162</td><td></td><td></td><td></td></tr>
</table>


**Получение информации о текущей версии компонентов**

Версии компонентов, связанных с версиями кластера HDInsight, могут быть изменены в будущих обновлениях для HDInsight. Один из способов определения доступных компонентов и проверки версий, которые используются для кластера, - использование интерфейса Ambari REST API. Для извлечения данных о компоненте службы можно воспользоваться командой **GetComponentInformation**. Дополнительную информацию см. в [документации по Ambari][ambari-docs]. Еще один способ получения этих сведений - вход в кластер с помощью удаленного рабочего стола и изучение содержимого папки "C:\apps\dist\".


**Заметки о выпуске**	

[Дополнительные заметки о выпусках последних версий HDInsight](http://azure.microsoft.com/ru-ru/documentation/articles/hdinsight-release-notes/) см. в разделе Заметки о выпуске НDInsight.

### Выбор версии при подготовке кластера HDInsight

При создании кластера с использованием командлетов HDInsight PowerShell или пакета SDK HDInsight .NET можно выбрать версию для кластера HDInsight Hadoop с помощью параметра "Version".

Если выбрать параметр **Быстрое создание**, по умолчанию будет развернута версия 3.1 кластера HDInsight Hadoop. Если на портале Azure выбрать параметр **Настраиваемое создание**, вы можете выбрать версию кластера для развертывания на странице **Сведения о кластере** в раскрывающемся списке **Версия HDInsight**. 

##Краткие сведения о возможностях
Теперь Azure HDInsight по умолчанию поддерживает Hadoop 2.4 с кластером HDInsight версии 3.1 (при использовании платформы данных Hortonworks Data Platform 2.1.7). При этом используются все возможности этой платформы для предоставления клиентам ряда существенных преимуществ. К ним относятся в первую очередь следующие:

- **Настройка с помощью сценария (предварительная версия)**. Предварительная версия этой функции настройки кластера позволяет произвольно менять настройки кластеров Hadoop с помощью пользовательских сценариев. Благодаря этой новой функции пользователи могут экспериментировать с проектами, доступными в экосистеме Apache Hadoop, и разворачивать их в кластерах Azure HDInsight. Эта функция настройки доступна в кластерах HDInsight всех типов, в том числе Hadoop, HBase и Storm.

- **HBase**. HBase - это база данных NoSQL с низким уровнем задержки, позволяющая производить транзакционную обработку больших объемов данных. HBase предлагается в форме управляемого кластера, интегрированного в среду Azure. Кластеры настроены на хранение данных непосредственно в хранилище BLOB-объектов Azure, что обеспечивает небольшую задержку и повышенную гибкость в выборе соотношения производительность/стоимость. Это позволяет клиентам создавать интерактивные веб-сайты, работающие с большими наборами данных, создавать службы, которые хранят данные с датчиков и телеметрию миллионов конечных точек, и анализировать эти данные с помощью заданий Hadoop.

- **Apache Phoenix**. Apache Phoenix - это уровень запросов SQL в HBase. Эта функция поддерживает ограниченное подмножество спецификации языка запросов SQL, в том числе вторичные ключи. Она предоставляется в качестве драйвера JDBC, встроенного в клиент, и предназначена для уменьшения задержек при отправке запросов к данным в HBase. Apache Phoenix принимает запрос SQL, компилирует его в серию сканирований и вызовов сопроцессоров HBase и создает регулярные результирующие наборы JDBC. Apache Phoenix - это уровень реляционной базы данных HBase. Эта функция предоставляется в качестве драйвера JDBC, встроенного в клиент, и предназначена для уменьшения задержек при отправке запросов к данным в HBase. Apache Phoenix принимает запрос SQL, компилирует его в серию сканирований HBase, а затем оркестрирует выполнение этих сканирований, чтобы создать регулярные результирующие наборы JDBC.

- **Панель мониторинга кластеров**. Это новое веб-приложение, которое развертывается в кластере HDInsight.  Приложение можно использовать для выполнения запросов Hive, проверки журналов заданий и просмотра хранилища Blob-объектов Azure. Для доступа к веб-приложению используется URL-адрес <*ClusterName*>.azurehdinsight.net.

- **Библиотека Microsoft Avro**. В этой библиотеке реализуется система сериализации данных Apache Avro для среды Microsoft.NET. Apache Avro обеспечивает компактный формат обмена двоичными данными для сериализации. Библиотека использует JSON для определения не зависящей от языка схемы, которая гарантирует взаимодействие языков. Данные, сериализованные в одном языке, могут быть прочитаны в другом. В настоящее время поддерживаются C, C++, C#, Java, PHP, Python и Ruby. Формат сериализации Apache Avro широко используется в Azure HDInsight для представления сложных структур данных в заданиях Hadoop MapReduce.

- **YARN**. Новая универсальная распределенная платформа управления приложениями, которая заменила классическую платформу Apache Hadoop MapReduce для обработки данных в кластерах Hadoop. Эффективно выступает в качестве операционной системы Hadoop и преобразует однозадачную платформу работы с данными с пакетной обработкой в многозадачную платформу, которая поддерживает пакетную интерактивную потоковую обработку и обработку в режиме реального времени. Эта новая платформа управления повышает масштабируемость и эффективность использования кластера в соответствии с такими критериями, как гарантии по мощности, достоверность и соглашения об уровнях обслуживания.

- **Tez (только HDInsight 3.1)**. Универсальная и настраиваемая платформа, которая используется для создания упрощенных задач обработки данных, как для малых, так и для больших задач в Hadoop. Эта платформа обеспечивает возможность выполнения сложных направленных ациклических графов (DAG) задач для одного задания. Благодаря этому проекты экосистемы Apache Hadoop, такие как Apache Hive и Apache Pig, могут отвечать требованиям в отношении времени отклика при взаимодействии с человеком, а также максимально большой пропускной способности на уровне петабайт. Обратите внимание, что Hive 0.13 допускает выполнение запросов Hive поверх Tez, а не MapReduce.

- **Высокая доступность**. К кластерам Hadoop, развернутым в HDInsight, добавлен второй головной узел для повышения доступности службы. Стандартные реализации кластеров Hadoop обыкновенно имеют один головной узел. HDInsight устраняет эту единственную точку отказа благодаря добавлению второго головного узла. Переход на новую конфигурацию кластера высокой доступности не влияет на изменение цены кластера, если только клиенты не подготавливают кластеры с головным узлом очень большого размера, а не с размером по умолчанию.

- **Производительность Hive**. На порядок ускорено время ответа на запрос Hive (до 40 раз) и улучшена степень сжатия данных (до 80 %) благодаря использованию формата **Optimized Row Columnar** (ORC).

- **Pig, Sqoop, Oozie и Ambari**. Обновления версий компонентов для кластера HDInsight версии 3.0 (HDP 2.0/Hadoop 2.2), которые обеспечивают согласование с кластером HDInsight версии 2.1 (HDP 1.3/Hadoop 1.2). Подробные сведения см. в таблицах версий ниже.

- **Mahout**. Эта библиотека масштабируемых алгоритмов машинного обучения предварительно установления в кластерах HDInsight 3.1 Hadoop. Благодаря этому можно выполнять задания Mahout без необходимости дополнительно настраивать кластер.

- **Поддержка виртуальной сети**. Кластеры HDInsight могут использоваться совместно с виртуальной сетью Azure для обеспечения поддержки облачных ресурсов или гибридных сценариев, когда происходит привязка облачных ресурсов к ресурсам, размещенным в центре обработки данных.


## Поддерживаемые версии
В следующей таблице перечислены версии HDInsight, доступные в настоящее время, соответствующие версии платформы данных Hortonworks Data Platform (HDP) и даты их выхода. Также будут указаны даты прекращения их сопровождения, если они известны. Обратите внимание на следующее.

* Высокодоступные кластеры с двумя головными узлами развертываются по умолчанию для кластеров HDInsight 2.1, 3.0 и 3.1. Они недоступны для кластеров HDInsight 1.6.
* При истечении срока поддержки для определенной версии, она может стать недоступной через портал управления Azure. В таблице ниже указаны версии, доступные на портале управления Аzure. Версии кластеров по-прежнему будут доступны при использовании параметра Version с командой PowerShell [New-AzureHDInsightCluster](http://msdn.microsoft.com/ru-ru/library/dn593744.aspx) и пакетом SDK для .NET вплоть до даты прекращения сопровождения. 

<table border="1">
<tr><th>Версия HDInsight</th><th>Версия HDP</a><th>Высокая доступность</th></th><th>Дата выпуска</th><th>Доступна на портале управления Azure</th><th>Дата прекращения поддержки</th><th>Дата прекращения сопровождения</th></tr>
<tr><td>HDI 3.1</td><td>HDP 2.1</td><td>Да</td><td></td><td>Да</td><td></td><td></td></tr>
<tr><td>HDI 3.0</td><td>HDP 2.0</td><td>Да</td><td>11.02.2014</td><td>Да</td><td>17.09.2014</td><td>30.06.2015</td></tr>
<tr><td>HDI 2.1</td><td>HDP 1.3</td><td>Да</td><td>28.10.2013</td><td>Нет</td><td>12.05.2014</td><td>31.05.2015</td></tr>
<tr><td>HDI 1.6</td><td>HDP 1.1</td><td>Нет</td><td>28.10.2013</td><td>Нет</td><td>26.04.2014</td><td>31.05.2015</td></tr>
</table><br>

**Развертывание кластеров не по умолчанию**	

Создание кластеров HDInsight 3.1 на Hadoop 2.4 поддерживается с помощью портала Azure, пакета SDK HDinsight и Azure PowerShell. Обратите внимание, что кластеры HDInsight 3.1 создаются на Hadoop 2.4 по умолчанию. Таким образом, пользователям необходимо использовать параметр **Настраиваемое создание** на портале, чтобы задать другие версии кластеров HDInsight, если их нужно создать.

### Соглашение об уровнях обслуживания (SLA) для версий кластера HDInsight

Соглашение об уровне обслуживания определяется в терминах "Окна поддержки". Под окном поддержки понимается период времени, в течение которого определенная версия кластера HDInsight поддерживается службой поддержки клиентов корпорации Майкрософт.  Кластер HDInsight находится вне окна поддержки, если **дата истечения срока технической поддержки** его версии уже прошла.  Список поддерживаемых версий кластера HDInsight можно найти в приведенной выше таблице.  Дата истечения срока действия технической поддержки для конкретной версии HDInsight (обозначается как версия X) рассчитывается как наиболее поздняя из следующих дат (в случае доступности более новой версии Х+1):  

- Формула 1:  добавьте 180 дней к дате выхода версии Х кластера HDInsight
- Формула 2: добавьте 90 дней к дате, когда версия кластера HDInsight X + 1 (следующая за версией X) стала доступной на портале управления Azure.

**Дата прекращения сопровождения** - это дата, по прошествии которой в HDInsight нельзя создать определенную версию кластера.

> [WACOM.NOTE] Кластеры HDInsight версии 2.1 и 3.0 работают под управлением гостевой ОС Azure [Family 4],(http://msdn.microsoft.com/ru-ru/library/azure/ee924680.aspx#explanation) которая использует 64-разрядную версию Windows Server 2012 R2 и поддерживает платформу .NET Framework версий 4.0, 4.5 и 4.5.1. 

## Заметки о выпуске Hortonworks, связанные с версиями HDInsight

* Кластер HDInsight версии 3.1 использует пакет Hadoop, основанный на платформе данных [Hortonworks Data Platform 2.1.7][hdp-2-1-7]. С 7.11.2014 этот кластер Hadoop создается по умолчанию при использовании портала Azure HDInsight. Кластеры HDInsight 3.1, созданные до 7.11.2014, работают на платформе данных [Hortonworks Data Platform 2.1.1][hdp-2-1-1] 

* Кластер HDInsight версии 3.0 использует пакет Hadoop, основанный на платформе данных [Hortonworks Data Platform 2.0][hdp-2-0-8].

* Кластер HDInsight версии 2.1 использует пакет Hadoop, основанный на платформе данных [Hortonworks Data Platform 1.3][hdp-1-3-0]. 

* Кластер HDInsight версии 1.6 использует пакет Hadoop, основанный на платформе данных [Hortonworks Data Platform 1.1][hdp-1-1-0]. 


[image-hdi-versioning-versionscreen]: ./media/hdinsight-component-versioning/hdi-versioning-version-screen.png

[wa-forums]: http://azure.microsoft.com/ru-ru/support/forums/

[connect-excel-with-hive-ODBC]: ../hdinsight-connect-excel-hive-ODBC-driver/

[hdp-2-1-7]: http://docs.hortonworks.com/HDPDocuments/HDP2/HDP-2.1.7-Win/bk_releasenotes_HDP-Win/content/ch_relnotes-HDP-2.1.7.html

[hdp-2-1-1]: http://docs.hortonworks.com/HDPDocuments/HDP2/HDP-2.1.1/bk_releasenotes_hdp_2.1/content/ch_relnotes-hdp-2.1.1.html

[hdp-2-0-8]: http://docs.hortonworks.com/HDPDocuments/HDP2/HDP-2.0.8.0/bk_releasenotes_hdp_2.0/content/ch_relnotes-hdp2.0.8.0.html

[hdp-1-3-0]: http://docs.hortonworks.com/HDPDocuments/HDP1/HDP-1.3.0/bk_releasenotes_hdp_1.x/content/ch_relnotes-hdp1.3.0_1.html

[hdp-1-1-0]: http://docs.hortonworks.com/HDPDocuments/HDP1/HDP-Win-1.1/bk_releasenotes_HDP-Win/content/ch_relnotes-hdp-win-1.1.0_1.html

[ambari-docs]: https://github.com/apache/ambari/blob/trunk/ambari-server/docs/api/v1/index.md

[zookeeper]: http://zookeeper.apache.org/ 

<!--HONumber=35.1-->
