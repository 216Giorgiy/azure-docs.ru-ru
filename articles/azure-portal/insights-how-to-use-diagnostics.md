<properties 
	pageTitle="Включение мониторинга и диагностики" 
	description="Узнайте, как настроить диагностику ресурсов в Azure." 
	authors="stepsic-microsoft-com" 
	manager="ronmart" 
	editor="" 
	services="azure-portal" 
	documentationCenter="na"/>

<tags 
	ms.service="azure-portal" 
	ms.workload="na" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="09/08/2015" 
	ms.author="stepsic"/>

# Включение мониторинга и диагностики

На [портале Azure](http://portal.azure.com) можно настроить данные мониторинга и диагностики ваших ресурсов. Для программной настройки диагностики можно также использовать [API REST](https://msdn.microsoft.com/library/azure/dn931932.aspx) или [пакет SDK для .NET](https://www.nuget.org/packages/Microsoft.Azure.Insights/).

Данные диагностики, мониторинга и метрик в Azure сохраняются в выбранной учетной записи хранения. Это позволяет использовать любые средства для чтения данных — от обозревателя хранилища до Power BI и средств сторонних поставщиков.

## При создании ресурса

Большинство служб позволяют включить диагностику при первом их создании на [портале Azure](http://portal.azure.com).

1. Нажмите кнопку **Создать** и выберите ресурс, который вас интересует. 

2. Выберите **Дополнительная настройка**. ![Выноска "Диагностика"](./media/insights-how-to-use-diagnostics/Insights_CreateTime.png)

3. Выберите **Диагностика** и нажмите кнопку **Вкл**. Необходимо выбрать учетную запись хранения, в которой будут сохраняться данные диагностики. При отправке диагностических данных в учетную запись хранения действуют обычные тарифы на хранение и передачу данных.

4. Нажмите **ОК**, чтобы создать ресурс.

## Изменение параметров существующего ресурса

Если вы уже создали ресурс и хотите изменить параметры диагностики (чтобы изменить уровень сбора данных, например), это можно сделать непосредственно на портале Azure.

1. Перейдите к ресурсу и нажмите кнопку **Параметры**.

2. Выберите **Диагностика**.

3. В выноске **Диагностика** представлены все возможные данные диагностики и мониторинга для этого ресурса. Для некоторых ресурсов можно также выбрать политику **хранения** данных, чтобы удалять их из вашей учетной записи хранения. ![Диагностика хранилища](./media/insights-how-to-use-diagnostics/Insights_StorageDiagnostics.png)

4. После выбора параметров нажмите кнопку **Сохранить**. Может потребоваться определенное время для отображения данных мониторинга после первого включения.

### Категории сбора данных для виртуальных машин
Все метрики и журналы виртуальных машин записываются с интервалом в одну минуту, так что у вас всегда будет актуальная информация о них.

- **Основные метрики**: метрики работоспособности виртуальной машины, например относящиеся к процессору и памяти. 
- **Метрики сети и веб-служб**: метрики, относящиеся к сетевым подключениям и веб-службам.
- **Метрики .NET**: метрики приложений .NET и ASP.NET, выполняющихся на виртуальной машине.
- **Метрики SQL** : если вы используете службу Microsoft SQL, это показатели производительности службы.
- **Журналы событий приложений Windows**: события Windows, отправляемые в канал приложений.
- **Журналы системных событий Windows**: события Windows, отправляемые в системный канал. Сюда также относятся события из [Microsoft Antimalware](http://go.microsoft.com/fwlink/?LinkID=404171&clcid=0x409). 
- **Журналы событий безопасности Windows**: события Windows, отправляемые в канал безопасности.
- **Журналы инфраструктуры диагностики**: журналы инфраструктуры сбора диагностических данных.
- **Журналы IIS**: журналы сервера IIS.

Обратите внимание, что в настоящее время некоторые дистрибутивы Linux не поддерживаются, а на виртуальной машине необходимо установить гостевой агент.

## Дальнейшие действия

* [Получайте уведомления](insights-receive-alert-notifications.md) при возникновении операционных событий или превышении пороговых значений метрик.
* [Отслеживайте метрики службы](insights-how-to-customize-monitoring.md), чтобы убедиться, что служба доступна и отвечает на запросы.
* [Автоматически масштабируйте число экземпляров](insights-how-to-scale.md), чтобы служба масштабировалась на основе спроса.
* [Отслеживайте производительность приложения](insights-perf-analytics.md), чтобы точно понять, как ваш код работает в облаке.
* [Просматривайте журналы событий и аудита](insights-debugging-with-events.md), чтобы знать обо всем, что произошло в службе.
* [Отслеживайте работоспособность службы](insights-service-health.md), чтобы знать, когда производительность Azure снизилась или работа службы нарушилась. 
 

<!---HONumber=Sept15_HO2-->