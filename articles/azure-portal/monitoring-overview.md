.<properties
	pageTitle="Обзор мониторинга в Microsoft Azure | Microsoft Azure"
	description="Обзор верхнего уровня мониторинга и диагностики в Microsoft Azure, в том числе предупреждений, объектов webhook, автоматического масштабирования и других компонентов."
	authors="rboucher"
	manager=""
	editor=""
	services="monitoring-and-diagnostics"
	documentationCenter="monitoring-and-diagnostics"/>

.<tags
	ms.service="monitoring-and-diagnostics"
	ms.workload="na"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="08/03/2016"
	ms.author="robb"/>

# Обзор мониторинга в Microsoft Azure

В этой статье приводится обзор понятий, связанных с мониторингом ресурса в Azure, и предоставляются ссылки на дополнительные сведения об определенных типах ресурсов. Общие сведения о мониторинге приложения не в контексте Azure можно найти в [руководстве по мониторингу и диагностике](../best-practices-monitoring.md).

Облачные приложения являются сложными и содержат множество подвижных частей. Мониторинг дает возможность обеспечить работоспособность приложения, а также отслеживать важные метрики, чтобы предотвращать потенциальные проблемы или диагностировать их. Кроме того, данные мониторинга можно использовать для автоматизации некоторых действий, которые могут требовать выполнения ручных операций, и получения подробных сведений о приложении, что может помочь повысить его производительность или улучшить возможности обслуживания.

На приведенной ниже схеме показано логическое представление мониторинга Azure. Базовая реализация является более сложной. На рисунке показан тип журналов, которые можно собирать, и указано, что можно делать с этими данными.

.![Логическая модель мониторинга и диагностики для невычислительных ресурсов](./media/monitoring-overview/monitoring-azure-resources-non-compute.png)

Рисунок 1. Логическая модель мониторинга и диагностики для невычислительных ресурсов

<br/>

.![Логическая модель мониторинга и диагностики для вычислительных ресурсов](./media/monitoring-overview/monitoring-azure-resources-compute.png)

Рисунок 2. Логическая модель мониторинга и диагностики для вычислительных ресурсов


## Источники данных мониторинга
### Журналы аудита инфраструктуры (изменений)
Вы можете получить журналы аудита (иногда называемые операционными журналами или журналами изменений) для ресурса в контексте инфраструктуры Azure. Эти журналы содержат такие сведения, как время создания или удаления ресурсов.

### Виртуальная машина узла
**Только для вычислительных ресурсов**

В настоящее время сбор метрик для виртуальной машины узла невозможен, но он указан для полноты информации.

Некоторые вычислительные ресурсы, например облачные службы, виртуальные машины и Service Fabric, взаимодействуют с выделенной виртуальной машиной узла. Виртуальная машина узла является эквивалентом корневой виртуальной машины в модели гипервизора Hyper-V.

Для других служб Azure не обязательно взаимно однозначное сопоставление ресурса и конкретной виртуальной машины узла.


### Ресурс — метрики и журналы диагностики
Доступные для сбора метрики отличаются в зависимости от типа ресурса. Например, виртуальные машины будут предоставлять статистику по операциям дискового ввода-вывода и загрузке ЦП в процентах, что не имеет смысла для очереди служебной шины, которая предоставляет такие метрики, как размер очереди и пропускная способность для передачи сообщений.

Для вычислительных ресурсов можно получить метрики гостевой ОС, а также модули диагностики, такие как система диагностика Azure. Система диагностики Azure помогает в сборе диагностических данных и их перенаправления в другие расположения, включая службу хранилища Azure.

### Приложения — журналы диагностики, журналы приложений и метрики
**Только для вычислительных ресурсов**

Приложения могут выполняться в гостевой ОС в рамках модели вычислений. Они выдают собственный набор журналов и метрик.

Это могут быть метрики следующих типов:

- Счетчики производительности
- Журналы приложений
- Журналы событий Windows
- Источник событий .NET
- Журналы IIS
- Трассировка событий Windows на основе манифестов
- аварийные дампы;
- журналы ошибок пользователей.


## Применение данных мониторинга

### Визуализация
Визуализация данных мониторинга на графиках и диаграммах помогает находить тенденции намного быстрее, чем при просмотре самих данных. Ниже приведено несколько способов, как это сделать:

- Использование портала Azure
- отправка данных в Azure Application Insights;
- отправка данных в PowerBI;
- отправка данных в сторонний инструмент визуализации с помощью потоковой трансляции или использование инструмента для чтения данных из архива в службе хранилища Azure.

### Архив
Обычно данные мониторинга записываются в службу хранилища Azure и хранится там, пока вы их не удалите.

Вот несколько способов использования этих данных:

- После записи данные можно считывать и обрабатывать с помощью дополнительных инструментов в среде Azure или вне ее.
- Данные можно скачать на локальный компьютер и поместить в архив. Можно также изменить политику хранения в облаке для длительного хранения данных.
- Можно оставить данные в службе хранилища Azure на неопределенный срок. (Обратите внимание, что нужно платить за хранение данных в службе хранилища Azure исходя из их объема.)

### Запрос
Для доступа к данным в системе или службе хранилища Azure можно использовать REST API Insights, команды Common Language Interface (CLI), командлеты PowerShell или пакет SDK для .NET. Ниже приведены примеры:

-  Получение данных для пользовательского приложения мониторинга, созданного вами.
-  Создание пользовательских запросов и отправка этих данных в стороннее приложение.

### Маршрутизация
Можно транслировать данные мониторинга в другие расположения в режиме реального времени. Примеры приведены ниже.

- Передача в Application Insights для использования встроенных инструментов визуализации.
- Отправка в концентраторы событий для передачи в сторонние инструменты, выполняющие анализ в режиме реального времени.

### Автоматизация
Можно использовать данные мониторинга для активации событий или даже целых процессов. Примеры:

- Использование данных для автомасштабирования вычислительных операций на основе нагрузки на приложение.
- Отправка электронных сообщений в случае, если метрика достигла предварительно заданного порогового значения.
- Вызов URL-адреса (webhook) для выполнения действия в системе за пределами Azure.
- Запуск модуля Runbook в службе автоматизации Azure для разнообразных задач.



## Способы использования
Как правило, для управления объектами мониторинга, их динамикой и получением данных используется один из приведенных ниже методов. Не все методы доступны для всех действий.

- [Портал Azure](https://portal.azure.com)
- [PowerShell](insights-powershell-samples.md)
- [Common Library Interface (CLI)](insights-cli-samples.md)
- [ИНТЕРФЕЙС REST API](https://msdn.microsoft.com/library/dn931943.aspx)
- [ПАКЕТ SDK .NET](https://msdn.microsoft.com/library/dn802153.aspx)

## Предложения Azure для мониторинга
В Azure есть предложения для мониторинга самых разных служб, от инфраструктуры без ОС до телеметрии приложений. Лучшая стратегия мониторинга объединяет все три решения, что обеспечивает комплексное, подробное представление о работоспособности ваших служб.

- [Мониторинг Azure Insights (платформы)](http://aka.ms/azmondocs) предлагает возможности визуализации, создания запросов, маршрутизации, оповещения, автомасштабирования и автоматизации на основе данных по инфраструктуре Azure (журналы аудита) и каждому отдельному ресурсу Azure (журналы диагностики). Эта статья является частью документации по Azure Insights.
- **[Application Insights](https://azure.microsoft.com/documentation/services/application-insights/)** предоставляет широкие возможности обнаружения и диагностики проблем на уровне приложения вашей службы и хорошо интегрируется с данными из службы мониторинга Azure.
- **[Log Analytics](https://azure.microsoft.com/documentation/services/log-analytics/)** (входит в состав **[Operations Management Suite](https://www.microsoft.com/cloud-platform/operations-management-suite)**) обеспечивает целостное решение для управлению ИТ-инфраструктурой (локальной и облачной), включая поиск журналов и аналитику для ресурсов Azure.


## Дальнейшие действия
Кроме того, вы можете узнать больше о:

- [Azure Insights](http://aka.ms/azmondocs), изучив статьи, доступные по ссылкам, которые указаны слева в содержании, а также видео, доступное по данной ссылке.
- [Системе диагностики Azure](../azure-diagnostics.md), если вы пытаетесь диагностировать проблемы в работе облачной службы, виртуальной машины или приложения Service Fabric.
- [Application Insights](https://azure.microsoft.com/documentation/services/application-insights/), если вы пытаетесь диагностировать проблемы в работе веб-приложения службы приложений.
- [Устранении неполадок службы хранилища Azure](../storage/storage-e2e-troubleshooting.md), если вы используете большие двоичные объекты, таблицы или очереди службы хранилища.
- [Log Analytics](https://azure.microsoft.com/documentation/services/log-analytics/) и [Operations Management Suite](https://www.microsoft.com/cloud-platform/operations-management-suite)

<!---HONumber=AcomDC_0824_2016-->