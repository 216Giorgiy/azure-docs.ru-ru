<properties
	pageTitle="Размещение проекта мобильных служб в службе приложений | Microsoft Azure"
	description="Сведения о запуске проекта мобильных служб в службе приложений"
	documentationCenter=""
	authors="mattchenderson"
	manager="dwrede"
	editor="na"
	services="app-service\mobile"/>

<tags
	ms.service="app-service-mobile"
	ms.workload="mobile"
	ms.tgt_pltfrm="na"
	ms.devlang="multiple"
	ms.topic="get-started-article"
	ms.date="10/08/2015"
	ms.author="mahender"/>

# Размещение проекта мобильных служб .NET в службе приложений

[AZURE.INCLUDE [app-service-mobile-note-mobile-services](../../includes/app-service-mobile-note-mobile-services.md)]

В этом разделе показано, как разместить проект мобильных служб .NET в службе приложений Azure. Выполняемые таким образом приложения получат доступ ко всем возможностям службы приложений. Тарификация при этом будет осуществляться в соответствии со [стоимостью службы приложений], а не стоимостью мобильных служб.

Для работы с приложениями, размещенными в службе приложений, можно использовать все учебники .NET для мобильных служб среды выполнения. Вам только нужно будет заменить домен azure-mobile.net во всех соответствующих URL-адресах доменом экземпляра службы приложений.

Вы можете разместить проект мобильных служб и в [среде службы приложений]. Все содержимое этого учебника будет актуальным, кроме того, что адрес сайта вместо contoso.contosoase.p.azurewebsites.net формы будет выглядеть так: contoso.azurewebsites.net.

## <a name="app-settings"></a>Каковы преимущества размещения в службе приложений?

Служба приложения позволяет использовать расширенные возможности среды размещения при работе с приложением. Кроме того, приложению предоставляется доступ к промежуточным слотам, пользовательским доменам, поддержке диспетчера трафика и многим другим функциям. Хотя вы можете [перенести мобильную службу в мобильное приложение в службе приложений], у некоторых клиентов может возникнуть необходимость воспользоваться преимуществами этих функций немедленно, т. е. без предварительного обновления пакета SDK.

Основное ограничение при размещении в службе приложений — отсутствие интеграции запланированных заданий мобильных служб. Кроме того, вам нужно настроить планировщик Azure для вызова пользовательских API, а также включить функции веб-заданий.

Дополнительные сведения о преимуществах службы приложений см. в статье [Сравнение мобильных служб и службы приложений].

## <a name="app-settings"></a>Параметры приложения
Для работы мобильных служб требуется, чтобы в среде были доступными несколько параметров приложения. В этом разделе описано поэтапное добавление всех необходимых параметров. Чтобы задать параметры приложения в своем веб-приложении, сначала войдите в [предварительную версию портала управления Azure]. Перейдите к веб-приложению, мобильному приложению или приложению API, которое будет использоваться, и выберите «Параметры» и «Параметры приложения». Перейдите в раздел «Параметры приложения». Здесь вы можете задать необходимые значения соответствующим ключам.
 
Для параметра **MS\_MobileServiceName** нужно указать имя приложения. Например, если вы собираетесь запустить приложение с URL-адресом contoso.azurewebsites.net, правильным значением будет contoso.
 
Для параметра **MS\_MobileServiceDomainSuffix** нужно указать имя веб-приложения. Например, если вы собираетесь запустить приложение с URL-адресом contoso.azurewebsites.net правильным значением будет azurewebsites.net.
 
Для параметра **MS\_ApplicationKey** можно указать любое значение, но оно должно совпадать со значением, которое используется в пакете SDK для клиента. Рекомендуется использовать идентификатор GUID.
 
Для параметра **MS\_MasterKey** можно указать любое значение, но оно должно совпадать со значением, которое используется в API или клиенте администратора. Рекомендуется использовать идентификатор GUID.
 
При перемещении существующего приложения мобильных служб главный ключ и ключ приложения можно получить на вкладке «Настройка» в разделе «Мобильные службы» [портала управления Azure]. Выберите действие «Управление ключами» внизу и скопируйте ключи.


## <a name="client-sdk"></a>Изменение параметров пакета SDK клиента

В проекте клиентского приложения измените параметры конструктора клиентского объекта мобильных служб для принятия URL-адреса приложения (например, contoso.azurewebsites.net) и ключа приложения, настроенного ранее. Используйте версию пакета SDK для мобильных служб, которая **не** должна обновляться. Для клиентов iOS и Android используйте версии 2.x, а для Windows и Xamarin — версию 1.3.2. С клиентами JavaScript должна использоваться версия 1.2.7.

## <a name="data"></a>Включение функций для работы с данными

Для работы с классами платформы Entity Framework по умолчанию в мобильных службах требуются два дополнительных параметра приложения.
 
Строки подключения хранятся в разделе «Строки подключения» колонки «Параметры приложения» сразу под одноименным разделом. Строка подключения для базы данных должна быть указана в ключе **MS\_TableConnectionString**. Для перемещения существующего приложения мобильных служб на портале мобильных служб перейдите в раздел «Строки подключения» вкладки «Настройка». Щелкните «Показать строки подключения» и скопируйте значение.
 
По умолчанию используется схема **MS\_MobileServiceName**, но это может быть переопределено с помощью параметра **MS\_TableSchema**. Вернитесь в раздел «Параметры приложения» и укажите имя используемой схемы **MS\_TableSchema**. При перемещении существующего приложения мобильных служб используется схема, созданная с помощью Entity Framework. Речь идет об имени мобильной службы, а не экземпляре службы приложения с размещаемым кодом.

## <a name="push"></a>Включение функций push-уведомлений

Чтобы включить функцию отправки push-уведомлений, вам нужно предоставить веб-приложению информацию о центре уведомлений.
 
В разделе «Строки подключения» укажите для параметра **MS\_NotificationHubConnectionString** строку подключения DefaultFullSharedAccessSignature для центра уведомлений. Для перемещения существующего приложения мобильных служб на портале мобильных служб перейдите в раздел «Строки подключения» вкладки «Настройка». Щелкните «Показать строки подключения» и скопируйте значение.

Присвойте параметру **MS\_NotificationHubName** приложения имя центра уведомлений. При перемещении существующего приложения мобильных служб это значение можно получить на портале мобильных служб на вкладке push-уведомлений. Другие поля на этой вкладке уже связаны с центром уведомлений, и их значения не нужно копировать.
 
## <a name="auth"></a>Включение функций проверки подлинности

Для работы функций идентификации также необходимо настроить параметры приложения для отдельных поставщиков. При перемещении мобильных служб из существующего приложения каждому полю на вкладке идентификации на портале мобильных служб соответствует определенный параметр приложения.
 
Учетная запись Майкрософт: * **MS\_MicrosoftClientID** * **MS\_MicrosoftClientSecret** * **MS\_MicrosoftPackageSID**.
 
Facebook: * **MS\_FacebookAppID** * **MS\_FacebookAppSecret**.
 
Twitter * **MS\_TwitterConsumerKey** * **MS\_TwitterConsumerSecret**.
 
Google * **MS\_GoogleClientID** * **MS\_GoogleClientSecret**.
 
AAD * **MS\_AadClientID** * **MS\_AadTenants**. Примечание: параметр **MS\_AadTenants** сохраняется как разделенный запятыми список доменов клиента (поля «Разрешенные клиенты» на портале мобильных служб).

## <a name="publish"></a>Публикация проекта мобильных служб

1. На портале предварительной версии перейдите в приложение и щелкните на панели команд «Получить профиль публикации». Сохраните загруженный профиль на локальном компьютере.
2. В Visual Studio щелкните правой кнопкой мыши серверный проект и выберите «Опубликовать». На вкладке «Профиль» выберите «Импорт» и найдите загруженный профиль.
3. Нажмите кнопку «Опубликовать», чтобы развернуть код в службе приложений.

Журналы обрабатываются с использованием стандартных функций ведения журнала службы приложений. Дополнительные сведения о ведении журнала см. в разделе [Включение ведения журнала диагностики в службе приложений Azure].

<!-- URLs. -->

[предварительную версию портала управления Azure]: https://portal.azure.com/
[портала управления Azure]: https://manage.windowsazure.com/
[Включение ведения журнала диагностики в службе приложений Azure]: web-sites-enable-diagnostic-log.md
[стоимостью службы приложений]: https://azure.microsoft.com/ru-RU/pricing/details/app-service/
[среде службы приложений]: app-service-app-service-environment-intro.md
[Сравнение мобильных служб и службы приложений]: app-service-mobile-value-prop-migration-from-mobile-services-preview.md
[перенести мобильную службу в мобильное приложение в службе приложений]: app-service-mobile-dotnet-backend-migrating-from-mobile-services-preview.md

<!---HONumber=Nov15_HO1-->