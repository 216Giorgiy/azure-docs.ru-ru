<properties
	pageTitle="Настройка проверки подлинности учетной записи Майкрософт для приложения служб приложений"
	description="Настройка проверки подлинности учетной записи Майкрософт для приложения служб приложений."
	authors="mattchenderson"
	services="app-service\mobile"
	documentationCenter=""
	manager="dwrede"
	editor=""/>

<tags
	ms.service="app-service-mobile"
	ms.workload="mobile"
	ms.tgt_pltfrm="na"
	ms.devlang="multiple"
	ms.topic="article"
	ms.date="02/04/2016"
	ms.author="mahender"/>

# Настройка приложения службы приложений для использования входа по учетной записи Майкрософт

[AZURE.INCLUDE [app-service-mobile-selector-authentication](../../includes/app-service-mobile-selector-authentication.md)]

В этом разделе показано, как настроить службу приложений Azure для использования учетной записи Майкрософт в качестве поставщика проверки подлинности.


> [AZURE.NOTE]
В этом разделе показано, как использовать проверку подлинности и функцию авторизации в службе приложений. В большинстве приложений они заменяют шлюз службы приложений. Отличия, связанные с использованием шлюза, описаны в примечаниях.


## <a name="register"> </a>Регистрация приложения с помощью учетной записи Майкрософт

1. Перейдите на [портал Azure] и перейдите к своему приложению. Скопируйте свой **URL-адрес**. Он понадобится для настройки учетной записи Майкрософт.

2. Перейдите на страницу [Мои приложения] в центре разработки для учетной записи Майкрософт и войдите по учетной записи Майкрософт, если это требуется.

4. Щелкните элемент **Создать приложение**, введите **Имя приложения** и нажмите кнопку **Я принимаю**.

5. Щелкните **Параметры API**. Выберите **Да** для пункта **Мобильное или классическое клиентское приложение**. В поле **URL-адрес перенаправления** введите **URL-адрес перенаправления** приложения и нажмите кнопку **Сохранить**. Ваш универсальный код ресурса (URI) перенаправления — это URL-адрес приложения, дополненный путем _/.auth/login/microsoftaccount/callback_. Например, `https://contoso.azurewebsites.net/.auth/login/microsoftaccount/callback`. Убедитесь, что используете схему HTTPS.

	![][0]


	> [AZURE.NOTE]
	Если вместо функции аутентификации или авторизации службы приложений используется шлюз службы приложений, то в URL-адресе перенаправления используется URL-адрес шлюза, дополненный путем _/signin-microsoft_.


6. Щелкните **Параметры приложений** и запишите значения **Идентификатор клиента** и **Секрет клиента**.


    > [AZURE.NOTE] Секрет клиента — это важные учетные данные безопасности. Не сообщайте никому этот секрет клиента и не распространяйте его вместе со своим приложением.


## <a name="secrets"> </a>Добавление данных учетной записи Майкрософт в приложение

> [AZURE.NOTE]
Если используется шлюз службы приложений, пропустите этот раздел и перейдите к своему шлюзу на портале. Последовательно выберите пункты **Параметры**, **Идентификация**, а затем **Учетная запись Майкрософт**. Вставьте полученные ранее значения и нажмите кнопку **Сохранить**.


7. Снова вернитесь на [портал Azure] и перейдите к своему приложению. Щелкните **Параметры**, а затем **Аутентификация или авторизация**.

8. Если функция аутентификации или авторизации не включена, установите переключатель в положение **Вкл**.

9. Щелкните **учетную запись Майкрософт**. Вставьте значения идентификатора и секретного кода приложения, полученные ранее, и, при необходимости, включите любые области, которые требуются приложению. Нажмите кнопку **ОК**.

    ![][1]

	По умолчанию служба приложений обеспечивает проверку подлинности, но не ограничивает авторизованный доступ к содержимому сайта и API. Авторизация пользователей должна быть включена в код приложения.

17. (Необязательно) Чтобы предоставить доступ к узлу только для пользователей, прошедших проверку подлинности по учетной записи Майкрософт, установите для параметра **Действие, выполняемое, если запрос не прошел проверку подлинности** значение **Учетная запись Майкрософт**. В этом случае все запросы, не прошедшие проверку подлинности, направляются для проверки подлинности по учетной записи Майкрософт.

11. Щелкните **Сохранить**.


Теперь вы можете использовать учетную запись Майкрософт для проверки подлинности в приложении.

## <a name="related-content"> </a>Связанная информация

[AZURE.INCLUDE [app-service-mobile-related-content-get-started-users](../../includes/app-service-mobile-related-content-get-started-users.md)]

<!-- Authenticate your app with Live Connect Single Sign-On: [Windows](windows-liveconnect) -->



<!-- Images. -->

[0]: ./media/app-service-mobile-how-to-configure-microsoft-authentication/app-service-microsoftaccount-redirect.png
[1]: ./media/app-service-mobile-how-to-configure-microsoft-authentication/mobile-app-microsoftaccount-settings.png

<!-- URLs. -->

[Мои приложения]: http://go.microsoft.com/fwlink/p/?LinkId=262039
[портал Azure]: https://portal.azure.com/

<!---HONumber=AcomDC_0211_2016-->