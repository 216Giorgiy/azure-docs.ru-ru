<properties
   pageTitle="Как создать виртуальную машину Azure с помощью интерфейса xplat-cli"
   description="В этой статье описано, как установить интерфейс xplat-cli на любой платформе, как его использовать для подключения к учетной записи Azure и как с его помощью создавать виртуальные машины."
   services="virtual-machines"
   documentationCenter="virtual-machines"
   authors="squillace"
   manager="timlt"
   editor="tysonn"/>

<tags
   ms.service="virtual-machines"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="command-line-interface"
   ms.workload="infrastructure-services"
   ms.date="02/20/2015"
   ms.author="rasquill"/>

# Создание виртуальной машины с помощью кроссплатформенного интерфейса командной строки Azure (xplat-cli)
Интерфейс xplat-cli позволяет управлять инфраструктурой Azure с любой платформы.

Чтобы приступать к созданию виртуальной машины, нужно установить xplat-cli и оформить подписку Azure. Давайте сделаем это. Если у вас еще нет учетной записи Azure, [вы можете бесплатно получить ее](http://azure.microsoft.com/pricing/free-trial/).

## Установка интерфейса xplat-cli

Чтобы установить интерфейс [xplat-cli](http://azure.microsoft.com/documentation/articles/xplat-cli/#install), следуйте приведенным ниже указаниям.

## Подключение к Azure с помощью интерфейса xplat-cli

Установленный интерфейс xplat-cli можно подключить к личной или рабочей учетной записи Azure. Ознакомьтесь с различными возможностями подписок в разделе [Подключение к подписке Azure](http://azure.microsoft.com/documentation/articles/xplat-cli/#configure) и выберите нужную подписку.

## Создание виртуальной машины и подключение к ней в Azure

Чтобы приступить к созданию виртуальной машины, выберите (или передайте) нужный образ и воспользуйтесь командой `azure vm create`.

1. Для выбора образа из командной строки можно выполнить команду `azure vm image list`, которая выводит список всех доступных образов виртуальных машин. Так как список образов очень большой, его можно разбить на страницы с помощью команды `more` или применить фильтр, задав параметры `grep` (Linux) или `findstr` (Windows). Например, если вы хотите найти образы Ubuntu для Linux, воспользуйтесь такой командой:

        azure vm image list | grep Ubuntu

    Список найденных образов будет все еще большим, поэтому его можно дополнительно сузить по версии:

        azure vm image list | grep Ubuntu-14_10

    Теперь вы можете выбрать нужный образ и воспользоваться командой `show`, чтобы просмотреть подробную информацию о его свойствах:

        azure vm image show b39f27a8b8c64d52b05eac6a62ebad85__Ubuntu-14_10-amd64-server-20150202-ru-ru-30GB

2. Создание виртуальной машины.

    Выбрав нужный образ виртуальной машины, выполните команду `vm create`, чтобы создать его. Эта команда имеет много параметров, список которых можно просмотреть с помощью команды help:

        vm create --help

    Кроме самого образа, выбранного во время выполнения шага 1, для создания виртуальной машины нужно указать расположение, DNS-имя и имя пользователя.

    В качестве способа аутентификации вы можете выбрать аутентификацию с помощью пароля (в командной строке или в интерактивном режиме) или сертификата. Если выбрана аутентификация с помощью пароля, нужно указать пароль длиной не менее 8 знаков, включая буквы верхнего и нижнего регистра и специальные знаки (например, один из следующих: !@#$%^&+=). При вводе пароля в командной строке желательно указывать его в кавычках и экранировать специальные знаки.

    Для выбора расположения можно воспользоваться командой `vm location list`, чтобы выбрать близлежащий регион.

  Заданное DNS-имя должно быть уникальным (оно будет сопоставляться с  `dnsname.cloudapp.net`) и совпадать с именем виртуальной машины, если оно отдельно не указано в командной строке.  

    Приведенный ниже пример для Linux демонстрирует создание виртуальной машины, для которой указан западный регион США и порт SSH по умолчанию 22 (аргумент -e), а также пользователя с именем `myadminuser`:

        azure vm create -e -l "West US"  my-new-cli-vm b39f27a8b8c64d52b05eac6a62ebad85__Ubuntu-14_10-amd64-server-20150202-ru-ru-30GB "myadminuser" "myAdm1n@passwd"

## Дальнейшие действия

Давайте попробуем поработать с виртуальной машиной. 

Так как в примере выше открывается порт SSH по умолчанию, вы можете с легкостью подключиться к виртуальной машине сразу же после ее создания и запуска. Введите в командной строке Linux:

    ssh myadminuser@my-new-cli-vm.cloudapp.net

Больше примеров использования интерфейса xplat-cli для управления инфраструктурой Azure можно найти в разделе [Программа командной строки Azure для Mac и Linux](http://azure.microsoft.com/documentation/articles/virtual-machines-command-line-tools/).

<!--Image references-->
[5]: ./media/markdown-template-for-new-articles/octocats.png

<!--HONumber=47-->
