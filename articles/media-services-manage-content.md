<properties 
	pageTitle="Как управлять мультимедийным содержимым - службы мультимедиа Azure" 
	description="Сведения об управлении мультимедийным контентом в службах мультимедиа Azure." 
	services="media-services" 
	documentationCenter="" 
	authors="juliako" 
	manager="dwrede" 
	editor=""/>

<tags 
	ms.service="media-services" 
	ms.workload="media" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="10/30/2014" 
	ms.author="juliako"/>





# Как управлять содержимым в службах мультимедиа #

Это одна из статей серии [Рабочий процесс для видео по запросу в службах мультимедиа](media-services-video-on-demand-workflow.md). 

В этом разделе показано, как использовать портал управления Azure для управления содержимым в учетной записи служб мультимедиа.

В настоящее время непосредственно на портале можно выполнять следующие операции с контентом:

- просмотр сведений о содержимом, например, опубликованного состояния, опубликованного URL-адреса, размера, даты и времени последнего обновления и наличия шифрования актива;
- Загрузка нового контента
- индексирование содержимого;
- Кодирование контента
- воспроизведение содержимого;
- шифрование;
- Публикация и отмена публикации контента



## <a id="upload"></a>Практическое руководство. Передача контента 


1. На [портале управления](http://go.microsoft.com/fwlink/?LinkID=256666&clcid=0x409) выберите **Службы мультимедиа**, а затем щелкните имя учетной записи служб мультимедиа.
2. Выберите страницу "КОНТЕНТ". 
3. Нажмите кнопку **Отправить** на странице или в нижней части портала. 
4. В диалоговом окне **Отправка содержимого** перейдите к нужному файлу актива. Щелкните файл и нажмите кнопку **Открыть** либо нажмите клавишу **Ввод**.

	![UploadContentDialog][uploadcontent]

5. В диалоговом окне "Передача контента" нажмите кнопку с галочкой, чтобы принять значения полей "Файл" и "Имя контента".
6. Начнется передача, ход ее выполнения можно отслеживать в нижней части портала.  

	![JobStatus][status]

После завершения загрузки в списке "Контент" появится новый актив. По соглашению в конец имени будет добавлено "**-Источник**" для отслеживания нового контента как источника контента для задач кодирования.

![ContentPage][contentpage]

Если значение размера файла не обновляется после остановки процесса загрузки, нажмите кнопку **Синхронизировать метаданные**. Это синхронизирует размер файла актива с фактическим размером файла в хранилище и обновляет значение на странице "Контент".	

## <a id="index"></a>Практическое руководство. индексирование содержимого

Azure Media Indexer позволяет искать содержимое файлов мультимедиа и создавать полнотекстовую транскрипцию для скрытых субтитров и ключевых слов. Содержимое можно индексировать на портале управления с помощью действий, показанных ниже. Однако, если вам требуется больше контроля над файлами и выполнением задания индексирования, можно использовать пакет SDK служб мультимедиа для .NET или API REST. Дополнительные сведения см. в разделе [Индексирование файлов мультимедиа с помощью Azure Media Indexer](https://msdn.microsoft.com/ru-ru/library/azure/dn783455.aspx).

В следующих шагах показано, как использовать портал управления для индексирования содержимого.

1. Выберите файл, который следует индексировать.
	Если индексирование поддерживается для этого типа файла, кнопка ОБРАБОТАТЬ будет включена в нижней части страницы СОДЕРЖИМОЕ.
1. Нажмите кнопку ОБРАБОТАТЬ.
2. В диалоговом окне **Обработка** выберите обработчик **Azure Media Indexer**.
3. Затем заполните в диалоговом окне "Обработка" подробные сведения в полях **заголовок** и **описание** входного файла мультимедиа.
	
	![Process][process]

## <a id="encode"></a>Практическое руководство. Кодирование контента

Для поставки цифрового видео по Интернету необходимо сжать мультимедиа. Службы мультимедиа предоставляют кодировщик мультимедиа, который позволяет указать, как следует кодировать содержимое (например, используемые кодеки, формат файла, разрешение и битрейт). 

При работе со службами мультимедиа Azure один из самых частых сценариев - доставка потоковой передачи с адаптивным битрейтом клиентам. С помощью потоковой передачи с адаптивным битрейтом клиент может переключаться на потоковую передачу с более высоким или более низким битрейтом, так как видео отображается на основе текущей пропускной способности сети, загрузки ЦП и других факторов. Службы мультимедиа поддерживают следующие технологии потоковой передачи с адаптивным битрейтом: HTTP Live Streaming (HLS), Smooth Streaming, MPEG DASH и HDS (только для лицензиатов Adobe PrimeTime/Access). 

Службы мультимедиа обеспечивают динамическую упаковку, которая позволяет доставлять закодированное содержимое MP4-файлов с адаптивным битрейтом или Smooth Streaming в форматах потоковой передачи с поддержкой служб мультимедиа (MPEG DASH, HLS, Smooth Streaming, HDS) без необходимости повторной упаковки в эти форматы потоковой передачи. 

Чтобы воспользоваться преимуществом динамической упаковки, необходимо выполнить следующие действия:

- закодировать мезонинный (исходный) файл в набор MP4-файлов с адаптивной скоростью или в набор файлов Smooth Streaming (шаги кодирования показаны далее в этом учебнике);
- получить по крайней мере одну единицу потоковой передачи по запросу для конечной точки потоковой передачи, из которой планируется доставлять содержимое. Дополнительные сведения см. в разделе [Как масштабировать зарезервированные единицы потоковой передачи по запросу](media-services-manage-origins#scale_streaming_endpoints.md).

С динамической упаковкой потребуется хранить и оплачивать файлы только в одном формате хранения, а службы мультимедиа выполнят сборку и будут обслуживать соответствующий ответ на основе запросов клиента. 

Обратите внимание, что кроме возможности использовать динамическую упаковку, зарезервированные единицы потоковой передачи по запросу обеспечивают выделенную выходную пропускную способность, которую можно приобрести с шагом 200 Мбит/с. По умолчанию потоковая передача по требованию настроена в модели общего экземпляра, для которой серверные ресурсы (например, вычислительные ресурсы, мощности исходящего трафика и т. д.) совместно используются со всеми другими пользователями. Чтобы повысить производительность потоковой передачи по требованию, рекомендуется приобретать зарезервированные единицы потоковой передачи по требованию.

В этом разделе описаны шаги, которые можно предпринять для кодирования содержимого с помощью Azure Media Encoder на портале управления.

1.  Выберите файл, который следует закодировать.
	Если кодирование поддерживается для этого типа файла, кнопка ОБРАБОТАТЬ будет активна в нижней части страницы СОДЕРЖИМОЕ.
4. В диалоговом окне **Обработка** выберите обработчик** Azure Media Encoder **.
5. Выберите одну из **конфигураций кодирования**.

	![Process2][process2]

		
	В разделе [Предустановочные строки задач для Azure Media Encoder](https://msdn.microsoft.com/ru-ru/library/azure/dn619392.aspx) описывается значение каждой предустановки в категориях **Предустановки для адаптивной потоковой передачи (динамическая упаковка)**, **Предустановки для поэтапного скачивания**, **Устаревшие предустановки для адаптивной потоковой передачи**  .  


	**Другие** конфигурации описаны ниже.

	+ **Кодирование с помощью защиты содержимого PlayReady**. Эта предустановка позволяет получить кодированный актив с защитой контента PlayReady.  
	
	
		Служба лицензий PlayReady служб мультимедиа включена по умолчанию. Чтобы указать другую службу, из которой клиенты могут получить лицензию на воспроизведение зашифрованного контента PlayReady, используйте API-интерфейсы REST или пакета SDK .NET для служб мультимедиа. Дополнительные сведения см. в разделе [Использование статического шифрования для защиты содержимого]() и установка свойства **licenseAcquisitionUrl** в предустановке шифратора мультимедиа. Кроме того, можно использовать динамическое шифрование и установить свойство **PlayReadyLicenseAcquisitionUrl**, как описано в разделе [Использование динамического шифрования PlayReady и службы доставки лицензий](http://go.microsoft.com/fwlink/?LinkId=507720 ). 
	+ **Воспроизведение на ПК или Mac (с помощью Flash или Silverlight)**. Эта предустановка позволяет получить актив с бесперебойной потоковой передачей, который имеет следующие характеристики: стереозвук CBR 44,1 кГц в разрядности 16 бит/образец с кодировкой 96 Кбит/с в AAC, а также видео CBR с разрешением 720 пикселей и 6 скоростями - от 3400 Кбит/с до 400 Кбит/с - с использованием основного профиля H.264 и двумя вторичными группами GOP.
	+ **Воспроизведение с помощью HTML5 (Internet Explorer, Chrome, Safari)**. Эта предустановка позволяет получить отдельный MP4-файл, который имеет следующие характеристики: стереозвук CBR 44,1 кГц в разрядности 16 бит/сэмпл с кодировкой 128 Кбит/с в AAC, а также видео CBR с разрешением 720 пикселей и скоростью 4500 Кбит/с с использованием основного профиля H.264.
	+ **Воспроизведение на устройствах iOS и ПК или Mac**. Эта предустановка позволяет получить актив с теми же характеристиками, что и у актива с бесперебойной потоковой передачей (описан выше), но в формате, который может использоваться для доставки потоков Apple HLS на устройства iOS. 

5. Затем введите нужное понятное имя выходного содержимого или примите значение по умолчанию. Нажмите кнопку проверки, чтобы начать операцию кодирования, ход выполнения которой можно отслеживать в нижней части портала.
6. Нажмите кнопку ОК.

	После выполнения кодирования на странице СОДЕРЖИМОЕ появится закодированный файл. 

	Чтобы просмотреть ход задания кодирования, переключитесь на страницу **ЗАДАНИЯ**.  


	Если значение размера файла не обновляется после завершения кодирования, нажмите кнопку **Синхронизировать метаданные**. Это синхронизирует размер файла выводимого актива с фактическим размером файла в хранилище и обновляет значение на странице "Контент".	

## <a id="encrypt"></a>Практическое руководство. Шифрование содержимого

Если необходимо, чтобы службы мультимедиа динамически шифровали ресурс с использованием ключа AES или PlayReady DRM, обязательно сделайте следующее:

- Закодируйте мезонинный(исходный) файл в набор MP4-файлов с адаптивной скоростью или в набор файлов Smooth Streaming (шаги кодирования показаны разделе [Кодирование](#encode) ).
- получить по крайней мере одну единицу потоковой передачи по запросу для конечной точки потоковой передачи, из которой планируется доставлять содержимое. Дополнительные сведения см. в разделе [Как масштабировать зарезервированные единицы потоковой передачи по запросу](media-services-manage-origins#scale_streaming_endpoints.md).
- Настройте "политику службы незащищенного ключа AES по умолчанию" или "политику службы лицензий PlayReady по умолчанию". Дополнительную информацию см. в статье [Настройка политики авторизации ключей содержимого](media-services-portal-configure-content-key-auth-policy.md).  


	Когда все будет готово для включения шифрования, нажмите кнопку **ШИФРОВАНИЕ** в нижней части страницы **СОДЕРЖИМОЕ**.

	![Encrypt][encrypt] 

	После включения шифрования, каждый раз, когда поток запрашивается проигрыватель, службы мультимедиа используют указанный ключ для динамического шифрования содержимого с помощью шифрования AES или PlayReady. Чтобы расшифровать поток, проигрыватель запросит ключ у службы доставки ключей. Чтобы определить, есть ли у пользователя право на получение ключа, служба оценивает политики авторизации, заданные для ключа.

## <a id="publish"></a>Практическое руководство. Публикация контента

При публикации содержимого вам предоставят URL-адрес потоковой передачи или поэтапного скачивания. Клиент сможет воспроизводить видео с помощью этого URL-адреса.

1. Выберите актив, который следует опубликовать. 
2. Затем нажмите кнопку "Опубликовать". 
	
	После публикации контента на URL-адрес этот URL-адрес может быть открыт проигрывателем клиента, если тот может отображать контент в данной кодировке.

 ![PublishedContent][publishedcontent]

## Практическое руководство. Воспроизведение контента на портале

На портале управления представлен проигрыватель содержимого служб мультимедиа, который можно использовать для тестирования видео.

Выберите содержимое нужного видео и нажмите кнопку **Воспроизвести** в нижней части портала. 
 
На портале можно воспроизводить только опубликованный контент. Кроме того, данная кодировка должна поддерживаться вашим веб-браузером.


<!-- Images -->
[portaloverview]: ./media/media-services-manage-content/media-services-content-page.png
[publishedcontent]: ./media/media-services-manage-content/media-services-upload-content-published.png
[uploadcontent]: ./media/media-services-manage-content/UploadContent.png
[status]: ./media/media-services-manage-content/Status.png
[encoder]: ./media/media-services-manage-content/EncoderDialog2.png
[branding]: ./media/branding-reporting.png
[contentpage]: ./media/media-services-manage-content/media-services-content-page.png
[process]: ./media/media-services-manage-content/media-services-process-video.png
[process2]: ./media/media-services-manage-content/media-services-process-video2.png
[encrypt]: ./media/media-services-manage-content/media-services-encrypt-content.png
<!--HONumber=45--> 
