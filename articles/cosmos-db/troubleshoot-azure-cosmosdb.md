---
title: Управление Azure DB Cosmos в Обозревателе службы хранилища Azure
description: Сведения об управлении Azure DB Cosmos в Обозревателе службы хранилища Azure.
Keywords: Azure Cosmos DB, Azure Storage Explorer, MongoDB
services: cosmos-db
documentationcenter: ''
author: Jejiang
manager: omafnan
editor: ''
tags: Azure Cosmos DB
ms.assetid: ''
ms.service: cosmos-db
ms.custom: Azure Cosmos DB active
ms.workload: big-data
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: tutorial
ms.date: 03/20/2018
ms.author: jejiang
ms.openlocfilehash: c593eb2b49d15d20a26ef735d1032d5dea45f125
ms.sourcegitcommit: d74657d1926467210454f58970c45b2fd3ca088d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2018
---
# <a name="azure-cosmos-db-in-storage-explorer-troubleshooting-guide-overview"></a>Руководство по устранению неполадок c Azure Cosmos DB в Обозревателе службы хранилища

[Azure DB Cosmos в Обозревателе службы хранилища Azure](https://docs.microsoft.com/en-us/azure/cosmos-db/storage-explorer) является изолированным приложением, которое позволяет подключиться к учетным записям Azure Cosmos DB, размещенным в Azure и национальных облаках, из Windows, macOS или Linux. Оно позволяет управлять сущностями Azure Cosmos DB, работать с данными, обновлять хранимые процедуры и триггеры, а также работать с такими сущностями Azure, как большие двоичные объекты и очереди Azure.

В этом руководстве приведены решения для распространенных проблем, возникающих с Azure Cosmos DB в Обозревателе службы хранилища.

- [Проблемы входа](#Sign-in-issues)
  - [Самозаверяющий сертификат в цепочке сертификатов](#Self-signed-certificate-in-certificate-chain)
  - [Не удается получить подписки](#Unable-to-retrieve-subscriptions)
  - [Не отображается страница аутентификации](#Unable-to-see-the-authentication-page)
  - [Невозможно удалить учетную запись](#Cannot-remove-account)
- [Неполадки с прокси-сервером HTTP/HTTPS](#Http/Https-proxy-issue)
- [Неполадки с узлом "Development" (Разработка) в узле "Local and Attached" (Локальные и присоединенные)](#Development-node-under-Local-and-Attached-node-issue)
- [Ошибка при подключении учетной записи Azure Cosmos DB в узле "Local and Attached" (Локальные и присоединенные)](#Attaching-Azure-Cosmos-DB-account-in-Local-and-Attached-node-error)
- [Ошибка развертывания узла Azure Cosmos DB](#Expand-Azure-Cosmos-DB-node-error)
- [Дальнейшие действия](#Next-steps)

<h2 id="Sign-in-issues">Проблемы входа</h2>

Прежде чем продолжать, попытайтесь перезапустить приложение: возможно, это поможет решить проблему.

<h2 id="Self-signed-certificate-in-certificate-chain">Самозаверяющий сертификат в цепочке сертификатов</h2>

Существует несколько причин, по которым вы можете видеть эту ошибку. Двумя основными являются:

1. Подключение через "прозрачный прокси-сервер". Это означает, кто-то (например, ваш ИТ-отдел) перехватывает трафик HTTPS, расшифровывает его, а затем шифрует с помощью самозаверяющего сертификата.

2. Работает программное обеспечение, например антивирусная программа, которое вставляет самозаверяющие сертификаты SSL в получаемые сообщения HTTPS.

Когда Обозреватель службы хранилища встречает один из этих самозаверяющихся сертификатов, он не может знать, было ли незаконно изменено сообщение HTTPS, которое он получает. Однако если у вас есть копия самозаверяющего сертификата, то в Обозревателе службы хранилища вы можете настроить доверие к нему. Если нет уверенности в том, кто вставляет сертификат, можно попробовать найти источник самостоятельно, сделав следующее:

1. Установите Open SSL.
     - [Windows](https://slproweb.com/products/Win32OpenSSL.html) (подойдет любая из облегченных версий).
     - MAC и Linux: этот компонент должен быть включен в операционную систему.
2. Запустите Open SSL.
    - Windows: перейдите в каталог установки, затем **/bin/** и дважды щелкните файл **openssl.exe**.
    - MAC и Linux: выполните **openssl** из терминала.
3. Выполните команду `s_client -showcerts -connect microsoft.com:443`.
4. Найдите самозаверяющие сертификаты. Если вы не знаете, какие из сертификатов являются самозаверяющими, то найдите сертификаты, в которых субъект ("s:") и издатель ("i:") совпадают.
5.  Найдя самозаверяющие сертификаты, скопируйте и вставьте все содержимое от **---BEGIN CERTIFICATE---** до **---END CERTIFICATE---** включительно в новый CER-файл для каждого из них.
6.  Откройте Обозреватель службы хранилища, а затем выберите **Изменить** > **SSL-сертификаты** > **Импорт сертификатов**. Используя средство выбора файлов, найдите, выберите и откройте созданные CER-файлы.

Если вам не удалось найти самозаверяющие сертификаты, используя приведенные выше действия, то для дополнительных сведений свяжитесь с нами.

<h2 id="Unable-to-retrieve-subscriptions">Не удается получить подписки</h2>

Если после успешного входа вам не удается получить подписки:

- Убедитесь, что учетная запись имеет доступ к подпискам, выполнив вход на [портал Azure](http://portal.azure.com/).
- Убедитесь, что вы выполнили вход в правильную среду ([Azure](http://portal.azure.com/), [Azure для Китая](https://portal.azure.cn/), [Azure для Германии](https://portal.microsoftazure.de/), [Azure для государственных организаций США](http://portal.azure.us/), пользовательскую среду или Azure Stack).
- При подключении через прокси-сервер убедитесь, что прокси-сервер Обозревателя службы хранилища настроен правильно.
- Попробуйте удалить и снова добавить учетную запись.
- Попробуйте удалить следующие файлы из домашнего каталога (например, C:\Users\ContosoUser), а затем снова добавить учетную запись:
  - adalcache-файл;
  - devaccounts-файл;
  - extaccounts-файл.
- При выполнении входа проверьте наличие сообщений об ошибках в консоли средств разработчика (F12).

![console](./media/troubleshoot-cosmosdb/console.png)

<h2 id="Unable-to-see-the-authentication-page">Не отображается страница аутентификации</h2>  

Если страница аутентификации не отображается:

- В зависимости от скорости подключения загрузка страницы входа может занять некоторое время. Подождите по крайней мере одну минуту, прежде чем закрывать диалоговое окно аутентификации.
- При подключении через прокси-сервер убедитесь, что прокси-сервер Обозревателя службы хранилища настроен правильно.
- Вызовите консоль разработчика, нажав клавишу F12. Просмотрите ответы от консоли разработчика: возможно, вам удастся понять, почему страница аутентификации не работает.

<h2 id="Cannot-remove-account">Невозможно удалить учетную запись</h2>

Если не удается удалить учетную запись или при щелчке ссылки повторной аутентификации ничего не происходит:

- Попробуйте удалить следующие файлы из домашнего каталога, а затем снова добавить учетную запись:
  - adalcache-файл;
  - devaccounts-файл;
  - extaccounts-файл.
- Если вы хотите удалить подключенные ресурсы хранилища SAS, удалите:
  - папку %AppData%/StorageExplorer в Windows;
  - /Users/<ваше_имя>/Library/Applicaiton SUpport/StorageExplorer в Mac;
  - ~/.config/StorageExplorer в Linux.
  - Если вы удалите эти файлы, **вам потребуется повторно ввести все учетные данные**.


<h2 id="Http/Https-proxy-issue">Неполадки с прокси-сервером HTTP/HTTPS</h2>

При настройке прокси-сервера HTTP/HTTPS в ASE невозможно отобразить узлы Azure Cosmos DB в левом дереве узлов. Это известная проблема, и она будет исправлена в следующем выпуске. Пока в качестве временного решения можно использовать обозреватель данных Azure Cosmos DB на портале Azure. 

<h2 id="Development-node-under-Local-and-Attached-node-issue">Неполадки с узлом "Development" (Разработка) в узле "Local and Attached" (Локальные и присоединенные)</h2>

Отсутствие ответа после нажатия узла "Development" (Разработка) в узле "Local and Attached" (Локальные и присоединенные) в левом дереве узлов.  Такое поведение ожидаемо. Локальный эмулятор Azure Cosmos DB будет поддерживаться в следующем выпуске.

![Узел разработки](./media/troubleshoot-cosmosdb/development.png)

<h2 id="Attaching-Azure-Cosmos-DB-account-in-Local-and-Attached-node-error">Ошибка при подключении учетной записи Azure Cosmos DB в узле "Local and Attached" (Локальные и присоединенные)</h2>

Если после присоединения учетной записи Azure Cosmos DB в узле "Local and Attached" (Локальные и присоединенные) отображается приведенная ниже ошибка, проверьте, используется ли правильная строка подключения.

![Ошибка при подключении Azure Cosmos DB в узле "Local and Attached" (Локальные и присоединенные)](./media/troubleshoot-cosmosdb/attached-error.png)

<h2 id="Expand-Azure-Cosmos-DB-node-error">Ошибка развертывания узла Azure Cosmos DB</h2>

При попытке развернуть узлы дерева слева вы можете увидеть ошибку. 

![Ошибка развертывания](./media/troubleshoot-cosmosdb/expand-error.png)

Попробуйте использовать рекомендации, приведенные ниже.

- Проверьте, находится ли учетная запись Azure Cosmos DB в состоянии подготовки, и после успешного создания учетной записи повторите попытку.
- Если учетная запись находится в узле "Быстрый доступ" или "Local and Attached" (Локальные и присоединенные), проверьте, не была ли она удалена. Если да, то необходимо удалить узел вручную.

<h2 id="Next-steps">Дополнительная информация</h2>

Если ни одно из решений вам не помогло, то для устранения проблемы отправьте электронное письмо команде по инструментарию разработчика Azure Cosmos DB ([cosmosdbtooling@microsoft.com](mailto:cosmosdbtooling@microsoft.com)) со сведениями о ней.





