---
title: Достижение компромисса между доступностью и быстродействием для разных уровней согласованности | Документация Майкрософт
description: Достижение компромисса между доступностью и быстродействием для разных уровней согласованности в Azure Cosmos DB.
keywords: consistency, performance, azure cosmos db, azure, Microsoft azure
services: cosmos-db
author: markjbrown
ms.service: cosmos-db
ms.devlang: na
ms.topic: conceptual
ms.date: 10/20/2018
ms.author: mjbrown
ms.openlocfilehash: 061a7c223d0e1c6fa7384d7defe9f84f470236ce
ms.sourcegitcommit: dbfd977100b22699823ad8bf03e0b75e9796615f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/30/2018
ms.locfileid: "50243829"
---
# <a name="availability-and-performance-tradeoffs-for-various-consistency-levels"></a>Достижение компромисса между доступностью и быстродействием для разных уровней согласованности

Репликация распределенных баз данных для обеспечения высокого уровня их доступности и небольшой задержки предполагает компромисс между согласованностью операций чтения и такими параметрами, как доступность, время задержки и пропускная способность. В Azure Cosmos DB предусмотрены разные варианты для достижения такого компромисса, вместо крайних случаев строгой или нестрогой согласованности данных. Cosmos DB позволяет выбрать одну из пяти готовых моделей таких уровней согласованности: **Строгая**, **Ограниченное устаревание**, **Сеансовая**, **Постоянный префикс** и **Итоговая**. Каждая из пяти моделей обеспечивает заданный компромисс между доступностью и быстродействием и регулируется исчерпывающими Соглашениями об уровне обслуживания.

## <a name="consistency-levels-and-latency"></a>Уровни согласованности и время задержки

- **Задержка чтения** для всех уровней согласованности гарантированно никогда не превышает 10 миллисекунд для 99-го процентиля, что оговаривается Соглашением об уровне обслуживания. Среднее время задержки чтения (50-й процентиль) обычно не превышает 2 миллисекунд.
- За исключением учетных записей Cosmos с заданной строгой согласованностью, охватывающих несколько регионов, **задержка записи** для всех уровней согласованности гарантированно никогда не превышает 10 миллисекунд для 99-го процентиля, что оговаривается Соглашением об уровне обслуживания. Среднее время задержки записи (50-й процентиль) обычно не превышает 5 миллисекунд.
- Для учетных записей Cosmos с заданной строгой согласованностью, охватывающих несколько регионов (сейчас предоставляется в предварительной версии), **задержка записи** для всех уровней согласованности гарантированно никогда не превышает 10 миллисекунд + (2 × время кругового пути (RTT)) для 99-го процентиля. Время RTT между двумя самыми удаленными друг от друга регионами связано с учетной записью Cosmos. Точная задержка RTT определяется расстоянием, которое преодолевает сигнал, двигаясь со скоростью света, и точной топологией сети Azure. Для сетей Azure не предусмотрены Соглашения об уровне обслуживания, определяющие задержки для RTT между любыми двумя регионами Azure. Задержки репликации Cosmos DB отображаются на портале Azure для учетной записи Cosmos, что позволяет отслеживать задержку репликации между разными регионами, связанными с учетной записью Cosmos.

## <a name="consistency-levels-and-throughput"></a>Уровни согласованности и пропускная способность

- Пропускная способность для операций чтения, которую обеспечивают уровни соответствия "Сеансовая", "Постоянный префикс" и "Нестрогая", примерно в два раза выше, чем у уровней соответствия "Строгая" и "Ограниченное устаревание" для одинакового количества единиц запроса.
- Для определенного типа операций записи (например, вставка, замена, обновление или вставка, удаление и т. д.) пропускная способность одинаковая для всех уровней согласованности.

## <a name="consistency-levels-and-durability"></a>Уровни согласованности и продолжительность

До того как операция записи подтверждается для клиента, данные продолжительно фиксируются кворумом реплик в том регионе,в котором происходит запись. Более того, если контейнер настроен с помощью согласованной политики индексирования, индекс также синхронно обновляется, реплицируется и продолжительно фиксируется кворумом реплик перед подтверждением записи для клиента. 

В таблице ниже указаны интервалы возможной потери данных в случае региональной аварии для учетных записей Cosmos, охватывающих несколько регионов.

| **Уровень согласованности** | **Интервал возможной потери данных в случае региональной аварии** |
| - | - |
| Уровень согласованности Strong (сильная) | Ноль |
| Ограниченное устаревание | Ограничивается окном устаревания, заданным для учетной записи Cosmos |
| Сеанс | До 5 секунд |
| Согласованность префиксов | До 5 секунд |
| Уровень согласованности Eventual (в конечном счете) | До 5 секунд |

## <a name="next-steps"></a>Дополнительная информация

Дополнительные сведения о глобальном распределении и компромиссах согласованности в распределенных системах см. в таких статьях:

* [Consistency Tradeoffs in Modern Distributed Database Systems Design](https://www.computer.org/web/csdl/index/-/csdl/mags/co/2012/02/mco2012020037-abs.html) (Достижение компромиссов согласованности в современных распределенных базах данных)
* [Высокая доступность](high-availability.md)
* [Соглашение об уровне обслуживания для Azure Cosmos DB](https://azure.microsoft.com/support/legal/sla/cosmos-db/v1_2/)
