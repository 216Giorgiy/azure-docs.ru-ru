---
title: Секционирование и горизонтальное масштабирование в Azure Cosmos DB
description: Дополнительные сведения о работе секционирования в Azure Cosmos DB, как настроить секционирование и ключей секций и как выбрать правильный ключ секции для вашего приложения.
ms.author: mjbrown
author: markjbrown
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 10/30/2018
ms.openlocfilehash: 4c6847d8f870c02228aa14ab9e11c85b091ec48b
ms.sourcegitcommit: fdd6a2927976f99137bb0fcd571975ff42b2cac0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/27/2019
ms.locfileid: "56959958"
---
# <a name="partitioning-and-horizontal-scaling-in-azure-cosmos-db"></a>Секционирование и горизонтальное масштабирование в Azure Cosmos DB

В этой статье объясняется физических и логических секциях в Azure Cosmos DB. Здесь также рассматриваются рекомендации для масштабирования и секционирования. 

## <a name="logical-partitions"></a>Логические секции

Логический раздел состоит из набора элементов, имеющих один и тот же ключ секции. Например, в контейнере, где все элементы содержат `City` свойство, можно использовать `City` как ключ раздела для контейнера. Группы элементов с определенными значениями для `City`, такие как `London`, `Paris`, и `NYC`, образуют distinct логической секции. Не нужно беспокоиться об удалении секции при удалении базовых данных.

В Azure Cosmos DB контейнер — это фундаментальная единица масштабируемости. Данные, которые добавляются к контейнеру и пропускной способности, которая подготавливается для контейнера, автоматически (по горизонтали) секционированных распределяется между набором логические разделы. Данных и пропускной способности секционируются на основе ключа секции, указываемые для контейнера Azure Cosmos DB. Дополнительные сведения см. в разделе [создает контейнер Azure Cosmos DB](how-to-create-container.md).

Логическая секция определяет область транзакций базы данных. Элементы в логической секции можно обновить, используя транзакцию с изоляцией моментального снимка. Когда новые элементы добавляются в контейнер, система прозрачно создает новые логические разделы.

## <a name="physical-partitions"></a>Физические секции

Контейнер Azure Cosmos DB масштабируется путем распределения данных и пропускной способности между большим количеством логических разделов. На внутреннем уровне одну или несколько логических секций, сопоставляются с физической секции, который состоит из набора реплик, называемый также *реплика*. Каждая реплика. Настройка узлов экземпляра ядра СУБД Azure Cosmos DB. Набор реплик делает данные, хранящиеся в физической секции устойчивых, высокой доступности и согласованность. Физическая секция поддерживает максимальный объем хранилища и единицами запросов (ЕЗ). Каждая реплика, составляющего физической секции наследует квота хранилища секции. Все реплики физическая секция вместе поддерживают пропускную способность, выделенную для физической секции. 

На следующем рисунке показано, как логические секции сопоставляются с физическими, которые распределяются глобально:

![Изображение, которое демонстрируется секционирование Azure Cosmos DB](./media/partition-data/logical-partitions.png)

Пропускная способность для контейнера равномерно распределяется между физическими секциями. Макет ключа секции, не равномерно распределить запросы пропускной способности может создать разделы «горячие». Горячие разделы может быть вызвано в ограничения скорости и неэффективное использование подготовленной пропускной способности.

В отличие от логических, физические секции являются внутренней реализацией системы. Невозможно контролировать размер, расположение и число физических секций, а вы не можете управлять сопоставление логических разделов и физических секций. Тем не менее вы можете управлять количеством логических секций, распределением данных и пропускной способностью, выбрав правильный ключ секции.

## <a name="next-steps"></a>Дальнейшие действия

* Дополнительные сведения о [выбору ключа секции](partitioning-overview.md#choose-partitionkey).
* Дополнительные сведения о подготовленной пропускной способности в базе данных Azure Cosmos DB см. в [этой статье](request-units.md).
* Дополнительные сведения о глобальном распределении в базе данных Azure Cosmos DB см. в [этой статье](distribute-data-globally.md).
* Узнайте, как [Подготовка пропускной способности в контейнер Azure Cosmos DB](how-to-provision-container-throughput.md).
* Узнайте, как [Подготовка пропускной способности в базе данных Azure Cosmos DB](how-to-provision-database-throughput.md).
