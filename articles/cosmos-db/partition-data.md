---
title: Секционирование и горизонтальное масштабирование в Azure Cosmos DB
description: Сведения о работе секционирования в базе данных Azure Cosmos DB, настройке секционирования и ключей секций, а также о выборе подходящего ключа секции для вашего приложения.
author: aliuy
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 10/30/2018
ms.author: andrl
ms.openlocfilehash: 38f587fc24478beff3ab236207de3ed8a892c915
ms.sourcegitcommit: da69285e86d23c471838b5242d4bdca512e73853
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/03/2019
ms.locfileid: "53998954"
---
# <a name="partitioning-and-horizontal-scaling-in-azure-cosmos-db"></a>Секционирование и горизонтальное масштабирование в Azure Cosmos DB

В этой статье описаны физические и логические секции в Azure Cosmos DB, а также рекомендации для масштабирования и секционирования. 

## <a name="logical-partitions"></a>Логические секции

Логическая секция состоит из набора элементов с одинаковым ключом секции. Например, рассмотрим контейнер, где все элементы содержат свойство `City`, тогда `City` можно использовать в качестве ключа секции для контейнера. Группы элементов с определенными значениями для `City`, такие как "Лондон", "Париж", "Нью-Йорк" и т. д., станут основой для уникальных логических секций.

В Azure Cosmos DB контейнер — это фундаментальная единица масштабируемости. Данные, добавленные в контейнер, и пропускная способность, которая предоставляется в контейнере, автоматически (горизонтально) разделены на набор логических секций. Они секционируются на основе ключа секции, который вы указали для контейнера Cosmos. Дополнительные сведения см. в статье [Создание контейнеров в Azure Cosmos DB](how-to-create-container.md).

Логическая секция определяет область транзакций базы данных. Элементы в логической секции можно обновить, используя транзакцию с изоляцией моментального снимка.

Когда в контейнер добавляются новые элементы или увеличивается пропускная способность, предоставляемая в контейнере, системой прозрачно создаются логические секции.

## <a name="physical-partitions"></a>Физические секции

Контейнер Cosmos масштабируется путем распределения данных и пропускной способности между большим количеством логических секций. На внутреннем уровне одна логическая секция или несколько сопоставляются с **физической секцией**, которая состоит из набора реплик. В каждом наборе реплик размещен экземпляр ядра СУБД Cosmos. Набор реплик обеспечивает долговечность, доступность и согласованность данных, хранящихся в физической секции. Физическая секция поддерживает фиксированный максимальный объем хранилища и количество ЕЗ. Каждая реплика, содержащая физическую секцию, наследует квоту хранилища. Все реплики физической секции ресурсов совместно поддерживают пропускную способность, выделенную для них. На следующем рисунке показано, как логические секции сопоставляются с физическими, которые распределяются глобально:

![Секционирование Azure Cosmos DB](./media/partition-data/logical-partitions.png)

Пропускная способность, подготовленная для контейнера, равномерно распределяется между физическими секциями. Таким образом, структура ключа секции, которая не распределяет запросы пропускной способности равномерно, может создавать "горячие" секции. Горячие секции могут привести к ограничению скорости и неэффективному использованию предоставленной пропускной способности.

В отличие от логических, физические секции являются внутренней реализацией системы. Вы не можете контролировать размер, размещение секций, количество или сопоставление между логическими и физическими секциями. Тем не менее вы можете управлять количеством логических секций, распределением данных и пропускной способностью, выбрав правильный ключ секции.

## <a name="next-steps"></a>Дополнительная информация

В этой статье предоставлен обзор секционирования данных и рекомендации для масштабирования и секционирования в Azure Cosmos DB. 

* Дополнительные сведения о подготовленной пропускной способности в базе данных Azure Cosmos DB см. в [этой статье](request-units.md).
* Узнайте больше о [глобальном распределении в базе данных Azure Cosmos DB](distribute-data-globally.md).
* Дополнительные сведения о выборе ключа секции см. [здесь](partitioning-overview.md#choose-partitionkey).
* Сведения о том, [как подготовить пропускную способность для контейнера Cosmos](how-to-provision-container-throughput.md).
* Сведения о том, [как подготовить пропускную способность для базы данных Cosmos](how-to-provision-database-throughput.md).
