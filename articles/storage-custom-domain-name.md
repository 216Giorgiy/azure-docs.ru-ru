<properties 
	pageTitle="Настройка имени домена для BLOB-данных в учетной записи хранения | Microsoft Azure" 
	description="Узнайте, как настроить пользовательский домен для доступа к данным больших двоичных объектов в учетной записи хранения Azure." 
	services="storage" 
	documentationCenter="" 
	authors="tamram" 
	manager="adinah" 
	editor=""/>

<tags 
	ms.service="storage" 
	ms.workload="storage" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="12/11/2014" 
	ms.author="tamram"/>


# Настройка имени домена для BLOB-данных в учетной записи хранения Azure
Можно настроить пользовательский домен для доступа к BLOB-данным в учетной записи хранения Azure. Конечной точкой по умолчанию для службы BLOB-объектов является https://<*mystorageaccount*>.blob.core.windows.net. Если сопоставить пользовательский домен и поддомен, например **www.contoso.com**, с конечной точкой больших двоичных объектов для вашей учетной записи хранения, то, используя этот домен, ваши пользователи также смогут получать доступ к данным больших двоичных объектов в вашей учетной записи хранения. 


> [AZURE.NOTE]	Процедуры в этом задании применяются к учетным записям хранения Azure. Информацию об облачных службах см. в статье <a href = "/ru-ru/develop/net/common-tasks/custom-dns/">Настройка пользовательского имени домена для облачной службы Azure</a>, о веб-сайтах - в статье <a href="/ru-ru/develop/net/common-tasks/custom-dns-web-site/">Настройка пользовательского имени домена для веб-сайта Azure</a>. 

> [AZURE.NOTE]	Учетную запись хранения Premium нельзя сопоставить с пользовательским именем домена. См. раздел [Хранилище Premium. Хранилище высокой производительности для рабочих нагрузок виртуальных машин Azure](http://go.microsoft.com/fwlink/?LinkId=521898), чтобы ознакомиться с информацией об учетных записях хранения Premium.

Существует два способа указать пользовательский домен для конечной точки BLOB-объекта в учетной записи хранения. Самым простым способом является создание записи CNAME, сопоставляющей пользовательский домен и поддомен конечной точке BLOB-объекта. Запись CNAME - это компонент DNS, позволяющий сопоставить исходный и конечный домены. В этом случае исходный домен является пользовательским доменом и поддоменом - обратите внимание, что поддомен всегда является обязательным. Конечный домен является конечной точкой службы BLOB-объектов.

Однако процесс сопоставления пользовательского домена конечной точке BLOB-объекта приводит к краткому периоду простоя для домена в течение регистрации домена на портале управления Azure. Если пользовательский домен в это время поддерживает приложение с заданным соглашением об уровне обслуживания (SLA), не допускающим простоя, то для промежуточного шага регистрации можно использовать поддомен Azure **asverify**, чтобы пользователи могли получать доступ к вашему домену во время выполнения сопоставления DNS.

В следующей таблице приведены примеры URL-адресов для доступа к BLOB-данным в учетной записи хранения с именем **mystorageaccount**. Пользовательский домен, зарегистрированный для этой учетной записи хранения - **www.contoso.com**:

<table border="1" cellspacing="0" cellpadding="5" style="border: 1px solid #000000;">
	<tbody>
		<tr>
			<td style="width: 100px;"><strong>Тип ресурса</strong></td>
			<td><strong>Форматы URL-адреса</strong></td>
		</tr>
		<tr>
			<td>Учетная запись хранения</td>
			<td><strong>URL-адрес по умолчанию:</strong> http://mystorageaccount.blob.core.windows.net<br />
			<strong>URL-адрес пользовательского домена:</strong> http://www.contoso.com</td>
		</tr>
		<tr>
			<td>BLOB-объект</td>
			<td><strong>URL-адрес по умолчанию:</strong> http://mystorageaccount.blob.core.windows.net/mycontainer/myblob<br /><strong>URL-адрес пользовательского домена:</strong>
			http://www.contoso.com/mycontainer/myblob</td>
		</tr>
		<tr>
			<td>Корневой контейнер</td>
			<td><strong>URL-адрес по умолчанию:</strong> http://mystorageaccount.blob.core.windows.net/myblob 
			<br/>или<br />
			http://mystorageaccount.blob.core.windows.net/$root/myblob<br />
			<strong>URL-адрес пользовательского домена:</strong> http://www.contoso.com/myblob
			<br/>или<br />
			http://www.contoso.com/$root/myblob</td>
		</tr>
	</tbody>
</table>

В этой задаче будет показано, как выполнять следующие действия:



- <a href="#register-domain">Регистрация пользовательского домена для учетной записи хранения</a>
- <a href="#register-asverify">Регистрация пользовательского домена для учетной записи хранения с помощью промежуточного поддомена asverify</a>
- <a name="#verify-subdomain">Проверка того, что пользовательский домен ссылается на конечную точку службы BLOB-объектов</a>

<h2><a name="register-domain"></a>Регистрация пользовательского домена для учетной записи хранения</h2>

Эта процедура используется для регистрации пользовательского домена, если допускается кратковременная недоступность домена для пользователей домена или если в пользовательском домене в данный момент не размещается никакое приложение. 

Если пользовательский домен поддерживает приложение, не допускающее простоя, то следует использовать процедуру, описанную в разделе <a href="#register-asverify">Регистрация пользовательского домена для учетной записи хранения с помощью промежуточного поддомена asverify</a>.

Чтобы настроить имя пользовательского домена, необходимо создать новую запись CNAME с помощью вашего регистратора домена. Эта запись CNAME определяет псевдоним для имени домена. В этом случае она сопоставляет адрес пользовательского домена конечной точке службы BLOB-объектов для используемой учетной записи хранения.

Каждый из регистраторов использует похожий, но немного отличный способ задания записи CNAME, хотя используется
одна и та же концепция. Обратите внимание, что многие базовые пакеты регистрации домена не предлагают настройки DNS, поэтому может потребоваться обновить пакет регистрации домена, прежде чем создавать запись CNAME. 

1.   На портале управления Azure перейдите на вкладку **Хранилище**.

2.   На вкладке **Хранилище** щелкните имя учетной записи хранения, для которой нужно выполнить сопоставление пользовательского домена.

3.  Выберите вкладку **Настройка**.

4.  В нижней части экрана щелкните **Управление доменом**, чтобы отобразить диалоговое окно **Управление пользовательским доменом**. Верхняя часть диалогового окна содержит сведения о том, как создать запись CNAME. В рамках этой процедуры не обращайте внимания на указания, относящиеся к поддомену **asverify**.

5.  Войдите на веб-сайт своего регистратора DNS и перейдите на страницу
    управления DNS. Она может находиться в таком разделе, как **Имя
    домена**, **DNS** или **Управление сервером доменных имен**.

6.  Найдите раздел управления записями CNAME. Может понадобиться перейти на
    страницу дополнительных параметров и найти слова **CNAME**, **Псевдоним**
    или **Поддомены**.

7.  Создайте новую запись CNAME и укажите псевдоним домена, например, **www** или **photos**. Затем
    введите имя узла, являющегося конечной точкой службы BLOB-объектов, в формате **mystorageaccount.blob.core.windows.net** (где **mystorageaccount** - имя вашей учетной записи хранения). Имя используемого узла содержится в тексте диалогового окна **Управление пользовательским доменом**.

8.  Создав запись CNAME, вернитесь в диалоговое окно **Управление пользовательским доменом** и введите имя своего пользовательского домена, включая поддомен, в поле **Имя пользовательского домена**. Например, если используются домен **contoso.com** и поддомен **www**, введите **www.contoso.com**. Если используется поддомен **photos**, введите **photos.contoso.com**. Обратите внимание, что поддомен является обязательным.

9. Для регистрации своего пользовательского домена нажмите кнопку **Зарегистрировать**. 

	Если регистрация прошла успешно, появится сообщение **Ваш пользовательский домен активен**. Теперь пользователи при наличии соответствующих разрешений могут просматривать BLOB-данные вашего пользовательского домена. 

<h2><a name="register-asverify"></a>Регистрация пользовательского домена для учетной записи хранения с помощью промежуточного поддомена asverify</h2>

Эта процедура используется для регистрации пользовательского домена, который в данное время поддерживает приложения с соглашением об уровне обслуживания, запрещающим простои. Создавая запись CNAME, указывающую из asverify.&lt;поддомен&gt;.&lt;пользовательский_домен&gt; в asverify.&lt;учетная_запись_хранения&gt;.blob.core.windows.net, можно выполнить предварительную регистрацию домена в Azure. Затем можно создать вторую запись CNAME, указывающую из &lt;поддомен&gt;.&lt;пользовательский_домен&gt; в &lt;учетная_запись_хранения&gt;. blob.core.windows.net, и с этого момента трафик для пользовательского домена будет направлен в конечную точку большого двоичного объекта.

Поддомен asverify представляет собой специальный поддомен, распознаваемый Azure. Добавляя **asverify** в свой поддомен, вы разрешаете Azure распознавать ваш пользовательский домен без изменения DNS-записи для этого домена. После выполненного изменения DNS-запись для домена будет без простоя сопоставлена конечной точке BLOB-объекта.

1.  На портале управления Azure перейдите на вкладку **Хранилище**.

2.  На вкладке **Хранилище** щелкните имя учетной записи хранения, для которой нужно выполнить сопоставление пользовательского домена.

3.  Выберите вкладку **Настройка**.

4.  В нижней части экрана щелкните **Управление доменом**, чтобы отобразить диалоговое окно **Управление пользовательским доменом**. Верхняя часть диалогового окна содержит сведения о том, как создать запись CNAME, используя поддомен **asverify**.

5.  Войдите на веб-сайт своего регистратора DNS и перейдите на страницу
    управления DNS. Она может находиться в таком разделе, как **Имя
    домена**, **DNS** или **Управление сервером доменных имен**.

6.  Найдите раздел управления записями CNAME. Может понадобиться перейти на
    страницу дополнительных параметров и найти слова **CNAME**, **Псевдоним**
    или **Поддомены**.

7.  Создайте новую запись CNAME и укажите псевдоним поддомена, который содержит поддомен asverify. Например, для поддомена может использоваться формат **asverify.www** или **asverify.photos**. Затем
    введите имя узла, являющегося конечной точкой службы BLOB-объектов, в формате **mystorageaccount.blob.core.windows.net** (где **mystorageaccount** - имя вашей учетной записи хранения). Имя используемого узла содержится в тексте диалогового окна **Управление пользовательским доменом**.

8.  Создав запись CNAME, вернитесь в диалоговое окно **Управление пользовательским доменом** и введите имя своего пользовательского домена в поле **Имя пользовательского домена**. Например, если используются домен **contoso.com** и поддомен **www**, введите **www.contoso.com**. Если используется поддомен **photos**, введите **photos.contoso.com**. Обратите внимание, что поддомен является обязательным.

9.	Установите флажок **Дополнительно: использовать поддомен 'asverify' для предварительной регистрации пользовательского домена**. 

10. Для предварительной регистрации пользовательского домена нажмите кнопку **Зарегистрировать**. 

	Если предварительная регистрация прошла успешно, появится сообщение **Ваш пользовательский домен активен**. 

11. На этом этапе ваш пользовательский домен был проверен Azure, но трафик, идущий в ваш домен, еще не маршрутизирован в вашу учетную запись хранения. Для завершения процесса вернитесь на веб-сайт регистратора DNS и создайте другую запись CNAME, сопоставляющую поддомен конечной точке службы BLOB-объектов. Например, можно указать дочерний домен, как **www** или **photos**, а имя узла как **mystorageaccount.blob.core.windows.net** (где **mystorageaccount** - имя вашей учетной записи хранения). Это действие завершает регистрацию пользовательского домена.

12. Наконец, можно удалить запись CNAME, созданную с помощью **asverify**, так как она была необходима только в качестве промежуточного шага.

Теперь пользователи при наличии соответствующих разрешений могут просматривать BLOB-данные вашего пользовательского домена.

<a name="verify-subdomain"> </a>

<h2>Проверка того, что пользовательский домен ссылается на конечную точку службы BLOB-объектов</h2>

Чтобы убедиться, что ваш пользовательский домен действительно сопоставлен конечной точке службы BLOB-объектов, создайте BLOB-объект в общедоступном контейнере в вашей учетной записи хранения. Затем, чтобы получить доступ к этому BLOB-объекту, используйте в веб-браузере URI следующего формата:

-   http://<*subdomain.customdomain*>/<*мой_контейнер*>/<*мой_blob*>

Например, можно использовать следующий URI для доступа к веб-форме через
пользовательский поддомен **photos.contoso.com**, сопоставляющий с большим двоичным объекту в контейнере
**myforms**:

-   http://photos.contoso.com/myforms/applicationform.htm

## Дополнительные ресурсы

-   <a href="http://msdn.microsoft.com/library/windowsazure/gg680307.aspx">Как сопоставить содержимое CDN с пользовательским доменом</a>



<!--HONumber=42-->
