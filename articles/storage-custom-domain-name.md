<properties linkid="manage-services-storage-custom-dns-storage" urlDisplayName="custom dns storage" pageTitle="Configure a domain name for blob data in a storage account | Microsoft Azure" metaKeywords="" description="Learn how to configure a custom domain for accessing blob data in an Azure storage account." metaCanonical="" services="storage" documentationCenter="" title="Configure a custom domain name for blob data in a storage account" solutions="" authors="tamram" manager="mbaldwin" editor="cgronlun" />

<tags ms.service="storage" ms.workload="storage" ms.tgt_pltfrm="na" ms.devlang="na" ms.topic="article" ms.date="01/01/1900" ms.author="tamram"></tags>

# Настройка имени домена для BLOB-данных в учетной записи хранения Azure

Можно настроить пользовательский домен для доступа к BLOB-данным в учетной записи хранения Azure. Конечная точка по умолчанию для службы Blob-объектов: <https://>\<*mystorageaccount*\>.blob.core.windows.net. Если сопоставить пользовательский домен и поддомен, например, **www.contoso.com** с конечной точкой blob-объектов учетной записи хранения, ваши пользователи смогут получить доступ к blob-данным в учетной записи хранения с помощью этого домена.

<div class="dev-callout"> 
<b>Примечание.</b> 
    <p>Процедуры в этом задании применяются к учетным записям хранения Azure. Сведения об облачных службах см. в статье <a href = "/ru-ru/develop/net/common-tasks/custom-dns/">Настройка пользовательского имени домена для облачной службы Azure</a>, о веб-сайтах &mdash; в статье <a href="/ru-ru/develop/net/common-tasks/custom-dns-web-site/">Настройка пользовательского имени домена для веб-сайта Azure</a>.</p> 
</div>

Существует два способа указать пользовательский домен для конечной точки BLOB-объекта в учетной записи хранения. Самым простым способом является создание записи CNAME, сопоставляющей пользовательский домен и поддомен конечной точке BLOB-объекта. Запись CNAME — это компонент DNS, позволяющий сопоставить исходный и конечный домены. В этом случае исходный домен является пользовательским доменом и поддоменом — обратите внимание, что поддомен всегда является обязательным. Конечный домен является конечной точкой службы BLOB-объектов.

Однако процесс сопоставления пользовательского домена конечной точке BLOB-объекта приводит к краткому периоду простоя для домена в течение регистрации домена на портале управления Azure. Если пользовательский домен в это время поддерживает приложение с заданным соглашением об уровне обслуживания (SLA), не допускающим простоя, то для промежуточного шага регистрации можно использовать поддомен Azure **asverify**, чтобы пользователи могли получать доступ к вашему домену во время выполнения сопоставления DNS.

В следующей таблице приведены примеры URL-адресов для доступа к BLOB-данным в учетной записи хранения с именем **mystorageaccount**. Пользовательский домен, зарегистрированный для этой учетной записи хранения: **www.contoso.com**


<TABLE style="BORDER-TOP: #000000 1px solid; BORDER-RIGHT: #000000 1px solid; BORDER-BOTTOM: #000000 1px solid; BORDER-LEFT: #000000 1px solid" cellSpacing=0 cellPadding=5 border=1><TBODY>
<TR>
<TD style="WIDTH: 100px"><STRONG>Тип ресурса</STRONG></TD>
<TD><STRONG>Форматы URL</STRONG></TD></TR>
<TR>
<TD>Учетная запись хранения</TD>
<TD><STRONG>URL-адрес по умолчанию:</STRONG> http://mystorageaccount.blob.core.windows.net<BR><STRONG>URL-адрес пользовательского домена:</STRONG> http://www.contoso.com</TD></TR>
<TR>
<TD>BLOB-объект</TD>
<TD><STRONG>URL-адрес по умолчанию:</STRONG> http://mystorageaccount.blob.core.windows.net/mycontainer/myblob<BR><STRONG>URL-адрес пользовательского домена:</STRONG> http://www.contoso.com/mycontainer/myblob</TD></TR>
<TR>
<TD>Корневой контейнер</TD>
<TD><STRONG>URL-адрес по умолчанию:</STRONG> http://mystorageaccount.blob.core.windows.net/myblob <BR>или<BR>http://mystorageaccount.blob.core.windows.net/$root/myblob<BR><STRONG>URL-адрес пользовательского домена:</STRONG> http://www.contoso.com/myblob <BR>или<BR>http://www.contoso.com/$root/myblob</TD></TR></TBODY></TABLE>



В этой задаче будет показано, как выполнять следующие действия:

-   [Регистрация пользовательского домена для используемой учетной записи хранения][Регистрация пользовательского домена для используемой учетной записи хранения]
-   [Регистрация пользовательского домена для учетной записи хранения с помощью промежуточного поддомена asverify][Регистрация пользовательского домена для учетной записи хранения с помощью промежуточного поддомена asverify]
-   <a name="#verify-subdomain">Проверка того, что пользовательский домен ссылается на конечную точку службы BLOB-объектов</a>

## <a name="register-domain"></a>Регистрация пользовательского домена для используемой учетной записи хранения

Эта процедура используется для регистрации пользовательского домена, если допускается кратковременная недоступность домена для пользователей домена или если в пользовательском домене в данный момент не размещается никакое приложение.

Если пользовательский домен поддерживает приложение, не допускающее простоя, то следует использовать процедуру, описанную в разделе [Регистрация пользовательского домена для учетной записи хранения с помощью промежуточного поддомена asverify][Регистрация пользовательского домена для учетной записи хранения с помощью промежуточного поддомена asverify]

Чтобы настроить имя пользовательского домена, необходимо создать новую запись CNAME с помощью вашего регистратора домена. Эта запись CNAME определяет псевдоним для имени домена. В этом случае она сопоставляет адрес пользовательского домена конечной точке службы BLOB-объектов для используемой учетной записи хранения.

Каждый регистратор имеет похожий, но немного отличный способ указания записи CNAME, хотя
 используется одна и та же концепция. Обратите внимание, что многие базовые пакеты регистрации домена не предлагают настройки DNS, поэтому может потребоваться обновить пакет регистрации домена, прежде чем создавать запись CNAME.

1.  На портале управления перейдите на вкладку **Хранилище**.

2.  На вкладке **Хранилище** щелкните имя учетной записи хранения, для которой нужно выполнить сопоставление пользовательского домена.

3.  Выберите вкладку **Настройка**.

4.  В нижней части экрана щелкните **Управление доменом**, чтобы вывести диалоговое окно **Управление пользовательским доменом**. Верхняя часть диалогового окна содержит сведения о том, как создать запись CNAME. В рамках этой процедуры не обращайте внимания на указания, относящиеся к поддомену **asverify**.

5.  Войдите на веб-сайт своего регистратора DNS и перейдите на страницу управления DNS. Она может находиться в таком разделе, как **Имя домена**,**DNS** или **Управление сервером доменных имен**.

6.  Найдите раздел управления записями CNAME. Может понадобиться перейти на страницу  дополнительных параметров и найти слова **CNAME**, **Псевдоним** или **Поддомены**.

7.  Создайте новую запись CNAME и укажите псевдоним поддомена, например **www** или **photos**. Введите имя узла, являющегося конечной точкой службы BLOB-объектов, в формате **mystorageaccount.blob.core.windows.net** (где **mystorageaccount** имя вашей учетной записи хранения). Имя используемого узла содержится в тексте диалогового окна **Управление пользовательским доменом**.

8.  Создав запись CNAME, вернитесь в диалоговое окно **Управление пользовательским доменом** и введите имя своего пользовательского домена, включая поддомен, в поле **Имя пользовательского домена**. Например, если используются домен **contoso.com** и поддомен **www**, введите **www.contoso.com**. Если используется поддомен **photos**, введите **photos.contoso.com**. Обратите внимание, что поддомен является обязательным.

9.  Чтобы зарегистрировать пользовательский домен, нажмите кнопку **Зарегистрировать**.

    Если регистрация прошла успешно, появится сообщение **Ваш пользовательский домен активен**. Теперь пользователи при наличии соответствующих разрешений могут просматривать BLOB-данные вашего пользовательского домена.

## <a name="register-asverify"></a>Регистрация пользовательского домена для учетной записи хранения с помощью промежуточного поддомена asverify

Эта процедура используется для регистрации пользовательского домена, который в данное время поддерживает приложения с соглашением об уровне обслуживания, запрещающим простои. Создавая запись CNAME, указывающую из asverify.\<поддомен\>.\<пользовательский\_домен\> в asverify.\<учетная\_запись\_хранения\>.blob.core.windows.net, можно выполнить предварительную регистрацию домена в Azure. Затем можно создать вторую запись CNAME, указывающую из \<поддомен\>.\<пользовательский\_домен\> в \<учетная\_запись\_хранения\>. blob.core.windows.net, и с этого момента трафик для пользовательского домена будет направлен в конечную точку BLOB-объекта.

Поддомен asverify представляет собой специальный поддомен, распознаваемый Azure. Добавляя **asverify** в свой поддомен, вы разрешаете Azure распознавать ваш пользовательский домен без изменения DNS-записи для этого домена. После выполненного изменения DNS-запись для домена будет без простоя сопоставлена конечной точке BLOB-объекта.

1.  На портале управления перейдите на вкладку **Хранилище**.

2.  На вкладке **Хранилище** щелкните имя учетной записи хранения, для которой нужно выполнить сопоставление пользовательского домена.

3.  Выберите вкладку **Настройка**.

4.  В нижней части экрана щелкните **Управление доменом**, чтобы вывести диалоговое окно **Управление пользовательским доменом**. Верхняя часть диалогового окна содержит сведения о том, как создать запись CNAME, используя поддомен **asverify**.

5.  Войдите на веб-сайт своего регистратора DNS и перейдите на страницу управления DNS. Она может находиться в таком разделе, как **Имя домена**,**DNS** или **Управление сервером доменных имен**.

6.  Найдите раздел управления записями CNAME. Может понадобиться перейти на страницу  дополнительных параметров и найти слова **CNAME**, **Псевдоним** или **Поддомены**.

7.  Создайте новую запись CNAME и укажите псевдоним поддомена, который содержит поддомен asverify. Например, для поддомена может использоваться формат **asverify.www** или **asverify.photos**. Введите имя узла, являющегося конечной точкой службы BLOB-объектов, в формате **asverify.mystorageaccount.blob.core.windows.net** (где **mystorageaccount** — имя вашей учетной записи хранения). Имя используемого узла содержится в тексте диалогового окна **Управление пользовательским доменом**.

8.  Создав запись CNAME, вернитесь в диалоговое окно **Управление пользовательским доменом** и введите имя своего пользовательского домена в поле **Имя пользовательского домена**. Например, если используются домен **contoso.com** и поддомен **www**, введите **www.contoso.com**. Если используется поддомен **photos**, введите **photos.contoso.com**. Обратите внимание, что поддомен является обязательным.

9.  Установите флажок **Дополнительно: использовать поддомен "asverify" для предварительной регистрации моего пользовательского домена**.

10. Чтобы предварительно зарегистрировать пользовательский домен, нажмите кнопку **Зарегистрировать**.

    Если предварительная регистрация прошла успешно, появится сообщение **Ваш пользовательский домен активен**.

11. На этом этапе ваш пользовательский домен был проверен Azure, но трафик, идущий в ваш домен, еще не маршрутизирован в вашу учетную запись хранения. Для завершения процесса вернитесь на веб-сайт регистратора DNS и создайте другую запись CNAME, сопоставляющую поддомен конечной точке службы BLOB-объектов. Например, можно указать дочерний домен, как **www** или **photos**, а имя узла как **mystorageaccount.blob.core.windows.net** (где **mystorageaccount** — имя вашей учетной записи хранения). Это действие завершает регистрацию пользовательского домена.

12. Наконец, можно удалить запись CNAME, созданную с помощью **asverify**, так как она была необходима только в качестве промежуточного шага.

Теперь пользователи при наличии соответствующих разрешений могут просматривать BLOB-данные вашего пользовательского домена.

<a name="verify-subdomain"> </a>

## Проверка того, что пользовательский домен ссылается на конечную точку службы BLOB-объектов

Чтобы убедиться, что ваш пользовательский домен действительно сопоставлен конечной точке службы BLOB-объектов, создайте BLOB-объект в общедоступном контейнере в вашей учетной записи хранения. Затем, чтобы получить доступ к этому BLOB-объекту, используйте в веб-браузере URI следующего формата:

-   http://<*subdomain.customdomain*>/<*mycontainer*>/<*myblob*>

Например, можно использовать следующий URI для доступа к веб-форме через пользовательский поддомен **photos.contoso.com**, который выполняет сопоставление с blob-объектом в вашем контейнере **myforms**:

-   <http://photos.contoso.com/myforms/applicationform.htm>

## Дополнительные ресурсы

-   [Сопоставление содержимого CDN с пользовательским доменом][Сопоставление содержимого CDN с пользовательским доменом]

  [Настройка пользовательского имени домена для облачной службы Azure]: /ru-ru/develop/net/common-tasks/custom-dns/
  [Настройка пользовательского имени домена для веб-сайта Azure]: /ru-ru/develop/net/common-tasks/custom-dns-web-site/
  [Регистрация пользовательского домена для используемой учетной записи хранения]: #register-domain
  [Регистрация пользовательского домена для учетной записи хранения с помощью промежуточного поддомена asverify]: #register-asverify
  [Сопоставление содержимого CDN с пользовательским доменом]: http://msdn.microsoft.com/ru-ru/library/windowsazure/gg680307.aspx
