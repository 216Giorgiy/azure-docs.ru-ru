---
title: "Как добавить эталонный набор данных в среду аналитики временных рядов Azure"
description: "Из этой статьи вы узнаете, как добавить эталонный набор данных в среду аналитики временных рядов Azure."
services: time-series-insights
ms.service: time-series-insights
author: jasonwhowell
ms.author: jasonh
manager: kfile
editor: MicrosoftDocs/tsidocs
ms.reviewer: jasonh, kfile, anshan
ms.workload: big-data
ms.topic: article
ms.date: 02/15/2018
ms.openlocfilehash: e0d11f253d5aa143ff636c4dc8dff7665a80360e
ms.sourcegitcommit: fbba5027fa76674b64294f47baef85b669de04b7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/24/2018
---
# <a name="create-a-reference-data-set-for-your-time-series-insights-environment-using-the-azure-portal"></a>Создание эталонного набора данных для среды Аналитики временных рядов с помощью портала Azure

Из этой статьи вы узнаете, как добавить эталонный набор данных в среду Аналитики временных рядов Azure. Соединив эталонные данные с исходными, можно получить расширенные значения.

Эталонный набор данных — это коллекция элементов, которые дополняют события из вашего источника событий. Обработчик входящего трафика аналитики временных рядов соединяет каждое событие из вашего источника событий с соответствующей строкой данных в вашем эталонном наборе данных. Это дополненное событие становится доступным для запроса. Это соединение основано на столбцах первичного ключа, определенных в эталонном наборе данных.

Ретроактивное объединение с эталонными данными не поддерживается. Это означает, что сопоставляются и присоединяются к эталонному набору данных после его настройки и загрузки только текущие и будущие входящие данные.

## <a name="add-a-reference-data-set"></a>Добавление эталонного набора данных

1. Войдите на [портале Azure](https://portal.azure.com).

2. Найдите существующую среду "Аналитика временных рядов". На портале Azure щелкните **All resources** (Все ресурсы) в меню слева. Выберите среду Time Series Insights.

3. Выберите страницу **Обзор**. Найдите **URL-адрес обозревателя аналитики временных рядов** и откройте ссылку.  

   Просмотрите обозреватель для среды TSI.

4. Разверните средство выбора среды в обозревателе TSI. Выберите активную среду. Выберите значок эталонных данных в правом верхнем углу на странице обозревателя.

   ![Добавление эталонных данных](media/add-reference-data-set/add_reference_data.png)

5. Нажмите кнопку **+ Добавить набор данных**, чтобы начать добавление нового набора данных.

   ![Добавление набора данных](media/add-reference-data-set/add_data_set.png)

6. На странице **Новый эталонный набор данных** выберите формат данных: 
   - выберите **CSV-файл** для данных с разделителями-запятыми (первая строка считается строкой заголовка); 
   - выберите **Массив JSON** для данных в формате JSON (нотация объектов JavaScript).

   ![Выберите формат данных.](media/add-reference-data-set/add_data.png)

7. Укажите данные, используя один из двух способов:
   - вставьте данные в текстовый редактор а затем нажмите кнопку **Проанализировать эталонные данные**;
   - нажмите кнопку **Выберите файл**, чтобы добавить данные из локального текстового файла. 

   Например, вставьте данные CSV-файла: ![Вставленные данные CSV-файла](media/add-reference-data-set/csv_data_pasted.png)

   Например, вставьте данные массива JSON: ![Вставленные данные массива JSON](media/add-reference-data-set/json_data_pasted.png)

   Если при анализе значений данных произойдет ошибка, она отобразится красным цветом в нижней части страницы, например таким образом: `CSV parsing error, no rows extracted`.

8. После успешного анализа данных появится сетка данных с отображением столбцов и строк с данными.  Просмотрите сетку данных, чтобы убедиться, что все правильно.

   ![Добавление эталонных данных](media/add-reference-data-set/parse_data.png)

9. Просмотрите каждый столбец, чтобы увидеть предполагаемый тип данных, и при необходимости измените этот тип.  Выберите символ типа данных в заголовке столбца: **#** для двойных (числовых данных), **T|F** для данных с логическими значениями или **Abc** для строки.

   ![Выбор типов данных в заголовках столбцов](media/add-reference-data-set/choose_datatypes.png)

10. При необходимости переименуйте заголовки столбцов. Имя ключевого столбца необходимо для присоединения к соответствующему свойству в источнике события. Убедитесь, что имя ключевого столбца эталонных данных точно совпадает с именем события для входящих данных, включая чувствительность к регистру. Имена столбцов, не являющихся ключевыми, используются для добавления входящих данных с соответствующими значениями эталонных данных.

11. Щелкните **Добавить строку** или **Добавить столбец**, чтобы при необходимости добавить больше значений эталонных данных.

12. Введите значение в поле **Filter the rows...** (Отфильтровать строки...), чтобы при необходимости просмотреть отдельные строки. Фильтр используется для просмотра данных, но не применяется при их загрузке.
 
13. Присвойте имя набору данных, заполнив поле **Имя набора данных** над сеткой данных.

   ![Присвоение имени набору данных](media/add-reference-data-set/name_reference_dataset.png)

14. Укажите столбец **первичного ключа** в наборе данных, выбрав раскрывающееся меню над сеткой данных.

   ![Выбор столбца первичного ключа](media/add-reference-data-set/set_primary_key.png)

   При необходимости нажмите кнопку **+**, чтобы добавить столбец вторичного ключа как составной первичный ключ. Если нужно отменить выбор, выберите пустое значение из раскрывающегося списка, чтобы удалить вторичный ключ.

15.  Для передачи данных нажмите кнопку **передачи строк**.

   ![Передать](media/add-reference-data-set/upload_rows.png)

   На странице вы увидите подтверждение завершенной загрузки и сообщение **Набор данных успешно отправлен**.

## <a name="next-steps"></a>Дополнительная информация
* [Управление эталонными данными](time-series-insights-manage-reference-data-csharp.md) программными средствами.
* Полный справочник по API см. [здесь](/rest/api/time-series-insights/time-series-insights-reference-reference-data-api).
