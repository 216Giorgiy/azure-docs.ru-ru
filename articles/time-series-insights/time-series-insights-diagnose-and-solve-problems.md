---
title: "Диагностика и устранение неполадок | Документация Майкрософт"
description: "В этом руководстве описывается, как выявлять и устранять неполадки в среде Time Series Insights."
keywords: 
services: time-series-insights
documentationcenter: 
author: venkatgct
manager: almineev
editor: cgronlun
ms.assetid: 
ms.service: time-series-insights
ms.devlang: na
ms.topic: how-to-article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 04/24/2017
ms.author: venkatja
ms.translationtype: Human Translation
ms.sourcegitcommit: 7f8b63c22a3f5a6916264acd22a80649ac7cd12f
ms.openlocfilehash: 46d58e94f3fede3f7f19de8d97e23ac6910bc12a
ms.contentlocale: ru-ru
ms.lasthandoff: 05/01/2017

---
# <a name="diagnose-and-solve-problems"></a>Диагностика и решение проблем

## <a name="i-do-not-see-my-data"></a>Данные не отображаются
Ниже приведены некоторые причины, по которым данные могут не отображаться в среде на [портале Time Series Insights](https://insights.timeseries.azure.com).

### <a name="does-your-event-source-have-data-in-json-format"></a>Есть ли в источнике событий данные в формате JSON?
Сейчас Azure Time Series Insights поддерживает только данные в формате JSON. Примеры JSON см. в разделе о *поддерживаемых формах JSON* [здесь](time-series-insights-send-events.md#supported-json-shapes).

### <a name="when-registering-your-event-source-did-you-provide-the-key-with-required-permissions"></a>Указали ли вы ключ с требуемыми разрешениями при регистрации источника событий?
1. Для Центра Интернета вещей необходимо указать ключ с разрешением на *подключение службы*.

   ![Разрешение на подключение службы Центра Интернета вещей](media/diagnose-and-solve-problems/iothub-serviceconnect-permissions.png)

   Как показано на предыдущем рисунке, можно использовать политику iothubowner или service, так как обоим назначено разрешение на подключение службы.
2. Для концентратора событий необходимо указать ключ с разрешением на *прослушивание*.

   ![Разрешение на прослушивание концентратора событий](media/diagnose-and-solve-problems/eventhub-listen-permissions.png)

   Как показано на предыдущем рисунке, подойдет политика read или manage, так как обоим назначено разрешение на чтение.

### <a name="are-you-sure-that-the-consumer-group-provided-is-exclusive-to-time-series-insights"></a>Вы уверены, что указанная группа потребителей является уникальной для Time Series Insights?
Во время регистрации для Центра Интернета вещей или концентратора событий нужно указать группу потребителей, которая должна использоваться при чтении данных. Эта группа потребителей не должна быть общей. В противном случае базовый концентратор событий случайным образом автоматически отключает один из модулей чтения.

## <a name="i-see-my-data-but-there-is-a-lag"></a>Данные отображаются с задержкой
Ниже приведены некоторые причины, по которым могут отображаться некоторые данные в среде на [портале Time Series Insights](https://insights.timeseries.azure.com).

### <a name="your-environment-might-be-getting-throttled"></a>Регулирование среды
Ограничение регулирования применяется на основе типа номера SKU и емкости среды. Все источники событий в среде совместно используют емкость. Если источник событий в виде концентратора событий или Центра Интернета вещей превышает ограничение по объему передаваемых данных, наблюдается регулирование и задержка.

На снимке экрана ниже показана среда Time Series Insights с номером SKU S1 и емкостью 3. Она может принимать 3 миллиона событий в день.

![Текущая емкость номера SKU среды](media/diagnose-and-solve-problems/environment-sku-current-capacity.png)

Предположим, что эта среда принимала сообщения из концентратора событий со скоростью входящих данных, как показано на следующей схеме:

![Текущая емкость номера SKU среды](media/diagnose-and-solve-problems/eventhub-ingress-rate.png)

Как показано на схеме, ежедневная частота приема составляет около 67 000 сообщений. При этом передается примерно 46 сообщений в минуту. Если все сообщения концентратора событий свести к одному событию Time Series Insights, станет понятно, что в этой среде ничего не регулируется. Если все сообщения концентратора событий свести к 100 событиям Time Series Insights, каждую минуту будет передаваться по 4600 событий. Среда S1 SKU с емкостью 3 может принимать только 2100 событий каждую минуту (миллион событий в день => 700 событий в минуту, три единицы => 2100 событий в минуту). Поэтому из-за регулирования появится задержка. Подробные сведения о логике сведения см. в разделе о *поддерживаемых формах JSON* [здесь](time-series-insights-send-events.md#supported-json-shapes).

#### <a name="recommended-steps"></a>Рекомендуемые действия
Чтобы устранить задержку, увеличьте емкость номера SKU среды. [Как масштабировать среду Azure Time Series Insights](time-series-insights-how-to-scale-your-environment.md)

### <a name="you-might-be-pushing-historical-data-and-hence-the-slow-ingress"></a>Передача архивных данных и медленный ввод данных
При подключении имеющегося источника событий, вероятнее всего, в концентраторе событий или Центре Интернета вещей уже есть данные. Поэтому среда начинает извлекать данные, как только сообщения источника событий начинают сохраняться. Это поведение по умолчанию, которое невозможно переопределить. Может происходить регулирование, а корректировка приема архивных данных может занять некоторое время.

#### <a name="recommended-steps"></a>Рекомендуемые действия
Чтобы устранить задержку, сделайте следующее:
1. Увеличьте емкость номера SKU до максимально допустимого значения (в этом случае — 10). После этого прием данных ускорится. Значение ускорения можно увидеть в таблице доступности на [портале Time Series Insights](https://insights.timeseries.azure.com). Плата взимается за увеличенную емкость.
2. Устранив задержку, уменьшите емкость номера SKU до нормального уровня приема.

## <a name="my-event-source-timestamp-property-name-setting-does-not-work"></a>Параметр *имени свойства метки времени* источника события не действует
Убедитесь, что имя и значение соответствуют следующим правилам:
1. В имени свойства метки времени __учитывается регистр__.
2. Так как значение свойства метки времени из источника событий является строкой JSON, оно должно иметь формат __гггг-мм-ддТчч:мм:сс.FFFFFFFK__. Например 2008-04-12T12:53Z.
