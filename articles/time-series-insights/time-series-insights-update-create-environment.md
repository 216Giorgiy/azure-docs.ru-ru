---
title: Руководство. Настройка среды службы "Аналитика временных рядов Azure" (предварительная версия) | Документация Майкрософт
description: Узнайте, как настроить среду "Аналитика временных рядов Azure" (предварительная версия).
author: ashannon7
ms.author: anshan
ms.workload: big-data
manager: cshankar
ms.service: time-series-insights
services: time-series-insights
ms.topic: tutorial
ms.date: 12/12/2018
ms.custom: seodec18
ms.openlocfilehash: 1b09c0e31b217d7d67f936aefe9045d190241389
ms.sourcegitcommit: c94cf3840db42f099b4dc858cd0c77c4e3e4c436
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/19/2018
ms.locfileid: "53633119"
---
# <a name="tutorial-set-up-an-azure-time-series-insights-preview-environment"></a>Руководство. Настройка среды "Аналитика временных рядов Azure" (предварительная версия)

Это руководство поможет вам создать среду службы "Аналитика временных рядов Azure" (предварительная версия) с оплатой по мере использования. Из этого руководства вы узнаете, как выполнять следующие задачи:

* Создать среду "Аналитика временных рядов Azure" (предварительная версия).
* Подключить среду "Аналитика временных рядов Azure" (предварительная версия) к концентратору событий в Центрах событий Azure.
* Запускать пример акселератора решений для потоковой передачи данных в среду "Аналитика временных рядов Azure" (предварительная версия).
* Выполнять базовый анализ данных.
* Определять тип и иерархию модели временных рядов и связывать ее с экземплярами.

# <a name="create-a-device-simulation"></a>Создание имитации устройств

В этом разделе создаются три виртуальных устройства, которые будут отправлять данные в центр Интернета вещей.

1. Перейдите на [страницу акселераторов решений для Интернета вещей Azure](https://www.azureiotsolutions.com/Accelerators). На ней представлены несколько готовых примеров. Выполните вход с учетной записью Azure. Затем выберите **Имитация устройства**.

   ![Страница акселераторов решений для Интернета вещей Azure][1]

   Щелкните **Попробовать сейчас**.

1. Введите необходимые параметры на странице **Создание решения для имитации устройств**.

   | Параметр | ОПИСАНИЕ |
   | --- | --- |
   | **Имя решения** |    Введите уникальное значение для создания новой группы ресурсов. В эту группу помещаются все выбранные ресурсы Azure после их создания. |
   | **Подписка** | Укажите ту же подписку, которую вы использовали для создания среды "Аналитика временных рядов". |
   | **Регион** |   Укажите тот же регион, который вы использовали для создания среды службы "Аналитика временных рядов". |
   | **Развертывание дополнительных ресурсов Azure**    | Оставьте выбранным центр Интернета вещей, чтобы имитированное устройство могло подключаться к нему и передавать данные. |

   Теперь щелкните **Создать решение**. Подождите 10–15 минут, пока решение развертывается.

   ![Создание страницы решения имитации устройства][2]

1. На панели мониторинга акселератора решений нажмите кнопку **Запуск**:

   ![Запуск решения имитации устройства][3]

1. Вы попадете на страницу **имитации устройства Интернета вещей Microsoft Azure**. Щелкните **+Новая имитация** в правом верхнем углу этой страницы.

   ![Страница имитации Azure IoT][4]

1.  Заполните обязательные параметры, как показано ниже:

    ![Параметры для заполнения][5]

    |||
    | --- | --- |
    | **Имя** | Введите уникальное имя имитатора. |
    | **Описание** | Введите определение. |
    | **Длительность имитации** | Выберите **Бессрочный запуск**. |
    | **Модель устройства** | **Имя.** Введите значение **Chiller**. </br>**Количество**. Введите значение **3**. |
    | **Целевой Центр Интернета вещей** | Выберите **Использовать предварительно подготовленный Центр Интернета вещей**. |

    Затем щелкните **Запустить имитацию**.

1. На панели мониторинга устройства найдите значения **Активные устройства** и **Сообщений в секунду**.

    ![Панель мониторинга имитации Центра Интернета вещей Azure][6]

## <a name="list-device-simulation-properties"></a>Свойства списка имитации устройства

Чтобы начать создание среды службы "Аналитика временных рядов Azure", вам понадобятся имена центра Интернета вещей, подписки и группы ресурсов.

1. Перейдите на панель мониторинга акселератора решений и выполните вход с той же учетной записью Azure. Найдите имитацию устройства, созданную на предыдущих шагах.

1. Выберите имитатор устройства и щелкните **Запуск**. Выберите ссылку **Портал управления Azure** справа.

    ![Список имитаций][7]

1. Запишите имена центра Интернета вещей, подписки и группы ресурсов.

    ![Портал Azure][8]

## <a name="create-a-time-series-insights-preview-payg-environment"></a>Создание среды "Аналитика временных рядов" с оплатой по мере использования (предварительная версия)

В этом разделе описывается создание среды "Аналитика временных рядов Azure" (предварительная версия) с помощью [портала Azure](https://portal.azure.com/).

1. Войдите на портал Azure, используя учетную запись подписки.

1. Выберите **Создать ресурс**.

1. Выберите категорию **Интернет вещей**, а затем щелкните **Аналитика временных рядов**.

   ![Выберите категорию "Интернет вещей" и щелкните "Аналитика временных рядов".][9]

1. Заполните поля на этой странице, как указано далее.

   | | |
   | --- | ---|
   | **Имя среды** | Выберите уникальное имя для среды службы "Аналитика временных рядов Azure" (предварительная версия). |
   | **Подписка** | Введите подписку, в которой вы хотите создать среду "Аналитика временных рядов Azure" (предварительная версия). Мы рекомендуем использовать ту же подписку, что и для остальных ресурсов Интернета вещей, созданных имитатором устройств. |
   | **Группа ресурсов** | Группа ресурсов Azure служит контейнером для ресурсов Azure. Выберите имеющуюся группу ресурсов для ресурсов среды "Аналитика временных рядов Azure" (предварительная версия) или создайте новую. Мы рекомендуем использовать ту же группу ресурсов, что и для остальных ресурсов Интернета вещей, созданных имитатором устройств. |
   | **Местоположение.** | Выберите регион центра обработки данных для среды службы "Аналитика временных рядов Azure" (предварительная версия). Чтобы избежать лишних затрат на передачу данных и ненужных сетевых задержек, лучше всего хранить среду "Аналитика временных рядов Azure" (предварительная версия) в одном регионе с остальными ресурсами Интернета вещей. |
   | **Уровень** |  Выберите значение **PAYG**, которое обозначает модель с оплатой по мере использования. Это номер SKU для продукта "Аналитика временных рядов Azure" (предварительная версия). |
   | **Идентификатор свойства** | Введите любое значение, которое однозначно идентифицирует ваши временные ряды. Обратите внимание, что это поле является неизменяемым — вы не сможете изменить это значение позже. Для нашего примера введите значение **iothub-connection-device-id**. См. дополнительные сведения о [выборе идентификатора временных рядов](./time-series-insights-update-how-to-id.md). |
   | **Имя учетной записи хранения** | Введите глобально уникальное имя для создания новой учетной записи хранения. |

   Затем щелкните **Далее. Источник событий**.

   ![Страница создания среды службы "Аналитика временных рядов"][10]

1. На странице источника событий заполните поля, как описано далее.

   | | |
   | --- | --- |
   | **Создать источник событий?** | Введите **Да**.|
   | **Имя** | Введите уникальное значение, которое будет обозначать этот источник событий.|
   | **Тип источника** | Выберите **Центр Интернета вещей**. |
   | **Выбрать центр?** | Выберите **Выбрать существующий**. |
   | **Подписка** | Введите подписку, которая использовалась для имитатора устройства. |
   | **Имя Центра Интернета вещей** | Введите имя центра Интернета вещей, которое использовалось для имитатора устройства. |
   | **IoT Hub access policy** (Политика доступа Центра Интернета вещей) | Выберите **iothubowner**. |
   | **Группа потребителей Центра Интернета вещей** | Здесь следует указать уникальную группу потребителей для среды службы "Аналитика временных рядов Azure" (предварительная версия). Щелкните **Новая**, введите уникальное имя и выберите **Добавить**. |
   | **Свойство метки времени** | Это поле используется для идентификации свойства метки времени во входящих данных телеметрии. Не заполняйте это поле для примера из этого руководства. Наш имитатор использует метку времени, поступающую из Центра Интернета вещей. Это поведение по умолчанию для службы "Аналитика временных рядов".|

   Щелкните **Просмотр и создание**.

   ![Страница настройки источника событий][13]

1. Проверьте все поля на странице просмотра и щелкните **Создать**.

   ![Страница просмотра и создания с кнопкой "Создать"][14]

1. Вы можете увидеть состояние развертывания.

   ![Уведомление о завершении развертывания][15]

1. Если вы являетесь владельцем клиента, вы получите доступ к среде службы "Аналитика временных рядов" (предварительная версия). Чтобы убедиться в том, что у вас есть доступ:

   a. Выберите группу ресурсов и в ней выберите среду службы "Аналитика временных рядов Azure" (предварительная версия).

      ![Выбранная среда][16]

   b. На странице службы "Аналитика временных рядов Azure" (предварительная версия) перейдите к **политикам доступа к данным**.

     ![политики доступа к данным.][17]

   c. Убедитесь, что ваши учетные данные перечислены.

     ![Учетные данные в списке][18]

   Если учетные данные не указаны, следует предоставить себе разрешение на доступ к среде. См. дополнительные сведения о [предоставлении доступа к данным](./time-series-insights-data-access.md).

## <a name="analyze-data-in-your-environment"></a>Анализ данных в вашей среде

В этом разделе будет выполнена базовая аналитика ваших данных временных рядов с использованием [обозревателя службы "Аналитика временных рядов Azure" (предварительная версия)](./time-series-insights-update-explorer.md).

1. Перейдите в обозреватель службы "Аналитика временных рядов Azure" (предварительная версия), щелкнув URL-адрес на странице ресурса на [портале Azure](https://portal.azure.com/).

   ![URL-адрес обозревателя службы "Аналитика временных рядов" (предварительная версия)][19]

1. В обозревателе выберите узел **Экземпляры без родительского элемента**, чтобы просмотреть все существующие в среде экземпляры службы "Аналитика временных рядов Azure" (предварительная версия).

   ![Список экземпляров без родительского элемента][20]

1. В отобразившихся временных рядах щелкните первый экземпляр. Затем щелкните **Показать среднее давление**.

   ![Выбранный экземпляр с командой меню для отображения среднего давления][21]

   Справа откроется диаграмма временных рядов:

   ![Диаграмма временных рядов][22]

1. Повторите шаг 3 в двух других временных рядах. Вы можете просмотреть все временные ряды, как показано на этой схеме:

   ![Отображение всех временных рядов][23]

1. Измените диапазон времени, чтобы увидеть тенденции временных рядов за последний час. 

   a. Выберите поле параметра **С**.

      ![Поле параметра "С"][24]

   b. Измените время в этом поле, чтобы отобразить события за последний час:

      ![Настройки времени][25]

1. Затем можно сравнить нагрузку для всех трех устройств за последний час:

   ![Сравнение трех устройств][26]

## <a name="define-and-apply-a-model"></a>Определение и применение модели

В этом разделе вы примените модель для структурирования данных. Чтобы завершить создание модели, вы определите типы, иерархии и экземпляры. Дополнительные сведения о моделировании данных см. в статье о [моделях временных рядов](./time-series-insights-update-tsm.md).

1. В обозревателе выберите вкладку **Модель**:

   ![Вкладка "Модель" в обозревателе][27]

1. Щелкните **+Добавить**, чтобы добавить тип. Справа откроется редактор типа.

   ![Кнопка добавления типа][28]

1. Определите три переменные типа: давление, температура и влажность. Введите следующие сведения:

   | | |
   | --- | ---|
   | **Имя** | Введите значение **Chiller**. |
   | **Описание** | Введите текст **Это описание типа Chiller**. |

   * Определите давление с помощью трех переменных:

      | | |
      | --- | ---|
      | **Имя** | Введите **Среднее давление**. |
      | **Значение** | Выберите **pressure (Double)** (давление (двойное)). Обратите внимание, что заполнение этого поля может начаться через несколько минут после того, как служба "Аналитика временных рядов Azure" (предварительная версия) начнет получать события. |
      | **Операция агрегирования** | Выберите **AVG**. |

      ![Выбранные значения для определения давления][29]

      Щелкните **+Добавить переменную**, чтобы добавить следующую переменную.

   * Определите температуру.

      | | |
      | --- | ---|
      | **Имя** | Введите **Средняя температура**. |
      | **Значение** | Выберите **temperature (Double)** (температура (двойная)). Обратите внимание, что заполнение этого поля может начаться через несколько минут после того, как служба "Аналитика временных рядов Azure" (предварительная версия) начнет получать события. |
      | **Операция агрегирования** | Выберите **AVG**.|

      ![Выбранные значения для определения температуры][30]

   * Определите влажность.

      | | |
      | --- | ---|
      | **Имя** | Введите **Максимальная влажность**. |
      | **Значение** | Выберите **humidity (Double)** (влажность (двойная)). Обратите внимание, что заполнение этого поля может начаться через несколько минут после того, как служба "Аналитика временных рядов Azure" (предварительная версия) начнет получать события. |
      | **Операция агрегирования** | Выберите **MAX**.|

      ![Выбранные значения для определения температуры][31]

   Затем выберите **Создать**.

1. Вы увидите здесь добавленный тип:

   ![Сведения о добавленном типе.][32]

1. Следующим шагом является добавление иерархии. В разделе **Иерархии** щелкните **+Добавить**.

   ![Вкладка иерархий с кнопкой "Добавить"][33]

1. Определите иерархию. Заполните поля, как описано далее.

   | | |
   | --- | ---|
   | **Имя** | Введите **Иерархия расположений**. |
   | **Уровень 1** | Введите **Страна**. |
   | **Уровень 2** | Введите **Город**. |
   | **Уровень 3** | Введите **Здание**. |

   Затем выберите **Создать**.

   ![Поля иерархии с кнопкой "Создать"][34]

1. Вы увидите созданную иерархию:

   ![Информация об иерархии][35]

1. Выберите слева элемент **Экземпляры**. Когда отобразятся экземпляры, щелкните первый из них и выберите действие **Изменить**:

   ![Выбор кнопки "Изменить" для экземпляра][36]

1. Справа отобразится текстовый редактор. Добавьте следующие данные:

   | | |
   | --- | --- |
   | **Тип** | Выберите **Chiller**. |
   | **Описание** | Введите **Экземпляр Chiller-01.1**. |
   | **Иерархии** | Включите **Иерархия расположений**. |
   | **Страна** | Введите **США**. |
   | **Город** | Введите **Сиэтл**. |
   | **Дом** | Введите **Спейс-Нидл**. |

    Затем нажмите кнопку **Сохранить**.

   ![Поля экземпляра с кнопкой "Сохранить"][37]

1. Повторите предыдущий шаг для других датчиков. Используйте следующие поля:

   * Для Chiller 01.2:

     | | |
     | --- | --- |
     | **Тип** | Выберите **Chiller**. |
     | **Описание** | Введите **Экземпляр Chiller-01.2**. |
     | **Иерархии** | Включите **Иерархия расположений**. |
     | **Страна** | Введите **США**. |
     | **Город** | Введите **Сиэтл**. |
     | **Здание** | Введите **Тихоокеанский научный центр**. |

   * Для Chiller 01.3:

     | | |
     | --- | --- |
     | **Тип** | Выберите **Chiller**. |
     | **Описание** | Введите **Экземпляр Chiller-01.1**. |
     | **Иерархии** | Включите **Иерархия расположений**. |
     | **Страна** | Введите **США**. |
     | **Город** | Введите **Нью-Йорк**. |
     | **Дом** | Введите **Эмпайр-стейт-билдинг**. |

1. Перейдите на вкладку **Анализ** и обновите страницу. Разверните все уровни иерархии и найдите временные ряды.

   ![Вкладка "Анализ"][38]

1. Чтобы изучить временные ряды за последний час, в поле **Краткое время** выберите значение **Последний час**:

   ![Поле "Краткое время" с выбранным значением "Последний час"][39]

1. Выберите временные ряды в разделе **Тихоокеанский научный центр** и щелкните действие **Показать максимальную влажность**.

   ![Выбранные временные ряды с меню, которое содержит пункт "Показать максимальную влажность"][40]

1. Откроется временной ряд **Максимальная влажность** с интервалом в 1 минуту. Щелкните левой кнопкой мыши нужную область, чтобы настроить фильтр по диапазону. Затем щелкните ее правой кнопкой мыши и выберите **Масштаб**, чтобы перейти к анализу событий в этом промежутке времени:

   ![Выбранный диапазон с командой масштабирования в контекстном меню][41]

1. Вы также можете выбрать регион и щелкнуть его правой кнопкой мыши, чтобы просмотреть сведения о событиях:

   ![Подробный список событий][44]

## <a name="next-steps"></a>Дополнительная информация

Из этого руководства вы узнали, как выполнить следующие задачи:  

* Создание и использование акселератора имитации устройства.
* Создание среды "Аналитика временных рядов Azure" с оплатой по мере использования (предварительная версия).
* Подключение среды "Аналитика временных рядов Azure" (предварительная версия) к концентратору событий в Центрах событий Azure.
* Запуск примера акселератора решений для потоковой передачи данных в среду службы "Аналитика временных рядов Azure" (предварительная версия).
* Выполнение базового анализа данных.
* Определение типа модели временных рядов и иерархии, связывание их с экземплярами.

Теперь, когда вы знаете, как создать собственную среду "Аналитика временных рядов Azure" (предварительная версия), узнайте больше об основных понятиях в службе "Аналитика временных рядов Azure".

Прочтите статью о конфигурации хранилища службы "Аналитика временных рядов Azure":

> [!div class="nextstepaction"]
> [Data storage and ingress in Azure Time Series Insights Preview](./time-series-insights-update-storage-ingress.md) (Хранилище данных и входящий трафик в службе "Аналитика временных рядов Azure (предварительная версия)")

Дополнительные сведения о моделях временных рядов:

> [!div class="nextstepaction"]
> [Time Series Model](./time-series-insights-update-tsm.md) (Моделирование временных рядов)

<!-- Images -->
[1]: media/v2-update-provision/device-one-accelerator.png
[2]: media/v2-update-provision/device-two-create.png
[3]: media/v2-update-provision/device-three-launch.png
[4]: media/v2-update-provision/device-four-iot-sim-page.png
[5]: media/v2-update-provision/device-five-params.png
[6]: media/v2-update-provision/device-seven-dashboard.png
[7]: media/v2-update-provision/device-six-listings.png
[8]: media/v2-update-provision/device-eight-portal.png

[9]: media/v2-update-provision/payg-one-azure.png
[10]: media/v2-update-provision/payg-two-create.png
[11]: media/v2-update-provision/payg-three-new.png
[12]: media/v2-update-provision/payg-four-add.png
[13]: media/v2-update-provision/payg-five-event-source.png
[14]: media/v2-update-provision/payg-six-review.png
[15]: media/v2-update-provision/payg-seven-deploy.png
[16]: media/v2-update-provision/payg-eight-environment.png
[17]: media/v2-update-provision/payg-nine-data-access.png
[18]: media/v2-update-provision/payg-ten-verify.png

[19]: media/v2-update-provision/analyze-one-portal.png
[20]: media/v2-update-provision/analyze-two-unparented.png
[21]: media/v2-update-provision/analyze-three-show-pressure.png
[22]: media/v2-update-provision/analyze-four-chart.png
[23]: media/v2-update-provision/analyze-five-chart.png
[24]: media/v2-update-provision/analyze-six-from.png
[25]: media/v2-update-provision/analyze-seven-change-from.png
[26]: media/v2-update-provision/analyze-eight-all.png

[27]: media/v2-update-provision/define-one-model.png
[28]: media/v2-update-provision/define-two-add.png
[29]: media/v2-update-provision/define-three-variable.png
[30]: media/v2-update-provision/define-four-avg.png
[31]: media/v2-update-provision/define-five-humidity.png
[32]: media/v2-update-provision/define-six-type.png
[33]: media/v2-update-provision/define-seven-hierarchy.png
[34]: media/v2-update-provision/define-eight-add-hierarchy.png
[35]: media/v2-update-provision/define-nine-created.png
[36]: media/v2-update-provision/define-ten-edit.png
[37]: media/v2-update-provision/define-eleven-chiller.png
[38]: media/v2-update-provision/define-twelve.png
[39]: media/v2-update-provision/define-thirteen-explore.png
[40]: media/v2-update-provision/define-fourteen-show-max.png
[41]: media/v2-update-provision/define-fifteen-filter.png
[42]: media/v2-update-provision/define-sixteen.png
[43]: media/v2-update-provision/define-seventeen.png
[44]: media/v2-update-provision/define-eighteen.png