---
title: Настройка предварительной версии Аналитики временных рядов Azure. Руководство по настройке среды "Аналитика временных рядов Azure" (предварительная версия) | Документация Майкрософт
description: Узнайте, как настроить среду "Аналитика временных рядов Azure" (предварительная версия).
author: ashannon7
ms.author: anshan
ms.workload: big-data
manager: cshankar
ms.service: time-series-insights
services: time-series-insights
ms.topic: tutorial
ms.date: 12/12/2018
ms.custom: seodec18
ms.openlocfilehash: 9ad957d6378b1279f1ca51939eb4802b0ce7d78f
ms.sourcegitcommit: e37fa6e4eb6dbf8d60178c877d135a63ac449076
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/13/2018
ms.locfileid: "53322624"
---
# <a name="tutorial-set-up-an-azure-time-series-insights-preview-environment"></a>Руководство. Настройка среды "Аналитика временных рядов Azure" (предварительная версия)

Это руководство поможет вам выполнить процесс создания среды службы "Аналитика временных рядов Azure" с оплатой по мере использования (предварительная версия). Из этого руководства вы узнаете, как выполнять следующие задачи:

* Создать среду "Аналитика временных рядов Azure" (предварительная версия).
* Подключить среду "Аналитика временных рядов Azure" (предварительная версия) к концентратору событий в Центрах событий Azure.
* Запустить имитацию ветроэлектростанции для потоковой передачи данных в среду "Аналитика временных рядов Azure" (предварительная версия).
* Выполнять базовый анализ данных.
* Определять тип модели временных рядов и иерархию и связывать их с экземплярами.

# <a name="create-a-device-simulation"></a>Создание имитации устройств

В этом разделе вы создадите три виртуальных устройства, которые будут отправлять данные в Центр Интернета вещей.

1. Перейдите на [домашнюю страницу акселераторов решений Интернета вещей Azure](https://www.azureiotsolutions.com/Accelerators). На домашней странице акселераторов решений Azure IoT отображается несколько предварительно созданных примеров. Выполните вход с помощью учетной записи Azure. Затем выберите **Имитация устройства**.

   ![Домашняя страница акселераторов решений Интернета вещей Azure][1]

   Наконец, выберите **Попробовать**.

1. Введите необходимые параметры на странице **Create Device Simulation** (Создание решения для имитации устройств).

   | Параметр | ОПИСАНИЕ |
   | --- | --- |
   | Имя решения |    Уникальное значение, которое используется при создании новой группы ресурсов. Перечисленные ресурсы Azure | создаются и присваиваются группе ресурсов. |
   | Подписка | Укажите ту же подписку, которую вы применяли в предыдущей среде TSI |
   | Регион |   Укажите тот же регион, который вы применяли для создания TSI. |
   | Развертывание дополнительных ресурсов Azure    | Сохраните флажок "Центр Интернета вещей", чтобы имитированное устройство могло подключаться и передавать данные. |

   После ввода необходимых параметров выберите **Создать решение**. Подождите около 10–15 минут, пока решение развертывается.

   ![Создание решения имитации устройства][2]

1. На **панели мониторинга акселератора решений** нажмите кнопку **Запуск**:

   ![Запуск решения имитации устройства][3]

1. Вы будете перенаправлены на страницу **имитации устройства Microsoft Azure IoT**. Нажмите кнопку **+ New simulation** (+ Новая имитация), которая расположена в правом верхнем углу экрана.

   ![Страница имитации Azure IoT][4]

1.  Заполните обязательные параметры, как показано ниже:

    ![Параметры для заполнения][5]

    |||
    | --- | --- |
    | **Имя** | Введите уникальное имя для симулятора |
    | **Описание** | Введите определение |
    | **Длительность имитации** | Установите значение `Run indefinitely` |
    | **Модель устройства** | **Имя**. Введите `Chiller` **Сумма**: Введите `3` |
    | **Целевой Центр Интернета вещей** | Установите значение `Use pre-provisioned IoT Hub` |

    После заполнения обязательных параметров щелкните **Запустить имитацию**.

1. На панели мониторинга устройства найдите **Активные устройства** и **Messages per second** (Сообщений в секунду).

    ![Панель мониторинга имитации Центра Интернета вещей Azure][6]

## <a name="list-device-simulation-properties"></a>Свойства списка имитации устройства

Перед созданием среды "Аналитика временных рядов Azure" вам понадобятся имена Центра Интернета вещей, подписки и группы ресурсов.

1. Перейдите на **панель мониторинга акселератора решений** и войдите с помощью той же учетной записи Azure. Найдите имитацию устройства, созданную на предыдущих шагах.

1. Выберите имитатор устройства и нажмите кнопку **Запуск**. Щелкните ссылку **портала управления Azure**, которая отображается в области справа.

    ![Список имитаций][7]

1. Запишите имена Центра Интернета вещей, подписки и группы ресурсов.

    ![Портал Azure][8]

## <a name="create-a-time-series-insights-preview-payg-environment"></a>Создание среды "Аналитика временных рядов" с оплатой по мере использования (предварительная версия)

В этом разделе описывается создание среды "Аналитика временных рядов Azure" (предварительная версия) с помощью [портала Azure](https://portal.azure.com/).

1. Войдите на портал Azure, используя учетную запись подписки.

1. Выберите **Создать ресурс**.

1. Выберите категорию **Интернет вещей**, а затем щелкните **Аналитика временных рядов**.

   ![Выберите "Создать ресурс", а затем — "Интернет вещей" и выберите "Аналитика временных рядов"][9]

1. Заполните поля на странице следующим образом:

   | | |
   | --- | ---|
   | **Имя среды** | Выберите уникальное имя для среды службы "Аналитика временных рядов Azure" (предварительная версия). |
   | **Подписка** | Введите подписку, в которой вы хотите создать среду "Аналитика временных рядов Azure" (предварительная версия). Рекомендуется использовать ту же подписку, что и остальные ресурсы Интернета вещей, созданные имитатором устройств. |
   | **Группа ресурсов** | Группа ресурсов Azure служит контейнером для ресурсов Azure. Выберите имеющуюся группу ресурсов для ресурсов среды "Аналитика временных рядов Azure" (предварительная версия) или создайте новую. Рекомендуется использовать ту же группу ресурсов, что и остальные ресурсы Интернета вещей, созданные имитатором устройств. |
   | **Местоположение.** | Выберите регион для центра обработки данных для среды "Аналитика временных рядов Azure" (предварительная версия). Чтобы избежать лишних затрат на передачу данных и ненужных сетевых задержек, лучше всего хранить среду "Аналитика временных рядов Azure" (предварительная версия) в одном регионе с остальными ресурсами Интернета вещей. |
   | **Уровень** |  Выберите `PAYG`, что расшифровывается как оплата по мере использования. Это номер SKU для продукта "Аналитика временных рядов Azure" (предварительная версия). |
   | **Идентификатор свойства** | Однозначно идентифицирует ваши временные ряды. Обратите внимание, что это поле является неизменным и его нельзя будет изменить позже. Для руководства задайте полю значение `iothub-connection-device-id`. Дополнительные сведения о выборе идентификатора временных рядов см. в [этой статье](./time-series-insights-update-how-to-id.md). |
   | **Имя учетной записи хранения** | Введите глобально уникальное имя для новой учетной записи хранения, которая будет создана. |

   После заполнения указанных выше полей щелкните **Далее. Источник событий**.

   ![Щелкните "Далее. Источник событий][10]

1. Заполните поля на странице следующим образом:

   | | |
   | --- | --- |
   | **Создание источника событий** | Введите `Yes`|
   | **Имя** | Здесь нужно указать уникальное значение, которое будет обозначать этот источник событий.|
   | **Тип источника** | Введите `IoT Hub` |
   | **Select a Hub?** (Выбрать концентратор?) | Введите `Select Existing` |
   | **Подписка** | Введите подписку, которая использовалась для имитации устройств. |
   | **Имя Центра Интернета вещей** | Введите имя центра Интернета вещей, которое использовалось для имитации устройств. |
   | **IoT Hub access policy** (Политика доступа Центра Интернета вещей) | Введите `iothubowner` |
   | **Группа потребителей Центра Интернета вещей** | Вам необходима уникальная группа потребителей для среды службы "Аналитика временных рядов Azure" (предварительная версия). |
   | **Timestamp** | Это поле используется для идентификации свойства метки времени во входящих данных телеметрии. Не заполняйте поле в рамках этого руководства. Этот симулятор использует входящую метку времени для Центра Интернета вещей, к которому по умолчанию применяется "Аналитика временных рядов".|

   Чтобы создать уникальную группу потребителей, сделайте следующее:

   1. Нажмите кнопку **Создать** рядом с полем **IoT Hub consumer group** (Группа потребителей Центра Интернета вещей):

      ![Щелкните "Далее. Источник событий][11]

   1. Введите уникальное имя группы потребителей и щелкните **Добавить**:

      ![Нажмите "Добавить"][12]

   После заполнения указанных выше полей щелкните **Review + create** (Просмотреть и создать).

      ![Просмотр и создание][13]

1. Просмотрите все поля на странице просмотра и нажмите кнопку **Создать**.

   ![Создание][14]

1. Вы можете увидеть состояние развертывания.

   ![Развертывание завершено][15]

1. Если у вас есть клиент, вы должны получить доступ к среде временных рядов. Чтобы убедиться в том, что у вас есть доступ:

   * Перейдите к только что созданной среде "Аналитика временных рядов Azure" (предварительная версия). Это можно сделать, выполнив поиск группы ресурсов. Затем щелкните свою среду службы "Аналитика временных рядов":

      ![Развертывание завершено][16]

   * На странице "Аналитика временных рядов Azure" (предварительная версия) перейдите к **политикам доступа к данным**.

     ![политики доступа к данным.][17]

   * Убедитесь, что ваши учетные данные перечислены.

     ![Проверка учетных данных][18]

   Если учетные данные не указаны, необходимо дать пользователю разрешение на доступ к среде. Ознакомьтесь со статьей [Предоставление доступа к данным для среды Time Series Insights с помощью портала Azure](./time-series-insights-data-access.md), чтобы узнать подробнее об установке разрешений.

## <a name="analyze-data-in-your-environment"></a>Анализ данных в вашей среде

В этом разделе будет выполнена базовая аналитика ваших данных временных рядов с использованием [обозревателя службы "Аналитика временных рядов Azure" (предварительная версия)](./time-series-insights-update-explorer.md).

1. Перейдите в обозреватель службы "Аналитика временных рядов Azure" (предварительная версия), щелкнув URL-адрес на странице ресурсов на [портале Azure](https://portal.azure.com/).

   ![URL-адрес обозревателя "Аналитика временных рядов"][19]

1. В обозревателе выберите узлы **Unparented Instances** (Экземпляры без родителей), чтобы просмотреть все экземпляры "Аналитики временных рядов Azure" в среде.

   ![Список экземпляров без родительского элемента][20]

1. В показанных временных рядах щелкните первый экземпляр. Затем щелкните **Show Avg pressure** (Показать среднее давление).

   ![Показ среднего давления][21]

1. Справа откроется диаграмма временных рядов:

   ![Диаграмма временных рядов][22]

1. Повторите **Шаг 3** в двух других временных рядах. Затем можно просмотреть все временные ряды, как показано ниже:

   ![Все диаграммы временных рядов][23]

1. Измените **диапазон времени**, чтобы увидеть тенденции временных рядов за последний час. Выберите поле параметра **Из**, как показано ниже:

   ![Выберите параметр "Из"][24]

1. Измените время в пределах поля параметра **Из** для отображения событий за последний час:

   ![Выберите параметр "Из"][25]

1. Затем можно сравнить нагрузку для всех трех устройств за последний час:

   ![Выберите параметр "Из"][26]

## <a name="define-and-apply-a-model"></a>Определение и применение модели

В этом разделе вы научитесь применять модель для структурирования своих данных. Чтобы завершить модель, определите типы, иерархии и экземпляры. Дополнительные сведения о моделировании данных см. в статье [о моделях временных рядов](./time-series-insights-update-tsm.md).

1. В обозревателе выберите вкладку **Модель**:

   ![Выберите вкладку "Модель"][27]

1. Далее щелкните **+ Добавить**, чтобы добавить тип. Справа откроется редактор типа.

   ![Нажмите "Добавить"][28]

1. Затем определите три переменные: давление, температура и влажность в типе. Заполните следующие поля:

   | | |
   | --- | ---|
   | **Имя** | Введите `Chiller` |
   | **Описание** | Введите `This is a type definition of Chiller` |

   * Теперь определите давление с помощью трех переменных:

      | | |
      | --- | ---|
      | **Имя** | Введите `Avg Pressure` |
      | **Значение** | Выберите **pressure (Double)** (давление (двойное)). Обратите внимание, что заполнение поля может занять несколько минут после того, как "Аналитика временных рядов Azure" начнет получать события |
      | **Операция агрегирования** | Выберите `AVG` |

      ![Добавление переменной][29]

      Щелкните **+Variable** (+Переменная) для добавления следующей переменной.

   * Теперь определите температуру:

      | | |
      | --- | ---|
      | **Имя** | Введите `Avg Temperature` |
      | **Значение** | Выберите **temperature (Double)** (температура (двойная)). Обратите внимание, что заполнение поля может занять несколько минут после того, как "Аналитика временных рядов Azure" начнет получать события |
      | **Операция агрегирования** | Выберите `AVG`|

      ![Определение температуры][30]

   * Теперь определите влажность:

      | | |
      | --- | ---|
      | **Имя** | Введите `Max Humidity` |
      | **Значение** | Выберите **humidity (Double)** (влажность (двойная)). Обратите внимание, что заполнение поля может занять несколько минут после того, как "Аналитика временных рядов Azure" начнет получать события |
      | **Операция агрегирования** | Выберите `MAX`|

      ![Определение температуры][31]

   После определения переменных щелкните **Создать**.

1. Вы увидите добавленный тип:

   ![Просмотр добавленного типа][32]

1. Следующим шагом является добавление иерархии. Чтобы создать иерархию, в разделе **Иерархии** выберите **+ Добавить**:

   ![Добавление иерархии][33]

1. Определите иерархию. Заполните поля следующим образом:

   | | |
   | --- | ---|
   | **Имя** | Введите `Location Hierarchy` |
   | **Уровень 1** | Введите `Country` |
   | **Уровень 2** | Введите `City` |
   | **Уровень 3** | Введите `Building` |

   Заполнив указанные выше поля, щелкните **Создать**.

   ![Определение иерархии][34]

1. Вы увидите созданную иерархию:

   ![Просмотр иерархии][35]

1. После определения иерархии щелкните **Экземпляры** слева. После того как появятся экземпляры, щелкните первый экземпляр и выберите **Изменить**:

   ![Изменение экземпляра][36]

1. Справа отобразится текстовый редактор. Добавьте следующие поля:

   | | |
   | --- | --- |
   | **Тип** | Выберите `Chiller` |
   | **Описание** | Введите `Instance for Chiller-01.1` |
   | **Иерархии** | Включите `Location Hierarchy` |
   | **Страна** | Введите `USA` |
   | **Город** | Введите `Seattle` |
   | **Дом** | Введите `Space Needle` |

    Заполнив указанные выше поля, щелкните **Сохранить**.

   ![Сохранение Chiller][37]

1. Повторите предыдущий шаг для других датчиков. Используйте следующие поля:

   * Для Chiller 01.2:

     | | |
     | --- | --- |
     | **Тип** | Выберите `Chiller` |
     | **Описание** | Введите `Instance for Chiller-01.2` |
     | **Иерархии** | Включите `Location Hierarchy` |
     | **Страна** | Введите `USA` |
     | **Город** | Введите `Seattle` |
     | **Дом** | Введите `Pacific Science Center` |

   * Для Chiller 01.3:

     | | |
     | --- | --- |
     | **Тип** | Выберите `Chiller` |
     | **Описание** | Введите `Instance for Chiller-01.1` |
     | **Иерархии** | Включите `Location Hierarchy` |
     | **Страна** | Введите `USA` |
     | **Город** | Введите `New York` |
     | **Дом** | Введите `Empire State Building` |

1. Перейдите на вкладку **Анализ** и обновите страницу. Разверните все уровни иерархии для поиска временных рядов.

   ![Просмотр вкладки "Анализ"][38]

1. Для просмотра временных рядов за последний час измените значение в поле **Краткое время** на последний час:

   ![Просмотр последнего часа][39]

1. Щелкните временные ряды в разделе **Pacific Science Center** (Тихоокеанский научный центр) и выберите **Show Max Humidity** (Показать максимальную влажность).

   ![Отображение максимальной влажности][40]

1. Откроется временной ряд для **максимальной влажности** с интервалом размером в 1 минуту. Щелкните область левой кнопкой мыши, чтобы отфильтровать диапазон. Затем щелкните правой кнопкой мыши и увеличьте масштаб, чтобы проанализировать события в промежутке времени:

   ![Просмотр, фильтрация и масштаб][41]

   ![Просмотр, фильтрация и масштаб][42]

1. Вы также можете щелкнуть левой кнопкой мыши регион, а затем правой кнопкой мыши, чтобы просмотреть сведения о событии:

   ![Просмотр, фильтрация и масштаб][43]

   ![Просмотр, фильтрация и масштаб][44]

## <a name="next-steps"></a>Дополнительная информация

Из этого руководства вы узнали, как выполнить следующие задачи:  

* Создание и использование акселератора имитации устройства.
* Создание среды "Аналитика временных рядов Azure" с оплатой по мере использования (предварительная версия).
* Подключение среды "Аналитика временных рядов Azure" (предварительная версия) к концентратору событий в Центрах событий Azure.
* Запуск имитации ветроэлектростанции для потоковой передачи данных в среду "Аналитика временных рядов Azure" (предварительная версия).
* Выполнение базового анализа данных.
* Определение типа модели временных рядов и иерархии, связывание их с экземплярами.

Теперь, когда вы знаете, как создать собственную среду "Аналитика временных рядов Azure" (предварительная версия), узнайте больше об основных понятиях в службе "Аналитика временных рядов Azure".

Прочтите о конфигурации хранилища "Аналитика временных рядов Azure":

> [!div class="nextstepaction"]
> [Data storage and ingress in Azure Time Series Insights Preview](./time-series-insights-update-storage-ingress.md) (Хранилище данных и входящий трафик в службу "Аналитика временных рядов Azure" (предварительная версия))

Дополнительные сведения о моделях временных рядов:

> [!div class="nextstepaction"]
> [Time Series Model](./time-series-insights-update-tsm.md) (Моделирование временных рядов)

<!-- Images -->
[1]: media/v2-update-provision/device-one-accelerator.png
[2]: media/v2-update-provision/device-two-create.png
[3]: media/v2-update-provision/device-three-launch.png
[4]: media/v2-update-provision/device-four-iot-sim-page.png
[5]: media/v2-update-provision/device-five-params.png
[6]: media/v2-update-provision/device-six-listings.png
[7]: media/v2-update-provision/device-seven-dashboard.png
[8]: media/v2-update-provision/device-eight-portal.png

[9]: media/v2-update-provision/payg-one-azure.png
[10]: media/v2-update-provision/payg-two-create.png
[11]: media/v2-update-provision/payg-three-new.png
[12]: media/v2-update-provision/payg-four-add.png
[13]: media/v2-update-provision/payg-five-event-source.png
[14]: media/v2-update-provision/payg-six-review.png
[15]: media/v2-update-provision/payg-seven-deploy.png
[16]: media/v2-update-provision/payg-eight-environment.png
[17]: media/v2-update-provision/payg-nine-data-access.png
[18]: media/v2-update-provision/payg-ten-verify.png

[19]: media/v2-update-provision/analyze-one-portal.png
[20]: media/v2-update-provision/analyze-two-unparented.png
[21]: media/v2-update-provision/analyze-three-show-pressure.png
[22]: media/v2-update-provision/analyze-four-chart.png
[23]: media/v2-update-provision/analyze-five-chart.png
[24]: media/v2-update-provision/analyze-six-from.png
[25]: media/v2-update-provision/analyze-seven-change-from.png
[26]: media/v2-update-provision/analyze-eight-all.png

[27]: media/v2-update-provision/define-one-model.png
[28]: media/v2-update-provision/define-two-add.png
[29]: media/v2-update-provision/define-three-variable.png
[30]: media/v2-update-provision/define-four-avg.png
[31]: media/v2-update-provision/define-five-humidity.png
[32]: media/v2-update-provision/define-six-type.png
[33]: media/v2-update-provision/define-seven-hierarchy.png
[34]: media/v2-update-provision/define-eight-add-hierarchy.png
[35]: media/v2-update-provision/define-nine-created.png
[36]: media/v2-update-provision/define-ten-edit.png
[37]: media/v2-update-provision/define-eleven-chiller.png
[38]: media/v2-update-provision/define-twelve.png
[39]: media/v2-update-provision/define-thirteen-explore.png
[40]: media/v2-update-provision/define-fourteen-show-max.png
[41]: media/v2-update-provision/define-fifteen-filter.png
[42]: media/v2-update-provision/define-sixteen.png
[43]: media/v2-update-provision/define-seventeen.png
[44]: media/v2-update-provision/define-eighteen.png