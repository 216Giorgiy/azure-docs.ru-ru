---
title: "Мониторинг приложений и ресурсов в Azure | Документация Майкрософт"
description: "Обзор различных функциональных возможностей и служб Майкрософт, которые являются частью стратегии мониторинга ваших служб и приложений в Azure."
author: robb
manager: carmonm
editor: 
services: monitoring-and-diagnostics
documentationcenter: monitoring-and-diagnostics
ms.assetid: 1b962c74-8d36-4778-b816-a893f738f92d
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/30/2018
ms.author: robb,bwren
ms.openlocfilehash: 3ab7d2d5c3b95d215f3ee9eb9346e8a7895e734c
ms.sourcegitcommit: eeb5daebf10564ec110a4e83874db0fb9f9f8061
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/03/2018
---
# <a name="monitoring-azure-applications-and-resources"></a>Мониторинг приложений и ресурсов в Azure

Мониторинг — это процесс сбора и анализа данных для определения производительности, работоспособности и доступности вашего бизнес-приложения и ресурсов, от которых оно зависит. Эффективная стратегия мониторинга предоставляет возможность подробной проверки работы различных компонентов вашего приложения и продления времени непрерывной работы за счет предупреждений о важных проблемах, чтобы вы могли решить их до того, как они приведут к сбоям.

Azure предлагает несколько служб, которые по отдельности выполняют определенную роль или задачу в пространстве мониторинга и вместе предоставляют комплексное решение для сбора, анализа и использования телеметрии из вашего приложения и базовых ресурсов Azure, которые их поддерживают.  Они также могут выполнять мониторинг критически важных локальных ресурсов и предоставлять гибридную среду мониторинга.   Понимание имеющихся инструментов и данных является первым шагом в разработке комплексной стратегии мониторинга для вашего приложения. 

На следующей диаграмме приведено концептуальное представление различных компонентов, которые совместно выполняют мониторинг ресурсов Azure.  Каждый из них описан в следующих разделах со ссылками на подробные технические сведения.

![Обзор мониторинга](media/monitoring-overview/overview.png)

## <a name="basic-monitoring"></a>Базовый мониторинг
Базовый мониторинг обеспечивает крайне необходимый мониторинг ресурсов Azure.  Эти службы требуют минимальной конфигурации и собирают основную телеметрию, используемую службами мониторинга уровня "Премиум".    

### <a name="azure-monitor"></a>Azure Monitor
[Azure Monitor](../monitoring-and-diagnostics/monitoring-overview-azure-monitor.md) обеспечивает базовый мониторинг служб Azure, позволяя собирать [метрики](../monitoring-and-diagnostics/monitoring-overview-metrics.md), [журналы действий](../monitoring-and-diagnostics/monitoring-overview-activity-logs.md) и [журналы диагностики](../monitoring-and-diagnostics/monitoring-overview-of-diagnostic-logs.md).  Например, журнал действий сообщает о создании ресурсов или их изменении.  Доступны метрики, которые предоставляют статистику производительности разных ресурсов, а также операционной системы внутри виртуальной машины.  Вы можете просмотреть эти данные с помощью одного из обозревателей на портале Azure, отправить его в Log Analytics для анализа тенденций и подробного анализа или создать правила оповещения, которые помогут вам узнать о важных проблемах заранее.

### <a name="service-health"></a>Работоспособность службы
Работоспособность вашего приложения зависит от используемых служб Azure.  Служба [Работоспособность служб Azure](../service-health/service-health-overview.md) идентифицирует любые проблемы со службами Azure, которые могут повлиять на приложение, а также поможет вам запланировать обслуживание.

### <a name="azure-advisor"></a>Azure Advisor
[Помощник по Azure](../advisor/advisor-overview.md) постоянно контролирует вашу конфигурацию ресурсов и телеметрию использования, чтобы предоставить вам персонализированные рекомендации.  Следующие рекомендации помогут вам повысить производительность, безопасность и доступность ресурсов, поддерживающих ваши приложения.


## <a name="premium-monitoring-services"></a>Службы мониторинга уровня "Премиум"
Следующие службы Azure предоставляют широкие возможности для сбора и анализа данных мониторинга.  В их основе лежит базовый мониторинг. Эти службы используют общие функциональные возможности Azure и обеспечивают мощную аналитику на базе собранных данных, чтобы вы могли управлять своими приложениями и инфраструктурой.  Они представляют данные в контексте конкретных сценариев, ориентированных на разные аудитории.

### <a name="application-insights"></a>Application Insights
[Application Insights](http://azure.microsoft.com/documentation/services/application-insights) позволяет контролировать доступность, производительность и использование вашего приложения независимо от того, размещено ли оно в облачной или локальной среде.  Инструментируя приложение для работы с Application Insights, вы получите детальную аналитику, которая позволит быстро идентифицировать и диагностировать ошибки, не дожидаясь, пока о них сообщит пользователь. Собранные данные позволят сделать осознанный выбор в отношении обслуживания и улучшений вашего приложения.  В дополнение к обширным инструментам для взаимодействия с собираемыми сведениями Application Insights хранит свои данные в общем репозитории, чтобы использовать общие функции, такие как оповещения, панели мониторинга и детальный анализ с помощью языка запросов Log Analytics.

### <a name="log-analytics"></a>Служба Log Analytics
[Log Analytics](http://azure.microsoft.com/documentation/services/log-analytics) играет центральную роль в мониторинге Azure, собирая данные из разных ресурсов в один репозиторий, где их можно проанализировать с помощью мощного языка запросов.  Application Insights и центр безопасности Azure хранят свои данные в хранилище данных Log Analytics и используют аналитический модуль.  В сочетании с данными, собранными из Azure Monitor, решениями для управления и агентами, установленными на виртуальных машинах в локальной среде или в облаке, это позволяет составить полную картину всей среды. 


### <a name="service-map"></a>Схема услуги
Решение [Сопоставление служб](../operations-management-suite/operations-management-suite-service-map.md) позволяет получить представление о вашей среде IaaS, анализируя виртуальные машины с различными процессами и зависимостями от других компьютеров и внешних процессов.  Оно объединяет события, данные о производительности и решения для управления в Log Analytics, чтобы вы могли просматривать эти данные в контексте каждого компьютера и его связи с остальной средой.  "Сопоставление служб" похоже на [схему приложений в Application Insights](../application-insights/app-insights-app-map.md), но это решение фокусируется на компонентах инфраструктуры, которые поддерживают ваши приложения.

### <a name="network-watcher"></a>Наблюдатель за сетями
[Наблюдатель за сетями](../network-watcher/network-watcher-monitoring-overview.md) обеспечивает мониторинг на основе сценариев и диагностику различных сетевых сценариев в Azure.  Он хранит данные в метриках и диагностике Azure для дальнейшего анализа и работает с [решениями для управления в Log Analytics](../log-analytics/log-analytics-azure-networking-analytics.md) для комплексного мониторинга ваших сетевых ресурсов.


### <a name="management-solutions"></a>Решения для управления
[Решения по управлению](../log-analytics/log-analytics-add-solutions.md) — это упакованные наборы логики, предоставляющие данные по конкретному приложению или службе.  Они используют Log Analytics для хранения и анализа данных мониторинга, которые они собирают.  Доступны партнерские решения по управлению и решения от корпорации Майкрософт, обеспечивающие мониторинг различных служб Azure и служб сторонних производителей. Примеры решений для мониторинга включают в себя [мониторинг контейнеров](../log-analytics/log-analytics-containers.md), который помогает просматривать узлы контейнеров и управлять ими, и [Azure SQL Analytics](../log-analytics/log-analytics-azure-sql.md), который собирает и визуализирует метрики производительности баз данных SQL Azure.


## <a name="shared-functionality"></a>Общие функции
Следующие средства Azure обеспечивают критически важные функции для служб мониторинга уровня "Премиум".  Они совместно используются несколькими службами, которые позволяют использовать общие функции и конфигурации для нескольких служб.

### <a name="alerts"></a>Оповещения
Решение [Оповещения Azure](../monitoring-and-diagnostics/monitoring-overview-alerts.md) заранее уведомляет вас о критических неполадках и может предпринимать корректирующие действия.  Правила оповещений могут использовать данные из нескольких источников, включая метрики и журналы. Они используют [группы действий](../monitoring-and-diagnostics/monitoring-action-groups.md), которые содержат уникальные наборы получателей и действия в ответ на предупреждение.  В соответствии с требованиями можно настроить выполнение внешних действий после получения оповещения с помощью веб-перехватчиков и интегрироваться с инструментами ITSM.

### <a name="dashboards"></a>Панели мониторинга
[Панели мониторинга Azure](../azure-portal/azure-portal-dashboards.md) позволяют объединять различные виды данных в одну панель на портале Azure для совместного использования с другими пользователями Azure.  Например, вы можете создать панель мониторинга, которая объединяет плитки, показывающие график метрик, таблицу журналов активности, диаграмму использования из Application Insights и результаты поиска по журналам в Log Analytics.

Вы также можете экспортировать данные Log Analytics в [Power BI](https://docs.microsoft.com/power-bi/), чтобы воспользоваться дополнительными визуализациями, а также сделать данные доступными для других пользователей в вашей организации и за ее пределами.

### <a name="metrics-explorer"></a>Обозреватель метрик
[Метрики](../monitoring-and-diagnostics/monitoring-overview-metrics.md) — это числовые значения, создаваемые ресурсами Azure, которые помогают понять работу и производительность ресурса. Вы можете отправлять показатели в Log Analytics для анализа с данными из других источников.



### <a name="activity-logs"></a>Журналы действий
[Журналы действий](../monitoring-and-diagnostics/monitoring-overview-activity-logs.md) предоставляют данные об операциях с ресурсами Azure.  Сюда входят такие сведения, как изменения конфигурации ресурса, инциденты, связанные с обслуживанием, рекомендации по более эффективному использованию ресурса и данные, связанные с автоматическим масштабированием.  Вы можете просматривать журналы определенного ресурса на его странице на портале Azure или просматривать журналы из нескольких ресурсов в обозревателе журналов действий.  Вы также можете отправлять журналы действий в Log Analytics, чтобы их можно было анализировать вместе с данными, собранными с помощью решений по управлению, агентов на виртуальных машинах и других источников.


## <a name="example-scenarios"></a>Примеры сценариев
Ниже приведены подробные примеры, которые иллюстрируют, как использовать различные средства мониторинга в Azure для разных сценариев.

### <a name="monitoring-a-web-application"></a>Мониторинг веб-приложения
Рассмотрим веб-приложение, развернутое в Azure, используя службы приложений, службу хранилища Azure и базу данных SQL.  Получите доступ к [метрикам](../monitoring-and-diagnostics/monitoring-overview-metrics.md) и [журналам действий](../monitoring-and-diagnostics/monitoring-overview-activity-logs.md) для каждого из этих отдельных ресурсов на их страницах на портале Azure.  В них будут содержаться критические сведения, такие ​​как количество запросов к приложению и среднее время запроса, а также определение любых изменений конфигурации.

Затем перейдите к монитору на портале, чтобы просмотреть метрики и журналы разных ресурсов.  Определив стандартные параметры метрик, [создайте правила оповещения](../monitoring-and-diagnostics/monitoring-overview-unified-alerts.md), благодаря которым вы заранее получите уведомление, когда, например, среднее время отклика выйдет за пределы порогового значения.  Чтобы быстро просмотреть ежедневную производительность приложения, создайте панель управления Azure для отображения графиков метрик, представляющих критические ключевые показатели эффективности.

Чтобы выполнить более глубокий мониторинг своего приложения, [настройте его для Application Insights](../application-insights/quick-monitor-portal.md).  Теперь вы можете собирать дополнительные данные, чтобы лучше понять работу и производительность своего приложения.  Application Insights обнаруживает базовые отношения между компонентами вашего приложения, позволяя создать визуальное представление с помощью [схемы приложений](../application-insights/app-insights-app-map.md) в сочетании со [сквозной трассировкой](../application-insights/app-insights-transaction-diagnostics.md) для точной диагностики компонента, зависимости или исключения, в котором возникла проблема.  Создайте [тесты доступности](../application-insights/app-insights-monitor-web-app-availability.md), чтобы заранее протестировать свое приложение из разных регионов.  [Включите профилировщик](../application-insights/enable-profiler-compute.md) для своих разработчиков, чтобы отслеживать запросы и любые исключения до определенной строки кода.  

Чтобы получить дополнительные сведения о службах, используемых в вашем приложении, добавьте [решение SQL Analytics](../log-analytics/log-analytics-azure-sql.md) для сбора дополнительных данных в Log Analytics. Через некоторое время вы решите исследовать основную причину уменьшения производительности сайта ниже порогового значения во время определенных периодов.  Напишите запрос, используя Log Analytics, чтобы сопоставить данные об использовании и производительности, собранные Application Insights, с данными конфигурации и производительности ресурсов Azure.


### <a name="monitoring-virtual-machines"></a>Мониторинг виртуальных машин
В Azure запущены виртуальные машины Windows и Linux.  Используйте Azure Monitor для просмотра [журналов действий](../monitoring-and-diagnostics/monitoring-overview-activity-logs.md) и [метрик уровня узла](../monitoring-and-diagnostics/monitoring-overview-metrics.md), а затем добавьте [расширение системы диагностики Azure](../virtual-machines/linux/tutorial-monitoring.md#install-diagnostics-extension) к виртуальным машинам, чтобы получать метрики из гостевой операционной системы.  Затем создайте [правила оповещения](../monitoring-and-diagnostics/monitoring-overview-unified-alerts.md), которые заранее уведомят вас, когда основные метрики, такие как использование процессора и памяти, превышают пороговые значения.

Чтобы получить подробные сведения о виртуальных машинах, на которых выполняется бизнес-приложение, [создайте рабочую область Log Analytics и включите расширение для виртуальных машин](../log-analytics/log-analytics-quick-collect-azurevm.md) на каждом компьютере.  Настройте [получение различных источников данных](../log-analytics/log-analytics-data-sources.md) для своего приложения и [создайте представления](../log-analytics/log-analytics-view-designer.md), чтобы получать данные о его ежедневной работе и производительности.  Затем [создайте правила оповещения](../monitoring-and-diagnostics/monitoring-overview-unified-alerts.md), благодаря которым вы будете получать уведомления о получении определенных событий ошибки.  Чтобы постоянно контролировать работоспособность установленного агента, добавьте [решение по управлению "Работоспособность агентов"](../operations-management-suite/oms-solution-agenthealth.md).

Чтобы получить более полное представление о приложении, [добавьте агент зависимостей](../operations-management-suite/operations-management-suite-service-map-configure.md) на виртуальные машины, чтобы добавить их в [Сопоставление служб](../operations-management-suite/operations-management-suite-service-map.md).  "Сопоставление служб" обнаруживает критические процессы и идентифицирует подключения между компьютерами и другими службами.  После сообщения о возникновении сбоя используйте "Сопоставление служб" для проведения экспертизы, чтобы определить конкретные компьютеры, которые столкнулись с этой проблемой.  Затем создайте [запрос по данным Log Analytics](../log-analytics/log-analytics-log-search-new.md), чтобы определять проблему в будущем, и создайте правило оповещения, благодаря которому вы будете заранее получать предупреждение об обнаружении условия.



## <a name="next-steps"></a>Дополнительная информация
Кроме того, вы можете узнать больше о:

* [Azure Monitor на видео с конференции Ignite 2016](https://myignite.microsoft.com/videos/4977)
* [Приступая к работе с Azure Monitor](monitoring-get-started.md)
* [Системе диагностики Azure](../azure-diagnostics.md), если вы пытаетесь диагностировать проблемы в работе облачной службы, виртуальной машины, масштабируемого набора виртуальных машин или приложения Service Fabric.
* [Application Insights](https://azure.microsoft.com/documentation/services/application-insights/) , если вы пытаетесь диагностировать проблемы в работе веб-приложения службы приложений.
* [Log Analytics](https://azure.microsoft.com/documentation/services/log-analytics/) для анализа собранных данных мониторинга.
