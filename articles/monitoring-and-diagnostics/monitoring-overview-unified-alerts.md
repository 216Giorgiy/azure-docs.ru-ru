---
title: Функция "Унифицированные оповещения" в Azure Monitor
description: Описание унифицированных оповещений в Azure, с помощью которого можно управлять оповещениями и правилом генерации оповещений в службах Azure.
author: manishsm-msft
services: monitoring
ms.service: azure-monitor
ms.topic: conceptual
ms.date: 06/07/2018
ms.author: mamit
ms.component: alerts
ms.openlocfilehash: ff2650ec7d4c2c1fffd57176327b56199335fa9d
ms.sourcegitcommit: 1b8665f1fff36a13af0cbc4c399c16f62e9884f3
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/11/2018
ms.locfileid: "35264822"
---
# <a name="unified-alerts-in-azure-monitor"></a>Функция "Унифицированные оповещения" в Azure Monitor

## <a name="overview"></a>Обзор

> [!NOTE]
>  Унифицированный интерфейс оповещений, позволяет управлять оповещениями нескольких подписок и представляет состояния оповещений и смарт-групп, которые являются общедоступными для предварительной версии в данный момент. Описание дополнительных возможностей и то как их включить, можно найти в [последнем разделе этой статьи](#enhanced-unified-alerts-experience-public-preview).


В этой статье описываются возможности унифицированного интерфейса оповещений в Azure Monitor. [Предыдущий интерфейс оповещения](monitoring-overview-alerts.md) доступен для параметра **Оповещения (классические)** в меню Azure Monitor. 

## <a name="features-of-the-unified-alert-experience"></a>Функции, которые доступны в унифицированном интерфейсе оповещений

Унифицированный интерфейс обладает рядом преимуществ перед классическим интерфейсом.

-   **Усовершенствованная система оповещений.** Во всех унифицированных оповещениях используются [группы действий]( https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-action-groups). Это именованные группы оповещений и действий, которые можно использовать в нескольких оповещениях. 
- **Унифицированный интерфейс разработки.** Вы можете управлять оповещениями и правилом генерации оповещений для метрик, действий и журналов действий в Azure Monitor, Log Analytics и Application Insights, в одном месте. 
- **Просмотр сработавших оповещений Log Analytics на портале Azure.** Просмотр оповещений Log Analytics вместе с оповещениями из других источников на портале Azure. Ранее для них использовался отдельный портал.
- **Разделение сработавших оповещений и правил генерации оповещений.** Теперь правила генерации оповещений отличаются от самих оповещений. Правило генерации оповещений определяется условием, которое его запускает. Также как и оповещение определяется условием, которое его инициирует.
- **Улучшенный рабочий процесс.** В унифицированном интерфейсе создания оповещений пользователю предлагаются рекомендации по настройке правил генерации оповещений.
 
По сравнению с классическими оповещениями о метриках, в оповещениях на основе метрик присутствуют некоторые улучшения.

-   **Уменьшение задержки.** Оповещения метрик могут выполняться каждую минуту. Классические оповещения о метриках всегда проверялись с частотой в 5 минут. Задержка для оповещений журналов по-прежнему составляет более одной минуты из-за времени, необходимого для приема журналов. 
-   **Поддержка многомерных метрик.** Вы можете создать оповещение по многомерным метрикам, чтобы отслеживать указаний экземпляр метрики.
-   **Дополнительный контроль метрик.** Вы можете определить расширенные правила генерации оповещений, которые поддерживают мониторинг максимальных, минимальных, средних и общих значений метрик.
-   **Объединенный мониторинг нескольких метрик.** Вы сможете выполнять мониторинг нескольких метрик с помощью одного правила. Оповещение активируется, если обе метрики превышают соответствующие пороговые значения для заданного периода времени.
-   **Метрики из журналов** (ограниченная общедоступная предварительная версия). Некоторые данные журналов, поступающие в Log Analytics, теперь можно извлекать и преобразовывать в метрики Azure Monitor и создавать на их основе оповещения, так же как и на основе других метрик. 


## <a name="alert-rules"></a>правила оповещений.
Унифицированный интерфейс оповещений применяет следующие концепции для разделения правил генерации оповещений от оповещений, сохраняя единый процесс создания для разных типов оповещений.

| Элемент | Определение |
|:---|:---|
| Правило генерации оповещений | Определяет состояние, необходимое для создания оповещения. Оно включает в себя _целевой ресурс_, _сигнал_, _критерии_ и _логику_. Правило генерации оповещений активно, только если оно находится в состоянии _Включено_.
| Целевой ресурс | Определяет определенные ресурсы и сигналы, которые доступны для оповещений. Целью может быть любой ресурс Azure.<br>Например, виртуальная машина, учетная запись хранения, масштабирование виртуальных машин, рабочая область Log Analytics, ресурс Application Insights. |
| Сигнал | Источник данных, созданный целевым ресурсом. Поддерживаются такие типы сигналов, как *метрика*, *журнал действий*, *Application Insights* и *журнал*. |
| Критерии | К целевому ресурсу применяется комбинация _сигнала_ и _логики_.<br>Примеры критериев: загрузка ЦП > 70 %, время отклика сервера > 4 мс, число результатов запроса журнала > 100 и т. д. |
| Логика | Определенная пользователем логика, позволяющая проверить, соответствует ли сигнал ожидаемым значениям или диапазону. |
| Действие | Действие, которое будет выполнено при срабатывании оповещения. Для каждого оповещения можно определить несколько действий. Также оповещения поддерживает группы действий.<br>Например, отправка письма на определенный адрес электронной почты или вызов веб-перехватчика по определенному URL-адресу. |
| Состояние монитора | Указывает, было ли устранено условие, создавшее оповещения метрики. Примером правил генерации оповещений метрик является определенная метрика с регулярными интервалами. Если в правиле генерации оповещений соблюдены критерии, то создается новое предупреждение с условием "Срабатывание".  Если при повторной выборке метрик критерии все еще совпадают, ничего не происходит.  А если критерии не совпадают, тогда условие оповещения изменяется на "Разрешено". В следующий раз, когда критерии будут выполнены, будет создано другое оповещение с условием "Срабатывание". |


## <a name="alert-pages"></a>Страницы "Оповещения"
Унифицированные оповещения предоставляют единое место для просмотра всех оповещений Azure и управления ими. В следующих разделах описаны функции для каждой отдельной страницы унифицированного интерфейса.

### <a name="alerts-overview-page"></a>Страница обзора оповещений
**Оповещения.** На странице общих сведений представлен статистические сводки обо всех сработавших оповещениях, а также общее количество настроенных и включенных правил генерации оповещений. При изменении подписок или параметров фильтра обновятся статистические сводки и список сработавших оповещений.

 ![Общие сведения об оповещениях](./media/monitoring-overview-unified-alerts/alerts-preview-overview2.png) 

### <a name="alert-rules-management"></a>Управление правилами генерации оповещений
**.** Это единая страница для управления всеми правилами генерации оповещений в подписках Azure. На этой странице перечислены все правила генерации оповещений, а также на ней доступна фильтрация по целевым ресурсам, группам ресурсов, имени правила или состоянию. Здесь также можно включить и отключить правила генерации оповещений, а также изменить их.

 ![Правила генерации оповещений](./media/monitoring-overview-unified-alerts/alerts-preview-rules.png)


## <a name="creating-an-alert-rule"></a>Создание правила генерации оповещений
Вы можете согласованно создать оповещения для любой службы мониторинга и любого типа сигнала. Все сработавшие оповещения и связанные сведения доступны на одной странице.
 
Создание правила генерации оповещений включает в себя следующие три шага:
1. Выбор _цели_ оповещения.
1. Выбор _сигнала_ для цели из списка доступных сигналов.
1. Указание _логики_, которая будет применяться к информации, полученной от сигнала.
 
При таком упрощенном процессе создания пользователю больше не нужно знать поддерживаемый источник отслеживания или сигналы перед выбором ресурса Azure. Список доступных сигналов автоматически фильтруется на основе выбранного целевого ресурса, а также в нем содержатся сведения о логике правила генерации оповещений.

Дополнительные сведения по созданию правил генерации оповещений см. в статье [Создание и просмотр оповещений, а также управление ими с помощью Azure Monitor](monitor-alerts-unified-usage.md).

Оповещения доступны в нескольких службах мониторинга Azure. Для получения сведений о том как и где использовать каждую из этих служб см. статью [Мониторинг приложений и ресурсов в Azure](./monitoring-overview.md). В следующей таблице представлен список типов правил генерации оповещений, которые доступны в Azure, и описывается, какие функции в настоящее время поддерживаются унифицированным интерфейсом оповещений.

| **Источник мониторинга** | **Тип сигнала**  | **Описание** | 
|-------------|----------------|-------------|
| Azure Monitor | Метрика  | Эти оповещения метрик, также именуемые [оповещениями метрик почти в реальном времени](monitoring-near-real-time-metric-alerts.md), поддерживают оценку условий метрик с частотой в 1 минуту и позволяют создавать правила на основе нескольких метрик и измерений. Список поддерживаемых типов ресурсов доступен в разделе [Поддерживаемые метрики и измерения](monitoring-near-real-time-metric-alerts.md#metrics-and-dimensions-supported).<br>[Классические оповещения метрик](monitoring-overview-alerts.md) не поддерживаются в новом интерфейсе оповещений. Вы найдете их в разделе "Оповещения (классические)" на портале Azure. Классические оповещения поддерживают несколько типов метрик, которые еще не поддерживаются новыми оповещениями. Полный список поддерживаемых метрик см. в статье [Метрики, поддерживаемые Azure Monitor](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-supported-metrics). |
| Log Analytics | Журналы  | Получают уведомления или запускают выполнение автоматизированных действий, когда запрос поиска по журналам отвечает соответствующим критериям. Оповещения в Log Analytics [копируются в новый интерфейс](monitoring-alerts-extend.md). Доступна [предварительная версия *журналов Log Analytics в качестве метрик*](monitoring-alerts-extend-tool.md). Эта предварительная версия позволяет принимать журналы некоторых типов и преобразовывать их в метрики, которые затем можно использовать для оповещений с помощью нового интерфейса. Эта предварительная версия удобна в том случае, если помимо метрик Azure Monitor вам нужно получать журналы не из Azure. |
| Журналы действий | Журнал действий | Содержит записи всех действий создания, обновления и удаления, выполненных с помощью выбранного целевого объекта. |
| Работоспособность службы | Журнал действий  | Не поддерживаются в унифицированных оповещениях. Ознакомьтесь с разделом [Создание оповещений журнала действий для уведомлений службы](monitoring-activity-log-alerts-on-service-notifications.md).  |
| Application Insights | Журналы  | Содержит журналы с данными производительности приложения. С помощью аналитического запроса можно определить условия для выполнения действий на основе данных приложения. |
| Application Insights | Метрика | Не поддерживаются в унифицированных оповещениях. См. [Metric alerts].(../application-insights/app-insights-alerts.md) |
| Application Insights | Веб-тесты доступности | Не поддерживаются в унифицированных оповещениях.  Ознакомьтесь с разделом [Наблюдение за доступностью и скоростью реагирования веб-сайта](../application-insights/app-insights-monitor-web-app-availability.md). Доступны для любого веб-сайта, инструментированного для отправки данных в Application Insights. Получение уведомления, когда доступность или скорость реагирования веб-сайта опускается ниже ожидаемого значения. |

## <a name="enhanced-unified-alerts-public-preview"></a>Расширенные унифицированные оповещения (общедоступная предварительная версия)
> [!NOTE]
>  Сведения о функциональности вскоре будут добавлены в текущий раздел. Они могут не отображаться в вашей версии на портале. 

Расширенный интерфейс унифицированных оповещений был выпущен в общедоступной предварительной версии для Azure Monitor 1 июня 2018 г. Этот интерфейс основан на преимуществах [унифицированных оповещений](#overview) , он был выпущенных в марте 2018 года, и предоставляет возможность управлять и статистически обрабатывать отдельные оповещения в дополнение к возможности изменять их состояния. В этом разделе описываются новые возможности и способы перемещения страницами оповещения на портале Azure.

### <a name="features-enhanced-unified-alerts"></a>Новые функции в расширенных унифицированных оповещениях

В новом интерфейсе представлены следующие функции, которые недоступны в классическом унифицированном интерфейсе.

- **Просмотр оповещений в разных подписках.** Теперь, в одном представлении, можно просматривать и управлять отдельными экземплярами оповещений для нескольких подписок.
- **Управление состоянием оповещений.** Теперь в оповещениях есть индикатор состояния, указывающий, было ли подтверждено его закрытия.
- **Упорядочивание оповещений с помощью смарт-группы.** Смарт-группы автоматически группируют оповещения, которые связаны друг с другом, что позволяет управлять ими как набором, а не по отдельности.

### <a name="enable-enhanced-unified-alerts"></a>Активация расширенных унифицированных оповещений
Включите новый интерфейс унифицированных оповещений, щелкнув баннер в верхней части страницы "Оповещения". Этот процесс создает хранилище оповещений, которое включает все оповещения из поддерживаемых служб за последние 30 дней. После включения нового интерфейса, переключатся между старым и новым интерфейсами можно с помощью баннера.

> [!NOTE]
>  Для первоначального включения нового интерфейса может потребоваться несколько минут.

![Баннер](media/monitoring-overview-unified-alerts/opt-in-banner.png)

После включения нового интерфейса, будут зарегистрированы все подписки, к которым у вас есть доступ. Несмотря на то, что вся подписка включена, только пользователи, которые выбрали новый интерфейс, смогут ее просмотреть. Другие пользователи, имеющие доступ к подписке, должны отдельно использовать интерфейс.

Включение нового интерфейса оповещений не влияет на конфигурацию групп действий или уведомлений в правилах оповещений. Меняется только способ просмотра и управления запущенными экземплярами оповещений на портале Azure.

### <a name="smart-groups"></a>Смарт-группы
Смарт-группы позволяют управлять связанными оповещениями как единым целым, а не управлять отдельными оповещениями, что уменьшает количество лишних оповещений. Можно просмотреть сведения о смарт-группах и установить состояние, подобное состоянию оповещения. Каждое оповещение является членом только одной смарт-группы.

Смарт-группы, созданные автоматически, используют машинное обучение для объединения связанных оповещений, которые представляют собой одну проблему. При создании оповещения, алгоритм добавляет его в новую или существующую смарт-группу на основе таких сведений, как исторические шаблоны, сходство свойств и сходство структуры. В настоящее время, в подписке, алгоритмом рассматриваются только оповещения от одной службы мониторинга. С помощью этой консолидации смарт-группы могут снизить на 99 % количество лишних оповещений. Причины, по которым оповещения были включены в группы, можно посмотреть на странице "Сведения об смарт-группе".

Имя смарт-группы — это имя ее первого оповещения. Создать или переименовать смарт-группу невозможно.


### <a name="alert-states"></a>Состояния оповещения
В расширенных унифицированных оповещениях представлена концепция состояния оповещения. Чтобы указать, где в процессе разрешения находится оповещение, можно задать его состояние.  Оповещение создается со статусом *Новое*. Его можно изменить после того, как оповещение будет подтверждено или закрыто. Любые изменения состояния оповещения сохраняются в его журнале.

Поддерживаются следующие состояния оповещения.

| Состояние | ОПИСАНИЕ |
|:---|:---|
| Создать | Проблема была только что обнаружена и еще не рассматривалась. |
| Подтверждено | Администратор рассмотрел оповещение и начал над ним работать. |
| Закрытые | Проблема была устранена. После закрытия оповещения можно изменить его состояние и вновь запустить. |

Состояние оповещения отличается от состояния монитора. Когда условие об ошибке больше не выполняется, правила генерации оповещений метрик могут изменить условие оповещения на _Разрешено_. Состояние оповещения устанавливается пользователем и не зависит от состояния монитора. Даже если система изменит состояния монитора на "Разрешено", состояние оповещения останется без изменений (это может сделать только пользователь).

#### <a name="changing-the-state-of-an-alert-or-smart-group"></a>Изменение состояния оповещения или смарт-группы
Установив состояние смарт-группы, вы сможете изменять состояние отдельных оповещений или вместе управлять несколькими оповещениями.

Изменить состояние оповещения можно щелкнув **Изменить состояние оповещения** в подробном представлении оповещения, а изменить состояние смарт-группы можно щелкнув **Изменить состояние смарт-группы** в ее подробном представлении. Чтобы за один раз изменить состояние нескольких экземпляров, их необходимо выбрать в представлении списка и в верхней части страницы щелкнуть **Изменение состояния**. В обоих случаях из раскрывающегося меню необходимо выбрать новое состояние, а затем оставить комментарий (что необязательно). При изменении одного элемента появится возможность применить те же изменения ко всем оповещениям в смарт-группе.

![Изменение состояния](media/monitoring-overview-unified-alerts/change-tate.png)

### <a name="alerts-page"></a>Страница оповещений
На домашней странице оповещений находятся сводные данные оповещений, которые создаются в течение определенного временного интервала. Также здесь отображаются столбцы с итоговым числом оповещений и с общим числом состояний оповещений для каждого уровня. Чтобы открыть страницу [Все оповещения](#all-alerts-page), отфильтрованную по конкретному уровню, щелкните её.

![Страница оповещений](media/monitoring-overview-unified-alerts/alerts-page.png)

Если выбрать значения в раскрывающемся меню в верхней части страницы, это представление можно отфильтровать.

| столбец | ОПИСАНИЕ |
|:---|:---|
| Подписка | Выбор до 5 подписок Azure. Только оповещения из выбранных подписок включены в представление. |
| Группа ресурсов | Выбор одной группы ресурсов. Только те предупреждения, которые отмечены в выбранной группе ресурсов, включены в представление. |
| Диапазон времени | Только оповещения, выполнены в рамках выбранного временного интервала, будут включены в представление. Поддерживаемые значения: за последний час, за последние 24 часа, за последние 7 дней и за последние 30 дней. |

Чтобы открыть другую страницу, щелкните соответствующие значения вверху страницы "Оповещения".

| Значение | ОПИСАНИЕ |
|:---|:---|
| Всего оповещений | Общее количество оповещений, которые соответствуют выбранным критериям. Чтобы открыть просмотр всех оповещений без применения фильтра, щелкните это значение. |
| Смарт-группы | Общее количество смарт-групп, которые созданы из оповещений, соответствующих выбранным критериям. Чтобы в представлении всех оповещений открыть список смарт-групп, щелкните это значение.
| Всего правил генерации оповещений | Общее количество оповещений в выбранной подписке и группе ресурсов. Чтобы открыть представление правил, отфильтрованных по выбранным подпискам и группам ресурсов, щелкните это значение.


### <a name="all-alerts-page"></a>Страница "Все оповещения" 
На странице "Все оповещения" можно просматривать списки оповещений, которые были созданы, на протяжении выбранного временного интервала. Здесь можно просмотреть список отдельных оповещений или список-смарт групп, которые содержат оповещения. Чтобы переключаться между представлениями, в вверху страницы щелкните баннер.

![Страница "Все оповещения"](media/monitoring-overview-unified-alerts/all-alerts-page.png)

Если выбрать следующие значения в раскрывающемся меню в верхней части страницы, представление можно отфильтровать.

| столбец | ОПИСАНИЕ |
|:---|:---|
| Подписка | Выбор до 5 подписок Azure. Только оповещения из выбранных подписок включены в представление. |
| Группа ресурсов | Выбор одной группы ресурсов. Только те предупреждения, которые отмечены в выбранной группе ресурсов, включены в представление. |
| Тип ресурса | Выбор одной или нескольких группу ресурсов. В представление включены только те оповещения, в которых выбранный тип отмечен. Этот столбец становится доступным, только после указания группы ресурсов. |
| Ресурс | Выбор ресурса. В представление включены только те оповещения, в которых отмечены ресурсы. Этот столбец становится доступным, только после указания типа ресурсов. |
| Уровень серьезности | Чтобы включить оповещения всех уровней, выберите уровни оповещения или *Все*. |
| Состояние монитора | Чтобы включить условия для оповещений, выберите состояние монитора или *Все*. |
| Состояние оповещения | Чтобы включить состояния оповещений, выберите состояние оповещения или *Все*. |
| Мониторинг службы | Чтобы включить все службы, выберите службу или *Все*. В представление включены только те оповещения, которые были созданы в соответствие с правилами, и которые используют эту службу в качестве цели. |
| Диапазон времени | Только оповещения, выполнены в рамках выбранного временного интервала, будут включены в представление. Поддерживаемые значения: за последний час, за последние 24 часа, за последние 7 дней и за последние 30 дней. |

Чтобы выбрать, какой из столбцов отображать, в верхней части страницы щелкните **Столбцы**. Можно удалить любой столбец, за исключением 

### <a name="alert-detail-page"></a>страницы "Сведения об оповещении"
Если щелкнуть оповещение, отображается страница "Сведения об оповещении". Он содержит сведения об оповещении и позволяет изменить его состояние.

![Сведения об оповещении](media/monitoring-overview-unified-alerts/alert-detail.png)

До страницы "Сведения об оповещении" относятся следующие разделы:

| Раздел | ОПИСАНИЕ |
|:---|:---|
| Основные компоненты | В этом разделе отображаются свойства оповещения и другие важные сведения о нем. |
| Журнал | В этом разделе перечислено каждое действие оповещения и любые изменения внесенные в оповещение. В настоящее время этот раздел ограничен изменениями состояния. |
| Смарт-группа | Сведения об смарт-группах, в которые включены оповещения. **Счетчик оповещений** относится к количеству оповещений, которые включены в смарт-группу. Сюда также можно отнести другие оповещения, включенные в смарт-группы, которые были созданы за предыдущие 30 дней.  Это происходит независимо от фильтра времени на странице "Список оповещений". Чтобы получить дополнительные сведения, щелкните оповещение. |
| Дополнительные сведения | В этом разделе отображается дополнительная контекстная информация об оповещении, которое обычно определяется как тип источника, создавшего оповещение. |


### <a name="smart-group-detail-page"></a>Страница "Сведений об смарт-группе"
Если щелкнуть смарт-группа, отображается страница "Сведения об смарт-группе". На странице "Сведений об смарт-группе" предоставляются сведения о смарт-группе, включая причины, используемые для создания группы, а также здесь присутствует возможность изменять ее состояние.
 
![Сведения об смарт-группе](media/monitoring-overview-unified-alerts/smart-group-detail.png)


До страницы "Сведения об смарт-группе" относятся следующие разделы:

| Раздел | ОПИСАНИЕ |
|:---|:---|
| Оповещения | Список отдельных оповещений, которые включенные в смарт-группу. Чтобы открыть страницу "Сведения об оповещении", щелкните оповещение. |
| Журнал | Список всех действий, которые были предприняты смарт-группой, а также любые изменения, внесенные в нее. В настоящее время этот раздел ограничен изменениями состояние и оповещения членства. |

## <a name="next-steps"></a>Дополнительная информация
- [Создание и просмотр оповещений, а также управление ими с помощью Azure Monitor — интерфейс оповещений (предварительная версия)](monitor-alerts-unified-usage.md)
- [Оповещения журнала в Azure Monitor. Оповещения Azure (предварительная версия)](monitor-alerts-unified-log.md)
- [Оповещения на основе метрик практически в реальном времени (предварительная версия)](monitoring-near-real-time-metric-alerts.md)
- [Создание оповещений журнала действий с помощью новой функции "Оповещения (предварительная версия)"](monitoring-activity-log-alerts-new-experience.md)
