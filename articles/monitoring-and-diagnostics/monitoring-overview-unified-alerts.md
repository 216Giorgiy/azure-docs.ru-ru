---
title: Функция "Унифицированные оповещения" в Azure Monitor
description: Описание унифицированных оповещений в Azure, с помощью которого можно управлять оповещениями и правилом генерации оповещений в службах Azure.
author: manishsm-msft
services: monitoring
ms.service: azure-monitor
ms.topic: conceptual
ms.date: 06/07/2018
ms.author: mamit
ms.component: alerts
ms.openlocfilehash: c4c8279a1d4638a1c5d889b53e2d9e89e458cc37
ms.sourcegitcommit: 7827d434ae8e904af9b573fb7c4f4799137f9d9b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/18/2018
ms.locfileid: "39117174"
---
# <a name="unified-alerts-in-azure-monitor"></a>Функция "Унифицированные оповещения" в Azure Monitor

## <a name="overview"></a>Обзор

> [!NOTE]
>  Унифицированный интерфейс оповещений, который позволяет управлять оповещениями нескольких подписок и представляет состояния оповещений и смарт-групп, в данный момент находится на этапе общедоступной предварительной версии. Описание дополнительных возможностей и их включения можно найти в последнем разделе этой статьи.


В этой статье описываются возможности унифицированного интерфейса оповещений в Azure Monitor. [Предыдущий интерфейс оповещения](monitoring-overview-alerts.md) доступен для параметра **Оповещения (классические)** в меню Azure Monitor. 

## <a name="features-of-the-unified-alert-experience"></a>Функции, которые доступны в унифицированном интерфейсе оповещений

Унифицированный интерфейс обладает рядом преимуществ перед классическим интерфейсом.

-   **Усовершенствованная система оповещений.** [Группы действий](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-action-groups) — это именованные группы оповещений и действий, которые можно использовать в нескольких оповещениях. 
- **Унифицированный интерфейс разработки.** Вы можете управлять оповещениями и правилом генерации оповещений для метрик, действий и журналов действий в Azure Monitor, Log Analytics и Application Insights, в одном месте. 
- **Просмотр активированных оповещений Log Analytics на портале Azure.** Теперь оповещения Log Analytics и оповещения из других источников можно просмотреть на портале Azure. Ранее оповещения из других источников отображались на отдельном портале.
- **Разделение активированных оповещений и правил генерации оповещений.** Теперь правила генерации оповещений отличаются от самих оповещений. Правило генерации оповещений — это условие, которое активирует оповещение. Также как и оповещение определяется условием, которое его инициирует.
- **Улучшенный рабочий процесс.** В унифицированном интерфейсе создания оповещений пользователю предлагаются рекомендации по настройке правил генерации оповещений.
 
По сравнению с классическими оповещениями о метриках, в оповещениях на основе метрик присутствуют некоторые улучшения.

-   **Уменьшение задержки.** Оповещения метрик могут выполняться каждую минуту. Классические оповещения метрик всегда выполняются раз в 5 минут. Задержка для оповещений журналов по-прежнему составляет более одной минуты из-за времени, необходимого для приема журналов. 
-   **Поддержка многомерных метрик.** Вы можете создать оповещение о многомерных метриках, чтобы отслеживать определенный экземпляр метрики.
-   **Дополнительный контроль метрик.** Вы можете определить расширенные правила генерации оповещений, которые поддерживают мониторинг максимальных, минимальных, средних и общих значений метрик.
-   **Объединенный мониторинг нескольких метрик.** Вы сможете выполнять мониторинг нескольких метрик с помощью одного правила. Оповещение активируется, если обе метрики превышают соответствующие пороговые значения для заданного периода времени.
-   **Метрики из журналов** (ограниченная общедоступная предварительная версия). Некоторые данные журналов, поступающие в Log Analytics, теперь можно извлекать и преобразовывать в метрики Azure Monitor и создавать на их основе оповещения, так же как и на основе других метрик. 


## <a name="alert-rules"></a>правила оповещений.
Унифицированный интерфейс оповещений применяет следующие концепции для разделения правил генерации оповещений от оповещений, сохраняя единый процесс создания для разных типов оповещений.

| Элемент | Определение |
|:---|:---|
| Правило генерации оповещений | Определяет состояние, необходимое для создания оповещения. Правило генерации оповещений включает в себя _целевой ресурс_, _сигнал_, _критерии_ и _логику_. Правило генерации оповещений активно, только если оно находится в состоянии _Включено_.
| Целевой ресурс | Определяет определенные ресурсы и сигналы, которые доступны для оповещений. Целью может быть любой ресурс Azure.<br><br>Например, виртуальная машина, учетная запись хранения, масштабирование виртуальных машин, рабочая область Log Analytics, ресурс Application Insights. |
| Сигнал | Источник данных, созданный целевым ресурсом. Поддерживаются такие типы сигналов, как *метрика*, *журнал действий*, *Application Insights* и *журнал*. |
| Критерии | К целевому ресурсу применяется комбинация _сигнала_ и _логики_.<br><br>Примеры критериев: загрузка ЦП больше 70 %, время отклика сервера больше 4 мс, число результатов запроса журнала больше 100 и т. д. |
| Логика | Определенная пользователем логика, позволяющая проверить, соответствует ли сигнал ожидаемым значениям или диапазону. |
| Действие | Действие, которое будет выполнено при срабатывании оповещения. Для каждого оповещения можно определить несколько действий. Также оповещения поддерживает группы действий.<br><br>Например, отправка письма на определенный адрес электронной почты или вызов веб-перехватчика по определенному URL-адресу. |
| Состояние монитора | Указывает, было ли устранено условие, создавшее оповещение метрики. Примером правил генерации оповещений метрик является определенная метрика с регулярными интервалами. Если в правиле генерации оповещений соблюдены критерии, то создается новое оповещение с состоянием "Активировано".  Если при повторной выборке метрик критерии все еще соблюдаются, ничего не происходит.  А если критерии не выполнены, тогда состояние оповещения изменяется на "Разрешено". В следующий раз, когда критерии будут выполнены, будет создано другое оповещение с состоянием "Активировано". |


## <a name="alert-pages"></a>Страницы "Оповещения"
Унифицированные оповещения предоставляют единое место для просмотра всех оповещений Azure и управления ими. В следующих разделах описаны функции для каждой отдельной страницы унифицированного интерфейса.

### <a name="alerts-overview-page"></a>Страница обзора оповещений
На странице общих сведений **Оповещения** представлена агрегатная сводка по всем активированным оповещениям, а также общее количество настроенных и включенных правил генерации оповещений. При изменении подписок или параметров фильтра обновятся статистические сводки и список сработавших оповещений.

 ![Общие сведения об оповещениях](./media/monitoring-overview-unified-alerts/alerts-preview-overview2.png) 

### <a name="alert-rules-management"></a>Управление правилами генерации оповещений
**Правила** — это единая страница для управления всеми правилами генерации оповещений в подписках Azure. На этой странице перечислены все правила генерации оповещений, а также на ней доступна фильтрация по целевым ресурсам, группам ресурсов, имени правила или состоянию. Здесь также можно включить и отключить правила генерации оповещений, а также изменить их.

 ![Правила генерации оповещений](./media/monitoring-overview-unified-alerts/alerts-preview-rules.png)


## <a name="create-an-alert-rule"></a>Создание правила оповещения
Вы можете согласованно создать оповещения для любой службы мониторинга и любого типа сигнала. Все сработавшие оповещения и связанные сведения доступны на одной странице.
 
Создание правила генерации оповещений включает в себя следующие три шага:
1. Выбор _цели_ оповещения.
1. Выбор _сигнала_ для цели из списка доступных сигналов.
1. Указание _логики_, которая будет применяться к информации, полученной от сигнала.
 
При таком упрощенном процессе создания пользователю больше не нужно знать поддерживаемый источник мониторинга или сигналы перед выбором ресурса Azure. Список доступных сигналов автоматически фильтруется на основе выбранного целевого ресурса, а также в нем содержатся сведения о логике правила генерации оповещений.

Дополнительные сведения по созданию правил генерации оповещений см. в статье [Создание и просмотр оповещений, а также управление ими с помощью Azure Monitor](monitor-alerts-unified-usage.md).

Оповещения доступны в нескольких службах мониторинга Azure. Для получения сведений о том как и где использовать каждую из этих служб прочитайте статью [Мониторинг приложений и ресурсов в Azure](./monitoring-overview.md). Следующая таблица содержит типы правил генерации оповещений, которые теперь доступны в Azure. В ней также перечислены возможности, которые в настоящее время поддерживаются унифицированными оповещениями.

| **Источник мониторинга** | **Тип сигнала**  | **Описание** | 
|-------------|----------------|-------------|
| Azure Monitor | Метрика  | Эти оповещения метрик, также именуемые [оповещениями метрик почти в реальном времени](monitoring-near-real-time-metric-alerts.md), поддерживают оценку условий метрик с частотой в 1 минуту и позволяют создавать правила на основе нескольких метрик и многомерных метрик. Список поддерживаемых типов ресурсов доступен в разделе [Поддерживаемые метрики и измерения](monitoring-near-real-time-metric-alerts.md#metrics-and-dimensions-supported).<br>[Классические оповещения метрик](monitoring-overview-alerts.md) не поддерживаются в новом интерфейсе оповещений. Вы найдете их в разделе "Оповещения (классические)" на портале Azure. Классические оповещения поддерживают несколько типов метрик, которые еще не поддерживаются новыми оповещениями. Полный список поддерживаемых метрик см. в статье [Метрики, поддерживаемые Azure Monitor](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-supported-metrics). |
| Log Analytics | Журналы  | Получают уведомления или запускают выполнение автоматизированных действий, когда запрос поиска по журналам соответствует определенным критериям. Оповещения в Log Analytics [копируются в новый интерфейс](monitoring-alerts-extend.md). Доступна [предварительная версия *журналов Log Analytics в качестве метрик*](monitoring-alerts-extend-tool.md). Эта предварительная версия позволяет принимать журналы некоторых типов и преобразовывать их в метрики, которые затем можно использовать для оповещений с помощью нового пользовательского интерфейса. Эта предварительная версия удобна в том случае, если помимо собственных метрик Azure Monitor вам нужно получать журналы не из Azure. |
| Журналы действий | Журнал действий | Содержит записи всех действий создания, обновления и удаления, выполненных с помощью выбранного целевого объекта. |
| Работоспособность службы | Журнал действий  | Не поддерживаются в унифицированных оповещениях. Ознакомьтесь с разделом [Создание оповещений журнала действий для уведомлений службы](monitoring-activity-log-alerts-on-service-notifications.md).  |
| Application Insights | Журналы  | Содержит журналы с данными производительности приложения. С помощью аналитического запроса можно определить условия для выполнения действий на основе данных приложения. |
| Application Insights | Метрика | Не поддерживаются в унифицированных оповещениях. Ознакомьтесь с разделом [Настройка оповещений в Application Insights](../application-insights/app-insights-alerts.md). |
| Application Insights | Веб-тесты доступности | Не поддерживаются в унифицированных оповещениях.  Ознакомьтесь с разделом [Наблюдение за доступностью и скоростью реагирования веб-сайта](../application-insights/app-insights-monitor-web-app-availability.md). Доступны для любого веб-сайта, инструментированного для отправки данных в Application Insights. Получение уведомления, когда доступность или скорость реагирования веб-сайта опускается ниже ожидаемого значения. |

## <a name="enhanced-unified-alerts-public-preview"></a>Расширенные унифицированные оповещения (общедоступная предварительная версия)

Расширенный интерфейс унифицированных оповещений был выпущен в общедоступной предварительной версии для Azure Monitor 1 июня 2018 г. Этот интерфейс основан на преимуществах [унифицированных оповещений](#overview), он был выпущенных в марте 2018 года, и предоставляет возможность управлять и статистически обрабатывать отдельные оповещения, а также изменять их состояние. В этом разделе описываются новые возможности и способы перемещения страницами оповещения на портале Azure.

### <a name="enhanced-unified-alerts"></a>Расширенные унифицированные оповещения

В новом интерфейсе представлены следующие функции, которые недоступны в классическом унифицированном интерфейсе.

- **Просмотр оповещений в разных подписках.** Теперь в одном представлении можно просматривать и управлять отдельными экземплярами оповещений для нескольких подписок.
- **Управление состоянием оповещений.** Теперь в оповещениях есть индикатор состояния, указывающий, было ли подтверждено его закрытие.
- **Упорядочивание оповещений с помощью смарт-групп.** Смарт-группы автоматически группируют оповещения, которые связаны друг с другом, что позволяет управлять ими как набором, а не по отдельности.

### <a name="enable-enhanced-unified-alerts"></a>Активация расширенных унифицированных оповещений
Включите новый интерфейс унифицированных оповещений, щелкнув баннер в верхней части страницы "Оповещения". Этот процесс создает хранилище оповещений, которое включает все оповещения из поддерживаемых служб за последние 30 дней. После включения нового интерфейса переключаться между старым и новым интерфейсами можно с помощью этого баннера.

> [!NOTE]
>  Для первоначального включения нового интерфейса может потребоваться несколько минут.

![Баннер](media/monitoring-overview-unified-alerts/opt-in-banner.png)

После включения нового интерфейса будут зарегистрированы все подписки, к которым у вас есть доступ. Несмотря на то, что вся подписка включена, только пользователи, которые выбрали новый интерфейс, смогут его увидеть. Другие пользователи, имеющие доступ к подписке, должны отдельно использовать интерфейс.

Включение нового интерфейса оповещений не влияет на конфигурацию групп действий или уведомлений в правилах оповещений. Меняется только способ просмотра и управления запущенными экземплярами оповещений на портале Azure.

### <a name="smart-groups"></a>Смарт-группы
Смарт-группы позволяют управлять связанными оповещениями как единым целым, а не управлять отдельными оповещениями, что уменьшает количество лишних действий. Можно просмотреть сведения о смарт-группах и установить состояние точно так же, как и для оповещений. Каждое оповещение является членом только одной смарт-группы.

Смарт-группы, созданные автоматически, используют машинное обучение для объединения связанных оповещений, которые представляют одну проблему. При создании оповещения алгоритм добавляет его в новую или существующую смарт-группу на основе таких сведений, как исторические шаблоны, сходство свойств и сходство структуры. 

В настоящее время, в подписке, алгоритмом рассматриваются только оповещения от одной службы мониторинга. С помощью этой консолидации смарт-группы могут снизить на 99 % количество лишних оповещений. Причины, по которым оповещения были включены в группы, можно посмотреть на странице сведений об смарт-группе.

Имя смарт-группы — это имя ее первого оповещения. Создать или переименовать смарт-группу невозможно.


### <a name="alert-states"></a>Состояния оповещения
В расширенных унифицированных оповещениях представлена концепция состояния оповещения. Чтобы указать, где в процессе разрешения находится оповещение, можно задать его состояние. Оповещение создается со статусом *Новое*. Его можно изменить после того, как оповещение будет подтверждено или закрыто. Любые изменения состояния оповещения сохраняются в его журнале.

Поддерживаются следующие состояния оповещения.

| Состояние | ОПИСАНИЕ |
|:---|:---|
| Создать | Проблема была только что обнаружена и еще не рассматривалась. |
| Подтверждено | Администратор рассмотрел оповещение и начал над ним работать. |
| Закрытые | Проблема была устранена. После закрытия оповещения можно изменить его состояние и вновь открыть. |

Состояние оповещения отличается от состояния монитора. Когда условие об ошибке больше не выполняется, правила генерации оповещений метрик могут изменить условие оповещения на _Разрешено_. Состояние оповещения устанавливается пользователем и не зависит от состояния монитора. Даже если система изменит состояния монитора на "Разрешено", состояние оповещения останется без изменений (это может сделать только пользователь).

#### <a name="change-the-state-of-an-alert-or-smart-group"></a>Изменение состояния оповещения или смарт-группы
Установив состояние смарт-группы, вы сможете изменять состояние отдельных оповещений или вместе управлять несколькими оповещениями.

Измените состояние оповещения, выбрав **Изменить состояние оповещения** в представлении сведений об оповещении. Или измените состояние смарт-группы, выбрав **Изменить состояние смарт-группы** в представлении сведений о смарт-группе. Чтобы за один раз изменить состояние нескольких экземпляров, их необходимо выбрать в представлении списка и в верхней части страницы щелкнуть **Изменение состояние**. 

В обоих случаях из раскрывающегося меню необходимо выбрать новое состояние. Затем можно ввести необязательный комментарий. При изменении одного элемента появится возможность применить те же изменения ко всем оповещениям в смарт-группе.

![Изменение состояния](media/monitoring-overview-unified-alerts/change-tate.png)

### <a name="alerts-page"></a>Страница оповещений
На домашней странице оповещений находятся сводные данные оповещений, которые создаются в течение определенного временного интервала. Также здесь отображаются столбцы с итоговым числом оповещений и с общим числом оповещений в каждом состоянии для каждой серьезности. Чтобы открыть страницу [Все оповещения](#all-alerts-page), отфильтрованную по конкретной серьезности, щелкните ее.

![Страница оповещений](media/monitoring-overview-unified-alerts/alerts-page.png)

Это представление можно отфильтровать, выбрав значения в раскрывающемся меню в верхней части страницы.

| столбец | ОПИСАНИЕ |
|:---|:---|
| Подписка | Выберите до пяти подписок Azure. Только оповещения из выбранных подписок включены в представление. |
| Группа ресурсов | Выбор одной группы ресурсов. Только те предупреждения, которые отмечены в выбранной группе ресурсов, включены в представление. |
| Диапазон времени | Только оповещения, выполненные в рамках выбранного временного интервала, будут включены в представление. Поддерживаемые значения: за последний час, за последние 24 часа, за последние 7 дней и за последние 30 дней. |

Чтобы открыть другую страницу, щелкните соответствующие значения вверху страницы "Оповещения".

| Значение | ОПИСАНИЕ |
|:---|:---|
| Всего оповещений | Общее количество оповещений, которые соответствуют выбранным критериям. Чтобы открыть представление "Все оповещения" без применения фильтра, щелкните это значение. |
| Смарт-группы | Общее количество смарт-групп, которые созданы из оповещений, соответствующих выбранным критериям. Чтобы открыть список смарт-групп в представлении "Все оповещения", щелкните это значение.
| Всего правил генерации оповещений | Общее количество оповещений в выбранной подписке и группе ресурсов. Чтобы открыть представление "Правила", отфильтрованное по выбранным подпискам и группам ресурсов, щелкните это значение.


### <a name="all-alerts-page"></a>Страница "Все оповещения" 
На странице "Все оповещения" можно просматривать списки оповещений, которые были созданы на протяжении выбранного временного интервала. Здесь можно просмотреть список отдельных оповещений или список-смарт групп, которые содержат оповещения. Чтобы переключаться между представлениями, щелкните баннер вверху страницы.

![Страница "Все оповещения"](media/monitoring-overview-unified-alerts/all-alerts-page.png)

Представление можно отфильтровать, выбрав следующие значения в раскрывающемся меню в верхней части страницы.

| столбец | ОПИСАНИЕ |
|:---|:---|
| Подписка | Выберите до пяти подписок Azure. Только оповещения из выбранных подписок включены в представление. |
| Группа ресурсов | Выбор одной группы ресурсов. Только те предупреждения, которые отмечены в выбранной группе ресурсов, включены в представление. |
| Тип ресурса | Выбор одной или нескольких группу ресурсов. В представление включены только те оповещения, в которых выбранный тип отмечен. Этот столбец становится доступным только после указания группы ресурсов. |
| Ресурс | Выбор ресурса. В представление включены только те оповещения, целью которых выбраны ресурсы. Этот столбец становится доступным только после указания типа ресурсов. |
| Уровень серьезности | Выберите серьезность оповещения или щелкните *Все*, чтобы включить оповещения всех уровней серьезности. |
| Состояние монитора | Чтобы включить оповещения о состояниях, выберите состояние монитора или щелкните *Все*. |
| Состояние оповещения | Выберите состояние оповещения или щелкните *Все*, чтобы включить оповещения во всех состояниях. |
| Мониторинг службы | Выберите службу или щелкните *Все*, чтобы включить все службы. В представление включаются только те оповещения, которые были созданы в соответствие с правилами и которые используют эту службу в качестве цели. |
| Диапазон времени | Только оповещения, выполненные в рамках выбранного временного интервала, будут включены в представление. Поддерживаемые значения: за последний час, за последние 24 часа, за последние 7 дней и за последние 30 дней. |

Чтобы выбрать, какой из столбцов отображать, в верхней части страницы щелкните **Столбцы**. 

### <a name="alert-detail-page"></a>страницы "Сведения об оповещении"
Если щелкнуть оповещение, отобразится страница "Сведения об оповещении". Она содержит сведения об оповещении и позволяет изменить его состояние.

![Сведения об оповещении](media/monitoring-overview-unified-alerts/alert-detail.png)

Страница "Сведения об оповещении" содержит следующие разделы.

| Раздел | ОПИСАНИЕ |
|:---|:---|
| Основные компоненты | В этом разделе отображаются свойства оповещения и другие важные сведения о нем. |
| Журнал | В этом разделе перечислено каждое действие оповещения и любые изменения внесенные в оповещение. В настоящее время этот раздел ограничен изменениями состояния. |
| Смарт-группа | Сведения об смарт-группах, в которые включены оповещения. *Счетчик оповещений* отображает количество оповещений, которые включены в смарт-группу. Сюда также относятся другие оповещения, включенные в эту смарт-группу, которые были созданы за предыдущие 30 дней.  Это происходит независимо от фильтра времени на странице "Список оповещений". Чтобы получить дополнительные сведения, щелкните оповещение. |
| Дополнительные сведения | В этом разделе отображается дополнительная контекстная информация об оповещении, которая обычно относится к типу источника оповещения. |


### <a name="smart-group-detail-page"></a>Страница сведений о смарт-группе
Если щелкнуть смарт-группу, отобразится страница сведений о ней. На этой странице отображаются сведения о смарт-группе, включая причины, по которым она была создана. Кроме того, на этой странице можно изменить состояние смарт-группы.
 
![Сведения о смарт-группе](media/monitoring-overview-unified-alerts/smart-group-detail.png)


Страница сведений о смарт-группе состоит из следующих разделов.

| Раздел | ОПИСАНИЕ |
|:---|:---|
| Оповещения | Список отдельных оповещений, которые включенные в смарт-группу. Чтобы открыть страницу "Сведения об оповещении", щелкните оповещение. |
| Журнал | Список всех действий, которые были выполнены смарт-группой, а также любые изменения, внесенные в нее. В настоящее время этот раздел ограничен изменениями состояние и оповещения членства. |

## <a name="next-steps"></a>Дополнительная информация
- [Создание и просмотр оповещений, а также управление ими с помощью Azure Monitor — интерфейс оповещений (предварительная версия)](monitor-alerts-unified-usage.md)
- [Оповещения журнала в Azure Monitor. Интерфейс оповещений](monitor-alerts-unified-log.md)
- [Оповещения метрик в Azure Monitor. Интерфейс оповещений](monitoring-near-real-time-metric-alerts.md)
- [Создание оповещений журнала действий с помощью новой функции "Оповещения"](monitoring-activity-log-alerts-new-experience.md)
