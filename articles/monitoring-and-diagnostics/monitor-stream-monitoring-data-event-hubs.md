---
title: "Поток данных для концентраторов событий мониторинга Azure | Документы Microsoft"
description: "Дополнительные сведения о всех данных Azure в концентратор событий для получения данных в партнера SIEM или средство аналитики потока."
author: johnkemnetz
manager: robb
editor: 
services: monitoring-and-diagnostics
documentationcenter: monitoring-and-diagnostics
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 12/20/2017
ms.author: johnkem
ms.openlocfilehash: 59f0cba66a5d8d2a528700861efff86967c1c748
ms.sourcegitcommit: a648f9d7a502bfbab4cd89c9e25aa03d1a0c412b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/22/2017
---
# <a name="stream-azure-monitoring-data-to-an-event-hub-for-consumption-by-an-external-tool"></a>Наблюдение за данными в концентратор событий для использования с внешнего средства Azure потока

Монитор Azure предоставляет единый конвейер для получения доступа ко всем данные наблюдения от среды Azure, что позволяет легко настроить партнера SIEM и мониторинга, позволяющих воспользоваться этими данными. В этой статье описывается настройка различных уровней данных из среды Azure отправляемых в одном концентраторов событий пространства имен или событие концентраторе, где его сможет собрать внешнего средства.

## <a name="what-data-can-i-send-into-an-event-hub"></a>Какие данные можно отправить в концентратор событий 

В среде Azure существует несколько уровней «» отслеживаемых данных и метод доступа к данным из каждого уровня может меняться. Как правило эти уровни можно описать, как:

- **Данные наблюдения за приложениями:** данных о производительности и функциональности кода вы написали и работает в Azure. Данные наблюдения за приложениями примеры трассировки производительности, журналы приложений и телеметрии пользователя. Наблюдение за данными приложения обычно собираются в одном из следующих способов:
  - Посредством инструментирования кода с помощью пакета SDK, такие как [пакет SDK Application Insights](../application-insights/app-insights-overview.md).
  - Запустив агент мониторинга, который прослушивает регистрирует новое приложение на компьютере под управлением приложения, такие как [агента диагностики Windows Azure](./azure-diagnostics.md) или [диагностики агента Azure Linux](../virtual-machines/linux/diagnostic-extension.md).
- **Наблюдение за данными гостевой ОС:** данных об операционной системе, на котором выполняется приложение. В качестве примеров данных мониторинга гостевой ОС будет Linux syslog или Windows системные события. Для сбора данных этого типа, необходимо установить агент, таких как [агента диагностики Windows Azure](./azure-diagnostics.md) или [диагностики агента Azure Linux](../virtual-machines/linux/diagnostic-extension.md).
- **Наблюдение за данными ресурсов Azure:** данные об операции ресурс Azure. Для некоторых типов ресурсов Azure, таких как виртуальные машины является гостевой ОС и приложения, чтобы отслеживать внутри этой службы Azure. Другие ресурсы Azure, такие как Сетевые группы безопасности отслеживания данных ресурсов имеет наивысший уровень данных, доступных (поскольку нет гостевая операционная система или приложение, работающее в этих ресурсах). Эти данные можно собирать с помощью [параметров диагностики для ресурса](./monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings).
- **Данные мониторинга платформы Azure:** данные об операции и управления подписки Azure или клиента, а также данные о работоспособности и операции Azure сама. [Журнал действий](./monitoring-overview-activity-logs.md), включая данные службы работоспособности и Active Directory аудитов, примеры платформы данных мониторинга. Эти данные можно собирать с помощью параметров также диагностики.

Данные из любого уровня могут отправляться в концентратор событий, где он может быть извлечено в средство партнера. В следующих разделах описывается, как настроить данные из каждого уровня и передаваться в концентратор событий. Предполагается наличие средств на этом уровне для отслеживания.

Прежде чем начать, необходимо [создание пространства имен и события концентратора концентраторов событий](../event-hubs/event-hubs-create.md). Это пространство имен и события концентратора является целевым для всех данных.

## <a name="how-do-i-set-up-azure-platform-monitoring-data-to-be-streamed-to-an-event-hub"></a>Как настроить наблюдение за данными платформы Azure для потоковой передачи в концентратор событий?

Данные мониторинга платформы Azure поступает из двух основных источников:
1. [Журнал действий Azure](./monitoring-overview-activity-logs.md), содержащий создания, обновления и удаления операций из диспетчера ресурсов изменения в [работоспособности службы Azure](../service-health/service-health-overview.md) , может повлиять на ресурсы в вашей подписке [исправности ресурсов](../service-health/resource-health-overview.md) переходы состояния и несколько других типов событий на уровне подписки. [В этой статье указаны все категории событий, которые отображаются в журнале действий Azure](./monitoring-activity-log-schema.md).
2. [Azure Active Directory reporting](../active-directory/active-directory-reporting-azure-portal.md), который содержит журнал входа в действие и аудит след изменений, внесенных в пределах конкретного клиента. Он еще не возможно для потоковой передачи данных Azure Active Directory в концентратор событий.

### <a name="stream-azure-activity-log-data-into-an-event-hub"></a>Поток данных журнала действий Azure в концентратор событий

Для отправки данных в журнале действий Azure в пространстве имен концентраторы событий, вы настроите профиль журнала по подписке. [В этом руководстве, выполните](./monitoring-stream-activity-logs-event-hubs.md) для настройки профиля журнала для одной подписки. Для этого после каждой подписки, которые требуется отслеживать.

> [!TIP]
> Профиль журнала в настоящее время можно только выберите пространство имен концентраторов событий, в котором концентратор событий создается с именем «аналитика операционные журналы.» Он еще не можно указать собственное имя концентратора событий в профиле журнала.

## <a name="how-do-i-set-up-azure-resource-monitoring-data-to-be-streamed-to-an-event-hub"></a>Настройка данных отслеживания ресурсов Azure для потоковой передачи в концентратор событий

Ресурсы Azure создавать два вида данных мониторинга:
1. [Журналы диагностики ресурсов](./monitoring-overview-of-diagnostic-logs.md)
2. [Метрики](monitoring-overview-metrics.md)

Оба типа данных отправляются в концентратор событий с помощью любого из параметров диагностики. [В этом руководстве, выполните](./monitoring-stream-diagnostic-logs-to-event-hubs.md) для настройки значения диагностических ресурсов определенного ресурса. Задайте параметр диагностических ресурсов для каждого ресурса, из которого требуется собирать журналы.

> [!TIP]
> Чтобы убедиться, что каждый ресурс в конкретной области всегда настраивается с параметра диагностики можно использовать политики Azure [с помощью эффекта DeployIfNotExists в правило политики](../azure-policy/policy-definition.md#policy-rule). Сегодня DeployIfNotExists поддерживается только на встроенных политик.

## <a name="how-do-i-set-up-guest-os-monitoring-data-to-be-streamed-to-an-event-hub"></a>Как настроить данные наблюдения гостевой ОС для потоковой передачи в концентратор событий?

Необходимо установить агент для отправки гостевой ОС данные наблюдения в концентратор событий. Для Windows или Linux укажите данные, которые вы должны отправляться в концентратор событий, а также в концентратор событий, к которому данные должны быть отправлены в файл конфигурации и передать этот файл конфигурации агент, работающий на виртуальной Машине.

### <a name="stream-linux-data-to-an-event-hub"></a>Поток данных Linux для концентратора событий

[Диагностики Azure Linux agent](../virtual-machines/linux/diagnostic-extension.md) может использоваться для отправки данных с компьютера Linux в концентратор событий мониторинга. Это выполняется путем добавления в концентратор событий как приемник в вашей LAD настройки защищенного файла конфигурации JSON. [Дополнительные сведения о добавлении приемников концентратора событий в диагностики Azure Linux agent в статье](../virtual-machines/linux/diagnostic-extension.md#protected-settings).

> [!NOTE]
> Не удается настроить потоковую передачу данных наблюдения гостевой ОС в концентратор событий на портале. Вместо этого необходимо вручную изменить файл конфигурации.

### <a name="stream-windows-data-to-an-event-hub"></a>Поток данных Windows в концентратор событий

[Диагностики Windows Azure агента](./azure-diagnostics.md) может использоваться для отправки данных с компьютера Windows в концентратор событий мониторинга. Это сделать, добавив концентратора событий в качестве приемника в разделе privateConfig WAD файла конфигурации. [См. в статье для получения дополнительных сведений о добавлении приемников концентратора событий в Windows Azure Diagnostic agent](./azure-diagnostics-streaming-event-hubs.md).

> [!NOTE]
> Не удается настроить потоковую передачу данных наблюдения гостевой ОС в концентратор событий на портале. Вместо этого необходимо вручную изменить файл конфигурации.

## <a name="how-do-i-set-up-application-monitoring-data-to-be-streamed-to-event-hub"></a>Как настроить данные для наблюдения за приложениями потоковый концентратор событий?

Наблюдение за данными приложению инструментирована кода с помощью пакета SDK, не существует общего назначения решение для мониторинга данных в концентратор событий в Azure приложений маршрутизации. Тем не менее [Azure Application Insights](../application-insights/app-insights-overview.md) одна служба, который может использоваться для сбора данных уровня приложения Azure. При использовании Application Insights можно осуществлять потоковую передачу данных наблюдения в концентратор событий следующим образом:

1. [Настройка непрерывного экспорта](../application-insights/app-insights-export-telemetry.md) Application Insights данных для учетной записи хранилища.

2. Настройка запуска таймера логики приложения, [извлекает данные из хранилища больших двоичных объектов](../connectors/connectors-create-api-azureblobstorage.md#use-an-action) и [помещает его в виде сообщения в концентратор событий](../connectors/connectors-create-api-azure-event-hubs.md#send-events-to-your-event-hub-from-your-logic-app).

## <a name="what-can-i-do-with-the-monitoring-data-being-sent-to-my-event-hub"></a>Что можно делать с данными мониторинга, отправляемых в моей концентратора событий

Маршрутизация данных наблюдения в концентратор событий с помощью монитора Azure позволяет легко интегрировать с участником SIEM и средств мониторинга. Большинство средств требует строку подключения концентратора событий и определенные разрешения для подписки Azure для чтения данных из концентратора событий. Ниже приведен список неполном средств при интеграции Azure монитора:

* **IBM QRadar** -соединитель QRadar для концентраторов событий в настоящее время находится в бета-версии. Скоро будет доступно для установки вручную из центра исправить IBM или автоматически с помощью QRadar процесс обновления автоматически.
* **Splunk** - [расширение мониторинга Azure для Splunk](https://splunkbase.splunk.com/app/3534/) Splunkbase и проекта с открытым кодом. [Документация в данном случае](https://github.com/Microsoft/AzureMonitorAddonForSplunk/wiki/Azure-Monitor-Addon-For-Splunk).
* **SumoLogic** -приведены инструкции по настройке SumoLogic для получения данных из концентратора событий [доступные здесь](https://help.sumologic.com/Send-Data/Applications-and-Other-Data-Sources/Azure-Audit/02Collect-Logs-for-Azure-Audit-from-Event-Hub)

## <a name="next-steps"></a>Следующие шаги
* [Архивация журнала действий Azure](monitoring-archive-activity-log.md)
* [Общие сведения о журнале действий Azure](monitoring-overview-activity-logs.md)
* [Настройка объекта webhook для оповещений журнала действий Azure](insights-auditlog-to-webhook-email.md)

