---
title: "Начало работы с автомасштабированием в Azure | Документация Майкрософт"
description: "Сведения о масштабировании ресурсов в Azure."
author: rajram
manager: rboucher
editor: 
services: monitoring-and-diagnostics
documentationcenter: monitoring-and-diagnostics
ms.assetid: d37d3fda-8ef1-477c-a360-a855b418de84
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/07/2017
ms.author: rajram
ms.translationtype: Human Translation
ms.sourcegitcommit: 71fea4a41b2e3a60f2f610609a14372e678b7ec4
ms.openlocfilehash: a0a420adc57a0bcbb3779183324ab7bfafcb5bf1
ms.contentlocale: ru-ru
ms.lasthandoff: 05/10/2017


---
# <a name="get-started-with-auto-scale-in-azure"></a>Начало работы с автомасштабированием в Azure
В этой статье описывается, как настроить автомасштабирование для ресурса на портале Azure.

Автомасштабирование Azure Monitor используется только с масштабируемыми наборами виртуальных машин, облачными службами, а также с планами и средами службы приложений. 

# <a name="lets-get-started"></a>Начало работы

## <a name="discover-the-auto-scale-settings-in-your-subscriptions"></a>Обнаружение параметров автомасштабирования в подписках
Вы можете обнаружить все ресурсы, для которых применяется автомасштабирование, в Azure Monitor. Выполните приведенные ниже пошаговые инструкции.

- Откройте [портал Azure][1].
- В левой области навигации щелкните значок Azure Monitor.
  ![Запуск Azure Monitor][2]
- Выберите параметр "Автомасштабирование" для просмотра всех ресурсов, к которым применяется автомасштабирование, а также его текущего состояния. ![Обнаружение автомасштабирования в Azure Monitor][3]

Вы можете использовать панель "Фильтр" в верхней части страницы, чтобы сузить список до ресурсов в определенной группе, отдельных типов ресурсов или конкретного ресурса.

Для каждого ресурса можно найти текущее количество экземпляров, а также состояние автомасштабирования. Состояние автомасштабирования может принимать одно из перечисленных ниже значений.

- "Не настроено". Параметр автомасштабирования еще не включен для данного ресурса.
- "Включено". Параметр автомасштабирования включен для данного ресурса.
- "Отключено". Параметр автомасштабирования отключен для данного ресурса.

## <a name="create-your-first-auto-scale-setting"></a>Создание параметра автомасштабирования

Теперь давайте выполним простые пошаговые инструкции для создания параметра автомасштабирования.

- В Azure Monitor откройте колонку "Автомасштабирование" и выберите ресурс, который требуется масштабировать. (В приведенных ниже действиях используется план службы приложений, связанный с веб-приложением. Вы можете [создать первое веб-приложение ASP.NET в Azure за пять минут][4].)
- В колонке "Параметр масштабирования" для ресурса обратите внимание, что текущее количество экземпляров равно 1. Щелкните Enable autoscale (Включить автомасштабирование).
  ![Параметр масштабирования для нового веб-приложения][5]
- Укажите имя для параметра масштабирования и щелкните Add a rule (Добавить правило). Параметры правила масштабирования откроются в правой части в виде контекстной области. Если загрузка ЦП ресурса превышает 70 %, по умолчанию для параметра масштабирования количество экземпляров будет равно 1. Оставьте эти значения по умолчанию и нажмите кнопку "Добавить".
  ![Создание параметра масштабирования для веб-приложения][6]
- Первое правило масштабирования создано. Обратите внимание, что в интерфейсе отображается рекомендация о том, что нужно задать хотя бы один вариант масштабирования в правиле. Для этого щелкните Add a rule (Добавить правило) и задайте для параметра "Оператор" значение "Меньше чем", для параметра "Пороговое значение" значение 20, а для параметра "Операция" — значение Decrease count by (Уменьшить количество на). Теперь у вас есть параметр масштабирования, который изменяет масштаб в зависимости от показателей загрузки ЦП.
  ![Масштабирование на основе использования ЦП][8]
- Щелкните "Сохранить".

Поздравляем! Первый параметр масштабирования успешно создан для автомасштабирования веб-приложения на основе использования ЦП.

> Примечание. Эти действия также применимы для начала работы с VMSS или ролью облачной службы.

# <a name="other-considerations"></a>Дополнительные рекомендации
## <a name="scale-based-on-a-schedule"></a>Масштабирование на основе расписания
Помимо постоянного масштабирования на основе показателей загрузки ЦП, можно также задать параметры масштабирования в определенные дни недели.

- Щелкните Add a scale condition (Добавить условие масштабирования).
- Для режима масштабирования и правил применяется та же настройка, что и для условия по умолчанию.
- Выберите Repeat specific days (Повторять в конкретные дни) для расписания.
- Выберите дни и время начала и окончания (когда следует применить условие масштабирования).

![Условие масштабирования на основе расписания][9]
## <a name="scale-differently-on-specific-dates"></a>Масштабирование в определенные даты
Помимо постоянного масштабирования на основе показателей загрузки ЦП, можно также задать параметры масштабирования в определенные даты.

- Щелкните Add a scale condition (Добавить условие масштабирования).
- Для режима масштабирования и правил применяется та же настройка, что и для условия по умолчанию.
- Выберите Specify start/end dates (Указать даты начала и окончания) для расписания.
- Выберите даты и время начала и окончания (когда следует применить условие масштабирования).

![Условие масштабирования на основе дат][10]

## <a name="view-the-scale-history-of-your-resource"></a>Просмотр журнала масштабирования ресурса
Каждый раз, когда ресурс масштабируется, в журнале действий регистрируется событие. Вы можете просмотреть журнал масштабирования ресурса за последние 24 часа, выбрав вкладку "Журнал запусков".

![Журнал выполнения][11]

Если вы хотите просмотреть полный журнал масштабирования (до 90 дней), можно выбрать Click here to see more details (Щелкните здесь, чтобы просмотреть дополнительные сведения). После этого запустится журнал действий вашего ресурса с предварительно выбранной категорией автомасштабирования.

## <a name="view-the-scale-definition-of-the-resource"></a>Просмотр определения масштабирования ресурса
Параметр автомасштабирования представляет собой ресурс ARM. Определение масштабирования можно просмотреть в JSON, перейдя на вкладку JSON.

![Определение масштабирования][12]

При необходимости можно внести изменения в JSON напрямую. Эти изменения будут зафиксированы после сохранения.

## <a name="disable-autoscale-and-manually-scale-your-instances"></a>Отключение автомасштабирования и масштабирование экземпляров вручную
Иногда необходимо отключить текущий параметр масштабирования и масштабировать ресурс вручную.

Нажмите кнопку Disable autoscale (Отключить автомасштабирование) в верхней части страницы.
![Отключение автомасштабирования][13]

Обратите внимание, этот параметр отключает конфигурацию. Вы еще можете вернуться к нему после повторного включения автомасштабирования. Теперь вы можете вручную задать количество экземпляров для масштабирования.

![Настройка масштабирования вручную][14]

К автомасштабированию можно вернуться в любое время, щелкнув Enable autoscale (Включить автомасштабирование), а затем "Сохранить".

<!--Reference-->
[1]:https://portal.azure.com
[2]: ./media/monitoring-autoscale-get-started/azure-monitor-launch.png
[3]: ./media/monitoring-autoscale-get-started/discover-autoscale-azure-monitor.png
[4]: https://docs.microsoft.com/en-us/azure/app-service-web/app-service-web-get-started-dotnet
[5]: ./media/monitoring-autoscale-get-started/scale-setting-new-web-app.png
[6]: ./media/monitoring-autoscale-get-started/create-scale-setting-web-app.png
[7]: ./media/monitoring-autoscale-get-started/scale-in-recommendation.png
[8]: ./media/monitoring-autoscale-get-started/scale-based-on-cpu.png
[9]: ./media/monitoring-autoscale-get-started/scale-condition-schedule.png
[10]: ./media/monitoring-autoscale-get-started/scale-condition-dates.png
[11]: ./media/monitoring-autoscale-get-started/scale-history.png
[12]: ./media/monitoring-autoscale-get-started/scale-definition-json.png
[13]: ./media/monitoring-autoscale-get-started/disable-autoscale.png
[14]: ./media/monitoring-autoscale-get-started/set-manualscale.png
