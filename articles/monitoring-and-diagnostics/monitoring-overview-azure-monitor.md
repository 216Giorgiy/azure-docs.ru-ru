---
title: Обзор Azure Monitor | Документация Майкрософт
description: Azure Monitor собирает статистику, которую можно использовать для оповещений, объектов webhook, автомасштабирования и автоматизации. В статье также перечислены другие возможности мониторинга Майкрософт.
author: rboucher
manager: carmonm
editor: ''
services: monitoring-and-diagnostics
documentationcenter: monitoring-and-diagnostics
ms.assetid: ''
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/28/2018
ms.author: robb
ms.custom: mvc
ms.openlocfilehash: 448711b7b2e102662bc157485561c33bf7f5fba1
ms.sourcegitcommit: 20d103fb8658b29b48115782fe01f76239b240aa
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/03/2018
---
# <a name="overview-of-azure-monitor"></a>Обзор Azure Monitor
В этой статье приведены общие сведения о службе Azure Monitor в Microsoft Azure. В ней объясняется назначение Azure Monitor, а также содержатся ссылки на дополнительные сведения об использовании этой службы.  Если вы желаете просмотреть видеоролик, ознакомьтесь с разделом "Дальнейшие действия" в конце этой статьи. 

## <a name="azure-monitor-and-microsofts-other-monitoring-products"></a>Azure Monitor и другие решения для мониторинга Майкрософт
Azure Monitor предоставляет метрики инфраструктуры базового уровня, а также журналы для большинства служб Microsoft Azure. Службы Azure, которые еще не добавляют данные в Azure Monitor, будут делать это в будущем.

Майкрософт поставляет дополнительные продукты и службы, которые обеспечивают расширенные возможности мониторинга для разработчиков, команды DevOps или ИТ-операций, которые также имеют локальные системы. Общие сведения о совместной работе этих разных продуктов и служб см. в статье [Обзор Azure Monitor](monitoring-overview.md).

## <a name="portal-overview-page"></a>Страница обзора портала

Azure Monitor имеет целевую страницу, которая поможет пользователям: 
- ознакомиться с возможностями мониторинга, предлагаемыми в Azure;
- найти, настроить и внедрить возможности платформы Azure мониторинга уровня "Премиум".

Эта страница является отправной точкой навигации, включая подключение. На ней представлены сведения о проверенных важных проблемах разных служб. Кроме того, она позволяет пользователям перейти к ним в контексте.
 
![Модель мониторинга и диагностики для невычислительных ресурсов](./media/monitoring-overview-azure-monitor/monitor-overview-ux2.png)

При открытии страницы можно выбрать подписку, для которой у вас есть доступ на чтение. Для выбранной подписки можно просмотреть следующие сведения:

- **Активированные оповещения и источники оповещений.** В этой таблице отображается общее количество оповещений, источников оповещений, а также количество выполненных оповещений за выбранный период времени. Информация касается и старых, и новых оповещений. Дополнительные сведения см. в статье [Новые возможности оповещений в Azure Monitor](monitoring-overview-unified-alerts.md). 
- **Ошибки в журнале действий.** Если какие-либо ресурсы Azure собирают данные событий с уровнем ошибки (серьезность), вы можете просмотреть их общее количество и перейти на страницу журнала действий, чтобы изучить каждое событие.
- **Служба работоспособности служб Azure.** Вы можете просмотреть количество проблем службы работоспособности служб, события планового обслуживания и рекомендации по работоспособности. Служба работоспособности служб Azure предоставляет персонализированную информацию, когда проблемы в инфраструктуре Azure влияют на ваши службы.  Дополнительные сведения см. в статье [Служба работоспособности служб Azure](../service-health/service-health-overview.md).  
- **Application Insights.** Ознакомьтесь с ключевыми показателями эффективности каждого ресурса AppInsights в текущей подписке. Ключевые показатели эффективности оптимизированы для мониторинга серверного приложения в веб-приложениях ASP.NET, Java, Node и общих типах приложений. Ключевые показатели эффективности содержат метрики по частоте запросов, длительности ответов, частоте сбоев и проценту доступности. 

Если вы не подключены к Log Analytics или Application Insights или в текущей подписке не настроены оповещения Azure, воспользуйтесь ссылками на странице, чтобы начать подключение.



## <a name="azure-monitor-sources---compute-subset"></a>Источники данных Azure Monitor. Подмножество вычислений

![Модель мониторинга и диагностики для невычислительных ресурсов](./media/monitoring-overview-azure-monitor/Monitoring_Azure_Resources-compute_v6.png)


К службам вычислений относятся: 
- Облачные службы 
- Виртуальные машины 
- Наборы для масштабирования виртуальных машин 
- Service Fabric

### <a name="application---diagnostics-logs-application-logs-and-metrics"></a>Приложения — журналы диагностики, журналы приложений и метрики
Приложения могут выполняться в гостевой ОС в рамках модели вычислений. Они выдают собственный набор журналов и метрик. Azure Monitor использует расширение системы диагностики Azure (Windows или Linux) для сбора множества метрик и журналов на уровне приложения, в частности:

* Счетчики производительности
* Журналы приложений
* Журналы событий Windows
* Источник событий .NET
* Журналы IIS
* Трассировка событий Windows на основе манифестов
* аварийные дампы;
* журналы ошибок пользователей.

Без расширения диагностики доступны только несколько метрик (например, загрузка ЦП). 

### <a name="host-and-guest-vm-metrics"></a>Метрики виртуальной машины узла и гостевой виртуальной машины
Перечисленные выше вычислительные ресурсы взаимодействуют с выделенной виртуальной машиной узла и гостевой ОС. Виртуальная машина узла и гостевая ОС являются эквивалентом корневой и гостевой виртуальной машины в модели гипервизора Hyper-V. Вы можете собирать метрики на обеих виртуальных машинах. Вы также можете собирать журналы диагностики на гостевой ОС.   

### <a name="activity-log"></a>Журнал действий
В журналах действий (которые ранее назывались операционными журналами или журналами аудита) вы можете искать информацию о ресурсе в контексте инфраструктуры Azure. Эти журналы содержат такие сведения, как время создания или удаления ресурсов.  Дополнительные сведения см. в статье [Общие сведения о журнале действий Azure](monitoring-overview-activity-logs.md). 

## <a name="azure-monitor-sources---everything-else"></a>Остальные источники данных Azure Monitor

![Модель мониторинга и диагностики для вычислительных ресурсов](./media/monitoring-overview-azure-monitor/Monitoring_Azure_Resources-non-compute_v6.png)


### <a name="resource---metrics-and-diagnostics-logs"></a>Ресурс — метрики и журналы диагностики
Доступные для сбора метрики и журналы диагностики отличаются в зависимости от типа ресурса. Например, веб-приложения предоставляют статистику по операциям ввода-вывода и загрузке ЦП в процентах. Для очереди служебной шины такие данные не существуют. Они предоставляют такие метрики, как размер очереди и пропускная способность для передачи сообщений. Список доступных для сбора метрик для каждого ресурса можно найти на странице сведений [о поддерживаемых метриках](monitoring-supported-metrics.md). 

### <a name="host-and-guest-vm-metrics"></a>Метрики виртуальной машины узла и гостевой виртуальной машины
Взаимно однозначное сопоставление ресурса и конкретной виртуальной машины узла или гостевой виртуальной машины необязательно, поэтому метрики недоступны.

### <a name="activity-log"></a>Журнал действий
Журнал действий такой же, как и для вычислительных ресурсов.  

## <a name="uses-for-monitoring-data"></a>Применение данных мониторинга
После сбора данных в Azure Monitor можно выполнять указанные ниже действия.

### <a name="route"></a>Маршрутизация
Вы можете передавать данные мониторинга в другие расположения. 

Примеры приведены ниже.

- Передача в Application Insights для использования расширенных средств визуализации и анализа.
- Отправка в концентраторы событий для передачи в сторонние средства. 

### <a name="store-and-archive"></a>Хранение и архивация
Некоторые данные мониторинга уже хранятся и доступны в Azure Monitor в течение определенного периода времени. 
- Метрики хранятся в течение 30 дней. 
- Записи журнала действий хранятся в течение 90 дней. 
- Журналы диагностики не хранятся вообще. 

Если вы хотите хранить данные более длительный период времени, можно использовать службу хранилища Azure. Данные мониторинга хранятся в учетной записи хранения на основе заданной политики хранения. За пространство, которое занимают данные в службе хранилища Azure, нужно платить. 

Вот несколько способов использования этих данных:

- После записи данные можно считывать и обрабатывать с помощью дополнительных инструментов в среде Azure или вне ее.
- Данные можно скачать на локальный компьютер и поместить в архив. Можно также изменить политику хранения в облаке для длительного хранения данных.  
- В целях архивации можно оставить данные в службе хранилища Azure на неопределенный срок. 

### <a name="query"></a>Запрос
Для доступа к данным в системе или службе хранилища Azure можно использовать REST API Azure Monitor, кроссплатформенные команды интерфейса командной строки, командлеты PowerShell или пакет SDK для .NET.

Примеры приведены ниже.

* Получение данных для пользовательского приложения мониторинга, созданного вами.
* Создание пользовательских запросов и отправка этих данных в стороннее приложение.

### <a name="visualize"></a>Визуализация
Визуализация данных мониторинга на графиках и диаграммах помогает находить тенденции намного быстрее, чем при просмотре самих данных.  

Ниже представлены некоторые способы визуализации.

* Использование портала Azure
* отправка данных в Azure Application Insights;
* отправка данных в Microsoft PowerBI;
* отправка данных в стороннее средство визуализации с помощью потоковой трансляции или использования инструмента для чтения из архива в службе хранилища Azure.


### <a name="automate"></a>Автоматизация
> [!NOTE]
> Мы работаем над функцией оповещений в Microsoft Azure, и теперь унифицированное представление для отображения предупреждений доступно. Дополнительные сведения см. в статье [Новые возможности оповещений в Azure Monitor](monitoring-overview-unified-alerts.md)

В оповещениях Azure можно использовать данные мониторинга для активации оповещений или даже целых процессов. Примеры приведены ниже.

* Использование данных для автомасштабирования вычислительных операций на основе нагрузки на приложение.
* Отправка сообщения электронной почты при достижении установленных для метрик условий или появлении записей в журнале. 
* Вызов URL-адреса (webhook) для выполнения действия в системе за пределами Azure.
* Запуск модуля Runbook в службе автоматизации Azure для разнообразных задач.

## <a name="methods-of-accessing-azure-monitor"></a>Методы доступа к Azure Monitor
В большинстве случаев для управления отслеживанием, маршрутизацией и извлечением данных можно использовать один из следующих методов. Не все методы доступны для всех действий или типов данных.

* [портал Azure](https://portal.azure.com)
* [PowerShell](insights-powershell-samples.md)  
* [Кроссплатформенный интерфейс командной строки](insights-cli-samples.md)
* [REST API](https://docs.microsoft.com/rest/api/monitor/)
* [ПАКЕТ SDK .NET](http://www.nuget.org/packages/Microsoft.Azure.Management.Monitor)

## <a name="next-steps"></a>Дополнительная информация
Кроме того, вы можете узнать больше о:
- Видеоруководство только по Azure Monitor доступно на странице  
[Начало работы с Azure Monitor](https://channel9.msdn.com/Blogs/Azure-Monitoring/Get-Started-with-Azure-Monitor). 
- Видеоруководство, в котором объясняется сценарий использования Azure Monitor, доступно на странице [Explore Microsoft Azure monitoring and diagnostics](https://channel9.msdn.com/events/Ignite/2016/BRK2234) (Обзор мониторинга и диагностики в Microsoft Azure) и [Azure Monitor in a video from Ignite 2016](https://myignite.microsoft.com/videos/4977) (Azure Monitor в видео с конференции Ignite 2016).
- Сведения по работе с интерфейсом Azure Monitor см. в [этой статье](monitoring-get-started.md).
- Настройте [расширения системы диагностики Azure](../azure-diagnostics.md), если вы пытаетесь диагностировать проблемы в работе облачной службы, виртуальной машины, масштабируемых наборов виртуальных машин или приложения Service Fabric.
- [Application Insights](https://azure.microsoft.com/documentation/services/application-insights/) , если вы пытаетесь диагностировать проблемы в работе веб-приложения службы приложений.
- [Устранении неполадок службы хранилища Azure](../storage/common/storage-e2e-troubleshooting.md) , если вы используете большие двоичные объекты, таблицы или очереди этой службы.
- [Log Analytics](https://azure.microsoft.com/documentation/services/log-analytics/) и пакет [Operations Management Suite](https://www.microsoft.com/oms/)
