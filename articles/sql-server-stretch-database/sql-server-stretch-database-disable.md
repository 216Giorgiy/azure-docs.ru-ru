<properties
	pageTitle="Отключение растяжения базы данных и возвращение удаленных данных | Microsoft Azure"
	description="Узнайте, как отключить растяжение базы данных для таблицы и при необходимости вернуть удаленные данные."
	services="sql-server-stretch-database"
	documentationCenter=""
	authors="douglaslMS"
	manager=""
	editor=""/>

<tags
	ms.service="sql-server-stretch-database"
	ms.workload="data-management"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="02/26/2016"
	ms.author="douglasl"/>

# Отключение растяжения базы данных и возвращение удаленных данных

Для отключения растяжения базы данных для таблицы выберите **Растяжение** для таблицы в SQL Server Management Studio. Затем выберите один из следующих вариантов.

-   **Отключение | Возврат данных из Azure**. Скопируйте удаленные данные для таблицы из Azure обратно на SQL Server, затем отключите растяжение базы данных для таблицы. Эта операция включает расходы, связанные с передачей данных, и не может быть отменена.

-   **Отключение | Сохранение данные в Azure**. Отключите растяжение базы данных для таблицы. Оставьте удаленные данные для таблицы в Azure.

После отключения растяжения базы данных для таблицы миграция данных останавливается и результаты запроса больше не включают результаты из удаленной таблицы.

Для отключения растяжения базы данных для таблицы или базы данных также можно использовать Transact-SQL.

Если вы хотите просто приостановить миграцию данных, обратитесь к разделу [Приостановка и возобновление растяжения базы данных](sql-server-stretch-database-pause.md).

**Примечание.** Отключение базы данных Stretch не приводит к удалению удаленных объектов. Если вы хотите удалить удаленную таблицу или базу данных, ее необходимо удалить с помощью портала управления Azure.

## Отключение растяжения базы данных для таблицы

### Отключение растяжения базы данных для таблицы с помощью SQL Server Management Studio

1.  В среде SQL Server Management Studio в обозревателе объектов выберите таблицу, для которой необходимо отключить растяжение базы данных.

2.  Щелкните эту таблицу правой кнопкой мыши и выберите пункт **Растяжение**, а затем выберите один из следующих параметров.

    -   **Отключение | Возврат данных из Azure**. Скопируйте удаленные данные для таблицы из Azure обратно на SQL Server, затем отключите растяжение базы данных для таблицы. Эта операция не может быть отменена.

        Эта операция включает расходы, связанные с передачей данных. Дополнительные сведения см. в разделе [Сведения о ценах — передача данных](https://azure.microsoft.com/pricing/details/data-transfers/).

        После копирования всех удаленных данных из Azure обратно на SQL Server растяжение для таблицы отключается.

    -   **Отключение | Сохранение данных в Azure**. Отключите растяжение базы данных для таблицы. Оставьте удаленные данные для таблицы в Azure.

    Отключение базы данных Stretch не приводит к удалению удаленной таблицы. Если вы хотите удалить удаленную таблицу, ее необходимо удалить с помощью портала управления Azure.

### Отключение растяжения базы данных для таблицы с помощью Transact-SQL

-   Чтобы отключить Stretch для таблицы и скопировать удаленные данные для таблицы из Azure обратно в SQL Server, выполните следующую команду. Эта операция не может быть отменена.

    ```tsql
    ALTER TABLE <table name>
       SET ( REMOTE_DATA_ARCHIVE ( MIGRATION_STATE = INBOUND ) ) ;
    ```
    Эта операция включает расходы, связанные с передачей данных. Дополнительные сведения см. в разделе [Сведения о ценах — передача данных](https://azure.microsoft.com/pricing/details/data-transfers/).

    После копирования всех удаленных данных из Azure обратно на SQL Server растяжение для таблицы отключается.

-   Чтобы отключить растяжение для таблицы и оставить удаленные данные в Azure, выполните следующую команду.

    ```tsql
    ALTER TABLE <table_name>
       SET ( REMOTE_DATA_ARCHIVE = OFF_WITHOUT_DATA_RECOVERY ( MIGRATION_STATE = PAUSED ) ) ;
    ```
Отключение базы данных Stretch не приводит к удалению удаленной таблицы. Если вы хотите удалить удаленную таблицу, ее необходимо удалить с помощью портала управления Azure.

## Отключение растяжения базы данных для базы данных
Перед отключением растяжения базы данных для базы данных необходимо отключить его для отдельных таблиц базы данных, для которых оно было включено.

Отключение базы данных Stretch не приводит к удалению удаленной базы данных. Если вы хотите удалить удаленную базу данных, ее необходимо удалить с помощью портала управления Azure.

### Отключение растяжения базы данных для базы данных с помощью SQL Server Management Studio

1.  В среде SQL Server Management Studio в обозревателе объектов выберите базу данных, для которой необходимо отключить растяжение базы данных.

2.  Щелкните эту базу данных правой кнопкой мыши и выберите **Задачи**, затем **Растяжение** и **Отключить**.

### Отключение растяжения базы данных для базы данных с помощью Transact-SQL
Выполните следующую команду:

```tsql
ALTER DATABASE <database name>
    SET REMOTE_DATA_ARCHIVE = OFF ;
```

## См. также

[Параметры ALTER DATABASE SET (Transact-SQL)](https://msdn.microsoft.com/library/bb522682.aspx)

[Приостановите и возобновите растяжение баз данных](sql-server-stretch-database-pause.md)

<!---HONumber=AcomDC_0316_2016-->