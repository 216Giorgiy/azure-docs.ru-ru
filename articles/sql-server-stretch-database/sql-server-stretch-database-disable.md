---
title: "Отключение базы данных Stretch и возврат удаленных данных | Документация Майкрософт"
description: "Узнайте, как отключить растяжение базы данных для таблицы и при необходимости вернуть удаленные данные."
services: sql-server-stretch-database
documentationcenter: 
author: douglaslMS
manager: jhubbard
editor: 
ms.assetid: 08291748-0dfd-4a7d-a6a4-a5618e9c248d
ms.service: sql-server-stretch-database
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/05/2016
ms.author: douglasl
translationtype: Human Translation
ms.sourcegitcommit: 2ea002938d69ad34aff421fa0eb753e449724a8f
ms.openlocfilehash: a140e89058f6a246e80b71248b82d0f6767337cb


---
# <a name="disable-stretch-database-and-bring-back-remote-data"></a>Отключение растяжения базы данных и возвращение удаленных данных
Для отключения растяжения базы данных для таблицы выберите **Перенос** для таблицы в SQL Server Management Studio. Затем выберите один из следующих вариантов.

* **Отключить | Вернуть данные из Azure**. Скопируйте удаленные данные для таблицы из Azure обратно на SQL Server, затем отключите растяжение базы данных для таблицы. Эта операция включает расходы, связанные с передачей данных, и не может быть отменена.
* **Отключить | Оставить данные в Azure**. Отключите растяжение базы данных для таблицы.  Оставьте удаленные данные для таблицы в Azure.

Чтобы отключить базу данных Stretch для таблицы или базы данных, также можно использовать Transact\-SQL.

После отключения растяжения базы данных для таблицы миграция данных останавливается и результаты запроса больше не включают результаты из удаленной таблицы.

Сведения о приостановке переноса данных см. в статье [Приостановка и возобновление переноса данных (база данных Stretch)](sql-server-stretch-database-pause.md).

> [!NOTE]
> Отключение базы данных Stretch для таблицы или базы данных не приводит к удалению удаленного объекта. Если вы хотите удалить удаленную таблицу или базу данных, ее необходимо удалить с помощью портала управления Azure. За хранение удаленных объектов в Azure по-прежнему будет взиматься плата, пока вы не удалите их. Дополнительные сведения о ценах на использование базы данных SQL Server Stretch см. на [этой странице](https://azure.microsoft.com/pricing/details/sql-server-stretch-database/).
> 
> 

## <a name="disable-stretch-database-for-a-table"></a>Отключение растяжения базы данных для таблицы
### <a name="use-sql-server-management-studio-to-disable-stretch-database-for-a-table"></a>Отключение растяжения базы данных для таблицы с помощью SQL Server Management Studio
1. В среде SQL Server Management Studio в обозревателе объектов выберите таблицу, для которой необходимо отключить растяжение базы данных.
2. Щелкните эту таблицу правой кнопкой мыши, выберите пункт **Stretch**, а затем — один из следующих параметров:
   
   * **Отключить | Вернуть данные из Azure**. Скопируйте удаленные данные для таблицы из Azure обратно на SQL Server, затем отключите растяжение базы данных для таблицы. Эта операция не может быть отменена.
     
     > [!NOTE]
     > При копировании удаленных данных для таблицы из Azure обратно на сервер SQL Server взимается плата за передачу данных. Дополнительные сведения см. на странице [Сведения о стоимости пропускной способности](https://azure.microsoft.com/pricing/details/data-transfers/).
     > 
     > 
     
     После копирования всех удаленных данных из Azure обратно на SQL Server растяжение для таблицы отключается.
   * **Отключить | Оставить данные в Azure**. Отключите растяжение базы данных для таблицы.  Оставьте удаленные данные для таблицы в Azure.
   
   > [!NOTE]
   > Отключение базы данных Stretch для таблицы не приводит к удалению удаленных данных или удаленной таблицы. Если вы хотите удалить удаленную таблицу, ее необходимо удалить с помощью портала управления Azure. За хранение удаленной таблицы в Azure по-прежнему будет взиматься плата, пока вы не удалите ее. Дополнительные сведения о ценах на использование базы данных SQL Server Stretch см. на [этой странице](https://azure.microsoft.com/pricing/details/sql-server-stretch-database/).
   > 
   > 

### <a name="use-transact-sql-to-disable-stretch-database-for-a-table"></a>Отключение базы данных Stretch для таблицы с помощью Transact-SQL
* Чтобы отключить Stretch для таблицы и скопировать удаленные данные для таблицы из Azure обратно в SQL Server, выполните следующую команду. После копирования всех удаленных данных из Azure обратно на SQL Server растяжение для таблицы отключается.
  
  Эта операция не может быть отменена.
  
  ```tsql
  USE <Stretch-enabled database name>;
  GO
  ALTER TABLE <Stretch-enabled table name>  
     SET ( REMOTE_DATA_ARCHIVE ( MIGRATION_STATE = INBOUND ) ) ;
  GO
  ```
  > [!NOTE]
  > При копировании удаленных данных для таблицы из Azure обратно на сервер SQL Server взимается плата за передачу данных. Дополнительные сведения см. на странице [Сведения о стоимости пропускной способности](https://azure.microsoft.com/pricing/details/data-transfers/).
  > 
  > 
* Чтобы отключить растяжение для таблицы и оставить удаленные данные в Azure, выполните следующую команду.
  
  ```tsql
  ALTER TABLE <table_name>
     SET ( REMOTE_DATA_ARCHIVE = OFF_WITHOUT_DATA_RECOVERY ( MIGRATION_STATE = PAUSED ) ) ;
  ```

> [!NOTE]
> Отключение базы данных Stretch для таблицы не приводит к удалению удаленных данных или удаленной таблицы. Если вы хотите удалить удаленную таблицу, ее необходимо удалить с помощью портала управления Azure. За хранение удаленной таблицы в Azure по-прежнему будет взиматься плата, пока вы не удалите ее. Дополнительные сведения о ценах на использование базы данных SQL Server Stretch см. на [этой странице](https://azure.microsoft.com/pricing/details/sql-server-stretch-database/).
> 
> 

## <a name="disable-stretch-database-for-a-database"></a>Отключение растяжения базы данных для базы данных
Перед отключением базы данных Stretch для базы данных необходимо отключить ее для отдельных таблиц с поддержкой Stretch.

### <a name="use-sql-server-management-studio-to-disable-stretch-database-for-a-database"></a>Отключение растяжения базы данных для базы данных с помощью SQL Server Management Studio
1. В среде SQL Server Management Studio в обозревателе объектов выберите базу данных, для которой необходимо отключить растяжение базы данных.
2. Щелкните эту базу данных правой кнопкой мыши и выберите \-Задачи**, **Stretch** и **Отключить**.

> [!NOTE]
> Отключение базы данных Stretch для базы данных не приводит к удалению удаленной базы данных. Если вы хотите удалить удаленную базу данных, ее необходимо удалить с помощью портала управления Azure. За хранение удаленной базы данных в Azure по-прежнему будет взиматься плата, пока вы не удалите ее. Дополнительные сведения о ценах на использование базы данных SQL Server Stretch см. на [этой странице](https://azure.microsoft.com/pricing/details/sql-server-stretch-database/).
> 
> 

### <a name="use-transact-sql-to-disable-stretch-database-for-a-database"></a>Отключение базы данных Stretch для базы данных с помощью Transact-SQL
Выполните следующую команду:

```tsql
ALTER DATABASE <database name>
    SET REMOTE_DATA_ARCHIVE = OFF ;
```

> [!NOTE]
> Отключение базы данных Stretch для базы данных не приводит к удалению удаленной базы данных. Если вы хотите удалить удаленную базу данных, ее необходимо удалить с помощью портала управления Azure. За хранение удаленной базы данных в Azure по-прежнему будет взиматься плата, пока вы не удалите ее. Дополнительные сведения о ценах на использование базы данных SQL Server Stretch см. на [этой странице](https://azure.microsoft.com/pricing/details/sql-server-stretch-database/).
> 
> 

## <a name="see-also"></a>Дополнительные материалы
[Параметры ALTER DATABASE SET (Transact-SQL)](https://msdn.microsoft.com/library/bb522682.aspx)

[Приостановите и возобновите растяжение баз данных](sql-server-stretch-database-pause.md)




<!--HONumber=Nov16_HO3-->


