<properties
	pageTitle="Общие сведения о базе данных Stretch | Microsoft Azure"
	description="В этой статье содержатся сведения о том, как база данных Stretch позволяет прозрачно и безопасно переносить ";холодные"; данные в облако Microsoft Azure."
	services="sql-server-stretch-database"
	documentationCenter=""
	authors="douglaslMS"
	manager=""
	editor=""/>

<tags
	ms.service="sql-server-stretch-database"
	ms.workload="data-management"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="get-started-article"
	ms.date="06/14/2016"
	ms.author="douglasl"/>

# Общие сведения о базе данных Stretch

База данных Stretch позволяет прозрачно и безопасно переносить "холодные" (редко используемые) данные в облако Microsoft Azure.

Если требуется немедленно приступить к работе с базой данных Stretch, см. раздел [Get started by running the Enable Database for Stretch Wizard](sql-server-stretch-database-wizard.md).

## Каковы преимущества базы данных Stretch?
База данных Stretch обеспечивает следующие преимущества.

**Экономия средств при доступе к редко используемым данным.** База данных SQL Server Stretch позволяет выполнять динамическое расширение как редко, так и часто используемых данных о транзакциях из SQL Server в Microsoft Azure. В отличие от обычных хранилищ для редко используемых данных, эта функция обеспечивает доступность данных и возможность отправки запросов к ним в любой момент. Вы можете хранить данные дольше и без дополнительных издержек на использование больших таблиц с такими данными, как история клиентских заказов. Использовать Azure гораздо выгоднее по сравнению с масштабированием дорогостоящего локального хранилища. Вы выбираете ценовую категорию и настраиваете параметры на портале Azure, управляя расходами. Масштаб можно увеличивать и уменьшать по необходимости. Подробные сведения см. на [странице с ценами на SQL Server Stretch Database](https://azure.microsoft.com/pricing/details/sql-server-stretch-database/).

**Отсутствие необходимости в изменении запросов или приложений.** Вы можете без проблем получать доступ к данным SQL Server независимо от их расположения (локально или в облаке). Вы задаете политику, определяющую, где хранятся данные, а SQL Server обрабатывает перемещение данных в фоновом режиме. Так таблица всегда остается подключенной к сети и доступной для запросов. Кроме того, при использовании базы данных Stretch не требуется вносить изменения в существующие запросы или приложения — расположение данных прозрачно для приложения.

**Оптимизация локального обслуживания данных.** Вы можете сократить издержки на локальное обслуживание и хранение данных. Резервное копирование данных, хранимых в облаке, выполняется автоматически. Резервное копирование локальных данных выполняется быстрее и не выходит за рамки периода обслуживания. Ваши потребности в локальных системах хранения значительно сокращаются. Затраты на хранилище Azure могут быть на 80 % ниже, чем на локальное хранилище SSD.

**Возможность защиты данных даже во время их переноса.** Вам больше не нужно ни о чем беспокоиться при безопасном расширении наиболее важных приложений в облако. Функция постоянного шифрования SQL Server обеспечивает шифрование данных на ходу. Безопасность на уровне строк (RLS) и другие дополнительные функции безопасности SQL Server также используются для защиты данных при работе с базой данных Stretch.

## Каковы возможности базы данных Stretch?
Когда вы включаете базу данных Stretch для экземпляра SQL Server, базу данных и хотя бы одну таблицу, начинается автоматический перенос "холодных" данных в Azure.

-   Если "холодные" данные хранятся в отдельной таблице, можно перенести всю таблицу.

-   Если таблица содержит как "горячие" (активные), так и "холодные" данные, можно указать предикат фильтра, чтобы выбрать строки для переноса.

Использование базы данных Stretch гарантирует сохранность данных в случае, если в ходе переноса произойдет сбой. В этой функции также предусмотрена логика повторных попыток для обработки проблем с подключением, которые могут возникнуть во время переноса. В динамическом административном представлении отображается состояние переноса данных.

Вы можете приостановить перенос данных, чтобы устранить неполадки на локальном сервере или увеличить пропускную способность сети.

При этом вносить изменения в существующие запросы и клиентские приложения не требуется. Кроме того, вы по-прежнему можете обращаться к локальным и удаленным данным — даже во время переноса данных. Хотя обработка удаленных запросов сопровождается небольшой задержкой, это происходит только при обращении к "холодным" данным.

![Общие сведения о базе данных Stretch][StretchOverviewImage1]

## Нужно ли вам использовать базу данных Stretch?
Если вы согласны с приведенными ниже утверждениями, это значит, что использование базы данных Stretch может оказаться полезным для вас.

|Вы отвечаете за принятие решений|Вы администратор базы данных|
|------------------------------|-------------------|
|Мне нужно хранить данные о транзакциях в течение длительного времени.|Размер таблиц изменяется неконтролируемо.|
|Иногда мне нужно отправлять запросы к "холодным" данным.|Мои пользователи просят предоставить им доступ к "холодным" данным, но они редко к их используют.|
|У меня есть приложения, в том числе старые, которые я не хочу обновлять.|Время от времени мне приходится приобретать дополнительные системы хранения.|
|Я хочу сократить расходы на системы хранения.|Мне не удается ни создавать резервные копии крупных таблиц в рамках соглашения об уровне обслуживания, ни восстанавливать их.|

## Какие базы данных и таблицы можно использовать с базой данных Stretch?
База данных Stretch предназначена для транзакционных баз данных, в которых хранятся большие объемы "холодных" данных — как правило, в нескольких таблицах. Такие таблицы могут содержать более миллиарда строк.

Если в SQL Server 2016 вы используете функцию временной таблицы, база данных Stretch позволит вам перенести всю связанную таблицу с данными за прошедшие периоды или ее часть в низкозатратное хранилище в Azure. Дополнительные сведения см. в статье [Manage Retention of Historical Data in System-Versioned Temporal Tables](https://msdn.microsoft.com/library/mt637341.aspx).

Запустите помощник по базе данных Stretch (функция SQL Server 2016), чтобы определить базы данных и таблицы, для которых можно включить функцию расширения. Дополнительные сведения см. в статье [Identify databases and tables for Stretch Database](sql-server-stretch-database-identify-databases.md). Дополнительные сведения о возможных критических препятствиях см. в статье [Ограничения для базы данных Stretch](sql-server-stretch-database-limitations.md).

## <a name="FAQ"></a>Часто задаваемые вопросы о базе данных Stretch
**Поддерживает ли база данных Stretch компонент &lt;имя компонента SQL Server&gt;?**
-   Список компонентов SQL Server, вызывающих несовместимость таблицы с базой данных Stretch, см. в статье [Ограничения для базы данных Stretch](sql-server-stretch-database-limitations.md).

-   Также вы можете загрузить помощник по обновлению SQL Server 2016 и запустить помощник по базе данных Stretch, чтобы определить базы данных и таблицы, для которых можно включить функцию расширения. Дополнительные сведения см. в статье [Identify databases and tables for Stretch Database](sql-server-stretch-database-identify-databases.md).

**Можно ли назначить базе данных Stretch другой локальный экземпляр SQL Server?** Нет. База данных Stretch не поддерживает назначение другого локального экземпляра SQL Server в качестве удаленной конечной точки.

**Можно ли отключить базу данных Stretch и переместить перенесенные данные обратно в локальную таблицу?** Да. Дополнительные сведения см. в статье [Disable Stretch Database and bring back remote data](sql-server-stretch-database-disable.md).

## Термины
**Локальная база данных**. Локальная база данных SQL Server.

**Удаленная конечная точка**. Расположение в Microsoft Azure, в котором содержатся удаленные данные базы данных.

**Локальные данные**. Данные в базе данных с включенной функцией расширения, которые не будут перемещены в Azure на основе конфигурации содержащихся в базе данных таблиц с включенным расширением.

**Подходящие данные**. Данные в базе данных с включенной функцией расширения, которые еще не перемещены, но будут перемещены в Azure на основе конфигурации содержащихся в базе данных таблиц с включенным расширением.

**Удаленные данные**. Данные в базе данных с включенной функцией расширения, которые уже перемещены в Azure.

## Архитектура
База данных Stretch использует ресурсы в Microsoft Azure, помогая разгрузить хранилища архивных данных и систему обработки запросов.

Включая в базе данных функцию расширения, вы создаете в локальной среде SQL Server безопасное определение связанного сервера. Для такого определения связанного сервера в качестве целевого расположения используется удаленная конечная точка. При включении функции расширения в таблице, которая входит в базу данных, выполняется подготовка удаленных ресурсов с последующим запуском переноса подходящих данных (если функция переноса включена).

Запросы к таблицам с включенным расширением выполняются автоматически как для локальной базы данных, так и для удаленной конечной точки. База данных Stretch использует вычислительные мощности среды Azure, чтобы выполнять запросы к удаленным данным, перезаписывая эти запросы. Эта перезапись реализована в виде оператора удаленного запроса в новом плане запроса.

![Архитектура базы данных Stretch][StretchOverviewImage2]

## Безопасность и разрешения

### Включение и отключение базы данных Stretch для экземпляра SQL Server
Чтобы настроить базы данных для базы данных Stretch, следует сначала, используя sp\_configure, изменить на уровне экземпляра параметр конфигурации "удаленный архив данных". Для выполнения этой операции требуются привилегии sysadmin или serveradmin. Включив этот параметр, вы можете настраивать базы данных для использования функции расширения, переноса данных, а также отправки запросов к удаленной конечной точке на получение данных.

### Включение и отключение базы данных Stretch для базы данных или таблицы
Чтобы настроить в базе данных возможность расширения, необходимо разрешение CONTROL DATABASE. Кроме того, вам нужно предоставить учетные данные администратора для удаленной конечной точки.

Чтобы настроить в таблице возможность расширения, необходимо разрешение ALTER для таблицы, а в самой базе данных должна быть включена поддержка функции расширения.

### Доступ к данным
Только системные процессы могут обращаться к определению связанного сервера, которое используется базой данных Stretch. Учетные данные для входа не могут использоваться для отправки запросов к удаленной конечной точке через определение связанного сервера.

База данных Stretch не изменяет модель разрешений существующей базы данных. Учетные данные для входа могут использоваться для отправки запросов к данным в таблице с включенной функцией расширения через локальную базу данных. Локальная база данных проверяет разрешения на выполнение любых действий по инициативе пользователя так же, как и для других объектов. Когда вы получаете разрешение на доступ к таблице с включенной функцией расширения, вы также получаете разрешение на доступ к ее содержимому — независимо от того, где физически хранятся данные.

![Модель доступа к данным базы данных Stretch][StretchOverviewImage3]

## Тестирование базы данных Stretch
**Тестирование базы данных Stretch с использованием примера базы данных AdventureWorks.** Чтобы получить пример базы данных AdventureWorks, скачайте [отсюда](https://www.microsoft.com/download/details.aspx?id=49502) минимальный набор данных: файл базы данных, а также примеры и файл сценариев. Когда вы восстановите пример базы данных в экземпляре SQL Server 2016, распакуйте файл с примерами, а затем откройте файл с примерами базы данных Stretch из соответствующей папки. Выполните скрипты из этого файла. Так вы сможете: 1) проверить используемое пространство до и после включения функции расширения; 2) отследить ход переноса данных; 3) убедиться в том, что вы и дальше можете отправлять запросы к существующим данным, а также вставлять новые данные как во время, так и после переноса.

## Дальнейшие действия
**Определение баз данных и таблиц, которые можно использовать с базой данных Stretch.** Загрузите помощник по обновлению SQL Server 2016 и запустите помощник по базе данных Stretch, чтобы определить базы данных и таблицы, для которых можно включить функцию расширения. Помощник по базе данных Stretch также определит критические препятствия. Дополнительные сведения см. в статье [Identify databases and tables for Stretch Database](sql-server-stretch-database-identify-databases.md).

<!--Image references-->
[StretchOverviewImage1]: ./media/sql-server-stretch-database-overview/StretchDBOverview.png
[StretchOverviewImage2]: ./media/sql-server-stretch-database-overview/StretchDBOverview1.png
[StretchOverviewImage3]: ./media/sql-server-stretch-database-overview/StretchDBOverview2.png

<!---HONumber=AcomDC_0622_2016-->