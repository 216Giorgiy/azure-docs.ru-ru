<properties
	pageTitle="Начало работы с запуском мастера ";Включение базы данных Stretch"; | Microsoft Azure"
	description="Узнайте, как настроить растяжение для базы данных, запустив мастер включения растяжения базы данных."
	services="sql-server-stretch-database"
	documentationCenter=""
	authors="douglaslMS"
	manager=""
	editor=""/>

<tags
	ms.service="sql-server-stretch-database"
	ms.workload="data-management"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="hero-article"
	ms.date="06/14/2016"
	ms.author="douglasl"/>

# Начало работы с запуска мастера "Включение базы данных Stretch"

Для настройки растяжения базы данных запустите мастер "Включение базы данных для растяжения". В этом разделе описываются сведения, которые необходимо ввести, и варианты, которые необходимо выбрать в мастере.

Дополнительные сведения о растяжении баз данных см. в разделе [Растяжение баз данных](sql-server-stretch-database-overview.md).

## Запуск мастера

1.  В среде SQL Server Management Studio в обозревателе объектов выберите базу данных, для которой необходимо включить растяжение.

2.  Щелкните по этой базе данных правой кнопкой мыши и выберите **Задачи**, затем **Растяжение** и **Включить** для запуска мастера.

## <a name="Intro"></a>Введение
Проверьте назначение мастера и необходимые компоненты.

Ниже перечислены важные предварительные требования.
-   Для изменения параметров базы данных необходимо иметь права администратора.
-   Требуется подписка Microsoft Azure.
-   В SQL Server должна быть настроена связь с удаленным сервером Azure.

![Вводная страница в мастере базы данных Stretch][StretchWizardImage1]

## <a name="Tables"></a>Выбор таблиц
Выберите таблицы, которые необходимо включить для растяжения.

Таблицы с большим количеством строк отображаются в верхней части отсортированного списка. Прежде чем вывести список таблиц, мастер анализирует данные таблиц, чтобы обнаружить типы данных, которые в настоящее время не поддерживаются для базы данных Stretch.

![Страница выбора таблиц в мастере базы данных Stretch][StretchWizardImage2]

|столбец|Описание|
|----------|---------------|
|(без названия)|Установите флажок в этом столбце для включения растяжения для выбранной таблицы.|
|**Имя**|Указывает имя столбца в таблице.|
|(без названия)|Символ в этом столбце означает предупреждение, однако оно не предотвращает включение растяжения для выбранной таблицы. Кроме того, он может обозначать критическое препятствие, из-за которого для выбранной таблицы невозможно включить растяжение, например, потому что в таблице используется неподдерживаемый тип данных. Наведите указатель мыши на символ для отображения дополнительных сведений во всплывающей подсказке. Дополнительные сведения см. в статье об [ограничениях для базы данных Stretch](sql-server-stretch-database-limitations.md).|
|**Растяжение включено**|Указывает, включено ли уже растяжение для таблицы.|
|**Миграция**|Можно перенести всю таблицу (**Вся таблица**) или указать фильтр в колонке таблицы. Если вы хотите использовать для выбора строк при миграции другой предикат фильтра, после выхода из мастера выполните инструкцию ALTER TABLE и укажите нужный предикат фильтра. Дополнительные сведения о предикате фильтра см. в статье [Select rows to migrate by using a filter predicate](sql-server-stretch-database-predicate-function.md) (Выбор строк для переноса с помощью предиката фильтра). Дополнительные сведения об использовании предиката см. в статье [Enable Stretch Database for a table](sql-server-stretch-database-enable-table.md) (Включение базы данных Stretch для таблицы) и в описании инструкции [ALTER TABLE (Transact-SQL)](https://msdn.microsoft.com/library/ms190273.aspx).|
|**строки**|Указывает количество строк в таблице.|
|**Размер (КБ)**|Указывает размер таблицы в КБ.|

## <a name="Filter"></a>Указание фильтра строк при необходимости

Если вы хотите указать предикат фильтра для выбора строк при миграции, выполните следующие действия на странице **Выбор таблиц**.

1.  В списке **Select the tables you want to stretch** (Выберите таблицы, которые нужно растянуть) выберите для нужной таблицы значение **Вся таблица**. Откроется диалоговое окно **Select rows to stretch** (Выбор строк для растяжения).

    ![Определение предиката фильтра][StretchWizardImage2a]

2.  В диалоговом окне **Select rows to stretch** (Выбор строк для растяжения) установите переключатель **Choose Rows** (Выбор строк).

3.  В поле **Имя** укажите имя для предиката фильтра.

4.  В условии **Where** выберите столбец из таблицы, выберите оператор и укажите значение.

5. Щелкните **Проверка**, чтобы протестировать предикат. Тест будет считаться пройденным **успешно**, если заданный предикат возвращает из таблицы результаты, то есть существуют строки, которые соответствуют указанному условию.

    >   [AZURE.NOTE] Текстовое поле, в котором отображается запрос фильтра, доступно только для чтения. Поэтому в нем невозможно изменить запрос.

6.  Нажмите кнопку "Готово", чтобы вернуться к странице **Выбор таблиц**.

Функция фильтра создается в SQL Server только после завершения работы мастера. Пока вы можете вернуться на страницу **Выбор таблиц**, чтобы изменить или переименовать функцию фильтра.

![Страница "Выбор таблиц" после определения предиката фильтра][StretchWizardImage2b]

Если вы хотите использовать другой тип предиката фильтра, чтобы выбрать строки для переноса, выполните одну из следующих процедур.

-   Закройте мастер и выполните инструкцию ALTER TABLE, чтобы применить режим Stretch для таблицы и указать предикат. Дополнительные сведения см. в статье [Enable Stretch Database for a table](sql-server-stretch-database-enable-table.md) (Включение базы данных Stretch для таблицы).  

-   Выполните инструкцию ALTER TABLE, чтобы указать предикат после выхода из мастера. Необходимые действия см. в разделе [Add a filter predicate after running the Wizard](sql-server-stretch-database-predicate-function.md#addafterwiz) (Добавление предиката фильтра после запуска мастера).

## <a name="Configure"></a>Настройка развертывания в Azure

1.  Войдите в Microsoft Azure с учетной записью Майкрософт.

    ![Вход в Azure — мастер базы данных Stretch][StretchWizardImage3]

2.  Выберите имеющуюся подписку Azure, которая будет использоваться для базы данных Stretch.

3.  Выберите регион Azure.
    -   Новый сервер будет создан в этом регионе.  
    -   Есть в выбранном регионе есть серверы, мастер отображает их при выборе параметра **Existing server** (Имеющийся сервер).

    Чтобы свести к минимуму задержки, выберите регион Azure, в котором находится ваш сервер SQL Server. Дополнительные сведения о регионах см. в статье [Регионы Azure](https://azure.microsoft.com/regions/).

4.  Укажите, следует ли использовать существующий сервер или создать новый сервер Azure.

    Если Active Directory на сервере SQL Server включена в федерацию с Azure Active Directory, то для взаимодействия с удаленным сервером Azure при необходимости можно использовать учетную запись службы федерации для SQL Server. Дополнительные сведения о требованиях для этого параметра см. в статье [Параметры инструкции ALTER DATABASE SET (Transact-SQL)](https://msdn.microsoft.com/library/bb522682.aspx).

	-   **Создание сервера**

        1.  Создайте имя входа и пароль администратора сервера.

        2.  При необходимости используйте учетную запись службы федерации для SQL Server для взаимодействия с удаленным сервером Azure.

		![Создание нового сервера Azure — мастер базы данных Stretch][StretchWizardImage4]

    -   **Существующий сервер**

        1.  Выберите имеющийся сервер Azure.

        2.  Выберите метод проверки подлинности.

            -   При выборе параметра **Аутентификация SQL Server** необходимо указать имя для входа и пароль администратора.

            -   Выберите параметр **Встроенная проверка подлинности Active Directory**, чтобы использовать федеративную учетную запись службы для SQL Server для взаимодействия с удаленным сервером Azure. Если выбранный сервер не интегрирован с Azure Active Directory, этот параметр не отображается.

		![Выбор существующего сервера Azure — мастер базы данных Stretch][StretchWizardImage5]

## <a name="Credentials"></a>Защита учетных данных
У вас должен быть главный ключ базы данных для защиты учетных данных, используемых для подключения к удаленной базе данных, использующей растяжение базы данных.

Если главный ключ базы данных уже существует, введите пароль для него.

![Страница защиты учетных данных в мастере базы данных Stretch][StretchWizardImage6b]

Если у базы данных нет главного ключа, введите надежный пароль, чтобы создать главный ключ базы данных.

![Страница защиты учетных данных в мастере базы данных Stretch][StretchWizardImage6]

Дополнительные сведения о главном ключе базы данных см. в статьях [CREATE MASTER KEY (Transact-SQL)](https://msdn.microsoft.com/library/ms174382.aspx) и [Создание главного ключа базы данных](https://msdn.microsoft.com/library/aa337551.aspx). Дополнительные сведения об учетных данных, создаваемых мастером, см. в статье [CREATE DATABASE SCOPED CREDENTIAL (Transact-SQL)](https://msdn.microsoft.com/library/mt270260.aspx).

## <a name="Network"></a>Выбор IP-адреса
Используйте диапазон IP-адресов подсети (рекомендуется) или общедоступный IP-адрес сервера SQL Server, чтобы создать правило брандмауэра в Azure, которое позволит SQL Server обмениваться данными с удаленным сервером Azure.

Используя указанные на этой странице IP-адреса, сервер Azure пропускает входящие данные, запросы и операции управления, инициированные сервером SQL Server, через брандмауэр Azure. Мастер не изменяет параметры брандмауэра на сервере SQL Server.

![Страница выбора IP-адреса в мастере базы данных Stretch][StretchWizardImage7]

## <a name="Summary"></a>Сводка
Просмотрите введенные значения и параметры, выбранные в мастере, а также расчетную стоимость в Azure. Затем нажмите кнопку **Готово**, чтобы включить растяжение.

![Страница сводных данных в мастере базы данных Stretch][StretchWizardImage8]

## <a name="Results"></a>Результаты
Просмотрите результаты.

Сведения о мониторинге переноса данных см. в статье [Monitor and troubleshoot data migration (Stretch Database)](sql-server-stretch-database-monitor.md) (Мониторинг и устранение неполадок переноса данных (база данных Stretch)).

![Страница результатов в мастере базы данных Stretch][StretchWizardImage9]

## <a name="KnownIssues"></a>Устранение неполадок мастера
**Мастер растяжения базы данных завершил работу неудачно.** Если растяжение баз данных еще не включено на уровне сервера системным администратором и вы запускаете мастер, то его работа завершится неудачно. Попросите системного администратора включить растяжение базы данных на экземпляре локального сервера и затем снова запустите мастер. Дополнительные сведения см. в разделе [Prerequisite: Permission to enable Stretch Database on the server](sql-server-stretch-database-enable-database.md#EnableTSQLServer) (Необходимое условие: разрешение на включение базы данных Stretch на сервере).

## Дальнейшие действия
Включите растяжение базы данных в других таблицах. Отслеживайте миграцию данных и управляйте базами данных и таблицами, для которых включено растяжение.

-   Выполните инструкции из статьи [Enable Stretch Database for a table](sql-server-stretch-database-enable-table.md) (Включение растяжения базы данных для таблицы), чтобы применить растяжение для дополнительных таблиц.

-   Выполните инструкции из статьи [Monitor and troubleshoot data migration (Stretch Database)](sql-server-stretch-database-monitor.md) (Мониторинг и устранение неполадок переноса данных (база данных Stretch)), чтобы просмотреть состояние переноса данных.

-   [Приостановите и возобновите растяжение баз данных](sql-server-stretch-database-pause.md)

-   [Управляйте растяжением баз данных и устраняйте неполадки](sql-server-stretch-database-manage.md)

-   [Резервное копирование баз данных с поддержкой растяжения](sql-server-stretch-database-backup.md)

## См. также

[Включение растяжения базы данных для базы данных](sql-server-stretch-database-enable-database.md)

[Включение растяжения базы данных для таблицы](sql-server-stretch-database-enable-table.md)

[StretchWizardImage1]: ./media/sql-server-stretch-database-wizard/stretchwiz1.png
[StretchWizardImage2]: ./media/sql-server-stretch-database-wizard/stretchwiz2.png
[StretchWizardImage2a]: ./media/sql-server-stretch-database-wizard/stretchwiz2a.png
[StretchWizardImage2b]: ./media/sql-server-stretch-database-wizard/stretchwiz2b.png
[StretchWizardImage3]: ./media/sql-server-stretch-database-wizard/stretchwiz3.png
[StretchWizardImage4]: ./media/sql-server-stretch-database-wizard/stretchwiz4.png
[StretchWizardImage5]: ./media/sql-server-stretch-database-wizard/stretchwiz5.png
[StretchWizardImage6]: ./media/sql-server-stretch-database-wizard/stretchwiz6.png
[StretchWizardImage6b]: ./media/sql-server-stretch-database-wizard/stretchwiz6b.png
[StretchWizardImage7]: ./media/sql-server-stretch-database-wizard/stretchwiz7.png
[StretchWizardImage8]: ./media/sql-server-stretch-database-wizard/stretchwiz8.png
[StretchWizardImage9]: ./media/sql-server-stretch-database-wizard/stretchwiz9.png

<!---HONumber=AcomDC_0615_2016-->