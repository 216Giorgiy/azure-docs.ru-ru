<properties
	pageTitle="Включение растяжения базы данных для таблицы | Microsoft Azure"
	description="Узнайте, как настроить таблицу для растяжения базы данных."
	services="sql-server-stretch-database"
	documentationCenter=""
	authors="douglaslMS"
	manager=""
	editor=""/>

<tags
	ms.service="sql-server-stretch-database"
	ms.workload="data-management"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="02/26/2016"
	ms.author="douglasl"/>

# Включение растяжения базы данных для таблицы

Чтобы настроить растяжение базы данных для таблицы, выберите **Растяжение | Включить** для таблицы в SQL Server Management Studio. После этого откроется мастер **Включение растяжения для таблицы**. Для включения растяжения базы данных для таблицы также можно использовать Transact-SQL.

-   Если исторические данные хранятся в отдельной таблице, можно выполнить миграцию всей таблицы.

-   Если таблица содержит как исторические, так и текущие данные, можно указать предикат фильтра для выбора строк для миграции. В CTP версии 3.1 до RC0 включительно параметр для указания предиката фильтра отсутствует в мастере "Включение базы данных для растяжения". В этом случае необходимо использовать инструкцию ALTER TABLE для настройки таблицы для растяжения базы данных. Подробнее см. в разделе [Инструкция ALTER TABLE (Transact-SQL)](https://msdn.microsoft.com/library/ms190273.aspx).

**Предварительные требования**. Если при выборе **Растяжение | Включить** для таблицы растяжение базы данных для базы данных еще не включено, то мастер сначала настроит растяжение для базы данных. В этом случае следуйте указаниям в статье [Мастер включения растяжения базы данных](sql-server-stretch-database-wizard.md) вместо действий, описанных в этом разделе.

**Разрешения**. Для включения растяжения базы данных для базы данных или таблицы требуются разрешения db\_owner. Для включения растяжения базы данных для таблицы также требуются разрешения ALTER для таблицы.

## <a name="EnableWizardTable"></a>Включение растяжения базы данных для таблицы с помощью мастера
**Запуск мастера**
1.  В среде SQL Server Management Studio в обозревателе объектов выберите таблицу, для которой необходимо включить растяжение.

2.  Щелкните по этой таблице правой кнопкой мыши и выберите **Растяжение**, а затем **Включить** для запуска мастера.

**Введение** Проверьте назначение мастера и необходимые компоненты.

**Выберите таблицы базы данных** Убедитесь, что необходимая таблица отображается и выбрана.

В CTP версии 3.1 до RC0 включительно можно выполнить миграцию только всей таблицы с помощью мастера. Если вы хотите указать предикат для выбора строк для переноса из таблицы, которая содержит как исторические, так и текущие данные, выполните инструкцию ALTER TABLE, чтобы указать предикат после выхода из мастера, или выйдите из мастера и выполните инструкцию ALTER TABLE, как описано далее в этом разделе.

**Сводка** Просмотрите введенные значения и параметры, выбранные в мастере. Затем выберите **Готово**, чтобы включить растяжение.

**Результаты** Ознакомьтесь с результатами.

## <a name="EnableTSQLTable"></a>Включение растяжения базы данных для таблицы с помощью Transact-SQL
Для настройки растяжения базы данных для таблицы выполните инструкцию ALTER TABLE.

1.  При необходимости, если таблица содержит как исторические, так и текущие данные, добавьте предложение `FILTER_PREDICATE = <predicate>`, чтобы указать предикат фильтра для выбора строк для миграции. Предикат должен вызывать встроенную функцию табличных значений. Дополнительные сведения см. в разделе [Запись встроенной функции табличных значений для выбора строк (растяжение базы данных)](sql-server-stretch-database-predicate-function.md). Если не указать предикат фильтра, будет выполнена миграция всей таблицы.

    > [ВАЖНО!] Если указать предикат фильтра, который работает неэффективно, миграция данных также будет выполняться неэффективно. При растяжении базы данных предикат фильтра применяется к таблице с помощью оператора CROSS APPLY.

    В CTP версии 3.1 до RC0 включительно этот параметр отсутствует в мастере "Включение базы данных для растяжения". В этом случае необходимо использовать инструкцию ALTER TABLE для настройки таблицы для растяжения базы данных. Подробнее см. в разделе [Инструкция ALTER TABLE (Transact-SQL)] (https://msdn.microsoft.com/library/ms190273.aspx.

2.  Укажите `MIGRATION_STATE = OUTBOUND` для немедленного запуска миграции данных или `MIGRATION_STATE = PAUSED`, чтобы отложить начало миграции данных.

Ниже приведен пример, при котором немедленно начинается миграция всей таблицы.

```tsql
ALTER TABLE <table name>
    SET ( REMOTE_DATA_ARCHIVE = ON ( MIGRATION_STATE = OUTBOUND ) ) ;
GO;
```
Ниже приведен пример, который переносит только те строки, которые идентифицируются встроенной функцией табличных значений `dbo.fn_stretchpredicate`, при этом миграция откладывается. Дополнительные сведения о предикатах фильтров см. в разделе [Запись встроенной функции табличных значений для выбора строк (растяжение базы данных)](sql-server-stretch-database-predicate-function.md).

```tsql
ALTER TABLE <table name>
    SET ( REMOTE_DATA_ARCHIVE = ON (
        FILTER_PREDICATE = dbo.fn_stretchpredicate(date),
        MIGRATION_STATE = PAUSED ) )
```

## См. также

[Инструкция ALTER TABLE (Transact-SQL)](https://msdn.microsoft.com/library/ms190273.aspx)

<!---HONumber=AcomDC_0316_2016-->