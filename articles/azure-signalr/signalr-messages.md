---
title: Сообщения и подключения в службе Azure SignalR
description: Обзор основных понятий относительно сообщений и подключений в службе Azure SignalR.
author: sffamily
ms.service: signalr
ms.topic: overview
ms.date: 09/13/2018
ms.author: zhshang
ms.openlocfilehash: 5a0430e9ad124319147342c49fc51e11472ac8ff
ms.sourcegitcommit: 9f87a992c77bf8e3927486f8d7d1ca46aa13e849
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/28/2018
ms.locfileid: "53812828"
---
# <a name="message-and-connection-in-azure-signalr-service"></a>Сообщения и подключения в службе Azure SignalR

Модель выставления счетов службы Azure SignalR основана на количестве подключений и сообщений. В следующих разделах объясняется, как сообщения и подключения определяются и учитываются при выставлении счетов.

## <a name="message-formats-supported"></a>Поддерживаемые форматы сообщений

Служба Azure SignalR поддерживает те же форматы, что и служба SignalR для ASP.NET Core: [JSON](https://www.json.org/) и [MessagePack](/aspnet/core/signalr/messagepackhubprotocol).

## <a name="message-size"></a>Размер сообщения

Служба Azure SignalR не имеет ограничений на размер сообщений.

На практике большое сообщение разбивается на более мелкие сообщения размером не более 2 КБ и передается в виде отдельных сообщений. Разбиение и соединение сообщений обрабатываются с помощью пакета SDK. При этом усилия со стороны разработчиков не требуются.

Однако большой размер сообщений негативно влияет на производительность обмена сообщениями. Используйте сообщения меньшего размера всегда, когда это возможно, и выполняйте тестирование, чтобы выбрать оптимальный размер сообщения для каждого сценария использования.

## <a name="how-to-count-messages-for-billing-purpose"></a>Как подсчитать сообщения, которые учитываются при выставлении счетов?

Мы считаем только сообщения, исходящие из службы SignalR, и игнорируем сообщения проверки связи между клиентами и серверами.

Сообщение размером более 2 КБ считается как несколько сообщений по 2 КБ. Диаграмма числа сообщений на портале Azure будет обновляться при поступлении каждых 100 сообщений на концентратор.

Например, пользователь имеет 3 клиента и 1 сервер приложений. Один клиент отправляет одно сообщение размером 4 КБ, чтобы сервер мог передавать данные всем клиентам. Количество сообщений будет равно 8: 1 сообщение от службы к серверу приложений, 3 сообщения от службы к клиентам; каждое сообщение учитывается как 2 сообщения по 2 КБ.

На портале Azure для количества сообщений будет отображаться значение 0, пока их не накопится больше 100.

## <a name="how-to-count-connections"></a>Как подсчитать количество подключений?

Существуют серверные и клиентские подключения. По умолчанию каждый сервер имеет 5 подключений для каждого концентратора при использовании службы SignalR. Каждый клиент имеет 1 клиентское подключение к службе SignalR.

Число подключений, отображаемое на портале Azure, включает в себя как серверные, так и клиентские подключения.

Например, пользователь имеет два сервера приложений и определяет 5 концентраторов в коде. Количество серверных подключений, показанное на портале Azure, будет следующим: 2 сервера приложений * 5 концентраторов * 5 подключений на концентратор = 50 серверных подключений.

## <a name="related-resources"></a>Связанные ресурсы

- [Конфигурация SignalR для ASP.NET Core](/aspnet/core/signalr/configuration)
- [JSON](https://www.json.org/)
- [MessagePack](/aspnet/core/signalr/messagepackhubprotocol)