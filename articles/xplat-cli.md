<properties 
	pageTitle="Azure Межплатформенный интерфейс командной строки" 
	description="Установка и настройка кроссплатформенного интерфейса командной строки Azure для управления службами Azure" 
	editor="tysonn" 
	manager="timlt" 
	documentationCenter="" 
	authors="squillace" 
	services=""/>

<tags 
	ms.service="multiple" 
	ms.workload="multiple" 
	ms.tgt_pltfrm="command-line-interface" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="1/16/2015" 
	ms.author="rasquill"/>

# Установка и настройка межплатформенного интерфейса командной строки Azure

<div class="dev-center-tutorial-selector sublanding"><a href="/manage/install-and-configure-windows-powershell/" title="PowerShell">PowerShell</a><a href="/manage/install-and-configure-cli/" title="Cross-Platform CLI" class="current">Межплатформенный интерфейс командной строки</a></div>

Межплатформенный интерфейс командной строки Azure (xplat-cli) предоставляет набор межплатформенных команд с открытым исходным кодом для работы с платформой Azure. Xplat-cli предоставляет практически те же функции, которые содержатся на портале управления Azure, например возможность управлять веб-сайтами, виртуальными машинами, мобильными службами, базой данных SQL и другими службами, включенными в платформу Azure.

Xplat-cli написан на JavaScript и требует для работы Node.js. Он реализован с помощью Azure SDK для Node.js и выпущен по лицензии Apache 2.0. Репозиторий проекта расположен в [https://github.com/WindowsAzure/azure-sdk-tools-xplat](https://github.com/WindowsAzure/azure-sdk-tools-xplat).

В этом документе описывается, как установить и настроить межплатформенный интерфейс командной строки Azure, а также использовать его для выполнения основных задач с платформой Azure.

##В этом документе

* [Как установить интерфейс командной строки Azure между различными платформами](#install)
* [Подключение к подписке Azure](#configure)
* [Как использовать интерфейс командной строки Azure между различными платформами(#use)
* [Написание скриптов интерфейса командной строки Azure между различными платформами(#script)
* [Дополнительные ресурсы](#additional-resources)

## <a id="install">Как установить интерфейс командной строки Azure между различными платформами</a>

Существует два способа установки xplat cli: с помощью пакетов установщика для Windows и OS X или, если в вашей системе установлен Node.js, с помощью команды **npm**. После установки xplat-cli можно использовать команду **azure** в интерфейсе командной строки (Bash, терминал, командная строка) для доступа к командам xplat cli.

###Использование установщика

Доступны следующие пакеты установщика:

* [Установщик Windows][установщика windows]

* [Установщик OS X][установщика mac]

###Использование npm

Если в вашей системе установлен Node.js, используйте следующую команду для установки xplat-cli:

	npm install azure-cli -g

>[AZURE.NOTE] Необходимо использовать `sudo` для успешного выполнения команды __npm__.

Node.js не установлен, необходимо сначала установить его. В ОС Linux необходимо установить Node.js и использовать **npm** для установки xplat-cli, как показано ниже, или же собрать этот интерфейс из исходного кода. Исходный код доступен на [http://go.microsoft.com/fwlink/?linkid=253472&clcid=0x409](http://go.microsoft.com/fwlink/?linkid=253472&clcid=0x409). Дополнительные сведения о построении из исходного кода см. в файле INSTALL, который включен в архив.

####Установка node.js и npm для распределений, используйте [dpkg](http://en.wikipedia.org/wiki/Dpkg) пакет управления 
Использовать наиболее часто эти распределений [дополнительные средства упаковки (apt)](http://en.wikipedia.org/wiki/Advanced_Packaging_Tool) или другие средства на основе `.deb` формат пакета. Примерами являются Ubuntu и Debian, но существуют и многие другие. 

Большинство более поздней этих распределений требуют установки **прежних версий nodejs** для получения правильно configued **npm** средство для установки azure cli. В следующем коде показано команды, устанавливающие **npm** должным образом на Ubuntu 14.04.
	
	sudo apt-get install nodejs-legacy
	sudo apt-get install npm
	sudo npm install -g azure-cli

Некоторые старые дистрибутивов, таких как Ubuntu 12.04 требуют установки текущего распределения двоичный node.js. В следующем коде показано, как это сделать при установке и использовании **curl**. 

>[AZURE.NOTE] Сюда команды взяты из Joyent инструкции по установке найден [здесь](https://github.com/joyent/node/wiki/installing-node.js-via-package-manager). Однако при использовании **sudo** как целевой канал, всегда следует позаботиться для проверки скриптов, которые устанавливаются и проверить это именно то, что ожидалось, перед их запуском **sudo**.
	
	sudo apt-get install curl
	curl -sL https://deb.nodesource.com/setup | sudo bash -
	sudo apt-get install -y nodejs
	sudo npm install -g azure-cli

####Установка node.js и npm для распределений, используйте [rpm](http://en.wikipedia.org/wiki/RPM_Package_Manager) пакет управления

Установка node.js на основе RPM распределения необходимо включить EPEL репозитория. В следующем коде показано рекомендации для установки на CentOS 7. (Обратите внимание, что в первой строке ниже, "-" (дефис) важно!)

	su -     
	yum update [enter]
	yum upgrade -y [enter] 
	yum install epel-release [enter]
	yum install nodejs [enter] 
	yum install npm [enter] 
	npm install -g azure-cli  [enter]


После установки xplat-cli можно использовать команду **azure** в интерфейсе командной строки (Bash, терминал, командная строка) для доступа к командам xplat cli. В конце установки экран будет выглядеть следующим образом:

	azure-cli@0.8.0 ..\node_modules\azure-cli
	|-- easy-table@0.0.1
	|-- eyes@0.1.8
	|-- xmlbuilder@0.4.2
	|-- colors@0.6.1
	|-- node-uuid@1.2.0
	|-- async@0.2.7
	|-- underscore@1.4.4
	|-- tunnel@0.0.2
	|-- omelette@0.1.0
	|-- github@0.1.6
	|-- commander@1.0.4 (keypress@0.1.0)
	|-- xml2js@0.1.14 (sax@0.5.4)
	|-- streamline@0.4.5
	|-- winston@0.6.2 (cycle@1.0.2, stack-trace@0.0.7, async@0.1.22, pkginfo@0.2.3, request@2.9.203)
	|-- kuduscript@0.1.2 (commander@1.1.1, streamline@0.4.11)
	|-- azure@0.7.13 (dateformat@1.0.2-1.2.3, envconf@0.0.4, mpns@2.0.1, mime@1.2.10, validator@1.4.0, xml2js@0.2.8, wns@0.5.3, request@2.25.0)

> [AZURE.NOTE] Node.js и npm также можно установить в Windows из <a href="http://nodejs.org/">http://nodejs.org/</a>.

## <a id="configure">Подключение к подписке Azure</a>

Хотя некоторые команды xplat-cli будут работать без подписки Azure, большинство команд требуют подписки. Чтобы настроить xplat-cli для работы с подпиской, выполните любое из следующих действий:

* Скачайте и используйте файл параметров публикации.

ИЛИ

* Войдите в Azure, используя рабочую учетную запись. При входе в систему для проверки подлинности учетных данных используется Azure Active Directory.

Чтобы помочь вам выбрать метод проверки подлинности, который вам подходит, необходимо учитывать следующее:

*  Метод входа может упростить управление доступом к подписке, но при этом нарушить работу функций автоматизации, поскольку в этом случае может истечь срок действия учетных данных, из-за чего вам потребуется снова войти в систему.

	> [AZURE.NOTE] Метод входа работает только с учетной записью организации.  Учетная запись организации - это пользователь, который управляется вашей организацией и определен в клиенте Azure Active Directory организации. Если вы используете для входа в подписку Azure учетную запись Microsoft, вы можете создать учетную запись организации, выполнив следующие действия.
	> 
	> 1. Имя входа для [портала управления Azure][портала]и выберите команду **Active Directory**.
	> 
	> 2. Если каталог не существует, выберите **создать каталог** и предоставьте запрошенные сведения.
	> 
	> 3. Выберите каталог и добавьте нового пользователя. Этот пользователь будет представлять учетную запись организации.
	> 
	>     При создании пользователя вам будут предоставлены адрес электронной почты и временный пароль. Эти данные используются на следующем шаге. Сохраните их.
	> 
	> 4. На портале управления выберите **параметры** и выберите **Администраторы**. Щелкните **Добавить**, чтобы добавить нового пользователя в качестве соадминистратора. Это позволит использовать вашу учетную запись организации для управления подпиской Azure.
	> 
	> 5. Выйдите из портала Azure и затем войдите снова с использованием новой рабочей учетной записи. При первом входе в учетную запись появится запрос на изменение пароля.
	>
	>Дополнительные сведения об учетной записи организации в Microsoft Azure см. в разделе [зарегистрироваться в Microsoft Azure как организация][signuporg].

*  В методе с файлом параметров публикации устанавливается сертификат, который позволяет выполнять различные задачи управления в течение всего срока действия подписки и сертификата. Этот метод упрощает использование автоматизации для длительных задач. После загрузки и импорта данных вам не потребуется снова их предоставлять. Однако в этом случае усложняется управление доступом к подписке, поскольку такими полномочиями будет наделен любой пользователь с доступом к сертификату.

Дополнительные сведения о проверки подлинности и управлении подписками см. в разделе ["Какова разница между проверкой подлинности на основе учетной записи и проверки подлинности на основе сертификата"][authandsub].

Если ее нет, можно создать бесплатную пробную учетную запись всего за несколько минут. Дополнительные сведения см. в разделе [Azure свободного пробной][бесплатной пробной версии].

###Использование метода входа

Чтобы войти с использованием учетной записи организации, выполните следующую команду:

	azure login -u username -p password

Если требуется выполнить вход, введя в интерактивном режиме (например, если требуется пароль скрыт на экране), используйте следующую команду:

	azure login

вам предложат ввести учетные данные, и ваш пароль символы будут замаскированы.

> [AZURE.NOTE] Если вы выполнили вход с использованием этих учетных данных впервые, появится запрос для проверки, которые нужно кэшировать маркер проверки подлинности. Это предупреждение также возникает, если ранее использовались `azure logout` описывается ниже. Чтобы пропустить этот запрос в сценариях автоматизации, используйте "-q" параметр с `azure login` команды.
>
> При проверке подлинности с учетной записью организации, сведения о доступе к подписке Azure хранятся в `.azure` каталог расположен в вашей `user` каталога. Ваш `user` каталог защищен операционной системы; Тем не менее, рекомендуется предпринять дополнительные действия для шифрования вашего `user` каталога. Это можно сделать одним из следующих способов:

Чтобы выйти из системы, введите следующую команду:

	azure logout -u <username>

> [AZURE.NOTE] Если только подписок, связанных с учетной записью прошел проверку подлинности Active Directory, выход будет удаления сведений подписки из локального профиля. Однако, если вы также импортировали файл параметров публикации для подписок, при выходе из системы из локального профиля удаляются только данные, относящиеся к Active Directory.

> [AZURE.NOTE] При проверке подлинности с использованием учетной записи некорректно работают следующие команды:
> 
> * `azure vm`
> * `azure network`
> * `azure mobile`
> 
> Если вы планируете работать с этими командами, используйте для аутентификации в Azure файл параметров публикации, который описывается в следующем разделе.

### Использование файла параметров публикации

Чтобы загрузить параметры публикации для вашей учетной записи, воспользуйтесь следующей командой:

	azure account download

Откройте браузер по умолчанию и предложит выполнить вход на портал управления Azure. После входа `.publishsettings` файл будет загружен. Запишите место сохранения этого файла.

> [AZURE.NOTE] Если ваша учетная запись связана с несколькими клиентами Azure Active Directory, может появиться запрос на выбор службы Active Directory, для которой следует загрузить файл параметров публикации.
> 
> После выбора на странице скачивания или на портале управления Azure выбранная служба Active Directory становится службой каталогов по умолчанию, которая будет использоваться на портале и странице скачивания. После определения службы каталогов по умолчанию в верхней части страницы загрузки появится текст "__щелкните здесь, чтобы вернуться на страницу выбора__". Используйте предоставленную ссылку, чтобы вернуться на страницу выбора.

Далее импортируйте `.publishsettings` , выполнив следующую команду, заменив "[путь к файлу .publishsettings]" путь к вашей `.publishsettings` файла:

	azure account import [path to .publishsettings file]

> [AZURE.NOTE] При импорте параметров публикации, сведения о доступе к подписке Azure хранятся в `.azure` каталог расположен в вашей `user` каталога. Ваш `user` каталог защищен операционной системы; Тем не менее, рекомендуется предпринять дополнительные действия для шифрования вашего `user` каталога. Это можно сделать одним из следующих способов:
>
> * В ОС Windows измените свойства каталога или используйте BitLocker.
> * В ОС Mac включите FileVault для этого каталога.
> * В ОС Ubuntu используйте функцию каталога Encrypted Home. В других дистрибутивах Linux есть аналогичные функции.

После импорта вашего параметры публикации, следует удалить `.publishsettings` файл, поскольку он больше не требуется программами командной строки и представляет угрозу безопасности, он будет использоваться для получения доступа к подписке.

###Несколько подписок

Если у вас есть несколько подписок Azure, при входе вы получаете доступ ко всем подпискам, связанным с вашими учетными данными. Если используется файл параметров публикации `.publishsettings` файл будет содержать сведения для всех подписок. В каждом из методов одна подписка устанавливается по умолчанию и используется для выполнения операций в xplat-cli. Можно просмотреть подписки, а также узнать, какой из них используется по умолчанию, с помощью `azure account list` команды. Эта команда возвращает сведения, аналогичные следующим:

	info:    Executing command account list
	data:    Name              Id                                    Current
	data:    ----------------  ------------------------------------  -------
	data:    Azure-sub-1       ####################################  true
	data:    Azure-sub-2       ####################################  false

В приведенном выше списке **Текущий** означает текущую подписку по умолчанию Azure-sub-1. Для изменения подписки по умолчанию, используйте `azure account set` и укажите подписку, которую следует использовать по умолчанию. Например:

	azure account set Azure-sub-2

Это приведет к изменению подписки по умолчанию на Azure-sub-2. 

> [AZURE.NOTE] Изменение подписки по умолчанию вступает в силу незамедлительно и является глобальным изменением; новые команды xplat, как запускаемые из того же экземпляра командой строки, так и запускаемые из другого экземпляра, будут использовать новую подписку по умолчанию.

Если необходимо использовать подписку, которая не является подпиской по умолчанию, для работы с xplat-cli, но не следует менять текущую настройку по умолчанию, можно использовать `--subscription` с указанием имени подписки, которую следует использовать для операции.

<h2><a id="use"></a>Как использовать интерфейс командной строки Azure между различными платформами</h2>

Xplat-cli осуществляется с помощью `azure` команды. Чтобы просмотреть список доступных команд, используйте `azure` без параметров. Вы должны видеть справочные сведения, аналогичные приведенным ниже:

	info:             _    _____   _ ___ ___
	info:            /_\  |_  / | | | _ \ __|
	info:      _ ___/ _ \__/ /| |_| |   / _|___ _ _
	info:    (___  /_/ \_\/___|\___/|_|_\___| _____)
	info:       (_______ _ _)         _ ______ _)_ _
	info:              (______________ _ )   (___ _ _)
	info:
	info:    Windows Azure: Microsoft's Cloud Platform
	info:
	info:    Tool version 0.8.0
	help:
	help:    Display help for a given command
	help:      help [options] [command]
	help:
	help:    Opens the portal in a browser
	help:      portal [options]
	help:
	help:    Commands:
	help:      account        Commands to manage your account information and publish settings
	help:      config         Commands to manage your local settings
	help:      hdinsight      Commands to manage your HDInsight accounts
	help:      mobile         Commands to manage your Mobile Services
	help:      network        Commands to manage your Networks
	help:      sb             Commands to manage your Service Bus configuration
	help:      service        Commands to manage your Cloud Services
	help:      site           Commands to manage your Web Sites
	help:      sql            Commands to manage your SQL Server accounts
	help:      storage        Commands to manage your Storage objects
	help:      vm             Commands to manage your Virtual Machines
	help:
	help:    Options:
	help:      -h, --help     output usage information
	help:      -v, --version  output the application version

Перечисленные выше команды верхнего уровня содержат команды для работы с определенной областью Azure. Например `azure account` содержит команды, которые связаны с подпиской Azure, таких как `download` и `import` ранее использованные параметры.

Большинство команд имеют формат ' azure < команда >< операции > [параметры]"и выполнить операцию службы или объектом, например конфигурацией учетной записи. Другие команды предоставляют вложенные команды и следует формату ' azure < команда >< подкоманды >< операции > [параметры]". Ниже приведены примеры команд, которые работают с конфигурацией учетной записи.

* Чтобы просмотреть подписки, которые вы импортировали, используйте:

		azure account list

* Если у вас есть импортированные подписки, используйте следующую команду для определения одной из них как подписки по умолчанию.

		azure account set <subscription>

"--Справка ' или '-h" используется для просмотра определенных команд. Кроме того, формат `azure help [команда] [параметры]` можно использовать для возвращения тех же самых сведений. Например, все следующие команды возвращают одинаковые сведения:

	azure account set --help

	azure account set -h

	azure help account set

Если вы сомневаетесь в том, какие параметры необходимы команде, обратитесь к справке, используя `--help`, `-h` или `azure help [команда]`.

###Настройка режима конфигурации

Интерфейс xplat-cli позволяет вам выполнять операции по управлению отдельными _ресурсами_, которые являются управляемыми пользователем объектами, такими как сервер баз данных, база данных или веб-сайт. Это режим работы xplat-cli по умолчанию, который также называется **Управление службами Azure**. Однако управление сложным решением, включающим несколько ресурсов, рекомендуется осуществлять как единым объектом.

Чтобы поддерживать управление группой ресурсов как одна Логическая единица или _resource group_, была реализована предварительная версия **диспетчера ресурсов** как новый способ управления ресурсами Azure. 

>[AZURE.NOTE] Диспетчер ресурсов находится на стадии предварительной версии и не обеспечивает того уровня управления, который доступен в компоненте управления службами Azure.

Для поддержки нового диспетчера ресурсов, xplat-cli позволяет переключаться между этим управления 'modes' с помощью `azure config mode` команды.

По умолчанию в xplat-cli устанавливается режим управления службами Azure. Чтобы переключиться в режим диспетчера ресурсов, выполните следующую команду:

	azure config mode arm

Чтобы вернуться в режим управления службами Azure, используйте следующую команду:

	azure config mode asm 

>[AZURE.NOTE] Режим диспетчера ресурсов и режим управления службами Azure являются взаимоисключающими. То есть ресурсами, созданными в одном из режимов, нельзя управлять из другого режима.

Дополнительные сведения о работе с диспетчером ресурсов с использованием xplat-cli см. в разделе [с диспетчером ресурсов с помощью интерфейса командной строки Azure межплатформенный][xplatarm].

###Работа со службами в режиме управления службами Azure

Интерфейс xplat-cli позволяет без труда управлять службами Azure. В этом примере вы узнаете, как использовать интерфейс xplat-cli для управления веб-сайтом Azure.

1. Используйте следующую команду для создания нового веб-сайта Azure. Замените **mywebsite** на уникальное имя.

		azure site create mywebsite

	Будет предложено указать область, которая будет создан веб-сайт в. Выберите регион, который расположен недалеко от вас. После выполнения этой команды, веб-сайта можно найти по адресу http://mywebsite.azurewebsites.net (Замените **mywebsite** с указанным именем.)

	> [AZURE.NOTE] Если вы используете Git для системы управления версиями проекта, можно указать "--git" для создания репозитория Git в Azure для этого веб-сайта. Это также приведет к инициализации репозитория GIt в каталоге, где будет запускаться команда, если такой репозиторий еще не существует. Также будет создан с именем __azure__, который может использоваться для передачи развертываний на веб-сайт Azure с помощью удаленного Git `git push azure master` команды.

	> [AZURE.NOTE] Если получена ошибка, 'site' не azure команды xplat-cli, скорее всего, в режиме группы ресурсов. Чтобы вернуться в режим ресурсов, используйте `azure config mode asm` команды.

2. Используйте следующую команду для отображения веб-сайтов, связанных с вашей подпиской.

		azure site list

	Этот список должен содержать сайт, созданный на предыдущем этапе.

2. Воспользуйтесь следующей командой для остановки веб-сайта. Замените **mywebsite** на уникальное имя сайта.

		azure site stop mywebsite

	После выполнения команды можно обновить браузер для проверки остановки сайта.

3. Используйте следующую команду для запуска веб-сайта. Замените **mywebsite** на уникальное имя сайта.

		azure site start mywebsite

	После выполнения команды можно обновить браузер для проверки запуска сайта.

4. Используйте следующую команду для удаления веб-сайта. Замените **mywebsite** на уникальное имя сайта.

		azure site delete mywebsite

	После выполнения команды используйте `azure site list` команду, чтобы проверить, что веб-сайт больше не существует.

<h2><a id="script"></a>Написание скриптов интерфейса командной строки Azure между различными платформами</h2>

При использовании xplat-cli для ручного ввода команд можно также создавать сложные процессы автоматизации благодаря возможности интерпретатора и других служебных программ командной строки доступны в системе. Например, следующая команда остановит работу всех запущенных веб-сайтов Azure:

	azure site list | grep 'Running' | awk '{system("azure site stop "$2)}'

В этом примере список веб-сайтов для `grep` команду, которая проверяет каждую строку для строки 'Running'. Все строки, которые соответствуют передаются в `awk` , которая вызывает команду `azure site stop` и использует второй столбец, который передается его (имя работающего сайта) в качестве имени узла для остановки.

Хотя этот пример демонстрирует, как можно связывать вместе команды, можно также создать более комплексные скрипты с использованием компонентов скриптов, предоставленных интерпретатором командной строки. Различные интерпретаторы командной строки имеют разные возможности создания скриптов и разный синтаксис. Bash, вероятно, является наиболее широко используемым интерпретатором командной строки в системах на основе UNIX, включая OS X и Linux.

Сведения о создании сценариев с помощью Bash см. [руководство по созданию скриптов Bash Дополнительно][advanced bash].

Общие сведения о создании сценариев OS X или систем под управлением Linux см. [скрипты оболочки][сценарий].

Сведения об операционных системах Windows с помощью пакетных файлов сценариев см. в разделе [Справочник по командной строке A-Z][пакета].

### Интерпретация результатов

При создании скриптов, как правило, требуется записать выходные данные команды и либо передать их в другую команду, либо выполнить операцию с этими выходными данными, например, для проверки наличия в них определенного значения. Интерфейс xplat-cli формирует выход на STDOUT и STDERR. Каждая строка имеет префикс в виде `info:` for informational status messages, or `data:` for data returned about a service; however, you can instruct the xplat-cli to return more verbose information by using the `--verbose` или '-v "параметра. Возвращает дополнительные сведения с префиксом `verbose:`.

For example, the following output is returned from the `azure site list`команда:

	info:    Executing command site list
	+ Enumerating sites
	data:    Name           Status   Mode  Host names
	data:    -------------  -------  ----  -------------------------------
	data:    myawesomesite  Running  Free  myawesomesite.azurewebsites.net
	info:    site list command OK

Если указан параметр `--verbose` или `-v`, возвращаются сведения, аналогичные приведенным ниже:

	info:    Executing command site list
	verbose: Subscription ####################################
	verbose: Enumerating sites
	verbose: [
	verbose:     {
	verbose:         ComputeMode: 'Shared',
	verbose:         HostNameSslStates: {
	verbose:             HostNameSslState: [
	verbose:                 {
	verbose:                     IpBasedSslResult: {
	verbose:                         $: { i:nil: 'true' }
	verbose:                     },
	verbose:                     SslState: 'Disabled',
	verbose:                     ToUpdateIpBasedSsl: {
	verbose:                         $: { i:nil: 'true' }
	verbose:                     },
	verbose:                     VirtualIP: {
	verbose:                         $: { i:nil: 'true' }
	verbose:                     },
	verbose:                     Thumbprint: {
	verbose:                         $: { i:nil: 'true' }
	verbose:                     },
	verbose:                     ToUpdate: {
	verbose:                         $: { i:nil: 'true' }
	verbose:                     },
	verbose:                     Name: 'myawesomesite.azurewebsites.net'
	verbose:                 },
	...
	verbose:     }
	verbose: ]
	data:    Name           Status   Mode  Host names
	data:    -------------  -------  ----  -------------------------------
	data:    myawesomesite  Running  Free  myawesomesite.azurewebsites.net
	info:    site list command OK

Обратите внимание, что `verbose:` information appears to be JSON formatted data. You can use the `--json` параметр для возврата сведений в формате JSON при работе с помощью программ, которые его поддерживают, например [jsawk](https://github.com/micha/jsawk) или [jq](http://stedolan.github.io/jq/). Например:

	azure site list --json | jsawk -n 'out(this.Name)' | xargs -L 1 azure site delete -q 

Приведенная выше команда извлекает список веб-сайтов в формате JSON, а затем использует jsawk для получения имен сайтов и, наконец, использует xargs для выполнения команды удаления каждого сайта, передавая имя сайта в качестве параметра.

>[AZURE.NOTE] "--Json" блокирует создание сведений о состоянии или данных (строки, которым предшествует `info:` and `data:`). For example, if the `--json` параметр используется вместе с `azure site create`, выходные данные возвращаются как эта команда не возвращает данные, отличное от "info:".

###Работа с ошибками

Хотя интерфейс xplat-cli не регистрирует сведения об ошибках в STDERR, дополнительные сведения об ошибках могут регистрироваться в файле **azure.err** в каталоге, из которого выполнялся скрипт. Если в этот файл записываются сведения, в STDOUT будет выведено следующее:

	info:    Error information has been recorded to azure.err

###Состояние выхода

Некоторые команды xplat-cli не возвращают состояние выхода ненулевой длины, если отсутствуют требуемые параметры. Вместо этого они будут запрашивать ввод данных пользователем. Например, при использовании `azure site create` команду, чтобы создать новый веб-сайт, если отсутствует имя сайта или "--Расположение" указан параметр будет приглашение на ввод этих значений.

При написании скрипта, который основывается на состояние выхода, проверьте, что используемые команды xplat cli не запрашивают ввод пользовательских данных.

<h2><a id="additional-resources"></a>Дополнительные ресурсы</h2>

* Дополнительные сведения об интерфейсе xplat-cli, загрузить исходный код, рассказать о проблемах или внести свой вклад в проект, посетите [репозиторий GitHub для интерфейса командной строки между различными платформами Azure](https://github.com/WindowsAzure/azure-sdk-tools-xplat).

* Если возникли проблемы с использованием xplat cli или Azure, посетите [форумы Azure](http://social.msdn.microsoft.com/Forums/windowsazure/home).

* Дополнительные сведения о Azure в разделе [http://azure.microsoft.com/](http://azure.microsoft.com).




[mac-installer]: http://go.microsoft.com/fwlink/?LinkId=252249
[windows-installer]: http://go.microsoft.com/?linkid=9828653&clcid=0x409
[authandsub]: http://msdn.microsoft.com/library/windowsazure/hh531793.aspx#BKMK_AccountVCert

[Веб-сайт Azure]: ../media/freetrial.png
[выбрать предварительную версию]: ../media/antares-iaas-preview-02.png
[Выберите подписку]: ../media/antares-iaas-preview-03.png
[free-trial]: http://www.windowsazure.com/pricing/free-trial/?WT.mc_id=A7171371E
[advanced-bash]: http://tldp.org/LDP/abs/html/
[script]: http://en.wikipedia.org/wiki/Shell_script
[batch]: http://technet.microsoft.com/library/bb490890.aspx
[xplatarm]: /documentation/articles/xplat-cli-azure-resource-manager/
[portal]: https://manage.windowsazure.com
[signuporg]: http://www.windowsazure.com/documentation/articles/sign-up-organization/

<!--HONumber=47-->
