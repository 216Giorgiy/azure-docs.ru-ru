<properties 
   pageTitle="Руководства по устранению неполадок Azure Mobile Engagement" 
   description="Руководство по устранению неполадок для Azure Mobile Engagement" 
   services="mobile-engagement" 
   documentationCenter="" 
   authors="piyushjo" 
   manager="dwrede" 
   editor=""/>

<tags
   ms.service="mobile-engagement"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="mobile-multiple"
   ms.workload="mobile" 
   ms.date="10/22/2015"
   ms.author="piyushjo"/>

# Руководство по устранению неполадок Azure Mobile Engagement

## Введение
Это руководство по устранению неполадок поможет вам найти причины некоторых наиболее распространенных проблем и устранить их самостоятельно.

## Общие сведения

В общем, следует проверить следующее.

1. Убедитесь, что вы выполнили все необходимые для интеграции шаги, приведенные в наших [руководствах по началу работы](mobile-engagement-windows-store-dotnet-get-started.md)
2. Вы используете последнюю версию платформ SDK. 
3. Тестирование выполняется на настоящем устройстве и эмуляторе, так как некоторые проблемы характерны только для эмулятора. 
4. Вы не нарушаете никакие ограничения и регулирования Mobile Engagement, приведенные [здесь](azure-subscription-service-limits.md).
5. Если не удается подключиться к серверной службе Mobile Engagement или какие-либо данные никак не получается скачать, убедитесь в отсутствии текущих проблем со службой [здесь](https://azure.microsoft.com/ru-RU/status/).

## Проблемы на вкладке «Монитор»

### Мое устройство не отображается на вкладке «Монитор»
На вкладке «Монитор» в режиме реального времени отображаются устройства, подключенные к вашей платформе Mobile Engagement. Во время отладки на эмуляторе и устройстве вы должны видеть здесь по крайней мере один сеанс. Если приложение распределено, вы увидите датчик активных сеансов с отображением устройств, которые подключены к платформе, в режиме реального времени.

Если же вы не видите свое устройство на вкладке «Монитор», проблема, скорее всего, связана с интеграцией пакета SDK. Ниже приведены некоторые основные действия по устранению неполадок.

1. Убедитесь, что в мобильном приложении используется правильная строка подключения из раздела ключей пакета SDK, а не раздела ключей API. Строка подключения подключает мобильное приложение к экземпляру приложения Mobile Engagement, в котором вы увидите свое устройство на вкладке «Монитор». 
2. Если во время работы на платформе Windows страница переопределяет метод `OnNavigatedTo`, необходимо обязательно вызвать `base.OnNavigatedTo(e)`.
3. Если Mobile Engagement интегрируется в существующее мобильное приложение, убедитесь, что вы не пропустили ни одного из необходимых дополнительных шагов интеграции, приведенных [здесь](mobile-engagement-windows-store-integrate-engagement.md).
4. Не забудьте отправить по крайней мере один экран или действие посредством переопределения страницы с EngagementActivity в зависимости от вашей рабочей платформы. Дополнительную информацию см. в статье [Руководства по началу работы](mobile-engagement-windows-store-dotnet-get-started.md).

### Я вижу вкладку «Монитор» с отображением сеанса даже после отключения или закрытия приложения или эмулятора 
Если в данный момент к платформе подключены только вы и вы открываете приложение с помощью эмулятора, скорее всего, таковы особенности его работы. В общем, сеанс приложения всегда нужно отключать на начальном экране приложения в эмуляторе. Кроме того, на платформе Windows во время отладки в Visual Studio может потребоваться перейти в меню **События жизненного цикла** и щелкнуть **Приостановить**, чтобы действительно закрыть сеанс. Дополнительные сведения см. в [руководстве по Windows](mobile-engagement-windows-store-dotnet-get-started.md).

## Проблемы на вкладке «Аналитика»

### На вкладке «Аналитика» не отображаются данные (или обновленные данные) 
Данные аналитики регулярно пересчитываются, и их обновление может длиться до 24 часов. Эти данные не подаются в режиме реального времени. Они обновляются раз в сутки и отображают 24-часовой период времени. Тем не менее не забудьте отправить хотя бы один экран или действие на сервер платформы посредством переопределения по крайней мере одной страницы с `EngagementActivity` или явным вызовом `SendActivity`.

### Неправильные дата и время устройства на вкладке «Аналитика»
Период времени для аналитики основан на дате из параметров устройства пользователя. Поэтому убедитесь, что дата на устройстве установлена правильно.

## Проблемы, связанные с сегментом

### После создания сегмент отображается серым (является неактивным) или данные совсем не отображаются
В данный момент сегмент не создается в режиме реального времени. Он вычисляется одновременно со сбором данных аналитики, поэтому этот процесс может занять до 24 часов. Следовательно, сегмент будет создан позже. Тем временем следует убедиться, что мобильные приложения на самом деле отправляют данные, на основании которых создаются сегменты. Если, допустим, событие foo не отправлено ни одним мобильным устройством, не будет никаких данных для создания сегмента с помощью EventName = foo в качестве критерия. Кроме этого, проверьте интеграцию SDK, чтобы убедиться, что мобильное приложение отправляет данные правильно.

## Проблемы, связанные с вкладкой «Охват» или push-уведомлениями

### Мои push-уведомления не доставляются 

1. Сначала попробуйте отправить уведомления на тестовое устройство. Так вы убедитесь, что все компоненты (мобильное приложение, пакет SDK и служба) подключены правильно и могут доставлять push-уведомления. 
2. Сначала всегда отправляйте простое «уведомление вне приложения» через незапланированную кампанию без задания каких-либо критериев для аудитории. Так вы убедитесь, что подключение для отправки уведомлений работает правильно. 
3. Если возникают проблемы с доставкой уведомлений в приложении, следует попробовать отправить уведомление вне приложения. 
4. Убедитесь, что системные push-уведомления для мобильного приложения настроены правильно. В зависимости от используемой платформы требуются ключи (Android, Windows) или сертификаты (iOS). См. статью [Параметры пользовательского интерфейса](mobile-engagement-user-interface-settings.md).
5. Уведомления вне приложения может заблокировать пользователь с помощью мобильной ОС. Убедитесь, что они не заблокированы. 
6. Убедитесь, что не установлен параметр *Не учитывать аудиторию, push-уведомления будут отправляться пользователям через API* в разделе **Кампания** кампании «Охват». Иначе push-уведомления смогут отправляться только через API. 
7. Обязательно протестируйте кампанию push-уведомлений на устройстве, когда оно подключено через Wi-Fi и сеть мобильного оператора, чтобы исключить сетевое подключение как возможный источник проблем.
8. Убедитесь, что системные дата и время на вашем устройстве или эмуляторе установлены правильно, так как любое несинхронизированное устройство также будет препятствовать доставке уведомлений службой push-уведомлений. 

Дополнительные инструкции по устранению неполадок на конкретной платформе приведены ниже.

1. **iOS** 

	- Убедитесь, что сертификаты для push-уведомлений iOS являются действительными и действующими. 
	- Убедитесь, что сертификат *Рабочая среда* в приложении Mobile Engagement настроен правильно. 
	- Убедитесь, что идентификатор пакета в мобильном приложении настроен правильно. Следуйте приведенным [здесь](https://developer.apple.com/library/prerelease/ios/documentation/IDEs/Conceptual/AppDistributionGuide/AddingCapabilities/AddingCapabilities.html#//apple_ref/doc/uid/TP40012582-CH26-SW6) указаниям.

2. **Android**

	- Убедитесь, что указан правильный номер проекта в файле AndroidManifest.xml мобильного приложения, за которым следует символ \\n. 
	
	    	<meta-data android:name="engagement:gcm:sender" android:value="************\n" />
	    
	- Убедитесь, что в файле манифеста Android есть все разрешения и они правильно настроены.
	- Если вы получаете системные уведомления, но не получаете уведомления в приложении, см. статью [Назначение значка для раздела уведомлений](mobile-engagement-android-get-started.md). Скорее всего, вы выбираете неправильный значок в файле манифеста Android. 
	- Если вы отправляете уведомление BigPicture, при наличии серверов внешних изображений убедитесь, что они поддерживают HTTP-запросы GET и HEAD.

3. **Windows**
	
	- Убедитесь, что приложение связано с допустимым приложением Магазина Windows. В Visual Studio щелкните правой кнопкой мыши проект и выберите параметр «Связать приложение с Магазином», а затем выберите приложение, созданное в Магазине Windows. Это должно быть приложение Магазина Windows, из которого взяты учетные данные системных push-уведомлений для настройки на портале Mobile Engagement.
	- Если вы получаете push-уведомления из-за пределов приложения, но не получаете уведомления в приложении с интеграцией `EngagementOverlay`, убедитесь в наличии корневого элемента Grid на странице. EngagementOverlay использует первый элемент Grid, найденный в XAML-файле, для добавления двух веб-представлений на страницу. Расположение веб-представлений можно определить, задав сетку с именем EngagementGrid, как показано в примере ниже. Тем не менее необходимо убедиться, что высоты и ширины достаточно для расположения двух последовательных веб-представлений, которые будут отображать уведомление и следующее объявление как уведомления в приложении.
		
			<Grid x:Name="EngagementGrid"></Grid>

### После создания push-уведомления, объявления или кампании и даже после отправки ими мне уведомления оно отображается как «Активное». Что это означает? 
**Кампания**, созданная в Mobile Engagement, так называется, потому что по сути является долговременным push-уведомлением, отправляемым по мере подключения новых устройств к платформе Mobile Engagement. Им будут автоматически отправляться настроенные здесь уведомления до тех пор, пока они будут отвечать критерию, который вы задали в кампании. Настройка таких уведомлений отличается от настройки однократных уведомлений. Вам нужно будет вручную нажать кнопку **Готово**, чтобы завершить кампанию и прекратить отправку уведомлений.

### После создания кампании push-уведомлений я успешно получаю уведомления. Тем не менее при каждом открытии приложения я получаю одно и то же уведомление, даже если это действие выполнялось ранее. 
Это может произойти во время тестирования и при использовании эмуляторов или некоторых платформ тестирования наподобие TestFlight. Почему при каждом запуске экземпляра приложения он получает новый DeviceID и отправляет его на наш сервер, после чего платформа Mobile Engagement считает его новым устройством и отправляет уведомление?

## Получение технической поддержки

Если не удается устранить проблему самостоятельно, попробуйте выполнить следующее.

1. Поищите свою проблему в существующих обсуждениях на форуме StackOverflow и [форуме MSDN](https://social.msdn.microsoft.com/Forums/windows/ru-RU/home?forum=azuremobileengagement). Если решение найти не удалось, попросите о помощи на форуме. 
2. Если вы заметили отсутствие функции, добавьте запрос или проголосуйте за существующий на нашем [форуме UserVoice](http://feedback.azure.com/forums/285737-mobile-engagement)
3. При наличии поддержки Майкрософт отправьте обращение за поддержкой, предоставив следующие сведения: 
	- идентификатор подписки Azure;
	- платформа (например iOS, Android и т. д.);
	- Идентификатор приложения API.
	- идентификатор кампании (для неполадок, связанных с push-уведомлениями);
	- Идентификатор устройства.
	- версия пакета SDK Mobile Engagement (например, Android SDK 2.1.0);
	- сведения об ошибке с текстом сообщения и сценарием.

<!---HONumber=Nov15_HO1-->