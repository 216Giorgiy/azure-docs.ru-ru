<properties linkid="manage-services-how-to-create-and-deploy-a-cloud-service" urlDisplayName="How to create and deploy" pageTitle="How to create and deploy a cloud service - Azure" metaKeywords="Azure creating cloud service, deleting cloud service" description="Learn how to create and deploy a cloud service using the Quick Create method in Azure." metaCanonical="" services="cloud-services" documentationCenter="" title="How to Create and Deploy a Cloud Service" authors="ryanwi" solutions="" manager="timlt" editor="" />

<tags ms.service="cloud-services" ms.workload="tbd" ms.tgt_pltfrm="na" ms.devlang="na" ms.topic="article" ms.date="01/01/1900" ms.author="ryanwi" />

# Создание и развертывание облачной службы

[WACOM.INCLUDE [отказ от ответственности](../includes/disclaimer.md)]

Создать и развернуть облачную службу на портале управления Azure можно с помощью функций **Быстрое создание** и **Настраиваемое создание**.

В этом разделе описывается быстрое создание облачной службы с последующим развертыванием соответствующего ей пакета в Azure с помощью функции **Отправка**. При выборе этого способа на портале управления Azure отображаются все необходимые для работы ссылки. Чтобы одновременно выполнить развертывание создаваемой облачной службы, воспользуйтесь функцией **Настраиваемое создание**.

**Примечание.** Если вы планируете опубликовать облачную службу с помощью Windows Team Foundation Services (TFS), воспользуйтесь функцией "Быстрое создание" и затем настройте публикацию TFS на странице **Быстрый запуск** или на панели мониторинга. Дополнительную информацию см. в разделе [Непрерывная доставка в Azure с использованием Visual Studio Online][TFSTutorialForCloudService], а также в справке для страницы **Быстрый запуск**.

## Оглавление

-   [Основные понятия](#concepts)
-   [Подготовка приложения](#prepare)
-   [Перед началом работы](#begin)
-   [Практическое руководство. Создание облачной службы с помощью функции «Быстрое создание»](#quick)
-   [Практическое руководство. Отправка сертификата для облачной службы](#uploadcertificate)
-   [Практическое руководство. Развертывание облачной службы](#deploy)

## <span id="concepts"></span></a>Основные понятия

Для развертывания приложения в качестве облачной службы в Azure необходимы три компонента:

> -   **файл определения службы** Файл с расширением CSDEF, в котором определяется модель службы, включая число ролей.

> -   **файл конфигурации службы** Файл с расширением CSCFG, в котором задаются значения для любых параметров конфигурации облачной службы и отдельных ролей, включая число экземпляров ролей.

> -   **пакет службы** Файл с расширением CSPKG, в котором содержатся код приложения и файл определения службы.

## <span id="prepare"></span></a>Подготовка приложения

Перед развертыванием облачной службы необходимо создать пакет облачной службы (CSPKG-файл) на основе кода приложения и файл конфигурации облачной службы (CSCFG). В каждом пакете содержатся конфигурации и файлы приложения. Параметры конфигурации определяются в файле конфигурации службы.

Инструменты для подготовки необходимых файлов развертывания находятся в пакете SDK для Azure. Этот пакет можно установить со страницы [Загрузки Azure](http://www.windowsazure.com/ru-ru/develop/downloads/) на языке, выбранном для разработки кода приложения.

Для ознакомления с облачными службами можно скачать пример пакета облачной службы (CSPKG-файл) и файла конфигурации (CSCFG-файл) службы со страницы [примеров кода Azure](http://code.msdn.microsoft.com/windowsazure/).

Перед экспортом пакета службы необходимо отдельно настроить три компонента облачной службы:

-   Если в развертываемой облачной службе будет применяться SSL-шифрование данных, настройте поддержку SSL для приложения. Дополнительные сведения см. в разделе [Настройка SSL-сертификата на конечной точке HTTPS](http://msdn.microsoft.com/ru-ru/library/windowsazure/ff795779.aspx).

-   Если будут использоваться подключения к удаленному рабочему столу для экземпляров роли, настройте роли соответствующим образом. Дополнительные сведения о подготовке файла определения службы для удаленного доступа см. в разделе [Обзор настройки подключения к удаленному рабочему столу для роли](http://msdn.microsoft.com/ru-ru/library/windowsazure/gg433010.aspx).

-   Чтобы включить подробный мониторинг для веб-службы, настройте для нее систему диагностики Azure. *Минимальный мониторинг* (по умолчанию) реализуется на основе счетчиков производительности основной операционной системы, собирающих данные для экземпляров ролей (виртуальные машины). В рамках подробного мониторинга\* для более тщательного анализа проблем обработки приложений отслеживаются дополнительные метрики в экземплярах ролей. Дополнительную информацию о включении диагностики в Azure см. в разделе [Включение системы диагностики в Azure](http://www.windowsazure.com/ru-ru/develop/net/common-tasks/diagnostics/).

## <span id="begin"></span></a>Перед началом работы

-   Если пакет SDK для Azure не установлен, щелкните **Установить пакет Azure SDK**. Откроется страница [Загрузки Azure](http://www.windowsazure.com/ru-ru/develop/downloads/), откуда можно скачать пакет SDK для языка, выбранного для разработки кода приложения. (Также это можно сделать позднее.)

-   Для экземпляров роли с сертификатами создайте сертификаты. В облачных службах используется PFX-файл с закрытым ключом. Сертификаты можно отправить в Azure как при создании, так и при развертывании облачной службы. Дополнительные сведения о создании сертификатов см. в разделе [Настройка SSL-сертификата на конечной точке HTTPS](http://msdn.microsoft.com/ru-ru/library/windowsazure/ff795779.aspx).

-   Если планируется развертывание облачной службы в территориальной группе, создайте соответствующую группу. Территориальные группы предназначены для развертывания облачной и других служб Azure в одном расположении региона. Чтобы создать такую группу, откройте раздел **Сети** портала управления и перейдите на страницу **Территориальные группы**. Дополнительные сведения см. в справке для страницы **Территориальные группы**.

## <span id="quick"></span></a>Практическое руководство. Создание облачной службы с помощью функции «Быстрое создание»

1.  Войдите на [Портал управления](http://manage.windowsazure.com/) и последовательно выберите **Создать**, **Среда выполнения приложений**, **Облачная служба**, **Быстрое создание**.

    ![CloudServices\_QuickCreate](./media/cloud-services-how-to-create-deploy/CloudServices_QuickCreate.png)

2.  В поле **URL-адрес** введите имя поддомена для общедоступного URL-адреса, который будет использоваться для доступа к облачной службе в рабочем развертывании. URL-адрес рабочего развертывания имеет следующий формат: http://*myURL*.cloudapp.net.

3.  В поле **Регион или территориальная группа** выберите регион или группу, в которых требуется развернуть облачную службу. Чтобы развернуть облачную службу в том же расположении региона, что и другие службы Azure, укажите территориальную группу.

    > [WACOM.NOTE]
    > Чтобы создать территориальную группу, отройте раздел **Сети** на портале управления, перейдите на страницу **Территориальные группы** и затем щелкните либо **Создать новую территориальную группу**, либо **Создать**. При необходимости вы можете использовать ранее созданные на портале управления Azure группы. Также можно создавать территориальные группы и управлять ими с помощью API управления службами Azure. Дополнительные сведения см. в разделе [Операции с территориальными группами](http://msdn.microsoft.com/ru-ru/library/windowsazure/ee460798.aspx).

4.  Выберите **Создать облачную службу**.

    Состояние процесса можно контролировать с помощью области сообщений в нижней части окна.

    Созданная служба откроется в области **Облачные службы**. Об успешном создании службы свидетельствует состояние "Создано".

    ![CloudServices\_CloudServicesPage](./media/cloud-services-how-to-create-deploy/CloudServices_CloudServicesPage.png)

    Если для SSL-шифрования данных в какой-либо роли облачной службы используется сертификат, перед развертыванием облачной службы необходимо передать соответствующий сертификат в Azure. Отправленный сертификат будет доступен всем приложениям Windows, выполняющимся в экземплярах роли.

## <span id="uploadcertificate"></span></a>Практическое руководство. Отправка сертификата для облачной службы

1.  Войдите на [Портал управления](http://manage.windowsazure.com/) и щелкните элемент **Облачные службы**. Щелкните имя облачной службы, чтобы открыть панель мониторинга.

    ![CloudServices\_EmptyDashboard](./media/cloud-services-how-to-create-deploy/CloudServices_EmptyDashboard.png)

2.  Щелкните элемент **Сертификаты**, чтобы открыть показанную ниже страницу **Сертификаты**.

    ![CloudServices\_CertificatesPage](./media/cloud-services-how-to-create-deploy/CloudServices_CertificatesPage.png)

3.  Щелкните **Загрузить сертификат**. Откроется диалоговое окно **Загрузить сертификат**.

    ![CloudServices\_AddaCertificate](./media/cloud-services-how-to-create-deploy/CloudServices_AddaCertificate.png)

4.  В поле **Файл сертификата** нажмите кнопку **Обзор** и выберите соответствующий PFX- или CER-файл.

5.  В поле **Пароль** введите закрытый ключ сертификата.

6.  Нажмите кнопку «ОК» (флажок).

    Ход процесса отправки можно контролировать в показанной ниже области сообщений. По завершении этого процесса сертификат добавляется в таблицу. Щелкните стрелку вниз в области сообщений, чтобы закрыть сообщение, или кнопку "X", чтобы удалить его.

    ![CloudServices\_CertificateProgress](./media/cloud-services-how-to-create-deploy/CloudServices_CertificateProgress.png)

    Облачную службу можно развернуть как из панели мониторинга, так и из панели **Быстрый запуск**.

## <span id="deploy"></span></a>Практическое руководство. Развертывание облачной службы

1.  Если пакет SDK для Azure не установлен, щелкните **Установить пакет Azure SDK**. Откроется страница [Загрузки Azure](http://www.windowsazure.com/ru-ru/develop/downloads/), откуда можно скачать пакет SDK для языка, выбранного для разработки кода приложения.

    С этой страницы также можно установить библиотеки клиента и исходный код для разработки веб-приложений на языках Node.js, Java, PHP и др., которые можно развертывать как масштабируемые облачные службы Azure.

    > [WACOM.NOTE]
    > Для ранее созданных облачных служб (*размещенных служб*) необходимо проверить гостевые операционные системы на виртуальных машинах (экземпляры роли) на совместимость с устанавливаемой версией пакета SDK для Azure. Дополнительную информацию см. в [заметках о выпуске пакета SDK для Azure](http://msdn.microsoft.com/ru-ru/library/windowsazure/hh552718.aspx).

2.  Войдите на [Портал управления](http://manage.windowsazure.com/) и щелкните элемент **Облачные службы**. Щелкните имя облачной службы, чтобы открыть панель мониторинга. Затем щелкните **Панель мониторинга**.

3.  Выберите **Рабочая среда** или **Промежуточная среда**.

    Промежуточное развертывание предназначено для тестирования облачной службы в Azure перед развертыванием в рабочей среде. В промежуточной среде облачная служба определяется в URL-адресах с помощью глобального уникального идентификатора (*GUID*.cloudapp.net). В рабочем развертывании для этого применяется более удобный префикс DNS, назначаемый пользователем (например, *myservice*.cloudapp.net). После того как служба готова к переносу из промежуточной среды в рабочую, выполните команду **Переключить**, чтобы настроить перенаправление запросов клиентов в рабочее развертывание.

    ![CloudServices\_QuickStartPage](./media/cloud-services-how-to-create-deploy/CloudServices_QuickStartPage.png)

4.  Щелкните **Отправка** на панели мониторинга, чтобы развернуть облачную службу.

    ![CloudServices\_UploadaPackage](./media/cloud-services-how-to-create-deploy/CloudServices_UploadaPackage.png)

5.  В поле **Метка развернутого приложения** введите имя нового развертывания, например MyCloudServicev1.

6.  В поле **Пакет** нажмите кнопку **Обзор** и выберите файл пакета службы (CSPKG).

7.  В поле **Конфигурация** нажмите кнопку **Обзор** и выберите файл конфигурации службы (CSCFG).

8.  Если в облачной службе будут содержаться роли с одним экземпляром, установите флажок **Развернуть, даже если одна или несколько ролей содержат отдельный экземпляр**, чтобы обеспечить развертывание.

 Azure гарантирует доступность облачной службы в течение 99,95 % времени в процессе обновления или обслуживания только в том случае, если для каждой роли определены как минимум два экземпляра. При необходимости после развертывания облачной службы можно добавить дополнительные экземпляры роли на странице **Масштабирование**. Дополнительные сведения см. в разделе [Соглашения об уровне обслуживания](http://www.windowsazure.com/ru-ru/support/legal/sla/).

1.  Нажмите кнопку "ОК" (флажок), чтобы начать развертывание облачной службы.

    Состояние развертывания можно контролировать с помощью области сообщений. Нажмите стрелку вниз, чтобы скрыть сообщение.

    ![CloudServices\_UploadProgress](./media/cloud-services-how-to-create-deploy/CloudServices_UploadProgress.png)

### Проверка успешного завершения развертывания

1.  Нажмите на кнопку **Панель мониторинга**.

2.  В разделе **Сводка** щелкните URL-адрес сайта, чтобы открыть облачную службу в веб-браузере.

	![CloudServices_QuickGlance](./media/cloud-services-how-to-create-deploy/CloudServices_QuickGlance.png)

  [отказ от ответственности]: ../includes/disclaimer.md
  [Непрерывная доставка в Azure с использованием Visual Studio Online]: http://go.microsoft.com/fwlink/?LinkID=251796&clcid=0x409
  [TFSTutorialForCloudService]: http://go.microsoft.com/fwlink/?LinkID=251796&clcid=0x409
  [Основные понятия]: #concepts
  [Подготовка приложения]: #prepare
  [Перед началом работы]: #begin
  [Практическое руководство. Создание облачной службы с помощью функции «Быстрое создание»]: #quick
  [Практическое руководство. Отправка сертификата для облачной службы]: #uploadcertificate
  [Практическое руководство. Развертывание облачной службы]: #deploy
  [Загрузки Azure]: http://www.windowsazure.com/ru-ru/develop/downloads/
  [примеров кода Azure]: http://code.msdn.microsoft.com/windowsazure/
  [Настройка SSL-сертификата на конечной точке HTTPS]: http://msdn.microsoft.com/ru-ru/library/windowsazure/ff795779.aspx
  [Обзор настройки подключения к удаленному рабочему столу для роли]: http://msdn.microsoft.com/ru-ru/library/windowsazure/gg433010.aspx
  [Включение системы диагностики в Azure]: http://www.windowsazure.com/ru-ru/develop/net/common-tasks/diagnostics/
  [Портал управления]: http://manage.windowsazure.com/
  [Операции с территориальными группами]: http://msdn.microsoft.com/ru-ru/library/windowsazure/ee460798.aspx
  [заметках о выпуске пакета SDK для Azure]: http://msdn.microsoft.com/ru-ru/library/windowsazure/hh552718.aspx
  [Соглашения об уровне обслуживания]: http://www.windowsazure.com/ru-ru/support/legal/sla/
