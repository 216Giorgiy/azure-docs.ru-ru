<properties 
	pageTitle="Создание и развертывание облачной службы - Azure" 
	description="Узнайте, как создать и развернуть облачную службу с помощью функции "Быстрое создание" в Azure." 
	services="cloud-services" 
	documentationCenter="" 
	authors="Thraka" 
	manager="timlt" 
	editor=""/>

<tags 
	ms.service="cloud-services" 
	ms.workload="tbd" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="10/23/2014" 
	ms.author="adegeo"/>





# Создание и развертывание облачной службы

Создать и развернуть облачную службу на портале управления Azure можно с помощью функций **Быстрое создание** и **Настраиваемое создание**. 

В этом разделе описывается быстрое создание облачной службы с последующим развертыванием соответствующего ей пакета в Azure с помощью функции **Отправка**. При выборе этого способа на портале управления Azure отображаются все необходимые для работы ссылки. Чтобы одновременно выполнить развертывание создаваемой облачной службы, воспользуйтесь функцией **Настраиваемое создание**. 

**Примечание**   Если вы планируете опубликовать облачную службу с помощью Windows Team Foundation Services (TFS), воспользуйтесь функцией "Быстрое создание" и затем настройте публикацию TFS на странице **Быстрый запуск** или на панели мониторинга. Дополнительную информацию см. в разделе [Непрерывная доставка в Azure с использованием Visual Studio Online][TFSTutorialForCloudService], а также в справке для страницы **Быстрый запуск**.

## Оглавление##

* [Основные понятия](#concepts)
* [Подготовка приложения](#prepare)
* [Перед началом работы](#begin)
* [Практическое руководство. Создание облачной службы с помощью функции "Быстрое создание"](#quick)
* [Практическое руководство. Отправка сертификата для облачной службы](#uploadcertificate)
* [Практическое руководство. Развертывание облачной службы](#deploy)


<h2><a id="concepts"></a>Основные понятия</h2>
Для развертывания приложения в качестве облачной службы в Azure необходимы три компонента.

>- **Файл определения службы**   Файл определения облачной службы с расширением CSDEF, в котором определяется модель службы, включая число ролей.

>- **Файл конфигурации службы**   Файл с расширением CSCFG, в котором задаются значения для любых параметров конфигурации облачной службы и отдельных ролей, включая число экземпляров ролей.

>- **Пакет службы**   Пакет службы с расширением CSPKG содержит код приложения и файл определения службы.

<h2><a id="prepare"></a>Подготовка приложения</h2>
Перед развертыванием облачной службы необходимо создать пакет облачной службы (CSPKG-файл) на основе кода приложения и файл конфигурации облачной службы (CSCFG). В каждом пакете содержатся конфигурации и файлы приложения. Параметры конфигурации определяются в файле конфигурации службы.

Инструменты для подготовки необходимых файлов развертывания находятся в пакете SDK для Azure. Этот пакет можно установить со страницы [Загрузки Azure](http://azure.microsoft.com/develop/downloads/) на языке, выбранном для разработки кода приложения.

Перед экспортом пакета службы необходимо отдельно настроить три компонента облачной службы:

- Если в развертываемой облачной службе будет применяться SSL-шифрование данных, настройте поддержку SSL для приложения. Дополнительные сведения см. в разделе [Как настроить SSL-сертификат на конечной точке HTTPS](http://msdn.microsoft.com/library/windowsazure/ff795779.aspx).

- Если будут использоваться подключения к удаленному рабочему столу для экземпляров роли, настройте роли соответствующим образом. Дополнительную информацию о подготовке файла определения службы для удаленного доступа см. в разделе [Настройка подключения к удаленному рабочему столу для роли в Azure](http://msdn.microsoft.com/library/hh124107.aspx).

- Чтобы включить подробный мониторинг для веб-службы, настройте для нее систему диагностики Azure. *Minimal monitoring* (по умолчанию) реализуется на основе счетчиков производительности основной операционной системы, собирающих данные для экземпляров ролей (виртуальные машины). В рамках подробного мониторинга* для более тщательного анализа проблем обработки приложений отслеживаются дополнительные метрики в экземплярах ролей. Дополнительную информацию о включении диагностики в Azure см. в разделе [Включение системы диагностики в Azure](http://azure.microsoft.com/develop/net/common-tasks/diagnostics/).

- Чтобы создать облачную службу с развертыванием веб-ролей или рабочих ролей, необходимо создать соответствующий пакет службы. Более подробная информация о файлах, относящихся к такому пакету, приводится в разделе [Настройка облачной службы для Azure](http://msdn.microsoft.com/library/hh124108.aspx). Чтобы создать файл пакета, рекомендуется ознакомиться с разделом [Создание пакета приложения для Windows Azure](http://msdn.microsoft.com/library/hh403979.aspx). При использовании Visual Studio для разработки приложения следует обратиться к разделу [Публикация облачной службы с помощью инструментов Azure](http://msdn.microsoft.com/library/ff683672.aspx).

<h2><a id="begin"></a>Перед началом работы</h2>

- Если пакет SDK для Azure не установлен, щелкните **Установить пакет Azure SDK**. Откроется страница [Загрузки Azure](http://azure.microsoft.com/develop/downloads/), откуда можно скачать пакет SDK для языка, выбранного для разработки кода приложения. (Также это можно сделать позднее.)

- Для экземпляров роли с сертификатами создайте сертификаты. В облачных службах используется PFX-файл с закрытым ключом. Сертификаты можно отправить в Azure как при создании, так и при развертывании облачной службы. Дополнительную информацию о сертификатах см. в разделе [Управление сертификатами](http://msdn.microsoft.com/library/gg981929.aspx).

- Если планируется развертывание облачной службы в территориальной группе, создайте соответствующую группу. Территориальные группы предназначены для развертывания облачной и других служб Azure в одном расположении региона. Чтобы создать такую группу, откройте раздел **Сети** портала управления и перейдите на страницу **Территориальные группы**. Дополнительную информацию см. в разделе [Создание территориальной группы на портале управления](http://msdn.microsoft.com/library/jj156209.aspx).


<h2><a id="quick"></a>Практическое руководство. Создание облачной службы с помощью функции "Быстрое создание"</h2>

1. Войдите на [портал управления](http://manage.windowsazure.com/), последовательно выберите **Создать** > **Среда выполнения приложений** > **Облачная служба** > **Быстрое создание**.

	![CloudServices_QuickCreate](./media/cloud-services-how-to-create-deploy/CloudServices_QuickCreate.png)

2. В поле **URL-адрес** введите имя поддомена для общедоступного URL-адреса, который будет использоваться для доступа к облачной службе в рабочем развертывании. URL-адрес рабочего развертывания имеет следующий формат:: http://*myURL*.cloudapp.net.

3. В поле **Регион или территориальная группа** выберите регион или группу, в которых требуется развернуть облачную службу. Чтобы развернуть облачную службу в том же расположении региона, что и другие службы Azure, укажите территориальную группу.

4. Выберите **Создать облачную службу**.

	![CloudServices_Region](./media/cloud-services-how-to-create-deploy/CloudServices_Regionlist.png)

	Состояние процесса можно контролировать с помощью области сообщений в нижней части окна.

	Созданная служба откроется в области **Облачные службы**. Об успешном создании службы свидетельствует состояние "Создано".

	![CloudServices_CloudServicesPage](./media/cloud-services-how-to-create-deploy/CloudServices_CloudServicesPage.png)


<h2><a id="uploadcertificate"></a>Практическое руководство. Отправка сертификата для облачной службы</h2>

1. На [портале управления](http://manage.windowsazure.com/) щелкните **Облачные службы**, затем щелкните имя облачной службы, а после этого **Сертификаты**.

	![CloudServices_QuickCreate](./media/cloud-services-how-to-create-deploy/CloudServices_EmptyDashboard.png)


2. Щелкните **Добавить новый сертификат** или **Отправить**.

3. В поле **Файл** нажмите **Обзор** и выберите соответствующий сертификат (файл с расширением .pfx).

4. В поле **Пароль** введите закрытый ключ сертификата.

5. Нажмите **ОК** (галочку).

	![CloudServices_AddaCertificate](./media/cloud-services-how-to-create-deploy/CloudServices_AddaCertificate.png)

	Ход процесса отправки можно контролировать в показанной ниже области сообщений. По завершении этого процесса сертификат добавляется в таблицу. В области сообщений нажмите OK, чтобы закрыть окно сообщения.

	![CloudServices_CertificateProgress](./media/cloud-services-how-to-create-deploy/CloudServices_CertificateProgress.png)

<h2><a id="deploy"></a>Практическое руководство. Развертывание облачной службы</h2>

1. На [портале управления](http://manage.windowsazure.com/) щелкните **Облачные службы**, затем щелкните имя облачной службы, а после этого **Панель мониторинга**.

	Панель мониторинга откроется в рабочей среде, на этом этапе можно выбрать пункт "Промежуточная", чтобы развернуть приложение в промежуточной среде. Дополнительную информацию см. в разделе [Управление развертываниями в Azure](http://msdn.microsoft.com/library/gg433027.aspx).

	 
2. Щелкните **Добавить новое развертывание в рабочей среде** или **Отправить**.

3. В поле **Метка развернутого приложения** введите имя нового развертывания, например MyCloudServicev4.

3. В поле **Пакет** нажмите кнопку **Обзор** и выберите файл пакета службы (CSPKG).

4. В поле **Конфигурация** нажмите кнопку **Обзор** и выберите файл конфигурации службы (CSCFG).

5. Если в облачной службе будут содержаться роли с одним экземпляром, установите флажок **Развернуть, даже если одна или несколько ролей содержат отдельный экземпляр**, чтобы обеспечить развертывание.

 Azure гарантирует доступность облачной службы в течение 99,95 % времени в процессе обновления или обслуживания только в том случае, если для каждой роли определены как минимум два экземпляра. При необходимости после развертывания облачной службы можно добавить дополнительные экземпляры роли на странице **Масштабирование**. Дополнительные сведения см. в разделе [Соглашения об уровне обслуживания](http://azure.microsoft.com/support/legal/sla/).

6. Нажмите кнопку **OK** (флажок), чтобы начать развертывание облачной службы.

	![CloudServices_UploadaPackage](./media/cloud-services-how-to-create-deploy/CloudServices_UploadaPackage.png)
 

	Состояние развертывания можно контролировать с помощью области сообщений. Нажмите кнопку ОК, чтобы закрыть окно сообщения.

	![CloudServices_UploadProgress](./media/cloud-services-how-to-create-deploy/CloudServices_UploadProgress.png)

### Проверка успешного завершения развертывания###

1. Нажмите на кнопку **Панель мониторинга**.

	В строке состояния должна отображаться информация о том, что служба **Запущена**.

2. В разделе **Сводка** щелкните URL-адрес сайта, чтобы открыть облачную службу в веб-браузере.

[TFSTutorialForCloudService]: http://go.microsoft.com/fwlink/?LinkID=251796&clcid=0x409

	![CloudServices_QuickGlance](./media/cloud-services-how-to-create-deploy/CloudServices_QuickGlance.png)


<!--HONumber=45--> 
