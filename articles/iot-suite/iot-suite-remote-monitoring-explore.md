---
title: Начало работы с решением удаленного мониторинга в Azure | Документация Майкрософт
description: В этом руководстве используются моделируемые сценарии для представления акселератора решений удаленного мониторинга. Эти сценарии создаются при первом развертывании акселератора решений удаленного мониторинга.
services: iot-suite
suite: iot-suite
author: dominicbetts
manager: timlt
ms.author: dobett
ms.service: iot-suite
ms.date: 05/01/2018
ms.topic: article
ms.devlang: NA
ms.tgt_pltfrm: NA
ms.workload: NA
ms.openlocfilehash: 6a38098dc2bbcfc6ff59b9f8c96d1e947c637ab1
ms.sourcegitcommit: 688a394c4901590bbcf5351f9afdf9e8f0c89505
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/18/2018
---
# <a name="explore-the-capabilities-of-the-remote-monitoring-solution-accelerator"></a>Обзор возможностей акселератора решений для удаленного мониторинга

В этом руководстве рассматриваются ключевые возможности решения удаленного мониторинга. Для представления этих возможностей здесь продемонстрированы распространенные сценарии клиентов, в которых используется виртуальное приложение Интернета вещей для компании под названием Contoso.

Это руководство поможет разобраться с типичными сценариями Интернета вещей, которые решение удаленного мониторинга предоставляет изначально.

Из этого руководства вы узнаете, как выполнять такие задачи:

>[!div class="checklist"]
> * визуализация и фильтрация устройств на панели мониторинга;
> * реагирование на оповещение;
> * обновление встроенного ПО на устройствах;
> * Упорядочивание ресурсов
> * Остановка работы и запуск имитированных устройств

В следующем видео показано пошаговое руководство по решению для удаленного мониторинга:

>[!VIDEO https://channel9.msdn.com/Shows/Internet-of-Things-Show/Part-28-An-introduction-to-Azure-IoT-through-the-new-Remote-Monitoring-Preconfigured-Solution/Player]

## <a name="prerequisites"></a>предварительным требованиям

Для работы с этим руководством необходим развернутый экземпляр решения удаленного мониторинга в подписке Azure.

Если решение для удаленного мониторинга еще не развернуто, выполните инструкции по [развертыванию акселератора решений для удаленного мониторинга](../iot-accelerators/iot-accelerators-remote-monitoring-deploy.md).

## <a name="the-contoso-sample-iot-deployment"></a>Пример развертывания решения Интернета вещей Contoso

Пример развертывания решения Интернета вещей Contoso можно использовать, чтобы понять основные сценарии, которые решение удаленного мониторинга предоставляет изначально. Эти сценарии основаны на реальных развертываниях Интернета вещей. Скорее всего, вы настроите решение удаленного мониторинга с учетом конкретных требований, тем не менее пример Contoso позволит вам изучить основы.

> [!NOTE]
> Если для развертывания акселератора решений используется CLI, файл `deployment-{your deployment name}-output.json` содержит сведения о развертывании, такие как URL-адрес для получения доступа к развернутому примеру.

Пример Contoso предоставляет набор виртуальных устройств и правил для работы с ними. Когда вы ознакомитесь с основными сценариями, сведения о других возможностях решения см. в статье [Perform advanced monitoring using the remote monitoring solution](iot-suite-remote-monitoring-monitor.md) (Выполнение расширенного мониторинга с помощью решения удаленного мониторинга).

Contoso — это организация, которая управляет широким набором ресурсов в разных средах. Contoso планирует использовать возможности облачных приложений Интернета вещей удаленного мониторинга нескольких ресурсов и управления ими из централизованного приложения. В следующих разделах приведены краткие сведения о начальной конфигурации примера Contoso.

> [!NOTE]
> Демонстрация Contoso — единственный способ подготовки виртуальных устройств и создания правил. Другие варианты подготовки включают создание собственных настраиваемых устройств. Дополнительные сведения о создании устройств и правил см. в статьях [Manage and configure your devices](iot-suite-remote-monitoring-manage.md) (Настройка устройств и управление ими) и [Detect issues using threshold-based rules](../iot-accelerators/iot-accelerators-remote-monitoring-automate.md) (Обнаружение проблем с помощью правил на основе пороговых значений).

### <a name="contoso-devices"></a>Устройства Contoso

Contoso использует разные типы интеллектуальных устройств. Эти устройства выполняют разные роли в компании, отправляя различные потоки телеметрии. Кроме того, каждый тип устройства имеет собственные свойства и поддерживаемые методы.

В следующей таблице представлено краткое описание типов подготовленного устройства:

| Тип устройства        | Телеметрия                                  | properties                                  | Теги                    | Методы                                                                                      |
| ------------------ | ------------------------------------------ | ------------------------------------------- | ----------------------- | -------------------------------------------------------------------------------------------- |
| Холодильник            | Температура, влажность, давление            | Тип, версия встроенного ПО, модель               | Расположение, этаж, корпус | Перезагрузка, обновление встроенного ПО, выпуск аварийного клапана, повышение давления                          |
| Создание прототипов устройства | Температура, давление, географическое расположение        | Тип, версия встроенного ПО, модель               | Расположение, режим          | Перезагрузка, обновление встроенного ПО, перемещение устройства, остановка устройства, выпуск температуры, увеличение температуры |
| Двигатель             | Уровень топлива в баке, датчик охлаждающей жидкости, вибрация | Тип, версия встроенного ПО, модель               | Расположение, этаж, корпус | Обновление встроенного ПО, пустой бак, полный бак                                              |
| Грузовик              | Географическое расположение, скорость, температура груза     | Тип, версия встроенного ПО, модель               | Расположение, загрузка          | Снижение температуры груза, повышение температуры груза, обновление встроенного ПО                         |
| Лифт           | Пол, вибрация, температура              | Тип, версия встроенного ПО, модель, географическое расположение | Расположение, корпус        | Остановка лифта, запуск лифта, обновление встроенного ПО                                               |

> [!NOTE]
> Демонстрационный пример Contoso подготавливает два устройства каждого типа. Один тип устройства функционирует правильно в границах, определенных Contoso, а второй имеет неисправность. В следующем разделе описаны правила, определяемые Contoso для устройств. Эти правила определяют границы правильного поведения.

### <a name="contoso-rules"></a>Правила Contoso

Операторы Contoso знают пороговые значения, которые определяют, правильно ли работает устройство. Например, холодильник будет работать ненадлежаще, если сообщаемое давление превышает 250 psi. В следующей таблице показаны правила на основе порогового значения, которые Contoso определяет для каждого типа устройств:

| Имя правила | ОПИСАНИЕ | Threshold (Пороговое значение) | Уровень серьезности | Затрагиваемые устройства |
| --------- | ----------- | --------- | -------- | ---------------- |
| Слишком высокое давление в холодильнике | Оповещает, если холодильник достигает уровня, превышающего нормальные уровни давления   |P > 250 psi       | критические ошибки. | Холодильники            |
| Температура прототипа устройства слишком высокая  | Оповещает, если прототип устройства достигает уровня, превышающего нормальные уровни температуры  |T > 80&deg; F |критические ошибки. | Создание прототипов устройств |
| Бак двигателя пуст  | Оповещает, если топливный бак двигателя пуст                     | F < 5 галлонов | Сведения     | Двигатели             |
| Температура груза выше обычной | Оповещает, если температура груза грузовика выше обычной                 | T < 45&deg; F |Предупреждение  | Грузовики              |
| Вибрация лифта остановлена      | Оповещает о полной остановке лифта (исходя из уровня вибрации)                     | V < 0,1 мм |Предупреждение  | Лифты           |

### <a name="operate-the-contoso-sample-deployment"></a>Использование примера развертывания Contoso

Теперь вы видели начальную настройку в примере Contoso. В следующих разделах описываются три сценария в образце Contoso, которые показывают, как оператор может использовать акселератор решений.

## <a name="respond-to-a-pressure-alert"></a>Реагирование на оповещение о давлении

В этом сценарии показано, как идентифицировать оповещение, активированное холодильником, и ответить на него. Холодильник расположен в Редмонде, дом 43, этаж 2.

Как оператор вы видите на панели мониторинга, что оповещение связано с давлением холодильника. Карту можно двигать и масштабировать, чтобы увидеть более подробную информацию.

1. На странице **Панель мониторинга** в сетке **Оповещения** можно увидеть оповещение **Chiller pressure too high** (Слишком высокое давление холодильника). Холодильник также выделен на карте:

    ![На панели мониторинга показано оповещение о давлении и устройство на карте](media/iot-suite-remote-monitoring-explore/dashboardalarm.png)

1. Для перехода на страницу **Maintenance** (Обслуживание) выберите **Maintenance** (Обслуживание) в меню навигации. На странице **Обслуживание** можно просматривать сведения о правиле, вызвавшем оповещение о давлении в холодильнике.

1. В списке уведомлений показано, сколько раз было активировано оповещение, а также подтвержденные, открытые и закрытые оповещения:

    ![На странице "Обслуживание" показан список активированных оповещений](media/iot-suite-remote-monitoring-explore/maintenancealarmlist.png)

1. Первое оповещение в списке — самое последнее. Щелкните оповещение **Chiller Pressure Too High** (Давление в холодильнике слишком высокое), чтобы просмотреть связанные устройства и данные телеметрии. Телеметрия отражает пиковое давление в холодильнике:

    ![Страница "Обслуживание", показывающая телеметрию для выбранного оповещения](media/iot-suite-remote-monitoring-explore/maintenancetelemetry.png)

Вы определили проблему, вызвавшую оповещение, и связанное устройство. Последующие шаги оператора — подтвердить оповещение и устранить проблему.

1. Чтобы указать, что вы в данный момент работаете над оповещением, измените параметр **Состояние оповещения** на **Подтверждено**:

    ![Выбор и подтверждение оповещения](media/iot-suite-remote-monitoring-explore/maintenanceacknowledge.png)

1. Для работы с холодильником выберите его, а затем щелкните **Задания**. Выберите **Run method** (Метод Run), затем **EmergencyValveRelease**, добавьте имя задания **ChillerPressureRelease** и нажмите кнопку **Применить**. Эти параметры создают задание, которое будет выполнено немедленно:

    ![Выбор устройства и планирование действия](media/iot-suite-remote-monitoring-explore/maintenanceschedule.png)

1. Чтобы просмотреть состояние задания, вернитесь на страницу **Maintenance** (Обслуживание) и просмотрите список заданий в представлении **Задания**. Вы можете увидеть, что задание запустилось, чтобы выпустить давление в клапане холодильника:

    ![Состояние заданий в представлении "Задания"](media/iot-suite-remote-monitoring-explore/maintenancerunningjob.png)

Наконец, убедитесь, что значения телеметрии холодильника вернулись в норму.

1. Чтобы просмотреть сетку оповещений, перейдите на страницу **панели мониторинга**.

1. Чтобы просмотреть телеметрию устройства, выберите устройство, связанное с исходным оповещением, на карте и убедитесь, что вернулось обычное состояние.

1. Чтобы закрыть инцидент, перейдите на страницу **Обслуживание**, выберите оповещение и установите состояние **Закрыто**:

    ![Выбор и закрытие оповещения](media/iot-suite-remote-monitoring-explore/maintenanceclose.png)

## <a name="update-device-firmware"></a>Обновление встроенного ПО устройства

Contoso тестирует новый тип устройства в поле. В рамках цикла тестирования необходимо убедиться, что обновления встроенного ПО этого устройства выполняются надлежащим образом. На следующих шагах показано, как использовать решение удаленного мониторинга для обновления встроенного ПО на нескольких устройствах.

Выполнять необходимые задачи управления устройством можно на странице **Devices** (Устройства). Начните с фильтрации всех прототипов устройств:

1. Перейдите на страницу **Devices** (Устройства). В раскрывающемся списке **Filters** (Фильтры) выберите фильтр **Prototyping devices** (Прототипные устройства):

    ![Использование фильтра на странице устройств](media/iot-suite-remote-monitoring-explore/devicesprototypingfilter.png)

    > [!TIP]
    > Щелкните **Manage** (Управление) для управления доступными фильтрами.

1. Выберите одно из прототипных устройств:

    ![Выбор устройства на странице устройств](media/iot-suite-remote-monitoring-explore/devicesselect.png)

1. Нажмите кнопку **Задания**, выберите **Run method** (Метод Run), а затем **Обновление встроенного ПО**. Введите **имя задания**, **версию встроенного ПО** и **URI встроенного ПО** в соответствующих полях. Нажмите кнопку **Apply** (Применить), чтобы запланировать задание для выполнения сейчас:

    ![Планирование обновления встроенного ПО на устройстве](media/iot-suite-remote-monitoring-explore/devicesschedulefirmware.png)

    > [!NOTE]
    > Если используются имитированные устройства, для **URI встроенного ПО** можно указать любой необходимый URL-адрес и любое значение для **версии встроенного ПО**. Виртуальные устройства не имеют доступа к URL-адресу.

1. Обратите внимание на число устройств, на которые влияет задание, и нажмите кнопку **Apply** (Применить):

    ![Отправка задания обновления встроенного ПО](media/iot-suite-remote-monitoring-explore/devicessubmitupdate.png)

Отслеживать ход выполнения задания можно на странице **Maintenance** (Обслуживание).

1. Чтобы просмотреть список задач, перейдите на страницу **Maintenance** (Обслуживание) и щелкните **Задания**.

1. Найдите событие, связанное с созданным заданием. Убедитесь, что процесс обновления встроенного ПО запущен правильно.

<!-- 05/01 broken 
You can create a filter to verify the firmware version updated correctly.

1. To create a filter, navigate to the **Devices** page and select **Manage device groups**:

    ![Manage device groups](media/iot-suite-remote-monitoring-explore/devicesmanagefilters.png)

1. Create a filter that includes only devices with the new firmware version:

    ![Create device filter](media/iot-suite-remote-monitoring-explore/devicescreatefilter.png)

1. Return to the **Devices** page and verify that the device has the new firmware version. -->

## <a name="organize-your-assets"></a>Упорядочивание ресурсов

У Contoso есть две различные команды для выездного обслуживания:

* команда обслуживания зданий управляет холодильниками, лифтами и двигателями;
* команда обслуживания автомобилей обслуживает грузовики и прототипы устройств.

Чтобы упростить организацию и управление устройствами, оператор может пометить их тегом с именем соответствующей команды.

Вы можете создать имена тегов, которые будут использоваться с устройствами.

1. Чтобы отобразить все устройства, перейдите на страницу **Devices** (Устройства) и выберите фильтр **All devices** (Все устройства):

    ![Показать все устройства](media/iot-suite-remote-monitoring-explore/devicesalldevices.png)

1. Выберите устройства **Trucks** (Грузовики) и **Prototyping** (Прототипы). Затем выберите **Задания**:

    ![Выберите устройства-прототипы и грузовики](media/iot-suite-remote-monitoring-explore/devicesmultiselect.png)

1. Выберите **Tag** (Пометить), а затем создайте новый текстовый тег строки под названием **FieldService** со значением **ConnectedVehicle**. Выберите имя для задания. Затем нажмите кнопку **Apply** (Применить):

    ![Добавление тегов к устройствам-прототипам и грузовикам](media/iot-suite-remote-monitoring-explore/devicesaddtag.png)

1. Выберите устройства **Холодильник**, **Лифт** и **Двигатель**. Затем выберите **Задания**:

    ![Выбор холодильника, двигателя и лифта](media/iot-suite-remote-monitoring-explore/devicesmultiselect2.png)

1. Выберите **Tag** (Пометить), а затем создайте текстовый тег под названием **FieldService** со значением **SmartBuilding**. Выберите имя для задания. Затем нажмите кнопку **Apply** (Применить):

    ![Добавление тега к устройствам: холодильник, двигатель и лифт](media/iot-suite-remote-monitoring-explore/devicesaddtag2.png)

Значения тегов можно использовать для создания фильтров.

1. На странице **Устройства** выберите **Manage device groups** (Управление группами устройств):

    ![Управление группами устройств](media/iot-suite-remote-monitoring-explore/devicesmanagefilters.png)

1. Создайте фильтр, который использует имя тега **FieldService** и значение **SmartBuilding**. Сохраните фильтр как **Smart Building** (Интеллектуальное здание).

1. Создайте фильтр, который использует имя тега **FieldService** и значение **ConnectedVehicle**. Сохраните фильтр как **Connected Vehicle** (Подключенный автомобиль).

Теперь оператор Contoso может запрашивать устройства на основе рабочей группы без необходимости изменять что-либо на своих устройствах.

## <a name="stop-simulated-devices"></a>Остановка работы имитированных устройств

Остановить работу имитированных устройств можно при помощи меню параметров. Это сокращает затраты на тестирование и изучение решения. Чтобы запустить имитированные устройства или остановить их работу:

1. Выберите значок **Параметры**.

1. Включите или отключите параметр **поступления данных**:

    ![Меню параметров](media/iot-suite-remote-monitoring-explore/settings.png)

## <a name="customize-the-ui"></a>Настройка пользовательского интерфейса

В меню параметров можно применить основные настройки к акселератору решения удаленного мониторинга. Вы можете:

- переключиться между светлой и темной темами;
- изменить имя решения;
- отправить пользовательский логотип.

## <a name="next-steps"></a>Дополнительная информация

Из этого руководства вы узнали следующее:

>[!div class="checklist"]
> * визуализация и фильтрация устройств на панели мониторинга;
> * реагирование на оповещение;
> * обновление встроенного ПО на устройствах;
> * Упорядочивание ресурсов
> * Остановка работы и запуск имитированных устройств

Теперь, когда вы ознакомились с решением удаленного мониторинга, мы рекомендуем узнать о дополнительных возможностях этого решения:

* [Мониторинг устройств](./iot-suite-remote-monitoring-monitor.md).
* [Управление устройствами](./iot-suite-remote-monitoring-manage.md).
* [Автоматизация решения с помощью правил](./../iot-accelerators/iot-accelerators-remote-monitoring-automate.md).
* [Обслуживание решения](./iot-suite-remote-monitoring-maintain.md).
