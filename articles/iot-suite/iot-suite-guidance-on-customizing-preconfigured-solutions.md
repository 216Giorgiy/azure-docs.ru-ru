<properties
	pageTitle="Настройка предварительно настроенных решений | Microsoft Azure"
	description="Руководство по настройке предварительно настроенных решений набора Azure IoT Suite."
	services=""
    suite="iot-suite"
	documentationCenter=".net"
	authors="stevehob"
	manager="timlt"
	editor=""/>

<tags
     ms.service="iot-suite"
     ms.devlang="dotnet"
     ms.topic="article"
     ms.tgt_pltfrm="na"
     ms.workload="na"
     ms.date="03/02/2016"
     ms.author="stevehob"/>

# Настройка предварительно настроенных решений

Предварительно настроенные решения, входящие в состав набора IoT Azure, показывают, какие службы работают вместе в составе набора, формируя комплексное решение. Начиная с этой стартовой точки, есть несколько мест, в которых можно выполнить настройку и расширение решений для их адаптации к конкретным сценариям. В следующих разделах описываются эти точки настройки.

## Поиск исходного кода

Исходный код для предварительно настроенного решения можно найти в GitHub в следующих репозиториях:

- Удаленный мониторинг: [https://www.github.com/Azure/azure-iot-remote-monitoring](https://github.com/Azure/azure-iot-remote-monitoring)
- Прогнозируемое обслуживание: [https://github.com/Azure/azure-iot-predictive-maintenance](https://github.com/Azure/azure-iot-predictive-maintenance)

Исходный код для предварительно настроенных решений предоставляется для демонстрации шаблонов и методов, используемых для реализации полной функциональности решения IoT с помощью Azure IoT Suite. Дополнительные сведения о том, как создавать и развертывать решения, можно найти в репозиториях GitHub.

## Изменение предварительно настроенных правил

Решение удаленного мониторинга включает в себя три задания [Azure Stream Analytics](https://azure.microsoft.com/services/stream-analytics/) для реализации логики сведений об устройстве, телеметрии и правил, отображаемой для решения.

Три задания Stream Analytics и их синтаксис подробно описаны в [пошаговом руководстве по работе с настроенным решением для удаленного мониторинга](iot-suite-remote-monitoring-sample-walkthrough.md).

Эти задания можно редактировать напрямую, изменяя или добавляя логику для своего сценария. Задания Stream Analytics можно найти следующим образом:
 
1. Перейдите на [портал Azure](https://portal.azure.com).
2. Перейдите к группе ресурсов, имя которой совпадает с именем вашего решения IoT. 
3. Выберите задание Azure Stream Analytics, которое вы хотите изменить. 
4. Остановите задание, выбрав **Остановить** в наборе команд. 
5. Измените входные данные, запрос и выходные данные.

    В качестве простого изменения запроса для задания **Правила** можно изменить **">"** на **"<"**. При изменении правила на портале в запросе по-прежнему будет отображаться **">"**, но вы увидите, что поведение изменилось из-за изменения базового задания.

6. Запустите задание

> [AZURE.NOTE] Панель удаленного мониторинга зависит от конкретных данных, поэтому изменение задания потенциально может вызвать сбой панели мониторинга.

## Добавление собственных правил

Наряду с изменением предварительно настроенных заданий Stream Analytics на портале Azure можно добавлять новые задания или новые запросы для существующих заданий.

## Настройка устройств

Одно из наиболее распространенных действий расширения — работа с устройствами, относящимися к вашему сценарию. Существует несколько способов работы с устройствами. В число этих методов входят изменение виртуального устройства для соответствия вашему сценарию или подключение физического устройства к решению с помощью [пакета SDK устройства IoT][].

Пошаговые инструкции по добавлению устройств в предварительно настроенное решение удаленного мониторинга см. в документе [Подключение устройств для набора IoT](iot-suite-connecting-devices.md).

### Создание собственного виртуального устройства

В исходный код решения удаленного мониторинга (ссылка на него приведена выше) включен эмулятор .NET. Этот эмулятор подготавливается как часть решения, и его можно настроить для отправки различных метаданных телеметрии и для ответа на различные команды.

Симулятором предварительно настроенного решения удаленного мониторинга является устройство охлаждения, которое выдает данные телеметрии о температуре и влажности. Изменить симулятор можно в проекте [Simulator.WebJob](https://github.com/Azure/azure-iot-remote-monitoring/tree/master/Simulator/Simulator.WebJob) при создании разветвления в репозитории GitHub.

Кроме того, IoT Azure содержит [пример пакета SDK для языка C](https://github.com/Azure/azure-iot-sdks/tree/master/c/serializer/samples/remote_monitoring), предназначенный для работы с предварительно настроенным решением удаленного мониторинга.

### Построение и использование собственного (физического) устройства

[Пакеты SDK для IoT Azure](https://github.com/Azure/azure-iot-sdks) предоставляют библиотеки для подключения различных типов устройств (языков и операционных систем) к решениям IoT.

## Настройка ролей приложений вручную

Следующая процедура описывает процесс добавления ролей приложения **Admin** и **ReadOnly** в предварительно настроенное решение. Обратите внимание, что предварительно настроенные решения, подготовленные с сайта azureiotsuite.com, уже включают роли **Admin** и **ReadOnly**.

Члены роли **ReadOnly** могут просматривать панель мониторинга и список устройств, но им не разрешено добавлять устройства, изменять атрибуты устройств и отправлять команды. Члены роли **Admin** имеют полный доступ ко всем функциональным возможностям в решении.

1. Войдите на [классический портал Azure][lnk-classic-portal].

2. Выберите **Active Directory**.

3. Щелкните имя клиента AAD, который вы использовали при подготовке решения.

4. Щелкните **Приложения**.

5. Щелкните имя приложения, совпадающее с именем предварительно настроенного решения. Если приложение отсутствует в списке, выберите в раскрывающемся списке **Показать** пункт **Приложения, которыми владеет моя компания** и установите флажок.

6.  Внизу страницы щелкните **Управление манифестом**, а затем **Загрузить манифест**.

7. При этом на ваш локальный компьютер будет загружен JSON-файл. Откройте этот файл для редактирования в любом текстовом редакторе.

8. В третьей строке JSON-файла вы найдете следующее:

  ```
  "appRoles" : [],
  ```
  Замените этот фрагмент следующим:

  ```
  "appRoles": [
  {
  "allowedMemberTypes": [
  "User"
  ],
  "description": "Administrator access to the application",
  "displayName": "Admin",
  "id": "a400a00b-f67c-42b7-ba9a-f73d8c67e433",
  "isEnabled": true,
  "value": "Admin"
  },
  {
  "allowedMemberTypes": [
  "User"
  ],
  "description": "Read only access to device information",
  "displayName": "Read Only",
  "id": "e5bbd0f5-128e-4362-9dd1-8f253c6082d7",
  "isEnabled": true,
  "value": "ReadOnly"
  } ],
  ```

9. Сохраните обновленный JSON-файл (можно перезаписать существующий файл).

10.  На портале управления Azure внизу страницы выберите **Управление манифестом**, а затем **Отправить манифест**, чтобы отправить JSON-файл, сохраненный на предыдущем шаге.

11. Теперь вы добавили роли **Admin** и **ReadOnly** в свое приложение.

12. Чтобы назначить одну из этих ролей пользователю в каталоге, см. раздел [Разрешения на сайте azureiotsuite.com][lnk-permissions].

## Отзыв

У вас есть предложение по настройке, которое не описано в этом документе? Предложения по компонентам оставляйте на сайте [User Voice](https://feedback.azure.com/forums/321918-azure-iot) или в комментариях к этой статье ниже.

## Дальнейшие действия

Ссылки на дополнительные сведения и документацию по устройствам IoT см. на [сайте для разработчиков IoT Azure](https://azure.microsoft.com/develop/iot/).

[пакета SDK устройства IoT]: https://azure.microsoft.com/documentation/articles/iot-hub-sdks-summary/
[lnk-permissions]: iot-suite-permissions.md
[lnk-classic-portal]: https://manage.windowsazure.com

<!---HONumber=AcomDC_0330_2016-->