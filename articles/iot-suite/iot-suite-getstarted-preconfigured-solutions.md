<properties
	pageTitle="Приступая к работе с решениями с предварительно заданными параметрами | Microsoft Azure"
	description="Следуйте инструкциям этого учебника, чтобы научиться развертывать предварительно настроенные решения набора IoT Microsoft Azure"
	services=""
    suite="iot-suite"
	documentationCenter=""
	authors="dominicbetts"
	manager="timlt"
	editor=""/>

<tags
     ms.service="iot-suite"
     ms.devlang="na"
     ms.topic="hero-article"
     ms.tgt_pltfrm="na"
     ms.workload="na"
     ms.date="05/25/2016"
     ms.author="dobett"/>

# Учебник: начало работы с предварительно настроенными решениями

## Введение

Набор [предварительно настроенных решений][lnk-preconfigured-solutions] Azure IoT включает несколько служб Azure IoT, которые используются при создании комплексных решений для реализации распространенных бизнес-сценариев IoT.

В этом руководстве показано, как подготовить предварительно настроенное решение *удаленного мониторинга*. Кроме того, описываются основные функции этого решения.

Для работы с этим руководством вам потребуется активная подписка Azure.

> [AZURE.NOTE]  Если ее нет, можно создать бесплатную пробную учетную запись всего за несколько минут. Дополнительные сведения см. в разделе [Бесплатная пробная версия Azure][lnk_free_trial].

## Подготовка предварительно настроенного решения удаленного мониторинга

1.  Войдите на сайт [azureiotsuite.com][lnk-azureiotsuite] с помощью учетных данных Azure и нажмите кнопку **+**, чтобы создать решение.

    > [AZURE.NOTE] Если возникают проблемы с разрешениями, необходимыми для подготовки решения, обратитесь к статье [Разрешения на сайте azureiotsuite.com][lnk-permissions].

2.  На плитке **Удаленный мониторинг** щелкните **Выбрать**.

3.  Укажите **имя** для предварительно настроенного решения удаленного мониторинга.

4.  Укажите **регион** и **подписку**, которые будут использоваться при подготовке решения.

5.  Щелкните **Создать решение**, чтобы начать процесс подготовки. Это обычно занимает несколько минут.

## Дождитесь завершения процесса подготовки.

1. Щелкните элемент решения с состоянием **Подготовка**.
 
2. Следите за **Состояниями подготовки** по мере развертывания служб Azure в подписке Azure.

3. После завершения подготовки состояние изменится на **Готово**.

4. Щелкните элемент, и вы увидите подробные сведения о решении в правой панели.

> [AZURE.NOTE] Если при развертывании предварительно настроенного решения возникают проблемы, см. сведения в статьях [Разрешения на сайте azureiotsuite.com][lnk-permissions] и [Часто задаваемые вопросы об IoT Suite][lnk-faq]. Если проблемы не удается устранить, отправьте запрос в службу поддержки на [портале][lnk-portal].

Есть ли сведения, которые вы ожидали увидеть и которые не указаны для вашего решения? Сообщите нам о своих предложениях на [форуме](https://feedback.azure.com/forums/321918-azure-iot).

## Просмотр панели мониторинга решения удаленного мониторинга

Панель мониторинга решения позволяет управлять развернутым решением. Например, можно просматривать данные телеметрии, добавлять устройства и настраивать правила.

1.  Когда подготовка завершится и на плитке предварительно настроенного решения появится надпись **Готово**, нажмите кнопку **Запустить**. Панель мониторинга решения откроется на новой вкладке.

    ![][img-launch-solution]

2.  По умолчанию на портале решения отображается *панель мониторинга решения*. В меню слева можно выбрать другие представления.

    ![][img-dashboard]

На панели мониторинга отображаются следующие сведения:

- На карте показано расположение каждого устройства, подключенного к решению. При первом запуске решения отобразятся четыре виртуальных устройства, реализованных в виде веб-заданий Azure. Для отображения сведений на карте в решении используется интерфейс API для Карт Bing.
- На панели **История телеметрии** отображаются графики влажности и температуры для выбранного устройства в близком к реальному времени, а также приведены сводные данные, например максимальное, минимальное и среднее значения влажности.
- На панели **История оповещений** отображаются последние события, когда значение телеметрии превысило пороговое значение. В дополнение к оповещениям, созданным в предварительно настроенном решении, можно задать собственные оповещения.

## Просмотр списка устройств решения

В списке устройств показаны все зарегистрированные устройства в решении. Вы можете просматривать и редактировать метаданные устройства, добавлять или удалять устройства и отправлять команды на устройства.

1.  В меню слева щелкните **Устройства**, чтобы перейти к *списку устройств* этого решения.

    ![][img-devicelist]

2.  Список устройств отображает четыре имитации устройств, созданные в ходе подготовки.

3.  Чтобы просмотреть сведения об устройстве, щелкните его в списке устройств.

    ![][img-devicedetails]

На панели **Сведения об устройстве** содержится три раздела:

- В разделе **Действия** перечислены действия, которые можно выполнить для устройства. Если отключить устройство, оно больше не сможет отправлять данные телеметрии или получать команды. После отключения устройство можно включить снова. Вы можете добавить связанное с устройством правило, которое будет активировать оповещение, когда значение телеметрии превысит пороговое значение. Кроме того, на устройство можно отправлять команды. При первом подключении устройства к решению отправляются сведения о командах, на которые оно может отвечать.
- В разделе **Свойства устройства** приведены метаданные устройства. Некоторые метаданные берутся из самого устройства (например, производитель), а некоторые генерируются решением (например, время создания). Данные в этом разделе можно изменить.
- В разделе **Ключи проверки подлинности** перечислены ключи, которые устройство может использовать для проверки подлинности в решении.

## Отправка команды устройству

На панели сведений об устройствах показаны все команды, которые поддерживает конкретное устройство. Здесь также можно отправлять команды устройству. При первом запуске устройство отправляет решению сведения о командах, которые оно поддерживает.

1.  В области сведений о выбранном устройстве щелкните **Команды**.

    ![][img-devicecommands]

2.  В списке команд выберите **PingDevice**.

3.  Щелкните **Отправить команду**.

4.  В журнале команд отобразится состояние команды.

    ![][img-pingcommand]

Решение отслеживает состояние каждой отправляемой команды. Изначальное состояние команды — **Ожидание**. Когда устройство сообщает о выполнении команды, значение состояния изменяется на **Успешно**.

## Добавление нового виртуального устройства

1.  Вернитесь к списку устройств.

2.  В левом нижнем углу щелкните **+ Добавить устройство**, чтобы добавить новое устройство.

    ![][img-adddevice]

3.  На плитке **Имитация устройства** щелкните **Добавить**.

    ![][img-addnew]
    
    Помимо создания виртуального устройства, можно также добавить физическое устройство на панели **Пользовательское устройство**. Дополнительные сведения см. в статье [Подключение устройства к предварительно настроенному решению для удаленного мониторинга IoT Suite][lnk-connecting-devices].

4.  Выберите пункт **Задать идентификатор устройства самостоятельно** и укажите имя уникального идентификатора устройства: **mydevice\_01**.

5.  Щелкните **Создать**.

    ![][img-definedevice]

6. На этапе 3 действия **Добавить имитацию устройства** щелкните **Готово**, чтобы вернуться к списку устройств.

7. В списке устройств состояние устройства изменится на **Работает**.

    ![][img-runningnew]

8. На панели мониторинга можно просмотреть данные телеметрии нового виртуального устройства:

    ![][img-runningnew-2]

## Изменение метаданных устройства

1.  Вернитесь к списку устройств.

2.  Выберите новое устройство в **списке устройств** и нажмите кнопку **Изменить**, чтобы изменить **свойства устройства**:

    ![][img-editdevice]

3. Прокрутите вниз и измените значения широты и долготы. Затем нажмите кнопку **Сохранить изменения в реестре устройства**.

    ![][img-editdevice2]

4. Вернувшись на панель мониторинга, вы увидите, что расположение устройства на карте изменилось:

    ![][img-editdevice3]

## Добавление правила для нового устройства

Только что созданное устройство пока не регулируется никакими правилами. В этом разделе описано, как добавить правило, которое активирует оповещение, если значение температуры, сообщаемое новым устройством, превышает 47 градусов. Прежде чем добавить правило, зайдите в раздел истории телеметрии на панели мониторинга и убедитесь, что температура нового устройства никогда не превышает 45 градусов.

1.  Вернитесь к списку устройств.

2.  Выберите новое устройство в **списке устройств** и нажмите кнопку **Добавить правило**.

3. В окне создания правила в поле данных выберите значение **Температура** и укажите **AlarmTemp** в качестве выходных данных правила при превышении 47 градусов.

    ![][img-adddevicerule]

4. Чтобы сохранить изменения, нажмите кнопку **Сохранить и просмотреть правила**.

5.  В области сведений о новом устройстве щелкните **Команды**.

    ![][img-adddevicerule2]

6.  В списке команд выберите **ChangeSetPointTemp** и укажите в поле **SetPointTemp** значение "45". Нажмите кнопку **Отправить команду**.

    ![][img-adddevicerule3]

7.  Вернитесь на панель мониторинга решения. Вскоре, когда температура, сообщаемая новым устройством, превысит пороговое значение в 47 градусов, на панели **История оповещений** появится новая запись.

    ![][img-adddevicerule4]

8. На странице **Правила** панели мониторинга можно просматривать и изменять все правила.

    ![][img-rules]

9. На странице **Действия** панели мониторинга можно просматривать и изменять все действия, которые могут быть предприняты при выполнении условия, заданного правилом.

    ![][img-actions]

> [AZURE.NOTE] Можно определить действия, при которых будут отправляться сообщения электронной почты или SMS в случае выполнения условия, заданного правилом. Кроме того, их можно интегрировать с бизнес-системой с помощью [приложения логики][lnk-logic-apps].

## Сопутствующие ресурсы

При развертывании предварительно настроенного решения создается несколько ресурсов в выбранной подписке Azure. Эти ресурсы можно просмотреть на [портале Azure][lnk-portal]. Имя **группы ресурсов**, создаваемой при развертывании, зависит от имени, выбранного для предварительно настроенного решения.

![][img-portal]

Параметры каждого ресурса можно просмотреть, выбрав его в списке в группе ресурсов. На снимке экрана выше показаны параметры центра IoT, используемого в предварительно настроенном решении.

Можно также просмотреть исходный код предварительно настроенного решения. Исходный код предварительно настроенного решения для удаленного мониторинга находится в разделе [azure-iot-remote-monitoring][lnk-rmgithub]\:

- В папке **DeviceAdministration** содержится исходный код для панели мониторинга.
- В папке **Simulator** содержится исходный код для виртуального устройства.
- В папке **EventProcessor** содержится исходный код для фонового процесса, который обрабатывает входящие данные телеметрии.

По завершении работы с предварительно настроенным решением его можно удалить из подписки Azure на сайте [azureiotsuite.com][lnk-azureiotsuite]. На этом сайте можно легко удалить все ресурсы, которые были подготовлены во время создания предварительно настроенных решений.

> [AZURE.NOTE] Чтобы полностью удалить все ресурсы, связанные с предварительно настроенным решением, вместо того, чтобы просто удалить группу ресурсов на портале, удалите эти ресурсы на сайте [azureiotsuite.com][lnk-azureiotsuite].

## Дальнейшие действия

Теперь, когда вы создали рабочее предварительно настроенное решение, можете перейти к следующим пошаговым руководствам:

-   [Рекомендации по настройке предварительно настроенных решений][lnk-customize]
-   [Обзор предварительно настроенного решения прогнозного обслуживания][lnk-predictive]

[img-launch-solution]: media/iot-suite-getstarted-preconfigured-solutions/launch.png
[img-dashboard]: media/iot-suite-getstarted-preconfigured-solutions/dashboard.png
[img-devicelist]: media/iot-suite-getstarted-preconfigured-solutions/devicelist.png
[img-devicedetails]: media/iot-suite-getstarted-preconfigured-solutions/devicedetails.png
[img-devicecommands]: media/iot-suite-getstarted-preconfigured-solutions/devicecommands.png
[img-pingcommand]: media/iot-suite-getstarted-preconfigured-solutions/pingcommand.png
[img-adddevice]: media/iot-suite-getstarted-preconfigured-solutions/adddevice.png
[img-addnew]: media/iot-suite-getstarted-preconfigured-solutions/addnew.png
[img-definedevice]: media/iot-suite-getstarted-preconfigured-solutions/definedevice.png
[img-runningnew]: media/iot-suite-getstarted-preconfigured-solutions/runningnew.png
[img-runningnew-2]: media/iot-suite-getstarted-preconfigured-solutions/runningnew2.png
[img-rules]: media/iot-suite-getstarted-preconfigured-solutions/rules.png
[img-editdevice]: media/iot-suite-getstarted-preconfigured-solutions/editdevice.png
[img-editdevice2]: media/iot-suite-getstarted-preconfigured-solutions/editdevice2.png
[img-editdevice3]: media/iot-suite-getstarted-preconfigured-solutions/editdevice3.png
[img-adddevicerule]: media/iot-suite-getstarted-preconfigured-solutions/addrule.png
[img-adddevicerule2]: media/iot-suite-getstarted-preconfigured-solutions/addrule2.png
[img-adddevicerule3]: media/iot-suite-getstarted-preconfigured-solutions/addrule3.png
[img-adddevicerule4]: media/iot-suite-getstarted-preconfigured-solutions/addrule4.png
[img-actions]: media/iot-suite-getstarted-preconfigured-solutions/actions.png
[img-portal]: media/iot-suite-getstarted-preconfigured-solutions/portal.png

[lnk_free_trial]: http://azure.microsoft.com/pricing/free-trial/
[lnk-preconfigured-solutions]: iot-suite-what-are-preconfigured-solutions.md
[lnk-azureiotsuite]: https://www.azureiotsuite.com
[lnk-customize]: iot-suite-guidance-on-customizing-preconfigured-solutions.md
[lnk-predictive]: iot-suite-predictive-overview.md
[lnk-connecting-devices]: iot-suite-connecting-devices.md
[lnk-permissions]: iot-suite-permissions.md
[lnk-logic-apps]: https://azure.microsoft.com/documentation/services/app-service/logic/
[lnk-portal]: http://portal.azure.com/
[lnk-rmgithub]: https://github.com/Azure/azure-iot-remote-monitoring
[lnk-faq]: iot-suite-faq.md

<!---HONumber=AcomDC_0601_2016-->