.<properties
    pageTitle="Использование перенаправления в удаленном приложении Azure RemoteApp | Microsoft Azure"
    description="Узнайте, как настроить и использовать перенаправление в удаленном приложении RemoteApp"
    services="remoteapp"
    documentationCenter=""
    authors="lizap"
    manager="mbaldwin" />

.<tags
    ms.service="remoteapp"
    ms.workload="compute"
    ms.tgt_pltfrm="na"
    ms.devlang="na"
    ms.topic="article"
    ms.date="08/15/2016"
    ms.author="elizapo" />

# Использование перенаправления в удаленном приложении Azure RemoteApp

> [AZURE.IMPORTANT]
Мы выводим удаленное приложение Azure RemoteApp из эксплуатации. Дополнительные сведения см. в [объявлении](https://go.microsoft.com/fwlink/?linkid=821148).

Перенаправление устройств позволяет пользователям взаимодействовать с удаленными приложениями с помощью устройств, подключенных к их локальному компьютеру, телефону или планшету. Например, если вы предоставили Skype через Azure RemoteApp, пользователь должен установить камеру на своем ПК для работы в Skype. Это также касается принтеров, динамиков, мониторов и периферийных устройств, подключенных через порт USB.

Удаленное приложение RemoteApp использует для перенаправления протокол удаленного рабочего стола (RDP) и RemoteFX.

## Какое перенаправление включено по умолчанию?
Если используется удаленное приложение RemoteApp, следующие перенаправления включены по умолчанию. Информация в скобках показывает параметр протокола удаленного рабочего стола.

- Воспроизведение звуков на локальном компьютере (**Воспроизвести на этом компьютере**). (audiomode:i:0)
- Запись звука с локального компьютера и отправка записи на удаленный компьютер (**Записать с этого компьютера**). (audiocapturemode:i:1)
- Печать на локальных принтерах (redirectprinters:i:1)
- COM-порты (redirectcomports:i:1)
- Устройства чтения смарт-карт (redirectsmartcards:i:1)
- Буфер обмена (возможность копировать и вставлять) (redirectclipboard:i:1)
- Очистить сглаживания шрифтов (allow font smoothing:i:1)
- Перенаправление всех поддерживаемых самонастраивающихся устройств. (devicestoredirect:s: *)

## Какие еще перенаправления доступны?
Два параметра перенаправления по умолчанию отключены:

- Перенаправление дисков (сопоставление дисков) — диски локального компьютера становятся сопоставленными дисками в удаленном сеансе. Таким образом, вы можете сохранять или открывать файлы с локальных дисков во время работы в удаленном сеансе.
- USB-перенаправление — вы можете использовать USB-устройства, подключенные к локальному компьютеру, в удаленном сеансе.

## Изменение настроек перенаправления в удаленном приложении RemoteApp
Вы можете изменить настройки перенаправления устройств для коллекции с помощью Microsoft Azure PowerShell с пакетом SDK. После установки новой среды PowerShell с пакетом SDK настройте ее для управления подпиской, как описано в статье [Установка и настройка Azure PowerShell](../powershell-install-configure.md).

Затем используйте команду, похожую на эту, чтобы настроить свойства протокола удаленного рабочего стола:

	Set-AzureRemoteAppCollection -CollectionName <collection name>  -CustomRdpProperty "drivestoredirect:s:*`nusbdevicestoredirect:s:*"

(Обратите внимание, что *'n* используется в качестве разделителя между отдельными свойствами).

Чтобы получить список настроенных свойств протокола удаленного рабочего стола, выполните следующий командлет. Обратите внимание, что в виде выходных результатов отображаются только настраиваемые свойства, а не свойства по умолчанию.

    Get-AzureRemoteAppCollection -CollectionName <collection name>

При установке настраиваемых свойств необходимо каждый раз указывать все настраиваемые свойства каждый раз, иначе настройка будет отключена.

### Распространенные примеры
Чтобы включить перенаправление дисков, используйте следующий командлет:

	Set-AzureRemoteAppCollection -CollectionName <collection name>  -CustomRdpProperty "drivestoredirect:s:*”

Этот командлет используется для включения перенаправления USB и дисков:

	Set-AzureRemoteAppCollection -CollectionName <collection name>  -CustomRdpProperty "drivestoredirect:s:*`nusbdevicestoredirect:s:*"

Чтобы отключить совместное использование буфера обмена, используйте этот командлет:

	Set-AzureRemoteAppCollection -CollectionName <collection name>  -CustomRdpProperty "redirectclipboard:i:0”

> [AZURE.IMPORTANT] Перед проверкой изменения убедитесь, что все пользователи полностью вышли из коллекции (нельзя просто отключить их). Чтобы убедиться, что пользователи полностью вышли, на портале Azure в коллекции перейдите на вкладку **Сеансы** и выведите из системы всех пользователей, которые отключены или вошли в систему. Иногда локальные диски отображаются в обозревателе в пределах сеанса только через несколько секунд.

## Изменение настроек перенаправления USB на клиенте Windows

Если вы хотите использовать перенаправление USB на компьютере, который подключается к удаленному приложению RemoteApp, нужно выполнить два предварительных условия. 1. Администратор должен включить перенаправление USB на уровне коллекции с помощью Azure PowerShell. 2. На каждом устройстве, на котором вы хотите использовать перенаправление USB, необходимо включить групповую политику, разрешающую его. Этот шаг необходимо выполнить для каждого пользователя, который хочет использовать перенаправление USB.

> [AZURE.NOTE] Перенаправление USB с помощью удаленного приложения Azure RemoteApp поддерживается только на компьютерах под управлением Windows.

### Включение перенаправления USB для коллекции RemoteApp
Чтобы включить перенаправление USB на уровне коллекции, используйте следующий командлет:

    Set-AzureRemoteAppCollection -CollectionName <collection_name> -CustomRdpProperty "nusbdevicestoredirect:s:*"

### Включение перенаправления USB на клиентском компьютере

Изменение настроек перенаправления USB на компьютере.

1. Откройте редактор локальных групповых политик (GPEDIT. MSC). (Из командной строки запустите команду gpedit.msc.)
2. Откройте папку **Computer Configuration\\Policies\\Administrative Templates\\Windows Components\\Remote Desktop Services\\Remote Desktop Connection Client\\RemoteFX USB Device Redirection**.
3. Дважды щелкните **Разрешить перенаправление RDP других поддерживаемых устройств RemoteFX USB на этом компьютере**.
4. Выберите **Включено**, а затем выберите **Администраторы и пользователи в правах доступа перенаправления RemoteFX USB**.
5. Откройте командную строку с правами администратора и выполните следующую команду:

		gpupdate /force
6. Перезагрузите компьютер.

Вы также можете использовать средство управления групповой политикой, чтобы создать и применить политику перенаправления USB для всех компьютеров в домене.

1. Войдите в контроллер домена с правами администратора домена.
2. Откройте консоль управления групповыми политиками. (Щелкните **Пуск > Администрирование > Управление групповой политикой**).
3. Перейдите в домен или подразделение, для которого необходимо создать политику.
4. Щелкните правой кнопкой мыши **Политика домена по умолчанию**, а затем нажмите кнопку **Изменить**.
5. Откройте папку **Computer Configuration\\Policies\\Administrative Templates\\Windows Components\\Remote Desktop Services\\Remote Desktop Connection Client\\RemoteFX USB Device Redirection**.
6. Дважды щелкните **Разрешить перенаправление RDP других поддерживаемых устройств RemoteFX USB на этом компьютере**.
7. Выберите **Включено**, а затем выберите **Администраторы и пользователи в правах доступа перенаправления RemoteFX USB**.
8. Нажмите кнопку **ОК**.

<!---HONumber=AcomDC_0817_2016-->