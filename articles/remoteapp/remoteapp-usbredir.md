---
title: "Перенаправление USB-устройств в удаленном приложении Azure RemoteApp | Документация Майкрософт"
description: "Узнайте, как использовать перенаправление для USB-устройств в Azure RemoteApp."
services: remoteapp
documentationcenter: 
author: msmbaldwin
manager: mbaldwin
ms.assetid: 191d98af-2f5a-4307-9042-aae0e4049f9f
ms.service: remoteapp
ms.workload: compute
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 11/23/2016
ms.author: mbaldwin
translationtype: Human Translation
ms.sourcegitcommit: 5cce99eff6ed75636399153a846654f56fb64a68
ms.openlocfilehash: 1be1e6f63c4a4786d23af57d454e7a2e3bb17ad0
ms.lasthandoff: 03/31/2017


---
# <a name="how-do-you-redirect-usb-devices-in-azure-remoteapp"></a>Перенаправление USB-устройств в удаленном приложении Azure RemoteApp
> [!IMPORTANT]
> Мы выводим службу Azure RemoteApp из эксплуатации 31 августа 2017 года. Дополнительные сведения см. в [объявлении](https://go.microsoft.com/fwlink/?linkid=821148).
> 
> 

Перенаправление устройств позволяет пользователям использовать USB-устройства, подключенные к их компьютерам или планшетам, с приложениями в Azure RemoteApp. Например, при совместном использовании программы Skype через Azure RemoteApp пользователям необходимо использовать камеры устройств.

Прежде чем продолжить, ознакомьтесь со сведениями о перенаправлении USB-устройств в статье [Использование перенаправления в удаленном приложении Azure RemoteApp](remoteapp-redirection.md). Но рекомендуемая команда nusbdevicestoredirect:s:* не подходит для веб-камер USB, для некоторых принтеров и многофункциональных устройств с подключением через USB. Из соображений безопасности администратор Azure RemoteApp должен специально включить перенаправление по GUID класса устройства или по идентификатору экземпляра устройства, чтобы пользователи смогли использовать эти устройства.

Хотя в этой статье описывается перенаправление веб-камеры, подобный подход можно использовать для перенаправления USB-принтеров и других многофункциональных USB-устройств, которые не перенаправляются с помощью команды **nusbdevicestoredirect:s:***.

## <a name="redirection-options-for-usb-devices"></a>Параметры перенаправления для USB-устройств
Azure RemoteApp использует механизмы для перенаправления USB-устройств, очень похожие на механизмы, доступные для служб удаленного рабочего стола. Базовая технология позволяет выбрать правильный метод перенаправления для того или иного устройства, чтобы использовать все возможности высокоуровневого перенаправления и перенаправления RemoteFX USB-устройств с помощью команды **usbdevicestoredirect:s:** . В этой команде есть четыре элемента:

| Порядок обработки | Параметр | Описание |
| --- | --- | --- |
| 1 |* |Выбирает все устройства, которые не выбраны перенаправлением высокого уровня. Примечание: * намеренно не работает для веб-камер USB. |
| {Device class GUID} |Выбирает все устройства, которые соответствуют указанному классу настройки устройства. | |
| USB\InstanceID |Выбирает USB-устройство, указанное для заданного идентификатора экземпляра. | |
| 2 |-USB\Instance ID |Удаляет параметры перенаправления для заданного устройства. |

## <a name="redirecting-a-usb-device-by-using-the-device-class-guid"></a>Перенаправление USB-устройства с помощью GUID класса устройства
Существует два способа для поиска GUID класса устройства, которые можно использовать для перенаправления. 

Первый способ — использование [системных классов настройки устройств, доступных поставщикам](https://msdn.microsoft.com/library/windows/hardware/ff553426.aspx). Выберите класс, который больше всего соответствует устройству, подключенному к локальному компьютеру. Для цифровых камер это может быть класс устройств обработки изображений или класс устройств видеозахвата. Вам придется немного поэкспериментировать с классами устройств, чтобы найти правильный GUID класса, работающий с локально подключенным USB-устройством (в нашем случае с веб-камерой).

Лучший способ (или второй способ) — выполнить следующие действия, чтобы найти GUID класса определенного устройства.

1. Откройте диспетчер устройств, найдите устройство, которое будет перенаправлено, щелкните его правой кнопкой мыши и откройте свойства.
   ![Открытие диспетчера устройств](./media/remoteapp-usbredir/ra-devicemanager.png)
2. На вкладке **Сведения** выберите свойство **GUID класса**. Появившееся значение — это GUID класса для данного типа устройства.
   ![Свойства камеры](./media/remoteapp-usbredir/ra-classguid.png)
3. Используйте значение идентификатора GUID класса для перенаправления устройств, которые ему соответствуют.

Например:

        Set-AzureRemoteAppCollection -CollectionName <collection name> -CustomRdpProperty "nusbdevicestoredirect:s:<Class Guid value>"

Можно объединить несколько перенаправлений устройств в одном командлете. Например, чтобы перенаправить локальное хранилище и веб-камеру USB, командлет будет выглядеть следующим образом:

        Set-AzureRemoteAppCollection -CollectionName <collection name> -CustomRdpProperty "drivestoredirect:s:*`nusbdevicestoredirect:s:<Class Guid value>"

При настройке перенаправления устройств по GUID класса все устройства, которые соответствуют этому GUID класса в указанном наборе, будут перенаправлены. Например, при наличии в локальной сети нескольких компьютеров, имеющих одинаковые веб-камеры USB, для перенаправления всех веб-камер можно использовать один командлет.

## <a name="redirecting-a-usb-device-by-using-the-device-instance-id"></a>Перенаправление USB-устройства с помощью идентификатора экземпляра устройства
Если требуется более точное управление и управлять перенаправлением отдельных устройств, можно использовать параметр перенаправления **USB\InstanceID**.

Самым сложным аспектом этого метода является поиск идентификатора экземпляра USB-устройства. Вам потребуется доступ к компьютеру и к конкретному USB-устройству. Затем выполните следующие действия.

1. Включите перенаправление устройства в сеансе удаленного рабочего стола, как описано в статье, посвященной [использованию устройств и ресурсов в сеансе удаленного рабочего стола](http://windows.microsoft.com/en-us/windows7/How-can-I-use-my-devices-and-resources-in-a-Remote-Desktop-session).
2. Откройте подключение к удаленному рабочему столу и щелкните **Показать параметры**.
3. Выберите команду **Сохранить как** , чтобы сохранить текущие параметры подключения в RDP-файл.  
    ![Сохранение параметров в качестве RDP-файла](./media/remoteapp-usbredir/ra-saveasrdp.png)
4. Выберите имя файла и расположение, например MyConnection.rdp и This PC\Documents, и сохраните файл.
5. Откройте файл MyConnection.rdp в текстовом редакторе и найдите идентификатор экземпляра устройства, которое требуется перенаправить.

Теперь используйте идентификатор экземпляра в следующем командлете:

    Set-AzureRemoteAppCollection -CollectionName <collection name> -CustomRdpProperty "nusbdevicestoredirect:s: USB\<Device InstanceID value>"



### <a name="help-us-help-you"></a>Помогите нам помочь вам
Вы знаете, что можете не только оценивать эту статью и оставлять комментарии ниже, но и вносить в нее изменения? Чего-то не хватает? Что-то неправильно? Что-то изложено непонятно? Чтобы внести изменения, прокрутите страницу вверх и щелкните **Edit on GitHub** (Изменить на GitHub). Мы просмотрим ваши предложения, и когда мы их одобрим, вы увидите изменения и улучшения здесь.


