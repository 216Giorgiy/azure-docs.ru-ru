<properties
   pageTitle="Интеграция OneDrive для бизнеса с Azure RemoteApp | Microsoft Azure"
   description="Сведения об использовании хранилища OneDrive для бизнеса для работы с Azure RemoteApp."
   services="remoteapp"
   documentationCenter=""
   authors="pavithir"
   manager="mbaldwin"
   editor=""/>

<tags
   ms.service="remoteapp"
   ms.devlang="na"
   ms.topic="hero-article"
   ms.tgt_pltfrm="na"
   ms.workload="compute"
   ms.date="01/13/2016"
   ms.author="elizapo"/>

# Интеграция OneDrive для бизнеса с Azure RemoteApp

Вы можете использовать OneDrive для бизнеса как репозиторий файлов с помощью Azure RemoteApp. OneDrive для бизнеса — отличный способ синхронизации файлов на всех устройствах и во всех рабочих областях. [Диск профиля пользователя](remoteapp-upd.md) (UPD) — это место, в котором пользователи могут хранить свои файлы для приложений Azure RemoteApp, при этом доступ к этим файлам возможен только с использованием Azure RemoteApp. С другой стороны, с помощью OneDrive для бизнеса пользователь получает доступ к файлам везде, где пожелает, и всегда, когда пожелает, без необходимости заходить в Azure RemoteApp. В этой статье рассматриваются поддерживаемые версии OneDrive для бизнеса и различные способы настройки этого решения для Azure RemoteApp, которые могут использоваться администраторами.

## Все ли версии OneDrive поддерживаются

Есть две версии OneDrive: OneDrive и OneDrive для бизнеса. Azure RemoteApp поддерживает только OneDrive для бизнеса. Версия OneDrive для отдельных пользователей работает, но официально не поддерживается. Кроме того, только последняя версия OneDrive для бизнеса — так называемый "клиент следующего поколения синхронизации" — поддерживается в Azure RemoteApp (и на серверах Citrix/RDSH-терминалов).

>[AZURE.NOTE]OneDrive (для потребителей/выпуск Personal Edition) не поддерживается в Azure RemoteApp. Не поддерживаются также некоторые версии OneDrive для бизнеса, так как не все из них сертифицированы для работы с Windows Server. Хотя новый клиент (клиент синхронизации следующего поколения) и более старые версии Groove нормально работают в Azure RemoteApp (как описано в статье на странице [https://support.microsoft.com/ru-RU/kb/2965687](https://support.microsoft.com/kb/2965687)), старым модулям синхронизации недоступна полная функциональность на серверах Citrix/серверах терминалов (Windows Server). Используйте новый клиент синхронизации в Azure RemoteApp (и других развертываниях Windows Server).

## Какие существуют варианты настройки OneDrive для бизнеса

- **Традиционная настройка модуля синхронизации OneDrive для бизнеса:** клиент синхронизации OneDrive для бизнеса можно установить на единице хранения сервера (удаленном рабочем столе, а также в сеансе RemoteApp или сеансе сервера терминалов) и в папках, выбранных для синхронизации в сеансе RemoteApp (так же, как на единице хранения клиента Windows). По умолчанию хранилище OneDrive для бизнеса синхронизирует файлы там же, где находится диск профиля пользователя, используемый для хранения данных и параметров пользователя в Azure RemoteApp (C:\\пользователи< имя\_пользователя >). Этот диск доступен для пользователя на любой виртуальной машине, а вместе с ним доступны и ODB-файлы. Чтобы модуль синхронизации находился в активированном состоянии, необходимо, чтобы приложение OneDrive для бизнеса было опубликовано администратором для всех пользователей, а пользователи запускали его в каждом новом сеансе (или чтобы запуск был автоматизирован при помощи сценария входа в систему). OneDrive для бизнеса скачивает файл целиком на виртуальной машине, на которой запущен сеанс. Полная синхронизация пользовательского содержимого  (ЦП/передаваемые данные/сохраняемые данные) — это тяжелая рабочая нагрузка, не оптимизированная для компьютеров терминалов, на которых работает большое количество пользователей, которые ненадолго заходят на каждый компьютер. Хотя выборочная синхронизация помогает уменьшить рабочую нагрузку, проблема все-таки остается.
- **"Виртуализация" хранилища OneDrive для бизнеса или его перенаправление из локального "толстого" клиента в сеанс:** если идет синхронизация OneDrive в папку на клиентском устройстве (которая находится на диске), вы можете [перенаправить](remoteapp-redirection.md) этот диск в Azure RemoteApp. Этот диск должен быть одинаковым на всех клиентах пользователей, и у них хранилище OneDrive должно быть синхронизировано с папкой этого диска. Если они запускают RemoteApp с любого другого клиента, эти файлы потенциально могут быть недоступными (обходной путь — доступ к файлам всегда можно получить с помощью интернет-версии OneDrive). 
- **Представление хранилища OneDrive для бизнеса как диска в среде Azure RemoteApp без кэширования и синхронизации файлов:** (сопоставление URL-адреса HTTP хранилища OneDrive для бизнеса с диском виртуальной машины) поддерживается сопоставление хранилища OneDrive для бизнеса с сетевым диском в среде RDSH. Это может использоваться в следующих сценариях: 
	- Тонкие клиенты (без локального хранилища) используются для доступа к Azure RemoteApp, а приложение требует файлы, которые хранятся в хранилище OneDrive для бизнеса, и они должны "выглядеть" как локальные. При этом администратор не хочет синхронизировать файлы с виртуальной машиной.
	- В хранилище OneDrive для бизнеса есть много больших файлов, которые выбраны для синхронизации. Учитывая большую рабочую нагрузку синхронизации, все файлы могут не синхронизироваться, когда пользователь хочет использовать их. Кроме того, если совокупный размер файлов превышает 50 ГБ, их нельзя хранить на диске UPD.

В приведенных выше сценариях администраторы могут выбрать вариант, предусматривающий сопоставление диска на виртуальной машине с URL-адресом HTTP пользовательского хранилища OneDrive для бизнеса. Это можно сделать несколькими способами:

- хранить в образе двоичные файлы Office и не активировать модуль синхронизации OneDrive для бизнеса;
- НЕ хранить в образе двоичные файлы Office (в этом случае обязательным компонентом является пакет возможностей рабочего стола). В частности, служба WebClient (известная как WebDAV) должна быть установлена как часть пакета возможностей рабочего стола. 

### Установка пакета возможностей рабочего стола в Windows Server 2012 R2
Для установки пакета возможностей рабочего стола выполните такие действия:

1. В диспетчере серверов выберите **Управление > Добавить роли и компоненты**.
2. Щелкните **Функции**, а затем последовательно выберите **Пользовательские интерфейсы и инфраструктура -> Возможности рабочего стола**.

### Подключение диска к URL-адресу OneDrive для бизнеса

Следуйте указаниям в справочной статье ([https://support.microsoft.com/kb/2616712](https://support.microsoft.com/kb/2616712)).
 
В процессе настройки важно убедиться, что выбран параметр **Оставаться в системе**.

Общие инструкции таковы:

1.	Найдите URL-адрес для диска. URL-адрес, используемый для сопоставления диска, вы получаете, когда, работая в Интернете в хранилище OneDrive для бизнеса, вы переходите к домашнему каталогу. Например:
 
	https://microsoft-my.sharepoint.com/personal/alias_microsoft_com/_layouts/15/onedrive.aspx?AjaxDelta=1&isStartPlt1=something
2.	Откройте URL-адрес с помощью браузера в сеансе RemoteApp и выберите параметр **Оставаться в системе**, прежде чем перейти по URL-адресу для своей учетной записи.
3.	Откройте проводник и подключите диск к указанному выше URL-адресу. Если URL-адрес не разрешен, можно использовать более краткую форму:
	
	https://microsoft-my.sharepoint.com/personal/alias_microsoft_com.

	Это мгновенно создает сопоставленный диск, который выглядит следующим образом:
 
	![OneDrive для бизнеса в качестве сопоставленного сетевого диска](./media/remoteapp-onedrive/ra-mappeddrive.png)

<!---HONumber=AcomDC_0121_2016-->