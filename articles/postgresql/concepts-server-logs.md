---
title: "Журналы сервера в базе данных Azure для PostgreSQL | Документация Майкрософт"
description: "Создание журналов запросов и ошибок в базе данных Azure для PostgreSQL."
services: postgresql
author: SaloniSonpal
ms.author: salonis
manager: jhubbard
editor: jasonwhowell
ms.service: postgresql
ms.topic: article
ms.date: 09/26/2017
ms.openlocfilehash: 2f75af62df0284a609169acd9d2c5bb6eaf36fbe
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/11/2017
---
# <a name="server-logs-in-azure-database-for-postgresql"></a>Журналы сервера в базе данных Azure для PostgreSQL 
База данных Azure для PostgreSQL создает журналы запросов и ошибок. Однако доступ к журналам транзакций не поддерживается. Эти журналы можно использовать для идентификации, устранения и исправления ошибок конфигурации, а также для повышения производительности. Дополнительные сведения см. на странице [Error Reporting and Logging](https://www.postgresql.org/docs/9.6/static/runtime-config-logging.html) (Отчеты об ошибках и ведение журнала).

## <a name="access-server-logs"></a>Доступ к журналам сервера
Чтобы просмотреть и скачать журналы ошибок сервера Azure PostgreSQL, можно воспользоваться порталом Azure, [Azure CLI](howto-configure-server-logs-using-cli.md) или интерфейсами REST API Azure.

## <a name="log-retention"></a>Хранение журналов
Вы можете настроить срок хранения системных журналов, используя параметр **log\_retention\_period**, связанный с сервером. Единица измерения для этого параметра — дни. По умолчанию используется значение "3 дня". Максимальное значение — "7 дней". Ваш сервер должен иметь достаточный объем выделенной памяти для хранения файлов журналов.
Файлы журналов сменяются каждый час или по достижении размера в 100 МБ (в зависимости от того, какое событие произойдет первым).

## <a name="configure-logging-for-azure-postgresql-server"></a>Настройка ведения журнала для сервера Azure PostgreSQL
Вы можете включить для своего сервера ведение журнала запросов и журнала ошибок. Журналы ошибок могут содержать сведения об автоматической очистке, подключениях и контрольных точках.

Чтобы включить ведение журнала запросов для экземпляра базы данных PostgreSQL, необходимо настроить два параметра сервера: log\_statement и log\_min\_duration\_statement.

Параметр **log\_statement** определяет, какие инструкции SQL регистрируются. Рекомендуется задать этому параметру значение ***all*** (Все), чтобы регистрировались все инструкции. По умолчанию задано значение "none" (Нет).

Параметр **log\_min\_duration\_statement** задает для регистрируемой инструкции минимальную длительность (в миллисекундах). Все инструкции SQL, которые выполняются дольше заданного значения, записываются в журнал. По умолчанию этот параметр отключен и задано значение "минус один" (–1). Включение этого параметра может быть полезным, когда требуется отследить в приложениях неоптимизированные запросы.

Параметр **log\_min\_messages** позволяет определить, сообщения какого уровня должны записываться в журнал сервера. Значение по умолчанию — WARNING (Предупреждение) 

Дополнительные сведения об этих настройках см. в документации на странице [Error Reporting and Logging](https://www.postgresql.org/docs/9.6/static/runtime-config-logging.html) (Отчеты об ошибках и ведение журнала). Чтобы настроить конкретно параметры сервера базы данных Azure для PostgreSQL, см. статью [Журналы сервера в базе данных Azure для PostgreSQL](concepts-server-logs.md).

## <a name="next-steps"></a>Дальнейшие действия
- Сведения о доступе к журналам с помощью Azure CLI приведены в статье [Настройка и использование журналов сервера для PostgreSQL с помощью Azure CLI](howto-configure-server-logs-using-cli.md).
- Дополнительные сведения о параметрах сервера см. в статье [Настройка параметров службы в базе данных Azure для PostgreSQL](howto-configure-server-parameters-using-cli.md).
