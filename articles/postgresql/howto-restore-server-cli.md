---
title: "Как восстановить сервер в базе данных Azure для PostgreSQL | Документация Майкрософт"
description: "В этой статье описывается, как выполнить резервное копирование и восстановление сервера в базе данных Azure для PostgreSQL с помощью командной строки Azure CLI."
services: postgresql
author: jasonwhowell
ms.author: jasonh
manager: jhubbard
editor: jasonwhowell
ms.service: postgresql-database
ms.devlang: azure-cli
ms.topic: article
ms.date: 06/13/2017
ms.translationtype: Human Translation
ms.sourcegitcommit: 4f68f90c3aea337d7b61b43e637bcfda3c98f3ea
ms.openlocfilehash: fa63ccedb455e4972bfdd0e15069ad5e932b0fa3
ms.contentlocale: ru-ru
ms.lasthandoff: 06/20/2017

---

# <a name="how-to-back-up-and-restore-a-server-in-azure-database-for-postgresql-using-the-azure-cli"></a>Как выполнить резервное копирование и восстановление сервера в базе данных Azure для PostgreSQL с помощью Azure CLI

## <a name="prerequisites"></a>Предварительные требования
Прежде чем приступить к выполнению этого руководства, необходимы следующие компоненты:
- [сервер и база данных Azure для PostgreSQL](quickstart-create-server-database-azure-cli.md);

[!INCLUDE [cloud-shell-try-it.md](../../includes/cloud-shell-try-it.md)]

Если вы решили установить и использовать интерфейс командной строки локально, для работы с этим руководством вам понадобится Azure CLI 2.0 или более поздней версии. Чтобы узнать версию, выполните команду `az --version`. Если вам необходимо выполнить установку или обновление, см. статью [Установка Azure CLI 2.0]( /cli/azure/install-azure-cli). 

## <a name="backup-happens-automatically"></a>Резервное копирование выполняется автоматически
При использовании базы данных Azure для PostgreSQL служба базы данных автоматически создает резервную копию службы каждые 5 минут. 

Для уровня "Базовый" доступны резервные копии за 7 дней, а для уровня "Стандартный" — за 35 дней. Дополнительные сведения см. в статье [Параметры и производительность базы данных Azure для PostgreSQL: возможности разных уровней служб](concepts-service-tiers.md).

С помощью этой функции автоматической архивации можно восстановить сервер и все его базы данных до более ранней точки во времени на новом сервере.

## <a name="restore-a-database-to-a-previous-point-in-time-using-the-azure-cli"></a>Восстановление базы данных до предшествующей точки во времени с помощью Azure CLI
База данных Azure для PostgreSQL позволяет восстановить сервер до предшествующей точки во времени. Восстановленные данные копируются на новый сервер, а имеющийся сервер остается неизменным. Например, если таблица была случайно удалена в полдень, ее можно восстановить до момента сразу перед полуднем. А затем извлечь отсутствующие таблицы и данные из восстановленной копии сервера. 

Чтобы выполнить восстановление, используйте команду Azure CLI [az postgres server restore](/cli/azure/postgres/server#restore).

### <a name="run-the-restore-command"></a>Выполнение команды restore
```azurecli-interactive
az postgres server restore --resource-group myResourceGroup --name mypgserver-restored --restore-point-in-time 2017-04-13T13:59:00Z --source-server mypgserver-20170401
```

Для команды `az postgres server restore` обязательны указанные ниже параметры.
| Настройка | Рекомендуемое значение | Описание  |
| --- | --- | --- |
| resource-group |  myResourceGroup |  Группа ресурсов, в которой находится исходный сервер.  |
| name | mypgserver-restored | Имя нового сервера, созданного командой restore. |
| restore-point-in-time | 2017-04-13T13:59:00Z | Выберите точку во времени, до которой необходимо выполнить восстановление. Значения даты и времени должны находиться в пределах срока хранения резервной копии исходного сервера. Используйте формат даты и времени ISO8601. Например, вы можете использовать свой местный часовой пояс, например `2017-04-13T05:59:00-08:00`, или использовать формат UTC Zulu `2017-04-13T13:59:00Z`. |
| source-server | mypgserver-20170401 | Имя или идентификатор исходного сервера, с которого необходимо выполнить восстановление. |

При восстановлении сервера до определенной точки во времени создается сервер путем копирования исходного сервера на заданный момент времени. Значения расположения и ценовой категории для восстановленного сервера совпадают со значениями исходного сервера. Команда выполняется в синхронном режиме и вернет результат после восстановления сервера. 

После завершения восстановления найдите созданный сервер. Убедитесь, что данные восстановлены надлежащим образом.

## <a name="next-steps"></a>Дальнейшие действия
[Библиотеки подключений для базы данных Azure для PostgreSQL](concepts-connection-libraries.md)

