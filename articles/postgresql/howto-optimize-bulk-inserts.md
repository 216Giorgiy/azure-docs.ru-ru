---
title: Оптимизация операций массовой вставки на сервере службы "База данных Azure для PostgreSQL"
description: В этой статье описывается оптимизация операций массовой вставки на сервере службы "База данных Azure для PostgreSQL".
author: dianaputnam
ms.author: dianas
ms.service: postgresql
ms.topic: conceptual
ms.date: 10/22/2018
ms.openlocfilehash: 9d2bfcddc649e4fff68bdba49df0945e88067036
ms.sourcegitcommit: 71ee622bdba6e24db4d7ce92107b1ef1a4fa2600
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/17/2018
ms.locfileid: "53545242"
---
# <a name="optimizing-bulk-inserts-and-use-of-transient-data-on-azure-database-for-postgresql-server"></a>Оптимизация операций массовой вставки и использование временных данных на сервере службы "База данных Azure для PostgreSQL" 
В этой статье описывается оптимизация операций массовой вставки и использование временных данных на сервере службы "База данных Azure для PostgreSQL".

## <a name="using-unlogged-tables"></a>Использование нерегистрируемых таблиц
Для клиентов, операции рабочей нагрузки которых включают временные данные или вставляют большие наборы данных в пакетном режиме, рассмотрите возможность использования нерегистрируемых таблиц.

Нерегистрируемые таблицы — это функция PostgreSQL, которая может эффективно оптимизировать операции массовой вставки. PostgreSQL использует упреждающее протоколирование, которое по умолчанию предоставляет атомарность и устойчивость двух свойств ACID. Вставка в нерегистрируемую таблицу означает, что PostgreSQL выполняет вставки без записи в журнал транзакций, что является операцией ввода-вывода. Таким образом, эти таблицы значительно быстрее, чем обычные.

Ниже приведены варианты создания нерегистрируемой таблицы:
- Создайте нерегистрируемую таблицу с помощью синтаксиса: `CREATE UNLOGGED TABLE <tableName>`.
- Преобразуйте существующую регистрируемую таблицу в нерегистрируемую с помощью синтаксиса: `ALTER <tableName> SET UNLOGGED`.  Это можно отменить с помощью синтаксиса: `ALTER <tableName> SET LOGGED`.

## <a name="unlogged-table-tradeoff"></a>Недостатки нерегистрируемой таблицы
Нерегистрируемые таблицы не устойчивы к сбоям. Нерегистрируемая таблица автоматически усекается после сбоя, и ее данные могут быть потеряны в случае некорректного завершения работы. Содержимое нерегистрируемой таблицы не реплицируется на резервные серверы. Любые индексы в нерегистрируемой таблице также не регистрируются автоматически.  После завершения операции вставки можно преобразовать таблицу в регистрируемую, чтобы вставка была долговечной.

Тем не менее при некоторых клиентских рабочих нагрузках мы наблюдаем повышение производительности примерно на 15–20 % в случае использования нерегистрируемых таблиц.

## <a name="next-steps"></a>Дополнительная информация
Проверьте свою рабочую нагрузку на использование временных данных и массовой вставки.  

Ознакомьтесь с разделом о [командах SQL для создания таблиц](https://www.postgresql.org/docs/current/static/sql-createtable.html) в документации PostgreSQL.