---
title: "Портал Azure. Создание базы данных Azure для PostgreSQL | Документация Майкрософт"
description: "Краткое руководство по созданию базы данных Azure и управлению ею для сервера PostgreSQL с помощью пользовательского интерфейса портала Azure."
services: postgresql
author: SaloniSonpal
ms.author: salonis
manager: jhubbard
editor: jasonwhowell
ms.service: postgresql-database
ms.custom: mvc
ms.topic: hero-article
ms.date: 06/19/2017
ms.translationtype: Human Translation
ms.sourcegitcommit: 7948c99b7b60d77a927743c7869d74147634ddbf
ms.openlocfilehash: 7bbf70786bff83ad3cfae9cb9b893f41736874b5
ms.contentlocale: ru-ru
ms.lasthandoff: 06/20/2017

---

# <a name="create-an-azure-database-for-postgresql-in-the-azure-portal"></a>Создание базы данных Azure для PostgreSQL на портале Azure

База данных Azure для PostgreSQL является управляемой службой, которая позволяет запускать и масштабировать высокодоступные базы данных PostgreSQL, а также управлять ими в облаке. В этом кратком руководстве описывается создание базы данных Azure для сервера PostgreSQL с помощью портала Azure.

Если у вас еще нет подписки Azure, создайте [бесплатную](https://azure.microsoft.com/free/) учетную запись Azure, прежде чем начинать работу.

## <a name="log-in-to-the-azure-portal"></a>Войдите на портал Azure.

Войдите на [портал Azure](https://portal.azure.com).

## <a name="create-an-azure-database-for-postgresql"></a>Создание базы данных Azure для PostgreSQL

Сервер базы данных Azure для PostgreSQL создается с определенным набором [вычислительных ресурсов и ресурсов хранения](./concepts-compute-unit-and-storage.md). Он создается в [группе ресурсов Azure](../azure-resource-manager/resource-group-overview.md).

Чтобы создать базу данных Azure для сервера PostgreSQL, сделайте следующее:
1.  Щелкните **Создать** в верхнем левом углу портала Azure.
2.  На странице **создания** выберите **Базы данных**, а на странице **Базы данных** щелкните **Azure Database for PostgreSQL** (База данных Azure для PostgreSQL).
 ![База данных Azure для PostgreSQL. Создание базы данных](./media/quickstart-create-database-portal/1-create-database.png)

3.  Заполните форму сведений о новом сервере, указав следующую информацию, как показано на предыдущем рисунке.
    - Имя сервера — **mypgserver-20170401** (имя сервера сопоставляется с DNS-именем, и поэтому оно должно быть глобально уникальным). 
    - Подписка. Если вы используете несколько подписок, выберите соответствующую подписку, в которой находится ресурс либо в которой за него взимается плата.
    - Группа ресурсов — **myresourcegroup**.
    - Имя для входа администратора сервера и пароль.
    - Расположение
    - Версия PostgreSQL.

  > [!IMPORTANT]
  > Указанные здесь учетные данные и пароль администратора сервера понадобятся позже в этом руководстве, чтобы войти на сервер и в его базу данных. Запомните или запишите эту информацию для последующего использования.

4.  Щелкните **Ценовая категория**, чтобы указать уровень производительности и уровень служб для новой базы данных. Для этого руководства выберите уровень **Базовый**, **50 единиц вычислений** и хранилище объемом **50 ГБ**.
 ![База данных Azure для PostgreSQL. Выбор уровня служб](./media/quickstart-create-database-portal/2-service-tier.png)
5.  Нажмите кнопку **ОК**.
6.  Нажмите кнопку **Создать**, чтобы подготовить сервер. Подготовка занимает несколько минут.

  > [!TIP]
  > Установите флажок **Закрепить на панели мониторинга**, чтобы с легкостью отслеживать процесс развертывания.

7.  На панели инструментов щелкните **Уведомления**, чтобы отслеживать процесс развертывания.
 ![База данных Azure для PostgreSQL. Просмотр уведомлений](./media/quickstart-create-database-portal/3-notifications.png)
   
  По умолчанию на сервере создается база данных **postgres**. База данных [postgres](https://www.postgresql.org/docs/9.6/static/app-initdb.html) — это база данных по умолчанию, предназначенная для использования пользователями, служебными программами и сторонними приложениями. 

## <a name="configure-a-server-level-firewall-rule"></a>Настройка правила брандмауэра на уровне сервера

База данных Azure для службы PostgreSQL создает брандмауэр на уровне сервера. Он не позволяет внешним приложениям и средствам подключаться к серверу и к любой базе данных на сервере, если не создано правило брандмауэра, открывающее брандмауэр для определенных IP-адресов. 

1.  По завершении развертывания щелкните **Все ресурсы** в меню слева и введите имя **mypgserver-20170401**, чтобы найти созданный сервер. Щелкните имя сервера в результатах поиска. После этого откроется страница **обзора** сервера с параметрами для дальнейшей конфигурации.
 
 ![База данных Azure для PostgreSQL. Поиск сервера ](./media/quickstart-create-database-portal/4-locate.png)

2.  В колонке сервера выберите **Безопасность подключения**. 
3.  Щелкните текстовое поле раздела **Имя правила** и добавьте новое правило брандмауэра, чтобы добавить диапазон IP-адресов для подключения в список разрешений. В задачах этого руководства разрешите подключение для всех IP-адресов, указав для параметра **Имя правила** значение AllowAllIps, для параметра **Начальный IP-адрес** значение 0.0.0.0, а для параметра **Конечный IP-адрес** значение 255.255.255.255, после чего щелкните **Сохранить**. Вы можете задать правило брандмауэра, охватывающее диапазон IP-адресов, чтобы иметь возможность подключаться из сети.

 ![База данных Azure для PostgreSQL. Создание правила брандмауэра](./media/quickstart-create-database-portal/5-firewall-2.png)

4.  Щелкните **Сохранить**, а затем **X**, чтобы закрыть страницу **безопасности подключения**.

  > [!NOTE]
  > Сервер PostgreSQL Azure обменивается данными через порт 5432. Если вы пытаетесь подключиться из корпоративной сети, исходящий трафик через порт 5432 может быть запрещен сетевым брандмауэром. В таком случае вы не сможете подключиться к серверу базы данных SQL Azure. Для этого ваш ИТ-отдел должен открыть порт 5432.
  >

## <a name="get-the-connection-information"></a>Получение сведений о подключении

При создании базы данных Azure для сервера PostgreSQL создается база данных по умолчанию **postgres**. Чтобы подключиться к серверу базы данных, необходимо указать сведения об узле и учетные данные для доступа.

1. В меню слева на портале Azure щелкните **Все ресурсы** и выполните поиск созданного сервера **mypgserver-20170401**.

  ![База данных Azure для PostgreSQL. Поиск сервера ](./media/quickstart-create-database-portal/4-locate.png)

2. Щелкните имя сервера **mypgserver-20170401**.
3. Выберите страницу **обзора** сервера. Запишите значения **имени сервера** и **имени для входа администратора сервера**.

 ![База данных Azure для PostgreSQL. Имя для входа администратора сервера](./media/quickstart-create-database-portal/6-server-name.png)

## <a name="connect-to-postgresql-database-using-psql-in-cloud-shell"></a>Подключение к базе данных PostgreSQL с помощью psql в Cloud Shell

Теперь подключимся к серверу базы данных Azure для PostgreSQL с помощью служебной программы командной строки psql. 
1. Запустите Azure Cloud Shell с помощью значка терминала в верхней области навигации.

   ![База данных Azure для PostgreSQL. Значок терминала Azure Cloud Shell](./media/quickstart-create-database-portal/7-cloud-console.png)

2. В браузере откроется служба Azure Cloud Shell, которая позволяет выполнять команды Bash.

   ![База данных Azure для PostgreSQL. Строка Bash в Azure Cloud Shell](./media/quickstart-create-database-portal/8-bash.png)

3. Подключитесь к базе данных Azure для сервера PostgreSQL, выполнив команду psql в командной строке Cloud Shell. Используйте следующий формат, чтобы подключиться к серверу базы данных Azure для PostgreSQL с помощью служебной программы [psql](https://www.postgresql.org/docs/9.6/static/app-psql.html):
   ```bash
   psql --host=<myserver> --port=<port> --username=<server admin login> --dbname=<database name>
   ```

   Например, следующая команда устанавливает подключение к базе данных по умолчанию **postgres** на сервере PostgreSQL **mypgserver-20170401.postgres.database.azure.com**, используя учетные данные для доступа. В ответ на запрос введите пароль администратора сервера.

   ```bash
   psql --host=mypgserver-20170401.postgres.database.azure.com --port=5432 --username=mylogin@mypgserver-20170401 --dbname=postgres
   ```
4.  Подключившись к серверу, создайте пустую базу данных с помощью командной строки.
```bash
CREATE DATABASE mypgsqldb;
```

5.  Чтобы подключиться к созданной базе данных **mypgsqldb**, выполните в командной строке следующую команду.
```bash
\c mypgsqldb
```

## <a name="connect-to-postgresql-database-using-pgadmin"></a>Подключение к базе данных PostgreSQL с помощью pgAdmin

Чтобы подключиться к серверу PostgreSQL Azure с помощью инструмента графического интерфейса пользователя _pgAdmin_, сделайте следующее:
1.  Запустите приложение _pgAdmin_ на клиентском компьютере. Вы можете установить _pgAdmin_ с помощью http://www.pgadmin.org/.
2.  В меню **Быстрые ссылки** выберите **Добавление сервера**.
3.  На вкладке **Общее** в диалоговом окне **Создать сервер** введите уникальное понятное имя для сервера, например **Azure PostgreSQL Server**.
![Средство pgAdmin. Создание сервера](./media/quickstart-create-database-portal/9-pgadmin-create-server.png)
4.  На вкладке **Подключение** в диалоговом окне **Создать сервер** используйте настройки, как указано, а затем нажмите кнопку **Сохранить**.
   ![pgAdmin. Создание сервера](./media/quickstart-create-database-portal/10-pgadmin-create-server.png)
    - **Host Name/Address** (Имя или адрес узла) — mypgserver-20170401.postgres.database.azure.com. 
        - Полное имя сервера.
    - **Порт** — 5432.
        - Номер порта, используемый этим сервером базы данных — 5432.
    - **Maintenance Database** (База данных обслуживания) — postgres. 
        - Имя базы данных по умолчанию, созданное системой.
    - **Имя пользователя** — mylogin@mypgserver-20170401. 
        - Учетные данные администратора сервера для входа (user@mypgserver), полученные ранее при работе с этим руководством.
    - **Пароль** — пароль, выбранный при создании сервера во время работы с этим руководством.
    - **Режим SSL** — обязателен.
        - По умолчанию все серверы PostgreSQL Azure создаются с включенным применением SSL. Чтобы выключить применение SSL, ознакомьтесь со статьей [о настройке подключения SSL в базе данных Azure для PostgreSQL](./concepts-ssl-connection-security.md).
5.  Щелкните **Сохранить**.
6.  В левой области браузера разверните **Группы серверов**. Выберите свой сервер **Azure PostgreSQL Server**.
7.  Выберите раздел **Сервер** для подключения, а затем выберите в нем **Базы данных**. 
8.  Щелкните правой кнопкой мыши **Базы данных**, чтобы создать базу данных.
9.  Выберите имя базы данных **mypgsqldb** и ее владельца, используя учетные данные администратора сервера для входа **mylogin**.
10. Нажмите кнопку **Сохранить**, чтобы создать пустую базу данных.
11. В разделе **Браузер** разверните узел **Сервер**. Разверните созданный сервер, чтобы увидеть базу данных **mypgsqldb**.
 ![pgAdmin. Создание базы данных](./media/quickstart-create-database-portal/11-pgadmin-database.png)


## <a name="clean-up-resources"></a>Очистка ресурсов
Очистите все ресурсы, созданные при работе с кратким руководством, удалив [группу ресурсов Azure](../azure-resource-manager/resource-group-overview.md).

> [!TIP]
> Другие краткие руководства в этой коллекции созданы на основе этого документа. Если вы планируете продолжать работу с этими краткими руководствами, не удаляйте созданные ресурсы. Если вы не планируете продолжать работу, удалите все созданные ресурсы, выполнив на портале Azure следующие действия.

1.  В меню слева на портале Azure щелкните **Группы ресурсов**, а затем выберите **myresourcegroup**.
2.  На странице группы ресурсов щелкните **Удалить**, в текстовом поле введите **myresourcegroup** и щелкните "Удалить".

Если вы хотите удалить созданный сервер, сделайте следующее:
1.  В меню слева на портале Azure щелкните серверы PostgreSQL и выполните поиск созданного сервера.
2.  На странице обзора нажмите кнопку удаления в верхней области. ![База данных Azure для PostgreSQL. Удаление сервера](./media/quickstart-create-database-portal/12-delete.png)
3.  Подтвердите имя сервера, которое вы хотите удалить, чтобы появилась нужная база данных. В текстовом поле введите **mypgserver-20170401** и щелкните "Удалить".

## <a name="next-steps"></a>Дальнейшие действия
> [!div class="nextstepaction"]
> [Перенос базы данных с помощью экспорта и импорта](./howto-migrate-using-export-and-import.md)

