---
title: Краткое руководство. Создание Базы данных Azure для PostgreSQL с помощью простой команды Azure CLI — az postgres up (предварительная версия)
description: Краткое руководство по созданию сервера Базы данных Azure для PostgreSQL с помощью команды Azure CLI (интерфейса командной строки) up.
author: rachel-msft
ms.author: raagyema
ms.service: postgresql
ms.devlang: azurecli
ms.topic: quickstart
ms.date: 3/18/2019
ms.openlocfilehash: 0db49e2c370aee37cca4181cecbe4cf0b5585c51
ms.sourcegitcommit: f68b0e128f0478444740172f54e92b453df696be
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/18/2019
ms.locfileid: "58136450"
---
# <a name="quickstart-create-an-azure-database-for-postgresql-using-a-simple-azure-cli-command---az-postgres-up-preview"></a>Краткое руководство. Создание Базы данных Azure для PostgreSQL с помощью простой команды Azure CLI — az postgres up (предварительная версия)

> [!IMPORTANT]
> Команда [az postgres up](/cli/azure/ext/db-up/postgres#ext-db-up-az-postgres-up) Azure CLI находится в предварительной версии.

База данных Azure для PostgreSQL является управляемой службой, которая позволяет запускать и масштабировать высокодоступные базы данных PostgreSQL, а также управлять ими в облаке. Azure CLI используется для создания ресурсов Azure и управления ими из командной строки или с помощью скриптов. В этом кратком руководстве описывается, как с помощью команды [az postgres up](/cli/azure/ext/db-up/postgres#ext-db-up-az-postgres-up) создать сервер Базы данных Azure для PostgreSQL, используя Azure CLI. Кроме сервера команда `az postgres up` создает пример базы данных, привилегированного пользователя в базе данных, открывает брандмауэр для служб Azure и создает правила брандмауэра по умолчанию для клиентского компьютера. Это позволяет ускорить процесс разработки.

## <a name="prerequisites"></a>Предварительные требования

Если у вас еще нет подписки Azure, создайте [бесплатную](https://azure.microsoft.com/free/) учетную запись Azure, прежде чем начинать работу.

Для этой статьи требуется запустить Azure CLI версии 2.0 или более поздней локально. Чтобы узнать, какая установлена версия, выполните команду `az --version`. Если вам необходимо выполнить установку или обновление, см. статью [Установка Azure CLI 2.0](/cli/azure/install-azure-cli).

Вам потребуется выполнить вход в учетную запись с помощью команды [az login](/cli/azure/authenticate-azure-cli?view=interactive-log-in). Запишите свойство **id** из выходных данных команды для соответствующего имени подписки.

```azurecli
az login
```

Если вы используете несколько подписок, выберите соответствующую, в которой за ресурс будет взиматься плата. Выберите конкретный идентификатор подписки вашей учетной записи, выполнив команду [az account set](/cli/azure/account). Подставьте свойство **subscription id** из выходных данных **az login** для вашей подписки в заполнитель для идентификатора подписки.

```azurecli
az account set --subscription <subscription id>
```

## <a name="create-an-azure-database-for-postgresql-server"></a>Создание сервера базы данных Azure для PostgreSQL

Чтобы использовать команды, установите расширение [db-up](/cli/azure/ext/db-up). Если ошибка возникает снова, убедитесь, что вы установили последнюю версию Azure CLI. Дополнительные сведения см. в статье [Установка Azure CLI](/cli/azure/install-azure-cli).

```azurecli
az extension add --name db-up
```

Чтобы создать сервер Базы данных Azure для PostgreSQL, выполните следующую команду:

```azurecli
az postgres up
```

Сервер создается со следующими значениями по умолчанию (если вы вручную их не переопределите):

**Параметр** | **Значение по умолчанию** | **Описание**
---|---|---
server-name | Генерируемое системой | Уникальное имя, идентифицирующее базу данных Azure для сервера PostgreSQL.
resource-group | Генерируемое системой | Новая группа ресурсов Azure.
sku-name | GP_Gen5_2 | Имя номера SKU. В сокращенной записи соответствует схеме {ценовая категория}\_{поколение вычислительных ресурсов}\_{число виртуальных ядер}. По умолчанию это сервер общего назначения 5-го поколения с 2 виртуальными ядрами. Сведения об уровнях можно узнать на [странице цен](https://azure.microsoft.com/pricing/details/postgresql/).
backup-retention | 7 | Срок хранения резервной копии. Указывается в днях.
geo-redundant-backup | Отключено | Позволяет включить или отключить создание геоизбыточных резервных копий для этого сервера.
location | westus2 | Расположение сервера в Azure.
ssl-enforcement | Отключено | Позволяет включить или отключить SSL для этого сервера.
storage-size | 5120 | Объем хранилища сервера (в мегабайтах).
версия | 10 | Основной номер версии PostgreSQL.
admin-user | Генерируемое системой | Имя для входа администратора.
admin-password | Генерируемое системой | Пароль администратора.

> [!NOTE]
> Дополнительные сведения о команде `az postgres up` и ее дополнительных параметрах см. в [документации по Azure CLI](/cli/azure/ext/db-up/postgres#ext-db-up-az-postgres-up).

После создания сервера он поставляется со следующими параметрами:

- Создается правило брандмауэра с именем devbox. Azure CLI пытается определить IP-адрес компьютера, с которого выполняется команда `az postgres up`, и помещает этот IP-адрес в список разрешений.
- Задайте параметру "Разрешение доступа к службам Azure" значение "Вкл." Этот параметр настраивает брандмауэр сервера на прием подключений от всех ресурсов Azure, включая ресурсы не в вашей подписке.
- Создана пустая база данных с именем sampledb.
- Создан пользователь root с привилегиями в sampledb.

> [!NOTE]
> Базы данных Azure для PostgreSQL обменивается данными через порт 5432. При попытках подключения из корпоративной сети может оказаться, что исходящий трафик через порт 5432 запрещен сетевым брандмауэром. Чтобы вы могли подключиться к серверу, ваш ИТ-отдел должен открыть порт 5432.

## <a name="get-the-connection-information"></a>Получение сведений о подключении

После выполнения команды `az postgres up` вам возвращается список строк подключения для распространенных языков программирования. Эти строки подключения предварительно настроены с использованием определенных атрибутов созданного сервера Базы данных Azure для PostgreSQL.

Чтобы еще раз перечислить строки подключения, вы можете использовать команду [az postgres show-connection-string](/cli/azure/ext/db-up/postgres#ext-db-up-az-postgres-show-connection-string).

## <a name="clean-up-resources"></a>Очистка ресурсов

Очистите все ресурсы, созданные при работе с кратким руководством, с помощью следующей команды. Эта команда удаляет сервер Базы данных Azure для PostgreSQL и группу ресурсов.

```azurecli
az postgres down --delete-group
```

Если вы хотите удалить созданный сервер, выполните команду [az postgres down](/cli/azure/ext/db-up/postgres#ext-db-up-az-postgres-down).

```azurecli
az postgres down
```

## <a name="next-steps"></a>Дополнительная информация

> [!div class="nextstepaction"]
> [Перенос базы данных с помощью экспорта и импорта](./howto-migrate-using-export-and-import.md)
