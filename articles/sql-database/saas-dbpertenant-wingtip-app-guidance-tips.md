---
title: "Рекомендации по использованию примера мультитенантного приложения базы данных SQL | Документация Майкрософт"
description: "В этой статье приводятся шаги и рекомендации по установке и запуску примера мультитенантного приложения, использующего базу данных SQL Azure — SaaS Wingtip."
keywords: "руководство по базе данных sql"
services: sql-database
author: MightyPen
manager: craigg
ms.service: sql-database
ms.custom: scale out apps
ms.workload: On Demand
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 11/12/2017
ms.author: genemi
ms.openlocfilehash: 4c90d70bb3b043ef81a224f0f69107eaa6eb0547
ms.sourcegitcommit: afc78e4fdef08e4ef75e3456fdfe3709d3c3680b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/16/2017
---
# <a name="guidance-and-tips-for-azure-sql-database-multi-tenant-saas-app-example"></a>Рекомендации и советы по использованию примера мультитенантного приложения SaaS для базы данных SQL Azure


## <a name="download-and-unblock-the-wingtip-tickets-saas-database-per-tenant-scripts"></a>Скачивание и разблокировка скриптов для SaaS-приложения Wingtip Tickets c однотенантной базой данных

Исполняемое содержимое (скрипты, библиотеки DLL) может быть заблокировано Windows, в то время как ZIP-файлы можно загрузить с внешнего источника, а затем извлечь их содержимое. При извлечении скриптов из ZIP-файла ***выполните указанные ниже действия, чтобы разблокировать ZIP-файл перед извлечением***. После этого скрипты можно выполнять.

1. Перейдите к [репозиторию GitHub для SaaS-приложения Wingtip Tickets c однотенантной базой данных](https://github.com/Microsoft/WingtipTicketsSaaS-DbPerTenant).
2. Выберите **Clone or download** (Клонировать или скачать).
3. Выберите **Download ZIP** (Загрузить ZIP) и сохраните файл.
4. Щелкните правой кнопкой мыши файл **WingtipTicketsSaaS-DbPerTenant-master.zip** и выберите **Свойства**.
5. На вкладке **Общие** выберите **Разблокировать**.
6. Нажмите кнопку **ОК**.
7. Извлеките файлы.

Файлы скриптов находятся в папке *..\\Learning Modules*.


## <a name="working-with-the-wingtip-tickets-saas-database-per-tenant-powershell-scripts"></a>Использование скриптов PowerShell для SaaS-приложения Wingtip Tickets c однотенантной базой данных

Чтобы использовать пример с максимальной пользой, необходимо детально изучить приведенные скрипты. Используйте точки останова и пошагово выполните скрипты, изучив особенности реализации различных шаблонов SaaS. Для легкого пошагового выполнения указанных скриптов и прохождения модулей мы рекомендуем использовать [интегрированную среду сценариев PowerShell](https://msdn.microsoft.com/powershell/scripting/core-powershell/ise/introducing-the-windows-powershell-ise).

### <a name="update-the-configuration-file-for-your-deployment"></a>Обновление файла конфигурации для развертывания

Измените файл **UserConfig.psm1**, используя имя группы ресурсов и значение пользователя, заданные во время развертывания:

1. Откройте *интегрированную среду сценариев PowerShell* и загрузите файл *Learning Modules*\\UserConfig.psm1\\. 
2. В полях *ResourceGroupName* и *Name* введите специфические для развертывания значения (только в строках 10 и 11).
3. Сохраните изменения.

Если задать эти значения, относящиеся к развертыванию, здесь, вам не понадобится обновлять их в каждом скрипте.

### <a name="execute-scripts-by-pressing-f5"></a>Выполнение скрипта нажатием клавиши F5

Некоторые скрипты используют *$PSScriptRoot*, чтобы разрешить перемещение по папкам. Переменная *$PSScriptRoot* обрабатывается только при выполнении скрипта по нажатию клавиши **F5**.  Если выделить несколько скриптов и запустить их (**F8**), может произойти ошибка, поэтому нажмите клавишу **F5** при выполнении скриптов.

### <a name="step-through-the-scripts-to-examine-the-implementation"></a>Пошаговое выполнение скриптов и изучение их реализации

Лучший способ разобраться в скриптах — поэтапно выполнить их, чтобы узнать, что они делают. Просмотрите включенные скрипты **Demo-** с легким детализированным рабочим процессом. В скриптах **Demo-** показаны шаги, необходимые для выполнения каждой задачи, поэтому установите точки останова и подробно изучите отдельные вызовы, чтобы просмотреть сведения о реализации для различных шаблонов SaaS.

Советы для просмотра и пошагового выполнения скриптов PowerShell:

- Откройте скрипты **Demo-** в интегрированной среде сценариев PowerShell.
- Выполните скрипт или продолжайте работу, нажав клавишу **F5** (использование клавиши **F8** не рекомендуется, так как при этом переменная *$PSScriptRoot* не обрабатывается во время выполнения нескольких скриптов).
- Поместите точки останова, щелкнув или выбрав линию и нажав клавишу **F9**.
- Чтобы обойти функцию или вызов скрипта, нажмите клавишу **F10**.
- Чтобы перейти к функции или вызову скрипта, нажмите клавишу **F11**.
- Чтобы выйти из текущей функции или скрипта, нажмите клавиши **SHIFT+F11**.


## <a name="explore-database-schema-and-execute-sql-queries-using-ssms"></a>Просмотр схемы базы данных и выполнение SQL-запросов с помощью SSMS

Используйте [SQL Server Management Studio (SSMS)](https://docs.microsoft.com/sql/ssms/download-sql-server-management-studio-ssms) для подключения и просмотра серверов и баз данных приложения.

Для развертывания изначально доступно два сервера баз данных SQL, к которым оно может подключиться: *tenants1-dpt-&lt;пользователь&gt;* и *catalog-dpt-&lt;пользователь&gt;*. Для успешного выполнения демонстрационного подключения на обоих серверах есть [правило брандмауэра](sql-database-firewall-configure.md), которое разрешает вход через все IP-адреса.


1. Откройте среду *SSMS* и подключитесь к серверу *tenants1-dpt-&lt;пользователь&gt;.database.windows.net*.
2. Щелкните **Подключить** > **Компонент ядра СУБД…**:

   ![сервер каталога](media/saas-dbpertenant-wingtip-app-guidance-tips/connect.png)

3. Используйте такие демонстрационные учетные данные: имя пользователя — *developer*, пароль — *P@ssword1*.

   ![connection;](media/saas-dbpertenant-wingtip-app-guidance-tips/tenants1-connect.png)

4. Повторите шаги 2–3 и подключитесь к серверу *catalog-dpt-&lt;пользователь&gt;.database.windows.net*.


После успешного подключения вы увидите оба сервера. Список баз данных может отличаться в зависимости от подготовленных клиентов.

![обозреватель объектов](media/saas-dbpertenant-wingtip-app-guidance-tips/object-explorer.png)



## <a name="next-steps"></a>Дальнейшие действия

[Развертывание SaaS-приложения Wingtip Tickets c однотенантной базой данных](saas-dbpertenant-get-started-deploy.md)

