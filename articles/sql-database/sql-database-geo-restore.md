<properties
   pageTitle="Непрерывность облачных бизнес-процессов — геовосстановление | Microsoft Azure"
   description="Узнайте, как базы данных SQL Azure поддерживают непрерывное выполнение облачных бизнес-процессов и восстановление баз данных, а также помогают обеспечить выполнение важных облачных приложений."
   services="sql-database"
   documentationCenter=""
   authors="stevestein"
   manager="jhubbard"
   editor="monicar"/>

<tags
   ms.service="sql-database"
   ms.devlang="NA"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="sqldb-bcdr"
   ms.date="06/17/2016"
   ms.author="sstein"/>

# Обзор: восстановление базы данных SQL Azure из геоизбыточной резервной копии

> [AZURE.SELECTOR]
- [Общие сведения о непрерывности бизнес-процессов](sql-database-business-continuity.md)
- [Восстановление состояния системы в определенной временной точке](sql-database-point-in-time-restore.md)
- [Восстановление удаленной базы данных](sql-database-restore-deleted-database.md)
- [Геовосстановление](sql-database-geo-restore.md)
- [Активная георепликация](sql-database-geo-replication-overview.md)
- [Сценарии обеспечения непрерывности бизнес-процессов](sql-database-business-continuity-scenarios.md)


Геовосстановление позволяет восстановить базу данных SQL на любой сервер в любом регионе Azure из самой последней [ежедневной автоматически создаваемой резервной копии](sql-database-automated-backups.md). В качестве источника геовосстановление использует геоизбыточную резервную копию для восстановления базы данных, даже если она или центр обработки данных недоступны из-за сбоя. Это можно сделать с помощью [портала Azure](sql-database-geo-restore-portal.md), [PowerShell](sql-database-geo-restore-powershell.md) или [REST (createMode=Restore)](https://msdn.microsoft.com/library/azure/mt163685.aspx).

> [AZURE.SELECTOR]
- [Обзор](sql-database-geo-restore.md)
- [Портал Azure](sql-database-geo-restore-portal.md)
- [PowerShell](sql-database-geo-restore-powershell.md)

Геовосстановление используется по умолчанию, когда база данных недоступна из-за происшествия в регионе, где она размещена. Базу данных можно создать на любом сервере в любом регионе Azure. Функция геовосстановления использует [автоматически создаваемые резервные копии](sql-database-automated-backups.md) в геоизбыточном хранилище Azure и осуществляет восстановление из геореплицированной резервной копии. Поэтому на нее не влияют простои хранилища в основном регионе.

## Подробное описание геовосстановления

Для геовосстановления используется та же технология, что и для восстановления до точки во времени, но с одним важным отличием. База данных восстанавливается из копии последней ежедневной резервной копии в геореплицированном хранилище BLOB-объектов (RA-GRS). Для каждой активной базы данных служба поддерживает цепочку резервных копий, включающую еженедельную полную резервную копию, несколько ежедневных разностных резервных копий и журналы транзакций, сохраняемые каждые 5 минут. Эти BLOB-объекты географически реплицируются, что гарантирует доступность ежедневных резервных копий даже после серьезного сбоя в основном регионе. Ниже показана георепликация еженедельных и ежедневных резервных копий, скопированных в контейнеры хранилища.

![геовосстановление](./media/sql-database-geo-restore/geo-restore-1.png)


Если масштабный инцидент в регионе приведет к недоступности приложения базы данных, с помощью геовосстановления можно будет восстановить базу данных из последней резервной копии на сервер в любом другом регионе. Все резервные копии географически реплицируются, поэтому создание резервной копии и георепликация в BLOB-объект Azure в другом регионе может выполняться с задержкой. Эта задержка может длиться до часа, поэтому в случае аварии возможна потеря данных за 1 час или менее (т. е. значение RPO составит до 1 часа). Ниже показано восстановление базы данных из последней ежедневной резервной копии.


![геовосстановление](./media/sql-database-geo-restore/geo-restore-2.png)

Для получения последней геореплицированной точки восстановления используйте операцию [получения восстанавливаемой базы данных](https://msdn.microsoft.com/library/dn800985.aspx) (*LastAvailableBackupDate*).

## Время восстановления при использовании геовосстановления

На время восстановления влияет несколько факторов: размер базы данных и уровень ее производительности, а также количество обрабатываемых в целевом регионе параллельных запросов на восстановление. В случае длительного простоя в регионе возможно появление большого количества запросов на геовосстановление, обрабатываемых другими регионами. При наличии большого числа запросов это может увеличить время восстановления баз данных в соответствующем регионе. Время, необходимое для восстановления базы данных, зависит от нескольких факторов, таких как ее размер, количество журналов транзакций, пропускная способность сети и т. д. В большинстве случаев на восстановление базы данных требуется до 12 часов.

## Сводка

Хотя геовосстановление доступно для всех уровней обслуживания, это наиболее простое из решений аварийного восстановления, доступных в базе данных SQL с наибольшими значениями RPO и предполагаемого времени восстановления (ERT). Для баз данных уровня "Базовый" с максимальным размером 2 ГБ геовосстановление предусматривает аварийное восстановление с ERT 12 часов. Если требуется минимизировать интервалы восстановления и риск потери данных для более крупных баз данных уровня "Стандартный" или "Премиум", мы рекомендуем использовать активную георепликацию. Активная георепликация обеспечивает более низкие значения RPO и ERT, так как требует только инициировать переход на непрерывно реплицируемую базу данных-получатель. Дополнительные сведения см. в разделе [Обзор: активная георепликация для базы данных SQL](sql-database-geo-replication-overview.md).

## Дальнейшие действия

- Подробные инструкции по восстановлению базы данных SQL Azure с помощью портала Azure из геоизбыточной резервной копии см. в разделе [Геовосстановление базы данных SQL Azure из геоизбыточной резервной копии с помощью портала Azure](sql-database-geo-restore-portal.md).
- Подробные инструкции по восстановлению базы данных SQL Azure с помощью PowerShell из геоизбыточной резервной копии см. в разделе [Геовосстановление базы данных SQL Azure из геоизбыточной резервной копии с помощью PowerShell](sql-database-geo-restore-powershell.md).
- Подробное обсуждение восстановления после сбоя см. в разделе [Восстановление базы данных SQL Azure или переход на базу данных-получатель при отказе](sql-database-disaster-recovery.md).

## Дополнительные ресурсы

- [Сценарии обеспечения непрерывности бизнес-процессов](sql-database-business-continuity-scenarios.md)

<!---HONumber=AcomDC_0622_2016-->