<properties
	pageTitle="Восстановление отдельной таблицы в резервной копии базы данных SQL Azure | Microsoft Azure"
	description="Инструкции по восстановлению отдельной таблицы в резервной копии базы данных SQL Azure."
	services="sql-database"
	documentationCenter=""
	authors="dalechen"
	manager="felixwu"
	editor=""/>

<tags
	ms.service="sql-database"
	ms.workload="data-management"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="03/11/2016"
	ms.author="daleche"/>


# Как восстановить отдельную таблицу из резервной копии базы данных SQL Azure

Бывает, что пользователь случайно изменил данные в базе данных SQL и хочет восстановить отдельную таблицу, в которой произошли изменения. В этой статье рассказывается, как восстановить отдельную таблицу в базе данных, используя одну из резервных копий, автоматически создаваемых базой данных SQL Azure, с учетом выбранного вами уровня обслуживания.

## Подготовка: переименование таблицы и восстановление копии базы данных
1. Найдите в базе данных SQL Azure таблицу, которую нужно заменить на восстановленную. Переименуйте таблицу с помощью Microsoft SQL Management Studio. Например, присвойте ей имя вида &lt;имя\_таблицы&gt;\_old.

	**Примечание**. Чтобы избежать блокировки, убедитесь, что в переименовываемой таблице не выполняются никакие действия. Если возникают какие-либо проблемы, выполняйте это действие в период обслуживания.

2. Восстановите резервную копию базы данных на желаемый момент времени. Инструкции см. в статье [Восстановление базы данных SQL Azure после ошибки пользователя](../sql-database/sql-database-user-error-recovery.md).

	**Примечания**
	- Имя восстановленной базы данных будет иметь формат Имя\_базы\_данных+отметка времени, например: **Adventureworks2012\_2016-01-01T22-12Z**. При этом имя базы данных на сервере на перезаписывается. Эта мера безопасности предназначена для того, чтобы пользователь мог проверить восстановленную базу данных, прежде чем он удалить текущую базу и переименует восстановленную для использования в работе.
	- Служба автоматически создает резервные копии на всех уровнях обслуживания, от Basic до Premium. Отличаются только параметры хранения резервных копий.

| Восстановление базы данных | Уровень Basic | Уровень Standard | Уровень Premium |
| :-- | :-- | :-- | :-- |
| Восстановление до точки во времени | Все точки восстановления в течение 7 дней|Все точки восстановления в течение 14 дней| Все точки восстановления в течение 35 дней|

## Копирование таблицы из восстановленной базы данных с помощью средства миграции баз данных SQL
1. Загрузите и установите [мастер миграции баз данных SQL](https://sqlazuremw.codeplex.com).

2. Откройте мастер миграции баз данных SQL. На странице **Выбор процесса** выберите **База данных для анализа или миграции** и нажмите кнопку **Далее**. ![Мастер миграции баз данных SQL — выбор процесса](./media/sql-database-cloud-migrate-restore-single-table-azure-backup/1.png)
3. В диалоговом окне **Подключение к серверу** введите следующие параметры:
 - **Имя сервера**: ваш экземпляр SQL Azure.
 - **Проверка подлинности**: **проверка подлинности SQL Server.** Введите свои учетные данные.
 - **База данных**: **главная БД (список всех баз данных)**.
 - **Примечание**. По умолчанию мастер сохраняет учетные данные. Если вы этого не хотите, установите флажок **Забыть учетные данные**. ![Мастер миграции баз данных SQL — выбор источника, шаг 1](./media/sql-database-cloud-migrate-restore-single-table-azure-backup/2.png)
4. В диалоговом окне **Выбор источника** выберите имя восстанавливаемой базы данных в разделе **Подготовка** и нажмите кнопку **Далее**.

	![Мастер миграции баз данных SQL — выбор источника, шаг 2](./media/sql-database-cloud-migrate-restore-single-table-azure-backup/3.png)

5. В диалоговом окне **Выбор объектов** выберите параметр **Выбрать отдельные объекты базы данных**, а затем таблицу (или таблицы), которые нужно перенести на целевой сервер. ![Мастер миграции баз данных SQL — выбор объектов](./media/sql-database-cloud-migrate-restore-single-table-azure-backup/4.png)

6. На странице **Сводка мастера сценариев** нажмите кнопку **Да** в запросе о вашей готовности к созданию сценария SQL. Сценарий TSQL можно также сохранить для последующего использования. ![Мастер миграции баз данных SQL — сводка мастера сценариев](./media/sql-database-cloud-migrate-restore-single-table-azure-backup/5.png)

7. На странице **Сводка по результатам** нажмите кнопку **Далее**. ![Мастер миграции баз данных SQL — сводка результатов](./media/sql-database-cloud-migrate-restore-single-table-azure-backup/6.png)

8. На странице **Настройка подключения к целевому серверу** щелкните **Подключение к серверу** и введите следующие данные:
	- **Имя сервера**: экземпляр целевого сервера.
	- **Проверка подлинности**: **проверка подлинности SQL Server.** Введите свои учетные данные.
	- **База данных**: **главная БД (список всех баз данных)**. Этот параметр выводит список всех баз данных на целевом сервере.

	![Мастер миграции баз данных SQL — настройка подключения к целевому серверу](./media/sql-database-cloud-migrate-restore-single-table-azure-backup/7.png)

9. Нажмите кнопку **Подключиться**, выберите базу данных, в которую нужно перенести таблицу, и нажмите кнопку **Далее**. Выполнение созданного ранее сценария будет завершено, а перенесенная таблица появится в целевой базе данных.

## Проверка
1. Запросите и протестируйте скопированную таблицу и убедитесь в том, что данные не пострадали. После этого удалите переименованную таблицу из раздела **Подготовка** (в данном примере это таблица &lt; имя\_таблицы&gt;\_old).

<!---HONumber=AcomDC_0316_2016-->