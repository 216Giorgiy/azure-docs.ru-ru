---
title: Оценки уязвимостей SQL в службе "База данных SQL Azure" | Документация Майкрософт
description: Узнайте, как настроить оценку уязвимостей SQL в службе "База данных SQL" и интерпретировать полученные отчеты.
services: sql-database
author: ronitr
manager: craigg
ms.service: sql-database
ms.topic: conceptual
ms.date: 05/17/2018
ms.author: ronitr
ms.reviewer: carlrab
ms.openlocfilehash: 031ba903e24530975156976c0f0bbcc985c670d1
ms.sourcegitcommit: 1aedb52f221fb2a6e7ad0b0930b4c74db354a569
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/17/2018
ms.locfileid: "42143880"
---
# <a name="sql-vulnerability-assessment"></a>Оценка уязвимостей SQL

Оценка уязвимостей SQL — это легко настраиваемая служба, которая поможет обнаруживать, отслеживать и устранять потенциальные уязвимости базы данных. Используйте его, чтобы заблаговременно повысить безопасность базы данных. 

Оценка уязвимостей входит в состав предложения [Расширенная защита от угроз SQL](sql-advanced-threat-protection.md), которое представляет собой унифицированный пакет расширенных возможностей безопасности SQL. Доступ к службе оценки уязвимостей можно получить через центральный портал SQL ATP. Там же ею можно управлять.

## <a name="what-is-vulnerability-assessment"></a>Что такое оценка уязвимостей?
Оценка уязвимостей SQL (VA) является службой, которая обеспечивает представление о состоянии безопасности и предлагает практические действия для устранения проблем безопасности и повышения безопасности базы данных. Эта служба может помочь в выполнении следующих задач:  
- Соблюдение нормативных требований, требующих отчетов о сканировании базы данных.  
- Соблюдение стандартов конфиденциальности данных.  
- Мониторинг динамической среды базы данных, в которой сложно отслеживать изменения.  

Служба оценки уязвимостей использует проверку. Она встроена в службу базы данных SQL Azure. Эта служба использует базу знаний правил, которые помечают уязвимости системы безопасности и указывают на отклонения от рекомендаций, в том числе на неправильные настройки, избыточные разрешения и незащищенные конфиденциальные данные. Эти правила основаны на рекомендациях корпорации Майкрософт и направлены на проблемы безопасности, представляющие большую опасность для базы данных и ее ценных данных. Они охватывают как проблемы на уровне базы данных, так и проблемы безопасности на уровне сервера, такие как настройки брандмауэра сервера и разрешения на уровне сервера. В этих правилах также представлены многие требования различных контролирующих органов, что позволяет соблюдать их.  

Результаты проверки включают в себя практические действия для устранения каждой проблемы, а также настроенные сценарии исправления, если это возможно. Отчет об оценке можно настроить для своей среды, задав приемлемые базовые показатели для конфигураций разрешений, конфигураций функций и параметров базы данных.   

## <a name="implementing-va"></a>Реализация службы оценки уязвимостей  
Ниже приведены инструкции по реализации службы оценки уязвимостей в базе данных SQL.  

## <a name="1-run-a-scan"></a>1. Выполнение проверки  
Чтобы начать работу со службой оценки уязвимостей, перейдите к разделу **Advanced Threat Protection** под заголовком "Безопасность" на панели службы "База данных SQL Azure". Щелкните, чтобы включить Advanced Threat Protection, а затем щелкните карту **Оценка уязвимостей**, после чего автоматически откроется карта параметров оценки уязвимостей. 

Начните с настройки учетной записи хранения, в которой будут храниться результаты проверки. Дополнительные сведения об учетных записях хранения см. в разделе [Об учетных записях хранения Azure](../storage/common/storage-create-storage-account.md). После настройки хранилища щелкните **Проверить**, чтобы проверить базу данных на наличие уязвимостей.
  
![Проверка базы данных](./media/sql-vulnerability-assessment/pp_va_initialize.png)  
  > [!NOTE]   
  > Проверка является простой и безопасной. Она занимает несколько секунд и является исключительно операцией чтения. Она не вносит никаких изменений в базу данных.  

## <a name="2-view-the-report"></a>2. Просмотр отчета  
После завершения проверки на портале Azure автоматически отображается отчет о проверке. В отчете представлен обзор состояния безопасности: количество обнаруженных проблем и их уровень серьезности. Результаты включают в себя предупреждения об отклонениях от рекомендаций, а также моментальный снимок параметров безопасности, например субъектов и ролей базы данных и соответствующих разрешений. Отчет о проверке также содержит карту конфиденциальных данных, обнаруженных в базе данных, и включает рекомендации по классификации этих данных с использованием функции [обнаружения данных и классификации](sql-database-data-discovery-and-classification.md). 
 
![Просмотр отчета](./media/sql-vulnerability-assessment/pp_main_getstarted.png)  

## <a name="3-analyze-the-results-and-resolve-issues"></a>3. Анализ результатов и устранение проблем  
Просмотрите результаты и определите, какие проблемы в отчете действительно нарушают безопасность в вашей среде. Изучите подробные сведения о каждой проблеме, чтобы понять, как она влияет на безопасность и почему проверка безопасности не пройдена. Используйте практические рекомендации по исправлению, представленные в отчете, чтобы устранить проблему.  

![Анализ отчета](./media/sql-vulnerability-assessment/pp_fail_rule_show_remediation.png)    

## <a name="4-set-your-baseline"></a>4. Настройка базовых показателей  
При просмотре результатов оценки можно пометить определенные результаты как приемлемые *базовые* показатели для своей среды. Базовые показатели — важные параметры, влияющие на содержимое отчета о проверке. При следующих циклах проверки результаты, которые соответствуют базовым показателям, будут рассматриваются как прошедшие проверку. После настройки состояния базовых показателей безопасности служба оценки уязвимостей будет сообщать только об отклонениях от базовых показателей, и вы сможете сосредоточиться на важных проблемах.  

![Настройка базовых показателей](./media/sql-vulnerability-assessment/pp_fail_rule_show_baseline.png)  

## <a name="5-run-a-new-scan-to-see-your-customized-tracking-report"></a>5. Выполнение новой проверки для просмотра настраиваемого отчета об отслеживании  
После завершения настройки **базовых показателей правила** выполните новую проверку, чтобы просмотреть настраиваемый отчет. Теперь служба оценки уязвимостей сообщает о проблемах безопасности, которые связаны с отклонением от утвержденного состояния базовых показателей. 
 
![Просмотр настраиваемого отчета](./media/sql-vulnerability-assessment/pp_pass_main_with_baselines.png)  

Теперь службу оценки уязвимостей можно использовать, чтобы постоянно отслеживать безопасность базы данных и обеспечивать ее высокий уровень, а также следить за соблюдением политик организации. Если требуются отчеты о соответствии, вам могут пригодиться отчеты службы оценки уязвимостей, чтобы упростить процесс соблюдения требований.  

## <a name="6-set-up-periodic-recurring-scans"></a>6. Настройка периодически повторяющихся проверок
Перейдите к параметрам оценки уязвимостей, чтобы включить **периодическое повторное сканирование**. Эти параметры позволяют настроить автоматический запуск сканирования уязвимостей в базе данных один раз в неделю. Сводка результатов отправляется ​​на указанный адрес электронной почты.

![Просмотр настраиваемого отчета](./media/sql-vulnerability-assessment/pp_recurring_scans.png)

## <a name="7---export-an-assessment-report"></a>7.   Экспорт отчета об оценке
Щелкните **Экспорт результатов проверки**, чтобы создать скачиваемый отчет Excel о результатах проверки. Этот отчет содержит вкладку со сводными данными об оценке, в том числе все невыполненные проверки, а также вкладку **Журнал** с полным набором результатов сканирования, в том числе все выполненные проверки и сведения о результате каждой из них. 

## <a name="8---view-scan-history"></a>8.   Просмотр журнала сканирования
Щелкните **Журнал сканирования** на панели оценки уязвимостей, чтобы просмотреть журнал сканирований, которые выполнялись в этой базе данных ранее. Выберите определенное сканирование из списка, чтобы просмотреть подробные результаты.

Теперь службу оценки уязвимостей можно использовать, чтобы постоянно отслеживать безопасность базы данных и обеспечивать ее высокий уровень, а также следить за соблюдением политик организации. Если требуются отчеты о соответствии, вам могут пригодиться отчеты службы оценки уязвимостей, чтобы упростить процесс соблюдения требований.

## <a name="manage-vulnerability-assessments-using-azure-powershell"></a>Управление оценками уязвимостей с помощью Azure PowerShell

Для программного управления оценками уязвимостей можно использовать командлеты Azure PowerShell. Поддерживаемые командлеты:

* [Update-AzureRmSqlDatabaseVulnerabilityAssessmentSettings](https://docs.microsoft.com/powershell/module/azurerm.sql/Update-AzureRmSqlDatabaseVulnerabilityAssessmentSettings?view=azurermps-6.6.0) — обновляет параметры оценки уязвимостей базы данных;
* [Get-AzureRmSqlDatabaseVulnerabilityAssessmentSettings](https://docs.microsoft.com/powershell/module/azurerm.sql/Get-AzureRmSqlDatabaseVulnerabilityAssessmentSettings?view=azurermps-6.6.0) — возвращает параметры оценки уязвимостей базы данных;
* [Clear-AzureRmSqlDatabaseVulnerabilityAssessmentSettings](https://docs.microsoft.com/powershell/module/azurerm.sql/Clear-AzureRmSqlDatabaseVulnerabilityAssessmentSettings?view=azurermps-6.6.0) — очищает параметры оценки уязвимостей базы данных;
* [Set-AzureRmSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/azurerm.sql/Set-AzureRmSqlDatabaseVulnerabilityAssessmentRuleBaseline?view=azurermps-6.6.0) — устанавливает базовое правило оценки уязвимостей;
* [Get-AzureRmSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/azurerm.sql/Get-AzureRmSqlDatabaseVulnerabilityAssessmentRuleBaseline?view=azurermps-6.6.0) — получает базовое правило оценки уязвимостей для данного правила;
* [Clear-AzureRmSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/azurerm.sql/Clear-AzureRmSqlDatabaseVulnerabilityAssessmentRuleBaseline?view=azurermps-6.6.0) — очищает базовое правило оценки уязвимостей; сначала необходимо установить базовое правило перед использованием этого командлета, чтобы очистить его;
* [Start-AzureRmSqlDatabaseVulnerabilityAssessmentScan](https://docs.microsoft.com/powershell/module/azurerm.sql/Start-AzureRmSqlDatabaseVulnerabilityAssessmentScan?view=azurermps-6.6.0) — запускает сканирования оценки уязвимостей;
* [Get-AzureRmSqlDatabaseVulnerabilityAssessmentScanRecord](https://docs.microsoft.com/powershell/module/azurerm.sql/Get-AzureRmSqlDatabaseVulnerabilityAssessmentScanRecord?view=azurermps-6.6.0) — получает все записи об оценке уязвимостей, связанные с данной базой данных;
* [Convert-AzureRmSqlDatabaseVulnerabilityAssessmentScan](https://docs.microsoft.com/powershell/module/azurerm.sql/Convert-AzureRmSqlDatabaseVulnerabilityAssessmentScan?view=azurermps-6.6.0) — преобразовывает результаты сканирования оценки уязвимостей в файл Excel.


Пример сценария см. в разделе [Azure SQL Vulnerability Assessment PowerShell support](https://blogs.msdn.microsoft.com/sqlsecurity/2018/08/02/azure-sql-vulnerability-assessment-now-with-powershell-support/) (Поддержка PowerShell для оценки уязвимостей Azure SQL).


## <a name="next-steps"></a>Дополнительная информация  

- Дополнительные сведения о службе "Расширенная защита от угроз SQL" см. в [этой статье](sql-advanced-threat-protection.md).
- Дополнительные сведения о классификации и изучении данных см. в [этой статье](sql-database-data-discovery-and-classification.md).
