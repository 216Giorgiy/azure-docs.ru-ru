<properties 
	pageTitle="Создание эластичного пула баз данных SQL и управление им (предварительная версия)" 
	description="Создайте один пул ресурсов и используйте его в нескольких группах баз данных SQL Azure." 
	services="sql-database" 
	documentationCenter="" 
	authors="stevestein" 
	manager="jeffreyg" 
	editor=""/>

<tags 
	ms.service="sql-database"
	ms.devlang="NA"
	ms.date="06/24/2015" 
	ms.author="sstein" 
	ms.workload="data-management" 
	ms.topic="article" 
	ms.tgt_pltfrm="NA"/>


# Создание эластичного пула баз данных SQL Azure и управление им (предварительная версия)

> [AZURE.SELECTOR]
- [Azure portal](sql-database-elastic-pool-portal.md)
- [PowerShell](sql-database-elastic-pool-powershell.md)

В этой статье описано, как создать эластичный пул с помощью [портала Azure](https://portal.azure.com).

Эластичные пулы позволяют упростить процессы создания и обслуживания большого количества баз данных, а также контролировать их производительность и связанные с ними затраты.
 

> [AZURE.NOTE]Сейчас эластичные пулы предоставляются в виде предварительной версии, которая доступна только с серверами баз данных SQL версии 12.

 


## Предварительные требования

Чтобы создать эластичный пул, вам потребуется:

- Подписка Azure. Если у вас еще нет подписки Azure, щелкните БЕСПЛАТНОЕ ПРОБНОЕ ИСПОЛЬЗОВАНИЕ в верхней части этой страницы. После оформления подписки вернитесь к этой статье.
- Сервер баз данных SQL Azure версии 12. Инструкции по созданию этого сервера см. в статье [Создание первой базы данных SQL Azure](sql-database-get-started.md).



## Создание эластичного пула

Чтобы создать эластичный пул, добавьте на сервер новый пул. На сервер можно добавить несколько пулов, но с каждым из них может быть связан только один сервер. Кроме того, в пул можно добавить все или только некоторые базы данных на сервере.


1.	Выберите сервер баз данных SQL версии 12, содержащий базы, которые нужно добавить в пул.
2.	Создайте пул, нажав в верхней части колонки **SQL Server** кнопку **Добавить пул**.

   ![Создание эластичного пула][1]

## Настройка эластичного пула

Настройте пул, указав ценовую категорию, добавив базы данных и определив параметры производительности.

*Нажмите кнопку **Добавить пул** и примите **условия использования предварительной версии** после заполнения всех обязательных полей в колонке **УСЛОВИЯ ИСПОЛЬЗОВАНИЯ ПРЕДВАРИТЕЛЬНОЙ ВЕРСИИ**. Условия принимаются только один раз для каждой подписки.*

   ![Настройка эластичного пула][2]


### Ценовой уровень

Ценовая категория эластичного пула имеет много общего с уровнем служб базы данных SQL. Ценовая категория определяет функции, которые будут доступны для эластичных баз данных в пуле, максимальное количество единиц передачи данных (далее — DTU) и объем хранилища (в гигабайтах) для каждой базы данных.

> [AZURE.NOTE]Для предварительной версии эластичного пула доступна только одна ценовая категория: **Standard**.

| Ценовая категория | Макс. количество DTU |
| :--- | :--- |
| Стандарт | 100 единиц на базу данных |

### Добавление баз данных

Базы данных, которые нужно добавить в пул, можно выбрать в любой момент. При создании нового пула служба Azure рекомендует базы данных, которые можно включить в пул, и автоматически отмечает их для добавления. Azure анализирует журнал использования баз данных и рекомендует использовать эластичный пул, когда это дешевле, чем использование уровней производительности для отдельных баз данных. Если система предлагает использовать эластичный пул, Azure сообщает рекомендуемое количество DTU пула, минимальные и максимальные значения DTU для каждой базы данных в пуле и список баз данных. В эластичный пул можно добавить базу данных, которая существует не менее 14 дней и не принадлежит к ценовой категории Premium (в общедоступной предварительной версии поддерживаются только базы данных категории Standard). В пул можно добавить все базы данных на сервере или же добавить только часть из исходного списка.

   ![Добавление баз данных][5]

При добавлении баз данных в пул необходимо учитывать следующее:

- В пуле должно быть место для добавляемой базы данных (следите за максимальным количеством баз данных в пуле). В частности, пул должен иметь достаточное количество DTU, чтобы гарантировать заявленную скорость передачи данных для одной базы данных (например, если для группы гарантированное количество DTU равно 400, а для каждой базы данных — 10, то максимальное количество баз данных в пуле равно 40 (400 DTU / 10 DTU = 40 баз данных).
- В пуле должны быть доступны все функции, которые используются в базе данных. 


### Настройка производительности

При настройке производительности пула вы задаете параметры быстродействия как для пула, так и для эластичных баз данных в нем. Помните, что **параметры эластичных баз данных** влияют на все базы данных в пуле.

   ![Настройка эластичного пула][3]

Производительность пула определяется тремя настраиваемыми параметрами: гарантированным количеством DTU для пула и минимальным и максимальным количествами DTU для эластичных баз данных в пуле. В таблице ниже приведено описание каждого из этих параметров, а также рекомендации по их настройке.

| Параметр производительности | Описание |
| :--- | :--- |
| **DTU ПУЛА (ИЛИ ОБЪЕМ В ГБ)**. Гарантированное количество DTU для пула. | Гарантированное количество DTU — это гарантированное число единиц передачи данных, доступных для всех баз данных в пуле. <br> Сейчас для этого параметра можно задавать значения 100, 200, 400, 800 или 1200. <br> Гарантированное количество DTU для группы следует задавать, исходя из статистических данных о скорости передачи данных в группе. Этот параметр также можно определить, исходя из требуемого гарантированного количества DTU на базу данных и количества одновременно используемых баз. Гарантированное количество DTU для пула также коррелирует с объем хранилища пула: на каждую единицу передаваемых данных, которую вы выделяете для пула, вы получаете 1 ГБ места под хранилище базы данных (1 DTU = 1 ГБ). <br> **Какое значение нужно установить для гарантированного количества DTU для пула?** <br>Минимальное значение можно определить по такой формуле: [количество баз данных] x [среднее количество используемых DTU на одну базу данных]. |
| **МИНИМАЛЬНОЕ КОЛИЧЕСТВО DTU**. Гарантированное количество DTU для каждой базы данных. | Гарантированное количество DTU на базу данных — это гарантированное число единиц передачи данных, доступных для одной базы данных в пуле. Сейчас для этого параметра можно задавать значения 0, 10, 20 или 50. Значение 0 означает, что для баз данных в группе не установлено гарантированное количество DTU. <br> **Какое значение нужно установить для гарантированного количества DTU на базу данных?** <br> Минимальное значение можно определить как среднее количество используемых DTU на одну базу данных. Гарантированное количество DTU на базу данных — глобальный параметр, который влияет на все базы данных пула. |
| **МАКСИМАЛЬНОЕ КОЛИЧЕСТВО DTU**. Максимально возможное количество DTU для одной базы данных. | Максимальное количество DTU на базу данных — это максимальное число единиц передачи данных, которое может использовать одна база данных пула. Максимальное количество DTU для одной базы данных должно быть достаточно большим, чтобы позволить ей обрабатывать пиковые количества запросов. Для этого параметра можно установить максимально возможное значение, которое зависит от ценовой категории пула (100 DTU для категории Standard). Значение этого параметра должно позволить базам данных в группе выдерживать пиковые нагрузки. Значение параметра для группы рекомендуется немного увеличить, так как использование пула предполагает обращение к более и менее активным базам данных в условиях, когда не все базы одновременно обрабатывают пиковое количество запросов.<br> **Какое значение нужно установить для максимального количества DTU на базу данных?** <br> Максимальное значение DTU можно определить как максимальную нагрузку базы данных. Предположим, например, что пиковая нагрузка одной базы данных равна 50 DTU и только 20 % из 100 баз данных в группе одновременно работают с такой нагрузкой. Если в качестве максимального количества DTU на базу данных задано значение 50, то для группы целесообразно увеличить гарантированное количество DTU в 5 раз (1000 DTU). Также обращаем ваше внимание, что максимальное количество DTU не следует рассматривать как гарантированное количество ресурсов для базы данных. Это всего лишь значение, которое может быть достигнуто в случае наличия свободных ресурсов. |


## Добавление баз данных в эластичный пул

Создав пул, вы можете добавлять в него базы данных, а также удалять их из него.


## Мониторинг эластичного пула и управление им

Создав эластичный пул, вы можете отслеживать его и управлять им прямо на портале. Для этого нужно открыть список существующих пулов и выбрать нужный пул.

В созданном пуле появляется ряд возможностей.

- **Настроить пул**. Позволяет изменять количество DTU для пула и одной базы данных.
- **Создать задание**. Позволяет управлять базами данных в пуле путем создания эластичных заданий. Эластичные задания позволяют легко и быстро выполнять сценарии T-SQL в любом количестве баз данных в пуле. Дополнительные сведения см. в статье [Обзор службы заданий эластичной базы данных](sql-database-elastic-jobs-overview.md).
- **Управление заданиями**. Позволяет администрировать существующие эластичные задания.



![Мониторинг эластичного пула][8]




![Мониторинг эластичного пула][4]

При выборе существующего пула появляются сведения об использовании его ресурсов. Щелкните диаграмму **Использование ресурсов**, чтобы открыть колонку **Метрика**. Здесь можно настроить отображение диаграммы и задать параметры оповещений.


![Использование ресурсов][6]

Щелкните **Изменить диаграмму** и добавьте нужные параметры. Это позволит быстро просматривать данные телеметрии для этого пула.


![Изменение диаграммы][7]







## Дальнейшие действия
После создания эластичного пула вы можете управлять его базами данных путем создания эластичных заданий. Эластичные задания позволяют легко и быстро выполнять сценарии T-SQL в любом количестве баз данных в пуле.

Дополнительные сведения см. в статье [Обзор службы заданий эластичной базы данных](sql-database-elastic-jobs-overview.md).



## Сопутствующие материалы

- [Эластичный пул баз данных SQL](sql-database-elastic-pool.md)
- [Создание эластичного пула баз данных SQL с помощью PowerShell](sql-database-elastic-pool-powershell.md)
- [Справка по эластичным базам данных](sql-database-elastic-pool-reference.md)


<!--Image references-->
[1]: ./media/sql-database-elastic-pool-portal/new-elastic-pool.png
[2]: ./media/sql-database-elastic-pool-portal/configure-elastic-pool.png
[3]: ./media/sql-database-elastic-pool-portal/configure-performance.png
[4]: ./media/sql-database-elastic-pool-portal/monitor-elastic-pool.png
[5]: ./media/sql-database-elastic-pool-portal/add-databases.png
[6]: ./media/sql-database-elastic-pool-portal/metric.png
[7]: ./media/sql-database-elastic-pool-portal/edit-chart.png
[8]: ./media/sql-database-elastic-pool-portal/configure-pool.png

<!---HONumber=62-->