<properties
	pageTitle="Создание масштабируемых пулов эластичных баз данных | Microsoft Azure"
	description="Добавление масштабируемого пула эластичных баз данных в конфигурацию баз данных SQL для упрощения администрирования и распределения ресурсов между несколькими базами данных."
	keywords="эластичная база данных, конфигурация базы данных"
	services="sql-database"
	documentationCenter=""
	authors="stevestein"
	manager="jeffreyg"
	editor=""/>

<tags
	ms.service="sql-database"
	ms.devlang="NA"
	ms.date="02/02/2015"
	ms.author="sstein"
	ms.workload="data-management"
	ms.topic="get-started-article"
	ms.tgt_pltfrm="NA"/>


# Создание масштабируемого пула эластичных баз данных SQL с использованием портала Azure

> [AZURE.SELECTOR]
- [Azure portal](sql-database-elastic-pool-portal.md)
- [C#](sql-database-elastic-pool-csharp.md)
- [PowerShell](sql-database-elastic-pool-powershell.md)

В этой статье описано создание масштабируемого [пула эластичных баз данных ](sql-database-elastic-pool.md)с помощью портала Azure. Конфигурация базы данных SQL с пулами эластичных баз данных упрощает администрирование и распределение ресурсов между несколькими базами данных.

> [AZURE.NOTE] Сейчас пулы эластичных баз данных предоставляются в виде предварительной версии, которая доступна только с серверами Базы данных SQL версии 12. Если у вас есть сервер базы данных SQL версии 11, с помощью PowerShell вы можете в один шаг [обновить его до версии 12 и создать пул](sql-database-upgrade-server-powershell.md).


Для работы с этим руководством вам понадобится база данных на сервере базы данных SQL версии 12. При необходимости такую базу данных можно создать за пять минут (см. статью [Создание своей первой базы данных SQL Azure](sql-database-get-started.md)). Если у вас уже есть сервер базы данных SQL версии 11, вы можете [обновить его на портале до версии 12](sql-database-v12-upgrade.md), а затем продолжить выполнять инструкции по созданию пула, приведенные в этом руководстве.


## Шаг 1. Создание пула

Создайте пул эластичных баз данных путем добавления нового пула на сервер. На сервер можно добавить несколько пулов, но в один и тот же пул нельзя добавлять базы данных с разных серверов.


1. На [портале Azure](http://portal.azure.com/) щелкните **Серверы SQL**.
2. Выберите сервер с базами данных, которые нужно добавить в пул.
3. Щелкните **Создать пул** (или, если появится сообщение о том, что для выбранного сервера есть рекомендуемый пул, щелкните это сообщение — так вы сможете быстро просмотреть и создать пул, оптимизированный для баз данных вашего сервера). Подробные сведения о рекомендациях приведены ниже.


    ![Добавление пула на сервер](./media/sql-database-elastic-pool-portal/new-pool.png)


4. В колонке **Пул эластичных баз данных** можно оставить имя по умолчанию или указать имя нового пула.

    ![Настройка эластичного пула](./media/sql-database-elastic-pool-portal/configure-elastic-pool.png)


### Рекомендуемые пулы эластичных баз данных

Перейдите к серверу баз данных SQL; возможно, вы увидите сообщение о наличии рекомендуемых пулов эластичных баз данных для сервера (только версии 12).

### Почему я получаю рекомендации?

Служба базы данных SQL оценивает историю использования и рекомендует один или несколько пулов эластичных баз данных, если этот вариант экономичнее, чем отдельные базы данных.

![рекомендуемый пул](./media/sql-database-elastic-pool-portal/recommended-pool.png)

Для предоставления каждой рекомендации используется уникальное подмножество баз данных на сервере, которое лучше всего подходит для формирования пула.

Каждая рекомендация по пулу содержит следующие элементы:

- ценовая категория для пула (Basic, Standard или Premium);
- соответствующий объем единиц eDTU пула;
- минимальные и максимальные настройки единиц eDTU для эластичной базы данных;
- список рекомендуемых баз данных.

При рекомендации пула эластичных баз данных служба учитывает данные телеметрии за последние 30 дней. Чтобы база данных рассматривалась для включения в пул эластичных баз данных, она должна существовать не менее 7 дней. Базы данных, которые уже находятся в пуле эластичных баз данных, не рассматриваются в качестве кандидатов для рекомендуемого добавления в пул.

Служба оценивает потребность в ресурсах и экономичность перемещения каждой отдельной базы данных на каждом уровне службы в пулы эластичных баз данных того же уровня. Например, все базы данных Standard на сервере оцениваются на предмет возможности их добавления в пул эластичных баз данных уровня Standard. Это означает, что служба не предоставляет кросс-уровневые рекомендации, такие как перемещение базы данных Standard в пул Premium.


### Создание рекомендуемого пула

1. Щелкните сообщение, чтобы просмотреть список рекомендуемых пулов.
1. Щелкните пул, чтобы ознакомиться с подробными рекомендациями.
2. Просмотрите все параметры, содержащиеся в рекомендации, и примите стандартные значения или измените их в соответствии со своими бизнес-потребностями.


## Шаг 2. Выбор ценовой категории

Ценовая категория пула определяет функции, которые будут доступны для эластичных баз данных в пуле, максимальное количество единиц eDTU (eDTU MAX) и объем хранилища (в гигабайтах) для каждой базы данных. Дополнительные сведения см. в статье [Уровни служб](sql-database-service-tiers.md#Service-tiers-for-elastic-database-pools).

>[AZURE.NOTE] В настоящее время в предварительной версии недоступна возможность изменить ценовую категорию пула эластичных баз данных после ее создания. Чтобы изменить ценовую категорию для существующего пула эластичных баз данных, создайте пул эластичных баз данных в нужной ценовой категории и перенесите эластичные базы данных в этот пул.

   ![Выбор ценовой категории](./media/sql-database-elastic-pool-portal/pricing-tier.png)

### Настройка пула

Задав ценовую категорию, щелкните "Настроить пул" (для пула, в который добавлены базы данных) и укажите значения eDTU и объема хранилища (в ГБ) для пула, а также максимальное и минимальное значение eDTU для эластичных баз данных в пуле.

## Шаг 3. Добавление баз данных в пул

Вы можете в любое время добавлять базы данных в пул и удалять их оттуда.

1. Во время создания пула в колонке **Настройка пула** щелкните **Добавить базы данных**.
2. Выберите базы данных, которые нужно добавить в пул.

    ![Добавление баз данных](./media/sql-database-elastic-pool-portal/add-databases.png)

    При добавлении баз данных в пул необходимо учитывать следующее:

    - В пуле должно быть место для добавляемой базы данных (следите за максимальным количеством баз данных в пуле). В частности, пул должен иметь достаточное количество единиц eDTU, чтобы обеспечить гарантированное количество единиц eDTU для каждой базы данных (например, если для группы гарантированное количество единиц eDTU равно 400, а для каждой базы данных — 10, то максимальное количество баз данных в пуле равно 40 (400 eDTU / 10 eDTU = 40 баз данных).
    - В пуле должны быть доступны все функции, которые используются в базе данных.

### Динамические рекомендации

Когда базы данных будут добавлены в пул, на основе сведений об использовании выбранных баз данных будут динамически создаваться рекомендации. Эти рекомендации будут отображены в диаграмме использования (со значениями eDTU и ГБ), а также в баннере рекомендации в верхней части колонки **Настройка пула**. Эти рекомендации помогут создать пул, оптимизированный для конкретных баз данных.


 ![динамические рекомендации](./media/sql-database-elastic-pool-portal/dynamic-recommendation.png)


## Шаг 4. Настройка характеристик производительности пула

При настройке производительности пула вы задаете параметры быстродействия как для пула, так и для эластичных баз данных в нем. Помните, что **параметры эластичных баз данных** влияют на все базы данных в пуле.

 ![Настройка эластичного пула](./media/sql-database-elastic-pool-portal/configure-performance.png)

Производительность пула определяется тремя настраиваемыми параметрами: гарантированным количеством eDTU для пула и eDTU MIN и eDTU MAX для эластичных баз данных в пуле. В таблице ниже приведено описание каждого из этих параметров, а также рекомендации по их настройке. Специальные доступные параметры значений см. в [справочнике по пулу эластичных баз данных](sql-database-elastic-pool-reference.md).

| Параметр производительности | Описание |
| :--- | :--- |
| **POOL eDTU** — гарантированное количество eDTU для пула | Гарантированное количество eDTU для пула — это гарантированное количество единиц eDTU, которые совместно используются всеми базами данных в пуле. <br> Гарантированное количество eDTU для группы следует задавать, исходя из статистических данных об использовании единиц eDTU в группе. Этот параметр также можно определить, исходя из требуемого гарантированного количества eDTU на базу данных и количества одновременно используемых баз. Гарантированное количество eDTU для пула также коррелирует с объемом хранилища пула: на каждую единицу передаваемых данных, которую вы выделяете для пула, вы получаете фиксированный объем хранилища базы данных. <br> **Какое значение нужно установить для гарантированного количества eDTU для пула?** <br>Минимальное значение можно определить по такой формуле: [количество баз данных] x [среднее количество используемых DTU на одну базу данных]. |
| **eDTU MIN** — гарантированное количество eDTU для каждой базы данных | Гарантированное количество eDTU на базу данных — это количество единиц eDTU, которое гарантируется отдельной базе данных в пуле. <br> **Какое значение нужно установить для гарантированного количества eDTU на базу данных?** <br>Как правило, гарантированное количество eDTU на базу данных (eDTU MIN) может быть любым числом в диапазоне от 0 до значения [среднее количество используемых на одну базу данных]. Гарантированное количество eDTU на базу данных — глобальный параметр, который влияет на все базы данных пула. |
| **eDTU MAX** — максимально возможное количество eDTU для одной базы данных | eDTU MAX для базы данных — это максимальное число единиц eDTU, которое может использовать отдельная база данных в пуле. Максимальное количество eDTU для одной базы данных должно быть достаточно большим, чтобы позволить ей обрабатывать пиковые количества запросов. Для этого параметра можно установить максимально возможное значение, которое зависит от ценовой категории пула (1000 eDTU для категории Premium). Значение этого параметра должно позволить базам данных в группе выдерживать пиковые нагрузки. Значение параметра для группы рекомендуется немного увеличить, так как использование пула предполагает обращение к более и менее активным базам данных в условиях, когда не все базы одновременно обрабатывают пиковое количество запросов.<br> **Какое ограничение на количество eDTU нужно установить для каждой базы данных?** <br> Установите для максимального количества eDTU (eDTU MAX) на одну базу данных значение [пиковой нагрузки на базу данных]. Предположим, например, что пиковая нагрузка одной базы данных равна 50 DTU и только 20 % из 100 баз данных в группе одновременно работают с такой нагрузкой. Если в качестве максимального количества eDTU на базу данных задано значение 50, то для группы (POOL eDTU) целесообразно увеличить гарантированное количество eDTU в 5 раз (1000 eDTU). Кроме того, обратите внимание, что максимальное количество eDTU не следует рассматривать как гарантированное количество ресурсов для базы данных. Это всего лишь значение, которое может быть достигнуто в случае наличия свободных ресурсов. |


## Добавление баз данных в пул и удаление их из него

После создания пула можно добавить в него существующие базы данных или удалить их из пула, используя страницу **Эластичные базы данных** (перейдите в пул и щелкните ссылку **Эластичные базы данных** в разделе **Основное**).

- Щелкните **Добавить базы данных**, чтобы открыть список баз данных, которые можно добавить в пул.

    -или-

- Выберите базы данных, которые нужно удалить из пула, и щелкните **Удалить базы данных**.

![рекомендуемый пул](./media/sql-database-elastic-pool-portal/add-remove-databases.png)

## Создание базы данных в пуле

Создайте новую базу данных в пуле: перейдите в нужный пул и щелкните **Создать базу данных**.

В базе данных SQL уже настроен нужный сервер и пул. Вам нужно только ввести имя и выбрать нужные параметры базы данных, а затем нажать кнопку **ОК**, чтобы создать новую базу данных.


   ![создание эластичной базы данных](./media/sql-database-elastic-pool-portal/create-database.png)



## Мониторинг пула эластичных баз данных и управление им

Создав пул эластичных баз данных, вы можете отслеживать его и управлять им прямо на портале. Для этого нужно открыть список существующих пулов и выбрать нужный пул.

В созданном пуле появляется ряд возможностей.

- **Настройка пула** позволяет изменять настройки eDTU для пула и для одной базы данных.
- **Создать задание**. Позволяет управлять базами данных в пуле путем создания эластичных заданий. Эластичные задания позволяют выполнять скрипты Transact-SQL в любом количестве баз данных в пуле. Дополнительные сведения см. в статье [Обзор службы заданий эластичной базы данных](sql-database-elastic-jobs-overview.md).
- **Управление заданиями**. Позволяет администрировать существующие эластичные задания.
- Щелкните **Создать базу данных**, чтобы создать базу данных в пуле.
- Чтобы указать для пула значения eDTU и ГБ, щелкните ссылку для настройки параметров пула.
- Чтобы добавить базы данных в пул или удалить их оттуда, щелкните ссылку на базы данных.
- Чтобы указать для эластичных баз данных в пуле минимальное и максимальное значение eDTU, щелкните ссылку для настройки параметров базы данных. 

![Мониторинг эластичного пула](./media/sql-database-elastic-pool-portal/pool-tasks.png)


При выборе существующего пула появляются сведения об использовании его ресурсов. Щелкните диаграмму **Использование ресурсов**, чтобы открыть колонку **Метрика**. Здесь можно настроить отображение диаграммы и задать параметры оповещений.

![Мониторинг эластичного пула][4] ![Использование ресурсов][6]

Щелкните **Изменить диаграмму** и добавьте нужные параметры. Это позволит быстро просматривать данные телеметрии для этого пула.


![Изменение диаграммы][7]


## Дальнейшие действия
После создания пула эластичных баз данных вы можете управлять эластичными базами данных в пуле путем создания заданий обработки эластичных баз данных. Эластичные задания позволяют легко и быстро выполнять скрипты Transact-SQL в любом количестве баз данных в пуле. Дополнительные сведения можно узнать в статье [Обзор службы заданий эластичной базы данных](sql-database-elastic-jobs-overview.md).



## Дополнительные ресурсы

- [Эластичный пул баз данных SQL](sql-database-elastic-pool.md)
- [Создание эластичного пула баз данных SQL с помощью PowerShell](sql-database-elastic-pool-powershell.md)
- [Создание Базы данных SQL и управление ей с помощью C#](sql-database-client-library.md)
- [Справка по эластичным базам данных](sql-database-elastic-pool-reference.md)


<!--Image references-->
[4]: ./media/sql-database-elastic-pool-portal/monitor-elastic-pool.png
[6]: ./media/sql-database-elastic-pool-portal/metric.png
[7]: ./media/sql-database-elastic-pool-portal/edit-chart.png
[10]: ./media/sql-database-elastic-pool-portal/star.png

<!---HONumber=AcomDC_0204_2016-->