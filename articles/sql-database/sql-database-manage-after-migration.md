---
title: "Управление базой данных после ее переноса в базу данных SQL Azure | Документация Майкрософт"
description: "Сведения о том, как управлять базой данных после ее переноса в базу данных SQL Azure."
services: sql-database
documentationcenter: 
author: joesackmsft
manager: jhubbard
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: migrate
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: Inactive
ms.date: 10/14/2016
ms.author: Joe.Sack
ms.suite: SQL
ms.prod_service: sql-database
ms.component: management
ms.openlocfilehash: 663ab4aaf229f8a88d1116b34ccb74450aa66c9d
ms.sourcegitcommit: e5355615d11d69fc8d3101ca97067b3ebb3a45ef
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/31/2017
---
# <a name="how-should-i-manage-my-azure-sql-database-after-migration"></a>Как управлять базой данных после ее переноса в базу данных SQL Azure

*Часто задаваемые вопросы по управлению базами данных SQL Azure*

Предположим, вы недавно переместили базы данных SQL Server в базу данных SQL Azure или планируете сделать это вскоре. Что же делать после перемещения? Учитывая, что база данных SQL — это *платформа как услуга*, корпорация Майкрософт осуществляет управление несколькими областями от вашего имени. Но как именно это меняет действия вашей компании в таких ключевых областях, как безопасность, непрерывность бизнес-процессов, обслуживание базы данных, настройка производительности, мониторинг и многих других? 

Цель этой статьи — предоставить краткое руководство по организации ресурсов и рекомендации по управлению базами данных SQL. Эта статья охватывает такие основные области, как непрерывность бизнес-процессов, безопасность, обслуживание и мониторинг баз данных, производительность и перемещение данных. Мы рассмотрим ключевые области, которые отличаются для SQL Server и базы данных SQL, а также оптимальные методы работы, которые помогут увеличить преимущества и минимизировать риски. 

## <a name="manage-business-continuity-after-migration"></a>Управление непрерывностью бизнес-процессов после переноса

### <a name="how-do-i-create-and-manage-backups-on-sql-database"></a>Как создавать резервные копии в базе данных SQL и управлять ими? 
База данных SQL автоматически создает резервные копии баз данных и предоставляет возможность восстановления на любой момент времени в течение периода хранения. Срок хранения составляет 35 дней для баз данных уровня "Стандартный" и "Премиум" и 7 дней для баз данных уровня "Базовый". Кроме того, функция долгосрочного хранения позволяет хранить файлы резервных копий в течение более длительного периода (до 10 лет) и восстанавливать данные из этих резервных копий в любой момент. К тому же резервные копии базы данных геореплицируются для обеспечения возможности восстановления в любом регионе в случае аварии или региональной катастрофы. Дополнительные сведения см. в статье [Обзор обеспечения непрерывности бизнес-процессов с помощью базы данных SQL Azure](sql-database-business-continuity.md).

### <a name="how-do-i-ensure-business-continuity-in-the-event-of-a-datacenter-level-disaster-or-a-regional-catastrophe"></a>Как обеспечить непрерывность бизнес-процессов в случае аварии на уровне центра обработки данных или региональной катастрофы? 

Резервные копии базы данных геореплицируются для обеспечения возможности восстановления в любом регионе в случае аварии или региональной катастрофы. Дополнительные сведения см. в статье [Обзор обеспечения непрерывности бизнес-процессов с помощью базы данных SQL Azure](sql-database-business-continuity.md). Кроме того, база данных SQL предоставляет возможность поддерживать базы данных-получатели с активной георепликацией в другом регионе. Их настройка в группе автоматической отработки отказа обеспечивает автоматическую отработку отказа баз данных в случае сбоя. Если группа автоматической отработки отказа не настроена, ваше приложение должно активно отслеживать возникновение сбоя и инициировать переход на другой ресурс. 
### <a name="sql-server-provided-me-readable-secondary-replicas-can-i-access-the-secondaries-on-sql-database"></a>SQL Server предоставил мне вторичные реплики для чтения. Могу ли я получить доступ к ним в базе данных SQL? 

Да, для создания вторичных реплик для чтения используется функция активной георепликации. 

### <a name="how-does-my-disaster-recovery-plan-change-from-on-premise-to-sql-database"></a>Чем план аварийного восстановления отличается для локальной базы данных и базы данных SQL? 
Реализациям SQL Server требуется активное управление резервными копиями с помощью таких функций, как отказоустойчивая кластеризация, зеркальное отображение баз данных, репликация, доставка журналов или просто стандартное резервное копирование в файлы BACPAC. Однако в базе данных SQL резервными копиями полностью управляет корпорация Майкрософт, а вы можете настраивать планы резервного копирования и аварийного восстановления с помощью нескольких щелчков мыши на портале Azure (или нескольких команд в PowerShell). ‌
### <a name="in-the-event-of-disaster-how-do-i-recover-my-databases"></a>Как в случае аварии восстановить мои базы данных? 
База данных SQL автоматически позволяет восстановить базы данных на любой момент времени за последние 35 дней. Это удобно при потере данных или в случае аварии, связанной с приложением. 

В случае возникновения региональной катастрофы, если настроены геореплицированные базы данных-получатели, вы можете выполнить восстановление из них в другом регионе. Для доступа к приложениям в режиме реального времени вы можете выполнить отработку отказа в базу данных-получатель геореплицируемых данных в другом регионе вручную. В качестве альтернативы, если у вас настроена группа автоматической отработки отказа, этот переход на другой ресурс автоматически выполняется в случае аварии. Если у вас не настроена геореплицированная база данных-получатель, вы можете восстановить свои базы данных из автоматически реплицируемых файлов резервных копий (встроенная функция, не требующая конфигурации) с относительно большим временем восстановления (целевое время восстановления — 12 часов) и в случае аварии возможна потеря данных за час или менее. 

### <a name="are-the-failovers-to-secondary-transparent-how-does-my-application-handle-database-failovers"></a>Отработки отказа в базу данных-получатель являются прозрачными? Как приложение обрабатывает отработки отказа баз данных? 
Если у вас настроены группы автоматической отработки отказа, то отработка отказа в базу данных-получатель является прозрачной. Однако если вы этого не сделали, то ваше приложение должно иметь логику для контроля доступности первичной реплики, а затем вручную перейти на вторичную. 
 
## <a name="manage-security-after-migration"></a>Управление безопасностью после переноса

### <a name="how-can-i-restrict-access-to-my-sql-database"></a>Как ограничить доступ к базе данных SQL? 
 
Существует несколько способов блокировки подключения к базам данных SQL. 
1. Ограничение интернет-трафика через Express Route предоставляет выделенное оптоволоконное подключение к сети Azure, чтобы данные не передавались через Интернет. Можно также настроить межрегиональное подключение с помощью Express Route. По следующим ссылкам предоставлено более подробное описание Express Route: 
 - [Обзор ExpressRoute](../expressroute/expressroute-introduction.md)
 - [Предварительные требования](../expressroute/expressroute-prerequisites.md) 
 - [Рабочие процессы](../expressroute/expressroute-workflows.md) 
 
2. Выберите ресурсы, которые будут подключаться к базе данных SQL. 

   По умолчанию для базы данных SQL настроен параметр Allow all Azure services (Разрешить все службы Azure). Это означает, что все виртуальные машины в Azure могут подключаться к базе данных.  Все имена для входа по-прежнему должны проходить проверку подлинности. Если вы не хотите, чтобы ваша база данных была доступна для всех IP-адресов Azure, вы можете отключить соответствующий параметр и использовать [конечные точки службы виртуальной сети](sql-database-vnet-service-endpoint-rule-overview.md) для предоставления входящего доступа к базе данных только для ресурсов Azure внутри подсети виртуальной сети Azure. 

   ![Конечные точки службы виртуальной сети](./media/sql-database-manage-after-migration/vnet-service-endpoints.png) 

   Как альтернативный вариант, можно подготовить [зарезервированные IP-адреса](../virtual-network/virtual-networks-reserved-public-ip.md) для ваших виртуальных машин и разрешить эти IP-адреса виртуальных машин в параметрах брандмауэра сервера. (См. снимок экрана в качестве примера для выполнения на портале Azure.) Назначая зарезервированные IP-адреса, вы избавляетесь от необходимости обновления правил брандмауэра при изменении IP-адресов. 

3. Не открывайте портал 1433 за пределами Azure.

   Запустите SSMS в Azure с помощью [удаленного приложения Azure RemoteApp](https://www.microsoft.com/cloud-platform/azure-remoteapp-client-apps). Для этого не требуется открывать исходящие подключения к порту 1433. IP-адрес является статичным, поэтому база данных может быть открыта только для RemoteApp. Удаленное приложение поддерживает многофакторную проверку подлинности (MFA) и является многопользовательским. 

### <a name="what-authentication-methods-are-offered-in-sql-database"></a>Какие методы проверки подлинности доступны в базе данных SQL?

Основными методами проверки подлинности, доступными в базе данных SQL и хранилище данных SQL, являются аутентификация Azure Active Directory и аутентификация SQL. Azure Active Directory (AD) — это централизованная служба управления удостоверениями и доступом, а SQL является одной из многих служб Azure, интегрированных с Azure AD. Преимущество централизованной управляемой службы заключается в том, что учетные данные пользователя распределяются между всеми службами Azure, которые используются для более простой аутентификации. Это также позволяет базе данных SQL и хранилищу данных SQL предлагать многофакторную проверку подлинности и гостевые учетные записи пользователей в домене Azure AD. 

При наличии Active Directory в локальной среде вы можете создать федерацию каталога с Azure Active Directory, чтобы расширить свой каталог до Azure. 


|||
|---|---|
| Если же...|База данных SQL Azure и хранилище данных SQL Azure|
| Предпочитаете не использовать Azure Active Directory (AD) в Azure|Используйте [проверку подлинности SQL](sql-database-security-overview.md).|
| Использовали AD на локальном сервере SQL Server|[Создайте федерацию AD с Azure AD](../active-directory/connect/active-directory-aadconnect.md) и используйте проверку подлинности Azure AD. В таком случае можно использовать единый вход.|
| Требуется принудительная многофакторная проверка подлинности|Требуйте выполнения многофакторной проверки подлинности в качестве политики с помощью [условного доступа Майкрософт](sql-database-conditional-access.md) и используйте [универсальную проверку подлинности Azure AD с поддержкой многофакторной проверки подлинности](sql-database-ssms-mfa-authentication.md).|
| Имеете гостевые учетные данные из учетных записей Майкрософт (live.com, outlook.com) или других доменов (gmail.com)|Используйте [универсальную проверку подлинности Azure AD](sql-database-ssms-mfa-authentication.md) в хранилище базы данных и в базе данных SQL, которая использует [службу совместной работы Azure AD B2B](../active-directory/active-directory-b2b-what-is-azure-ad-b2b.md).|
| Входите в систему Windows с помощью учетных данных Azure Active Directory из федеративного домена|Используйте [встроенную проверку подлинности Azure AD](sql-database-aad-authentication-configure.md).|
| Входите в систему Windows с помощью учетных данных из домена, который не включен в федерацию с Azure|Используйте [проверку пароля Azure AD](sql-database-aad-authentication-configure.md).|
| Имеете службы среднего уровня, для которых требуется подключение к базе данных SQL Azure или хранилищу данных|Используйте [проверку подлинности по маркерам Azure AD](sql-database-aad-authentication-configure.md).
|||

### <a name="how-can-i-limit-access-to-sensitive-data-in-my-databases-from-the-application-side"></a>Как ограничить доступ к конфиденциальным данным в моих базах данных со стороны приложений? 

Чтобы предотвратить несанкционированный доступ к конфиденциальным данным, в базе данных SQL доступно несколько вариантов: 

- [Always Encrypted](/sql/relational-databases/security/encryption/always-encrypted-database-engine) — это форма шифрования на стороне клиента, которая шифрует конфиденциальные столбцы в вашей базе данных (поэтому они находятся в зашифрованном виде для администраторов баз данных и неавторизованных пользователей). Ключ для постоянного шифрования хранится на стороне клиента, поэтому только авторизованные клиенты могут расшифровывать конфиденциальные столбцы. Функция Always Encrypted поддерживает сопоставления равенства, поэтому администраторы баз данных могут продолжать запрашивать зашифрованные столбцы как часть своих команд SQL. Она может использоваться с различными вариантами хранения ключей, например с [Azure Key Vault](sql-database-always-encrypted-azure-key-vault.md), хранилищем сертификатов Windows и локальными аппаратными модулями безопасности.
- [Динамическое маскирование данных](sql-database-dynamic-data-masking-get-started.md) — это функция маскирования данных, которая ограничивает доступ к конфиденциальным данным, маскируя их от непривилегированных пользователей на уровне приложения. Вы определяете правило маскирования, которое может создавать шаблон маскирования (например, показывать только последние 4 цифры национального идентификатора и отмечать остальное как X) и определять, какие пользователи могут быть исключены из правила маскирования.
- [Безопасность на уровне строк](/sql/relational-databases/security/row-level-security) позволяет управлять доступом к строкам в таблице базы данных в зависимости от характеристик пользователя, выполняющего запрос (например, членство в группе или контекст выполнения). Ограничение доступа выполняется на уровне базы данных вместо уровня приложения, чтобы упростить логику приложения. 

### <a name="what-encryption-options-do-i-have-in-sql-database-and-what-actors-does-the-encryption-protect-from"></a>Какие параметры шифрования есть в базе данных SQL и от каких субъектов защищает шифрование?
В базе данных SQL доступны три основные технологии шифрования: 
- [Always Encrypted](/sql/relational-databases/security/encryption/always-encrypted-database-engine) (которая упоминается в вопросе выше): выполняет сквозное шифрование конфиденциальных столбцов для защиты от несанкционированного доступа (от неавторизованных клиентов до физических дисков). Администраторы сервера и данных не могут видеть конфиденциальные данные, так как ключи шифрования хранятся в клиенте. 
- [Прозрачное шифрование данных ](/sql/relational-databases/security/encryption/transparent-data-encryption-azure-sql) (TDE): шифрование при хранении, которое выполняется на уровне базы данных и защищает файлы данных, файлы журналов и связанные с ними резервные копии от кражи физических носителей. Эта функция включена по умолчанию во всех новых базах данных.
 
  На рисунке ниже показаны общие сведения о технологиях шифрования.

   ![Общие сведения о шифровании](./media/sql-database-manage-after-migration/overview-encryption.png)

### <a name="how-should-i-manage-encryption-keys-in-the-cloud"></a>Как управлять ключами шифрования в облаке? 
Существуют возможности управления ключами и для Always Encrypted (шифрование на стороне клиента), и для прозрачного шифрования данных (шифрование при хранении). Рекомендуется регулярно менять ключи шифрования с частотой, которая соответствует как внутренним, так и нормативным требованиям.

- **Always Encrypted**: существует иерархия [с двумя ключами](/sql/relational-databases/security/encryption/overview-of-key-management-for-always-encrypted), при которой столбец с конфиденциальными данными шифруется с помощью ключа шифрования AES 256 (CEK), который, в свою очередь, зашифрован с помощью главного ключа столбца (CMK). Клиентские драйверы, предоставленные для Always Encrypted, не имеют ограничений на длину CMK.

  Зашифрованное значение CEK сохраняется в базе данных, а CMK хранится в хранилище доверенных ключей, таком как хранилище сертификатов Windows, Azure Key Vault или аппаратный модуль безопасности. 
  
  [CEK и CMK](/sql/relational-databases/security/encryption/rotate-always-encrypted-keys-using-powershell) можно менять. Замена CEK может быть трудоемкой в ​​зависимости от размера таблиц, содержащих зашифрованные столбцы. Так что очень тщательно планируйте замену CEK. С другой стороны, замена CMK не влияет на производительность базы данных и может выполняться с помощью отдельных ролей.

  На схеме ниже показаны варианты хранилища ключей для главных ключей столбца при использовании Always Encrypted. 

   ![Поставщики хранилища CMK для Always Encrypted](./media/sql-database-manage-after-migration/always-encrypted.png)

- **Прозрачное шифрование данных**. В TDE существует иерархия с двумя ключами. Данные в каждой пользовательской базе данных шифруются с помощью симметричного ключа шифрования AES-256 (DEK), уникального для базы данных, который, в свою очередь, зашифрован с помощью главного асимметричного ключа RSA 2048, уникального для сервера. 

  По умолчанию для удобства главным ключом для прозрачного шифрования данных управляет служба базы данных SQL. Если ваша организация хочет управлять главным ключом, можно использовать [Azure Key Vault](/sql/relational-databases/security/encryption/transparent-data-encryption-byok-azure-sql) в качестве хранилища ключей. 

  С помощью Azure Key Vault ваша организация берет на себя управление подготовкой, сменой ключей и разрешениями. [Смена или изменение типа главного ключа прозрачного шифрования данных](/sql/relational-databases/security/encryption/transparent-data-encryption-byok-azure-sql-key-rotation) выполняется быстро, так как повторно шифруется только ключ шифрования. 

  Для организаций, разделяющих роли безопасности и управления данными, администратор безопасности может предоставить материал для главного ключа TDE в Azure Key Vault и предоставить идентификатор ключа Azure Key Vault администратору базы данных для использования в режиме шифрования неактивных данных на сервере. 

## <a name="monitoring-and-compliance-after-migration"></a>Мониторинг и обеспечение соответствия требованиям после переноса

### <a name="how-do-i-monitor-database-activities-in-sql-database"></a>Как отслеживать действия базы данных в базе данных SQL?
В базу данных SQL встроены некоторые возможности мониторинга, которые отслеживают безопасность и другие события в базе данных:
- [Аудит SQL](sql-database-auditing.md) позволяет собирать журналы аудита событий базы данных в собственную учетную запись хранения Azure.
- [Система обнаружения угроз SQL](sql-database-threat-detection.md) позволяет обнаруживать подозрительные действия (попытка получить доступ к данным в базе данных, нарушить их безопасность или использовать их уязвимость). Функция обнаружения угроз в базе данных SQL выполняет множество наборов алгоритмов, которые обнаруживают потенциальные уязвимости и атаки путем внедрения кода SQL, а также аномальные шаблоны доступа к базе данных (например, доступ из необычного расположения или незнакомым субъектом). Сотрудники службы безопасности или другие назначенные администраторы получают уведомление по электронной почте, если в базе данных обнаружена угроза. Каждое уведомление содержит сведения о подозрительном действии и рекомендации по дальнейшему исследованию и снижению угрозы. 
- [Оценка уязвимостей SQL](sql-vulnerability-assessment.md) — это служба сканирования и отчетов базы данных, которая позволяет отслеживать состояние безопасности большого количества баз данных, а также определять риски безопасности и отклонения от заданных базовых показателей безопасности. После каждого сканирования предоставляется индивидуальный список практических действий и скрипты исправлений, а также отчет об оценке, который можно использовать для обеспечения соответствия. 
- [Приложение синхронизации безопасности SQL OMS](https://github.com/Microsoft/Azure-SQL-DB-auditing-OMS-integration) использует общедоступные API-адреса Operations Management Suite (OMS) для принудительной отправки журналов аудита SQL в OMS для анализа журналов и позволяет определять пользовательские оповещения безопасности, в частности: 
 - Плитка и панель мониторинга аудита базы данных SQL, которая обеспечивает понятный и согласованный отчет о действиях вашей базы данных. 
 - Служба SQL Log Analytics для анализа активности вашей базы данных и исследования расхождений и аномалий, которые могут указывать на предполагаемые нарушения безопасности.
 - Расширенные правила оповещений о наблюдаемых событиях, которые вызывают оповещения по электронной почте, оповещения веб-перехватчиков и Runbook службы автоматизации Azure (т. е. изменения пароля, нерабочие часы, определенные команды SQL).
- [Центр безопасности Azure](../security-center/security-center-intro.md) предоставляет возможности централизованного управления безопасностью рабочих нагрузок в Azure, в локальной среде и в других облаках. Вы можете проверить, настроена ли на всех ресурсах надлежащая защита базы данных SQL, такая как аудит и прозрачное шифрование данных, и создать политики на основе ваших собственных требований. 

### <a name="is-sql-database-compliant-with-any-regulatory-requirements-and-how-does-that-help-with-my-own-organizations-compliance"></a>Совместима ли база данных SQL с какими-либо нормативными требованиями и как это помогает соблюдению требований моей собственной организации? 
База данных SQL Azure совместима с рядом нормативных требований. Чтобы просмотреть последний набор выполненных требований, посетите [центр управления безопасностью Майкрософт](https://www.microsoft.com/trustcenter/compliance/complianceofferings). Перейдя к требованиям, важным для вашей организации, вы увидите, указана ли база данных SQL Azure в списке совместимых служб Azure. Важно отметить, что хотя база данных SQL Azure может быть сертифицирована как совместимая служба, это не гарантирует автоматическое соответствие нормативным требованиям вашей организации. 

## <a name="database-maintenance-and-monitoring-after-migration"></a>Обслуживание базы данных и мониторинг после переноса

### <a name="how-do-i-monitor-growth-in-data-size-and-resource-utilization"></a>Как отслеживать рост размера данных и использование ресурсов?

- Вы можете просмотреть метрики мониторинга касательно размера базы данных и использования ресурсов на диаграмме "Мониторинг" на портале Azure. 

  ![Диаграмма мониторинга](./media/sql-database-manage-after-migration/monitoring-chart.png)

- Чтобы получить более глубокое представление и детальные сведения о запросах, вы можете использовать инструмент "Анализ производительности запросов", доступный на портале Azure. Для этого нужно активировать в базе данных хранилище запросов.

  ![Анализ производительности запросов](./media/sql-database-manage-after-migration/query-performance-insight.png)

- Кроме того, вы можете просмотреть метрики с помощью динамического административного представления (DMV): [sys.dm_db_resource_stats](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-resource-stats-azure-sql-database) и [sys.resource_stats](/sql/relational-databases/system-catalog-views/sys-resource-stats-azure-sql-database). 

### <a name="how-often-do-i-need-to-run-consistency-checks-like-dbcccheckdb"></a>Как часто требуется запускать проверку согласованности, например DBCC_CHECKDB?
DBCC_CHECKDB проверяет логическую и физическую целостность всех объектов в базе данных. Больше не требуется выполнять эти проверки, поскольку ими управляют службы Майкрософт в Azure. Дополнительные сведения см. в записи блога [Data Integrity in Azure SQL Database](https://azure.microsoft.com/blog/data-integrity-in-azure-sql-database/) (Целостность данных в базе данных SQL Azure).

## <a name="monitor-performance-and-resource-utilization-after-migration"></a>Мониторинг производительности и использования ресурсов после переноса

### <a name="how-do-i-monitor-performance-and-resource-utilization-in-azure-sql-database"></a>Как отслеживать производительность и использование ресурсов в базе данных SQL Azure?
Вы можете отслеживать производительность и использование ресурсов в базе данных SQL Azure следующими методами:

- **Портал Azure**. На портале можно отслеживать использование отдельной базы данных. Для этого нужно выбрать базу данных и щелкнуть диаграмму в области "Обзор". Вы можете настроить отображение на диаграмме нескольких показателей, включая процент использования CPU, процент DTU, процент данных операций ввода-вывода, процент сеансов и процент размера базы данных. 
  ![использование ресурсов](./media/sql-database-manage-after-migration/resource-utilization.png)

  Из этой диаграммы можно также настроить оповещения для ресурса. Эти оповещения позволяют реагировать на состояние ресурсов следующим образом: отправка сообщения электронной почты, запись в конечную точку HTTPS/HTTP или выполнение действия. Дополнительные сведения см. в статье [Мониторинг производительности базы данных в базе данных SQL Azure](sql-database-single-database-monitor.md).

- **Представления**. Вы можете запросить динамическое административное представление [sys.dm_db_resource_stats](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-resource-stats-azure-sql-database) для возврата истории о статистике потребления ресурсов за последний час и представления системного каталога [sys.resource_stats](/sql/relational-databases/system-catalog-views/sys-resource-stats-azure-sql-database) для возврата истории за последние 14 дней. 

- **Анализ производительности запросов**. [Этот инструмент](sql-database-query-performance.md) позволяет просмотреть историю наиболее ресурсоемких и длительных запросов для конкретной базы данных. Для этой функции требуется включить [хранилище запросов](/sql/relational-databases/performance/monitoring-performance-by-using-the-query-store) в базе данных.

- **Аналитика SQL Azure (предварительная версия) в службе Log Analytics**. [Azure Log Analytics](../log-analytics/log-analytics-azure-sql.md) позволяет собирать и визуализировать ключевые метрики производительности SQL Azure, поддерживает до 150 000 баз данных SQL Azure и 5000 эластичных пулов SQL в каждой рабочей области. Ее можно использовать для отслеживания и получения уведомлений. Вы можете отслеживать метрики базы данных SQL Azure и эластичных пулов в нескольких подписках Azure и эластичных пулах и использовать их для выявлении проблем на каждом уровне стека приложений. 

### <a name="how-do-i-ensure-i-am-using-the-appropriate-service-tier-and-performance-level"></a>Как убедиться, что используется соответствующий уровень служб и производительности?
Отслеживайте динамические административные представления [sys.dm_db_resource_stats](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-resource-stats-azure-sql-database) и [sys.resource_stats](/sql/relational-databases/system-catalog-views/sys-resource-stats-azure-sql-database), чтобы знать уровень использования ЦП, операций ввода-вывода и потребления памяти. Вы также можете следить за потреблением ресурсов с помощью инструмента [анализ производительности запросов](sql-database-query-performance.md) базы данных SQL. Если вы постоянно используете высокий процент доступных ресурсов, вам следует подумать о переходе на более высокий уровень производительности в пределах существующего уровня обслуживания или перейти на более высокий уровень обслуживания. И наоборот, если вы постоянно используете низкий процент доступных ресурсов, следует подумать о переходе на более низкий уровень производительности или уровень обслуживания.

### <a name="i-am-seeing-performance-issues-how-does-my-azure-sql-database-troubleshooting-methodology-differ-from-sql-server"></a>Я испытываю проблемы с производительностью. Как отличаются методы устранения неполадок базы данных SQL Azure от SQL Server?
Большинство аспектов методологии устранения неполадок с производительностью аналогичны, за исключением некоторых различий. Например, при снижении общего уровня производительности отслеживайте динамические административные представления [sys.dm_db_resource_stats](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-resource-stats-azure-sql-database) и [sys.resource_stats](/sql/relational-databases/system-catalog-views/sys-resource-stats-azure-sql-database), чтобы понимать уровень использования ЦП, операций ввода-вывода и потребления памяти. Вам может потребоваться изменить уровень производительности или уровень обслуживания в соответствии с требованиями рабочей нагрузки.
Полный набор рекомендаций по решению проблем с производительностью см. в статье [Настройка производительности в базе данных SQL Azure](sql-database-performance-guidance.md). 

### <a name="do-i-need-to-maintain-indexes-and-statistics"></a>Нужно ли поддерживать индексы и статистику?
База данных SQL Azure не поддерживает индексы и статистику автоматически как часть службы. Вы несете ответственность за планирование обслуживания индексов и статистики. В следующей статье, "Функции службы базы данных SQL Azure", описаны несколько вариантов планирования работ по техническому обслуживанию базы данных SQL Azure.

## <a name="data-movement-after-migration"></a>Перемещение данных после переноса

### <a name="how-do-i-export-and-import-data-as-bacpac-files-from-azure-sql-database"></a>Как экспортировать и импортировать данные в виде файлов BACPAC из базы данных SQL Azure? 

- **Экспорт**. Вы можете экспортировать базу данных SQL Azure в виде файла BACPAC на портале Azure.

  ![Экспорт в виде файла BACPAC](./media/sql-database-export/database-export.png)

- **Импорт**. Вы можете импортировать файл BACPAC в базу данных с помощью портала Azure.

  ![Импорт файла BACPAC](./media/sql-database-import/import.png)

### <a name="how-do-i-synchronize-data-between-azure-sql-database-sql-server-2016--2012"></a>Как синхронизировать данные между базой данных SQL Azure и SQL Server 2016/2012?
Функция [синхронизации данных](sql-database-sync-data.md) позволяет синхронизировать данные в двух направлениях между несколькими локальными базами данных SQL Server и базой данных SQL Azure. Однако, так как это основано на триггерах, гарантируется окончательная согласованность (без потери данных), но не гарантируется согласованность транзакций. 

## <a name="next-steps"></a>Дальнейшие действия
[Функции службы базы данных SQL Azure](sql-database-technical-overview.md)
