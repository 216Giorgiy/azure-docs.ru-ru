---
title: 'Служба Базы данных SQL: модель на основе виртуальных ядер | Документация Майкрософт'
description: Модель приобретения на основе виртуальных ядер позволяет независимо масштабировать вычислительные ресурсы и ресурсы хранилища, обеспечивать производительность на уровне локальной среды и оптимизировать затраты.
services: sql-database
ms.service: sql-database
ms.subservice: ''
ms.custom: ''
ms.devlang: ''
ms.topic: conceptual
author: CarlRabeler
ms.author: carlrab
ms.reviewer: sashan, moslake
manager: craigg
ms.date: 11/27/2018
ms.openlocfilehash: 4aaaf2e7a918ab91aebd1e1f1f6d166d6cadf19a
ms.sourcegitcommit: c2e61b62f218830dd9076d9abc1bbcb42180b3a8
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/15/2018
ms.locfileid: "53437074"
---
# <a name="vcore-service-tiers-azure-hybrid-benefit-and-migration"></a>Уровни служб на основе виртуальных ядер, Преимущество гибридного использования Azure и миграция

Модель приобретения на основе виртуальных ядер позволяет независимо масштабировать вычислительные ресурсы и ресурсы хранилища, обеспечивать производительность на уровне локальной среды и оптимизировать затраты. Она также позволяет выбрать поколение аппаратного обеспечения:

- 4-е поколение — до 24 логических объектов ЦП на базе процессоров Intel E5-2673 v3 (Haswell) 2,4 ГГц, виртуальное ядро = 1 PP (физическое ядро), 7 ГБ на ядро, подключенные SSD
- 5-е поколение — до 80 логических объектов ЦП на базе процессоров Intel E5-2673 V4 (Broadwell) 2,3 ГГц, виртуальное ядро = 1 LP (hyper-thread), 5,5 ГБ на ядро, быстрый накопитель SSD eNVM

Модель виртуального ядра также позволяет использовать [Преимущество гибридного использования Azure для SQL Server](https://azure.microsoft.com/pricing/hybrid-benefit/), чтобы добиться снижения затрат.

> [!NOTE]
> Дополнительные сведения об уровнях служб на основе DTU см. в статье [Выбор уровня служб на основе DTU, объема вычислительных ресурсов и ресурсов хранилища](sql-database-service-tiers-dtu.md). Дополнительные сведения об уровнях служб на основе DTU и на основе виртуальных ядер см. в статье [Ресурсы и модели приобретения для базы данных SQL Azure](sql-database-service-tiers.md).

## <a name="service-tier-characteristics"></a>Характеристики уровней служб

Модель виртуального ядра обеспечивает два уровня служб: общего назначения и критически важный для бизнеса. Уровни служб отличаются диапазоном объемов вычислительных ресурсов, структурой для обеспечения высокого уровня доступности, способом обеспечения изоляции от сбоев, типами хранилища и диапазоном операций ввода-вывода. Клиент должен отдельно настроить необходимое хранилище и период хранения резервных копий. Необходимо отдельно настроить необходимое хранилище и период хранения резервных копий. На портале Azure перейдите на сервер (не в базу данных) и выберите "Managed Backups (Управляемые резервные копии) > Configure Policy (Настройка политики) > Конфигурация восстановления до точки во времени > 7–35 days (7–35 дней)".

В следующей таблице представлены различия между этими двумя уровнями:

||**Общего назначения**|**Критически важный для бизнеса**|**Гипермасштабирование (предварительная версия)**|
|---|---|---|---|
|Оптимально для|Большинства рабочих нагрузок. Предлагает бюджетные сбалансированные и масштабируемые варианты ресурсов вычисления и хранилища.|Бизнес-приложений с высокими требованиями к операциям ввода-вывода. Предлагает самую высокую отказоустойчивость к сбоям благодаря использованию нескольких изолированных реплик.|Большинство рабочих нагрузок с требованиями к высокомасштабируемому хранилищу и масштабированию для чтения|
|Службы вычислений|4-е поколение: от 1 до 24 виртуальных ядер<br/>5-е поколение: от 1 до 80 виртуальных ядер|4-е поколение: от 1 до 24 виртуальных ядер<br/>5-е поколение: от 1 до 80 виртуальных ядер|4-е поколение: от 1 до 24 виртуальных ядер<br/>5-е поколение: от 1 до 80 виртуальных ядер|
|Память|4-е поколение: 7 ГБ на ядро<br>5-е поколение: 5,1 ГБ на ядро | 4-е поколение: 7 ГБ на ядро<br>5-е поколение: 5,1 ГБ на ядро |4-е поколение: 7 ГБ на ядро<br>5-е поколение: 5,1 ГБ на ядро|
|Хранилище|Используется [удаленное хранилище ценовой категории "Премиум"](../virtual-machines/windows/premium-storage.md):<br/>Отдельная база данных: От 5 ГБ до 4 ТБ<br/>Управляемый экземпляр: от 32 ГБ до 8 ТБ |Используется локальное хранилище на SSD-накопителях:<br/>Отдельная база данных: от 5 ГБ до 1 ТБ<br/>Управляемый экземпляр: от 32 ГБ до 4 ТБ |Гибкое, при необходимости автоматическое увеличение хранилища. Поддерживает хранилища размером до 100 ТБ и более. Локальное хранилище на SSD-накопителях для кэша локального буферного пула и локального хранилища данных. Удаленное хранилище Azure как окончательное долгосрочное хранилище данных. |
|Пропускная способность ввода-вывода (приблизительно)|Отдельная база данных: 500 операций ввода-вывода в секунду на виртуальное ядро с максимальным количеством 7000</br>Управляемый экземпляр: Зависит от [размера файла](../virtual-machines/windows/premium-storage-performance.md#premium-storage-disk-sizes)|5 000 операций ввода-вывода в секунду на виртуальное ядро с максимальным количеством 200 000|ПОДЛЕЖИТ УТОЧНЕНИЮ|
|Доступность|1 реплика, отсутствие возможности масштабирования для чтения|3 реплики, 1 [реплика чтения и масштабирования](sql-database-read-scale-out.md),<br/>Высокая доступность, избыточная в пределах зоны|?|
|Резервные копии|[RA-GRS](../storage/common/storage-designing-ha-apps-with-ragrs.md), 7–35 дней (7 дней по умолчанию)|[RA-GRS](../storage/common/storage-designing-ha-apps-with-ragrs.md), 7–35 дней (7 дней по умолчанию)|Резервное копирование на основе моментальных снимков в удаленном хранилище Azure и быстрое восстановление на основе этих моментальных снимков. Резервное копирование выполняется практически мгновенно и не влияет на производительность операций ввода-вывода службы вычислений. Восстановление выполняются очень быстро и поэтому не зависит от масштаба операцией с данными (занимает минуты, а не часы или дни).|
|В памяти|Не поддерживается|Поддерживаются|Не поддерживается|
|||

> [!NOTE]
> Вы можете получить бесплатную базу данных SQL Azure с уровнем служб "Базовый" в сочетании с бесплатной учетной записью Azure для работы с Azure. Сведения см. в разделе [Создание управляемой облачной базы данных с помощью бесплатной учетной записи Azure](https://azure.microsoft.com/free/services/sql-database/).

- Дополнительные сведения см. в статье [Ограничения ресурсов для отдельной базы данных в Базе данных SQL Azure при использовании модели приобретения на основе виртуальных ядер](sql-database-vcore-resource-limits-single-databases.md) и в разделе [Модель покупки на основе числа виртуальных ядер](sql-database-managed-instance.md#vcore-based-purchasing-model).
- Дополнительные сведения об уровнях служб см. в статье [Уровни служб общего назначения и "Критически важный для бизнеса"](sql-database-service-tiers-general-purpose-business-critical.md).
- Дополнительные сведения об уровне служб "Гипермасштабирование" см. в статье [Уровень службы "Гипермасштабирование" размером до 100 ТБ (предварительная версия)](sql-database-service-tier-hyperscale.md).  

> [!IMPORTANT]
> Если вам требуется меньше одного виртуального ядра емкости вычислительных ресурсов, используйте модель приобретения на основе единиц DTU.

См. [часто задаваемые вопросы о службе "База данных SQL"](sql-database-faq.md).

## <a name="azure-hybrid-benefit"></a>Преимущество гибридного использования Azure

В модели приобретения на основе виртуальных ядер можно обменять имеющиеся лицензии, чтобы получить сниженные тарифы на Базу данных SQL при использовании программы [Преимущества гибридного использования Azure для SQL Server](../virtual-machines/windows/hybrid-use-benefit-licensing.md). При этом благодаря локальным лицензиям SQL Server и подписке Software Assurance вы сможете сэкономить до 30 % на базу данных SQL Azure.

![цены](./media/sql-database-service-tiers/pricing.png)

## <a name="migration-from-dtu-model-to-vcore-model"></a>Переход с модели DTU на модель с виртуальными ядрами

### <a name="migration-of-a-database"></a>Миграция базы данных

Миграция базы данных из модели приобретения на основе единиц передачи данных в модель приобретения на основе виртуальных ядер аналогична повышению или понижению уровня между базами данных уровня "Стандартный" и "Премиум" в модели приобретения на основе единиц передачи данных.

### <a name="migration-of-databases-with-geo-replication-links"></a>Перемещение баз данных со связями георепликации

Переход с модели на основе единиц DTU на модель на основе виртуальных ядер аналогичен повышению или понижению уровня связей георепликации между базами данных уровня "Стандартный" и "Премиум". При этом не нужно завершать георепликацию, однако пользователь должен соблюдать правила последовательности. При повышении сначала повысьте уровень производительности базы данных-получателя, а затем — уровень базы данных-источника. При понижении следует действовать в обратном порядке: сначала нужно понизить уровень производительности базы данных-источника, а после этого — базы данных-получателя.

При использовании георепликации между двумя эластичными пулами рекомендуем указать один пул как первичный, а другой — как вторичный. В этом случае при перемещении эластичных пулов следует учитывать такую конфигурацию.  Однако технически возможно, что эластичный пул содержит как первичные, так и вторичные базы данных. В таком случае для правильного перемещения вы должны рассматривать пул с более высоким показателем использования как "первичный" и соответствующим образом следовать правилам последовательности.  

В следующей таблице приведены рекомендации для конкретных сценариев перемещения:

|Текущий уровень служб|Целевой уровень служб|Тип перемещения|Действия пользователя|
|---|---|---|---|
|Стандартная|Универсальные|Горизонтальный|Можно выполнять перемещение в любом порядке, но необходимо обеспечить соответствующий размер виртуального ядра*|
|Премиум|Критически важный для бизнеса|Горизонтальный|Можно выполнять миграцию в любом порядке, но необходимо обеспечить соответствующий размер виртуального ядра*|
|Стандартная|Критически важный для бизнеса|Обновление|Сначала необходимо перенести базу данных-получатель|
|Критически важный для бизнеса|Стандартная|Понижение уровня|Сначала необходимо перенести базу данных-источник|
|Премиум|Универсальные|Понижение уровня|Сначала необходимо перенести базу данных-источник|
|Универсальные|Премиум|Обновление|Сначала необходимо перенести базу данных-получатель|
|Критически важный для бизнеса|Универсальные|Понижение уровня|Сначала необходимо перенести базу данных-источник|
|Универсальные|Критически важный для бизнеса|Обновление|Сначала необходимо перенести базу данных-получатель|
||||

\* Для каждых 100 единиц DTU уровня "Стандартный" и каждых 125 единиц DTU уровня "Премиум" требуется по меньшей мере 1 виртуальное ядро.

### <a name="migration-of-failover-groups"></a>Перемещение групп отработки отказа

Перемещение групп отработки отказа с несколькими базами данных требует отдельного перемещения базы данных-источника и базы данных-получателя. Во время этого процесса применяются те же рекомендации и правила последовательности. После перевода базы данных на модель на основе виртуальных ядер в группе отработки отказа останутся те же параметры политики.

### <a name="creation-of-a-geo-replication-secondary"></a>Создание базы данных-получателя георепликации

Вы можете создать базу данных-получателя георепликации, используя тот же уровень служб, что и у базы данных-источника. Для базы данных с высокой скоростью создания журналов рекомендуется создавать базу данных-получатель с таким же объемом вычислительных ресурсов, как у базы данных-источника. Если вы создаете базу данных-получатель георепликации в эластичном пуле для отдельной базы данных-источника, рекомендуем настроить для пула параметр `maxVCore`, который соответствует объему вычислительных ресурсов базы данных-источника. При создании базы данных-получателя георепликации в одном эластичном пуле для базы данных-источника в другом эластичном пуле рекомендуется настроить для пулов одинаковые параметры `maxVCore`.

### <a name="using-database-copy-to-convert-a-dtu-based-database-to-a-vcore-based-database"></a>Использование копии базы данных для перевода базы данных с модели на основе единиц DTU на модель на основе виртуальных ядер

Вы можете скопировать любую базу данных с объемом вычислительных ресурсов на основе DTU в базу данных с объемом вычислительных ресурсов на основе виртуальных ядер без ограничений или соблюдения специальной последовательности, если целевой объем вычислительных ресурсов поддерживает максимальный размер базы данных-источника. Это связано с тем, что копия базы данных создает моментальный снимок данных на момент начала операции копирования и не выполняет синхронизацию данных между источником и целевым объектом.

## <a name="next-steps"></a>Дополнительная информация

- Дополнительные сведения о конкретных объемах вычислительных ресурсов и доступных размерах хранилища для отдельной базы данных см. в статье [Ограничения ресурсов для отдельной базы данных в Базе данных SQL Azure при использовании модели приобретения на основе виртуальных ядер](sql-database-vcore-resource-limits-single-databases.md#general-purpose-service-tier-storage-sizes-and-compute-sizes)
- Дополнительные сведения о конкретных объемах вычислительных ресурсов и доступных размерах хранилища для эластичных пулов см. в статье [Ограничения для эластичных пулов в службе "База данных SQL Azure" в модели приобретения на основе виртуальных ядер](sql-database-vcore-resource-limits-elastic-pools.md#general-purpose-service-tier-storage-sizes-and-compute-sizes).
