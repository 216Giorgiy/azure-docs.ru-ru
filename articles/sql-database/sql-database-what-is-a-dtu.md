---
title: 'База данных SQL: что такое DTU? | Документация Майкрософт'
description: Из этой статьи вы узнаете, что такое единица передачи данных в базе данных SQL Azure.
keywords: параметры базы данных, производительность базы данных
services: sql-database
author: CarlRabeler
manager: craigg
ms.service: sql-database
ms.custom: DBs & servers
ms.topic: article
ms.date: 04/01/2018
ms.author: carlrab
ms.openlocfilehash: 3fb0d0f73f475e246580f7ea6e4aea60b069c230
ms.sourcegitcommit: 870d372785ffa8ca46346f4dfe215f245931dae1
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/08/2018
ms.locfileid: "33894013"
---
# <a name="database-transaction-units-dtus-and-elastic-database-transaction-units-edtus"></a>Единицы транзакций базы данных (DTU) и единицы транзакций эластичной базы данных (eDTU)
Эта статья содержит информацию об обычных единицах передачи данных (DTU) и единицах передачи данных в эластичной базе данных (eDTU), а также о том, что происходит, когда достигается их максимальное количество. Более точные сведения о ценах см. на [странице с ценами на использование Базы данных SQL Azure](https://azure.microsoft.com/pricing/details/sql-database/single/).

## <a name="what-are-database-transaction-units-dtus"></a>Что такое единицы транзакций базы данных (DTU)?
Для одной базы данных SQL Azure с определенным уровнем производительности на [ уровне обслуживания ](sql-database-single-database-resources.md) Майкрософт гарантирует определенный уровень ресурсов (независимо от любой другой базы данных в облаке Azure) и обеспечивает предсказуемый уровень производительности. Объем ресурсов рассчитывается как количество единиц передачи данных или DTU и является комплексной оценкой вычислительных ресурсов, ресурсов хранилища и ресурсов ввода-вывода. Коэффициент этих ресурсов первоначально определялся по [тестовой рабочей нагрузке OLTP](sql-database-benchmark-overview.md), отражающей фактические рабочие нагрузки OLTP. Если рабочая нагрузка превышает объем любого из этих ресурсов, пропускная способность регулируется, что приводит к снижению производительности и простоям. Ресурсы, используемые вашей рабочей нагрузкой, не влияют на ресурсы, доступные для других баз данных SQL в облаке Azure, а ресурсы, используемые другими рабочими нагрузками, не влияют на ресурсы, доступные вашей базе данных SQL.

![ограничивающая рамка](./media/sql-database-what-is-a-dtu/bounding-box.png)

DTU лучше всего помогают определить относительный объем ресурсов баз данных SQL Azure с разными уровнями производительности и обслуживания. Например, повысить производительность базы данных (через удвоение DTU) означает удвоить количество ресурсов, доступных для этой базы данных. Например, база данных P11 уровня "Премиум" с 1750 единицами DTU обеспечивает в 350 раз больше вычислительной мощи, чем база данных уровня "Базовый" с 5 единицами DTU.  

Чтобы узнать, как используются ресурсы (DTU) в вашей рабочей нагрузке, см. статью [Анализ производительности запросов базы данных Azure SQL](sql-database-query-performance.md). После этого вы сможете:

- Выявлять запросы, максимально использующие ресурсы процессора, имеющие максимальную длительность или число выполнений, которые потенциально можно настроить, чтобы повысить производительность. Например, запрос на большое число операций ввода-вывода может выполняться быстрее за счет [методов оптимизации в памяти](sql-database-in-memory.md). Так вы сможете оптимизировать использование доступной памяти на определенном уровне обслуживания и производительности.
- Перейти к подробным сведениям о запросе, просмотреть его текст и журнал использования ресурсов.
- Получать доступ к рекомендациям по настройке производительности, отображающим действия [Помощника по базам данных SQL](sql-database-advisor.md).

Вы можете изменять [уровни обслуживания DTU](sql-database-service-tiers-dtu.md) в любое время. Это приведет лишь к минимальному простою приложения (обычно в среднем не более четырех секунд). Для многих организаций и приложений достаточно иметь возможность создавать и уменьшать или увеличивать производительность баз данных по запросу, особенно если закономерности использования базы данных относительно хорошо прогнозируются. Но если закономерности использования непредсказуемы, это может усложнить управление расходами и бизнес-моделью. В этом сценарии вы используете эластичный пул с определенным числом единиц eDTU, распределенных между несколькими базами данных в пуле.

![Общие сведения о базе данных SQL: единицы DTU отдельных баз данных по категориям и уровням](./media/sql-database-what-is-a-dtu/single_db_dtus.png)

## <a name="what-are-elastic-database-transaction-units-edtus"></a>Что такое единицы транзакций эластичной базы данных (eDTU)?
Вместо выделения определенного набора ресурсов (DTU) базе данных SQL, доступных вне зависимости от того, нужны они или нет, вы можете поместить базы данных в [эластичный пул](sql-database-elastic-pool.md) на сервере базы данных SQL, который распределяет пул ресурсов между этими базами данных. Общие ресурсы в эластичном пуле измеряются в эластичных единицах передачи данных или eDTU. Пулы эластичных баз данных обеспечивают простое и экономически выгодное решение для управления целевыми показателями производительности для нескольких баз данных с совершенно разными и непредсказуемыми моделями функционирования. Пул эластичных баз данных гарантирует, что ни одна из баз данных в пуле не использует все ресурсы и что каждой из них всегда доступен минимальный необходимый объем ресурсов. 

![Общие сведения о базе данных SQL: единицы eDTU по категориям и уровням](./media/sql-database-what-is-a-dtu/sqldb_elastic_pools.png)

Пулу предоставляется заданное количество единиц eDTU по фиксированной цене. Отдельным базам данных в пуле эластичных баз данных предоставляется возможность гибкого автоматического масштабирования в рамках заданных границ. Базы данных, на которые приходится значительная нагрузка, могут потреблять больше eDTU, чтобы обслужить имеющийся спрос. Базы данных с меньшей нагрузкой будут потреблять меньше eDTU. Базы данных без нагрузки не будут потреблять eDTU. Благодаря подготовке ресурсов для всего пула, а не одной базы данных, задачи управления упрощаются и вы можете спрогнозировать затраты на пул.

Добавить дополнительные единицы eDTU в имеющийся пул можно без простоя баз данных в пуле или снижения их производительности. Точно так же, если eDTU больше не нужны, их можно удалить из имеющегося пула в любой момент времени. Вы можете добавить базы данных в пул или удалить их либо ограничить количество eDTU, которые базы данных могут использовать в условиях интенсивной нагрузки, чтобы сохранить eDTU для остальных баз данных. Если у базы данных прогнозируемо низкие показатели использования ресурсов, ее можно переместить из пула и настроить в качестве отдельной базы данных с прогнозируемым объемом требуемых ресурсов.

## <a name="how-can-i-determine-the-number-of-dtus-needed-by-my-workload"></a>Как определить, сколько единиц DTU нужно для моей рабочей нагрузки
Если нужно перенести существующую локальную рабочую нагрузку или нагрузку виртуальной машины SQL Server в базу данных SQL Azure, вы можете приблизительно вычислить нужное количество единиц DTU с помощью [калькулятора DTU](http://dtucalculator.azurewebsites.net/) . Чтобы узнать, как используются ресурсы (DTU) в существующей рабочей нагрузке базы данных SQL Azure, и понять, как оптимизировать эту нагрузку, вы можете использовать [анализ производительности запросов к базе данных SQL](sql-database-query-performance.md). Кроме того, с помощью динамического административного представления [sys.dm_db_ resource_stats](https://msdn.microsoft.com/library/dn800981.aspx) можно просмотреть сведения об использовании ресурсов за последний час. Представление каталога [sys.resource_stats](http://msdn.microsoft.com/library/dn269979.aspx) содержит эти же сведения, но только за последние 14 дней, причем с менее точными средними значениями за пять минут.

## <a name="how-do-i-know-if-i-could-benefit-from-an-elastic-pool-of-resources"></a>Как понять, что мне нужен пул эластичных БД?
Пулы подходят для большого числа баз данных с конкретными закономерностями использования. Для заданной базы данных эта закономерность характеризуется низким средним использованием с относительно редкими пиками использования. База данных SQL автоматически оценивает историю использования ресурсов баз данных на существующем сервере баз данных SQL и рекомендует подходящую конфигурацию пула в портале Azure. Дополнительные сведения см. в статье [Когда следует использовать пул эластичных баз данных?](sql-database-elastic-pool.md)

## <a name="what-happens-when-i-hit-my-maximum-dtus"></a>Что происходит, когда количество единиц DTU становится максимальным?
Уровни производительности определяются и регулируются, чтобы обеспечить необходимые ресурсы для работы базы данных в условиях максимальной нагрузки, предусмотренной вашим уровнем обслуживания или производительности. Если ваша рабочая нагрузка достигнет предела по одному из показателей (ЦП, ввод-вывод данных, ввод-вывод журнала), вы продолжите получать ресурсы на максимально допустимом уровне, но может увеличиться задержка обработки запросов. Превышение одного из этих ограничений ведет не к возникновению ошибок, а к замедлению работы (за исключением случаев, когда работа идет настолько медленно, что время ожидания запросов начинает истекать). Когда количество параллельных пользовательских сеансов или запросов (рабочих потоков) достигает максимально допустимого значения, выводятся явные ошибки. Сведения об ограничениях на использование ресурсов, не связанных с ЦП, памятью, вводом-выводом данных и вводом-выводом журналов, см. в разделе [Ограничения ресурсов базы данных SQL Azure]( sql-database-dtu-resource-limits.md#what-happens-when-database-and-elastic-pool-resource-limits-are-reached).

## <a name="next-steps"></a>Дополнительная информация
* Ознакомьтесь со статьей о [модели приобретения на основе DTU](sql-database-service-tiers-dtu.md), чтобы получить сведения о единицах DTU и eDTU, доступных для отдельных баз данных и эластичных пулов, а также об ограничениях ресурсов, отличных от ресурсов ЦП, памяти, ввода-вывода данных и ввода-вывода журнала транзакций.
* Сведения о выделении ресурсов и уровнях обслуживания на основе виртуальных ядер см. в статье [Модель приобретения на основе виртуальных ядер (предварительная версия)](sql-database-service-tiers-vcore.md). 
* Чтобы понять, как используются единицы DTU в вашей среде, см. статью [Анализ производительности запросов базы данных SQL Azure](sql-database-query-performance.md).
* Чтобы понять методологию, лежащую в основе тестовой рабочей нагрузки OLTP, которая определяет наполнение единиц DTU, см. статью [Общие сведения об измерении производительности базы данных SQL Azure](sql-database-benchmark-overview.md).
