---
title: Ограничения ресурсов службы "База данных SQL Azure" в модели приобретения на основе виртуальных ядер | Документация Майкрософт
description: На этой странице описаны некоторые общие ограничения ресурсов для службы "База данных SQL Azure" в модели приобретения на основе виртуальных ядер.
services: sql-database
author: CarlRabeler
manager: craigg
ms.service: sql-database
ms.custom: DBs & servers
ms.topic: article
ms.date: 05/07/2018
ms.author: carlrab
ms.openlocfilehash: fc32ba4858e7be901d2cd4d773491247e9e0e672
ms.sourcegitcommit: d98d99567d0383bb8d7cbe2d767ec15ebf2daeb2
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/10/2018
ms.locfileid: "33942502"
---
# <a name="azure-sql-database-vcore-based-purchasing-model-limits-preview"></a>Ограничения для службы "База данных SQL Azure" в модели приобретения на основе виртуальных ядер (предварительная версия)

> [!IMPORTANT]
> Ограничения в модели приобретения на основе единиц DTU см. в [этой статье](sql-database-dtu-resource-limits.md).

## <a name="single-database-storage-sizes-and-performance-levels"></a>Отдельная база данных: размеры хранилища и уровни производительности

В следующих таблицах приведены доступные ресурсы для отдельных баз данных на каждом уровне служб и уровне производительности. Уровень служб, уровень производительности и объем хранилища для отдельной базы данных можно задать с помощью [портала Azure](sql-database-single-database-resources.md#manage-single-database-resources-using-the-azure-portal), [Transact-SQL](sql-database-single-database-resources.md#manage-single-database-resources-using-transact-sql), [PowerShell](sql-database-single-database-resources.md#manage-single-database-resources-using-powershell), [Azure CLI](sql-database-single-database-resources.md#manage-single-database-resources-using-the-azure-cli) или [REST API](sql-database-single-database-resources.md#manage-single-database-resources-using-the-rest-api).

### <a name="general-purpose-service-tier"></a>Уровень служб общего назначения

#### <a name="generation-4-compute-platform"></a>Вычислительная платформа 4-го поколения
|Уровень производительности|GP_Gen4_1|GP_Gen4_2|GP_Gen4_4|GP_Gen4_8|GP_Gen4_16|GP_Gen4_24
|:--- | --: |--: |--: |--: |--: |--: |
|Создание аппаратной части|4.|4.|4.|4.|4.|4.|
|Виртуальные ядра|1|2|4.|8|16|24|
|Память (ГБ)|7|14|28|56|112|168|
|Поддержка columnstore|Yes|Yes|Yes|Yes|Yes|Yes|
|Хранилище выполняющейся в памяти OLTP (ГБ)|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|
|Тип хранилища|Хранилище уровня "Премиум" (удаленное)|Хранилище уровня "Премиум" (удаленное)|Хранилище уровня "Премиум" (удаленное)|Хранилище уровня "Премиум" (удаленное)|Хранилище уровня "Премиум" (удаленное)|Хранилище уровня "Премиум" (удаленное)|
|Задержка ввода-вывода (приблизительно)|5–7 мс (запись)<br>5–10 мс (чтение)|5–7 мс (запись)<br>5–10 мс (чтение)|5–7 мс (запись)<br>5–10 мс (чтение)|5–7 мс (запись)<br>5–10 мс (чтение)|5–7 мс (запись)<br>5–10 мс (чтение)|5–7 мс (запись)<br>5–10 мс (чтение)|
|Максимальный размер данных (ГБ)|1024|1024|1536|3072|4096|4096|
|Максимальный размер журнала|307|307|461|922|1229|1229|
|Размер tempdb (ГБ)|32|64|128|256|384|384|
|Целевое число операций ввода-вывода в секунду (64 КБ)|500|1000|2000|4000|7000|7000|
|Максимальное количество одновременных рабочих ролей (запросов)|200|400|800|1600|3200|4800|
|Максимальное число одновременных сеансов|30 000|30 000|30 000|30 000|30 000|30 000|
|Количество реплик|1|1|1|1|1|1|
|Возможность развертывания Multi-AZ|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|000
|Горизонтальное масштабирование для чтения|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|
|Включенное хранилище резервных копий|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|
|||

#### <a name="generation-5-compute-platform"></a>Вычислительная платформа 5-го поколения
|Уровень производительности|GP_Gen5_2|GP_Gen5_4|GP_Gen5_8|GP_Gen5_16|GP_Gen5_24|GP_Gen5_32|GP_Gen5_48| GP_Gen5_80|
|:--- | --: |--: |--: |--: |---: | --: |--: |--: |--: |
|Создание аппаратной части|5|5|5|5|5|5|5|
|Виртуальные ядра|2|4.|8|16|24|32|48|80|
|Память (ГБ)|11|22|44|88|132|176|264|440|
|Поддержка columnstore|Yes|Yes|Yes|Yes|Yes|Yes|Yes|Yes|
|Хранилище выполняющейся в памяти OLTP (ГБ)|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|
|Тип хранилища|Хранилище уровня "Премиум" (удаленное)|Хранилище уровня "Премиум" (удаленное)|Хранилище уровня "Премиум" (удаленное)|Хранилище уровня "Премиум" (удаленное)|Хранилище уровня "Премиум" (удаленное)|Хранилище уровня "Премиум" (удаленное)|Хранилище уровня "Премиум" (удаленное)|Хранилище уровня "Премиум" (удаленное)|
|Задержка ввода-вывода (приблизительно)|5–7 мс (запись)<br>5–10 мс (чтение)|5–7 мс (запись)<br>5–10 мс (чтение)|5–7 мс (запись)<br>5–10 мс (чтение)|5–7 мс (запись)<br>5–10 мс (чтение)|5–7 мс (запись)<br>5–10 мс (чтение)|5–7 мс (запись)<br>5–10 мс (чтение)|5–7 мс (запись)<br>5–10 мс (чтение)|5–7 мс (запись)<br>5–10 мс (чтение)|
|Максимальный размер данных (ГБ)|1024|1024|1536|3072|4096|4096|4096|4096|
|Максимальный размер журнала|307|307|461|614|1229|1229|1229|1229|
|Размер tempdb (ГБ)|64|128|256|384|384|384|384|384|
|Целевое число операций ввода-вывода в секунду (64 КБ)|500|1000|2000|4000|6000|7000|7000|7000|
|Максимальное количество одновременных рабочих ролей (запросов)|200|400|800|1600|2400|3200|4800|8000|
|Максимальное число одновременных сеансов|30 000|30 000|30 000|30 000|30 000|30 000|30 000|30 000|
|Количество реплик|1|1|1|1|1|1|1|1|
|Возможность развертывания Multi-AZ|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|
|Горизонтальное масштабирование для чтения|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|
|Включенное хранилище резервных копий|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|
|||

### <a name="business-critical-service-tier"></a>Уровень служб "Критически важный для бизнеса"

#### <a name="generation-4-compute-platform"></a>Вычислительная платформа 4-го поколения
|Уровень производительности|BC_Gen4_1|BC_Gen4_2|BC_Gen4_4|BC_Gen4_8|BC_Gen4_16|BC_Gen4_24|
|:--- | --: |--: |--: |--: |--: |--: |
|Создание аппаратной части|4.|4.|4.|4.|4.|4.|
|Виртуальные ядра|1|2|4.|8|16|24|
|Память (ГБ)|7|14|28|56|112|168|
|Поддержка columnstore|Yes|Yes|Yes|Yes|Yes|Yes|
|Хранилище выполняющейся в памяти OLTP (ГБ)|1|2|4.|8|20|36|
|Тип хранилища|Локальный SSD|Локальный SSD|Локальный SSD|Локальный SSD|Локальный SSD|Локальный SSD|
|Максимальный размер данных (ГБ)|1024|1024|1024|1024|1024|1024|
|Максимальный размер журнала|307|307|307|307|307|307|
|Размер tempdb (ГБ)|32|64|128|256|384|384|
|Целевое число операций ввода-вывода в секунду (64 КБ)|5000|10 000|20 000|40 000|80 000|120000|
|Задержка ввода-вывода (приблизительно)|1–2 мс (запись)<br>1–2 мс (чтение)|1–2 мс (запись)<br>1–2 мс (чтение)|1–2 мс (запись)<br>1–2 мс (чтение)|1–2 мс (запись)<br>1–2 мс (чтение)|1–2 мс (запись)<br>1–2 мс (чтение)|1–2 мс (запись)<br>1–2 мс (чтение)|
|Максимальное количество одновременных рабочих ролей (запросов)|200|400|800|1600|3200|4800|
|Максимальное число одновременных сеансов|30 000|30 000|30 000|30 000|30 000|30 000|
|Количество реплик|3|3|3|3|3|3|
|Возможность развертывания Multi-AZ|Yes|Yes|Yes|Yes|Yes|Yes|
|Горизонтальное масштабирование для чтения|Yes|Yes|Yes|Yes|Yes|Yes|
|Включенное хранилище резервных копий|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|
|||

#### <a name="generation-5-compute-platform"></a>Вычислительная платформа 5-го поколения
|Уровень производительности|BC_Gen5_2|BC_Gen5_4|BC_Gen5_8|BC_Gen5_16|BC_Gen5_24|BC_Gen5_32|BC_Gen5_48|BC_Gen5_80|
|:--- | --: |--: |--: |--: |---: | --: |--: |--: |--: |--: |--: |--: |--: |
|Создание аппаратной части|5|5|5|5|5|5|5|5|
|Виртуальные ядра|2|4.|8|16|24|32|48|80|
|Память (ГБ)|11|22|44|88|132|176|264|440|
|Поддержка columnstore|Yes|Yes|Yes|Yes|Yes|Yes|Yes|Yes|
|Хранилище выполняющейся в памяти OLTP (ГБ)|1,571|3,142|6,284|15,768|25,252|37,936|68,104|131,64|
|Тип хранилища|Локальный SSD|Локальный SSD|Локальный SSD|Локальный SSD|Локальный SSD|Локальный SSD|Локальный SSD|Локальный SSD|
|Задержка ввода-вывода (приблизительно)|1–2 мс (запись)<br>1–2 мс (чтение)|1–2 мс (запись)<br>1–2 мс (чтение)|1–2 мс (запись)<br>1–2 мс (чтение)|1–2 мс (запись)<br>1–2 мс (чтение)|1–2 мс (запись)<br>1–2 мс (чтение)|1–2 мс (запись)<br>1–2 мс (чтение)|1–2 мс (запись)<br>1–2 мс (чтение)|1–2 мс (запись)<br>1–2 мс (чтение)|
|Максимальный размер данных (ГБ)|1024|1024|1024|1024|2048|4096|4096|4096|
|Максимальный размер журнала|307|307|307|307|614|1229|1229|1229|
|Размер tempdb (ГБ)|64|128|256|384|384|384|384|384|
|Целевое число операций ввода-вывода в секунду (64 КБ)|5000|10 000|20 000|40 000|60 000|80 000|120 000|200 000
|Максимальное количество одновременных рабочих ролей (запросов)|200|400|800|1600|2400|3200|4800|8000|
|Максимальное число одновременных сеансов|30 000|30 000|30 000|30 000|30 000|30 000|30 000|30 000|
|Количество реплик|1|1|1|1|1|1|1|1|
|Возможность развертывания Multi-AZ|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|
|Горизонтальное масштабирование для чтения|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|
|Включенное хранилище резервных копий|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|
|||

## <a name="single-database-change-storage-size"></a>Отдельная база данных: изменение размера хранилища

- Хранилище может быть расширено до максимально возможного размера с шагом приращения в 1 ГБ. Минимальный настраиваемый размер хранилища данных составляет 5 ГБ. 
- Хранилище для отдельной базы данных можно подготовить, увеличив или уменьшив ее максимальный размер с помощью [портала Azure](sql-database-single-database-resources.md#manage-single-database-resources-using-the-azure-portal), [Transact-SQL](/sql/t-sql/statements/alter-database-azure-sql-database#examples), [PowerShell](/powershell/module/azurerm.sql/set-azurermsqldatabase), [Azure CLI](/cli/azure/sql/db#az_sql_db_update) или [REST API](/rest/api/sql/databases/update).
- База данных SQL автоматически выделяет 30 % доступного места для хранения файлов журнала и 32 ГБ на виртуальное ядро для базы данных tempdb, но при этом их суммарный объем не должен превышать 384 ГБ. База данных tempdb находится на подключенном диске SSD на всех уровнях служб.
- Стоимость хранилища для отдельной базы данных равна суммарному объему хранилища данных и журналов, умноженному на цену единицы хранения для этого уровня служб. Стоимость базы данных tempdb включена в стоимость виртуального ядра. Сведения о цене на дополнительное хранилище см. на [странице цен на Базу данных SQL](https://azure.microsoft.com/pricing/details/sql-database/).

## <a name="single-database-change-vcores"></a>Отдельная база данных: изменение числа виртуальных ядер

После выбора числа виртуальных ядер отдельную базу данных можно динамически масштабировать в сторону увеличения или уменьшения, исходя из фактического использования, с помощью [портала Azure](sql-database-single-database-resources.md#manage-single-database-resources-using-the-azure-portal), [Transact-SQL](/sql/t-sql/statements/alter-database-azure-sql-database#examples), [PowerShell](/powershell/module/azurerm.sql/set-azurermsqldatabase), [Azure CLI](/cli/azure/sql/db#az_sql_db_update) или [REST API](/rest/api/sql/databases/update). 

При изменении уровня службы или уровня производительности базы данных создается реплика исходной базы данных с новым уровнем производительности, после чего устанавливаются подключения к реплике. Во время этого процесса данные не теряются, но в течение короткого периода, когда производится переподключение к реплике, соединения с базой данных становятся неактивны, поэтому некоторые текущие транзакции могут откатиться. Интервал времени для переключения не фиксирован, но в 99 % случаев он находится в пределах 4 секунд до показателя в 30 секунд. Если в момент разрыва подключений выполняется большое число транзакций, период переключения может быть продолжительнее. 

Длительность всего процесса вертикального масштабирования зависит от размера и уровня службы базы данных до и после изменения. Например, если база данных размером 250 ГБ переводится с уровня службы "Общего назначения", на этот уровень или в его пределах, процесс должен завершиться в течение шести часов. Если уровень производительности базы данных того же размера меняется в пределах уровня служб "Критически важный для бизнеса", то увеличение масштаба должно завершиться в течение трех часов.

> [!TIP]
> Чтобы отслеживать выполняемые операции см. статью [Operations — List](/rest/api/sql/Operations/List) (Список операций), [az sql db op](/cli/azure/sql/db/op), [sys.dm_operation_status (Azure SQL Database)](/sql/relational-databases/system-dynamic-management-views/sys-dm-operation-status-azure-sql-database) (sys.dm_operation_status (база данных SQL Azure)) и эти две команды PowerShell: [Get-AzureRmSqlDatabaseActivity](/powershell/module/azurerm.sql/get-azurermsqldatabaseactivity) и [Stop-AzureRmSqlDatabaseActivity](/powershell/module/azurerm.sql/stop-azurermsqldatabaseactivity).

* При переходе к более высокому уровню служб или производительности максимальный размер базы данных не увеличивается, если явно не указать для него большее значение (maxsize).
* При понижении уровня базы данных используемое ею пространство не должно превышать максимальный допустимый размер целевых уровня служб и уровня производительности. 
* Если вы повышаете уровень базы данных с включенной [георепликацией](sql-database-geo-replication-portal.md), перед повышением уровня базы данных-источника сначала обновите базы данных-получатели до требуемого уровня производительности (общая рекомендация для оптимальной производительности). Чтобы выполнить обновление до другого выпуска, сначала необходимо обновить базу данных-получатель.
* Если вы понижаете уровень базы данных с включенной [георепликацией](sql-database-geo-replication-portal.md), перед понижением уровня базы данных-получателя сначала понизьте категорию ее базы данных-источника до требуемого уровня производительности (общая рекомендация для оптимальной производительности). Чтобы понизить уровень до другого выпуска, сначала необходимо понизить уровень базы данных-получателя.
* Новые свойства базы данных не применяются до тех пор, пока изменение не завершится.

## <a name="elastic-pool-storage-sizes-and-performance-levels"></a>Эластичный пул: размеры хранилища и уровни производительности

В следующих таблицах приведены доступные ресурсы для эластичных пулов баз данных SQL на каждом уровне служб и уровне производительности. Уровень служб, уровень производительности и объем хранилища можно задать с помощью [портала Azure](sql-database-elastic-pool.md#manage-elastic-pools-and-databases-using-the-azure-portal), [PowerShell](sql-database-elastic-pool.md#manage-elastic-pools-and-databases-using-powershell), [Azure CLI](sql-database-elastic-pool.md#manage-elastic-pools-and-databases-using-the-azure-cli) или [REST API](sql-database-elastic-pool.md#manage-elastic-pools-and-databases-using-the-rest-api).

> [!NOTE]
> Ограничения по ресурсам для отдельных баз данных в эластичных пулах обычно такие же, как и у отдельных баз данных за пределами пулов с тем же уровнем производительности. Например, максимальное количество рабочих процессов для базы данных GP_Gen4_1 составляет 200. Таким образом, максимальное число одновременных рабочих ролей в базе данных из пула GP_Gen4_1 составляет 200. Обратите внимание, что общее число параллельных рабочих ролей в пуле GP_Gen4_1 равно 210.

### <a name="general-purpose-service-tier"></a>Уровень служб общего назначения

#### <a name="generation-4-compute-platform"></a>Вычислительная платформа 4-го поколения
|Уровень производительности|GP_Gen4_1|GP_Gen4_2|GP_Gen4_4|GP_Gen4_8|GP_Gen4_16|GP_Gen4_24|
|:--- | --: |--: |--: |--: |--: |--: |
|Создание аппаратной части|4.|4.|4.|4.|4.|4.|
|Виртуальные ядра|1|2|4.|8|16|24|
|Память (ГБ)|7|14|28|56|112|168|
|Поддержка columnstore|Yes|Yes|Yes|Yes|Yes|Yes|
|Хранилище выполняющейся в памяти OLTP (ГБ)|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|
|Тип хранилища|Хранилище уровня "Премиум" (удаленное)|Хранилище уровня "Премиум" (удаленное)|Хранилище уровня "Премиум" (удаленное)|Хранилище уровня "Премиум" (удаленное)|Хранилище уровня "Премиум" (удаленное)|Хранилище уровня "Премиум" (удаленное)|
|Максимальный размер данных (ГБ)|512|756|1536|2048|3584|4096|
|Максимальный размер журнала|154|227|461|614|1075|1229|
|Размер tempdb (ГБ)|32|64|128|256|384|384|
|Целевое число операций ввода-вывода в секунду (64 КБ)|500|1000|2000|4000|7000|7000|
|Задержка ввода-вывода (приблизительно)|5–7 мс (запись)<br>5–10 мс (чтение)|5–7 мс (запись)<br>5–10 мс (чтение)|5–7 мс (запись)<br>5–10 мс (чтение)|5–7 мс (запись)<br>5–10 мс (чтение)|5–7 мс (запись)<br>5–10 мс (чтение)|5–7 мс (запись)<br>5–10 мс (чтение)|5–7 мс (запись)<br>5–10 мс (чтение)|
|Максимальное количество одновременных рабочих ролей (запросов)|210|420|840|1680|3360|5040|
|Максимальное число одновременных сеансов|30 000|30 000|30 000|30 000|30 000|30 000|
|Максимальная плотность пула|100|200|500|500|500|500|
|Минимальное и максимальное количество раз остановки эластичного пула|0, 0,25, 0,5, 1|0, 0,25, 0,5, 1, 2|0, 0,25, 0,5, 1, 2, 4|0, 0,25, 0,5, 1, 2, 4, 8|0, 0,25, 0,5, 1, 2, 4, 8, 16|0, 0,25, 0,5, 1, 2, 4, 8, 16, 24|
|Количество реплик|1|1|1|1|1|1|
|Возможность развертывания Multi-AZ|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|
|Горизонтальное масштабирование для чтения|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|
|Включенное хранилище резервных копий|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|
|||

#### <a name="generation-5-compute-platform"></a>Вычислительная платформа 5-го поколения
|Уровень производительности|BC_Gen5_2|BC_Gen5_4|BC_Gen5_8|BC_Gen5_16|BC_Gen5_24|BC_Gen5_32|BC_Gen5_48|BC_Gen5_80|
|:--- | --: |--: |--: |--: |--: |--: |--: |--: |
|Создание аппаратной части|5|5|5|5|5|5|5|5|
|Виртуальные ядра|2|4.|8|16|24|32|48|80|
|Память (ГБ)|11|22|44|88|132|176|264|440|
|Поддержка columnstore|Yes|Yes|Yes|Yes|Yes|Yes|Yes|Yes|
|Хранилище выполняющейся в памяти OLTP (ГБ)|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|
|Тип хранилища|Хранилище уровня "Премиум" (удаленное)|Хранилище уровня "Премиум" (удаленное)|Хранилище уровня "Премиум" (удаленное)|Хранилище уровня "Премиум" (удаленное)|Хранилище уровня "Премиум" (удаленное)|Хранилище уровня "Премиум" (удаленное)|Хранилище уровня "Премиум" (удаленное)|Хранилище уровня "Премиум" (удаленное)|
|Максимальный размер данных (ГБ)|512|756|1536|2048|3072|4096|4096|4096|
|Максимальный размер журнала|154|227|461|614|922|1229|1229|1229|
|Размер tempdb (ГБ)|64|128|256|384|384|384|384|384|
|Целевое число операций ввода-вывода в секунду (64 КБ)|500|1000|2000|4000|6000|7000|7000|7000|
|Задержка ввода-вывода (приблизительно)|5–7 мс (запись)<br>5–10 мс (чтение)|5–7 мс (запись)<br>5–10 мс (чтение)|5–7 мс (запись)<br>5–10 мс (чтение)|5–7 мс (запись)<br>5–10 мс (чтение)|5–7 мс (запись)<br>5–10 мс (чтение)|5–7 мс (запись)<br>5–10 мс (чтение)|5–7 мс (запись)<br>5–10 мс (чтение)|5–7 мс (запись)<br>5–10 мс (чтение)|5–7 мс (запись)<br>5–10 мс (чтение)|
|Максимальное количество одновременных рабочих ролей (запросов)|210|420|840|1680|2520|3360|5040|8400
|Максимальное число одновременных сеансов|30 000|30 000|30 000|30 000|30 000|30 000|30 000|30 000|
|Максимальная плотность пула|100|200|500|500|500|500|500|500|
|Минимальное и максимальное количество раз остановки эластичного пула|0, 0,25, 0,5, 1, 2|0, 0,25, 0,5, 1, 2, 4|0, 0,25, 0,5, 1, 2, 4, 8|0, 0,25, 0,5, 1, 2, 4, 8, 16|0, 0,25, 0,5, 1, 2, 4, 8, 16, 24|0, 0,5, 1, 2, 4, 8, 16, 24, 32|0, 0,5, 1, 2, 4, 8, 16, 24, 32, 48|0, 0,5, 1, 2, 4, 8, 16, 24, 32, 48, 80|
|Количество реплик|1|1|1|1|1|1|1|1|
|Возможность развертывания Multi-AZ|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|
|Горизонтальное масштабирование для чтения|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|Недоступно|
|Включенное хранилище резервных копий|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|
|||

### <a name="business-critical-service-tier"></a>Уровень служб "Критически важный для бизнеса"

#### <a name="generation-4-compute-platform"></a>Вычислительная платформа 4-го поколения
|Уровень производительности|BC_Gen4_1|BC_Gen4_2|BC_Gen4_4|BC_Gen4_8|BC_Gen4_16|BC_Gen4_24|
|:--- | --: |--: |--: |--: |--: |--: |
|Создание аппаратной части|4.|4.|4.|4.|4.|4.|
|Виртуальные ядра|1|2|4.|8|16|24|
|Память (ГБ)|7|14|28|56|112|168|
|Поддержка columnstore|Yes|Yes|Yes|Yes|Yes|Yes|
|Хранилище выполняющейся в памяти OLTP (ГБ)|1|2|4.|8|20|36|
|Тип хранилища|Локальный SSD|Локальный SSD|Локальный SSD|Локальный SSD|Локальный SSD|Локальный SSD|
|Максимальный размер данных (ГБ)|1024|1024|1024|1024|1024|1024|
|Максимальный размер журнала|307|307|307|307|307|307|
|Размер tempdb (ГБ)|32|64|128|256|384|384|
|Целевое число операций ввода-вывода в секунду (64 КБ)|5000|10 000|20 000|40 000|80 000|120000|
|Задержка ввода-вывода (приблизительно)|1–2 мс (запись)<br>1–2 мс (чтение)|1–2 мс (запись)<br>1–2 мс (чтение)|1–2 мс (запись)<br>1–2 мс (чтение)|1–2 мс (запись)<br>1–2 мс (чтение)|1–2 мс (запись)<br>1–2 мс (чтение)|1–2 мс (запись)<br>1–2 мс (чтение)|
|Максимальное количество одновременных рабочих ролей (запросов)|210|420|840|1680|3360|5040|
|Максимальное число одновременных сеансов|30 000|30 000|30 000|30 000|30 000|30 000|
|Максимальная плотность пула|Недоступно|50|100|100|100|100|
|Минимальное и максимальное количество раз остановки эластичного пула|Недоступно|0, 0,25, 0,5, 1, 2|0, 0,25, 0,5, 1, 2, 4|0, 0,25, 0,5, 1, 2, 4, 8|0, 0,25, 0,5, 1, 2, 4, 8, 16|0, 0,25, 0,5, 1, 2, 4, 8, 16, 24|
|Возможность развертывания Multi-AZ|Yes|Yes|Yes|Yes|Yes|Yes|
|Горизонтальное масштабирование для чтения|Yes|Yes|Yes|Yes|Yes|Yes|
|Включенное хранилище резервных копий|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|
|||

#### <a name="generation-5-compute-platform"></a>Вычислительная платформа 5-го поколения
|Уровень производительности|BC_Gen5_2|BC_Gen5_4|BC_Gen5_8|BC_Gen5_16|BC_Gen5_24|BC_Gen5_32|BC_Gen5_48|BC_Gen5_80|
|:--- | --: |--: |--: |--: |--: |--: |--: |--: |
|Создание аппаратной части|5|5|5|5|5|5|5|5|
|Виртуальные ядра|2|4.|8|16|24|48|64|80|
|Память (ГБ)|11|22|44|88|132|176|264|440|
|Поддержка columnstore|Yes|Yes|Yes|Yes|Yes|Yes|Yes|Yes|
|Хранилище выполняющейся в памяти OLTP (ГБ)|1,571|3,142|6,284|15,768|25,252|37,936|68,104|131,64|
|Тип хранилища|Локальный SSD|Локальный SSD|Локальный SSD|Локальный SSD|Локальный SSD|Локальный SSD|Локальный SSD|Локальный SSD|
|Задержка ввода-вывода (приблизительно)|1–2 мс (запись)<br>1–2 мс (чтение)|1–2 мс (запись)<br>1–2 мс (чтение)|1–2 мс (запись)<br>1–2 мс (чтение)|1–2 мс (запись)<br>1–2 мс (чтение)|1–2 мс (запись)<br>1–2 мс (чтение)|1–2 мс (запись)<br>1–2 мс (чтение)|1–2 мс (запись)<br>1–2 мс (чтение)|1–2 мс (запись)<br>1–2 мс (чтение)|
|Максимальный размер данных (ГБ)|1024|1024|1024|1024|2048|4096|4096|4096|
|Максимальный размер журнала|307|307|307|307|614|1229|1229|1229|
|Размер tempdb (ГБ)|64|128|256|384|384|384|384|384|
|Целевое число операций ввода-вывода в секунду (64 КБ)|5000|10 000|20 000|40 000|60 000|80 000|120000|200 000
|Максимальное количество одновременных рабочих ролей (запросов)|210|420|840|1680|2520|3360|5040|8400|
|Максимальное число одновременных сеансов|30 000|30 000|30 000|30 000|30 000|30 000|30 000|30 000|
|Максимальная плотность пула|Недоступно|50|100|100|100|100|100|100|
|Минимальное и максимальное количество раз остановки эластичного пула|Недоступно|0, 0,25, 0,5, 1, 2, 4|0, 0,25, 0,5, 1, 2, 4, 8|0, 0,25, 0,5, 1, 2, 4, 8, 16|0, 0,25, 0,5, 1, 2, 4, 8, 16, 24|0, 0,5, 1, 2, 4, 8, 16, 24, 32|0, 0,5, 1, 2, 4, 8, 16, 24, 32, 48|0, 0,5, 1, 2, 4, 8, 16, 24, 32, 48, 80|
|Возможность развертывания Multi-AZ|Yes|Yes|Yes|Yes|Yes|Yes|Yes|Yes|
|Горизонтальное масштабирование для чтения|Yes|Yes|Yes|Yes|Yes|Yes|Yes|Yes|
|Включенное хранилище резервных копий|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|1 x размер базы данных|
|||

Если все виртуальные ядра эластичного пула заняты, то каждая база данных в пуле получает равное количество вычислительных ресурсов для обработки запросов. Служба базы данных SQL обеспечивает равное разделение ресурсов между базами данных за счет равных срезов времени вычислений. Если задано минимальное значение виртуальных ядер на базу данных, отличное от нуля, то такое равное разделение ресурсов в эластичном пуле также позволяет гарантировать любое дополнительное количество ресурсов каждой базе данных.

### <a name="database-properties-for-pooled-databases"></a>Свойства базы данных в составе пула

В следующей таблице описаны свойства баз данных в составе пула.

| Свойство | ОПИСАНИЕ |
|:--- |:--- |
| Максимальное число виртуальных ядер на базу данных |Максимальное количество виртуальных ядер, которое может использовать любая база данных в пуле, если оно доступно и не используется другими базами данных в пуле. Это значение не гарантирует предоставление ресурсов базе данных. Это глобальный параметр, который применяется ко всем базам данных в пуле. Задайте максимальное количество виртуальных ядер на базу данных, достаточно большое для обработки пиковых нагрузок в базе данных. Значение параметра может быть несколько преувеличенным, так как использование пула предполагает обращение к более и менее активным базам данных в условиях, когда не все базы одновременно обрабатывают пиковое количество запросов.|
| Минимальное число виртуальных ядер на базу данных |Минимальное количество виртуальных ядер, гарантируемое любой базе данных в пуле. Это глобальный параметр, который применяется ко всем базам данных в пуле. Можно задать минимальное количество виртуальных ядер на базу данных, равное 0, что также является значением по умолчанию. Для этого свойства задается значение в диапазоне от 0 до среднего количества виртуальных ядер, используемых на одну базу данных. Произведение количества баз данных в пуле и установленного минимального количества виртуальных ядер на базу данных не может превышать количество виртуальных ядер в пуле.|
| Максимальный размер хранилища на базу данных |Максимальный размер базы данных, установленный пользователем для базы данных в пуле. Базы данных в пуле совместно используют выделенное хранилище пула, поэтому размер хранилища базы данных ограничен наименьшим оставшимся объемом хранилища пула и размером базы данных. Максимальный размер базы данных означает максимальный размер файлов данных и не включает пространство, используемое файлами журнала. |
|||
 
## <a name="elastic-pool-change-storage-size"></a>Эластичный пул: изменение размера хранилища

- Объем подготавливаемого хранилища не может превышать максимального допустимого размера. 
 - Для хранилища уровня "Стандартный" можно увеличить или уменьшить размер с шагом приращения в 10 ГБ.
 - Для хранилища уровня "Премиум" можно увеличить или уменьшить размер с шагом приращения в 250 ГБ.
- Хранилище для эластичного пула можно подготовить, увеличив или уменьшив его максимальный размер с помощью [портала Azure](sql-database-elastic-pool.md#manage-elastic-pools-and-databases-using-the-azure-portal), [PowerShell](/powershell/module/azurerm.sql/set-azurermsqlelasticpool), [Azure CLI](/cli/azure/sql/elastic-pool#az_sql_elastic_pool_update) или [REST API](/rest/api/sql/elasticpools/update).
- Стоимость хранилища для эластичного пула равна его объему, умноженному на цену единицы хранения этого хранилища для уровня служб. Сведения о цене на дополнительное хранилище см. на [странице цен на Базу данных SQL](https://azure.microsoft.com/pricing/details/sql-database/).

## <a name="elastic-pool-change-vcores"></a>Эластичный пул: изменение числа виртуальных ядер

Можно увеличить или уменьшить уровень производительности, доступный для эластичного пула, исходя из потребностей в ресурсах, с помощью[портала Azure](sql-database-elastic-pool.md#manage-elastic-pools-and-databases-using-the-azure-portal), [PowerShell](/powershell/module/azurerm.sql/set-azurermsqlelasticpool), [Azure CLI](/cli/azure/sql/elastic-pool#az_sql_elastic_pool_update) или [REST API](/rest/api/sql/elasticpools/update).

- При изменении числа виртуальных ядер в пуле подключение к базе данных на короткое время прерывается. То же самое происходит при масштабировании DTU для отдельной базы данных (не в пуле). Дополнительные сведения о длительности и влиянии разрыва подключений к базе данных во время операций масштабирования см. в разделе [Ограничения ресурсов базы данных SQL Azure](#single-database-change-storage-size). 
- Время, необходимое для изменения числа виртуальных ядер в пуле, зависит от общего объема пространства, используемого всеми базами данных в пуле. Как правило, задержка при изменении масштаба в среднем составляет не более 90 минут на 100 ГБ. Например, если общее пространство, используемое всеми базами данных в пуле, равно 200 ГБ, то ожидаемая задержка при изменении масштаба пула составит до 3 часов. В некоторых случаях в рамках уровней "Стандартный" и "Базовый" задержка при изменении масштаба может составлять меньше пяти минут, вне зависимости от объема используемого пространства.
- Как правило, изменение минимального или максимального числа виртуальных ядер для базы данных обычно занимает пять минут или менее.
- При уменьшении числа виртуальных ядер на пул используемое им пространство не должно превышать максимальное допустимое число виртуальных ядер для целевых уровня служб и уровня производительности.

## <a name="what-is-the-maximum-number-of-servers-and-databases"></a>Каково максимальное число серверов и баз данных?

| Максимальная | Значение |
| :--- | :--- |
| Баз данных на сервер | 5000 |
| Количество служб на одну подписку для одного региона | 20 |
|||

> [!IMPORTANT]
> По мере приближения количества баз данных к пороговому значению для сервера может произойти следующее:
> <br> •    Увеличение задержки при выполнении запросов к базе данных master.  Сюда входят представления статистических данных использования ресурсов, такие как sys.resource_stats.
> <br> •    Увеличение задержки при управлении и отображении для точек наблюдения портала, включая перечисление баз данных на сервере.

## <a name="what-happens-when-database-and-elastic-pool-resource-limits-are-reached"></a>Что происходит при достижении ограничения ресурсов базы данных и эластичного пула?

### <a name="compute-vcores"></a>Вычислительные ресурсы (виртуальные ядра)

Когда использование вычислительных ресурсов базы данных (измеряемое в использовании виртуальных ядер) значительно вырастает, то увеличиваются задержки и даже может истечь время ожидания. В этих условиях служба может ставить запросы в очередь и предоставлять ресурсы для их выполнения по мере освобождения этих ресурсов.
При интенсивном использовании вычислительных ресурсов возможны следующие варианты предотвращения последствий:

- Увеличение уровня производительности базы данных или эластичного пула для предоставления базе данных дополнительных виртуальных ядер. Дополнительные сведения см. в разделах [Отдельная база данных: изменение числа виртуальных ядер](#single-database-change-vcores) и [Эластичный пул: изменение числа виртуальных ядер](#elastic-pool-change-vcores).
- Оптимизация запросов для уменьшения использования ресурсов каждым запросом. Дополнительные сведения см. в разделе [Настройка запросов и указания на них](sql-database-performance-guidance.md#query-tuning-and-hinting).

### <a name="storage"></a>Служба хранилища

Когда используемое пространство базы данных достигает максимального размера, операции вставки и обновления, увеличивающие размер данных, завершаются сбоем и клиенты получают [сообщение об ошибке](sql-database-develop-error-messages.md). Операции SELECT и DELETE с базой данных продолжают успешно выполняться.

При интенсивном использовании пространства возможны следующие варианты предотвращения последствий:

- Увеличение максимального размера базы данных или эластичного пула либо изменение уровня производительности для получения большего максимально возможного объема хранилища. Дополнительные сведения см. в статье [Ограничения для службы "Базы данных SQL Azure" в модели приобретения на основе виртуальных ядер (предварительная версия)](sql-database-vcore-resource-limits.md).
- Если база данных находится в эластичном пуле, то в качестве альтернативы ее можно переместить за пределы пула, чтобы ее дисковое пространство не использовалось совместно с другими базами данных.

### <a name="sessions-and-workers-requests"></a>Сеансы и рабочие роли (запросы) 

Максимальное количество сеансов и рабочих ролей определяется выбранными уровнем служб и уровнем производительности. При достижении ограничения числа сеансов или рабочих ролей новые запросы отклоняются, а клиенты получают сообщение об ошибке. Хотя приложение может управлять числом доступных подключений, число параллельных рабочих ролей зачастую существенно труднее оценивать и контролировать. Это особенно сильно проявляется в периоды пиковой нагрузки, когда достигаются ограничения ресурсов базы данных и рабочие роли накапливаются из-за увеличенной длительности выполнения запросов. 

При интенсивном использовании сеансов и рабочих ролей возможны следующие варианты предотвращения последствий:
- Повышение уровня служб или уровня производительности базы данных или эластичного пула. См. также раздел [Отдельная база данных: изменение размера хранилища](#single-database-change-storage-size), [Отдельная база данных: изменение числа виртуальных ядер](#single-database-change-vcores), [Эластичный пул: изменение размера хранилища](#elastic-pool-change-storage-size) и [Эластичный пул: изменение числа виртуальных ядер](#elastic-pool-change-vcores).
- Оптимизация запросов для сокращения использования ресурсов, необходимых каждому запросу, если причиной повышенного использования рабочих ролей является состязание за вычислительные ресурсы. Дополнительные сведения см. в разделе [Настройка запросов и указания на них](sql-database-performance-guidance.md#query-tuning-and-hinting).

## <a name="next-steps"></a>Дополнительная информация

- См. [часто задаваемые вопросы о службе "База данных SQL"](sql-database-faq.md).
- Сведения об общих ограничениях Azure см. в разделе [Подписка Azure, границы, квоты и ограничения службы](../azure-subscription-service-limits.md).
