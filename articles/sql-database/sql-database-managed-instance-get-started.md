---
title: 'Портал Azure: создание Управляемого экземпляра SQL | Документация Майкрософт'
description: Создание Управляемого экземпляра SQL, сетевой среды и виртуальной машины клиента для доступа.
keywords: sql database tutorial, create a sql managed instance
services: sql-database
author: jovanpop-msft
manager: craigg
ms.service: sql-database
ms.custom: DBs & servers
ms.topic: quickstart
ms.date: 08/31/2018
ms.author: jovanpop-msft
ms.openlocfilehash: 4271f0cef31b0e028ed1f9408166c37d4cbbe109
ms.sourcegitcommit: a3a0f42a166e2e71fa2ffe081f38a8bd8b1aeb7b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/01/2018
ms.locfileid: "43382004"
---
# <a name="create-an-azure-sql-managed-instance"></a>Создание Управляемого экземпляра SQL Azure

В этом кратком руководстве описано создание Управляемого экземпляра SQL в Azure. Управляемый экземпляр Базы данных SQL Azure представляет собой экземпляр ядра СУБД SQL Server среды "платформа как услуга" (PaaS), который позволяет запускать и масштабировать высокодоступные базы данных SQL Server в облаке Azure. В этом кратком руководстве описано, как приступить к работе, создав Управляемый экземпляр SQL.

Если у вас еще нет подписки Azure, создайте [бесплатную](https://azure.microsoft.com/free/) учетную запись Azure, прежде чем начинать работу.

## <a name="sign-in-to-the-azure-portal"></a>Вход на портал Azure

Войдите на [портале Azure](https://portal.azure.com/).

## <a name="prepare-network-environment"></a>Подготовка сетевой среды

Управляемый экземпляр SQL — это безопасная служба, которая размещается в вашей виртуальной сети Azure. Чтобы создать Управляемый экземпляр, вам необходимо подготовить сетевую среду Azure, которая включает в себя:
 - Виртуальную сеть Azure, где будет размещен ваш Управляемый экземпляр.
 - Подсеть в виртуальной сети Azure, где будут размещены Управляемые экземпляры.
 - Определяемый пользователем маршрут, который позволит Управляемому экземпляру связываться со службами Azure, которые контролируют этот экземпляр и управляют им.

Для Управляемых экземпляров выделяется подсеть, и вы не можете создавать какие-либо другие ресурсы (например, Виртуальные машины Azure) в этой подсети. В этом кратком руководстве в виртуальной сети Azure будет создано две подсети, поэтому вы можете разместить Управляемые экземпляры в выделенной для них подсети, а другие ресурсы можно разместить в подсети по умолчанию.

1. Разверните сетевую среду Azure, подготовленную для Управляемого экземпляра Базы данных SQL Azure, нажав на следующую кнопку:

    <a target="_blank" href="https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2F101-sql-managed-instance-azure-environment%2Fazuredeploy.json" rel="noopener"> <img src="http://azuredeploy.net/deploybutton.png"> </a>

    Эта кнопка откроет форму на портале Azure, где вы можете настроить сетевую среду перед ее развертыванием.

2. При желании измените имена виртуальной сети и подсетей и настройте диапазоны IP-адресов, связанные с вашими сетевыми ресурсами. Затем нажмите кнопку "Купить", чтобы создать и настроить среду:

    ![создание среды Управляемого экземпляра](./media/sql-database-managed-instance-get-started/create-mi-network-arm.png)

    > [!Note]
    > Этот элемент Azure Resource Manager создаст две подсети в виртуальной сети — одну для Управляемых экземпляров с именем **ManagedInstances**, а другую с именем — **По умолчанию** для других ресурсов, таких как виртуальная машина клиента, которые можно использовать для подключения к Управляемому экземпляру. Если вам не нужны две подсети, позже вы можете удалить подсеть по умолчанию. Однако в этом случае вы не сможете выполнить шаг 3 в этом кратком руководстве — [подготовка машины клиента](#prepare-client-machine).

    > [!Note]
    > Если вы измените имена виртуальной сети и подсетей, запишите новые имена, потому что они понадобятся в следующих разделах. В остальной части руководства предполагается, что вы создали виртуальную сеть с именем **MyNewVNet**, подсеть для Управляемых экземпляров SQL **ManagedInstances** и подсеть **По умолчанию** для виртуальных машин и других ресурсов.

## <a name="create-a-managed-instance"></a>Создание управляемого экземпляра

Ниже показано, как создать управляемый экземпляр после утверждения предварительной версии.

1. Щелкните **Создать ресурс** в верхнем левом углу окна портала Azure.
2. Найдите **Управляемый экземпляр**, а затем выберите **Azure SQL Database Managed Instance (preview)** (Управляемый экземпляр базы данных SQL Azure (предварительная версия)).
3. Нажмите кнопку **Создать**.

   ![Создание управляемого экземпляра](./media/sql-database-managed-instance-get-started/managed-instance-create.png)

4. Выберите свою подписку и проверьте, чтобы для условий предварительной версии было выбрано значение **Принято**.

   ![значение "Принято" для условий предварительной версии управляемого экземпляра](./media/sql-database-managed-instance-tutorial/preview-accepted.png)

5. Укажите запрошенные сведения в форме управляемого экземпляра, используя данные в таблице ниже.

   | Параметр| Рекомендуемое значение | ОПИСАНИЕ |
   | ------ | --------------- | ----------- |
   |**Имя управляемого экземпляра**|Любое допустимое имя|Сведения о допустимых именах см. в статье [Соглашения об именовании](https://docs.microsoft.com/azure/architecture/best-practices/naming-conventions).|
   |**Имя для входа администратора управляемого экземпляра**|Любое допустимое имя пользователя|Сведения о допустимых именах см. в статье [Соглашения об именовании](https://docs.microsoft.com/azure/architecture/best-practices/naming-conventions). Не используйте serveradmin. Это имя зарезервировано для роли уровня сервера.| 
   |**Пароль**|Любой допустимый пароль|Пароль должен включать минимум 16 символов и соответствовать [определенным требованиям к сложности](../virtual-machines/windows/faq.md#what-are-the-password-requirements-when-creating-a-vm).|
   |**Группа ресурсов**|Группа ресурсов, созданная ранее||
   |**Местоположение.**|Ранее выбранное расположение|Дополнительные сведения о регионах Azure см. [здесь](https://azure.microsoft.com/regions/).|
   |**Виртуальная сеть**|Созданная ранее виртуальная сеть| Выберите элемент **MyNewVNet/ManagedInstances**, если вы не изменили имена на предыдущем шаге. В противном случае выберите имя виртуальной сети и подсети управляемого экземпляра, которые вы ввели в предыдущем разделе. **Не используйте подсеть по умолчанию, так как она не настроена для размещения Управляемых экземпляров**. |

   ![форма создания управляемого экземпляра](./media/sql-database-managed-instance-get-started/managed-instance-create-form.png)

6. Щелкните поле **Ценовая категория**, чтобы выбрать размер вычислительных ресурсов и ресурсов хранения, а также просмотреть варианты ценовой категории. По умолчанию ваш экземпляр бесплатно получает 32 ГБ свободного места в хранилище, **чего может быть недостаточно для приложений**.
7. Укажите нужный объем хранилища и количество виртуальных ядер, используя ползунки или текстовые поля. 
   ![Ценовая категория управляемого экземпляра](./media/sql-database-managed-instance-get-started/managed-instance-pricing-tier.png)

8. По завершении нажмите кнопку **Применить** для сохранения выбранных параметров.  
9. Нажмите кнопку **Создать**, чтобы развернуть управляемый экземпляр.
10. Щелкните значок **уведомлений**, чтобы просмотреть состояние развертывания.
11. Щелкните **Deployment in progress** (Развертывание в процессе выполнения), чтобы открыть окно управляемого экземпляра для дальнейшего мониторинга хода выполнения развертывания.

В ходе выполнения развертывания приступите к выполнению шага ниже.

> [!IMPORTANT]
> Первый экземпляр в подсети обычно развертывается намного дольше, чем последующие экземпляры. Не стоит из-за этого отменять развертывание, Создание второго Управляемого экземпляра в подсети займет пару минут.

## <a name="prepare-client-machine"></a>Подготовка машины клиента

Так как Управляемый экземпляр SQL размещается в частной виртуальной сети, необходимо создать виртуальную машину Azure с помощью какого-либо установленного инструмента клиента SQL, например SQL Server Management Studio или SQL Operations Studio, для подключения к Управляемому экземпляру и выполнения запросов.

> [!Note]
> Вместо виртуальной машины Azure клиента вы можете настроить подключение ["точка — сеть"](../vpn-gateway/vpn-gateway-howto-point-to-site-resource-manager-portal.md) и подключиться к Управляемому экземпляру со своего локального компьютера.

Самый простой способ создать виртуальную машину клиента со всеми необходимыми инструментами — использовать шаблоны Azure Resource Manager.

1. Нажмите следующую кнопку (войдите на портал Azure на другой вкладке браузера):

    <a href="https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fjovanpop-msft%2Fazure-quickstart-templates%2Fsql-win-vm-w-tools%2F201-vm-win-vnet-sql-tools%2Fazuredeploy.json" target="_blank"><img src="http://azuredeploy.net/deploybutton.png"/></a>

2. В форме, которая откроется, введите имя виртуальной машины, имя пользователя администратора и пароль, который вы будете использовать для подключения к виртуальной машине.

    ![создание виртуальной машины клиента](./media/sql-database-managed-instance-get-started/create-client-sql-vm.png)

    Если вы не изменили имя виртуальной сети и подсети по умолчанию, вам не нужно менять последние два параметра. В противном случае нужно изменить эти значения на значения, которые вы ввели во время настройки сетевой среды.

3. Нажмите кнопку "Купить", чтобы развернуть виртуальную машину Azure в подготовленной сети.

4. Подключитесь к своей виртуальной машине с помощью подключения к удаленному рабочему столу и найдите SQL Server Management Studio или SQL Operation Studio, автоматически установленные на виртуальной машине.

5. Откройте SSMS и введите **имя узла** для Управляемого экземпляра в поле **Имя сервера**, выберите **Проверка подлинности SQL Server**, введите имя пользователя и пароль в диалоговом окне **Подключение к серверу**, а затем нажмите кнопку **Подключиться**.

    ![подключение SSMS](./media/sql-database-managed-instance-tutorial/ssms-connect.png)  

После подключения можно просмотреть системные и пользовательские базы данных на узле "Базы данных" и различные объекты на узлах "Безопасность", "Объекты сервера", "Репликация", "Управление", "Агент SQL Server" и "Профилировщик XEvent".

## <a name="next-steps"></a>Дополнительная информация

 - [Подключение приложения к Управляемому экземпляру Базы данных SQL](sql-database-managed-instance-connect-app.md).
 - [Перенос экземпляра SQL Server в Управляемый экземпляр Базы данных SQL Azure](sql-database-managed-instance-migrate.md).


