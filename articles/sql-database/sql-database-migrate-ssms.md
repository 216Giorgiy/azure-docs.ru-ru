<properties
   pageTitle="Миграция в Базу данных SQL с помощью среды SSMS"
	description="База данных SQL Microsoft Azure, перенос базы данных sql, перенос с помощью среды ssms"
	services="sql-database"
	documentationCenter=""
	authors="carlrabeler"
	manager="jeffreyg"
	editor=""/>

<tags
   ms.service="sql-database"
	ms.devlang="NA"
	ms.topic="article"
	ms.tgt_pltfrm="NA"
	ms.workload="data-management"
	ms.date="08/24/2015"
	ms.author="carlrab"/>

#Миграция совместимой базы данных с помощью среды SSMS

![Схема миграции среды SSMS](./media/sql-database-migrate-ssms/01SSMSDiagram.png)

Если схема базы данных совместима с Базой данных SQL Azure, то для миграции необходимо только импортировать базу данных в Azure. Это можно сделать либо за один шаг с помощью среды SSMS путем развертывания базы данных в Базе данных SQL Azure, либо в два этапа — сначала экспортировать BACPAC базы данных, а затем импортировать этот BACPAC в Azure SQL Server как новую базу данных.

BACPAC можно экспортировать в локальный файл или напрямую в большой двоичный объект Azure. При локальном экспорте экспортированный BACPAC можно передать в большой двоичный объект Azure. После сохранения файла BACPAC в большом двоичном объекте Azure вы можете импортировать BACPAC в качестве базы данных с помощью портала Azure. Импорт через портал Azure позволяет уменьшить задержку на этапе импорта, а также улучшить эффективность и надежность миграции больших баз данных.

При развертывании непосредственно из среды SSMS всегда выполняется развертывание полной схемы и всех данных, тогда как при экспорте с использованием BACPAC можно выбрать подмножество объектов для экспорта в файл BACPAC. Экспортированный файл BACPAC всегда содержит полную схему базы данных и по умолчанию данные из всех таблиц. Как при развертывании с помощью SSMS, так и при экспорте с последующим импортом из SSMS (или портала Azure) используется одна и та же технология DAC, поэтому итоговый результат в обоих случаях будет одинаковым.

Этот вариант также используется в качестве последнего этапа во втором варианте переноса баз данных после обновления для обеспечения совместимости с Базой данных SQL Azure.

## Получение последней версии SQL Server Management Studio

Используйте последнюю версию Microsoft SQL Server Management Studio для SQL Server, чтобы иметь самые последние обновления для средств в среде SSMS и взаимодействия с порталом Azure. Чтобы получить последнюю версию Microsoft SQL Server Management Studio для SQL Server, [скачайте](https://msdn.microsoft.com/library/mt238290.aspx) и установите ее на клиентском компьютере, подключенном к Интернету и к базе данных, для которой необходимо выполнить миграцию.

##Развертывание в Базе данных SQL Azure с помощью SSMS
1.	Подготовка логического сервера с помощью портала управления Azure.
2.	Найдите базу данных-источник в обозревателе объектов среды SSMS и выполните задачу **Экспорт приложения уровня данных…**

	![Развертывание в Azure из меню "Задачи"](./media/sql-database-migrate-ssms/02MigrateusingSSMS.png)

3.	В мастере развертывания настройте подключение к целевому логическому серверу Базы данных SQL Azure, который был подготовлен на шаге 1.
4.	Укажите **имя** базы данных, а также **выпуск** (уровень служб) и **цель обслуживания** (уровень производительности). Дополнительные сведения о настройке этих параметров можно найти в разделе [Уровни служб Базы данных SQL Azure](sql-database-service-tiers.md).

	![Параметры экспорта](./media/sql-database-migrate-ssms/03MigrateusingSSMS.png)

5.	Завершите выполнение мастера, чтобы перенести базу данных. В зависимости от размера и сложности базы данных процесс развертывания может занять от нескольких минут до нескольких часов. Если есть проблемы с совместимостью, процедуры проверки схемы быстро обнаружат ошибки перед выполнением фактического развертывания в Azure. При возникновении ошибок, которые указывают на несовместимость схемы базы данных с Базой данных SQL, воспользуйтесь вторым вариантом миграции. Ознакомьтесь с разделом [Обновление базы данных на месте с последующим развертыванием в Базе данных SQL Azure](sql-database-migrate-visualstudio-ssdt.md).

##Экспорт BACPAC и его последующий импорт в Базу данных SQL с помощью среды SSMS
Процесс развертывания можно разделить на два этапа: экспорт и импорт. На первом этапе создается файл BACPAC, который в последствии используется в качестве входных данных на втором этапе.

1.	Подготовка логического сервера с помощью портала управления Azure.
2.	Найдите базу данных-источник в обозревателе объектов среды SSMS и выберите задачу **Развернуть базу данных в Базе данных SQL Azure…**

	![Экспорт приложения уровня данных из меню "Задачи"](./media/sql-database-migrate-ssms/04MigrateusingSSMS.png)

3. В окне мастера экспорта настройте сохранение файла BACPAC на локальный диск или в большой двоичный объект Azure. Экспортированный файл BACPAC всегда содержит полную схему базы данных и по умолчанию данные из всех таблиц. Воспользуйтесь вкладкой "Дополнительно", если необходимо исключить данные из некоторых или всех таблиц. Например, можно экспортировать только данные для ссылочных таблиц.

	![Параметры экспорта](./media/sql-database-migrate-ssms/05MigrateusingSSMS.png)

4.	После создания файла BACPAC подключитесь к серверу, созданному на этапе 1, щелкните правой кнопкой мыши папку **Базы данных** и выберите команду **Импорт приложения уровня данных**.
	
	>[AZURE.NOTE]Примечание. Вы также можете импортировать файл BACPAC, хранящийся в большом двоичном объекте Azure, внутри портала управления Azure.

	![Импорт пункта меню приложения уровня данных](./media/sql-database-migrate-ssms/06MigrateusingSSMS.png)

5.	В мастере импорта выберите файл BACPAC-файл, который вы экспортировали, для создания новой базы данных в Базе данных SQL Azure.

	![Импорт параметров](./media/sql-database-migrate-ssms/07MigrateusingSSMS.png)

6.	Укажите имя базы данных, а также выпуск (уровень служб) и цель обслуживания (уровень производительности).

7.	Следуйте указаниям мастера для импорта файла BACPAC и создания базы данных в Базе данных SQL Azure.

	![Параметры базы данных](./media/sql-database-migrate-ssms/08MigrateusingSSMS.png)

##Альтернативные варианты
Для развертывания базы данных или экспорта и импорта BACPAC также можно воспользоваться служебной программой командной строки sqlpackage.exe. Sqlpackage.exe использует ту же технологию DAC, что и среда SSMS, поэтому результат будет одинаковым. Дополнительные сведения можно найти в разделе [SqlPackage.exe на веб-сайте MSDN](https://msdn.microsoft.com/library/hh550080.aspx).

<!---HONumber=August15_HO9-->