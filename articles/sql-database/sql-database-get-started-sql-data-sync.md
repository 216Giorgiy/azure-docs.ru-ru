<properties
	pageTitle="Начало работы с синхронизацией данных SQL"
	description="Этот учебник поможет вам приступить к работе с синхронизацией данных SQL Azure (предварительная версия)."
	services="sql-database"
	documentationCenter=""
	authors="jennieHubbard"
	manager="jhubbard"
	editor=""/>

<tags
	ms.service="sql-database"
	ms.workload="data-management"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="07/11/2016"
	ms.author="jhubbard"/>


#Приступая к работе с синхронизацией данных SQL Azure (предварительная версия)
В этом учебнике вы ознакомитесь с основами синхронизации данных SQL Azure с использованием классического портала Azure.

Для выполнения приведенных в нем действий необходим минимальный опыт работы с SQL Server и базой данных SQL Azure. В этом учебнике вы создадите гибридную группу синхронизацию (экземпляры SQL Server и базы данных SQL), полностью настроенную и синхронизирующуюся по заданному вами расписанию.

> [AZURE.NOTE] Полная техническая документация по синхронизации данных SQL Azure, которая ранее располагалась на сайте MSDN, доступна в виде PDF-файла. Его можно скачать [здесь](http://download.microsoft.com/download/4/E/3/4E394315-A4CB-4C59-9696-B25215A19CEF/SQL_Data_Sync_Preview.pdf).

## Шаг 1. Подключение к Базе данных SQL Azure

1. Перейдите на [классический портал Azure](http://manage.windowsazure.com).

2. Щелкните **БАЗЫ ДАННЫХ SQL** на левой панели.

3. Щелкните **СИНХРОНИЗИРОВАТЬ** в нижней части страницы. При нажатии кнопки СИНХРОНИЗАЦИЯ появится список элементов, которые можно добавить: **Новая группа** и **Новый агент синхронизации**.

4. Чтобы запустить мастер нового агента синхронизации данных SQL, щелкните **Новый агент синхронизации**

5. Если вы не добавляли агента ранее, **щелкните здесь для его загрузки**.

	![Image1](./media/sql-database-get-started-sql-data-sync/SQLDatabaseScreen-Figure1.PNG)


## Шаг 2. Добавьте агента клиента
Этот шаг необходим только в том случае, если база данных SQL Server, включенная в группу синхронизации, будет размещена на локальных ресурсах. Если в вашей группе синхронизации заданы только экземпляры Базы данных SQL, переходите к этапу 4.

<a id="InstallRequiredSoftware"></a>
### Шаг 2а. Установите требуемое программное обеспечение
Убедитесь, что на компьютере, где установлен агент клиента, установлены следующие компоненты.

- **.NET Framework 4.0**

 Платформу .NET Framework 4.0 можно установить [отсюда](http://go.microsoft.com/fwlink/?linkid=205836).

- **Системные типы CLR Microsoft SQL Server 2008 R2 SP1 (x86)**

 Системные типы CLR Microsoft SQL Server 2008 R2 SP1 (x86) можно установить [отсюда](http://www.microsoft.com/download/en/details.aspx?id=26728).

- **Общие объекты управления Microsoft SQL Server 2008 R2 SP1 (x86)**

 Общие объекты управления Microsoft SQL Server 2008 R2 SP1 (x86) можно установить [отсюда](http://www.microsoft.com/download/en/details.aspx?id=26728).



<a id="InstallClient"></a>
### Шаг 2b. Установка нового агента клиента

Следуйте инструкциям в разделе [Установка агента клиента (синхронизация данных SQL)](http://download.microsoft.com/download/4/E/3/4E394315-A4CB-4C59-9696-B25215A19CEF/SQL_Data_Sync_Preview.pdf) для установки агента.



<a id="RegisterSSDb"></a>
### Шаг 2c. Завершение работы мастера нового агента синхронизации данных SQL

1. 	Вернитесь в мастер нового агента синхронизации данных SQL.
2.	Присвойте агенту понятное имя.
3.	В раскрывающемся списке выберите **РЕГИОН** (центр обработки данных) для размещения этого агента.
4.	В раскрывающемся списке выберите пункт **ПОДПИСКА** для размещения этого агента.
5.	Щелкните стрелку вправо.



## Шаг 3. Зарегистрируйте базу данных SQL Server в агенте клиента

После установки клиентского агента зарегистрируйте каждую локальную базу данных SQL Server, которую следует включить в группу синхронизации агента. Чтобы зарегистрировать базу данных в агенте, выполните указания, приведенные в разделе [Регистрация базы данных SQL Server в клиентском агенте](http://download.microsoft.com/download/4/E/3/4E394315-A4CB-4C59-9696-B25215A19CEF/SQL_Data_Sync_Preview.pdf).



## Шаг 4. Создайте группу синхронизации


<a id="StartNewSGWizard"></a>
### Шаг 4а. Запустите мастер новой группы синхронизации

1.	Вернитесь на [классический портал Azure](http://manage.windowsazure.com).
2.	Нажмите кнопку **БАЗЫ ДАННЫХ SQL**
3.	Щелкните **ДОБАВИТЬ СИНХРОНИЗАЦИЮ** в нижней части страницы, затем выберите пункт "Новая группа синхронизации".

	![Image2](./media/sql-database-get-started-sql-data-sync/NewSyncGroup-Figure2.png)



<a id=""></a>
### Шаг 4b. Укажите базовые настройки


1.	Введите понятное имя для группы синхронизации.
2.	В раскрывающемся списке выберите **РЕГИОН** (центр обработки данных) для размещения этой группы синхронизации.
3. Щелкните стрелку вправо.

	![Image3](./media/sql-database-get-started-sql-data-sync/NewSyncGroupName-Figure3.PNG)


<a id="DefineHubDB"></a>
### Шаг 4c. Определите концентратор синхронизации

1. В раскрывающемся списке выберите экземпляр базы данных SQL, который будет служить концентратором группы синхронизации.
2. Введите учетные данные для этого экземпляра базы данных SQL: **ИМЯ ПОЛЬЗОВАТЕЛЯ КОНЦЕНТРАТОРА** и **ПАРОЛЬ КОНЦЕНТРАТОРА**.
3. Дождитесь подтверждения функцией синхронизации данных SQL ИМЕНИ ПОЛЬЗОВАТЕЛЯ И ПАРОЛЯ. При подтверждении учетных данных зеленая галочка отображается справа от пароля.
4. В раскрывающемся списке выберите политику **РАЗРЕШЕНИЕ КОНФЛИКТОВ**.

 **Выигрывает концентратор** – любые изменения, записанные в центральную базу данных, записываются в справочные базы данных, переопределяя изменения той же записи в справочной базе данных. Функционально это означает, что первое изменение, записанное на концентратор, распространяется на другие базы данных.


 **Выигрывает клиент** – изменения, записанные на концентраторе, переопределяются изменениями в справочных базах данных. Функционально это означает, что последнее изменение, записанное на концентратор, сохраняется и распространяется на другие базы данных.

5.	Щелкните стрелку вправо.

	![Image4](./media/sql-database-get-started-sql-data-sync/NewSyncGroupHub-Figure4.PNG)

<a id="AddRefDB"></a>
### Шаг 4d. Добавьте справочную базу данных


Повторите этот шаг для каждой дополнительной базы данных, которую следует добавить в группу синхронизации.

1. В раскрывающемся списке выберите базу данных, которую следует добавить.

	Базы данных в раскрывающемся списке включают и базы данных SQL Server, которые были зарегистрированы в агенте, и экземпляры баз данных SQL.
2.	Введите учетные данные для этой базы данных: **ИМЯ ПОЛЬЗОВАТЕЛЯ** и **ПАРОЛЬ**.
3.	В раскрывающемся списке выберите **НАПРАВЛЕНИЕ СИНХРОНИЗАЦИИ** для этой базы данных.

	**Двунаправленная** – изменения справочной базы данных записываются в центральную базу данных, а изменения в центральной базе данных записываются в справочную базу данных.

	**Синхронизация из концентратора** – база данных получает обновления от концентратора. Изменения не отправляются на концентратор.

	**Синхронизация в концентратор** – база данных отправляет обновления на концентратор. Изменения в концентраторе не записываются в эту базу данных.

4.	Чтобы завершить создание группы синхронизации, выберите флажок в правом нижнем углу мастера. Дождитесь подтверждения функцией синхронизации данных SQL учетных данных. Зеленая галочка указывает на то, что учетные данные подтверждены.

5.	Еще раз щелкните галочку Это позволит вернуться на страницу **СИНХРОНИЗАЦИЯ** в разделе "Базы данных SQL". Эта группа синхронизации теперь отображается вместе с другими группами синхронизации и агентами.

	![Image5](./media/sql-database-get-started-sql-data-sync/NewSyncGroupReference-Figure5.PNG)


## Шаг 5. Определите данные для синхронизации

При использовании синхронизации данных SQL Azure вы можете выбрать таблицы и столбцы для синхронизации. Если также требуется отфильтровать столбец, чтобы синхронизировались только строки с определенными значениями (например, "Age>=65"), используйте для выбора данных для синхронизации портал синхронизации данных SQL Azure, а также ознакомьтесь с документацией, посвященной выбору таблиц, столбцов и строк для синхронизации.

1.	Вернитесь на [классический портал Azure](http://manage.windowsazure.com).
2.	Нажмите кнопку **БАЗЫ ДАННЫХ SQL**
3.	Щелкните вкладку **СИНХРОНИЗАЦИЯ**.
4.	Щелкните имя этой группы синхронизации.
5.	Щелкните вкладку **ПРАВИЛА СИНХРОНИЗАЦИИ**.
6.	Выберите базу данных, для которой следует предоставить схему группы синхронизации.
7.	Щелкните стрелку вправо.
8.	Щелкните **ОБНОВИТЬ СХЕМУ**.
9.	Для каждой таблицы в базе данных выберите столбцы, которые следует включить в синхронизацию.
	- Столбцы с данными неподдерживаемых типов выбрать нельзя.
	- Если в таблице не выбраны столбцы, она не будет включена в группу синхронизации.
	- Чтобы выбрать все таблицы или отменить их выбор, щелкните «ВЫБРАТЬ» в нижней части экрана.
10.	Щелкните **СОХРАНИТЬ**, затем дождитесь завершения подготовки группы синхронизации.
11.	Чтобы вернуться на главную страницу синхронизации данных, щелкните стрелку назад в левом верхнем углу экрана (над именем группы синхронизации).

	![Image6](./media/sql-database-get-started-sql-data-sync/NewSyncGroupSyncRules-Figure6.PNG)

## Шаг 6. Настройка группы синхронизации

Всегда можно синхронизировать группу синхронизации, щелкнув СИНХРОНИЗАЦИЯ в нижней части главной страницы синхронизации данных. Чтобы выполнять синхронизацию по расписанию, необходимо настроить группу синхронизации.

1.	Вернитесь на [классический портал Azure](http://manage.windowsazure.com).
2.	Нажмите кнопку **БАЗЫ ДАННЫХ SQL**
3.	Щелкните вкладку **СИНХРОНИЗАЦИЯ**.
4.	Щелкните имя этой группы синхронизации.
5.	Выберите вкладку **НАСТРОЙКА**.
6.	**АВТОМАТИЧЕСКАЯ СИНХРОНИЗАЦИЯ**
	- Чтобы настроить группу синхронизации для синхронизации с заданной частотой, щелкните **ВКЛ**. По-прежнему можно выполнить синхронизацию по требованию нажатием кнопки СИНХРОНИЗАЦИЯ.
	- Щелкните **ВЫКЛ**, чтобы настроить группу синхронизации для синхронизации только при нажатии кнопки «СИНХРОНИЗАЦИЯ».
7.	**ЧАСТОТА СИНХРОНИЗАЦИИ**
	- Если включена автоматическая синхронизация, задайте частоту синхронизации. Частота должна быть между 5 минутами и 1 месяцем.
8.	Щелкните **СОХРАНИТЬ**.

![Image7](./media/sql-database-get-started-sql-data-sync/NewSyncGroupConfigure-Figure7.PNG)

Поздравляем! Вы создали группу синхронизации, которая включает и экземпляр базы данных SQL, и базу данных SQL Server.

## Дальнейшие действия
Дополнительные сведения о синхронизации данных SQL и базе данных SQL см. в следующих документах:

* [Загрузка технической документации по синхронизации данных SQL](http://download.microsoft.com/download/4/E/3/4E394315-A4CB-4C59-9696-B25215A19CEF/SQL_Data_Sync_Preview.pdf)
* [Обзор Базы данных SQL](sql-database-technical-overview.md)
* [Управление жизненным циклом базы данных](https://msdn.microsoft.com/library/jj907294.aspx)
 

 

<!---HONumber=AcomDC_0713_2016-->