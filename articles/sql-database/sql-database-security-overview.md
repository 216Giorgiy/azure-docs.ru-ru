---
title: Обзор защиты базы данных SQL Azure | Документация Майкрософт
description: Дополнительные сведения о безопасности баз данных SQL Azure и SQL Server, в том числе описание различий между облачной и локальной базой данных SQL Server.
services: sql-database
author: giladm
manager: craigg
ms.reviewer: carlrab
ms.service: sql-database
ms.custom: security
ms.topic: article
ms.date: 03/12/2018
ms.author: giladm
ms.openlocfilehash: b45e1434d648096a67c2f12046960926d2c7640d
ms.sourcegitcommit: fa493b66552af11260db48d89e3ddfcdcb5e3152
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2018
---
# <a name="securing-your-sql-database"></a>Защита Базы данных SQL

В этой статье рассматриваются основы обеспечения безопасности уровня данных приложения, использующего Базу данных SQL Azure. В частности, эта статья содержит инструкции по началу работы с ресурсами для защиты данных, контроля доступа и упреждающего мониторинга. 

Полный обзор функций безопасности, доступных для всех видов SQL, см. в статье [Центр обеспечения безопасности для базы данных SQL Azure и ядра СУБД SQL Server](https://msdn.microsoft.com/library/bb510589). Дополнительные сведения также см. в [технической документации по безопасности и базе данных SQL Azure](https://download.microsoft.com/download/A/C/3/AC305059-2B3F-4B08-9952-34CDCA8115A9/Security_and_Azure_SQL_Database_White_paper.pdf) (PDF-файл).

## <a name="protect-data"></a>Защита данных

### <a name="encryption"></a>Шифрование
Служба "База данных SQL" обеспечивает защиту данных, шифруя передаваемые данные с использованием протокола [TLS](https://support.microsoft.com/kb/3135244), неактивные данные с использованием [прозрачного шифрования данных](/sql/relational-databases/security/encryption/transparent-data-encryption-azure-sql) и используемые данные с помощью функции [Always Encrypted](https://msdn.microsoft.com/library/mt163865.aspx). 

> [!IMPORTANT]
>Во время каждого сеанса передачи данных в Базу данных SQL Azure и из нее все подключения к базе должны быть зашифрованы (SSL/TLS). В строке подключения приложения необходимо настроить параметры шифрования подключения, а также указать *отсутствие* доверия сертификату сервера (это происходит автоматически при копировании строки подключения с портала Azure), в противном случае подключение не будет проверять подлинность сервера и будет уязвимо для атак типа "злоумышленник в середине". Например, для драйвера ADO.NET это параметры **Encrypt=True** и **TrustServerCertificate=False**. 

Другие способы шифрования данных включают следующее:

* [Шифрование на уровне ячейки](https://msdn.microsoft.com/library/ms179331.aspx) для шифрования определенных столбцов или даже ячеек данных с использованием разных ключей шифрования.
* Если требуется аппаратный модуль безопасности или централизованное управление иерархии ключей шифрования, рассмотрите возможность использования [хранилища ключей Azure с сервером SQL Server на виртуальной машине Azure](http://blogs.technet.com/b/kv/archive/2015/01/12/using-the-key-vault-for-sql-server-encryption.aspx).

### <a name="data-discovery--classification"></a>Обнаружение и классификация данных
Служба обнаружения и классификации данных (в настоящее время находится на этапе предварительной версии) предоставляет расширенные возможности, встроенные в службу "База данных SQL Azure", для обнаружения, классификации, добавления меток и защиты конфиденциальных данных в базах данных. Обнаружение и классификация наиболее конфиденциальных данных (деловых или финансовых, медицинских, персональных данных и т. д.) может играть ключевую роль в концепции защиты информации вашей организации. Она может использоваться в качестве инфраструктуры для следующего:

- Различные сценарии безопасности, такие как мониторинг (аудит) и оповещение об аномальном доступе к конфиденциальным данным.
- Управление доступом к базам данных, содержащим конфиденциальные данные, и усиление их защиты.
- Соблюдение стандартов конфиденциальности данных и нормативных требований.

Дополнительную информацию см. в статье [Обнаружение и классификация данных в службе "База данных SQL Azure"](sql-database-data-discovery-and-classification.md). 

## <a name="control-access"></a>Контроль доступа
База данных SQL защищает данные путем ограничения доступа к ним с помощью правил брандмауэра, механизмов проверки подлинности, предусматривающих идентификацию пользователей, и авторизации доступа на основе членства с учетом ролей и разрешений, а также с использованием безопасности на уровне строк и динамического маскирования данных. Как пользоваться функциями контроля доступа в базе данных SQL см. в [этой статье](sql-database-control-access.md).

> [!IMPORTANT]
> Управление базами данных и логическими серверами в Azure осуществляется путем назначения ролей учетной записи пользователя портала. Дополнительные сведения об этом см. в разделе [Управление доступом на основе ролей на портале Azure](../role-based-access-control/overview.md).
>

### <a name="firewall-and-firewall-rules"></a>Брандмауэр и правила брандмауэра
Чтобы защитить ваши данные, брандмауэр запрещает любой доступ к серверу базы данных, пока вы не укажете компьютеры, у которых есть разрешение на доступ, с использованием [правил брандмауэра](sql-database-firewall-configure.md). Брандмауэр предоставляет доступ к базам данным на основе исходного IP-адреса каждого запроса.

### <a name="authentication"></a>Authentication
В процессе проверки подлинности базы данных SQL предлагается подтвердить личность пользователя при подключении к базе данных. База данных SQL поддерживает два типа аутентификации:
* **Проверка подлинности SQL** с использованием имени пользователя и пароля. При создании логического сервера для базы данных вы указали имя для входа "Администратор сервера" и пароль. Используя эти учетные данные, можно выполнить проверку подлинности для любой базы данных на этом сервере в качестве владельца базы данных (или "dbo"). 
* **Проверка подлинности Azure Active Directory** с использованием удостоверений, контролируемых Azure Active Directory, которая поддерживается управляемыми и интегрированными доменами. [По возможности](https://msdn.microsoft.com/library/ms144284.aspx) используйте проверку подлинности Active Directory (встроенная безопасность). Если вы хотите использовать аутентификацию Azure Active Directory, необходимо создать другого администратора сервера с именем Azure AD admin, которому разрешено администрировать пользователей и группы Azure AD. Этот администратор также может выполнять все операции, доступные обычному администратору. В разделе [Подключение к базе данных SQL с использованием проверки подлинности Azure Active Directory](sql-database-aad-authentication.md) содержится пошаговое руководство по созданию администратора Azure AD для включения аутентификации Azure Active Directory.

### <a name="authorization"></a>Авторизация
Авторизация подразумевает набор действий, которые пользователь может выполнять в базе данных SQL Azure. Такой набор действий определяется принадлежностью к ролям базы данных учетной записи пользователя и разрешениями на уровне объектов. Обычно пользователям рекомендуется предоставлять наименьшие необходимые привилегии. Учетной записи администратора сервера, которая используется для подключения, присвоена роль db_owner, обладатель которой может выполнять любые действия в базе данных. Сохраните эту учетную запись для развертывания обновлений схемы и выполнения других действий по управлению. Для подключения к базе данных из приложения с использованием наименьших привилегий, необходимых приложению, используйте учетную запись "ApplicationUser" с более ограниченными разрешениями.

### <a name="row-level-security"></a>Безопасность на уровне строк
Безопасность на уровне строк позволяет пользователям управлять доступом к строкам в таблице базы данных в зависимости от характеристик пользователя, выполняющего запрос (например, членство в группе или контекст выполнения). Дополнительные сведения см. в статье [Безопасность на уровне строк](https://msdn.microsoft.com/library/dn765131).

### <a name="dynamic-data-masking"></a>Динамическое маскирование данных 
Динамическое маскирование данных базы данных SQL Azure ограничивает возможность раскрытия конфиденциальных данных, маскируя их для обычных пользователей. Служба динамического маскирования данных автоматически обнаруживает потенциально конфиденциальные данные в базе данных SQL Azure и предоставляет практические рекомендации по маскированию этих полей с минимальным влиянием на прикладной уровень. Эта функция работает по принципу обсфукации, скрывая конфиденциальные данные в результирующем наборе запроса по заданным полям базы данных, не меняя сами данные в базе данных. Дополнительную информацию см. в статье [Начало работы с динамическим маскированием данных в базе данных SQL (портал Azure)](sql-database-dynamic-data-masking-get-started.md).

## <a name="proactive-monitoring"></a>Упреждающий мониторинг
База данных SQL обеспечивает защиту данных, предоставляя возможности аудита и обнаружения угроз. 

### <a name="auditing"></a>Аудит
Аудит базы данных SQL позволяет отслеживать ее действия и обеспечивает соответствие нормативным требованиям, записывая события базы данных в журнал аудита в вашей учетной записи службы хранилища Azure. Благодаря аудиту можно узнать об активности в текущей базе данных, а также проанализировать и изучить хронологические действия, чтобы определить потенциальные угрозы или возможные атаки и нарушения безопасности. Дополнительные сведения см. в статье [Приступая к работе с аудитом базы данных SQL](sql-database-auditing.md).  

### <a name="threat-detection"></a>Обнаружение угроз
Обнаружение угроз дополняет аудит, обеспечивая дополнительный уровень аналитики безопасности, встроенной в службу базы данных SQL Azure, которая выявляет подозрительные и потенциально опасные попытки получить доступ к базам данных или использовать их уязвимость. Вы получаете оповещения о подозрительных действиях, потенциальных уязвимостях, атаках путем внедрения кода SQL и аномальных закономерностях в доступе к базам данных. Оповещения об обнаружении угроз можно просмотреть в [центре безопасности Azure](https://azure.microsoft.com/services/security-center/), который предоставляет сведения о подозрительных операциях и дает рекомендации о том, как определить причину угрозы и устранить ее. За использование обнаружения угроз взимается плата в 15 долларов США за сервер в месяц. За первые 60 дней плата не взимается. Дополнительные сведения см. в статье [Приступая к работе с системой обнаружения угроз базы данных SQL](sql-database-threat-detection.md).
 
## <a name="compliance"></a>Соответствие нормативным требованиям
Помимо приведенных выше функций и возможностей, которые могут помочь обеспечить выполнение вашим приложением различных требований безопасности, в отношении Базы данных SQL Azure регулярно проводится аудит, а сама база данных сертифицирована в соответствии с рядом стандартов. Дополнительные сведения см. в [центре управления безопасностью Microsoft Azure](https://azure.microsoft.com/support/trust-center/), где представлен актуальный список [сертификатов соответствия базы данных SQL](https://azure.microsoft.com/support/trust-center/services/).


## <a name="security-management"></a>Управление безопасностью

База данных SQL помогает управлять безопасностью данных, предоставляя отчеты о сканировании базы данных и централизованную панель мониторинга безопасности с помощью [оценки уязвимостей SQL](sql-vulnerability-assessment.md).

**Оценка уязвимостей.** [Оценка уязвимостей SQL](sql-vulnerability-assessment.md) (сейчас находится на этапе предварительной версии) — это легко настраиваемый инструмент, встроенный в Базу данных SQL Azure, который поможет вам обнаруживать, отслеживать и устранять потенциальные уязвимости базы данных. Он выполняет сканирование уязвимостей в базе данных и создает отчет, который дает представление о состоянии безопасности и содержит действенные меры по устранению проблем безопасности и усилению безопасности базы данных. Отчет об оценке можно настроить для своей среды, задав приемлемые базовые показатели для конфигураций разрешений, конфигураций функций и параметров базы данных. Это поможет вам в следующих аспектах:

- Соблюдение нормативных требований, требующих отчетов о сканировании базы данных. 

- Соблюдение стандартов конфиденциальности данных. 

- Мониторинг динамической среды базы данных, в которой сложно отслеживать изменения.

Дополнительные сведения см. в статье об [оценке уязвимостей SQL](sql-vulnerability-assessment.md).

## <a name="next-steps"></a>Дополнительная информация

- Как пользоваться функциями контроля доступа в базе данных SQL см. в [этой статье](sql-database-control-access.md).
- Обсуждение аудита баз данных см. в разделе [Аудит базы данных SQL](sql-database-auditing.md).
- Обсуждение обнаружение угроз см. в разделе [Обнаружение угроз для базы данных SQL](sql-database-threat-detection.md).
