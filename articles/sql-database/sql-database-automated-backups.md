<properties
   pageTitle="Резервные копии базы данных SQL | Microsoft Azure"
   description="Сведения о встроенной функции резервного копирования базы данных SQL, которая позволяет выполнить откат базы данных SQL Azure до определенного момента времени в прошлом или скопировать базу данных в новую базу данных в другом географическом регионе (до 35 дней)."
   services="sql-database"
   documentationCenter=""
   authors="CarlRabeler"
   manager="jhubbard"
   editor="monicar"/>

<tags
   ms.service="sql-database"
   ms.devlang="NA"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="NA"
   ms.date="09/26/2016"
   ms.author="carlrab"/>

# Резервные копии базы данных SQL

База данных SQL автоматически создает резервные копии базы данных в рамках предложения службы. Это не предполагает ни предоставления отдельного согласия, ни дополнительных затрат. Эти резервные копии можно использовать для восстановления базы данных на более ранний момент времени. В этой статье объясняются особенности функции резервного копирования в базе данных SQL.

## Что такое резервная копия базы данных?  

Резервная копия базы данных — это файл, который хранит сведения о состоянии базы данных на определенный момент времени. База данных SQL создает [полные](https://msdn.microsoft.com/library/ms186289.aspx) и [разностные](https://msdn.microsoft.com/library/ms175526.aspx) резервные копии, а также резервные копии [журналов транзакций](https://msdn.microsoft.com/library/ms191429.aspx). При восстановлении базы данных на определенный момент времени служба сама определяет, какие резервные копии следует восстановить.

Резервные копии базы данных являются важной частью любой стратегии непрерывности бизнес-процессов и аварийного восстановления, так как они защищают данные от случайного повреждения или удаления. Дополнительные сведения см. в статье [Обзор обеспечения непрерывности бизнес-процессов с помощью базы данных SQL Azure](sql-database-business-continuity.md).

## Геоизбыточное хранилище

Служба базы данных SQL сохраняет файлы резервных копий баз данных в учетной записи геоизбыточного хранилища с доступом для чтения (RA-GRS). Компонент RA-GRS службы хранилища Azure реплицирует файлы резервных копий в [сопряженный центр обработки данных](../best-practices-availability-paired-regions.md). Географическая репликация гарантирует, что вы сможете восстановить базу данных даже при отсутствии доступа к резервной копии базы данных, размещенной в регионе базы данных-источника. В следующем примере база данных SQL создает резервные копии базы данных в регионе "Восточная часть США" и сохраняет их в учетной записи RA-GRS. Затем служба хранилища Azure выполняет георепликацию резервных копий в сопряженный центр обработки данных, расположенный в регионе "Западная часть США".

![геовосстановление](./media/sql-database-geo-restore/geo-restore-1.png)

>[AZURE.NOTE] В службе хранилища Azure термин *репликация* обозначает копирование файлов из одного расположения в другое. *Репликация базы данных SQL* означает хранение нескольких баз данных-получателей, синхронизированных с основной базой данных.

Дополнительная информация:
- геоизбыточное хранилище описано в статье [Репликация службы хранилища Azure](../storage/storage-redundancy.md);
- хранилище RA-GRS описано в разделе [Геоизбыточное хранилище с доступом для чтения](../storage/storage-redundancy.md#read-access-geo-redundant-storage).

## Стоимость резервных копий базы данных

База данных SQL Microsoft Azure бесплатно предоставляет хранилище для резервных копий размером до 200 % от максимального объема подготовленного хранилища базы данных. Например, если вы используете экземпляр базы данных уровня "Стандартный" с подготовленным размером базы данных 250 ГБ, вам будет предоставлено бесплатное хранилище службы архивации объемом 500 ГБ. Если база данных будет использовать больший объем хранилища, вы можете сократить период хранения, обратившись в службу поддержки Azure. Другой вариант — оплачивать превышение объема для хранения резервных копий по стандартной ставке для географически избыточного хранилища с доступом для чтения (RA-GRS).

## Расписание резервного копирования базы данных

Все базы данных уровня "Базовый", "Стандартный" и "Премиум" защищаются за счет создания автоматических резервных копий. Полные резервные копии создаются каждую неделю, разностные резервные копии создаются каждый час, а резервные копии журналов транзакций создаются каждые 5 минут. Первое полное резервное копирование планируется сразу после создания базы данных. Обычно оно занимает не более 30 минут, но для базы данных большого размера может потребоваться больше времени. Например, начальное резервное копирование будет выполняться дольше для восстановленной базы данных или копии базы данных. После первого полного резервного копирования все последующие операции резервного копирования планируются автоматически и управляются без участия пользователя в фоновом режиме. Точное время создания полных и [разностных](https://msdn.microsoft.com/library/ms175526.aspx) копий базы данных определяется с учетом распределения общей рабочей нагрузки в системе.

## Срок хранения резервной копии

Период хранения каждой резервной копии базы данных SQL: 7 дней для уровня "Базовый", а также 35 дней для уровней "Стандартный" и "Премиум". Ознакомьтесь с подробной информацией о возможностях каждого [уровня службы](sql-database-service-tiers.md).

### Что произойдет со сроком хранения точек восстановления при переходе на более низкий или высокий уровень служб?

После понижения уровня производительности базы данных срок хранения точек восстановления сразу же сократится до используемого на новом уровне. В случае повышения уровня служб срок хранения будет увеличиваться только после обновления базы данных. Например если уровень службы для базы данных понижается до уровня "Базовый", срок хранения уменьшается с 35 до 7 дней. Сразу же после этого все точки восстановления старше семи дней станут недоступны. При повышении уровня службы для базы данных до уровня "Стандартный" или "Премиум" срок хранения увеличивается от 7 до 35 дней.

### Каков срок хранения удаленных баз данных? 

Срок хранения определяется в зависимости от уровня службы базы данных во время ее существования или от количества дней, в течение которых существовала база данных. Выбирается меньшее значение.

> [AZURE.IMPORTANT] Когда вы удаляете экземпляр сервера базы данных SQL Azure, все связанные базы данных также будут удалены без возможности восстановления. Удаленный сервер восстановить невозможно.


## Распространенные варианты использования резервных копий базы данных

Чаще всего резервные копии баз данных используются для восстановления состояния базы данных на определенный момент времени в пределах срока хранения. Резервная копия базы данных позволяет восстановить базу данных на момент времени, восстановить удаленную базу данных на момент удаления или восстановить базу данных в другой географический регион.

- Дополнительные сведения о восстановлении базы данных см. в статье [Восстановление базы данных Azure SQL с помощью создаваемых автоматически резервных копий](sql-database-recovery-using-backups.md).

Резервную копию базы данных можно использовать для копирования базы данных на логический сервер SQL в любом географическом регионе. Такая копия будет транзакционно согласованной с текущей версией базы данных SQL.

- Дополнительные сведения о копировании базы данных см. в статье [Копирование Базы данных SQL Azure](sql-database-copy.md).

Также вы можете хранить автоматически создаваемые резервные копии в течение более долгого срока, создав копию базы данных и [экспортировав ее в BACPAC-файл](sql-database-export.md). Созданный BACPAC-файл можно архивировать в долговременное хранилище на срок, превышающий стандартный срок хранения. Также BACPAC-файл позволяет передать копию базы данных на сервер SQL Server, развернутый локально или на виртуальной машине Azure.

- Дополнительные сведения об архивировании резервной копии базы данных см. в разделе [Копирование Базы данных SQL Azure](sql-database-copy.md).


## Связанные разделы

### Сценарии

- Об обеспечении непрерывности бизнес-процессов можно узнать в [обзоре непрерывности бизнес-процессов](sql-database-business-continuity.md).

### Функции

Дополнительная информация:

- Восстановление резервной копии базы данных описано в статье [Восстановление базы данных Azure SQL с помощью создаваемых автоматически резервных копий](sql-database-recovery-using-backups.md).
- Архивирование резервной копии базы данных описано в статье [Копирование Базы данных SQL Azure](sql-database-copy.md).
- Более быстрые варианты восстановления описаны в статье [об активной георепликации](sql-database-geo-replication-overview.md).

<!-- ### Tasks -->

<!-- ### Tutorials -->

<!---HONumber=AcomDC_0928_2016-->