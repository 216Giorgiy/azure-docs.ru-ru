<properties
   pageTitle="Сведения о резервных копиях базы данных SQL | Microsoft Azure" 
   description="Сведения о встроенной функции резервного копирования базы данных SQL, которая позволяет восстановить базу данных SQL Azure до состояния на определенный момент времени в прошлом или скопировать базу данных в новую базу данных в другом географическом регионе (до 35 дней)."
   services="sql-database"
   documentationCenter=""
   authors="CarlRabeler"
   manager="jhubbard"
   editor="monicar"/>

<tags
   ms.service="sql-database"
   ms.devlang="NA"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="NA"
   ms.date="09/26/2016"
   ms.author="carlrab"/>




<!-- # H1 Title

 H1 title should answer the question "What is in this topic?" Write the title in conversational language and use search key words as much as possible. Since this is a learning topic, make sure the title indicates that and doesn't mislead people to think this will tell them how to do tasks.  
-->

# <a name="learn-about-sql-database-backups"></a>Подробнее о резервном копировании базы данных SQL

<!-- Introduction

1. Sentence #1 begins with "Learn about ..." and gives the scope of what the article will cover.
2. Sentence #2 explains the key capability or selling point of the feature.
3. Sentence #3 begins with "Use this feature to ..." and gives a common use case.

-->

База данных SQL создает локальные резервные копии базы данных каждые пять минут и использует геоизбыточное хранилище Azure (RA-GRS) с доступом на чтение для копирования некоторых резервных копий базы данных в другую географическую область. Эти резервные копии создаются **автоматически и без дополнительной платы**. Локальные резервные копии можно использовать для [восстановления базы данных на более ранний момент времени](sql-database-point-in-time-restore-portal.md) на том же сервере. Геоизбыточные резервные копии можно использовать для [восстановления базы данных в другом географическом регионе](sql-database-geo-restore-portal.md).  

>[AZURE.NOTE] Как локальные, так и геоизбыточные резервные копии создаются автоматически. Не нужно ничего делать для того, чтобы это происходило, и за это не взимается дополнительная плата. 

На приведенной ниже схеме База данных SQL запущена в восточной части США. Она создает резервную копию базы данных каждые пять минут, которую сохраняет локально в геоизбыточном хранилище Azure с доступом на чтение (RA-GRS). Служба Azure копирует резервные копии базы данных в сопряженный центр обработки данных, расположенный в регионе "Западная часть США".

![Геовосстановление](./media/sql-database-geo-restore/geo-restore-1.png)

<!--## What is <feature>?" -->

## <a name="what-is-a-sql-database-backup"></a>Что такое резервная копия Базы данных SQL?  

<!-- 
First sentence begins with "The <feature> is ..." followed by a definition of the feature. Provide a 1-2 paragraph intro to explain what the feature is, how it works, and the importance of the feature for solving business problems.
-->
Резервная копия Базы данных SQL — это файл, который хранит сведения о состоянии базы данных на определенный момент времени. База данных SQL использует для создания локальных [полных](https://msdn.microsoft.com/library/ms186289.aspx), [разностных](https://msdn.microsoft.com/library/ms175526.aspx ) резервных копий и резервных копий [журналов транзакций](https://msdn.microsoft.com/library/ms191429.aspx) технологию SQL Server. Резервные копии журналов транзакций создаются каждые пять минут. Это позволяет осуществить восстановление на определенный момент времени на том же сервере, на котором размещена база данных. При восстановлении базы данных служба сама определяет, какие резервные копии (полные, разностные или резервные копии журналов транзакций) следует восстановить.

>[AZURE.NOTE] База данных SQL автоматически создает как локальные резервные копии базы данных, так и геоизбыточные резервные копии. Не нужно ничего делать для того, чтобы это происходило. Дополнительная плата не требуется.

Резервные копии базы данных используются в следующих случаях.

- Восстановление базы данных на определенный момент времени в течение периода хранения. Резервная копия базы данных позволяет восстановить базу данных на момент времени, восстановить удаленную базу данных на момент удаления или восстановить базу данных в другой географический регион. Инструкции по восстановлению см. в разделе [Восстановление базы данных из резервной копии](sql-database-recovery-using-backups.md).

- Копирование базы данных на сервер SQL в том же самом или в другом регионе. Такая копия будет транзакционно согласованной с текущей версией базы данных SQL. Инструкции по копированию см. в разделе [Копирование базы данных](sql-database-copy.md).

- Резервное копирование базы данных за пределами срока хранения резервной копии. Чтобы выполнить архивацию, [экспортируйте Базу данных SQL в BACPAC-файл](sql-database-export.md). Затем BACPAC-файл можно архивировать в долговременное хранилище на срок, превышающий стандартный срок хранения. Также BACPAC-файл позволяет передать копию базы данных на сервер SQL Server, развернутый локально или на виртуальной машине Azure.

## <a name="backups-have-geographical-redundancy"></a>Резервные копии имеют географическую избыточность

База данных SQL использует для резервного копирования базы данных в другое географическое расположение [репликацию хранилища Azure](../storage/storage-redundancy.md). Чтобы обеспечить геоизбыточное хранение, База данных SQL сохраняет файлы локальных резервных копий базы данных в учетной записи [геоизбыточного хранилища с доступом на чтение (RA-GRS)](../storage/storage-redundancy.md#read-access-geo-redundant-storage). Azure реплицирует файлы резервных копий в [сопряженный центр обработки данных](../best-practices-availability-paired-regions.md). Географическая репликация гарантирует, что вы сможете восстановить базу данных даже при отсутствии доступа к резервной копии базы данных, размещенной в регионе базы данных-источника. 

>[AZURE.NOTE] В службе хранилища Azure термин *репликация* обозначает копирование файлов из одного расположения в другое. *Репликация базы данных SQL* означает хранение нескольких баз данных-получателей, синхронизированных с основной базой данных. 


## <a name="how-much-backup-storage-is-included-at-no-cost"></a>Сколько места для хранения резервных копий предоставляется бесплатно?

База данных SQL бесплатно предоставляет хранилище для резервных копий размером до 200 % от максимального объема подготовленного хранилища базы данных. Например, если вы используете экземпляр базы данных уровня "Стандартный" с подготовленным размером базы данных 250 ГБ, вам будет предоставлено бесплатное хранилище службы архивации объемом 500 ГБ. Если база данных будет использовать больший объем хранилища, вы можете сократить период хранения, обратившись в службу поддержки Azure. Другой вариант — оплачивать превышение объема для хранения резервных копий по стандартной ставке для географически избыточного хранилища с доступом для чтения (RA-GRS). 

## <a name="how-often-do-backups-happen"></a>Как часто создаются резервные копии?

Полные резервные копии создаются каждую неделю, разностные резервные копии создаются каждый час, а резервные копии журналов транзакций создаются каждые 5 минут. Первое полное резервное копирование планируется сразу после создания базы данных. Обычно оно занимает не более 30 минут, но для базы данных большого размера может потребоваться больше времени. Например, начальное резервное копирование будет выполняться дольше для восстановленной базы данных или копии базы данных. После первого полного резервного копирования все последующие операции резервного копирования планируются автоматически и управляются без участия пользователя в фоновом режиме. Точное время создания полных и [разностных](https://msdn.microsoft.com/library/ms175526.aspx) копий базы данных определяется с учетом распределения общей рабочей нагрузки в системе. 

## <a name="how-long-do-you-keep-my-backups"></a>Как долго хранятся мои резервные копии?

Каждая резервная копия Базы данных SQL имеет свой срок хранения, который определяется по [уровню служб](sql-database-service-tiers.md) базы данных. Сроки хранения для разных баз данных

- Уровень служб "Базовый" — 7 дней.
- Уровень служб "Стандартный" — 35 дней.
- Уровень служб "Премиум" — 35 дней.


При переходе на более низкий уровень служб базы данных с уровня "Стандартный" или "Премиум" на "Базовый" резервные копии сохраняются в течение семи дней. Все существующие резервные копии старше семи дней становятся недоступными. 

При переходе на более высокий уровень служб базы данных с уровня "Базовый" на "Стандартный" или "Премиум" База данных SQL сохраняет существующие резервные копии до 35 дней. Она хранит новые резервные копии в течение 35 дней.
 
При удалении базы данных База данных SQL хранит резервные копии так же, как и для базы данных в Интернете. Например, предположим, что была удалена база данных уровня "Базовый", имеющая срок хранения 7 дней. Резервная копия, хранящаяся четыре дня, будет храниться еще три дня.

> [AZURE.IMPORTANT] Если вы удаляете сервер SQL Azure, на котором размещены базы данных SQL, все связанные с ним базы данных также будут удалены без возможности восстановления. Удаленный сервер восстановить невозможно.

## <a name="next-steps"></a>Дальнейшие действия

Резервные копии базы данных являются важной частью любой стратегии непрерывности бизнес-процессов и аварийного восстановления, так как они защищают данные от случайного повреждения или удаления. Сведения о том, как можно использовать резервные копии базы данных в бизнес-стратегиях, см. в статье [Непрерывность бизнес-процессов](sql-database-business-continuity.md).





<!--HONumber=Oct16_HO2-->


