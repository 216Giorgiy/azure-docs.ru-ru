<properties pageTitle="Подключение к базе данных SQL с помощью SQL Server Management Studio в Azure RemoteApp | Microsoft Azure" description="Из этого руководства вы узнаете, как с помощью SQL Server Management Studio в Azure RemoteApp обеспечить безопасность и производительность при подключении к базе данных SQL." services="sql-database" documentationCenter="" authors="adhurwit" manager="" tags=""//>

<tags 
	ms.service="sql-database" 
	ms.workload="data" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="11/20/2015" 
	ms.author="adhurwit"/>

# Подключение к базе данных SQL с помощью SQL Server Management Studio в Azure RemoteApp

## Введение  
В этом руководстве показано, как использовать SQL Server Management Studio (SSMS) в Azure RemoteApp для подключения к базе данных SQL. Здесь приведены пошаговые инструкции по настройке SQL Server Management Studio в Azure RemoteApp, описаны преимущества и показаны функции безопасности, которые можно использовать в Azure Active Directory.

**Предполагаемое время выполнения:** 45 минут.

## SSMS в Azure RemoteApp

Azure RemoteApp — это служба удаленных рабочих столов в Azure, предоставляющая приложения. Узнать о ней больше можно здесь: [Что такое Azure RemoteApp?](../remoteapp-whatis.md)

При запуске в Azure RemoteApp SSMS обеспечивает те же возможности, что и при локальном запуске.

![Снимок экрана: выполнение SSMS в Azure RemoteApp][1]



## Преимущества

Использование SSMS в Azure RemoteApp дает ряд преимуществ, в том числе перечисленные далее.

- Порту 1433 на сервере Azure SQL Server не нужно предоставлять внешний доступ (за пределами Azure).
- Нет необходимости добавлять и удалять IP-адреса в брандмауэре сервера Azure SQL Server, как раньше. 
- Все подключения к Azure RemoteApp выполняются по протоколу HTTPS к порту 443 с помощью зашифрованного протокола удаленного рабочего стола.
- Предусмотрена возможность масштабирования и поддержка многопользовательского режима.
- При использовании SSMS в одном регионе с базой данных SQL повышается производительность.
- Можно проводить аудит использования Azure RemoteApp с помощью выпуска Azure Active Directory Premium Edition, который поддерживает функцию отчетности о действиях пользователя.
- Можно включить многофакторную проверку подлинности (MFA).
- Доступ к SSMS можно получить в любом месте с помощью одного из поддерживаемых клиентов Azure RemoteApp, включая iOS, Android, Mac, Windows Phone и ПК под управлением Windows.


## Создание коллекции Azure RemoteApp

Ниже приведены шаги по созданию коллекции Azure RemoteApp с помощью SSMS.


### 1\. Создание новой виртуальной машины Windows из образа
Чтобы создать новую виртуальную машину, используйте образ Windows Server Remote Desktop Session Host Windows Server 2012 R2 из коллекции.


### 2\. Установка SSMS из SQL Express

Перейдите на новую виртуальную машину, а затем на эту страницу загрузки: [Microsoft® SQL Server® 2014 Express](https://www.microsoft.com/ru-RU/download/details.aspx?id=42299).

Здесь можно скачать только SSMS. После загрузки перейдите в каталог установки и запустите программу установки SSMS.

Также необходимо установить SQL Server 2014 с пакетом обновления 1. Файл для скачивания доступен здесь: [Microsoft SQL Server 2014 с пакетом обновления 1 (SP1)](https://www.microsoft.com/ru-RU/download/details.aspx?id=46694).

SQL Server 2014 с пакетом обновления 1 включает основные функциональные возможности для работы с базой данных SQL Azure.


### 3\. Запуск сценария проверки и средства SysPrep

На рабочем столе виртуальной машины вы найдете сценарий PowerShell с именем Validate (проверка). Запустите его двойным щелчком мыши. Сценарий проверит, готова ли виртуальная машина для удаленного размещения приложений. После завершения проверки вам будет предложено запустить средство SysPrep. Запустите его.

Завершив работу, средство SysPrep также завершит работу виртуальной машины.

Дополнительные сведения о создании образа Azure RemoteApp см. в блоге [Создание образа шаблона RemoteApp в Azure](http://blogs.msdn.com/b/rds/archive/2015/03/17/how-to-create-a-remoteapp-template-image-in-azure.aspx).


### 4\. Запись образа

Если виртуальная машина остановлена, найдите ее на текущем портале и запишите ее образ.

Дополнительные сведения о записи образа см. в статье [Запись образа виртуальной машины Azure Windows, созданной с использованием классической модели развертывания](../virtual-machines-capture-image-windows-server.md).


### 5\. Добавление образа к образам шаблонов Azure RemoteApp

В разделе Azure RemoteApp на текущем портале перейдите на вкладку «Образы шаблона» и нажмите кнопку «Добавить». Во всплывающем окне выберите «Импортировать образ из библиотеки виртуальных машин» и укажите только что созданный образ.



### 6\. Создание облачной коллекции

На текущем портале создайте новую облачную коллекцию Azure RemoteApp. Выберите только что импортированный образ шаблона с установленным на нем набором SSMS.

![Создание облачной коллекции][2]


### 7\. Публикация SSMS

На вкладке «Публикация» новой облачной коллекции в меню «Пуск» выберите пункт «Опубликовать приложение» и укажите SSMS из списка.

![Публикация приложения][5]

### 8\. Добавление пользователей

На вкладке «Доступ пользователей» можно выбрать пользователей для предоставления доступа к этой коллекции Azure RemoteApp, которая включает только SSMS.

![Добавить пользователя][6]


### 9\. Установка клиентского приложения Azure RemoteApp

Клиент Azure RemoteApp можно скачать и установить отсюда: [Загрузка | Azure RemoteApp](https://www.remoteapp.windowsazure.com/en/clients.aspx).



## Настройка Azure SQL Server

Теперь осталось разрешить использование служб Azure в брандмауэре. При использовании этого решения вам больше не понадобится добавлять какие-либо IP-адреса, чтобы открыть брандмауэр. Сетевой трафик, разрешенный для SQL Server, поступает из других служб Azure.


![Разрешение Azure][4]



## Многофакторная проверка подлинности (MFA)

Многофакторную проверку подлинности можно включить специально для этого приложения. Перейдите на вкладку «Приложения» в Azure Active Directory. Здесь вы найдете запись для Microsoft Azure RemoteApp. Если вы выберете приложение, а затем начнете его настраивать, откроется показанная ниже страница, на которой можно включить многофакторную проверку подлинности для этого приложения.

![Включение MFA][3]



## Аудит действий пользователей с помощью Azure Active Directory Premium

Если у вас нет выпуска Azure AD Premium, необходимо включить его в разделе «Лицензии» каталога. Если выпуск Premium включен, вы сможете назначить пользователям уровень «Премиум».

При переходе к пользователю в Azure Active Directory можно перейти на вкладку «Действия», чтобы просмотреть сведения о входе в Azure RemoteApp.



## Дальнейшие действия

Выполнив все указанные выше шаги, вы сможете запустить клиент Azure RemoteApp и выполнить вход от имени назначенного пользователя. Среди ваших приложений отобразится SSMS. Вы сможете запустить это приложение, как если бы оно было установлено на компьютере с доступом к Azure SQL Server.

Дополнительные сведения о подключении к базе данных SQL см. в статье [Соединение с SQL Server Management Studio (SSMS)](sql-database-connect-to-database.md).


  Вот и все!



<!--Image references-->
[1]: ./media/sql-database-ssms-remoteapp/ssms.png
[2]: ./media/sql-database-ssms-remoteapp/newcloudcollection.png
[3]: ./media/sql-database-ssms-remoteapp/mfa.png
[4]: ./media/sql-database-ssms-remoteapp/allowazure.png
[5]: ./media/sql-database-ssms-remoteapp/publish.png
[6]: ./media/sql-database-ssms-remoteapp/user.png

<!---HONumber=AcomDC_0107_2016-->