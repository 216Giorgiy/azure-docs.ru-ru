<properties
	pageTitle="Сравнение базы данных SQL (PaaS) с SQL Server в облаке на виртуальных машинах (IaaS) | Microsoft Azure"
	description="Узнайте, какой вариант SQL Server подходит для вашего приложения: база данных SQL Azure (PaaS) или SQL Server в облаке на виртуальных машинах Azure."
	services="sql-database, virtual-machines"
	keywords="облако SQL Server, SQL Server в облаке, база данных SaaS, облачный SQL Server, DBaaS"
	documentationCenter=""
	authors="carlrabeler"
	manager="jhubbard"
	editor="cjgronlund"/>

<tags
	ms.service="sql-database"
	ms.workload="data-management"
	ms.tgt_pltfrm="vm-windows-sql-server"
	ms.devlang="na"
	ms.topic="get-started-article"
	ms.date="06/21/2016"
	ms.author="carlrab"/>

# Вы можете выбрать компонент SQL Server в облаке: база данных SQL Azure (PaaS) или SQL Server на виртуальных машинах Azure (IaaS)

Доступны два варианта размещения рабочих нагрузок SQL Server в Microsoft Azure:

* [База данных SQL Azure](https://azure.microsoft.com/services/sql-database/). Собственная облачная база данных SQL, которая предоставляется по модели "платформа как услуга" (PaaS) или "база данных как услуга" (DBaaS). Она оптимизирована для разработки приложений "программное обеспечение как услуга" (SaaS). Эта база данных совместима с большинством функций SQL Server.
* [SQL Server на виртуальных машинах Azure](https://azure.microsoft.com/services/virtual-machines/sql-server/). Сервер SQL Server, который установлен и работает на виртуальных машинах Windows Server в облаке Azure, предоставляется по модели "инфраструктура как услуга" (IaaS).

Мы расскажем вам, как эти варианты сочетаются с платформой Microsoft Data, и поможем правильно выбрать решение, соответствующее потребностям вашей компании. Независимо от ваших приоритетов, будь то сокращение затрат или минимальное администрирование, эта статья поможет определить, какой подход отвечает самым важным требованиям вашей компании.


## Платформа Microsoft Data

Одна из первых вещей, которые нужно определить до обсуждения, — можете ли вы использовать базы данных Azure и локальные базы данных SQL Server совместно. Платформа Microsoft Data использует технологию SQL Server, поэтому она доступна для физических локальных компьютеров, частных облачных сред (в том числе для размещенных облачных сред сторонних поставщиков) и для общедоступного облака. Это позволяет вам обеспечить соответствие различным уникальным бизнес-требованиям с помощью сочетания локальных и облачных развертываний, используя в этих средах один и тот же набор серверных продуктов, средств разработки и приобретенный опыт.

   ![Варианты облачной БД SQL Server: SQL Server (IaaS) или база данных SQL в облаке (SaaS).](./media/data-management-azure-sql-database-and-sql-server-iaas/SQLIAAS_SQL_Server_Cloud_Continuum.png)

Как видно на схеме, каждый предложенный вариант можно охарактеризовать по уровню администрирования его инфраструктуры (по оси X) и по степени эффективности затрат, которая достигается за счет консолидации на уровне базы данных и автоматики, (по оси Y).

При разработке приложения доступны четыре основных параметра размещения части SQL Server приложения:

- SQL Server на невиртуализированных физических компьютерах;
- SQL Server в локальных виртуальных машинах (частное облако);
- SQL Server в виртуальной машине Azure (общедоступное облако Microsoft);
- база данных SQL Azure (общедоступное облако Microsoft).

В следующих разделах мы рассмотрим SQL Server в общедоступном облаке Microsoft, т. е. базу данных SQL Azure и SQL Server на виртуальных машинах Azure. Кроме того, мы ознакомимся с общими бизнес-мотивациями, чтобы определить лучший вариант для вашего приложения.

## Более детальный обзор базы данных SQL Azure и SQL Server на виртуальных машинах Azure

**База данных SQL Azure** — это реляционная база данных, которая предоставляется как услуга (DBaaS), размещается в облаке Azure и относится к отраслевым категориям *программное обеспечение как услуга (SaaS)* и *платформа как услуга (PaaS)*. [База данных SQL](sql-database-technical-overview.md) создана на основе стандартного аппаратного и программного обеспечения, которое принадлежит корпорации Майкрософт, размещается и обслуживается ею. Встроенные функции и функциональные возможности базы данных SQL позволяют разрабатывать приложения непосредственно в службе. При использовании базы данных SQL вы платите по мере использования и имеете возможность увеличивать масштаб базы данных или развертывать ее для повышения производительности без прерывания работы.

**SQL Server на виртуальных машинах Azure** относится к отраслевой категории *инфраструктура как услуга (IaaS)* и позволяет запускать SQL Server на виртуальной машине в облаке. Как и база данных SQL, он создан на основе стандартного аппаратного и программного обеспечения, которое принадлежит корпорации Майкрософт, размещается и обслуживается ею. При использовании SQL Server на виртуальной машине вы можете использовать собственную лицензию SQL Server или выбрать предварительно лицензированный образ SQL Server на портале Azure.

Как правило, эти два варианта использования SQL оптимизированы для разных целей:

- **База данных SQL** оптимизирована таким образом, чтобы уменьшить общие затраты на подготовку нескольких баз данных и управление ими. Она снижает затраты на текущее администрирование, поскольку вам не требуется управлять виртуальными машинами, операционными системами или программным обеспечением баз данных. Это также касается обновлений, высокой доступности и [резервных копий](sql-database-automated-backups.md). В целом база данных SQL Azure позволяет значительно увеличить количество баз данных, которыми может управлять один сотрудник отдела ИТ или разработки.
- ** SQL Server, выполняемый на виртуальных машинах Azure**, оптимизирован для расширения существующих локальных приложений SQL Server в облако в гибридном сценарии или для развертывания существующего приложения в Azure при миграции или при разработке и тестировании. Пример гибридного сценария — хранение в Azure вторичных реплик баз данных с использованием [виртуальных сетей Azure](../virtual-network/virtual-networks-overview.md). Если SQL Server выполняется на виртуальных машинах Azure, вы обладаете всеми правами администратора в выделенном экземпляре SQL Server и облачной виртуальной машине. Это идеальный выбор, если в организации имеются ИТ-ресурсы для обслуживания виртуальных машин. Кроме того, SQL Server на виртуальных машинах позволяет персонализировать систему с учетом требований конкретного приложения к производительности и доступности.

В следующей таблице представлены основные характеристики базы данных SQL и SQL Server на виртуальных машинах Azure.

| | База данных SQL | SQL Server на виртуальной машине Azure|
| -------------- | ------------ | ---------------------- |
| **Области предназначения** | Новые облачные приложения с ограниченными сроками разработки и маркетинга. | Существующие приложения, которым требуется быстрая миграция в облако с минимальными изменениями. Сценарии быстрой разработки и тестирования без покупки оборудования для дополнительного локального сервера SQL Server. |
|| Приложения, которым требуются такие встроенные возможности, как высокая доступность, аварийное восстановление и обновление. | Приложения, которым не требуются такие встроенные возможности, как высокая доступность, аварийное восстановление и обновление. |
||Разработчики, которые не хотят тратить силы на настройку конфигурации и базовой операционной системы.| Если вам требуется настраиваемая ИТ-среда со всеми правами администратора.|
||Базы данных размером до 1 ТБ или более крупные, которые можно [секционировать горизонтально или вертикально](sql-database-elastic-scale-introduction.md#horizontal-and-vertical-scaling), используя шаблон масштабирования.|Базы данных размером больше 1 ТБ, которые нельзя секционировать [горизонтально или вертикально](sql-database-elastic-scale-introduction.md#horizontal-and-vertical-scaling).|
||[Создание приложений по модели "программное обеспечение как услуга" (SaaS)](sql-database-design-patterns-multi-tenancy-saas-applications.md).| Создание гибридных приложений.|
|||||
|**Ресурсы:**|Вы не хотите нанимать сотрудников в ИТ-отдел для поддержки и обслуживания базовой инфраструктуры, а хотите сосредоточиться на уровне приложений.|У вас есть ИТ-ресурсы для поддержки и обслуживания.|
|**Совокупная стоимость владения**|Устраняет расходы на оборудование и уменьшает затраты на администрирование.|Сводит затраты на оборудование к нулю.|
|**Непрерывность бизнес-процессов**|Кроме встроенных возможностей отказоустойчивости инфраструктуры, база данных SQL Azure предоставляет такие функции непрерывной работы, как [автоматизированная архивация](sql-database-automated-backups.md), [восстановление до точки во времени](sql-database-recovery-using-backups.md#point-in-time-restore), [геовосстановление](sql-database-recovery-using-backups.md#geo-restore) и [активная георепликация](sql-database-active-geo-replication.md). Дополнительные сведения см. в [обзоре непрерывности бизнес-процессов баз данных SQL](sql-database-business-continuity.md).|SQL Server на виртуальных машинах Azure позволяет создать решение с высоким уровнем доступности и возможностью аварийного восстановления с учетом потребностей конкретной базы данных. Таким образом, у вас может быть система, сильно оптимизированная для приложения. При необходимости вы можете выполнить тестирование и отработку отказа самостоятельно. Дополнительные сведения см. в статье [Высокий уровень доступности и аварийное восстановление для SQL Server на виртуальных машинах Azure](../virtual-machines/virtual-machines-windows-sql-high-availability-dr.md).|
|**Гибридное облако**|Локальное приложение получает доступ к данным в базе данных SQL Azure.|SQL Server на виртуальных машинах Azure позволяет создавать приложения, которые частично работают в облаке и частично — на локальных ресурсах. Например, вы можете расширить локальную сеть и домен Active Directory в облако через [виртуальную сеть Azure](../virtual-network/virtual-networks-overview.md). Кроме того, вы можете хранить локальные файлы данных в службе хранилища Azure с помощью [файлов данных SQL Server в Azure](http://msdn.microsoft.com/library/dn385720.aspx). Дополнительные сведения см. в разделе [Общие сведения о гибридном облаке SQL Server 2014](http://msdn.microsoft.com/library/dn606154.aspx).|
||Поддержка [репликации транзакций SQL Server](https://msdn.microsoft.com/library/mt589530.aspx) в качестве подписчика.|Поддержка [репликации транзакций SQL Server](https://msdn.microsoft.com/library/mt589530.aspx), аварийного восстановления и [реплик AlwaysOn в виртуальных машинах Azure](../virtual-machines/virtual-machines-windows-sql-high-availability-dr.md).|
|||||
|||||

## Коммерческие критерии выбора между базой данных SQL Azure и SQL Server на виртуальных машинах Azure

### Стоимость

Определяющий фактор при выборе способа размещения базы данных — ограниченность в средствах, как для начинающих разработчиков, стесненных в деньгах, так и для групп в солидных организациях с ограниченным бюджетом. В этом разделе мы сначала узнаем основные сведения о выставлении счетов и лицензировании в Azure для двух вариантов размещения реляционных баз данных: базы данных SQL и SQL Server на виртуальных машинах Azure. А затем мы узнаем о том, как следует рассчитывать общую стоимость приложения.

#### Основы лицензирования и выставления счетов

**База данных SQL** продается клиентам в качестве службы без лицензии, тогда как для [использования SQL Server в виртуальных машинах Azure](../virtual-machines/virtual-machines-windows-sql-server-iaas-overview.md) требуется лицензирование SQL Server по поминутному тарифу или лицензия, полученная в рамках программы Software Assurance.

**База данных SQL** имеет несколько уровней службы. Для каждого уровня счета выставляются за каждый час использования по фиксированной ставке, которая зависит от выбранного уровня службы и уровня производительности. Кроме того, счета выставляются за исходящий интернет-трафик по обычным [тарифам на передачу данных](https://azure.microsoft.com/pricing/details/data-transfers/). Уровни служб Basic, Standard и Premium созданы, чтобы обеспечить прогнозируемую производительность нескольких уровней для удовлетворения максимальных требований приложения. Вы можете менять уровни служб и уровни производительности в соответствии с различными требованиями приложения к производительности. Если в вашей базе данных осуществляется большое количество транзакций и нужно поддерживать много пользователей одновременно, мы рекомендуем использовать уровень службы "Премиум". Последние сведения о доступных в настоящее время уровнях служб см. в статье [Уровни служб базы данных SQL Azure](sql-database-service-tiers.md). Вы можете также создавать [пулы эластичных баз данных](sql-database-elastic-pool.md) для совместного использования ресурсов производительности экземплярами баз данных.

При использовании **базы данных SQL** корпорация Майкрософт автоматически настраивает, исправляет и обновляет программное обеспечение базы данных, что позволит вам сократить затраты на администрирование. Кроме того, [встроенные функции резервного копирования](sql-database-automated-backups.md) помогают значительно экономить средства, особенно при наличии большого количества баз данных.

При размещении **SQL Server в виртуальных машинах Azure** вы можете использовать образ SQL Server, предоставляемый платформой (он уже включает лицензию), или собственную лицензию SQL Server. Стоимость использования образов, которые предоставляет Azure, зависит от размера виртуальной машины, а также от выбранного выпуска SQL Server. Независимо от размера виртуальной машины или выпуска SQL Server вы оплачиваете лицензии SQL Server и Windows Server, а также стоимость службы хранилища Azure для дисков виртуальной машины по поминутному тарифу. Поминутное выставление счетов позволяет использовать SQL Server ровно столько, сколько нужно, без приобретения дополнительных лицензий SQL Server. Если вы передаете в Azure собственную лицензию SQL Server, плата взимается только за Windows Server и хранение данных. Дополнительные сведения о возможности использовать собственную лицензию см. в статье [Перемещение лицензий в рамках программы Software Assurance в Azure](https://azure.microsoft.com/pricing/license-mobility/).

#### Расчет общей стоимости приложений

Когда вы начинаете использовать облачную платформу, стоимость выполнения приложения включает в основном затраты на разработку и администрирование, а также затраты на службы, которые требуются для платформы в общедоступном облаке.

Ниже приведен подробный расчет стоимости выполнения вашего приложения в базе данных SQL Azure и в SQL Server на виртуальных машинах Azure.

**Для базы данных SQL Azure:**

*Общая стоимость приложения = минимальные затраты на администрирование + затраты на разработку программного обеспечения + затраты на службы базы данных SQL.*

**Для SQL Server на виртуальных машинах Azure:**

*Общая стоимость приложения = минимальные затраты на разработку и изменение программного обеспечения + затраты на администрирование + затраты на лицензирование SQL Server и Windows Server + затраты на службу хранилища Azure.*

Дополнительную информацию см. в следующих ресурсах:

- [Цены на базы данных SQL](https://azure.microsoft.com/pricing/details/sql-database/)
- [Цены на виртуальные машины](https://azure.microsoft.com/pricing/details/virtual-machines/) для [SQL](https://azure.microsoft.com/pricing/details/virtual-machines/#sql) и [Windows](https://azure.microsoft.com/pricing/details/virtual-machines/#windows)
- [Калькулятор стоимости — оцените свои расходы](https://azure.microsoft.com/pricing/calculator/)

> [AZURE.NOTE] Существует несколько функций SQL Server, которые неприменимы или недоступны для баз данных SQL. Они описаны в статьях [Общие ограничения и рекомендации для базы данных SQL Azure](sql-database-general-limitations.md) и [Сведения об инструкциях Transact-SQL Базы данных SQL Azure](sql-database-transact-sql-information.md). Если вы перемещаете существующее решение SQL Server в облако, см. статью [Перенос базы данных SQL Server в базу данных SQL Azure](sql-database-cloud-migrate.md). При переносе существующего локального приложения SQL Server в базу данных SQL рекомендуем вам обновить приложение, чтобы воспользоваться преимуществами облачных служб. Например, вы можете разместить приложение в [службе веб-приложений Azure](https://azure.microsoft.com/services/app-service/web/) или в [облачных службах Azure](https://azure.microsoft.com/services/cloud-services/), чтобы сэкономить средства.

### Администрирование

Для многих компаний решение о переходе в облачную службу позволит уменьшить не только расходы, но и сложность администрирования системы. При использовании **базы данных SQL** корпорация Майкрософт управляет физическим оборудованием, автоматически реплицирует все данные для обеспечения высокой доступности, настраивает и обновляет программное обеспечение базы данных, управляет балансировкой нагрузки и выполняет прозрачную отработку отказа при сбое сервера. Вы можете продолжать администрировать базу данных, но вам больше не нужно беспокоиться об управлении ядром базы данных, операционной системой сервера или аппаратным оборудованием. Под вашим управлением остаются базы данных и учетные записи, индексы и оптимизация запросов, аудит и безопасность.

Но, возможно, в вашей компании есть достаточно опытные сотрудники и желание контролировать место размещения базы данных с точностью до физического расположения диска. Решение **SQL Server на виртуальных машинах Azure** позволит полностью контролировать операционную систему и конфигурацию экземпляра SQL Server. Для виртуальной машины именно вы выбираете время обновления операционной системы и программного обеспечения базы данных и принимаете решение об установке любого дополнительного программного обеспечения, такого как антивирусные программы и инструменты резервного копирования. Кроме того, вы можете контролировать размер виртуальной машины, количество дисков и их конфигурации хранения. Например, Azure позволяет изменять размер запущенной виртуальной машины по мере необходимости. Дополнительные сведения см. в статье [Размеры виртуальных машин и облачных служб для Azure](../virtual-machines/virtual-machines-linux-sizes.md).

### Соглашение об уровне обслуживания (SLA):

Для многих ИТ-отделов основным приоритетом является соблюдение обязательств по времени непрерывной работы, определенных в соглашении об уровне обслуживания (SLA). В этом разделе мы рассмотрим условия SLA для каждого варианта размещения базы данных.

Для уровней службы «Базовый», «Стандартный» и «Премиум» **базы данных SQL** корпорация Майкрософт гарантирует уровень доступности 99,99 %. Актуальную информацию можно найти на странице [соглашения об уровне обслуживания](https://azure.microsoft.com/support/legal/sla/sql-database/). Последние сведения об уровнях службы базы данных SQL и поддерживаемых планах обеспечения непрерывности бизнес-процессов см. в статье [о возможностях разных уровней служб](sql-database-service-tiers.md).

Для **SQL Server на виртуальных машинах Azure** корпорация Майкрософт гарантирует уровень доступности 99,95 %, но только в отношении виртуальной машины. Это соглашение об уровне обслуживания не распространяется на процессы (например, SQL Server), запущенные на виртуальной машине, и предусматривает наличие по крайней мере двух экземпляров виртуальных машин в каждой группе доступности. Последние сведения см. на странице [Соглашение об уровне обслуживания для виртуальных машин](https://azure.microsoft.com/support/legal/sla/virtual-machines/). Чтобы обеспечить высокую доступность базы данных на виртуальных машинах, следует настроить один из поддерживаемых вариантов высокого уровня доступности на SQL Server, например [группы доступности AlwaysOn](http://blogs.technet.com/b/dataplatforminsider/archive/2014/08/25/sql-server-alwayson-offering-in-microsoft-azure-portal-gallery.aspx).

### <a name="market"></a>Продолжительность цикла выпуска

**База данных SQL Azure** будет правильным выбором для приложений, разработанных для облачной среды, поскольку для них критически важными являются эффективность разработки и сокращение времени выхода на рынок. Благодаря функциональным возможностям, схожим с возможностями администратора базы данных, она идеально подходит для разработчиков облачных служб, так как позволяет уменьшить необходимость управления базовой операционной системой и базой данных. Например, вы можете использовать [REST API](http://msdn.microsoft.com/library/azure/dn505719.aspx) и [командлеты PowerShell](http://msdn.microsoft.com/library/azure/dn546726.aspx) для автоматизации операций администрирования и управления для тысяч баз данных. Такие функции, как [пулы эластичных баз данных](sql-database-elastic-pool.md), позволяют уделить максимум внимания уровню приложений и быстрее вывести решение на рынок.

**SQL Server на виртуальных машинах Azure** идеально подходит для ситуации, когда существующим или новым приложениям требуется доступ ко всем функциям экземпляра SQL Server. Кроме того, это прекрасный вариант подходит для переноса в Azure существующих локальных приложений и баз данных в неизменном виде. Так как изменять уровень презентации, приложения и данных не нужно, вы экономите время и средства при повторном изменении имеющегося решения. Вместо этого вы можете уделить внимание переносу всех решений в Azure и оптимизации производительности, необходимой для платформы Azure. Дополнительные сведения см. в статье [Рекомендации по оптимизации производительности SQL Server на виртуальных машинах Azure](../virtual-machines/virtual-machines-windows-sql-performance.md).

## Сводка

В этой статье приведен обзор баз данных SQL и SQL Server на виртуальных машинах Azure, а также рассматриваются коммерческие факторы, которые могут повлиять на ваше решение. Ниже приводится краткий обзор рекомендаций.

Выберите **базу данных SQL Azure**, если:

- Вы создаете новые облачные приложения или хотите перенести существующее решение SQL Server с целью экономии и оптимизации производительности благодаря возможностям облачных служб. Такой подход предоставит преимущества полностью управляемой облачной службы, сократит время выхода на рынок и может оптимизировать затраты в долгосрочной перспективе.

- Вы хотите, чтобы корпорация Майкрософт выполняла стандартные операции по управлению в вашей базе данных, и вам требуется более высокий уровень доступности согласно соглашению об уровне обслуживания для баз данных.



Выберите **SQL Server на виртуальных машинах Azure**, если:

- У вас есть локальные приложения, и вы хотите отказаться от самостоятельного управления оборудованием или перейти к гибридным решениям. Такой подход позволяет быстрее увеличить производительность базы данных, а также упростит подключение к локальным приложениям по безопасному туннелю.

- У вас есть ИТ-отдел, и вам требуются полные права администратора SQL Server, а также полная совместимость с локальной системой SQL Server. Такой подход позволяет свести затраты на разработку или изменения имеющихся приложений к минимуму и обеспечивает гибкость для выполнения большинства приложений. Кроме того, он предоставляет полный контроль над виртуальной машиной, операционной системой и конфигурацией базы данных.


## Дальнейшие действия
- Чтобы приступить к работе с базой данных SQL, см. статью [Руководство по базам данных SQL: создание базы данных SQL за несколько минут с помощью портала Azure](sql-database-get-started.md).
- См. страницу с [ценами на базы данных SQL](https://azure.microsoft.com/pricing/details/sql-database/).
- Чтобы приступить к работе с SQL Server в виртуальной машине Azure, см. статью [Подготовка виртуальной машины SQL Server на портале Azure](../virtual-machines/virtual-machines-windows-portal-sql-server-provision.md).
- См. страницу [SQL Server на виртуальных машинах Azure: схема обучения](https://azure.microsoft.com/documentation/learning-paths/sql-azure-vm/).

<!---HONumber=AcomDC_0629_2016-->