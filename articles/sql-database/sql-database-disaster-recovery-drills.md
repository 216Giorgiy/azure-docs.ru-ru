<properties 
   pageTitle="Отработки аварийного восстановления базы данных SQL" 
   description="Руководство и рекомендации по использованию базы данных SQL Azure для отработки аварийного восстановления, которая обеспечивает устойчивость критически важных бизнес-приложений против сбоев и простоев." 
   services="sql-database" 
   documentationCenter="" 
   authors="mihaelablendea" 
   manager="jeffreyg" 
   editor="monicar"/>

<tags
   ms.service="sql-database"
   ms.devlang="NA"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="data-management" 
   ms.date="04/13/2015"
   ms.author="mihaelab"/>

#Отработка аварийного восстановления

Рекомендуется периодически проверять готовность приложений к рабочему процессу восстановления. Проверка поведения приложения и возможных последствий потери данных и нарушений работы, которая включает отработку отказа, предусмотрена стандартами разработки. Эта процедура также является обязательной для большинства отраслевых стандартов в рамках сертификации непрерывности бизнес-процессов.

Этапы отработки аварийного восстановления:

- моделирование сбоя уровня данных;
- восстановление; 
- проверка целостности приложения после восстановления.

Рабочий процесс отработки зависит от того, как вы [проектируете непрерывность бизнес-процессов](sql-database-business-continuity.md). Ниже приведены рекомендации по отработке аварийного восстановления с использованием базы данных SQL Azure.

##Геовосстановление

Чтобы избежать потери данных при проведении отработки аварийного восстановления, рекомендуется выполнять отработку в тестовой среде. Для этого создайте копию рабочей среды и используйте ее для проверки рабочего процесса отработки отказа приложения.
 
####Моделирование сбоя

- Чтобы смоделировать сбой, удалите или переименуйте базу данных-источник и вызовите ошибку подключения приложения. Так вы сможете проверить обнаружение сбоя и оповещение о нем, а также измерить целевое время восстановления (RTO) для длительности восстановления.

####Восстановление

- Выполните геовосстановление базы данных на другой сервер, следуя инструкциям [здесь](sql-database-disaster-recovery.md). 
- Измените конфигурацию приложения, чтобы подключиться к восстановленной базе данных, и следуйте инструкциям в руководстве [Завершение восстановленной базы данных](sql-database-recovered-finalize.md), чтобы завершить восстановление.

####Проверка

- Выполните отработку, проверив целостность приложения после восстановления (строки подключения, учетные данные, тестирование основных функций или другие проверки стандартной процедуры утверждения приложений).

##Стандартная георепликация

База данных, защищенная с помощью стандартной георепликации, может иметь только одну базу данных-получателя, недоступную для чтения. Тренировочная отработка включает принудительное завершение соединения, в результате которого база данных останется незащищенной. Кроме того, есть вероятность потери данных, поэтому мы не рекомендуем клиентам выполнять такую проверку в рабочей базе данных. Вместо этого рекомендуется создать копию рабочей среды и использовать ее для проверки рабочего процесса отработки отказа приложения.

####Моделирование сбоя

- Смоделируйте рабочую нагрузку на базу данных-источник. Если база данных-источник активна на момент завершения соединения, может произойти потеря данных, благодаря чему отработка будет более реалистичной.
- Удалите базу данных-источник или [выполните принудительное завершение](sql-database-disaster-recovery.md) соединения на стороне базы данных-получателя.

####Восстановление

- Измените конфигурацию приложения, чтобы подключиться к бывшей базе данных-получателю, доступной только для чтения, которая станет полностью доступной, и приложение сможет использовать ее в качестве новой базы данных-источника. 
- Следуйте инструкциям руководства [Завершение восстановленной базы данных](sql-database-recovered-finalize.md), чтобы завершить восстановление.

####Проверка

- Выполните отработку, проверив целостность приложения после восстановления (строки подключения, учетные данные, тестирование основных функций или другие проверки стандартной процедуры утверждения приложений).

##Активная георепликация

Отработка аварийного восстановления проводится с использованием параллельного целевого сервера. На этом сервере создается другой набор баз данных-получателей только для чтения. Тестовую версию уровня приложений следует использовать для проверки работоспособности и целостности данных. Для этого выполните проверки на этом сервере после принудительного завершения.

####Моделирование сбоя

- [Создайте новое соединение активной георепликации](sql-database-business-continuity-design.md) между базой данных-источником и тестовым сервером базы данных-получателя. Если база данных-источник активна на момент завершения соединения, может произойти потеря данных, благодаря чему отработка будет более реалистичной.
- [Выполните принудительное завершение](sql-database-disaster-recovery.md) в базе данных-получателе, которая находится на тестовом сервере.

####Восстановление

- Измените конфигурацию приложения, чтобы подключиться к бывшей базе данных-получателю, доступной только для чтения, которая станет полностью доступной для записей после завершения соединения.
- Следуйте инструкциям руководства [Завершение восстановленной базы данных](sql-database-recovered-finalize.md), чтобы завершить восстановление.

####Проверка

- Выполните отработку, проверив целостность приложения после восстановления (строки подключения, учетные данные, тестирование основных функций или другие проверки стандартной процедуры утверждения приложений).

 

<!---HONumber=July15_HO2-->