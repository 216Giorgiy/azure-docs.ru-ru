---
title: Архивация базы данных SQL Azure в BACPAC-файл с помощью портала Azure
description: Архивация базы данных SQL Azure в BACPAC-файл с помощью портала Azure
services: sql-database
documentationcenter: ''
author: stevestein
manager: jhubbard
editor: ''

ms.service: sql-database
ms.devlang: NA
ms.date: 08/15/2016
ms.author: sstein
ms.workload: data-management
ms.topic: article
ms.tgt_pltfrm: NA

---
# Архивация базы данных SQL Azure в BACPAC-файл с помощью портала Azure
> [!div class="op_single_selector"]
> * [Портал Azure](sql-database-export.md)
> * [PowerShell](sql-database-export-powershell.md)
> 
> 

Эта статья содержит инструкции по архивации базы данных SQL Azure в BACPAC-файл, сохраняемый в хранилище BLOB-объектов Azure, с помощью [портала Azure](https://portal.azure.com).

Когда вам нужно создать архив базы данных SQL Azure, вы можете экспортировать схему базы данных и данные в BACPAC-файл. BACPAC-файл — это просто ZIP-файл с расширением BACPAC. BACPAC-файл можно сохранить в хранилище BLOB-объектов Azure или локальном хранилище, а затем импортировать обратно в базу данных SQL Azure или локальный экземпляр SQL Server.

***Рекомендации***

* Чтобы архив был транзакционно согласованным, необходимо обеспечить отсутствие операций записи во время экспорта или экспортировать данные из [транзакционно согласованной копии](sql-database-copy.md) базы данных SQL Azure.
* Максимальный размер BACPAC-файла архива в хранилище BLOB-объектов Azure составляет 200 ГБ. Для архивации BACPAC-файла большего размера в локальное хранилище используйте программу командной строки [SqlPackage](https://msdn.microsoft.com/library/hh550080.aspx). Эта служебная программа поставляется вместе с Visual Studio и SQL Server. Кроме того, вы можете [скачать](https://msdn.microsoft.com/library/mt204009.aspx) последнюю версию SQL Server Data Tools для получения этой служебной программы.
* Архивация в хранилище Azure уровня "Премиум" с помощью BACPAC-файла не поддерживается.
* Если операция экспорта длится более 20 часов, она может быть отменена. Для повышения производительности во время экспорта можно сделать следующее.
  * Временно повысить уровень служб.
  * Прекратить все операции чтения и записи во время экспорта.
  * Используйте для всех больших таблиц [кластеризованный индекс](https://msdn.microsoft.com/library/ms190457.aspx) со значениями, отличными от NULL. Без кластеризованных индексов экспорт может завершиться ошибкой, если он длится больше 6–12 часов. Это обусловлено тем, что службам экспорта требуется выполнить проверку таблицы, чтобы экспортировать всю таблицу. Хороший способ определить, оптимизированы ли таблицы для экспорта, — выполнить **DBCC SHOW\_STATISTICS** и убедиться, что значение *RANGE\_HI\_KEY* не равно NULL и имеет хорошее распределение. Дополнительную информацию см. в разделе [DBCC SHOW\_STATISTICS](https://msdn.microsoft.com/library/ms174384.aspx).

> [!NOTE]
> BACPAC-файлы не предназначены для операций службы архивации и восстановления. База данных SQL Azure автоматически создает резервные копии для каждой пользовательской базы данных. Дополнительные сведения см. в статье [Общие сведения о непрерывности бизнес-процессов](sql-database-business-continuity.md).
> 
> 

Для работы с этой статьей необходимо следующее:

* Подписка Azure.
* База данных Azure SQL.
* [Учетная запись хранения Azure уровня "Стандартный"](../storage/storage-create-storage-account.md) с контейнером больших двоичных объектов для хранения BACPAC-файла в хранилище уровня "Стандартный".

## Экспорт базы данных
Откройте колонку "База данных SQL" для базы данных, которую нужно скопировать.

> [!IMPORTANT]
> Для получения транзакционно согласованного BACPAC-файла сначала [создайте копию базы данных](sql-database-copy.md), а затем экспортируйте эту копию.
> 
> 

1. Перейдите на [портал Azure](https://portal.azure.com).
2. Нажмите **Базы данных SQL**.
3. Выберите базу данных для архивирования.
4. В колонке "База данных SQL" щелкните пункт **Экспорт**, чтобы открыть колонку **Экспорт базы данных**.
   
   ![кнопка экспорта][1]
5. Нажмите **Хранилище** и выберите учетную запись хранения и контейнер больших двоичных объектов, в котором будет сохранен BACPAC-файл.
   
   ![экспорт базы данных][2]
6. Выберите тип проверки подлинности.
7. Введите правильные учетные данные для проверки подлинности на сервере Azure SQL, на котором находится экспортируемая база данных.
8. Нажмите кнопку **ОК**, чтобы заархивировать базу данных. После нажатия кнопки **ОК** создается запрос на экспорт базы данных и отправляется службе. Время экспорта зависит от размера и сложности базы данных и вашего уровня обслуживания. Вы получите уведомление.
   
   ![уведомление об экспорте][3]

## Отслеживание хода выполнения операции экспорта
1. Выберите **Серверы SQL**.
2. Выберите сервер, содержащий исходную базу данных, которую вы только что заархивировали.
3. Прокрутите вниз до раздела "Операции".
4. В колонке SQL Server нажмите **Журнал импорта и экспорта**:
   
   ![журнал импорта и экспорта][4]

## Убедитесь, что BACPAC-файл находится в контейнере хранилища.
1. Щелкните элемент **Учетные записи хранения**.
2. Выберите учетную запись хранения, в которой сохранили BACPAC-файл.
3. Нажмите **Контейнеры** и выберите контейнер, в который экспортировали базу данных, для получения подробных сведений о резервной копии (из этого контейнера можно загрузить и сохранить BACPAC-файл).
   
   ![сведения о файле .bacpac][5]

## Дальнейшие действия
* Чтобы узнать об импорте BACPAC-файла в базу данных SQL Azure, ознакомьтесь с разделом [Импорт BACPAC-файла для создания новой базы данных SQL Azure](sql-database-import.md).
* Чтобы узнать об импорте BACPAC-файла в базу данных SQL Server, ознакомьтесь с разделом [Импорт файла BACPAC для создания новой пользовательской базы данных](https://msdn.microsoft.com/library/hh710052.aspx).

<!--Image references-->
[1]: ./media/sql-database-export/export.png
[2]: ./media/sql-database-export/export-blade.png
[3]: ./media/sql-database-export/export-notification.png
[4]: ./media/sql-database-export/export-history.png
[5]: ./media/sql-database-export/bacpac-archive.png

<!---HONumber=AcomDC_0817_2016-->
