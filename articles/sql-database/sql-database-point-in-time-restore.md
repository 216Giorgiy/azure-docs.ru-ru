<properties
   pageTitle="Непрерывность облачных бизнес-процессов — восстановление до точки во времени — база данных SQL | Microsoft Azure"
   description="В этой статье описывается функция восстановления до точки во времени, позволяющая откатить Базу данных Azure SQL до состояния на момент времени в прошлом (до 35 дней)."
   services="sql-database"
   documentationCenter=""
   authors="stevestein"
   manager="jhubbard"
   editor="monicar"/>

<tags
   ms.service="sql-database"
   ms.devlang="NA"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="sqldb-bcdr"
   ms.date="06/17/2016"
   ms.author="sstein"/>

# Обзор. Функция восстановления до точки во времени в Базе данных SQL

> [AZURE.SELECTOR]
- [Общие сведения о непрерывности бизнес-процессов](sql-datbase-business-continuity.md)
- [Восстановление до точки во времени](sql-database-point-in-time-restore.md)
- [Восстановление удаленной базы данных](sql-database-restore-deleted-database.md)
- [Геовосстановление](sql-database-geo-restore.md)
- [Активная георепликация](sql-database-geo-replication-overview.md)
- [Сценарии обеспечения непрерывности бизнес-процессов](sql-database-business-continuity-scenarios.md)

Функция восстановления до точки во времени позволяет восстановить существующую базу данных до момента времени в прошлом в виде новой базы данных с помощью [создаваемых автоматически резервных копий базы данных SQL](sql-database-automated-backups.md). Существующую базу данных невозможно перезаписать. Базу данных можно восстановить до точки во времени в прошлом с помощью [портала Azure](sql-database-point-in-time-restore-portal.md), [PowerShell](sql-database-point-in-time-restore-powershell.md) или [REST API](https://msdn.microsoft.com/library/azure/mt163685.aspx).

> [AZURE.SELECTOR]
- [Портал Azure](sql-database-point-in-time-restore-portal.md)
- [PowerShell](sql-database-point-in-time-restore-powershell.md)

Базу данных можно восстановить до любого уровня производительности и в любом пуле эластичных БД. Учитывая, что при восстановлении создается новая база данных, а уровень служб и производительности восстановленной базы данных может отличаться от текущего состояния динамической базы данных, необходимо убедиться, что у вас достаточно DTU на сервере или в пуле. Восстановленная база данных — это обычная полностью доступная оперативная база данных, пользование которой оплачивается по обычной тарификации на основе уровня служб и производительности.

Чтобы получить самую раннюю точку восстановления (без георепликации), используйте команду [Получить базу данных](https://msdn.microsoft.com/library/dn505708.aspx) (*RecoveryPeriodStartDate*).

Восстановленную базу данных можно рассматривать как замену исходной базы данных или же использовать для получения данных, чтобы затем обновить исходную базу данных. Если восстановленная база данных предназначена для замены исходной базы данных, следует проверить, настроен ли для нее соответствующий уровень производительности и служб, и при необходимости масштабировать эту базу данных. Можно переименовать исходную базу данных, а затем присвоить восстановленной базе данных исходное имя с помощью команды ALTER DATABASE в T-SQL.

Если планируется получать данные из восстановленной базы данных, необходимо будет отдельно написать и выполнить требуемые сценарии восстановления данных. Несмотря на то, что операция восстановления может занять много времени, база данных будет отображаться в списке баз данных на протяжении всего процесса. Если удалить базу данных во время восстановления, операция будет отменена и счет на оплату не будет выставлен.

## Время восстановления до точки во времени

Время, необходимое для восстановления базы данных, зависит от многих факторов, включая размер базы данных, число журналов транзакций, выбранную точку во времени и объем действий, которые нужно повторить, чтобы восстановить состояние до выбранной точки. Восстановление очень большой и/или активной базы данных может занять несколько часов. В большинстве случаев на восстановление базы данных требуется до 12 часов.

## Резервное копирование и восстановление по сравнению с копированием, экспортом и импортом

Восстановление до точки во времени — рекомендуемый подход для восстановления баз данных уровня "Базовый", "Стандартный" и "Премиум" при случайной потере или повреждении данных. Резервное копирование и восстановление дешевле, так как оплата начисляется только за избыточные резервные копии, а копирование баз данных всегда оплачивается, чтобы гарантировать транзакционно согласованный экспорт, как и хранение BACPAC-файла. Резервное копирование выполняется автоматически, а значит не требует вмешательства администратора, тогда как экспорт нужно планировать и управлять им самостоятельно. Восстановление можно выполнить до определенной точки во времени с большей степенью детализации (одна минута), чем это возможно при копировании, экспорте или импорте. Кроме того, восстановление из резервных копий обычно выполняется быстрее, чем импорт, который включает в себя такие действия, как создание схемы, отключение индексов, загрузка данных и включение индексов для каждой таблицы отдельно. Тем не менее копирование и экспорт — рекомендуемое решение для долгосрочной архивации, срок которой превышает срок хранения.


## Сводка

Создаваемые автоматически резервные копии и восстановление до точки во времени позволяют защитить базы данных от случайного повреждения или удаления данных. Это бесплатное решение, которое не требует участия администратора и доступно для всех баз данных SQL. Решение резервного копирования и восстановления обеспечивает ряд преимуществ для краткосрочных нужд по восстановлению по сравнению с копированием, экспортом и импортом. Мы рекомендуем использовать восстановление до точки во времени как часть стратегии по обеспечению непрерывности бизнес-процессов. Экспорт следует проводить только для долгосрочной архивации или переноса данных.


## Дальнейшие действия

- Подробные инструкции по восстановлению до точки во времени с помощью портала Azure см. в разделе [Восстановление базы данных SQL Azure до точки во времени с помощью портала Azure](sql-database-point-in-time-restore-portal.md).
- Подробные инструкции по восстановлению до точки во времени с помощью PowerShell см. в разделе [Восстановление базы данных SQL Azure до точки во времени с помощью PowerShell](sql-database-point-in-time-restore-powershell.md).
- Чтобы узнать о восстановлении до точки во времени с помощью REST API, ознакомьтесь с [данным способом восстановления](https://msdn.microsoft.com/library/azure/mt163685.aspx).
- Восстановление после ошибки пользователя или приложения подробно рассматривается в разделе [Восстановление базы данных SQL Azure после ошибки пользователя](sql-database-user-error-recovery.md).

## Дополнительные ресурсы

- [Сценарии обеспечения непрерывности бизнес-процессов](sql-database-business-continuity-scenarios.md)

<!---HONumber=AcomDC_0622_2016-->