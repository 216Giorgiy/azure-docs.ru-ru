---
title: Модели приобретения для базы данных SQL Azure | Документы Майкрософт
description: Сведения о моделях приобретения, доступных для баз данных в службе "База данных SQL Azure".
services: sql-database
ms.service: sql-database
ms.subservice: ''
ms.custom: ''
ms.devlang: ''
ms.topic: conceptual
author: CarlRabeler
ms.author: carlrab
ms.reviewer: ''
manager: craigg
ms.date: 12/10/2018
ms.openlocfilehash: d801ed309b0d79dd6655c7dd59ebd17bd37de222
ms.sourcegitcommit: efcd039e5e3de3149c9de7296c57566e0f88b106
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/10/2018
ms.locfileid: "53164404"
---
# <a name="azure-sql-database-purchasing-models"></a>Модели приобретения для Базы данных SQL Azure

База данных SQL Azure позволяет легко приобрести полностью управляемое ядро СУБД PaaS, которое соответствует потребностям производительности и стоимости. В зависимости от модели развертывания базы данных SQL Azure можно выбрать модель приобретения, которая соответствует вашим потребностям:
- [Модель приобретения на основе виртуальных ядер](sql-database-service-tiers-vcore.md) (рекомендуется), позволяет выбрать точный объем емкости хранилища и вычислительных ресурсов, необходимых для вашей рабочей нагрузки.
- [Модель приобретения на основе единиц DTU](sql-database-service-tiers-dtu.md) позволяет выбрать объединенные пакеты со сбалансированным сочетанием ресурсов вычисления и хранения для стандартных рабочих нагрузок.

В моделях развертываний Базы данных SQL Azure доступны различные модели приобретения.
- Для [логических серверов](sql-database-logical-servers.md) в [Базе данных SQL Azure](sql-database-technical-overview.md) предусматривается две модели приобретения: [на основе единиц DTU](sql-database-service-tiers-dtu.md) и [на основе виртуальных ядер](sql-database-service-tiers-vcore.md). В рамках этих моделей приобретения вы можете выбрать [отдельные базы данных](sql-database-single-databases-manage.md) или [эластичные пулы](sql-database-elastic-pool.md).
- [Управляемые экземпляры](sql-database-managed-instance.md) в базе данных SQL Azure предлагают только [модель приобретения на основе виртуальных ядер](sql-database-service-tiers-vcore.md).

> [!IMPORTANT]
> [Гипермасштабируемые базы данных (предварительная версия)](sql-database-service-tier-hyperscale.md) находятся на этапе общедоступной предварительной версии только для отдельных баз данных, для которых используется модель приобретения виртуальных ядер.

В следующей таблице и на расположенном под ней рисунке приведено сравнение этих моделей приобретения.

|**Модель приобретения**|**Описание**|**Оптимально для**|
|---|---|---|
|Модель приобретения на основе единиц DTU|Эта модель основана на комплексной оценке вычислительных ресурсов, ресурсов хранилища и ресурсов для операций ввода-вывода. Объем вычислительных ресурсов выражается в единицах транзакций базы данных (DTU) для отдельных баз данных, а для эластичных пулов — в единицах транзакций эластичной базы данных (eDTU). Дополнительные сведения см. в статье [Единицы транзакций базы данных (DTU) и единицы транзакций эластичной базы данных (eDTU)](sql-database-service-tiers.md#dtu-based-purchasing-model).|Для клиентов, которым нужны простые, предварительно настроенные варианты ресурсов.|
|Модель приобретения на основе виртуальных ядер|Эта модель позволяет независимо выбрать ресурсы вычисления и хранилища. Кроме того, она позволяет экономить средства благодаря программе "Преимущество гибридного использования Azure для SQL Server".|Для клиентов, которые ценят гибкость, контроль и прозрачность.|
||||  

![модель ценообразования](./media/sql-database-service-tiers/pricing-model.png)

## <a name="vcore-based-purchasing-model"></a>Модель покупки на основе числа виртуальных ядер

Виртуальное ядро — это логический ЦП с возможностью выбора поколения аппаратного обеспечения и физических характеристик оборудования (например, количество ядер, памяти и размер хранилища). Модель приобретения на основе виртуальных ядер обеспечивает гибкость, контроль и прозрачность потребления отдельных ресурсов. Это эффективный способ удовлетворить свои требования к локальной рабочей нагрузке в облаке. Эта модель позволяет выбрать вычисление, память и хранилище с учетом потребностей рабочих нагрузок. В модели приобретения на основе виртуальных ядер можно выбирать между уровнями служб [Общего назначения](sql-database-high-availability.md#basic-standard-and-general-purpose-service-tier-availability) и [Критически важный для бизнеса](sql-database-high-availability.md#premium-and-business-critical-service-tier-availability) для [отдельных баз данных](sql-database-single-database-scale.md), [управляемых экземпляров](sql-database-managed-instance.md) и [эластичных пулов](sql-database-elastic-pool.md). Для отдельных баз данных можно также выбрать уровень служб [Гипермасштабирование (предварительная версия)](sql-database-service-tier-hyperscale.md).

Модель приобретения на основе виртуальных ядер позволяет независимо выбрать вычислительные ресурсы и ресурсы хранилища, обеспечивать производительность на уровне локальной среды и оптимизировать затраты. В модели приобретения на основе виртуальных ядер клиенты оплачивают:

- вычислительные ресурсы (уровень служб + количество виртуальных ядер и объем памяти + поколение программного обеспечения);
- тип и объем хранилища данных и журналов;
- хранилище резервных копий (геоизбыточное хранилище с доступом на чтение (RA-GRS)).

> [!IMPORTANT]
> Плата за вычислительные ресурсы, операции ввода-вывода, хранилища данных и журналов взимается для каждой базы данных или эластичного пула. Плата за хранилище резервных копий взимается для каждой базы данных. Дополнительные сведения о плате за использование управляемого экземпляра см. в статье [Общие сведения об Управляемом экземпляре Базы данных SQL Azure (предварительная версия)](sql-database-managed-instance.md).
> **Ограничения по регионам:** модель приобретения на основе виртуальных ядер пока недоступна в регионах Западная Европа, Центральная Франция, южная часть Соединенного Королевства, западная часть Соединенного Королевства, Юго-Восточная Австралия.

Если база данных или эластичный пул потребляет более 300 единиц DTU, переход на модель на основе виртуальных ядер может сократить ваши расходы. Вы можете перейти с помощью API или портала Azure без простоя. Тем не менее этот переход необязателен. Если модель приобретения на основе единиц DTU удовлетворяет вашим требованиям к производительности и бизнес-требованиям, продолжайте использовать ее. Если вы решите перейти с модели на основе единиц DTU на модель на основе виртуальных ядер, выберите объем вычислительных ресурсов, следуя такому правилу: для каждых 100 единиц DTU уровня "Стандартный" требуется по меньшей мере 1 виртуальное ядро уровня "Общего назначения"; для каждых 125 единиц DTU уровня "Премиум" требуется по меньшей мере 1 виртуальное ядро уровня "Критически важный для бизнеса".

## <a name="dtu-based-purchasing-model"></a>Модель приобретения на основе единиц DTU

Единица транзакций базы данных (DTU) предоставляет объединенный показатель мощности ЦП, памяти, операций чтения и записи. Модель приобретения на основе единиц DTU предлагает ряд предварительно настроенных пакетов вычислительных ресурсов и включенный объем хранилища для обеспечения различных уровней производительности приложений. Эта модель подходит клиентам, которые предпочитают простоту предварительно настроенного пакета и фиксированные платежи каждый месяц. При использовании модели приобретения на основе единиц DTU клиенты могут выбрать между разными уровнями служб (**Базовый**, **Стандартный** и **Премиум**) для [отдельных баз данных](sql-database-single-database-scale.md) и [эластичных пулов](sql-database-elastic-pool.md). Эта модель покупки недоступна в [управляемых экземплярах](sql-database-managed-instance.md).

### <a name="database-transaction-units-dtus"></a>Единицы транзакций базы данных (DTU)

Для отдельной базы данных SQL Azure с определенным объемом вычислительных ресурсов на [уровне служб](sql-database-single-database-scale.md) Майкрософт гарантирует определенный уровень ресурсов (независимо от любой другой базы данных в облаке Azure) и обеспечивает предсказуемый уровень производительности. Объем ресурсов рассчитывается как количество единиц передачи данных или DTU и является комплексной оценкой вычислительных ресурсов, ресурсов хранилища и ресурсов ввода-вывода. Коэффициент этих ресурсов первоначально определялся по [тестовой рабочей нагрузке OLTP](sql-database-benchmark-overview.md), отражающей фактические рабочие нагрузки OLTP. Если рабочая нагрузка превышает объем любого из этих ресурсов, пропускная способность регулируется, что приводит к снижению производительности и простоям. Ресурсы, используемые вашей рабочей нагрузкой, не влияют на ресурсы, доступные для других баз данных SQL в облаке Azure, а ресурсы, используемые другими рабочими нагрузками, не влияют на ресурсы, доступные вашей базе данных SQL.

![ограничивающая рамка](./media/sql-database-what-is-a-dtu/bounding-box.png)

DTU лучше всего помогают определить относительный объем ресурсов баз данных SQL Azure с разными объемами вычислительных ресурсов и уровнями служб. Например, повысить объем вычислительных ресурсов базы данных (через удвоение DTU) означает удвоить количество ресурсов, доступных для этой базы данных. Например, база данных P11 уровня "Премиум" с 1750 единицами DTU обеспечивает в 350 раз больше вычислительной мощи, чем база данных уровня "Базовый" с 5 единицами DTU.  

Чтобы узнать, как используются ресурсы (DTU) в вашей рабочей нагрузке, см. статью [Анализ производительности запросов базы данных Azure SQL](sql-database-query-performance.md). После этого вы сможете:

- Выявлять запросы, максимально использующие ресурсы процессора, имеющие максимальную длительность или число выполнений, которые потенциально можно настроить, чтобы повысить производительность. Например, запрос на большое число операций ввода-вывода может выполняться быстрее за счет [методов оптимизации в памяти](sql-database-in-memory.md). Так вы сможете оптимизировать использование доступной памяти на определенном уровне служб и при определенном объеме вычислительных ресурсов.
- Перейти к подробным сведениям о запросе, просмотреть его текст и журнал использования ресурсов.
- Получать доступ к рекомендациям по настройке производительности, отображающим действия [Помощника по базам данных SQL](sql-database-advisor.md).

### <a name="elastic-database-transaction-units-edtus"></a>Единицы транзакций эластичной базы данных (eDTU)

Вместо выделения определенного набора ресурсов (DTU) базе данных SQL, доступных вне зависимости от того, нужны они или нет, вы можете поместить базы данных в [эластичный пул](sql-database-elastic-pool.md) на сервере базы данных SQL, который распределяет пул ресурсов между этими базами данных. Общие ресурсы в эластичном пуле измеряются в эластичных единицах передачи данных или eDTU. Пулы эластичных баз данных обеспечивают простое и экономически выгодное решение для управления целевыми показателями производительности для нескольких баз данных с совершенно разными и непредсказуемыми моделями функционирования. Пул эластичных баз данных гарантирует, что ни одна из баз данных в пуле не использует все ресурсы и что каждой из них всегда доступен минимальный необходимый объем ресурсов.

Пулу предоставляется заданное количество единиц eDTU по фиксированной цене. Отдельным базам данных в пуле эластичных баз данных предоставляется возможность гибкого автоматического масштабирования в рамках заданных границ. Базы данных, на которые приходится значительная нагрузка, могут потреблять больше eDTU, чтобы обслужить имеющийся спрос. Базы данных с меньшей нагрузкой будут потреблять меньше eDTU. Базы данных без нагрузки не будут потреблять eDTU. Благодаря подготовке ресурсов для всего пула, а не одной базы данных, задачи управления упрощаются и вы можете спрогнозировать затраты на пул.

Добавить дополнительные единицы eDTU в имеющийся пул можно без простоя баз данных в пуле или снижения их производительности. Точно так же, если eDTU больше не нужны, их можно удалить из имеющегося пула в любой момент времени. Вы можете добавить базы данных в пул или удалить их либо ограничить количество eDTU, которые базы данных могут использовать в условиях интенсивной нагрузки, чтобы сохранить eDTU для остальных баз данных. Если у базы данных прогнозируемо низкие показатели использования ресурсов, ее можно переместить из пула и настроить в качестве отдельной базы данных с прогнозируемым объемом требуемых ресурсов.

### <a name="determine-the-number-of-dtus-needed-by-a-workload"></a>Определение числа единиц DTU, требуемых для рабочей нагрузки

Если нужно перенести существующую локальную рабочую нагрузку или нагрузку виртуальной машины SQL Server в базу данных SQL Azure, вы можете приблизительно вычислить нужное количество единиц DTU с помощью [калькулятора DTU](http://dtucalculator.azurewebsites.net/) . Чтобы узнать, как используются ресурсы (DTU) в существующей рабочей нагрузке базы данных SQL Azure, и понять, как оптимизировать эту нагрузку, вы можете использовать [анализ производительности запросов к базе данных SQL](sql-database-query-performance.md). Кроме того, с помощью динамического административного представления [sys.dm_db_ resource_stats](https://msdn.microsoft.com/library/dn800981.aspx) можно просмотреть сведения об использовании ресурсов за последний час. Представление каталога [sys.resource_stats](https://msdn.microsoft.com/library/dn269979.aspx) содержит эти же сведения, но только за последние 14 дней, причем с менее точными средними значениями за пять минут.

### <a name="workloads-that-benefit-from-an-elastic-pool-of-resources"></a>Рабочие нагрузки, для которых эффективно используется эластичный пул ресурсов

Пулы подходят для большого числа баз данных с конкретными закономерностями использования. Для заданной базы данных эта закономерность характеризуется низким средним использованием с относительно редкими пиками использования. База данных SQL автоматически оценивает историю использования ресурсов баз данных на существующем сервере баз данных SQL и рекомендует подходящую конфигурацию пула в портале Azure. Дополнительные сведения см. в статье [Когда следует использовать пул эластичных баз данных?](sql-database-elastic-pool.md)

## <a name="next-steps"></a>Дополнительная информация

- Узнайте больше о [модели приобретения на основе виртуальных ядер](sql-database-service-tiers-vcore.md).
- Узнайте больше о [модели приобретения на основе DTU](sql-database-service-tiers-dtu.md).
