.<properties 
	pageTitle="Порты для Базы данных SQL помимо 1433 | Microsoft Azure"
	description="Иногда взаимодействие с базой данных при клиентских подключениях из ADO.NET к Базе данных SQL Azure версии 12 происходит непосредственно, без прокси-сервера. Порты, отличные от 1433, становятся важными."
	services="sql-database"
	documentationCenter=""
	authors="MightyPen"
	manager="jhubbard"
	editor="" />


<tags 
	ms.service="sql-database" 
	ms.workload="drivers"
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="08/17/2016"
	ms.author="annemill"/>


# Порты, кроме 1433, для ADO.NET 4.5 и Базы данных SQL версии 12


В этом разделе описываются изменения, которые версия 12 базы данных SQL привносит в поведение подключения клиентов, использующих ADO.NET 4.5 или более поздней версии.


## Версия 11 базы данных SQL: порт 1433


Когда программа клиента использует ADO.NET 4.5 для подключения и запроса к версии 11 базы данных SQL, внутренняя последовательность выглядит следующим образом.


1. ADO.NET пытается подключиться к базе данных SQL.

2. ADO.NET использует порт 1433 для вызова модуля промежуточного слоя, который в свою очередь подключается к базе данных SQL.

3. База данных SQL отправляет свой ответ обратно в промежуточный слой, который перенаправляет ответ в ADO.NET на порт 1433.


**Терминология.** Описывая предыдущую последовательность, мы говорим, что ADO.NET взаимодействует с базой данных SQL с помощью *маршрута прокси*. Если бы промежуточный слой не использовался, можно было бы сказать, что использовался *прямой маршрут*.


## Версия 12 базы данных SQL: внешняя и внутренняя программа


В случае подключения к версии 12 нужно узнать, запускается ли клиентская программа *за пределами* или *внутри* границ облака Azure. В подразделах рассматриваются два типичных сценария.


#### *Внешняя программа.* Клиент работает на настольном компьютере


Порт 1433 — единственный порт, который должен быть открыт на компьютере, где размещено ваше клиентское приложение базы данных SQL.


#### *Внутренняя программа.* Клиент работает в Azure


При запуске внутри границ облака Azure для взаимодействия с сервером Базы данных SQL клиент использует то, что можно назвать *прямым маршрутом*. После установления подключения дальнейшее взаимодействие между клиентом и базой данных не включает промежуточный слой прокси-сервера.


Последовательность выглядит так:


1. ADO.NET 4.5 (или более поздней версии) инициирует краткое взаимодействие с облаком Azure и получает динамически указанный номер порта.
 - Диапазон для динамического назначения номера порта: 11000–11999 или 14000–14999.

2. Затем ADO.NET подключается к серверу базы данных SQL напрямую, с без промежуточного слоя.

3. Запросы отправляются непосредственно в базу данных, а результаты возвращаются клиенту.


Убедитесь, что диапазоны портов 11000–11999 и 14000–14999 на клиентском компьютере с Azure доступны для взаимодействия клиента ADO.NET 4.5 с базой данных SQL версии 12.

- В частности, порты в этом диапазоне должны оставаться свободными от других исходящих ошибок.

- На виртуальной машине Azure параметрами порта управляет **брандмауэр Windows в режиме повышенной безопасности**.
 - С помощью [пользовательского интерфейса брандмауэра](http://msdn.microsoft.com/library/cc646023.aspx) можно добавить правило, для которого указывается протокол **TCP**, а также диапазон портов, используя следующий синтаксис: **11000–11999**.


## Уточнение версии


В этом разделе описываются псевдонимы, относящиеся к версиям продуктов. В нем также перечисляются некоторые пары версий продуктов.


#### ADO.NET


- ADO.NET 4.0 поддерживает протокол TDS 7.3, но не 7.4.
- ADO.NET 4.5 и более поздних версий поддерживает протокол TDS 7.4.


#### Версии 11 и 12 базы данных SQL


В этом разделе перечислены различия между клиентскими подключениями в версиях 11 и 12 базы данных SQL.


*Примечание.* Оператор Transact-SQL `SELECT @@version;` возвращает значение, которое начинается с числа и точки ("11." или "12."). Эти значения соответствуют именам версий 11 и 12 Базы данных SQL.


## Связанные ссылки


- 20 июля 2015 г. был выпущен ADO.NET 4.6. Объявление в блоге группы разработчиков для .NET доступно [здесь](http://blogs.msdn.com/b/dotnet/archive/2015/07/20/announcing-net-framework-4-6.aspx).


- 15 августа 2012 г. был выпущен ADO.NET 4.5. Объявление в блоге группы разработчиков для .NET доступно [здесь](http://blogs.msdn.com/b/dotnet/archive/2012/08/15/announcing-the-release-of-net-framework-4-5-rtm-product-and-source-code.aspx).
 - Запись блога об ADO.NET 4.5.1 доступна [здесь](http://blogs.msdn.com/b/dotnet/archive/2013/06/26/announcing-the-net-framework-4-5-1-preview.aspx).


- [Список версий протокола TDS](http://www.freetds.org/userguide/tdshistory.htm)


- [Общие сведения о разработке базы данных SQL](sql-database-develop-overview.md)


- [Брандмауэр базы данных SQL Azure](sql-database-firewall-configure.md)


- [Практическое руководство. Настройка параметров брандмауэра для Базы данных SQL](sql-database-configure-firewall-settings.md)

<!---HONumber=AcomDC_0817_2016-->