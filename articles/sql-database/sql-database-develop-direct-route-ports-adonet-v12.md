---
title: "Порты для базы данных SQL помимо 1433 | Документация Майкрософт"
description: "Иногда взаимодействие с базой данных при клиентских подключениях из ADO.NET к Базе данных SQL Azure версии 12 происходит непосредственно, без прокси-сервера. Порты, отличные от 1433, становятся важными."
services: sql-database
documentationcenter: 
author: MightyPen
manager: jhubbard
editor: 
ms.assetid: 3f17106a-92fd-4aa4-b6a9-1daa29421f64
ms.service: sql-database
ms.custom: development
ms.workload: drivers
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/17/2016
ms.author: sstein
translationtype: Human Translation
ms.sourcegitcommit: 2ea002938d69ad34aff421fa0eb753e449724a8f
ms.openlocfilehash: fa3f1215c809fe2b45293c56cdca4496fa352afb


---
# <a name="ports-beyond-1433-for-adonet-45-and-sql-database-v12"></a>Порты, кроме 1433, для ADO.NET 4.5 и Базы данных SQL версии 12
В этом разделе описываются изменения, которые версия 12 базы данных SQL привносит в поведение подключения клиентов, использующих ADO.NET 4.5 или более поздней версии.

## <a name="v11-of-sql-database-port-1433"></a>Версия 11 базы данных SQL: порт 1433
Когда программа клиента использует ADO.NET 4.5 для подключения и запроса к версии 11 базы данных SQL, внутренняя последовательность выглядит следующим образом.

1. ADO.NET пытается подключиться к базе данных SQL.
2. ADO.NET использует порт 1433 для вызова модуля промежуточного слоя, который в свою очередь подключается к базе данных SQL.
3. База данных SQL отправляет свой ответ обратно в промежуточный слой, который перенаправляет ответ в ADO.NET на порт 1433.

**Терминология.** Описывая предыдущую последовательность, мы говорим, что ADO.NET взаимодействует с базой данных SQL с помощью *маршрута прокси*. Если бы промежуточный слой не использовался, можно было бы сказать, что использовался *прямой маршрут* .

## <a name="v12-of-sql-database-outside-vs-inside"></a>Версия 12 базы данных SQL: внешняя и внутренняя программа
В случае подключения к версии 12 нужно узнать, запускается ли клиентская программа *за пределами* или *внутри* границ облака Azure. В подразделах рассматриваются два типичных сценария.

#### <a name="outside-client-runs-on-your-desktop-computer"></a>*Внешняя программа.* Клиент работает на настольном компьютере
Порт 1433 — единственный порт, который должен быть открыт на компьютере, где размещено ваше клиентское приложение базы данных SQL.

#### <a name="inside-client-runs-on-azure"></a>*Внутренняя программа.* Клиент работает в Azure
При запуске внутри границ облака Azure для взаимодействия с сервером Базы данных SQL клиент использует то, что можно назвать *прямым маршрутом* . После установления подключения дальнейшее взаимодействие между клиентом и базой данных не включает промежуточный слой прокси-сервера.

Последовательность выглядит так:

1. ADO.NET 4.5 (или более поздней версии) инициирует краткое взаимодействие с облаком Azure и получает динамически указанный номер порта.
   
   * Диапазон для динамического назначения номера порта: 11000–11999 или 14000–14999.
2. Затем ADO.NET подключается к серверу базы данных SQL напрямую, с без промежуточного слоя.
3. Запросы отправляются непосредственно в базу данных, а результаты возвращаются клиенту.

Убедитесь, что диапазоны портов 11000–11999 и 14000–14999 на клиентском компьютере с Azure доступны для взаимодействия клиента ADO.NET 4.5 с базой данных SQL версии 12.

* В частности, порты в этом диапазоне должны оставаться свободными от других исходящих ошибок.
* На виртуальной машине Azure параметрами порта управляет **брандмауэр Windows в режиме повышенной безопасности** .
  
  * С помощью [пользовательского интерфейса брандмауэра](http://msdn.microsoft.com/library/cc646023.aspx) можно добавить правило, для которого указывается протокол **TCP**, а также диапазон портов, используя следующий синтаксис: **11000–11999**.

## <a name="version-clarifications"></a>Уточнение версии
В этом разделе описываются псевдонимы, относящиеся к версиям продуктов. В нем также перечисляются некоторые пары версий продуктов.

#### <a name="adonet"></a>ADO.NET
* ADO.NET 4.0 поддерживает протокол TDS 7.3, но не 7.4.
* ADO.NET 4.5 и более поздних версий поддерживает протокол TDS 7.4.

#### <a name="sql-database-v11-and-v12"></a>Версии 11 и 12 базы данных SQL
В этом разделе перечислены различия между клиентскими подключениями в версиях 11 и 12 базы данных SQL.

*Примечание.* Инструкция Transact-SQL `SELECT @@version;` возвращает значение, начинающиеся с числа, например "11". Эти значения соответствуют именам версий 11 и 12 Базы данных SQL.

## <a name="related-links"></a>Связанные ссылки
* 20 июля 2015 г. был выпущен ADO.NET 4.6. Объявление в блоге группы разработчиков для .NET доступно [здесь](http://blogs.msdn.com/b/dotnet/archive/2015/07/20/announcing-net-framework-4-6.aspx).
* 15 августа 2012 г. был выпущен ADO.NET 4.5. Объявление в блоге группы разработчиков для .NET доступно [здесь](http://blogs.msdn.com/b/dotnet/archive/2012/08/15/announcing-the-release-of-net-framework-4-5-rtm-product-and-source-code.aspx).
  
  * Запись блога об ADO.NET 4.5.1 доступна [здесь](http://blogs.msdn.com/b/dotnet/archive/2013/06/26/announcing-the-net-framework-4-5-1-preview.aspx).
* [Список версий протокола TDS](http://www.freetds.org/userguide/tdshistory.htm)
* [Общие сведения о разработке базы данных SQL](sql-database-develop-overview.md)
* [Брандмауэр базы данных SQL Azure](sql-database-firewall-configure.md)
* [Практическое руководство. Настройка параметров брандмауэра для Базы данных SQL](sql-database-configure-firewall-settings.md)




<!--HONumber=Nov16_HO3-->


