<properties 
	pageTitle="Справка по эластичному пулу баз данных SQL Azure" 
	description="Этот справочник содержит краткие сведения о статьях, посвященных эластичному пулу баз данных, и ссылки на них, а также информацию по программированию." 
	services="sql-database" 
	documentationCenter="" 
	authors="stevestein" 
	manager="jeffreyg" 
	editor=""/>

<tags 
	ms.service="sql-database"
	ms.devlang="NA"
	ms.date="06/24/2015" 
	ms.author="sstein" 
	ms.workload="data-management" 
	ms.topic="article" 
	ms.tgt_pltfrm="NA"/>


# Справка по эластичному пулу баз данных для Базы данных SQL (предварительная версия)

Для разработчиков SaaS, имеющих десятки, сотни или даже тысячи баз данных, эластичный пул баз данных позволяет упростить создание, обслуживание и контроль производительности и стоимости в отношении всей группы баз данных.

Этот справочник содержит краткие сведения о статьях об эластичном пуле и ссылки на них, а также информацию по программированию.

## Обзор

Эластичный пул — это коллекция единиц пропускной способности базы данных (DTU) и память (ГБ), которая является общей для нескольких баз данных. В любое время в пул можно добавить или удалить из него эластичные базы данных. Эластичные базы данных в пуле используют только необходимые ресурсы пула, предоставляя доступные ресурсы только для активных баз данных, которые в них нуждаются.



## Обязательные требования для создания эластичных пулов и управления ими


- Эластичные пулы доступны только для серверов Базы данных SQL Azure версии 12.   
- PowerShell и API REST для эластичных пулов поддерживаются только в диспетчере ресурсов Azure (ARM); команды управления службами (RDFE) не поддерживаются. 
- Создание эластичных пулов и управление ими поддерживается только на [портале Microsoft Azure](https:portal.azure.com). 


## Ограничения текущей предварительной версии

- Эластичный пул текущей предварительной версии имеет ценовую категорию Standard.  
- Импорт базы данных непосредственно в эластичный пул не поддерживается. Вы можете выполнить импорт в автономную базу данных, а затем переместить эту базу данных в пул. Поддерживается экспорт базы данных из пула.


## Список статей

Следующие статьи помогут вам начать работу с эластичными базами данных и эластичными заданиями:

| Статья | Описание |
| :-- | :-- |
| [Эластичные пулы Базы данных SQL](sql-database-elastic-pool.md) | Обзор эластичных пулов |
| [Создание эластичного пула для Базы данных SQL и управление им с помощью портала Azure](sql-database-elastic-pool-portal.md) | Как создать эластичный пул и управлять им с помощью портала Azure |
| [Создание эластичного пула для Базы данных SQL и управление им с помощью PowerShell](sql-database-elastic-pool-powershell.md) | Как создать эластичный пул и управлять им с помощью командлетов PowerShell |
| [Обзор службы заданий эластичной базы данных](sql-database-elastic-jobs-overview.md) | Общие сведения о службе эластичных заданий, позволяющей выполнять сценарии T-SQL по всем эластичным базам данных в пуле |
| [Установка компонентов службы заданий эластичной базы данных](sql-database-elastic-jobs-service-installation.md) | Как установить службу заданий эластичной базы данных |
| [Создание требуемого пользователя для службы эластичных заданий](sql-database-elastic-jobs-add-logins-to-dbs.md) | Для запуска сценария задания эластичной базы данных в каждую базу данных пула необходимо добавить пользователя с соответствующими разрешениями. |
| [Удаление компонентов службы заданий эластичной базы данных](sql-database-elastic-jobs-uninstall.md) | Восстановление после сбоев при попытке установить службу заданий эластичной базы данных |



## Сведения о пространстве имен и конечной точке
Эластичный пул — это ARM-ресурс типа "ElasticPool" в Базе данных SQL Microsoft Azure.

- **namespace**: Microsoft.Sql/ElasticPool
- **secondary-endpoint** для API REST вызывает (диспетчер ресурсов Azure): https://management.azure.com



## Свойства эластичного пула баз данных

| Свойство | Описание |
| :-- | :-- |
| creationDate | Дата создания пула. |
| databaseDtuMax | Максимальное количество DTU, которое может использовать одна база данных пула. Это свойство не гарантирует предоставление ресурсов. Максимальное количество DTU применяется ко всем базам данных в пуле. |
| databaseDtuMin | Минимальное количество DTU, которое гарантируется одной базе данных пула. Это свойство может иметь значение, равное 0. Минимальное количество DTU применяется ко всем базам данных в пуле. Обратите внимание, что произведение числа баз данных в пуле и минимального количества DTU базы данных не может превышать количество DTU самого пула. |
| Dtu | Количество DTU, предоставляемое для всех баз данных в пуле. |
| edition | Уровень служб пула. Все базы данных в пределах пула имеют данный выпуск. |
| elasticPoolId | GUID экземпляра пула. |
| elasticPoolName | Имя пула. Оно является уникальным относительно его родительского сервера. |
| location | Местоположение центра обработки данных, где был создан пул. |
| state | Если счет за подписку не оплачен, отображается состояние "Отключено", иначе — "Готово". |
| storageMB | Размер хранилища пула в МБ. Одна любая база данных в пуле может использовать хранилище выпуска Standard Edition (250 ГБ), однако общее хранилище, используемое для всех баз данных в пуле, не может превышать этот предел пула. |


## DTU и размеры хранилища для эластичных пулов и эластичных баз данных

Размер хранилища пула определяется количеством DTU пула; каждый DTU = 1 ГБ памяти в хранилище. Например, пул в 200 DTU имеет размер хранилища, равный 200 ГБ.

| свойства; | значение по умолчанию | допустимые значения |
| :-- | :-- | :-- |
| Dtu | 100 | 100, 200, 400, 800, 1200 |
| databaseDtuMax | 100 | 10, 20, 50, 100 |
| databaseDtuMin | 0 | 0, 10, 20, 50 |
| storageMB | 100 ГБ* | 100 ГБ, 200 ГБ, 400 ГБ, 800 ГБ, 1200 ГБ |

*единицами измерения в API являются МБ, а не ГБ

## Ограничения работников и сеансов

Максимальное количество поддерживаемых одновременных работников и параллельных сеансов для всех баз данных в эластичном пуле зависит от значения параметра DTU для данного пула:

| DTU | Максимальное количество одновременных работников | Максимальное количество параллельных сеансов |
| :-- | :-- | :-- |
| 100 | 200 | 2 400 |
| 200 | 400 | 4 800 |
| 400 | 800 | 9 600 |
| 800 | 1 600 | 19 200 |
| 1 200 | 2 400 | 28 800 |


## Ограничения диспетчера ресурсов Azure

Эластичный пул требует наличия сервера Базы данных SQL Azure версии 12. Серверы находятся внутри группы ресурсов.

- Каждая группа ресурсов может иметь не более 800 серверов.
- Каждый сервер может содержать не более 800 эластичных пулов.
- Каждый эластичный пул может иметь не более 100 баз данных.


## Задержка операций эластичного пула

- Изменение гарантированного количества DTU на каждую базу данных (databaseDtuMin) или максимального DTU на каждую базу данных (databaseDtuMax) обычно завершается в течение 5 минут или меньше. 
- Изменение DTU или размера хранилища (storageMB) пула зависит от общего количества памяти, используемой всеми базами данных в пуле. Изменение занимает порядка 90 минут или меньше на каждые 100 ГБ. Например, если общее пространство, используемое всеми базами данных в пуле, равно 200 ГБ, то ожидаемая задержка при изменении DTU пула / размера хранилища составит 3 часа или менее. 



## Командлеты PowerShell и команды API REST для эластичного пула баз данных (только для диспетчера ресурсов Azure)

Для создания эластичных пулов и управления ими доступны следующие командлеты PowerShell и команды API REST:

| [Командлеты PowerShell](https://msdn.microsoft.com/library/mt125356.aspx) | [Команды API REST](https://msdn.microsoft.com/library/azure/mt163571.aspx) |
| :-- | :-- |
| Get-AzureSqlDatabase | Получить базу данных SQL Azure |
| Get-AzureSqLElasticPool | Получить эластичный пул баз данных для Базы данных SQL Azure |
| Get-AzureSqlElasticPoolActivity | Получить операции эластичного пула баз данных для Базы данных SQL Azure |
| Get-AzureSqlElasticPoolDatabase | Получить эластичную базу данных для Базы данных SQL Azure |
| Get-AzureSqlElasticPoolDatabaseActivity | Получить операции эластичной базы данных для Базы данных SQL Azure |
| Get-AzureSqlServer | Получить сервер Базы данных SQL Azure |
| Get-AzureSqlServerFirewallRule | Получить правило брандмауэра для сервера Базы данных SQL Azure |
| Get-AzureSqlServerServiceObjective | Получить цель для службы сервера Базы данных SQL Azure |
| New-AzureSqlDatabase | Создать базу данных SQL Azure |
| New-AzureSqlElasticPool | Создать эластичный пул баз данных для Базы данных SQL Azure |
| New-AzureSqlServer | Создать сервер Базы данных SQL Azure |
| New-AzureSqlServerFirewallRule | Создать правило брандмауэра для сервера Базы данных SQL Azure |
| Remove-AzureSqlDatabase | Удалить базу данных SQL Azure |
| Remove-AzureSqlElasticPool | Удалить эластичный пул баз данных для Базы данных SQL Azure |
| Remove-AzureSqlServer | Удалить сервер Базы данных SQL Azure |
| Set-AzureSqlDatabase | Установить базу данных SQL Azure |
| Set-AzureSqlElasticPool | Установить эластичный пул баз данных для Базы данных SQL Azure |
| Set-AzureSqlServer | Установить сервер Базы данных SQL Azure |
| Set-AzureSqlServerFirewallRule | Установить правило брандмауэра для сервера Базы данных SQL Azure |
| Get-Metrics | Получить показатели |


## Информация о счетах и ценах

Счета по эластичным пулам баз данных выставляются в соответствии со следующими характеристиками:

- Счет по эластичному пулу выставляется после его создания, даже если в нем нет баз данных. 
- Оплата за эластичный пул является почасовой. Она совпадает с частотой измерения уровней производительности автономных баз данных. 
- Если размер эластичного пула изменен на новое значение DTU, то оплата пула согласно этому новому значению DTU начисляется только после завершения операции по изменению размера. Используется та же схема, как при изменении уровня производительности автономных баз данных. 


- Цена эластичного пула основывается на количестве DTU пула и количестве баз данных в пуле.
- Цена вычисляется по формуле (количество DTU пула)x(цена за единицу DTU) + (количество баз данных)x(цена за единицу для баз данных)

Цена за единицу DTU для эластичного пула выше, чем цена за единицу DTU для автономной базы данных того же уровня служб. Подробнее об этом можно узнать в статье [Стоимость использования Базы данных SQL](http://azure.microsoft.com/pricing/details/sql-database/).

## Ошибки эластичных пулов баз данных

| Номер ошибки | Серьезность ошибки | Формат ошибки | Вставки ошибки | Причина ошибки | Действия для устранения ошибки |
| :-- | :-- | :-- | :-- | :-- | :-- |
| 1132 | EX_RESOURCE | Хранилище эластичного пула достигло своего предельного значения. Уровень использования хранилища для эластичного пула не может превышать (%d) МБ. | Ограничение памяти эластичного пула в МБ. | Попытка записи данных в базу данных, когда было достигнуто предельное значение хранилища эластичного пула. | Если это возможно, попробуйте увеличить DTU эластичного пула для увеличения предельного размера его хранилища, сократить объем памяти, используемой отдельными базами данных в эластичном пуле, или удалить базы данных из пула. |
| 10929 | EX_USER | Минимальная гарантия %s составляет %d, максимальное значение равно %d, а текущее использование для базы данных — %d. Тем не менее, в настоящее время сервер слишком занят, чтобы обработать более чем %d запросов для этой базы данных. Получить справку можно по ссылке [http://go.microsoft.com/fwlink/?LinkId=267637](http://go.microsoft.com/fwlink/?LinkId=267637). В противном случае повторите попытку позже. | Минимальное число DTU на базу данных; максимальное число DTU на одну базу данных. | Общее количество одновременных работников (запросов) по всем базам данных в эластичном пуле превысило ограничение пула. | Если это возможно, попробуйте увеличить DTU эластичного пула для увеличения предельно допустимого количества работников или удалить базы данных из эластичного пула. |
| 40844 | EX_USER | База данных '%ls' на сервере '%ls' является базой данных выпуска '%ls' в эластичном пуле и не может иметь связь непрерывной копии. | имя базы данных, выпуск базы данных, имя сервера | Для бесплатных БД в эластичном пуле выдана команда StartDatabaseCopy. | Скоро |
| 40857 | EX_USER | Эластичный пул для сервера '%ls' не найден, имя эластичного пула: '%ls'. | имя сервера, имя эластичного пула | На указанном сервере указанный эластичный пул не существует. | Укажите допустимое имя эластичного пула. |
| 40858 | EX_USER | Эластичный пул '%ls' на сервере '%ls' уже существует | имя эластичного пула, имя сервера | Указанный эластичный пул уже существует на указанном логическом сервере. | Укажите новое имя эластичного пула. |
| 40859 | EX_USER | Эластичный пул не поддерживает уровень служб '%ls'. | уровень служб эластичного пула | Для подготовки эластичного пула указанный уровень служб не поддерживается. | Укажите правильный выпуск или оставьте значение уровня служб пустым, чтобы использовать значение по умолчанию. |
| 40860 | EX_USER | Недопустимая комбинация эластичного пула '%ls' и цели службы '%ls'. | имя эластичного пула; имя цели уровня службы | Эластичный пул и цель службы могут быть указаны вместе только в том случае, если цель службы задана как 'ElasticPool'. | Укажите правильную комбинацию эластичного пула и цели службы. |
| 40861 | EX_USER | Выпуск '%.*ls' базы данных не может отличаться от уровня служб эластичного пула, который равен '%.*ls'. | выпуск базы данных, уровень служб эластичного пула | Выпуск базы данных отличается от уровня службы эластичного пула. | Не указывайте выпуск базы данных, который отличается от уровня службы эластичного пула. Обратите внимание, что выпуск базы данных указывать не требуется. |
| 40862 | EX_USER | Если указана цель служб эластичного пула, то необходимо указать имя этого эластичного пула. | None | Цель службы эластичного пула неоднозначно определяет эластичный пул. | Если используется цель служб эластичного пула, укажите имя этого эластичного пула. |
| 40864 | EX_USER | Число DTU для эластичного пула должно составлять по крайней мере (%d) DTU для уровня служб '%.*ls'. | DTU для эластичного пула; уровень служб эластичного пула. | Попытка задать для эластичного пула DTU, значение которого ниже минимального ограничения. | Повторите попытку, установив для эластичного пула DTU, значение которого хотя бы равно минимальному ограничению. |
| 40865 | EX_USER | Число DTU для эластичного пула не должно превышать (%d) DTU для уровня служб '%.*ls'. | DTU для эластичного пула; уровень служб эластичного пула. | Попытка задать для эластичного пула DTU, значение которого выше максимального ограничения. | Повторите попытку, установив для эластичного пула DTU, значение которого не превышает максимальное ограничение. |
| 40867 | EX_USER | Максимальное количество DTU на каждую базу данных должно составлять как минимум (%d) для уровня служб '%.*ls'. | максимальное количество DTU на каждую базу данных, уровень служб эластичного пула | Попытка задать максимальное количество DTU на каждую базу данных ниже поддерживаемого ограничения. | Попробуйте использовать уровень служб эластичного пула, который поддерживает желаемый параметр. |
| 40868 | EX_USER | Максимальное количество DTU на каждую базу данных не должно превышать (%d) для уровня служб '%.*ls'. | Максимальное количество DTU на каждую базу данных, уровень служб эластичного пула. | Попытка задать максимальное число DTU на каждую базу данных, которое находится за пределами поддерживаемого ограничения. | Попробуйте использовать уровень служб эластичного пула, который поддерживает желаемый параметр. |
| 40870 | EX_USER | Минимальное количество DTU на каждую базу данных не должно превышать (%d) для уровня служб '%.*ls'. | Минимальное количество DTU на каждую базу данных, уровень служб эластичного пула | Попытка задать минимальное число DTU на каждую базу, которое находится за пределами поддерживаемого ограничения. | Попробуйте использовать уровень служб эластичного пула, который поддерживает желаемый параметр. |
| 40873 | EX_USER | Количество баз данных (%d) и минимальное количество DTU на каждую базу данных (%d) не может превышать DTU эластичного пула (%d). | Количество баз данных в эластичном пуле; минимальное количество DTU на каждую базу данных; количество DTU эластичного пула. | Попытка задать минимальное количество DTU для баз данных в эластичном пуле, превышающее DTU эластичного пула. | Попробуйте увеличить количество DTU эластичного пула, уменьшить минимальное количество DTU на каждую базу данных или уменьшить количество баз данных в эластичном пуле. |
| 40877 | EX_USER | Эластичный пул не может быть удален до тех пор, пока он содержит какую-либо базу данных. | None | Эластичный пул содержит одну или несколько баз данных и не может быть удален. | Чтобы удалить эластичный пул, удалите из него базы данных. |
| 40881 | EX_USER | В эластичном пуле '%.*ls' достигнуто предельное количество баз данных. Предельное количество баз данных не может превышать (%d) для эластичного пула с DTU (%d). | Имя эластичного пула; предельное количество баз данных в эластичном пуле; количество DTU для пула ресурсов. | Попытка создания или добавления базы данных в эластичный пул, когда было достигнуто предельное количество баз данных эластичного пула. | Если это возможно, попробуйте увеличить DTU эластичного пула, чтобы увеличить предельное количество баз данных, или удалить базы данных из эластичного пула. |
| 40889 | EX_USER | Невозможно уменьшить количество DTU или размер хранилища для эластичного пула '%.*ls', так как недостаточно места в хранилище баз данных. | Имя эластичного пула. | Попытка ограничить размер хранилища эластичного пула, при которой уменьшается размер используемого им хранилища. | Попробуйте сократить использование хранилища отдельными базами данных в эластичном пуле или удалить базы данных из пула, чтобы уменьшить количество DTU или размер хранилища. |
| 40891 | EX_USER | Минимальное число DTU на базу данных (%d) не может превышать максимального числа DTU на базу данных (%d). | Минимальное число DTU на базу данных; максимальное число DTU на базу данных. | Попытка задать минимальное число DTU на каждую базу данных, превышающее максимальное число DTU на каждую базу данных. | Убедитесь, что минимальное число DTU на базу данных не превышает максимального числа DTU на базу данных. |
| ПОДЛЕЖИТ УТОЧНЕНИЮ | EX_USER | Размер хранилища для отдельной базы данных в эластичном пуле не может превышать максимальный размер, допустимый уровнем служб эластичного пула '%.*ls'. | уровень служб эластичного пула | Максимальный размер базы данных превышает максимальный размер, допустимый уровнем служб эластичного пула. | Укажите максимальный размер базы данных, который находится в пределах ограничений на максимальный размер, допустимый уровнем служб эластичного пула. |

<!---HONumber=62-->