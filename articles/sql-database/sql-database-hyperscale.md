---
title: Обзор уровня служб "Гипермасштабирование" Базы данных SQL Azure | Документация Майкрософт
description: В этой статье описывается уровень служб "Гипермасштабирование" в модели приобретения на основе виртуальных ядер в службе "База данных SQL Azure" и объясняется, как он отличается от уровней служб "Общего назначения" и "Критически важный для бизнеса".
services: sql-database
author: CarlRabeler
ms.reviewer: carlrab
manager: craigg
ms.service: sql-database
ms.subservice: managed-instance
ms.custom: DBs & servers
ms.topic: conceptual
ms.date: 09/23/2018
ms.author: carlrab
ms.openlocfilehash: b50d049d051a57ba12239d4619572dc0dbd7e32f
ms.sourcegitcommit: 32d218f5bd74f1cd106f4248115985df631d0a8c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/24/2018
ms.locfileid: "46962970"
---
# <a name="what-is-the-hyperscale-service-tier-preview-in-azure-sql-database"></a>Что такое уровень служб "Гипермасштабирование" (предварительная версия) в Базе данных SQL Azure?

Уровень служб "Гипермасштабирование" в Базе данных SQL Azure — это новейший уровень в модели приобретения на основе виртуальных ядер. Этот высокомасштабируемый уровень производительности ресурсов хранения и вычислений, который использует архитектуру Azure для масштабирования этих ресурсов для службы "База данных SQL Azure" за пределы, доступные для уровней служб "Общего назначения" и "Критически важный для бизнеса".

## <a name="what-are-the-capabilities-of-the-hyperscale-service-tier"></a>Возможности уровня служб "Гипермасштабирование"

Уровень "Гипермасштабирование" в службе "База данных SQL Azure" предоставляет следующие дополнительные возможности:

- Поддержка размера базы данных до 100 ТБ. 
- Более быстрое резервное копирование больших баз данных (на основе моментальных снимков файлов).
- Ускоренное восстановление базы данных (на основе моментальных снимков файлов). 
- Более высокая общая производительность благодаря высокой пропускной способности ведения журнала и ускоренному выполнению транзакций независимо от объемов данных. 
- Быстрое горизонтальное масштабирование. Вы можете подготовить один или несколько узлов только для чтения, чтобы переносить на них рабочие нагрузки чтения и использовать эти узлы в качестве узлов горячей замены.
- Быстрое увеличение масштаба. Вы можете постоянно увеличивать масштаб вычислительных ресурсов, чтобы размещать крупные рабочие нагрузки по мере необходимости, а затем уменьшать их масштаб, когда они не нужны. 

Уровень служб "Гипермасштабирование" устраняет многие практические ограничения, традиционно наблюдаемые в облачных базах данных. В то время как большинство других баз данных ограничены ресурсами, доступными на одном узле, базы данных на уровне служб "Гипермасштабирование" не имеют таких ограничений. Благодаря гибкой архитектуре хранения можно горизонтально масштабировать емкость хранилища по мере необходимости. На самом деле базы данных уровня "Гипермасштабирование" не создаются с определенным максимальным размером. База данных уровня "Гипермасштабирование" растет по мере необходимости, поэтому плата взимается только за ту емкость, которую вы используете. Для рабочих нагрузок интенсивного чтения уровень служб "Гипермасштабирование" обеспечивает быстрое горизонтальное масштабирование путем подготовки дополнительных реплик чтения при необходимости перенести рабочие нагрузки. 

Кроме того, время, необходимое для создания резервных копий базы данных или увеличения/уменьшения масштаба, больше не привязано к объему данных в базе данных. Резервные копии баз данных уровня "Гипермасштабирование" могут создаваться практически мгновенно. Увеличивать или уменьшать масштаб баз данных с десятками терабайт данных можно за считаные минуты. Вы больше не ограничены первоначальными вариантами конфигурации. 

Дополнительные сведения о размерах вычислительных ресурсов для уровня служб "Гипермасштабирование" см. в статье [Выбор уровня служб для виртуальных ядер, ресурсов вычислений, памяти, хранилища и операций ввода-вывода](sql-database-service-tiers-vcore.md).

## <a name="who-should-consider-the-hyperscale-service-tier"></a>Кому рекомендуется использовать уровень служб "Гипермасштабирование"

Уровень служб "Гипермасштабирование" в первую очередь предназначен для клиентов с большими локальными базами данных, которые хотят модернизировать свои приложения, перейдя в облако, или для клиентов, которые уже находятся в облаке и ограничены максимальным размером базы данных (1–4 ТБ). Он также предназначен для клиентов, которым нужна высокая производительность и высокая масштабируемость для хранения и вычисления.

Уровень служб "Гипермасштабирование" поддерживает все рабочие нагрузки SQL Server, но в первую очередь он оптимизирован для OLTP. Он также поддерживает гибридные и аналитические (киоск данных) рабочие нагрузки. 

> [!IMPORTANT]
> Эластичные пулы не поддерживают уровень служб "Гипермасштабирование".

## <a name="architecture-distributing-functions-to-isolate-capabilities"></a>Архитектура: распределение функций для изоляции возможностей

В отличие от традиционных ядер СУБД, в которых все функции управления данными централизованы в одном месте или процессе (даже в так называемых распределенных базах данных есть несколько копий монолитного механизма обработки данных), база данных уровня "Гипермасштабирование" отделяет механизм обработки запросов, где семантики различных модулей обработки данных расходятся, от компонентов, которые обеспечивают долговременное хранение и устойчивость данных. Таким образом, емкость хранилища может быть плавно масштабирована по мере необходимости (исходная цель составляет 100 ТБ). Реплики, доступные только для чтения, используют одни и те же вычислительные компоненты, поэтому для развертывания новой такой реплики не требуется копия данных.

На следующей схеме представлены различные типы узлов в базе данных уровня "Гипермасштабирование".

![архитектура](./media/sql-database-hyperscale/hyperscale-architecture.png)

Ниже описаны типы узлов, содержащиеся в базе данных уровня "Гипермасштабирование".
 
### <a name="compute-node"></a>Вычислительный узел.

На вычислительном узле расположен реляционный модуль, поэтому там находятся все элементы языка, операции обработки запросов и прочее. Все взаимодействия пользователя с базой данных уровня "Гипермасштабирование" происходят через эти вычислительные узлы. На вычислительных узлах выполняется кэширование на основе дисков SSD (именуемое на предыдущей схеме как RBPEX — отказоустойчивое расширение пула), чтобы минимизировать количество круговых путей в сети, необходимых для получения страницы данных. Существует один первичный вычислительный узел, где обрабатываются все транзакции и рабочие нагрузки чтения и записи. При этом есть один или несколько вторичных вычислительных узлов, которые выступают в качестве резервных узлов на случай отработки отказа, а также действуют как вычислительные узлы только для чтения для переноса рабочих нагрузок чтения (если эта функция необходима).

### <a name="page-server-node"></a>Узел сервера страниц

Серверы страниц — это системы, представляющие горизонтально масштабируемую подсистему хранилища.  Каждый сервер страниц отвечает за подмножество страниц в базе данных.  Каждый сервер страниц условно контролирует 1 терабайт данных. Данные совместно размещаются только на одном сервере страниц (за пределами реплик, созданных для обеспечения избыточности и доступности). Задача сервера страниц заключается в том, чтобы предоставлять страницы базы данных для вычислительных узлов по требованию и обновлять страницы, когда транзакции обновляют данные. Актуальность данных на серверах страниц обеспечивается за счет воспроизведения записей журнала из службы журналов. Серверы страниц также поддерживают кэширование на основе диска SSD, чтобы повысить производительность. Для обеспечения дополнительной надежности за долгосрочное хранение страниц данных отвечает служба хранилища Azure.

### <a name="log-service-node"></a>Узел службы журнала

Узел службы журнала принимает записи журнала из первичного вычислительного узла, сохраняет их в надежном кэше и отправляет на остальные вычислительные узлы (чтобы они могли обновить свои кэши), а также соответствующие серверы страниц для обновления данных. Таким образом, все изменения данных с основного вычислительного узла распространяются через службу журнала на все вторичные вычислительные узлы и серверы страниц. Наконец, записи журнала вытесняются на долгосрочное хранение в службу хранилища Azure, которая представляет собой неограниченный репозиторий. Этот механизм устраняет необходимость в частом усечении журнала. Служба журнала также имеет локальный кэш, ускоряющий доступ.

### <a name="azure-storage-node"></a>Узел хранилища Azure

Узел хранилища Azure является конечным пунктом назначения данных, полученных с серверов страниц. Это хранилище используется для целей резервного копирования, а также для репликации между регионами Azure. Резервные копии состоят из моментальных снимков файлов данных. На основе этих моментальных снимков быстро выполняются операции восстановления, и данные могут быть восстановлены в любой момент времени. 

## <a name="backup-and-restore"></a>Архивация и восстановление

Резервные копии основаны на моментальных снимках файлов, поэтому они почти мгновенные. Благодаря разделению хранения и вычисления можно перенести операции резервного копирования или восстановления на уровень хранения, чтобы снизить нагрузку на основной узел вычислений. В результате резервное копирование большой базы данных не влияет на производительность первичного вычислительного узла. Аналогичным образом восстановление выполняется путем копирования моментального снимка файла и поэтому не является объемной операцией с данными. Операция восстановления в той же учетной записи хранения выполняется быстро.

## <a name="scale-and-performance-advantages"></a>Преимущества масштабирования и производительности

Благодаря возможности быстро развертывать и свертывать дополнительные вычислительные узлы, предназначенные только для чтения, архитектура уровня "Гипермасштабирование" предоставляет значительные возможности масштабирования для чтения и также может освобождать первичный вычислительный узел для обслуживания большего количества запросов на запись. Кроме того, вычислительные узлы можно быстро увеличивать или уменьшать в масштабе благодаря архитектуре уровня "Гипермасштабирование" с общим хранилищем. 


## <a name="next-steps"></a>Дополнительная информация

- Сведения об уровнях служб см. в статье [Ресурсы и модели приобретения для базы данных SQL Azure](sql-database-service-tiers.md).
- Дополнительные сведения об ограничениях ресурсов см. в статье [Обзор ограничений ресурсов базы данных SQL Azure](sql-database-resource-limits.md).
- Сведения о функциях и список сравнения см. в статье [Сравнение функций Базы данных SQL Azure и SQL Server](sql-database-features.md).
