<properties 
   pageTitle="Начало работы с динамическим маскированием данных в базе данных SQL (портал предварительной версии Azure)" 
   description="Начало работы с динамическим маскированием данных в базе данных SQL (на портале предварительной версии Azure)" 
   services="sql-database" 
   documentationCenter="" 
   authors="nadavhelfman"
   manager="jeffreyg" 
   editor="v-romcal"/>

<tags
   ms.service="sql-database"
   ms.devlang="NA"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="data-services" 
   ms.date="07/30/2015"
   ms.author="nadavh; ronmat; v-romcal; sstein"/>

# Начало работы с динамическим маскированием данных в базе данных SQL (портал предварительной версии Azure)

> [AZURE.SELECTOR]
- [Dynamic Data Masking - Azure portal](sql-database-dynamic-data-masking-get-started-portal.md)

## Обзор

Динамическая маскировка данных в базе данных SQL ограничивает возможность раскрытия конфиденциальных данных, маскируя их для обычных пользователей. Динамическая маскировка данных используется в предварительной версии для уровней обслуживания Basic, Standard и Premium в версии 12 базы данных SQL Azure.

Динамическая маскировка данных помогает предотвратить несанкционированный доступ к конфиденциальным данным, позволяя заказчикам самим определять, сколько конфиденциальных данных следует отображать, при минимальном влиянии на уровень приложения. Эта функция работает на основе политики безопасности, скрывая конфиденциальные данные в результирующем наборе запроса по заданным полям базы данных, не меняя сами данные в базе данных.

Например, специалист службы поддержки в центре обработки вызовов может идентифицировать абонентов по нескольким цифрам номера социального страхования или номера кредитной карты, но эти элементы данных не должны предоставляться ему полностью. Разработчик может определить правило маскировки, которое будет применяться для каждого результата запроса маскировать все цифры номера социального страхования или номер кредитной карты, кроме последних четырех, в результирующем наборе. Еще один пример — защита персональных данных с помощью соответствующей маски. Разработчик может отправлять запросы в рабочие среды для устранения неполадок, не нарушая при этом нормативные правила.

## Основы динамической маскировки данных в базе данных SQL

Настройка политики динамического маскирования данных на портале предварительной версии Azure осуществляется посредством выбора операции «Динамическое маскирование данных» в колонке конфигурации Базы данных SQL. Перед настройкой динамического маскирования данных проверьте, используете ли вы [клиент прежних версий](sql-database-auditing-and-dynamic-data-masking-downlevel-clients.md).


### Разрешения для динамической маскировки данных

Динамическую маскировку данных может настраивать администратор базы данных Azure, администратор сервера или сотрудник службы безопасности.

### Политика динамической маскировки данных

* **Имена для входа в привилегированном режиме** — набор имен пользователей, при использовании которых с данных, полученных в результатах SQL-запросов, снимается маска.
  
* **Правила маскировки** — набор правил, определяющих поля, подлежащие маскировке, и используемую функцию маскирования. Задать такие поля можно с помощью имени таблицы базы данных и имени столбца.

* **Функции маскировки** — набор методов, управляющих доступностью данных для различных сценариев.

| Функция маскирования | Логика маскирования |
|----------|---------------|
| **По умолчанию** |**Полное маскирование в соответствии с типами данных в указанных полях**<br/><br/>• Используйте XXXXXXXX или меньше символов «X», если размер поля меньше 8 символов для строковых типов данных (nchar, ntext, nvarchar).<br/>• Используйте нулевое значение для числовых типов данных (bigint, bit, decimal, int, money, numeric, smallint, smallmoney, tinyint, float, real).<br/>• Используйте 01-01-1900 для типов данных даты и времени (date, datetime2, datetime, datetimeoffset, smalldatetime, time).<br/>• Для варианта SQL используется значение по умолчанию текущего типа.<br/>• Для XML используется документ <masked/>.<br/>• Используйте пустое значение для специальных типов данных (таблица меток времени, hierarchyid, GUID, binary, image, пространственные типы varbinary).
| **Кредитная карта** |**Метод маскировки, который предоставляет последние четыре цифры предопределенных полей** и добавляет строковую константу в качестве префикса в формате номера кредитной карты.<br/><br/>XXXX-XXXX-XXXX-1234|
| **Номер социального страхования** |**Метод маскировки, который предоставляет две последние цифры предопределенных полей** и добавляет строковую константу в качестве префикса в формате номера социального страхования в США.<br/><br/>XXX-XX-XX12 |
| **Электронная почта** | **Метод маскировки, который предоставляет первую букву и домен**, используя строковую константу в качестве префикса в формате электронного адреса.<br/><br/>aXX@XXXX.com |
| **Случайное число** | **Метод маскировки, который формирует случайное число** в соответствии с выбранными границами и типами фактических данных. Если установленные границы равны, функция маскировки будет постоянным числом.<br/><br/>![Область навигации](./media/sql-database-dynamic-data-masking-get-started/1_DDM_Random_number.png) |
| **Пользовательский текст** | **Метод маскировки, при котором видны первая и последняя буквы** и добавляется пользовательская строка заполнения в середине.<br/>prefix[padding]suffix<br/><br/>![Область навигации](./media/sql-database-dynamic-data-masking-get-started/2_DDM_Custom_text.png) |

  
<a name="Anchor1"></a>
### Строка безопасного подключения

При использовании [клиента прежних версий](sql-database-auditing-and-dynamic-data-masking-downlevel-clients.md) необходимо обновить существующие клиенты (например, приложения) для использования измененного формата строки подключения. Щелкните [здесь](sql-database-auditing-and-dynamic-data-masking-downlevel-clients.md) для получения сведений.

## Настройка динамической маскировки данных для базы данных с помощью портала предварительной версии Azure

1. Запустите портал предварительной версии Azure по адресу [https://portal.azure.com](https://portal.azure.com).
	 
2. Перейдите к колонке настройки базы данных, которая содержит конфиденциальные данные, подлежащие маскировке.
	
3. Щелкните элемент **Динамическое маскирование данных**. Запустится колонка настройки **Динамическое маскирование данных**.

	* Можно также прокрутить вниз до раздела **Операции** и нажать кнопку **Динамическое маскирование данных**.
	 
	![Область навигации](./media/sql-database-dynamic-data-masking-get-started/4_DDM_Activation.png)<br/><br/>

4. В колонке конфигурации **Динамическое маскирование данных** щелкните **Добавить маску**, чтобы открыть колонку конфигурации **Добавить правило маскирования**.

	![Область навигации](./media/sql-database-dynamic-data-masking-get-started/5_ddm_policy_tile.png)<br/><br/>

5. Выберите значение **Таблица** **Столбец**, чтобы определить целевые поля, которые будут замаскированы.

6. Выберите **Формат поля маскировки** в списке категорий маскировки конфиденциальных данных.

	![Область навигации](./media/sql-database-dynamic-data-masking-get-started/7_DDM_Add_Masking_Rule.png)<br/><br/>

7. Щелкните **Сохранить** в колонке правил маскировки данных, чтобы обновить набор правил маскировки в политике динамического маскирования данных.

8. Введите привилегированные имена для входа, у которых должен быть доступ к немаскированным конфиденциальным данным.
 
	![Область навигации](./media/sql-database-dynamic-data-masking-get-started/6_DDM_Privileged_Logins.png)

	>[AZURE.TIP]Чтобы на уровне приложений для привилегированных пользователей могли отображаться конфиденциальные данные, добавьте имя для входа SQL приложения, которое используется для отправки запросов к базе данных. Настоятельно рекомендуется, чтобы этот список содержал минимально необходимое количество имен для входа. Это сведет к минимуму риск раскрытия конфиденциальных данных.

9. Щелкните **Сохранить** в колонке настройки маскировки данных, чтобы сохранить новую или обновленную политику маскировки.

10. При использовании [клиента прежних версий](sql-database-auditing-and-dynamic-data-masking-downlevel-clients.md) необходимо обновить существующие клиенты (например, приложения) для использования измененного формата строки подключения. Дополнительные сведения см. в статье [Клиенты прежних версий](sql-database-auditing-and-dynamic-data-masking-downlevel-clients.md).

## Настройка динамического маскирования данных для базы данных с помощью командлетов Powershell

См. статью [Командлеты Базы данных SQL Azure](https://msdn.microsoft.com/library/azure/mt163521.aspx).


## Настройка динамической маскировки данных для базы данных с помощью REST API

См. статью [Операции для Баз данных SQL Azure](https://msdn.microsoft.com/library/dn505719.aspx).

<!---HONumber=August15_HO6-->