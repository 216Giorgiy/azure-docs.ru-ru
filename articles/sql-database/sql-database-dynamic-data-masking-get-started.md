---
title: "Начало работы с динамическим маскированием данных в базе данных SQL (портал Azure)"
description: "Начало работы с динамическим маскированием данных в базе данных SQL (на портале Azure)"
services: sql-database
documentationcenter: 
author: ronitr
manager: jhubbard
editor: 
ms.assetid: 4b36d78e-7749-4f26-9774-eed1120a9182
ms.service: sql-database
ms.custom: secure and protect
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: data-services
ms.date: 11/22/2016
ms.author: ronitr; ronmat
translationtype: Human Translation
ms.sourcegitcommit: e8513a520d4aa012dcc0ee2ee0dd53828886280d
ms.openlocfilehash: c28f444fcfc7361f02218b7866e15b77769232e5


---
# <a name="get-started-with-sql-database-dynamic-data-masking-azure-portal"></a>Начало работы с динамическим маскированием данных в базе данных SQL (портал Azure)

## <a name="overview"></a>Обзор
Динамическая маскировка данных в базе данных SQL ограничивает возможность раскрытия конфиденциальных данных, маскируя их для обычных пользователей. Динамическое маскирование данных поддерживается в версии 12 Базы данных SQL Azure.

Динамическая маскировка данных помогает предотвратить несанкционированный доступ к конфиденциальным данным, позволяя заказчикам самим определять, сколько конфиденциальных данных следует отображать, при минимальном влиянии на уровень приложения. Эта функция работает на основе политики безопасности, скрывая конфиденциальные данные в результирующем наборе запроса по заданным полям базы данных, не меняя сами данные в базе данных.

Например, представитель отдела обслуживания клиентов в центре обработки вызовов может идентифицировать абонентов по нескольким цифрам номера социального страхования или номера кредитной карты, но эти элементы данных не должны предоставляться ему полностью. Правило маскирования может быть задано таким образом, чтобы в результатах выполнения запросов маскировалось все, кроме последних четырех цифр номера социального страхования или кредитной карты. Еще один пример — защита персональных данных с помощью соответствующей маски. Разработчик может отправлять запросы в рабочие среды для устранения неполадок, не нарушая при этом нормативные правила.

## <a name="sql-database-dynamic-data-masking-basics"></a>Основы динамической маскировки данных в базе данных SQL
Настройка политики динамического маскирования данных на портале Azure осуществляется посредством выбора операции "Динамическое маскирование данных" в колонке конфигурации или параметров базы данных SQL.

### <a name="dynamic-data-masking-permissions"></a>Разрешения для динамической маскировки данных
Динамическую маскировку данных может настраивать администратор базы данных Azure, администратор сервера или сотрудник службы безопасности.

### <a name="dynamic-data-masking-policy"></a>Политика динамической маскировки данных
* **Пользователи SQL, исключенные из маскирования** — ряд пользователей SQL или удостоверений AAD, при использовании которых с данных, полученных в результатах SQL-запросов, снимается маска. Обратите внимание на то, что пользователи с правами администратора исключаются из правил маскирования всегда и видят исходные данные без всякой маски.
* **Правила маскирования** — набор правил, определяющих поля, подлежащие маскированию, и используемую функцию маскирования. Задать такие поля можно с помощью имени схемы базы данных, имени таблицы и имени столбца.
* **Функции маскирования** — набор методов, управляющих доступностью данных для различных сценариев.

| Функция маскирования | Логика маскирования |
| --- | --- |
| **По умолчанию** |**Полное маскирование в соответствии с типами данных предопределенных полей**<br/><br/>• Для строковых типов данных (nchar, ntext, nvarchar) используется XXXX или меньшее количество символов "X", если размер поля меньше 4 символов.<br/>• Для числовых типов данных (bigint, bit, decimal, int, money, numeric, smallint, smallmoney, tinyint, float, real) используется нулевое значение.<br/>• Для типов данных даты и времени (date, datetime2, datetime, datetimeoffset, smalldatetime, time) используется формат 01-01-1900.<br/>• Для варианта SQL используется значение по умолчанию текущего типа.<br/>• Для XML-документа используется <masked/>.<br/>• Используйте пустое значение для специальных типов данных (таблица меток времени, hierarchyid, GUID, binary, image, пространственные типы varbinary). |
| **Кредитная карта** |**Метод маскирования, который предоставляет последние четыре цифры предопределенных полей** и добавляет строковую константу в качестве префикса в формате номера кредитной карты.<br/><br/>XXXX-XXXX-XXXX-1234 |
| **Номер социального страхования** |**Метод маскирования, который предоставляет четыре последние цифры предопределенных полей** и добавляет строковую константу в качестве префикса в формате номера социального страхования в США.<br/><br/>XXX-XX-1234 |
| **Электронная почта** |**Метод маскирования, который предоставляет первую букву и домен**, используя строковую константу в качестве префикса в формате электронного адреса.<br/><br/>aXX@XXXX.com |
| **Случайное число** |**Метод маскирования, который формирует случайное число** в соответствии с выбранными границами и типами фактических данных. Если установленные границы равны, функция маскирования будет постоянным числом.<br/><br/>![Область навигации](./media/sql-database-dynamic-data-masking-get-started/1_DDM_Random_number.png) |
| **Пользовательский текст** |**Метод маскирования, при котором видны первая и последняя буквы** и добавляется пользовательская строка заполнения в середине. Если исходная строка короче открытых префикса и суффикса, будет использоваться только строка дополнения. <br/>префикс[заполнение]суффикс<br/><br/>![Область навигации](./media/sql-database-dynamic-data-masking-get-started/2_DDM_Custom_text.png) |

<a name="Anchor1"></a>

### <a name="recommended-fields-to-mask"></a>Рекомендуемые поля для маскирования
Система рекомендаций DDM помечает в базе данных поля, которые могут содержать конфиденциальные данные и являются хорошими кандидатами на применение маскирования. Список рекомендуемых для маскирования столбцов в вашей базе данных см. на портале в колонке «Динамическое маскирование данных». Вам нужно только щелкнуть **Добавить маску** для одного или нескольких столбцов, а затем **Сохранить**, чтобы применить маски к выбранным полям.

## <a name="set-up-dynamic-data-masking-for-your-database-using-the-azure-portal"></a>Настройка динамической маскировки данных для базы данных с помощью портала Azure
1. Запустите портал Azure по адресу [https://portal.azure.com](https://portal.azure.com).
2. Перейдите к колонке параметров базы данных, которая содержит конфиденциальные данные, подлежащие маскированию.
3. Щелкните элемент **Динамическое маскирование данных**. Запустится колонка настройки **Динамическое маскирование данных**.
   
   * Можно также прокрутить вниз до раздела **Операции** и щелкнуть **Динамическое маскирование данных**.
     
     ![Область навигации](./media/sql-database-dynamic-data-masking-get-started/4_ddm_settings_tile.png)<br/><br/>
4. В колонке конфигурации **Динамическое маскирование данных** отображаются некоторые столбцы вашей базы данных, которые система рекомендаций отметила как подлежащие маскированию. Чтобы принять эти рекомендации, просто нажмите кнопку **Добавить маску** для одного или нескольких столбцов — макси будут созданы на основе типа по умолчанию для соответствующего столбца. Функцию маскирования можно изменить, щелкнув правило маскирования и изменив формат поля маскирования по своему желанию. Нажмите кнопку **Сохранить** , чтобы сохранить параметры.
   
    ![Область навигации](./media/sql-database-dynamic-data-masking-get-started/5_ddm_recommendations.png)<br/><br/>
5. Чтобы добавить маску для какого-либо столбца базы данных, вверху колонки конфигурации **Динамическое маскирование данных** щелкните **Добавить маску**, чтобы открыть колонку конфигурации **Добавить правило маскирования**.
   
    ![Область навигации](./media/sql-database-dynamic-data-masking-get-started/6_ddm_add_mask.png)<br/><br/>
6. Выберите значение **Схема**, **Таблица** и **Столбец**, чтобы определить целевые поля, которые будут замаскированы.
7. Выберите **Формат поля маскирования** в списке категорий маскирования конфиденциальных данных.
   
    ![Область навигации](./media/sql-database-dynamic-data-masking-get-started/7_ddm_mask_field_format.png)<br/><br/>        
8. Щелкните **Сохранить** в колонке правил маскирования данных, чтобы обновить набор правил маскирования в политике динамического маскирования данных.
9. Введите пользователей SQL или удостоверения AAD, у которых должен быть доступ к немаскированным конфиденциальным данным. Это должен быть список пользователей, разделенных точкой с запятой. Обратите внимание на то, что пользователи с правами администратора всегда видят исходные данные без всякой маски.
   
    ![Область навигации](./media/sql-database-dynamic-data-masking-get-started/8_ddm_excluded_users.png)
   
   > [!TIP]
   > Чтобы на уровне приложений для привилегированных пользователей могли отображаться конфиденциальные данные, добавьте пользователя SQL или удостоверение AAD, которое используется приложением для отправки запросов к базе данных. Настоятельно рекомендуется, чтобы этот список содержал минимально необходимое количество привилегированных пользователей. Это сведет к минимуму риск раскрытия конфиденциальных данных.
   > 
   > 
10. Щелкните **Сохранить** в колонке настройки маскирования данных, чтобы сохранить новую или обновленную политику маскирования.

## <a name="set-up-dynamic-data-masking-for-your-database-using-powershell-cmdlets"></a>Настройка динамического маскирования данных для базы данных с помощью командлетов Powershell
См. статью с описанием [командлетов базы данных SQL Azure](https://msdn.microsoft.com/library/azure/mt574084.aspx).

## <a name="set-up-dynamic-data-masking-for-your-database-using-rest-api"></a>Настройка динамической маскировки данных для базы данных с помощью REST API
См. статью с описанием [операций для баз данных SQL Azure](https://msdn.microsoft.com/library/dn505719.aspx).




<!--HONumber=Nov16_HO4-->


