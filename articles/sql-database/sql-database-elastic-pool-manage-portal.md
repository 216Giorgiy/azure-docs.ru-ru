---
title: "Портал Azure: создание пула эластичных баз данных SQL и управление им | Документация Майкрософт"
description: "Узнайте, как использовать портал Azure и встроенную аналитику Базы данных SQL для управления, отслеживания и выбора нужного размера для масштабируемого пула эластичных баз данных с целью оптимизации производительности базы данных и управления затратами."
keywords: 
services: sql-database
documentationcenter: 
author: ninarn
manager: jhubbard
editor: cgronlun
ms.assetid: 3dc9b7a3-4b10-423a-8e44-9174aca5cf3d
ms.service: sql-database
ms.custom: multiple databases
ms.devlang: NA
ms.date: 11/17/2016
ms.author: ninarn
ms.workload: data-management
ms.topic: article
ms.tgt_pltfrm: NA
translationtype: Human Translation
ms.sourcegitcommit: e851a3e1b0598345dc8bfdd4341eb1dfb9f6fb5d
ms.openlocfilehash: d5be10b4898002a693f617043b2e2b8a890035ca
ms.lasthandoff: 04/15/2017


---
# <a name="create-and-manage-an-elastic-pool-with-the-azure-portal"></a>Создание эластичного пула и управление им на портале Azure
В этой статье показано, как с помощью портала Azure создавать масштабируемые [эластичные пулы](sql-database-elastic-pool.md) и управлять ими. Для создания эластичных пулов Azure и управления ими можно также использовать [PowerShell](sql-database-elastic-pool-manage-powershell.md), REST API или [C#](sql-database-elastic-pool-manage-csharp.md). Вы также можете использовать [Transact-SQL](sql-database-elastic-pool-manage-tsql.md), чтобы создавать новые базы данных в эластичных пулах и перемещать базы данных в пулы и обратно.

## <a name="create-an-elastic-pool"></a>Создание эластичного пула 

Эластичный пул можно создать двумя способами. Если вы знаете требуемые настройки пула, вы можете создать его с нуля, или же можно следовать рекомендациям службы. База данных SQL автоматически предоставляет интеллектуальные рекомендации по настройке эластичного пула, если это экономически выгодно для вас с учетом последних данных телеметрии об использовании баз данных.

На сервере можно создать несколько пулов, но в один пул нельзя добавлять базы данных с разных серверов. 

> [!NOTE]
> Пулы эластичных БД общедоступны во всех регионах Azure, кроме западной Индии, где сейчас доступна только предварительная версия.  Общедоступные пулы эластичных БД появятся в этом регионе в самое ближайшее время.
>
>

### <a name="step-1-create-an-elastic-pool"></a>Шаг 1. Создание эластичного пула

Чтобы создать эластичный пул и переместить в него существующие базы данных, проще всего использовать колонку существующего **сервера** на портале.

> [!NOTE]
> Также можно создать эластичный пул, выполнив поиск по строке **пул эластичных баз данных SQL** в **Marketplace** или нажав кнопку **+Добавить** в колонке обзора **Пулы эластичных БД SQL**. В процессе подготовки пула вы можете создать новый сервер или указать существующий.
>
>

1. На [портале Azure](http://portal.azure.com/) откройте раздел **Больше служб** **>** **Серверы SQL Server**, затем выберите сервер с базами данных, которые нужно добавить в эластичный пул.
2. Щелкните **Создать пул**.

    ![Добавление пула на сервер](./media/sql-database-elastic-pool-create-portal/new-pool.png)

    **-ИЛИ-**

    Возможно, вы увидите сообщение о наличии рекомендуемых эластичных пулов для сервера. Щелкните сообщение, чтобы просмотреть рекомендуемые пулы в зависимости от телеметрии использования базы данных за прошедший период, и выберите уровень, чтобы увидеть подробности и настроить пул. В разделе [Общие сведения о рекомендациях для пула](#understand-pool-recommendations) далее в этой статье объясняется, как создаются рекомендации.

    ![рекомендуемый пул](./media/sql-database-elastic-pool-create-portal/recommended-pool.png)

3. Появится колонка **Эластичный пул**, в которой можно указать настройки для этого пула. Если на предыдущем шаге вы выбрали **Создать пул**, здесь по умолчанию устанавливается ценовая категория **Стандартный** и в пул не включаются базы данных. Пул можно создать пустым или сразу указать набор существующих баз данных с этого сервера, которые нужно поместить в пул. Если вы выбрали рекомендуемый пул, для него будут автоматически указаны ценовая категория, параметры производительности и список баз данных, но все эти свойства вы можете изменить.

    ![Настройка эластичного пула](./media/sql-database-elastic-pool-create-portal/configure-elastic-pool.png)

4. Укажите имя для пула эластичных БД или оставьте значение по умолчанию.

### <a name="step-2-choose-a-pricing-tier"></a>Шаг 2. Выбор ценовой категории

Ценовая категория пула определяет функции, которые будут доступны для эластичных баз данных в пуле, максимальное количество единиц eDTU (eDTU MAX) и объем хранилища (в гигабайтах) для каждой базы данных. Дополнительные сведения см. в статье "Уровни служб".

Чтобы изменить ценовую категорию для пула, щелкните **Ценовая категория**, укажите нужную категорию и нажмите кнопку **Выбрать**.

> [!IMPORTANT]
> Если вы выбрали ценовую категорию и подтвердили изменения нажатием кнопки **ОК** на последнем шаге, изменить ценовую категорию пула будет невозможно. Чтобы изменить ценовую категорию для существующего эластичного пула, создайте новый эластичный пул в нужной ценовой категории и перенесите в него базы данных.
>
>

![Выберите ценовую категорию](./media/sql-database-elastic-pool-create-portal/pricing-tier.png)

### <a name="step-3-configure-the-pool"></a>Шаг 3. Настройка пула

Задав ценовую категорию, щелкните "Настроить пул". Откроется страница, где вы можете добавить в пул базы данных, указать для него значения eDTU и объема хранилища (в ГБ), а также максимальное и минимальное значения eDTU для эластичных баз данных в пуле.

1. Щелкните **Настроить пул**
2. Выберите базы данных, которые нужно добавить в пул. Этот шаг является необязательным при создании пула. Базы данных можно добавить после создания пула.
    Чтобы добавить базы данных, щелкните **Добавить базу данных**, выберите базы данных, которые требуется добавить, и нажмите кнопку **Выбрать**.

    ![Добавить базы данных](./media/sql-database-elastic-pool-create-portal/add-databases.png)

    Если базы данных, с которыми вы работаете, содержат достаточно данных телеметрии об использовании за прошедший период, график **Estimated eDTU and GB usage** (Примерный объем использования eDTU и ГБ) и линейчатая диаграмма **Actual eDTU usage** (Фактический объем использования eDTU) будут обновляться, помогая вам принимать решения относительно конфигурации. Кроме того, служба может предоставить вам рекомендации, которые помогут выбрать правильный размер пула. В разделе [Dynamic Recommendations](#dynamic-recommendations).

3. Используя элементы управления на странице **Настройка пула**, изучите параметры и настройте пул. Дополнительные сведения об ограничениях для каждого уровня обслуживания см. в разделе [eDTU и размеры хранилища для пулов эластичных БД](sql-database-elastic-pool.md#edtu-and-storage-limits-for-elastic-pools). Подробные рекомендации по выбору правильного размера эластичного пула см. в статье [Когда следует использовать эластичный пул?](sql-database-elastic-pool-guidance.md) Дополнительные сведения о параметрах пула см. в разделе [Свойства пулов эластичных БД](sql-database-elastic-pool.md#elastic-pool-properties).

    ![Настройка эластичного пула](./media/sql-database-elastic-pool-create-portal/configure-performance.png)

4. Щелкните **Выбрать** in the **Configure Pool** .
5. Нажмите кнопку **ОК** , чтобы создать пул.


## <a name="understand-elastic-pool-recommendations"></a>Пояснения к рекомендациям для эластичного пула

Служба базы данных SQL оценивает историю использования и рекомендует один или несколько пулов, если этот вариант экономичнее, чем отдельные базы данных. Для предоставления каждой рекомендации используется уникальное подмножество баз данных на сервере, которое лучше всего подходит для формирования пула.

![рекомендуемый пул](./media/sql-database-elastic-pool-create-portal/recommended-pool.png)  

Рекомендация для пула включает следующие аспекты:

- ценовая категория для пула ("Базовый", "Стандартный", "Премиум" или "Премиум RS").
- соответствующее количество **единиц eDTU пула** (также называемое максимальным количеством единиц eDTU для одного пула);
- **максимальное** и **минимальное количество единиц eDTU** для каждой базы данных;
- список рекомендуемых баз данных для пула.

> [ВАЖНО!] При составлении рекомендаций для пулов служба учитывает данные телеметрии за последние 30 дней. Чтобы база данных рассматривалась для включения в эластичный пул, она должна существовать не менее 7 дней. Базы данных, которые уже находятся в эластичном пуле, не рассматриваются в качестве кандидатов для рекомендуемого добавления в пул.
>

Служба оценивает потребность в ресурсах и экономичность перемещения каждой отдельной базы данных на каждом уровне службы в пулы того же уровня. Например, все базы данных Standard на сервере оцениваются на предмет возможности их добавления в пул эластичных баз данных уровня Standard. Это означает, что служба не предоставляет кросс-уровневые рекомендации, такие как перемещение базы данных Standard в пул Premium.

После того как вы добавите базы данных в пул, на основе сведений об использовании выбранных баз данных будут динамически создаваться рекомендации. Эти рекомендации отображаются в диаграмме использования (со значениями eDTU и ГБ), а также на баннере рекомендаций в верхней части колонки **Настройка пула**. Эти рекомендации помогут вам создать эластичный пул, оптимизированный для конкретных баз данных.

![Динамические рекомендации](./media/sql-database-elastic-pool-create-portal/dynamic-recommendation.png)

## <a name="manage-and-monitor-an-elastic-pool"></a>Мониторинг эластичного пула и управление им

Портал Azure можно использовать для мониторинга эластичного пула и баз данных в пуле, а также управления ими. На портале можно отслеживать использование эластичного пула и баз данных в этом пуле. Можно также внести ряд изменений в эластичный пул и отправить все изменения одновременно. К таким изменениям относятся добавление или удаление баз данных, изменение параметров эластичного пула и изменение параметров базы данных.

Ниже показан пример эластичного пула. Представление включает в себя следующие компоненты.

*  Диаграммы для мониторинга использования ресурсов эластичного пула и содержащихся в нем баз данных.
*  Кнопка пула **Настроить** для внесения изменений в эластичный пул.
*  Кнопка **Создать базу данных**, которая создает базу данных и добавляет ее в текущий эластичный пул.
*  Задания обработки эластичных БД, которые помогают управлять большим количеством баз данных, запуская скрипты Transact-SQL для всех баз данных в списке.

![Представление пула][2]

Можно перейти к определенному пулу, чтобы просмотреть использование его ресурсов. По умолчанию для пула настроено отображение использования хранилища и eDTU за последний час. Диаграмму можно настроить для отображения разных показателей за разные периоды времени.

1. Выберите эластичный пул, с которым вы будете работать.
2. В разделе **Наблюдение за пулами эластичных БД** есть диаграмма **Использование ресурсов**. Щелкните эту диаграмму.

    ![Мониторинг эластичного пула][3]

    Откроется колонка **Метрика**, в которой отображается подробное представление указанных метрик за выбранный период времени.   

    ![Выноска "Метрика"][9]

### <a name="to-customize-the-chart-display"></a>Настройка внешнего вида диаграммы

Можно отредактировать диаграмму и колонку метрики для отображения других метрик, включая процент использования ЦП, процент операций ввода-вывода данных и операций ввода-вывода журнала.

1. В колонке метрики щелкните **Изменить**.

    ![Щелкните "Изменить".][6]

2. В колонке **Изменение диаграммы** выберите диапазон времени (последний час, текущий день или последняя неделя) или нажмите кнопку **Пользовательский**, чтобы выбрать любой диапазон времени в пределах двух последних недель. Выберите тип диаграммы (линейчатая или график), а затем выберите ресурсы для мониторинга.

   > [!Note]
   > Диаграмма может одновременно показывать несколько метрик с одинаковыми единицами измерения. Например, если вы выберете "Процент eDTU", дополнительно можно выбрать только те метрики, которые измеряются в процентах.
   >

    ![Щелкните "Изменить".](./media/sql-database-elastic-pool-manage-portal/edit-chart.png)

    

3. Нажмите кнопку **ОК**.

## <a name="manage-and-monitor-databases-in-an-elastic-pool"></a>Мониторинг баз данных в эластичном пуле и управление ими

Отдельные базы данных также можно отслеживать на наличие потенциальных проблем.

1. В разделе **Мониторинг эластичных баз данных**есть диаграмма, на которой отображаются метрики для пяти баз данных. По умолчанию на диаграмме отображаются пять основных баз данных в пуле по среднему использованию eDTU за последний час. Щелкните эту диаграмму.

    ![Мониторинг эластичного пула][4]

2. Появится колонка **Использование ресурсов базы данных**. В ней отображается подробное представление использования баз данных в пуле. Сетка в нижней части колонки позволяет выбрать любые базы данных в пуле, чтобы отобразить их использование на диаграмме (до пяти баз данных). Вы можете также настроить метрики и окно времени, отображаемые на диаграмме. Для этого щелкните **Изменить диаграмму**.

    ![Колонка "Использование ресурсов баз данных"][8]

### <a name="to-customize-the-view"></a>Настройка представления

1. В колонке **Использование ресурсов базы данных** щелкните **Изменить диаграмму**.

    ![Элемент управления "Изменение диаграммы"](./media/sql-database-elastic-pool-manage-portal/db-utilization-blade.png)

2. В колонке **Изменение диаграммы** выберите диапазон времени (последний час или последние сутки) или нажмите кнопку **Пользовательский**, чтобы выбрать другой день в пределах последних двух недель.

    ![Элемент управления "Пользовательский"](./media/sql-database-elastic-pool-manage-portal/editchart-date-time.png)

3. Щелкните раскрывающийся список **Сравнить базы данных по** , чтобы выбрать другую метрику для использования при сравнении баз данных.

    ![Изменение диаграммы](./media/sql-database-elastic-pool-manage-portal/edit-comparison-metric.png)

### <a name="to-select-databases-to-monitor"></a>Выбор баз данных для мониторинга

В списке баз данных в колонке **Использование ресурсов баз данных** можно найти определенные БД, просматривая страницы списка или вводя имя базы данных. Установите флажок, чтобы выбрать нужную базу данных.

![Поиск баз данных для мониторинга][7]


## <a name="add-an-alert-to-an-elastic-pool-resource"></a>Добавление оповещения для ресурса эластичного пула

К эластичному пулу можно добавить правила для отправки сообщений электронной почты конкретным людям или строк оповещений на конкретные конечные точки URL-адресов, когда для эластичного пула достигается пороговое значение использования.

> [!IMPORTANT]
> Для данных мониторинга использования ресурсов в эластичных пулах задержка как минимум 20 минут является нормальной. Настройка интервала менее 30 минут для оповещений об эластичных пулах сейчас не поддерживается. Какие-либо оповещения, заданные для пулов эластичных БД, с периодом (параметр -WindowSize в API PowerShell) менее 30 минут, могут быть не активированы. Проследите, чтобы во всех оповещениях, определяемых для эластичных пулов, использовался интервал (WindowSize) не менее 30 минут.
>
>

**Добавление оповещения в ресурс.**

1. Щелкните диаграмму **Использование ресурсов**, чтобы открыть колонку **Метрика**, нажмите кнопку **Добавить оповещение**, а затем введите сведения в колонке **Добавление правила оповещения** (в качестве **Ресурса** автоматически устанавливается используемый пул).
2. Введите **имя** и **описание** оповещения для вас и получателей.
3. Из списка выберите **метрику** для оповещения.

    На диаграмме динамически отображается использование ресурсов для этой метрики, на основе которых вы можете выбрать пороговое значение.

4. Выберите **Условие** (больше, меньше и т. д.) и **Пороговое значение**.
5. Нажмите кнопку **ОК**.

## <a name="move-a-database-into-an-elastic-pool"></a>Перемещение базы данных в пул эластичных БД

Вы можете добавить или удалить базы данных из существующего пула. Базы данных могут находиться в других пулах. Однако добавлять можно только базы данных, которые находятся на одном логическом сервере.

1. В колонке пула в разделе **Эластичные базы данных** щелкните **Настроить пул**.

    ![Щелкните "Настроить пул".][1]

2. В колонке **Настройка пула** щелкните **Добавить пул**.

    ![Щелкните "Добавить в пул".](./media/sql-database-elastic-pool-manage-portal/add-to-pool.png)


3. В колонке **Добавление базы данных** выберите базы данных для добавления в пул. Затем щелкните **Выбрать**.

    ![Выберите добавляемые базы данных.](./media/sql-database-elastic-pool-manage-portal/add-databases-pool.png)

    Теперь в колонке **Настройка пула** отображается только что выбранная для добавления база данных с состоянием **Ожидание**.

    ![Добавление в пул в состоянии ожидания.](./media/sql-database-elastic-pool-manage-portal/pending-additions.png)

3. В колонке **Настройка пула** щелкните **Сохранить**.

    ![Щелкните Сохранить](./media/sql-database-elastic-pool-manage-portal/click-save.png)

## <a name="move-a-database-out-of-an-elastic-pool"></a>Перемещение базы данных из пула эластичных БД

1. В колонке **Настройка пула** выберите базы данных для удаления.

    ![список баз данных](./media/sql-database-elastic-pool-manage-portal/select-pools-removal.png)

2. Щелкните **Удалить из пула**.

    ![список баз данных](./media/sql-database-elastic-pool-manage-portal/click-remove.png)

    Теперь в колонке **Настройка пула** отображается только что выбранная для удаления база данных с состоянием **Ожидание**.

    ![Просмотр результата добавления и удаления базы данных](./media/sql-database-elastic-pool-manage-portal/pending-removal.png)

3. В колонке **Настройка пула** щелкните **Сохранить**.

    ![Щелкните Сохранить](./media/sql-database-elastic-pool-manage-portal/click-save.png)

## <a name="change-performance-settings-of-an-elastic-pool"></a>Изменение параметров производительности эластичного пула

Наблюдая за использованием ресурсов эластичного пула, вы можете обнаружить, что требуются дополнительные корректировки. Возможно, для пула потребуется изменить ограничения на производительность или хранение. Может возникнуть необходимость изменить параметры баз данных в пуле. Чтобы добиться оптимального баланса производительности и стоимости, настройку пула можно изменить в любое время. Дополнительные сведения см. в статье [Когда следует использовать пул эластичных баз данных?](sql-database-elastic-pool-guidance.md)

Изменение числа eDTU или ограничений хранения на пул, а также числа eDTU на базу данных

1. Откройте колонку **Настройка пула** .

    В разделе **Параметры пула эластичных БД** с помощью любого ползунка измените параметры пула.

    ![Использование ресурсов пула эластичных БД](./media/sql-database-elastic-pool-manage-portal/resize-pool.png)

2. При изменении параметров на экране отобразятся предполагаемые ежемесячные расходы на изменение.

    ![Обновление эластичного пула и новые ежемесячные затраты](./media/sql-database-elastic-pool-manage-portal/pool-change-edtu.png)

## <a name="latency-of-elastic-pool-operations"></a>Задержка операций эластичного пула
* Изменение минимального или максимального числа eDTU для базы данных обычно завершается за 5 минут.
* Изменение числа eDTU на пул зависит от общей емкости, используемой всеми базами данных в пуле. Изменение занимает порядка 90 минут или меньше на каждые 100 ГБ. Например, если общее пространство, используемое всеми базами данных в пуле, равно 200 ГБ, то ожидаемая задержка при изменении числа eDTU для пула составит до 3 часов.

## <a name="next-steps"></a>Дальнейшие действия

- Чтобы разобраться в понятии эластичного пула, см. статью [Что такое эластичный пул Azure SQL?](sql-database-elastic-pool.md)
- Рекомендации по использованию эластичных пулов см. в статье [Когда следует использовать эластичный пул?](sql-database-elastic-pool-guidance.md)
- Задания обработки эластичных баз данных позволяют выполнять скрипты Transact-SQL для любого количества баз данных в пуле. Подробнее этот аспект описан [здесь](sql-database-elastic-jobs-overview.md).
- В [этой обзорной статье](sql-database-elastic-query-overview.md) описывается, как выполнять запросы к любому количеству баз данных в эластичном пуле.
- Сведения о транзакциях с любым количеством баз данных в пуле см. в статье [Распределенные транзакции по облачным базам данных](sql-database-elastic-transactions-overview.md).


<!--Image references-->
[1]: ./media/sql-database-elastic-pool-manage-portal/configure-pool.png
[2]: ./media/sql-database-elastic-pool-manage-portal/basic.png
[3]: ./media/sql-database-elastic-pool-manage-portal/basic-2.png
[4]: ./media/sql-database-elastic-pool-manage-portal/basic-3.png
[5]: ./media/sql-database-elastic-pool-manage-portal/elastic-jobs.png
[6]: ./media/sql-database-elastic-pool-manage-portal/edit-metric.png
[7]: ./media/sql-database-elastic-pool-manage-portal/select-dbs.png
[8]: ./media/sql-database-elastic-pool-manage-portal/db-utilization.png
[9]: ./media/sql-database-elastic-pool-manage-portal/metric.png

