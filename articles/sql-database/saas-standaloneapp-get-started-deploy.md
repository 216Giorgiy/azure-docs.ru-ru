---
title: "Руководство по мультитенантному приложению SaaS, использующему базу данных SQL Azure | Документация Майкрософт"
description: "Развертывание и изучение отдельного однотенантного SaaS-приложения, в котором используется база данных SQL Azure."
keywords: "руководство по базе данных sql"
services: sql-database
documentationcenter: 
author: stevestein
manager: craigg
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: scale out apps
ms.workload: Inactive
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 11/14/2017
ms.author: sstein
ms.openlocfilehash: 2ca290dfcb23215ffd727500e76076ae8b14fa6f
ms.sourcegitcommit: afc78e4fdef08e4ef75e3456fdfe3709d3c3680b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/16/2017
---
# <a name="deploy-and-explore-a-standalone-single-tenant-application-that-uses-azure-sql-database"></a>Развертывание и изучение отдельного однотенантного приложения, в котором используется база данных SQL Azure

В этом руководстве вы развернете и изучите отдельное SaaS-приложение Wingtip Tickets. Приложение разработано для демонстрации возможностей базы данных SQL Azure, которые упрощают работу со сценариями SaaS.

При помощи шаблона отдельного приложения развертывается группа ресурсов Azure, которая содержит приложение с одним клиентом и базу данных с одним клиентом для каждого клиента.  Чтобы создать мультитенантное решение, можно подготовить несколько экземпляров такого приложения.

В этом руководстве вы развернете группу ресурсов для нескольких клиентов в своей подписке Azure. Но вы можете точно так же развернуть группы ресурсов в клиентской подписке Azure.  Azure предлагает партнерские программы, которые позволяют поставщикам услуг управлять такими группами ресурсов от имени клиента, выполняя функции администратора в подписке клиента.

В описанном ниже разделе развертывания вы найдете три кнопки Deploy to Azure (Развернуть в Azure), каждая из которых предназначена для отдельного экземпляра приложения, настроенного для конкретного клиента. Примерно через пять минут после нажатия такой кнопки соответствующее приложение будет полностью развернуто.  Эти приложения развертываются в вашей подписке Azure.  Вы получите полный доступ для изучения отдельных компонентов приложения и экспериментов с ними.

Исходный код приложения и скрипты управления доступны в репозитории GitHub [WingtipTicketsSaaS-StandaloneApp](https://github.com/Microsoft/WingtipTicketsSaaS-StandaloneApp).


Из этого руководства вы узнаете следующее:

> [!div class="checklist"]

> * как развернуть отдельное SaaS-приложение Wingtip Tickets;
> * где можно получить исходный код приложения и скрипты управления;
> * сведения о серверах и базах данных, формирующих приложение.

Через некоторое время будут выпущены дополнительные руководства, которые позволят исследовать ряд сценариев управления, основанных на этой же модели приложения.   

## <a name="deploy-the-wingtip-tickets-saas-standalone-application"></a>Развертывание отдельного SaaS-приложения Wingtip Tickets

Разверните приложение для трех указанных клиентов, выполнив следующие действия:

1. Щелкните любую из кнопок **Deploy to Azure** (Развернуть в Azure), чтобы открыть шаблон развертывания на портале Azure. Для каждого шаблона нужно предоставить значения двух параметров: имя новой группы ресурсов и имя пользователя, которые позволят отличать это развертывания от других развертываний того же приложения. На следующем шаге содержатся сведения о настройке этих значений.<br><br>
    <a href="http://aka.ms/deploywingtipsa-contoso" target="_blank"><img style="vertical-align:middle" src="media/saas-standaloneapp-get-started-deploy/deploy.png"/></a>     &nbsp;&nbsp;**Contoso Concert Hall**
<br><br>
    <a href="http://aka.ms/deploywingtipsa-dogwood" target="_blank"><img style="vertical-align:middle" src="media/saas-standaloneapp-get-started-deploy/deploy.png"/></a> &nbsp;&nbsp;**Dogwood Dojo**
<br><br>
    <a href="http://aka.ms/deploywingtipsa-fabrikam" target="_blank"><img style="vertical-align:middle" src="media/saas-standaloneapp-get-started-deploy/deploy.png"/></a>    &nbsp;&nbsp;**Fabrikam Jazz Club**

2. Введите необходимые значения параметров для каждого развертывания.

    > [!IMPORTANT]
    > Некоторые проверки подлинности и брандмауэры сервера не защищены специально, так как предназначены для демонстрации. **Создайте новую группу ресурсов** для каждого развертывания.  Не следует использовать существующие группы ресурсов. Не используйте это приложение или ресурсы, которые оно создает, для рабочей среды. Когда вы завершите работу с приложением, удалите эту группу ресурсов, чтобы избежать лишних расходов.

    Для имени ресурса желательно использовать только строчные буквы, цифры и дефисы.
    * Для параметра **Группа ресурсов** выберите действие "Создать" и укажите имя новой группы ресурсов (с учетом регистра).
        * Рекомендуем использовать в именах групп ресурсов только буквы нижнего регистра.
        * В конце имени желательно добавить дефис, ваши инициалы и любую цифру, например так: _wingtip sa-af1_.
        * Выберите "Расположение" из раскрывающегося списка.

    * Для параметра **Пользователь** мы предлагаем выбрать короткое значение, например инициалы с одной цифрой: _af1_.


1. **Разверните приложение.**

    * Установите флажок, чтобы принять условия.
    * Щелкните **Приобрести**.

1. Чтобы отслеживать состояние всех этих развертываний, щелкните значок колокольчика (**Уведомления**) справа от поля поиска. Развертывание приложения занимает примерно пять минут.


## <a name="run-the-application"></a>Выполнение приложения

Это приложение предназначено для демонстрации различных объектов, например концертных залов, джазовых и спортивных клубов, в которых проходят определенные события. Объекты регистрируются в Wingtip Tickets как клиенты, что предоставляет удобную возможность анонсировать события и продавать билеты. Каждому объекту присваивается персонализированный веб-сайт для управления анонсами событий и продажи билетов. Каждый клиент действует самостоятельно и изолированно от других клиентов. На уровне ресурсов каждому клиенту выделяется отдельный экземпляр приложения и отдельная база данных SQL.

1. Откройте страницы событий для каждого из трех клиентов в отдельных вкладках браузера:

    http://events.contosoconcerthall.&lt;ПОЛЬЗОВАТЕЛЬ&gt;.trafficmanager.net; <br>
    http://events.dogwooddojo.&lt;ПОЛЬЗОВАТЕЛЬ&gt;.trafficmanager.net;<br>
    http://events.fabrikamjazzclub.&lt;ПОЛЬЗОВАТЕЛЬ&gt;.trafficmanager.net.

    (Замените здесь слово &lt;ПОЛЬЗОВАТЕЛЬ&gt; соответствующим значением для вашего развертывания.)

   ![События](./media/saas-standaloneapp-get-started-deploy/fabrikam.png)


Чтобы управлять распределением входящего трафика, приложение использует [*диспетчер трафика Azure*](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-overview). Каждое приложение конкретного клиента имеет свой URL-адрес, частью которого является имя этого клиента. Все URL-адреса содержат уникальное значение параметра *Пользователь* в следующем формате: http://events.&lt;имя_объекта&gt;.&lt;ПОЛЬЗОВТЕЛЬ&gt;.trafficmanager.net. Расположение базы данных для каждого клиента указано в параметрах соответствующего приложения.

В рабочей среде обычно создают запись CNAME DNS, чтобы [*связать интернет-домен компании*](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-point-internet-domain) с URL-адресом профиля диспетчера трафика.


## <a name="explore-the-servers-and-tenant-databases"></a>Изучение серверов и клиентских баз данных

Теперь мы подробнее рассмотрим некоторые из развернутых ресурсов.

1. На [портале Azure](http://portal.azure.com) перейдите к списку групп ресурсов.  Здесь вы увидите группу ресурсов **wingtip-sa-[каталог]-&lt;ПОЛЬЗОВАТЕЛЬ&gt;**, в которой развернут сервер **[каталог]-sa-&lt;ПОЛЬЗОВАТЕЛЬ&gt;** с базой данных **[каталог_клиента]**. Такие группы ресурсов должны быть предусмотрены для всех трех клиентов.

1. Откройте группу ресурсов **wingtip-sa-fabrikam -&lt;ПОЛЬЗОВАТЕЛЬ&gt;**, в которой созданы ресурсы для развертывания Fabrikam Jazz Club.  Сервер **fabrikamjazzclub-&lt;ПОЛЬЗОВАТЕЛЬ&gt;** содержит базу данных **fabrikamjazzclub**.


Каждая база данных клиента развертывается как _автономная_ база данных на 50 единиц передачи данных.

## <a name="next-steps"></a>Дальнейшие действия

Из этого руководства вы узнали следующее:

> [!div class="checklist"]

> * как развернуть отдельное SaaS-приложение Wingtip Tickets;
> * сведения о серверах и базах данных, формирующих приложение.
> * Как удалить примеры ресурсов, чтобы прекратить связанное выставление счетов.


## <a name="additional-resources"></a>Дополнительные ресурсы

<!--* Additional [tutorials that build on the Wingtip SaaS application](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)
* To learn about elastic pools, see [*What is an Azure SQL elastic pool*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-pool)
* To learn about elastic jobs, see [*Managing scaled-out cloud databases*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-jobs-overview) -->
* Дополнительные сведения о шаблонах разработки для мультитенантных приложений SaaS и базы данных SQL Azure см. в [*этой статье*](saas-tenancy-app-design-patterns.md).
