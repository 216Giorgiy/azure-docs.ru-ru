---
title: "Отслеживание изменений в виртуальных машинах Azure | Документация Майкрософт"
description: "Используйте функцию отслеживания изменений, чтобы отслеживать изменения в файлах и реестрах на виртуальных машинах."
services: automation
documentationcenter: automation
author: eslesar
manager: carmonm
editor: tysonn
tags: azure-service-management
ms.assetid: 
ms.service: automation
ms.devlang: 
ms.topic: article
ms.tgt_pltfrm: 
ms.workload: infrastructure
ms.date: 09/25/2017
ms.author: eslesar
ms.custom: 
ms.translationtype: HT
ms.sourcegitcommit: c3a2462b4ce4e1410a670624bcbcec26fd51b811
ms.openlocfilehash: ba92390b684573818ec9d69fd8c7be6d064316c7
ms.contentlocale: ru-ru
ms.lasthandoff: 09/25/2017

---

# <a name="track-changes-in-your-azure-virtual-machines"></a>Отслеживание изменений в виртуальных машинах Azure

Включив функцию отслеживания изменений, вы можете отслеживать изменения в файлах и разделах реестра Windows на виртуальных машинах. . что, в свою очередь, позволяет точно определять проблемы с работоспособностью.

Включить функцию отслеживания изменений можно непосредственно на виртуальной машине Azure.

Если у вас нет виртуальной машины Azure, создайте ее, используя сведения, приведенные в статье [Создание виртуальной машины Windows с помощью портала Azure](../virtual-machines/windows/quick-create-portal.md) или [Создание виртуальной машины Linux с помощью портала Azure](../virtual-machines/linux/quick-create-portal.md).

## <a name="sign-in-to-the-azure-portal"></a>Выполните вход на портал Azure.

Войдите на [портал Azure](https://portal.azure.com/).

## <a name="enable-change-tracking-for-an-azure-virtual-machine"></a>Включение функции отслеживания изменений виртуальной машины Azure

1. В левой части экрана выберите **Виртуальные машины**.
1. Затем выберите виртуальную машину из списка.
1. На экране виртуальной машины в разделе **Операции** выберите **Изменить отслеживание**. Откроется экран **Enable Update management** (Включение управления обновлениями).

   ![Отслеживание изменений встроенной виртуальной машины](./media/automation-vm-change-tracking/change-onboard-vm-blade.png)

Проверка выполняется, чтобы определить, включено ли отслеживание изменений для этой виртуальной машины. Если отслеживание изменений не включено, появится баннер, который предоставит возможность включить решение.

   ![Баннер конфигурации развертывания функции отслеживания изменений](./media/automation-vm-change-tracking/change-onboard-banner.png)

Щелкните баннер, чтобы включить решение. Если у вас нет следующих элементов, они будут добавлены автоматически:

* [Рабочая область Log Analytics](../log-analytics/log-analytics-overview.md).
* [Учетная запись службы автоматизации](../automation/automation-offering-get-started.md).

Выберите рабочую область Log Analytics для хранения журналов данных из отслеживания изменений и учетную запись службы автоматизации для отслеживания изменений, а затем щелкните **Включить**.

Строка состояния уведомляет о включении решения. Этот процесс может занять до 15 минут.

## <a name="configure-change-tracking"></a>Настройка функции отслеживания изменений

Когда функция отслеживания изменений будет включена, отобразится экран **отслеживания изменений**. Выберите **Изменение параметров**, чтобы выбрать файлы и разделы реестра, изменения которых необходимо отследить.

![Изменения параметров функции отслеживания изменений](./media/automation-vm-change-tracking/change-edit-settings.png)

Откроется экран **Workspace Configuration** (Конфигурация рабочей области). На соответствующей вкладке выберите **Добавить**, чтобы добавить разделы реестра Windows, файлы Windows или Linux для отслеживания.

## <a name="add-a-windows-registry-key"></a>Добавление раздела реестра Windows

1. На вкладке **реестра Windows** экрана **Workspace Configuration** (Конфигурация рабочей области) выберите **Добавить**. Откроется экран **Add Windows Registry for Change Tracking** (Добавление реестра Windows для отслеживания изменений).

   ![Добавление реестра для отслеживания изменений](./media/automation-vm-change-tracking/change-add-registry.png)

1. Для параметра **Включено** установите значение **True**.
1. Добавьте понятное имя в поле **Имя элемента**.
1. В поле **Группа** введите имя группы (необязательно).
1. В поле **Windows Registry Key** (Раздел реестра Windows) добавьте имя раздела реестра для отслеживания.
1. Щелкните **Сохранить**.

## <a name="add-a-windows-file"></a>Добавление файлов Windows

1. На вкладке **файлов Windows** экрана **конфигурации рабочей области** выберите **Добавить**. Откроется экран **Add Windows File for Change Tracking** (Добавление файла Windows для отслеживания изменений).

   ![Добавление файла Windows для отслеживания изменений](./media/automation-vm-change-tracking/change-add-win-file.png)

1. Для параметра **Включено** установите значение **True**.
1. Добавьте понятное имя в поле **Имя элемента**.
1. В поле **Группа** введите имя группы (необязательно).
1. В поле **Enter Path** (Введите путь) добавьте полный путь и имя файла для отслеживания.
1. Щелкните **Сохранить**.

## <a name="add-a-linux-file"></a>Добавление файла Linux

1. На вкладке **файлов Linux** экрана **конфигурации рабочей области** выберите **Добавить**. Откроется экран **Add Linux File for Change Tracking** (Добавление файла Linux для отслеживания изменений).

   ![Добавление файла Linux для отслеживания изменений](./media/automation-vm-change-tracking/change-add-linux-file.png)

1. Для параметра **Включено** установите значение **True**.
1. Добавьте понятное имя в поле **Имя элемента**.
1. В поле **Группа** введите имя группы (необязательно).
1. В поле **Enter Path** (Введите путь) добавьте полный путь и имя файла для отслеживания.
1. В поле **Path Type** (Тип пути) выберите **Файл** или **Каталог**.
1. В разделе **Recursion** (Рекурсия) выберите **Вкл.** для отслеживания изменений указанного пути и всех файлов и путей в нем. Чтобы отслеживать только выбранный файл или путь, выберите **Выкл**.
1. В разделе **Sudo** выберите **Вкл.**, чтобы отслеживать файлы, для входа в которые необходимо выполнить команду `sudo`. В противном случае выберите **Выкл.**
1. Щелкните **Сохранить**.

## <a name="view-changes"></a>Просмотр изменений

На экране **отслеживания изменений** со временем можно увидеть изменения в каждой из различных категорий виртуальной машины.

   ![Добавление просмотра изменений для отслеживания изменений](./media/automation-vm-change-tracking/change-view-changes.png)

Вы можете выбрать для просмотра категории и диапазон времени изменений. В верхней части экрана со временем отобразится графическое представление изменений.
В нижней части экрана отображается список последних изменений.

## <a name="view-change-tracking-log-data"></a>Просмотр отслеживания изменений данных журнала

Функция отслеживания изменений создает данные журнала, отправляемые в Log Analytics. Чтобы найти журналы с помощью запросов, выберите **Log Analytics** в верхней части экрана **отслеживания изменений**.

   ![Отслеживание изменений в Log Analytics](./media/automation-vm-change-tracking/change-log-analytics.png)

Дополнительные сведения о выполнении поиска файлов журнала в Log Analytics см. в статье [Что такое Log Analytics?](../log-analytics/log-analytics-overview.md).

## <a name="next-steps"></a>Дальнейшие действия

* Дополнительные сведения об отслеживании изменений см. в статье [Отслеживание изменений программного обеспечения в среде с помощью решения для отслеживания изменений](../log-analytics/log-analytics-change-tracking.md).
* Дополнительные сведения об управлении обновлениями виртуальных машинах см. в статье [Решение для управления обновлениями в OMS](../operations-management-suite/oms-solution-update-management.md).

