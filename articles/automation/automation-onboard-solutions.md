---
title: "Внедрение решение по обновлению и отслеживанию изменений в службу автоматизации Azure | Документация Майкрософт"
description: "Узнайте, как подключить решения по обновлению и отслеживанию изменений к службе автоматизации Azure."
services: automation
documentationcenter: 
author: eamonoreilly
manager: 
editor: 
ms.assetid: edae1156-2dc7-4dab-9e5c-bf253d3971d0
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 11/30/2017
ms.author: eamono
ms.openlocfilehash: 9ae5e9ebcbcf3af61318eac98defc6b249417f41
ms.sourcegitcommit: 80eb8523913fc7c5f876ab9afde506f39d17b5a1
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/02/2017
---
# <a name="onboard-update-and-change-tracking-solutions-to-azure-automation"></a>Внедрение решений по обновлению и отслеживанию изменений в службу автоматизации Azure

В этом руководстве описаны следующие шаги по автоматическому внедрению в службу автоматизации Azure решений по обновлению и отслеживанию изменений, а также инвентаризации виртуальных машин:

> [!div class="checklist"]
> * подключение виртуальной машины Azure вручную;
> * установка и обновление необходимых модулей Azure;
> * импорт модуля runbook, который подключает виртуальные машины Azure;
> * запуск модуля runbook, который автоматически подключает виртуальные машины Azure.

## <a name="prerequisites"></a>Предварительные требования

Ниже перечислены необходимые условия для выполнения инструкций в этом учебнике.
+ Подписка Azure. Если у вас ее нет, [активируйте преимущества для подписчиков MSDN](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/) или [зарегистрируйте бесплатную учетную запись](https://azure.microsoft.com/free/?WT.mc_id=A261C142F).
+ [Учетная запись службы автоматизации](automation-offering-get-started.md) для управления компьютерами.

## <a name="onboard-an-azure-virtual-machine-manually"></a>Подключение виртуальной машины Azure вручную

1.  Откройте учетную запись автоматизации.
2.  Перейдите на страницу "Инвентаризация".
![Подключение системы инвентаризации](media/automation-onboard-solutions/inventory-onboard.png)
3.  Выберите существующую или создайте новую рабочую область Log Analytics. Нажмите кнопку "Включить".
4.  Когда завершится подключение решений по отслеживанию изменений и инвентаризации, щелкните страницу управления обновлениями.
![Подключение решения по обновлению](media/automation-onboard-solutions/update-onboard.png)
4.  Нажмите кнопку "Включить", которая подключит решение по обновлению.
5.  Когда завершится подключение решения по инвентаризации, щелкните страницу отслеживания изменений.
![Включение отслеживания изменений](media/automation-onboard-solutions/change-tracking-onboard-vm.png)
6.  Нажмите кнопку "Добавить виртуальную машину Azure".
![Выбор виртуальной машины для отслеживания изменений](media/automation-onboard-solutions/enable-change-tracking.png)
7.  Выберите виртуальную машину Azure и нажмите кнопку "Включить", чтобы подключить решение по инвентаризации и отслеживанию изменений.
8.  Когда завершится процесс подключения виртуальной машины, щелкните страницу управления обновлениями.
![Подключение виртуальной машины для управления обновлениями](media/automation-onboard-solutions/update-onboard-vm.png)
9.  Нажмите кнопку "Добавить виртуальную машину Azure".
![Выбор виртуальной машины для управления обновлениями](media/automation-onboard-solutions/enable-update.png)
10.  Выберите виртуальную машину Azure и нажмите кнопку "Включить", чтобы подключить решение по управлению обновлениями.

## <a name="install-and-update-required-azure-modules"></a>Установка и обновление необходимых модулей Azure

Этот этап обновит все модули Azure до последних версий и импортирует модуль AzureRM.OperationalInsights, позволяя автоматизировать подключение решения.
1.  Щелкните страницу модулей.
![Обновление модулей](media/automation-onboard-solutions/update-modules.png)
2.  Нажмите кнопку "Обновить модули Azure", чтобы установить последние версии модулей. Дождитесь, пока завершится обновление.
3.  Нажмите кнопку "Обзор коллекции", чтобы открыть коллекцию модулей.
![Импорт модуля OperationalInsights](media/automation-onboard-solutions/import-operational-insights-module.png)
4.  Найдите модуль AzureRM.OperationalInsights и импортируйте его в учетную запись автоматизации.

## <a name="import-a-runbook-that-onboards-solutions-to-azure-vms"></a>Импортируйте модуль runbook, который подключает решения к виртуальным машина Azure.

1.  Щелкните на странице модулей runbook в категории PROCESS AUTOMATION (Автоматизация процессов).
2.  Нажмите кнопку "Просмотреть коллекцию".
3.  Выполните поиск по фразе "update and change tracking" (обновление и отслеживание изменений) и импортируйте найденный модуль runbook в учетную запись службы автоматизации.
![Импорт модуля runbook для подключения](media/automation-onboard-solutions/import-from-gallery.png)
4.  Щелкните "Изменить", чтобы просмотреть сведения об источнике модуля runbook, и нажмите кнопку "Опубликовать".
![Импорт модуля runbook для подключения](media/automation-onboard-solutions/publish-runbook.png)

## <a name="start-the-runbook-that-onboards-azure-vms-automatically"></a>Запуск модуля runbook, который автоматически подключает виртуальные машины Azure

Чтобы запустить этот модуль runbook, нужно иметь уже подключенную к Azure решение по отслеживанию изменений или обновлению. Модуль принимает в качестве параметров уже существующую виртуальную машину и группу ресурсов, к которой подключена система.
1.  Откройте модуль runbook с именем Enable-MultipleSolution.
![Модуль runbook для нескольких систем](media/automation-onboard-solutions/runbook-overview.png)
2.  Нажмите кнопку "Пуск" и введите следующие значения параметров.
    *   VMNAME. Это имя существующей виртуальной машины, которую нужно подключить к решению по обновлению или отслеживанию изменений. Если вы оставите это значение пустым, будут подключены все виртуальные машины в группе ресурсов.
    *   VMRESOURCEGROUP. Это имя группы ресурсов, в которую входит нужная виртуальная машина.
    *   SUBSCRIPTIONID. Это идентификатор подписки, в которой находится подключаемая виртуальная машина. Если вы оставите это значение пустым, будет использоваться подписка рабочей области. Если вы укажете идентификатор другой подписки, учетная запись запуска от имени в учетной записи автоматизации будет добавлена в роль участника для указанной подписки.
    *   ALREADYONBOARDEDVM. Имя виртуальной машины, которая вручную подключена к решениям по обновлению или отслеживанию изменений.
    *   ALREADYONBOARDEDVMRESOURCEGROUP. Это имя группы ресурсов, в которую входит нужная виртуальная машина.
    *   SOLUTIONTYPE. Введите значение Updates или ChangeTracking.
    
    ![Параметры модуля runbook для нескольких систем](media/automation-onboard-solutions/runbook-parameters.png)
3.  Щелкните ОК, чтобы выполнить задание runbook.
4.  Отслеживайте ход выполнения и наличие ошибок на странице задания runbook.

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения см. в статье [Создание расписания для Runbook в службе автоматизации Azure](automation-schedules.md).