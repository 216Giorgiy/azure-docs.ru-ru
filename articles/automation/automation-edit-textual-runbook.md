<properties 
	pageTitle="Изменение текстовых модулей Runbook в службе автоматизации Azure"
	description="В этой статье представлены различные процедуры для работы с модулями Runbook PowerShell и рабочих процессов PowerShell в службе автоматизации Azure с помощью текстового редактора."
	services="automation"
	documentationCenter=""
	authors="bwren"
	manager="stevenka"
	editor="tysonn" />
<tags 
	ms.service="automation"
	ms.devlang="na"
	ms.topic="article"
	ms.tgt_pltfrm="na"
	ms.workload="infrastructure-services"
	ms.date="02/18/2016"
	ms.author="magoedte;bwren" />

# Изменение текстовых модулей Runbook в службе автоматизации Azure

Текстовый редактор в службе автоматизации Azure можно использовать для изменения [модулей Runbook PowerShell](automation-runbook-types.md#powershell-runbooks) и [модулей Runbook рабочих процессов PowerShell](automation-runbook-types.md#powershell-workflow-runbooks). Он обладает стандартными функциями других редакторов кода, включая поддержку технологии IntelliSense и цветовую схему кодирования, а также включает ряд дополнительных функций для работы с ресурсами, свойственными модулям Runbook. В этой статье подробно описано, как использовать этот редактор для выполнения разнообразных задач.

Текстовый редактор включает функцию, позволяющую вставлять в модуль Runbook код для действий, ресурс-контейнеров и дочерних модулей. Вместо того чтобы вводить этот код самостоятельно, выберите его из списка доступных ресурсов, и соответствующий код будет вставлен в модуль Runbook.

У каждого модуля Runbook в службе автоматизации Azure есть черновая и опубликованная версия. Вы можете изменить черновую версию модуля Runbook, а затем опубликовать ее для последующего использования. Опубликованную версию изменить нельзя. Дополнительные сведения см. в статье [Публикация модуля Runbook](automation-creating-importing-runbook.md#publishing-a-runbook).

Для работы с [графическими модулями Runbook](automation-runbook-types.md#graphical-runbooks) обратитесь к статье [Графическая разработка в службе автоматизации Azure](automation-graphical-authoring-intro.md).

## Изменение модуля Runbook с помощью портала Azure

Откройте модуль Runbook для изменения в текстовом редакторе, выполнив описанные ниже действия.

1. На портале Azure выберите свою учетную запись автоматизации.
2. Щелкните элемент **Модули Runbook**, чтобы открыть список модулей Runbook.
3. Щелкните имя модуля Runbook, который вы хотите изменить, и нажмите кнопку **Изменить**.
6. Внесите необходимые изменения.
7. Закончив изменения, нажмите кнопку **Сохранить**.
8. Чтобы опубликовать последнюю черновую версию модуля Runbook, нажмите кнопку **Опубликовать**.

### Вставка командлета в модуль Runbook

2. На холсте текстового редактора установите курсор в то место, куда нужно вставить командлет.
3. Разверните узел **Командлеты** в элементе управления «Библиотека». 
3. Откройте модуль, в котором находится нужный командлет.
4. Щелкните командлет, который нужно вставить, правой кнопкой мыши, и выберите параметр **Добавить на холст**. Если у командлета больше одного набора параметров, будет добавлен набор параметров по умолчанию. Вы также можете развернуть командлет и выбрать другой набор параметров.
4. Код для командлета вставляется с полным списком параметров.
5. Для всех необходимых параметров укажите вместо типа данных соответствующее значение, заключив его в фигурные скобки <>. Все ненужные параметры удалите.

### Вставка кода для дочернего модуля Runbook в модуль Runbook

2. На холсте текстового редактора установите курсор в то место, куда нужно вставить код для [дочернего модуля Runbook](automation-child-runbooks.md).
3. Разверните узел **Модули Runbook** в элементе управления «Библиотека». 
3. Щелкните модуль Runbook, который нужно вставить, правой кнопкой мыши, и выберите параметр **Добавить на холст**.
4. Код для дочернего модуля Runbook вставляется со всеми заполнителями для всех параметров модуля Runbook.
5. Замените заполнители на соответствующие значения для каждого параметра.

### Вставка ресурс-контейнера в модуль Runbook

2. На холсте текстового редактора установите курсор в то место, куда нужно вставить код для дочернего модуля Runbook.
3. Разверните узел **Ресурс-контейнеры** в элементе управления «Библиотека». 
4. Разверните узел для желаемого типа ресурс-контейнера.
3. Щелкните ресурс-контейнер, который нужно вставить, правой кнопкой мыши, и выберите параметр **Добавить на холст**. Для [переменных ресурс-контейнеров](automation-variables.md) выберите либо **Добавить переменную Get на холст**, либо **Добавить переменную Set на холст**, в зависимости от того, нужно ли вам получить или задать переменную.
4. Код для ресурс-контейнера вставляется в модуль Runbook.



## Изменение модуля Runbook с помощью портала Azure

Откройте модуль Runbook для изменения в текстовом редакторе, выполнив описанные ниже действия.

1. На портале Azure щелкните **Служба автоматизации** и затем имя учетной записи службы автоматизации.
2. Выберите вкладку **Модули Runbook**.
3. Щелкните имя модуля Runbook, который вы хотите изменить, и выберите вкладку **Автор**.
5. В нижней части экрана нажмите кнопку **Изменить**.
6. Внесите необходимые изменения.
7. Закончив изменения, нажмите кнопку **Сохранить**.
8. Чтобы опубликовать последнюю черновую версию модуля Runbook, нажмите кнопку **Опубликовать**.

### Вставка действия в модуль Runbook

1. На холсте текстового редактора установите курсор в то место, куда нужно вставить действие.
1. В нижней части экрана щелкните **Вставить**, а затем **Действие**.
1. В столбце **Модуль интеграции** выберите модуль, который содержит нужное действие.
1. В области **Действие** выберите действие.
1. В столбце **Описание** ознакомьтесь с описанием действия. При необходимости щелкните «Просмотреть подробную справку», чтобы открыть справку о действии в браузере.
1. Щелкните стрелку вправо. Если действие содержит параметры, они будут указаны.
1. Нажмите кнопку «Проверить». Код для запуска действия будет вставлен в модуль.
1. Если действию требуются параметры, укажите вместо типа данных соответствующее значение, заключив его в фигурные скобки <>.

### Вставка кода для дочернего модуля Runbook в модуль Runbook

1. На холсте текстового редактора установите курсор в то место, куда нужно вставить [дочерний модуль Runbook](automation-child-runbooks.md).
2. В нижней части экрана щелкните **Вставить**, а затем **Модуль Runbook**.
3. Выберите модуль Runbook, который нужно вставить, в центральном столбце и щелкните стрелку вправо.
4. Если модуль Runbook содержит параметры, они будут указаны.
5. Нажмите кнопку «Проверить». Код для запуска выбранного модуля Runbook будет вставлен в текущий модуль Runbook.
7. Если модулю Runbook требуются параметры, укажите вместо типа данных соответствующее значение, заключив его в фигурные скобки <>.

### Вставка ресурс-контейнера в модуль Runbook

1. На холсте текстового редактора установите курсор в то место, куда нужно вставить действие для извлечения ресурса.
1. В нижней части экрана щелкните **Вставить**, а затем **Параметр**.
1. В столбце **Действие параметра** выберите нужное действие.
1. Выберите один из доступных ресурсов в центральном столбце.
1. Нажмите кнопку «Проверить». Код для получения или задания ресурса будет вставлен в модуль Runbook.



## Изменение модуля Runbook в службе автоматизации Azure с помощью Windows PowerShell

Чтобы изменить модуль Runbook с помощью Windows PowerShell, используйте любой редактор и сохраните его в виде файла PS1. Командлет [Get AzureAutomationRunbookDefinition](http://aka.ms/runbookauthor/cmdlet/getazurerunbookdefinition) позволяет извлечь содержимое модуля Runbook, а командлет [Set-AzureAutomationRunbookDefinition](http://aka.ms/runbookauthor/cmdlet/setazurerunbookdefinition) — заменить существующий черновой модуль Runbook на измененный.

### Извлечение содержимого модуля Runbook с помощью Windows PowerShell

Команды в приведенном ниже примере показывают, как извлечь сценарий для модуля и сохранить его в файл сценария. В этом примере извлекается черновая версия. Извлечь можно также опубликованную версию модуля Runbook, однако изменить ее нельзя.

    $automationAccountName = "MyAutomationAccount"
    $runbookName = "Sample-TestRunbook"
    $scriptPath = "c:\runbooks\Sample-TestRunbook.ps1"
    
    $runbookDefinition = Get-AzureAutomationRunbookDefinition -AutomationAccountName $automationAccountName -Name $runbookName -Slot Draft
    $runbookContent = $runbookDefinition.Content

    Out-File -InputObject $runbookContent -FilePath $scriptPath

### Изменение содержимого модуля Runbook с помощью Windows PowerShell

Команды в приведенном ниже примере показывают, как заменить существующее содержимое модуля Runbook на содержимое файла сценария. Эта же процедура используется для примера в статье [Импорт модуля Runbook из файла сценария с помощью Windows PowerShell](../automation-creating-or-importing-a-runbook#ImportRunbookScriptPS).

    $automationAccountName = "MyAutomationAccount"
    $runbookName = "Sample-TestRunbook"
    $scriptPath = "c:\runbooks\Sample-TestRunbook.ps1"

    Set-AzureAutomationRunbookDefinition -AutomationAccountName $automationAccountName -Name $runbookName -Path $scriptPath -Overwrite
    Publish-AzureAutomationRunbook –AutomationAccountName $automationAccountName –Name $runbookName

## Связанные статьи

- [Создание или импорт модуля Runbook в службе автоматизации Azure](automation-creating-importing-runbook.md)
- [Изучение рабочего процесса PowerShell](automation-powershell-workflow.md)
- [Графическая разработка в службе автоматизации Azure](automation-graphical-authoring-intro.md)
- [Сертификаты](automation-certificates.md)
- [Подключения](automation-connections.md)
- [Учетные данные](automation-credentials.md)
- [Расписания](automation-schedules.md)
- [Переменные](automation-variables.md)

<!---HONumber=AcomDC_0224_2016-->