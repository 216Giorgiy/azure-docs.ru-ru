---
title: "Управление обновлениями для нескольких виртуальных машин Azure | Документация Майкрософт"
description: "Подключение виртуальных машин Azure для управления обновлениями."
services: operations-management-suite
documentationcenter: 
author: eslesar
manager: carmonm
editor: 
ms.assetid: 
ms.service: operations-management-suite
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 09/25/2017
ms.author: eslesar
ms.translationtype: HT
ms.sourcegitcommit: c3a2462b4ce4e1410a670624bcbcec26fd51b811
ms.openlocfilehash: 89bf87f27fdf276068cba261fc6ae1660307e0b7
ms.contentlocale: ru-ru
ms.lasthandoff: 09/25/2017

---

# <a name="manage-updates-for-multiple-azure-virtual-machines"></a>Управление обновлениями для нескольких виртуальных машин Azure

Управление обновлениями позволяет управлять обновлениями и исправлениями виртуальных машин Azure.
С помощью учетной записи [службы автоматизации Azure](automation-offering-get-started.md) можно быстро подключить виртуальные машины, оценить состояния доступных обновлений, запланировать установку необходимых обновлений и просмотреть результаты развертывания для проверки успешности применения обновлений для всех виртуальных машин, для которых было включено управление обновлениями.

## <a name="prerequisites"></a>Предварительные требования

Для выполнения шагов в этом руководстве требуется:

* Учетная запись службы автоматизации Azure. Указания по созданию учетной записи запуска от имени пользователя для службы автоматизации Azure см. в статье [Проверка подлинности модулей Runbook в Azure с помощью учетной записи запуска от имени](automation-sec-configure-azure-runas-account.md).
* Виртуальная машина Azure Resource Manager (не классическая). Инструкции по созданию виртуальной машины см. в статье [Создание первой виртуальной машины Windows на портале Azure](../virtual-machines/virtual-machines-windows-hero-tutorial.md).

## <a name="enable-update-management-for-azure-virtual-machines"></a>Включение управления обновлениями для виртуальных машин Azure

1. На портале Azure откройте учетную запись службы автоматизации.
2. В левой части экрана выберите **Управление обновлениями**.
3. В верхней части экрана щелкните **Add Azure VM** (Добавить виртуальную машину Azure).
    ![Подключенные виртуальные машины](./media/manage-update-multi/update-onboard-vm.png)
4. Выберите виртуальную машину для подключения. Появится экран **Enable Update Management** (Включение управления обновлениями).
5. Нажмите **Включить**.

   ![Включение управления обновлениями](./media/manage-update-multi/update-enable.png)

Управление обновлениями включено для виртуальной машины.

## <a name="view-update-assessment"></a>Просмотр оценок обновления

После включения решения **Управление обновлениями** отобразится экран **Управление обновлениями**. На вкладке **Отсутствующие обновления** можно просмотреть список отсутствующих обновлений.

## <a name="schedule-an-update-deployment"></a>Планирование развертывания обновлений

Чтобы установить обновления, составьте план развертывания в рамках графика выпуска и периода обслуживания.
Вы можете выбрать типы обновлений, которые будут включены в развертывание. Например, можно включить только критические обновления или обновления для системы безопасности и исключить накопительные пакеты обновления.

Новое развертывание обновления для одной или нескольких виртуальных машин можно запланировать, щелкнув **Schedule update deployment** (Планирование развертывания обновления) в верхней части экрана **Update management** (Управление обновлениями). На экране **New update deployment** (Новое развертывание обновлений) укажите следующее:

* **Имя.** Введите уникальное имя для идентификации развертывания обновлений.
* **Тип ОС**. Выберите Windows или Linux.
* **Computers to update** (Компьютеры для обновления). Выберите виртуальные машины, которые необходимо обновить.

  ![Выбор виртуальных машин для обновления](./media/manage-update-multi/update-select-computers.png)

* **Категория обновления.** Выберите типы программного обеспечения, которые будут включены в развертывание обновления. Ниже приведены типы классификации:
  * критические обновления;
  * обновления для системы безопасности;
  * накопительные пакеты обновления;
  * пакеты дополнительных компонентов;
  * пакеты обновления;
  * обновления определений;
  * Средства
  * Обновления
* **Параметры расписания.** Вы можете принять дату и время по умолчанию (на 30 минут больше текущего времени) либо указать другое время.
   Кроме того, можно указать, происходит ли развертывание один раз, или настроить расписание повторяющегося развертывания. Щелкните параметр Recurring (Повторяющееся) в разделе "Повторение", чтобы настроить повторяющееся расписание.

   ![Экран параметров обновления расписания](./media/manage-update-multi/update-set-schedule.png)

* **Maintenance window (minutes)** (Период обслуживания (в минутах)). Укажите временной период, в течение которого произойдет обновление развертывания.  Это гарантирует, что изменения выполняются в рамках заданного периода обслуживания.

Завершив настройку расписания, нажмите кнопку **Создать** и вернитесь к панели мониторинга состояния.
Обратите внимание, что таблица **Запланирован** показывает созданное расписание развертываний.

> [!WARNING]
> Для обновлений, требующих перезагрузки, виртуальная машина будет перезапущена автоматически.

## <a name="view-results-of-an-update-deployment"></a>Просмотр результатов развертывания обновлений

После запуска запланированного развертывания его состояние можно просмотреть на экране **Update deployments** (Развертывания обновлений) на вкладке **Update deployments** (Развертывания обновлений).
Если оно выполняется в данный момент, отображается состояние **Выполнение**. При успешном завершении появится состояние **Выполнено**.
В случае сбоя одного или нескольких обновлений в развертывании для состояния будет установлено значение **Частичный сбой**.

![Обновление состояния развертывания ](./media/manage-update-multi/update-view-results.png)

Щелкните завершенное развертывание обновлений, чтобы просмотреть панель мониторинга этого развертывания обновлений.

Плитка **Update results** (Результаты обновления) является сводкой общего количества обновлений и результатов развертывания на виртуальной машине.
В таблице справа представлен подробный разбор каждого обновления и результатов установки, которые могут принимать одно из следующих значений:

* Not attempted (Попытка не предпринималась). Обновление не установлено из-за недостатка времени в связи с заданной длительностью окна обслуживания.
* Выполнено. Обновление было успешно выполнено.
* Сбой. Обновление не удалось выполнить.

Щелкните **Все журналы** для просмотра всех записей журнала, созданных при развертывании.

Щелкните плитку **Вывод** для просмотра потока заданий runbook, отвечающих за управление развертыванием обновления на целевой виртуальной машине.

Щелкните **Ошибки**, чтобы просмотреть подробные сведения о любых ошибках развертывания.

## <a name="next-steps"></a>Дальнейшие действия

* Дополнительные сведения об управлении обновлениями см. в статье [Решение для управления обновлениями в OMS](../operations-management-suite/oms-solution-update-management.md).
