<properties 
   pageTitle="Просмотр состояния задания Runbook в службе автоматизации Azure"
   description="При запуске модуля Runbook в службе автоматизации Azure создается задание. В этой статье рассматривается отслеживание заданий и просмотр их текущего состояния."
   services="automation"
   documentationCenter=""
   authors="bwren"
   manager="stevenka"
   editor="tysonn" />
<tags 
   ms.service="automation"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="infrastructure-services"
   ms.date="03/30/2015"
   ms.author="bwren" />

# Просмотр состояния задания Runbook в службе автоматизации Azure


При запуске модуля Runbook в службе автоматизации Azure создается задание. Задание — это одиночный выполняемый экземпляр модуля Runbook. Один модуль Runbook может иметь несколько заданий, каждое из которых может иметь собственный набор значений параметров. Существует несколько способов проверить состояние отдельного задания и всех заданий для одного или нескольких модулей Runbook.

## Состояния заданий

Следующая таблица содержит описание различных состояний задания.

| Состояние| Описание|
|:---|:---|
|Завершено|Задание успешно выполнено.|
|Ошибка|Задание завершилось с ошибкой.|
|Задание не выполнено. Ожидание ресурсов.|Задание не выполнено, так как задание превысило ограничение [доли](http://msdn.microsoft.com/library/azure/3179b655-ab39-407a-9169-33571f958325#fairshare) три раза и было запущено с той же контрольной точки или с момента запуска модуля Runbook.|
|Поставлено в очередь|Задание ожидает появления доступных ресурсов в очереди автоматизации, которые позволят запустить задание.|
|Запуск|Задание было назначено рабочему процессу, и система скоро его запустит.|
|Возобновление|Система находится в процессе возобновления задания после его приостановки.|
|Выполнение|Задание выполняется.|
|Задание выполняется. Ожидание ресурсов.|Задание выгружено, поскольку превышено ограничение [доли](http://msdn.microsoft.com/library/azure/3179b655-ab39-407a-9169-33571f958325#fairshare). Задание будет возобновлено позже с его последней контрольной точки.|
|Остановка|Задание было остановлено пользователем до его завершения.|
|Остановка|Система находится в процессе остановки задания.|
|Приостановлено|Задание было приостановлено пользователем, системой или с помощью команды в модуле Runbook. Приостановленное задание можно запустить снова, при этом оно возобновится с последней контрольной точки или с запуска модуля Runbook, если задание не имеет контрольных точек. Модуль Runbook будет приостановлен системой только при возникновении исключения. По умолчанию переменная ErrorActionPreference имеет значение **Продолжить**, то есть задание продолжит работу при возникновении ошибки. Если для этой переменной задать значение **Остановить**, задание будет приостановлено при возникновении ошибки.|
|Приостановка|Система пытается приостановить задание по запросу пользователя. Модуль Runbook должен достичь следующей контрольной точки, прежде чем задание может быть приостановлено. Если последняя контрольная точка уже пройдена, задание будет завершено, прежде чем оно будет приостановлено.|

## Просмотр состояния задания с помощью портала управления Azure

### Панель мониторинга автоматизации

Панель мониторинга автоматизации показывает сводку всех модулей Runbook для определенной учетной записи в службе автоматизации. Панель также содержит обзор использования учетной записи. Сводный график отображает общее количество заданий для всех модулей Runbook, которые прошли все состояния в течение определенного количества дней или часов. Временной диапазон можно выбрать в правом верхнем углу графика. Ось времени графика меняется в зависимости от типа выбираемого временного диапазона. Чтобы показать кривую для определенного состояния, щелкните это состояние в верхней части экрана.

Чтобы отобразить панель мониторинга автоматизации, выполните следующие действия.

1. На портале управления Azure выберите **Служба автоматизации** и затем имя учетной записи службы автоматизации.
1. Перейдите на вкладку **Панель мониторинга**.

### Панель мониторинга модуля Runbook

На панели мониторинга модуля Runbook отображается сводка для отдельного модуля. Сводный график отображает общее количество заданий для модуля Runbook, которые прошли все состояния в течение определенного количества дней или часов. Временной диапазон можно выбрать в правом верхнем углу графика. Ось времени графика меняется в зависимости от типа выбираемого временного диапазона. Чтобы показать кривую для определенного состояния, щелкните это состояние в верхней части экрана.

Чтобы отобразить панель мониторинга модуля Runbook, выполните следующие действия.

1. На портале управления Azure выберите **Служба автоматизации** и затем имя учетной записи службы автоматизации.
1. Щелкните имя модуля Runbook.
1. Перейдите на вкладку **Панель мониторинга**.

### Сводные данные задания

Можно просмотреть список всех заданий, которые были созданы для конкретного модуля Runbook, и их последнее состояние. Можно фильтровать список по состоянию заданий и изменять диапазон дат для последнего изменения задания. Щелкните имя задания для просмотра его подробных сведений и результатов выполнения. Подробное представление задания содержит значения параметров Runbook, которые были указаны для этого задания.

Чтобы просмотреть задания для модуля Runbook, выполните следующие шаги.

1. На портале управления Azure выберите **Служба автоматизации** и затем имя учетной записи службы автоматизации.
1. Щелкните имя модуля Runbook.
1. Перейдите на вкладку **Задания**.
1. Щелкните столбец **Созданное задание**, чтобы просмотреть подробные сведения и результаты задания.

## Получение состояния задания с помощью Windows PowerShell

Чтобы получить созданные задания для модуля Runbook и сведения о конкретном задании, воспользуйтесь командлетом [Get-AzureAutomationJob](http://msdn.microsoft.com/library/azure/dn690263.aspx). Если запустить модуль Runbook с помощью Windows PowerShell, команда [Start-AzureAutomationRunbook](http://msdn.microsoft.com/library/azure/dn690259.aspx) возвращает результирующее задание. Получить результаты задания можно с помощью команды [Get-AzureAutomationJob](http://msdn.microsoft.com/library/azure/dn690263.aspx).

Приведенные ниже примеры команд извлекают последнее задание для образца модуля и отображают его состояние, значения параметров Runbook, а также результат выполнения задания.

	$job = (Get-AzureAutomationJob –AutomationAccountName "MyAutomationAccount" –Name "Test-Runbook" | sort LastModifiedDate –desc)[0]
	$job.Status
	$job.JobParameters
	Get-AzureAutomationJobOutput –AutomationAccountName "MyAutomationAccount" -Id $job.Id –Stream Output

## Связанные статьи

- [Запуск модуля Runbook в службе автоматизации Azure](automation-starting-a-runbook.md) 

<!---HONumber=62-->