---
title: Интеграция системы управления версиями и службы автоматизации Azure
description: В этой статье описывается интеграция системы управления версиями с GitHub в службе автоматизации Azure.
services: automation
ms.service: automation
ms.component: process-automation
author: georgewallace
ms.author: gwallace
ms.date: 01/15/2019
ms.topic: conceptual
manager: carmonm
ms.openlocfilehash: 94d948267286ad716aa200cb5aa858acf2eb2624
ms.sourcegitcommit: dede0c5cbb2bd975349b6286c48456cfd270d6e9
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/16/2019
ms.locfileid: "54330778"
---
# <a name="source-control-integration-in-azure-automation"></a>Интеграция системы управления версиями в службе автоматизации Azure

Система управления версиями позволяет поддерживать модули Runbook в учетной записи Службы автоматизации в актуальном состоянии, используя сценарии в репозитории системы управления версиями GitHub или Azure DevOps. Система управления версиями позволяет работать вместе с коллегами, отслеживать изменения и выполнять откат к более ранним версиям модулей Runbook. Например,система управления версиями позволяет синхронизировать различные ветви с разработкой, тестированием или представлением учетных записей службы автоматизации. Это упрощает продвижение кода, который был протестирован в среде разработки, для представления учетной записи службы автоматизации.

Служба автоматизации Azure поддерживает три типа системы управления версиями:

* GitHub
* Azure DevOps (Git)
* Azure DevOps (TFVC)

## <a name="pre-requisites"></a>Предварительные требования

* Репозиторий системы управления версиями (GitHub или Azure DevOps).
* Правильные [разрешения](#personal-access-token-permissions) для репозитория системы управления версиями
* [Учетная запись запуска от имени и подключение](manage-runas-account.md)

> [!NOTE]
> Задания синхронизации системы управления версиями выполняются от имени учетной записи службы автоматизации соответствующих пользователей и оплачиваются по тому же тарифу, что и другие задания службы автоматизации.

## <a name="configure-source-control"></a>Настройка системы управления версиями

В учетной записи службы автоматизации выберите **Система управления версиями (предварительная версия)** и нажмите кнопку **+Добавить**

![Выбор системы управления версиями](./media/source-control-integration/select-source-control.png)

Выберите **Тип системы управления версиями**, нажмите кнопку **Проверить подлинность**.

Просмотрите страницу разрешений на запросы приложений и нажмите кнопку **Принять**.

На странице **Сводка системы управления версиями**, введите необходимые сведения и нажмите кнопку **Сохранить**. В следующей таблице показано описание доступных полей.

|Свойство  |ОПИСАНИЕ  |
|---------|---------|
|Имя системы управления версиями     | Понятное имя системы управления версиями        |
|Тип системы управления версиями     | Тип источника системы управления версиями. Доступные параметры:</br> GitHub</br>Azure DevOps (Git)</br> Azure DevOps (TFVC)        |
|Репозиторий     | Имя репозитория проекта. Это значение извлекается из репозитория системы управления версиями. Пример: $/ContosoFinanceTFVCExample         |
|Ветвь     | Ветвь, из которой следует извлечь исходные файлы. Настройка целевой ветви недоступна для типа системы управления версиями TFVC.          |
|Путь к папке     | Папка, содержащая синхронизируемые модули Runbook. Пример: /Runbooks         |
|Автоматическая синхронизация     | Включает или выключает автоматическую синхронизацию при выполнении фиксации в репозитории системы управления версиями         |
|Публикация модуля Runbook     | При значении **Вкл.** после синхронизации модулей Runbook из системы управления версиями они будут автоматически опубликованы.         |
|ОПИСАНИЕ     | Текстовое поле для указания дополнительных сведений        |

![Сводка по системе управления версиями](./media/source-control-integration/source-control-summary.png)

> [!NOTE]
> Убедитесь, что вы выполняете вход с использованием правильной учетной записи при настройке системы управления версиями. Если есть сомнения, откройте новую вкладку в браузере, выйдите из visualstudio.com или github.com и повторите попытку подключения системы управления версиями.

## <a name="syncing"></a>Синхронизация

Если при конфигурации интеграции системы управления версиями была настроена автоматическая синхронизация, начальная синхронизация будет запускаться автоматически. Если автоматическая синхронизация не задана, выберите источник из таблицы на странице **Система управления версиями (предварительная версия)**. Нажмите кнопку **Начать синхронизацию**, чтобы запустить процесс.

Можно просмотреть состояние текущего задания синхронизации или предыдущих заданий, щелкнув вкладку **Задания синхронизации**. В раскрывающемся списке **Система управления версиями** выберите систему управления версиями.

![Состояние синхронизации](./media/source-control-integration/sync-status.png)

Если щелкнуть какое-либо задание, можно просмотреть его выходные данные. Следующий пример иллюстрирует выходные данные задания синхронизации системы управления версиями.

```output
========================================================================================================

Azure Automation Source Control Public Preview.
Supported runbooks to sync: PowerShell Workflow, PowerShell Scripts, DSC Configurations, Graphical, and Python 2.

Setting AzureRmEnvironment.

Getting AzureRunAsConnection.

Logging in to Azure...

Source control information for syncing:

[Url = https://ContosoExample.visualstudio.com/ContosoFinanceTFVCExample/_versionControl] [FolderPath = /Runbooks]

Verifying url: https://ContosoExample.visualstudio.com/ContosoFinanceTFVCExample/_versionControl

Connecting to VSTS...


Source Control Sync Summary:


2 files synced:
 - ExampleRunbook1.ps1
 - ExampleRunbook2.ps1



========================================================================================================
```

## <a name="personal-access-token-permissions"></a>Разрешения личного маркера доступа

Система управления версиями требует минимальные разрешения для личных маркеров доступа. В следующих таблицах представлены минимальные разрешения, необходимые для GitHub и DevOps в Azure.

### <a name="github"></a>GitHub

|Область  |ОПИСАНИЕ  |
|---------|---------|
|**Репозиторий**     |         |
|repo:status     | Доступ к фиксации состояния         |
|repo_deployment      | Доступ к состоянию развертывания         |
|public_repo     | Доступ к общим репозиториям         |
|**admin:repo_hook**     |         |
|запись:repo_hook     | Запись перехватчиков репозитория         |
|чтение:repo_hook|Чтение перехватчиков репозитория|

### <a name="azure-devops"></a>Azure DevOps

|Область  |
|---------|
|Код (чтение)     |
|Проект и команда (чтение)|
|Удостоверение (чтение)      |
|Профиль пользователя (чтение)     |
|Рабочие элементы (чтение)    |
|Подключения служб (чтение, запрос и управление)<sup>1</sup>    |

<sup>1</sup>разрешение подключения служб требуется только в том случае, если вы включили автосинхронизацию.

## <a name="disconnecting-source-control"></a>Отключение системы управления версиями

Чтобы отключиться от репозитория системы управления версиями, откройте элемент **Система управления версиями (предварительная версия)** в разделе **Параметры учетной записи** учетной записи автоматизации.

Выберите систему управления версиями, которую требуется удалить. На странице **Сводка системы управления версиями** щелкните **Удалить**.

## <a name="next-steps"></a>Дополнительная информация

Дополнительные сведения о типах модулей Runbook, их преимуществах и ограничениях см. в статье [Типы модулей Runbook в службе автоматизации Azure](automation-runbook-types.md).
