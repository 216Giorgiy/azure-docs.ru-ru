<properties 
	pageTitle="Начало работы с Azure API Management" 
	description="Узнайте, как создавать API, операции и как начать работу с API Management." 
	services="api-management" 
	documentationCenter="" 
	authors="steved0x" 
	manager="dwrede" 
	editor=""/>

<tags 
	ms.service="api-management" 
	ms.workload="mobile" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="2/11/2015" 
	ms.author="sdanie"/>

# Начало работы с Azure API Management

Это руководство покажет как быстро начать работу с API Management и сделать первый вызов API.

## Содержание раздела

-   [Создание экземпляра API Management][Создание экземпляра API Management]
-   [Создание API][Создание API]
-   [Добавление операции][Добавление операции]
-   [Добавление нового API к продукту][Добавление нового API к продукту]
-   [Подписка на продукт, который содержит API][Подписка на продукт, который содержит API]
-   [Вызов операции из портала разработчика][Вызов операции из портала разработчика]
-   [Обзор аналитики][Обзор аналитики]
-   [Дальнейшие действия][Дальнейшие действия]

## <a name="create-service-instance"> </a>Создание экземпляра API Management

> Для работы с этим учебником требуется учетная запись Azure. Если ее нет, можно создать бесплатную пробную учетную запись всего за несколько минут. Дополнительные сведения см. в разделе [Бесплатная пробная версия Azure][Бесплатная пробная версия Azure].

Создание экземпляра службы — это первый шаг в работе с API Management. Войдите на портал [Портал управления][Портал управления] и щелкните **Создать**, **Службы приложений**, **Управление API**, **Создать**.

![Новый экземпляр API Management][Новый экземпляр API Management]

В качестве **URL-адреса** укажите уникальное имя поддомена для использования в качестве URL-адреса службы.

Выберите нужный **Уровень цен**, **Подписку** и **Регион** для экземпляра службы. Все уровни цен можно использовать в этом руководстве. После выбора нажмите кнопку "Далее".

![Новая служба API Management][Новая служба API Management]

Введите **Contoso Ltd.** в поле **Имя организации** и укажите адрес электронной почты в поле электронной почты администратора.

> Этот адрес электронный почты используется для получения уведомлений от системы API Management. Дополнительные сведения см. в разделе [Настройка уведомлений][Настройка уведомлений].

Установите флажок для создания экземпляра службы.

![Новая служба API Management][1]

![Новая служба API Management][2]

После создания службы на следующем шаге создается API.

## <a name="create-api"> </a>Создание API

API в API Management представляет набор операций, которые могут быть вызваны клиентскими приложениями. Операции API передаются существующей веб-службе.

Каждый экземпляр службы API Management поставляется предварительно настроенным с примером программного интерфейса Echo, который возвращает назад данные, которые ему переданы. Для его использования можно вызвать команду HTTP, и возвращаемое значение будет содержать заголовки и содержимое, переданное ранее.

Это руководство использует веб-службу http://echoapi.cloudapp.net/api для создания нового API в API Management с именем **My Echo Service**.

API создаются и настраиваются из консоли API Management, которая доступна на портале управления Azure. Чтобы открыть консоль API Management, щелкните **Консоль управления** на портале Azure Portal службы API Management.

![Новая консоль API Management][Новая консоль API Management]

Для создания **My Echo API** щелкните **API** из меню **Управление API** слева и затем щелкните **Добавить API**.

![Create API][api-management-create-api]

![Add new API][Добавление нового API]

Следующие три поля используются для настройки нового API.

-   Введите **My Echo API** в текстовом поле **Название веб-API**. **Название веб-API** обеспечивает уникальное описательное имя для API. Оно выводится на порталах разработчика и управления.
-   Наберите **http://echoapi.cloudapp.net/api** в поле **URL веб-службы**. **URL-адрес веб-службы** ссылается на реализующую API HTTP-службу. Портал управления API направит запросы по этому адресу.
-   Введите **myecho** в поле **Суффикс URL-адреса веб-API**. **Суффикс URL-адреса веб-API** добавляется к основному URL-адресу для службы управления API. Ваши интерфейсы API используют общий основной URL-адрес и отличаются уникальным суффиксом, добавляемым после основного адреса.

Щелкните **Сохранить**, чтобы создать API. После создания нового API на портале управления выводится страница сводных данных для API.

![Сводные данные API][Сводные данные API]

Раздел API имеет четыре вкладки. Вкладка **Сводные данные** содержит базовые показатели и информацию о API. Вкладка **Настройки** предназначена для просмотра и редактирования настроек API, включая учетные данные для проверки подлинности в фоновой службе. Вкладка **Операции** предназначена для управления операциями API и служит следующем шагом при обучении, а вкладка **Проблемы** предназначена для просмотра ошибок, о которых сообщают использующие API разработчики.

> Выступающий в качестве примера интерфейс не использует проверку подлинности, и для получения дополнительной информации о настройках проверки см. раздел [Задание настроек API][Задание настроек API].

После создания API и задания настроек следующим шагом будет добавление операций в API. Определения операций используются для проверки входящих запросов и автоматической генерации документации.

## <a name="add-operation"> </a>Добавление операции

Щелкните **Операции** для вывода панели операций API. Ничего не выводится, поскольку еще не добавлено ни одной операции.

![Операции][Операции]

Щелкните **Добавить операцию**, чтобы добавить новую операцию. Появится окно **Новая операция**, вкладка **Сигнатура** будет выбрана по умолчанию.

![Сигнатура операции][Сигнатура операции]

В этом примере указывается операция GET для службы echo. Введите следующие значения в полях на вкладке **Сигнатура**.

-   Введите **GET** в текстовом поле **Команда HTTP**. По мере ввода символов можно выбрать **GET** из выводимого списка команд.
-   Наберите **/resource** в текстовом поле **шаблон URL-адреса**.
-   Наберите **GET resource** в текстовом поле **Экран**.
-   Наберите **Демонстрация вызова GET ресурса из примера. Управляется фоновой службой echo, которая возвращает в ответ полученный запрос (отправленные заголовки и содержимое возвращаются без изменений).** в текстовом поле **Описание**. Описание используется для генерации документации по этой операции при использовании API разработчиками.

Щелкните **Параметры** для настройки параметров строки запроса для этой операции. В этом примере есть два параметра строки запроса. Для добавления параметра запроса щелкните **Добавить параметр запроса** и укажите следующие значения.

Для первого параметра запроса введите следующие значения.

-   Введите **param1** в текстовом поле **Имя**.
-   Введите **Требующийся для примера параметр** в текстовом поле **Описание**.
-   Щелкните поле **Тип** и выберите **string** из списка. Поддерживаются типы **string**, **number**, **boolean** и **dateTime**.
-   Щелкните поле **Значения**, наберите **пример** в текстовом поле и щелкните значок "плюс" для добавления текстового значения по умолчанию для параметра. После добавления текста по умолчанию щелкните вне поля **Значения** для закрытия окна добавления значения.
-   Установите флажок **Обязательный**.

Для второго параметра запроса введите следующие значения.

-   **Имя**: **param2**
-   **Описание**: **Другой параметр примера, установлен как необязательный.**
-   **Тип**: **number**

Рекомендуется создавать примеры ответов для всех кодов состояния, которые может выдать операция. Каждый код состояния может содержать более одного примера содержимого ответа, по одному для каждого поддерживаемого типа содержимого. В этом руководстве добавляется код ответа **200 OK**.

Щелкните **Добавить** в разделе "Ответы", начните набирать **200** в текстовом поле, и затем выберите **200 OK** из раскрывающегося списка.

![Добавление ответа][Добавление ответа]

При выборе **200 OK** новый код ответа добавляется к операции, и выводится окно ответа. Наберите **Возвращаемое во всех случаях.** в текстовом поле **Описание**.

![Добавление ответа][4]

> **Добавить представление** используется для настройки ответов в нескольких представлениях. Для получения дополнительной информации см. раздел [Ответы][Ответы].

Щелкните **Сохранить** для добавления вновь настроенной операции в API.

## <a name="add-api-to-product"> </a>Добавление нового API к продукту

Разработчики сперва должны подписаться на продукт, прежде чем делать вызовы API. Продукт предоставляет доступ к API и может содержать ограничения доступа, например квоты использования и ограничения скорости. На этом шаге руководства мы добавим My Echo API к существующему продукту.

Щелкните **Продукты** в меню **Управление API** слева для просмотра и настройки продуктов, доступных для экземпляра API.

![Продукты][Продукты]

По умолчанию каждый экземпляр API управления поставляется с двумя примерами продуктов:

-   **Начальный**
-   **Без ограничений**

В этом руководстве используется продукт **Начальный**. Щелкните **Начальный** для просмотра настроек, включая интерфейсы, которые связаны с продуктом.

![Добавление API][Добавление API]

Щелкните **Добавить API к продукту**.

![Добавление API][5]

Установите флажок **My Echo API** и щелкните **Сохранить**.

![API добавлен][API добавлен]

Теперь, когда **My Echo API** связан с продуктом, разработчики могут подписаться на него и использовать API.

> Этот шаг руководства использует продукт "Начальный", которые будет предварительно настроенным и готовым к использованию. Для получения пошагового руководства по созданию и публикации нового продукта см. раздел [Как создать и опубликовать продукт][Как создать и опубликовать продукт].

## <a name="subscribe"> </a>Подписка на продукт, который содержит API

Чтобы делать вызовы к API, разработчики должны быть сперва подписаны на продукт, который дает доступ к ним. Разработчики могут подписываться на продукты на портале разработчиков, также администраторы могут подписать разработчиков на продукты из консоли управления. Вы администратор по умолчанию, поскольку создали экземпляр API управления на предыдущих шагах руководства, поэтому подпишите учетную запись на продукт **Начальный**.

Щелкните **Разработчики** в меню **Управление API** слева для просмотра и настройки разработчиков для этого экземпляра службы.

![Разработчики][Разработчики]

Щелкните имя разработчика для задания настроек для пользователя, включая подписки.

> В этом примере проводится подписка разработчика с именем Clayton Gragg. Если учетные записи разработчиков не созданы, можно подписать учетную запись администратора. Информацию по созданию учетных записей разработчиков см. в разделе [Как управлять учетными записями разработчиков в Azure API Management][Как управлять учетными записями разработчиков в Azure API Management].

![Добавление подписки][Добавление подписки]

Нажмите кнопку **Добавить подписку**.

![Добавление подписки][6]

Установите флажок **Начальный** и щелкните **Подписать**.

![Подписка добавлена][Подписка добавлена]

После подписки учетной записи разработчика можно делать вызов интерфейсов продукта.

## <a name="call-operation"> </a>Вызов операции из портала разработчика

Операции могут быть вызваны из портала разработчика, где предоставляется удобный способ для просмотра и проверки операций API. На этом шаге руководства создается метод Get, который добавляется к **My Echo API**. Щелкните **Портал разработчика** в меню наверху справа на портале управления.

![Портал разработчика][Портал разработчика]

Щелкните **Интерфейсы API** в меню вверху и затем щелкните **My Echo API** для просмотра доступных операций.

![Портал разработчика][7]

Обратите внимание, что показаны описание и параметры, добавленные при создании операции, что предоставляет документацию разработчикам, которые будут использовать эту операцию.

Щелкните **GET Resource** и выберите пункт **Открыть консоль**.

![Консоль операции][Консоль операции]

Введите любые значения для параметров, укажите ключ разработчика и щелкните **HTTP Get**.

![HTTP Get][HTTP Get]

После вызова операции портал разработчика выводит **Запрошенный URL-адрес** от фоновой службы, **Состояние ответа**, **Заголовки ответа** и **Содержимое ответа**.

![Ответ][Ответ]

## <a name="view-analytics"> </a>Обзор аналитики

Для просмотра аналитики для **My Echo API** перейдите опять на административный портал, выбрав **Управление** из меню пользователя наверху справа на портале разработчика.

![Управление][Управление]

Стандартное представление административного портала предоставляет панель мониторинга, где присутствует информация об экземпляре API Management.

![Панель мониторинга][Панель мониторинга]

Наведите указатель мыши на диаграмму "My Echo API" для просмотра конкретных показателей использования API за данный период времени.

> Если на диаграмме нет показателей, перейдите назад к порталу разработчика и сделайте несколько вызовов API, подождите немного и затем вернитесь к панели мониторинга.

![Аналитика][Аналитика]

Щелкните **Просмотр сведений** для просмотра страницы сводной информации по API, включая расширенную версию выводимых показателей.

![Сводка][Сводка]

Для просмотра подробностей показателей и отчетов щелкните пункт **Аналитика** в меню **API Management** слева.

![Обзор][Обзор]

Раздел **Аналитика** имеет следующие четыре вкладки.

-   **Вкратце** содержит общую информацию об использовании и показатели состояния, а также информацию о наиболее активных разработчиках, продуктах, API и операциях.
-   **Использование** содержит обзор деталей вызовов API и полосы пропускания, включая географическое представление.
-   **Работоспособность** содержит коды состояний, показатели успешных попаданий в кэш и времена ответов API и служб.
-   **Активность** содержит отчеты по конкретной активности для разработчиков, продуктов, API и операций.

## <a name="next-steps"> </a>Дальнейшие действия

-   Просмотрите другие разделы в руководстве [Приступая к работе с расширенными параметрами API][Приступая к работе с расширенными параметрами API].

  [Создание экземпляра API Management]: #create-service-instance
  [Создание API]: #create-api
  [Добавление операции]: #add-operation
  [Добавление нового API к продукту]: #add-api-to-product
  [Подписка на продукт, который содержит API]: #subscribe
  [Вызов операции из портала разработчика]: #call-operation
  [Обзор аналитики]: #view-analytics
  [Дальнейшие действия]: #next-steps
  [Бесплатная пробная версия Azure]: http://azure.microsoft.com/pricing/free-trial/?WT.mc_id=api_management_hero_a
  [Портал управления]: https://manage.windowsazure.com/
  [Новый экземпляр API Management]: ./media/api-management-get-started/api-management-create-instance-menu.png
  [Новая служба API Management]: ./media/api-management-get-started/api-management-create-instance-step1.png
  [Настройка уведомлений]: ../api-management-howto-configure-notifications
  [1]: ./media/api-management-get-started/api-management-create-instance-step2.png
  [2]: ./media/api-management-get-started/api-management-instance-created.png
  [Новая консоль API Management]: ./media/api-management-get-started/api-management-management-console.png
  [api-management-create-api]: ./media/api-management-get-started/api-management-create-api.png
  [Add new API]: ./media/api-management-get-started/api-management-add-new-api.png
  [Сводные данные API]: ./media/api-management-get-started/api-management-new-api-summary.png
  [Задание настроек API]: ../api-management-howto-create-apis/#configure-api-settings
  [Операции]: ./media/api-management-get-started/api-management-myecho-operations.png
  [Сигнатура операции]: ./media/api-management-get-started/api-management-operation-signature.png
  [Добавление ответа]: ./media/api-management-get-started/api-management-add-response.png
  [4]: ./media/api-management-get-started/api-management-add-response-window.png
  [Ответы]: ../api-management-howto-add-operations/#responses
  [Продукты]: ./media/api-management-get-started/api-management-list-products.png
  [Добавление API]: ./media/api-management-get-started/api-management-add-api-to-product.png
  [5]: ./media/api-management-get-started/api-management-add-myechoapi-to-product.png
  [API добавлен]: ./media/api-management-get-started/api-management-api-added-to-product.png
  [Как создать и опубликовать продукт]: ../api-management-howto-add-products
  [Разработчики]: ./media/api-management-get-started/api-management-developers.png
  [Как управлять учетными записями разработчиков в Azure API Management]: ../api-management-howto-create-or-invite-developers/
  [Добавление подписки]: ./media/api-management-get-started/api-management-add-subscription.png
  [6]: ./media/api-management-get-started/api-management-add-subscription-window.png
  [Подписка добавлена]: ./media/api-management-get-started/api-management-subscription-added.png
  [Портал разработчика]: ./media/api-management-get-started/api-management-developer-portal-menu.png
  [7]: ./media/api-management-get-started/api-management-developer-portal-myecho-api.png
  [Консоль операции]: ./media/api-management-get-started/api-management-developer-portal-myecho-api-console.png
  [HTTP Get]: ./media/api-management-get-started/api-management-invoke-get.png
  [Ответ]: ./media/api-management-get-started/api-management-invoke-get-response.png
  [Управление]: ./media/api-management-get-started/api-management-manage-menu.png
  [Панель мониторинга]: ./media/api-management-get-started/api-management-dashboard.png
  [Аналитика]: ./media/api-management-get-started/api-management-mouse-over.png
  [Сводка]: ./media/api-management-get-started/api-management-api-summary-metrics.png
  [Обзор]: ./media/api-management-get-started/api-management-analytics-overview.png
  [Приступая к работе с расширенными параметрами API]: ../api-management-get-started-advanced

<!--HONumber=46--> 
 