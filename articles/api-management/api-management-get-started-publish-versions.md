---
title: "Публикация версий своего API с помощью службы управления API Azure | Документация Майкрософт"
description: "Следуйте инструкциям этого руководства, чтобы узнать, как опубликовать нескольких версий API в службе управления API."
services: api-management
documentationcenter: 
author: mattfarm
manager: anneta
editor: 
ms.service: api-management
ms.workload: integration
ms.topic: article
ms.date: 08/18/2017
ms.author: apimpm
ms.openlocfilehash: 7c355e2feb5ebe5971d8391b326422a1abec1497
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/11/2017
---
# <a name="publish-multiple-versions-of-your-api-in-a-predictable-way"></a>Публикация нескольких версий API предсказуемым способом
В этом руководстве описывается, как настроить версии своего API и выбрать способ их вызова разработчиками API.

## <a name="prerequisites"></a>Предварительные требования
Для изучения этого руководства необходимо создать службу управления API и подготовить API, который можно изменить (вместо Conference API).

## <a name="about-versions"></a>О версиях
Иногда нецелесообразно предоставлять всем вызывающим сторонам одну версию API. В некоторых случаях требуется опубликовать новые или другие функции API для определенных пользователей, тогда как другим пользователям требуется именно тот API, который подходит им в настоящее время. Если вызывающим сторонам требуется выполнить обновление до более поздней версии, они хотят, чтобы сделать это было просто.  Для этого можно использовать **версии** в службе управления API Azure.

## <a name="walkthrough"></a>Пошаговое руководство
В этом пошаговом руководстве мы добавим новую версию существующего API, выбрав схему управления версиями и идентификатор версии.

## <a name="add-a-new-version"></a>Добавление новой версии
![Контекстное меню API: добавление версии](media/api-management-getstarted-publish-versions/AddVersionMenu.png)
1. Перейдите на страницу **Интерфейсы API** в службе управления API на портале Azure.
2. Выберите **Conference API** из списка API, затем щелкните контекстное меню (**…**) рядом с ним.
3. Выберите **+ Add Version** (+ Добавить версию).

    > [!TIP]
    > Управление версиями можно также включить при создании API. Для этого следует выбрать **Управлять версией этого API?** на экране **Добавление API**.

## <a name="choose-a-versioning-scheme"></a>Выбор схемы управления версиями
Служба управления API Azure позволяет выбрать, каким образом разрешить вызывающим сторонам указывать, какая версия API им требуется. Для этого следует выбрать **схему управления версиями**. Эта схема может быть **путем, заголовком или строкой запроса**. В нашем примере это путь.
![Экран добавления версии](media/api-management-getstarted-publish-versions/AddVersion.PNG)
1. Оставьте выбранным значение **Путь** для параметра **Схема управления версиями**.
2. Добавьте значение **v1** для параметра **Идентификатор версии**.

    > [!TIP]
    > Если в качестве схемы управления версиями выбрать **заголовок** или **строку запроса**, необходимо будет предоставить дополнительное значение — имя заголовка или параметр строки запроса.

3. При желании добавьте описание.
4. Щелкните **Создать**, чтобы создать версию.
5. Теперь под пунктом **Big Conference API** в списке API указаны два разных API, **Original** и **v1**.
![Версии, перечисленные в списке API на портале Azure](media/api-management-getstarted-publish-versions/VersionList.PNG)

    > [!Note]
    > Если добавить версию для API без управления версиями, всегда будет автоматически создаваться версия**Original**, в соответствии с URL-адресом по умолчанию. Это гарантирует, что работа вызывающих сторон не будет нарушена в процессе добавления версии. Если вы сразу создадите API с управлением версиями, то версия Original не будет создаваться.

6. Теперь можно изменить и настроить **v1** в качестве API, никак не связанного с версией **Original**. Изменение одной версии не влияет на другую.

## <a name="add-the-version-to-a-product"></a>Добавление версии в продукт
Чтобы вызывающие стороны могли видеть новую версию, ее необходимо добавить в **продукт** (продукты не наследуются от родительских версий).

1. Выберите **Продукты** на странице службы управления.
2. Выберите **Без ограничений**.
3. Выберите **Интерфейсы API**.
4. Выберите **Добавить**.
5. Выберите **Conference API, Version v1** (Conference API, версия v1).
6. Вернитесь на страницу управления службами и выберите **Интерфейсы API**.

## <a name="browse-the-developer-portal-to-see-the-version"></a>Обзор портала разработчика для просмотра версии
1. Выберите **Портал разработчика** в верхнем меню.
2. Выберите **Интерфейсы API**. Обратите внимание, что для **Conference API** отображаются версии **Original** и **v1**.
3. Выберите **v1**.
4. Обратите внимание на **URL-адрес запроса** первой операции в списке. В нем видно, что путь URL-адреса API содержит **v1**.
![Версия, отображаемая на портале разработчика](media/api-management-getstarted-publish-versions/VersionDevPortal.PNG)
