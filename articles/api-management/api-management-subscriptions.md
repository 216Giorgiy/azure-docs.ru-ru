---
title: Подписки в службе управления API Azure | Документация Майкрософт
description: Сведения о концепции подписок в службе управления API Azure.
services: api-management
documentationcenter: ''
author: miaojiang
manager: cfowler
editor: ''
ms.service: api-management
ms.workload: mobile
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 11/14/2018
ms.author: apimpm
ms.openlocfilehash: 45a65c7a94f3e6917b2882f27c9ad7d764ef97d7
ms.sourcegitcommit: eba6841a8b8c3cb78c94afe703d4f83bf0dcab13
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/29/2018
ms.locfileid: "52621762"
---
# <a name="subscriptions-in-azure-api-management"></a>Подписки в службе управления API Azure

Подписки — это важная концепция службы управления API (APIM) в Azure. Это самый простой способ для пользователей API получить доступ к API, опубликованным в экземпляре службы управления API. В статье представлен обзор этой концепции.

## <a name="what-is-subscriptions"></a>Общие сведения о подписках

При публикации API в службе управления API самый простой способ защитить доступ к этим интерфейсам API — использовать ключи подписки. Другими словами разработчики, которым требуется использовать опубликованные API, должны включать действительный ключ подписки в HTTP-запросах при выполнении вызовов к этим API. Все вызовы без такого ключа немедленно игнорируются шлюзом управления API и не передаются в серверные службы.

Чтобы получить ключ подписки для доступа к API, нужна подписка. Подписка по сути является именованным контейнером для пары ключей подписки. Подписку может получить любой разработчик, которому требуется доступ к опубликованным API, независимо от согласия издателя API. Кроме того, издатели API могут самостоятельно создавать подписки от имени пользователей API.

> [!TIP]
> Служба управления API поддерживает и другие механизмы защиты доступа к API, включая [OAuth2.0](api-management-howto-protect-backend-with-aad.md), [сертификаты клиента](api-management-howto-mutual-certificates-for-clients.md) и [списки разрешенных IP-адресов](https://docs.microsoft.com/azure/api-management/api-management-access-restriction-policies#RestrictCallerIPs)

## <a name="scope-of-subscriptions"></a>Область действия подписок

Подписки можно связывать с разными областями, включая продукты, все API или отдельные API.

### <a name="subscriptions-for-a-product"></a>Подписки для продукта

Традиционно подписки в службе управления API связывались с одним [продуктом API](api-management-terminology.md). Разработчик может получить список доступных продуктов на соответствующем портале и создать запросы на подписку для тех продуктов, которые ему нужны. После утверждения запроса на подписку (автоматически или издателем API) разработчик может использовать ключи этой подписки для доступа ко всем API в выбранном продукте.

![Подписки для продукта](./media/api-management-subscriptions/product-subscription.png)

> [!TIP]
> В некоторых ситуациях издатели API предпочитают публиковать общедоступный продукт API, не требуя использовать подписки. Для этого следует снять флажок **Требуется подписка** в диалоговом окне **Параметры** на странице продукта на портале Azure. В этом случае все API в составе этого продукта будут доступны без ключа API.

### <a name="subscriptions-for-all-apis-or-an-individual-api"></a>Подписки для всех API или отдельных API

> [!NOTE]
> Сейчас эта функция доступна только в службе управления API ценовой категории "Потребление".

В службе управления API ценовой категории [Потребление](https://aka.ms/apimconsumptionblog) мы реализовали ряд изменений, чтобы упростить управление ключами. Во-первых, появились две новые области действия подписки — все API и один API. Теперь область действия подписок не ограничивается исключительно продуктом API. Теперь можно создавать ключи, предоставляющие доступ к одному API (или всем API в экземпляре службы управления API), без необходимости создавать продукт и добавлять к нему API. Более того, каждый экземпляр службы управления API теперь поставляется с неизменяемой подпиской на все API, что упрощает и ускоряет тестирование и отладку API в консоли тестирования.

Во-вторых, служба управления API теперь поддерживает автономные подписки. Это означает, что подписки не обязательно должны быть связаны с учетной записью разработчика. Это полезно в сценариях, когда одна подписка совместно используется несколькими разработчиками или группами.

И наконец, издатели API теперь могут [создавать подписки](api-management-howto-create-subscriptions.md) непосредственно на портале Azure.

![Гибкие подписки](./media/api-management-subscriptions/flexible-subscription.png)

## <a name="next-steps"></a>Дополнительная информация
См. дополнительные сведения о службе управления API:

+ См. сведения о других [концепциях](api-management-terminology.md) службы управления API.
+ См. [руководства](import-and-publish.md) по использованию службы управления API.
+ См. [страницу вопросов и ответов](api-management-faq.md) с информацией о распространенных проблемах.