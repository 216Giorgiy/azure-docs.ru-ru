<properties title="Monitor your app's health and usage with Application Insights" pageTitle="Monitor your app's health and usage with Application Insights" description="Get started with Application Insights. Analyze usage, availability and performance of your on-premises or Microsoft Azure applications." metaKeywords="analytics monitoring application insights" authors="awills"  manager="kamrani" />

<tags ms.service="application-insights" ms.workload="tbd" ms.tgt_pltfrm="ibiza" ms.devlang="na" ms.topic="article" ms.date="2014-09-24" ms.author="awills"></tags>

# Отслеживание производительности в веб-приложениях

*Служба Application Insights доступна в предварительной версии.*


Контролируйте работу приложения и быстро узнавайте о любых сбоях. [Application Insights][start] сообщает о любых проблемах с производительностью и исключениях, помогая выявлять и диагностировать их причины.

Служба Application Insights может отслеживать веб-приложения ASP.NET, размещенные в локальной среде или на виртуальных машинах, а также веб-сайты Microsoft Azure.

* [Настройка мониторинга производительности](#setup)
* [Просмотр данных](#view)
* [Что все это значит?](#metrics)
* [Диагностика неполадок](#diagnosis)
* [Дальнейшие действия](#next)

## <a name="setup"></a> Настройка мониторинга производительности

Если вы еще не добавили Application Insights в проект (т. е. если в нем нет файла ApplicationInsights.config), вы можете приступить к работе с этой службой одним из следующих способов:

* [добавьте Application Insights в проект приложения в Visual Studio][start] (рекомендуемый способ) — помимо пассивного мониторинга производительности, вы можете вести журналы диагностики и отслеживать использование;
* [отслеживайте производительность работающего веб-сайта][redfield] — для этого не нужно обновлять проект приложения или выполнять повторное развертывание веб-сайта.


## <a name="view"></a> Просмотр отчетов

Запустите приложение, нажав клавишу F5, и попробуйте открыть разные страницы.

В Visual Studio вы увидите число полученных событий.

![](./media/appinsights/appinsights-09eventcount.png)


Откройте Application Insights из проекта.

![Щелкните проект правой кнопкой мыши и откройте портал Azure](./media/appinsights/appinsights-04-openPortal.png)

Просмотрите данные на плитках **Application health** (Работоспособность приложения). Сначала вы увидите только одну или две точки. Например:


![Щелкните плитки, чтобы увидеть больше данных](./media/appinsights/appinsights-41firstHealth.png)

При работе в режиме отладки телеметрия передается через конвейер, поэтому данные должны появиться в течение нескольких секунд. При развертывании приложения данные накапливаются медленнее.

Если данные сразу не отображаются, подождите минуту и нажмите Refresh (Обновить).

### Изучение метрик

Чтобы увидеть подробные данные и результаты за более длительный период, щелкните любую плитку. Например, щелкните плитку Requests (Запросы), а затем выберите временной диапазон:


![Щелкните плитку, чтобы увидеть подробные данные, и выберите временной диапазон](./media/appinsights/appinsights-48metrics.png)

Чтобы выбрать метрики для отображения на графике, щелкните его:

![Щелкните график, чтобы выбрать метрики](./media/appinsights/appinsights-61perfchoices.png)

>[AZURE.NOTE] Чтобы увидеть все доступные метрики, **снимите все флажки**. Метрики разделены на группы: если выбран один из элементов группы, отображаются только другие метрики в той же группе.


## <a name="metrics"></a> Что все это значит? Плитки и отчеты о производительности

Для просмотра доступны самые разнообразные метрики производительности. Начнем с тех, которые отображаются в колонке приложения по умолчанию.


### Requests (Запросы)

Это число HTTP-запросов, полученных за указанный период. Сравните это значение с результатами в других отчетах, чтобы узнать, как ведет себя приложение при изменении нагрузки.

HTTP-запросы включают в себя все запросы GET и POST для страниц, данных и изображений.

Чтобы просмотреть счетчики для конкретных URL-адресов, щелкните плитку.

### Average response time (Среднее время ответа)

Это время от поступления веб-запроса в приложение до возвращения ответа.

Точки показывают скользящее среднее. Если запросов много, для некоторых из них значения могут отклоняться от среднего, но при этом на графике не будет явных пиков или провалов.

Обращайте внимание на необычные пики. Как правило, время ответа растет с увеличением числа запросов. Если этот рост непропорционален, возможно, приложение исчерпало какой-либо ресурс, например ЦП или емкость используемой службы.

Чтобы просмотреть значения для конкретных URL-адресов, щелкните плитку.

![](./media/appinsights/appinsights-42reqs.png)


### Slowest requests (Самые медленные запросы)

![](./media/appinsights/appinsights-44slowest.png)

Показывает, какие запросы могут потребовать оптимизации производительности.


### Failed requests (Неудачные запросы)

![](./media/appinsights/appinsights-46failed.png)

Это счетчик запросов, которые вызвали неперехваченные исключения.

Чтобы просмотреть подробные сведения о конкретных сбоях, щелкните плитку. Чтобы просмотреть подробные сведения об отдельном запросе, выберите его.

Для детального изучения доступна только репрезентативная выборка сбоев.

### Другие метрики

Чтобы увидеть, какие еще метрики доступны, щелкните график и снимите все флажки метрик. Чтобы просмотреть определение конкретной метрики, щелкните значок (i).

![Снимите все флажки, чтобы увидеть полный набор метрик](./media/appinsights/appinsights-62allchoices.png)


При выборе одной из метрик другие, которые невозможно отобразить на той же диаграмме, скрываются.


## <a name="diagnosis"></a> Диагностика неполадок

Вот некоторые советы по выявлению и диагностике проблем с производительностью:

* настройте [веб-тесты][availability], чтобы получать оповещения, когда веб-сайт выходит из строя либо отвечает неправильно или медленно;
* сравните число запросов с другими метриками, чтобы узнать, не связаны ли сбои или медленный ответ с нагрузкой;
* [вставьте в код инструкции трассировки и выполняйте поиск по ним][diagnostic], чтобы упростить локализацию проблем.

## <a name="next"></a> Дальнейшие действия

[Веб-тесты][availability] — настройте отправку веб-запросов к приложению через равные интервалы из разных точек мира.

[Сбор данных трассировки диагностики и поиск по ним][diagnostic] — добавьте вызовы трассировки и анализируйте результаты для выявления проблем.

[Отслеживание использования][usage] — получайте информацию о том, как люди используют ваше приложение.

[Устранение неполадок][qna], а также часто задаваемые вопросы.


## Подробнее

* [Приступая к работе с Application Insights][start]
* [Отслеживание работающего веб-сервера][redfield]
* [Отслеживание производительности в веб-приложениях][perf]
* [Поиск по журналам диагностики][diagnostic]
* [Отслеживание доступности с помощью веб-тестов][availability]
* [Отслеживание использования][usage]
* [Часто задаваемые вопросы и устранение неполадок][qna]


<!--Link references-->

[start]: ../app-insights-start-monitoring-app-health-usage/
[redfield]: ../app-insights-monitor-performance-live-website-now/
[perf]: ../app-insights-web-monitor-performance/
[diagnostic]: ../app-insights-search-diagnostic-logs/ 
[availability]: ../app-insights-monitor-web-app-availability/
[usage]: ../app-insights-web-track-usage/
[qna]: ../app-insights-troubleshoot-faq/
[webclient]: ../app-insights-start-monitoring-app-health-usage/#webclient

