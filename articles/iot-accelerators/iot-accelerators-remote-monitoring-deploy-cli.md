---
title: Развертывание решения для удаленного мониторинга Java в Azure | Документация Майкрософт
description: В этом руководстве показано, как с помощью интерфейса командной строки подготовить акселератор решений для удаленного мониторинга.
services: iot-suite
suite: iot-suite
author: dominicbetts
manager: timlt
ms.author: dobett
ms.service: iot-suite
ms.date: 01/29/2018
ms.topic: article
ms.devlang: NA
ms.tgt_pltfrm: NA
ms.workload: NA
ms.openlocfilehash: 3178d51cd2c04f3be8d4a6284a4f1635845def8c
ms.sourcegitcommit: 688a394c4901590bbcf5351f9afdf9e8f0c89505
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/18/2018
---
# <a name="deploy-the-remote-monitoring-solution-accelerator-using-the-cli"></a>Развертывание акселератора решений для удаленного мониторинга с помощью CLI

В этом руководстве показано, как подготовить акселератор решений для удаленного мониторинга. Решение развертывается с помощью интерфейса командной строки. Его также можно развернуть с помощью пользовательского веб-интерфейса на сайте azureiotsuite.com. Дополнительные сведения об этом варианте см. в статье [Развертывание акселератора решений для удаленного мониторинга](iot-accelerators-remote-monitoring-deploy.md).

## <a name="prerequisites"></a>предварительным требованиям

Чтобы развернуть акселератор решений для удаленного мониторинга, нужна активная подписка Azure.

Если ее нет, можно создать бесплатную пробную учетную запись всего за несколько минут. Дополнительные сведения см. в разделе [Бесплатная пробная версия Azure](http://azure.microsoft.com/pricing/free-trial/).

Чтобы запустить интерфейс командной строки, на локальном компьютере необходимо установить [Node.js](https://nodejs.org/).

## <a name="install-the-cli"></a>Установка интерфейса командной строки

Чтобы установить интерфейс командной строки, в среде командной строки выполните следующую команду:

```cmd/sh
npm install iot-solutions -g
```

## <a name="sign-in-to-the-cli"></a>Вход в интерфейс командной строки

Прежде чем развернуть акселератор решений, необходимо войти в подписку Azure с помощью интерфейса командной строки:

```cmd/sh
pcs login
```

Для завершения процесса входа следуйте инструкциям на экране.

## <a name="deployment-options"></a>Варианты развертывания

При развертывании акселератора решений существует несколько вариантов для настройки процесса.

| Параметр | Значения | ОПИСАНИЕ |
| ------ | ------ | ----------- |
| SKU    | `basic`, `standard`, `local` | _Базовое_ развертывание предназначено для тестирования и демонстрации. При этом все микрослужбы развертываются на одной виртуальной машине. _Стандартное_ развертывание предназначено для рабочей среды. При этом микрослужбы развертываются на нескольких виртуальных машинах. При _локальном_ развертывании контейнер Docker настраивается для запуска микрослужб на локальном компьютере и использует службы Azure, такие как хранилище и Cosmos DB, в облаке. |
| Среда выполнения | `dotnet`, `java` | Позволяет выбирать языковую реализацию микрослужб. |

Дополнительные сведения об использовании локального развертывания см. в разделе [Развертывание служб Azure и установка переменных среды](https://github.com/Azure/azure-iot-pcs-remote-monitoring-dotnet/wiki/Running-the-Remote-Monitoring-Solution-Locally#deploy-azure-services-and-set-environment-variables).

## <a name="basic-vs-standard-deployments"></a>Базовое развертывание или стандартное развертывание

### <a name="basic"></a>базовая;
Базовое развертывание предназначено только для демонстрации решения. Чтобы сократить затраты на демонстрацию, все микрослужбы развертываются в одной виртуальной машине. Считается, что такая архитектура не подходит для рабочей среды.

Вариант стандартного развертывания следует применять, когда вы будете готовы настроить рабочую архитектуру с соответствующим уровнем масштабируемости и расширяемости.

При создании базового решения в используемой подписке Azure будут подготовлены следующие платные службы Azure. 

| Count | Ресурс                       | type         | Область использования |
|-------|--------------------------------|--------------|----------|
| 1     | [Виртуальная машина Linux](https://azure.microsoft.com/services/virtual-machines/) | Standard D1 V2  | Размещение микрослужб |
| 1     | [Центр Интернета вещей Azure](https://azure.microsoft.com/services/iot-hub/)                  | S1 — уровень "Базовый" | Управление устройствами и обмен данными |
| 1     | [Azure Cosmos DB](https://azure.microsoft.com/services/cosmos-db/)              | Стандартная        | Хранение данных конфигурации и данных телеметрии, например правил, предупреждений и сообщений |  
| 1     | [Учетная запись хранения Azure](https://docs.microsoft.com/azure/storage/common/storage-introduction#types-of-storage-accounts)  | Стандартная        | Хранилище для виртуальных машин и контрольных точек потоковой передачи |
| 1     | [Веб-приложение](https://azure.microsoft.com/services/app-service/web/)        |                 | Размещение интерфейсных веб-приложений |

### <a name="standard"></a>Стандартная
Стандартное развертывание — это развертывание для рабочей среды, которое разработчик может настроить или дополнить в соответствии с конкретными требованиями. Чтобы обеспечить надежность и масштабирование, микрослужбы приложения создаются как контейнеры Docker и развертываются с помощью оркестратора (по умолчанию [Kubernetes](https://kubernetes.io/)). Оркестратор выполняет развертывание, масштабирование и управление приложением.

При создании стандартного решения в используемой подписке Azure будут подготовлены следующие платные службы Azure.

| Count | Ресурс                                     | Размер (номер SKU)      | Область использования |
|-------|----------------------------------------------|-----------------|----------|
| 4.     | [Виртуальные машины Linux](https://azure.microsoft.com/services/virtual-machines/)   | Standard D2 V2  | 1 главный узел и 3 агента для избыточного размещения микрослужб |
| 1     | [Служба контейнеров](https://azure.microsoft.com/services/container-service/) |                 | Оркестратор [Kubernetes](https://kubernetes.io) |
| 1     | [Центр Интернета вещей Azure][https://azure.microsoft.com/services/iot-hub/]                     | S1 — уровень "Базовый" | Команды и средства для управления устройствами |
| 1     | [Azure Cosmos DB](https://azure.microsoft.com/services/cosmos-db/)                 | Стандартная        | Хранение данных конфигурации и данных телеметрии, например правил, предупреждений и сообщений |
| 5     | [Учетные записи хранения Azure](https://docs.microsoft.com/azure/storage/common/storage-introduction#types-of-storage-accounts)    | Стандартная        | 4 для хранения виртуальных машин и 1 для контрольных точек потоковой передачи |
| 1     | [Служба приложений](https://azure.microsoft.com/services/app-service/web/)             | Стандартный S1     | Шлюз приложений через SSL |

> Сведения о ценах для этих служб можно найти [здесь](https://azure.microsoft.com/pricing). Сведения об объеме потребления и выставлении счетов для подписки можно найти на [портале Azure](https://portal.azure.com/).

## <a name="deploy-the-solution-accelerator"></a>Развертывание акселератора решений

### <a name="example-deploy-net-version"></a>Пример: развертывание версии .NET

В примере ниже представлено развертывание базовой версии .NET акселератора решений для удаленного мониторинга.

```cmd/sh
pcs -t remotemonitoring -s basic -r dotnet
```

### <a name="example-deploy-java-version"></a>Пример: развертывание версии Java

В примере ниже представлено развертывание стандартной версии Java акселератора решений для удаленного мониторинга.

```cmd/sh
pcs -t remotemonitoring -s standard -r java
```

### <a name="pcs-command-options"></a>параметры команд предварительно настроенного решения

При выполнении команды `pcs` для развертывания решения запрашивается:

- Имя для решения. Это имя должно быть уникальным.
- Подписка Azure, которую нужно использовать.
- Расположение.
- Учетные данные для виртуальных машин, на которых размещены микрослужбы. Эти учетные данные можно использовать для доступа к виртуальным машинам, используемым для устранения неполадок.

После выполнения команды `pcs` отобразится URL-адрес нового акселератора решений. Кроме того, команда `pcs` создает файл `{deployment-name}-output.json` с дополнительной информацией, такой как имя подготовленного Центра Интернета вещей.

Чтобы получить дополнительные сведения о параметрах командной строки, выполните следующую команду:

```cmd/sh
pcs -h
```

Дополнительные сведения об интерфейсе командной строки см. в статье [Azure IoT PCS CLI Overview](https://github.com/Azure/pcs-cli/blob/master/README.md)(Обзор интерфейса командной строки для предварительно настроенного решения Центра Интернета вещей Azure).

## <a name="next-steps"></a>Дополнительная информация

Из этого руководства вы узнали, как выполнить следующие задачи:

> [!div class="checklist"]
> * настройка акселератора решений;
> * развертывание акселератора решений;
> * вход в акселератор решений.

Теперь, когда вы развернули решение для удаленного мониторинга, [изучите возможности панели мониторинга решения](./iot-accelerators-remote-monitoring-deploy.md).

<!-- Next tutorials in the sequence -->