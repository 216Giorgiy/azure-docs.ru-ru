<properties urlDisplayName="How to configure" pageTitle="Настройка облачной службы &mdash; Azure" metaKeywords="Configuring cloud services" description="Узнайте, как настроить облачные службы в Azure. Как обновить конфигурацию облачной службы и настроить удаленный доступ к экземплярам роли." metaCanonical="" services="cloud-services" documentationCenter="" title="Настройка облачных служб" authors="davidmu" solutions="" manager="timlt" editor="" />

<tags ms.service="cloud-services" ms.workload="tbd" ms.tgt_pltfrm="na" ms.devlang="na" ms.topic="article" ms.date="10/21/2014" ms.author="davidmu" />

# <span id="configurecloudservice"></span></a>Как настроить облачные службы

Часто используемые параметры облачной службы можно настроить на портале управления Azure. Также можно напрямую изменить файлы конфигурации. Для этого загрузите и измените нужный файл, а затем отправьте его для обновления конфигурации облачной службы. В любом случае обновления конфигурации применяются ко всем экземплярам ролей.

Также можно разрешить подключения удаленного рабочего стола к одной или всем ролям в облачной службе. Это позволит получить доступ к рабочему столу выполняющегося приложения для диагностики и устранения неполадок. Такие подключения к роли можно устанавливать даже в том случае, если при развертывании приложения не настроен файл определения службы (CSDEF) для удаленного рабочего стола. Повторное развертывание приложения для настройки подключений удаленного рабочего стола не требуется.

При наличии как минимум двух экземпляров для каждой роли в процессе обновления конфигурации Azure обеспечивается доступность службы в течение 99,95 % времени. Такая конфигурация позволяет обрабатывать запросы клиентов на одной виртуальной машине во время обновления другой. Дополнительные сведения см. в разделе [Соглашения об уровне обслуживания][Соглашения об уровне обслуживания].

## Оглавление

-   [Практическое руководство. Обновление конфигурации облачной службы][Практическое руководство. Обновление конфигурации облачной службы]
-   [Практическое руководство. Настройка удаленного доступа к экземплярам ролей][Практическое руководство. Настройка удаленного доступа к экземплярам ролей]

## <span id="update"></span></a>Практическое руководство. Обновление конфигурации облачной службы

1.  На [Портале управления Azure][Портале управления Azure] щелкните **Облачные службы**, затем щелкните имя облачной службы, а после этого **Настройка**.

    ![Страница «Конфигурация»][Страница «Конфигурация»]

    На странице **Настройка** можно задать параметры мониторинга, обновить настройки ролей, а также выбрать гостевую операционную систему и семейство для экземпляров роли.

2.  В параметрах **мониторинга** задайте уровень "Подробно" или "Минимальный" и настройте строки подключения диагностики, необходимые для подробного мониторинга. Инструкции см. в разделе [Мониторинг облачных служб][Мониторинг облачных служб].

3.  Для ролей службы, сгруппированных по ролям, можно обновить следующие параметры:

    > -   **Настройки** — измените значения параметров конфигурации, определенных в элементах *ConfigurationSettings* файла конфигурации службы (CSCFG-файла).

    > -   **Сертификаты** — измените отпечаток сертификата, используемый при SSL-шифровании для роли. Чтобы сменить сертификат, загрузите новый сертификат на странице **Сертификаты**. После этого обновите отпечаток сертификата в строке в параметрах роли.

4.  В параметрах **операционной системы** можно задать версию или семейство ОС для экземпляров роли, а также выбрать параметр **Автоматически**, который позволяет включить автоматическое обновление текущей версии ОС. Настройки ОС распространяются на веб-роли и рабочие роли, но не влияют на виртуальные машины.

    В процессе развертывания на все экземпляры роли устанавливается последняя версия ОС с включенным по умолчанию автоматическим обновлением.

    Если требования к совместимости кода предусматривают работу с облачной службой в другой версии операционной системы, можно выбрать нужные версию и семейство ОС. При выборе конкретной версии ОС автоматическое обновление для облачной службы приостанавливается. В этом случае необходимо настроить обновление операционных систем.

    Если в последней версии ОС все проблемы с совместимостью приложений устранены, установите значение параметра **Автоматически**, чтобы включить автоматическое обновление операционной системы.

    ![Параметры ОС][Параметры ОС]

5.  Чтобы сохранить параметры конфигурации и передать их в экземпляры ролей, нажмите кнопку **Сохранить**. (Чтобы отменить изменения, нажмите кнопку **Отменить**.) Кнопки **Сохранить** и **Отменить** добавляются в панель команд после изменения параметра.

### Обновление файла конфигурации облачной службы вручную

1.  Загрузите файл конфигурации облачной службы (CSCFG) с текущей конфигурацией. На странице **Настройка** облачной службы щелкните **Загрузить**. Далее выберите команды **Сохранить** или **Сохранить как** для сохранения файла.

2.  Чтобы применить обновления конфигурации, передайте новый файл в службу:

    а) На странице **Настройка** щелкните элемент **Отправить**.

    ![Отправка конфигурации][Отправка конфигурации]

    б) В разделе **Файл конфигурации** нажмите кнопку **Обзор** и выберите обновленный CSCFG-файл.

    в) Если в облачной службе содержатся роли с одним экземпляром, установите флажок **Применить, даже если одна или несколько ролей содержат отдельный экземпляр**, чтобы обеспечить обновление конфигурации ролей.

    Если для каждой роли не определены как минимум два экземпляра, Azure не гарантирует доступность службы в течение 99,95 % времени в процессе обновления конфигурации. Дополнительные сведения см. в разделе [Соглашения об уровне обслуживания][1].

    d. Нажмите кнопку **OK** (флажок).

## <span id="remoteaccess"></span></a>Практическое руководство. Настройка удаленного доступа к экземплярам ролей

С помощью удаленного рабочего стола обеспечивается доступ к рабочему столу экземпляра, работающего в Azure. Подключение к удаленному рабочему столу позволяет диагностировать и устранять неполадки выполняющегося приложения. Включить такие подключения можно на этапе разработки приложения, а также после его развертывания в Azure при выполнении роли. Чтобы включить подключение к удаленному рабочему столу для выполняющейся роли на портале управления, не требуется повторное развертывание приложения. Для проверки подлинности такого подключения можно использовать как ранее переданный, так и новый сертификат.

На странице **Настройка** облачной службы можно включить удаленный рабочий стол, изменить учетную запись и пароль локального администратора для подключения к виртуальным машинам, выбрать сертификат для проверки подлинности, а также установить срок его действия.

### Настройка удаленного доступа в файле определения службы

Добавьте в файл определения службы (CSDEF) элементы **Import**, позволяющие импортировать модули RemoteAccess и RemoteForwarder в модель службы. В этом случае Azure автоматически добавит параметры конфигурации удаленного рабочего стола в файл конфигурации службы. Чтобы завершить настройку удаленного рабочего стола, импортируйте в Azure сертификат и определите его в файле конфигурации службы. Дополнительную информацию см. в разделе [Настройка удаленного подключения к рабочему столу для роли в Azure][Настройка удаленного подключения к рабочему столу для роли в Azure].

### Включение или изменение параметров удаленного доступа для экземпляров роли на портале управления

1.  Щелкните **Облачные службы**, затем щелкните имя облачной службы, а после этого **Настройка**.

2.  Щелкните **Удаленный доступ**.

    ![Удаленный доступ к облачным службам][Удаленный доступ к облачным службам]

    **Предупреждение:**Если включить удаленный рабочий стол и нажать кнопку «ОК» (флажок), все экземпляры роли будут перезапущены. Если в роли установлен сертификат для шифрования пароля, перезапуск не производится.

    Чтобы не выполнять перезапуск, установите сертификат и вернитесь в диалоговое окно. Дополнительные сведения см. в разделе [Использование удаленного рабочего стола с ролями Azure][Использование удаленного рабочего стола с ролями Azure]. При выборе существующего сертификата во все экземпляры роли передаются обновления конфигурации.

3.  В разделе **Роли** выберите роль, которую требуется обновить, или щелкните **Все**, чтобы задать все роли.

4.  Внесите любые из следующих изменений:

    -   Чтобы включить удаленный рабочий стол, установите флажок **Включить удаленный рабочий стол**. Если доступ к удаленному рабочему столу не требуется, снимите этот флажок.

    -   Создайте учетную запись, которая будет использоваться в подключениях к удаленному рабочему столу в экземплярах роли.

    -   Обновите пароль существующей учетной записи.

    -   Выберите сертификат, который будет использоваться для аутентификации: новый или переданный с помощью раздела **Отправка** на странице **Сертификаты**).

    -   Измените срок действия для конфигурации удаленного рабочего стола.

5.  По завершении обновления настроек нажмите кнопку **OK** (флажок).

6.  Подключение к экземпляру роли:

    а) Щелкните элемент **Экземпляры**, чтобы перейти на страницу **Экземпляры**.

    б) Выберите экземпляр роли, для которого настроен удаленный рабочий стол.

    в) Щелкните **Подключить** и откройте рабочий стол, следуя выводимым на экран инструкциям.

    г) Щелкните **Открыть** и затем **Подключить**, чтобы запустить подключение к удаленному рабочему столу.

### Отключение удаленного доступа для экземпляров роли на портале управления

1.  Щелкните **Облачные службы**, затем щелкните имя облачной службы, а после этого **Настройка**.

2.  Щелкните **Удаленный доступ**.

3.  В разделе **Роли** выберите роль, которую требуется обновить, или щелкните **Все**, чтобы задать все роли.

4.  Снимите флажок **Включить удаленный рабочий стол**.

5.  Нажмите кнопку **OK** (флажок).

  [Соглашения об уровне обслуживания]: https://www.windowsazure.com/ru-ru/support/legal/sla/
  [Практическое руководство. Обновление конфигурации облачной службы]: #update
  [Практическое руководство. Настройка удаленного доступа к экземплярам ролей]: #remoteaccess
  [Портале управления Azure]: http://manage.windowsazure.com/
  [Страница «Конфигурация»]: ./media/cloud-services-how-to-configure/CloudServices_ConfigurePage1.png
  [Мониторинг облачных служб]: ../how-to-monitor-a-cloud-service/
  [Параметры ОС]: ./media/cloud-services-how-to-configure/CloudServices_ConfigurePage_OSSettings.png
  [Отправка конфигурации]: ./media/cloud-services-how-to-configure/CloudServices_UploadConfigFile.png
  [1]: http://www.windowsazure.com/ru-ru/support/legal/sla/
  [Настройка удаленного подключения к рабочему столу для роли в Azure]: http://msdn.microsoft.com/ru-ru/library/windowsazure/hh124107.aspx
  [Удаленный доступ к облачным службам]: ./media/cloud-services-how-to-configure/CloudServices_Remote.png
  [Использование удаленного рабочего стола с ролями Azure]: http://msdn.microsoft.com/ru-ru/library/windowsazure/gg443832.aspx
