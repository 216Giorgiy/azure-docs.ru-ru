<properties 
	pageTitle="Настройка облачной службы - Azure" 
	description="Узнайте, как настроить облачные службы в Azure. Как обновить конфигурацию облачной службы и настроить удаленный доступ к экземплярам роли." 
	services="cloud-services" 
	documentationCenter="" 
	authors="Thraka" 
	manager="timlt" 
	editor=""/>

<tags 
	ms.service="cloud-services" 
	ms.workload="tbd" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="10/21/2014" 
	ms.author="adegeo"/>




<h1><a id="configurecloudservice"></a>Как настроить облачные службы</h1>

Часто используемые параметры облачной службы можно настроить на портале управления Azure. Также можно напрямую изменить файлы конфигурации. Для этого загрузите и измените нужный файл, а затем отправьте его для обновления конфигурации облачной службы. В любом случае обновления конфигурации применяются ко всем экземплярам ролей.

Также можно разрешить подключения удаленного рабочего стола к одной или всем ролям в облачной службе.  Это позволит получить доступ к рабочему столу выполняющегося приложения для диагностики и устранения неполадок.  Такие подключения к роли можно устанавливать даже в том случае, если при развертывании приложения не настроен файл определения службы (CSDEF) для удаленного рабочего стола.  Повторное развертывание приложения для настройки подключений удаленного рабочего стола не требуется.

При наличии как минимум двух экземпляров для каждой роли в процессе обновления конфигурации Azure обеспечивается доступность службы в течение 99,95 % времени. Такая конфигурация позволяет обрабатывать запросы клиентов на одной виртуальной машине во время обновления другой. Дополнительные сведения см. в разделе [Соглашения об уровне обслуживания](https://www.windowsazure.com/ru-ru/support/legal/sla/).

## Оглавление##

* [Практическое руководство. Обновление конфигурации облачной службы](#update)
* [Практическое руководство. Настройка удаленного доступа к экземплярам ролей](#remoteaccess)


<h2><a id="update"></a>Практическое руководство. Обновление конфигурации облачной службы</h2>

1. На [портале управления Azure](http://manage.windowsazure.com/) щелкните **Облачные службы**, затем щелкните имя облачной службы, а после этого **Настройка**.

	![Configuration Page](./media/cloud-services-how-to-configure/CloudServices_ConfigurePage1.png)
	
	На странице **Настройка** можно настроить мониторинг, изменить настройки роли и выбрать гостевую операционную систему для экземпляров ролей. 

2. В разделе **Мониторинг** задайте уровень мониторинга (от минимального до подробного) и настройте диагностические строки подключения, которые необходимы для подробного мониторинга. Инструкции см. в разделе [Мониторинг облачных служб](../how-to-monitor-a-cloud-service/).


3. Для ролей службы, сгруппированных по ролям, можно обновить следующие параметры:

	>- **Параметры**   измените значения параметров конфигурации, определенных в элементах  *ConfigurationSettings* файла конфигурации службы (CSCFG).
	
	>- **Сертификаты**   измените отпечаток сертификата, используемый при SSL-шифровании для роли. Чтобы сменить сертификат, загрузите новый сертификат на странице **Сертификаты**. После этого обновите отпечаток сертификата в строке в параметрах роли.

4. В разделе **Операционная система** можно изменить семейство или версию ОС для экземпляров ролей либо выбрать значение **Авто**, чтобы обеспечить автоматическое обновление версии текущей операционной системы. Настройки ОС распространяются на веб-роли и рабочие роли, но не влияют на виртуальные машины.

	В процессе развертывания на все экземпляры роли устанавливается последняя версия ОС с включенным по умолчанию автоматическим обновлением. 

	Если требования к совместимости кода предусматривают работу с облачной службой в другой версии операционной системы, можно выбрать нужные версию и семейство ОС. При выборе конкретной версии ОС автоматическое обновление для облачной службы приостанавливается. В этом случае необходимо настроить обновление операционных систем.

	Если решены все проблемы совместимости, которые приложение имело с последней версией операционной системы, то можно установить ее версию в **Авто**. 

	![OS Settings](./media/cloud-services-how-to-configure/CloudServices_ConfigurePage_OSSettings.png)

5. Чтобы сохранить параметры конфигурации и передать их в экземпляры ролей, нажмите кнопку **Сохранить**. (Чтобы отменить изменения, нажмите кнопку **Отменить**.) **Сохранить** и **Отменить** добавляются на панель команд после изменения параметра.

### Обновление файла конфигурации облачной службы вручную###

1. Загрузите файл конфигурации облачной службы (CSCFG) с текущей конфигурацией. На странице **Настройка** облачной службы щелкните **Загрузить**. Далее выберите команды **Сохранить** или **Сохранить как** для сохранения файла.

2. Чтобы применить обновления конфигурации, передайте новый файл в службу:

	a. На странице **Настройка** нажмите **Передать**.

	![Upload Configuration](./media/cloud-services-how-to-configure/CloudServices_UploadConfigFile.png)

	b. На вкладке **Файл конфигурации** нажмите кнопку **Обзор**, чтобы выбрать обновленный CSCFG-файл.

	c. Если облачная служба содержит роли, которые имеют всего один экземпляр, выберите флажок **Применить конфигурацию, даже если одна или несколько ролей содержат один экземпляр**, чтобы разрешить обновление конфигурации для этих ролей.

	Если для каждой роли не определены как минимум два экземпляра, Azure не гарантирует доступность службы в течение 99,95 % времени в процессе обновления конфигурации. Дополнительные сведения см. в разделе [Соглашения об уровне обслуживания](http://azure.microsoft.com/support/legal/sla/).

	d. Нажмите **ОК** (галочку). 


<h2><a id="remoteaccess"></a>Практическое руководство. Настройка удаленного доступа к экземплярам ролей</h2>

С помощью удаленного рабочего стола обеспечивается доступ к рабочему столу экземпляра, работающего в Azure. Подключение к удаленному рабочему столу позволяет диагностировать и устранять неполадки выполняющегося приложения. Включить такие подключения можно на этапе разработки приложения, а также после его развертывания в Azure при выполнении роли.  Чтобы включить подключение к удаленному рабочему столу для выполняющейся роли на портале управления, не требуется повторное развертывание приложения.  Для проверки подлинности такого подключения можно использовать как ранее переданный, так и новый сертификат.

На странице **Настройка** облачной службы можно включить удаленный рабочий стол, изменить учетную запись и пароль локального администратора для подключения к виртуальным машинам, выбрать сертификат для проверки подлинности, а также установить срок его действия.

### Настройка удаленного доступа в файле определения службы###

Добавьте в файл определения службы (CSDEF) элементы **Import**, позволяющие импортировать модули RemoteAccess и RemoteForwarder в модель службы. В этом случае Azure автоматически добавит параметры конфигурации удаленного рабочего стола в файл конфигурации службы. Чтобы завершить настройку удаленного рабочего стола, импортируйте в Azure сертификат и определите его в файле конфигурации службы. Дополнительные сведения см. в разделе [Настройка удаленного подключения к роли в Azure][].

### Включение или изменение параметров удаленного доступа для экземпляров роли на портале управления###

1. Нажмите **Облачные службы**, выберите имя службы, а затем **Настроить**.

2. Нажмите **Удаленный**.

	 ![Cloud services remote](./media/cloud-services-how-to-configure/CloudServices_Remote.png)

	**Внимание!** Все экземпляры ролей перезапустятся после первого включения удаленного рабочего стола и нажатия "ОК" (галочки). Чтобы предотвратить перезагрузку, для этой роли должен быть установлен сертификат, используемый для шифрования пароля.

	Чтобы избежать перезагрузки, установите сертификат и вернитесь в это диалоговое окно (подробнее см. в разделе [Использование удаленного рабочего стола с ролями Azure][]). При выборе существующего сертификата во все экземпляры роли передаются обновления конфигурации.

3. В разделе **Роли** выберите нужную роль или значение **Все** для всех ролей.

4. Внесите любые из следующих изменений:

	- Чтобы включить удаленный рабочий стол, выберите флажок **Включить удаленный рабочий стол**. Если доступ к удаленному рабочему столу не требуется, снимите этот флажок.

	- Создайте учетную запись, которая будет использоваться в подключениях к удаленному рабочему столу в экземплярах роли.

	- Обновите пароль существующей учетной записи.

	- Выберите переданный сертификат для проверки подлинности (передайте сертификат через пункт **Передать** на странице **Сертификаты**) или создайте новый сертификат. 

	- Измените срок действия для конфигурации удаленного рабочего стола.

5. После завершения изменения конфигурации нажмите **ОК** (галочка).

6. Подключение к экземпляру роли:

	a. Выберите **Экземпляры**, чтобы открыть страницу **Экземпляры**.

	b. Выберите экземпляр роли, где настроен удаленный рабочий стол.

	c. Нажмите **Подключить** и следуйте инструкциям для открытия рабочего стола. 

	d. Нажмите **Открыть**, а затем **Подключить**, чтобы установить подключение к удаленному рабочему столу.

### Отключение удаленного доступа для экземпляров роли на портале управления###

1. Нажмите **Облачные службы**, выберите имя службы, а затем **Настроить**.

2. Нажмите **Удаленный**.

3. В разделе **Роли** выберите нужную роль или значение **Все** для всех ролей.

4. Снимите флажок **Включить удаленный рабочий стол**.

5. Нажмите **ОК** (галочку).

[Настройка удаленного подключения к роли в Azure]: http://msdn.microsoft.com/library/windowsazure/hh124107.aspx

[Использование удаленного рабочего стола с ролями Azure]: http://msdn.microsoft.com/library/windowsazure/gg443832.aspx
			

<!--HONumber=45--> 
