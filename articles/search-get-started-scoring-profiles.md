<properties title="Get started with scoring profiles in Azure Search" pageTitle="Приступая к работе с оценкой профилей в Поиске Azure" description="Get started with scoring profiles in Azure Search" metaKeywords="" services="" solutions="" documentationCenter="" authors="Heidist" manager="mblythe" videoId="" scriptId="" />

<tags ms.service="azure-search" ms.devlang="" ms.workload="search" ms.topic="article"  ms.tgt_pltfrm="" ms.date="10/16/2014" ms.author="heidist" />

# Приступая к работе с оценкой профилей в Поиске Azure

Профили оценки - компонент службы поиска Microsoft Azure, который позволяет настроить вычисление всех оценок поиска, влияющих на ранжирование элементов в списке результатов. Оценки профили можно представить как способ моделирования релевантности, с помощью которого оценка элементов, соответствующих стандартным критериям, увеличивается. Предположим, что приложение представляет собой сайт для бронирования отеля. Если повысить оценку поля "расположение", операции поиска, содержащие такое ключевое слово, как "Сиэтл", получат более высокие оценки для элементов, содержащих "Сиэтл" в поле "расположение". Обратите внимание, что можно использовать несколько профилей оценки или ни одного, если оценки по умолчанию достаточно для вашего приложения.

Чтобы вам проще экспериментировать с профилями оценки, можно загрузить пример приложения, использующего профили оценки для изменения порядка ранжирования результатов поиска. Пример представляет собой консольное приложение, возможно, не очень реалистичное, но полезное для обучения. 

Пример приложения демонстрирует поведения оценок с использованием вымышленных данных, musicstoreindex. Простота примера приложения позволяет легко изменять профили оценки и запросы, а затем смотреть их влияние на порядок ранжирования при выполнении программы.

<h2 id="sub-1">Предварительные требования</h2>

Пример приложения написан на языке C# в Visual Studio 2013. Если у вас нет копии Visual Studio, загрузите бесплатный выпуск [Visual Studio 2013 Express](http://www.visualstudio.com/ru-ru/products/visual-studio-express-vs.aspx).

Для работы с учебником вам потребуется подписка Azure и служба поиска Azure. Сведения о настройке службы см. в разделе [Приступая к работе со службой поиска Azure](../search-get-started/).

[WACOM.INCLUDE [Для работы с этим учебником требуется учетная запись Azure.](../includes/free-trial-note.md)]

<h2 id="sub-2">Загрузка примера приложения</h2>
Перейдите к демонстрации [профилей оценки службы поиска Azure](https://azuresearchscoringprofiles.codeplex.com/) на сайте codeplex, чтобы загрузить пример приложения, описанный в этом учебнике.

На вкладке "Исходный код" нажмите **Загрузить**, чтобы получить ZIP-архив с решением. 

 ![][12]

<h2 id="sub-3">Редактирование app.config</h2>

1. После извлечения файлов откройте решение в среде Visual Studio, чтобы изменить файл конфигурации.
1. В обозревателе решений дважды щелкните **app.config**. Этот файл указывает конечную точку службы и api-key, используемый для проверки подлинности запроса. Эти значения можно получить на портале управления.
1. Выполните вход на [Портал предварительной версии Azure](https://portal.azure.com).
1. Перейдите к панели мониторинга службы поиска Azure.
1. Щелкните плитку **Свойства**, чтобы скопировать URL-адрес службы.
1. Щелкните плитку **Ключи**, чтобы скопировать api-key.

После добавления URL-адреса и api-key в файл app.config параметры приложения должны выглядеть следующим образом:

   ![][11]


<h2 id="sub-4">Обзор приложения</h2>

Вы почти готовы к построению и запуску приложения, но сначала рассмотрим файлы JSON, используемые для создания и заполнения индекса.

В файле **Schema.JSON** определяется индекс, в том числе оценки профили, на которых в этой демонстрации сделан акцент. Обратите внимание, что схема определяет все поля, используемые в индексе, включая недоступные для поиска поля, таких как margin, которые можно использовать в профиле оценки. Синтаксис профиля оценки описан в разделе [Добавление профиля оценки в индекс службы поиска Azure](http://msdn.microsoft.com/ru-ru/library/azure/dn798928.aspx).

В файле **Data1-3.json** предоставлены данные: 246 альбомов в разных жанрах. Это сочетание фактических сведений об альбомах и исполнителях с вымышленными полями, такими как price и margin, используемыми для иллюстрации операций поиска. Файлы данных соответствуют индексу и передаются в службу поиска Azure. После передачи и индексирования данных можно выполнять запросы к ним.

**Program.cs** выполняет следующие операции:

- Открывает окно консоли.

- Подключается к службе поиска Azure, используя URL-адрес службы и api-key.

- Удаляет musicstoreindex, если он существует.

- Создает новый musicstoreindex с помощью файла schema.json.

- Заполняет индекс с помощью файлов данных.

- Запрашивает индекс с помощью четырех запросов. Обратите внимание, что профили оценки задаются в виде параметра запроса. Все запросы ищут один и тот же термин "best". Первый запрос демонстрирует оценку по умолчанию. Остальные три запроса используют профиль оценки.

<h2 id="sub-5">Создание и запуск приложения</h2>

Чтобы исключить проблемы с подключением или ссылками на сборки, постройте и запустите приложение и проверьте, что оно работает нормально. Вы должны увидеть консольное приложение, открывшееся в фоновом режиме. Все четыре запросы выполняются последовательно без приостановки. Во многих системах вся программа выполняется в течение 15 секунд. Если консольное приложение отображает сообщение "Завершено. Нажмите клавишу ВВОД для продолжения", то программа выполнена успешно. 

Для сравнения запросов можно выделить и скопировать и вставить результаты запросов из консоли и вставить их в файл Excel. 

На следующем рисунке результаты первых трех запросов показаны бок о бок. Все запросы используют один термин, "best", который входит в названия многих альбомов.

   ![][10]

Первый запрос использует оценку по умолчанию. Поскольку термин есть только в названиях альбомов, а другие критерии не указаны, элементы с термином "best" возвращаются в том порядке, в котором их находит служба поиска. 

Второй запрос использует оценку профиля, но обратите внимание, что он не оказывает никакого влияния. Результаты идентичны результатам первого запроса. Это вызвано тем, что профиль оценки продвигает поле "genre", не относящееся к запросу. Термин "best" не существует в полях "genre" какого-либо документа. Так как профиль оценки не оказывает влияния, результаты будут такими же, как у оценки по умолчанию.  

Третий запрос - первое свидетельство влияния профиля оценки. Термин поиска - по-прежнему "best", поэтому мы работаем с тем же набором альбомов, но поскольку профиль оценки предоставляет дополнительные критерии, которые продвигают поля "rating" и "last-updated", некоторые элементы указаны в списке выше.

На следующем рисунке показан запрос четвертый, заключительный запрос, с продвинутым полем "margin". Поле "margin" недоступно для поиска и не может быть возвращено в результатах. Значение margin было вручную добавлено в электронную таблицу, чтобы проиллюстрировать тот факт, что элементы с большей маржей отображаются выше в списке результатов. 

   ![][9]

Вы уже поэкспериментировали с профилями оценки, теперь попробуйте изменить программу для использования другого синтаксиса запроса, профиля оценки или более разнообразных данных. По ссылкам в следующем разделе представлена дополнительная информация.

<h2 id="next-steps">Дальнейшие действия</h2>

Дополнительные сведения о профилях оценки. Дополнительные сведения см. в разделе [Добавление профиля оценки в индекс службы поиска Azure](http://msdn.microsoft.com/ru-ru/library/azure/dn798928.aspx).

Дополнительные сведения о синтаксисе и параметрах поисковых запросов. Дополнительные сведения см. в разделе [Поиск документов (API REST службы поиска Azure)](http://msdn.microsoft.com/ru-ru/library/azure/dn798927.aspx).

Хотите сделать шаг назад и узнать больше о создании индексов? [Посмотрите это видео](http://channel9.msdn.com/Shows/Cloud+Cover/Cloud-Cover-152-Azure-Search-with-Liam-Cavanagh).

<!--Anchors-->
[Предварительные требования]: #sub-1
[Загрузка примера приложения]: #sub-2
[Редактирование app.config]: #sub-3
[Обзор приложения]: #sub-4
[Создание и запуск приложения]: #sub-5
[Дальнейшие действия]: #next-steps

<!--Image references-->
[12]: ./media/search-get-started-scoring-profiles/AzureSearch_CodeplexDownload.PNG
[11]: ./media/search-get-started-scoring-profiles/AzureSearch_Scoring_AppConfig.PNG
[10]: ./media/search-get-started-scoring-profiles/AzureSearch_XLSX1.PNG
[9]: ./media/search-get-started-scoring-profiles/AzureSearch_XLSX2.PNG
