---
title: Известные проблемы в Azure Monitor для виртуальных машин (предварительная версия) | Документация Майкрософт
description: Azure Monitor для виртуальных машин — это решение в Azure, которое отслеживает работоспособность и производительность ОС виртуальных машин Azure, автоматически обнаруживает компоненты приложений и их зависимости от других ресурсов, а также строит схему каналов связи между ними. В этой статье рассматриваются известные проблемы с этим решением.
services: azure-monitor
documentationcenter: ''
author: mgoedtel
manager: carmonm
editor: tysonn
ms.assetid: ''
ms.service: azure-monitor
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 10/25/2018
ms.author: magoedte
ms.openlocfilehash: eba9e26f12fd9e1862727adec4f8c8f594e8f659
ms.sourcegitcommit: 9d7391e11d69af521a112ca886488caff5808ad6
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/25/2018
ms.locfileid: "50091680"
---
# <a name="known-issues-with-azure-monitor-for-vms-preview"></a>Известные проблемы в Azure Monitor для виртуальных машин (предварительная версия)

Ниже перечислены известные проблемы с функцией проверки работоспособности решения "Azure Monitor для виртуальных машин":

- Функция работоспособности включена для всех виртуальных машин, которые подключены к рабочему пространству Log Analytics, даже если этот процесс запускался и выполнялся с отдельной виртуальной машины.
- Если виртуальная машина Azure больше не существует, из-за того что она была перемещена или удалена, она будет отображаться в представлении списка виртуальных машин в течение трех-семи дней. Кроме того, если щелкнуть строку состояния такой виртуальной машины, появится представление **диагностики работоспособности** для нее, которое затем переходит в цикл загрузки. Если выбрать имя удаленной виртуальной машины, откроется колонка с сообщением об удалении виртуальной машины.
- В этом выпуске невозможно изменить период времени и частоту проверки работоспособности. 
- Критерии работоспособности нельзя отключить. 
- После подключения решения может потребоваться время, прежде чем данные начнут отображаться в разделе "Azure Monitor -> Виртуальные машины -> Работоспособность" или на странице "Аналитика", которую можно открыть из колонки ресурсов виртуальной машины.
- Интерфейс диагностики работоспособности обновляется быстрее, чем любое другое представление, поэтому при переключении между представлениями могут возникать задержки отображения информации.  
- Сводка оповещений, приведенная в представлении работоспособности решения "Azure Monitor для виртуальных машин", касается оповещений, вызванных проблемами работоспособности, которые были обнаружены на отслеживаемых виртуальных машинах Azure.
- На странице представления **списка оповещений** на одной виртуальной машине и в Azure Monitor отображаются оповещения, состояние монитора которых имело значение срабатывания за последние 30 дней.  Эти представления не настраиваются. Однако, если щелкнуть сводку, откроется страница представления **списка оповещений**, где можно изменить значение фильтра как для состояния монитора, так и для диапазона времени.
- Мы рекомендуем не изменять фильтры **типа ресурса**, **ресурса** и **мониторинга службы** на странице представления **списка оповещений**, так как эти фильтры настроены специально для решения (в этом представлении списка отображаются некоторые дополнительные поля по сравнению с представлением, которое открывается через колонку Azure Monitor).    
- На виртуальных машинах Linux в представлении **Диагностика работоспособности** указано полное доменное имя виртуальной машины вместо пользовательского.
- В результате завершения работы виртуальных машин некоторые критерии работоспособности обновляются до критического состояния, а другие — до исправного состояния, при этом общее состояние виртуальной машины указано как критическое.
- Степень серьезности оповещения о работоспособности нельзя изменить. Его можно только включить или отключить.  Кроме того, некоторые степени серьезности обновляются на основе состояния критериев работоспособности.
- Изменение любого параметра экземпляра критерия работоспособности приведет к изменению этого же параметра во всех экземплярах критериев работоспособности того же типа на виртуальной машине. Например, если изменяется пороговое значение экземпляра критерия работоспособности диска, соответствующего логическому диску C, этот порог будет применяться ко всем другим логическим дискам, обнаруженным и контролируемым для этой же виртуальной машины.   
- Пороговые значения для следующих критериев работоспособности виртуальной машины Windows невозможно изменить, так как для работоспособности виртуальной машины уже настроено состояние **Выполняется** или **Доступно**. При запросе из [API мониторинга рабочей нагрузки](https://github.com/Azure/azure-rest-api-specs/tree/master/specification/workloadmonitor/resource-manager) для состояния работоспособности отображается параметр *comparisonOperator* со значением **LessThan** или **GreaterThan** и с *пороговым* значением **4** для службы или объекта при таких ошибках:
   - Служба "Работоспособность служб" DNS-клиента не запущена. 
   - Служба "Работоспособность служб" DHCP-клиента не запущена. 
   - Служба "Работоспособность служб" RPC не запущена. 
   - Служба "Работоспособность служб" брандмауэра Windows не запущена.
   - Служба "Работоспособность служб" журнала событий Windows не запущена. 
   - Служба "Работоспособность служб" сервера не запущена. 
   - Служба "Работоспособность служб" удаленного управления Windows не запущена. 
   - Ошибка или повреждение файловой системы — логический диск недоступен.

- Пороговые значения для следующих критериев работоспособности Linux невозможно изменить, так как для их состояния работоспособности уже установлено значение **true**.  Для состояния работоспособности отображается параметр *compareOperator* со значением **LessThan** и *пороговым* значением **1** при запросе из API мониторинга рабочей нагрузки для объекта в зависимости от его контекста:
   - Состояние логического диска — логический диск работает в автономном режиме или недоступен.
   - Состояние диска — диск работает в автономном режиме или недоступен.
   - Состояние сетевого адаптера — сетевой адаптер отключен.  

- Для критерия работоспособности **общего использования ЦП** в Windows отображается пороговое значение **не равное 4** на портале и при запросе из API мониторинга рабочей нагрузки, когда использование ЦП больше 95 %, а длина очереди системы больше 15. В этом выпуске нельзя изменить данный критерий работоспособности.  
- Изменения конфигурации, такие как обновление порогового значения, вступают в силу через 30 минут, даже несмотря на мгновенное обновление портала или API мониторинга рабочей нагрузки.  
- Критерии работоспособности уровня отдельного процессора и логического процессора в Windows недоступны. Для виртуальных машин Windows доступно только **общее использование ЦП**.  
- Правила генерации оповещений, определенные для каждого критерия работоспособности, не отображаются на портале Azure. Они настраиваются только из [API мониторинга рабочей нагрузки](https://github.com/Azure/azure-rest-api-specs/tree/master/specification/workloadmonitor/resource-manager), чтобы включить или отключить правило генерации оповещений о работоспособности.  
- На портале Azure невозможно присвоить [группы действий Azure Monitor](../monitoring-and-diagnostics/monitoring-action-groups.md) для оповещений о работоспособности. Необходимо использовать API параметров уведомлений для настройки группы действий, которая будет запускаться всякий раз, когда запускается оповещение о работоспособности. В настоящее время группы действий можно назначать виртуальной машине, чтобы все *оповещения о работоспособности* для этой виртуальной машины активировали одну и ту же группу действий. Для каждого правила генерации оповещений о работоспособности не предусмотрены отдельные группы действий, такие как для традиционных оповещений Azure. Кроме того, при активации оповещений о работоспособности поддерживаются только группы действий, настроенные для уведомления путем отправки электронного сообщения или SMS. 

## <a name="next-steps"></a>Дополнительная информация
Сведения о методах активации мониторинга для виртуальных машин и соответствующих требованиях см. в статье [Как подключить Azure Monitor для виртуальных машин](monitoring-vminsights-onboard.md).