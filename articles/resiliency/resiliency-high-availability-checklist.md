<properties
   pageTitle="Контрольный список для обеспечения высокой доступности | Microsoft Azure"
   description="Краткий контрольный список настроек и действий, которые помогут повысить доступность приложений с помощью Azure."
   services=""
   documentationCenter="na"
   authors="adamglick"
   manager="saladki"
   editor=""/>

<tags
   ms.service="resiliency"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="08/18/2016"
   ms.author="aglick"/>

#Контрольный список для обеспечения высокой доступности
Одной из замечательных преимуществ Azure является возможность повышения доступности (и масштабируемости) приложений с помощью облака. Здесь приведен контрольный список, с помощью которого вы сможете разобраться с основными компонентами инфраструктуры и обеспечить устойчивость приложений, а также эффективно использовать упомянутые возможности.

>[AZURE.NOTE] Большинство приведенных ниже предложений — это действия, которые можно выполнить в любое время в приложении. Поэтому их также можно назвать действиями по исправлению. Наилучшее долгосрочное решение часто подразумевает разработку приложений, предназначенных для облака. Контрольный список для этих областей, ориентированных на разработку, см. в статье [Контрольный список для обеспечения доступности](../best-practices-availability-checklist.md).

###Используете ли вы диспетчер трафика для своих ресурсов?
С помощью диспетчера трафика можно маршрутизировать интернет-трафик в регионах Azure или локальных расположениях и расположениях Azure. Необходимость в этом может возникнуть по ряду причин, включая задержку и доступность. Дополнительные сведения о том, как с помощью диспетчера трафика повысить устойчивость и распределить трафик по нескольким регионам, см. в статье [Running VMs in multiple datacenters on Azure for high availability](../guidance/guidance-compute-multiple-datacenters.md) (Запуск виртуальных машин в нескольких центрах обработки данных Azure для обеспечения высокой доступности).

__Что произойдет, если диспетчер трафика не используется?__ Если вы не используете диспетчер трафика для приложения, вы можете использовать ресурсы только в пределах одного региона. Это ограничивает масштабируемость, увеличивает задержку для пользователей, которые находятся вдали от выбранного вами региона, и снижает уровень защиты в случае нарушения работы служб на уровне региона.

###Вы когда-либо избегали использования одной виртуальной машины для роли?
При разработке следует избегать единых точек отказа. Это важно при разработке всех служб (как локально, так и в облаке), но особенно эффективно в облаке, так как при этом можно увеличить масштабируемость и устойчивость, используя горизонтальное масштабирование (добавление виртуальных машин) вместо вертикального (использование более мощной виртуальной машины). Дополнительные сведения о разработке масштабируемых приложений см. в статье [Обеспечение высокой доступности для приложений на платформе Microsoft Azure](resiliency-high-availability-azure-applications.md).

__Что происходит при наличии одной виртуальной машины для роли?__ Единственная виртуальная машина является единственной точкой отказа, что не подходит для [соглашения об уровне обслуживания виртуальных машин Azure](https://azure.microsoft.com/support/legal/sla/virtual-machines/v1_0/). В лучшем случае приложение будет работать нормально, но такая конфигурация не предусматривает устойчивость и не подходит для соглашения об уровне обслуживания виртуальных машин Azure, а наличие единой точки отказа увеличивает вероятность простоя в случае сбоя.

###Используете ли вы балансировщик нагрузки для виртуальных машин вашего приложения, которые имеют выход в Интернет?
Балансировщики нагрузки позволяют распределить входящий трафик вашего приложения между произвольным количеством машин. Вы можете добавлять машины в балансировщик нагрузки или удалять их из него в любое время, что идеально подходит для виртуальных машин (а также для автоматического масштабирования с помощью наборов масштабирования виртуальных машин) и дает возможность легко справиться с увеличением трафика или сбоями виртуальных машин. Дополнительные сведения о балансировщиках нагрузки см. в [обзоре балансировщика нагрузки Azure](../load-balancer/load-balancer-overview.md) и статье [Running multiple VMs on Azure for scalability and availability](../guidance/guidance-compute-multi-vm.md) (Запуск нескольких виртуальных машин в Azure для обеспечения масштабируемости и доступности).

__Что произойдет, если не использовать балансировщик нагрузки для виртуальных машин вашего приложения, которые имеют выход в Интернет?__ Без балансировщика нагрузки вы не сможете выполнять горизонтальное масштабирование (добавлять дополнительные виртуальные машины). Вам будет доступно только вертикальное масштабирование (увеличение размера виртуальной машины с выходом в Интернет). Вы также столкнетесь с проблемой единой точки отказа. Кроме того, вам понадобится написать код DNS, который позволит обнаружить потерю машины с выходом в Интернет и повторно сопоставить запись DNS с новой машиной вместо предыдущей.

###Используете ли вы группы доступности для приложений и веб-серверов без отслеживания состояния?
Если включить виртуальные машины в группу доступности в рамках одного уровня приложения, они будут соответствовать условиям соглашения об уровне обслуживания виртуальных машин Azure. В рамках группы доступности виртуальные машины размещаются в разные домены обновления (т. е. на разные хост-компьютеры, исправления на которых устанавливаются в разное время) и домены сбоя (т. е. на хост-компьютеры, которые используют общий источник питания и сетевой коммутатор). Если ваши виртуальные машины не входят в группу доступности, они могут находиться на одном хост-компьютере, а значит может существовать единая точка отказа, о которой вам неизвестно. Дополнительные сведения о повышении уровня доступности виртуальных машин с помощью групп доступности см. в статье [Управление доступностью виртуальных машин](../virtual-machines/virtual-machines-windows-manage-availability.md).

__Что произойдет, если не использовать группы доступности для приложений и веб-серверов без отслеживания состояния?__ Если вы не будете использовать группу доступности, вы не сможете воспользоваться преимуществами соглашения об уровне обслуживания для виртуальных машин Azure. Это также означает, что все машины на этом уровне приложения могут перейти в автономный режим во время обновления на хост-компьютере (компьютер, на котором размещены используемые виртуальные машины) или в случае общего сбоя оборудования.

###Используете ли вы наборы масштабирования виртуальных машин для приложений и веб-серверов без отслеживания состояния?
В хорошей масштабируемой и устойчивой архитектуре используется набор масштабирования виртуальных машин, что дает возможность увеличивать или уменьшать количество машин на уровне приложения (например, на веб-уровне). С помощью этого набора можно определить, как выполняется масштабирование на уровне приложений (добавление или удаление серверов в зависимости от выбранных критериев). Дополнительные сведения об использовании наборов масштабирования виртуальных машин Azure для повышения устойчивости к всплескам трафика см. в [этом обзоре](../virtual-machine-scale-sets/virtual-machine-scale-sets-overview.md).

__Что произойдет, если не использовать набор масштабирования виртуальных машин для приложений и веб-серверов без отслеживания состояния?__ Без набора масштабирования виртуальных машин ограничиваются возможности масштабирования и оптимизации использования ресурсов. В архитектуре, где отсутствует такой набор, есть верхний предел масштабирования, который следует обрабатывать с помощью дополнительного кода (или вручную). При этом приложение не сможет добавлять и удалять виртуальные машины (независимо от масштаба) для обработки значительных пиков трафика (например, если выполняется перемещение между средами или сайт, приложение или продукт становится популярным).

###Используете ли вы хранилище класса Premium и отдельные учетные записи хранения для каждой виртуальной машины?
Рекомендуется использовать хранилище класса Premium для рабочих виртуальных машин. Кроме того, необходимо использовать отдельную учетную запись хранения для каждой виртуальной машины. (Это относится к небольшим развертываниям. При более крупных развертываниях можно повторно использовать учетные записи хранения для нескольких машин. При этом понадобится выполнять балансировку, чтобы виртуальные машины были равномерно распределены между доменами обновления и уровнями приложения.) Дополнительные сведения о масштабируемости и производительности служб хранилища Azure см. в статье [Производительность хранилища Microsoft Azure и контрольный список масштабируемости](../storage/storage-performance-checklist.md).

__Что произойдет, если не использовать отдельные учетные записи хранения для каждой виртуальной машины?__ Учетная запись хранения, как и многие другие ресурсы, является единой точкой отказа. Несмотря на то, что в службе хранилища Azure есть множество средств защиты и функций повышения устойчивости, единая точка отказа всегда выступает недостатком. Например, если нарушены права доступа к этой учетной записи, достигнут предельный размер хранилища или [максимальное количество операций ввода-вывода](../azure-subscription-service-limits.md#virtual-machine-disk-limits), это повлияет на все виртуальные машины, в которых используется эта учетная запись. Кроме того, при возникновении перебоев в работе службы, которые влияют на метку хранилища, а также эту учетную запись, они могут повлиять и на несколько виртуальных машин.

###Используете ли вы балансировщик нагрузки или очередь между всеми уровнями приложения?
Благодаря использованию балансировщиков нагрузки или очередей между всеми уровнями приложения можно легко масштабировать каждый уровень приложения независимо от других. Следует выбрать одну из этих технологий в зависимости от требований к задержке, сложности и распределению (т. е. степени распределения приложения). В целом очереди, как правило, характеризуются более длительными задержками и повышенной сложностью, но обеспечивают большую устойчивость и позволяют распределять приложения в больших областях (например, в регионах). Дополнительные сведения об использовании внутренних балансировщиков нагрузки или очередей см. в статьях [Обзор внутренней подсистемы балансировки нагрузки](../load-balancer/load-balancer-internal-overview.md) и [Очереди Azure и очереди служебной шины: сходства и различия](../service-bus/service-bus-azure-and-service-bus-queues-compared-contrasted.md).

__Что произойдет, если не использовать балансировщик нагрузки или очередь между всеми уровнями приложения?__ Без использования балансировщика нагрузки или очереди между всеми уровнями приложения трудно масштабировать приложения горизонтально и вертикально, а также распределять нагрузку между несколькими виртуальными машинами. Если этого не делать, может возникнуть избыточная или недостаточная подготовка ресурсов. Кроме того, также возрастает риск простоя или снижения производительности при возникновении непредвиденных изменений трафика или системных сбоев.
 
###Используется ли в ваших базах данных SQL активная георепликация? 
Активная георепликация позволяет настроить до 4 доступных для чтения баз данных-получателей в одном или в разных регионах. Базы данных-получатели могут создаваться при нарушениях работы служб или невозможности подключения к базе данных-источнику. Дополнительные сведения об активной георепликации базы данных SQL см. в [этой статье](../sql-database/sql-database-geo-replication-overview.md).
 
 __Что произойдет, если не использовать активную георепликацию в базах данных SQL?__ Без активной георепликации при переходе базы данных-источника в автономный режим (в рамках планового обслуживания, нарушений в работе службы, сбоя оборудования и т. д.) база данных вашего приложения будут отключена до тех пор, пока база данных-источник не перейдет обратно в оперативный режим в работоспособном состоянии.
 
###Используете ли вы кэш (кэш Redis для Azure) в базах данных?
Если в приложении есть высокий уровень нагрузки на базу данных и при этом большинство вызовов базы данных — операции чтения, можно повысить производительность приложения и снизить нагрузку на базу данных, реализовав уровень кэширования в базе данных, что позволит разгрузить эти операции чтения. Таким образом, чтобы увеличить производительность приложения и уменьшить нагрузку на базу данных (тем самым увеличив поддерживаемый масштаб), необходимо внедрить в базу данных уровень кэширования. Дополнительные сведения о кэше Redis для Azure см. в [руководстве по кэшированию](../best-practices-caching.md).
 
 __Что произойдет, если не использовать кэш в базе данных?__ Если компьютер с базой данных обладает достаточной мощностью для обработки нагрузки трафика, приложение будет отвечать в обычном режиме, но при низкой нагрузке вам, возможно, придется платить за этот компьютер больше, чем необходимо. Если компьютер с базой данных не обладает достаточной мощностью для обработки нагрузки, то в приложении будет наблюдаться снижение производительности (задержки, время ожидания и возможные простои службы).
 
###Обращаетесь ли вы в службу поддержки Microsoft Azure, если ожидается крупномасштабная нагрузка?
Служба поддержки Azure может помочь увеличить ограничения службы, что позволит справиться с большими объемами трафика (например, при запуске нового продукта или в праздничные дни). В службе поддержки Azure вы можете обратиться к специалистам, которые вместе с менеджером по работе с клиентами Майкрософт могут просмотреть вашу архитектуру, чтобы помочь найти наилучшее решение для удовлетворения потребностей крупномасштабной нагрузки. Дополнительные сведения о том, как обратиться в службу поддержки Azure, см. на странице [Часто задаваемые вопросы о поддержке Azure](https://azure.microsoft.com/support/faq/).

__Что произойдет, если не обратиться в службу поддержки Azure, если ожидается большое увеличение масштаба?__ Если не обратиться в службу поддержки, когда ожидается большой объем трафика, вы рискуете превысить определенные [ограничения служб Azure](../azure-subscription-service-limits.md). Это приведет к снижению производительности (или, что еще хуже, к простою) во время работы. Обзор архитектуры и обращение в службу поддержки до возникновения всплесков позволяют снизить эти риски.

###Используете ли вы сеть доставки содержимого (Azure CDN) в больших двоичных объектах веб-хранилища и статичных ресурсах?
CDN позволяет снизить нагрузку на серверы путем кэширования содержимого в расположениях POP CDN или граничных расположениях, распределенных по всему миру. Эту сеть можно использовать, чтобы уменьшить задержку, снизить нагрузку на сервер и увеличить масштабируемость, а также как часть стратегии защиты от атак в виде отказа в обслуживании. Дополнительные сведения об использовании Azure CDN для повышения устойчивости и уменьшения задержки см. в [обзоре сети доставки содержимого (CDN) Azure](../cdn/cdn-overview.md).

__Что произойдет, если CDN не используется?__ Если не использовать CDN, трафик клиента будет поступать непосредственно к ресурсам. Это приведет к высоким нагрузкам на серверы, что уменьшит степень их масштабируемости. Кроме того, клиенты могут столкнуться с более длительными задержками. Сети CDN, напротив, используют расположения по всему миру, которые находятся максимально близко к вашим клиентам.

##Дальнейшие действия:
Дополнительные сведения о создании приложений для обеспечения высокой доступности см. в статье [Обеспечение высокой доступности для приложений на платформе Microsoft Azure](resiliency-high-availability-azure-applications.md).

<!---HONumber=AcomDC_0824_2016-->