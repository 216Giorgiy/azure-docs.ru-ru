---
title: Настройка ASC для Интернета вещей агент предварительной версии | Документация Майкрософт
description: Сведения о настройке агентов для использования с ASC для Интернета вещей.
services: ascforiot
documentationcenter: na
author: mlottner
manager: barbkess
editor: ''
ms.assetid: f95c445a-4f0d-4198-9c6c-d01446473bd0
ms.service: ascforiot
ms.devlang: na
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 03/26/2019
ms.author: mlottner
ms.openlocfilehash: 3ce6744a3a7d71f358dccb3dc29c470f3a376240
ms.sourcegitcommit: c63fe69fd624752d04661f56d52ad9d8693e9d56
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2019
ms.locfileid: "58580708"
---
# <a name="tutorial-configure-security-agents"></a>Руководство по Настройка агентов безопасности

> [!IMPORTANT]
> ASC для Интернета вещей находится в общедоступной предварительной версии.
> Эта предварительная версия предоставляется без соглашения об уровне обслуживания и не рекомендуется для производственных рабочих нагрузок. Некоторые функции могут не поддерживаться или их возможности могут быть ограничены. Дополнительные сведения см. в статье [Дополнительные условия использования предварительных выпусков Microsoft Azure](https://azure.microsoft.com/support/legal/preview-supplemental-terms/).

В этой статье описывается ASC для агента безопасности Интернета вещей, как для изменения их настройка ASC для агентов безопасности Интернета вещей.

> [!div class="checklist"]
> * Настройка агентов безопасности
> * Изменить поведение агента, изменив свойства двойника
> * Обнаружения конфигурации по умолчанию

## <a name="agents"></a>Агенты

ASC для агентов безопасности Интернета вещей собирают данные с устройств Интернета вещей и выполните действия по обеспечению безопасности для устранения уязвимостей, обнаруженных. Конфигурация агента безопасности является управляемой, с помощью набора свойств двойника модуля, которые можно настраивать. Как правило дополнительный обновления для этих свойств происходят редко.  

ASC для Интернета вещей в безопасности агента двойника конфигурации объекта является объектом формат .json. Объект конфигурации — это набор управляемой свойства, которые можно определить для управления поведением агента. 

Эти конфигурации помогают настроить агент для каждого сценария, который требуется. Например автоматически исключая некоторые события или сохранением энергопотребление к минимальному уровню возможны путем настройки этих свойств.  

Использовать для настройки агента безопасности Интернета вещей ASC [схемы](https://github.com/azure/asc-for-iot-schemas/security/module/twin) для внесения изменений.  

## <a name="configuration-objects"></a>Объекты конфигурации 

Каждый ASC для агента безопасности Интернета вещей, связанных с свойство находится в объекте конфигурации агента, в разделе требуемых свойств из **azureiotsecurity** модуля. 

Чтобы изменить конфигурацию, создания и изменения этого объекта внутри **azureiotsecurity** идентификатор двойника модуля. 

Если объект конфигурации агента не существует в **azureiotsecurity** двойник модуля, все значения свойств агента безопасности имеют значение по умолчанию. 

```json
"desired": {
  "azureiot*com^securityAgentConfiguration^1*0*0": {
  } 
}
```

Убедитесь, что для проверки изменений конфигурации агента от этого, [схемы](https://aka.ms/iot-security-github-module-schema).
Агент не будет запущен, если объект конфигурации не соответствуют схеме.

## <a name="configuration-schema-and-validation"></a>Схема конфигурации и проверки 

Не забудьте проверить конфигурацию агента от этого [схемы](https://github.com/Azure/asc-for-iot/schema/security_module_twin). Агент не будет запущен, если объект конфигурации не соответствуют схеме.

 
Если во время работы агента, объект конфигурации меняется на недопустимых configuration (конфигурация не соответствует схеме), агент будет игнорировать Недопустимая конфигурация и будут продолжать использовать текущую конфигурацию. 

## <a name="editing-a-property"></a>Изменение свойства 

Все пользовательские свойства должны быть установлены внутри объекта конфигурации агента в **azureiotsecurity** двойник модуля.
Чтобы использовать значение свойства по умолчанию, удалите свойство из объекта конфигурации.

### <a name="setting-a-property"></a>Задание свойства

1. В центре Интернета вещей найдите и выберите устройство, которое вы хотите изменить.

1. Щелкните на вашем устройстве, а затем на **azureiotsecurity** модуля.

1. Щелкните **Двойник модуля Identity**.

1. Измените требуемые свойства модуля безопасности.
   
   Например чтобы настроить события соединения с высоким уровнем приоритета и сбор событий с высоким приоритетом каждые 7 минут, используйте следующую конфигурацию.
   
   ```json
    "desired": {
      "azureiot*com^securityAgentConfiguration^1*0*0": {
        "highPriorityMessageFrequency": "PT7M",    
        "eventPriorityConnectionCreate": "High" 
      } 
    }, 
    ```

1. Выберите команду **Сохранить**.

### <a name="using-a-default-value"></a>Значения по умолчанию

Чтобы использовать значение свойства по умолчанию, удалите свойство из объекта конфигурации.

## <a name="default-properties"></a>Свойства по умолчанию 

Следующая таблица содержит управляемой свойства ASC агентов безопасности Интернета вещей.

Значения по умолчанию доступны в схеме правильное [Github](https://aka.ms/iot-security-module-default).

| ИМЯ| Status | Допустимые значения| Значения по умолчанию| ОПИСАНИЕ |
|----------|------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------|---------------|
|highPriorityMessageFrequency|Требуется: false |Допустимые значения:  Длительность в формате ISO 8601 |Значение по умолчанию: PT7M |Максимальное время, прежде чем сообщения с высоким приоритетом отправляются.|
|lowPriorityMessageFrequency |Требуется: false|Допустимые значения:  Длительность в формате ISO 8601 |Значение по умолчанию: PT5H |Максимальное время до сообщений с низким приоритетом отправляются.| 
|snapshotFrequency |Требовать: false|Допустимые значения: длительность в формате ISO 8601 |Значение по умолчанию PT13H |Интервал времени для создания моментальных снимков состояния устройства.| 
|maxLocalCacheSizeInBytes |Требуется: false |Допустимые значения:  |Значение по умолчанию: 2560000, размер которых превышает 8192 | Максимальное дисковое пространство (в байтах) для кэша сообщений агента. Максимальный объем дискового пространства, выделяемого для хранения сообщений на устройстве, перед отправкой.| 
|maxMessageSizeInBytes |Требуется: false |Допустимые значения:  Положительное число, размер которых превышает 8192, меньше, чем 262144 |Значение по умолчанию: 204800 |Максимальный допустимый размер агент облака сообщение. Этот параметр определяет максимальный объем данных, отправляемых в каждое сообщение. |
|eventPriority${EventName} |Требуется: false |Допустимые значения:  Высокое, низкое отключено |Значения по умолчанию: |Приоритет каждого агента создается событие | 

### <a name="supported-security-events"></a>События безопасности, поддерживаемых

|Имя события| PropertyName | По умолчанию| События моментального снимка| Сведения о состоянии  |
|----------|------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------|---------------|
|Событие диагностики|eventPriorityDiagnostic| Отключить| Ложь| События диагностики с агентом. Это событие можно используйте для подробного ведения журналов.| 
|Ошибка конфигурации |eventPriorityConfigurationError |Низкий |Ложь |Агенту не удалось проанализировать конфигурацию. Проверьте конфигурацию к схеме.| 
|Удаленные события статистики |eventPriorityDroppedEventsStatistics |Низкий |Истина|Статистика событий с агентом. |
|Статистика сообщений|eventPriorityMessageStatistics |Низкий |Истина |Статистика сообщений с агентом. |
|Подключенных устройств|eventPriorityConnectedHardware |Низкий |Истина |Моментальных снимков оборудования, подключенных к устройству.|
|Ожидание передачи данных через порты|eventPriorityListeningPorts |Высокий |Истина |Моментальный снимок все открытые порты прослушивания на устройстве.|
|Создание процесса |eventPriorityProcessCreate |Низкий |Ложь |Создание на устройстве процесса аудита.|
|Этот процесс прерван|eventPriorityProcessTerminate |Низкий |Ложь |Завершению на устройстве процесса аудита.| 
|Сведения о системе |eventPrioritySystemInformation |Низкий |Истина |Моментальный снимок сведений о системе (например: ОС или ЦП).| 
|Локальные пользователи| eventPriorityLocalUsers |Высокий |Истина|Моментальный снимок зарегистрированных локальных пользователей в системе. |
|Вход|  eventPriorityLogin |Высокий|Ложь|Аудит событий входа на устройство (локальные и удаленные имена входа).|
|Создание подключения |eventPriorityConnectionCreate|Низкий|Ложь|Аудит подключений TCP, созданных для и от устройства. |
|Настройка брандмауэра| eventPriorityFirewallConfiguration|Низкий|Истина|Снимок конфигурации устройства брандмауэра (правила брандмауэра). |
|Базовых показателей операционной системы| eventPriorityOSBaseline| Низкий|Истина|Проверьте моментальный снимок базовых показателей операционной системы устройства.|
 

## <a name="next-steps"></a>Дальнейшие действия

- [Общие сведения о ASC для Интернета вещей рекомендации](concept-recommendations.md)
- [Изучение ASC для Интернета вещей оповещения](concept-security-alerts.md)
- [Доступ к данным необработанной безопасности](how-to-security-data-access.md)