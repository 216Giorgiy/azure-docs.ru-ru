<properties
   pageTitle="Обзор сетевой безопасности Azure | Microsoft Azure"
   description=" Эта статья содержит удобное для восприятия описание возможностей Microsoft Azure в области сетевой безопасности. Здесь представлены основные пояснения по ключевым понятиям и требованиям сетевой безопасности, а также сведения о возможностях Azure в каждой из этих областей. "
   services="security"
   documentationCenter="na"
   authors="TomShinder"
   manager="MBaldwin"
   editor="TomSh"/>

<tags
   ms.service="security"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="08/09/2016"
   ms.author="terrylan"/>

# Обзор сетевой безопасности Azure

Microsoft Azure включает в себя надежную сетевую инфраструктуру для удовлетворения требований к взаимодействию приложений и служб. Сетевое взаимодействие возможно между ресурсами в Azure, между локальными и размещенными в Azure ресурсами, а также между Интернетом и службой Azure.

Эта статья помогает легко разобраться в возможностях Microsoft Azure, связанных с сетевой безопасностью. Здесь представлены основные пояснения по ключевым понятиям и требованиям сетевой безопасности. Кроме того, приведены сведения о возможностях Azure в каждой из этих областей. Имеются многочисленные ссылки на другие материалы, позволяющие глубже изучить интересующие вас вопросы.

В этой статье с обзором сетевой безопасности Azure основное внимание направлено на следующее.

- Сети Azure
- Контроль доступа к сети
- Безопасный удаленный доступ и межорганизационное взаимодействие
- Доступность
- Ведение журналов
- Разрешение имен
- Архитектура демилитаризованной зоны
- Центр безопасности Azure

## Сеть Azure

Виртуальным машинам требуется осуществлять взаимодействие по сети. Для удовлетворения этого требования Azure требует подключения виртуальных машин к виртуальной сети Azure. Виртуальная сеть Azure — это логическая конструкция, созданная поверх структуры физических сетей Azure. Каждая логическая виртуальная сеть Azure изолирована от всех других виртуальных сетей Azure. Это помогает гарантировать, что сетевой трафик из ваших развертываний недоступен другим клиентам Microsoft Azure.

Подробнее.

- [Обзор виртуальной сети](../virtual-network/virtual-networks-overview.md)

## Контроль доступа к сети
Контроль доступа к сети — это процесс подключения с определенных устройств и из определенных подсетей в виртуальной сети Azure. Цель контроля доступа к сети — убедиться, что виртуальные машины и службы доступны только надлежащим пользователям и устройствам. Механизмы контроля доступа основаны на принятии решений о разрешении или запрете подключений к виртуальной машине и службе либо из них.

Azure поддерживает несколько типов контроля доступа к сети. В частности, описаны такие возможности:

- Контроль сетевого уровня
- Управление маршрутами и принудительное туннелирование
- Виртуальные устройства сетевой безопасности

### Контроль сетевого уровня
Любому безопасному развертыванию требуется определенный уровень контроля доступа к сети. Цель контроля доступа к сети заключается в том, чтобы убедиться, что виртуальные машины и запущенные на них сетевые службы могут взаимодействовать только с другими сетевыми устройствами, к которым им разрешен доступ, а все другие попытки подключения блокируются.

Если требуется контроль доступа на базовом уровне сети (на основе IP-адреса и протоколов TCP или UDP), можно использовать группы безопасности сети. Группа безопасности сети (NSG) — это собой основной брандмауэр для фильтрации пакетов с отслеживанием состояния, который позволяет контролировать доступ по [5 кортежам](https://www.techopedia.com/definition/28190/5-tuple). Группы безопасности сети не обеспечивают проверку на прикладном уровне или механизмы контроля доступа с проверкой подлинности.

Подробнее.

- [Группы сетевой безопасности](../virtual-network/virtual-networks-nsg.md)

### Управление маршрутами и принудительное туннелирование
Возможность управлять поведением при маршрутизации в виртуальных сетях Azure является крайне важной с точки зрения сетевой безопасности и контроля доступа. Если маршрутизация настроена неправильно, приложений и служб, размещенные на виртуальной машине приложения и службы могут подключаться к неразрешенным устройствам, включая устройства, принадлежащие потенциальным злоумышленникам.

Сетевые функции Azure поддерживают возможность настройки поведения маршрутизации для сетевого трафика в виртуальных сетях Azure. Это позволяет изменять записи таблицы маршрутизации по умолчанию в виртуальной сети Azure. Управление поведением при маршрутизации помогает убедиться в том, что весь трафик с определенного устройства или из определенной группы устройств входит в виртуальную сеть Azure или выходит из нее через определенное расположение.

Например, в виртуальной сети Azure можно использовать виртуальное устройство безопасности сети. Необходимо убедиться, что весь трафик в виртуальную сеть Azure и из нее проходит через это виртуальное устройство безопасности. Это можно сделать, настроив в Azure [пользовательские маршруты](../virtual-network/virtual-networks-udr-overview.md).

[Принудительное туннелирование](https://www.petri.com/azure-forced-tunneling) — это механизм, который позволяет запрещать службам инициировать подключения к устройствам в Интернете. Обратите внимание, что это отличается от приема входящих подключений и последующего ответа на них. Интерфейсные веб-серверы должны отвечать на запрос от интернет-узлов, поэтому трафику из Интернета разрешено поступать на такие веб-серверы, а им в свою очередь разрешено отвечать.

Однако интерфейсный веб-сервер не должен инициировать исходящий запрос. Такие запросы могут представлять угрозу безопасности, так как эти подключения могут использоваться для скачивания вредоносных программ. Даже если вы хотите разрешить этим интерфейсным серверам инициировать исходящие запросы в Интернет, может потребоваться заставить их делать это через ваши локальные веб-прокси, чтобы можно было воспользоваться преимуществами фильтрации и регистрации URL-адресов.

Для предотвращения описанной ситуации можно использовать принудительное туннелирование. При включении принудительного туннелирования все подключения к Интернету принудительно выполняются через локальный шлюз. Можно настроить принудительное туннелирование, используя пользовательские маршруты.

Подробнее.

- [Что такое определяемые пользователем маршруты и IP-пересылка?](../virtual-network/virtual-networks-udr-overview.md)

### Виртуальные устройства сетевой безопасности
Группы безопасности сети, пользовательские маршруты и принудительное туннелирование предоставляют уровень безопасности на уровнях сети и транспорта [модели OSI](https://en.wikipedia.org/wiki/OSI_model), но иногда требуется обеспечить защиту на более высоком уровне.

Например, ваши требования к безопасности могут включать в себя следующее.

- Проверка подлинности и авторизация перед разрешением доступа к приложению
- Обнаружения атак и реагирование на них
- Проверка на прикладном уровне для высокоуровневых протоколов
- Фильтрация URL-адресов
- Антивирусные и антивредоносные программы на уровне сети
- Защита от программ-роботов
- Контроль доступа к приложениям
- Дополнительная защита от атак DDoS (сверх защиты от атак DDoS, предоставляемой самой структурой Azure)

Доступ к этим улучшенным функциям сетевой безопасности осуществляется с помощью решения партнера Azure. Последние решения в области безопасности из партнерской сети Azure можно найти в [Azure Marketplace](https://azure.microsoft.com/marketplace/) по запросу "безопасность" и "сетевая безопасность".

## Безопасный удаленный доступ и межорганизационное взаимодействие
Установка, настройка ресурсов Azure и управление ими должны выполняться удаленно. Кроме того, вам может потребоваться развернуть [гибридные](http://social.technet.microsoft.com/wiki/contents/articles/18120.hybrid-cloud-infrastructure-design-considerations.aspx) ИТ-решения, компоненты которых находятся как в локальной сети, так и в общедоступном облаке Azure. В этих сценариях требуется безопасный удаленный доступ.

Сети Azure поддерживают следующие сценарии безопасного удаленного доступа.

- Подключение отдельных рабочих станций к виртуальной сети Azure
- Подключение локальной сети к виртуальной сети Azure с помощью VPN
- Подключение локальной сети к виртуальной сети Azure с помощью выделенного канала глобальной сети
- Подключение виртуальных сетей Azure друг к другу

### Подключение отдельных рабочих станций к виртуальной сети Azure
Возможны случаи, когда необходимо разрешить отдельным разработчикам или персоналу управлять виртуальными машинами и службами в Azure. Например, вам требуется доступ к виртуальной машине в виртуальной сети Azure, а ваша политика безопасности не разрешает удаленный доступ к отдельным виртуальным машинам через RDP или SSH. В этом случае можно использовать VPN-подключение типа "точка — сеть".

VPN-подключение типа "точка — сеть" использует протокол [SSTP VPN](https://technet.microsoft.com/library/cc731352.aspx), позволяя настроить частное и безопасное соединение между пользователем и виртуальной сетью Azure. После установки VPN-подключения пользователь сможет использовать RDP или SSH, чтобы подключиться через VPN-канал к любой виртуальной машине в виртуальной сети Azure (при условии, что он может пройти проверку подлинности и авторизован).

Подробнее.

- [Настройка подключения типа "точка–сеть" к виртуальной сети с помощью PowerShell](../vpn-gateway/vpn-gateway-howto-point-to-site-rm-ps.md)

### Подключение локальной сети к виртуальной сети Azure с помощью VPN
Вам может понадобиться целиком или частично подключить корпоративную сеть к виртуальной сети Azure. Это часто требуется в гибридных ИТ-сценариях, когда компании [расширяют свой локальный центр обработки данных в Azure](https://gallery.technet.microsoft.com/Datacenter-extension-687b1d84). Во многих случаях компании разместят часть компонентов службы в Azure, а часть — в локальной среде, например когда решение содержит интерфейсные веб-серверы в Azure и внутренние базы данных в локальной среде. Подобные "межорганизационные" подключения также делают управление ресурсами в Azure более безопасным и позволяют реализовать такие сценарии, как расширение контроллеров домена Active Directory в Azure.

Это можно сделать, например, используя [VPN-подключение типа "сеть — сеть"](https://www.techopedia.com/definition/30747/site-to-site-vpn). Различием между VPN-подключениями типа "сеть — сеть" и типа "точка — сеть" является то, что VPN-подключение "точка — сеть" связывает одно устройство с виртуальной сетью Azure, а VPN-подключение "сеть — сеть" связывает всю сеть (например, локальную) с виртуальной сетью Azure. VPN-подключения "сеть — сеть" к виртуальной сети Azure используют VPN-протокол для режима безопасного туннелирования IPsec.

Подробнее.

- [Создание виртуальной сети с VPN-подключением типа "сеть — сеть" с помощью портала Azure и диспетчера Azure Resource Manager](../vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal.md)
- [Планирование и проектирование VPN-шлюза](../vpn-gateway/vpn-gateway-plan-design.md)

### Подключение локальной сети к виртуальной сети Azure с помощью выделенного канала глобальной сети
VPN-подключения "точка — сеть" и "сеть — сеть" позволяют эффективно реализовать межорганизационные подключения. Однако некоторые организации усматривают в них следующие недостатки.

- VPN-подключения служат для перемещения данных через Интернет и поэтому подвержены потенциальным проблемам безопасности, касающимся перемещения данных через общедоступную сеть. Кроме того, для подключений к Интернету нельзя гарантировать надежность и доступность.
- Для некоторых видов применения VPN-подключения к виртуальным сетям Azure могут считаться ограниченными по пропускной способности, предел которой составляет около 200 Мбит/с.

Организации, нуждающиеся в высоком уровне безопасности и доступности для межорганизационных подключений, обычно используют выделенные каналы глобальной сети для подключения к удаленным сайтам. Azure предоставляет возможность использовать выделенный канал глобальной сети для подключения локальной сети к виртуальной сети Azure. Это обеспечивается за счет Azure ExpressRoute.

Подробнее.

- [Технический обзор ExpressRoute](../expressroute/expressroute-introduction.md)

### Подключение виртуальных сетей Azure друг к другу
Для развертываний можно использовать несколько виртуальных сетей Azure. Это может потребоваться по множеству причин. Одной из причин может быть упрощение управления, другой — безопасность. Независимо от причины или основания для размещения ресурсов в разных виртуальных сетях Azure могут возникнуть ситуации, когда ресурсы в каждой из сетей должны взаимодействовать друг с другом.

Один из вариантов подключения служб одной виртуальной сети Azure к службам другой заключается в "замыкании" через Интернет. Такое подключение запускается в одной виртуальной сети Azure, проходит через Интернет и затем возвращается в целевую виртуальную сеть Azure. Этот вариант подвержен проблемам безопасности, которые присущи всем интернет-соединениям.

Более привлекательным вариантом может оказаться создание VPN-подключения "сеть — сеть" между виртуальными сетями Azure. Такое VPN-подключение использует тот же протокол [режима туннелирования IPsec](https://technet.microsoft.com/library/cc786385.aspx), что и упомянутое выше распределенное VPN-подключение типа "сеть — сеть".

Преимущество VPN-подключения "сеть — сеть" между виртуальными сетями Azure заключается в том, что оно устанавливается в рамках структуры сети Azure, а не через Интернет. Это обеспечивает дополнительный уровень безопасности по сравнению с VPN-подключениями "сеть — сеть", устанавливаемыми через Интернет.

Подробнее.

- [Настройка подключения между виртуальными сетями с помощью Azure Resource Manager и PowerShell](../vpn-gateway/vpn-gateway-vnet-vnet-rm-ps.md)

## Доступность
Доступность — это ключевой компонент любой программы безопасности. Если пользователям и компьютерам не удается получить доступ к нудным ресурсам по сети, службу можно считать нарушенной. В Azure применяются сетевые технологии, поддерживающие следующие механизмы обеспечения высокой доступности:

- балансировка нагрузки на основе HTTP;
- балансировка нагрузки на уровне сети;
- глобальная балансировка нагрузки.

Балансировки нагрузки — это механизм, позволяющий равномерно распределить соединения между несколькими устройствами. Он призван выполнять следующие задачи.

- Увеличение доступности — в случае балансировки нагрузки подключений между несколькими устройствами одно или несколько из них могут стать недоступными, при этом службы, запущенные на остальных работающих устройствах могут продолжать предоставлять требуемое содержимое.
- Повышение производительности — в случае балансировки нагрузки подключений между несколькими устройствами отдельное устройство не должно принимать на себя всю нагрузку. Вместо этого требования к ресурсам процессора и памяти для обслуживания содержимого распределяются между несколькими устройствами.

### Балансировка нагрузки на основе HTTP
Организации, использующие веб-службы, часто стремятся расположить перед ними балансировщик нагрузки на основе HTTP, чтобы гарантировать достаточные уровни производительности и высокой доступности. В отличие от традиционных сетевых балансировщиков нагрузки, решения, принятые балансировщиками на базе HTTP, основаны на характеристиках протокола HTTP, а не на протоколах уровня сети и транспорта.

Чтобы обеспечить балансировку нагрузки на базе HTTP для веб-служб, Azure предоставляет шлюз приложений Azure. Шлюз приложений Azure поддерживает следующее.

- Балансировка нагрузки на базе HTTP — решения о балансировке нагрузки принимаются на основе характеристик протокола HTTP.
- Сходство сеанса на основе файлов cookie — эта возможность гарантирует, что подключение с одним из серверов в зоне действия балансировщика нагрузки между клиентом и сервером не изменяется. Этим обеспечивается стабильность транзакций.
- Разгрузка SSL — при установке соединения клиента с помощью балансировщика нагрузки этот сеанс между клиентом и балансировщиком нагрузки шифруется с помощью протокола HTTPS (SSL/). Однако для повышения производительности можно установить соединение между балансировщиком нагрузки и веб-сервером в зоне действия балансировщика нагрузки с использованием протокола HTTP (без шифрования). Это называется "разгрузка SSL", так как для веб-серверов в зоне действия балансировщика нагрузки отсутствуют издержки по ресурсам процессора, связанные с шифрованием, что позволяет быстрее обслуживать запросы.
- Маршрутизация содержимого на базе URL — эта функция позволяет балансировщику нагрузки принимать решения о том, куда направлять соединения с учетом целевого URL-адреса. Это обеспечивает гораздо большую гибкость по сравнению с решениями, где решения о балансировке нагрузки принимаются на основе IP-адресов.

Подробнее.

- [Обзор шлюза приложений](../application-gateway/application-gateway-introduction.md)

### Балансировка нагрузки на уровне сети
В отличие от балансировки нагрузки на базе HTTP, функция балансировки нагрузки на уровне сети принимает решения на основе значений IP-адреса и порта (TCP или UDP). Преимуществами балансировки нагрузки на уровне сети в Azure Можно воспользоваться с помощью Azure Load Balancer. К ключевым характеристикам Azure Load Balancer относятся следующие.

- Балансировка нагрузки на уровне сети на основе значений IP-адреса и порта.
- Поддержка любого протокола уровня приложения.
- Балансировка нагрузки для виртуальных машин и экземпляров ролей облачных служб в Azure.
- Возможность использования для приложений и виртуальных машин с выходом в Интернет (внешняя балансировка нагрузки) и без него (внутренняя балансировка нагрузки).
- Мониторинг конечных точек, позволяющий определить недоступность какой-либо службы в зоне действия балансировщика нагрузки

Подробнее.

- [Доступная в Интернете подсистема балансировки нагрузки, используемая для нескольких виртуальных машин или служб](../load-balancer/load-balancer-internet-overview.md)
- [Обзор внутренней подсистемы балансировки нагрузки](../load-balancer/load-balancer-internal-overview.md)

### Глобальная балансировка нагрузки
В некоторых организациях требуется максимально высокий уровень доступности. Один из способов его достижения заключается в размещении приложений в глобально распределенных центрах обработки данных. Когда приложение размещается в центрах обработки данных, расположенных по всему миру, приложение продолжит выполняться даже в случае недоступности целого геополитического региона.

Помимо преимуществ доступности от размещения приложений в глобально распределенных центрах обработки данных, вы можете получить и выигрыш в производительности. Этого можно добиться с помощью механизма, который направляет запросы к службе в центр обработки данных, расположенный ближе всего к устройству, выполняющему такой запрос.

Глобальная балансировка нагрузки предоставляет оба этих преимущества. В Azure преимуществами глобальной балансировки нагрузки можно воспользоваться с помощью диспетчера трафика Azure.

Подробнее.

- [Что такое диспетчер трафика](../traffic-manager/traffic-manager-overview.md)

## Ведение журналов
Ведение журнала на уровне сети является ключевой функцией для любого сценария безопасности сети. В Azure данные, полученные для групп безопасности сети, можно регистрировать в журнале для получения данных на уровне сети. При ведении журнала групп безопасности сети данные получаются из следующих источников.

- Журналы аудита — они позволяют просмотреть все операции, отправленные для ваших подписок Azure. Эти журналы включены по умолчанию и доступны на портале Azure.
- Журналы событий — они содержат информацию о примененных правилах NSG.
- Журналы счетчиков — они позволяет просмотреть, сколько раз каждое правило NSG было применено для запрета или разрешения трафика.

Для просмотра и анализа этих журналов можно также использовать эффективное средство визуализации данных [Microsoft Power BI](https://powerbi.microsoft.com/what-is-power-bi/).

Подробнее.

- [Аналитика журналов для групп безопасности сети](../virtual-network/virtual-network-nsg-manage-log.md)

## Разрешение имен
Разрешение имен является критической функцией для всех служб, размещаемых в Azure. С точки зрения безопасности компрометация функции разрешения имен может привести к тому, что злоумышленник сможет переадресовывать запросы с ваших веб-сайтов на свой. Безопасное разрешение имен является обязательным требованием для всех размещенных в облаке служб.

Существует два типа разрешения имен, которые необходимо учитывать.

- Внутреннее разрешение имен — оно используется службами в ваших виртуальных сетях Azure и/или локальных сетях. Имена, используемые для внутреннего разрешения имен, недоступны через Интернет. Для обеспечения оптимальной безопасности важно, чтобы схема внутреннего разрешения имен оставалась недоступной для внешних пользователей.
- Внешнее разрешение имен — оно используется, пользователями и устройствами за пределами ваших локальных сетей и виртуальных сетей Azure. Это имена, которые видны в Интернете и используются для адресации подключения к облачным службам.

Для внутреннего разрешения имен доступно два варианта.

- DNS-сервер виртуальной сети Azure — при создании новой виртуальной сети Azure DNS-сервер создается автоматически. Он может разрешать имена компьютеров, расположенных в этой виртуальной сети Azure. Он не настраивается и управляется диспетчером структур Azure, что превращает его в безопасное решение для разрешения имен.
- Использование собственного DNS-сервера — вы можете поместить в виртуальную сеть Azure собственный DNS-сервер. Это может быть DNS-сервер, интегрированный с Active Directory, либо выделенный DNS-сервер, предоставляемый партнером Azure в Azure Marketplace.

Подробнее.

- [Обзор виртуальной сети](../virtual-network/virtual-networks-overview.md)
- [Управление DNS-серверами, используемыми виртуальной сетью](../virtual-network/virtual-networks-manage-dns-in-vnet.md)

Для внешнего разрешения DNS доступно два варианта.

- Размещение собственного внешнего DNS-сервера в локальной среде
- Размещение собственного внешнего DNS-сервера у в поставщика услуг

Многие крупные организации разместят собственные DNS-сервера в локальной среде. Это становится возможным благодаря их богатому опыту работы с сетями и глобальному присутствию.

В большинстве случаев лучше разместить свои службы разрешения имен DNS у поставщика услуг. Такие поставщики услуг обладают опытом работы с сетями и глобальным присутствием, позволяющими обеспечить высокую доступность для ваших служб разрешения имен. Доступность имеет такое значение для служб DNS, так как в случае сбоя служб разрешения имен никто не сможет подключиться к вашим службам с выходом в Интернет.

Azure предоставляет высокодоступное и высокопроизводительное решение внешнего DNS в виде Azure DNS. Это решение внешнего разрешения имен позволяет воспользоваться преимуществами всемирной инфраструктуры Azure DNS. Это позволяет разместить домен в Azure с использованием тех же учетных данных, API, инструментов и функций выставления счетов, что и для других служб Azure. Являясь частью Azure, это решение также наследует надежные средства обеспечения безопасности, которые уже встроены в платформу.

Подробнее.

- [Обзор Azure DNS](../dns/dns-overview.md)

## Архитектура демилитаризованной зоны
Множество организаций используют демилитаризованные зоны для сегментирования сетей, чтобы создать буферную зону между Интернетом и их службами. Демилитаризованная зона сети считается обладающей низким уровнем безопасности, поэтому никакие ценные ресурсы в этом сегменте сети не размещаются. Как правило, встречаются устройства сетевой безопасности, имеющие сетевой интерфейс в сегменте демилитаризованной зоны и другой сетевой интерфейс, подключенный к сети с виртуальными машинами и службами, принимающими входящие подключения из Интернета.

Существует несколько вариантов структуры и развертывания демилитаризованной зоны, а решение об использовании конкретного типа демилитаризованной зоны зависит от требований к безопасности сети.

Подробнее.

- [Облачные службы (Майкрософт) и сетевая безопасность](../best-practices-network-security.md)

## Центр безопасности Azure
Центр безопасности помогает выявлять и предотвращать угрозы, а также принимать ответные меры благодаря более полной информации о состоянии ресурсов Azure и контролю над их безопасностью. Она включает встроенные функции мониторинга безопасности и управления политиками для подписок Azure, помогает выявлять угрозы, которые в противном случае могли бы оказаться незамеченными, и взаимодействует с широким комплексом решений по обеспечению безопасности.

Центр безопасности Azure позволяет оптимизировать безопасность сети и отслеживать ее благодаря следующим возможностям:

- предоставление рекомендаций по обеспечению безопасности сети;
- мониторинг состояния конфигурации безопасности сети;
- вывод оповещений об угрозах для системы безопасности сети на уровне конечной точки и сети.

Подробнее.

- [Введение в Центр безопасности Azure](../security-center/security-center-intro.md)

<!---HONumber=AcomDC_0810_2016-->