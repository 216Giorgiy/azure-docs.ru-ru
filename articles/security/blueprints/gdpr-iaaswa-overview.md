---
title: Схема безопасности и соответствия требованиям Azure. Веб-приложение IaaS для GDPR
description: Схема безопасности и соответствия требованиям Azure. Веб-приложение IaaS для GDPR
services: security
author: jomolesk
ms.assetid: 04d5239c-fff0-4c2d-9379-1fa79ddbec78
ms.service: security
ms.topic: article
ms.date: 05/14/2018
ms.author: jomolesk
ms.openlocfilehash: c418664fe94ee2801a24df59b9ef3451f3985cdb
ms.sourcegitcommit: e14229bb94d61172046335972cfb1a708c8a97a5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/14/2018
ms.locfileid: "34161857"
---
# <a name="azure-security-and-compliance-blueprint---iaas-web-application-for-gdpr"></a>Схема безопасности и соответствия требованиям Azure. Веб-приложение IaaS для GDPR

## <a name="overview"></a>Обзор
Общий регламент по защите данных (GDPR) содержит множество требований, касающихся сбора, хранения и использования персональных сведений, в том числе способов идентификации и защиты персональных данных в организациях, адаптации требований прозрачности, обнаружения нарушений безопасности персональных данных и создания отчетов об этом, а также обучения персонала, работа которого связана с вопросами конфиденциальности, и других сотрудников. GDPR предоставляет пользователям дополнительный контроль над их персональными данными и налагает ряд новых обязательств на организации, занимающиеся сбором, обработкой и анализом персональных данных. GDPR устанавливает новые правила для организаций, которые предлагают товары и услуги жителям стран Европейского Союза (ЕС) или собирают и анализируют связанные с ними данные. GDPR применяется независимо от местонахождения организации.

Корпорация Майкрософт разработала платформу Azure с ведущими в отрасли мерами безопасности и политиками конфиденциальности для защиты данных в облаке, в том числе для категорий персональных данных, определяемых согласно GDPR. В соответствии с [условиями соглашений](http://aka.ms/Online-Services-Terms) корпорация Майкрософт обязуется соблюдать требования обрабатывающих органов.

Эта схема безопасности и соответствия требованиям Azure содержит руководство по развертыванию среды IaaS (инфраструктура как услуга), подходящей для создания простого интернет-приложения. В этом решении демонстрируются способы, с помощью которых клиенты могут выполнять конкретные требования безопасности и соответствия GDPR. Кроме того, оно служит основой, позволяющей клиентам создавать и настраивать собственные решения веб-приложений IaaS в Azure. Клиенты могут задействовать эту эталонную архитектуру и следовать разработанному корпорацией Майкрософт [четырехэтапному процессу](https://aka.ms/gdprebook) для выполнения требований GDPR:
1. Обнаружение. Определите, какие персональные данные существуют и где они расположены.
2. Управление. Регулируйте способы использования персональных данных и доступа к ним.
3. Защита. Внедрите средства безопасности для предотвращения и выявления уязвимостей и нарушений безопасности данных, а также реагирования на них.
4. Отчетность. Ведите необходимую документацию и управляйте запросами данных и уведомлениями о нарушениях.

Эта эталонная архитектура, связанное руководство по реализации и модель рисков призваны служить основой, которую клиенты должны адаптировать для собственных потребностей, а не использовать "как есть" в рабочей среде. Обратите внимание на следующее:
- Эта архитектура является ориентиром, который помогает клиентам развертывать рабочие нагрузки Azure в соответствии с требованиями GDPR.
- Клиенты несут ответственность за выполнение надлежащей оценки безопасности и соответствия любого решения, созданного с использованием этой архитектуры, так как требования могут варьироваться в зависимости от специфики реализации каждого клиента.

## <a name="architecture-diagram-and-components"></a>Схема и компоненты архитектуры
Это решение развертывает эталонную архитектуру для веб-приложения IaaS с внутренним сервером SQL Server. Архитектура включает веб-уровень, уровень данных, инфраструктуру Active Directory, шлюз приложений и подсистему балансировки нагрузки. Виртуальные машины развернуты в сети, уровни данных настроены в группе доступности, а экземпляры SQL Server настроены в группе доступности AlwaysOn для обеспечения высокой доступности. Виртуальные машины присоединены к доменам, а с помощью политик группы Active Directory обеспечивается безопасность и соответствие конфигурациям на уровне операционной системы. Управляющий узел-бастион предоставляет безопасное подключение для администраторов, позволяющее получить доступ к развернутым ресурсам. **Azure рекомендует настроить подключение VPN или ExpressRoute для управления и импорта данных в подсеть эталонной архитектуры.**

![Схема эталонной архитектуры веб-приложения IaaS для GDPR](images/gdpr-iaaswa-architecture.png?raw=true "IaaS Web Application for GDPR reference architecture diagram")

Это решение использует следующие службы Azure. Подробные сведения об архитектуре развертывания см. в [этом разделе](#deployment-architecture).

- Виртуальные машины Azure
    - (1) управляющий узел или узел бастион (Windows Server 2016 Datacenter);
    - (2) Контроллер домена Active Directory (Windows Server 2016 Datacenter).
    - (2) узел кластера SQL Server (SQL Server 2017 в Windows Server 2016);
    - (2) Веб-службы и службы IIS (Windows Server 2016 Datacenter).
- Группы доступности
    - (1) Контроллеры домена Active Directory.
    - (1) узлы кластера SQL;
    - (1) Веб-службы и службы IIS.
- Виртуальная сеть Azure
    - (1) Виртуальные сети размером в /16.
    - (5) Подсети размером в /24.
    - Параметры DNS настроены на двух контроллерах доменов.
- Azure Load Balancer
- Шлюз приложений Azure
    - (1) Включенный шлюз приложений с брандмауэром веб-приложения:
        - режим брандмауэра — предотвращение;
        - набор правил — OWASP 3.0;
        - прослушиватель — порт 443.
- Хранилище Azure
    - (7) Учетная запись хранения для геоизбыточного хранилища.
- Облако-свидетель.
- Хранилище служб восстановления
- Хранилище ключей Azure
- Azure Active Directory (AAD)
- Azure Resource Manager
- Operations Management Suite (OMS)
- Центр безопасности Azure

## <a name="deployment-architecture"></a>Архитектура развертывания
В следующем разделе подробно описываются компоненты развертывания и реализации.

**Узел-бастион**. Узел-бастион является единой точкой входа, которая позволяет пользователям получать доступ к ресурсам, развернутым в этой среде. Узел-бастион предоставляет безопасное подключение к развернутым ресурсам, разрешая только удаленный трафик с общедоступных IP-адресов из надежного списка. Для разрешения трафика по протоколу RDP (протокол удаленного рабочего стола) источник трафика должен быть определен в группе безопасности сети (NSG).

Это решение создает виртуальную машину в виде присоединенного к домену узла-бастиона со следующими настройками:
-   [расширение защиты от вредоносных программ](https://docs.microsoft.com/azure/security/azure-security-antimalware);
-   [расширение OMS](https://docs.microsoft.com/azure/virtual-machines/virtual-machines-windows-extensions-oms);
-   [Расширение системы диагностики Azure](https://docs.microsoft.com/azure/virtual-machines/virtual-machines-windows-extensions-diagnostics-template)
-   [шифрование дисков Azure](https://docs.microsoft.com/azure/security/azure-security-disk-encryption) с помощью хранилища ключей Azure Key Vault;
-   [политика автоматического завершения работы](https://azure.microsoft.com/blog/announcing-auto-shutdown-for-vms-using-azure-resource-manager/) для уменьшения степени использования ресурсов виртуальной машины во время простоя.
-   функция [Credential Guard в Защитнике Windows](https://docs.microsoft.com/windows/access-protection/credential-guard/credential-guard) должна быть включена, чтобы учетные данные и другие секретные сведения обрабатывались в защищенной среде, изолированной от работающей операционной системы.

### <a name="virtual-network"></a>Виртуальная сеть
Архитектура определяет частную виртуальную сеть с пространством адресов 10.200.0.0/16.

**Группы безопасности сети.** Решение позволяет развернуть ресурсы в архитектуре с отдельной веб-подсетью, подсетью базы данных, подсетью Active Directory и подсетью управления внутри виртуальной сети. Подсети логически разделены правилами групп безопасности сети, применяемыми к отдельным подсетям, которые настроены таким образом, чтобы между подсетями проходил только трафик, который необходим для работы функций системы и управления.

См. конфигурацию [групп безопасности сети](https://github.com/Azure/fedramp-iaas-webapp/blob/master/nestedtemplates/virtualNetworkNSG.json), развертываемых с этим решением. Организации могут настроить группы безопасности сети, изменив файл, приведенный выше, с использованием [этой документации](https://docs.microsoft.com/azure/virtual-network/virtual-networks-nsg) в качестве руководства.

Каждая из подсетей имеет выделенную группу безопасности сети (NSG):
- 1 NSG для шлюза приложений (LBNSG);
- 1 NSG для узла-бастиона (MGTNSG);
- 1 NSG для основного и резервного контроллеров домена (ADNSG);
- 1 NSG для серверов SQL Server и облака-свидетеля (SQLNSG);
- 1 NSG для веб-уровня (WEBNSG).

### <a name="data-in-transit"></a>Передаваемые данные
Azure по умолчанию шифрует весь обмен данными в центрах обработки данных в обоих направлениях. Кроме того, все транзакции, направляемые в службу хранилища Azure через портал Azure, проходят по протоколу HTTPS.

### <a name="data-at-rest"></a>Неактивные данные
Архитектура защищает неактивные данные с помощью ряда мер, включая шифрование и аудит баз данных.

**Служба хранилища Azure**. Для выполнения требований к шифрованию неактивных данных во всей [службе хранилища Azure](https://azure.microsoft.com/services/storage/) используется [шифрование службы хранилища](https://docs.microsoft.com/azure/storage/storage-service-encryption). Это помогает защищать и охранять персональные данные в рамках обязательств по безопасности организаций и соответствия требованиям, определенным в GDPR.

**Шифрование дисков Azure.** Шифрование дисков Azure применяется для шифрования дисков на виртуальных машинах Windows IaaS. [Шифрование дисков Azure](https://docs.microsoft.com/azure/security/azure-security-disk-encryption) использует возможность BitLocker Windows, чтобы обеспечить шифрование тома для ОС и дисков данных. Решение интегрируется с хранилищем ключей Azure, помогая управлять ключами шифрования дисков.

**SQL Server**. В экземпляре SQL Server используются следующие меры безопасности базы данных:
-   [Аутентификация и авторизация AD](https://docs.microsoft.com/azure/sql-database/sql-database-aad-authentication) обеспечивает централизованное управление удостоверениями для пользователей баз данных и других служб Майкрософт.
-   [Аудит базы данных SQL](https://docs.microsoft.com/azure/sql-database/sql-database-auditing-get-started) позволяет отслеживать события базы данных и записывать их в журнал аудита в учетной записи хранения Azure.
-   В базе данных SQL настроено [прозрачное шифрование данных (TDE)](https://docs.microsoft.com/sql/relational-databases/security/encryption/transparent-data-encryption-azure-sql), которое обеспечивает шифрование и расшифровку базы данных, связанных резервных копий и файлов журналов транзакций в реальном времени для защиты неактивных данных. TDE позволяет защитить сохраненные персональные данные от несанкционированного доступа.
-   [Правила брандмауэра](https://docs.microsoft.com/azure/sql-database/sql-database-firewall-configure) предотвращают любой доступ к серверам баз данных при отсутствии соответствующих разрешений. Брандмауэр предоставляет доступ к базам данным на основе исходного IP-адреса каждого запроса.
-   [Обнаружение угроз SQL](https://docs.microsoft.com/azure/sql-database/sql-database-threat-detection-get-started) обеспечивает мгновенное обнаружение потенциальных угроз и реагирование на них, предоставляя оповещения системы безопасности о подозрительных действиях с базами данных, потенциальных уязвимостях, атаках путем внедрения кода SQL и аномальных шаблонах доступа к базам данных.
-   [Столбцы Always Encrypted](https://docs.microsoft.com/azure/sql-database/sql-database-always-encrypted-azure-key-vault) гарантируют, что конфиденциальные персональные данные никогда не отобразятся как открытый текст внутри системы баз данных. После включения шифрования данных получить доступ к данным в виде открытого текста смогут только клиентские приложения и серверы приложений, у которых есть доступ к ключам.
- Функция [Расширенные свойства](https://docs.microsoft.com/sql/relational-databases/system-stored-procedures/sp-addextendedproperty-transact-sql) может применяться для прекращения обработки субъектов данных, так как позволяет пользователям добавлять настраиваемые свойства к объектам баз данных и помечать данные как "Неподдерживаемые" для поддержки логики приложений, предотвращающей обработку связанных персональных данных.
- [Безопасность на уровне строк](https://docs.microsoft.com/sql/relational-databases/security/row-level-security) позволяет пользователям определять политики для ограничения доступа к данным, чтобы прекращать их обработку.
- [Динамическое маскирование данных базы данных SQL (DDM)](https://docs.microsoft.com/azure/sql-database/sql-database-dynamic-data-masking-get-started) ограничивает возможность раскрытия конфиденциальных данных, маскируя их для непривилегированных пользователей или приложений. DDM может автоматически обнаруживать потенциально конфиденциальные данные и предлагать применение соответствующих масок. Это помогает идентифицировать персональные данные, подлежащие защите согласно GDPR, и ограничивать доступ к ним таким образом, чтобы данные не покидали пределы базы данных в результате несанкционированного доступа. **Примечание. Клиентам потребуется настроить параметры DDM в соответствии со своей схемой базы данных.**

### <a name="identity-management"></a>Управление удостоверениями
Следующие технологии обеспечивают возможности управления доступом к персональным данным в среде Azure.
-   [Azure Active Directory (AAD)](https://azure.microsoft.com/services/active-directory/) — это мультитенантный облачный каталог и служба управления удостоверениями корпорации Майкрософт. Все пользователи для этого решения создаются в AAD, включая пользователей, обращающихся к SQL Server.
-   Аутентификация в приложении выполняется с помощью AAD. Дополнительные сведения см. в статье [Интеграция приложений с Azure Active Directory](https://docs.microsoft.com/azure/active-directory/develop/active-directory-integrating-applications). Кроме того, при шифровании столбцов базы данных используется AAD для аутентификации приложения на сервере SQL Server. Дополнительные сведения см. в статье о [защите конфиденциальных данных в базе данных SQL](https://docs.microsoft.com/azure/sql-database/sql-database-always-encrypted-azure-key-vault).
-   [Управление доступом на основе ролей Azure (RBAC)](https://docs.microsoft.com/azure/active-directory/role-based-access-control-configure) позволяет администраторам определять детальные разрешения доступа, предоставляя его ровно в той мере, которая необходима пользователям для выполнения работы. Вместо предоставления каждому пользователю неограниченных разрешений на ресурсы Azure администраторы могут разрешить только определенные действия для доступа к персональным данным. Доступ к подписке есть только у администратора подписки.
- [AAD Privileged Identity Management](https://docs.microsoft.com/azure/active-directory/active-directory-privileged-identity-management-getting-started) позволяет клиентам свести к минимуму число пользователей, имеющих доступ к определенным ресурсам.  Администраторы могут использовать AAD Privileged Identity Management для обнаружения, ограничения и отслеживания привилегированных удостоверений, а также их доступа к ресурсам. Эту функцию можно также задействовать для получения административного JIT-доступа по требованию, когда это необходимо.
- [Защита идентификации AAD](https://docs.microsoft.com/azure/active-directory/active-directory-identityprotection) выявляет потенциальные уязвимости, влияющие на удостоверения организации, настраивает автоматическое реагирование на обнаруженные подозрительные действия, связанные с удостоверениями организации, и расследует подозрительные инциденты для принятия соответствующих мер по их устранению.
- Развернутый экземпляр IaaS Active Directory обеспечивает управление удостоверениями на уровне операционной системы для развернутых виртуальных машин IaaS.

### <a name="security"></a>Безопасность
**Управление секретами**. Для управления ключами и секретами в решении используется [Azure Key Vault](https://azure.microsoft.com/services/key-vault/). Хранилище ключей Azure помогает защитить криптографические ключи и секреты, используемые облачными приложениями и службами. Следующие возможности Azure Key Vault помогают клиентам защитить персональные данные и доступ к ним:
- Политики расширенного доступа настраиваются по мере необходимости.
- Политики доступа к Key Vault определены с минимальными необходимыми разрешениями на использование ключей и секретов.
- Все ключи и секреты в Key Vault имеют срок действия.
- Все ключи в Key Vault защищены специализированными аппаратными модулями безопасности (HSM). Тип ключа — 2048-разрядный ключ RSA, защищенный с помощью HSM.
- Всем пользователям и удостоверениям предоставляются минимальные необходимые разрешения с помощью RBAC.
- Для журналов диагностики хранилища ключей включен срок хранения не менее 365 дней.
- Допустимые операции шифрования для ключей доступны только тем пользователям, которым они нужны.
- Решение интегрируется с Azure Key Vault, чтобы обеспечить управление секретами и ключами шифрования диска виртуальной машины IaaS.

**Управление исправлениями**. Виртуальные машины Windows, развернутые как часть этой эталонной архитектуры, настраиваются по умолчанию для получения автоматических обновлений из службы Центра обновления Windows. Это решение также включает службу [автоматизации Azure](https://docs.microsoft.com/azure/automation/automation-intro) для OMS, с помощью которой можно создавать обновленные развертывания для исправления виртуальных машин при необходимости.

**Защита от вредоносных программ**. [Модуль защиты от вредоносных программ (Майкрософт)](https://docs.microsoft.com/azure/security/azure-security-antimalware) для виртуальных машин предоставляет возможности защиты в реальном времени для обнаружения и удаления вирусов, шпионских и других вредоносных программ. Вы можете настроить оповещения о попытках установки или запуска известных вредоносных или нежелательных программ на защищенных виртуальных машинах.

**Оповещения системы безопасности**. [Центр безопасности Azure](https://docs.microsoft.com/en-us/azure/security-center/security-center-intro) позволяет клиентам отслеживать трафик, собирать журналы и анализировать источники данных на предмет угроз. Кроме того, центр безопасности Azure обращается к существующей конфигурации служб Azure и предоставляет конфигурацию и рекомендации по службам для повышения уровня безопасности и защиты персональных данных. В центре безопасности Azure хранится [отчет об исследовании угроз](https://docs.microsoft.com/en-us/azure/security-center/security-center-threat-report) для каждой обнаруженной угрозы. Это позволяет командам реагирования на инциденты расследовать и устранять угрозы.

**Шлюз приложений**. Архитектура снижает риск возникновения уязвимостей с помощью шлюза приложений с брандмауэром веб-приложения (WAF) и включенным набором правил OWASP. Доступны следующие дополнительные возможности:

- [сквозное SSL-подключение](https://docs.microsoft.com/azure/application-gateway/application-gateway-end-to-end-ssl-powershell);
- включение [разгрузки SSL](https://docs.microsoft.com/azure/application-gateway/application-gateway-ssl-portal);
- отключение [TLS версий 1.0 и 1.1](https://docs.microsoft.com/azure/application-gateway/application-gateway-end-to-end-ssl-powershell);
- [брандмауэр веб-приложения](https://docs.microsoft.com/azure/application-gateway/application-gateway-web-application-firewall-overview) (режим WAF);
- [режим предотвращения](https://docs.microsoft.com/azure/application-gateway/application-gateway-web-application-firewall-portal) с набором правил OWASP 3.0;
- включение [ведения журналов диагностики](https://docs.microsoft.com/en-us/azure/application-gateway/application-gateway-diagnostics);
- [пользовательские пробы работоспособности](https://docs.microsoft.com/en-us/azure/application-gateway/application-gateway-create-gateway-portal);
- [Центр безопасности Azure](https://azure.microsoft.com/services/security-center) и [Помощник Azure](https://docs.microsoft.com/en-us/azure/advisor/advisor-security-recommendations) обеспечивают дополнительную защиту и уведомления. Центр безопасности Azure также предоставляет систему репутации.

### <a name="business-continuity"></a>Непрерывность бизнес-процессов

**Высокий уровень доступности**. Решение развертывает все виртуальные машины в [группе доступности](https://docs.microsoft.com/azure/virtual-machines/windows/tutorial-availability-sets). Группа доступности распределяет виртуальные машины между несколькими изолированными аппаратными кластерами, чтобы повысить уровень доступности. Во время планового или внепланового технического обслуживания доступна как минимум одна виртуальная машина, что соответствует соглашению об уровне обслуживания Azure, гарантирующему доступность в течение 99,95 % времени.

**Хранилище служб восстановления**. [Хранилище служб восстановления](https://docs.microsoft.com/azure/backup/backup-azure-recovery-services-vault-overview) содержит резервные копии данных и защищает все конфигурации виртуальных машин Azure в этой архитектуре. С помощью хранилища служб восстановления клиенты могут восстановить файлы и папки виртуальной машины IaaS, не восстанавливая всю виртуальную машину, что позволяет сократить время восстановления.

**Облако-свидетель**. [Облако-свидетель](https://docs.microsoft.com/en-us/windows-server/failover-clustering/whats-new-in-failover-clustering#BKMK_CloudWitness) — это тип свидетеля кворума отказоустойчивого кластера в Windows Server 2016, использующий Azure в качестве точки разрешения конфликтов. Облако-свидетель, как и другие свидетели кворума, получает голос и может участвовать в подсчетах кворума, но использует стандартное общедоступное хранилище BLOB-объектов Azure. Это устраняет дополнительные затраты на обслуживание виртуальных машин, размещенных в общедоступном облаке.

### <a name="logging-and-auditing"></a>Ведение журналов и аудит

OMS обеспечивает ведение журнала с подробными сведениями о действиях системы и пользователей, а также работоспособности системы. Решение OMS [Log Analytics](https://azure.microsoft.com/services/log-analytics/) собирает и анализирует данные, создаваемые ресурсами в Azure и локальных средах.
- **Журналы действий.** [Журналы действий](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-overview-activity-logs) содержат информацию об операциях, которые выполнялись с ресурсами в подписке. Журналы действий помогают определить инициатора операции, время события и состояние.
- **Журналы диагностики.** [Журналы диагностики](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-overview-of-diagnostic-logs) включают в себя все журналы, создаваемые каждым ресурсом. К этим журналам относятся системные журналы событий Windows, журналы службы хранилища Azure, журналы аудита Key Vault, а также журналы брандмауэра и доступа к шлюзу приложений.
- **Архивация журналов**. Все журналы диагностики записывают данные в централизованную и зашифрованную учетную запись Azure для архивирования. В соответствии с требованиями конкретной организации пользователь может настроить срок хранения до 730 дней. Эти журналы подключаются к Azure Log Analytics для обработки и хранения данных, а также создания отчетов на панелях мониторинга.

Кроме того, в состав этой архитектуры входят следующие решения OMS:
-   [Оценка AD](https://docs.microsoft.com/azure/log-analytics/log-analytics-ad-assessment). Решение "Проверка работоспособности Active Directory" оценивает риски и работоспособность серверных сред через регулярные интервалы и предоставляет приоритизированный список рекомендаций, относящихся к развернутой серверной инфраструктуре.
-   [Оценка защиты от вредоносных программ](https://docs.microsoft.com/azure/log-analytics/log-analytics-malware). Решение для защиты от вредоносных программ сообщает о вредоносных программах, угрозах и состоянии защиты.
-   [Служба автоматизации Azure](https://docs.microsoft.com/azure/automation/automation-hybrid-runbook-worker). Это решение обеспечивает хранение и выполнение модулей Runbook, а также управление ими.
-   [Безопасность и аудит](https://docs.microsoft.com/azure/operations-management-suite/oms-security-getting-started). Панель мониторинга "Безопасность и аудит" дает общее представление о состоянии безопасности ресурсов, предоставляя метрики по доменам безопасности, важным проблемам, обнаружениям, исследованию угроз и распространенным запросам безопасности.
-   [Оценка SQL](https://docs.microsoft.com/azure/log-analytics/log-analytics-sql-assessment). Решение "Проверка работоспособности SQL" оценивает риски и работоспособность серверных сред через регулярные интервалы и предоставляет клиентам приоритизированный список рекомендаций, относящихся к развернутой серверной инфраструктуре.
-   [Управление обновлениями](https://docs.microsoft.com/azure/operations-management-suite/oms-solution-update-management). Решение "Управление обновлениями" позволяет клиенту управлять обновлениями безопасности операционной системы, включая состояние доступных обновлений, а также процесс установки необходимых обновлений.
-   [Работоспособность агентов](https://docs.microsoft.com/azure/operations-management-suite/oms-solution-agenthealth). Решение "Работоспособность агентов" сообщает о количестве развернутых агентов, их географическом распределении, а также количестве агентов, которые перестают отвечать на запросы, и количестве агентов, которые отправляют операционные данные.
-   [Журналы действий Azure](https://docs.microsoft.com/azure/log-analytics/log-analytics-activity). Решение "Аналитика журнала действий" помогает при анализе журналов действий Azure во всех подписках Azure для клиента.
-   [Отслеживание изменений](https://docs.microsoft.com/azure/log-analytics/log-analytics-activity). Решение "Отслеживание изменений" позволяет клиентам легко определять изменения в среде.

## <a name="threat-model"></a>Модель рисков

Схему потока данных для этой эталонной архитектуры можно [скачать](https://aka.ms/gdprIaaSdfd) или просмотреть ниже. Используя эту модель, клиенты могут найти зоны потенциального риска в инфраструктуре системы при внесении изменений.

![Модель рисков веб-приложения IaaS для GDPR](images/gdpr-iaaswa-threat-model.png?raw=true "IaaS Web Application for GDPR threat model")

## <a name="compliance-documentation"></a>Документация по соответствию

В документе [Azure Security and Compliance Blueprint — GDPR Customer Responsibility Matrix](https://aka.ms/gdprCRM) (Схема безопасности и соответствия требованиям Azure. Таблица ответственности клиентов согласно GDPR) перечисляются обязанности контроллеров и обработчиков по всем статьям GDPR. Обратите внимание на то, что в контексте служб Azure клиент обычно выступает в роли контроллера, а Майкрософт — в роли обработчика.

В документе [Azure Security and Compliance Blueprint – GDPR IaaS Web Application Implementation Matrix](https://aka.ms/gdprIaaSweb) (Схема безопасности и соответствия требованиям Azure. Таблица реализации веб-приложения IaaS для GDPR) содержатся сведения о том, какие статьи GDPR отражены в архитектуре веб-приложения IaaS, включая подробные описания того, как реализация соответствует требованиям каждой затронутой статьи.

## <a name="guidance-and-recommendations"></a>Руководство и рекомендации
### <a name="vpn-and-expressroute"></a>VPN и ExpressRoute
Чтобы установить защищенное подключение к ресурсам, которые развертываются в рамках этой эталонной архитектуры веб-приложений IaaS, необходимо настроить защищенный VPN-туннель или [ExpressRoute](https://docs.microsoft.com/azure/expressroute/expressroute-introduction). Правильно настроив VPN-подключение или ExpressRoute, клиенты могут добавить уровень защиты передаваемых данных.

При реализации защищенного VPN-туннеля с помощью Azure можно создать виртуальное частное подключение между локальной сетью и виртуальной сетью Azure. Это подключение осуществляется через Интернет и позволяет клиентам безопасно передавать данные по "туннелю" внутри зашифрованного канала между сетью клиента и Azure. VPN типа "сеть — сеть" представляет собой безопасную проверенную технологию, которая десятилетиями применяется на предприятиях всех размеров. [Режим туннеля IPsec](https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2003/cc786385(v=ws.10)) используется в этом решении как механизм шифрования.

Так как трафик в VPN-туннеле проходит через Интернет по VPN-подключению типа "сеть — сеть", Майкрософт предлагает другой, еще более безопасный вариант подключения. Azure ExpressRoute — это выделенный канал связи в глобальной сети между Azure и локальной средой или поставщиком услуг размещения Exchange. Подключения ExpressRoute не проходят через Интернет, а значит обеспечивают повышенный уровень безопасности, надежности и быстродействия, а также меньшую задержку по сравнению с типичными подключениями через Интернет. Более того, так как это прямое подключение поставщика телекоммуникационных услуг клиента, данные не передаются через Интернет и поэтому недоступны в нем.

См. [рекомендации](https://docs.microsoft.com/en-us/azure/architecture/reference-architectures/dmz/secure-vnet-hybrid) по реализации защищенной гибридной сети, расширяющей локальную сеть в Azure.

## <a name="disclaimer"></a>Отказ от ответственности

- Этот документ является исключительно информационным. МАЙКРОСОФТ НЕ ПРЕДОСТАВЛЯЕТ НИКАКИХ ГАРАНТИЙ, ЯВНЫХ, КОСВЕННЫХ ИЛИ ПРЕДУСМОТРЕННЫХ ЗАКОНОМ, В ОТНОШЕНИИ ИНФОРМАЦИИ В ЭТОМ ДОКУМЕНТЕ. Данный документ предоставляется "как есть". Сведения и мнения, представленные в данном документе, включая URL-адреса и ссылки на другие веб-сайты, могут быть изменены без предварительного уведомления. Клиенты, читающие этот документ, берут ответственность за его использование на себя.  
- Настоящий документ не предоставляет клиентам юридических прав на интеллектуальную собственность в отношении продуктов или решений корпорации Майкрософт.  
- Клиенты могут скопировать и использовать данный документ для внутренних справочных целей.  
- Выполнение некоторых рекомендаций в этом документе может привести к более интенсивному использованию данных, а также сетевых и вычислительных ресурсов в Azure, а значит и к дополнительным затратам на лицензии или подписки Azure.  
- Эта архитектура призвана служить основой, которую клиенты должны адаптировать для конкретных требований, и не должна использоваться "как есть" в рабочей среде.
- Этот документ разработан в качестве справочного материала и не определяет все способы, с помощью которых клиент может отвечать нормам и стандартам соответствия. Клиентам следует обратиться в юридический отдел своей организации, чтобы получить одобренные варианты пользовательских реализаций.
