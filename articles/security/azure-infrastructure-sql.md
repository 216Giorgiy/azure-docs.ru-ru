---
title: Возможности безопасности Базы данных SQL Azure
description: В этой статье представлено общее описание Базы данных Azure SQL, которая защищает данные клиентов в Azure.
services: security
documentationcenter: na
author: TerryLanfear
manager: MBaldwin
editor: TomSh
ms.assetid: 61e95a87-39c5-48f5-aee6-6f90ddcd336e
ms.service: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 06/28/2018
ms.author: terrylan
ms.openlocfilehash: cca8febb004029b13b0df09a047da701c4528e8e
ms.sourcegitcommit: d7725f1f20c534c102021aa4feaea7fc0d257609
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/29/2018
ms.locfileid: "37102035"
---
# <a name="microsoft-azure-sql-database-security-features"></a>Средства безопасности Базы данных SQL Microsoft Azure    
База данных SQL Microsoft Azure предоставляет службу реляционной базы данных в Azure. Чтобы защитить данные клиентов и обеспечить надежные функции безопасности, которые клиенты ожидают от службы реляционной базы данных, База данных SQL имеет свои собственные наборы возможностей обеспечения безопасности. Эти возможности основаны на элементах управления, которые унаследованы от Azure.

## <a name="security-capabilities"></a>Возможности системы безопасности

### <a name="usage-of-tabular-data-stream-tds-protocol"></a>Потребление протокола потока табличных данных (TDS)
База данных SQL Microsoft Azure поддерживает только протокол TDS, который требует, чтобы по умолчанию база данных была доступна только через порт TCP/1433.

### <a name="microsoft-azure-sql-database-firewall"></a>Брандмауэр Базы данных SQL Microsoft Azure
Чтобы защитить данные клиентов, База данных SQL Microsoft Azure включает в себя функциональность брандмауэра, который по умолчанию запрещает весь доступ к серверу базы данных SQL, как показано ниже.

![Брандмауэр Базы данных SQL Azure][1]

Шлюз брандмауэра предоставляет возможность ограничить адреса, что позволяет детализировать управление клиентами для определения диапазона допустимых IP-адресов. Брандмауэр предоставляет доступ на основе исходного IP-адреса каждого запроса.

Конфигурация брандмауэра может быть выполнена с использованием портала управления или программно с использованием REST API Базы данных SQL Microsoft Azure. Шлюз брандмауэра Базы данных SQL Microsoft Azure по умолчанию предотвращает доступ всех клиентов TDS к Базам данных SQL Microsoft Azure. Доступ должен быть настроен с использованием списков ACL для разрешения соединений с Базой данных SQL Microsoft Azure по исходным и целевым интернет-адресам, протоколам и номерам портов.

### <a name="dosguard"></a>DoSGuard
Атаки типа "отказ в обслуживании" (DoS) уменьшаются за счет службы "Шлюз Базы данных SQL" под названием DoSGuard. DoSGuard активно отслеживает неудачные попытки входа с IP-адресов. Если в течение определенного периода времени существует несколько неудачных попыток входа с определенного IP-адреса, блокируется доступ этого IP-адреса к любым ресурсам службы в течение заранее определенного периода времени.

В дополнение к вышесказанному, шлюз Базы данных SQL Microsoft Azure также выполняет следующие функции.

- Согласование возможностей безопасного канала для реализации проверенных зашифрованных соединений TDS FIPS 140-2 при подключении к серверам баз данных.
- Проверка пакета TDS с отслеживанием состояния при выполнении соединений с клиентами. Шлюз проверяет информацию о соединении и передает пакеты TDS на соответствующий физический сервер на основании имени базы данных, указанного в строке подключения.

Ключевой принцип сетевой безопасности предложения для Базы данных SQL Microsoft Azure заключается в том, чтобы разрешать только подключение и связь, которые необходимы для работы службы. Все остальные порты, протоколы и соединения блокируются по умолчанию. Виртуальные локальные сети и списки управления доступом используются для ограничения сетевой связи по сетям источника и назначения, протоколам и номерам портов.

Утвержденные механизмы реализации списков управления доступом на основе сети включают в себя: списки ACL на маршрутизаторах и подсистемах балансировки нагрузки. Они управляются сетью Azure Networking, брандмауэром Guest VM и шлюзом брандмауэра Базы данных SQL Microsoft Azure, которые настроил клиент.

## <a name="data-segregation-and-customer-isolation"></a>Разделение данных и изоляция клиентов
Рабочая сеть Azure структурирована таким образом, что общедоступные системные компоненты отделены от внутренних ресурсов. Существуют физические и логические границы между веб-серверами, обеспечивающими доступ к публичному объекту портала Azure, и базовой виртуальной инфраструктурой Azure, где находятся экземпляры клиентских приложений и данные клиента.

Вся общедоступная информация управляется в рабочей сети Azure. Производственная сеть подчиняется двухфакторным механизмам аутентификации и граничной защиты, использует набор функций брандмауэра и защиты, описанный в предыдущем разделе, и использует функции изоляции данных, как указано ниже.

### <a name="unauthorized-systems-and-isolation-of-fc"></a>Неавторизованные системы и изоляция контроллера структуры
Поскольку контроллер структуры является центральным оркестратором структуры Microsoft Azure, для него существуют значительные средства для уменьшения угроз, особенно из потенциально скомпрометированных FA в клиентских приложениях. Контроллер структуры не распознает аппаратное обеспечение, информация об устройстве которого (например, MAC-адрес) предварительно не загружена в контроллер структуры. DHCP-серверы в контроллере структуры имеют настроенные списки MAC-адресов узлов, которые готовы к загрузке. Даже если подключены несанкционированные системы, они не включены в реестр Fabric и поэтому не связаны или не разрешены для связи с какой-либо системой в реестре Fabric. Это уменьшает риск связи несанкционированных систем с контроллером структуры и доступом к виртуальным локальным сетям и Azure.

### <a name="vlan-isolation"></a>Изоляция виртуальных локальных сетей
Рабочая сеть Azure логически разделяется на три основные виртуальные локальные сети.

- Основная виртуальная локальная сеть соединяет ненадежные узлы клиента между собой.
- Виртуальная локальная сеть контроллера структуры содержит доверенные контроллеры структуры и вспомогательные системы.
- Виртуальная локальная сеть устройств содержит доверенные сетевые и другие устройства инфраструктуры.

### <a name="packet-filtering"></a>Фильтрация пакетов
IPFilter и брандмауэры программного обеспечения, реализованные в корневой ОС и гостевой ОС узлов, обеспечивают ограничения подключения и предотвращают несанкционированный трафик между виртуальными машинами.

### <a name="hypervisor-root-os-and-guest-vms"></a>Гипервизор, корневая ОС и гостевые виртуальные машины
Изоляция корневой ОС от гостевых виртуальных машин и гостевых виртуальных машин одна от другой управляется гипервизором и корневой ОС.

### <a name="types-of-rules-on-firewalls"></a>Типы правил для брандмауэров
Правило определяется следующим образом.

{IP-адрес службы обеспечения безопасности (Src), порт Src, целевой IP-адрес, порт назначения, протокол назначения, вход и выход, с отслеживанием состояния и без отслеживания состояния, время ожидания с последовательностью отслеживания состояния}.

Пакетам SYN разрешено входить или выходить только в том случае, если это разрешено одним из правил. Для TCP Microsoft Azure использует правила без отслеживания состояния, где принцип заключается в том, что он разрешает входить или выходить в виртуальную машину или из нее всему, что не есть SYN-пакетами. Локальная безопасность заключается в том, что любой стек узла устойчив к игнорированию того,что не есть SYN-пакетами, если ранее он не видел пакета SYN. Протокол TCP сам по себе отслеживает состояние, и в сочетании с правилом SYNbased, имеющим статус "без отслеживания состояния", достигается общее поведение реализации с отслеживанием состояния.

Microsoft Azure использует правило отслеживания состояния для протокола пользовательских датаграмм (UDP). Каждый раз, когда UDP-пакет соответствует правилу, создается обратный поток в другом направлении. Этот поток имеет встроенное время ожидания.

Клиенты несут ответственность за настройку собственных брандмауэров поверх того, что предоставляет Microsoft Azure. Здесь клиенты могут определять правила для входящего и исходящего трафика.

### <a name="production-configuration-management"></a>Производственное управление конфигурацией
Стандартные конфигурации безопасности поддерживаются соответствующими командами операций в Azure и в Базе данных SQL Microsoft Azure. Все изменения конфигурации рабочих систем документируются и отслеживаются через центральную систему отслеживания. Изменения в программном и аппаратном обеспечении отслеживаются через центральную систему отслеживания. Изменения в сети, связанные с ACL, отслеживаются с использованием службы управления ACL (AMS).

Все изменения конфигурации в Microsoft Azure разработаны и протестированы в промежуточной среде, а затем развернуты в рабочей среде. Сборка программного обеспечения рассматривается как часть тестирования. Проверки безопасности и конфиденциальности рассматриваются как часть критериев контрольного списка. Изменения будут развернуты по расписанию соответствующей группой развертывания. Выпуски проверяются и подписываются соответствующим персоналом команды развертывания до их развертывания в рабочей среде.

Изменения отслеживаются для успешного завершения. В случае сбоя сценария изменение отменяется до предыдущего состояния или развертывается исправление для устранения сбоя с утверждением назначенного персонала. Хранилище исходного кода, Git,TFS, MDS, средство запуска, мониторинг безопасности Azure (ASM), контроллер структуры и платформа WinFabric используются для централизованного управления, применения и проверки параметров конфигурации в виртуальной среде Azure.

Аналогичным образом, аппаратные и сетевые изменения установили шаги проверки, чтобы оценить их соответствие требованиям сборки. Выпуски рассматриваются и авторизуются через скоординированный совет по изменениям (CAB) соответствующих групп по всему стеку.

## <a name="next-steps"></a>Дополнительная информация
Дополнительные сведения о действиях корпорации Майкрософт в сфере защиты инфраструктуры Azure приведены в следующих статьях:

- [Объекты, локальная среда и физическая безопасность в Azure](azure-physical-security.md)
- [Доступность инфраструктуры Azure](azure-infrastructure-availability.md)
- [Компоненты и границы информационной системы Azure](azure-infrastructure-components.md)
- [Сетевая архитектура Azure](azure-infrastructure-network.md)
- [Рабочая сеть Azure](azure-production-network.md)
- [Операции и управление в рабочей среде Azure](azure-infrastructure-operations.md)
- [Мониторинг инфраструктуры Azure](azure-infrastructure-monitoring.md)
- [Целостность инфраструктуры Azure](azure-infrastructure-integrity.md)
- [Защита клиентских данных в Azure](azure-protection-of-customer-data.md)

<!--Image references-->
[1]: ./media/azure-infrastructure-sql/sql-database-firewall.png
