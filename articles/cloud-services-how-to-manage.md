<properties urlDisplayName="How to manage" pageTitle="Управление облачной службой - Azure" metaKeywords="Azure manage cloud services, Azure Management Portal cloud services" description="Learn how to manage cloud services in the Azure Management Portal." metaCanonical="" services="cloud-services" documentationCenter="" title="How to Manage Cloud Services" authors="ryanwi" solutions="" manager="timlt" editor="" />

<tags ms.service="cloud-services" ms.workload="tbd" ms.tgt_pltfrm="na" ms.devlang="na" ms.topic="article" ms.date="10/23/2014" ms.author="ryanwi" />





#Управление облачными службами

В области **Облачные службы** портала управления Azure можно обновить роль службы или развертывание, перенести промежуточное развертывание в рабочую среду, привязать ресурсы к облачной службе для просмотра их зависимостей и масштабирования, а также удалить облачную службу или развертывание.

##Оглавление

* [Практическое руководство. Обновление роли облачной службы или развертывания](#updaterole)
* [Практическое руководство. Переключение из промежуточного в рабочее развертывание](#swap)
* [Практическое руководство. Привязка ресурсов к облачной службе](#linkresources)
* [Практическое руководство. Удаление развертываний и облачной службы](#deletecloudservice)


<h2><a id="updaterole"></a>Практическое руководство: Обновление роли облачной службы или развертывания</h2>

Чтобы обновить код приложения для облачной службы, используйте команду **Обновить** на странице **Облачные службы** или **Экземпляры** панели мониторинга. Одновременно можно обновить как одну, так и все роли. При этом также потребуется загрузить новые файлы пакета и конфигурации службы.

1. На [портале управления Azure](https://manage.windowsazure.com/) на странице **Облачные службы** или **Экземпляры** панели мониторинга щелкните **Обновить**.

	![UpdateDeployment](./media/cloud-services-how-to-manage/CloudServices_UpdateDeployment.png)

2. В поле **Метка развернутого приложения** введите имя развертывания, например mycloudservice4. Заданная метка появится в разделе **Быстрый запуск** на панели мониторинга.

3. В поле **Пакет** нажмите кнопку **Обзор** и отправьте файл пакета службы (с расширением .cspkg).

4. В поле **Конфигурация** нажмите кнопку **Обзор** и отправьте файл конфигурации службы (с расширением .cspkg).

5. В поле **Роль** выберите **Все**, если хотите обновить все роли облачной службы. Чтобы обновить только одну конкретную роль, выберите ее. Даже если выбрана конкретная роль, обновления в файле конфигурации службы применяются ко всем ролям.

6. Если в процессе обновления произошло изменение числа или размера ролей, установите флажок **Разрешить обновление при изменении размера или числа ролей**, чтобы выполнить обновление. 

	Обратите внимание, что при изменении размера роли (то есть размера виртуальной машины, на которой размещается экземпляр) или числа ролей необходимо повторно установить образ для каждого экземпляра роли (виртуальная машина), в результате чего утрачиваются все локальные данные.

7. Если в облачной службе будут содержаться роли с одним экземпляром, установите флажок **Обновить, даже если одна или несколько ролей содержат один экземпляр**, чтобы обеспечить обновление. 

	Служба Azure гарантирует доступность облачной службы в течение 99,95 % времени, только если для каждой роли определены как минимум два экземпляра (виртуальные** машины). Такая конфигурация позволяет обрабатывать запросы клиентов на одной виртуальной машине во время обновления другой.

8. Нажмите кнопку **ОК** (флажок), чтобы начать обновление службы.



<h2><a id="swap"></a>Практическое руководство: Переключение из промежуточного в рабочее развертывание</h2>

Чтобы перенести развертывание облачной службы из промежуточной в рабочую среду, воспользуйтесь командой **Переключить**. Если вы решили развернуть новый выпуск облачной службы, вы можете протестировать его в промежуточном развертывании, а ваши клиенты будут и дальше использовать текущий рабочий выпуск. Когда вы будете готовы к развертыванию нового выпуска в рабочей среде, используйте команду **Переключить** для переключения URL-адресов двух развертываний. 

Соответствующая команда представлена на странице **Облачные службы** или на панели мониторинга.

1. На [портале управления](https://manage.windowsazure.com/) щелкните **Облачные службы**.

2. Выберите нужную облачную службу в списке.

3. Щелкните **Переключить**.

	Откроется следующий запрос подтверждения.

	![Cloud Services Swap](./media/cloud-services-how-to-manage/CloudServices_Swap.png)

4. Проверьте данные развертывания и нажмите кнопку **Да**, чтобы завершить этот процесс.

	Переключение осуществляется мгновенно, поскольку при этом изменяются только виртуальные IP-адреса развертываний.

	Для экономии вычислительных ресурсов вы можете удалить промежуточную среду после того, как убедитесь в соответствии рабочего развертывания заданным характеристикам.

<h2><a id="linkresources"></a>Практическое руководство: Привязка ресурсов к облачной службе</h2>

Чтобы показать зависимости облачной службы от других ресурсов, вы можете привязать экземпляр базы данных SQL или учетную запись хранения Azure к облачной службе. Вы можете привязывать и отменять привязку ресурсов на странице **Связанные ресурсы**, а затем отслеживать их использование на панели мониторинга облачной службы. Если для связанной учетной записи хранения включен мониторинг, вы можете отслеживать общее число запросов на панели мониторинга облачной службы.

Чтобы связать новые или существующие экземпляры базы данных SQL и учетные записи хранения с облачной службой, используйте команду **Связать**. После этого вы сможете масштабировать базу данных со связанной ролью облачной службы на странице **Масштабирование**. В этом случае учетные записи хранения масштабируются автоматически по мере увеличения объемов использования. Дополнительную информацию см. в разделе [Масштабирование облачной службы и связанных ресурсов](../cloud-services-how-to-scale/). 

Вы также можете отслеживать, масштабировать базу данных и управлять ею на узле **Базы данных** портала управления. 

"Привязка" ресурса не подключает ваше приложение к ресурсу. Если вы создаете новую базу данных с помощью команды **Связать**, необходимо добавить в код приложения строки подключения и обновить облачную службу. Кроме того, строки подключения необходимо добавить, если в приложении используются ресурсы связанной учетной записи хранения.

Далее описывается процедура связывания с облачной службой нового экземпляра базы данных SQL, развернутого на новом сервере базы данных SQL.

###Привязка экземпляра базы данных SQL к облачной службе

1. На [портале управления](http://manage.windowsazure.com/) щелкните **Облачные службы**. Щелкните имя облачной службы, чтобы открыть панель мониторинга.

2. Щелкните **Связанные ресурсы**.

	Откроется страница **Связанные ресурсы**.

	![LinkedResourcesPage](./media/cloud-services-how-to-manage/CloudServices_LinkedResourcesPage.png)

3. Щелкните **Привязать ресурс** или **Связать**.

	Откроется мастер **привязки ресурсов**.

	![Link Page1](./media/cloud-services-how-to-manage/CloudServices_LinkedResources_LinkPage1.png)

4. Щелкните **Создать новый ресурс** или **Привязать существующий ресурс**.

5. Выберите тип связываемого ресурса. На [портале управления](http://manage.windowsazure.com/) щелкните элемент **База данных SQL**. В предварительной версии портала управления не поддерживается привязка учетной записи хранения к облачной службе.

6. Выполните настройку базы данных в соответствии с инструкциями в справке для области **Базы данных SQL** портала управления.

	Состояние операции связывания можно контролировать с помощью области сообщений.

	![Link Progress](./media/cloud-services-how-to-manage/CloudServices_LinkedResources_LinkProgress.png)

	По завершении этого процесса вы можете проконтролировать состояние связанных ресурсов на панели мониторинга облачной службы. Дополнительную информацию о масштабировании связанной базы данных SQL см. в разделе [Масштабирование облачной службы и связанных ресурсов](../cloud-services-how-to-scale/).

###Отмена привязки ресурсов

1. На [портале управления](http://manage.windowsazure.com/) щелкните **Облачные службы**. Щелкните имя облачной службы, чтобы открыть панель мониторинга.

2. Щелкните **Связанные ресурсы** и выберите ресурс.

3. Щелкните **Отменить привязку**. Нажмите кнопку **Да** в запросе подтверждения.

	Отмена привязки базы данных SQL не влияет на саму базу или подключения приложений к ней. После этого вы по-прежнему сможете управлять базой в области **Базы данных SQL** портала управления.



<h2><a id="deletecloudservice"></a>Практическое руководство: Удаление развертываний и облачной службы</h2>

До удаления облачной службы необходимо удалить все текущие развертывания.

Для экономии вычислительных ресурсов вы можете удалить промежуточную среду после того, как убедитесь в соответствии рабочего развертывания заданным характеристикам. Обратите внимание, что плата за вычислительные ресурсы для экземпляра роли взимается даже в том случае, если облачная служба не выполняется.

Чтобы удалить развертывание или облачную службу, выполните следующие действия. 

1. На [портале управления](http://manage.windowsazure.com/) щелкните **Облачные службы**.

2. Выберите облачную службу и нажмите кнопку **Удалить**. Чтобы выбрать службу, не открывая панель управления, щелкните в любом месте вне поля с ее именем.

	При наличии промежуточного или рабочего развертывания в нижней части окна появится меню следующего вида. До удаления облачной службы необходимо удалить все текущие развертывания.

	![Delete Menu](./media/cloud-services-how-to-manage/CloudServices_DeleteMenu.png)


3. Чтобы удалить развертывание, щелкните **Удалить рабочее развертывание** или **Удалить промежуточное развертывание**. Нажмите кнопку **Да** в запросе подтверждения. 

4. Если планируется удаление облачной службы, повторите шаг 3, чтобы удалить оставшиеся развертывания.

5. Чтобы удалить службу, щелкните **Удалить облачную службу**. Нажмите кнопку **Да** в запросе подтверждения.

> [WACOM.NOTE]
> Если для удаляемой облачной службы был настроен подробный мониторинг, платформа Azure не удаляет данные мониторинга из учетной записи хранения. В этом случае требуется удалить такие данные вручную. Дополнительные сведения о поиске таблиц метрик см. в подразделе "Практическое руководство. Доступ к данным подробного мониторинга вне портала управления" раздела <a href="http://azure.microsoft.com/ru-ru/documentation/articles/cloud-services-how-to-monitor/">Мониторинг облачных служб</a>.


<!--HONumber=35_1-->
