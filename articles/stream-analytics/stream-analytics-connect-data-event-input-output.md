<properties 
	pageTitle="Подключение к источникам входных данных и местам назначения выходных данных | Microsoft Azure" 
	description="Информация о подключении к источникам входных данных и целевым объектам выходных данных, а также их настройке для решений Stream Analytics." 
	documentationCenter="" 
	services="stream-analytics"
	authors="jeffstokes72" 
	manager="paulettm" 
	editor="cgronlun"/>

<tags 
	ms.service="stream-analytics" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.tgt_pltfrm="na" 
	ms.workload="data-services" 
	ms.date="04/24/2015" 
	ms.author="jeffstok"/>

#Подключение к источникам входных данных и местам назначения выходных данных
В этом документе будут рассмотрены различные методы настройки источников входных данных и целевых объектов выходных данных для решений Stream Analytics.

##Использование SQL в качестве места назначения выходных данных

Базы данных SQL Azure можно использовать в качестве места назначения выходных реляционных данных или выходных данных приложений, зависящих от содержимого, размещенного в базе данных.

[http://azure.microsoft.com/services/sql-database/](http://azure.microsoft.com/services/sql-database/)

Чтобы начать работу с базой данных Azure SQL, нужные следующие сведения о базе данных:

1. Имя сервера.
2. Имя базы данных.
3. Действительное имя пользователя и соответствующий пароль.
4. Имя выходной таблицы.

![рисунок1][graphic1]

Перейдите на вкладку выходных данных задания и выберите команду «ДОБАВИТЬ ВЫХОД», а затем нажмите кнопку «Далее».

![рисунок2][graphic2]


Выберите в качестве выходных данных вариант «База данных SQL».

![рисунок3][graphic3]

На следующей странице введите сведения о базе данных. Псевдоним выхода — имя, которое можно использовать в запросе для направления выходных данных запроса в эту базу данных. Если выход один, псевдоним по умолчанию — «выход».

![рисунок4][graphic4]

При использовании базы данных, которая существует в рамках используемой подписки, можно щелкнуть «Использовать базу данных SQL из текущей подписки» и выбрать базу данных в раскрывающемся списке.

![рисунок5][graphic5]

Чтобы добавить это место назначения выходных данных, нажмите кнопку «Далее». Должны начаться две операции. Первая — добавление места назначения выходных данных.

![рисунок6][graphic6]

Вторая — проверка подключения. Azure Stream Analytics попытается подключиться к базе данных SQL и проверить правильность введенных учетных данных и доступность таблицы. После завершения должно отобразиться одно из двух сообщений.

![рисунок7][graphic7]

![рисунок8][graphic8]



Если отобразилось второе, нажмите кнопку «СВЕДЕНИЯ», чтобы просмотреть точные сведения об ошибке.

![рисунок9][graphic9]

В этом примере указаны неверные учетные данные. Вы можете исправить учетные данные и попытаться выполнить проверку еще раз, нажав кнопку «ПРОВЕРИТЬ ПОДКЛЮЧЕНИЕ».

![рисунок10][graphic10]

##Использование концентраторов событий

###Обзор
 
Концентраторы событий — это высокомасштабируемые активные приемники событий, которые, как правило, используются для получения входящих событий Stream Analytics. Они предназначены для сбора потоков событий с нескольких различных устройств и служб. Концентраторы событий в сочетании с Stream Analytics образуют комплексное решение для аналитики в режиме реального времени. Концентраторы событий позволяют клиентам отправлять события в Azure в реальном времени, а задания Stream Analytics могут обрабатывать их в режиме реального времени. Например, клиенты могут публиковать в концентраторах событий данные о щелчках на веб-страницах, показания датчиков и сетевые события в журнале, а также создавать задания Stream Analytics, используя концентраторы событий в качестве потоков входных данных для фильтрации в режиме реального времени, выполнения статистических вычислений и присоединения. Концентраторы событий можно также использовать для вывода данных. Чаще всего концентраторы событий используются в качестве источника данных, когда задание Stream Analytics является приемником входных данных другого задания потоковой передачи.

###Группы получателей
Каждый вход задания Stream Analytics нужно настроить так, чтобы у него была собственная группа получателей концентратора событий. Если задание включает самосоединение или несколько выходов, некоторые входные данные могут считываться несколькими модулями чтения, в результате чего общее число модулей чтения в одной группе получателей превышает предельное значение для концентратора событий (5 модулей чтения на группу получателей). В этом случае запрос нужно будет разбить на несколько запросов, а промежуточные результаты направлять через дополнительные концентраторы событий. Обратите внимание, что у каждого концентратора событий должно быть не более 20 групп получателей. Для получения дополнительных сведений см. Руководство разработчика по концентраторам событий.

 
###Параметры
 
Получателям нужно настроить несколько параметров для потоков данных концентратора событий. Если не указано иное, эти параметры применяются к входным и выходным потокам данных концентратора событий.

1. Пространство имен Service Bus — пространство имен Service Bus концентратора событий. Пространство имен Service Bus — это контейнер для набора сущностей обмена сообщениями. При создании нового концентратора событий создается также пространство имен Service Bus. 
2. Имя концентратора событий — имя, которым обозначается концентратор событий. Это имя, указанное при создании нового концентратора событий. 
3. Имя политики концентратора событий — имя политики общего доступа, используемой для доступа к концентратору событий. Политики общего доступа можно настроить в концентраторе событий на вкладке «Настройка». Каждой политике общего доступа присваивается имя, разрешения и ключи доступа.
4. Ключ политики концентратора событий — первичный или вторичный ключ политики общего доступа для доступа к концентратору событий.  
5. Группа получателей концентратора событий — необязательный параметр для входных данных концентратора событий. Группа получателей принимает данные из концентратора событий. Если она не задана, задания Stream Analytics будут использовать для приема данных из концентратора событий группу получателей по умолчанию. Для каждого задания Stream Analytics рекомендуется использовать уникальную группу получателей.

Ключевой столбец секции — необязательный параметр для выходных данных концентратора событий. Столбец атрибутов данных, который используется в качестве ключа секции для выходных данных концентратора событий.

##Использование таблицы Azure в качестве места назначения выходных данных

Таблицы Azure можно использовать для структурированных данных с небольшим числом ограничений для схемы. Хранилище таблиц Azure можно использовать для постоянного хранения данных и эффективного их извлечения. Дополнительную информацию см. в статье [Общие сведения о службе хранилища Azure](http://azure.microsoft.com/storage-introduction/).
 
Чтобы начать использовать табличное хранилище Azure, нужна следующая информация о таблице:

1. Имя учетной записи хранилища (если подписка, по которой предоставляется это хранилище, отличается от подписки задания потоковой передачи).
2. Ключ учетной записи хранения (если подписка, по которой предоставляется это хранилище, отличается от подписки задания потоковой передачи).
3. Имя выходной таблицы (будет создана, если это еще не сделано).
4. Ключ секции (нужен обязательно).
5.   Ключ строки (в настоящее время является обязательным, но, учитывая отзывы клиентов, мы планируем сделать его необязательным).

Оптимальный подход к использованию ключа секции и ключа строки см. в статье [Проектирование стратегии масштабируемого секционирования для хранилища таблиц Azure](https://msdn.microsoft.com/library/azure/hh508997.aspx).


![рисунок11][graphic11]


Перейдите на вкладку выходных данных задания и выберите команду «ДОБАВИТЬ ВЫХОД», а затем нажмите кнопку «Далее».


![рисунок12][graphic12]


Выберите в качестве места назначения выходных данных «Табличное хранилище».


![рисунок13][graphic13]


На следующей странице введите сведения о таблице Azure. Псевдоним выхода — имя, которое можно использовать в запросе для направления выходных данных запроса в эту таблицу.


![рисунок14][graphic14] ![рисунок15][graphic15]

Размер пакета — это количество записей для пакетной операции. Оставьте значение по умолчанию, если еще не знакомы с возможностями его применения, или просмотрите статью [https://msdn.microsoft.com/library/microsoft.windowsazure.storage.table.tablebatchoperation.aspx](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.table.tablebatchoperation.aspx), чтобы получить дополнительную информацию.


При использовании хранилища Azure, существующего в используемой подписке, выберите «Использовать учетную запись хранения из текущей подписки» и выберите учетную запись хранения в раскрывающемся списке.

Чтобы добавить это место назначения выходных данных, нажмите кнопку «Далее». Должны начаться две операции. Первая — добавление места назначения выходных данных.

![рисунок16][graphic16]

Вторая — проверка подключения. Azure Stream Analytics попытается подключиться к этой учетной записи хранения и проверить правильность введенных учетных данных. После завершения должно отобразиться одно из двух сообщений.

![рисунок17][graphic17]

Если отобразилось второе, нажмите кнопку «СВЕДЕНИЯ», чтобы просмотреть точные сведения об ошибке.

![рисунок18][graphic18]

В этом примере указаны неверные учетные данные. Вы можете исправить учетные данные и попытаться выполнить проверку еще раз, нажав кнопку «ПРОВЕРИТЬ ПОДКЛЮЧЕНИЕ».

![рисунок19][graphic19]

## Получение справки
Дополнительную помощь и поддержку вы можете получить на нашем [форуме Azure Stream Analytics](https://social.msdn.microsoft.com/Forums/ru-ru/home?forum=AzureStreamAnalytics).

## Дальнейшие действия

- [Введение в Azure Stream Analytics](stream-analytics-introduction.md)
- [Приступая к работе с Azure Stream Analytics](stream-analytics-get-started.md)
- [Масштабирование заданий в службе Azure Stream Analytics](stream-analytics-scale-jobs.md)
- [Справочник по языку запросов Azure Stream Analytics](https://msdn.microsoft.com/library/azure/dn834998.aspx)
- [Справочник по API-интерфейсу REST управления Stream Analytics](https://msdn.microsoft.com/library/azure/dn835031.aspx)




[graphic1]: ./media/stream-analytics-connect-data-event-input-output/1-stream-analytics-connect-data-event-input-output.png
[graphic2]: ./media/stream-analytics-connect-data-event-input-output/2-stream-analytics-connect-data-event-input-output.png
[graphic3]: ./media/stream-analytics-connect-data-event-input-output/3-stream-analytics-connect-data-event-input-output.png
[graphic4]: ./media/stream-analytics-connect-data-event-input-output/4-stream-analytics-connect-data-event-input-output.png
[graphic5]: ./media/stream-analytics-connect-data-event-input-output/5-stream-analytics-connect-data-event-input-output.png
[graphic6]: ./media/stream-analytics-connect-data-event-input-output/6-stream-analytics-connect-data-event-input-output.png
[graphic7]: ./media/stream-analytics-connect-data-event-input-output/7-stream-analytics-connect-data-event-input-output.png
[graphic8]: ./media/stream-analytics-connect-data-event-input-output/8-stream-analytics-connect-data-event-input-output.png
[graphic9]: ./media/stream-analytics-connect-data-event-input-output/9-stream-analytics-connect-data-event-input-output.png
[graphic10]: ./media/stream-analytics-connect-data-event-input-output/10-stream-analytics-connect-data-event-input-output.png
[graphic11]: ./media/stream-analytics-connect-data-event-input-output/11-stream-analytics-connect-data-event-input-output.png
[graphic12]: ./media/stream-analytics-connect-data-event-input-output/12-stream-analytics-connect-data-event-input-output.png
[graphic13]: ./media/stream-analytics-connect-data-event-input-output/13-stream-analytics-connect-data-event-input-output.png
[graphic14]: ./media/stream-analytics-connect-data-event-input-output/14-stream-analytics-connect-data-event-input-output.png
[graphic15]: ./media/stream-analytics-connect-data-event-input-output/15-stream-analytics-connect-data-event-input-output.png
[graphic16]: ./media/stream-analytics-connect-data-event-input-output/16-stream-analytics-connect-data-event-input-output.png
[graphic17]: ./media/stream-analytics-connect-data-event-input-output/17-stream-analytics-connect-data-event-input-output.png
[graphic18]: ./media/stream-analytics-connect-data-event-input-output/18-stream-analytics-connect-data-event-input-output.png
[graphic19]: ./media/stream-analytics-connect-data-event-input-output/19-stream-analytics-connect-data-event-input-output.png
 

<!---HONumber=62-->