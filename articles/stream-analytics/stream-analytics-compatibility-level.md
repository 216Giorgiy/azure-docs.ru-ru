---
title: Общие сведения об уровне совместимости заданий Azure Stream Analytics
description: Узнайте, как установить уровень совместимости для задания Azure Stream Analytics и основные изменения в последнем уровне совместимости.
services: stream-analytics
author: mamccrea
ms.author: mamccrea
ms.service: stream-analytics
ms.topic: conceptual
ms.date: 04/08/2019
ms.openlocfilehash: 6fb93152263d253de983b17d25f02f4c68a172fd
ms.sourcegitcommit: 43b85f28abcacf30c59ae64725eecaa3b7eb561a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/09/2019
ms.locfileid: "59361388"
---
# <a name="compatibility-level-for-azure-stream-analytics-jobs"></a>Уровень совместимости заданий Azure Stream Analytics
 
Уровень совместимости относится к поведению различных выпусков службы Analysis Services. Azure Stream Analytics — это управляемая служба с регулярными обновлениями компонентов и улучшениями производительности. Обычно обновления автоматически становятся доступны пользователям. Однако некоторые новые функции могут вносить существенные изменения, такие как изменения в поведении имеющегося задания, изменения процессов, потребляющих данные этих заданий, и т. д. Уровень совместимости используется для отображения значительного изменения, представленного в Stream Analytics. Значительные изменения всегда вводятся с новым уровнем совместимости. 

Уровень совместимости гарантирует, что имеющиеся задания выполняются без ошибок. При создании нового задания Stream Analytics, рекомендуется создать ее с помощью последний уровень совместимости. 
 
## <a name="set-a-compatibility-level"></a>Установка уровня совместимости 

Уровень совместимости управляет поведением во время выполнения задания Stream Analytics. Для задания Stream Analytics можно задать уровень совместимости, используя портал или [создав вызов REST API задания](https://docs.microsoft.com/rest/api/streamanalytics/stream-analytics-job). Azure Stream Analytics в настоящее время поддерживает два уровня совместимости — 1.0 и 1.1. По умолчанию уровню совместимости задано значение 1.0, введенное в общедоступной версии Azure Stream Analytics. Чтобы обновить значение по умолчанию, перейдите к заданию Stream Analytics, выберите параметр **Уровень совместимости** в разделе **Настройка** и измените значение. 

Перед обновлением уровня совместимости убедитесь, что задание остановлено. Если задание выполняется, уровень совместимости обновить не удастся. 

![Уровень совместимости Stream Analytics на портале Azure](media/stream-analytics-compatibility-level/stream-analytics-compatibility.png)

 
При обновлении уровня совместимости компилятор T-SQL проверяет задание с помощью синтаксиса, отвечающего выбранному уровню совместимости. 

## <a name="major-changes-in-the-latest-compatibility-level-12"></a>Основные изменения в последнем уровне совместимости (1.2)

На уровне совместимости 1.2 вводятся следующие основные изменения:

### <a name="geospatial-functions"></a>Геопространственные функции 

**Предыдущие версии.** Azure Stream Analytics используется географических расчетов.

**Текущая версия.** Azure Stream Analytics позволяет вычислять геометрические проецируемых географические координаты. Нет изменений в сигнатуре геопространственные функции. Тем не менее их семантика несколько отличается, позволяя более точные вычисления, чем прежде чем.

Azure Stream Analytics поддерживает Геопространственная индексация данных ссылки. Ссылочные данные, содержащие элементы геопространственных индексирования для ускорения вычислений соединения.

Обновленные геопространственные функции обеспечивают полный выразительности формата геопространственных Well Known Text (WKT). Можно указать другие геопространственных компоненты, которые не были ранее поддерживается с GeoJson.

Дополнительные сведения см. в разделе [обновляет геопространственных функций в Azure Stream Analytics — облачные и пограничные IoT](https://azure.microsoft.com/blog/updates-to-geospatial-functions-in-azure-stream-analytics-cloud-and-iot-edge/).

### <a name="parallel-query-execution-for-input-sources-with-multiple-partitions"></a>Параллельное выполнение запросов для источников входных данных с несколькими разделами 

**Предыдущие версии.** Запросы Azure Stream Analytics требуется использовать предложение PARTITION BY для параллельной обработки запросов между секциями источника входных данных.

**Текущая версия.** Если логика запроса может выполняться параллельно по секциям источника входных данных, Azure Stream Analytics создает экземпляры отдельного запроса и выполняет вычисления в параллельном режиме.

### <a name="native-bulk-api-integration-with-cosmosdb-output"></a>Интерфейс API массового интеграции с выходные данные CosmosDB

**Предыдущие версии.** Поведение upsert было *Вставка или слияние*.

**Текущая версия.** Собственный интерфейс API массового интеграции с выходными данными CosmosDB увеличивает пропускную способность и эффективно обрабатывает запросы на регулирование.

Поведение upsert *Вставка или замена*.

### <a name="datetimeoffset-when-writing-to-sql-output"></a>DateTimeOffset при записи выходных данных SQL

**Предыдущие версии.** [DateTimeOffset](https://docs.microsoft.com/sql/t-sql/data-types/datetimeoffset-transact-sql?view=sql-server-2017) типы были настроены в формате UTC.

**Текущая версия.** DateTimeOffset больше не настраивается.

### <a name="strict-validation-of-prefix-of-functions"></a>Строгая проверка префикса функций

**Предыдущие версии.** Возникла не строгая проверка функции префиксов.

**Текущая версия.** Azure Stream Analytics имеет строгую проверку функция префиксов. Добавление префикса для встроенной функции вызывает ошибку. Например`myprefix.ABS(…)` не поддерживается.

Добавления префикса к встроенные агрегатные операции также приводит к ошибке. Например `myprefix.SUM(…)` не поддерживается.

С помощью префикса «система» для любой определяемые пользователем функции приведет к ошибке.

### <a name="disallow-array-and-object-as-key-properties-in-cosmos-db-output-adapter"></a>Запретить массива и объекта свойства ключа в выходной адаптер Cosmos DB

**Предыдущие версии.** Массивовых и объектных типов поддерживались в качестве ключевого свойства.

**Текущая версия.** Массивовых и объектных типов больше не поддерживаются в качестве ключевого свойства.


## <a name="next-steps"></a>Дальнейшие действия
* [Устранение неполадок Azure Stream Analytics входные данные](stream-analytics-troubleshoot-input.md)
* [Stream Analytics ресурсов работоспособности](stream-analytics-resource-health.md)
