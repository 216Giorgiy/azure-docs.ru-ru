<properties
	pageTitle="Заметки о выпуске HDInsight для платформы Azure"
	description="Заметки о выпуске HDInsight."
	services="hdinsight"
	documentationCenter=""
	editor="cgronlun"
	manager="paulettm"
	authors="nitinme"/>

<tags
	ms.service="hdinsight"
	ms.workload="big-data"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="04/27/2015"
	ms.author="nitinme"/>


#Заметки о выпуске Microsoft HDInsight

## Заметки о выпуске HDInsight от 27.04.2015 ##

Полный номер версии кластеров HDInsight для данного выпуска:

* HDInsight 2.1.10.537.1486660 (HDP 1.3.12.0–01795 — без изменений);
* HDInsight 3.0.6.537.1486660 (HDP 2.0.13.0–2117 — без изменений);
* HDInsight 3.1.3.537.1486660 (HDP 2.1.12.0–2329 — без изменений);
* HDInsight 3.2.3.537.1486660 (HDP 2.2.2.2–4);
* пакет SDK 1.5.8.

Этот выпуск содержит следующие обновления.

<table border="1">
<tr>
<th>Название</th>
<th>Описание</th>
<th>Затронутая область (например, служба, компонент или пакет SDK)</p></th>
<th>Тип кластера (например, Hadoop, HBase или Storm)</th>
<th>JIRA (если применимо)</th>
</tr>


<tr>
<td>Устранение зависимости от библиотеки DLL</td>
<td>Удаляет зависимость HDInsight от платформы модульного тестирования.</td>
<td>SDK</td>
<td>Hadoop</td>
<td>Недоступно</td>
</tr>

<tr>
<td>Исправление ошибки состояния гонки</td>
<td>Теперь запрос создания кластера ожидает принятие запроса PUT, прежде чем опрашивать состояние.</td>
<td>SDK</td>
<td>Hadoop</td>
<td>Недоступно</td>
</tr>
</table>

## Заметки о выпуске HDInsight от 14.04.2015 ##

Полный номер версии кластеров HDInsight для данного выпуска:

* HDInsight 2.1.10.521.1453250 (HDP 1.3.12.0–01795 — без изменений);
* HDInsight 3.0.6.521.1453250 (HDP 2.0.13.0–2117 — без изменений);
* HDInsight 3.1.3.521.1453250 (HDP 2.1.12.0–2329 — без изменений);
* HDInsight 3.2.3.525.1459730 (HDP 2.2.2.2–2);
* пакет SDK 1.5.6.

Этот выпуск содержит следующие обновления.

<table border="1">
<tr>
<th>Название</th>
<th>Описание</th>
<th>Затронутая область (например, служба, компонент или пакет SDK)</p></th>
<th>Тип кластера (например, Hadoop, HBase или Storm)</th>
<th>JIRA (если применимо)</th>
</tr>


<tr>
<td>Исправления ошибок Tez</td>
<td>В этом выпуске HDI 3.2 включены исправления для Apache TEZ 2214 и TEZ 1923. В частности, они необходимы для определенных запросов Hive в Tez, для которых требуется перемешать значительное количество данных в случайном порядке.
</td>
<td>HDP</td>
<td>Hadoop</td>
<td><a href="https://issues.apache.org/jira/browse/TEZ-2214">TEZ 2214</a></br><a href="https://issues.apache.org/jira/browse/TEZ-1923">TEZ 1923</a></td>
</tr>
</table>

## Заметки о выпуске HDInsight от 06.04.2015 ##

Полный номер версии кластеров HDInsight для данного выпуска:

* HDInsight 2.1.10.521.1453250 (HDP 1.3.12.0–01795 — без изменений);
* HDInsight 3.0.6.521.1453250 (HDP 2.0.13.0–2117 — без изменений);
* HDInsight 3.1.3.521.1453250 (HDP 2.1.12.0–2329 — без изменений);
* HDInsight 3.2.3.521.1453250 (HDP 2.2.2.2–1);
* пакет SDK 1.5.6.

Этот выпуск содержит следующие обновления.

<table border="1">
<tr>
<th>Название</th>
<th>Описание</th>
<th>Затронутая область (например, служба, компонент или пакет SDK)</p></th>
<th>Тип кластера (например, Hadoop, HBase или Storm)</th>
<th>JIRA (если применимо)</th>
</tr>


<tr>
<td>Пакет SDK для HDInsight .NET 1.5.6</td>
<td>Обновления для удаления некоторых внутренних классов для HDInsight в Linux.</td>
<td>SDK</td>
<td>Hadoop</td>
<td>Недоступно</td>
</tr>

<tr>
<td>Библиотека Avro 1.5.6</td>
<td>Добавлен <b>KnownTypeAttribute</b> для метода <b>GetAllKnownTypes</b>. Исправлено порождение NullReferenceException, когда для метода GetAllKnownTypes тип равен NULL.</td>
<td>SDK</td>
<td>Hadoop</td>
<td>Недоступно</td>
</tr>

<tr>
<td>Исправления ошибок</td>
<td>Различные исправления ошибок в службе</td>
<td>служба</td>
<td>Все</td>
<td>Недоступно</td>
</tr>

</table>
<br>

## Заметки о выпуске HDInsight от 01.04.2015 ##

Полный номер версии кластеров HDInsight для данного выпуска:

* HDInsight 2.1.10.513.1431705 (HDP 1.3.12.0–01795);
* HDInsight 3.0.6.513.1431705 (HDP 2.0.13.0–2117);
* HDInsight 3.1.3.513.1431705 (HDP 2.1.12.0–2329);
* HDInsight 3.2.3.513.1431705 (HDP 2.2.2.1–2600);
* пакет SDK 1.5.5.

Этот выпуск содержит следующие обновления.

<table border="1">
<tr>
<th>Название</th>
<th>Описание</th>
<th>Затронутая область (например, служба, компонент или пакет SDK)</p></th>
<th>Тип кластера (например, Hadoop, HBase или Storm)</th>
<th>JIRA (если применимо)</th>
</tr>


<tr>
<td>Возможность включить или отключить учетные данные удаленного рабочего стола в кластерах Windows через пакет SDK для .NET</td>
<td>Программная поддержка включения или отключения учетных данных удаленного рабочего стола в кластерах Windows.</td>
<td>SDK</td>
<td>Все</td>
<td>Недоступно</td>
</tr>

<tr>
<td>Возможность включения учетных данных удаленного рабочего стола в кластерах, пока они подготавливаются</td>
<td>Программная поддержка включения учетных данных удаленного рабочего стола при создании кластера. Эта убирает двухэтапный процесс: сначала подготовка кластера, а затем — включение удаленного рабочего стола.</td>
<td>SDK</td>
<td>Все</td>
<td>Недоступно</td>
</tr>

<tr>
<td>Обновление Python до 2.7.8</td>
<td>Обновление Python до версии 2.7.8 в кластерах HDInsight, добавляющее некоторые важные исправления системы безопасности для HDInsight версий 2.1, 3.0, 3.1 и 3.2</td>
<td>служба</td>
<td>Все</td>
<td>Недоступно</td>
</tr>

<tr>
<td>Изменение конфигурации YARN</td>
<td>В конфигурации YARN значение yarn.resourcemanager.max-completed-applications изменено на 1000 для всех типов кластера HDInsight версии 3.1 и 3.2. Это значение определяет только список завершенных приложений в пользовательском интерфейсе YARN. Чтобы получить информацию о приложениях, отправленных до отображения списка приложений в пользовательском интерфейсе, можно непосредственно перейти к журналу сервера.</td>
<td>YARN</td>
<td>Все</td>
<td>Недоступно</td>
</tr>

<tr>
<td>Изменение размера узлов в кластере HBase</td>
<td>Теперь возможно изменение размера узлов (увеличение и уменьшение) для HDInsight версии 3.1 и 3.2.</td>
<td>служба</td>
<td>HBase</td>
<td>Недоступно</td>
</tr>

<tr>
<td>Обновление JDBC</td>
<td>Драйвер SQL JDBC обновлен до версии sqljdbc_4.0.2206.100 для HDInsight версии 3.2. Эта версия содержит важные улучшения системы безопасности.</td>
<td>HDP</td>
<td>Все</td>
<td>Недоступно</td>
</tr>

<tr>
<td>Обновление конфигурации JVM</td>
<td>В конфигурации JVM значение networkaddress.cache.ttl изменено на 300 секунд (предыдущее по умолчанию: –1) для HDInsight версии 3.1 и 3.2. Это значение конфигурации определяет политику кэширования для успешных поисков имени в службе имен. Это устраняет ошибку, связанную с расширением и сжатием кластеров HBase.</td>
<td>служба</td>
<td>HBase</td>
<td>Недоступно</td>
</tr>

<tr>
<td>Обновление для пакета SDK для службы хранилища Azure для Java 2.0</td>
<td>Версия HDInsight 3.2 обновлена для использования последней версии пакета SDK для службы хранилища Azure для Java. Обновление содержит несколько важных исправлений ошибок в текущей версии 0.6.0.</td>
<td>HDP</td>
<td>Все</td>
<td>Недоступно</td>
</tr>

<tr>
<td>Обновление исходного кода Apache WASB</td>
<td>HDInsight версии 3.2 теперь использует последнюю версию кода для драйвера файловой системы WASB из Apache Hadoop. После этого изменения драйвер WASB упаковывается в виде отдельного JAR-файла. Это исключительно изменение упаковки, не затрагивающее поведение драйвера WASB. Имя JAR-файла — hadoop-azure-2.6.0.jar.</td>
<td>HDP</td>
<td>Все</td>
<td>Недоступно</td>
</tr>

<tr>
<td>Обновление имен JAR-файлов в HDInsight 3.2</td>
<td>Это обновление HDInsight версии 3.2 содержит несколько исправлений ошибок, также были обновлены несколько внутренних JAR-файлов, упакованных в составе HDP. Обратите внимание, что эти JAR-файлы являются внутренними файлами пакета HDP и не предназначены для непосредственного использования приложениями клиента. Приложения должны упаковать собственную версию JAR-файлов, чтобы обновление внутренних JAR-файлов HDP не нарушило работу приложений клиента.</td>
<td>HDP</td>
<td>Все</td>
<td>Недоступно</td>
</tr>

</table>
<br>

## Заметки о выпуске HDInsight от 03.03.2015 ##

Полный номер версии кластеров HDInsight для данного выпуска:

* HDInsight 2.1.10.488.1375841 (HDP 1.3.9.0-01351 — без изменений);
* HDInsight 3.0.6.488.1375841 (HDP 2.0.9.0-2097 — без изменений);
* HDInsight 3.1.3.488.1375841 (HDP 2.1.10.0-2290 — без изменений);
* HDInsight 3.2.3.488.1375841 (HDP-2.2.10.0-2340 — без изменений);
* пакет SDK 1.5.0 (без изменений).

Этот выпуск содержит следующее обновление.

<table border="1">
<tr>
<th>Название</th>
<th>Описание</th>
<th>Затронутые области (например, служба, компонент или пакет SDK)</p></th>
<th>Тип кластера (например, Hadoop, HBase или Storm)</th>
<th>JIRA</th>
</tr>


<tr>
<td>Улучшения надежности</td>
<td>Мы внесли исправления, улучшающие масштабирование службы при повышении нагрузки по сравнению нагрузкой на момент создания кластера.</td>
<td>служба</td>
<td>Все</td>
<td>Недоступно</td>
</tr>



</table>
<br>

## Заметки о выпуске HDInsight от 18.02.2015 ##

Полный номер версии кластеров HDInsight для данного выпуска:

* HDInsight 2.1.10.471.1342507 (HDP 1.3.9.0-01351 — без изменений);
* HDInsight 3.0.6.471.1342507 (HDP 2.0.9.0-2097 — без изменений);
* HDInsight 3.1.3.471.1342507 (HDP 2.1.10.0-2290 — без изменений);
* HDInsight 3.2.3.471.1342507 (HDP-2.2.10.0-2340);
* пакет SDK 1.5.0.

Этот выпуск содержит следующие обновления.

<table border="1">
<tr>
<th>Название</th>
<th>Описание</th>
<th>Затронутая область (например, служба, компонент или пакет SDK)</p></th>
<th>Тип кластера (например, Hadoop, HBase или Storm)</th>
<th>JIRA (если применимо)</th>
</tr>


<tr>
<td>Кластеры HDInsight 3.2</td>
<td>Платформа Hadoop 2.6/HDP 2.2 доступна для кластеров HDInsight 3.2. Содержит основные обновления всех компонентов с открытым кодом. Дополнительную информацию см. в разделе <a href="http://azure.microsoft.com/documentation/articles/hdinsight-component-versioning/" target="_blank">Новые возможности в HDInsight</a> и <a href ="http://docs.hortonworks.com/HDPDocuments/HDP2/HDP-2.2.0/HDP_2.2.0_Release_Notes_20141202_version/index.html" target="_blank">Заметки о выпуске HDP 2.2.0.0</a>.</td>
<td>Программное обеспечение с открытым кодом</td>
<td>Все</td>
<td>Недоступно</td>
</tr>

<tr>
<td>HDInsight на платформе Linux (предварительная версия)</td>
<td>Могут быть развернуты кластеры на платформе Ubuntu Linux. Дополнительную информацию см. в разделе <a href="http://azure.microsoft.com/documentation/articles/hdinsight-hadoop-linux-get-started/" target ="_blank">Приступая к работе с HDInsight в Linux</a>.</td>
<td>служба</td>
<td>Hadoop</td>
<td>Недоступно</td>
</tr>

<tr>
<td>Общедоступная версия Storm</td>
<td>Выпущена общедоступная версия кластеров Apache Storm. Дополнительную информацию см. в разделе <a href="http://azure.microsoft.com/documentation/articles/hdinsight-storm-getting-started/" target="_blank">Приступая к работе с Storm в Linux</a>.</td>
<td>служба</td>
<td>Storm</td>
<td>Недоступно</td>
</tr>

<tr>
<td>Размер виртуальных машин</td>
<td>В Azure HDInsight доступно больше размеров и типов виртуальных машин. Кластеры HDInsight могут использовать размеры от A2 до A7, созданные для выполнения общих задач; узлы серии D, для которых характерны твердотельные накопители (SSD) и более быстрые процессоры (на 60 процентов); и размеры A8 и A9, имеющие поддержку InfiniBand для быстрых сетей.</td>
<td>служба</td>
<td>Все</td>
<td>Недоступно</td>
</tr>

<tr>
<td>Масштабирование кластера</td>
<td>Вы можете изменить число узлов работающего кластера HDInsight без необходимости его удаления или повторного создания. Сейчас эта возможность поддерживается только для типов кластера Hadoop Query и Apache Storm, но скоро она появится и для кластеров Apache HBase. Дополнительную информацию см. в разделе <a href="http://azure.microsoft.com/documentation/articles/hdinsight-hadoop-cluster-scaling/" target="_blank">Масштабирование кластера в HDInsight</a>.</td>
<td>служба</td>
<td>Hadoop, Storm</td>
<td>Недоступно</td>
</tr>

<tr>
<td>Инструментарий Visual Studio</td>
<td>Помимо полного инструментария для Apache Storm был обновлен инструментарий для Apache Hive в Visual Studio. Было добавлено завершение операторов, локальная проверка и улучшенная поддержка отладки. Дополнительную информацию см. в статье <a href="http://azure.microsoft.com/documentation/articles/hdinsight-hadoop-visual-studio-tools-get-started/" target="_blank">Приступая к работе с инструментами HDInsight Hadoop для Visual Studio</a>.</td>
<td>Инструментарий</td>
<td>Hadoop</td>
<td>Недоступно</td>
</tr>

<tr>
<td>Соединитель Hadoop для DocumentDB</td>
<td>С помощью соединителя Hadoop для DocumentDB можно выполнять сложное агрегирование, анализ и манипуляции с документами JSON без схемы, которые хранятся в коллекциях DocumentDB или в учетных записях базы данных. Дополнительную информацию и учебник см. в разделе <a href="http://azure.microsoft.com/documentation/articles/documentdb-run-hadoop-with-hdinsight/" target="_blank">Выполнение заданий Hadoop с помощью DocumentDB и HDInsight</a>.</td>
<td>служба</td>
<td>Hadoop</td>
<td>Недоступно</td>
</tr>

<tr>
<td>Исправления ошибок</td>
<td>Мы внесли различные небольшие исправления ошибок для служб HDInsight. Изменения в поведении клиентов не ожидаются.</td>
<td>служба</td>
<td>Все</td>
<td>Недоступно</td>
</tr>

</table>
<br>

## Заметки о выпуске HDInsight от 06.02.2015 ##

Полный номер версии кластеров HDInsight для данного выпуска:

* HDInsight 2.1.10.463.1325367 (HDP 1.3.9.0-01351 — без изменений);
* HDInsight 3.0.6.463.1325367 (HDP 2.0.9.0-2097 — без изменений);
* HDInsight 3.1.2.463.1325367 (HDP 2.1.10.0-2290);
* пакет SDK недоступен.

Этот выпуск содержит следующие обновления.

<table border="1">
<tr>
<th>Название</th>
<th>Описание</th>
<th>Затронутая область (например, служба, компонент или пакет SDK)</p></th>
<th>Тип кластера (например, Hadoop, HBase или Storm)</th>
<th>JIRA (если применимо)</th>
</tr>


<tr>
<td>Исправления ошибок</td>
<td>Мы внесли различные небольшие исправления ошибок для служб HDInsight. Изменения в поведении клиентов не ожидаются.</td>
<td>служба</td>
<td>Все</td>
<td>Недоступно</td>
</tr>

<tr>
<td>Техническое обновление HDP 2.1</td>
<td>Выполнено обновление HDInsight 3.1 для развертывания HDP 2.1.10.0. Дополнительную информацию см. в <a href ="http://docs.hortonworks.com/HDPDocuments/HDP2/HDP-2.1.10/bk_releasenotes_hdp_2.1/content/ch_relnotes-HDP-2.1.10.html" target="_blank">заметках о выпуске HDP-2.1.10</a>. </td>
<td>Программное обеспечение с открытым кодом</td>
<td>Все</td>
<td>Недоступно</td>
</tr>

<tr>
<td>Обновления двоичных файлов HDP</td>
<td>Имена нескольких JAR-файлов в HBase были изменены. Эти JAR-файлы используются внутри HBase, поэтому не ожидается, что клиенты зависят от их имен. В частности, описаны такие возможности:
<ul>
<li>./lib/jetty-6.1.26.hwx.jar</li>
<li>./lib/jetty-sslengine-6.1.26.hwx.jar</li>
<li>./lib/jetty-util-6.1.26.hwx.jar</li>
</ul>
</td>
<td>Программное обеспечение с открытым кодом</td>
<td>HBase</td>
<td>Недоступно</td>
</tr>

</table>
<br>

## Заметки о выпуске HDInsight от 29.01.2015 ##

Полный номер версии кластеров HDInsight для данного выпуска:

* HDInsight 2.1.10.455.1309616 (HDP 1.3.9.0-01351 — без изменений);
* HDInsight 3.0.6.455.1309616 (HDP 2.0.9.0-2097 — без изменений);
* HDInsight 3.1.2.455.1309616 (HDP 2.1.9.0-2196 — без изменений);
* пакет SDK недоступен.

Этот выпуск содержит следующее обновление.

<table border="1">
<tr>
<th>Название</th>
<th>Описание</th>
<th>Затронутая область (например, служба, компонент или пакет SDK)</p></th>
<th>Тип кластера (например, Hadoop, HBase или Storm)</th>
<th>JIRA (если применимо)</th>
</tr>


<tr>

<td>Исправления ошибок</td>
<td>Мы внесли ряд важных исправлений для повышения надежности кластеров HDInsight во время обновления Azure.</td>
<td>служба</td>
<td>Все</td>
<td>Недоступно</td>
</tr>



</table>
<br>

## Заметки о выпуске HDinsight от 05.01.2015 ##

Полный номер версии кластеров HDInsight для данного выпуска:

* HDInsight 2.1.10.420.1246118 (HDP 1.3.9.0-01351 — без изменений);
* HDInsight 3.0.6.420.1246118 (HDP 2.0.9.0-2097 — без изменений);
* HDInsight 3.1.2.420.1246118 (HDP 2.1.9.0-2196 — без изменений).


Этот выпуск содержит следующие обновления.

<table border="1">
<tr>
<th>Название</th>
<th>Описание</th>
<th>Компонент</th>
<th>Тип кластера</th>
<th>JIRA (если применимо)</th>
</tr>


<tr>
<td>Примеры для анализа тенденций Twitter и рекомендаций по фильмам с использованием Mahout</td>
<td><p>В этом выпуске консоль запросов HDInsight имеет два дополнительных примера:</p>

<p><b>Анализ тенденций Twitter</b><br>
Общедоступные API, предоставляемые сайтами, такими как Twitter, — полезный источник данных для анализа и понимания популярных тенденций. В этом учебнике рассматривается использование Hive для получения списка пользователей Twitter, отправивших наибольшее количество твитов, содержащих определенное слово. </p>

<p><b>Рекомендации по фильмам с использованием Mahout</b><br>
Apache Mahout — это библиотека машинного обучения Apache Hadoop. Mahout содержит алгоритмы для обработки данных, такие как фильтрация, классификация и кластеризация. В этом учебнике будет использована подсистему рекомендаций для создания списка рекомендуемых к просмотру фильмов, основанного на фильмах, которые просмотрели друзья.</p></td>
<td>Консоль запросов</td>
<td>Hadoop</td>
<td>Недоступно</td>
</tr>

<tr>
<td>Измените значение по умолчанию для параметра конфигурации Hive: hive.auto.convert.join.noconditionaltask.size</td>
<td><p>Этот параметр размера относится к автоматически преобразованным соединениям сопоставлений. Значение представляет сумму размеров таблиц, которые могут быть преобразованы в хэш-карты, помещающиеся в памяти. В предыдущем выпуске это значение было увеличено со значения по умолчанию 10 МБ до 128 МБ. Тем не менее, новое значение 128 МБ вызывало сбои выполнения заданий из-за нехватки памяти. В этом выпуске возвращено значение по умолчанию 10 МБ. Пользователи по-прежнему могут переопределить это значение во время создания кластера, учитывая размеры своих таблиц и запросов. Дополнительную информацию о данном параметре и его переопределении см. в разделе <a href="http://docs.hortonworks.com/HDPDocuments/HDP2/HDP-2.0.0.2/ds_Hive/optimize-joins.html#JoinOptimization-OptimizeAutoJoinConversion" target="_blank">Оптимизация автоматического преобразования соединения</a> в документации Hortonworks. </p></td>
<td>Hive</td>
<td>Hadoop, Hbase</td>
<td>Недоступно</td>
</tr>

</table>
<br>

## Заметки о выпуске HDInsight от 23.12.2014 ##

Полный номер версии кластеров HDInsight для данного выпуска:

* HDInsight 2.1.10.420.1246783 (версия HDP без изменений);
* HDInsight 3.0.6.420.1246783 (версия HDP без изменений);
* HDInsight 3.1.1.420.1246783 (версия HDP без изменений).

Этот выпуск содержит следующее обновление.

<table border="1">
<tr>
<th>Название</th>
<th>Описание</th>
<th>Компонент</th>
<th>Тип кластера</th>
<th>JIRA (если применимо)</th>
</tr>


<tr>
<td>Периодические сбои при создании кластера из-за избыточной нагрузки</td>
<td><p>Улучшенный алгоритм для загрузки пакетов HDP во время создания кластера позволяет осуществлять более надежную обработку сбоев, возникающих из-за избыточной нагрузки.</p></td>
<td>служба</td>
<td>Hadoop, Hbase, Storm</td>
<td>Недоступно</td>
</tr>



</table>
<br>

## Заметки о выпуске HDInsight от 18.12.2014 ##

Данный выпуск содержит следующее обновление компонента.

<table border="1">
<tr>
<th>Название</th>
<th>Описание</th>
<th>Компонент</th>
<th>Тип кластера</th>
<th>JIRA (если применимо)</th>
</tr>

<tr>
<td><a href = "http://azure.microsoft.com/documentation/articles/hdinsight-hadoop-customize-cluster/" target="_blank">Общедоступная настройка кластера</a></td>
<td><p>Предоставляются возможности для настройки кластеров Azure HDInsight с использованием проектов, доступных в экосистеме Apache Hadoop. С помощью этой новой функции можно экспериментировать и развертывать проекты Hadoop в Azure HDInsight. Это обеспечивается с помощью функции «Действие сценария», которая позволяет вносить изменения в кластеры Hadoop произвольными приемами с помощью пользовательских сценариев. Эта настройка доступна для всех типов кластеров HDInsight, включая Hadoop, HBase и Storm. Чтобы продемонстрировать возможности эту возможность, в документацию был включен процесс установки популярных модулей <a href = "http://azure.microsoft.com/documentation/articles/hdinsight-hadoop-spark-install/" target="_blank">Spark</a>, <a href = "http://azure.microsoft.com/documentation/articles/hdinsight-hadoop-r-scripts/" target="_blank">R</a>, <a href = "http://azure.microsoft.com/documentation/articles/hdinsight-hadoop-solr-install/" target="_blank">Solr</a> и <a href = "http://azure.microsoft.com/documentation/articles/hdinsight-hadoop-giraph-install/" target="_blank">Giraph</a>.&#160;В этот выпуск также добавлена возможность пользователям указывать свои действия пользовательского сценария на портале Azure, предоставлены руководства и рекомендации по созданию действий пользовательского сценария с помощью вспомогательных методов, а также рекомендации по тестированию действия сценария. </p></td>
<td>Общедоступная версия компонента</td>
<td>Все</td>
<td>Недоступно</td>
</tr>


</table>
<br>

## Заметки о выпуске HDinsight от 5.12.2014 ##

Полный номер версии кластеров HDInsight для данного выпуска:

* HDInsight 2.1.9.406.1221105 (HDP 1.3.9.0-01351);
* HDInsight 3.0.5.406.1221105 (HDP 2.0.9.0-2097);
* HDInsight 3.1.1.406.1221105 (HDP 2.1.9.0-2196).
* Пакет SDK для HDInsight недоступен

Данный выпуск содержит следующие обновления для компонентов.

<table border="1">
<tr>
<th>Название</th>
<th>Описание</th>
<th>Компонент</th>
<th>Тип кластера</th>
<th>JIRA (если применимо)</th>
</tr>

<tr>
<td>Исправление ошибки: периодически возникающая ошибка при добавлении большого числа секций в таблицу в библиотеке DDL Hive. </td>
<td><p>Если при добавлении секций в таблицу Hive произойдет периодически возникающая ошибка подключения к базе данных метахранилища Hive, создание библиотеки DDL Hive может завершиться сбоем. Если такой сбой произойдет, в журнале ошибок Hive появится следующий оператор: </p><p>"ERROR [main]: ql.Driver (SessionState.java:printError(547)) - FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask. MetaException(message:java.lang.RuntimeException: commitTransaction was called but openTransactionCalls = 0. Это, вероятно, указывает на то, что существуют несбалансированные вызовы openTransaction/commitTransaction)"</p></td>
<td>Hive</td>
<td>Hadoop, Hbase</td>
<td>HIVE-482 (внутренняя запись JIRA, внешняя ссылка не предоставляется; здесь приводится для справки)</td>
</tr>

<tr>
<td>Исправление ошибки: случайное прекращение ответа на запросы в консоли запросов HDInsight.</td>
<td>В этом случае в журнале WebHCat для задания запуска WebHCat отобразится следующая инструкция: <p>"org.apache.hive.hcatalog.templeton.CatchallExceptionMapper | org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.yarn.exceptions.YarnRuntimeException): Could not load history file {URL-адрес WASB файла журнала}"</p></td>
<td>WebHCat</td>
<td>Hadoop</td>
<td>HIVE-482 (внутренняя запись JIRA, внешняя ссылка не предоставляется; здесь приводится для справки)</td>
</tr>

<tr>
<td>Исправление ошибки: случайный всплеск задержек запросов Hbase.</td>
<td>В этом случае пользователи заметят случайный всплеск задержек запросов Hbase продолжительностью 3 секунды.&#160;</td>
<td>Шлюз кластера HDInsigh</td>
<td>HBase</td>
<td>Недоступно</td>
</tr>

<tr>
<td>Изменения имен JAR-файлов HDP</td>
<td>Для кластеров HDI версии 3.0 внесено несколько изменений во внутренние JAR-файлы, устанавливаемые HDP. Файл jetty-6.1.26.jar заменен файлом jetty-6.1.26.hwx.jar. Файл jetty-util-6.1.26.jar был заменен файлом jetty-util-6.1.26.hwx.jar. Эти изменения касаются проектов Hadoop, Mahout, WebHCat и Oozie.</td>
<td>Hadoop, Mahout, WebHCat, Oozie</td>
<td>Hadoop, HBase</td>
<td>Недоступно</td>
</tr>

</table>
<br>


## Заметки о выпуске HDInsight от 21.11.2014 ##

Полный номер версии кластеров HDInsight для данного выпуска:

* HDInsight 2.1.9.382.1169709 (с 14.11.2014 изменения отсутствуют)
* HDInsight 3.0.5.382.1169709 (с 14.11.2014 изменения отсутствуют)
* HDInsight 3.1.1.382.1169709 (с 14.11.2014 изменения отсутствуют)
* HDINsight SDK 1.4.0

Данный выпуск содержит следующие обновления для компонентов.

<table border="1">
<tr>
<th>Название</th>
<th>Описание</th>
<th>Компонент</th>
<th>Тип кластера</th>
<th>JIRA (если применимо)</th>
</tr>

<tr>
<td>Доступ к журналам приложений</td>
<td>Возможность программно перечислить приложения, которые были запущены в ваших кластерах, и скачать журналы для конкретных приложений или контейнеров, чтобы упростить отладку проблемных приложений.</td>
<td>SDK</td>
<td>Hadoop</td>
<td>Недоступно</td>
</tr>

<tr>
<td>Возможность указать название региона в IHdInsightClient.DeleteCluster </td>
<td>Пакет SDK для Azure HDInsight предоставляет возможность указать название региона при использовании DeleteCluster. Это позволяет устранить проблемы клиентов, у которых было 2 ресурса с одинаковыми именами в разных регионах и которые не могли удалить ни один из них.</td>
<td>SDK</td>
<td>Все</td>
<td>Недоступно</td>
</tr>

<tr>
<td>ClusterDetails.DeploymentId</td>
<td>Объект ClusterDetails возвращает поле DeploymentID, которое представляет собой уникальный идентификатор кластера. Он является гарантированно уникальным для всех попыток создания кластера с одинаковыми именами.</td>
<td>SDK</td>
<td>Все</td>
<td>Недоступно</td>
</tr>
</table>
<br>

## Заметки о выпуске HDInsight от 11.14.2014 ##

Полный номер версии кластеров HDInsight для данного выпуска:

* HDInsight 2.1.9.382.1169709
* HDInsight 3.0.5.382.1169709
* HDInsight 3.1.1.382.1169709

Данный выпуск содержит следующие новые функции, обновления компонентов и исправления ошибок.

<table border="1">
<tr>
<th>Название</th>
<th>Описание</th>
<th>Компонент</th>
<th>Тип кластера</th>
<th>JIRA (если применимо)</th>
</tr>

<tr>
<td>Действие сценария (предварительная версия)</td>
<td>Предварительная версия функции настройки кластеров, которая позволяет изменять кластеры Hadoop произвольным методом с помощью пользовательских сценариев. С помощью этой функции пользователи могут экспериментировать с проектами, доступными в экосистеме Apache Hadoop, а также выполнять их развертывание на кластерах Azure HDInsight. Эта возможность настройки доступна для кластеров HDInsight всех типов, в том числе Hadoop, HBase и Storm.</td>
<td>Новая функция</td>
<td>Все</td>
<td>Недоступно</td>
</tr>

<tr>
<td>Предварительно созданные задания для анализа журналов веб-сайтов и службы хранилища Azure</td>
<td>Консоль запросов HDInsight содержит коллекцию для начала работы, которая поддерживает решения, работающие как с вашими данными, так и с примерами данных.
<p>Решения, работающие с вашими данными:<br>
Мы разработали задания для наиболее распространенных сценариев анализа данных, которые послужат вам отправной точкой для создания собственных решений. Вы можете использовать в задании собственные данные, чтобы увидеть, как это работает. Затем, когда будете готовы, используйте приобретенные знания для создания решения, смоделированного по предварительно созданному заданию.</p>
<p>Решения, работающие с примерами данных:<br>
Узнайте, как работать с HDInsight, пошагово пройдя некоторые базовые сценарии, такие как анализ веб-журналов и данных датчиков. Вы научитесь использовать HDInsight для анализа этих данных, а также подключать к этим данным другие приложения и службы. Визуализация данных с помощью подключения к Microsoft Excel наглядно демонстрирует преимущества такого подхода.</p></td>
<td>Консоль запросов</td>
<td>Hadoop</td>
<td>Недоступно</td>
</tr>

<tr>
<td>Устранение проблемы доступа к памяти в Templeton</td>
<td>Устранена утечка памяти в Templeton. С ней столкнулись клиенты, у которых был долго работающие кластеры или которые отправляли сотни запросов на выполнение заданий в секунду. Проблема выражалась в отображении ошибок Templeton с кодом «5xx», а для избавления от проблемы требовалась перезагрузка службы. Это действие больше не требуется.</td>
<td>Templeton</td>
<td>Все</td>
<td>https://issues.apache.org/jira/browse/HADOOP-11248</td>
</tr>
</table>
<br>


**Примечание**. Чтобы продемонстрировать новые возможности, ставшие доступными благодаря настройке кластера, были задокументированы процедуры использования действий сценария для установки на кластере модулей Spark и R. Дополнительную информацию см. в разделах:

* [Установка и использование Spark 1.0 на кластерах HDInsight](hdinsight-hadoop-spark-install.md)
* [Установка и использование R в кластерах HDInsight Hadoop](hdinsight-hadoop-r-scripts.md)




## Заметки о выпуске HDInsight от 07.11.2014 ##

Полные номера версий развертываемых кластеров HDInsight для данного выпуска:

* HDInsight 2.1 2.1.9.374.1153876;
* HDInsight 3.0 3.0.5.374.1153876;
* HDInsight 3.1 3.1.1.374.1153876.

Данный выпуск содержит следующие обновления для компонентов.

<table border="1">
<tr>
<th>Название</th>
<th>Описание</th>
<th>Компонент</th>
<th>Тип кластера</th>
<th>JIRA (если применимо)</th>
</tr>

<tr>
<td>HDP 2.1.7</td>
<td>Этот выпуск основывается на платформе данных Hortonworks (HDP) версии 2.1.7. Дополнительную информацию см. в <a href="http://docs.hortonworks.com/HDPDocuments/HDP2/HDP-2.1.7-Win/bk_releasenotes_HDP-Win/content/ch_relnotes-HDP-2.1.7.html" target="_blank">заметках о выпуске HDP-2.1.7</a>.</td>
<td>HDP</td>
<td>Все</td>
<td>Недоступно</td>
</tr>

<tr>
<td>Сервер временной шкалы YARN</td>
<td>YARN Timeline Server (также называемый сервером истории универсальных приложений) включен по умолчанию. Timeline Server предоставляет общую информацию о завершенных приложениях, такую как идентификатор приложения, имя приложения, состояние приложения, время отправки приложения и время завершения приложения. Эту информацию о приложении можно получить от головного узла, обратившись по универсальному коду ресурса (URI) http://headnodehost:8188 или выполнив команду YARN: yarn application –list –appStates ALL. Также эту информацию можно получить удаленно, используя REST API по адресу https://{ClusterDnsName}. azurehdinsight.net/ws/v1/applicationhistory/. Дополнительную информацию см. в разделе <a href="http://hadoop.apache.org/docs/r2.4.0/hadoop-yarn/hadoop-yarn-site/TimelineServer.html" target="_blank">YARN Timeline Server</a>.</td>
<td>Служба, YARN</td>
<td>Hadoop, HBase</td>
<td>Недоступно</td>
</tr>

<tr>
<td>Идентификатор развертывания кластера</td>
<td>Начиная с версии 1.3.3.1.5426.29232 пакета SDK пользователи могут получать доступ к HDInsight, используя уникальный идентификатор для каждого кластера, выдаваемый HDInsight. Это позволяет клиентам получать уникальные экземпляры кластеров, когда DNS-имя повторно используется в различных сценариях создания или удаления.</td>
<td>SDK</td>
<td>Все</td>
<td>Недоступно</td>
</tr>
</table>
<br>

**Примечание**. В данном выпуске была исправлена ошибка, которая не позволяла отображать полную версию на портале и возвращать ее с помощью пакета SDK или Windows PowerShell.

## Заметки о выпуске 15.10.2014 ##

Данный выпуск содержит исправление, которое устраняет проблему доступа к памяти в Templeton, возникающую у активных пользователей Templeton. В некоторых случаях активные пользователи Templeton сталкивались с ошибками «Код ошибки: 500», потому что для выполнения запроса не хватало памяти. Для избавления от проблемы требовалась перезагрузка службы Templeton. Теперь эта проблема устранена.


## Заметки о выпуске 07.10.2014 ##

* При использовании конечной точки Ambari https://{clusterDns}.azurehdinsight.net/ambari/api/v1/clusters/{clusterDns}.azurehdinsight.net/services/{servicename}/components/{componentname} поле *host_name* в настоящее время возвращает полное доменное имя (FQDN), а не только имя узла. Например, вместо «headnode0» вы получаете полное доменное имя «headnode0.{ClusterDNS}.azurehdinsight.net». Это изменение было продиктовано необходимостью использовать сценарии, в которых кластеры различного типа, например кластеры HBase и Hadoop, можно было бы размещать в одной виртуальной сети. Такая необходимость может возникнуть, например, при использовании HBase в качестве вспомогательной платформы для Hadoop.

* Мы позаботились о новых настройках памяти для стандартного размещения кластера HDInsight. Предыдущие стандартные настройки памяти в недостаточной мере предусматривали ориентацию на количество развертываемых ядер ЦП. Новые настройки памяти должны обеспечить лучшие значения по умолчанию (в соответствии с рекомендациями Hortonworks). Чтобы изменить эти настройки, см. справочную документацию по пакету SDK, в которой описывается изменение конфигурации кластера. Новые настройки памяти предусматривают использование 4 ядер ЦП (8 контейнеров). Кластеры HDInsight перечисляются в таблице ниже. (Значения предыдущих версий также указаны в скобках.)

<table border="1"> <tr><th>Компонент</th><th>Выделяемая память</th></tr> <tr><td> yarn.scheduler.minimum выделения</td><td>768 МБ (ранее 512 МБ)</td></tr> <tr><td> yarn.scheduler.maximum выделения</td><td>6144 МБ (без изменений)</td></tr> <tr><td>yarn.nodemanager.resource.memory</td><td>6144 МБ (без изменений)</td></tr> <tr><td>mapreduce.map.memory</td><td>768 МБ (ранее 512 МБ)</td></tr> <tr><td>mapreduce.map.java.opts</td><td>opts=-Xmx512m (ранее Xmx410m)</td></tr> <tr><td>mapreduce.reduce.memory</td><td>1536 МБ (ранее 1024 МБ)</td></tr> <tr><td>mapreduce.reduce.java.opts</td><td>opts=-Xmx1024m (ранее Xmx819m) = Xmx1024m</td></tr> <tr><td>yarn.app.mapreduce.am.resource</td><td>768 МБ (ранее 1024 МБ)</td></tr> <tr><td>yarn.app.mapreduce.am.command</td><td>opts=-Xmx512m (ранее Xmx819m)</td></tr> <tr><td>mapreduce.task.io.sort</td><td>256 МБ (ранее 200 МБ)</td></tr> <tr><td>tez.am.resource.memory</td><td>1536 МБ (без изменений)</td></tr>

</table><br>

Для получения более подробной информации о настройках памяти YARN и MapReduce на платформе данных Hortonworks (HDP), используемой HDInsight, см. раздел [Определение настроек памяти для платформы Hortonworks](http://docs.hortonworks.com/HDPDocuments/HDP2/HDP-2.1-latest/bk_installing_manually_book/content/rpm-chap1-11.html). Платформы Hortonworks также оснащены калькулятором необходимых параметров памяти.

Касательно сообщения об ошибке Azure PowerShell и пакета SDK для HDInsight: «Кластер не настроен для доступа служб HTTP»:

* Эта ошибка известна как [ошибка совместимости](https://social.msdn.microsoft.com/Forums/azure/a7de016d-8de1-4385-b89e-d2e7a1a9d927/hdinsight-powershellsdk-error-cluster-is-not-configured-for-http-services-access?forum=hdinsight), которая может возникать в случае различия версии пакета SDK для HDInsight или Azure PowerShell и версии кластера. Кластеры, созданные на основе версии от 15.08 и более поздней версии, поддерживают новые возможности подготовки в виртуальных сетях. Но сейчас эти же возможности неправильно интерпретируются более старыми версиями пакета SDK для HDInsight и Azure PowerShell. В результате мы имеем ошибку при отправке задания. Если для отправки заданий вы используете интерфейсы API пакета SDK для HDInsight или командлеты Azure PowerShell (Use-AzureHDInsightCluster либо **Invoke-Hive**), то задания могут завершиться ошибкой «Кластер <clustername> не настроен для доступа службы HTTP». Или (в зависимости от операции) можно получить другие сообщения об ошибках, такие как «Не удается подключиться к кластеру».

* Эти проблемы с совместимостью устранены в последних версиях пакета SDK для HDInsight и Azure PowerShell. Мы советуем обновить пакет SDK для HDInsight до версии 1.3.1.6 или более поздней версии, а инструменты Azure PowerShell — до версии 0.8.8 или более поздней версии. Последняя версия пакета SDK для HDInsight доступна в [](http://nuget.codeplex.com/wikipage?title=Getting%20Started), а последняя версия инструментов PowerShell — в разделе [Установка и настройка Azure PowerShell](../powershell-install-configure/).



## Заметки о выпуске HDinsight версии 3.1 от 12.09.2014##

* Этот выпуск основывается на платформе данных Hortonworks (HDP) версии 2.1.5. Для того чтобы посмотреть список неисправностей для этого выпуска, обратитесь к странице [Исправлено в этом выпуске](http://docs.hortonworks.com/HDPDocuments/HDP2/HDP-2.1.5/bk_releasenotes_hdp_2.1/content/ch_relnotes-hdp-2.1.5-fixed.html) на сайте Hortonworks.
* В папке библиотек Pig файл avro-mapred-1.7.4.jar был заменен файлом avro-mapred-1.7.4-hadoop2.jar. В содержимом этого файла была исправлена незначительная ошибка, не вызывающая прерывание выполнения. Мы советуем пользователям не использовать прямую зависимость от имени JAR-файла, чтобы избежать прерывания выполнения после переименования файла.


## Заметки о выпуске 21.08.2014 ##

* Мы добавляем следующую конфигурацию WebHCat (HIVE-7155), которая определяет лимит памяти по умолчанию для задания контроллера Templeton в 1 ГБ. (Предыдущее значение по умолчанию — 512 МБ.)

	 templeton.mapper.memory.mb (=1024)

	* Это изменение позволяет устранить следующую ошибку, которая возникала при выполнении определенных запросов Hive из-за низких лимитов памяти: «Контейнер выходит за предельные объемы физической памяти».
	* Чтобы вернуться к старым значениям по умолчанию, можно с помощью Azure PowerShell задать значение конфигурации, равное 512, во время создания кластера, используя следующую команду:

		Add-AzureHDInsightConfigValues -Core @{"templeton.mapper.memory.mb"="512";}


* Имя узла роли zookeeper было изменено на *zookeeper*. Это оказывает влияние на разрешение имен в кластере, но не влияет на внешние интерфейсы REST API. При наличии компонентов, использующих имя узла *zookeepernode*, необходимо будет обновить их, чтобы они использовали новые имена. Для трех узлов zookeeper используются следующие новые имена:
	* zookeeper0
	* zookeeper1
	* zookeeper2
* Обновлена матрица поддержки версии HBase. Для производственных нагрузок HBase поддерживается только версия HDInsight 3.1 (HBase версии 0.98). Версия 3.0, которая была доступна для предварительной версии, в дальнейшем поддерживаться не будет.

## Примечания о кластерах, созданных до 15.08.2014 ##

Сообщение об ошибке Azure PowerShell или пакета SDK для HDInsight «Кластер <clustername> не настроен для доступа служб HTTP» (или, в зависимости от операции, другие сообщения об ошибках, такие как «Не удается подключиться к кластеру») может возникнуть из-за разницы версий Azure PowerShell или пакета SDK для HDInsight и кластера. Кластеры, созданные на основе версии от 15.08 и более поздней версии, поддерживают новые возможности подготовки в виртуальных сетях. Данная возможность неправильно интерпретируется старыми версиями пакета SDK для HDInsight и Azure PowerShell, что приводит к ошибкам при отправке задания. Если для отправки заданий вы используете интерфейсы API пакета SDK для HDInsight или командлеты PowerShell (например, Use-AzureHDInsightCluster либо Invoke-AzureHDInsightHiveJob), то задания могут завершиться сбоем и появлением одного из приведенных сообщений об ошибке.

Эти проблемы с совместимостью устранены в последних версиях пакета SDK для HDInsight и Azure PowerShell. Мы советуем обновить пакет SDK для HDInsight до версии 1.3.1.6 или более поздней версии, а инструменты Azure PowerShell — до версии 0.8.8 или более поздней версии. Последняя версия пакета SDK для HDInsight доступна на сайте [NuGet][nuget-link]. Инструменты Azure PowerShell доступны посредством [установщика веб-платформы Майкрософт][webpi-link].


## Заметки о выпуске 28.07.2014 ##

* **HDInsight в новых регионах**: в этом выпуске охват HDInsight расширен на три новых географических региона. Клиенты HDInsight могут создавать кластеры в таких регионах:
	* Восточная Азия
	* Северо-центральный регион США
	* Южно-центральный регион США
* HDInsight версии 1.6 (HDP 1.1 и Hadoop 1.0.3) и HDInsight версии 2.1 (HDP1.3 и Hadoop 1.2) удалены с портала Azure. Можно продолжить создавать кластеры Hadoop для этих версий с помощью командлета Azure PowerShell ([New-AzureHDInsightCluster](http://msdn.microsoft.com/library/dn593744.aspx)) или с помощью [пакета SDK для HDInsight](http://msdn.microsoft.com/library/azure/dn469975.aspx). Для получения дополнительной информации см. раздел [Версии компонентов HDInsight](../hdinsight-component-versioning/).
* Изменения платформы данных Hortonworks Data Platform (HDP) в этом выпуске:

<table border="1"> <tr><th>HDP</th><th>Изменения</th></tr> <tr><td>HDP 1.3 и HDI 2.1</td><td>Без изменений</td></tr> <tr><td>HDP 2.0 и HDI 3.0</td><td>Без изменений</td></tr> <tr><td>HDP 2.1 и HDI 3.1</td><td>zookeeper: [3.4.5.2.1.3.0-1948] -> [3.4.5.2.1.3.2-0002]</td></tr>


</table><br>

## Заметки о выпуске 24/06/2014 ##

Этот выпуск содержит улучшения службы HDInsight:

* **Доступность HDP 2.1**: служба HDInsight 3.1 (содержащая HDP 2.1) общедоступна и представляет собой версию по умолчанию для новых кластеров.
* **HBase – улучшения портала Azure**: мы предоставляем кластеры HBase в предварительной версии. Вы можете создавать кластеры HBase на портале с помощью всего 3 щелчков мышью:

![](http://i.imgur.com/cmOl5fM.png)

Благодаря кластерам HBase можно создавать различные рабочие нагрузки на HDInsight в реальном времени, начиная от интерактивных веб-сайтов с большими наборами данных до служб, сохраняющих данные датчиков и телеметрии от миллионов конечных точек. На следующем шаге было бы необходимо проанализировать данные в этих рабочих нагрузках с помощью заданий Hadoop. Это можно сделать в HDInsight через Azure PowerShell и панель мониторинга кластеров Hive.

### Библиотека Apache Mahout предустановлена в HDInsight 3.1 ###

 [Mahout](http://hortonworks.com/hadoop/mahout/) предустановлена в кластерах HDInsight 3.1 (Hadoop), так что теперь вы можете запускать задания Mahout без необходимости дополнительно настраивать кластеры. Например, можно удаленно подключиться к кластеру Hadoop с помощью протокола удаленного рабочего стола (RDP) и без каких-либо дополнительных шагов выполнить следующую команду Mahout «Hello World»:

		mahout org.apache.mahout.classifier.df.tools.Describe -p /user/hdp/glass.data -f /user/hdp/glass.info -d I 9 N L  

		mahout org.apache.mahout.classifier.df.BreimanExample -d /user/hdp/glass.data -ds /user/hdp/glass.info -i 10 -t 100

Более подробную информацию об этой процедуре см. в документации по [примеру Breiman](https://mahout.apache.org/users/classification/breiman-example.html) на веб-сайте Apache Mahout.


### Запросы Hive могут использовать Tez в HDInsight 3.1 ###

Hive 0.13 доступен в HDInsight 3.1 и может выполнять запросы с использованием Tez, что даст возможность значительно улучшить производительность. Среда Tez по умолчанию недоступна для запросов Hive. Чтобы использовать ее, необходимо явно согласиться на это. Можно включить Tez, выполнив следующий фрагмент кода:

		set hive.execution.engine=tez;
		select sc_status, count(*), histogram_numeric(sc_bytes,5) from website_logs_orc_local group by sc_status;

На платформе Hortonworks опубликована подробная разбивка улучшений производительности запросов Hive с использованием Tez по данным стандартных тестов производительности. Подробную информацию см. в разделе [Тест производительности Apache Hive 13 для Enterprise Hadoop](http://hortonworks.com/blog/benchmarking-apache-hive-13-enterprise-hadoop/).

Дополнительную информацию об использовании Hive с Tez см. в разделе [Hive на Tez](https://cwiki.apache.org/confluence/display/Hive/Hive+on+Tez).

###Глобальная доступность
С выходом Azure HDInsight на Hadoop 2.2 корпорация Майкрософт сделала службу HDInsight доступной во всех основных географических регионах, где предоставляется Azure. В частности, подключены центры обработки данных в Западной Европе и Юго-Восточной Азии. Благодаря этому клиенты могут найти кластеры в центре обработки данных, который расположен неподалеку и, возможно, находится в зоне со схожими требованиями соответствия.


###Полезные советы по работе с кластерами разных версий

**Метахранилища Oozie, используемые с кластером HDInsight 3.1, обратно не совместимы с кластерами HDInsight 2.1, и их использование с кластерами этой версии невозможно**.

Стандартную базу метаданных Oozie, развернутую в кластере HDInsight 3.1, невозможно повторно использовать с кластерами HDInsight 2.1. В данном случае это невозможно, даже если метахранилище изначально было развернуто с кластером HDInsight 2.1. Такой сценарий не поддерживается, так как при использовании с кластером HDInsight 3.1 схема метахранилища обновляется и становится несовместимой с метахранилищем, требуемым для кластеров HDInsight 2.1. Все попытки повторно использовать метахранилище Oozie с кластером HDInsight 2.1, если до этого оно использовалось с кластером HDInsight 3.1, бесполезны.

**Метахранилища Oozie не могут совместно использоваться разными кластерами.**

Метахранилища Oozie прикреплены к конкретным кластерам, и к ним невозможно предоставить общий доступ кластеров.

###Критические изменения

**Синтаксис префикса**: в кластерах HDInsight 3.1 и 3.0 поддерживается только синтаксис «wasb:/ /». Прежний синтаксис «asv://» поддерживается в кластерах HDInsight 2.1 и 1.6, однако не поддерживается в кластерах HDInsight 3.1 или 3.0. Это означает, что все задания, отправляемые в кластер HDInsight 3.1 или 3.0, в которых явно используется синтаксис «asv://», завершатся сбоем. Вместо этого надо использовать синтаксис «wasb://». Кроме того, сбоем будут завершатся задания, отправляемые в кластеры HDInsight 3.1 или 3.0, которые созданы с существующим метахранилищем, содержащим явные ссылки на ресурсы с использованием синтаксиса «asv://». Для правильного обращения к ресурсам эти метахранилища необходимо создать повторно, используя синтаксис «wasb://».


**Порты**: изменены порты, используемые службой HDInsight. Номера ранее используемых портов находились во временном диапазоне портов ОС Windows. Порты распределяются автоматически из предопределенного временного диапазона для краткосрочных обменов данными на базе протокола IP. Новый набор допустимых номеров портов службы платформы данных Hortonworks (HDP) находится вне этого диапазона, что позволяет избежать конфликтов, которые могли бы возникать с портами, уже используемыми службами, выполняемыми на головном узле. Новые номера портов не должны вызывать никаких критических изменений. Используются следующие номера:

 **HDInsight 1.6 (HDP 1.1)** <table border="1"> <tr><th>Имя</th><th>Значение</th></tr> <tr><td>dfs.http.address</td><td>namenodehost:30070</td></tr> <tr><td>dfs.datanode.address</td><td>0.0.0.0:30010</td></tr> <tr><td>dfs.datanode.http.address</td><td>0.0.0.0:30075</td></tr> <tr><td>dfs.datanode.ipc.address</td><td>0.0.0.0:30020</td></tr> <tr><td>dfs.secondary.http.address</td><td>0.0.0.0:30090</td></tr> <tr><td>mapred.job.tracker.http.address</td><td>jobtrackerhost:30030</td></tr> <tr><td>mapred.task.tracker.http.address</td><td>0.0.0.0:30060</td></tr> <tr><td>mapreduce.history.server.http.address</td><td>0.0.0.0:31111</td></tr> <tr><td>templeton.port</td><td>30111</td></tr> </table><br>

 **HDInsight 3.1 и 3.0 (HDP 2.1 и 2.0)** <table border="1"> <tr><th>Имя</th><th>Значение</th></tr> <tr><td>dfs.namenode.http-address</td><td>namenodehost:30070</td></tr> <tr><td>dfs.namenode.https-address</td><td>headnodehost:30470</td></tr> <tr><td>dfs.datanode.address</td><td>0.0.0.0:30010</td></tr> <tr><td>dfs.datanode.http.address</td><td>0.0.0.0:30075</td></tr> <tr><td>dfs.datanode.ipc.address</td><td>0.0.0.0:30020</td></tr> <tr><td>dfs.namenode.secondary.http-address</td><td>0.0.0.0:30090</td></tr> <tr><td>yarn.nodemanager.webapp.address</td><td>0.0.0.0:30060</td></tr> <tr><td>templeton.port</td><td>30111</td></tr> </table><br>

###Зависимости

В HDInsight 3.x (HDP2.x) добавлены следующие зависимости:

* guice-servlet
* optiq-core
* javax.inject
* activation
* jsr305
* geronimo-jaspic_1.0_spec
* jul-to-slf4j
* java-xmlbuilder
* ant
* commons-compiler
* jdo-api
* commons-math3
* paranamer
* jaxb-impl
* stringtemplate
* eigenbase-xom
* jersey-servlet
* commons-exec
* jaxb-api
* jetty-all-server
* janino
* xercesImpl
* optiq-avatica
* jta
* eigenbase-properties
* groovy-all
* hamcrest-core
* mail
* linq4j
* jpam
* jersey-client
* aopalliance
* geronimo-annotation_1.0_spec
* ant-launcher
* jersey-guice
* xml-apis
* stax-api
* asm-commons
* asm-tree
* wadl
* geronimo-jta_1.1_spec
* guice
* leveldbjni-all
* velocity
* jettison
* snappy-java
* jetty-all
* commons-dbcp

В HDInsight 3.x (HDP2.x) больше не существуют следующие зависимости:

* jdeb
* kfs
* sqlline
* ivy
* aspectjrt
* json
* core
* jdo2-api
* avro-mapred
* datanucleus-enhancer
* jsp
* commons-logging-api
* commons-math
* JavaEWAH
* aspectjtools
* javolution
* hdfsproxy
* hbase
* snappy

###Изменения версий

Между HDInsight 2.x (HDP1.x) и HDInsight 3.x (HDP2.x) были сделаны следующие изменения версий:

* metrics-core: [2.1.2] -> [3.0.0]
* derbynet: [10.4.2.0] -> [10.10.1.1]
* datanucleus: [rdbms-3.0.8] -> [rdbms-3.2.9]
* jasper-compiler: [5.5.12] -> [5.5.23]
* log4j: [1.2.15, 1.2.16] -> [1.2.16, 1.2.17]
* derbyclient: [10.4.2.0] -> [10.10.1.1]
* httpcore: [4.2.4] -> [4.2.5]
* hsqldb: [1.8.0.10] -> [2.0.0]
* jets3t: [0.6.1] -> [0.9.0]
* protobuf-java: [2.4.1] -> [2.5.0]
* derby: [10.4.2.0] -> [10.10.1.1]
* jasper: [runtime-5.5.12] -> [runtime-5.5.23]
* commons-daemon: [1.0.1] -> [1.0.13]
* datanucleus-core: [3.0.9] -> [3.2.10]
* datanucleus-api-jdo: [3.0.7] -> [3.2.6]
* zookeeper: [3.4.5.1.3.9.0-01320] -> [3.4.5.2.1.3.0-1948]
* bonecp: [0.7.1.RELEASE] -> [
* 0.8.0.RELEASE]


###Драйверы
Драйвер Java Database Connnectivity (JDBC) для SQL Server используется внутри HDInsight и не используется для внешних операций. Если вы хотите использовать Open Database Connectivity (ODBC) для подключения к HDInsight, используйте драйвер Microsoft Hive ODBC. Дополнительную информацию см. в разделе [Подключение Excel к HDInsight с помощью драйвера Microsoft Hive ODBC](hdinsight-connect-excel-hive-odbc-driver.md).


### Исправления ошибок ###

В этом выпуске были обновлены следующие версии HDInsight (исправлены некоторые ошибки):

* HDInsight 2,1 (HDP 1,3)
* HDInsight 3,0 (HDP 2,0)
* HDInsight 3.1 (HDP 2.1)


## Заметки о выпуске Hortonworks ##

Заметки о выпусках платформ данных Hortonworks (HDP), используемых версиями кластеров HDInsight, доступны в следующих расположениях:

* HDInsight версии 3.1 использует дистрибутив Hadoop на основе [Нortonworks Data Platform 2.1.7][hdp-2-1-7]. Это кластер Hadoop по умолчанию, который создается при использовании портала Azure после 07.11.2014. Кластеры HDInsight 3.1, созданные до 07.11.2014, основаны на платформе [Hortonworks Data Platform 2.1.1][hdp-2-1-1].

* HDInsight версии 3.0 использует дистрибутив Hadoop на основе [Нortonworks Data Platform 2.0][hdp-2-0-8].

* HDInsight версии 2.1 использует дистрибутив Hadoop на основе [Нortonworks Data Platform 1.3][hdp-1-3-0].

* HDInsight версии 1.6 использует дистрибутив Hadoop на основе [Нortonworks Data Platform 1.1][hdp-1-1-0].

[hdp-2-1-7]: http://docs.hortonworks.com/HDPDocuments/HDP2/HDP-2.1.7-Win/bk_releasenotes_HDP-Win/content/ch_relnotes-HDP-2.1.7.html

[hdp-2-1-1]: http://docs.hortonworks.com/HDPDocuments/HDP2/HDP-2.1.1/bk_releasenotes_hdp_2.1/content/ch_relnotes-hdp-2.1.1.html

[hdp-2-0-8]: http://docs.hortonworks.com/HDPDocuments/HDP2/HDP-2.0.8.0/bk_releasenotes_hdp_2.0/content/ch_relnotes-hdp2.0.8.0.html

[hdp-1-3-0]: http://docs.hortonworks.com/HDPDocuments/HDP1/HDP-1.3.0/bk_releasenotes_hdp_1.x/content/ch_relnotes-hdp1.3.0_1.html

[hdp-1-1-0]: http://docs.hortonworks.com/HDPDocuments/HDP1/HDP-Win-1.1/bk_releasenotes_HDP-Win/content/ch_relnotes-hdp-win-1.1.0_1.html

[nuget-link]: https://www.nuget.org/packages/Microsoft.WindowsAzure.Management.HDInsight/

[webpi-link]: http://go.microsoft.com/?linkid=9811175&clcid=0x409

[hdinsight-install-spark]: ../hdinsight-hadoop-spark-install/
[hdinsight-r-scripts]: ../hdinsight-hadoop-r-scripts/

<!--HONumber=54-->