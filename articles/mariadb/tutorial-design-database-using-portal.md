---
title: Руководство по проектированию службы "База данных Azure для MariaDB" с помощью портала Azure
description: Это руководство содержит сведения о создании базы данных и сервера Базы данных Azure для MariaDB и управлении ими с помощью портала Azure.
author: ajlam
ms.author: andrela
editor: jasonwhowell
services: mariadb
ms.service: mariadb
ms.topic: tutorial
ms.date: 09/24/2018
ms.custom: mvc
ms.openlocfilehash: 2e1cd0d28c544b2e4c5dc86c7a6db39a5d20c1ed
ms.sourcegitcommit: 32d218f5bd74f1cd106f4248115985df631d0a8c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/24/2018
ms.locfileid: "46991017"
---
# <a name="tutorial-design-an-azure-database-for-mariadb-database-using-the-azure-portal"></a>Руководство по проектированию базы данных в службе "База данных Azure для MariaDB" с помощью портала Azure
База данных Azure для MariaDB — это управляемая служба, которая позволяет вам запускать, администрировать и масштабировать высокодоступные базы данных MySQL в облаке. С помощью портала Azure можно легко управлять сервером и проектировать базы данных.

Из этого руководства вы узнаете, как с помощью портала Azure выполнять следующие операции:

> [!div class="checklist"]
> * создание Базы данных Azure для MariaDB;
> * настройка брандмауэра сервера;
> * использование программы командной строки MySQL для создания базы данных;
> * Загрузка примера данных
> * Запрос данных
> * Обновление данных
> * восстановление данных.

## <a name="sign-in-to-the-azure-portal"></a>Вход на портал Azure
Откройте предпочитаемый веб-браузер и перейдите на [портал Microsoft Azure](https://portal.azure.com/). Введите свои учетные данные для входа на портал. Панель мониторинга службы является представлением по умолчанию.

## <a name="create-an-azure-database-for-mariadb-server"></a>Создание сервера Базы данных Azure для MariaDB
Сервер Базы данных Azure для MariaDB создается с определенным набором вычислительных ресурсов и ресурсов хранения<!--[compute and storage resources](./concepts-compute-unit-and-storage.md)-->. Он создается в [группе ресурсов Azure](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-overview).

1. Нажмите кнопку **Создать ресурс** (+) в левом верхнем углу окна портала.

2. Чтобы найти службу, в поле поиска введите **База данных Azure для MariaDB**.
   
   ![Переход к службе MySQL](./media/tutorial-design-database-using-portal/1-Navigate-to-mariadb.png)

3. Щелкните элемент **База данных Azure для MariaDB**, а затем нажмите кнопку **Создать**. Заполните форму Базу данных Azure для MariaDB.
   
   ![Создание формы](./media/tutorial-design-database-using-portal/2-create-form.png)

    **Параметр** | **Рекомендуемое значение** | **Описание поля** 
    ---|---|---
    Имя сервера | Уникальное имя сервера | Выберите уникальное имя, идентифицирующее сервер Базы данных Azure для MariaDB. Например, mydemoserver. Имя домена *mariadb.database.azure.com* добавляется к указанному имени сервера. Имя сервера может содержать только строчные буквы, цифры и знак дефиса (-). Его длина должна составлять от 3 до 63 символов.
    Подписка | Ваша подписка | Выберите подписку Azure, которую вы хотите использовать для сервера. Если у вас есть несколько подписок, выберите ту, в которой взимается плата за использование ресурса.
    Группа ресурсов | *myresourcegroup* | Укажите имя новой или имеющейся группы ресурсов.    Группа ресурсов|*myresourcegroup*| Новое имя группы ресурсов или уже имеющееся из подписки.
    Выбор источника | *Пустой* | Чтобы создать сервер с нуля, выберите *Пустой*. (Выберите *Резервное копирование* при создании сервера из геоизбыточного хранилища резервных копий существующего сервера Базы данных Azure для MariaDB).
    учетные данные администратора сервера для входа; | myadmin | Учетная запись для входа, используемая при подключении к серверу. Не используйте для имени учетной записи администратора такие варианты: **azure_superuser**, **admin**, **administrator**, **root**, **guest** или **public**.
    Пароль | *По своему выбору* | Укажите пароль учетной записи администратора сервера. Его длина должна составлять от 8 до 128 символов. Пароль должен содержать символы из трех следующих категорий: прописные латинские буквы, строчные латинские буквы, цифры (0–9) и другие символы (!, $, #, % и т. д.).
    Подтверждение пароля. | *По своему выбору*| Подтвердите пароль учетной записи администратора.
    Расположение | *Ближайший к пользователям регион*| Выберите расположение, наиболее близкое к пользователям или другим приложениям Azure.
    Version (версия) | *Последняя версия*| Последняя версия (если нет особых требований использовать другую версию).
    Ценовой уровень | **Общего назначения**, **Поколение 5**, **2 виртуальных ядра**, **5 ГБ**, **7 дней**, **Геоизбыточное хранилище** | Конфигурации вычислительных ресурсов, хранилища и резервного копирования для нового сервера. Выберите **ценовую категорию**. Затем выберите вкладку **Общего назначения**. *Поколение 5*, *2 виртуальных ядра*, *5 ГБ*, и *7 дней* — это значения по умолчанию для параметров **Поколение вычислительных ресурсов**, **Виртуальное ядро**, **Хранилище** и **Срок хранения резервных копий**. Можно оставить эти ползунки как есть. Чтобы включить резервные копии сервера в географически избыточном хранилище, выберите **Геоизбыточное хранилище** в **параметрах избыточности резервного копирования**. Щелкните **ОК**, чтобы сохранить ценовую категорию. На следующем снимке экрана показаны выбранные параметры.
    
   ![Ценовой уровень](./media/tutorial-design-database-using-portal/3-pricing-tier.png)

4. Нажмите кнопку **Создать**. Через несколько минут в облаке будет создан сервер Базы данных Azure для MariaDB. На панели инструментов выберите **Уведомления**, чтобы отслеживать процесс развертывания.

## <a name="configure-firewall"></a>Настройка брандмауэра
Базы данных Azure для MariaDB защищены брандмауэром. По умолчанию все подключения к серверу и базам данных на сервере отклоняются. Перед первым подключением к Базе данных Azure для MariaDB настройте брандмауэр, чтобы добавить IP-адрес общедоступной сети клиентского компьютера (или диапазон IP-адресов).

1. Щелкните созданный сервер и выберите **Безопасность подключения**.
   
   ![Безопасность подключения](./media/tutorial-design-database-using-portal/1-Connection-security.png)
2. Здесь вы можете **добавить свой IP-адрес** или настроить правила брандмауэра. Не забудьте щелкнуть **Сохранить** после создания правил.
Теперь вы можете подключиться к серверу с помощью программы командной строки MySQL или с помощью инструмента с графическим пользовательским интерфейсом MySQL Workbench.

> [!TIP]
> Сервер Базы данных Azure для MariaDB обменивается данными через порт 3306. Если вы пытаетесь подключиться из корпоративной сети, исходящий трафик через порт 3306 может быть запрещен сетевым брандмауэром. В таком случае вы не сможете подключиться к серверу Базы данных SQL Azure для MariaDB, пока ваш ИТ-отдел не откроет порт 3306.

## <a name="get-connection-information"></a>Получение сведений о подключении
Полное **имя сервера** и **имя для входа администратора сервера** для сервера Базы данных Azure для MariaDB можно получить на портале Azure. Полное имя сервера используется для подключения к серверу с помощью программы командной строки MySQL. 

1. На [портале Azure](https://portal.azure.com/) в меню слева щелкните **Все ресурсы**, введите имя и найдите свой сервер Базы данных Azure для MariaDB. Выберите имя сервера, чтобы просмотреть сведения о нем.

2. На странице **Обзор** запишите **имя сервера** и **имя для входа администратора сервера**. Вы можете нажать кнопку "Копировать" рядом с каждым полем, чтобы скопировать его значение в буфер обмена.
   ![4.2. Свойства сервера](./media/tutorial-design-database-using-portal/2-server-properties.png)

В этом примере серверу присвоено имя *mydemoserver.mariadb.database.azure.com*, а имя для входа администратора сервера — *myadmin@mydemoserver*.

## <a name="connect-to-the-server-using-mysql"></a>Подключение к серверу с помощью MySQL
Используйте [программу командной строки MySQL](https://dev.mysql.com/doc/refman/5.7/en/mysql.html), чтобы подключиться к серверу Базы данных Azure для MariaDB. Можно запустить программу командной строки MySQL из Azure Cloud Shell в браузере или на собственном компьютере, используя локальные инструменты MySQL. Для запуска Azure Cloud Shell нажмите кнопку `Try It` в блоке кода в этой статье или перейдите на портал Azure и щелкните значок `>_` на панели инструментов справа вверху. 

Введите команду для подключения:
```azurecli-interactive
mysql -h mydemoserver.mariadb.database.azure.com -u myadmin@mydemoserver -p
```

## <a name="create-a-blank-database"></a>Создание пустой базы данных
Подключившись к серверу, создайте пустую базу данных для работы.
```sql
CREATE DATABASE mysampledb;
```

Выполните следующую команду в командной строке, чтобы подключиться к созданной базе данных:
```sql
USE mysampledb;
```

## <a name="create-tables-in-the-database"></a>Создание таблиц в базе данных
Теперь, когда вы знаете, как подключиться к Базе данных Azure для MariaDB, можно выполнить некоторые основные задачи.

Сначала создайте таблицу и заполните ее некоторыми данными. Давайте создадим таблицу, в которой хранятся данные инвентаризации.
```sql
CREATE TABLE inventory (
    id serial PRIMARY KEY, 
    name VARCHAR(50), 
    quantity INTEGER
);
```

## <a name="load-data-into-the-tables"></a>Загрузка данных в таблицу
Теперь, когда таблица создана, мы можем вставить в нее данные. Чтобы вставить некоторые строки данных, в открытом окне командной строки выполните следующий запрос:
```sql
INSERT INTO inventory (id, name, quantity) VALUES (1, 'banana', 150); 
INSERT INTO inventory (id, name, quantity) VALUES (2, 'orange', 154);
```

Итак, в созданной ранее таблице содержится две строки данных.

## <a name="query-and-update-the-data-in-the-tables"></a>Запрос и обновление данных в таблицах
Чтобы извлечь сведения из таблицы базы данных, выполните приведенный ниже запрос.
```sql
SELECT * FROM inventory;
```

Вы можете также обновить данные в таблицах, выполнив следующую команду:
```sql
UPDATE inventory SET quantity = 200 WHERE name = 'banana';
```

При извлечении данных строка будет обновляться соответствующим образом.
```sql
SELECT * FROM inventory;
```

## <a name="restore-a-database-to-a-previous-point-in-time"></a>Восстановление базы данных до предыдущей точки во времени
Предположим, вы случайно удалили важную таблицу из базы данных и вам не удается легко восстановить данные. База данных Azure для MariaDB позволяет восстановить сервер до точки во времени, создавая копию баз данных на новом сервере. Вы можете восстановить удаленные данные с помощью нового сервера. Указанные ниже шаги позволяют восстановить сервер до точки во времени, когда была создана таблица.

1. На портале Azure найдите Базу данных Azure для MariaDB. На странице **Обзор** на панели инструментов щелкните **Восстановить**. Откроется страница "Восстановление".

   ![10.1. Восстановление базы данных](./media/tutorial-design-database-using-portal/1-restore-a-db.png)

2. Заполните форму **Восстановление**, указав следующие сведения.
   
   ![10.2. Форма восстановления](./media/tutorial-design-database-using-portal/2-restore-form.png)
   
   - **Точка восстановления**. Выберите точку во времени, до которой требуется восстановить данные, в пределах указанного периода времени. Обязательно преобразуйте свое местное время в формат UTC.
   - **Восстановить на новом сервере**. Укажите имя нового сервера, на который нужно восстановить данные.
   - **Расположение**. Регион совпадает с исходным сервером и не может быть изменен.
   - **Ценовая категория**. Ценовая категория совпадает с исходным сервером и не может быть изменена.
   
3. Чтобы восстановить сервер до точки во времени (<!--[restore to a point in time](./howto-restore-server-portal.md)-->) перед удалением таблицы, нажмите кнопку **OК**. Восстановление сервера приведет к созданию новой копии сервера на заданный момент времени. 

<!--## Next steps
In this tutorial, you use the Azure portal to learned how to:

> [!div class="checklist"]
> * Create an Azure Database for MariaDB
> * Configure the server firewall
> * Use mysql command-line tool to create a database
> * Load sample data
> * Query data
> * Update data
> * Restore data

><> [!div class="nextstepaction"]
> [How to connect applications to Azure Database for MariaDB](./howto-connection-string.md)-->
