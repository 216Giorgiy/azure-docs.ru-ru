<properties
 pageTitle="Обзор центра IoT Azure | Microsoft Azure"
 description="Обзор службы центра IoT Azure, включая подключения устройств, шаблоны взаимодействия и шаблон взаимодействия с поддержкой службы."
 services="iot-hub"
 documentationCenter=""
 authors="dominicbetts"
 manager="timlt"
 editor=""/>

<tags
 ms.service="iot-hub"
 ms.devlang="na"
 ms.topic="article"
 ms.tgt_pltfrm="na"
 ms.workload="na"
 ms.date="11/09/2015"
 ms.author="dobett"/>

# Что такое центр IoT в Azure?

Добро пожаловать в центр IoT Azure. В этой статье представлен обзор центра IoT Azure и содержатся сведения о том, как вам может пригодиться эта служба при внедрении решения Интернета вещей (IoT).

Центр IoT Azure — это полностью управляемая служба, которая обеспечивает надежный и защищенный двунаправленный обмен данными между миллионами устройств IoT и серверной частью решения. Центр IoT Azure обеспечивает:

- глобальный надежный обмен сообщениями между облаком и устройством в обоих направлениях;
- безопасную связь — используются учетные данные безопасности, уникальные для каждого устройства, и контроль доступа;
- простое подключение устройств, так как используются библиотеки устройств для большинства популярных языков и платформ.

![Центр IoT как облачный шлюз][img-architecture]

## Трудности, связанные с взаимодействием устройств IoT

Центр IoT и библиотеки позволяют обеспечить надежное и безопасное подключение устройств к серверной части решения. Устройства IoT:

- часто представляют собой встраиваемые системы, у которых отсутствует оператор;
- могут располагаться в удаленных расположениях, там где физический доступ слишком дорог;
- могут быть доступны только через серверную часть решения;
- могут иметь ограниченную мощность и (или) объем ресурсов для обработки;
- могут иметь временное, медленное или дорогостоящее подключение к сети;
- могут требовать использования закрытых, пользовательских или отраслевых протоколов приложения;
- могут создаваться с помощью большого числа популярных аппаратных и программных платформ.

В дополнение к изложенным выше требованиям любое решение IoT также должно быть масштабируемым, безопасным и надежным. В итоге формируется набор требований к подключению, выполнить которые с помощью традиционных технологий, таких как веб-контейнеры и брокеры сообщений, очень трудно.

## Почему нужно использовать центр IoT Azure

Центр IoT Azure учитывает сложности, связанные с подключением устройств, в следующих аспектах.

-   **Проверка подлинности для каждого устройства и безопасное подключение**. Вы можете предусмотреть для каждого устройства собственный ключ безопасности, используемый для подключения к центру IoT. [Реестр удостоверений центра IoT][lnk-devguide-identityregistry] хранит удостоверения устройств и ключи в решении. Серверная часть решения приложения может добавлять отдельные устройства в белый или черный список, тем самым полностью контролируя доступ устройств.

-   **Обширный набор библиотек устройств**. Пакеты SDK для устройств IoT Azure доступны и поддерживаются для различных языков и платформ: на языке C для многих дистрибутивов Linux, Windows и операционных систем реального времени. Кроме того, пакеты SDK для устройств IoT Azure поддерживают управляемые языки, такие как C#, Java и JavaScript.

-   **Протоколы IoT и расширяемость**. Если в вашем решении нельзя использовать библиотеки устройств, центр IoT Azure предоставляет открытый протокол, который позволяет устройствам использовать протоколы HTTP 1.1 и AMQP 1.0. Кроме того, с помощью [шлюза протокола Azure IoT][protocol-gateway] с открытым исходным кодом вы можете расширить центр IoT Azure для поддержки MQTT версии 3.1.1. Вы можете запускать шлюз протокола Azure IoT в облачной или локальной среде. Кроме того, вы можете расширить его для поддержки пользовательских протоколов.

-   **Масштабирование.** Центр IoT Azure масштабируется до нескольких миллионов одновременно подключенных устройств и нескольких миллионов событий в секунду.

Эти преимущества являются общими для многих шаблонов взаимодействия. В настоящее время центр IoT позволяет реализовать следующие шаблоны взаимодействия.

-   **Прием данных от устройств в облако на основе событий.** Центр IoT может надежно получать миллионы событий в секунду от ваших устройств. Затем он может обработать их с помощью модуля обработчика событий "горячего" анализа. Кроме того, он может сохранить их для "холодного" анализа. Центр IoT сохраняет данные о событиях до семи дней, что позволяет гарантировать надежную обработку и смягчить пиковые нагрузки.

-   **Надежный обмен сообщениями (или *командами*) с облака на устройство.** Серверная часть решения может использовать центр IoT, чтобы отправлять на отдельные устройства сообщения, доставка которых гарантируется хотя бы один раз. Каждое сообщение имеет собственное время жизни, и серверная часть может запрашивать уведомления как о доставке, так и об истечении срока действия. Это позволяет полностью проследить жизненный цикл сообщения, отправляемого из облака в устройство. Затем вы можете реализовать бизнес-логику, которая включает в себя операции, выполняемые на устройствах.

С помощью специальных возможностей центра IoT вы можете реализовать другие распространенные шаблоны, такие как передача и скачивание файла. Эти возможности включают согласованное управление удостоверениями устройств, наблюдение за подключением и масштабирование.

В статье [Сравнение центра IoT и концентраторов событий][lnk-compare] описываются ключевые различия между двумя этими службами и выделяются преимущества использования центра IoT в решениях IoT.

## Шлюзы

Шлюз в решении IoT обычно является [шлюзом протокола][lnk-gateway], развернутым в облаке, или [шлюзом поля][lnk-field-gateway], развернутым локально с устройствами. Шлюз протокола выполняет преобразование протоколов, например MQTT в AMQP. Полевой шлюз предоставляет службы локального управления для устройств. Он может представлять собой специализированное устройство или программу, работающую на существующем оборудовании. Оба типа шлюза выступают в качестве посредников между устройствами и центром IoT.

Полевой шлюз отличается от обычного маршрутизатора трафика (например, устройства преобразования сетевых адресов (NAT) или брандмауэра) тем, что ему отведена активная роль в управлении доступом и потоком информации в решении.

Решение может включать в себя шлюзы протоколов и полевые шлюзы.

## Принципы работы центра IoT

Центр IoT Azure реализует шаблон [взаимодействия с поддержкой службы][lnk-service-assisted-pattern], чтобы выступать в качестве посредника во взаимодействии между устройствами и серверной частью решения. Задача взаимодействия с поддержкой службы заключается в установлении путей доверенного двунаправленного взаимодействия между системой управления, такой как центр IoT, и специализированными устройствами, которые разворачиваются в недоверенном физическом пространстве. Данный шаблон устанавливает следующие принципы.

- Безопасность имеет приоритет над всеми другими возможностями.
- Устройства не принимают сетевой информации, которую они не запрашивали. Устройство устанавливает все подключения и маршруты только в исходящем режиме. Чтобы устройство получило команду от серверной части, оно должно регулярно инициировать подключение для проверки любых команд, ожидающих обработки.
- Устройства должны подключаться и устанавливать маршруты только с общеизвестными службами, которые являются их партнерами, такими как центр IoT.
- Пути взаимодействия между устройством и службой и устройством и шлюзом защищены на уровне протокола приложения.
- Авторизация и проверка подлинности системного уровня основаны на удостоверениях устройств. Они позволяют практически мгновенно отзывать учетные данные и разрешения для доступа.
- Двунаправленное взаимодействие для устройств, которые подключаются нерегулярно из-за проблем с питанием или подключением, упрощается путем хранения команд и уведомлений для устройства до того момента, пока оно не подключится для их получения. Центр IoT хранит отправляемые команды в соответствующих очередях для каждого устройства.
- Полезные данные приложения можно защитить отдельно для безопасной передачи через шлюзы к конкретной службе.

Шаблон взаимодействия с поддержкой службы широко используется в мобильных устройствах для реализации служб push-уведомлений, таких как [службы push-уведомлений Windows][lnk-wns], [Google Cloud Messaging][lnk-google-messaging] и [Служба push-уведомлений Apple][lnk-apple-push].

## Дальнейшие действия

Дополнительные сведения о центре IoT в Azure см. по следующим ссылкам:

* [Приступая к работе с центром IoT][lnk-get-started]
* [Подключение устройства][lnk-connect-device]
* [Обработка сообщений с устройства в облако][lnk-d2c]

[img-architecture]: media/iot-hub-what-is-iot-hub/hubarchitecture.png

[lnk-get-started]: iot-hub-csharp-csharp-getstarted.md
[lnk-connect-device]: https://azure.microsoft.com/develop/iot/
[lnk-d2c]: iot-hub-csharp-csharp-process-d2c.md
[protocol-gateway]: https://github.com/Azure/azure-iot-protocol-gateway/blob/master/README.md
[lnk-service-assisted-pattern]: http://blogs.msdn.com/b/clemensv/archive/2014/02/10/service-assisted-communication-for-connected-devices.aspx "Взаимодействие с поддержкой службы, запись в блоге Клеменса Вастерса (Clemens Vasters)"
[lnk-compare]: iot-hub-compare-event-hubs.md
[lnk-gateway]: iot-hub-protocol-gateway.md
[lnk-field-gateway]: iot-hub-guidance.md#field-gateways
[lnk-devguide-identityregistry]: iot-hub-devguide.md#identityregistry
[lnk-wns]: https://msdn.microsoft.com/library/windows/apps/mt187203.aspx
[lnk-google-messaging]: https://developers.google.com/cloud-messaging/
[lnk-apple-push]: https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Chapters/ApplePushService.html#//apple_ref/doc/uid/TP40008194-CH100-SW9

<!---HONumber=AcomDC_1223_2015-->