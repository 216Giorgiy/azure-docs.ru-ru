.<properties
 pageTitle="Метрики диагностики центра IoT"
 description="Обзор метрик центра IoT Azure, позволяющих пользователям оценивать общую работоспособность их ресурсов."
 services="iot-hub"
 documentationCenter=""
 authors="nberdy"
 manager="timlt"
 editor=""/>

.<tags
 ms.service="iot-hub"
 ms.devlang="na"
 ms.topic="article"
 ms.tgt_pltfrm="na"
 ms.workload="na"
 ms.date="08/11/2016"
 ms.author="nberdy"/>

# Общие сведения о метриках диагностики

Метрики диагностики предоставляют более качественные данные о состоянии ресурсов Azure в вашей подписке. Метрики позволяют оценивать общую работоспособность службы и подключенных к ней устройств. Доступные пользователям статистические данные имеют важное значение, поскольку благодаря им вы знаете, что происходит с центром IoT, и можете устранять основные проблемы без обращения в службу поддержки Azure.

Метрики диагностики можно включить на портале Azure.

## Включение метрик диагностики

1. Создайте центр IoT. Инструкции по созданию центра IoT можно найти в руководстве [по началу работы][lnk-get-started].

2. Откройте колонку центра IoT. В колонке щелкните **Диагностика**.

    .![][1]

3. Настройте диагностику, задав для состояния значение **Вкл.** и выбрав учетную запись хранения для хранения данных диагностики. Установите флажок **Метрики**, а затем нажмите кнопку **Сохранить**. Обратите внимание, что учетную запись хранения следует создать заранее, а за хранилище взимается отдельная плата. Вы также можете отправлять диагностические данные в конечную точку концентраторов событий.

    .![][2]

4. После настройки диагностики вернитесь к колонке **Обзор** центра IoT. Сведения о метриках добавляются в раздел **Мониторинг** колонки. После щелчка диаграммы откроется панель метрик, где можно просмотреть сводку метрик для центра IoT и изменить выбор метрик, отображаемых на диаграмме. На основе значений метрик можно настроить оповещения.

    .![][3]

## Метрики и их использование

Центр IoT предоставляет несколько метрик для получения представления о состоянии работоспособности центра и общем количестве устройств, подключенных к центру. Для формирования более полной картины о состоянии центра IoT можно объединить данные из нескольких метрик. В следующей таблице описаны метрики, отслеживаемые центром IoT, а также связь каждой метрики с общим состоянием центра IoT.

| Метрика | Описание метрики | Назначение метрики |
| ---- | ---- | ---- |
| d2c.telemetry.ingress.allProtocol | Количество сообщений, отправленных со всех устройств | Общие сведения о данных отправленных сообщений |
| d2c.telemetry.ingress.success | Количество всех сообщений, успешно доставленных в центр | Общие сведения о входящих сообщениях, успешно доставленных в центр |
| c2d.commands.egress.complete.success | Количество всех командных сообщений, завершенных получающим устройством, на всех устройствах. | Вместе с метриками прерывания и отклонения приводится обзор общего процента успешных команд отправки из облака на устройство |
| c2d.commands.egress.abandon.success | Количество всех сообщений, успешно прерванных получающим устройством, на всех устройствах | Выделяет потенциальные проблемы, если сообщения прерываются чаще, чем ожидалось |
| c2d.commands.egress.reject.success | Количество всех сообщений, успешно отклоненных получающим устройством, на всех устройствах | Выделяет потенциальные проблемы, если сообщения отклоняются чаще, чем ожидалось |
| devices.totalDevices | Среднее, минимальное и максимальное количество устройств, зарегистрированных в центре IoT | Количество устройств, зарегистрированных в центре |
| devices.connectedDevices.allProtocol | Среднее, минимальное и максимальное количество одновременно подключенных устройств | Обзор количества устройств, подключенных к центру |

## Дальнейшие действия

Вы ознакомились с общими сведениями о метриках диагностики. Чтобы узнать больше об управлении центром Azure IoT, перейдите по этим ссылкам:

- [Мониторинг операций][lnk-monitor]
- [Настройка и управление доступом к центру IoT][lnk-itpro]

Для дальнейшего изучения возможностей центра IoT см. следующие статьи:

- [Разработка решения][lnk-design]
- [Руководство разработчика по центру Azure IoT (IoT — Интернет вещей)][lnk-devguide]
- [Обзор управления устройствами центра IoT с помощью примера пользовательского интерфейса][lnk-dmui]
- [Пакет SDK для шлюза IoT (бета-версия): отправка сообщений с устройства в облако через виртуальное устройство с помощью Linux][lnk-gateway]

<!-- Links and images -->
[1]: media/iot-hub-metrics/enable-metrics-1.png
[2]: media/iot-hub-metrics/enable-metrics-2.png
[3]: media/iot-hub-metrics/enable-metrics-3.png

[lnk-get-started]: iot-hub-csharp-csharp-getstarted.md
[lnk-operations-monitoring]: iot-hub-operations-monitoring.md
[lnk-scaling]: iot-hub-scaling.md
[lnk-dr]: iot-hub-ha-dr.md

[lnk-monitor]: iot-hub-operations-monitoring.md
[lnk-itpro]: iot-hub-itpro-info.md

[lnk-design]: iot-hub-guidance.md
[lnk-devguide]: iot-hub-devguide.md
[lnk-dmui]: iot-hub-device-management-ui-sample.md
[lnk-gateway]: iot-hub-linux-gateway-sdk-simulated-device.md

<!---HONumber=AcomDC_0817_2016-->