---
title: Использование метрик для мониторинга Центра Интернета вещей Azure | Документация Майкрософт
description: Использование метрик Центра Интернета вещей Azure для оценки и отслеживания общей работоспособности центров Интернета вещей.
author: nberdy
ms.service: iot-hub
services: iot-hub
ms.topic: conceptual
ms.date: 08/25/2017
ms.author: nberdy
ms.openlocfilehash: 34a561c5bb523b914f4b88dc8c6edc2bd00627d0
ms.sourcegitcommit: ae45eacd213bc008e144b2df1b1d73b1acbbaa4c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/01/2018
ms.locfileid: "50741935"
---
# <a name="understand-iot-hub-metrics"></a>Общие сведения о метриках Центра Интернета вещей

Метрики Центра Интернета вещей предоставляют более качественные данные о состоянии ресурсов Интернета вещей Azure в вашей подписке Azure. Метрики Центра Интернета вещей позволяют оценивать общую работоспособность службы Центра Интернета вещей и подключенных к ней устройств. Доступные пользователям статистические данные имеют важное значение, поскольку благодаря им вы знаете, что происходит с центром IoT, и можете устранять основные проблемы без обращения в службу поддержки Azure.

Метрики включены по умолчанию. Метрики Центра Интернета вещей можно просмотреть на портале Azure.

## <a name="how-to-view-iot-hub-metrics"></a>Как просмотреть метрики Центра Интернета вещей

1. Создайте Центр Интернета вещей. Инструкции по созданию Центра Интернета вещей см. в руководстве [Краткое руководство. Отправка данных телеметрии с устройства в Центр Интернета вещей и чтение данных телеметрии из центра с помощью внутреннего приложения (C#)](quickstart-send-telemetry-dotnet.md).

2. Откройте колонку центра IoT. Щелкните **Метрики**.
   
    ![Снимок экрана, показывающий расположение параметра метрики на странице ресурсов центра Интернета вещей](./media/iot-hub-metrics/enable-metrics-1.png)

3. В колонке метрик можно просмотреть метрики Центра Интернета вещей и создать настраиваемые представления на их основе. 
   
    ![Снимок экрана со страницей метрик для Центра Интернета вещей](./media/iot-hub-metrics/enable-metrics-2.png)
    
4. Вы можете отправлять данные метрик в конечную точку Центров событий или учетную запись хранения Azure. Для этого щелкните **Параметры диагностики**, а затем — **Add diagnostic setting** (Добавить параметр диагностики).

   ![Снимок экрана, показывающий, где находится кнопка "Параметры диагностики"](./media/iot-hub-metrics/enable-metrics-3.png)

## <a name="iot-hub-metrics-and-how-to-use-them"></a>Метрики Центра Интернета вещей и их использование

Центр Интернета вещей предоставляет несколько метрик для получения представления о состоянии работоспособности центра и общем количестве подключенных устройств. Для формирования более полной картины о состоянии центра IoT можно объединить данные из нескольких метрик. В следующей таблице описаны метрики, отслеживаемые центром IoT, а также связь каждой метрики с общим состоянием центра IoT.

|Метрика|Отображаемое имя метрики|Единица измерения|Тип статистической обработки|ОПИСАНИЕ|Измерения|
|---|---|---|---|---|---|
|d2c<br>.telemetry<br>.ingress.<br>allProtocol|Число предпринятых попыток отправки сообщений телеметрии.|Count|Всего|Число предпринятых попыток отправки в Центр Интернета вещей сообщений телеметрии из устройства в облако.|Нет измерений|
|d2c<br>.telemetry<br>.ingress<br>.success|Число отправленных сообщений телеметрии.|Count|Всего|Число успешно отправленных в Центр Интернета вещей сообщений телеметрии из устройства в облако.|Нет измерений|
|c2d<br>.commands<br>.egress<br>.complete<br>.success|Завершенные команды.|Count|Всего|Число успешно завершенных устройством команд, отправленных из облака.|Нет измерений|
|c2d<br>.commands<br>.egress<br>.abandon<br>.success|Прерванные команды.|Count|Всего|Число прерванных устройством команд, отправленных из облака.|Нет измерений|
|c2d<br>.commands<br>.egress<br>.reject<br>.success|Отклоненные команды.|Count|Всего|Число отмененных устройством команд, отправленных из облака.|Нет измерений|
|устройства<br>.totalDevices|Total devices (deprecated) (Всего устройств (не рекомендуется))|Count|Всего|Число устройств, зарегистрированных в Центре Интернета вещей.|Нет измерений|
|устройства<br>.connectedDevices<br>.allProtocol|Connected devices (deprecated) (Подключенные устройства (не рекомендуется)) |Count|Всего|Число устройств, подключенных к Центру Интернета вещей.|Нет измерений|
|d2c<br>.telemetry<br>.egress<br>.success|Routing: telemetry messages delivered (Маршрутизация: доставлено сообщений телеметрии)|Count|Всего|Количество раз, когда сообщения были успешно доставлены на все конечные точки с помощью маршрутизации Центра Интернета вещей. Если сообщение направляется на несколько конечных точек, это значение увеличивается на единицу для каждой успешной доставки. Если сообщение доставлено несколько раз на одну конечную точку, это значение увеличивается на единицу для каждой успешной доставки.|Нет измерений|
|d2c<br>.telemetry<br>.egress<br>.dropped|Routing: telemetry messages dropped (Маршрутизация: отброшено сообщений телеметрии) |Count|Всего|Количество раз, когда сообщения удалялись подсистемой маршрутизации Центра Интернета вещей из-за неработоспособности конечных точек. В этом значении не учитываются сообщения, доставленные через резервный маршрут, так как отброшенные сообщения туда не доставляются.|Нет измерений|
|d2c<br>.telemetry<br>.egress<br>.orphaned|Routing: telemetry messages orphaned (Маршрутизация: потеряно сообщений телеметрии) |Count|Всего|Количество раз, когда сообщения были потеряны подсистемой маршрутизации Центра Интернета вещей из-за того, что они не соответствуют никаким правилам маршрутизации (включая резервное правило). |Нет измерений|
|d2c<br>.telemetry<br>.egress<br>.invalid|Routing: telemetry messages incompatible (Маршрутизация: несовместимых сообщений телеметрии)|Count|Всего|Количество раз, когда подсистеме маршрутизации Центра Интернета вещей не удалось доставить сообщения из-за несовместимости с конечной точкой. В это значение не входят повторные попытки.|Нет измерений|
|d2c<br>.telemetry<br>.egress<br>.fallback|Routing: messages delivered to fallback (Маршрутизация: доставлено сообщений на резервный маршрут)|Count|Всего|Количество раз, когда подсистема маршрутизации Центра Интернета вещей доставляла сообщения на конечную точку, связанную с резервным маршрутом.|Нет измерений|
|d2c<br>.endpoints<br>.egress<br>.eventHubs|Routing: messages delivered to Event Hub (Маршрутизация: доставлено сообщений в концентратор событий)|Count|Всего|Количество раз, когда подсистема маршрутизации Центра Интернета вещей успешно доставила сообщения на конечные точки концентратора событий.|Нет измерений|
|d2c<br>.endpoints<br>.latency<br>.eventHubs|Routing: message latency for Event Hub (Маршрутизация: задержка сообщений для концентратора событий)|Миллисекунды|Средняя|Средняя задержка (в миллисекундах) между поступлением сообщения в Центр Интернета вещей и его поступлением на конечную точку концентратора событий.|Нет измерений|
|d2c<br>.endpoints<br>.egress<br>.serviceBusQueues|Routing: messages delivered to Service Bus Queue (Маршрутизация: доставлено сообщений в очередь служебной шины)|Count|Всего|Количество раз, когда подсистема маршрутизации Центра Интернета вещей успешно доставила сообщения на конечные точки очереди служебной шины.|Нет измерений|
|d2c<br>.endpoints<br>.latency<br>.serviceBusQueues|Routing: message latency for Service Bus Queue (Маршрутизация: задержка сообщений для очереди служебной шины)|Миллисекунды|Средняя|Средняя задержка (в миллисекундах) между поступлением сообщения в Центр Интернета вещей и поступлением сообщения телеметрии на конечную точку очереди служебной шины.|Нет измерений|
|d2c<br>.endpoints<br>.egress<br>.serviceBusTopics|Routing: messages delivered to Service Bus Topic (Маршрутизация: доставлено сообщений в раздел служебной шины)|Count|Всего|Количество раз, когда подсистема маршрутизации Центра Интернета вещей успешно доставила сообщения на конечные точки раздела служебной шины.|Нет измерений|
|d2c<br>.endpoints<br>.latency<br>.serviceBusTopics|Routing: message latency for Service Bus Topic (Маршрутизация: задержка сообщений для раздела служебной шины)|Миллисекунды|Средняя|Средняя задержка (в миллисекундах) между поступлением сообщения в Центр Интернета вещей и поступлением сообщения телеметрии на конечную точку раздела служебной шины.|Нет измерений|
|d2c<br>.endpoints<br>.egress<br>.builtIn<br>.events|Routing: messages delivered to messages/events (Маршрутизация: доставлено сообщений на конечную точку messages/events)|Count|Всего|Количество раз, когда подсистема маршрутизации Центра Интернета вещей успешно доставила сообщения на встроенную конечную точку (messages/events).|Нет измерений|
|d2c<br>.endpoints<br>.latency<br>.builtIn.events|Routing: message latency for messages/events (Маршрутизация: задержка сообщений для messages/events)|Миллисекунды|Средняя|Средняя задержка (в миллисекундах) между поступлением сообщения в Центр Интернета вещей и поступлением сообщения телеметрии на встроенную конечную точку (messages/events).|Нет измерений|
|d2c<br>.endpoints<br>.egress<br>.storage|Routing: messages delivered to storage (Маршрутизация: доставлено сообщений в хранилище)|Count|Всего|Количество раз, когда подсистема маршрутизации Центра Интернета вещей успешно доставила сообщения на конечные точки хранилища.|Нет измерений|
|d2c<br>.endpoints<br>.latency<br>.storage|Routing: message latency for storage (Маршрутизация: задержка сообщений для хранилища)|Миллисекунды|Средняя|Средняя задержка (в миллисекундах) между поступлением сообщения в Центр Интернета вещей и поступлением сообщения телеметрии на конечную точку хранилища.|Нет измерений|
|d2c<br>.endpoints<br>.egress<br>.storage<br>.bytes|Routing: data delivered to storage (Маршрутизация: доставлено данных в хранилище)|Байты|Всего|Объем данных (в байтах), доставленных подсистемой маршрутизации Центра Интернета вещей на конечные точки хранилища.|Нет измерений|
|d2c<br>.endpoints<br>.egress<br>.storage<br>.blobs|Routing: blobs delivered to storage (Маршрутизация: доставлено BLOB-объектов в хранилище)|Count|Всего|Количество раз, когда подсистема маршрутизации Центра Интернета вещей доставила BLOB-объекты на конечные точки хранилища.|Нет измерений|
|d2c<br>.twin<br>.read<br>.success|Успешные операции чтения с двойников, инициированные устройством.|Count|Всего|Число всех успешных операций чтения с двойников, инициированных устройством.|Нет измерений|
|d2c<br>.twin<br>.read<br>.failure|Неудачные операции чтения с двойников, инициированные устройством.|Count|Всего|Число всех неудачных операций чтения с двойников, инициированных устройством.|Нет измерений|
|d2c<br>.twin<br>.read<br>.size|Размер ответа операций чтения с двойников, инициированных устройством.|Байты|Средняя|Среднее, минимальное и максимальное значение всех успешных операций чтения, инициированных устройством.|Нет измерений|
|d2c<br>.twin<br>.update<br>.success|Успешные обновления двойников, инициированные устройством.|Count|Всего|Число всех успешных обновлений двойников, инициированных устройством.|Нет измерений|
|d2c<br>.twin<br>.update<br>.failure|Неудачные обновления двойников, инициированные устройством.|Count|Всего|Число всех неудачных обновлений двойников, инициированных устройством.|Нет измерений|
|d2c<br>.twin<br>.update<br>.size|Размер обновлений двойников, инициированных устройством.|Байты|Средняя|Средний, минимальный и максимальный размеры всех успешных обновлений двойников, инициированных устройством.|Нет измерений|
|c2d<br>.methods<br>.success|Успешные вызовы прямых методов.|Count|Всего|Число всех успешных вызовов прямых методов.|Нет измерений|
|c2d<br>.methods<br>.failure|Неудачные вызовы прямых методов.|Count|Всего|Число всех неудачных вызовов прямых методов.|Нет измерений|
|c2d<br>.methods<br>.requestSize|Размер запроса вызовов прямых методов.|Байты|Средняя|Среднее, минимальное и максимальное значение всех успешных запросов прямых методов.|Нет измерений|
|c2d<br>.methods<br>.responseSize|Размер ответа вызовов прямых методов.|Байты|Средняя|Среднее, минимальное и максимальное значения всех успешных ответов прямых методов.|Нет измерений|
|c2d<br>.twin<br>.read<br>.success|Успешные операции чтения с двойников, инициированные из серверной части.|Count|Всего|Число всех успешных операций чтения с двойников, инициированных из серверной части.|Нет измерений|
|c2d<br>.twin<br>.read<br>.failure|Неудачные операции чтения с двойников, инициированные из серверной части.|Count|Всего|Число всех неудачных операций чтения с двойников, инициированных из серверной части.|Нет измерений|
|c2d<br>.twin<br>.read<br>.size|Размер ответа операций чтения с двойников, инициированных из серверной части.|Байты|Средняя|Среднее, минимальное и максимальное значения всех успешных операций чтения с двойников, инициированных из серверной части.|Нет измерений|
|c2d<br>.twin<br>.update<br>.success|Успешные обновления двойников, инициированные из серверной части.|Count|Всего|Число всех успешных обновлений двойников, инициированных из серверной части.|Нет измерений|
|c2d<br>.twin<br>.update<br>.failure|Неудачные обновления двойников, инициированные из серверной части.|Count|Всего|Число всех неудачных обновлений двойников, инициированных из серверной части.|Нет измерений|
|c2d<br>.twin<br>.update<br>.size|Размер обновлений двойников, инициированных из серверной части.|Байты|Средняя|Средний, минимальный и максимальный размеры всех успешных обновлений двойников, инициированных из серверной части.|Нет измерений|
|twinQueries<br>.success|Успешные запросы двойников.|Count|Всего|Число всех успешных запросов двойников.|Нет измерений|
|twinQueries<br>.failure|Неудачные запросы двойников.|Count|Всего|Количество всех неудачных запросов двойников.|Нет измерений|
|twinQueries<br>.resultSize|Размер результатов запросов двойников.|Байты|Средняя|Среднее, минимальное и максимальное значения размера результатов всех успешных запросов двойников.|Нет измерений|
|jobs<br>.createTwinUpdateJob<br>.success|Успешные операции создания заданий обновления двойников.|Count|Всего|Количество всех успешных созданий заданий обновления двойников.|Нет измерений|
|jobs<br>.createTwinUpdateJob<br>.failure|Неудачные операции создания заданий обновления двойников.|Count|Всего|Количество всех неудачных операций создания заданий обновления двойников.|Нет измерений|
|jobs<br>.createDirectMethodJob<br>.success|Успешные операции создания заданий вызова методов.|Count|Всего|Количество всех успешных операций создания заданий вызова прямых методов.|Нет измерений|
|jobs<br>.createDirectMethodJob<br>.failure|Неудачные операции создания заданий вызова методов.|Count|Всего|Количество всех неудачных операций создания заданий вызова прямых методов.|Нет измерений|
|jobs<br>.listJobs<br>.success|Успешные вызовы получения списка заданий.|Count|Всего|Количество всех успешных вызовов для получения списка заданий.|Нет измерений|
|jobs<br>.listJobs<br>.failure|Неудачные вызовы получения списка заданий.|Count|Всего|Количество всех неудачных вызовов для получения списка заданий.|Нет измерений|
|jobs<br>.cancelJob<br>.success|Успешные отмены заданий.|Count|Всего|Количество всех успешных вызовов для отмены заданий.|Нет измерений|
|jobs<br>.cancelJob<br>.failure|Неудачные отмены заданий.|Count|Всего|Количество всех неудачных вызовов для отмены заданий.|Нет измерений|
|jobs<br>.queryJobs<br>.success|Успешные запросы заданий.|Count|Всего|Количество всех успешных вызовов для запроса заданий.|Нет измерений|
|jobs<br>.queryJobs<br>.failure|Неудачные запросы заданий.|Count|Всего|Количество всех неудачных вызовов для запроса заданий.|Нет измерений|
|jobs<br>.completed|Завершенные задания|Count|Всего|Количество всех выполненных заданий.|Нет измерений|
|jobs<br>.сбой|Неудачные задания.|Count|Всего|Количество всех неудачных заданий.|Нет измерений|
|d2c<br>.telemetry<br>.ingress<br>.sendThrottle|Количество ошибок регулирования|Count|Всего|Количество ошибок регулирования из-за регулирования пропускной способности устройства|Нет измерений|
|dailyMessage<br>QuotaUsed|Общее количество используемых сообщений|Count|Средняя|Количество сообщений, использованных сегодня. Это совокупное значение, которое сбрасывается до нуля в 00:00 UTC каждый день.|Нет измерений|
|deviceDataUsage|Total device data usage (deprecated) (Общий объем использования данных устройствами (не рекомендуется))|Байты|Всего|Байты, переданные на любые устройства, подключенные к Центру Интернета вещей, и с них|Нет измерений|
|deviceDataUsageV2|Total device data usage (preview) (Общий объем использования данных устройствами (предварительная версия))|Байты|Всего|Байты, переданные на любые устройства, подключенные к Центру Интернета вещей, и с них|Нет измерений|
|totalDeviceCount|Total devices (preview) (Всего устройств (предварительная версия))|Count|Средняя|Число устройств, зарегистрированных в Центре Интернета вещей.|Нет измерений|
|connected<br>DeviceCount|Connected devices (preview) (Подключенных устройств (предварительная версия))|Count|Средняя|Число устройств, подключенных к Центру Интернета вещей.|Нет измерений|
|конфигурации|Configuration Metrics (Метрики конфигурации)|Count|Всего|Метрики для операций конфигурации|Нет измерений|

## <a name="next-steps"></a>Дополнительная информация

Вы ознакомились с общими сведениями о метриках Центра Интернета вещей. Чтобы узнать больше об управлении Центром Интернета вещей Azure, перейдите по этой ссылке:

* [Мониторинг операций](iot-hub-operations-monitoring.md)

Для дальнейшего изучения возможностей Центра Интернета вещей см. следующие статьи:

* [Руководство разработчика для Центра Интернета вещей](iot-hub-devguide.md)

* [Краткое руководство. Развертывание первого модуля IoT Edge на устройстве под управлением 64-разрядной ОС Linux](../iot-edge/tutorial-simulate-device-linux.md)
