---
title: Масштабирование Центра Интернета вещей в Azure | Документация Майкрософт
description: Масштабирование Центра Интернета вещей для поддержки ожидаемой пропускной способности сообщений и необходимых компонентов. Эта статья содержит сводку по поддерживаемой пропускной способности для каждого уровня и параметров сегментирования.
author: kgremban
manager: timlt
ms.service: iot-hub
services: iot-hub
ms.topic: conceptual
ms.date: 04/02/2018
ms.author: kgremban
ms.openlocfilehash: 23ace9f643596c4519014f370cf0142540724be6
ms.sourcegitcommit: 266fe4c2216c0420e415d733cd3abbf94994533d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/01/2018
ms.locfileid: "34635446"
---
# <a name="choose-the-right-iot-hub-tier-for-your-solution"></a>Выбор правильного уровня Центра Интернета вещей для решения

Все решения Интернета вещей различны, поэтому Центр Интернета вещей предлагает несколько вариантов, основанных на ценах и масштабе. Эта статья предназначена для оценки потребностей вашего Центра Интернета вещей. Сведения о ценах на уровни Центра Интернета вещей см. в статье о [ценах Центра Интернета вещей](https://azure.microsoft.com/pricing/details/iot-hub). 

Чтобы решить, какой уровень Центра Интернета вещей подходит для решения, задайте себе два вопроса:

**Какие функции планируется использовать?**
Центр Интернета вещей предлагает два уровня — "Базовый" и "Стандартный", которые отличаются количеством поддерживаемых компонентов. Если в основе решения Интернета вещей лежит сбор данных с устройств и их централизованный анализ, тогда вам подойдет уровень "Базовый". Если вам необходимо использовать более сложные конфигурации для управления устройствами Центра Интернета вещей удаленно или распределить часть рабочих нагрузок на сами устройства, тогда следует рассмотреть возможность использования уровня "Стандартный". Подробный разбор компонентов, которые включены в каждый уровень, см. в разделе [Уровни "Базовый" и "Стандартный"](#basic-and-standard-tiers).

**Какой объем данных планируется перемещать ежедневно?**
Каждый уровень Центра Интернета вещей доступен в трех размерах на основе пропускной способности данных, которую он может обрабатывать каждый день. Эти размеры численно обозначены как 1, 2 и 3. Например, каждая единица Центра Интернета вещей 1-го уровня может обработать 400 тысяч сообщений в день, тогда как единица 3-го уровня может обработать 300 миллионов. Дополнительные сведения о рекомендациях по данным см. в разделе [Пропускная способность сообщений](#message-throughput).

## <a name="basic-and-standard-tiers"></a>Уровни "Базовый" и "Стандартный"

Уровень "Стандартный" Центра Интернета вещей включает все компоненты и необходим для любых решений Интернета вещей, где предполагается использование возможностей двухсторонней связи. Уровень "Базовый" включает подмножество компонентов и предназначен для решений Интернета вещей, которым требуется только однонаправленная связь с устройствами в облаке. Оба уровня предоставляют одинаковые компоненты безопасности и аутентификации.

После создания Интернета вещей уровень "Базовый" можно обновить до "Стандартного", не прерывая имеющихся операций. Дополнительные сведения см. в статье [Как обновить Центр Интернета вещей](iot-hub-upgrade.md).

| Функция | Уровень Basic | Уровень Standard |
| ---------- | ---------- | ------------- |
| [Телеметрия "С устройства в облако"](iot-hub-devguide-messaging.md) | Yes | Yes |
| [Удостоверение для каждого устройства](iot-hub-devguide-identity-registry.md) | Yes | Yes |
| [Маршрутизация сообщений](iot-hub-devguide-messages-read-custom.md) и [интеграция службы "Сетка событий"](iot-hub-event-grid.md) | Yes | Yes |
| [Протоколы HTTP, AMQP и MQTT](iot-hub-devguide-protocols.md) | Yes | Yes |
| [Служба подготовки устройств](../iot-dps/about-iot-dps.md) | Yes | Yes |
| [Мониторинг и диагностика](iot-hub-monitor-resource-health.md) | Yes | Yes |
| [Передача сообщений из облака на устройство](iot-hub-devguide-c2d-guidance.md) |   | Yes |
| [Двойники устройств](iot-hub-devguide-device-twins.md), [двойники модулей](iot-hub-devguide-module-twins.md) и [управление устройствами](iot-hub-device-management-overview.md) |   | Yes |
| [Edge Интернета вещей Azure](../iot-edge/how-iot-edge-works.md) |   | Yes |

Центр Интернета вещей также предлагает уровень "Бесплатный", который предназначен для тестирования и оценки. Он обладает всеми возможностями уровня "Стандартный", но ограничен квотами на сообщения. С уровня "Бесплатный" нельзя обновиться до уровня "Базовый" или "Стандартный". 

### <a name="iot-hub-rest-apis"></a>Интерфейсы REST API для Центра Интернета вещей

Разница в поддерживаемых возможностях между Центрами Интернета вещей уровня "Базовый" и "Стандартный" означает, что некоторые вызовы API не работают с концентраторами уровня "Базовый". В следующей таблице показаны доступные API: 

| API | Уровень Basic | Уровень Standard |
| --- | ---------- | ------------- |
| [Удаление устройства](https://docs.microsoft.com/rest/api/iothub/deviceapi/deletedevice) | Yes | Yes |
| [Получение устройства](https://docs.microsoft.com/rest/api/iothub/deviceapi/getdevice) | Yes | Yes |
| Удаление модуля | Yes | Yes |
| Получение модуля | Yes | Yes |
| [Получение статистики реестра](https://docs.microsoft.com/rest/api/iothub/deviceapi/getregistrystatistics) | Yes | Yes |
| [Получение статистики службы](https://docs.microsoft.com/rest/api/iothub/deviceapi/getservicestatistics) | Yes | Yes |
| [Отправка устройства](https://docs.microsoft.com/rest/api/iothub/deviceapi/putdevice) | Yes | Yes |
| Отправка модуля | Yes | Yes |
| [Запрос устройств](https://docs.microsoft.com/rest/api/iothub/deviceapi/querydevices) | Yes | Yes |
| Запрос модулей | Yes | Yes |
| [Создание URI SAS отправки файла](https://docs.microsoft.com/rest/api/iothub/httpruntime/createfileuploadsasuri) | Yes | Yes |
| [Получение связанного с устройством уведомления](https://docs.microsoft.com/rest/api/iothub/httpruntime/receivedeviceboundnotification) | Yes | Yes |
| [Отправка события устройства](https://docs.microsoft.com/rest/api/iothub/httpruntime/senddeviceevent) | Yes | Yes |
| Отправка события модуля | Yes | Yes |
| [Обновление состояния отправки устройства](https://docs.microsoft.com/rest/api/iothub/httpruntime/updatefileuploadstatus) | Yes | Yes |
| [Массовые операции устройств](https://docs.microsoft.com/rest/api/iothub/deviceapi/bulkdeviceoperation) | Да, за исключением возможностей IoT Edge | Yes | 
| [Очистка очереди команд](https://docs.microsoft.com/rest/api/iothub/deviceapi/purgecommandqueue) |   | Yes |
| [Получение двойника устройства](https://docs.microsoft.com/rest/api/iothub/devicetwinapi/getdevicetwin) |   | Yes |
| Получение двойника модуля |   | Yes |
| [Вызов метода устройства](https://docs.microsoft.com/rest/api/iothub/devicetwinapi/invokedevicemethod) |   | Yes |
| [Обновление двойников устройств](https://docs.microsoft.com/rest/api/iothub/devicetwinapi/updatedevicetwin) |   | Yes | 
| Обновление двойника модуля |   | Yes | 
| [Отказ от связанного с устройством уведомления](https://docs.microsoft.com/rest/api/iothub/httpruntime/abandondeviceboundnotification) |   | Yes |
| [Полное связанное с устройством уведомление](https://docs.microsoft.com/rest/api/iothub/httpruntime/completedeviceboundnotification) |   | Yes |
| [Отмена задания](https://docs.microsoft.com/rest/api/iothub/jobapi/canceljob) |   | Yes |
| [Создание задания](https://docs.microsoft.com/rest/api/iothub/jobapi/createjob) |   | Yes |
| [Получение задания](https://docs.microsoft.com/rest/api/iothub/jobapi/getjob) |   | Yes |
| [Запрос заданий](https://docs.microsoft.com/rest/api/iothub/jobapi/queryjobs) |   | Yes |

## <a name="message-throughput"></a>Пропускная способность сообщений

Лучший способ определить размер решения Центра Интернета вещей — оценить трафик в пересчете на одну единицу. В частности, необходимо учитывать требования к пиковой пропускной способности для таких категорий операций:

* Отправка сообщений с устройства в облако
* Получение сообщений из облака на устройство
* операции с реестром удостоверений.

Трафик измеряется в пересчете на одну единицу, а не на концентратор. С экземпляром Центра Интернета вещей уровня 1 и 2 можно связать до 200 единиц измерения, а с экземпляром Центра Интернета вещей уровня 3 — до 10 единиц измерения. После создания Центра Интернета вещей можно изменить число единиц или изменять размеры (1, 2 и 3) в рамках определенного уровня, не прерывая имеющиеся операции. Дополнительные сведения см. в статье [Как обновить Центр Интернета вещей](iot-hub-upgrade.md).

В качестве примера возможностей трафика каждого уровня для сообщений, передаваемых с устройства в облако, следует соблюдать такие правила.

| Уровень | Непрерывная пропускная способность | Непрерывная скорость отправки |
| --- | --- | --- |
| B1, S1 |До 1111 КБ/мин на единицу<br/>(1,5 ГБ/день на единицу) |В среднем 278 сообщений/мин на единицу<br/>(400 000 сообщений/день на единицу) |
| B2, S2 |До 16 МБ/мин на единицу<br/>(22,8 ГБ/день на единицу) |В среднем 4167 сообщений/мин на единицу<br/>(6 миллионов сообщений/день на единицу) |
| B3, S3 |До 814 МБ/мин на единицу<br/>(1144,4 ГБ/день на единицу). |В среднем 208 333 сообщения/мин на единицу<br/>(300 млн сообщений/день на единицу). |

Помимо этих сведений о пропускной способности см. статью [Справочник: квоты и регулирование][IoT Hub quotas and throttles] и спроектируйте свое решение соответствующим образом.

### <a name="identity-registry-operation-throughput"></a>Пропускная способность для операций с реестром удостоверений
Операции с реестром удостоверений Центра Интернета вещей не должны выполняться в среде выполнения, так как они в основном связаны с подготовкой устройств.

Сведения о конкретных показателях пиковой пропускной способности см. в статье [Справочник: квоты и регулирование][IoT Hub quotas and throttles].

## <a name="sharding"></a>Сегментирование
Хотя один центр IoT может обслуживать миллионы устройств, иногда для существующего решения требуются особые характеристики производительности. Такие, которые не может гарантировать один центр IoT. В этом случае устройства можно разделить по нескольким Центрам Интернета вещей. Использование нескольких центров IoT сглаживает пики трафика и обеспечивает необходимую пропускную способность или скорость операций.

## <a name="next-steps"></a>Дополнительная информация

* Дополнительные сведения о возможностях Центра Интернета вещей и производительности см. в статьях [Цены на Центр Интернета вещей][link-pricing] и [Руководство. Квоты и регулирование в Центре Интернета вещей][IoT Hub quotas and throttles].
* Чтобы изменить уровень Центра Интернета вещей, выполните действия, описанные в статье [Как обновить Центр Интернета вещей](iot-hub-upgrade.md).

[lnk-pricing]: https://azure.microsoft.com/pricing/details/iot-hub
[IoT Hub quotas and throttles]: iot-hub-devguide-quotas-throttling.md

[lnk-devguide]: iot-hub-devguide.md
[lnk-iotedge]: ../iot-edge/tutorial-simulate-device-linux.md
