<properties
	pageTitle="Передача файлов из устройств в центре IoT | Microsoft Azure"
	description="Следуйте инструкциям этого учебника, чтобы узнать, как передавать файлы из устройств в центре IoT Azure с помощью C#."
	services="iot-hub"
	documentationCenter=".net"
	authors="fsautomata"
	manager="timlt"
	editor=""/>

<tags
     ms.service="iot-hub"
     ms.devlang="dotnet"
     ms.topic="article"
     ms.tgt_pltfrm="na"
     ms.workload="na"
     ms.date="06/21/2016"
     ms.author="elioda"/>

# Учебник: как передать файлы из устройств в облако с помощью центра IoT

## Введение

Центр IoT Azure — полностью управляемая служба, которая обеспечивает надежный и защищенный двунаправленный обмен данными между миллионами устройств IoT и серверной частью приложения. В предыдущих учебниках ([Приступая к работе с центром IoT] и [Отправка сообщений из облака на устройства с помощью центра IoT]) описаны базовые функции центра IoT для отправки сообщений из устройства в облако и из облака на устройство, а в учебнике [Обработка сообщений с устройства в облако] рассмотрен надежный способ хранения сообщений, отправляемых из устройства в облако, в хранилище BLOB-объектов Azure. Тем не менее в некоторых случаях не просто сопоставить данные, отправляемые устройством, с относительно небольшими сообщениями, отправляемыми из устройства в облако, которые принимает центр IoT. В качестве примеров можно привести большие файлы, содержащие изображения, видео, данные вибрации для с высокой частотой выборки или файлы, содержащие предварительно обработанные данные в какой-либо форме. Эти файлы обычно обрабатываются в виде пакета в облаке с помощью таких инструментов, как [фабрика данных Azure] или стек [Hadoop]. Когда передача файлов из устройства предпочтительнее отправки событий, вы все равно можете использовать функции безопасности и надежности центра IoT.

В этом учебнике используется код учебника [Отправка сообщений из облака на устройства с помощью центра IoT], чтобы показать, как использовать возможности передачи файлов центра IoT. Вы узнаете, как безопасно предоставить устройству универсальный код ресурса (URI) большого двоичного объекта Azure для передачи файла и как использовать уведомления о передаче файлов центра IoT для активации обработки файла в серверной части приложения.

По завершении этого учебника вы запустите два консольных приложения для Windows.

* **SimulatedDevice** — измененная версия приложения, созданного в учебнике [Отправка сообщений из облака на устройства с помощью центра IoT], которое передает файл в хранилище с помощью универсального кода ресурса (URI) SAS, предоставленного вашим центром IoT.
* **ReadFileUploadNotification** — приложение, которое получает уведомления о передаче файлов от центра IoT.

> [AZURE.NOTE] Существуют пакеты SDK для устройств Azure IoT, обеспечивающие поддержку многих платформ устройств и языков (включая C, Java и JavaScript) в центре IoT. Пошаговые инструкции по подключению устройства к коду, приведенному в этом учебнике, и к центру IoT Azure в целом доступны в [Центре разработчика для IoT в Azure].

Для работы с этим учебником требуется следующее:

+ Microsoft Visual Studio 2015;

+ Активная учетная запись Azure. <br/>Если ее нет, можно создать бесплатную учетную запись всего за несколько минут. Подробные сведения см. на странице [Бесплатная пробная версия Azure](https://azure.microsoft.com/pricing/free-trial/?WT.mc_id=A0E0E5C02&amp;returnurl=http%3A%2F%2Fazure.microsoft.com%2Fru-RU%2Fdevelop%2Fiot%2Ftutorials%2Ffile-upload%2F target="\_blank").

[AZURE.INCLUDE [iot-hub-file-upload-device-csharp](../../includes/iot-hub-file-upload-device-csharp.md)]


[AZURE.INCLUDE [iot-hub-file-upload-cloud-csharp](../../includes/iot-hub-file-upload-cloud-csharp.md)]

## Запуск приложений

Теперь все готово к запуску приложений.

1. В Visual Studio щелкните правой кнопкой мыши свое решение и выберите пункт **Назначить запускаемые проекты…**. Выберите **Несколько запускаемых проектов**, а затем выберите действие **Запуск** для обоих приложений **ReadFileUploadNotification** и **SimulatedDevice**.

2. Нажмите клавишу **F5**. Должны запуститься оба приложения. Вы должны увидеть, как завершится передача в одном консольном приложении и как второе консольное приложение получит уведомление о передаче. Наличие переданного файла в своей учетной записи хранения можно проверить с помощью [портала Azure] или обозревателя сервера Visual Studio.

  ![][50]


## Дальнейшие действия

В этом учебнике было показано, как использовать возможности передачи файлов центра IoT, чтобы упросить передачу файлов из устройств. Изучение функций и сценариев центра IoT можно продолжить в следующем руководстве:

- [Обработка сообщений, отправляемых с устройств в облако] — в нем показано, как надежно обрабатывать данные телеметрии и интерактивные сообщения, поступающие от устройств.

Дополнительная информация о центре IoT приведена в следующих статьях:

* [Обзор центра IoT]
* [Руководство разработчика по центру IoT]
* [Руководство по центру IoT]
* [Поддерживаемые платформы устройств и языки][Supported devices]
* [Центр разработчика IoT Azure]

<!-- Images. -->

[50]: ./media/iot-hub-csharp-csharp-file-upload/run-apps1.png

<!-- Links -->

[Send Cloud-to-Device messages with IoT Hub]: iot-hub-csharp-csharp-c2d.md

[портала Azure]: https://portal.azure.com/

[фабрика данных Azure]: https://azure.microsoft.com/documentation/services/data-factory/
[Hadoop]: https://azure.microsoft.com/documentation/services/hdinsight/

[Get started with IoT Hub]: iot-hub-csharp-csharp-getstarted.md
[Отправка сообщений из облака на устройства с помощью центра IoT]: iot-hub-csharp-csharp-c2d.md
[Обработка сообщений с устройства в облако]: iot-hub-csharp-csharp-process-d2c.md
[Обработка сообщений, отправляемых с устройств в облако]: iot-hub-csharp-csharp-process-d2c.md
[Uploading files from devices]: iot-hub-csharp-csharp-file-upload.md

[Обзор центра IoT]: iot-hub-what-is-iot-hub.md
[Руководство по центру IoT]: iot-hub-guidance.md
[Руководство разработчика по центру IoT]: iot-hub-devguide.md
[IoT Hub Supported Devices]: iot-hub-supported-devices.md
[Приступая к работе с центром IoT]: iot-hub-csharp-csharp-getstarted.md
[Supported devices]: https://github.com/Azure/azure-iot-sdks/blob/master/doc/tested_configurations.md
[Центр разработчика IoT Azure]: http://www.azure.com/develop/iot
[Центре разработчика для IoT в Azure]: http://www.azure.com/develop/iot

<!---HONumber=AcomDC_0622_2016-->