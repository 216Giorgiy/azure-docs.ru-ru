---
title: "Включение и отключение протокола HTTPS в личном домене сети доставки содержимого Azure | Документация Майкрософт"
description: "Узнайте, как включить или отключить протокол HTTPS для конечной точки Azure CDN с личным доменом."
services: cdn
documentationcenter: 
author: camsoper
manager: erikre
editor: 
ms.assetid: 10337468-7015-4598-9586-0b66591d939b
ms.service: cdn
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 02/03/2017
ms.author: casoper
ms.translationtype: HT
ms.sourcegitcommit: fda37c1cb0b66a8adb989473f627405ede36ab76
ms.openlocfilehash: c92f1e20acf55b8bd791fad43f17e162a5cb3847
ms.contentlocale: ru-ru
ms.lasthandoff: 09/14/2017

---
# <a name="enable-or-disable-https-on-an-azure-content-delivery-network-custom-domain"></a>Включение и отключение протокола HTTPS в личном домене сети доставки содержимого Azure

[!INCLUDE [cdn-verizon-only](../../includes/cdn-verizon-only.md)]

Поддержка HTTPS для личных доменов сети доставки содержимого Microsoft Azure позволяет доставлять защищенное содержимое через SSL, используя собственное имя домена для повышения безопасности данных в процессе передачи. Включение одним щелчком и полноценное управление сертификатами без дополнительных затрат упрощает комплексный рабочий процесс включения поддержки протокола HTTPS для личного домена.

Крайне важно обеспечить неприкосновенность и целостность всех конфиденциальных данных веб-приложения в процессе их передачи. С помощью протокола HTTPS обеспечивается шифрование конфиденциальных данных при их передаче через Интернет. Он обеспечивает доверие, проверку подлинности и защиту веб-приложений от атак. В настоящее время Azure CDN поддерживает HTTPS в конечной точке CDN. К примеру, при создании конечной точки CDN из Azure CDN (например, https://contoso.azureedge.net) протокол HTTPS включен по умолчанию. Теперь благодаря поддержке HTTPS для личных доменов (например, https://www.contoso.com) для них можно включить безопасную доставку. 

Ниже приведены некоторые ключевые характеристики компонента HTTPS.

- Никаких дополнительных затрат: вам не придется оплачивать приобретение или продление сертификата или платить за трафик, переданный по протоколу HTTPS. Вы оплачиваете только исходящий трафик из сети CDN.

- Простое включение: на [портале Azure](https://portal.azure.com) доступна подготовка одним щелчком. Для включения этого компонента можно также использовать REST API или другие средства разработки.

- Полноценное управление сертификатами: закупка всех сертификатов и управление ими осуществляется без вашего участия. Сертификаты автоматически подготавливаются и продлеваются до истечения их срока действия. Это полностью устраняет риски прерывания работы службы в результате истечения срока действия сертификата.

>[!NOTE] 
>Перед включением поддержки протокола HTTPS необходимо установить [личный домен Azure CDN](./cdn-map-content-to-custom-domain.md).

## <a name="enabling-https"></a>Включение протокола HTTPS

Чтобы включить протокол HTTPS, выполните приведенные ниже действия.

### <a name="step-1-enable-the-feature"></a>Шаг 1. Включение компонента 

1. На [портале Azure](https://portal.azure.com) перейдите к профилю CDN категории "Стандартный" или "Премиум" от Verizon.

2. В списке конечных точек щелкните ту из них, которая содержит личный домен.

3. Щелкните личный домен, для которого требуется включить HTTPS.

    ![Колонка "Конечная точка"](./media/cdn-custom-ssl/cdn-custom-domain.png)

4. Щелкните **Вкл.**, чтобы включить HTTPS, а затем нажмите кнопку **Применить**.

    ![Диалоговое окно "Настраиваемый HTTPS"](./media/cdn-custom-ssl/cdn-enable-custom-ssl.png)


### <a name="step-2-validate-domain"></a>Шаг 2. Проверка домена

>[!IMPORTANT] 
>Чтобы поддержка HTTPS стала активной для личного домена, необходимо выполнить его проверку. Для подтверждения домена у вас есть шесть рабочих дней. Запросы, которые не утверждены в течение шести рабочих дней, будут автоматически отменены. 

После включения HTTPS для личного домена наш поставщик сертификата HTTPS DigiCert проверит владельца домена, обратившись к тому, кто его зарегистрировал, в соответствии со сведениями о зарегистрировавшихся пользователях в базе данных [WHOIS](http://whois.domaintools.com/). Контакт осуществляется по электронной почте (по умолчанию) или телефону, указанному в базе данных WHOIS. 

![Запись WHOIS](./media/cdn-custom-ssl/whois-record.png)

Кроме того, DigiCert отправляет проверочное электронное сообщение по следующим адресам. Если сведения о регистрируемом пользователе WHOIS являются частными, убедитесь, что возможно утверждение непосредственно с одного из этих адресов:

admin@&lt;имя_вашего_домена.com&gt;  
administrator@&lt;имя_вашего_домена.com&gt;  
webmaster@&lt;имя_вашего_домена.com&gt;  
hostmaster@&lt;имя_вашего_домена.com&gt;  
postmaster@&lt;имя_вашего_домена.com&gt;  

Через несколько минут должно появиться электронное сообщение, как показано в следующем примере, с просьбой подтвердить запрос. При использовании фильтра нежелательной почты добавьте admin@digicert.com в список разрешений. Если вы не получите электронное сообщение в течение 24 часов, обратитесь в службу поддержки Майкрософт.
    
![Диалоговое окно "Настраиваемый HTTPS"](./media/cdn-custom-ssl/domain-validation-email.png)

При щелчке ссылки утверждения откроется следующая форма онлайн-утверждения: 
    
![Диалоговое окно "Настраиваемый HTTPS"](./media/cdn-custom-ssl/domain-validation-form.png)

Следуйте инструкциям в форме. Есть два варианта проверки:

- Можно утвердить все будущие заказы, оформленные с использованием одной и той же учетной записи для одного корневого домена, например contoso.com. Это рекомендуется, если в будущем для корневого домена планируется добавить другие личные домены.

- Можно просто утвердить конкретное имя узла, которое используется в данном запросе. Для последующих запросов потребуются дополнительные утверждения.

После утверждения DigiCert добавит имя личного домена в сертификат альтернативного имени субъекта (SAN). Сертификат будет действителен в течение года и автоматически продлен до истечения его срока действия.

### <a name="step-3-wait-for-propagation"></a>Шаг 3. Ожидание распространения

Активация компонента HTTPS для личного домена после проверки доменного имени может занять до 6–8 часов. По завершении процесса состояние "Настраиваемый HTTPS" на портале Azure будет иметь значение "Вкл.", а четыре шага в колонке "HTTPS для личного домена" будут помечены как завершенные. Личный домен готов для использования протокола HTTPS.

![Диалоговое окно "Включить HTTPS"](./media/cdn-custom-ssl/cdn-enable-custom-ssl-complete.png)

### <a name="operation-progress"></a>Ход выполнения операции

В следующей таблице показан ход операции, возникающей при включении HTTPS. После включения HTTPS в колонке "Настраиваемый HTTPS" отобразятся четыре шага операции. По мере того, как каждый шаг становится активным, под ним появляются дополнительные сведения о ходе выполнения. После успешного завершения шага рядом с ним появится зеленый флажок. 

| Шаг операции | Сведения о шаге операции | 
| --- | --- |
| 1. Отправка запроса | Отправка запроса |
| | Отправляется HTTP-запрос. |
| | HTTPS-запрос успешно отправлен. |
| 2. Проверка домена | Мы отправили вам электронное сообщение с просьбой подтвердить право собственности на домен. Ожидание подтверждения. |
| | Владение доменом успешно подтверждено. |
| | Истек срок действия запроса на подтверждение прав владения доменом (клиент, скорее всего, не ответил в течение 6 дней). HTTPS не будет включен в вашем домене. * |
| | Клиент отклонил запрос на подтверждение прав собственности на домен. HTTPS не будет включен в вашем домене. * |
| 3. Подготовка сертификата | В настоящее время центр сертификации выдает сертификат, необходимый для включения HTTPS в вашем домене. |
| | Сертификат был выдан и в настоящее время развертывается в сеть доставки содержимого. Это может занять до 6 часов. |
| | Сертификат успешно развернут в сети доставки содержимого. |
| 4. Завершение | HTTPS успешно включен для вашего домена. |

\*Это сообщение отображается, только если произошла ошибка. 

Если перед отправкой запроса возникает ошибка, появится следующее сообщение об ошибке:

<code>
We encountered an unexpected error while processing your HTTPS request. Please try again and contact support if the issue persists.
</code>

## <a name="disabling-https"></a>Отключение HTTPS

После включения протокола HTTPS позже его можно отключить. Чтобы отключить протокол HTTPS, выполните приведенные ниже действия.

### <a name="step-1-disable-the-feature"></a>Шаг 1. Отключение компонента 

1. На [портале Azure](https://portal.azure.com) перейдите к профилю CDN категории "Стандартный" или "Премиум" от Verizon.

2. В списке конечных точек щелкните ту из них, которая содержит личный домен.

3. Щелкните личный домен, для которого требуется отключить HTTPS.

    ![Колонка "Конечная точка"](./media/cdn-custom-ssl/cdn-custom-domain-HTTPS-enabled.png)

4. Щелкните **Выкл.**, чтобы отключить HTTPS, а затем нажмите кнопку **Применить**.

    ![Диалоговое окно "Настраиваемый HTTPS"](./media/cdn-custom-ssl/cdn-disable-custom-ssl.png)

### <a name="step-2-wait-for-propagation"></a>Шаг 2. Ожидание распространения

После отключения компонента HTTPS личного домена для вступления изменений в силу может потребоваться до 6–8 часов. По завершении процесса состояние "Настраиваемый HTTPS" на портале Azure будет иметь значение "Выкл.", а три шага в колонке "HTTPS для личного домена" будут помечены как завершенные. Личный домен больше не сможет использовать HTTPS.

![Диалоговое окно "Отключить HTTPS"](./media/cdn-custom-ssl/cdn-disable-custom-ssl-complete.png)

### <a name="operation-progress"></a>Ход выполнения операции

В следующей таблице показан ход операции, возникающей при отключении HTTPS. После отключения HTTPS в колонке "Настраиваемый HTTPS" отобразятся три шага. По мере того, как каждый шаг становится активным, под ним появляются дополнительные сведения. После успешного завершения шага рядом с ним появится зеленый флажок. 

| Ход выполнения операции | Сведения об операции | 
| --- | --- |
| 1. Отправка запроса | Отправка запроса |
| 2. Отзыв сертификата | Удаление сертификата |
| 3. Завершение | Сертификат удален |

## <a name="frequently-asked-questions"></a>Часто задаваемые вопросы

1. *Кто является поставщиком сертификата и какой тип сертификата используется?*

    Мы используем сертификат альтернативного имени субъекта (SAN), предоставленный DigiCert. С помощью одного сертификата SAN можно защитить несколько полных доменных имен.

2. *Могу ли я использовать выделенный сертификат?*
    
    Сейчас это невозможно, но мы планируем добавить такую возможность.

3. *Что делать, если я не получу сообщение электронной почты для проверки домена от DigiCert?*

    Если вы не получите электронное сообщение в течение 24 часов, обратитесь в службу поддержки Майкрософт.

4. *Не окажется ли сертификат SAN менее безопасным, чем выделенный сертификат?*
    
    Для сертификата SAN используются те же стандарты безопасности и шифрования, что и для выделенного сертификата. Чтобы дополнительно обезопасить сервер, для всех выданных сертификатов SSL используется алгоритм SHA-256.

5. *Можно ли использовать личный домен HTTPS с Azure CDN от Akamai?*

    На данный момент этот компонент доступен только для Azure CDN от Verizon. Мы работаем над тем, чтобы в ближайшие месяцы обеспечить его поддержку в Azure CDN от Akamai.


## <a name="next-steps"></a>Дальнейшие действия

- Узнайте, как настроить [личный домен в конечной точке Azure CDN](./cdn-map-content-to-custom-domain.md).



