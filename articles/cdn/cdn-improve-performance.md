<properties
	pageTitle="CDN — увеличьте производительность путем сжатия файлов"
	description="Вы можете увеличить скорость передачи файлов и увеличить производительность загрузки страницы с помощью сжатия файлов."
	services="cdn"
	documentationCenter=".NET"
	authors="camsoper"
	manager="erikre"
	editor=""/>

<tags
	ms.service="cdn"
	ms.workload="tbd"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="02/25/2016" 
	ms.author="casoper"/>

# Увеличьте производительность путем сжатия файлов

В этом разделе обсуждается повышение скорости передачи файлов и производительности загрузки страниц с помощью сжатия файлов.

CDN поддерживает два способа сжатия.

- Можно включить сжатие на исходном сервере — в таком случае CDN будет по умолчанию поддерживать сжатие и доставлять сжатые файлы клиентам.
- Можно включить сжатие непосредственно на пограничных серверах CDN — в таком случае CDN будет сжимать файлы и доставлять их конечным пользователям.

## Включение сжатия

> [AZURE.NOTE] Уровни CDN «Стандартный» и «Премиум» предоставляют одинаковые возможности сжатия, но разные пользовательские интерфейсы. Подробнее о различиях между уровнями CDN «Стандартный» и «Премиум» см. в разделе [Обзор Azure CDN](cdn-overview.md).

### Уровень Standard

1. В колонке профиля CDN щелкните конечную точку CDN, которой хотите управлять.

	![Конечные точки в колонке профиля CDN](./media/cdn-file-compression/cdn-endpoints.png)

	Откроется колонка конечной точки CDN.

2. Нажмите кнопку **Настроить**.

	![Кнопка управления в колонке профиля CDN](./media/cdn-file-compression/cdn-config-btn.png)

	Откроется колонка настройки CDN.

3. Включите параметр **Сжатие**.

	![Параметры сжатия CDN](./media/cdn-file-compression/cdn-compress-standard.png)

4. Используйте типы по умолчанию либо измените список, удалив или добавив типы файлов.

5. Внеся необходимые изменения, нажмите кнопку **Сохранить**.

### Уровень Premium

1. В колонке профиля CDN нажмите кнопку **Управление**.

	![Кнопка управления в колонке профиля CDN](./media/cdn-file-compression/cdn-manage-btn.png)

	Откроется портал управления CDN.

2. Наведите указатель мыши на вкладку **HTTP Large** (Большая платформа HTTP), а затем — на всплывающий элемент **Параметры кэша**. Щелкните **Сжатие**.

	Отобразятся параметры сжатия.

	![Сжатие файлов](./media/cdn-file-compression/cdn-compress-files.png)

3. После изменения списка типов файлов нажмите кнопку **Обновить**.


## Процесс и правила сжатия

1. Инициатор отправляет запрос содержимого.
2. Пограничный сервер проверяет, имеется ли заголовок **Accept-Encoding**.
	1. Если заголовок имеется, то в нем указан запрошенный метод сжатия.
	1. Если заголовок отсутствует, то запрос этого типа будет обслужен без сжатия.
3.	Ближайший граничный POP проверяет состояние кэша, метод сжатия и наличие допустимого значения срока жизни.
	1.	Промах кэша: если запрошенная версия не кэширована, запрос перенаправляется на источник.
	2.	Попадание в кэш с тем же методом сжатия: граничный сервер незамедлительно доставит сжатое содержимое клиенту.
	3.	Попадание в кэш с другим методом сжатия: граничный сервер перекодирует ресурс запрашиваемым методом сжатия.
	4.	Попадание в кэш и несжатые данные: если первоначальный запрос вызвал кэширование ресурса в несжатом формате, будет выполнена проверка допустимости запроса для сжатия граничным сервером (на основе критерия в вышеуказанном разделе определения/требования).
		1.	Если сжатие допустимо, граничный сервер произведет сжатие файла и доставит его клиенту.
		2.	Если недопустимо, граничный сервер незамедлительно доставит несжатое содержимое клиенту.



## Рекомендации

1. Для конечных точек потоковой передачи служб мультимедиа с CDN сжатие включено по умолчанию для следующих типов содержимого: application/vnd.ms-sstr+xml, application/dash+xml, application/vnd.apple.mpegurl, application/f4m+xml. Вы не может включить или отключить сжатие для упомянутых выше типов с помощью портала Azure.  
2. Только одна версия файла (сжатая или несжатая) будет кэширована на граничном сервере. Запрос другой версии приведет к перекодированию содержимого граничным сервером.  

<!---HONumber=AcomDC_0302_2016-->