<properties
	pageTitle="Подробные сведения об условиях соответствия и функциях обработчика правил сети доставки содержимого (CDN) Azure"
	description="В этом разделе приводятся подробные описания доступных условий соответствия и функций для обработчика правил сети доставки содержимого (CDN) Azure."
	services="cdn"
	documentationCenter=""
	authors="camsoper"
	manager="erikre"
	editor=""/>

<tags
	ms.service="cdn"
	ms.workload="media"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="02/25/2016" 
	ms.author="casoper"/>


# Подробные сведения об условиях соответствия и функциях обработчика правил сети CDN

В этом разделе приводятся подробные описания доступных условий соответствия и функций для [обработчика правил](cdn-rules-engine.md) сети доставки содержимого (CDN) Azure.

> [AZURE.NOTE] Для работы обработчика правил требуется уровень Premium CDN. Дополнительные сведения о функциях уровней Standard и Premium CDN см. в статье [Общие сведения о сети доставки содержимого Azure](cdn-overview.md).

## Условие соответствия

Условие соответствия определяет различные типы запросов, для которых будет выполнен ряд функций.

Например, оно может использоваться для фильтрации запросов к содержимому в определенном расположении, фильтрации запросов, поступающих из определенной страны или с определенного IP-адреса, или для фильтрации по сведениям о заголовке.

### Всегда

Условие соответствия "Всегда" предназначено для применения набора функций по умолчанию ко всем запросам.

### Устройство

Условие соответствия "Устройство" определяет запросы, поступающие с мобильного устройства, на основе его свойств.

### Место проведения

Эти условия соответствия предназначены для определения запросов на основе расположения запрашивающей стороны.

Имя | Назначение
-----|--------
Номер AS | Определяет запросы, поступающие из конкретной сети.
Страна | Определяет запросы, поступающие из указанных стран.


### Исходный домен

Эти условия соответствия предназначены для определения запросов, которые указывают на хранилище CDN или сервер-источник клиента.

Имя | Назначение
-----|--------
Источник CDN | Определяет запросы к содержимому в хранилище CDN.
Источник клиента | Определяет запросы к содержимому, хранящемуся на конкретном сервере-источнике клиента.


### Запрос

Эти условия соответствия предназначены для определения запросов на основе их свойств.

Имя | Назначение
-----|--------
IP-адрес клиента | Определяет запросы, поступающие с конкретного IP-адреса.
Параметр файла cookie | Проверяет файлы cookie, связанные с каждым запросом, на наличие указанного значения.
Регулярное выражение параметра файла cookie | Проверяет файлы cookie, связанные с каждым запросом, на наличие указанного регулярного выражения.
Граничная запись Cname | Определяет запрос, который указывает на конкретную граничную запись CNAME.
Домен источников ссылок | Определяет запросы, на которые давались ссылки с указанного имени узла.
Литерал заголовка запроса | Определяет запросы, содержащие указанный заголовок, для которого задано указанное значение.
Регулярное выражение заголовка запроса | Определяет запросы, содержащие указанный заголовок, для которого задано значение, соответствующее указанному регулярному выражению.
Шаблон заголовка запроса | Определяет запросы, содержащие указанный заголовок, для которого задано значение, соответствующее указанному шаблону.
Метод запроса | Определяет запросы по их HTTP-методу.
Схема запроса | Определяет запросы по их HTTP-протоколу.

### URL-адрес

Эти условия соответствия предназначены для определения запросов на основе их URL-адресов.

Имя | Назначение
-----|--------
Каталог URL-пути | Определяет запросы по относительному пути.
Расширение URL-пути | Определяет запросы по их расширению имени файла.
Имя файла URL-пути | Определяет запросы по их имени файла.
Литерал URL-пути | Сравнивает относительный путь запроса с указанным значением.
Регулярное выражение URL-пути | Сравнивает относительный путь запроса с указанным регулярным выражением.
Шаблон URL-пути | Сравнивает относительный путь запроса с указанным шаблоном.
Литерал запроса URL-адреса | Сравнивает строку запроса с указанным значением.
Параметр запроса URL-адреса | Определяет запросы, содержащие указанный параметр строки запроса, для которого задано значение, соответствующее указанному шаблону.
Регулярное выражение запроса URL-адреса | Определяет запросы, содержащие указанный параметр строки запроса, для которого задано значение, соответствующее указанному регулярному выражению.
Шаблон запроса URL-адреса | Сравнивает указанное значение со строкой запроса.

## Функции

Функция определяет тип действия, который будет применяться к типу запроса, определяемого набором условий соответствия.

### Access

Эти функции предназначены для управления доступом к содержимому.

Имя | Назначение
-----|--------
Запрет доступа | Определяет, отклоняются ли все запросы с ответом 403 (запрещено).
Проверка подлинности на основе маркеров | Определяет, будет ли применена к запросу проверка подлинности на основе маркеров.
Код отказа при проверки подлинности на основе маркеров | Определяет тип ответа, возвращаемого пользователю при отказе запроса из-за проверки подлинности на основе маркеров.
Не учитывать регистр URL-адреса при проверке подлинности на основе маркеров | Определяет, будет ли учитываться регистр в сравнениях URL-адресов, выполненных с помощью проверки подлинности на основе маркеров.
Параметр маркера проверки подлинности | Определяет, должен ли быть переименован параметр строки запроса проверки подлинности на основе маркеров.

### Caching

Эти функции предназначены для настройки времени и способа кэширования содержимого.

Имя | Назначение
-----|--------
Параметры пропускной способности | Определяет, будут ли активны параметры регулирования пропускной способности (т. е. ec\_rate и ec\_prebuf).
Регулирование пропускной способности | Регулирует пропускную способность для ответов, предоставляемую пограничными серверами.
Отключение кэша | Определяет, может ли запрос использовать технологию кэширования.
Обработка заголовка Cache-Control | Контролирует создание заголовков Cache-Control пограничным сервером при включенной функции External Max-Age.
Строка запроса ключа кэша | Определяет, будет ли ключ кэша включать или исключать параметры строки запроса, связанные с запросом.
Перезапись ключа кэша | Перезаписывает ключ кэша, связанный с запросом.
Завершение заполнения кэша | Определяет, что происходит, когда результаты запроса в частичном кэше отсутствуют на пограничном сервере.
Сжатие типов файлов | Определяет форматы файлов, которые будут сжаты на сервере.
Внутренний максимальный срок по умолчанию | Определяет интервал максимального срока по умолчанию для повторной сверки пограничного сервера с сервером-источником.
Обработка заголовка Expires | Контролирует создание заголовков Expires пограничным сервером при включенной функции External Max-Age.
Внешний максимальный срок | Определяет интервал максимального срока для повторной сверки браузера с пограничным сервером.
Принудительное использование внутреннего максимального срока | Определяет интервал максимального срока для повторной сверки пограничного сервера с сервером-источником.
Поддержка H.264 (Прогрессивное скачивание через HTTP) | Определяет типы форматов файлов H.264, которые могут использоваться для потоковой передачи содержимого.
Учитывать запрос без кэша | Определяет, будут ли запросы без кэша HTTP-клиента перенаправляться на сервер-источник.
Не учитывать источник без кэша | Определяет, будет ли сеть CDN игнорировать некоторые директивы, полученные с сервера-источника.
Игнорировать неподходящие диапазоны | Определяет запрос, возвращаемый клиенту, если запрос формирует код состояния 416 (Запрошенный диапазон не удовлетворяет условиям).
Внутреннее максимальное значение устаревания | Контролирует, как долго после обычного истечения срока действия кэшированный ресурс может обслуживаться с пограничного сервера, если пограничному серверу не удалось выполнить повторную сверку кэшированного ресурса с сервером-источником.
Совместное использование частичного кэширования | Определяет, может ли запрос создавать частично кэшированное содержимое.
Предварительная проверка кэшированного содержимого | Определяет, подойдет ли кэшированное содержимое для ранней повторной сверки до истечения его срока действия.
Обновление файлов кэша нулевой длины | Определяет способ обработки запроса HTTP-клиента к ресурсу кэша нулевой длины пограничными серверами.
Набор кодов состояния кэшированного содержимого | Определяет набор кодов состояния, которые могут привести к кэшированному содержимому.
Доставка устаревшего содержимого при ошибке | Определяет, будет ли доставлено содержимое с истекшим сроком при возникновении ошибки во время повторной сверки кэша или при получении запрошенного содержимого с сервера-источника клиента.
Устаревший клиент при повторной сверке | Повышает производительность, позволяя пограничным серверам обслуживать устаревший клиент для запрашивающей стороны во время повторной сверки.
Комментарий | Функция "Комментарий" позволяет добавлять примечания в правила.

### Заголовки

Эти функции предназначены для добавления, изменения или удаления заголовков из запроса или ответа.

Имя | Назначение
-----|--------
Заголовок ответа Age | Определяет, будет ли заголовок ответа Age включен в ответ, отправляемый запрашивающей стороне.
Заголовки ответа Debug Cache | Определяет, может ли ответ включать заголовок ответа X-EC-Debug, предоставляющий сведения о политике кэширования для запрошенного ресурса.
Заголовок запроса Modify Client | Перезаписывает, добавляет или удаляет заголовок из запроса.
Заголовок ответа Modify Client | Перезаписывает, добавляет или удаляет заголовок из ответа.
Настраиваемый заголовок Set Client IP | Позволяет добавлять IP-адрес запрашивающего клиента в запрос в качестве настраиваемого заголовка запроса.

### Журналы

Эти функции предназначены для настройки данных, хранящихся в необработанных файлах журнала.

Имя | Назначение
-----|--------
Поле 1 пользовательского журнала | Определяет формат и содержимое, которое будет присвоено полю пользовательского журнала в необработанном файле журнала.
Регистрация строки запроса | Определяет, будет ли строка запроса сохранена вместе с URL-адресом в журналах доступа.

### Оптимизация

Эти функции определяют, будет ли запрос подвергнут оптимизациям, предоставляемым пограничным оптимизатором.

Имя | Назначение
-----|--------
Пограничный оптимизатор | Определяет, может ли пограничный оптимизатор применяться к запросу.
Пограничный оптимизатор — создание конфигурации | Создает или активирует конфигурацию пограничного оптимизатора, связанную с сайтом.


### Исходный домен

Эти функции предназначены для управления способом взаимодействия CDN с сервером-источником.

Имя | Назначение
-----|--------
Максимальное количество запросов для проверки активности | Определяет максимальное количество запросов для проверки активности подключения до его закрытия.
Специальные заголовки прокси-сервера | Определяет набор заголовков запросов, относящихся к CDN, которые будут перенаправляться с пограничного сервера на сервер-источник.

### Специальные

Эти функции обеспечивают дополнительные функциональные возможности, которые следует использовать только опытным пользователям.

Имя | Назначение
-----|--------
Кэшируемые методы HTTP | Определяет набор дополнительных методов HTTP, которые могут быть кэшированы в сети.
Размер текста кэшируемого запроса | Определяет пороговое значение для определения возможности кэширования ответа POST.


### URL-адрес

Эти функции позволяют перенаправлять или перезаписывать запрос на другой URL-адрес.

Имя | Назначение
-----|--------
Поддержка перенаправлений | Определяет, можно ли перенаправлять запросы к имени узла, определенном в заголовке Location, возвращенным сервером-источником клиента.
URL Redirect | Перенаправляет запросы через заголовок Location.
Переопределение URL-адреса | Перезаписывает URL-адрес запроса.

### Брандмауэр веб-приложения

Функция брандмауэра веб-приложения определяет, будет ли запрос проверяться брандмауэром веб-приложения.

## См. также
* [Обзор Azure CDN](cdn-overview.md)
* [Переопределение стандартного поведения через HTTP с помощью обработчика правил](cdn-rules-engine.md)

<!---HONumber=AcomDC_0302_2016-->