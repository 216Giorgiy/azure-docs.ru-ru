<properties 
	pageTitle="Использование CDN | Microsoft Azure" 
	description="Узнайте, как использовать сеть доставки содержимого (CDN) Azure для доставки больших объемов контента посредством кэширования BLOB-объектов и статического контента." 
	services="cdn" 
	documentationCenter=".net" 
	authors="camsoper" 
	manager="dwrede" 
	editor=""/>

<tags 
	ms.service="cdn" 
	ms.workload="tbd" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="get-started-article" 
	ms.date="12/02/2015" 
	ms.author="casoper"/>


# Использование CDN для Azure

Сеть доставки содержимого (CDN) Azure является основным стандартным блоком для масштабирования любого приложения HTTP в Azure. Она предоставляет клиентам Azure глобальное решение, кэшируя и доставляя содержимое непосредственно конечным пользователям. В результате вместо запросы пользователей не попадают каждый раз в источник, а интеллектуально маршрутизируются в лучше выполняемый пограничный POP CDN. Это значительно повышает производительность и улучшает взаимодействие с пользователем. Актуальный список всех расположений узлов CDN см. в разделе [Расположение узлов POP сети доставки содержимого Azure (CDN)](cdn-pop-locations.md).

Использование сети CDN для кэширования данных Azure приносит следующие преимущества.

- Повышенная производительность и удобство работы для конечных пользователей, находящихся далеко от источника содержимого и использующих приложения, в которых для загрузки содержимого требуется много запросов HTTP.
- Крупномасштабное распределение для улучшения мгновенной обработки высокой нагрузки, например в начале такого события, как запуск продукта.
- Благодаря распределению пользовательских запросов и обслуживанию содержимого из глобальных пограничных POP в источник отправляется меньший объем трафика.

>[AZURE.TIP]Сеть Azure CDN может распределять содержимое из разных источников. Встроенные источники в Azure включают службу приложений, облачные службы, хранилище BLOB-объектов и службу мультимедиа. Вы также можете определить пользовательский источник, используя любой общедоступный веб-адрес.

##Включение сети CDN

1. Создание профиля CDN с конечными точками, указывающими на ваш источник

	Профиль CDN представляет собой коллекцию конечных точек CDN. Каждый профиль содержит одну или несколько конечных точек CDN. После того как вы создадите профиль CDN, вы можете создать новую конечную точку CDN, используя выбранный источник.
	
	>[AZURE.NOTE]В одной подписке Azure можно создать не более четырех профилей CDN. Каждый профиль CDN может содержать максимум четыре конечные точки CDN.
	>
	> Стоимость использования CDN определяется уровнем профиля CDN. Если вы хотите использовать функции CDN из двух ценовых категорий («Стандартный» и «Премиум»), вам потребуется несколько профилей CDN.
	
	Подробное руководство по созданию профилей CDN и конечные точек см. в статье [Включение сети доставки содержимого (CDN) для Azure](cdn-create-new-endpoint.md).
	
2. Настройка конфигурации CDN

	Вы можете включить несколько функций для конечной точки CDN, например [политику кэширования](cdn-caching-policy.md), [кэширование строк запроса](cdn-query-string.md), [обработчик правил](cdn-rules-engine.md) и т. д. Дополнительные сведения см. в меню **Управление** слева.

3. Получение доступа к содержимому CDN

	Для доступа к кэшированному содержимому в сети CDN воспользуйтесь URL-адресом CDN, отображаемым в портале. Например, адрес для кэшированного большого двоичного объекта будет выглядеть так: `http://<identifier>.azureedge.net/<myPublicContainer>/<BlobName>`

## Кэширование содержимого из хранилища Azure

После включения CDN для учетной записи хранения Azure все BLOB-объекты, которые находятся в общедоступных контейнерах и доступны для анонимного доступа, будут кэшироваться через CDN. Кэшироваться с помощью Azure CDN могут только общедоступные BLOB-объекты. Чтобы сделать BLOB-объект общедоступным для анонимного доступа, необходимо обозначить его контейнер как открытый. После этого станет возможен анонимный доступ для чтения всех BLOB-объектов в данном контейнере. Вы можете также сделать данные контейнера общедоступными или ограничить доступ только к BLOB-объектам в нем. Дополнительную информацию о контроле доступа к контейнерам и большим двоичным объектам см. в статье [Управление доступом к ресурсам хранилища Azure](../storage/storage-manage-access-to-resources.md).

Для достижения наилучшей производительности используйте пограничное кэширование CDN при доставке BLOB-объектов размером меньше 10 ГБ.

После включения доступа CDN для учетной записи хранения портал управления предоставит вам имя домена CDN в следующем формате: `http://<identifier>.azureedge.net/`. Это доменное имя может использоваться для доступа к BLOB-объектам в общедоступном контейнере. Например, пользователи могут получить доступ к BLOB-объектам, находящимся в общедоступном контейнере music в учетной записи хранения myaccount, по одному из этих URL-адресов:

- **URL-адрес службы BLOB-объектов Azure**: `http://myAccount.blob.core.windows.net/music/`; 
- **URL-адрес Azure CDN**: `http://<identifier>.azureedge.net/music/`. 

## Кэширование содержимого с веб-сайтов Azure

Вы можете включить CDN с веб-сайтов для кэширования веб-содержимого, например изображений, скриптов и таблиц стилей. См. раздел [Интеграция веб-сайта Azure с Azure CDN](../app-service-web/cdn-websites-with-cdn.md).

После включения доступа CDN для веб-сайта портал управления предоставит вам имя домена CDN в следующем формате: `http://<identifier>.azureedge.net/`. Это имя домена может использоваться для извлечения объектов с веб-сайта. Например, если имеется общий контейнер с именем cdn и файл изображения с именем music.png, пользователи могут осуществлять доступ к объекту с помощью любого из двух следующих URL-адресов:

- **URL-адрес веб-сайта Azure**: `http://mySiteName.azurewebsites.net/cdn/music.png`; 
- **URL-адрес Azure CDN**: `http://<identifier>.azureedge.net/cdn/music.png`.
 
## Кэширование содержимого из облачных служб Azure

Можно кэшировать в CDN объекты, предоставляемые облачной службой Azure.

Кэширование для облачных служб имеет следующие ограничения:


- CDN следует использовать для кэширования только статического содержимого.

	>[AZURE.WARNING]Кэширование весьма непостоянного или динамического содержимого может неблагоприятно повлиять на производительность или вызвать проблемы с содержимым при общем увеличении затрат.
- Облачная служба должна быть развернута в рабочей среде.
- Облачная служба должна предоставлять объект через порт 80 с использованием HTTP.
- Облачная служба должна помещать содержимое для кэширования или доставки в папку /CDN облачной службы.

После включения доступа CDN для облачной службы портал управления предоставит вам имя домена CDN в следующем формате: `http://<identifier>.azureedge.net/`. Это имя домена может использоваться для извлечения объектов из облачной службы. Например, для облачной службы с именем myHostedService и веб-страницы ASP.NET с именем music.aspx, которая доставляет содержимое, пользователи могут осуществлять доступ к объекту с помощью любого из двух следующих URL-адресов:


- **URL-адрес облачной службы Azure**: `http://myHostedService.cloudapp.net/music.aspx`; 
- **URL-адрес Azure CDN**: `http://<identifier>.azureedge.net/music.aspx`. 

## Кэширование содержимого из пользовательских источников

Вы можете кэшировать в CDN объекты из любого общедоступного веб-приложения.

Кэширование для пользовательских источников имеет следующие ограничения:

- CDN следует использовать для кэширования только статического содержимого.

	>[AZURE.WARNING]Кэширование весьма непостоянного или динамического содержимого может неблагоприятно повлиять на производительность или вызвать проблемы с содержимым при общем увеличении затрат.
- Содержимое пользовательского источника должно быть размещено на сервере с общедоступным IP-адресом. Пограничные узлы CDN не могут извлекать ресурсы с серверов интрасети за брандмауэром.

После включения доступа CDN для пользовательского источника портал Azure предоставит вам имя домена CDN в следующем формате: `http://<identifier>.azureedge.net/`. Это имя домена может использоваться для извлечения объектов из пользовательского источника. Например, если сайт находится по адресу www.contoso.com и веб-страница ASP.NET с именем music.aspx доставляет содержимое, пользователи могут получить доступ к объекту по любому их этих URL-адресов:


- **URL-адрес пользовательского источника**: `http://www.contoso.com/music.aspx` 
- **URL-адрес Azure CDN**: `http://<identifier>.azureedge.net/music.aspx`. 

## Кэширование конкретного содержимого со строками запроса

Строки запроса можно использовать для дифференциации объектов, возвращаемых из источника. Например, если источник отображает диаграмму, которая может изменяться, для получения конкретной требуемой диаграммы можно передать строку запроса. Например:

`http://<identifier>.azureedge.net/chart.aspx?item=1`

Строки запроса передаются как строковые литералы. Если ваша служба принимает два параметра, например `?area=2&item=1`, и выполняет последовательные вызовы в источник с использованием `?item=1&area=2`, происходит кэширование двух копий одного объекта.

Дополнительные сведения о кэшировании строк запроса см. в статье [Управление поведением кэширования запросов CDN с помощью строк запроса](cdn-query-string.md).

## Доступ к кэшированному содержимому по протоколу HTTPS

Azure позволяет получать содержимое из CDN с помощью HTTPS-вызовов. Это позволяет встраивать содержимое, кэшируемое в CDN, в защищенные веб-страницы без появления предупреждений о смешанных типах безопасности содержимого.

Доступ к содержимому CDN с использованием HTTPS имеет следующие ограничения.


- Необходимо использовать сертификат, предоставленный CDN. Сертификаты третьих сторон не поддерживаются.
- Необходимо использовать домен CDN для доступа к содержимому. Поддержка HTTPS для имен личных доменов (CNAME) недоступна, поскольку в данный момент CDN не поддерживает пользовательские сертификаты.

Дополнительную информацию о включении HTTPS для содержимого CDN см. в разделе [Включение сети доставки содержимого (CDN) для Azure](cdn-create-new-endpoint.md).


## Доступ к кэшированному содержимому с применением личных доменов

Можно сопоставить конечную точку HTTP CDN с именем личного домена и использовать это имя для запроса объектов из CDN.

Дополнительную информацию о сопоставлении с личным доменом см. в разделе [Как сопоставить содержимое сети доставки содержимого (CDN) с личным доменом](cdn-map-content-to-custom-domain.md).

## Программное управление CDN

Вы можете программно управлять Microsoft Azure CDN с помощью [REST API поставщика ресурсов CDN](https://msdn.microsoft.com/library/mt634456.aspx).


## См. также

- [Включение сети доставки содержимого для Azure](cdn-create-new-endpoint.md)
- [Общие сведения о сети доставки контента (CDN) Azure](cdn-overview.md)
- [Очистка конечной точки сети CDN Azure](cdn-purge-endpoint.md)
- [REST API поставщика ресурсов CDN](https://msdn.microsoft.com/library/mt634456.aspx)

<!---HONumber=AcomDC_1217_2015-->