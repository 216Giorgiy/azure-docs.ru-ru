<properties
	 pageTitle="Сопоставление содержимого сети доставки содержимого (CDN) с личным доменом"
	 description="В этом разделе показано, как сопоставить содержимое CDN с личным доменом."
	 services="cdn"
	 documentationCenter=""
	 authors="camsoper"
	 manager="erikre"
	 editor=""/>
<tags
	 ms.service="cdn"
	 ms.workload="media"
	 ms.tgt_pltfrm="na"
	 ms.devlang="na"
	 ms.topic="article"
	 ms.date="02/25/2016" 
	 ms.author="casoper"/>

# Как сопоставить личный домен с конечной точкой сети доставки содержимого (CDN)
Личный домен можно сопоставить с конечной точкой CDN, чтобы использовать имя своего домена в URL-адресах кэшированного содержимого вместо того, чтобы использовать поддомен azureedge.net.

Существуют два способа сопоставления пользовательского домена с конечной точкой CDN:

1. [Создание записи CNAME у регистратора доменных имен и сопоставление личного домена и поддомена с конечной точкой CDN](#register-a-custom-domain-for-an-azure-cdn-endpoint)

	Запись CNAME — это компонент DNS, позволяющий сопоставить исходный и конечный домены. В этом случае исходный домен является пользовательским доменом и поддоменом — (поддомен всегда является обязательным). Конечный домен является конечной точкой CDN.

	Однако процесс сопоставления пользовательского домена конечной точке BLOB-объекта приводит к краткому периоду простоя для домена в течение регистрации домена на портале Azure.

2. [Добавление промежуточного этапа регистрации с помощью поддомена **cdnverify**](#register-a-custom-domain-for-an-azure-cdn-endpoint-using-the-intermediary-cdnverify-subdomain).

	Если личный домен в настоящее время поддерживает приложение с заданным соглашением об уровне обслуживания (SLA), не допускающим простоя, то для промежуточного шага регистрации можно использовать поддомен Azure **cdnverify**, чтобы пользователи могли получать доступ к вашему домену во время выполнения сопоставления DNS.

После регистрации пользовательского домена с помощью одной из описанных выше процедур требуется [убедиться, что личный домен ссылается на конечную точку CDN](#verify-that-the-custom-subdomain-references-your-cdn-endpoint).

> [AZURE.NOTE] Необходимо создать запись CNAME у регистратора доменных имен для сопоставления домена с конечной точкой CDN. Записи CNAME сопоставляются с конкретными поддоменами, такими как www.mydomain.com или myblog.mydomain.com. Запись CNAME нельзя сопоставить с корневым доменом, таким как mydomain.com.
>    
> Поддомен может быть связан только с одной конечной точкой CDN. Созданная запись CNAME будет перенаправлять весь трафик, адресованный поддомену, в указанную конечную точку. Например, если сопоставить **www.mydomain.com** с конечной точкой CDN, то его нельзя будет сопоставить с другими конечными точками Azure, например конечной точкой облачной службы или конечной точкой учетной записи хранения. Однако можно использовать разные поддомены одного и того же домена для разных конечных точек служб. Кроме того, можно сопоставлять разные поддомены с одной конечной точкой CDN.
>
> Обратите внимание, что на пограничных узлах CDN изменения пользовательского домена отражаются в течение **90 минут**.

## Регистрация личного домена для конечной точки Azure CDN

1.	Войдите на [портал Azure](https://portal.azure.com/).
2.	Щелкните **Обзор**, затем **Профили CDN**. Выберите профиль CDN с конечной точкой, которую необходимо сопоставить с личным доменом.  
3.	В колонке **Профиль CDN** щелкните конечную точку CDN, с которой требуется связать поддомен.
4.	В верхней части колонки конечной точки нажмите кнопку **Добавить пользовательский домен**. В колонке **Добавление пользовательского домена** вы увидите имя узла конечной точки, полученное от конечной точки CDN, которое будет использоваться для создания новой записи CNAME. Адрес имени узла будет отображаться в формате **&lt;КонечнаяТочка>.azureedge.net**. Можно скопировать это имя узла для использования при создании записи CNAME.  
5.	Перейдите на веб-сайт вашего регистратора доменных имен и найдите раздел, посвященный созданию записей DNS. Это может быть такой раздел, как **Имя домена**, **DNS** или **Управление сервером доменных имен**.
6.	Найдите раздел управления записями CNAME. Может понадобиться перейти на страницу дополнительных параметров и найти слова CNAME, Псевдоним или Поддомены.
7.	Создайте новую запись CNAME, которая сопоставляет выбранный вами поддомен (например, **www** или **cdn**) с именем узла, указанным в колонке **Добавление пользовательского домена**.
8.	Вернитесь в колонку **Добавление пользовательского домена** диалогового окна и введите личный домен, включая поддомен. Например, введите доменное имя в формате **www.mydomain.com** или **cdn.mydomain.com**.   

	Azure проверит наличие записи CNAME для введенного доменного имени. Если запись CNAME правильна, пользовательский домен проходит проверку. Помните, что изменения в настройках пользовательского домена отражаются на пограничных уздах CDN в течение 90 минут.

	Обратите внимание, что в некоторых случаях может потребоваться некоторое время для распространения записи CNAME по серверам имен в Интернете. Если домен не проверяется сразу, а вы считаете, что запись CNAME является правильной, подождите несколько минут и повторите попытку.


## Регистрация личного домена для конечной точки Azure CDN с помощью промежуточного поддомена cdnverify  

1. Войдите на [портал Azure](https://portal.azure.com/).
2. Щелкните **Обзор**, затем **Профили CDN**. Выберите профиль CDN с конечной точкой, которую необходимо сопоставить с личным доменом.  
3. В колонке **Профиль CDN** щелкните конечную точку CDN, с которой требуется связать поддомен.
4. В верхней части колонки конечной точки нажмите кнопку **Добавить пользовательский домен**. В колонке **Добавление пользовательского домена** вы увидите имя узла конечной точки, полученное от конечной точки CDN, которое будет использоваться для создания новой записи CNAME. Адрес имени узла будет отображаться в формате **&lt;КонечнаяТочка>.azureedge.net**. Можно скопировать это имя узла для использования при создании записи CNAME.
5. Перейдите на веб-сайт вашего регистратора доменных имен и найдите раздел, посвященный созданию записей DNS. Это может быть такой раздел, как **Имя домена**, **DNS** или **Управление сервером доменных имен**.
6. Найдите раздел управления записями CNAME. Может понадобиться перейти на страницу дополнительных параметров и найти слова **CNAME**, **Псевдоним** или **Поддомены**.
7. Создайте новую запись CNAME и укажите псевдоним поддомена, который содержит поддомен **cdnverify**. Например, для поддомена может использоваться формат **cdnverify.www** или **cdnverify.cdn**. Введите имя узла, который является конечной точкой CDN, в формате **cdnverify.&lt;имя\_конечной\_точки>.azureedge.net**.
8. Вернитесь в колонку **Добавление пользовательского домена** диалогового окна и введите личный домен, включая поддомен. Например, введите доменное имя в формате **www.mydomain.com** или **cdn.mydomain.com**. Обратите внимание, что на данном этапе не требуется добавлять в начало поддомена значение **cdnverify**.  

	Azure проверит наличие записи CNAME для введенного доменного имени cdnverify.
9. На этом этапе ваш личный домен был проверен Azure, но трафик, идущий в ваш домен, еще не перенаправлен в вашу конечную точку CDN. Через 90 минут, в течение которых изменения в настройках пользовательского домена должны отразиться на пограничных узлах CDN, вернитесь на веб-сайт реестра DNS и создайте другую запись CNAME, сопоставляющую ваш субдомен с конечной точкой CDN. Например, укажите поддомен в виде **www** или **cdn** и имя узла как **&lt;имя\_конечной\_точки>.azureedge.net**. Это действие завершает регистрацию пользовательского домена.
10.	Наконец, можно удалить запись CNAME, созданную с помощью **cdnverify**, так как она была необходима только в качестве промежуточного шага.  


## Проверка того, что личный домен ссылается на вашу конечную точку CDN

- После завершения регистрации личного домена можно получить доступ к содержимому, которое кэшируется на конечной точке CDN. Во-первых, убедитесь, что общедоступное содержимое кэшируется на конечной точке. Например, если конечная точка CDN сопоставлена с учетной записью хранения, CDN кэширует содержимое в открытых контейнерах BLOB-объектов. Чтобы проверить личный домен, убедитесь, что контейнер допускает открытый доступ и содержит не менее одного BLOB-объекта.
- В браузере перейдите по адресу BLOB-объекта с помощью личного домена. Например, если вашим личным доменом является **cdn.mydomain.com**, URL-адрес кэшированного большого двоичного объекта будет похож на следующий URL-адрес: http://cdn.mydomain.com/mypubliccontainer/acachedblob.jpg

- Если ваша конечная точка CDN сопоставлена с облачной службой, то адрес кэшированного содержимого будет похож на следующий URL-адрес: http://cdn.mydomain.com/mycloudservice

## См. также

[Включение сети доставки содержимого (CDN) для Azure](./cdn-create-new-endpoint.md)

<!---HONumber=AcomDC_0302_2016-->