<properties 
	pageTitle="Использование CDN — руководство по компонентам Azure" 
	description="Узнайте, как использовать сеть доставки содержимого (CDN) Azure для доставки больших объемов контента посредством кэширования BLOB-объектов и статического контента." 
	services="cdn" 
	documentationCenter=".net" 
	authors="zhangmanling" 
	manager="dwrede" 
	editor=""/>

<tags 
	ms.service="cdn" 
	ms.workload="tbd" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="05/05/2015" 
	ms.author="mazha"/>


# Интеграция учетной записи хранения с CDN

CDN можно включить для кэширования содержимого из хранилища Azure. Она предоставляет разработчикам глобальное решение для доставки большого объема содержимого с возможностью кэширования больших двоичных объектов и статического содержимого на физических узлах в США, Европе, Азии, Австралии и Южной Америке.


## Шаг 1. Создание учетной записи хранения

Чтобы создать новую учетную запись хранения для подписки Azure, воспользуйтесь следующей процедурой. Учетная запись хранения предоставляет доступ к службам хранилища Azure. Учетная запись хранения представляет собой высший уровень пространства имен для доступа ко всем компонентам службы хранения Azure: службам BLOB-объектов, службам очередей и службам таблиц. Дополнительные сведения о службах хранилища Azure см. в разделе [Использование служб хранилища Azure](http://msdn.microsoft.com/library/azure/gg433040.aspx).

Чтобы создать учетную запись хранения, вы должны быть администратором службы или соадминистратором для связанной подписки.

> [AZURE.NOTE]Сведения о выполнении этой операции с помощью API управления службой Azure см. в справочном разделе [Создание учетной записи хранения](http://msdn.microsoft.com/library/windowsazure/hh264518.aspx).

**Создание учетной записи хранения для подписки Azure**

1.  Выполните вход на [портал управления Azure].
2.  В нижнем левом углу щелкните **Создать**. В диалоговом окне **Создать** выберите **Службы данных**, затем щелкните **Хранилище** и **Быстрое создание**.

    Откроется диалоговое окно **Создание учетной записи хранения**.

    ![Создание учетной записи хранения][create-new-storage-account]

4. В поле **URL-адрес** введите имя поддомена. Запись может содержать от 3 до 24 строчных букв и цифр.

    Это значение станет именем узла в URI, который используется для адресации ресурсов большого двоичного объекта, очереди и таблицы в подписке. Чтобы обратиться по адресу ресурса контейнера в службе BLOB-объектов, следует использовать URI в следующем формате, где *<StorageAccountLabel>* указывает значение, которое вы ввели в поле **Введите URL-адрес**:

    http://*&lt;StorageAcountLabel&gt;*.blob.core.windows.net/*&lt;mycontainer&gt;*

    **Важно!** Метка URL-адреса образует поддомен URI учетной записи хранения и должна быть уникальной на уровне всех размещенных служб в Azure.

	Это значение также используется как имя этой учетной записи хранения на портале или при доступе к данной учетной записи программным способом.

5.  В раскрывающемся списке **Регион или территориальная группа** выберите регион или территориальную группу для этой учетной записи хранения. Выберите территориальную группу вместо региона, если необходимо размещение служб хранилища в одном центре обработки данных с другими используемыми службами Microsoft Azure. Это может повысить производительность без дополнительных затрат на передачу данных.

    **Примечание.** Чтобы создать территориальную группу, откройте на портале управления раздел **Параметры**, перейдите на страницу **Территориальные группы** и затем щелкните либо **Добавить территориальную группу**, либо **Добавить**. Можно также создавать территориальные группы и управлять ими с помощью API управления службами Microsoft Azure. Дополнительные сведения см. в разделе [Операции над территориальными группами].

6. В раскрывающемся списке **Подписка** выберите подписку, с которой будет использоваться данная учетная запись хранения.
7.  Щелкните **Создать учетную запись хранения**. Процесс создания учетной записи хранения может занять несколько минут.
8.  Чтобы удостовериться, что учетная запись хранения создана успешно, убедитесь, что эта учетная запись отображается в элементах списка **Хранилище** со статусом **В сети**.


## Шаг 2. Создание новой конечной точки CDN для вашей учетной записи хранения

После включения CDN-доступа к учетной записи хранения или размещенной службе все общедоступные объекты будут пригодны для пограничного кэширования CDN. Если изменить объект, находящийся в данный момент в кэше сети CDN, новое содержимое будет недоступно через сеть CDN до обновления содержимого CDN по истечении срока действия кэшированного содержимого.

**Создание новой конечной точки CDN для учетной записи хранения**

1. На [портале управления Azure] на панели управления выберите **CDN**.

2. На ленте щелкните **Создать** В диалоговом окне **Создать** выберите **Служба приложений**, затем **CDN**, затем **Быстрое создание**.

3. В раскрывающемся списке **Исходный домен** выберите учетную запись хранения, созданную в предыдущем разделе, в списке доступных учетных записей хранения.

4. Нажмите кнопку **Создать**, чтобы создать новую конечную точку.

5. После создания конечной точки, она отображается в списке конечных точек для этой подписки. В режиме списка отображается URL-адрес для доступа к кэшированному содержимому, а также исходному домену.

	Исходный домен представляет собой расположение, содержимое из которого кэшируется в CDN. Исходный домен может быть учетной записью хранения или облачной службой; для целей этого примера используется учетная запись хранения. Содержимое хранилища кэшируется на пограничных серверах в соответствии с указанным параметром управления кэшем или эвристикой по умолчанию для сети кэширования. Дополнительные сведения см. в разделе [Управление сроком действия содержимого BLOB-объекта](http://msdn.microsoft.com/library/gg680306.aspx).


    > [AZURE.NOTE]Конфигурация, созданная для конечной точки, не будет доступна незамедлительно. Для распространения регистрации по сети CDN может потребоваться до 60 минут. Если пользователь попытается незамедлительно воспользоваться именем домена CDN, он может столкнуться с кодом состояния 400 (Неверный запрос), пока содержимое не станет доступно через CDN.


## Шаг 3. Получение доступа к содержимому CDN

Для доступа к кэшированному содержимому в сети CDN воспользуйтесь URL-адресом CDN, отображаемым в портале. Адрес для кэшированного BLOB-объекта будет иметь следующий вид:

http://<*CDNNamespace*>.vo.msecnd.net/<*myPublicContainer*>/<*BlobName*>


## Шаг 4. Удаление содержимого из сети CDN

Если кэширование объекта в сети CDN Azure больше не требуется, можно выполнить одно из следующих действий.

-   Можно сделать контейнер закрытым, а не общедоступным. Дополнительные сведения см. в разделе [Ограничение доступа к контейнерам и BLOB-объектам](http://msdn.microsoft.com/library/dd179354.aspx).
-   Вы можете отключить или удалить конечную точку CDN на портале управления.
-   Вы можете изменить размещенную службу, чтобы она перестала отвечать на запросы объекта.

Объект, уже кэшированный в сети CDN, останется в кэше до истечения срока действия этого объекта. По истечении срока действия CDN выполнит проверку конечной точки CDN, чтобы выяснить, что она еще действует и объект по-прежнему находится в анонимном доступе. Если это не так, объект больше не будет кэшироваться.

В настоящее время возможность немедленной очистки содержимого на портале управления Azure не поддерживается. Для немедленной очистки содержимого обратитесь в [службу поддержки Azure](http://azure.microsoft.com/support/options/).

## Дополнительные ресурсы

-   [Создание территориальной группы в Azure]
-   [Практическое руководство. Управление учетными записями хранения для подписки Azure]
-   [Сопоставление содержимого CDN с пользовательским доменом]

[Create Storage Account]: http://msdn.microsoft.com/library/azure/hh264518.aspx
[Azure CDN Node Locations]: cdn-pop-locations.md
[портал управления Azure]: https://manage.windowsazure.com/
[портале управления Azure]: https://manage.windowsazure.com/
[billing plan]: /pricing/calculator/?scenario=full
[How to Register a Custom Subdomain Name for Accessing Blobs in Azure]: ../storage-custom-domain-name.md
[Создание территориальной группы в Azure]: http://msdn.microsoft.com/library/azure/ee460798.aspx
[Overview of the Azure CDN]: cdn-overview.md
[Практическое руководство. Управление учетными записями хранения для подписки Azure]: https://msdn.microsoft.com/ru-ru/library/azure/hh531793.aspx
[Сопоставление содержимого CDN с пользовательским доменом]: cdn-map-content-to-custom-domain.md


[create-new-storage-account]: ./media/cdn-create-a-storage-account-with-cdn/CDN_CreateNewStorageAcct.png

 

<!---HONumber=58_postMigration-->