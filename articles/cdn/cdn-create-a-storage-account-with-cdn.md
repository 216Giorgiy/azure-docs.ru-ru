<properties
	pageTitle="Использование CDN | Microsoft Azure"
	description="Узнайте, как использовать сеть доставки содержимого (CDN) Azure для доставки больших объемов контента посредством кэширования BLOB-объектов и статического контента."
	services="cdn"
	documentationCenter=".net"
	authors="camsoper"
	manager="erikre"
	editor=""/>

<tags
	ms.service="cdn"
	ms.workload="tbd"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="05/11/2016"
	ms.author="casoper"/>


# Интеграция учетной записи хранения с CDN

CDN можно включить для кэширования содержимого из хранилища Azure. Она предоставляет разработчикам глобальное решение для доставки большого объема содержимого с возможностью кэширования больших двоичных объектов и статического содержимого на физических узлах в США, Европе, Азии, Австралии и Южной Америке.


## Шаг 1. Создание учетной записи хранения

Чтобы создать новую учетную запись хранения для подписки Azure, воспользуйтесь следующей процедурой. Учетная запись хранения предоставляет доступ к службам хранилища Azure. Учетная запись хранения представляет собой высший уровень пространства имен для доступа ко всем компонентам службы хранения Azure: службам BLOB-объектов, службам очередей и службам таблиц. Дополнительные сведения см. в статье [Введение в службу хранилища Microsoft Azure](../storage/storage-introduction.md).

Чтобы создать учетную запись хранения, вы должны быть администратором службы или соадминистратором для связанной подписки.

> [AZURE.NOTE] Существует несколько способов, которые можно использовать для создания учетной записи хранения. В их число входят портал Azure и Powershell. В этом учебнике мы будем использовать портал Azure.

**Создание учетной записи хранения для подписки Azure**

1.  Войдите на [портал Azure](https://portal.azure.com).
2.  В нижнем левом углу щелкните **Создать**. В диалоговом окне **Создание** выберите **Данные + хранилище**, затем щелкните **Учетная запись хранения**. В качестве модели развертывания оставьте вариант **Классическая**, а затем нажмите кнопку **Создать**.

    Появится колонка **Учетная запись хранения**.

    ![Создать учетную запись хранения][create-new-storage-account]

4. В поле **Хранилище** введите имя поддомена. Запись может содержать от 3 до 24 строчных букв и цифр.

    Это значение станет именем узла в URI, который используется для адресации ресурсов большого двоичного объекта, очереди и таблицы в подписке. Чтобы обратиться по адресу ресурса контейнера в службе BLOB-объектов, следует использовать URI в следующем формате, где *<StorageAccountLabel>* указывает значение, которое вы ввели в поле **Введите URL-адрес**:

    http://*&lt;StorageAcountLabel&gt;*.blob.core.windows.net/*&lt;mycontainer&gt;*

    **Важно!** Метка URL-адреса образует поддомен URI учетной записи хранения и должна быть уникальной на уровне всех размещенных служб в Azure.

	Это значение также используется как имя этой учетной записи хранения на портале или при доступе к данной учетной записи программным способом.

5.  Выберите значение для параметра **Ценовая категория** или используйте значение по умолчанию. Для дополнительных сведений о ценовых категориях см. [цены на хранилища Azure](https://azure.microsoft.com/pricing/details/storage/).

6.  Выберите или создайте **группу ресурсов**. Дополнительные сведения о группах ресурсов см. в статье [Общие сведения о диспетчере ресурсов Azure](resource-group-overview.md#resource-groups).

7. Выберите **подписку**, с которой будет использоваться данная учетная запись хранения.

8.  Щелкните **Создать**. Процесс создания учетной записи хранения может занять несколько минут.

9.  Чтобы удостовериться, что учетная запись хранения создана успешно, убедитесь, что эта учетная запись отображается в элементах списка **Хранилище** со статусом **В сети**.


## Шаг 2. Создание нового профиля сети CDN

Профиль сети CDN представляет собой коллекцию конечных точек сети CDN. Каждый профиль содержит одну или несколько конечных точек сети CDN. Вы можете использовать несколько профилей для упорядочения конечных точек сети CDN по домену Интернета, веб-приложению или согласно другим условиям.

> [AZURE.TIP] Если у вас уже есть профиль CDN для работы, перейдите к разделу [Шаг 3](#step-3-create-a-new-cdn-endpoint).

[AZURE.INCLUDE [cdn-create-profile](../../includes/cdn-create-profile.md)]

## Шаг 3. Создание новой конечной точки сети CDN

**Создание новой конечной точки CDN для учетной записи хранения**

1. На [портале управления Azure](https://portal.azure.com) перейдите к профилю сети CDN. На предыдущем шаге вы могли прикрепить его к панели мониторинга. Если профиль не прикреплен, найдите его, нажав кнопку **Обзор**, выбрав **Профили CDN** и щелкнув профиль, к которому нужно добавить конечную точку.

    Появится колонка профиля сети CDN.

    ![Профиль сети CDN][cdn-profile-settings]

2. Нажмите кнопку **Добавить конечную точку**.

    ![Кнопка "Добавить конечную точку"][cdn-new-endpoint-button]

    Появится колонка **Добавление конечной точки**.

    ![Колонка "Добавление конечной точки"][cdn-add-endpoint]

3. Введите **имя** конечной точки сети CDN. Это имя будет использоваться для доступа к кэшированным ресурсам в домене `<endpointname>.azureedge.net`.

4. В раскрывающемся списке **Тип источника** выберите *Хранилище*.

5. В раскрывающемся списке **Имя узла источника** выберите учетную запись хранения.

6. Оставьте значения по умолчанию для параметров **Путь к источнику**, **Заголовок узла источника** и **Протокол и порт источника**. Необходимо указать хотя бы один протокол (HTTP или HTTPS).

    > [AZURE.NOTE] Эта конфигурация позволяет использовать все общедоступные контейнеры в вашей учетной записи хранилища для кэширования в сети CDN. Если требуется ограничить область одним контейнером, используйте параметр **Путь к источнику**. Обратите внимание, что видимость контейнера должна иметь значение "Общедоступная".

7. Нажмите кнопку **Создать**, чтобы создать новую конечную точку.

8. Созданная конечная точка отображается в списке конечных точек для профиля. В режиме списка отображается URL-адрес для доступа к кэшированному содержимому, а также исходному домену.

    ![Конечная точка сети CDN][cdn-endpoint-success]

    > [AZURE.NOTE] Конечная точка не сразу будет доступна для использования. Распространение регистрации по сети CDN может занять 90 минут. Если пользователь попытается незамедлительно воспользоваться именем домена CDN, он может столкнуться с кодом состояния 404, пока содержимое не станет доступно через CDN.


## Шаг 4. Доступ к содержимому CDN

Для доступа к кэшированному содержимому в сети CDN воспользуйтесь URL-адресом CDN, отображаемым в портале. Адрес для кэшированного BLOB-объекта будет иметь следующий вид:

http://<*имя\_конечной\_точки*>.azureedge.net/<*общедоступный\_контейнер*>/<*имя\_Blob-объекта*>

> [AZURE.NOTE] После включения CDN-доступа к учетной записи хранения или размещенной службе все общедоступные объекты будут пригодны для пограничного кэширования CDN. Если изменить объект, находящийся в данный момент в кэше сети CDN, новое содержимое будет недоступно через сеть CDN до обновления содержимого CDN по истечении срока действия кэшированного содержимого.

## Шаг 5. Удаление содержимого из сети CDN

Если кэширование объекта в сети CDN Azure больше не требуется, можно выполнить одно из следующих действий.

-   Можно сделать контейнер закрытым, а не общедоступным. Дополнительные сведения см. в статье [Управление анонимным доступом на чтение к контейнерам и большим двоичным объектам](../storage/storage-manage-access-to-resources.md).
-   Вы можете отключить или удалить конечную точку CDN на портале управления.
-   Вы можете изменить размещенную службу, чтобы она перестала отвечать на запросы объекта.

Объект, уже кэшированный в сети CDN, останется в кэше до истечения срока действия этого объекта или до удаления конечной точки. По истечении срока действия CDN выполнит проверку конечной точки CDN, чтобы выяснить, что она еще действует и объект по-прежнему находится в анонимном доступе. Если это не так, объект больше не будет кэшироваться.


## Дополнительные ресурсы

-   [Сопоставление содержимого CDN с пользовательским доменом](cdn-map-content-to-custom-domain.md)

[create-new-storage-account]: ./media/cdn-create-a-storage-account-with-cdn/CDN_CreateNewStorageAcct.png

[cdn-profile-settings]: ./media/cdn-create-a-storage-account-with-cdn/cdn-profile-settings.png
[cdn-new-endpoint-button]: ./media/cdn-create-a-storage-account-with-cdn/cdn-new-endpoint-button.png
[cdn-add-endpoint]: ./media/cdn-create-a-storage-account-with-cdn/cdn-add-endpoint.png
[cdn-endpoint-success]: ./media/cdn-create-a-storage-account-with-cdn/cdn-endpoint-success.png

<!---HONumber=AcomDC_0518_2016-->