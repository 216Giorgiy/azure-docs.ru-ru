<properties 
	pageTitle="Редактор фабрики данных Azure" 
	description="Описывается редактор фабрики данных Azure, который позволяет вам создавать, изменять и развертывать определения JSON связанных служб, таблиц и конвейеров с помощью упрощенного веб-интерфейса пользователя." 
	services="data-factory" 
	documentationCenter="" 
	authors="spelluru" 
	manager="jhubbard" 
	editor="monicar"/>

<tags 
	ms.service="data-factory" 
	ms.workload="data-services" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="04/14/2015" 
	ms.author="spelluru"/>

# Редактор фабрики данных Azure
Редактор фабрики данных Azure представляет собой упрощенный веб-редактор, являющийся частью портала предварительной версии Azure, который позволяет создавать, изменять и развертывать JSON-файлы всех сущностей фабрики данных Azure. Это позволяет создавать связанные службы, наборы данных и конвейеры с помощью шаблонов JSON, поставляемых со службой фабрики данных. Если вы не знакомы с PowerShell, это избавляет от необходимости установки и изучения Azure PowerShell для создания фабрик данных Azure.

## Запуск редактора фабрики данных Azure
Чтобы запустить редактор данных фабрики, нажмите плитку **Разработка и развертывание** в колонке **Фабрика данных** для вашей фабрики данных Azure.

![Плитка «Создание и развертывание»][author-and-deploy-tile]

Вы увидите редактор фабрики данных, как показано на следующем рисунке.
 
![Редактор фабрики данных][data=factory-editor]
 
## Создание новых связанных служб, наборов данных и конвейеров
На панели инструментов имеется четыре кнопки, которые можно использовать для создания сущностей фабрики данных Azure.
 
- Кнопка **Создать хранилище данных** для создания связанной службы хранилища данных. При нажатии этой кнопки появится меню со следующими вариантами: служба хранилища Azure, база данных Azure SQL, локальная база данных SQL Server.
- Кнопка **Создать вычисление** для создания связанной службы вычислений. При нажатии этой кнопки появится меню со следующими вариантами: кластера HDInsight по требованию, кластер HDInsight, связанная служба AzureML.      
- Кнопка **Создать набор данных** для создания набора данных. При нажатии этой кнопки появятся следующие варианты: таблица больших двоичных объектов, таблица SQL Azure, локальная таблица.  
- Кнопка **Создать конвейер** для создания конвейера. Если вы не видите эту кнопку, нажмите **... (многоточие)** на панели инструментов.
 
### Создание связанной службы хранилища
1. Нажмите кнопку **Создать хранилище данных** и выберите в меню один из вариантов.
 
	![Меню создания хранилища данных][new-data-store-menu] 
2. Вы увидите шаблон JSON для создания связанной службы хранилища на **холсте редактора** справа. Вы также увидите, что в разделе **Черновики** появился узел черновика. Выполните следующее:
	1. Для **службы хранилища Azure**: замените **<имя_учетной_записи>** и **<ключ_учетной_записи>** на имя и ключ вашей учетной записи хранения Azure.
	2. Для **базы данных SQL Azure**: замените **<имя_сервера>** на имя вашего сервера SQL Server Azure, **<имя_базы_данных>** на имя вашей базы данных, **<имя_пользователя>@<имя_сервера>** на имя пользователя, и **<пароль>** на пароль для учетной записи этого пользователя. 
	3. Для **локальной базы данных SQL Server**: замените **<имя_сервера>** на имя вашего локального сервера SQL Server, **<имя_базы_данных>** на имя вашей базы данных, **<имя_пользователя>** на имя пользователя, и **<пароль>** на пароль для учетной записи этого пользователя.
4. Нажмите кнопку **Развернуть** на панели инструментов, чтобы развернуть эту связанную службу. Можно также нажать кнопку **Отменить**, чтобы отменить созданный вами черновик JSON.
 
	![Кнопка «Развернуть»][deploy-button]

1. Вы должны увидеть состояние операции развертывания в строке заголовка.

	![Сообщение об успешном развертывании][deploy-success-message]
2. Если операция развертывания выполнилась успешно, вы увидите созданную связанную службу в иерархическом представлении слева.
  
	![StorageLinkedService в иерархическом представлении][storagelinkedservice-in-treview]

### Создание связанной службы вычислений
1. Нажмите кнопку **Создать вычисление** и выберите в меню один из вариантов.
 
	![Меню создания вычисления][new-compute-menu] 
2. Вы увидите шаблон JSON для создания связанной службы вычислений на холсте редактора справа. Выполните следующее:
	1. Для **кластера HDInsight по требованию** укажите значения следующих свойств. 
		1. Для свойства **clusterSize** укажите размер кластера HDInsight, который служба фабрики данных должна создать во время выполнения. 
		2. Для свойства **jobsContainer** укажите имя контейнера больших двоичных объектов по умолчанию, где вы хотите сохранять журналы кластера.
		3. Для свойства **timeToLive** укажите разрешенное время простоя до удаления кластера HDInsight. Например, значение 00:05:00 указывает, что кластер должен быть удален через 5 минут бездействия.
		4. Для свойства **version** укажите версию HDInsight для кластера (по умолчанию: версия 3.1).
		5. Для свойства **linkedServiceName** укажите связанную службу хранилища Azure для связи с кластером HDInsight. 
	6. Для **кластера HDInsight по требованию** («принеси свое») укажите значения следующих свойств.
		1. Для свойства **clusterUri** укажите URL-адрес вашего собственного кластера HDInsight. 
		2. Для свойства **userName** укажите учетную запись пользователя, которую должна использовать служба фабрики данных для подключения к кластеру HDInsight. 
		3. Для свойства **password** укажите пароль для этой учетной записи пользователя. 
		4. Для свойства **linkedServiceName** укажите связанную службу хранилища Azure, связанную с вашим кластером HDInsight.
	5. Для **связанной службы AzureML** укажите следующие свойства.
		1. Для свойства **mlEndPoint** укажите URL-адрес оценки пакета машинного обучения Azure.
		2. Для свойства **apiKey** укажите ключ API для опубликованной модели рабочей области.
3. Нажмите кнопку **Развернуть** на панели инструментов, чтобы развернуть эту связанную службу.

> [AZURE.NOTE]Описания элементов JSON, используемых для определения связанной службы фабрики данных Azure, см. в разделе [Связанные службы][msdn-linkedservices-reference] в библиотеке MSDN.

### Создание нового набора данных
1. Нажмите кнопку **Создать набор данных** и выберите в меню один из вариантов.
2. Вы увидите шаблон JSON для создания набора данных на холсте редактора справа. Выполните следующее: 
	1. Для **таблицы больших двоичных объектов** укажите значения следующих свойств.
	2. Для **таблицы SQL Azure** или **локальной таблицы** укажите значения следующих свойств. 
		1. В разделе **Расположение**: 
			2. для свойства **linkedServiceName** укажите имя связанной службы, которая ссылается на вашу базу данных SQL Azure или локальную базу данных SQL Server;
			2. для свойства **tableName** укажите имя таблицы в экземпляре базы данных SQL Azure или локальной базы данных SQL Server, на которую ссылается связанная служба.
		3. В разделе **Доступность**:
			1. для свойства **frequency** укажите единицу времени для создания среза данных (поддерживаемые значения частоты: минута, час, день, неделя, месяц);
			2. для свойства **interval** укажите интервал в пределах заданной частоты; если свойство  **frequency** (частота) имеет значение **Hour** (час), а свойство и **interval** (интервал) имеет значение **1**, то это указывает, что новые срезы данных должны создаваться каждый час. 
		3. В разделе **Структура**: 
			1. укажите имена и типы столбцов, как показано в следующем примере.
				
				    "structure":
	        		[
	                	{ "name": "FirstName", "type": "String"},
	                	{ "name": "LastName", "type": "String"}
	        		],
	     
> [AZURE.NOTE]Описания элементов JSON, используемых для определения таблицы фабрики данных Azure, см. в разделе [Таблицы][msdn-tables-reference] в библиотеке MSDN.
 		           
### Создание и активация конвейера 
1. Нажмите кнопку **Создать конвейер** в панели инструментов. Если вы не видите кнопку **Создать конвейер**, нажмите **... (многоточие)**, чтобы увидеть ее.   
2. Появится шаблон JSON для создания конвейера на холсте редактора справа. Выполните следующее: 
	1. В свойстве **description** (описание) укажите описание для конвейера.
	2. В разделе **activities** (действия) добавьте в конвейер действия. Пример:
	 
			"activities":	
			[
				{
					"name": "CopyFromBlobToSQL",
					"description": "Push Regional Effectiveness Campaign data to Azure SQL",
					"type": "CopyActivity",
					"inputs": [ {"name": "EmpTableFromBlob"} ],
					"outputs": [ {"name": "EmpSQLTable"} ],		
					"transformation":
					{
						"source":
						{                               
							"type": "BlobSource"
						},
						"sink":
						{
							"type": "SqlSink"
						}	
					},
					"Policy":
					{
						"concurrency": 1,
						"executionPriorityOrder": "NewestFirst",
						"style": "StartOfInterval",
						"retry": 0,
						"timeout": "01:00:00"
					}		
				}
    		]
	3. В свойстве **start** укажите, когда запускается обработка данных или обработка срезов данных. Например: 2014-05-01T00:00:00Z.
	4. В свойстве **end** укажите, когда завершается обработка данных. Например: 2014-05-01T00:00:00Z.       

> [AZURE.NOTE]Описания элементов JSON, используемых для определения конвейера фабрики данных Azure, см. в разделе [Конвейеры и действия][msdn-pipelines-reference] в библиотеке MSDN.

## Добавление определения действия в конвейер JSON
Вы можете добавить определение действия в конвейер JSON, нажав кнопку **Добавить действие** на панели инструментов. При нажатии этой кнопки можно выбрать тип действия, которое требуется добавить в конвейер.

![Параметры добавления действия][add-activity-options]

Если вы хотите скопировать данные из базы данных SQL Azure в хранилище больших двоичных объектов Azure и обрабатывать эти данные в хранилище больших двоичных объектов с помощью скрипта Pig в кластере HDInsight, необходимо сначала добавить в конвейер **действие копирования** и **действие Pig**. Это создает два раздела с этими действиями в разделе activities[] конвейера JSON. Действие Pig — всего лишь действие HDInsight с преобразованием Pig.

	"activities": [
    	{
    		"name": "CopyFromTabletoBlob",
	        "type": "CopyActivity",
			...
		}
		{
			"name": "ProcessBlobDataWithPigScript",
            "type": "HDInsightActivity",
			...
			"transformation": {
            	"type": "Pig",
				...
			}
		}
	]

## Запуск конвейера
Вы можете указать дату и время запуска и дату и время завершения конвейера, задав значения для свойств start и end в JSON.

 	{
	    "name": "ADFTutorialPipeline",
	    "properties":
	    {   
	        "description" : "Copy data from a blob to Azure SQL table",
	        "activities":   
	        [
				...
	        ],
	
	        "start": "2015-02-13T00:00:00Z",
	        "end": "2015-02-14T00:00:00Z",
	        "isPaused": false
	    }
	} 
  
## Черновики в редакторе
Черновики позволяют временно сохранить результаты работы после переключения контекста или перехода в другую сущность в фабрике данных. Время существования черновиков связано с сеансом браузера. Если вы закроете браузер или будете использовать другой компьютер, черновики не будут доступны.

## Отмена черновика JSON сущности фабрики данных
Вы можете отменить определение JSON сущности фабрики данных Azure, нажав кнопку **Отменить** на панели инструментов.

## Клонирование сущности фабрики данных
Вы можете клонировать существующую сущность фабрики данных Azure (связанную службу, таблицу или конвейер), выбрав эту сущность в иерархическом представлении и нажав кнопку **Клонировать** на панели инструментов.

![Клонирование сущности фабрики данных][clone-datafactory-entity]

Вы увидите новый черновик, созданный в узле **Черновики** в иерархическом представлении.

## Удаление сущности фабрики данных
Вы можете удалить сущность фабрики данных Azure (связанную службу, таблицу или конвейер), выбрав эту сущность в иерархическом представлении и нажав кнопку **Удалить** на панели инструментов, или щелкнув эту сущность правой кнопкой мыши и выбрав пункт **Удалить**.

![Удаление сущности фабрики данных][delete-datafactory-entity]

## См. также
Пошаговые инструкции по созданию фабрики данных Azure с помощью редактора фабрики данных см. в разделе [Приступая к работе с фабрикой данных Azure][data-factory-get-started].

[msdn-tables-reference]: https://msdn.microsoft.com/library/dn835002.aspx
[msdn-linkedservices-reference]: https://msdn.microsoft.com/library/dn834986.aspx
[msdn-pipelines-reference]: https://msdn.microsoft.com/library/dn834988.aspx

[data-factory-get-started]: data-factory-get-started.md

[author-and-deploy-tile]: ./media/data-factory-editor/author-and-deploy-tile.png
[data=factory-editor]: ./media/data-factory-editor/data-factory-editor.png
[new-data-store-menu]: ./media/data-factory-editor/new-data-store-menu.png
[new-compute-menu]: ./media/data-factory-editor/new-compute-menu.png
[deploy-button]: ./media/data-factory-editor/deploy-button.png
[deploy-success-message]: ./media/data-factory-editor/deploy-success-message.png
[storagelinkedservice-in-treview]: ./media/data-factory-editor/storagelinkedservice-in-treeview.png
[delete-datafactory-entity]: ./media/data-factory-editor/delete-datafactory-entity.png
[clone-datafactory-entity]: ./media/data-factory-editor/clone-datafactory-entity.png
[add-activity-options]: ./media/data-factory-editor/add-activity-options.png

<!---HONumber=GIT-SubDir-->