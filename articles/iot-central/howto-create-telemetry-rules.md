---
title: Создание правил телеметрии и управление ими в приложении Azure IoT Central | Документация Майкрософт
description: Правила телеметрии Azure IoT Central позволяют отслеживать устройства практически в реальном времени и автоматически вызывать действия (например, отправлять сообщение электронной почты) при срабатывании правила.
author: tbhagwat3
ms.author: tanmayb
ms.date: 04/16/2018
ms.topic: conceptual
ms.service: iot-central
services: iot-central
manager: peterpr
ms.openlocfilehash: caca4e9db898b3766995fde8c5eebd4767abd85b
ms.sourcegitcommit: 266fe4c2216c0420e415d733cd3abbf94994533d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/01/2018
ms.locfileid: "34629819"
---
# <a name="create-a-telemetry-rule-and-set-up-notifications-in-your-azure-iot-central-application"></a>Создание правила телеметрии и настройка уведомлений в приложении Azure IoT Central

Вы можете использовать Microsoft Azure IoT Central для удаленного мониторинга подключенных устройств. Правила Azure IoT Central позволяют вам отслеживать устройства практически в реальном времени и автоматически вызывать действия (например, отправлять сообщение электронной почты) при срабатывании правила. Всего в несколько щелчков вы можете определить условие для отслеживания данных устройства и настроить вызываемое действие. В этой статье содержится подробное описание правила телеметрии.

Приложение Azure IoT Central использует [измерения телеметрии](howto-set-up-template.md) для сбора данных устройства. Каждый тип измерения имеет ключевые атрибуты, определяющие измерение. Вы можете создавать правила для отслеживания каждого типа измерения устройства и генерировать оповещения при срабатывании правила. Правило телеметрии срабатывает, когда данные телеметрии выбранного устройства превышают указанное пороговое значение.

## <a name="create-a-telemetry-rule"></a>Создание правила телеметрии

В этом разделе показано, как создать правило телеметрии. В этом примере используется подключенный кондиционер, который отправляет данные телеметрии о температуре и влажности. Правило отслеживает передаваемые устройством данные температуры и отправляет сообщение электронной почты, когда температура превышает 80 градусов.

1. Откройте страницу подробных сведений об устройстве, к которому добавляется правило.

1. Если вы еще не создали правило, появится следующий экран:

    ![Правила отсутствуют](media\howto-create-telemetry-rules\image1.png)

1. На вкладке **Правила** выберите **+ New Rule** (+ Новое правило), чтобы просмотреть доступные для создания типы правил.

    ![Типы правил](media\howto-create-telemetry-rules\image2.png)

1. Выберите плитку **Телеметрия**, чтобы открыть форму для создания правила.

    ![Правила телеметрии](media\howto-create-telemetry-rules\image3.png)

1. Выберите имя, определяющее правило в этом шаблоне устройства.

1. Чтобы немедленно включить правило для всех устройств, созданных на основе этого шаблона, переведите переключатель **Включить правило** в положение "Вкл.".

### <a name="configure-the-rule-condition"></a>Настройка условия правила

В этом разделе показано, как добавить условие для мониторинга данных телеметрии температуры.

1. Выберите **+** рядом с разделом **Условие**.

1. Выберите тип телеметрии **Температура** из раскрывающегося списка. Затем выберите оператор и введите пороговое значение. Вы можете добавить несколько условий телеметрии. Если задано несколько условий, для срабатывания правила необходимо, чтобы были соблюдены все условия.

    ![Добавление условия телеметрии](media\howto-create-telemetry-rules\image4.png)

    > [!NOTE]
    > Выберите хотя бы одно измерение телеметрии, когда будете определять условие правила телеметрии.

### <a name="configure-the-action"></a>Настройка действия

В этом разделе показано, как указать действие, вызываемое при соблюдении условия правила.

1. Выберите **+** рядом с разделом **Действия**. Здесь отобразится список доступных действий. В общедоступной предварительной версии поддерживается только действие **Электронное письмо**.

    ![Добавление действия](media\howto-create-telemetry-rules\image5.png)

1. Выберите действие **Электронное письмо**, введите допустимый адрес электронной почты в поле **Кому** и укажите примечание, отображаемое в тексте сообщения при срабатывании правила.

    > [!NOTE]
    > Письма отправляются только пользователям, которые были добавлены в приложение и входили в систему минимум один раз. Узнайте больше об [управлении пользователями](howto-administer.md) в Azure IoT Central.

   ![Настройка действия](media\howto-create-telemetry-rules\image6.png)

1. Чтобы сохранить правило, нажмите кнопку **Сохранить**. Правило станет активным в течение нескольких минут и начнет выполнять мониторинг данных телеметрии, отправляемых в приложение. Если условие, указанное в правиле, соответствует требованиям, правило активирует настроенное действие отправки сообщения электронной почты.

## <a name="parameterize-the-rule"></a>Параметризация правила

Для правила можно задать определенные значения **свойств устройства** в качестве параметров. Параметры можно использовать в сценариях, когда пороговые значения телеметрии отличаются для различных устройств. При создании правила выберите свойство устройства, определяющее пороговое значение (например, **Maximum Ideal Threshold** (Максимальное идеальное пороговое значение)), вместо предоставления абсолютного значения (например 80 градусов). Когда правило выполняется, оно сопоставляет данные телеметрии устройства со значением, указанным в свойстве устройства.

За счет использования параметров можно уменьшить количество управляемых правил в шаблоне устройства.

Действия также можно настроить, используя **свойство устройства** в качестве параметра. Если адрес электронной почты хранится в виде свойства устройства, его можно использовать при определении адреса **Кому**.

## <a name="delete-a-rule"></a>Удаление правила

Если вам больше не нужно правило, удалите его. Для этого откройте правило и щелкните **Удалить**. Удаление правила приводит к его удалению из шаблона устройства и всех связанных устройств.

## <a name="enable-or-disable-a-rule-for-a-device-template"></a>Включение или отключение правила для шаблона устройства

Перейдите к устройству и выберите правило, которое требуется включить или отключить. Переведение переключателя **Enable rule for all devices of this template** (Включить правило для всех устройств в шаблоне) в правиле позволяет включать или отключать правило для всех устройств, связанных с определенным шаблоном.

## <a name="enable-or-disable-a-rule-for-a-device"></a>Включение или отключение правила для устройства

Перейдите к устройству и выберите правило, которое требуется включить или отключить. Переведите переключатель **Enable rule for this device** (Включить правило для этого устройства), чтобы включить или отключить правило для этого устройства.

## <a name="next-steps"></a>Дополнительная информация

Вы узнали, как изменять правила в приложении Azure IoT Central, а значит вы готовы к следующему шагу.

> [!div class="nextstepaction"]
> [Управление устройствами](howto-manage-devices.md)