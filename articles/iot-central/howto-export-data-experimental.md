---
title: Экспорт данных в Azure IoT Central | Документация Майкрософт
description: Как экспортировать данные из приложения Azure IoT Central
services: iot-central
author: viv-liu
ms.author: viviali
ms.date: 02/05/2017
ms.topic: conceptual
ms.service: iot-central
manager: peterpr
ms.openlocfilehash: 15697f97a3b223e0a946795ce0dc5e9d3d86ccb8
ms.sourcegitcommit: 415742227ba5c3b089f7909aa16e0d8d5418f7fd
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/06/2019
ms.locfileid: "55772839"
---
# <a name="export-your-data-in-azure-iot-central"></a>Экспорт данных в Azure IoT Central

*Эта статья предназначена для администраторов.*

В этой статье описывается, как использовать функцию непрерывного экспорта данных в Azure IoT Central для экспорта данных в собственные экземпляры **хранилища BLOB-объектов**, **Центров событий Azure** и **Служебной шины Azure**. Можно экспортировать данные **измерений**, **устройств** и **шаблонов устройств** в собственные места назначения для анализа по горячему и холодному пути. Вы можете экспортировать данные в хранилище BLOB-объектов, чтобы выполнять долгосрочный анализ тенденций в Microsoft Power BI или экспортировать их в Центры событий и Служебную шину, чтобы преобразовывать и дополнять свои данные почти в реальном времени с помощью Azure Logic Apps или службы "Функции Azure".

> [!Note]
> С момента включения экспорта непрерывных данных вы получаете только поступающие данные. Сейчас невозможно получить данные за то время, когда непрерывный экспорт данных был отключен. Чтобы сохранить больше исторических данных, включите экспорт непрерывных данных раньше.

## <a name="prerequisites"></a>Предварительные требования

- Вы должны быть администратором в своем приложении IoT Central.

## <a name="export-to-blob-storage"></a>Экспорт в хранилище BLOB-объектов

Данные измерений, устройств и шаблонов устройств экспортируются в вашу учетную запись хранения раз в минуту. При этом каждый файл содержит пакет изменений с момента получения последнего экспортированного файла. Экспортированные данные находятся формате [Apache AVRO](https://avro.apache.org/docs/current/index.html).

Дополнительные сведения об [экспорте в хранилище BLOB-объектов](howto-export-data-blob-storage.md?toc=/azure/iot-central-experimental/toc.json&bc=/azure/iot-central-experimental/breadcrumb/toc.json).

## <a name="export-to-event-hubs-and-service-bus"></a>Экспорт в службы "Центры событий" и "Служебная шина"

Данные измерений, устройств и шаблонов устройств экспортируются в концентратор событий либо очередь или раздел Служебной шины. Экспортированные данные измерений прибывают практически в реальном времени и содержат полные сообщения, которые ваши устройства отправили в IoT Central, а не только сами значения измерений. Экспортированные данные устройств поступают в виде пакетов каждую минуту и содержат изменения свойств и параметров всех устройств, а экспортированные шаблоны устройств содержат изменения для всех шаблонов устройств.


Дополнительные сведения см. в статье [об экспорте в Центры событий и Служебную шину](howto-export-data-event-hubs-service-bus.md?toc=/azure/iot-central-experimental/toc.json&bc=/azure/iot-central-experimental/breadcrumb/toc.json).

## <a name="set-up-export-destination"></a>Настройка места назначения экспорта

Если у вас нет хранилища, Центров событий или Служебной шины, в которые можно выполнять экспорт, выполните следующие шаги:

### <a name="create-storage-account"></a>Создание учетной записи хранения

1. Создайте [учетную запись хранения на портале Azure](https://ms.portal.azure.com/#create/Microsoft.StorageAccount-ARM). Дополнительные сведения см. в [документации по службе хранилища Azure](https://aka.ms/blobdocscreatestorageaccount).
2. Выберите тип учетной записи **Общее назначение** или **Хранилище BLOB-объектов**.
3. Выберите подписку. 

    > [!Note] 
    > Теперь вы можете экспортировать данные в другие подписки, которые **отличаются** от подписки приложения IoT Central с оплатой по мере использования. В этом случае вы подключаетесь с использованием строки подключения.

4. Создайте контейнер в учетной записи хранения. Войдите в свою учетную запись хранения. Выберите **Обзор BLOB-объектов** в разделе **Служба BLOB-объектов**. Выберите **+ Контейнер** в верхней части экрана, чтобы создать контейнер.

### <a name="create-event-hubs-namespace"></a>Создание пространства имен Центров событий

1. Создайте [пространство имен Центров событий на портале Azure](https://ms.portal.azure.com/#create/Microsoft.EventHub). Дополнительные сведения см. в [документации по Центрам событий Azure](https://docs.microsoft.com/azure/event-hubs/event-hubs-create).
2. Выберите подписку. 

    > [!Note] 
    > Теперь вы можете экспортировать данные в другие подписки, которые **отличаются** от подписки приложения IoT Central с оплатой по мере использования. В этом случае вы подключаетесь с использованием строки подключения.
3. Создайте концентратор событий в пространстве имен в Центрах событий. Перейдите к пространству имен и выберите **+ Концентратор событий** в верхней части, чтобы создать экземпляр концентратора событий.

### <a name="create-service-bus-namespace"></a>Создание пространства имен Служебной шины

1. Создайте [пространство имен Служебной шины на портале Azure](https://ms.portal.azure.com/#create/Microsoft.ServiceBus.1.0.5). Дополнительные сведения см. в [документации по Служебной шине Azure](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-create-namespace-portal).
2. Выберите подписку. 

    > [!Note] 
    > Теперь вы можете экспортировать данные в другие подписки, которые **отличаются** от подписки приложения IoT Central с оплатой по мере использования. В этом случае вы подключаетесь с использованием строки подключения.

3. Перейдите к пространству имен Служебной шины и выберите **+ Очередь** или **+ Раздел** в верхней части, чтобы создать очередь или раздел для экспорта.

## <a name="set-up-continuous-data-export"></a>Настройка экспорта непрерывных данных

Теперь, когда вы настроили место назначения в хранилище, Центрах событий или Служебной шине, куда нужно экспортировать данные, выполните следующие шаги, чтобы настроить непрерывный экспорт данных. 

1. Войдите в приложение IoT Central.

2. В меню слева щелкните **Экспорт непрерывных данных**.

    > [!Note]
    > Если вы не видите этого пункта в меню слева, вы не являетесь администратором в приложении. Обратитесь к администратору, чтобы настроить экспорт данных.

    ![Создание нового концентратора событий для непрерывного экспорта данных](media/howto-export-data-experimental/export_menu.png)

3. В правом верхнем углу нажмите кнопку **+ Создать**. Выберите **Хранилище BLOB-объектов Azure**, **Центры событий Azure** или **Служебная шина Azure** в качестве назначения экспорта. 

    > [!NOTE] 
    > Максимальное число экспортов на каждое приложение равно пяти. 

    ![Создание непрерывного экспорта данных](media/howto-export-data-experimental/export_new.png)

4. В раскрывающемся списке выберите свою **учетную запись хранения, пространство имен Центров событий или пространство имен Служебной шины**. Вы также можете выбрать последний вариант в списке — **Enter a connection string** (Ввести строку подключения). 

    > [!NOTE] 
    > Вы увидите учетные записи хранения, пространства имен Центров событий или пространства имен Служебной шины, которые доступны **в той же подписке, что и ваше приложение IoT Central**. Если вы хотите выполнить экспорт за пределы этой подписки, выберите **Enter a connection string** (Ввести строку подключения) и перейдите к шагу 5.

    > [!NOTE] 
    > Для приложений с 7-дневной бесплатной пробной версией единственным способом настроить непрерывный экспорт данных — использовать строку подключения. Это обусловлено тем, что приложения с 7-дневной бесплатной пробной версией не связаны с подпиской Azure.

    ![Создание нового концентратора событий для непрерывного экспорта данных](media/howto-export-data-experimental/export_create.png)

5. (Необязательно.) Если вы выбрали **Enter a connection string** (Ввести строку подключения), открывается новое окно, в которое нужно вставить строку подключения. Чтобы получить строку подключения, сделайте следующее:
    - Чтобы получить строку подключения для учетной записи хранения, перейдите к учетной записи хранения на портале Azure.
        - В разделе **Параметры** щелкните **Ключи доступа**.
        - Скопируйте строку подключения key1 или строку подключения key2.
    - Чтобы получить строку подключения для Центров событий или Служебной шины, перейдите к пространству имен на портале Azure.
        - В разделе **Параметры** выберите **Политики общего доступа**.
        - Выберите значение по умолчанию **RootManageSharedAccessKey** или создайте политику.
        - Скопируйте основную или дополнительную строку подключения.
 
6. Выберите контейнер, концентратор событий, очередь или раздел из раскрывающегося списка.

7. В разделе **Data to export** (Данные для экспорта) укажите каждый тип данных для экспорта, задав для типа значение **Включено**.

6. Чтобы включить непрерывный экспорт данных, убедитесь, что для параметра **Экспорт данных** установлено значение **Включено**. Щелкните **Сохранить**.

  ![Настройка экспорта непрерывных данных](media/howto-export-data-experimental/export_list.png)

7. Через несколько минут ваши данные будут отображаться в выбранном назначении.

## <a name="next-steps"></a>Дополнительная информация

Теперь, когда вы знаете, как экспортировать данные, перейдите к следующему шагу:

> [!div class="nextstepaction"]
> [Экспорт данных в хранилище BLOB-объектов Azure](howto-export-data-blob-storage.md?toc=/azure/iot-central-experimental/toc.json&bc=/azure/iot-central-experimental/breadcrumb/toc.json)

> [!div class="nextstepaction"]
> [Экспорт данных в Центры событий и Служебную шину Azure](howto-export-data-event-hubs-service-bus.md?toc=/azure/iot-central-experimental/toc.json&bc=/azure/iot-central-experimental/breadcrumb/toc.json)

> [!div class="nextstepaction"]
> [Visualize and analyze your Azure IoT Central data in a Power BI dashboard](howto-connect-powerbi.md?toc=/azure/iot-central-experimental/toc.json&bc=/azure/iot-central-experimental/breadcrumb/toc.json) (Визуализация и анализ данных Azure IoT Central в Power BI)
