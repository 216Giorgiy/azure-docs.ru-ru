---
title: Определение типа нового устройства в Azure IoT Central | Документация Майкрософт
description: В этом руководстве показано, как разработчики могут определить тип нового устройства в своем приложении Azure IoT Central. Вы определите телеметрию, состояние, свойства и параметры для вашего типа.
services: iot-central
author: tanmaybhagwat
ms.author: tanmayb
ms.date: 04/16/2018
ms.topic: tutorial
ms.prod: microsoft-iot-central
manager: timlt
ms.openlocfilehash: e1488b708bbbee67362d834a9a703520d37bef37
ms.sourcegitcommit: eb75f177fc59d90b1b667afcfe64ac51936e2638
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/16/2018
ms.locfileid: "34201678"
---
# <a name="1---define-a-new-device-type-in-your-azure-iot-central-application"></a>1. Определение типа нового устройства в приложении Azure IoT Central

В этом руководстве показано, как разработчики могут использовать шаблон устройства для определения типа нового устройства в приложении Microsoft Azure IoT Central. Шаблон устройства определяет телеметрию, состояние, свойства и параметры для типа устройства.

Чтобы вы могли протестировать приложение перед подключением реального устройства, Azure IoT Central создает имитируемое устройство из шаблона устройства при его создании.

В этом руководстве вы создаете шаблон устройства **подключенного кондиционера**. Подключенный кондиционер:

* отправляет данные телеметрии, например температуру и влажность;
* сообщает о состоянии, например, включен ли он;
* содержит свойства, такие как версия встроенного ПО и серийный номер;
* имеет такие параметры, как целевая температура и скорость вращения вентилятора.

Из этого руководства вы узнаете, как выполнять такие задачи:

> [!div class="checklist"]
> * Создание шаблона нового устройства.
> * Добавление телеметрии для устройства.
> * Отображение имитированной телеметрии.
> * Определение измерения событий.
> * Отображение имитированных событий.
> * Определение измерения состояния.
> * Отображение имитированного состояния.
> * Использование свойств устройства.
> * Использование параметров устройства.

## <a name="prerequisites"></a>предварительным требованиям

Для работы с этим кратким руководством вам потребуется приложение Azure IoT Central. Если вы завершили работу с руководством по [созданию приложения Azure IoT Central](quick-deploy-iot-central.md), вы можете повторно использовать созданное в нем приложение. В противном случае выполните следующие шаги для создания пустого приложения Azure IoT Central:

1. Перейдите на страницу [диспетчера приложений](https://aka.ms/iotcentral) в Azure IoT Central.

1. Введите адрес электронной почты и пароль, которые вы используете для доступа к подписке Azure:

   ![Ввод учетной записи организации](media/tutorial-define-device-type/sign-in.png)

1. Чтобы начать создание нового приложения Azure IoT Central, выберите **Новое приложение**:

    ![Страница диспетчера приложений Azure IoT Central](media/tutorial-define-device-type/iotcentralhome.png)

1. Чтобы создать приложение Azure IoT Central, сделайте следующее:

    1. Выберите понятное имя для приложения, например **Кондиционеры Contoso**. Azure IoT Central создаст уникальный префикс URL-адреса. Вы можете изменить этот префикс на что-то более запоминающееся.
    1. Выберите Azure Active Directory и подписку Azure. Дополнительные сведения о каталогах и подписках см. в статье о [создании приложения Azure IoT Central](howto-create-application.md).
    1. Либо используйте существующую группу ресурсов, либо создайте новую с именем по вашему выбору. Например, **contoso-rg**.
    1. Выберите ближайший географический регион.
    1. Выберите шаблон приложения **Пользовательское приложение**.
    1. Выберите план оплаты **Free 30 Day Trial Application** (Бесплатная 30-дневная пробная версия приложения).
    1. Щелкните **Создать**.

    ![Страница создания приложения Azure IoT Central](media/tutorial-define-device-type/iotcentralcreate.png)

Дополнительные сведения см. в статье о [создании приложения Azure IoT Central](howto-create-application.md).

## <a name="create-a-new-custom-device-template"></a>Создание шаблона нового пользовательского устройства

В качестве разработчика вы можете создавать и редактировать шаблоны устройств в своем приложении. Когда вы создаете шаблон устройства, Azure IoT Central генерирует имитируемое устройство из шаблона. Имитированное устройство генерирует телеметрию, которая позволяет вам проверять поведение вашего приложения перед подключением физического устройства.

Чтобы добавить новый шаблон устройства в приложение, вам нужно перейти на страницу **конструктора приложений**. Для этого выберите **Конструктор приложений** в левом навигационном меню:

    ![Application Builder page](media/tutorial-define-device-type/builderhome.png)

## <a name="add-a-device-and-define-telemetry"></a>Добавление устройства и определение телеметрии

На следующих шагах показано, как создать новый шаблон устройства **подключенного кондиционера** для устройств, отправляющих телеметрию температуры в ваше приложение:

1. На странице **конструктора приложений** выберите **Create Device Template** (Создать шаблон устройства):

    ![Страница конструктора приложений, создание шаблона устройства](media/tutorial-define-device-type/builderhomedevices.png)

1. На странице **Шаблоны устройств** выберите **Настраиваемый**. **Настраиваемый** шаблон устройства позволяет определить все характеристики и поведение подключенного кондиционера:

    ![Устройства](media/tutorial-define-device-type/builderhomedevicescustom.png)

1. На странице **New Device Template** (Новый шаблон устройства) введите **подключенный кондиционер** в качестве имени вашего устройства, а затем нажмите кнопку **Создать**. Можно также передать изображение устройства, которое будет видимым для операторов в обозревателе устройства:

    ![Пользовательское устройство](media/tutorial-define-device-type/createcustomdevice.png)

1. В шаблоне устройства **Подключенный кондиционер** откройте страницу **Measurements** (Измерения), где вы определяете телеметрию. Каждый шаблон устройства, который вы определяете, имеет отдельные страницы, где вы можете:

    * указать измерения, такие как телеметрия, событие и состояние, отправляемые устройством;
    * определить параметры, используемые для управления устройством;
    * определить свойства, используемые для записи сведений об устройстве;
    * определить правила, связанные с устройством;
    * настроить панель мониторинга устройства для операторов.

    ![Измерения кондиционера](media/tutorial-define-device-type/airconmeasurements.png)

    > [!NOTE]
    > Чтобы изменить имя устройства или шаблона устройства, щелкните текст вверху страницы.

1. Чтобы добавить данные телеметрии температуры, выберите **New Measurement** (Новое измерение). Затем выберите **Телеметрия** как тип измерения:

    ![Измерения подключенного кондиционера](media/tutorial-define-device-type/airconmeasurementsnew.png)

1. Каждый тип телеметрии, который вы определяете для шаблона устройства, включает в себя [параметры конфигурации](howto-set-up-template.md), такие как:

    * параметры отображения;
    * сведения о телеметрии;
    * параметры имитации.

    Для настройки телеметрии **температуры** используйте сведения в следующей таблице:

    | Параметр              | Значение         |
    | -------------------- | -----------   |
    | Отображаемое имя         | температура;   |
    | Имя поля           | Температура   |
    | Units                | F             |
    | Min                  | 60            |
    | Max                  | 110           |
    | Число десятичных знаков       | 0             |

    Вы также можете выбрать цвет для отображения данных телеметрии. Чтобы сохранить определение телеметрии, щелкните **Сохранить**:

    ![Настройка моделирования температуры](media/tutorial-define-device-type/temperaturesimulation.png)

1. Через некоторое время на странице **измерений** отобразится диаграмма телеметрии температуры с вашего имитированного подключенного кондиционера. Используйте элементы управления для настройки видимости, агрегации или для редактирования определения телеметрии:

    ![Просмотр моделирования температуры](media/tutorial-define-device-type/viewsimulation.png)

1. Вы также можете настроить диаграмму, используя элементы управления **График**, **С накоплением** и **Изменить диапазон времени**:

    ![Настройка диаграммы](media/tutorial-define-device-type/customizechart.png)

## <a name="define-event-measurement"></a>Определение измерения событий
Вы можете использовать событие для определения данных о времени, отправляемых устройством, чтобы обозначать что-то значимое, например ошибку или сбой компонента. Как и измерения телеметрии, Azure IoT Central может имитировать события устройства, чтобы вы могли проверить поведение своего приложения перед подключением физического устройства. Определите измерения событий для вашего типа устройства в представлении **измерений**.

1. Чтобы добавить измерение события **ошибки вентилятора**, выберите **Новое измерение**. Затем выберите **Событие** как тип измерения:

    ![Измерения подключенного кондиционера](media/tutorial-define-device-type/eventnew.png)

1. Каждый тип события, которое вы определяете для шаблона устройства, включает в себя [параметры конфигурации](howto-set-up-template.md), такие как:

    * отображаемое имя;
    * имя поля;
    * серьезность.

    Для настройки события **ошибки вентилятора** используйте сведения в следующей таблице:

    | Параметр              | Значение             |
    | -------------------- | -----------       |
    | Отображаемое имя         | Ошибка вентилятора   |
    | Имя поля           | fanmotorerr       |
    | Уровень серьезности             | Ошибка             |

    Чтобы сохранить определение события, щелкните **Сохранить**:

    ![Настройка измерения событий](media/tutorial-define-device-type/eventconfiguration.png)

1. Через некоторое время на странице **измерений** отобразится диаграмма случайно созданных событий с вашего имитированного подключенного кондиционера. Используйте элементы управления для настройки видимости или для редактирования определения события:

    ![Просмотр имитации события](media/tutorial-define-device-type/eventview.png)

1. Чтобы просмотреть дополнительные сведения о событии, щелкните событие на диаграмме:

    ![Просмотр подробностей о событии](media/tutorial-define-device-type/eventviewdetail.png)


## <a name="define-state-measurement"></a>Определение измерения состояния
Вы можете использовать вкладку "Состояние" для определения и визуализации состояния устройства или его компонента за определенный период времени. Как и измерения телеметрии, Azure IoT Central может имитировать состояние устройства, чтобы вы могли проверить поведение своего приложения перед подключением физического устройства. Определите измерения состояния вашего типа устройства в представлении **измерений**.

1. Чтобы добавить измерение **режим вентилятора**, выберите **Новое измерение**. Затем выберите **Состояние** как тип измерения:

    ![Измерения состояния подключенного кондиционера](media/tutorial-define-device-type/statenew.png)

1. Каждый тип состояния, который вы определяете для шаблона устройства, включает в себя [параметры конфигурации](howto-set-up-template.md), такие как:

    * отображаемое имя;
    * имя поля;
    * значения с необязательными метками отображения;
    * цвет для каждого значения.

    Для настройки состояния **режима вентилятора** используйте сведения в следующей таблице:

    | Параметр              | Значение             |
    | -------------------- | -----------       |
    | Отображаемое имя         | Режим вентилятора          |
    | Имя поля           | fanmode           |
    | Значение                | 1                 |
    | Метка отображения        | Operating (Работает)         |
    | Значение                | 0                 |
    | Метка отображения        | Остановлено           |

    Чтобы сохранить определение измерения состояния, щелкните **Сохранить**:

    ![Настройка измерения состояния](media/tutorial-define-device-type/stateconfiguration.png)

1. Через некоторое время на странице **измерений** отобразится диаграмма произвольно созданных состояний с вашего имитированного подключенного кондиционера. Используйте элементы управления для настройки видимости или для редактирования определения состояния:

    ![Просмотр имитации состояния](media/tutorial-define-device-type/stateview.png)

1. В случае, если в течение небольшой продолжительности времени количество отправленных устройством точек данных слишком велико, измерение состояния отображается с другим визуальными элементами, как показано ниже. Если вы щелкните диаграмму, то все точки данных за этот период времени будут отображаться в хронологическом порядке. Вы также можете сузить диапазон времени, чтобы увидеть измерения, нанесенные на график.

    ![Просмотр сведений о состоянии](media/tutorial-define-device-type/stateviewdetail.png)

## <a name="properties-device-properties-and-settings"></a>Свойства, свойства устройства и параметры

Свойства, свойства устройства и параметры — это разные значения, определенные в шаблоне устройства и связанные с каждым отдельным устройством:

* Используйте _параметры_ для отправки данных конфигурации на устройство из приложения. Например, оператор может использовать параметр, чтобы изменить интервал телеметрии устройства с двух до пяти секунд. Когда оператор изменяет параметр, он отмечается как ожидающий в пользовательском интерфейсе, пока устройство не подтвердит его изменение.
* Используете _свойства_ для записи сведений о вашем устройстве в ваше приложение. Например, вы можете использовать свойства для записи серийного номера устройства или номера телефона его изготовителя. Свойства сохраняются в приложении и не синхронизируются с устройством. Оператор может присваивать значения свойствам.
* Используйте _свойства устройства_, чтобы позволить устройству отправлять значения свойств в ваше приложение. Сообщаемые свойства могут обновляться только устройством. Для оператора свойства устройства доступны только для чтения.

## <a name="use-settings"></a>Использование параметров

Используйте _параметры_, чтобы оператор мог отправлять данные конфигурации на устройство. В этом разделе вы добавите параметр в шаблон **подключенного кондиционера**, который позволяет оператору устанавливать целевую температуру подключенного кондиционера.

1. Перейдите на страницу **Параметры** для своего шаблона устройства **подключенного кондиционера**:

    ![Подготовка к добавлению параметра](media/tutorial-define-device-type/deviceaddsetting.png)

    Вы можете создавать параметры различных типов, например цифровые или текстовые.

1. Выберите **Номер**, чтобы добавить параметр номера для устройства.

1. Для настройки параметра **Set Temperature** (Установить температуру) используйте сведения в следующей таблице:

    | Поле                | Значение           |
    | -------------------- | -----------     |
    | Отображаемое имя         | Установить температуру |
    | Имя поля           | setTemperature  |
    | Единица измерения  | F               |
    | Число десятичных знаков       | 1               |
    | Минимальное значение        | 20              |
    | Максимальное значение        | 200             |
    | Начальное значение        | 80              |
    | ОПИСАНИЕ          | Настройка целевой температуры для кондиционера |

    Затем нажмите кнопку **Сохранить**:

    ![Настройка параметра установки температуры](media/tutorial-define-device-type/configuresetting.png)

    > [!NOTE]
    > Когда устройство подтверждает изменение параметра, состояние параметра изменяется на **синхронизировано**.

1. Вы можете настроить макет страницы **Параметры**, перемещая и изменяя размеры плиток параметров:

    ![Настройка макета параметров](media/tutorial-define-device-type/settingslayout.png)

## <a name="use-properties"></a>Использование свойств

Используйте _свойства_ для хранения сведений о вашем устройстве в приложении. В этом разделе вы добавляете свойства в шаблон **подключенного кондиционера**, в которых будет храниться серийный номер устройства и версия встроенного ПО для каждого устройства.

1. Перейдите на страницу **​Свойства** вашего шаблона устройства **подключенного кондиционера**:

    ![Подготовка к добавлению свойства](media/tutorial-define-device-type/deviceaddproperty.png)

    Вы можете создавать свойства разных типов, например цифровые или текстовые. Чтобы добавить свойство серийного номера в шаблон устройства, щелкните **Текст**.

1. Для настройки свойства серийного номера используйте сведения в следующей таблице:

    | Поле                | Значение                |
    | -------------------- | -------------------- |
    | Отображаемое имя         | Серийный номер        |
    | Имя поля           | SerialNumber         |
    | Начальное значение        | cac00001             |
    | ОПИСАНИЕ          | Серийный номер устройства |

    Оставьте в других полях значения по умолчанию.

    ![Настройка свойств устройства](media/tutorial-define-device-type/configureproperties.png)

    Затем нажмите кнопку **Сохранить**.

1. Чтобы добавить свойство версии встроенного ПО в шаблон устройства, щелкните **Текст**.

1. Для настройки свойства версии встроенного ПО используйте сведения в следующей таблице:

    | Поле                | Значение                   |
    | -------------------- | ----------------------- |
    | Отображаемое имя         | Версия встроенного ПО        |
    | Имя поля           | FirmwareVersion         |
    | Начальное значение        | 0,1                     |
    | ОПИСАНИЕ          | Версия встроенного ПО устройства |

    ![Настройка свойств устройства](media/tutorial-define-device-type/configureproperties2.png)

    Затем нажмите кнопку **Сохранить**.

1. Вы можете настроить макет страницы **Свойства**, перемещая и изменяя размеры плиток свойств:

    ![Настройка макета свойств](media/tutorial-define-device-type/propertieslayout.png)

## <a name="view-your-simulated-device"></a>Просмотр имитированного устройства

Теперь, когда вы определили шаблон устройства **подключенного кондиционера**, вы можете настроить его **панель мониторинга**, чтобы включить измерения, параметры и свойства, которые вы определили. Затем вы можете просмотреть панель мониторинга в качестве оператора:

1. Выберите страницу **Панель мониторинга** вашего шаблона устройства **подключенного кондиционера**:

    ![Панели мониторинга подключенного кондиционера](media/tutorial-define-device-type/aircondashboards.png)

1. Щелкните **Линейная диаграмма**, чтобы добавить компонент на **панель мониторинга**:

    ![Компоненты панели мониторинга](media/tutorial-define-device-type/dashboardcomponents1.png)

1. Настройте компонент **Линейная диаграмма**, используя информацию в следующей таблице:

    | Параметр      | Значение       |
    | ------------ | ----------- |
    | Название        | температура; |
    | Диапазон времени   | За последние 30 минут |
    | Измерения | температура (выберите **Видимость** рядом с **температурой**) |

    ![Параметры линейной диаграммы](media/tutorial-define-device-type/linechartsettings.png)

    Затем нажмите кнопку **Сохранить**.

1. Настройте компонент **Event Chart** (Диаграмма событий), используя информацию в следующей таблице:

    | Параметр      | Значение       |
    | ------------ | ----------- |
    | Название        | События |
    | Диапазон времени   | За последние 30 минут |
    | Измерения | Ошибка двигателя вентилятора (выберите **Видимость** рядом с **Ошибка двигателя вентилятора**) |

    ![Параметры линейной диаграммы](media/tutorial-define-device-type/dashboardeventchartsetting.png)

    Затем нажмите кнопку **Сохранить**.

1. Настройте компонент **State Chart** (Диаграмма состояний), используя информацию в следующей таблице:

    | Параметр      | Значение       |
    | ------------ | ----------- |
    | Название        | Режим вентилятора |
    | Диапазон времени   | За последние 30 минут |
    | Измерения | Режим вентилятора (выберите **Видимость** рядом с **Режим вентилятора**) |

    ![Параметры линейной диаграммы](media/tutorial-define-device-type/dashboardstatechartsetting.png)

    Затем нажмите кнопку **Сохранить**.

1. Чтобы добавить заданный параметр температуры на панель мониторинга, выберите **Settings and Properties** (Параметры и свойства):

    ![Компоненты панели мониторинга](media/tutorial-define-device-type/dashboardcomponents4.png)

1. Настройте компонент **Settings and Properties** (Параметры и свойства), используя сведения в следующей таблице:

    | Параметр                 | Значение         |
    | ----------------------- | ------------- |
    | Название                   | Установить целевую температуру |
    | Параметры и свойства | Установить температуру |

    ![Параметры свойства серийного номера](media/tutorial-define-device-type/propertysettings3.png)

    Затем нажмите кнопку **Сохранить**.

1. Чтобы добавить на панель мониторинга серийный номер устройства, щелкните **Settings and Properties** (Параметры и свойства).

    ![Компоненты панели мониторинга](media/tutorial-define-device-type/dashboardcomponents3.png)

1. Настройте компонент **Settings and Properties** (Параметры и свойства), используя сведения в следующей таблице:

    | Параметр                 | Значение         |
    | ----------------------- | ------------- |
    | Название                   | Серийный номер |
    | Параметры и свойства | Серийный номер |

    ![Параметры свойства серийного номера](media/tutorial-define-device-type/propertysettings1.png)

    Затем нажмите кнопку **Сохранить**.

1. Чтобы добавить на панель мониторинга версию встроенного ПО устройства, щелкните **Settings and Properties** (Параметры и свойства).

    ![Компоненты панели мониторинга](media/tutorial-define-device-type/dashboardcomponents4.png)

1. Настройте компонент **Settings and Properties** (Параметры и свойства), используя сведения в следующей таблице:

    | Параметр                 | Значение            |
    | ----------------------- | ---------------- |
    | Название                   | Версия встроенного ПО |
    | Параметры и свойства | Версия встроенного ПО |

    ![Параметры свойства серийного номера](media/tutorial-define-device-type/propertysettings2.png)

    Затем нажмите кнопку **Сохранить**.

1. Чтобы просмотреть панель мониторинга в качестве оператора, отключите **режим конструктора** в правом верхнем углу страницы.

## <a name="next-steps"></a>Дополнительная информация

Из этого руководства вы узнали, как выполнить следующие задачи:

<!-- Repeat task list from intro -->
> [!div class="nextstepaction"]
> * Создание шаблона нового устройства.
> * Добавление телеметрии для устройства.
> * Отображение имитированной телеметрии.
> * Определение событий устройства.
> * Отображение имитированных событий.
> * Определение состояния.
> * Отображение имитированного состояния.
> * Использование свойств устройства.
> * Использование параметров устройства.

Теперь, когда вы определили шаблон устройства в вашем приложении Azure IoT Central, предлагаем следующие шаги:

* [Настройка правил и действий для устройства](tutorial-configure-rules.md)
* [Настройка представлений оператора](tutorial-customize-operator.md)
