---
title: Настройка шаблона устройства в приложении Azure IoT Central | Документация Майкрософт
description: Подробные сведения о настройке измерений, параметров, свойств, правил и панели мониторинга в шаблоне устройства.
author: viv-liu
ms.author: viviali
ms.date: 04/16/2018
ms.topic: conceptual
ms.service: iot-central
services: iot-central
manager: peterpr
ms.openlocfilehash: f71d4c7dc94fedfd598ab87c51366ba9fb1f184a
ms.sourcegitcommit: f06925d15cfe1b3872c22497577ea745ca9a4881
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/27/2018
ms.locfileid: "37063041"
---
# <a name="set-up-a-device-template"></a>Настройка шаблона устройства

Шаблон устройства — это схема, которая определяет характеристики и поведение типа устройства, которое подключается к приложению Microsoft Azure IoT Central.

Например, конструктор может создать шаблон устройства для подключенного к Интернету вещей вентилятора, который имеет:

- измерение телеметрии температуры;

- измерение событий ошибки двигателя вентилятора;

- измерение состояния работы вентилятора;

- параметр скорости вентилятора;

- свойство расположения;

- правила отправки оповещений;

- панель мониторинга, которая обеспечивает общее представление устройства.

На основе этого шаблона устройства можно создавать и подключать реальные вентиляторы с такими именами, как **fan-1** и **fan-2**. Все эти вентиляторы имеют измерения, параметры, свойства, правила и панель мониторинга, которые пользователи приложения могут отслеживать и контролировать.

> [!NOTE]
> Только администраторы и конструкторы могут создавать, изменять и удалять шаблоны устройств. Любой пользователь может создавать устройства на странице **Device Explorer** из имеющихся шаблонов устройств.

## <a name="create-a-device-template"></a>Создание шаблона устройства

1. Перейдите на страницу **конструктора приложений**.

2. Чтобы создать пустой шаблон, выберите **Create Device Template** (Создать шаблон устройства), а затем выберите **Custom** (Пользовательский).

3. Введите имя нового шаблона устройства и щелкните **Создать**.

   ![Страница сведений устройства с именем шаблона "Охлаждающее устройство"](./media/howto-set-up-template/devicedetailspage.png)

4. Теперь вы находитесь на странице **сведений об устройстве** нового имитированного устройства. Имитированное устройство автоматически создается при создании шаблона устройства. Оно передает данные и может контролироваться как реальное устройство.

Теперь взглянем на каждую из вкладок страницы **сведений об устройстве**.

## <a name="measurements"></a>Измерения

Измерения — это данные, поступающие с устройства. Можно добавить несколько измерений в шаблон устройства в зависимости от его возможностей.

- Измерения **телеметрии** — это точка числовых данных, которые устройство собирает с течением времени. Они представлены в виде непрерывного потока. Например, температура.
- Измерения **событий** представляют собой данные определенной точки во времени, которые представляют что-то значимое, связанное с устройством. Уровень серьезности указывает на важность события. Например, ошибка мотора вентилятора.
- **Измерения состояния** представляют состояние устройства или его компонентов в течение определенного периода времени. К примеру, режим вентилятора, который может быть определен как **работающий** и **остановленный**.

### <a name="create-a-telemetry-measurement"></a>Создание измерения телеметрии
Чтобы добавить измерение телеметрии, нажмите кнопку **+ New Measurement** (+ Новое измерение). В качестве типа измерения выберите **Телеметрия** и введите сведения в форму **Create Telemetry** (Создание телеметрии).

> [!NOTE]
> Когда подключено реальное устройство, обратите внимание на имя измерения, которое сообщает устройство. Имя должно точно соответствовать записи измерения **Имя поля**.

Например, можно добавить новое измерение телеметрии температуры:

![Форма создания телеметрии с подробными сведениями об измерении температуры](./media/howto-set-up-template/measurementsform.png)

Если щелкнуть **Сохранить**, в списке измерений отобразятся данные измерения **температуры**. Оператор может просматривать визуализации данных температуры, которые собирает устройство.

![График измерения](./media/howto-set-up-template/measurementsgraph.png)

### <a name="create-an-event-measurement"></a>Создание измерения события
Чтобы добавить измерение события, нажмите кнопку **+ New Measurement** (+ Новое измерение). В качестве типа измерения выберите **Событие** и введите сведения в форму **Create Event** (Создание события).

Укажите сведения об **отображаемом имени**, **имени поля** и **серьезности** события. Вы можете выбрать из трех доступных уровней серьезности — **Ошибка**, **Предупреждение** и **Сведения**.  

Например, можно добавить новое событие **Ошибка мотора вентилятора**.

![Форма создания события с подробными сведениями о событии мотора вентилятора](./media/howto-set-up-template/eventmeasurementsform.png)

Если щелкнуть **Сохранить**, в списке измерений отобразятся данные измерения **ошибки мотора вентилятора**. Оператор может просматривать визуализации данных события, отправляемые с устройства.

![Диаграмма измерения события](./media/howto-set-up-template/eventmeasurementschart.png)

Чтобы просмотреть дополнительные сведения о событии, щелкните значок события на диаграмме:

![Подробные сведения о событии "Ошибка мотора вентилятора"](./media/howto-set-up-template/eventmeasurementsdetail.png)


### <a name="create-a-state-measurement"></a>Создание измерения состояния
Чтобы добавить измерение состояния, нажмите кнопку **+ New Measurement** (+ Новое измерение). В качестве типа измерения выберите **Состояние** и введите сведения в форму **Create State** (Создание состояния).

Укажите сведения об **отображаемом имени**, **имени поля** и **значениях** состояния. Каждое значение также может иметь отображаемое имя, которое будет использоваться при отображении значения в диаграммах и таблицах.

Например, вы можете добавить новое состояние **Режим вентилятора**, которое имеет два возможных значения, отправляемых устройством: **Работает** и **Остановлено**.

![Форма изменения состояния с подробными сведениями о режиме вентилятора](./media/howto-set-up-template/statemeasurementsform.png)

Если щелкнуть **Сохранить**, в списке измерений отобразится состояние измерения **мотора вентилятора**. Оператор может просматривать визуализации данных состояний, отправляемые с устройства.

![Диаграмма измерения состояний](./media/howto-set-up-template/statemeasurementschart.png)

Если в течение небольшого периода времени количество отправленных устройством точек данных слишком велико, измерение состояния отображается с другими визуальными элементами, как показано на следующем снимке экрана. Если вы щелкнете диаграмму, то все точки данных за этот период времени будут отображаться в хронологическом порядке. Вы также можете сузить диапазон времени, чтобы увидеть измерения, нанесенные на график.

![Подробные сведения об измерении состояния "Статический режим вентилятора"](./media/howto-set-up-template/statemeasurementsdetail.png)


## <a name="settings"></a>Параметры

Параметры предназначены для управления устройством. Они позволяют операторам вашего приложения предоставлять входные данные для устройства. Вы можете добавить несколько параметров в шаблон устройства, которые отображаются в виде плиток на вкладке **Параметры** для использования операторами. Вы можете добавить шесть видов параметров: номер, текст, дата, переключатель, список выбора и метка раздела.

> [!NOTE]
> Когда подключено реальное устройство, обратите внимание на имя параметра, которое сообщает устройство. Имя должно точно соответствовать записи параметра **Имя поля**.

Параметры могут быть в одном из трех состояний. Устройство сообщает об этих состояниях.

- **Синхронизированное**: устройство изменилось с учетом значения параметра.

- **В ожидании**: устройство в настоящее время меняется в соответствии со значением параметра.

- **Ошибка**: устройство вернуло ошибку.

Например, вы можете добавить новый параметр скорости вращения вентилятора:

![Форма настройки числа со сведениями о параметрах скорости](./media/howto-set-up-template/settingsform.png)

Если щелкнуть **Сохранить**, параметр **Fan speed** (Скорость вентилятора) появляется в виде плитки. Его можно использовать для изменения скорости вращения вентилятора устройства.

После создания плитки можно опробовать новый параметр. Во-первых, отключите режим конструктора в верхней правой части экрана.

![Вкладка "Параметры" с параметром "Режим конструктора" для плитки](./media/howto-set-up-template/settingstile.png)

## <a name="properties"></a>properties

Свойства являются метаданными устройства, связанными с этим устройством (например, расположение устройства и серийный номер): Вы можете добавить несколько свойств в свой шаблон устройства, которые отображаются как плитки на вкладке **Свойства**. Оператор может указывать значения свойств при создании устройства, а также может редактировать эти значения в любое время. Вы можете добавить шесть видов свойств: номер, текст, дата, переключатель, свойство устройства и метка.

Существует две категории свойств:

- Свойства **устройства**, которые сообщает устройство.
- Свойства **приложения**, которые хранятся только в приложении. Устройство не распознает свойства приложения.

> [!NOTE]
> Что касается свойств устройства, когда подключено реальное устройство, следует обратить внимание на имя свойства, которое сообщает устройство. Имя должно точно соответствовать записи **Имя поля** свойства. Для свойств приложения имя поля может быть любым, но оно должно быть уникальным в шаблоне устройства.

Например, можно добавить местоположение устройства как новое свойство:

![Форма настройки текста на вкладке "Свойства"](./media/howto-set-up-template/propertiesform.png)

Если щелкнуть **Сохранить**, расположение устройства отображается в виде плитки:

![Плитка "Расположение"](./media/howto-set-up-template/propertiestile.png)

После создания плитки можно изменить значение свойства. Во-первых, отключите режим конструктора в верхней правой части экрана.

### <a name="create-a-location-property-through-azure-maps"></a>Создание свойства расположения с помощью Azure Maps
Вы можете указать географический контекст для своих данных о расположении в Azure IoT Central и сопоставить координаты широты и долготы адреса улицы. Вы также можете просто сопоставить координаты широты и долготы. Azure Maps позволяет использовать эту возможность в IoT Central.

Вы можете добавить два типа свойств расположения:
- **Расположение как свойство приложения**, которое хранится только в приложении. Устройство не распознает свойства приложения.
- **Расположение как свойство устройства**, которое сообщается устройством.

#### <a name="add-location-as-an-application-property"></a>Добавление расположения в качестве свойства приложения 
Вы можете создать свойство расположения как свойство приложения, используя службы Azure Maps в своем приложении IoT Central. Например, вы можете добавить адрес установки устройства. 

1. На вкладке **Свойства** переведите параметр **Режим конструктора** в положение **Вкл.**

   ![Вкладка "Свойства" с включенным режимом конструктора](./media/howto-set-up-template/locationcloudproperty1.png)

2. В библиотеке выберите **Расположение**.
3. Укажите для расположения **отображаемое имя**, **имя поля** и **начальное значение**. 

   ![Форма настройки расположения с подробными сведениями о расположении](./media/howto-set-up-template/locationcloudproperty2.png)

   Для добавления расположения существует два поддерживаемых формата:
   - **расположение в виде адреса**;
   - **расположение в виде координат**. 

4. Щелкните **Сохранить**. 

   ![Свойство "Расположение" с добавленным адресом установки](./media/howto-set-up-template/locationcloudproperty3.png)

Теперь оператор может обновить значение расположения в форме поля расположения. 

#### <a name="add-location-as-a-device-property"></a>Добавление расположения в качестве свойства устройства 

Вы можете создать свойство расположения в качестве свойства устройства, которое сообщается устройством. Например, если нужно отслеживать расположение устройства:

1. На вкладке **Свойства** переведите параметр **Режим конструктора** в положение **Вкл.**

   ![Вкладка "Свойства" с включенным режимом конструктора](./media/howto-set-up-template/locationdeviceproperty1.png)

2. Выберите **Device Property** (Свойство устройства) в библиотеке.
3. Укажите отображаемое имя и имя поля, а затем выберите **Расположение** в качестве типа данных. 

   > [!NOTE]
   > Имя поля должно точно соответствовать имени свойства, которое сообщает устройство. 

   ![Форма настройки свойств устройства с подробными сведениями о расположении](./media/howto-set-up-template/locationdeviceproperty2.png)

Настроив свойство расположения, вы можете [добавить карту, чтобы визуализировать местоположение на панели мониторинга устройства](#add-an-azure-maps-location-in-the-dashboard).

## <a name="commands"></a>Команды

Команды используются для удаленного управления устройством. Они позволяют операторам вашего приложения мгновенно выполнять команды на устройстве. Вы можете добавить несколько команд в шаблон устройства, которые отображаются в виде плиток на вкладке **Команды** для использования операторами. Как создатель устройства, вы можете определить команды в соответствии с требованиями.

Чем команда отличается от параметра? 

* **Параметр.** Представляет собой конфигурацию, которую необходимо применить к устройству таким образом, чтобы оно сохраняло эту конфигурацию, пока вы не измените ее. Например, вам нужно задать температуру охлаждающего устройства, которая не должна изменяться даже после его перезагрузки. 

* **Команда.** Позволяет мгновенно удаленно выполнять команду на устройстве из IoT Central. Если устройство не подключено, время ожидания команды истекает и ее выполнение завершается сбоем. Например, вам требуется перезагрузить устройство.  

При запуске команды устройство может иметь одно из трех состояний, в зависимости от того, получило ли устройство эту команду. 

Например, вы можете добавить новую команду **Echo** (Вывод на экран):

![Форма настройки команды с подробными сведениями о выводе на экран](./media/howto-set-up-template/commandsecho.png)

Если выбрать **Сохранить**, команда **Echo** (Вывод на экран) отображается в виде плитки и ее можно использовать для вывода устройства на экран.

После создания плитки можно опробовать новую команду.

## <a name="rules"></a>Правила

Правила позволяют операторам наблюдать за устройствами почти в реальном времени. При срабатывании правила автоматически вызывают действия, такие как отправка сообщения электронной почты. На сегодня существует один тип правил:

- **Правило телеметрии**, срабатывающее, когда данные телеметрии выбранного устройства превышают указанное пороговое значение. [Узнайте больше о правилах телеметрии](howto-create-telemetry-rules.md).

## <a name="dashboard"></a>панель мониторинга

На панели мониторинга оператор может просмотреть сведения об устройстве. Как создатель вы можете добавить на эту страницу плитки, которые помогают операторам понять, как работает устройство. В шаблон устройства можно добавить несколько плиток панели мониторинга. Вы можете добавить шесть типов плиток для панели мониторинга: изображения, линии, диаграммы, гистограммы, ключевые показатели эффективности, параметры, свойства и метки.

Например, можно добавить плитку **Settings and Properties** (Параметры и свойства), чтобы показать текущие выбранные значения параметров и свойств:

![Форма настройки сведений об устройстве со сведениями о параметрах и свойствах](./media/howto-set-up-template/dashboardsettingsandpropertiesform.png)

Теперь, когда оператор просматривает панель управления, он может видеть плитку, на которой отображаются свойства и параметры устройства:

![Вкладка "Панель мониторинга", на которой отображаются параметры и свойства плитки](./media/howto-set-up-template/dashboardtile.png)

### <a name="add-an-azure-maps-location-in-the-dashboard"></a>Добавление расположения Azure Maps на панель мониторинга

Если вы настроили свойство расположения ранее в разделе, посвященном [созданию свойства расположения с помощью Azure Maps](#create-a-location-property-through-azure-maps), вы можете визуализировать расположение с помощью карты на панели мониторинга устройства.

1. На вкладке **Панель мониторинга** переведите параметр **Режим конструктора** в положение **Вкл.**

   ![Вкладка "Панель мониторинга" с включенным режимом конструктора](./media/howto-set-up-template/locationcloudproperty4map.png)

2. На панели мониторинга устройства выберите **карту** из библиотеки. 
3. Придумайте заголовок и выберите свойство расположения, которое вы ранее настроили как часть свойств устройства.

   ![Форма настройки карты со сведениями о заголовке и свойствах](./media/howto-set-up-template/locationcloudproperty5map.png)

4. Щелкните **Сохранить**. Теперь на фрагменте карты отображается выбранное расположение. 

   ![Фрагмент карты с выбранным расположением](./media/howto-set-up-template/locationcloudproperty6map.png) 

Вы можете изменить размер карты до нужного.

Теперь, когда операторы просматривают панель мониторинга, для них доступны все плитки, которые вы настроили, включая карту расположения.

![Плитки на панели мониторинга](./media/howto-set-up-template/locationcloudproperty7map.png) 

## <a name="next-steps"></a>Дополнительная информация

Вы узнали, как настраивать шаблон устройства в приложении Azure IoT Central, а значит вы готовы к следующему шагу:

> [!div class="nextstepaction"]
> [Создание версии шаблона нового устройства](howto-version-devicetemplate.md)
