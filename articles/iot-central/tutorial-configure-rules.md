---
title: Настройка правил и действий в Azure IoT Central | Документация Майкрософт
description: В этом руководстве показано, как разработчику настраивать правила и действия на основе телеметрии в своем приложении Azure IoT Central.
services: iot-central
author: ankitgupta
ms.author: ankitgup
ms.date: 04/16/2018
ms.topic: tutorial
ms.prod: microsoft-iot-central
manager: timlt
ms.openlocfilehash: 5ac19e0e25ea3e25ede4d87776c01f8bcaea4655
ms.sourcegitcommit: eb75f177fc59d90b1b667afcfe64ac51936e2638
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/16/2018
ms.locfileid: "34202243"
---
# <a name="2---configure-rules-and-actions-for-your-device-in-azure-iot-central"></a>2. Настройка правил и действий для своего устройства в Azure IoT Central

В этом руководстве показано, как разработчику настраивать правила и действия на основе телеметрии в своем приложении Microsoft Azure IoT Central.

В этом руководстве создается правило, которое отправляет сообщение электронной почты, когда температура на кондиционере превышает 90 &deg;F.

Из этого руководства вы узнаете, как выполнять такие задачи:

> [!div class="checklist"]
> * Создание правила на основе телеметрии.
> * Добавление действия

## <a name="prerequisites"></a>предварительным требованиям

Перед началом необходимо выполнить руководство по [определению нового типа устройства в приложении](tutorial-define-device-type.md), чтобы создать для работы шаблон устройства **Подключенный кондиционер**.

## <a name="create-a-telemetry-based-rule"></a>Создание правила на основе телеметрии

1. Чтобы добавить новое правило на основе телеметрии в приложение, в левом меню навигации выберите **Device Explorer**:

    ![Страница Device Explorer](media/tutorial-configure-rules/explorerpage.png)

    Вы увидите шаблон устройства **Подключенный кондиционер (1.0.0)** и устройство **Подключенный кондиционер 1**, созданное в предыдущем руководстве.

1. Чтобы начать настройку подключенного кондиционера, выберите устройство, которое вы создали в предыдущем руководстве:

    ![Страница подключенного кондиционера](media/tutorial-configure-rules/builderdevicelist.png)

1. Чтобы добавить правило в представление **Правила**, выберите **Правила**:

    ![Представление правил](media/tutorial-configure-rules/builderrulesview.png)

1. В этом руководстве добавляется правило телеметрии, основанное на пороговом значении. Чтобы начать создание правила на основе порогового значения, выберите **Новое правило**, а затем — **Телеметрия**.

1. Чтобы определить правило, используйте информацию из следующей таблицы.

    | Параметр     | Значение                          |
    | ----------- | ------------------------------ |
    | ИМЯ        | Температура кондиционера    |
    | Включить правило | С                             |
    | Условие   | Температура больше 90 |

    ![Условие правила температуры](media/tutorial-configure-rules/buildertemperaturerule.png)

## <a name="add-an-action"></a>Добавление действия

При определении правила необходимо также определить действие, выполняемое при соблюдении условий правила. В этом руководстве добавляется действие для отправки сообщения в качестве уведомления о срабатывании правила.

1. Чтобы добавить **действие**, прокрутите вниз к панели **Configure Telemetry Rule** (Настройка правила на основе телеметрии) и выберите знак **+** рядом с разделом **Действия**, а потом выберите **Электронное письмо**:

    ![Действие правила, касающегося температуры](media/tutorial-configure-rules/builderaddaction.png)

1. Чтобы определить действие, используйте информацию из следующей таблицы.

    | Параметр   | Значение                          |
    | --------- | ------------------------------ |
    | Кому        | Ваш адрес электронной почты             |
    | Заметки     | Температура в кондиционере превысила пороговое значение. |

    > [!NOTE]
    > Чтобы получить уведомление по электронной почте, адрес электронной почты должен быть [идентификатором пользователя в приложении](howto-administer.md), а пользователь должен выполнить вход в приложение по крайней мере один раз.

    ![Действие при превышении температуры, настроенное конструктором приложения](media/tutorial-configure-rules/buildertemperatureaction.png)

1. Нажмите **Сохранить**. Ваше правило будет указано на странице **Правила**:

    ![Правила конструктора приложений](media/tutorial-configure-rules/builderrules.png)

## <a name="test-the-rule"></a>Тестирование правила

Вскоре после сохранения правила оно станет активным. При соблюдении условий, заданных в правиле, приложение отправляет сообщение на адрес электронной почты, указанный в действии.

![Действие для отправки электронного сообщения](media/tutorial-configure-rules/email.png)

## <a name="next-steps"></a>Дополнительная информация

Из этого руководства вы узнали, как выполнить следующие задачи:

<!-- Repeat task list from intro -->
> [!div class="nextstepaction"]
> * Создание правила на основе телеметрии
> * Добавление действия

Теперь, когда вы определили правило на основе порогового значения, предлагаемым следующим шагом является [настройка представлений оператора](tutorial-customize-operator.md).

Чтобы узнать больше о различных типах правил в Azure IoT Central и о том, как параметризовать определение правила, см:
* [Создание правила на основе телеметрии и настройка уведомлений в приложении Azure IoT Central](howto-create-telemetry-rules.md)
* [Создание правила на основе события и настройка уведомлений в приложении Azure IoT Central](howto-create-event-rules.md)

<!-- Next tutorials in the sequence -->