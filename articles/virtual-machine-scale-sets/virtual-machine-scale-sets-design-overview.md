---
title: "Проектирование масштабируемых наборов виртуальных машин Azure | Документация Майкрософт"
description: "Узнайте, как спроектировать масштабируемые наборы виртуальных машин Azure."
keywords: "Виртуальная машина Linux, наборы масштабирования виртуальных машин"
services: virtual-machine-scale-sets
documentationcenter: 
author: gatneil
manager: madhana
editor: tysonn
tags: azure-resource-manager
ms.assetid: c27c6a59-a0ab-4117-a01b-42b049464ca1
ms.service: virtual-machine-scale-sets
ms.workload: na
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 06/01/2017
ms.author: negat
ms.translationtype: Human Translation
ms.sourcegitcommit: e869b06935736fae72bd3b5407ebab7c3830098d
ms.openlocfilehash: de3687a1bf36bf49db400a5660ac631f20b629d0
ms.contentlocale: ru-ru
ms.lasthandoff: 02/14/2017


---
# <a name="designing-vm-scale-sets-for-scale"></a>Проектирование наборов масштабирования виртуальных машин
В этом разделе рассматриваются вопросы проектирования наборов масштабирования виртуальных машин. Сведения о том, что такое масштабируемые наборы виртуальных машин, см. в статье [Обзор масштабируемых наборов виртуальных машин](virtual-machine-scale-sets-overview.md).

## <a name="storage"></a>Хранилище

### <a name="scale-sets-with-azure-managed-disks"></a>Масштабируемые наборы с Управляемыми дисками Azure
Теперь масштабируемые наборы можно создавать с [Управляемыми дисками Azure](../storage/storage-managed-disks-overview.md). Управляемые диски обеспечивают следующие преимущества:
- Вам не нужно заранее создавать набор учетных записей хранения Azure для виртуальных машин из масштабируемого набора.
- Вы можете определить [подключенные диски данных](virtual-machine-scale-sets-attached-disks.md) для виртуальных машин в масштабируемом наборе.
- Масштабируемые наборы можно настроить для [поддержки до 1000 виртуальных машин в наборе](virtual-machine-scale-sets-placement-groups.md). 

Масштабируемые наборы с Управляемыми дисками можно создать, начиная с версии&2016;-04-30-preview API вычислений Azure. Сведения о преобразовании шаблона масштабируемый набора в Управляемые диски см. в статье [Преобразование шаблона масштабируемого набора в соответствующий шаблон с управляемым диском](virtual-machine-scale-sets-convert-template-to-md.md).

### <a name="user-managed-storage"></a>Управляемое пользователем хранилище
Масштабируемый набор без Управляемых дисков Azure сохраняет диски операционной системы виртуальных машин в наборе в учетных записях хранения пользователей. Чтобы достичь максимального числа операций ввода-вывода и воспользоваться преимуществами _избыточной подготовки_ (см. ниже), мы рекомендуем использовать не более 20 виртуальных машин на одну учетную запись хранения. Мы также рекомендуем, чтобы имена учетных записей хранения начинались с разных букв. Это поможет распределить нагрузку между разными внутренними системами. 

>[!NOTE]
>Версия API Масштабируемых наборов ВМ `2016-04-30-preview` поддерживает использование Управляемых дисков Azure для диска операционной системы и дополнительных дисков данных. Дополнительные сведения см. в статье [Managed Disks Overview](../storage/storage-managed-disks-overview.md) (Обзор Управляемых дисков) и [Масштабируемые наборы ВМ Azure и подключенные диски данных](virtual-machine-scale-sets-attached-disks.md). 

## <a name="overprovisioning"></a>Избыточная подготовка
Начиная с версии API от&30;.03.2016, в Масштабируемых наборах ВМ по умолчанию используется избыточная подготовка виртуальных машин. Если избыточная подготовка включена, то масштабируемый набор фактически запускает больше виртуальных машин, чем указано, а затем удаляет лишние виртуальные машины после успешной подготовки запрошенного количества виртуальных машин. Избыточная подготовка повышает процент успешной подготовки к работе и сокращает процесс развертывания. Счета за дополнительные виртуальные машины не выставляются, и они не учитываются в квоте.

Хотя избыточная подготовка повышает процент успешной подготовки, он может вызывать проблемы, если в приложении не предусмотрена обработка ситуаций, когда виртуальные машины появляются и удаляются. Чтобы отключить избыточную подготовку, включите в шаблон следующую строку: "overprovision": false. Дополнительные сведения об этом можно найти в [документации по REST API набора масштабирования виртуальных машин](https://msdn.microsoft.com/library/azure/mt589035.aspx).

Если выключить избыточную подготовку для масштабируемого набора, использующего учетную запись хранения пользователя, для учетной записи хранения может использоваться более 20 виртуальных машин. Из соображений производительности операций ввода-вывода мы не рекомендуем использовать более 40 виртуальных машин. 

## <a name="limits"></a>Ограничения
Масштабируемый набор, созданный на основе образа Marketplace (также известный как образ платформы) и настроенный для использования Управляемых дисков Azure, может содержать до 1000 виртуальных машин. Если настроить для масштабируемого набора поддержку более 100 виртуальных машин, не все сценарии будут выполняться одинаково (например, балансировка нагрузки). Дополнительные сведения см. в статье [Работа с крупными масштабируемыми наборами виртуальных машин](virtual-machine-scale-sets-placement-groups.md). 

В настоящее время масштабируемый набор, настроенный с помощью учетных записей хранения пользователей, ограничен 100 виртуальными машинами (и 5 учетными записями хранения для такого масштаба).

Масштабируемый набор, созданный на основе пользовательского образа и настроенный с Управляемыми дисками Azure, может содержать до 100 виртуальных машин. Если масштабируемый набор настроен с учетными записями хранения пользователя, он должен создавать все VHD операционной системы в рамках одной учетной записи хранения. Поэтому рекомендуемое максимальное число виртуальных машин в наборе масштабирования на основе пользовательского образа и пользовательского хранилища равно 20. Если отключить избыточную подготовку, этот предел можно повысить до 40.

Для дополнительных виртуальных машин сверх этого значения необходимо развернуть несколько наборов масштабирования, как показано в [этом шаблоне](https://github.com/Azure/azure-quickstart-templates/tree/master/301-custom-images-at-scale).


