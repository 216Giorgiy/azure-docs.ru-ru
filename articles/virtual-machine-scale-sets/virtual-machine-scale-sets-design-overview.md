<properties
	pageTitle="Проектирование наборов масштабирования виртуальных машин | Microsoft Azure"
	description="Узнайте, как спроектировать наборы масштабирования виртуальных машин."
	keywords="Виртуальная машина Linux, наборы масштабирования виртуальных машин" 
	services="virtual-machine-scale-sets"
	documentationCenter=""
	authors="gatneil"
	manager="madhana"
	editor="tysonn"
	tags="azure-resource-manager" />

<tags
	ms.service="virtual-machine-scale-sets"
	ms.workload="na"
	ms.tgt_pltfrm="vm-linux"
	ms.devlang="na"
	ms.topic="article"
	ms.date="07/28/2016"
	ms.author="gatneil"/>

# Проектирование наборов масштабирования виртуальных машин

В этом разделе рассматриваются вопросы проектирования наборов масштабирования виртуальных машин. Сведения о том, что такое наборы масштабирования виртуальных машин, см. в статье [Обзор наборов для масштабирования виртуальных машин](virtual-machine-scale-sets-overview.md).


## Хранилище

Набор масштабирования использует учетные записи хранения для хранения дисков ОС виртуальных машин в наборе. Мы рекомендуем использовать не более 20 виртуальных машин на учетную запись хранения. Также рекомендуется, чтобы имена учетных записей хранения начинались с разных букв. Это поможет распределить нагрузку между различными внутренними системами. Например, в следующем примере функция шаблона ARM uniqueString используется для создания хэшей префикса, которые добавляются в начало имен учетных записей хранения: [https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-linux-nat](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-linux-nat).


## Избыточная подготовка

Начиная с версии API от 30.03.2016 в наборах масштабирования виртуальных машин по умолчанию используется избыточная подготовка виртуальных машин. Это означает, что набор масштабирования будет развертывать больше виртуальных машин, чем было запрошено, а затем удалять ненужные виртуальные машины, которые были развернуты последними. Это повышает процент успешной подготовки, так как если хотя бы одна виртуальная машина не была подготовлена успешно, диспетчер Azure Resource Manager считает все развертывание неудавшимся. Счета за эти дополнительные виртуальные машины не выставляются, и они не учитываются при определении квоты.

Хотя этот механизм повышает процент успешной подготовки, он может вызывать проблемы, если в приложении не предусмотрена обработка ситуаций, когда виртуальные машины удаляются без оповещения. Чтобы отключить избыточную подготовку, включите в шаблон следующую строку: "overprovision": false.

При отключении избыточной подготовки количество виртуальных машин на учетную запись может быть больше, но мы не рекомендуем использовать больше 40 машин.


## Ограничения
Набор масштабирования на основе пользовательского образа (созданного вами) должен создавать все виртуальные жесткие диски ОС в одной учетной записи хранения. Поэтому рекомендуемое максимальное число виртуальных машин в наборе масштабирования на основе пользовательского образа равно 20. Если отключить избыточную подготовку, этот предел можно повысить до 40.

Для набора масштабирования, созданного на основе образа платформы, в настоящее время действует ограничение в 100 виртуальных машин, и мы рекомендуем 5 учетных записей хранения для такого масштаба.

Для дополнительных виртуальных машин сверх этого значения необходимо развернуть несколько наборов масштабирования. [Пример того, как это сделать, представлен в следующем шаблоне](https://github.com/Azure/azure-quickstart-templates/tree/master/301-custom-images-at-scale).

<!---HONumber=AcomDC_0803_2016-->