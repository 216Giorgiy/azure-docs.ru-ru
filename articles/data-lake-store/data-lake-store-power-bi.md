<properties
   pageTitle="Анализ данных в хранилище озера данных с помощью Power BI | Azure"
   description="Использование Power BI для анализа данных в хранилище озера данных Azure"
   services="data-lake-store" 
   documentationCenter=""
   authors="nitinme"
   manager="paulettm"
   editor="cgronlun"/>

<tags
   ms.service="data-lake-store"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="big-data"
   ms.date="07/18/2016"
   ms.author="nitinme"/>

# Анализ данных в хранилище озера данных с помощью Power BI

В этой статье вы узнаете, как использовать Power BI Desktop для анализа и визуализации данных в хранилище озера данных Azure.

## Предварительные требования

Перед началом работы с этим учебником необходимо иметь следующее:

- **Подписка Azure.**. См. [Бесплатная пробная версия Azure](https://azure.microsoft.com/pricing/free-trial/).

- **Включите свою подписку Azure** для общедоступной предварительной версии хранилища озера данных. См. [инструкции](data-lake-store-get-started-portal.md#signup).

- **Учетная запись хранилища озера данных Azure**. Следуйте инструкциям в разделе [Приступая к работе с хранилищем озера данных Azure на портале Azure](data-lake-store-get-started-portal.md). В этой статье предполагается, что вы уже создали учетную запись хранилища озера данных с именем **mybidatalakestore** и добавили в нее образец файла данных (**Drivers.txt**). Этот образец файла можно скачать в [репозитории Git для озера данных Azure](https://github.com/Azure/usql/tree/master/Examples/Samples/Data/AmbulanceData/Drivers.txt).

- **Power BI Desktop**. Это средство можно скачать в [Центре загрузки Майкрософт](https://www.microsoft.com/ru-RU/download/details.aspx?id=45331).


## Создание отчета в Power BI Desktop

1. Запустите Power BI Desktop на своем компьютере.

2. На ленте **Главная** нажмите кнопку **Получить данные**, а затем щелкните "Дополнительно". В диалоговом окне **Получение данных** выберите пункт **Azure**, затем выберите пункт **Хранилище озера данных Azure** и нажмите кнопку **Подключиться**.

	![Подключение к хранилищу озера данных](./media/data-lake-store-power-bi/get-data-lake-store-account.png "Подключение к хранилищу озера данных")

3. Если появится диалоговое окно с сообщением о том, что соединитель находится в стадии разработки, выберите вариант "Продолжить".

4. В диалоговом окне **Хранилище озера данных Microsoft Azure** укажите URL-адрес для своей учетной записи хранилища озера данных и нажмите кнопку **ОК**.

	![URL-адрес хранилища озера данных](./media/data-lake-store-power-bi/get-data-lake-store-account-url.png "URL-адрес хранилища озера данных")

5. В следующем диалоговом окне нажмите кнопку **Вход**, чтобы войти в учетную запись хранилища озера данных. Вы будете перенаправлены на страницу входа своей организации. Следуйте инструкциям для входа в учетную запись.

	![Вход в хранилище озера данных](./media/data-lake-store-power-bi/get-data-lake-store-account-signin.png "Вход в хранилище озера данных")

6. Успешно выполнив вход, нажмите кнопку **Подключиться**.

	![Подключение к хранилищу озера данных](./media/data-lake-store-power-bi/get-data-lake-store-account-connect.png "Подключение к хранилищу озера данных")

7. В следующем диалоговом окне будет указан файл, который вы добавили в учетную запись хранилища озера данных. Проверьте информацию и нажмите кнопку **Загрузить**.

	![Загрузка данных из хранилища озера данных](./media/data-lake-store-power-bi/get-data-lake-store-account-load.png "Загрузка данных из хранилища озера данных")

8. После успешной загрузки данных в Power BI вы увидите приведенные ниже поля на вкладке **Поля**.

	![Импортированные поля](./media/data-lake-store-power-bi/imported-fields.png "Импортированные поля")

	Однако для визуализации и анализа данных мы рекомендуем использовать показанные ниже поля.

	![Нужные поля](./media/data-lake-store-power-bi/desired-fields.png "Нужные поля")

	В следующих шагах мы обновим запрос, чтобы преобразовать импортированные данные в нужный формат.

9. На вкладке **Главная** ленты нажмите кнопку **Изменить запросы**.

	![Изменение запросов](./media/data-lake-store-power-bi/edit-queries.png "Изменение запросов")

10. В редакторе запросов в столбце **Содержимое** выберите вариант **Двоичные данные**.

	![Изменение запросов](./media/data-lake-store-power-bi/convert-query1.png "Изменение запросов")

11. Вы увидите значок, представляющий добавленный вами файл **Drivers.txt**. Щелкните файл правой кнопкой мыши и выберите пункт **CSV**.

	![Изменение запросов](./media/data-lake-store-power-bi/convert-query2.png "Изменение запросов")

12. В результате вы увидите выходные данные, приведенные ниже. Данные теперь имеют формат, который можно использовать для создания визуализаций.

	![Изменение запросов](./media/data-lake-store-power-bi/convert-query3.png "Изменение запросов")

13. На вкладке **Главная** ленты нажмите кнопку **Закрыть и применить** и выберите пункт **Закрыть и применить**.

	![Изменение запросов](./media/data-lake-store-power-bi/load-edited-query.png "Изменение запросов")

14. После обновления запроса на вкладке **Поля** появятся новые поля, доступные для визуализации.

	![Обновленные поля](./media/data-lake-store-power-bi/updated-query-fields.png "Обновленные поля")

15. Создадим круговую диаграмму, на которой будет представлено количество водителей в каждом городе данной страны. Для этого выполним указанные ниже действия.

	1. На вкладке "Визуализации" щелкните символ круговой диаграммы.

		![Создание круговой диаграммы](./media/data-lake-store-power-bi/create-pie-chart.png "Создание круговой диаграммы")

	2. Мы собираемся использовать следующие столбцы: **Столбец 4** (название города) и **Столбец 7** (название страны). Перетащите их с вкладки **Поля** на вкладку **Визуализации**, как показано ниже.

		![Создание визуализации](./media/data-lake-store-power-bi/create-visualizations.png "Создание визуализации")

	3. Круговая диаграмма теперь должна выглядеть так, как показано ниже.

		![Круговая диаграмма](./media/data-lake-store-power-bi/pie-chart.png "Создание визуализации")

16. Выбрав определенную страну в фильтрах уровня страницы, вы можете теперь увидеть количество водителей в каждом городе этой страны. Например, на вкладке **Визуализации** в списке **Фильтры уровня страницы** выберите **Бразилия**.

	![Выбор страны](./media/data-lake-store-power-bi/select-country.png "Выбор страны")

17. Круговая диаграмма автоматически обновится, и вы увидите количество водителей в городах Бразилии.

	![Количество водителей в стране](./media/data-lake-store-power-bi/driver-per-country.png "Количество водителей в каждой стране")

18. В меню **Файл** выберите пункт **Сохранить**, чтобы сохранить визуализацию как файл Power BI Desktop.

## Публикация отчета в службе Power BI

Создав визуализации в Power BI Desktop, вы можете предоставить общий доступ к ним другим пользователям, опубликовав их в службе Power BI. Инструкции см. в разделе [Публикация из Power BI Desktop](https://powerbi.microsoft.com/documentation/powerbi-desktop-upload-desktop-files/).

## См. также

* [Анализ данных в хранилище озера данных с помощью Аналитики озера данных](../data-lake-analytics/data-lake-analytics-get-started-portal.md)

<!---HONumber=AcomDC_0720_2016-->