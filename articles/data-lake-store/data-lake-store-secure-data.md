<properties 
   pageTitle="Защита данных, хранимых в хранилище озера данных Azure | Azure" 
   description="Узнайте, как защитить данные в хранилище озера данных Azure с помощью групп и списков контроля доступа." 
   services="data-lake-store" 
   documentationCenter="" 
   authors="nitinme" 
   manager="paulettm" 
   editor="cgronlun"/>
 
<tags
   ms.service="data-lake-store"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="big-data" 
   ms.date="05/11/2016"
   ms.author="nitinme"/>

# Защита данных, хранимых в хранилище озера данных Azure

Для защиты данных, хранимых в хранилище озера данных Azure, необходимо выполнить три шага.

1. Начните с создания групп безопасности в Azure Active Directory (AAD). Эти группы безопасности используются для реализации контроля доступа на основе ролей (RBAC) на портале Azure. Дополнительные сведения см. в разделе [Контроль доступа на основе ролей на портале предварительной версии Microsoft Azure](../active-directory/role-based-access-control-configure.md).

2. Назначьте группы безопасности AAD учетной записи хранения озера данных Azure. Это позволит контролировать доступ к учетной записи хранения озера данных с портала и операции управления с портала или через API-интерфейсы.

3. Назначьте группы безопасности AAD как списки контроля доступа (ACL) в файловой системе хранилища озера данных.

В этой статье представлены инструкции по использованию портала Azure для выполнения указанных выше задач.

## Предварительные требования

Перед началом работы с этим учебником необходимо иметь следующее:

- **Подписка Azure.**. См. [Бесплатная пробная версия Azure](https://azure.microsoft.com/pricing/free-trial/).
- **Учетная запись хранения озера данных Azure**. Инструкции по созданию учетной записи см. в разделе [Приступая к работе с хранилищем озера данных Azure](data-lake-store-get-started-portal.md).

## Учитесь быстрее с помощью видео?

[В этом видео](https://mix.office.com/watch/1q2mgzh9nn5lx) показано, как защитить данные, хранящиеся в хранилище озера данных.

## Создание групп безопасности в Azure Active Directory

Инструкции по созданию групп безопасности AAD и добавлению пользователей в группу см. в разделе [Управление группами безопасности в Azure Active Directory](../active-directory/active-directory-accessmanagement-manage-groups.md).

## Назначение пользователей или групп безопасности учетным записям хранения озера данных Azure

При назначении пользователей или групп безопасности учетной записи хранения озера данных Azure вы контролируете доступ к операциям управления в учетной записи с помощью портала Azure и API диспетчера ресурсов Azure.

1. Откройте учетную запись хранения озера данных Azure. В левой панели щелкните **Обзор**, щелкните **Хранилище озера данных** и затем в колонке «Хранилище озера данных» щелкните имя учетной записи, которой вы хотите назначить пользователя или группу безопасности.

2. В колонке учетной записи «Хранилище озера данных» щелкните значок пользователя.

	![Назначение группы безопасности учетной записи хранения озера данных Azure](./media/data-lake-store-secure-data/adl.select.user.icon.png "Назначение группы безопасности учетной записи хранения озера данных Azure")

3. В колонке **Пользователь** в качестве владельца по умолчанию указана группа **Администраторы подписки**.

	![Добавление пользователей и ролей](./media/data-lake-store-secure-data/adl.add.group.roles.png "Добавление пользователей и ролей")
 
	Существует два способа добавить группу и назначить соответствующие роли:

	* добавить пользователя или группу в учетную запись и затем назначить роль или
	* добавить роль и затем назначить пользователей или группы роли.

	В этом разделе мы рассмотрим первый подход и сначала добавим группу, а затем назначим роли. Можно выполнить аналогичные шаги, чтобы сначала выбрать роль, а затем назначить группы для этой роли.
	
4. В колонке **Пользователи** щелкните **Добавить**, чтобы открыть колонку **Добавить доступ**. В колонке **Добавить доступ** щелкните **Выбрать роль** и выберите роль для пользователя или группы.

	 ![Добавление роли для пользователя](./media/data-lake-store-secure-data/adl.add.user.1.png "Добавление роли для пользователя")

	Роли **Владелец** и **Участник** предоставляют доступ ко множеству функций администрирования учетной записи озера данных. Пользователей, которые будут взаимодействовать с данными в озере данных, можно добавить к роли ** Читатель**. Область этих ролей ограничена операциями управления, относящимися к учетной записи хранения озера данных Azure.

	Разрешения отдельной файловой системы определяют, какие операции с данными могут выполнять пользователи. Таким образом, пользователь с ролью «Читатель» может только просматривать параметры администрирования, связанные с учетной записью, но потенциально может считывать и записывать данные в зависимости от назначенных ему разрешений файловой системы. Разрешения файловой системы хранилища озера данных описаны в разделе [Назначение группы безопасности в виде ACL в файловой системе хранилища озера данных Azure](#filepermissions).



5. В колонке **Добавить доступ** щелкните **Добавить пользователей**, чтобы открыть колонку **Добавить пользователей**. В этой колонке найдите группу безопасности, созданную ранее в Azure Active Directory. Если у вас много групп для поиска, воспользуйтесь текстовым полем в верхней части для фильтрации по имени группы. Нажмите кнопку **Выбрать**.

	![Добавление группы безопасности](./media/data-lake-store-secure-data/adl.add.user.2.png "Добавление группы безопасности")

	Если вы хотите добавить группу или пользователя, которые отсутствуют в списке, вы можете пригласить их, щелкнув значок **Пригласить** и указав адрес электронной почты пользователя или группы.

6. Нажмите кнопку **ОК**. Вы увидите группы безопасности, как показано ниже.

	![Добавлена группа безопасности.](./media/data-lake-store-secure-data/adl.add.user.3.png "Добавлена группа безопасности.")

7. У пользователя или группы безопасности теперь есть доступ к учетной записи хранения озера данных Azure. Если вы хотите предоставить доступ конкретным пользователям, их можно добавить в группу безопасности. Аналогично, если требуется отменить доступ для пользователя, его можно удалить из группы безопасности. Можно также назначить несколько групп безопасности для учетной записи.

## <a name="filepermissions"></a>Назначение пользователей или группы безопасности в виде ACL в файловой системе хранилища озера данных Azure

Назначая пользователя или группы безопасности в файловой системе озера данных Azure, вы устанавливаете контроль доступа к данным, хранимым в хранилище озера данных Azure. В текущем выпуске можно задать ACL только на уровне корневого узла файловой системы.

1. В колонке учетной записи «Хранилище озера данных» щелкните **Обозреватель данных**.

	![Создание каталогов в учетной записи хранения озера данных](./media/data-lake-store-secure-data/adl.start.data.explorer.png "Создание каталогов в учетной записи озера данных")

2. В колонке **Обозреватель данных** щелкните корень учетной записи, а затем в колонке вашей учетной записи щелкните значок **доступа**.

	![Настройка списков управления доступом в файловой системе озера данных](./media/data-lake-store-secure-data/adl.acl.1.png "Настройка списков управления доступом в файловой системе озера данных")

3. В колонке **Доступ** перечислены стандартные и пользовательские варианты доступа, уже назначенные корню. Щелкните значок **Добавить**, чтобы добавить ACL пользовательского уровня.

	![Перечисление стандартных и пользовательских сценариев доступа](./media/data-lake-store-secure-data/adl.acl.2.png "Перечисление стандартных и пользовательских сценариев доступа")

	* **Стандартный доступ** — доступ в стиле UNIX, где права на чтение, запись и выполнение (rwx) указываются для трех различных классов пользователей: владелец, группа и прочие.
	* **Пользовательский доступ** соответствует ACL POSIX, где можно задать разрешения для конкретных именованных пользователей или групп, а не только для владельца файла или группы. 
	
	Дополнительные сведения см. в статье [ACL HDFS](https://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-hdfs/HdfsPermissionsGuide.html#ACLs_Access_Control_Lists).

4. Щелкните значок **Добавить**, чтобы открыть колонку **Добавить пользовательский доступ**. В этой колонке щелкните **Выбор пользователя или группы**, а затем в колонке **Выбор пользователя или группы** найдите группу безопасности, созданную ранее в Azure Active Directory. Если у вас много групп для поиска, воспользуйтесь текстовым полем в верхней части для фильтрации по имени группы. Выберите группу, которую необходимо добавить, и нажмите кнопку **Выбрать**.

	![Добавление группы](./media/data-lake-store-secure-data/adl.acl.3.png "Добавление группы")

5. Щелкните **Выбрать разрешения**, выберите разрешения, которые вы хотите назначить группе, и нажмите кнопку **ОК**.

	![Назначение разрешений для группы](./media/data-lake-store-secure-data/adl.acl.4.png "Назначение разрешений для группы")

	Разрешения можно описать следующим образом.

	* **Чтение**. Если это разрешение задано для каталога, оно предоставляет возможность читать имена файлов в каталоге.
	* **Запись**. Если это разрешение задано для каталога, оно предоставляет возможность изменять записи в этом каталоге, например создать, удалить или переименовать файл.
	* **Выполнение**. Если это разрешение задано для каталога, оно предоставляет доступ к содержимому файла в каталоге. Оно также обеспечивает доступ к метаданным файла, если известно его имя. Тем не менее это разрешение не позволяют получить список файлов в каталоге, если также не задано разрешение **Чтение**.

	>[AZURE.NOTE] Разрешение **Чтение и выполнение** нужно для перечисления каталогов и часто требуется при предоставлении пользователю или группе доступа к данным только для чтения.


6. В колонке **Добавить пользовательский доступ** щелкните **ОК**. Теперь добавленная группа с соответствующими разрешениями отобразится в колонке **Доступ**.

	![Назначение разрешений для группы](./media/data-lake-store-secure-data/adl.acl.5.png "Назначение разрешений для группы")

	> [AZURE.IMPORTANT] В текущем выпуске можно указать только 9 записей в разделе **Пользовательский доступ**. Если вы хотите добавить больше 9 пользователей, необходимо создать группы безопасности, добавить пользователей в группы безопасности и предоставить доступ этим группам безопасности к учетной записи хранения озера данных.

7. При необходимости можно также изменить права доступа уже после добавления группы. Снимите или установите флажок для каждого типа разрешений (чтение, запись, выполнение) в зависимости от того, нужно ли удалить или назначить разрешение для группы безопасности. Щелкните **Сохранить**, чтобы сохранить изменения, или **Отменить** для их отмены.

## Удаление групп безопасности из учетной записи хранения озера данных Azure

При удалении групп безопасности из учетной записи хранения озера данных Azure вы только изменяете доступ к операциям управления этой учетной записи на портале Azure и в API диспетчера ресурсов Azure.

1. В колонке учетной записи «Хранилище озера данных» щелкните значок пользователя.

	![Назначение группы безопасности учетной записи озера данных Azure](./media/data-lake-store-secure-data/adl.select.user.icon.png "Назначение группы безопасности учетной записи озера данных Azure")

2. В колонке **Пользователи** выберите группу безопасности, которую необходимо удалить.

	![Удаляемая группа безопасности](./media/data-lake-store-secure-data/adl.add.user.3.png "Удаляемая группа безопасности")

3. В колонке группы безопасности нажмите кнопку **Удалить**.

	![Удалена группа безопасности.](./media/data-lake-store-secure-data/adl.remove.group.png "Удалена группа безопасности.")

## Удаление ACL группы безопасности из файловой системы хранилища озера данных Azure

При удалении ACL группы безопасности из файловой системы хранилища озера данных Azure вы изменяете доступ к данным в хранилище озера данных.

1. В колонке учетной записи «Хранилище озера данных» щелкните **Обозреватель данных**.

	![Создание каталогов в учетной записи озера данных](./media/data-lake-store-secure-data/adl.start.data.explorer.png "Создание каталогов в учетной записи озера данных")

2. В колонке **Обозреватель данных** щелкните корень учетной записи, а затем в колонке вашей учетной записи щелкните значок **доступа**.

	![Настройка списков управления доступом в файловой системе озера данных](./media/data-lake-store-secure-data/adl.acl.1.png "Настройка списков управления доступом в файловой системе озера данных")

3. В колонке **Доступ** в разделе **Пользовательский доступ** щелкните группу безопасности, которую требуется удалить. В колонке **Пользовательский доступ** щелкните **Удалить** и нажмите кнопку **ОК**.

	![Назначение разрешений для группы](./media/data-lake-store-secure-data/adl.remove.acl.png "Назначение разрешений для группы")


## См. также

- [Обзор хранилища озера данных Azure](data-lake-store-overview.md)
- [Copy data from Azure Storage Blobs to Data Lake Store](data-lake-store-copy-data-azure-storage-blob.md)
- [Использование аналитики озера данных Azure с хранилищем озера данных](../data-lake-analytics/data-lake-analytics-get-started-portal.md)
- [Использование Azure HDInsight с хранилищем озера данных](data-lake-store-hdinsight-hadoop-use-portal.md)
- [Начало работы с хранилищем озера данных с помощью PowerShell](data-lake-store-get-started-powershell.md)
- [Начало работы с хранилищем озера данных с помощью пакета SDK .NET](data-lake-store-get-started-net-sdk.md)

<!---HONumber=AcomDC_0518_2016-->