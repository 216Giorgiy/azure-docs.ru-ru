---
title: Защита данных, хранимых в Azure Data Lake Store | Документация Майкрософт
description: Узнайте, как защитить данные в хранилище озера данных Azure с помощью групп и списков контроля доступа.
services: data-lake-store
documentationcenter: ''
author: nitinme
manager: jhubbard
editor: cgronlun
ms.assetid: ca35e65f-3986-4f1b-bf93-9af6066bb716
ms.service: data-lake-store
ms.devlang: na
ms.topic: conceptual
ms.date: 03/26/2018
ms.author: nitinme
ms.openlocfilehash: 5b83f02c55d0aa7b2e122d7fc8c9ef5734cdd924
ms.sourcegitcommit: eb75f177fc59d90b1b667afcfe64ac51936e2638
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/16/2018
ms.locfileid: "34197041"
---
# <a name="securing-data-stored-in-azure-data-lake-store"></a>Защита данных, хранимых в хранилище озера данных Azure
Для защиты данных, хранимых в хранилище озера данных Azure, необходимо выполнить три шага.  При управлении доступом на основе ролей (RBAC) и при использовании списков управления доступом (ACL) режим доступа должен обеспечивать пользователям и группам безопасности полный доступ к данным.

1. Начните с создания групп безопасности в Azure Active Directory (AAD). Эти группы безопасности используются для реализации управления доступом на основе ролей (RBAC) на портале Azure. Дополнительные сведения см. в статье [Использование управления доступом на основе ролей для контроля доступа к ресурсам в подписке Azure](../role-based-access-control/role-assignments-portal.md).
2. Назначьте группы безопасности AAD учетной записи хранения озера данных Azure. Это позволит контролировать доступ к учетной записи хранения озера данных с портала и операции управления с портала или через API-интерфейсы.
3. Назначьте группы безопасности AAD как списки контроля доступа (ACL) в файловой системе хранилища озера данных.
4. Кроме того, вы также можете задать диапазон IP-адресов для клиентов с доступом к данным в хранилище озера данных.

В этой статье представлены инструкции по использованию портала Azure для выполнения указанных выше задач. Подробные сведения о реализации безопасности на уровне учетной записи и данных в Data Lake Store см. в статье [Обеспечение безопасности в Azure Data Lake Store](data-lake-store-security-overview.md). Подробные сведения о реализации списков ACL в Azure Data Lake Store см. в статье [Контроль доступа в Azure Data Lake Store](data-lake-store-access-control.md).

## <a name="prerequisites"></a>предварительным требованиям
Перед началом работы с этим учебником необходимо иметь следующее:

* **Подписка Azure**. См. страницу [бесплатной пробной версии Azure](https://azure.microsoft.com/pricing/free-trial/).
* **Учетная запись хранения озера данных Azure**. Инструкции по созданию учетной записи см. в статье [Начало работы с Azure Data Lake Store с помощью портала Azure](data-lake-store-get-started-portal.md).

## <a name="create-security-groups-in-azure-active-directory"></a>Создание групп безопасности в Azure Active Directory
Инструкции по созданию групп безопасности AAD и добавлению пользователей в группу см. в статье [Управление группами в Azure Active Directory](../active-directory/active-directory-groups-create-azure-portal.md).

> [!NOTE] 
> Добавить пользователей и другие группы в группу в Azure AD можно с помощью портала Azure. Тем не менее, чтобы добавить в группу субъект-службу, используйте [модуль PowerShell Azure AD](../active-directory/active-directory-accessmanagement-groups-settings-v2-cmdlets.md).
> 
> ```powershell
> # Get the desired group and service principal and identify the correct object IDs
> Get-AzureADGroup -SearchString "<group name>"
> Get-AzureADServicePrincipal -SearchString "<SPI name>"
> 
> # Add the service principal to the group
> Add-AzureADGroupMember -ObjectId <Group object ID> -RefObjectId <SPI object ID>
> ```
 
## <a name="assign-users-or-security-groups-to-azure-data-lake-store-accounts"></a>Назначение пользователей или групп безопасности учетным записям хранения озера данных Azure
При назначении пользователей или групп безопасности учетной записи хранения озера данных Azure вы контролируете доступ к операциям управления в учетной записи с помощью портала Azure и API диспетчера ресурсов Azure. 

1. Откройте учетную запись хранения озера данных Azure. На левой панели щелкните **Все ресурсы**, а затем в колонке "Все ресурсы" щелкните имя учетной записи, которой вы хотите назначить пользователя или группу безопасности.

2. В колонке учетной записи Data Lake Store щелкните **Управление доступом (IAM)**. В колонке по умолчанию перечисляются владельцы подписки под заголовком "Владелец".
   
    ![Назначение группы безопасности учетной записи Azure Data Lake Store](./media/data-lake-store-secure-data/adl.select.user.icon.png "Назначение группы безопасности учетной записи Azure Data Lake Store")

3. В колонке **Управление доступом (IAM)** нажмите кнопку **Добавить**, чтобы открыть колонку **Добавить разрешения**. В колонке **Добавить разрешения** выберите **роль** пользователя или группы. Найдите группу безопасности, созданную ранее в Azure Active Directory, и выберите ее. Если у вас много пользователей и групп, среди которых нужно проводить поиск, воспользуйтесь текстовым полем **Выбрать**, чтобы отфильтровать список по названию группы. 
   
    ![Добавление роли для пользователя](./media/data-lake-store-secure-data/adl.add.user.1.png "Добавление роли для пользователя")
   
    Роли **Владелец** и **Участник** предоставляют доступ ко множеству функций администрирования учетной записи Data Lake. Пользователей, которые будут работать с данными в озере данных, но одновременно нуждаются в информации об учетной записи, можно добавить к роли **Читатель**. Область этих ролей ограничена операциями управления, относящимися к учетной записи хранения озера данных Azure.
   
    Разрешения отдельной файловой системы определяют, какие операции с данными могут выполнять пользователи. Таким образом, пользователь с ролью «Читатель» может только просматривать параметры администрирования, связанные с учетной записью, но потенциально может считывать и записывать данные в зависимости от назначенных ему разрешений файловой системы. Разрешения файловой системы хранилища озера данных описаны в разделе [Назначение группы безопасности в виде ACL в файловой системе хранилища озера данных Azure](#filepermissions).

    > [!IMPORTANT]
    > Только роль **Владелец** дает автоматический доступ к файловой системе. Для получения любого уровня доступа к папкам и файлам роли **Участник** и **Читатель**, а также все остальные, требуют включения пользователя в список управления доступом.  Роль **Владелец** предоставляет права суперпользователя на доступ к файлам и папкам, которые не могут быть переопределены через ACL. Дополнительные сведения о распространении политик RBAC на доступ к данным см. в разделе [RBAC для управления учетными записями](data-lake-store-security-overview.md#rbac-for-account-management).

4. Если нужно добавить группу или пользователя, не указанные в колонке **Добавить разрешения**, можно пригласить их, вписав их адрес электронной почты в текстовое поле **Выбрать** и выбрав их из списка.
   
    ![Добавление группы безопасности](./media/data-lake-store-secure-data/adl.add.user.2.png "Добавление группы безопасности")
   
5. Выберите команду **Сохранить**. Вы увидите группы безопасности, как показано ниже.
   
    ![Добавленная группа безопасности](./media/data-lake-store-secure-data/adl.add.user.3.png "Добавленная группа безопасности")

6. У пользователя или группы безопасности теперь есть доступ к учетной записи хранения озера данных Azure. Если вы хотите предоставить доступ конкретным пользователям, их можно добавить в группу безопасности. Аналогично, если требуется отменить доступ для пользователя, его можно удалить из группы безопасности. Можно также назначить несколько групп безопасности для учетной записи. 

## <a name="filepermissions"></a>Назначение пользователей или групп безопасности в виде списка контроля доступа в файловой системе Azure Data Lake Store
Назначая пользователя или группы безопасности в файловой системе озера данных Azure, вы устанавливаете контроль доступа к данным, хранимым в хранилище озера данных Azure.

1. В колонке учетной записи «Хранилище озера данных» щелкните **Обозреватель данных**.
   
    ![Просмотр данных с помощью обозревателя данных ](./media/data-lake-store-secure-data/adl.start.data.explorer.png "View data via Data Explorer")
2. В колонке **Обозреватель данных** выберите папку, для которой нужно настроить список управления доступом, а затем нажмите кнопку **Доступ**. Чтобы назначить списки управления доступом для файла, выберите файл для предварительного просмотра и щелкните **Доступ** из колонки **Предварительный просмотр файла**.
   
    ![Настройка списков управления доступом в файловой системе Data Lake](./media/data-lake-store-secure-data/adl.acl.1.png "Настройка списков управления доступом в файловой системе Data Lake")
3. В колонке **Доступ** перечислены владельцы и назначенные им права доступа, которые уже назначены администратору. Нажмите кнопку **Добавить**, чтобы добавить дополнительные списки ACL для доступа.
    > [!IMPORTANT]
    > При настройке прав доступа к одному файлу пользователю или группе не обязательно предоставляются права доступа к этому файлу. Необходимо также обеспечить доступность пути к файлу для этого пользователя или группы. Дополнительные сведения и примеры см. в разделе [Типовые сценарии при работе с разрешениями](data-lake-store-access-control.md#common-scenarios-related-to-permissions).
   
    ![Перечисление стандартных и пользовательских сценариев доступа](./media/data-lake-store-secure-data/adl.acl.2.png "Перечисление стандартных и пользовательских сценариев доступа")
   
   * **Владельцы** и **Все остальные** — доступ в стиле UNIX, согласно которому права на чтение, запись и выполнение (rwx) указываются для трех различных классов пользователей: владелец, группа и другие.
   * **Назначенные разрешения** соответствуют спискам управления доступом POSIX, в которых можно задать разрешения для конкретных именованных пользователей или групп, а не только для владельца файла или группы. 
     
     Дополнительные сведения см. в разделе [ACL HDFS](https://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-hdfs/HdfsPermissionsGuide.html#ACLs_Access_Control_Lists). Дополнительные сведения о реализации списков управления доступом в контексте Data Lake Store см. в статье [Контроль доступа в Azure Data Lake Store](data-lake-store-access-control.md).
4. Щелкните значок **Добавить**, чтобы открыть колонку **Назначение разрешений**. В этой колонке нажмите **Выберите пользователя или группу**, а затем в колонке **Выберите пользователя или группу** найдите созданную ранее группу безопасности в Azure Active Directory. Если у вас много групп для поиска, воспользуйтесь текстовым полем в верхней части для фильтрации по имени группы. Выберите группу, которую необходимо добавить, и нажмите кнопку **Выбрать**.
   
    ![Добавление группы](./media/data-lake-store-secure-data/adl.acl.3.png "Добавление группы")
5. Нажмите кнопку **Выберите разрешения**, выберите разрешения, а также любой из вариантов назначения разрешений — рекурсивно или в виде ACL для доступа, ACL по умолчанию или обоих одновременно. Последовательно выберите **ОК**.
   
    ![Назначение разрешений для группы](./media/data-lake-store-secure-data/adl.acl.4.png "Назначение разрешений для группы")
   
    Дополнительные сведения о разрешениях в Data Lake Store и списках ACL (по умолчанию и для доступа) см. в статье [Контроль доступа в Data Lake Store](data-lake-store-access-control.md).
6. После нажатия кнопки **ОК** в колонке **Назначьте разрешения** добавленная группа и связанные с ней разрешения будут перечислены в колонке **Доступ**.
   
    ![Назначение разрешений для группы](./media/data-lake-store-secure-data/adl.acl.5.png "Назначение разрешений для группы")
   
   > [!IMPORTANT]
   > В текущей версии можно внести до 28 записей в список **Назначенные разрешения**. Если нужно добавить больше 28 пользователей, необходимо создать группы безопасности, добавить в них пользователей и предоставить доступ этим группам безопасности к учетной записи хранения Data Lake Store.
   > 
   > 
7. При необходимости можно также изменить права доступа уже после добавления группы. Снимите или установите флажок для каждого типа разрешений (чтение, запись, выполнение) в зависимости от того, нужно ли удалить или назначить разрешение для группы безопасности. Щелкните **Сохранить**, чтобы сохранить изменения, или **Отменить** для их отмены.

## <a name="set-ip-address-range-for-data-access"></a>Назначение диапазона IP-адресов для доступа к данным
Хранилище озера данных Azure позволяет дополнительно блокировать доступ к хранилищу данных на уровне сети. Вы можете включить брандмауэр, указать IP-адрес или определить диапазон IP-адресов для доверенных клиентов. После включения брандмауэра к хранилищу смогут подключаться только клиенты с IP-адресами из определенного диапазона.

![Параметры брандмауэра и доступ по IP-адресу](./media/data-lake-store-secure-data/firewall-ip-access.png "Параметры брандмауэра и доступ по IP-адресу")

## <a name="remove-security-groups-for-an-azure-data-lake-store-account"></a>Удаление групп безопасности из учетной записи хранения озера данных Azure
При удалении групп безопасности из учетной записи хранения озера данных Azure вы только изменяете доступ к операциям управления этой учетной записи на портале Azure и в API диспетчера ресурсов Azure.  

Права доступа к данным не меняются и по-прежнему управляются ACL.  Исключением являются пользователи и группы с ролью владельцев.  Пользователи и группы, удаленные из роли "Владельцы", больше не являются суперпользователями и их права доступа ограничиваются правами, предоставляемыми списком управления доступом. 

1. В колонке учетной записи Data Lake Store щелкните **Управление доступом (IAM)**. 
   
    ![Назначение группы безопасности учетной записи Azure Data Lake](./media/data-lake-store-secure-data/adl.select.user.icon.png "Назначение группы безопасности учетной записи Azure Data Lake")
2. В колонке **Управление доступом (IAM)** выберите группы безопасности, которые требуется удалить. Нажмите кнопку **Удалить**.
   
    ![Удаленная группа безопасности](./media/data-lake-store-secure-data/adl.remove.group.png "Удаленная группа безопасности")

## <a name="remove-security-group-acls-from-azure-data-lake-store-file-system"></a>Удаление ACL группы безопасности из файловой системы хранилища озера данных Azure
При удалении списка контроля доступа группы безопасности из файловой системы Azure Data Lake Store вы меняете права доступа к данным в Data Lake Store.

1. В колонке учетной записи «Хранилище озера данных» щелкните **Обозреватель данных**.
   
    ![Создание каталогов в учетной записи Data Lake](./media/data-lake-store-secure-data/adl.start.data.explorer.png "Создание каталогов в учетной записи Data")
2. В колонке **Обозреватель данных** выберите папку, для которой нужно удалить список управления доступом, а затем нажмите кнопку **Доступ**. Для удаления списка управления доступом, созданного для файла, выберите файл для предварительного просмотра и нажмите кнопку **Доступ** в колонке **Предварительный просмотр файла**. 
   
    ![Настройка списков управления доступом в файловой системе Data Lake](./media/data-lake-store-secure-data/adl.acl.1.png "Настройка списков управления доступом в файловой системе Data Lake")
3. В колонке **Доступ** выберите группу безопасности, которую необходимо удалить. В колонке **Сведения о доступе** щелкните **Удалить**.
   
    ![Назначение разрешений для группы](./media/data-lake-store-secure-data/adl.remove.acl.png "Назначение разрешений для группы")

## <a name="see-also"></a>См. также
* [Обзор Azure Data Lake Store](data-lake-store-overview.md)
* [Copy data from Azure Storage Blobs to Data Lake Store](data-lake-store-copy-data-azure-storage-blob.md)
* [Использование аналитики озера данных Azure с хранилищем озера данных](../data-lake-analytics/data-lake-analytics-get-started-portal.md)
* [Использование Azure HDInsight с хранилищем озера данных](data-lake-store-hdinsight-hadoop-use-portal.md)
* [Начало работы с хранилищем озера данных с помощью PowerShell](data-lake-store-get-started-powershell.md)
* [Начало работы с хранилищем озера данных с помощью пакета SDK .NET](data-lake-store-get-started-net-sdk.md)
* [Журналы диагностики доступа для Data Lake Store](data-lake-store-diagnostic-logs.md)

