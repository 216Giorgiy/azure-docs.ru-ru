<properties
   pageTitle="Аутентификация в Data Lake Store с помощью Active Directory | Microsoft Azure"
   description="Узнайте, как выполнять аутентификацию в Data Lake Store с помощью Active Directory."
   services="data-lake-store"
   documentationCenter=""
   authors="nitinme"
   manager="jhubbard"
   editor="cgronlun"/>

<tags
   ms.service="data-lake-store"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="big-data"
   ms.date="09/27/2016"
   ms.author="nitinme"/>


# <a name="authenticate-with-data-lake-store-using-azure-active-directory"></a>Аутентификация в Data Lake Store с помощью Azure Active Directory

Azure Data Lake Store использует Azure Active Directory для аутентификации. Прежде чем создать приложение, которое работает с Azure Data Lake Store или Azure Data Lake Analytics, необходимо решить, как его следует аутентифицировать посредством Azure Active Directory (Azure AD). Доступно два основных варианта:

* аутентификация пользователей и 
* аутентификация между службами. 

Оба этих варианта позволят приложению получить маркер OAuth 2.0, который вкладывается в каждый запрос к Azure Data Lake Store или Azure Data Lake Analytics.


## <a name="prerequisites"></a>Предварительные требования

* Подписка Azure. Ознакомьтесь с [бесплатной пробной версией Azure](https://azure.microsoft.com/pricing/free-trial/).
* Идентификатор подписки. Его можно получить на портале Azure. Например, он доступен в колонке учетной записи Data Lake Store.

    ![Получение идентификатора подписки](./media/data-lake-store-authenticate-using-active-directory/get-subscription-id.png)

* Доменное имя Azure AD. Его можно получить, наведя указатель мыши на правый верхний угол страницы портала Azure. 

    ![Получение домена AAD](./media/data-lake-store-authenticate-using-active-directory/get-aad-domain.png)

## <a name="end-user-authentication"></a>Аутентификация пользователей

Этот подход рекомендуется, если вам нужно, чтобы пользователи входили в приложение с помощью Azure AD. Приложение будет иметь тот же уровень доступа к ресурсам Azure, что и вошедший пользователь. Пользователю понадобится периодически вводить свои учетные данные, чтобы у вашего приложения оставался доступ.

В результате входа пользователя приложение получает маркер доступа и маркер обновления. Маркер доступа вкладывается в каждый запрос к Data Lake Store и Data Lake Analytics и по умолчанию действителен в течение одного часа. Маркер обновления может использоваться для получения нового маркера доступа. По умолчанию он действителен до двух недель, при условии, что используется регулярно. Для входа пользователей можно использовать два разных подхода.

### <a name="using-the-oauth-2.0-pop-up"></a>Использование всплывающего окна OAuth 2.0

Приложение может активировать всплывающее окно авторизации OAuth 2.0, в котором пользователь может ввести свои учетные данные. При необходимости это всплывающее окно также работает с процессом двухфакторной проверки подлинности (2FA) Azure AD. 

>[AZURE.NOTE] Этот метод еще не поддерживается в библиотеке аутентификации Azure AD (ADAL) для Java или Python.

### <a name="directly-passing-in-user-credentials"></a>Непосредственная передача учетных данных пользователя

Приложение могут напрямую предоставлять Azure AD учетные данные пользователя. Этот метод работает только для учетных записей на основе идентификаторов пользователей организации. Он не подходит для личных учетных записей пользователей или учетных записей на основе Live ID, включая те, которые заканчиваются на @outlook.com или @live.com.. Кроме того, данный метод несовместим с учетными записями пользователей, для которых требуется двухфакторная проверка подлинности (2FA) Azure AD.

### <a name="what-do-i-need-to-use-this-approach?"></a>Что мне нужно для применения этого подхода?

* Доменное имя Azure AD (уже указано в разделе предварительных требований этой статьи).

* **Собственное клиентское приложение**Azure AD. 

* Идентификатор клиента для собственного клиентского приложения Azure AD.

* Универсальный код ресурса (URI) перенаправления для собственного клиентского приложения Azure AD. 

Инструкции по созданию приложения Azure AD и получению идентификатора клиента содержатся в разделе [Создание приложения Active Directory и субъекта-службы с доступом к ресурсам с помощью портала](../resource-group-create-service-principal-portal.md#create-an-active-directory-application). 

>[AZURE.NOTE] Инструкции, доступные по указанным ниже ссылкам, относятся к веб-приложению Azure AD. Однако если вы решите создать собственное клиентское приложение, ваши действия будут такими же.

## <a name="service-to-service-authentication"></a>Взаимодействие между службами

Этот подход рекомендуется, если нужно, чтобы приложение автоматически выполняло аутентификацию с помощью Azure AD, не требуя от пользователя ввода учетных данных. Приложение само сможет пройти аутентификацию, имея действительные учетные данные, которые можно настроить таким образом, чтобы использовать несколько лет.

### <a name="what-do-i-need-to-use-this-approach?"></a>Что мне нужно для применения этого подхода?

* Доменное имя Azure AD (уже указано в разделе предварительных требований этой статьи).

* **Веб-приложение**Azure AD.

* Идентификатор клиента для веб-приложения Azure AD.

    >[AZURE.NOTE] Инструкции по созданию приложения Azure AD и получению идентификатора клиента содержатся в разделе [Создание приложения Active Directory и субъекта-службы с доступом к ресурсам с помощью портала](../resource-group-create-service-principal-portal.md#create-an-active-directory-application).
    
* Настройте веб-приложение Azure AD для использования секрета клиента или сертификата. Чтобы создать веб-приложение с помощью сертификата, ознакомьтесь с разделом [Использование Azure PowerShell для создания субъекта-службы и доступа к ресурсам](../resource-group-authenticate-service-principal.md#create-service-principal-with-certificate).

* Разрешите веб-приложению Azure AD доступ к файлу или папке Data Lake Store либо учетной записи Data Lake Analytics, с которой требуется работать. Инструкции о том, как предоставить приложению Azure AD доступ к файлу или папке Data Lake Store, см. в разделе [Назначение пользователей или группы безопасности в виде ACL в файловой системе хранилища озера данных Azure](data-lake-store-secure-data.md#filepermissions).

## <a name="next-steps"></a>Дальнейшие действия

- [Начало работы с хранилищем озера данных Azure с помощью пакета SDK .NET](data-lake-store-get-started-net-sdk.md)
- [Начало работы с хранилищем озера данных Azure с помощью пакета SDK .NET](data-lake-store-get-started-java-sdk.md)



<!--HONumber=Oct16_HO2-->


