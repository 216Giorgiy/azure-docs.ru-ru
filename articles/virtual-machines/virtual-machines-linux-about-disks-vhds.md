---
title: "О дисках и виртуальных жестких дисках для виртуальных машин Linux | Документация Майкрософт"
description: "Информация об основах использования дисков и виртуальных жестких дисков для виртуальных машин Linux в Azure."
services: virtual-machines-linux
documentationcenter: 
author: cynthn
manager: timlt
editor: tysonn
tags: azure-resource-manager,azure-service-management
ms.assetid: 7be8dd52-98f7-4187-9b78-55197915bc9b
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 11/18/2016
ms.author: cynthn
translationtype: Human Translation
ms.sourcegitcommit: eaacffd5c8a0364631fd49b3fed33036a493eea4
ms.openlocfilehash: da7443f3bd38ec41ad2d6b0ce6f573525678e6bd


---
# <a name="about-disks-and-vhds-for-azure-virtual-machines"></a>О дисках и виртуальных жестких дисках для виртуальных машин Azure
Как и любой другой компьютер, виртуальные машины в Azure используют диски как место хранения операционной системы, приложений и данных. Все виртуальные машины Azure имеют по крайней мере два диска — диск операционной системы Linux (в случае виртуальной машины Linux) и временный диск. Диск операционной системы создается из образа, а диск операционной системы и образ в действительности являются виртуальными жесткими дисками (VHD), расположенными в учетной записи хранения Azure. Кроме того, виртуальные машины могут иметь один или несколько дисков данных, которые также хранятся на виртуальных жестких дисках. Также доступна версия этой статьи для [виртуальных машин Windows](virtual-machines-windows-about-disks-vhds.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).

[!INCLUDE [learn-about-deployment-models](../../includes/learn-about-deployment-models-both-include.md)]

## <a name="operating-system-disk"></a>Диск операционной системы
У каждой виртуальной машины есть один подключенный диск операционной системы. Он зарегистрирован как диск SATA и обозначается как /dev/sda по умолчанию. Максимальная емкость этого диска составляет 1023 гигабайта (ГБ). 

## <a name="temporary-disk"></a>Временный диск
Временный диск создается автоматически. На виртуальных машинах Linux этот диск обычно является диском /dev/sdb, а форматируется и монтируется в /mnt/resource агентом Linux для Azure.

Размер временного диска зависит от размера виртуальной машины. Чтобы узнать больше, ознакомьтесь с [размерами виртуальных машин Linux](virtual-machines-linux-sizes.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).

> [!WARNING]
> Мы советуем не хранить данные на временном диске. Он обеспечивает временное хранилище для приложений и процессов и предназначен только для хранения данных, таких как файлы подкачки. 
> 
> 

Дополнительные сведения об использовании временного диска в Azure см. в статье [Общие сведения о временном диске на виртуальных машинах Microsoft Azure](https://blogs.msdn.microsoft.com/mast/2013/12/06/understanding-the-temporary-drive-on-windows-azure-virtual-machines/).

## <a name="data-disk"></a>Диск данных
Диск данных — виртуальный жесткий диск, подключенный к виртуальной машине для хранения данных приложений или других необходимых данных. Диски данных регистрируются как диски SCSI и обозначаются любой указанной буквой.  Максимальная емкость каждого диска составляет 1023 ГБ. Размер виртуальной машины определяет, сколько дисков данных можно подключить и какой тип хранилища можно использовать для размещения дисков.

> [!NOTE]
> Чтобы узнать больше о емкости виртуальных машин, ознакомьтесь с [размерами виртуальных машин Linux](virtual-machines-linux-sizes.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).
> 
> 

Azure создает диск операционной системы при создании виртуальной машины из образа. Если используется образ, включающий диски данных, при создании виртуальной машины Azure также создает диски данных. В противном случае диски данных добавляются после создания виртуальной машины.

Диски данных можно добавить в виртуальную машину в любое время, **подключив** их к ней. Можно использовать виртуальный жесткий диск, отправленный или скопированный в учетную запись хранения или созданный Azure. При подключении диска данных VHD-файл из учетной записи хранения связывается с виртуальной машиной за счет установления аренды на VHD, поэтому его нельзя удалить из хранилища, пока он подключен.

## <a name="about-vhds"></a>О виртуальных жестких дисках
Виртуальные жесткие диски, используемые в Azure, представляют собой VHD-файлы, хранящиеся как страничные BLOB-объекты в учетной записи хранения Azure (Standard или Premium). Дополнительные сведения о страничных BLOB-объектах см. в статье [Understanding Block Blobs, Append Blobs, and Page Blobs](https://msdn.microsoft.com/library/ee691964.aspx) (Основные сведения о блочных, добавочных и страничных BLOB-объектах). Дополнительную информацию о хранилище класса Premium можно узнать в статье [Хранилище Premium: высокопроизводительное хранилище для рабочих нагрузок виртуальных машин Azure](../storage/storage-premium-storage.md).

Azure поддерживает диски фиксированного размера в формате VHD. Фиксированный формат размещает логический диск в файле линейно, то есть смещение диска X хранится в смещении BLOB-объекта X. Небольшая сноска в конце BLOB-объекта описывает свойства VHD-файла. Часто фиксированный формат занимает лишнее пространство, поскольку в большинстве дисков есть большие неиспользуемые диапазоны. Однако в Azure VHD-файлы хранятся в разреженном формате. Это позволяет одновременно использовать преимущества и фиксированных, и динамически изменяемых дисков. Дополнительные сведения см. в статье [Начало работы с виртуальными жесткими дисками](https://technet.microsoft.com/library/dd979539.aspx).

Все VHD-файлы в Azure, которые следует использовать в качестве источника создания диска или образа, доступны только для чтения. При создании диска или образа Azure создает копии VHD-файлов. Эти копии могут быть доступны только для чтения или для чтения и записи, в зависимости от того, как используется виртуальный жесткий диск.

При создании виртуальной машины из образа Azure создает диск для виртуальной машины, которая является копией исходного VHD-файла. Для защиты от случайного удаления Azure назначает аренду на любой VHD-файл, используемый при создании образа, диска ОС или диска данных.

Перед тем как удалить исходный VHD-файл, необходимо снять аренду, удалив диск или образ. Чтобы удалить VHD-файл, который используется виртуальной машиной как диск ОС, можно удалить виртуальную машину, диск ОС и исходный VHD-файл одним действием, удалив виртуальную машину и все связанные с ней диски. Однако, чтобы удалить VHD-файл, используемый в качестве источника для диска данных, необходимо выполнить несколько действий в заданном порядке: отключить диск от виртуальной машины, удалить диск, а затем удалить VHD-файл.

> [!WARNING]
> Если удалить исходный VHD-файл из хранилища или удалить учетную запись хранения, корпорация Майкрософт не сможет восстановить эти данные.
> 
> 

## <a name="troubleshooting"></a>Устранение неполадок
[!INCLUDE [virtual-machines-linux-lunzero](../../includes/virtual-machines-linux-lunzero.md)]

## <a name="next-steps"></a>Дальнейшие действия
* [Подключите диск](virtual-machines-linux-add-disk.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) , чтобы увеличить емкость хранилища для виртуальной машины.
* [Настройте программный RAID](virtual-machines-linux-configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json), чтобы обеспечить избыточность.
* [Запишите образ виртуальной машины Linux](virtual-machines-linux-classic-capture-image.md?toc=%2fazure%2fvirtual-machines%2flinux%2fclassic%2ftoc.json), чтобы иметь возможность быстро развернуть дополнительные виртуальные машины.




<!--HONumber=Nov16_HO5-->


