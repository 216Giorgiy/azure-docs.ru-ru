<properties 
	pageTitle="Резервное копирование и восстановление SQL Server в виртуальных машинах Azure"
	description="Содержит сведения об архивации и восстановлении баз данных SQL Server на виртуальных машинах Azure."
	services="virtual-machines"
	documentationCenter="na"
	authors="rothja"
	manager="jeffreyg"
	editor="monicar" />

<tags 
	ms.service="virtual-machines"
	ms.devlang="na"
	ms.topic="article"
	ms.tgt_pltfrm="vm-windows-sql-server"
	ms.workload="infrastructure-services"
	ms.date="08/05/2015"
	ms.author="jroth" />

# Резервное копирование и восстановление SQL Server в виртуальных машинах Azure

## Общие сведения

Архивация данных в базах данных SQL Server является важной частью стратегии защиты от потери данных из-за ошибки приложения или пользователя. Это относится и к SQL Server на виртуальных машинах Azure.

Для SQL Server на виртуальных машинах Azure можно применять собственные методы архивации и восстановления, используя для хранения файлов резервных копий подключенные диски. При этом существует ограничение на количество дисков, которые можно присоединить к виртуальной машине Azure, связанное с [размером виртуальной машины](virtual-machines-size-specs.md). Также необходимо учитывать накладные расходы на управление дисками.

Начиная с SQL Server 2014 для архивации и восстановления можно использовать хранилище больших двоичных объектов Microsoft Azure. Дополнительные возможности для этого параметра реализуются также в версии SQL Server 2016. Кроме того, SQL Server 2016 позволяет практически мгновенно создавать резервные копии файлов базы данных, которые находятся в хранилище больших двоичных объектов Microsoft Azure, и быстро их восстанавливать с помощью моментальных снимков Azure. В этой статье содержится обзор этих параметров. Дополнительные сведения см. в статье [Архивация и восстановление SQL Server с помощью службы хранилища больших двоичных объектов Microsoft Azure](https://msdn.microsoft.com/library/jj919148(v=sql.130).aspx).

>[AZURE.NOTE]Обсуждение параметров архивации очень больших баз данных см. в статье [Стратегии архивации терабайтных баз данных SQL Server для виртуальных машин Azure](http://blogs.msdn.com/b/igorpag/archive/2015/07/28/multi-terabyte-sql-server-database-backup-strategies-for-azure-virtual-machines.aspx).

В следующих разделах приводятся сведения по отдельным версиям SQL Server, которые поддерживаются виртуальными машинами Azure.

## Особенности архивации при хранении файлов в службе хранилища больших двоичных объектов Microsoft Azure

Если файлы базы данных хранятся в хранилище больших двоичных объектов Microsoft Azure, основания для архивации базы данных и сама технология архивации меняются. Дополнительные сведения о хранении файлов базы данных в хранилище больших двоичных объектов Azure см. в статье [Файлы данных SQL Server в Azure](https://msdn.microsoft.com/library/jj919148.aspx).

- Архивировать базы данных для защиты от сбоев оборудования или отказа носителей больше не нужно, поскольку такая защита предоставляется в рамках службы Microsoft Azure по умолчанию.

- Архивация базы данных требуется для защиты от ошибок пользователей, а также для формирования архивов, соблюдения нормативных требований или в административных целях.

- Функция архивации моментальных снимков файлов SQL Server в Microsoft SQL Server 2016 CTP-версии 2 (CTP2) позволяет мгновенно создавать резервные копии и выполнять восстановление. Дополнительные сведения см. в статье [Архивация моментальных снимков файлов базы данных в Azure](https://msdn.microsoft.com/library/mt169363.aspx).

## Архивация и восстановление в Microsoft SQL Server 2016 CTP-версии 2 (CTP2)

Microsoft SQL Server 2016 CTP-версии 2 (CTP2) поддерживает функции [архивации и восстановления с использованием больших двоичных объектов Azure](https://msdn.microsoft.com/library/jj919148.aspx), реализованные в SQL Server 2014 и описанные ниже. Однако эта версия включает также следующие усовершенствования:

- **Чередование**: при создании резервных копий в хранилище больших двоичных объектов Microsoft Azure SQL Server 2016 позволяет использовать сразу несколько больших двоичных объектов и, таким образом, архивировать большие базы данных размером до 12,8 ТБ.

- **Архивация моментальных снимков**: используя моментальные снимки Azure, функция архивации моментальных снимков файлов SQL Server дает возможность практически мгновенно создавать резервные копии и быстро восстанавливать файлы баз данных, сохраненные с помощью службы хранилища больших двоичных объектов. Это позволяет упростить политики архивации и восстановления политик. Функция архивации моментальных снимков файлов поддерживает также восстановление до определенной точки во времени. Дополнительные сведения см. в статье [Архивация моментальных снимков файлов баз данных в Azure](https://msdn.microsoft.com/library/mt169363(v=sql.130).aspx).

- **Планирование управляемой архивации**: функция управляемой архивации SQL Server в Azure теперь поддерживает пользовательские расписания. Дополнительные сведения см. в статье [Управляемая архивация SQL Server в Microsoft Azure](https://msdn.microsoft.com/library/dn449496.aspx).

>[AZURE.NOTE]Инструкции по использованию функций SQL Server 2016 при работе с хранилищем больших двоичных объектов Azure см. в учебнике [Использование службы хранилища больших двоичных объектов Microsoft Azure с базами данных SQL Server 2016](https://msdn.microsoft.com/library/dn466438.aspx).

## Архивация и восстановление в SQL Server 2014

SQL Server 2014 включает следующие усовершенствования:

1. **Архивация и восстановление в Azure**:

 - *Архивация SQL Server в URL-адрес* теперь поддерживается в среде SQL Server Management Studio. Теперь при выполнении задачи архивации или восстановления, а также при работе с мастером планов обслуживания в SQL Server Management Studio можно сохранять резервные копии в Azure. Дополнительные сведения см. в статье [Архивация SQL Server в URL-адрес](https://msdn.microsoft.com/library/jj919148(v=sql.120).aspx).
 - *Управляемая архивация SQL Server в Azure* получила новые функции, позволяющие управлять автоматической архивацией. Они пригодятся при управлении автоматической архивацией для экземпляров SQL Server 2014, выполняемых на машине Azure. Дополнительные сведения см. в статье [Управляемая архивация SQL Server в Microsoft Azure](https://msdn.microsoft.com/library/dn449496(v=sql.120).aspx).
 - *Автоматическая архивация* получила дополнительные функции, позволяющие автоматически включать *управляемую архивацию SQL Server в Azure* во всех действующих и новых базах данных для виртуальной машины SQL Server в Azure. Дополнительную информацию см. в статье [Автоматическая архивация для SQL Server на виртуальных машинах Azure](virtual-machines-sql-server-automated-backup.md).
 - Общие сведения обо всех параметрах архивации SQL Server 2014 в Azure см. в статье [Архивация и восстановление SQL Server с помощью службы хранилища больших двоичных объектов Microsoft Azure](https://msdn.microsoft.com/library/jj919148(v=sql.120).aspx).

1. **Шифрование**: SQL Server 2014 поддерживает шифрование данных при создании резервной копии. Поддерживаются несколько алгоритмов шифрования и использование сертификата или асимметричного ключа. Дополнительные сведения см. в статье [Шифрование резервных копий](https://msdn.microsoft.com/library/dn449489(v=sql.120).aspx).

## Архивация и восстановление в SQL Server 2012

Подробные сведения об архивации SQL Server и восстановлении в SQL Server 2012 см. в статье [Архивация и восстановление баз данных SQL Server (SQL Server 2012)](https://msdn.microsoft.com/library/ms187048(v=sql.110).aspx).

Начиная с SQL Server 2012 с пакетом обновления 1 (SP1) и накопительным пакетом обновления 2, поддерживается архивация и восстановление через службу хранилища больших двоичных объектов Azure. Это улучшение можно использовать для архивации баз данных SQL Server в SQL Server на виртуальной машине Azure или в локальном экземпляре. Дополнительные сведения см. в статье [Архивация и восстановление SQL Server с помощью службы хранилища больших двоичных объектов Azure](https://msdn.microsoft.com/library/jj919148(v=sql.110).aspx).

В число преимуществ, связанных с использованием службы хранилища больших двоичных объектов Azure, входят возможность обхода ограничения, позволяющего подключать не больше 16 дисков, легкость управления, а также прямая доступность резервных файлов для другого экземпляра SQL Server, работающего на виртуальной машине Azure, или локальных экземпляров для переноса или аварийного восстановления данных. Полный список преимуществ, связанных с использованием службы хранилища больших двоичных объектов Azure для архивации SQL Server, см. в разделе *Преимущества* статьи [Архивация и восстановление SQL Server с помощью службы хранилища больших двоичных объектов Azure](https://msdn.microsoft.com/library/jj919148(v=sql.110).aspx).

Рекомендации и сведения об устранении неполадок см. в статье [Рекомендации по архивации и восстановлению (служба хранилища больших двоичных объектов Azure)](https://msdn.microsoft.com/library/jj919149(v=sql.110).aspx).

## Архивация и восстановление в других версиях SQL Server, поддерживаемые на виртуальной машине Azure

Информацию об архивации и восстановлении SQL Server в SQL Server 2008 R2 см. в статье [Архивация и восстановление баз данных в SQL Server (SQL Server 2008 R2)](https://msdn.microsoft.com/library/ms187048(v=sql.105).aspx).

Информацию об архивации и восстановлении SQL Server в SQL Server 2008 см. в статье [Архивация и восстановление баз данных в SQL Server (SQL Server 2008)](https://msdn.microsoft.com/library/ms187048(v=sql.100).aspx).

## Дальнейшие действия

Планируя развертывание SQL Server на виртуальной машине Azure, воспользуйтесь рекомендациями следующего учебника: [Подготовка виртуальной машины SQL Server в Azure](virtual-machines-provision-sql-server.md).

При том, что архивацию и восстановление можно использовать для переноса данных, существуют более простые способы переноса данных в SQL Server на виртуальной машине Azure. Полное описание вариантов миграции и соответствующие рекомендации см. в статье [Перенос базы данных в SQL Server на виртуальной машине Azure](virtual-machines-migrate-onpremises-database.md).

Просмотрите и другие [ресурсы по запуску SQL Server на виртуальных машинах Azure](virtual-machines-sql-server-infrastructure-services.md).

<!---HONumber=August15_HO6-->