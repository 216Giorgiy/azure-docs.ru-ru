<properties pageTitle="Создание виртуальной машины базы данных Oracle в Azure" description="Воспользуйтесь примером для пошагового создания виртуальной машины Oracle в Microsoft Azure и создания в ней базы данных Oracle." services="virtual-machines" authors="bbenz" documentationCenter=""/>

<tags ms.service="virtual-machines" ms.devlang="na" ms.topic="article" ms.tgt_pltfrm="na" ms.workload="infrastructure-services" ms.date="06/22/2015" ms.author="bbenz"/>

#Создание виртуальной машины базы данных Oracle в Azure
В следующем примере показано, как создать в Azure виртуальную машину на основе предоставленного корпорацией Майкрософт образа базы данных Oracle под управлением Windows Server 2012. Этот процесс состоит из двух этапов. Сначала необходимо создать виртуальную машину, а затем — базу данных Oracle в виртуальной машине. В приведенном примере используется база данных Oracle версии 12c, но шаги для версии 11g практически идентичны.

##Для создания виртуальной машины базы данных Oracle в Azure

1.	Войдите на [портал Azure](https://ms.portal.azure.com/).

2.	Щелкните **Marketplace**, затем **Среда выполнения приложений** и затем введите **Oracle** в поле поиска.

3.	Выберите один из доступных образов базы данных Oracle: **версия 11g, версия 12c, Standard Edition, Enterprise Edition или один из пакетов Popular Options либо Advanced Options.** Просмотрите информацию о выбранном образе (например, минимальный рекомендуемый размер) и нажмите кнопку **Далее**.

4.	Укажите **Имя узла** для виртуальной машины.

5.	Укажите **Имя пользователя** для виртуальной машины. Обратите внимание, что это пользователь для удаленного входа в виртуальную машину. Это не имя пользователя базы данных Oracle.

6.	Укажите и подтвердите пароль для виртуальной машины или предоставьте открытый ключ SSH.

7.	Выберите **ценовую категорию**. Обратите внимание, что по умолчанию отображаются рекомендуемые ценовые категории. Чтобы увидеть все варианты конфигурации, нажмите кнопку **Просмотреть все** в правом верхнем углу.

8.	При необходимости задайте [дополнительную конфигурацию](https://msdn.microsoft.com/library/azure/dn763935.aspx), приняв к сведению следующие рекомендации:

	а. Оставьте значение **Учетная запись хранения** как есть, чтобы создать новую учетную запись хранения с именем виртуальной машины.

	b. Оставьте в поле **Группа доступности** значение "Не настроено".

	c. Пока не добавляйте **конечные точки**.

9.	Выберите или создайте группу ресурсов.

10. Выберите **подписку**.

11. Выберите **расположение**.

12. Щелкните **Создать**. Начнется процесс создания виртуальной машины. После того как виртуальная машина перейдет в состояние **Выполняется**, переходите к следующей процедуре.


##Для создания базы данных с использованием виртуальной машины базы данных Oracle в Azure

1.	Войдите на [портал Azure](https://ms.portal.azure.com/).

2.	Щелкните **Виртуальные машины**.

3.	Щелкните по имени виртуальной машины, в которую нужно войти.

4.	Щелкните **Подключить**.

5.	Отвечайте на запросы, появляющиеся при подключении к виртуальной машине. При получении запроса на ввод имени пользователя и пароля администратора используйте значения, которые были указаны при создании виртуальной машины.

6.	Создайте переменную среды **ORACLE\_HOSTNAME** со значением, соответствующим имени компьютера виртуальной машины. Создать переменную среды можно, выполнив следующие действия:

	а. Нажмите кнопку **Пуск** Windows, наберите **панель управления**, щелкните значок **Панель управления**, затем последовательно щелкните **Система и безопасность**, **Система** и **Дополнительные параметры системы**.

	b. Щелкните вкладку **Дополнительно**, а затем нажмите кнопку **Переменные среды**.

	c. В разделе **Системные переменные** нажмите кнопку **Создать**, чтобы создать переменную.

	г) В диалоговом окне **Новая системная переменная** введите **ORACLE\_HOSTNAME** в качестве имени переменной и затем в качестве значения введите имя компьютера виртуальной машины. Чтобы определить имя компьютера, откройте командную строку и выполните **SET COMPUTERNAME** (выходные данные этой команды будут содержать имя компьютера).

	д. Нажмите кнопку **ОК**, чтобы сохранить новую переменную среды и закрыть диалоговое окно **Новая системная переменная**.

	Е. Закройте другие диалоговые окна, открытые из панели управления.

7.	Нажмите кнопку **Пуск** Windows и введите **Ассистент настройки базы данных**. Щелкните значок **Ассистент настройки базы данных**.

8.	В мастере **Ассистент настройки базы данных** введите значения, необходимые для каждого шага в диалоговом окне.

	а. **Шаг 1.** Щелкните **Создать базу данных** и нажмите кнопку **Далее**.

		![](media/virtual-machines-creating-oracle-database-virtual-machine/image5.png)

	b. **Шаг 2.** Введите значение **Имя глобальной базы данных**. Введите и подтвердите значение **Пароля администратора**. Этот пароль будет использован для пользователя **SYSTEM** базы данных Oracle. Снимите флажок **Создать как базу данных контейнера**. Нажмите кнопку **Далее**.

		![](media/virtual-machines-creating-oracle-database-virtual-machine/image6.png)

	c. **Шаг 3.** Проверка необходимых компонентов должна быть выполнена автоматически, затем вы перейдете к **шагу 4**.

	г) **Шаг 4.** Проверьте параметры в области **Создание базы данных — сводка** и нажмите кнопку **Готово**.

		![](media/virtual-machines-creating-oracle-database-virtual-machine/image7.png)
	д. **Шаг 5.** На **Странице хода выполнения** будет отображаться ход создания вашей базы данных.

		![](media/virtual-machines-creating-oracle-database-virtual-machine/image8.png)
	Е. После создания базы данных вы сможете воспользоваться окном **Управление паролями**. При необходимости измените пароли, а затем закройте диалоговые окна, чтобы выйти из **ассистента настройки базы данных**.

##Подтверждение установки базы данных

1.	Находясь в виртуальной машине, запустите командную строку SQL Plus. Нажмите кнопку *Пуск* Windows, затем введите **SQL Plus**. Щелкните значок **SQL Plus**.

2.	При появлении запроса войдите в систему с именем пользователя **SYSTEM** и паролем, указанным при создании базы данных Oracle.

3.	Выполните следующую команду в командной строке SQL Plus.

		**select * from GLOBAL\_NAME;**

	Результатом должно быть глобальное имя созданной базы данных.

	![](media/virtual-machines-creating-oracle-database-virtual-machine/image9.png)

##Разрешение удаленного доступа к базе данных
Чтобы разрешить удаленный доступ к базе данных (например, с клиентского компьютера, на котором выполняется код Java), будет необходимо запустить прослушиватель базы данных, открыть порт 1521 в брандмауэре виртуальной машины и создать общедоступную конечную точку для порта 1521.

### Запуск прослушивателя базы данных
1.	Войдите в систему на виртуальной машине.

2.	Откройте окно командной строки.

3.	В командной строке выполните следующую команду:

		**lsnrctl start**

> [AZURE.NOTE]Для проверки состояния прослушивателя можно выполнить команду **lsnrctl status**. Для остановки прослушивателя выполните команду **lsnrctl stop**.

### Открытие порта 1521 в брандмауэре виртуальной машины

1.	Не выходя из виртуальной машины, нажмите кнопку **Пуск** Windows, введите **брандмауэр Windows в режиме повышенной безопасности**, затем щелкните значок **Брандмауэр Windows в режиме повышенной безопасности**. Откроется консоль управления **Брандмауэра Windows в режиме повышенной безопасности**.

2.	В консоли управления брандмауэра в левой области щелкните **Правила для входящих подключений** (если вы не видите пункт **Правила для входящих подключений**, разверните верхний узел в левой области) и щелкните **Создать правило** в области справа.

3.	Для поля **Тип правила** выберите **Порт**, а затем нажмите кнопку **Далее**.

4.	В разделе **Протокол и порты** выберите **Протокол TCP**, выберите **Указанные локальные порты**, введите номер порта **1521** и нажмите кнопку **Далее**.

5.	Выберите **Разрешить подключение** и нажмите **Далее**.

6.	Примите значения по умолчанию для профилей, к которым применяется правило, и нажмите кнопку **Далее**.

7.	Укажите имя правила и, при желании, описание, затем нажмите кнопку **Готово**.

### Создание общедоступной конечной точки для порта 1521

1.	Войдите на [портал Azure](https://ms.portal.azure.com/).

2.	Щелкните **Обзор**.

3.  Щелкните **Виртуальные машины**.

4.	Выберите виртуальную машину.

5.	Щелкните **Параметры**.

6.	Нажмите кнопку **Конечные точки**.

7.	Щелкните **Добавить**.

8.	Укажите имя конечной точки:

	а. Укажите протокол **TCP**.

	b. Укажите номер общедоступного порта **1521**.

	c. Укажите номер частного порта **1521**.

9.	Значения остальных параметров оставьте без изменений.

10. Нажмите кнопку **ОК**.

##Включение удаленного доступа Oracle Database Enterprise Manager
Если вы хотите разрешить удаленный доступ к Oracle Database Enterprise Manager, откройте в брандмауэре порт 5500 и создайте конечную точку виртуальной машины для порта 5500 в портале Azure (следуя описанным выше указаниям по открытию порта 1521 и созданию конечной точки для порта 1521). Затем, чтобы запустить Oracle Enterprise Manager с удаленного компьютера, откройте в браузере URL-адрес вида `http://<<unique_domain_name>>:5500/em`.

> [AZURE.NOTE](Значение *<< unique\_domain\_name >>* можно определить на [портале Azure](https://ms.portal.azure.com/), щелкнув **Виртуальные машины** и выбрав виртуальную машину, которая используется для запуска базы данных Oracle.)

##Настройка пакетов Popular Options и Advanced Options
Если вы выбрали пакет **Oracle Database with Popular Options** или **Oracle Database with Advanced Options**, следующим шагом будет настройка дополнительных функций в установке Oracle. Указания по их настройке в Windows см. в документации по Oracle, так как конфигурации могут сильно отличаться в зависимости от потребностей каждого отдельного компонента.

**Пакет Oracle Database with Popular Options** включает в себя Oracle Database Enterprise Edition и лицензированные экземпляры [Partitioning](http://www.oracle.com/us/products/database/options/partitioning/overview/index.html), [Active Data Guard](http://www.oracle.com/us/products/database/options/active-data-guard/overview/index.html), [Oracle Tuning Pack for Database](http://docs.oracle.com/html/A86647_01/tun_ovw.htm), [Oracle Diagnostics Pack for Database](http://docs.oracle.com/cd/B28359_01/license.111/b28287/options.htm#CIHIHDDJ) и [Oracle Lifecycle Management Pack for Database](http://www.oracle.com/technetwork/oem/lifecycle-mgmt-495331.html).

**Пакет Oracle Database with Advanced Options** включает в себя лицензированные экземпляры всех компонентов пакета Popular Options, а также [Advanced Compression](http://www.oracle.com/us/products/database/options/advanced-compression/overview/index.html), [Advanced Security](http://www.oracle.com/us/products/database/options/advanced-security/overview/index.html), [Label Security](http://www.oracle.com/us/products/database/options/label-security/overview/index.html), [Database Vault](http://www.oracle.com/us/products/database/options/database-vault/overview/index.html), [Advanced Analytics](http://www.oracle.com/us/products/database/options/advanced-analytics/overview/index.html), [OLAP](http://docs.oracle.com/cd/E11882_01/license.112/e47877/options.htm#CIHGDEEF), [Spatial and Graph](http://docs.oracle.com/cd/E11882_01/license.112/e47877/options.htm#CIHGDEEF), [In-Memory Database Cache](http://www.oracle.com/technetwork/products/timesten/overview/timesten-imdb-cache-101293.html), [Data Masking Pack](http://docs.oracle.com/cd/E11882_01/license.112/e47877/options.htm#CHDGEEBB) и пакет Oracle Test Data Management Pack (в составе пакета Data Masking Pack).

##Дополнительные ресурсы
Теперь, настроив виртуальную машину и создав базу данных, вы можете ознакомиться со следующими разделами, чтобы получить дополнительную информацию.

-	[Образы виртуальных машин Oracle. Различные рекомендации](virtual-machines-miscellaneous-considerations-oracle-virtual-machine-images.md)

-	[Библиотека документации по Oracle Database 12ce](http://www.oracle.com/pls/db1211/homepage)

-	[Подключение к базе данных Oracle из приложения Java](http://docs.oracle.com/cd/E11882_01/appdev.112/e12137/getconn.htm#TDPJD136)

-	[Образы виртуальных машин Oracle для Azure](virtual-machines-oracle-list-oracle-virtual-machine-images.md)

-	[Oracle Database 2 Day DBA 12c Release 1](http://docs.oracle.com/cd/E16655_01/server.121/e17643/toc.htm)

<!---HONumber=August15_HO9-->