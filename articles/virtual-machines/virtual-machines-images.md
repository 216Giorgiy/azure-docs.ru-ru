<properties
	pageTitle="Образы виртуальных машин | Microsoft Azure"
	description="Узнайте о том, как использовать образы с виртуальными машинами в Azure."
	services="virtual-machines"
	documentationCenter=""
	authors="cynthn"
	manager="timlt"
	editor="tysonn"
	tags="azure-service-management"/>

<tags
	ms.service="virtual-machines"
	ms.workload="infrastructure-services"
	ms.tgt_pltfrm="vm-multiple"
	ms.devlang="na"
	ms.topic="article"
	ms.date="08/13/2015"
	ms.author="cynthn"/>

# Образы виртуальных машин

Для предоставления новой виртуальной машины с операционной системой в Azure используются образы. Образ может иметь один или несколько дисков данных. Образы доступны в нескольких источниках:

-	Azure предлагает образы в [Marketplace](http://azure.microsoft.com/gallery/virtual-machines/). Вы найдете последние версии Windows Server и дистрибутивы операционной системы Linux. Некоторые образы также содержат приложения, например SQL Server. Подписчики программ "Преимущества MSDN" и "Оплата по мере использования MSDN" имеют доступ к дополнительным образам.
-	Сообщество разработчиков ПО с открытым исходным кодом предлагает образы через [хранилище виртуальных машин](http://vmdepot.msopentech.com/List/Index).
-	Кроме того, в Azure также можно хранить и использовать собственные образы либо путем захвата существующей виртуальной машины Azure для использования ее в качестве образа, либо путем отправки образа.

## Об образах виртуальных машин и образах ОС

В Azure можно использовать два типа образов — *образ виртуальной машины* и *образ ОС*. Образ виртуальной машины включает операционную систему и все диски, присоединенные к виртуальной машине на момент создания образа. Это более новый тип образа. Перед появлением образов виртуальных машин образ в Azure мог иметь только обобщенную операционную систему без дополнительных дисков. Образ виртуальной машины, содержащий только обобщенную операционную систему, по сути, является исходным типом образа — образом ОС.

Вы можете создавать собственные образы на основе виртуальных машин в Azure или же скопировать и передать виртуальную машину, которая работает где-то еще. Если образ необходимо использовать для создания нескольких виртуальных машин, то его следует подготовить в качестве обобщенного образа. Для создания образа Windows Server выполните команду Sysprep на сервере, чтобы обобщить его перед передачей VHD-файла. Дополнительные сведения о команде Sysprep см. в статье [Использование команды Sysprep. Введение](http://go.microsoft.com/fwlink/p/?LinkId=392030). Для создания образа Linux с определенным набором программного обеспечения необходимо запустить соответствующий набор команд и агента Azure Linux.

## Работа с образами

Для управления образами, доступными по вашей подписке Azure, вы можете использовать интерфейс командной строки Azure (CLI) для Mac, Linux и Windows или модуля Azure PowerShell. Вы также можете решить некоторые задачи на портале Azure, однако командная строка предоставляет больше возможностей.

Сведения об использовании этих средств вместе с развертыванием диспетчера ресурсов см. в статье [Просмотр и выбор образов виртуальных машин Azure с помощью командной оболочки PowerShell и инфраструктуры Azure CLI](resource-groups-vm-searching.md).

Примеры использования этих средств в классическом развертывании:

- Информацию об интерфейсе командной строки см. в разделе "Команды для управления образами виртуальных машин Azure" статьи [Управление службами Azure с помощью интерфейса командной строки Azure на компьютерах Mac, а также на компьютерах с ОС Linux и Windows](virtual-machines-command-line-tools.md).
- Для работы с Azure PowerShell ознакомьтесь со следующим списком команд. Пример поиска образа для создания виртуальной машины см. в разделе "Шаг 3. Определение ImageFamily" статьи [Использование Azure PowerShell для создания и предварительной настройки виртуальных машин под управлением Windows](virtual-machines-ps-create-preconfigure-windows-vms.md).

-	**Получить все образы**. `Get-AzureVMImage` возвращает список всех образов, доступных в вашей текущей подписке,— ваших, а также предоставленных Azure или партнерами. Это значит, что вы можете получить большой список. В следующих примерах показано, как сократить список.
-	**Получить семейства образов**. `Get-AzureVMImage | select ImageFamily` возвращает список семейств образов, отображая свойство строк **ImageFamily**.
-	**Получить все образы из указанного семейства**. `Get-AzureVMImage | Where-Object {$_.ImageFamily -eq $family}`
-	**Найти образы виртуальных машин**. `Get-AzureVMImage | where {(gm –InputObject $_ -Name DataDiskConfigurations) -ne $null} | Select -Property Label, ImageName` проводит фильтрацию по свойству DataDiskConfiguration, которое применяется только к образам виртуальных машин. В этом примере выходные данные также фильтруются, и выводятся только метка и имя образа.
-	**Сохранить обобщенный образ**. `Save-AzureVMImage –ServiceName "myServiceName" –Name "MyVMtoCapture" –OSState "Generalized" –ImageName "MyVmImage" –ImageLabel "This is my generalized image"`
-	**Сохранить специализированный образ**. `Save-AzureVMImage –ServiceName "mySvc2" –Name "MyVMToCapture2" –ImageName "myFirstVMImageSP" –OSState "Specialized" -Verbose`
>[Azure.Tip]Параметр OSState является обязательным, если вы хотите создать образ виртуальной машины, содержащий диски с данными, а также диск операционной системы. Если не указать этот параметр, командлет создает образ ОС. Значение параметра указывает, является ли образ обобщенным или специальным и основывается ли он на диске операционной системы, подготовленном для повторного использования.
-	**Удалить образ**. `Remove-AzureVMImage –ImageName "MyOldVmImage"`

## Дополнительные ресурсы

[Различные способы создания виртуальной машины Linux](virtual-machines-linux-choices-create-vm.md)

[Различные способы создания виртуальной машины Windows](virtual-machines-windows-choices-create-vm.md)

<!---HONumber=Oct15_HO1-->