---
title: "Рекомендации по решениям службы хранилища Azure | Документация Майкрософт"
description: "Изучите основные рекомендации по проектированию и реализации, касающиеся развертывания решений для хранения данных в службах инфраструктуры Azure."
documentationcenter: 
services: virtual-machines-linux
author: iainfoulds
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 3c368f07-189b-4520-bbe2-f4080253bbf2
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 12/16/2016
ms.author: iainfou
translationtype: Human Translation
ms.sourcegitcommit: a99ab839ec9ade0049e1cc59054e333048e0208c
ms.openlocfilehash: 8b4ee1634981a449d9968f9156df10a9d40baae9


---
# <a name="azure-storage-infrastructure-guidelines"></a>Рекомендации по инфраструктуре службы хранилища Azure
[!INCLUDE [virtual-machines-linux-infrastructure-guidelines-intro](../../includes/virtual-machines-linux-infrastructure-guidelines-intro.md)]

Эта статья посвящена требованиям к хранилищу и вопросам проектирования, связанным с обеспечением оптимальной производительности виртуальных машин.

## <a name="implementation-guidelines-for-storage"></a>Рекомендации по реализации хранилища
Решения

* Для рабочей нагрузки необходимо использовать хранилище уровня "Стандартный" или "Премиум"?
* Требуется ли чередование для создания дисков размером более 1023 ТБ?
* Требуется ли чередование дисков, чтобы обеспечить оптимальную производительность ввода-вывода для рабочей нагрузки?
* Какие учетные записи хранения необходимы для размещения рабочей нагрузки в ИТ-среде или ИТ-инфраструктуры?

Задачи

* Просмотрите требования к вводу-выводу разворачиваемых приложений и спланируйте нужное количество и тип учетных записей хранения.
* Создать набор учетных записей хранения с использованием соглашения об именовании. Можно использовать интерфейс командной строки Azure (Azure CLI) или портал.

## <a name="storage"></a>Хранилище
Служба хранилища Azure — ключевая составляющая в развертывании виртуальных машин и приложений и управлении ими. Служба хранилища Azure предоставляет службы для хранения файловых данных, неструктурированных данных и сообщений, а также является частью инфраструктуры, обслуживающей виртуальные машины.

Для обслуживания виртуальных машин доступны учетные записи хранения двух типов.

* Учетная запись хранения уровня "Стандартный" предоставляет доступ к хранилищу BLOB-объектов (которое используется для хранения дисков виртуальных машин Azure), хранилищу таблиц, хранилищу очередей и хранилищу файлов.
* [хранения уровня "Премиум"](../storage/storage-premium-storage.md) обеспечивают высокопроизводительные диски с малой задержкой для рабочих нагрузок с интенсивным вводом-выводом, например для рабочих нагрузок в сегментированных кластерах MongoDB. В настоящее время хранилище уровня "Премиум" поддерживает только диски виртуальных машин Azure.

Azure создает виртуальные машины с диском операционной системы, временным диском и любым количеством дополнительных дисков данных (которые могут и отсутствовать). Диск операционной системы и диски данных — страничные BLOB-объекты Azure, тогда как временный диск хранится на локальном узле, на котором запущена виртуальная машина. Будьте внимательны при проектировании приложений, использующих только этот временный диск для временных данных, так как во время события обслуживания виртуальная машина может быть перенесена между узлами. При этом все данные, хранящиеся на временном диске, будут потеряны.

Базовая среда службы хранилища Azure обеспечивает устойчивость и высокий уровень доступности. Это гарантирует защиту данных от внепланового обслуживания или сбоев оборудования. При разработке среды службы хранилища Azure можно выбрать способ репликации хранилища виртуальной машины:

* локально в пределах заданного центра обработки данных Azure;
* между центрами обработки данных Azure в пределах заданного региона;
* между центрами обработки данных Azure из разных регионов.

Вы можете больше узнать о [возможностях репликации для обеспечения высокого уровня доступности](../storage/storage-introduction.md#replication-for-durability-and-high-availability).

Максимальный размер дисков операционной системы и дисков данных составляет 1023 гигабайта (ГБ). Максимальный размер большого двоичного объекта составляет 1024 ГБ, и он должен содержать метаданные (нижний колонтитул) VHD-файла (ГБ — это 1024<sup>3</sup> байтов). Чтобы преодолеть это ограничение, можно использовать диспетчер логических томов (LVM), чтобы сформировать пулы дисков данных, представляющие логические тома более 1023 ГБ для виртуальной машины.

Существуют некоторые ограничения масштабируемости, накладываемые при проектировании развертываний службы хранилища Azure. Дополнительные сведения об этом см. в статье [Подписка Azure, границы, квоты и ограничения службы](../azure-subscription-service-limits.md#storage-limits). Ознакомьтесь также со статьей [Целевые показатели масштабируемости и производительности хранилища Azure](../storage/storage-scalability-targets.md).

Что касается хранилища приложений, можно хранить неструктурированные данные объектов, таких как документы, изображения, резервные копии, данные конфигурации, журналы и т. д., используя хранилище BLOB-объектов. Вместо того, чтобы записывать данные на виртуальный диск, подключенный к виртуальной машине, приложение может записывать их непосредственно в хранилище BLOB-объектов Azure. Хранилище BLOB-объектов также предоставляет функцию ["горячего" и "холодного" уровней хранилища](../storage/storage-blob-storage-tiers.md) , которую можно использовать в зависимости от требований к доступности и ограничений затрат.

## <a name="striped-disks"></a>Диски с чередованием
Использование чередования для дисков данных, помимо возможности создавать диски размером более 1023 ГБ, во многих случаях увеличивает производительность благодаря тому, что для единого тома хранилища используются несколько больших двоичных объектов. При чередовании дисков операции ввода-вывода для одного логического диска могут выполняться параллельно.

Azure накладывает ограничения на количество дисков данных и пропускную способность в зависимости от размера виртуальной машины. Дополнительную информацию см. в статье [Размеры виртуальных машин](virtual-machines-linux-sizes.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).

При использовании чередования дисков данных Azure придерживайтесь следующих рекомендаций:

* Диски данных всегда должны иметь максимальный размер (1023 ГБ).
* Подключайте столько дисков данных, сколько позволяет размер виртуальной машины.
* Используйте LVM.
* Избегайте использовать параметры кэширования дисков данных Azure (для политики кэширования нужно выбрать параметр "Нет").

Дополнительные сведения см. в статье [Настройка диспетчера логических томов на виртуальной машине Linux в Azure](virtual-machines-linux-configure-lvm.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).

## <a name="multiple-storage-accounts"></a>Несколько учетных записей хранения
При проектировании среды службы хранилища Azure вы можете использовать несколько учетных записей хранения, так как количество развертываемых виртуальных машин может увеличиться. Такой подход помогает распределить операции ввода-вывода по базовой инфраструктуре службы хранилища Azure, чтобы обеспечить оптимальную производительность виртуальных машин и приложений. При проектировании развертываемых приложений учтите требования к вводу-выводу каждой виртуальной машины и равномерно распределите их между учетными записями хранения Azure. Старайтесь избегать группирования всех виртуальных машин с высокой интенсивностью ввода-вывода всего лишь в одной или двух учетных записях хранения.

Дополнительную информацию о возможностях ввода-вывода различных вариантов службы хранилища Azure и некоторые рекомендуемые максимальные значения можно найти в статье [Целевые показатели масштабируемости и производительности службы хранилища Azure](../storage/storage-scalability-targets.md).

## <a name="next-steps"></a>Дальнейшие действия
[!INCLUDE [virtual-machines-linux-infrastructure-guidelines-next-steps](../../includes/virtual-machines-linux-infrastructure-guidelines-next-steps.md)]




<!--HONumber=Dec16_HO3-->


