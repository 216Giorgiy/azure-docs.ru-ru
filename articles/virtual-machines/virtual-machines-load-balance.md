<properties
	pageTitle="Балансировка нагрузки для служб инфраструктуры Azure"
	description="В этой статье описываются два разных типа балансировки нагрузки, которые поддерживаются в Azure: подсистема балансировки нагрузки для облачных служб и диспетчер трафика для трафика клиентов."
	services="virtual-machines"
	documentationCenter=""
	authors="joaoma"
	manager="adinah"
	editor=""/>

<tags
	ms.service="virtual-machines"
	ms.workload="infrastructure-services"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="07/21/2015"
	ms.author="joaoma"/>


# Балансировка нагрузки для служб инфраструктуры Azure#

В службах инфраструктуры Azure доступны два уровня балансировки нагрузки.

- **Уровень DNS**: балансировка нагрузки для трафика в разных облачных службах, расположенных в разных центрах обработки данных, на разных веб-сайтах Azure, расположенных в разных центрах обработки данных, или на внешних конечных точках. Это делается с помощью диспетчера трафика Azure и метода балансировки нагрузки с циклическим перебором.
- **Уровень сети**: балансировка нагрузки для входящего интернет-трафика на разных виртуальных машинах облачной службы или балансировка нагрузки трафика между виртуальными машинами в облачной службе или в виртуальной сети. Это осуществляется с помощью подсистемы балансировки нагрузки Azure.

## Балансировка нагрузки диспетчером трафика для облачных служб и веб-сайтов##

Диспетчер трафика позволяет управлять распределением пользовательского трафика на конечных точках, которые могут включать в себя облачные службы, веб-сайты, внешние сайты и другие профили диспетчера трафика. Диспетчер трафика применяет интеллектуальную подсистему политик в запросах системы доменных имен (DNS) для доменных имен ваших интернет-ресурсов. Ваши облачные службы и веб-сайты могут выполняться на различных центрах обработки данных по всему миру.

Для настройки внешних конечных точек или профилей диспетчера трафика как конечных точек вам следует использовать REST или Windows PowerShell.

Диспетчер трафика использует три метода балансировки нагрузки для распределения трафика:

- **Отработка отказа**: применяйте этот метод, если хотите использовать первичную конечную точку для всего трафика, но обеспечьте резервирование на случай, если первичная точка станет недоступной.
- **Производительность**: применяйте этот метод, если у вас есть конечные точки в разных географических расположениях, и вы хотите, чтобы запрашивающие клиенты использовали "ближайшую" конечную точку, что обеспечивает минимальную задержку.
- **Циклический перебор**: применяйте этот метод, если хотите распределять нагрузку между облачными службами в одном центре обработки данных или между облачными службами и веб-сайтами в разных центрах обработки данных.

Дополнительную информацию см. в разделе [О методах балансировки нагрузки диспетчера трафика](../traffic-manager/traffic-manager-load-balancing-methods.md).

На следующей схеме показан пример метода балансировки нагрузки с циклическим перебором для распределения трафика между разными облачными службами.

![loadbalancing](./media/virtual-machines-load-balance/TMSummary.png)

Вот как выглядит базовый процесс:

1.	Интернет-клиент запрашивает доменное имя, соответствующее веб-службе.
2.	Служба DNS перенаправляет запрос имени диспетчеру трафика.
3.	Диспетчер трафика выбирает следующую облачную службу в списке циклического перебора и отправляет обратно DNS-имя. DNS-сервер интернет-клиента определяет IP-адрес для имени и отправляет его интернет-клиенту.
4.	Интернет-клиент подключается к облачной службе, выбранной диспетчером трафика.

Дополнительную информацию см. в разделе [Диспетчер трафика](../traffic-manager/traffic-manager-overview.md).

## Балансировка нагрузки Azure для виртуальных машин ##

Виртуальные машины в одной облачной службе или виртуальной сети могут напрямую подключаться друг к другу, используя частные IP-адреса. Компьютеры и службы за пределами облачной службы или виртуальной сети могут обмениваться данными только с виртуальными машинами в облачной службе или виртуальной сети с настроенной конечной точкой. Конечная точка — это сопоставление общедоступного IP-адреса и порта с частным IP-адресом и портом виртуальной машины или веб-роли в облачной службе Azure.

Подсистема балансировки нагрузки Azure произвольно распределяет определенный тип входящего трафика между несколькими виртуальными машинами или службами в конфигурации, известной как набор балансировки нагрузки. Например, можно распределить нагрузку от трафика веб-запросов на несколько веб-серверов или веб-ролей.

На следующей схеме показана конечная точка с балансировкой нагрузки для стандартного (незашифрованного) веб-трафика, являющаяся общей для трех виртуальных машин для открытых и закрытых TCP-портов 80. Эти три виртуальные машины находятся в наборе балансировки нагрузки.

![loadbalancing](./media/virtual-machines-load-balance/LoadBalancing.png)

Дополнительную информацию см. в разделе [Подсистема балансировки нагрузки Azure](../load-balancer/load-balancer-overview.md). Указания по созданию набора балансировки нагрузки см. в разделе [Настройка комплекта балансировки нагрузки](../load-balancer/load-balancer-internet-getstarted.md).

Azure также может распределять нагрузку внутри облачной службы или виртуальной сети. Эта функция известна как внутренняя балансировка нагрузки и может использоваться в следующих целях:

- Для распределения нагрузки между серверами на различных уровнях многоуровневого приложения (например, между веб-уровнем и уровнем базы данных).
- Для балансировки нагрузки в бизнес-приложениях, размещенных в Azure. При этом не требуется дополнительное оборудование или программное обеспечение для распределения нагрузки.
- включая локальные серверы в наборе компьютеров, чей трафик балансируется.

По аналогии с балансировкой нагрузки Azure внутренняя балансировка нагрузки упрощается за счет настройки набора внутренней балансировки нагрузки.

На следующей схеме показан пример конечной точки с внутренней балансировкой нагрузки для бизнес-приложения, которое является общим для трех виртуальных машин в виртуальной сети с подключением между организациями.

![loadbalancing](./media/virtual-machines-load-balance/LOBServers.png)

## Дальнейшие действия

Указания по созданию набора балансировки нагрузки см. в разделе [Настройка внутреннего набора с балансировкой нагрузки](../load-balancer/load-balancer-internal-getstarted.md).

Дополнительные сведения см. в статье [Внутренняя балансировка нагрузки](../load-balancer/load-balancer-internal-overview.md).

<!-- LINKS -->

<!---HONumber=July15_HO5-->