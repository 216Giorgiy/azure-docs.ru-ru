<properties
	pageTitle="Рекомендации по решениям для хранения данных | Microsoft Azure"
	description="Изучите основные рекомендации по проектированию и реализации, касающиеся развертывания решений для хранения данных в службах инфраструктуры Azure."
	documentationCenter=""
	services="virtual-machines-windows"
	authors="iainfoulds"
	manager="timlt"
	editor=""
	tags="azure-resource-manager"/>

<tags
	ms.service="virtual-machines-windows"
	ms.workload="infrastructure-services"
	ms.tgt_pltfrm="vm-windows"
	ms.devlang="na"
	ms.topic="article"
	ms.date="06/30/2016"
	ms.author="iainfou"/>

# Рекомендации по инфраструктуре хранилища

[AZURE.INCLUDE [virtual-machines-windows-infrastructure-guidelines-intro](../../includes/virtual-machines-windows-infrastructure-guidelines-intro.md)]

Эта статья посвящена требованиям к хранилищу и вопросам проектирования, связанным с обеспечением оптимальной производительности виртуальных машин.


## Рекомендации по реализации хранилища

Решения

- Для рабочей нагрузки необходимо использовать хранилище уровня "Стандартный" или "Премиум"?
- Требуется ли чередование для создания дисков размером более 1023 ТБ?
- Требуется ли чередование дисков, чтобы обеспечить оптимальную производительность ввода-вывода для рабочей нагрузки?
- Какие учетные записи хранения необходимы для размещения рабочей нагрузки в ИТ-среде или ИТ-инфраструктуры?

Задачи

- Просмотрите требования к вводу-выводу разворачиваемых приложений и спланируйте нужное количество и тип учетных записей хранения.
- Создать набор учетных записей хранения с использованием соглашения об именовании. Это можно сделать с помощью портала Azure или Azure PowerShell.


## Хранилище

Служба хранилища Azure — ключевая составляющая в развертывании виртуальных машин и приложений и управлении ими. Служба хранилища Azure предоставляет службы для хранения файловых данных, неструктурированных данных и сообщений, а также является частью инфраструктуры, обслуживающей виртуальные машины.

Для обслуживания виртуальных машин доступны учетные записи хранения двух типов.

- Учетная запись хранения уровня "Стандартный" предоставляет доступ к хранилищу BLOB-объектов (которое используется для хранения дисков виртуальных машин Azure), хранилищу таблиц, хранилищу очередей и хранилищу файлов.
- [Хранилище уровня "Премиум"](../storage/storage-premium-storage.md) обеспечивает высокопроизводительные диски с малой задержкой для рабочих нагрузок с интенсивным вводом-выводом, например для рабочих нагрузок SQL Server в кластере AlwaysOn, и в настоящее время поддерживает только диски виртуальной машины Azure.

Azure создает виртуальные машины с диском операционной системы, временным диском и любым количеством дополнительных дисков данных (которые могут и отсутствовать). Диск операционной системы и диски данных — страничные BLOB-объекты Azure, тогда как временный диск хранится на локальном узле, на котором запущена виртуальная машина. Будьте внимательны при проектировании приложений, использующих только этот временный диск для временных данных, так как во время события обслуживания виртуальная машина может быть перенесена между узлами. При этом все данные, хранящиеся на временном диске, будут потеряны.

Базовая среда службы хранилища Azure обеспечивает устойчивость и высокий уровень доступности. Это гарантирует защиту данных от внепланового обслуживания или сбоев оборудования. При проектировании среды службы хранилища Azure можно выбрать локальную репликацию хранилища виртуальных машин в заданном центре обработки данных Azure, репликацию между центрами обработки данных Azure в пределах заданного региона или даже в разных регионах. Вы можете больше узнать о [возможностях репликации для обеспечения высокого уровня доступности](../storage/storage-introduction.md#replication-for-durability-and-high-availability).

Максимальный размер дисков операционной системы и дисков данных составляет 1023 ГБ (гигабайт), так как максимальный размер большого двоичного объекта составляет 1024 ГБ и он должен содержать метаданные (нижний колонтитул) VHD-файла (ГБ — это 1024<sup>3</sup> байта). Чтобы преодолеть это ограничение, можно с помощью дисковых пространств в ОС Windows Server 2012 сформировать пулы дисков данных, представляющие логические тома более 1023 ГБ для виртуальной машины.

Существуют некоторые ограничения масштабируемости, накладываемые при проектировании развертываний службы хранилища Azure. Дополнительные сведения об этом см. разделе [Подписка Azure, границы, квоты и ограничения службы](azure-subscription-service-limits.md#storage-limits). См. также статью [Целевые показатели масштабируемости и производительности хранилища Azure](../storage/storage-scalability-targets.md).

Что касается хранилища приложений, можно хранить неструктурированные данные объектов, таких как документы, изображения, резервные копии, данные конфигурации, журналы и т. д., используя хранилище BLOB-объектов. Вместо того, чтобы записывать данные на виртуальный диск, подключенный к виртуальной машине, приложение может записывать их непосредственно в хранилище BLOB-объектов Azure. Хранилище BLOB-объектов также предоставляет функцию ["горячего" и "холодного" уровней хранилища](../storage/storage-blob-storage-tiers.md), которую можно использовать в зависимости от требований к доступности и ограничений затрат.


## Диски с чередованием
Использование чередования для дисков данных, помимо возможности создавать диски размером более 1023 ГБ, во многих случаях увеличивает производительность благодаря тому, что для единого тома хранилища используются несколько больших двоичных объектов. При чередовании дисков операции ввода-вывода для одного логического диска могут выполняться параллельно.

Azure накладывает ограничения на количество дисков данных и пропускную способность в зависимости от размера виртуальной машины. Дополнительную информацию см. в статье [Размеры виртуальных машин](virtual-machines-windows-sizes.md).

При использовании чередования дисков данных Azure придерживайтесь следующих рекомендаций:

- Диски данных всегда должны иметь максимальный размер (1023 ГБ).
- Присоединяйте столько дисков данных, сколько позволяет размер виртуальной машины.
- Используйте дисковые пространства.
- Избегайте кэширования дисков данных Azure (для политики кэширования нужно выбрать параметр "Нет").

Дополнительные сведения см. в статье [Дисковые пространства: повышение производительности](http://social.technet.microsoft.com/wiki/contents/articles/15200.storage-spaces-designing-for-performance.aspx).


## Несколько учетных записей хранения

При проектировании среды службы хранилища Azure вы можете использовать нескольких учетных записей хранения, так как количество развертываемых виртуальных машин может увеличиться. Это поможет распределить операции ввода-вывода по базовой инфраструктуре службы хранилища Azure, чтобы обеспечить оптимальную производительность виртуальных машин и приложений. При проектирование приложений, которые будут развернуты, учитывайте будущие требования к вводу-выводу каждой виртуальной машины и равномерно распределите их между учетными записями хранения Azure. Старайтесь избегать группирования всех виртуальных машин с высокой интенсивностью ввода-вывода всего в одной или двух учетных записях.

Дополнительную информацию о возможностях ввода-вывода различных вариантов службы хранилища Azure и некоторые рекомендуемые максимальные значения можно найти в разделе [Целевые показатели масштабируемости и производительности службы хранилища Azure](../storage/storage-scalability-targets.md).


## Дальнейшие действия

[AZURE.INCLUDE [virtual-machines-windows-infrastructure-guidelines-next-steps](../../includes/virtual-machines-windows-infrastructure-guidelines-next-steps.md)]

<!---HONumber=AcomDC_0706_2016-->