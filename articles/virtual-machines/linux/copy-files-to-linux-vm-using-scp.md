---
title: "Перемещение файлов на виртуальную машину Linux и с нее с помощью SCP | Документация Майкрософт"
description: "Безопасное перемещение файлов на виртуальную машину Linux и с нее с помощью SCP и пары ключей SSH."
services: virtual-machines-linux
documentationcenter: virtual-machines
author: dlepow
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 
ms.service: virtual-machines-linux
ms.workload: infrastructure
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 12/14/2016
ms.author: danlep
ms.translationtype: Human Translation
ms.sourcegitcommit: eeb56316b337c90cc83455be11917674eba898a3
ms.openlocfilehash: 1935bde486d8f6f8e80a73447c4b0ea5d4671b45
ms.contentlocale: ru-ru
ms.lasthandoff: 04/03/2017

---

<a id="moving-files-to-and-from-a-linux-vm-using-scp" class="xliff"></a>

# Перемещение файлов на виртуальную машину Linux и с нее с помощью SCP

В этой статье показано, как перемещать файлы между рабочей станцией и виртуальной машиной Azure под управлением Linux, используя протокол SCP.  В качестве примера мы рассмотрим перемещение файла конфигурации Azure на виртуальную машины с ОС Linux и извлечение каталога файлов журнала с использованием SCP и ключей SSH.   

Для выполнения процедуры, описанной в этой статье, необходимы следующие компоненты:

- [учетная запись Azure](https://azure.microsoft.com/pricing/free-trial/);

- [файлы открытого и закрытого ключа SSH](mac-create-ssh-keys.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).

<a id="quick-commands" class="xliff"></a>

## Быстрые команды

Копирование файла на виртуальную машину под управлением Linux

```bash
scp file user@host:directory/targetfile
```

Копирование файла с виртуальной машины под управлением Linux

```bash
scp user@host:directory/file targetfile
```

<a id="detailed-walkthrough" class="xliff"></a>

## Подробное пошаговое руководство

Быстрое и безопасное перемещение файлов между рабочей станцией и виртуальной машиной с Linux является важной частью управления инфраструктурой Azure.  В этой статье мы рассмотрим использование SCP — инструмента, созданного на основе SSH и включенного в состав оболочки Bash, используемой по умолчанию в Linux, Mac и Windows.

<a id="ssh-key-pair-authentication" class="xliff"></a>

## Аутентификация с помощью пары ключей SSH

SCP использует SSH на транспортном уровне.  При использовании SSH для транспорта, SSH осуществляет аутентификацию на целевом узле, перемещая файл в зашифрованный канал, который по умолчанию предоставляется для SSH.  Для аутентификации SSH можно использовать имена пользователей и пароли, но по соображениям безопасности настоятельно рекомендуется использовать аутентификацию с помощью открытого и закрытого ключа SSH. После аутентификации подключения с помощью SSH инструмент SCP начинает процесс копирования файла.  При использовании правильно настроенного файла `~/.ssh/config`, а также открытого и закрытого ключей SSH подключение SCP можно установить, не вводя имя пользователя. В этом случае достаточно имени сервера.  При наличии только одного ключа SSH инструмент SCP будет искать его в каталоге `~/.ssh/` и использовать по умолчанию для имени входа на виртуальную машину.

Дополнительные сведения о настройке файла `~/.ssh/config`, а также открытом и закрытом ключах SSH см. в статье [Создание пары из открытого и закрытого ключей SSH для виртуальных машин Linux](mac-create-ssh-keys.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).

<a id="scp-a-file-to-a-linux-vm" class="xliff"></a>

## Копирование файла на виртуальную машину Linux с помощью SCP

В первом примере файл учетных данных Azure копируется на виртуальную машину Linux, которая используется для автоматизации развертывания.  Так как этот файл содержит учетные данные Azure API, которые включают в себя секреты, безопасность играет важную роль, и зашифрованный канал, предоставляемый SSH, защищает содержимое файла.

```bash
scp ~/.azure/credentials myserver:/home/ahmet/.azure/credentials
```

<a id="scp-a-directory-from-a-linux-vm" class="xliff"></a>

## Копирование каталога с виртуальной машины Linux с помощью SCP

В этом примере выполняется копирование каталога с файлами журнала с виртуальной машины Linux на рабочую станцию.  В некоторых случаях файлы журнала могут содержать секретные данные, а используя SCP, можно обеспечить шифрование их содержимого.  Самый простой способ обеспечить надлежащую защиту при получении каталога и файлов журналов на рабочей станции — использовать SCP для безопасной передачи файлов.

```bash
scp -r myserver:/home/ahmet/logs/ /tmp/.
```

Если в командной строке используется флаг `-r`, SCP рекурсивно копирует файлы и каталоги из места в каталоге, указанного в команде.  Обратите также внимание, что синтаксис для командной строки аналогичен синтаксису команды копирования `cp`.

<a id="next-steps" class="xliff"></a>

## Дальнейшие действия

* [Управление пользователями, SSH и проверка или восстановление дисков в виртуальных машинах Azure с помощью расширения VMAccess](using-vmaccess-extension.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)
* [Отключение паролей SSH на виртуальной машине Linux в настройках SSHD](mac-disable-ssh-password-usage.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)

