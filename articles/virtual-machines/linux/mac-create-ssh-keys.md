---
title: Создание и использование пары ключей SSH для виртуальных машин Linux в Azure | Документация Майкрософт
description: Сведения о создании и использовании пары из открытого и закрытого ключей SSH для виртуальных машин Linux в Azure с целью повышения безопасности процесса аутентификации.
services: virtual-machines-linux
documentationcenter: ''
author: iainfoulds
manager: jeconnoc
editor: ''
tags: azure-resource-manager
ms.assetid: 34ae9482-da3e-4b2d-9d0d-9d672aa42498
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 04/02/2018
ms.author: iainfou
ms.openlocfilehash: 137fb13ff286e5284b8e8910834913ec9f1d48a9
ms.sourcegitcommit: 59914a06e1f337399e4db3c6f3bc15c573079832
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/20/2018
ms.locfileid: "31602636"
---
# <a name="quick-steps-create-and-use-an-ssh-public-private-key-pair-for-linux-vms-in-azure"></a>Краткая инструкция: создание и использование пары из открытого и закрытого ключей SSH для виртуальных машин Linux в Azure
С помощью пары ключей Secure Shell (SSH) в Azure можно создавать виртуальные машины, использующие ключи SSH для проверки подлинности, что позволяет обойтись без использования паролей для входа. В этой статье показано, как быстро создать и использовать пару файлов открытого и закрытого ключей SSH для виртуальных машин Linux. Эти шаги можно выполнить с помощью Azure Cloud Shell, узла macOS или Linux, подсистемы Windows для Linux либо других инструментов, поддерживающих OpenSSH. 

Дополнительные сведения и примеры доступны в разделе [Подробное руководство по созданию пары ключей SSH и дополнительных сертификатов для виртуальной машины Linux в Azure](create-ssh-keys-detailed.md).

Дополнительные способы создания и использования ключей SSH на компьютере Windows описываются в разделе [Использование ключей SSH с Windows в Azure](ssh-from-windows.md).

[!INCLUDE [virtual-machines-common-ssh-support](../../../includes/virtual-machines-common-ssh-support.md)]

## <a name="create-an-ssh-key-pair"></a>Создание пары ключей SSH
Для создания файлов открытого и закрытого ключа SSH используйте команду `ssh-keygen`. По умолчанию эти файлы будут созданы в каталоге `~/.ssh`. При появлении запроса можно указать другой каталог и дополнительную парольную фразу (пароль для доступа к файлу закрытого ключа). Если в текущем каталоге существует пара ключей SSH, они будут перезаписаны.

```bash
ssh-keygen -t rsa -b 2048
```

При использовании [Azure CLI 2.0](/cli/azure) для создания виртуальных машин можно дополнительно создать файлы открытого и закрытого ключей SSH, выполнив команду [az vm create](/cli/azure/vm#az_vm_create) с параметром `--generate-ssh-keys`. Эти ключи хранятся в каталоге ~/.ssh. Обратите внимание на то, что этот параметр команды не перезаписывает ключи, если они уже существуют в данном расположении.

## <a name="provide-ssh-public-key-when-deploying-a-vm"></a>Предоставление открытого ключа SSH при развертывании виртуальной машины
Чтобы создать виртуальную машину Linux, которая использует ключи SSH для аутентификации, укажите свой открытый ключ SSH при создании виртуальной машины с помощью портала Azure, интерфейса командной строки, шаблонов Resource Manager или других методов.

* [Создание виртуальной машины Linux с помощью портала Azure](quick-create-portal.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)
* [Создание виртуальной машины Linux с помощью Azure CLI](quick-create-cli.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)
* [Создание виртуальной машины Linux с помощью шаблона Azure](create-ssh-secured-vm-from-template.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)

Если вам не знаком формат открытого ключа SSH, чтобы просмотреть его, выполните команду `cat`, заменив параметр `~/.ssh/id_rsa.pub` расположением файла собственного открытого ключа.

```bash
cat ~/.ssh/id_rsa.pub
```

Если вы копируете содержимое файла открытого ключа и вставляете его на портале Azure или в шаблоне Resource Manager, в этом содержимом не должно быть дополнительных пробелов. Например, при использовании macOS, чтобы скопировать содержимое файла открытого ключа (по умолчанию это `~/.ssh/id_rsa.pub`), вы можете передать его в **pbcopy** (или другие аналогичные программы Linux, например **xclip**).

По умолчанию открытый ключ виртуальной машины хранится в файле `~/.ssh/id_rsa.pub`, если только вы не изменили это расположение во время создания ключей. При использовании [Azure CLI 2.0](/cli/azure) создания виртуальной машины с использованием существующего открытого ключа укажите значение или расположение этого ключа, выполнив команду [az vm create](/cli/azure/vm#az_vm_create) с параметром `--ssh-key-value`. 

## <a name="ssh-to-your-vm"></a>Установка SSH-подключения к виртуальной машине
С помощью открытого ключа, развернутого на виртуальной машине Azure, и закрытого ключа в локальной системе установите SSH-подключение к виртуальной машине, используя ее IP-адрес или DNS-имя. Замените *azureuser* и *myvm.westus.cloudapp.azure.com* в приведенной команде, указав имя пользователя администратора и полное доменное имя (или IP-адрес).

```bash
ssh azureuser@myvm.westus.cloudapp.azure.com
```

Если при создании пары ключей вы указали парольную фразу, введите ее при появлении запроса во время входа в систему. (Сервер добавляется в папку `~/.ssh/known_hosts`. Если не изменять открытый ключ на виртуальной машине Azure или не удалять имя сервера из файла `~/.ssh/known_hosts`, запрос на подключение повторно не отображается.)

По умолчанию в настройках виртуальных машин Azure, созданных с помощью ключей SSH, пароли отключены, за счет чего атаки методом подбора более затратные и поэтому более сложные. 

## <a name="next-steps"></a>Дополнительная информация

В этой статье описано создание простой пары ключей SSH для быстрого использования. 

* Если вам требуется дополнительная помощь при работе с парой ключ SSH, ознакомьтесь с разделом [Подробное руководство по созданию пары ключей SSH и дополнительных сертификатов для виртуальной машины Linux в Azure](create-ssh-keys-detailed.md).

* При возникновении проблем с SSH-подключением к виртуальной машине Azure обратитесь к разделу [Устранение неполадок с SSH-подключением к виртуальной машине Azure Linux: сбой, ошибка или отклонение](troubleshoot-ssh-connection.md).


