---
title: "Обработка уведомлений по обслуживанию для виртуальных машин Linux в Azure | Документация Майкрософт"
description: "Просмотрите уведомления по обслуживанию для виртуальных машин Linux, запущенных в Azure, и запустите самостоятельное обслуживание."
services: virtual-machines-linux
documentationcenter: 
author: zivraf
manager: timlt
editor: 
tags: azure-service-management,azure-resource-manager
ms.assetid: 
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-windows
ms.devlang: na
ms.topic: article
ms.date: 09/14/2017
ms.author: zivr
ms.translationtype: HT
ms.sourcegitcommit: 8f9234fe1f33625685b66e1d0e0024469f54f95c
ms.openlocfilehash: 2fc96898c9b7ebefc7648b5819975d9015e76c0c
ms.contentlocale: ru-ru
ms.lasthandoff: 09/20/2017

---


# <a name="handling-planned-maintenance-notifications-for-linux-virtual-machines"></a>Обработка уведомлений о плановом обслуживании для виртуальных машин Linux

Azure периодически выполняет обновления, чтобы повысить надежность, производительность и безопасность инфраструктуры узлов, в которой работают виртуальные машины. Обновления — это изменения, такие как исправление среды размещения или модернизация оборудования и вывод его из эксплуатации. Большинство этих обновлений не влияют на работу размещенных виртуальных машин. Но в некоторых случаях они все же оказывают определенное воздействие:

- Если обслуживание не требует перезагрузки, Azure с помощью миграции на месте приостанавливает работу виртуальной машины во время обновления узла.

- Если для обслуживания требуется перезагрузка, вы получите уведомление во время планирования обслуживания. В этих случаях вам предоставляется временное окно, в котором вы можете начать обслуживание самостоятельно в удобное для вас время.


Плановое обслуживание, требующее перезагрузки, запланировано в волнах. Каждая волна имеет разную область (регионы).

- Волна начинается с уведомления клиентов. По умолчанию уведомление отправляется владельцу и совладельцам подписки. Для уведомлений можно добавить дополнительных получателей и параметры обмена сообщениями, например электронная почта, SMS и объекты Webhook. 
- Вскоре после уведомления задается период самообслуживания. В рамках этого периода можно найти информацию о том, какая из виртуальных машин включена в эту волну, и начать обслуживание с использованием упреждающего повторного развертывания. 
- Когда заканчивается период самообслуживания, начинается период запланированного обслуживания. В настоящее время в Azure планируется и применяется необходимое обслуживание для вашей виртуальной машины.  

Два периода нужны, чтобы у вас было достаточно времени для запуска обслуживания и перезагрузки виртуальной машины до того, как Azure начнет обслуживание автоматически.

Для запроса окон обслуживания для виртуальных машин и запуска самообслуживания можно использовать Azure CLI, PowerShell, REST API и портал Azure.

 > [!NOTE]
 > Если попытка запустить обслуживание завершилась сбоем, Azure отмечает виртуальную машину как **пропущенную** и не перезагружает ее во время периода запланированного обслуживания. Вместо этого позже вам сообщат новое расписание. 

## <a name="find-vms-scheduled-for-maintenance-using-cli"></a>Поиск виртуальных машин, для которых запланировано обслуживание, с использованием CLI

Сведения об плановом обслуживании можно посмотреть, используя [azure vm get-instance-view](/cli/azure/vm?view=azure-cli-latest#az_vm_get_instance_view).
 
Сведения об обслуживании возвращаются, только если имеется запланированное обслуживание. Если нет запланированного обслуживания, влияющего на виртуальную машину, команда не возвращает информацию об обслуживании. 

```azure-cli
az vm get-instance-view  - g rgName  -n vmName 
```

В разделе MaintenanceRedeployStatus возвращаются следующие значения. 

| Значение | Описание   |
|-------|---------------|
| IsCustomerInitiatedMaintenanceAllowed | Указывает, можно ли сейчас запустить обслуживание на виртуальной машине ||
| PreMaintenanceWindowStartTime         | Начало периода самообслуживания, когда можно инициировать обслуживание на виртуальной машине ||
| PreMaintenanceWindowEndTime           | Завершение периода самообслуживания, когда можно инициировать обслуживание на виртуальной машине ||
| MaintenanceWindowStartTime            | Начало периода запланированного обслуживания, когда можно инициировать обслуживание на виртуальной машине ||
| MaintenanceWindowEndTime              | Завершение периода запланированного обслуживания, когда можно инициировать обслуживание на виртуальной машине ||
| LastOperationResultCode               | Результат последней попытки инициирования обслуживания на виртуальной машине ||


## <a name="start-maintenance-on-your-vm-using-cli"></a>Запуск обслуживания вашей виртуальной машины с помощью CLI

Следующий вызов инициирует обслуживание на виртуальной машине, если для `IsCustomerInitiatedMaintenanceAllowed` установлено значение true.

```azure-cli
az vm perform-maintenance rgName vmName 
```

[!INCLUDE [virtual-machines-common-maintenance-notifications](../../../includes/virtual-machines-common-maintenance-notifications.md)]


## <a name="next-steps"></a>Дальнейшие действия

Узнайте, как зарегистрироваться для событий обслуживания прямо из виртуальной машины с помощью функции [запланированных событий](scheduled-events.md).
