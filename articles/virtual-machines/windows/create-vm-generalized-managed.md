---
title: Создание виртуальной машины из управляемого образа в Azure | Документация Майкрософт
description: Создание виртуальной машины Windows из универсального управляемого образа с использованием Azure PowerShell или портала Azure в модели развертывания с помощью Resource Manager.
services: virtual-machines-windows
documentationcenter: ''
author: cynthn
manager: jeconnoc
editor: ''
tags: azure-resource-manager
ms.service: virtual-machines-windows
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-windows
ms.devlang: na
ms.topic: article
ms.date: 03/27/2017
ms.author: cynthn
ms.openlocfilehash: 1d543bd9590664e74cff70cf55e8f7bd42f2c6f0
ms.sourcegitcommit: d74657d1926467210454f58970c45b2fd3ca088d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2018
ms.locfileid: "30239061"
---
# <a name="create-a-vm-from-a-managed-image"></a>Создание виртуальной машины из управляемого образа

Вы можете создать несколько виртуальных машин из управляемого образа виртуальной машины, используя PowerShell или портал Azure. Управляемый образ виртуальной машины содержит сведения, необходимые для создания виртуальной машины, включая диски ОС и диски данных. Виртуальные жесткие диски, входящие в образ, включая диски ОС и диски данных, хранятся в виде управляемых дисков. 

Для создания новой виртуальной машины необходим [управляемый образ виртуальной машины](capture-image-resource.md). 

## <a name="use-the-portal"></a>Использование портала

1. Откройте [портал Azure](https://portal.azure.com).
2. В меню слева выберите **Все ресурсы**. Вы можете отсортировать ресурсы по **типу**, чтобы легко найти образы.
3. Выберите в списке необходимый образ. Откроется страница **Обзор** для образа.
4. В меню нажмите кнопку **+ Создать виртуальную машину**.
5. Введите сведения о виртуальной машине. Имя пользователя и пароль понадобятся для входа на виртуальную машину. По завершении нажмите кнопку **ОК**. Вы можете создать виртуальную машину в существующей группе ресурсов или выбрать **Создать**, чтобы создать группу ресурсов для хранения данных виртуальной машины.
6. Выберите размер виртуальной машины. Чтобы просмотреть дополнительные размеры, выберите **Просмотреть все** или измените фильтр **Supported disk type** (Поддерживаемые типы диска). 
7. Внесите необходимые изменения в разделе **Параметры** и нажмите кнопку **ОК**. 
8. На странице сводных данных вы увидите имя образа в строке **Частный образ**. Нажмите кнопку **ОК**, чтобы запустить развертывание виртуальной машины.


## <a name="use-powershell"></a>Использование PowerShell

С помощью PowerShell можно создать виртуальную машину и образ, используя упрощенный набор параметров для командлета [New-AzureRmVm](/powershell/module/azurerm.compute/new-azurermvm). Образ должен находиться в той же группе ресурсов, где нужно создать виртуальную машину.

Для работы с этим примером требуется модуль AzureRM 5.6.0 или более поздней версии. Чтобы узнать версию, выполните команду ` Get-Module -ListAvailable AzureRM`. Если вам необходимо выполнить обновление, ознакомьтесь со статьей, посвященной [установке модуля Azure PowerShell](/powershell/azure/install-azurerm-ps).

В упрощенном наборе параметров для New-AzureRmVm нужно указать только имя, группу ресурсов и имя образа для создания виртуальной машины из образа. Но в качестве имени всех ресурсов, которые создаются автоматически, будет использоваться значение параметра **-Name**. В этом примере мы предоставим более подробные имена для каждого из ресурсов, которые автоматически создаются при помощи командлета. Также можно создать такие ресурсы, как виртуальная сеть, заранее и передать соответствующее имя в командлет. При этом будут использоваться существующие ресурсы, если их можно найти по имени.

В следующем примере на основе образа с именем *myImage* создается виртуальная машина с именем *myVMFromImage* в группе *myResourceGroup*. 


```azurepowershell-interactive
New-AzureRmVm `
    -ResourceGroupName "myResourceGroup" `
    -Name "myVMfromImage" `
    -ImageName "myImage" `
    -Location "East US" `
    -VirtualNetworkName "myImageVnet" `
    -SubnetName "myImageSubnet" `
    -SecurityGroupName "myImageNSG" `
    -PublicIpAddressName "myImagePIP" `
    -OpenPorts 3389
```



## <a name="next-steps"></a>Дополнительная информация
Сведения об управлении новыми виртуальными машинами с помощью PowerShell см. в статье [Создание виртуальных машин Windows и управление ими с помощью модуля Azure PowerShell](tutorial-manage-vm.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).

