<properties
   pageTitle="Архитектура диспетчера ресурсов Azure | Microsoft Azure"
   description="Узнайте об архитектуре диспетчера ресурсов и связях между поставщиками вычислительных, сетевых ресурсов и ресурсов хранения."
   services="virtual-machines"
   documentationCenter=""
   authors="davidmu1"
   manager="timlt"
   editor=""
   tags="azure-resource-manager,azure-service-management"/>

<tags
	ms.service="azure-resource-manager"
	ms.workload="infrastructure-services"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="08/25/2015"
	ms.author="davidmu"/>

# Архитектура диспетчера ресурсов Azure

[AZURE.INCLUDE [learn-about-deployment-models](../../includes/learn-about-deployment-models-include.md)]

В этой статье приведен обзор архитектур управления службами и диспетчера ресурсов, используемых для создания приложений и рабочих нагрузок на основе инфраструктуры.

## Архитектура управления службами

Прежде чем перейти к архитектуре диспетчера ресурсов Azure и различным поставщикам ресурсов, рассмотрим архитектуру, которая в настоящий момент используется для управления службами Azure. В управлении службами Azure вычислительные, сетевые ресурсы и ресурсы хранения данных для размещения виртуальных машин предоставляются:

- Требуемой облачной службой, которая выступает в роли контейнера для размещения виртуальных машин (вычислений). Виртуальным машинам автоматически предоставляется сетевая карта (NIC) и IP-адрес, назначаемый Azure. Кроме того, облачная служба содержит экземпляр внешней подсистемы балансировки нагрузки, общедоступный IP-адрес и конечные точки по умолчанию, чтобы разрешить трафик удаленного рабочего стола и удаленный трафик PowerShell для виртуальных машин на основе Windows, а также трафик Secure Shell (SSH) для виртуальных машин на основе Linux.
- Обязательной учетной записью хранения, в которой хранятся виртуальные жесткие диски виртуальной машины, включая диск операционной системы, а также временные и дополнительные диски данных (хранилище).
- Необязательной виртуальной сетью, выступающей в качестве дополнительного контейнера, в котором можно создать структуру подсетей и назначить подсеть, в которой находится виртуальная машина (сеть).

Ниже перечислены компоненты управления службами Azure и их связи.

![](./media/virtual-machines-azure-resource-manager-architecture/arm_arch1.png)

## Архитектура диспетчера ресурсов

Для диспетчера ресурсов Azure поставщики ресурсов поддерживают отдельные ресурсы для создания работоспособных виртуальных машин в нужной конфигурации. Для виртуальных машин существует три основных поставщика ресурсов:

- Поставщик вычислительных ресурсов (CRP): поддерживает экземпляры виртуальных машин и дополнительные группы доступности.
- Поставщик ресурсов хранилища (SRP): поддерживает необходимые учетные записи хранения, в которых хранятся виртуальные жесткие диски виртуальных машин, включая диски операционной системы и дополнительные дисков данных.
- Поставщик сетевых ресурсов (NRP): поддерживает необходимые сетевые карты, IP-адреса виртуальных машин и подсети в виртуальной сети, а также дополнительные подсистемы балансировки нагрузки, их IP-адреса и группы сетевой безопасности.

Кроме того, существуют связи между ресурсами в поставщиках ресурсов:

- Виртуальная машина зависит от определенной учетной записи хранения, определенной в SRP для хранения ее дисков в хранилище больших двоичных объектов (обязательном).
- Виртуальная машина ссылается на конкретную сетевую карту, определенную в NRP (обязательную), и группу доступности, определенные в CRP (необязательную).
- Сетевая карта ссылается на назначенный виртуальной машине IP-адрес (обязательный), подсеть виртуальной сети для виртуальной машины (обязательную) и группу сетевой безопасности (необязательную).
- Подсеть в виртуальной сети ссылается на группу сетевой безопасности (необязательную).
- Экземпляр подсистемы балансировки нагрузки ссылается на пул внутренних IP-адресов, который включают сетевую карту виртуальной машины (необязательно), и ссылается на общедоступный или частный IP-адрес (необязательно) подсистемы балансировки нагрузки.

![](./media/virtual-machines-azure-resource-manager-architecture/arm_arch2.png)

Компонентизация ресурсов обеспечивает большую гибкость при настройке инфраструктуры рабочей нагрузки ИТ, размещенной в Azure. Шаблоны диспетчера ресурсов Azure используют преимущества этой гибкости для создания набора зависимых ресурсов, необходимых для конкретной конфигурации. При выполнении шаблона диспетчер ресурсов обеспечивает создание ресурсов для конфигурации в правильном порядке, чтобы сохранить зависимости и ссылки. Например, диспетчер ресурсов не создаст сетевую карту для виртуальной машины, пока не создана виртуальная сеть с подсетью и IP-адрес (группа сетевой безопасности является необязательной).

Группа ресурсов — это логический контейнер, который содержит связанные ресурсы для приложения. Это может быть несколько виртуальных машин, сетевых карт, IP-адресов, подсистем балансировки нагрузки, подсетей и групп сетевой безопасности. Например, можно управлять всеми ресурсами приложения как единым целым. Можно создать, обновить и удалить их все вместе. Ниже приведен пример приложения, развернутого в одной группе ресурсов.

![](./media/virtual-machines-azure-resource-manager-architecture/arm_arch3.png)

Состав этого приложения:

- Две виртуальные машины, использующие одну и ту же учетную запись хранения, которые находятся в одной группе доступности и одной подсети виртуальной сети.
- Одна сетевая карта и IP-адрес для каждой виртуальной машины.
- Внешняя подсистема балансировки нагрузки, которая распределяет трафик Интернета между сетевыми картами двух виртуальных машин.

Все эти ресурсы приложения управляются посредством содержащей их одной группы ресурсов.

Также видеть компонентизацию и зависимые связи между ресурсами можно при создании виртуальной машины на основе диспетчера ресурсов с помощью Azure PowerShell или Azure CLI. Перед выполнением команды, которая создает виртуальную машину, необходимо создать группу ресурсов, учетную запись хранения, виртуальную сеть с подсетью и сетевую карту с IP-адресом. Дополнительную информацию см. в разделе [Создание и предварительная настройка виртуальной машины Windows с помощью диспетчера ресурсов и Azure PowerShell](virtual-machines-ps-create-preconfigure-windows-resource-manager-vms.md).

## Дальнейшие действия

[Развертывание виртуальных машин и управление ими с помощью шаблонов диспетчера ресурсов Azure и интерфейса командной строки Azure](virtual-machines-deploy-rmtemplates-azure-cli.md)

[Развертывание виртуальных машин Azure и управление ими с использованием шаблонов диспетчера ресурсов и PowerShell](virtual-machines-deploy-rmtemplates-powershell.md)

## Дополнительные ресурсы

[Поставщики вычислительных и сетевых ресурсов, а также ресурсов хранения Azure в диспетчере ресурсов Azure](virtual-machines-azurerm-versus-azuresm.md)

[Общие сведения о диспетчере ресурсов Azure](resource-group-overview.md)

<!---HONumber=Sept15_HO4-->