<properties 
	pageTitle="Развертывание бизнес-приложения, размещенного в Azure | Microsoft Azure" 
	description="Высокодоступное специализированное веб-приложение с группами доступности AlwaysOn для SQL Server разворачивается в Azure в пять этапов." 
	documentationCenter=""
	services="virtual-machines-windows" 
	authors="JoeDavies-MSFT" 
	manager="timlt" 
	editor=""
	tags="azure-resource-manager"/>

<tags 
	ms.service="virtual-machines-windows" 
	ms.workload="infrastructure-services" 
	ms.tgt_pltfrm="vm-windows" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="05/08/2016" 
	ms.author="josephd"/>

# Развертывание высокодоступных бизнес-приложений в Azure

В этой статье содержатся инструкции по развертыванию в службах инфраструктуры Azure высокодоступных специализированных веб-приложений для интрасети с группами доступности AlwaysOn для SQL Server. Приложение размещается на следующих компьютерах:

- два веб-сервера;
- два сервера баз данных;
- Один сервер узла большинства кластера
- два контроллера домена.

Вот схема конфигурации (для каждого сервера указаны шаблонные имена):

![](./media/virtual-machines-windows-lob-overview/workload-lobapp-phase4.png)
 
Для каждой роли высокий уровень доступности обеспечивают как минимум два компьютера. Все виртуальные машины находятся в одном расположении Azure (также называется регионом). Каждая группа виртуальных машин, выполняющих определенную роль, находится в собственной группе доступности.

## Спецификация

Для такой типичной конфигурации требуется следующий набор компонентов и служб Azure:

- семь виртуальных машин;
- четыре дополнительных диска данных для контроллеров домена и виртуальных машин под управлением SQL Server;
- три группы доступности;
- одна распределенная виртуальная сеть;
- две учетные записи хранения;

Вот список виртуальных машин и их размеры по умолчанию для данной конфигурации.

Элемент | Описание виртуальной машины | Образ из коллекции | Размер по умолчанию 
--- | --- | --- | --- 
1\. | Первый контроллер домена | Центр обработки данных Windows Server 2012 R2 | D1
2\. | Второй контроллер домена | Центр обработки данных Windows Server 2012 R2 | D1
3\. | Сервер базы данных-источника | Microsoft SQL Server 2014 Enterprise — Windows Server 2012 R2 | D4
4\. | Сервер базы данных-получателя | Microsoft SQL Server 2014 Enterprise — Windows Server 2012 R2 | D4
5\. | Узел большинства кластера | Центр обработки данных Windows Server 2012 R2 | D1
6\. | Первый веб-сервер | Центр обработки данных Windows Server 2012 R2 | D3
7\. | Второй веб-сервер | Центр обработки данных Windows Server 2012 R2 | D3

Чтобы вычислить расчетную стоимость данной конфигурации, см. [Калькулятор цен Azure](https://azure.microsoft.com/pricing/calculator/).

1. В разделе **Модули** выберите параметр **Рассчитать**, а затем щелкните **Виртуальные машины** столько раз, чтобы получился список из семи виртуальных машин.
2. Для каждой виртуальной машины укажите следующие параметры:
	- Необходимый регион
	- Тип — **Windows**
	- Уровень цен — **Стандартный**
	- **Размер экземпляра** — размер по умолчанию из предыдущей таблицы или предполагаемый размер

> [AZURE.NOTE] Калькулятор цен Azure не включает дополнительные затраты на лицензирование SQL Server для двух виртуальных машин под управлением SQL Server 2014 Enterprise. Дополнительные сведения см. в статье [Цены на виртуальные машины — SQL](https://azure.microsoft.com/pricing/details/virtual-machines/#Sql).

## Этапы развертывания

Ниже перечислены этапы развертывания этой конфигурации.

- [Этап 1. Настройка Azure](virtual-machines-windows-ps-lob-ph1.md). Создание учетных записей хранения, групп доступности и распределенной виртуальной сети.
- [Этап 2. Настройка контроллеров домена](virtual-machines-windows-ps-lob-ph2.md). Создание и настройка реплик контроллеров домена доменных служб Active (AD DS).
- [Этап 3. Настройка инфраструктуры SQL Server](virtual-machines-windows-ps-lob-ph3.md). Создание и настройка виртуальных машин под управлением SQL Server, создание кластера и включение групп доступности AlwaysOn для SQL Server.
- [Этап 4. Настройка веб-серверов](virtual-machines-windows-ps-lob-ph4.md). Создание и настройка двух виртуальных машин для веб-серверов.
- [Этап 5. Добавление баз данных приложения в группу доступности AlwaysOn для SQL Server](virtual-machines-windows-ps-lob-ph5.md). Подготовка баз данных бизнес-приложения и их добавление в группу доступности AlwaysOn для SQL Server.

Схема этого развертывания дополняет [схемы проектов архитектуры для бизнес-приложений](http://msdn.microsoft.com/dn630664) и содержит наиболее актуальные рекомендации.

Это стандартная заранее определенная архитектура. Помните о перечисленных ниже моментах.

- Чтобы создать инфраструктуру приложения под свои нужды, необходимо внести коррективы в этапы 3–5. Для этого требуется достаточный опыт внедрения специализированных веб-приложений. 
- Если у вас уже есть гибридное облачное развертывание Azure, внесите необходимые изменения в этапы 1–2 (или пропустите их). Таким образом вы сможете разместить виртуальные машины для нового приложения в соответствующей подсети.
- Все серверы расположены в одной подсети виртуальной сети Azure. Для реализации дополнительных мер безопасности, эквивалентных изоляции подсетей, можно воспользоваться [группами безопасности сети](../virtual-network/virtual-networks-nsg.md).

Инструкции по созданию среды для разработки или тестирования либо экспериментальной проверки этой конфигурации см. в статье [Настройка веб бизнес-приложения в гибридном облаке для тестирования](virtual-machines-windows-ps-hybrid-cloud-test-env-lob.md).

Дополнительные сведения о проектировании рабочих нагрузок в ИТ для Azure см. в [руководстве по реализации служб инфраструктуры Azure](virtual-machines-linux-infrastructure-service-guidelines.md).

## Дальнейшие действия

- [Этап 1](virtual-machines-windows-ps-lob-ph1.md). Начальные действия по настройке этой рабочей нагрузки.

<!---HONumber=AcomDC_0601_2016-->