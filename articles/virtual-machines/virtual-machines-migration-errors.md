---
title: "Распространенные ошибки при миграции из классической модели в модель Azure Resource Manager | Документация Майкрософт"
description: "В этой статье перечислены самые распространенные ошибки при переносе ресурсов IaaS из управления службами Azure в стек Azure Resource Manager, а также способы их устранения."
services: virtual-machines-windows
documentationcenter: 
author: singhkays
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 5bc03a1b-eb1c-438c-83d9-f0e9d61f1b6a
ms.service: virtual-machines-windows
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-windows
ms.devlang: na
ms.topic: article
ms.date: 10/13/2016
ms.author: singhkay
translationtype: Human Translation
ms.sourcegitcommit: 2ea002938d69ad34aff421fa0eb753e449724a8f
ms.openlocfilehash: 345db9b2e45937ea45329acf780601e4e0fbd504


---
# <a name="common-errors-during-classic-to-azure-resource-manager-migration"></a>Распространенные ошибки при миграции из классической модели в модель Azure Resource Manager
В этой статье перечислены самые распространенные ошибки при переносе ресурсов IaaS из классической модели развертывания Azure в стек Azure Resource Manager, а также способы их устранения.

## <a name="list-of-errors"></a>Список ошибок
| Строка ошибки | Устранение |
| --- | --- |
| Внутренняя ошибка сервера |В некоторых случаях это временная ошибка, которая исчезает после повторной попытки. Если она не исчезает, [обратитесь в службу поддержки Azure](../azure-supportability/how-to-create-azure-support-request.md), так как в этом случае требуется исследование журналов платформы. <br><br> **ПРИМЕЧАНИЕ.** Как только группа поддержки приступит к отслеживанию инцидента, не пытайтесь устранить проблему самостоятельно, так как это может иметь непредвиденные последствия для вашей среды. |
| Миграция не поддерживается для развертывания {deployment-name} в размещенной службе {hosted-service-name}, так как это развертывание PaaS (веб-роль или рабочая роль). |Это происходит, если развертывание содержит веб-роль или рабочую роль. Так как миграция поддерживается только для виртуальных машин, удалите веб-роль и рабочую роль в развертывании и выполните миграцию снова. |
| Не удалось выполнить развертывание шаблона {template-name}. CorrelationId={guid} |В серверной части службы миграции мы используем шаблоны Azure Resource Manager для создания ресурсов в стеке Azure Resource Manager. Так как шаблоны являются идемпотентными, обычно можно безопасно повторить операцию миграции для устранения этой ошибки. Если эта ошибка не исчезнет, [обратитесь в службу поддержки Azure](../azure-supportability/how-to-create-azure-support-request.md) и предоставьте CorrelationId. <br><br> **ПРИМЕЧАНИЕ.** Как только группа поддержки приступит к отслеживанию инцидента, не пытайтесь устранить проблему самостоятельно, так как это может иметь непредвиденные последствия для вашей среды. |
| Виртуальная сеть {virtual-network-name} не существует. |Это может произойти, если вы создали виртуальную сеть на новом портале Azure. Фактическое имя виртуальной сети соответствует шаблону "группа * <VNET name>". |
| Виртуальная машина {vm-name} в размещенной службе {hosted-service-name} содержит расширение {extension-name}, которое не поддерживается в Azure Resource Manager. Рекомендуется удалить его из виртуальной машины перед продолжением миграции. |Расширения XML, например BGInfo 1.*, не поддерживаются в Azure Resource Manager. Таким образом их невозможно перенести. Если оставить эти расширения на виртуальной машине, они автоматически удаляются перед выполнением миграции. |
| Виртуальная машина {vm-name} в размещенной службе {hosted-service-name} содержит расширение VMSnapshot или VMSnapshotLinux, которое в настоящее время не поддерживается для миграции. Удалите его с виртуальной машины и добавьте снова с помощью Azure Resource Manager после завершения миграции. |В этом сценарии виртуальная машина настроена для службы архивации Azure. Так как в настоящее время этот сценарий не поддерживается, используйте решение по адресу https://aka.ms/vmbackupmigration. |
| Виртуальная машина {vm-name} в размещенной службе {hosted-service-name} содержит расширение {extension-name}, о состоянии которого она не сообщает. Поэтому виртуальную машину нельзя перенести. Убедитесь, что о состоянии расширения сообщается, или удалите расширение с виртуальной машины и повторите миграцию. <br><br> Виртуальная машина {vm-name} в размещенной службе {hosted-service-name} содержит расширение {extension-name}, сообщающее о состоянии обработчика: {handler-status}. Hence, the VM cannot be migrated. Убедитесь, что сообщаемое состояние обработчика — {handler-status}, или удалите расширение с виртуальной машины и повторите миграцию. <br><br> Агент виртуальной машины {vm-name} в размещенной службе {hosted-service-name} сообщает, что общее состояние агента — Not Ready. Таким образом виртуальную машину невозможно перенести, если она содержит расширение, которое можно перенести. Убедитесь, что агент виртуальной машины сообщает о том, что общее состояние агента — Ready. Ознакомьтесь с разделом по адресу https://aka.ms/classiciaasmigrationfaqs. |Гостевому агенту Azure и расширениям виртуальных машин требуется исходящий доступ к Интернету для учетной записи хранения виртуальной машины, чтобы заполнить данные о состоянии. Стандартные причины сбоя состояния: <li> группа безопасности сети, блокирующая исходящий доступ к Интернету; <li> наличие локальных DNS-серверов в виртуальной сети и отсутствие подключения к DNS. <br><br> Если сообщение о неподдерживаемом состоянии не исчезнет, можно удалить расширения, чтобы пропустить эту проверку и перейти к миграции. |
| Миграция не поддерживается для развертывания {deployment-name} в размещенной службе {hosted-service-name}, так как она содержит несколько наборов доступности. |В настоящее время можно перенести только размещенные службы с одной и менее группами доступности. Чтобы обойти эту проблему, перенесите дополнительные группы доступности и виртуальные машины в этих группах доступности в другую размещенную службу. |
| Миграция не поддерживается для развертывания {deployment-name} в размещенной службе {hosted-service-name}, так как она содержит виртуальные машины, которые не входят в группу доступности, но содержатся в размещенной службе. |В этом сценарии нужно переместить все виртуальные машины в одну группу доступности или удалить их из группы доступности в размещенной службе. |
| Учетная запись хранения, размещенная служба или виртуальная сеть {virtual-network-name} переносится и поэтому ее невозможно изменить. |Эта ошибка возникает, после завершения операции подготовки к миграции для ресурса и инициации операции изменения ресурса. Так как плоскость управления блокируется после операции подготовки, любые изменения ресурса также блокируются. Чтобы разблокировать плоскость управления, можно запустить операцию фиксации миграции, чтобы завершить ее, или аварийного завершения, чтобы сделать откат операции подготовки. |
| Миграция запрещена для размещенной службы {размещенных service-name}, так как она содержит виртуальную машину {vm-name} в состоянии RoleStateUnknown. Миграцию можно выполнить, только если виртуальная машина находится в одном из следующих состояний: Running, Stopped, Stopped Deallocated. |Возможно, состояние виртуальной машины меняется, что обычно происходит при операции обновления в размещенной службе, например перезагрузка, установка расширения и т. д. Перед попыткой выполнения миграции рекомендуется завершить операцию обновления в размещенной службе. |

## <a name="next-steps"></a>Дальнейшие действия
Ниже приведен список статей по миграции, в которых объясняется этот процесс.

* [Поддерживаемый платформой перенос ресурсов IaaS из классической модели в модель Azure Resource Manager](virtual-machines-windows-migration-classic-resource-manager.md)
* [Перенос ресурсов IaaS из классической модели в модель Azure Resource Manager с помощью Azure PowerShell](virtual-machines-windows-ps-migration-classic-resource-manager.md)
* [Перенос ресурсов IaaS из классической модели в модель Azure Resource Manager с помощью интерфейса командной строки Azure](virtual-machines-linux-cli-migration-classic-resource-manager.md)




<!--HONumber=Nov16_HO3-->


