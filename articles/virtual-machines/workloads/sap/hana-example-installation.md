---
title: Как установить HANA на сервере SAP HANA в Azure (крупные экземпляры) | Документация Майкрософт
description: Как установить HANA на сервере SAP HANA в Azure (крупные экземпляры).
services: virtual-machines-linux
documentationcenter: ''
author: hermanndms
manager: jeconnoc
editor: ''
ms.service: virtual-machines-linux
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: vm-linux
ms.workload: infrastructure
ms.date: 09/10/2018
ms.author: rclaus
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 76a7ce99799b85d81aa6e127ebe1e57e2df3e59a
ms.sourcegitcommit: 2d961702f23e63ee63eddf52086e0c8573aec8dd
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/07/2018
ms.locfileid: "44167651"
---
# <a name="example-of-an-sap-hana-installation-on-hana-large-instances"></a>Пример установки SAP HANA на крупных экземплярах HANA

В этом разделе показано, как установить SAP HANA на единице крупного экземпляра HANA. На начальном этапе выполнены следующие условия:

- Вы предоставили Майкрософт все данные для развертывания крупного экземпляра SAP HANA.
- Вы получили от Майкрософт крупный экземпляр SAP HANA.
- Вы создали виртуальную сеть Azure, которая подключена к локальной сети.
- Вы подключили канал ExpressRotue для крупных экземпляров HANA к той же виртуальной сети Azure.
- Вы установили виртуальную машину Azure, которая будет использоваться в качестве места перехода для крупных экземпляров HANA.
- Вы проверили, что можете подключаться из места перехода к единице крупного экземпляра HANA, и наоборот.
- Вы проверили, что установлены все необходимые пакеты и исправления.
- Вы прочли заметки о SAP и документацию по установке HANA в имеющейся операционной системе и проверили, что выпуск HANA поддерживается в выпуске ОС.

Далее показаны загрузка установочных пакетов HANA на переходную виртуальную машину, в данном случае под управлением ОС Windows, копирование пакетов на единицу крупного экземпляра HANA и процедура установки.

## <a name="download-of-the-sap-hana-installation-bits"></a>Загрузка установочных пакетов SAP HANA
Так как у единиц крупных экземпляров HANA нет прямого подключения к Интернету, вы не можете загружать установочные пакеты напрямую из SAP на виртуальную машину крупного экземпляра HANA. Чтобы преодолеть это ограничение, необходима переходная среда. Пакеты следует загрузить на переходную виртуальную машину.

Чтобы загрузить установочные пакеты HANA, необходим S-пользователь SAP или другой пользователь, который позволяет вам получить доступ к SAP Marketplace. После входа выполните следующую последовательность действий:

Перейдите на сайт [SAP Service Marketplace](https://support.sap.com/en/index.html) > щелкните "Загрузить программное обеспечение" > "Установки и обновления" > "По алфавитному указателю" > В разделе H выберите "SAP HANA Platform Edition" > "SAP HANA Platform Edition 2.0" > "Установка" > Загрузите следующие файлы

![Загрузка установочных пакетов HANA](./media/hana-installation/image16_download_hana.PNG)

В демонстрационном случае мы загрузили установочные пакеты SAP HANA 2.0. На переходной виртуальной машине Azure разверните самораспаковывающиеся архивы в каталог, как показано ниже.

![Извлечение установочных пакетов HANA](./media/hana-installation/image17_extract_hana.PNG)

После извлечения архивов скопируйте каталог, созданный при извлечении (в примере выше это 51052030), в единицу крупного экземпляра HANA в том /hana/shared созданного каталога.

> [!Important]
> Не копируйте установочные пакеты в корневой или загрузочный LUN, так как пространство ограничено и предназначено для использования и другими процессами.


## <a name="install-sap-hana-on-the-hana-large-instance-unit"></a>Установка SAP HANA на единице крупного экземпляра HANA
Для установки SAP HANA необходимо выполнить вход с правами привилегированного пользователя. Только такой пользователь имеет достаточно разрешений для установки SAP HANA.
Первое, что нужно сделать, — задать разрешения для каталога, скопированного в /hana/shared. Разрешения должны иметь следующий вид:

```
chmod –R 744 <Installation bits folder>
```

Если вы хотите установить SAP HANA с помощью графической установки, необходимо установить пакет gtk2 на крупных экземплярах HANA. Проверьте, установлен ли пакет, выполнив следующую команду:

```
rpm –qa | grep gtk2
```

Далее демонстрируется установка SAP HANA с помощью графического пользовательского интерфейса. На следующем шаге перейдите в каталог установки и откройте вложенный каталог HDB_LCM_LINUX_X86_64. Начало

```
./hdblcmgui 
```
из этого каталога. На следующих экранах необходимо указать данные для установки. В демонстрируемом случае мы устанавливаем сервер базы данных SAP HANA и компоненты клиента SAP HANA. Поэтому мы выбираем пункт "База данных SAP HANA", как показано ниже.

![Выбор HANA в ходе установки](./media/hana-installation/image18_hana_selection.PNG)

На следующем экране следует выбрать параметр "Установить новую систему".

![Выбор новой установки HANA](./media/hana-installation/image19_select_new.PNG)

После выполнения этого шага необходимо выбрать несколько дополнительных компонентов, которые можно дополнительно установить на сервере базы данных SAP HANA.

![Выбор дополнительных компонентов HANA](./media/hana-installation/image20_select_components.PNG)

В этой документации мы выбрали клиент SAP HANA и SAP HANA Studio. Мы также установили вертикально масштабируемый экземпляр. Поэтому на следующем экране вам нужно выбрать "Система с одним узлом". 

![Выбор вертикально масштабируемой установки](./media/hana-installation/image21_single_host.PNG)

На следующем экране необходимо указать некоторые данные.

![Указание идентификатора SID SAP HANA](./media/hana-installation/image22_provide_sid.PNG)

> [!Important]
> В качестве системного идентификатора (SID) HANA необходимо указать тот же SID, который вы предоставили Майкрософт при заказе развертывания крупных экземпляров HANA. Выбор другого SID приведет к сбою установки из-за проблемы с разрешениями доступа на разных томах.

В качестве каталога установки используется каталог /hana/shared. На следующем шаге необходимо указать расположение для файлов данных HANA и файлов журнал HANA.


![Указание расположения журнала HANA](./media/hana-installation/image23_provide_log.PNG)

> [!Note]
> Следует определить расположение томов данных и томов файлов журнала, полученные уже с точками подключения, которые содержат SID, выбранный на экране ранее. Если SID не совпадает с введенным на экране ранее, измените SID на значение, которое имеется на точках подключения.

На следующем шаге проверьте имя узла и при необходимости измените его. 

![Проверка имени узла](./media/hana-installation/image24_review_host_name.PNG)

На следующем шаге необходимо получить данные, переданные в Майкрософт при заказе развертывания крупных экземпляров HANA. 

![Указание ИД пользователя и ИД группы](./media/hana-installation/image25_provide_guid.PNG)

> [!Important]
> Необходимо указать те же ИД пользователя и ИД группы, которые были переданы в Майкрософт при заказе развертывания. Если вы не предоставите именно те идентификаторы, установка SAP HANA на единице крупного экземпляра HANA завершится сбоем.

На следующих двух экранах, которые не показаны в этой документации, нужно ввести пароль для пользователя SYSTEM базы данных SAP HANA и пароль для пользователя sapadm, который используется для агента узла SAP, устанавливаемого в составе экземпляра базы данных SAP HANA.

После определения пароля отображается экран подтверждения. Проверьте все указанные данные и продолжите установку. Появится экран с отображением хода выполнения, как показано ниже.

![Проверка хода выполнения установки](./media/hana-installation/image27_show_progress.PNG)

После завершения установки вы увидите экран, аналогичный приведенному ниже.

![Установка завершена](./media/hana-installation/image28_install_finished.PNG)

На этом этапе экземпляр SAP HANA должен быть готов к использованию. Вы сможете подключиться к нему из SAP HANA Studio. Также убедитесь в наличии последних исправлений SAP HANA, и примените их.


**Дальнейшие действия**

- См. статью [Высокий уровень доступности и аварийное восстановление SAP HANA в Azure (крупные экземпляры)](hana-overview-high-availability-disaster-recovery.md).

