---
title: Конфигурации рабочих нагрузок SAP с использованием Зон доступности Azure | Документация Майкрософт
description: Архитектура с высоким уровнем доступности и сценарии для SAP NetWeaver с использованием Зон доступности Azure
services: virtual-machines-windows,virtual-network,storage
documentationcenter: saponazure
author: msjuergent
manager: patfilot
editor: ''
tags: azure-resource-manager
keywords: ''
ms.assetid: 887caaec-02ba-4711-bd4d-204a7d16b32b
ms.service: virtual-machines-windows
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: vm-windows
ms.workload: infrastructure-services
ms.date: 02/03/2019
ms.author: juergent
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: e319fb5bc1e0ed3354a09b685405656c7f3131bc
ms.sourcegitcommit: 90cec6cccf303ad4767a343ce00befba020a10f6
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/07/2019
ms.locfileid: "55858811"
---
# <a name="sap-workload-configurations-with-azure-availability-zones"></a>Конфигурации рабочих нагрузок SAP с использованием Зон доступности Azure

Одна из функций высокой доступности, предлагаемых Azure, — [Зоны доступности Azure](https://docs.microsoft.com/azure/availability-zones/az-overview). Использование зон доступности повышает общую доступность рабочих нагрузок SAP в Azure. Зоны доступности уже предлагаются в нескольких [регионах Azure](https://azure.microsoft.com/global-infrastructure/regions/). Количество таких регионов будет увеличиваться. 

Базовая архитектура SAP с высоким уровнем доступности выглядит примерно так, как на этом изображении.

![Стандартная конфигурация с высоким уровнем доступности](./media/sap-ha-availability-zones/standard-ha-config.png)

Прикладной уровень SAP развертывается в пределах одной [группы доступности](https://docs.microsoft.com/azure/virtual-machines/windows/manage-availability) Azure. Чтобы обеспечить высокую доступность центральных служб SAP, разверните две виртуальные машины в отдельных группах доступности. Используйте службы отказоустойчивого кластера Windows или Pacemaker (Linux) в качестве платформы высокой доступности с автоматической отработкой отказов в случае проблем с инфраструктурой или программным обеспечением. Ниже приведены документы с подробным описанием таких развертываний:

- [Кластеризация экземпляра SAP ASCS/SCS в отказоустойчивом кластере Windows с помощью общего диска кластера в Azure](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/sap-high-availability-guide-wsfc-shared-disk)
- [Кластеризация экземпляра SAP ASCS/SCS в отказоустойчивом кластере Windows с помощью файлового ресурса в Azure](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/sap-high-availability-guide-wsfc-file-share)
- [Руководство по обеспечению высокого уровня доступности виртуальных машин Azure для SAP NetWeaver на SUSE Linux Enterprise Server для приложений SAP](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/high-availability-guide-suse)
- [Обеспечение высокого уровня доступности SAP NetWeaver в виртуальных машинах Azure с Red Hat Enterprise Linux](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/high-availability-guide-rhel)

Аналогичная архитектура применяется и для уровня СУБД SAP NetWeaver, S/4HANA или систем Hybris. Чтобы обеспечить защиту от сбоя инфраструктуры или программного обеспечения, вы развернете уровень СУБД в режиме "активный — пассивный" с решением отказоустойчивого кластера. Решением отказоустойчивого кластера может быть платформа отработки отказа для конкретной СУБД, службы отказоустойчивого кластера Windows или Pacemaker. 

Чтобы развернуть аналогичную архитектуру на основе Зон доступности Azure, потребуется внести ряд изменений в описанную выше архитектуру. Эти изменения описаны в этом документе.

## <a name="considerations-deploying-across-availability-zones"></a>Рекомендации по развертыванию в Зонах доступности

При использовании Зон доступности есть несколько моментов, которые следует учесть.

- Зоны доступности Azure не гарантируют определенного расстояния между разными зонами в пределах региона Azure.
- Зоны доступности Azure не следует считать идеальным решением для аварийного восстановления. Грандиозное стихийное бедствие может причинить существенный ущерб нескольким регионам мира, в том числе инфраструктуре электропитания. В этом случае расстояние между зонами доступности может оказаться недостаточным для хорошего решения аварийного восстановления.
- Задержки в сети в зонах доступности различаются в разных регионах Azure. В некоторых случаях вы можете развернуть прикладной уровень SAP и выполнить его в разных зонах, так как задержка сети при обращении из разных зон к активной виртуальной машине СУБД остается в допустимых пределах и не затрудняет бизнес-процессы. Но в некоторых регионах Azure будет складываться такая ситуация, в которой задержка между активной виртуальной машиной СУБД и экземпляром приложением SAP, развернутыми в разных зонах, будет слишком значительной и неприемлемой для бизнес-процессов SAP. Это означает, что архитектуры развертывания для приложений в таких системах должны различаться: "активный — активный" или "активный — пассивный", если задержка сети между зонами слишком высока.
- Определите, в какой конфигурации можно использовать зоны доступности Azure, в зависимости от задержки в сети между различными зонами. Сетевая задержка играет важную роль в двух зонах:
    - Задержка между двумя экземплярами СУБД, между которыми нужно настроить синхронную репликацию. Чем выше сетевая задержка, тем выше вероятность ухудшения масштабируемости такой рабочей нагрузки.
    - Разница сетевой задержки между виртуальной машиной, выполняющей экземпляр диалога SAP в зоне, где расположен активный экземпляр СУБД, и аналогичной виртуальной машиной в другой зоне. Чем больше разница между ними, тем большее влияние они будут оказывать на время выполнения бизнес-процессов и пакетных заданий, в зависимости от того, находятся ли они в одной с СУБД зоне или в разных зонах.


При развертывании виртуальных машин Azure в зонах доступности или установке решений отработки отказа в одном регионе Azure есть некоторые ограничения. Эти ограничения описаны в приведенном ниже списке.

- Использование [управляемых дисков Azure](https://azure.microsoft.com/services/managed-disks/) является обязательным для развертывания в Зонах доступности Azure. 
- Сопоставление перечислений зон с физическими зонами фиксируется на уровне подписки Azure. Если вы используете разные подписки для развертывания систем SAP, для каждой подписки следует определить оптимальные зоны.
- Вы не можете развертывать группы доступности Azure в Зоне доступности Azure. В качестве платформы развертывания для виртуальных машин нужно выбрать Зону доступности или группу доступности Azure.
- Вы не можете использовать [Azure Load Balancer (цен. категория "Базовый")](https://docs.microsoft.com/azure/load-balancer/load-balancer-overview#skus) для создания отказоустойчивых кластерных решений, основанных на службах отказоустойчивого кластера Windows или Linux Pacemaker. Вместо этого необходимо использовать [номер SKU Load Balancer (цен. категория "Стандартный") Azure](https://docs.microsoft.com/azure/load-balancer/load-balancer-standard-availability-zones).



## <a name="ideal-availability-zones-combination"></a>Идеальное сочетание зон доступности
Прежде чем решить, как использовать зоны доступности, выполните исследование и соберите следующие данные.

- Сетевая задержка между тремя разными зонами в регионе Azure. Это позволит выбрать зоны с наименьшей сетевой задержкой для трафика между зонами.
- Разница задержек между виртуальными машинами в пределах выбранной зоны и сетевой задержки между двумя выбранными зонами.
- Доступность типов виртуальных машин, которые вы намерены развернуть в соответствующих двух зонах. Это особенно важно при использовании виртуальных машин серии M. Некоторые номера SKU виртуальных машин серии M доступны лишь в двух из трех зон.

### <a name="network-latency-between-zones-and-within-zone"></a>Сетевая задержка между зонами и в пределах зоны.
Чтобы узнать задержку между несколькими зонами, сделайте следующее:

- Разверните в каждой из трех зон виртуальную машину с тем номером SKU, который вы намерены использовать для экземпляра СУБД. Перед выполнением измерений убедитесь, что включено [ускорение работы в сети Azure](https://azure.microsoft.com/blog/maximize-your-vm-s-performance-with-accelerated-networking-now-generally-available-for-both-windows-and-linux/).
- Когда вы найдете две зоны с наименьшей сетевой задержкой, разверните во всех трех зонах доступности еще три виртуальные машины с тем номером SKU, который вы планируете использовать для прикладного уровня. Измерьте сетевую задержку для двух виртуальных машин СУБД в двух выбранных зонах для СУБД. 
- Для измерения задержки используйте **niping**. Это разработанное SAP средство, принципы работы которого описаны в примечаниях по поддержке SAP [#500235](https://launchpad.support.sap.com/#/notes/500235) и [#1100926](https://launchpad.support.sap.com/#/notes/1100926/E). Сосредоточьтесь на документированных командах SAP для измерений задержки. Мы не рекомендуем использовать **проверку связи**, так как **проверка связи** не работает с сетевыми путями, к которым применено ускорение работы в сети Azure.

По результатам этих измерений и с учетом доступности нужных номеров SKU виртуальных машин в зонах доступности вам следует принять следующие решения:

- Определите оптимальные зоны для уровня СУБД.
- Исходя из различий сетевой задержки в пределах зоны и между зонами, нужно ли распределить активный прикладной уровень SAP на одну, две или все три зоны.
- Определите, нужно ли развертывать конфигурацию "активный — пассивный" или "активный — активный" с точки зрения приложения (см. ниже).

При принятии этих решений учитывайте также рекомендации компании SAP по сетевым задержкам, которые описаны в примечании SAP [#1100926](https://launchpad.support.sap.com/#/notes/1100926/E).

### <a name="be-aware-of"></a>Обратите внимание на следующее.

> [!IMPORTANT]
> Все измерения и принятые решения применимы только для той подписки Azure, которую вы использовали для этих измерений. При использовании другой подписки Azure повторите все измерения, так как сопоставление перечисляемых зон может существенно отличаться в различных подписках Azure.


> [!IMPORTANT]
> Считается нормальным, что описанные выше измерения дадут разные результаты в каждом из регионов Azure, который поддерживает [зоны доступности](https://docs.microsoft.com/azure/availability-zones/az-overview). Даже если требования к сетевой задержке будут такими же, для разных регионов Azure могут подходить разные стратегии развертывания из-за различий в сетевых задержках между зонами. Это нормально, что в некоторых регионах Azure сетевая задержка между тремя разными зонами будет очень разной. В то же время в других регионах сетевая задержка между тремя разными зонами будет относительно стабильной. Утверждение о том, что сетевая задержки между зонами **всегда** составляет от 1 до 2 мс, **неверно**. Не существует общих правил, характеризующих сетевую задержку между зонами доступности в регионах Azure.


## <a name="activeactive-deployment"></a>Развертывание архитектуры "активный — активный"
Такая архитектура развертывания называется "активный — активный", так как подразумевает развертывание активных экземпляров диалогов SAP в двух или трех зонах. Центральные службы SAP, использующие службу постановки в очередь для репликации, будут развертываться между двумя зонами. Это же справедливо и для уровня СУБД, который будет развертываться в тех же зонах, что и центральная служба SAP.

Эту конфигурацию есть смысл рассматривать, если вам удастся найти в нужном регионе две зоны доступности, сетевая задержка между которыми приемлема для используемой рабочей нагрузки и для синхронной репликации СУБД. Кроме того, разница между сетевыми задержками в пределах выбранной зоны и между разными зонами не должна быть слишком большой. Это второе требование связано с тем, что вам не нужны слишком большие различия во времени выполнения бизнес-процессов или пакетных заданий, которые запущены в одной зоне с сервером СУБД или в разных зонах. Небольшие колебания допустимы, но не системные различия.

Упрощенная схема развертывания "активный — активный" между двумя зонами может выглядеть примерно так:

![active_active_zone_deployment](./media/sap-ha-availability-zones/active_active_zones_deployment.png)

Для этой конфигурации следует принимать во внимание следующие соображения.

- Зоны доступности Azure следует воспринимать как домены сбоя и обновления для всех виртуальных машин, так как в зонах доступности Azure нельзя развернуть группы доступности.
- Подсистемы балансировки нагрузки Azure, которые вы используете для отказоустойчивых кластеров центральных служб SAP и для уровня СУБД, должны иметь [номер SKU уровня "Стандартный"](https://docs.microsoft.com/azure/load-balancer/load-balancer-standard-availability-zones). Подсистема балансировки нагрузки уровня "Базовый" не будет работать между зонами.
- Виртуальная сеть Azure и все подсети, развернутые для размещения системы SAP, распределяются по нескольким зонам. **Нет необходимости** выделять виртуальные сети для каждой зоны.
- Для всех развернутых виртуальных машин используйте [управляемые диски Azure](https://azure.microsoft.com/services/managed-disks/). Неуправляемые диски не поддерживаются для зональных развертываний.
- Хранилище Azure класса Premium или [хранилище SSD (ценовой категории "Ультра")](https://docs.microsoft.com/azure/virtual-machines/windows/disks-ultra-ssd) не поддерживают репликацию хранилища между зонами. Это означает, что приложение (СУБД или Центральные службы SAP) должно самостоятельно реплицировать важные данные.
- Это относится и к общей папке sapmnt, которая содержит общий диск (для Windows), общую папку CIFS (для Windows) или общую папку NFS (Linux). Вам нужна технология, которая позволяет реплицировать такой общий диск или общую папку в нескольких зонах. Сейчас поддерживаются следующие технологии:
    - Для Windows между зонами можно применить кластерное решение на основе SIOS Datakeeper, которое описано в статье [Кластеризация экземпляра SAP ASCS/SCS в отказоустойчивом кластере Windows с помощью общего диска кластера в Azure](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/sap-high-availability-guide-wsfc-shared-disk).
    - Для SUSE Linux поддерживается общая папка NFS, созданная по инструкциям из статьи [Обеспечение высокого уровня доступности NFS на виртуальных машинах Azure в SUSE Linux Enterprise Server](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/high-availability-guide-suse-nfs).
    - В настоящее время решение на основе масштабируемых файловых служб (SOFS) Windows, которое описано в статье [Подготовка высокодоступной инфраструктуры Azure для SAP с помощью отказоустойчивого кластера Windows и файлового ресурса для экземпляров SAP ASCS/SCS](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/sap-high-availability-infrastructure-wsfc-file-share), **не поддерживается для работы между зонами**.
- Третья зона используется для размещения устройства SBD, если вы создаете [кластер Pacemaker в SUSE Linux](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/high-availability-guide-suse-pacemaker#create-azure-fence-agent-stonith-device) или дополнительные экземпляры приложения.
- Чтобы добиться стабильного времени выполнения для критически важных бизнес-процессов, вы можете направить конкретные пакетные задания или определенных пользователей к экземплярам приложений, которые находятся в одной зоне с активным экземпляром СУБД, используя группы серверов пакетной службы SAP, группы входа или группы RFC. Но в случае зональной отработки отказа вам придется вручную перемещать эти группы в экземпляры, выполняемые на виртуальных машинах в одной зоне с виртуальной машиной базы данных.  
- Решите, нужно ли развертывать неактивные экземпляры диалога во всех зонах, чтобы немедленно получить прежние объемы ресурсов, если зона, в которой вы развернули экземпляры приложения, вышла из строя.


## <a name="activepassive-deployment"></a>Развертывание архитектуры "активный — пассивный"
Если вы не сможете найти сочетание зон с приемлемой разницей сетевых задержек внутри одной зоны и между зонами, попробуйте развернуть архитектуру "активный — пассивный" с точки зрения прикладного уровня SAP. Здесь вы определяете "активную" зону, в которой будет развернут весь прикладной уровень и будут выполняться активный экземпляр СУБД и экземпляр центральных служб SAP. Такая конфигурация позволяет гарантировать, что различия во времени выполнения бизнес-транзакций и пакетных заданий не будут критически большими в зависимости от того, выполняется ли задание в зоне с активным экземпляром СУБД или в другой зоне.

Базовая схема такой архитектуры выглядит следующим образом.

![active_active_zone_deployment](./media/sap-ha-availability-zones/active_active_zones_deployment.png)

Для этой конфигурации следует принимать во внимание следующие соображения.

- Группы доступности невозможно развернуть в Зонах доступности Azure. В нашем примере это означает, что для прикладного уровня существует только один домен обновления и домен сбоя. Это связано с тем, что развертывание выполняется в одной зоне. Такая конфигурация незначительно хуже, чем эталонная архитектура с развертыванием прикладного уровня в группе доступности Azure.
- Применяя такую архитектуру, вам придется внимательно отслеживать состояние и стараться удерживать активные экземпляры службы СУБД и центральных служб SAP в той же зоне, где развернут прикладной уровень. При отработке отказа экземпляра центральной службы SAP или СУБД вам важно как можно раньше вручную выполнить восстановление размещения в ту зону, где развернут прикладной уровень SAP.
- Подсистемы балансировки нагрузки Azure, которые вы используете для отказоустойчивых кластеров центральных служб SAP и для уровня СУБД, должны иметь [номер SKU уровня "Стандартный"](https://docs.microsoft.com/azure/load-balancer/load-balancer-standard-availability-zones). Подсистема балансировки нагрузки уровня "Базовый" не будет работать между зонами.
- Виртуальная сеть Azure и все подсети, развернутые для размещения системы SAP, распределяются по нескольким зонам. **Нет необходимости** выделять виртуальные сети для каждой зоны.
- Для всех развернутых виртуальных машин необходимо использовать [управляемые диски Azure](https://azure.microsoft.com/services/managed-disks/). Неуправляемые диски не поддерживаются для зональных развертываний.
- Хранилище Azure класса Premium или [хранилище SSD (ценовой категории "Ультра")](https://docs.microsoft.com/azure/virtual-machines/windows/disks-ultra-ssd) не поддерживают репликацию хранилища между зонами. Это означает, что приложение (СУБД или Центральные службы SAP) должно самостоятельно реплицировать важные данные.
- Это относится и к общей папке sapmnt, которая содержит общий диск (для Windows), общую папку CIFS (для Windows) или общую папку NFS (Linux). Вам нужна технология, которая позволяет реплицировать такой общий диск или общую папку в нескольких зонах. Сейчас поддерживаются следующие технологии:
    - Для Windows между зонами можно применить кластерное решение на основе SIOS Datakeeper, которое описано в статье [Кластеризация экземпляра SAP ASCS/SCS в отказоустойчивом кластере Windows с помощью общего диска кластера в Azure](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/sap-high-availability-guide-wsfc-shared-disk).
    - Для SUSE Linux поддерживается общая папка NFS, созданная по инструкциям из статьи [Обеспечение высокого уровня доступности NFS на виртуальных машинах Azure в SUSE Linux Enterprise Server](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/high-availability-guide-suse-nfs).
    - В настоящее время решение на основе масштабируемых файловых служб (SOFS) Windows, которое описано в статье [Подготовка высокодоступной инфраструктуры Azure для SAP с помощью отказоустойчивого кластера Windows и файлового ресурса для экземпляров SAP ASCS/SCS](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/sap-high-availability-infrastructure-wsfc-file-share), **не поддерживается для работы между зонами**.
- Третья зона используется для размещения устройства SBD, если вы создаете [кластер Pacemaker в SUSE Linux](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/high-availability-guide-suse-pacemaker#create-azure-fence-agent-stonith-device) или дополнительные экземпляры приложения.
- Разверните неактивные виртуальные машины в пассивной зоне (с точки зрения СУБД), чтобы иметь возможность запустить ресурсы приложения в случае сбоя зоны.
    - Вы не можете использовать [Azure Site Recovery](https://azure.microsoft.com/services/site-recovery/) для репликации активных виртуальных машин на неактивные виртуальные машины в другой зоне. Сейчас Azure Site Recovery не работает в такой конфигурации.
- Создайте средства автоматизации, которые позволят автоматически запускать прикладной уровень SAP во второй зоне в случае сбоя зоны.

## <a name="combined-high-availability-and-disaster-recovery-configuration"></a>Сочетание конфигураций высокого уровня доступности и аварийного восстановления
Корпорация Майкрософт не предоставляет сведений о географическом расстоянии между элементами инфраструктуры, на которых размещаются разные зоны доступности Azure в определенном регионе Azure. Несмотря на этот факт, некоторые клиенты успешно применяют зоны для создания конфигураций, поддерживающих одновременно высокий уровень доступности и аварийное восстановление с нулевым значением **ц**елевой **т**очки **в**осстановления. Это означает, что вы не потеряете зафиксированные в базе данных транзакции даже при необходимости аварийного восстановления. 

> [!NOTE]
> Мы рекомендуем применять такие конфигурации только в особых обстоятельствах. Например, если недопустимо перемещение данных за пределы региона Azure из-за требований безопасности и соответствия. 

На следующем изображении представлен пример такой конфигурации.

![combined_ha_dr_in_zones](./media/sap-ha-availability-zones/combined_ha_dr_in_zones.png)

Для этой конфигурации следует принимать во внимание следующие соображения.

- Вы вынуждены предполагать, что элементы инфраструктуры, на которых размещается зона доступности, далеко расположены друг от друга, или не имеете возможности выйти за пределы определенного региона Azure. Группы доступности невозможно развернуть в Зонах доступности Azure. В нашем примере это означает, что для прикладного уровня существует только один домен обновления и домен сбоя. Это связано с тем, что развертывание выполняется в одной зоне. Этот вариант незначительно хуже, чем эталонная архитектура с развертыванием прикладного уровня в группе доступности Azure.
- Применяя такую архитектуру, вам придется внимательно отслеживать состояние и стараться удерживать активные экземпляры службы СУБД и центральных служб SAP в той же зоне, где развернут прикладной уровень. При отработке отказа экземпляра центральной службы SAP или СУБД вам важно как можно раньше вручную выполнить восстановление размещения в ту зону, где развернут прикладной уровень SAP.
- У вас есть рабочие экземпляры приложения, предварительно установленные на виртуальных машинах, на которых выполняются активные экземпляры приложения для контроля качества.
- В случае зонального сбоя вам нужно завершить работу экземпляров приложения для контроля качества и вместо них запустить рабочие экземпляры. Имейте в виду, что в этом варианте нужно использовать для экземпляров приложения виртуальные имена.
- Подсистемы балансировки нагрузки Azure, которые вы используете для отказоустойчивых кластеров центральных служб SAP и для уровня СУБД, должны иметь [номер SKU уровня "Стандартный"](https://docs.microsoft.com/azure/load-balancer/load-balancer-standard-availability-zones). Подсистема балансировки нагрузки уровня "Базовый" не будет работать между зонами.
- Виртуальная сеть Azure и все подсети, развернутые для размещения системы SAP, распределяются по нескольким зонам. **Нет необходимости** выделять виртуальные сети для каждой зоны.
- Для всех развернутых виртуальных машин необходимо использовать [управляемые диски Azure](https://azure.microsoft.com/services/managed-disks/). Неуправляемые диски не поддерживаются для зональных развертываний.
- Хранилище Azure класса Premium или [хранилище SSD (ценовой категории "Ультра")](https://docs.microsoft.com/azure/virtual-machines/windows/disks-ultra-ssd) не поддерживают репликацию хранилища между зонами. Это означает, что приложение (СУБД или Центральные службы SAP) должно самостоятельно реплицировать важные данные.
- Это относится и к общей папке sapmnt, которая содержит общий диск (для Windows), общую папку CIFS (для Windows) или общую папку NFS (Linux). Вам нужна технология, которая позволяет реплицировать такой общий диск или общую папку в нескольких зонах. Сейчас поддерживаются следующие технологии:
    - Для Windows между зонами можно применить кластерное решение на основе SIOS Datakeeper, которое описано в статье [Кластеризация экземпляра SAP ASCS/SCS в отказоустойчивом кластере Windows с помощью общего диска кластера в Azure](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/sap-high-availability-guide-wsfc-shared-disk).
    - Для SUSE Linux поддерживается общая папка NFS, созданная по инструкциям из статьи [Обеспечение высокого уровня доступности NFS на виртуальных машинах Azure в SUSE Linux Enterprise Server](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/high-availability-guide-suse-nfs).
    - Сейчас решение на основе масштабируемых файловых служб (SOFS) Windows, которое описано в статье [Подготовка высокодоступной инфраструктуры Azure для SAP с помощью отказоустойчивого кластера Windows и файлового ресурса для экземпляров SAP ASCS/SCS](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/sap-high-availability-infrastructure-wsfc-file-share), **не поддерживается для работы между зонами**.
- Третья зона используется для размещения устройства SBD, если вы создаете [кластер Pacemaker в SUSE Linux](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/high-availability-guide-suse-pacemaker#create-azure-fence-agent-stonith-device) или дополнительные экземпляры приложения.





## <a name="next-steps"></a>Дальнейшие действия
Изучите дальнейшие действия по развертыванию в нескольких зонах доступности Azure.

- [Кластеризация экземпляра SAP ASCS/SCS в отказоустойчивом кластере Windows с помощью общего диска кластера в Azure](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/sap-high-availability-guide-wsfc-shared-disk).
- [Подготовка высокодоступной инфраструктуры Azure для SAP с помощью отказоустойчивого кластера Windows и файлового ресурса для экземпляров SAP ASCS/SCS](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/sap-high-availability-infrastructure-wsfc-file-share).






