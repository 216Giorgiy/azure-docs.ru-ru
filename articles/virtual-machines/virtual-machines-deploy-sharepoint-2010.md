<properties
	pageTitle="Развертывание SharePoint 2010 на виртуальных машинах Azure"
	description="Описание поддерживаемых сценариев использования SharePoint 2010 на виртуальных машинах Azure."
	services="virtual-machines"
	documentationCenter=""
	authors="JoeDavies-MSFT"
	manager="timlt"
	editor=""/>

<tags
	ms.service="virtual-machines"
	ms.workload="infrastructure-services"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="05/28/2015"
	ms.author="josephd"/>


# Развертывание SharePoint 2010 на виртуальных машинах Azure

Microsoft SharePoint Server 2010 обеспечивает большую гибкость развертывания, что помогает организациям определить правильные сценарии развертывания в соответствии с их бизнес-потребностями и целями. Виртуальные машины Azure, размещенные и управляемые в облаке, предоставляют полную, надежную и доступную инфраструктуру для поддержки различных рабочих нагрузок, связанных с приложениями по требованию и базами данных, например развертываниями Microsoft SQL Server и SharePoint.

Несмотря на то что виртуальные машины Azure поддерживают несколько рабочих нагрузок, в данной статье основное внимание уделено развертываниям SharePoint. Виртуальные машины Azure позволяют организациям создавать инфраструктуру SharePoint и управлять этой инфраструктурой с помощью универсальных возможностей быстрой подготовки и доступа практически к любому узлу. Они обеспечивают полный доступ и управление процессорами, ОЗУ, диапазонами ЦП и другими ресурсами виртуальных машин SharePoint.

Виртуальные машины Azure снижают потребность в оборудовании, благодаря чему организации вместо решения вопросов, связанных с затратностью и сложностью проекта, могут переключить внимание на создание инфраструктуры нужного масштаба и управление этой инфраструктурой. Это означает, что они могут внедрять новые возможности, экспериментировать и завершать этапы проекта за считанные часы вместо дней и недель в традиционных развертываниях.

> [AZURE.NOTE]Сведения о развертывании SharePoint 2013 в Azure см. в статье [Планирование для SharePoint 2013 в службах инфраструктуры Azure](https://msdn.microsoft.com/library/dn275958.aspx) и в разделе [Фермы SharePoint, размещенные в службах инфраструктуры Azure](virtual-machines-sharepoint-infrastructure-services.md).

## SharePoint на виртуальных машинах Azure

Гибкость SharePoint 2010 позволяет поддерживать большинство рабочих нагрузок в развертывании виртуальных машин Azure. Виртуальные машины Azure оптимально подходят для сценариев FIS (SharePoint Server для интернет-сайтов) и разработки. Аналогичным образом поддерживаются основные рабочие нагрузки SharePoint. Если организация хочет самостоятельно управлять своей реализацией SharePoint 2010 и контролировать ее, одновременно пользуясь преимуществами виртуализации в облаке, виртуальные машины Azure оптимально подходят для такого развертывания.

Виртуальные машины Azure размещаются и управляются в облаке. Они обеспечивают гибкость развертывания и сокращают затраты путем снижения капитальных расходов, связанных с закупкой оборудования. Благодаря повышенной гибкости инфраструктуры организации получили возможность развернуть сервер SharePoint Server за считанные часы вместо нескольких дней или недель. Виртуальные машины Azure также позволяют организациям развертывать рабочие нагрузки SharePoint в облаке, используя модель «оплата по мере использования». По мере роста рабочих нагрузок SharePoint организация может быстро расширять инфраструктуру. Если же потребности в вычислительных мощностях уменьшатся, она сможет вернуть ставшие ненужными ресурсы и платить только за то, что действительно необходимо.

### Сдвиг в фокусе ИТ

Многие организации передают на стороннее обслуживание общие компоненты ИТ-инфраструктуры и управления, такие как оборудование, операционные системы, безопасность, хранилище данных и резервное копирование, сохраняя за собой контроль над критически важными приложениями, например SharePoint Server. Делегируя виртуальному поставщику все слои обслуживания своих ИТ-платформ, которые не являются критически важными для деятельности, организации получают возможность сместить фокус ИТ-функции на основные важнейшие службы SharePoint и заняться созданием дополнительной ценности для бизнеса при помощи проектов SharePoint вместо длительной дополнительной настройки инфраструктуры.

### Более быстрое развертывание

Поддержка и развертывание большой инфраструктуры SharePoint способна снизить возможности ИТ быстро реагировать на изменение потребностей бизнеса. Сборка, тестирование и подготовка ферм и серверов SharePoint, а также их развертывание в рабочей среде могут занять недели и даже месяцы, в зависимости от процессов и ограничений организации. Виртуальные машины Azure позволяют организациям быстро развертывать свои рабочие нагрузки SharePoint без капитальных затрат на оборудование. Благодаря этому организации могут с выгодой использовать гибкость инфраструктуры для выполнения развертывания за несколько часов вместо дней или недель.

### Масштабируемость

Без необходимости развертывать, тестировать и подготавливать физические серверы и фермы SharePoint организации могут привлекать вычислительные мощности по требованию в кратчайшие сроки. По мере роста требований рабочей нагрузки SharePoint организация может быстро развернуть свою инфраструктуру в облаке. Аналогичным образом, при снижении потребностей в вычислительных мощностях организации могут уменьшить ресурсы, оплачивая только используемые. Виртуальные машины Azure позволяют сократить первоначальные затраты и долгосрочные обязательства, что дает организациям возможность создавать инфраструктуру SharePoint в требуемом масштабе и управлять ей. Снова повторим — это означает, что таки организации могут внедрять новые возможности, экспериментировать и завершать этапы за считанные часы вместо дней и недель в традиционных развертываниях.

### Измерение эффективности использования

Виртуальные машины Azure обеспечивают вычислительные мощности, память и хранилище для сценариев SharePoint, при этом стоимость обычно основана на потреблении ресурсов. Организации платят только за то, что используются, услуга предоставляет все мощности, необходимые для выполнения инфраструктуры SharePoint. Дополнительные сведения о ценах и выставлении счетов см. в разделе [Сведения о стоимости Azure](http://azure.microsoft.com/pricing/). Обратите внимание, что есть номинальные расходы на хранение и перемещение данных в облако Azure из локальной сети. Тем не менее, в Azure не взимается плата за передачу данных.

### Гибкость

Виртуальные машины Azure предоставляют разработчикам возможность выбрать предпочитаемый язык и среду выполнения благодаря официальной поддержке .NET, Node.js, Java и PHP. Разработчики также могут выбрать свои средства с поддержкой Microsoft Visual Studio, WebMatrix, Eclipse и текстовых редакторов. Кроме того, корпорация Майкрософт предоставляет недорогой, с низким уровнем риска способ перехода в облако, а также экономичные и удобные способы подготовки и развертывания средств отчетности в облаке, предоставляя доступ к бизнес-аналитике (BI) на различных устройствах и в разных местоположениях. Наконец, при помощи Azure пользователи могут не только переместить виртуальные жесткие диски в облако, но и скопировать такие диски обратно и запустить их локально либо у другого поставщика облачных служб при наличии соответствующей лицензии.

## Процесс подготовки

Доступная в Azure библиотека образов предоставляет список доступных предварительно настроенных виртуальных машин. Пользователи могут публиковать в этой библиотеке образов SharePoint Server, SQL Server, Windows Server и другие ISO-образы либо виртуальные жесткие диски. Для упрощения создания виртуальных машин в библиотеке опубликованы базовые образы. Имеющие нужные полномочия пользователи могут использовать эти образы для создания нужной виртуальной машины. Дополнительные сведения см. в разделе [Создание виртуальной машины под управлением ОС Windows на портале предварительной версии Azure](virtual-machines-windows-tutorial.md). На рис. 1 показаны основные действия по созданию виртуальной машины с помощью портала управления Azure.

**Рис. 1. Действия по созданию виртуальной машины**

![azure-sharepoint-wp-2](./media/virtual-machines-deploy-sharepoint-2010/azure-sharepoint-wp-2.png)

Кроме того, пользователи могут передать образ «sysprepped» на портал управления Azure. Дополнительные сведения см. в разделе [Создание и отправка виртуального жесткого диска Windows Server в Azure](virtual-machines-create-upload-vhd-windows-server.md). На рис. 2 показаны основные действия по отправке образа для создания виртуальной машины.

**Рис. 2. Действия по отправке образа**

![azure-sharepoint-wp-3](./media/virtual-machines-deploy-sharepoint-2010/azure-sharepoint-wp-3.png)

## Развертывание SharePoint 2010 в Azure 

Вот как вы можете развернуть SharePoint 2010 в Azure:

1. Войдите на [портал управления Azure](http://manage.windowsazure.com/), используя учетную запись и подписку Azure. Если у вас нет учетной записи Azure, [зарегистрируйтесь для получения бесплатной пробной версии Azure](http://azure.microsoft.com/pricing/free-trial/).
2. Чтобы создать виртуальную машину с базовой операционной системой, на портале управления Azure последовательно выберите пункты **Создать, Среда выполнения приложений, Виртуальная машина, Из коллекции**.
3. Откроется диалоговое окно **Выбор образа**. Щелкните образ платформы **Windows Server 2008 R2 SP1** и нажмите стрелку вправо.
4. Откроется диалоговое окно **Конфигурация виртуальной машины**. Введите следующие сведения:
	- Введите **имя виртуальной машины**.
	- Выберите необходимый размер. Для рабочей среды (сервер приложений и база данных SharePoint) рекомендуется выбрать размер A3 (4 ядра, 7 ГБ памяти) или больше.
	- В поле **Имя нового пользователя** введите имя учетной записи локального администратора.
	- В поле **Новый пароль** введите надежный пароль.
	- В поле **Подтвердить** введите пароль еще раз, а потом щелкните стрелку вправо.
5. Откроется второе диалоговое окно **Конфигурация виртуальной машины**. Введите следующие сведения:
	- В разделе **Облачная служба** выберите команду **Создать облачную службу**. В этом случае необходимо также указать DNS-имя облачной службы или выбрать существующую облачную службу.
	- В поле **Регион, территориальная группа, виртуальная сеть** выберите регион, где будет размещен этот виртуальный образ.
	- В поле **Учетная запись хранения** выберите значение **Использовать автоматически созданную учетную запись хранения** или выберите имя существующей учетной записи хранения. Автоматически будет создана только одна учетная запись хранения для одного региона. Все остальные виртуальные машины, созданные с этим параметром, расположены под этой учетной записью хранения. Вы можете иметь не более 20 учетных записей хранения. Дополнительную информацию см. в разделе [Создание учетной записи хранения в Azure](virtual-machines-create-upload-vhd-windows-server.md#step-2-create-a-storage-account-in-azure).
	- В поле **Группа доступности** выберите значение **(нет)** и нажмите стрелку вправо.
6. В третьем диалоговом окне **Конфигурация виртуальной машины** установите флажок для создания виртуальной машины.

Сведения о том, как подключиться к виртуальной машине, см. в разделе [Вход в виртуальную машину под управлением Windows Server](virtual-machines-log-on-windows-server.md).

Создайте виртуальную машину сервера SQL Server с помощью любого из следующих параметров:

- Создайте виртуальную машину SQL Server 2012, выполнив вышеуказанные шаги 1-7, только на шаге 3 вместо образа Windows Server 2008 R2 с пакетом обновления 1 следует воспользоваться образом SQL Server 2012. Дополнительную информацию см. в разделе [Подготовка виртуальной машины Server SQL в Azure](virtual-machines-provision-sql-server.md).
	- При выборе этого параметра процесс подготовки хранит копию файлов настройки SQL Server 2012 в каталоге C:\SQLServer_11.0_Full, что позволяет настроить установку. Например, можно преобразовать пробную установку SQL Server 2012 в лицензированную версию с использованием лицензионного ключа.

- Чтобы установить SQL Server на виртуальной машине с базовой операционной системой, воспользуйтесь средством подготовки системы для SQL Server (SysPrep), как показано выше в шагах 1-7. Дополнительную информацию см. в разделе [Установка SQL Server 2012 с помощью SysPrep](http://msdn.microsoft.com/library/ee210664.aspx).

- Установите SQL Server с помощью командной строки. Дополнительную информацию см. в разделе [Установка SQL Server 2012 из командной строки](http://msdn.microsoft.com/library/ms144259.aspx#SysPrep).

- Чтобы установить SQL Server на виртуальной машине с базовой операционной системой, воспользуйтесь поддерживаемым носителем SQL Server и лицензионным ключом, как показано выше в шагах 1-7.

Создайте ферму SharePoint, выполнив указанные ниже действия.

Шаг 1. настройка подписки Azure с помощью файлов сценариев.

Шаг 2. Подготовка серверов SharePoint путем создания другой виртуальной машины с базовой операционной системой (как показано выше в шагах 1-6). Чтобы создать сервер SharePoint на этой виртуальной машине, выберите один из следующих параметров:

- Подготовка с помощью графического интерфейса пользователя SharePoint:
	- Информацию о создании и подготовке фермы SharePoint см. в разделе [Создание фермы серверов Microsoft SharePoint](http://technet.microsoft.com/library/ee805948.aspx#CreateConfigure).
	- Сведения о том, как добавить веб-сервер или сервер приложений в ферму, см. в разделе [Добавление веб-серверов или серверов приложений в ферму](http://technet.microsoft.com/library/cc261752.aspx).
	- Информацию о добавлении сервера базы данных к существующей ферме см. в разделе [Добавление сервера базы данных к существующей ферме](http://technet.microsoft.com/library/cc262781).
	- Чтобы использовать SQL Server 2012 для своей фермы SharePoint, необходимо скачать и установить пакет обновления 1 для SharePoint Server 2010 после установки приложения и отказа от настройки сервера. Дополнительную информацию см. в разделе [Пакет обновления 1 для SharePoint Server 2010](http://www.microsoft.com/download/details.aspx?id=26623).
	- Чтобы воспользоваться преимуществами функций бизнес-аналитики SQL Server, рекомендуем вам установить сервер SharePoint как ферму серверов, а не отдельный сервер. Дополнительную информацию см. в разделе [Установка компонентов бизнес-аналитики SQL Server 2012](http://technet.microsoft.com/library/hh231681.aspx).

- Подготовка с помощью Microsoft Windows PowerShell: можно использовать средство командной строки Psconfig как альтернативный интерфейс для выполнения нескольких операций, которые управляют ходом подготовки продуктов SharePoint 2010. Дополнительную информацию см. в [справочнике по программе командной строки Psconfig](http://technet.microsoft.com/library/cc263093.aspx).

Шаг 3. настройка SharePoint. Когда все виртуальные машины SharePoint находятся в состоянии готовности, настройте SharePoint Server на каждом из серверов, воспользовавшись одним из следующих вариантов:

- Настройка SharePoint из графического интерфейса пользователя.
- Настройка SharePoint с помощью Windows PowerShell. Дополнительные сведения см. в разделе [Установка SharePoint Server 2010 с помощью Windows PowerShell](http://technet.microsoft.com/library/cc262839.aspx).
- Также вы можете использовать инструмент AutoSPInstaller из CodePlex Project, состоящий из сценариев Windows PowerShell, входного XML-файла и стандартного пакетного файла Microsoft Windows. AutoSPInstaller предоставляет платформу для скрипта установки SharePoint 2010 на основе Windows PowerShell. Дополнительные сведения см. на веб-странице [CodePlex: AutoSPInstaller](http://autospinstaller.codeplex.com/).

Шаг 4. После завершения работы сценария подключитесь к виртуальной машине с помощью панели мониторинга виртуальной машины.

Чтобы проверить конфигурацию SharePoint, войдите на сервер SharePoint, а затем перейдите в центр администрирования.

> [AZURE.NOTE]Убедитесь, что в конечной точке портала управления настроена безопасность, а также задан входящий порт в брандмауэре Windows виртуальной машины. Затем убедитесь, что можно начать удаленный сеанс Windows PowerShell на одном из серверов приложений SharePoint. Для этого откройте сеанс Windows PowerShell с учетными данными администратора.

### Создание и загрузка виртуального жесткого диска

Вы также можете создать свои собственные образы и передать их в Azure как VHD-файл. Дополнительные сведения см. в разделе [Создание и отправка виртуального жесткого диска Windows Server в Azure](virtual-machines-create-upload-vhd-windows-server.md).

## Сценарии использования

В этом разделе рассматриваются некоторые наиболее распространенные сценарии работы пользователей с развертываниями SharePoint с использованием виртуальных машин Azure.

### Сценарий 1. Простая среда разработки и тестирования SharePoint

Организации находятся в поиске более гибких способов создания приложений SharePoint и настройки сред SharePoint для разработки и тестирования в локальном или удаленном режиме. По существу, они хотят сократить время, необходимое для настройки проектов разработки приложений SharePoint, а также снизить затраты путем повышения эффективности своих тестовых сред. Например, организации может потребоваться выполнить нагрузочное тестирование по требованию на сервере SharePoint Server, а также пользовательское приемочное тестирование (UAT) на большем количестве одновременно работающих пользователей в разных географических точках. Аналогичным образом, интеграция собственных и внешних команд становится все более насущной потребностью во многих современных организациях.

Данный сценарий поясняет, как организации могут использовать заранее настроенные фермы SharePoint для разработки и тестирования нагрузки. Топология развертывания SharePoint выглядит и работает точно так же, как в виртуализованном локальном развертывании. Существующие ИТ-навыки полностью подходят для развертывания виртуальных машин Azure. Основное преимущество заключается в том, что затраты практически полностью преобразуются из капитальных в операционные: заблаговременное приобретение физических серверов не требуется. Организации могут избежать капитальных затрат для серверного оборудования и обрести гибкость благодаря существенному сокращению времени подготовки, требуемой для создания, настройки или расширения фермы SharePoint для среды тестирования и разработки. ИТ-отдел может динамически добавлять и удалять мощности для поддержки изменяющихся потребностей в тестировании и разработке. В дополнение к этому ИТ-отдел может сосредоточиться на обеспечении эффективности бизнеса с проектами SharePoint вместо затрат ресурсов на управление инфраструктурой.

Для полного использования машин нагрузочного тестирования организации могут настроить виртуализованные машины тестирования и разработки SharePoint в Azure с поддержкой операционной системы Windows Server 2008 R2. Это позволяет группам разработчиков создавать и тестировать приложения, а также с легкостью переключаться между рабочими средами на предприятии и в облаке без изменения кода. Платформы и наборы инструментов можно использовать как локально, так и в облаке, что обеспечивает доступ распределенной команды к единой среде. Пользователи также могут обращаться к локальным данным и приложениям путем установки прямого VPN-подключения.

На рис. 3 показана среда разработки и тестирования SharePoint на виртуальной машине Azure. Для построения этого развертывания можно начать с локальной среды развертывания и тестирования SharePoint, которое использовалось для разработки приложений. Затем передайте и разверните приложения на виртуальной машине Azure для тестирования и разработки. Если организация решит переместить приложение обратно в локальное расположение, она сможет сделать это без изменения приложения.

**Рис. 3. Среда разработки и тестирования SharePoint на виртуальных машинах Azure**

![azure-sharepoint-wp-11](./media/virtual-machines-deploy-sharepoint-2010/azure-sharepoint-wp-11.png)

Вот как можно реализовать среду разработки и тестирования SharePoint в Azure:

1. Подготовка к работе. В первую очередь подготовьте VPN-подключение между локальной средой и Azure с помощью виртуальной сети Azure. (Поскольку здесь не используется Active Directory, требуется VPN-туннель). Дополнительные сведения см. в статье [Общие сведения о виртуальных сетях](http://msdn.microsoft.com/library/jj156007.aspx). Затем с помощью портала управления требуется подготовить новую виртуальную машину с использованием готового образа из библиотеки образов.
	- Для создания нужной среды вы можете передать виртуальные машины разработки и тестирования SharePoint в свою учетную запись хранения Azure и указать эти виртуальные машины через библиотеку образов.
	- Вместо образа Windows Server 2008 R2 с пакетом обновления 1 можно воспользоваться образом SQL Server 2012. Дополнительную информацию см. в разделе [Подготовка виртуальной машины Server SQL в Azure](virtual-machines-provision-sql-server.md).

2. Установка. Установите на виртуальных машинах сервер SharePoint Server, Visual Studio и SQL Server с помощью подключения удаленного рабочего стола.
	- для создания компьютера разработчика SharePoint воспользуйтесь сценарием простой настройки SharePoint 2010. Дополнительную информацию см. в статье [Сценарий простой настройки SharePoint 2010](http://www.microsoft.com/download/details.aspx?id=23415). Воспользуйтесь Windows PowerShell. Дополнительные сведения см. в разделе [Установка SharePoint Server 2010 с помощью Windows PowerShell](http://technet.microsoft.com/library/cc262839.aspx). Воспользуйтесь инструментом AutoSPInstaller из CodePlex Project. Дополнительные сведения см. на веб-странице [CodePlex: AutoSPInstaller](http://autospinstaller.codeplex.com/).
	- Установите Visual Studio. Дополнительную информацию см. в статье [Установка Visual Studio](http://msdn.microsoft.com/library/e2h7fzkw.aspx).
	- Установите SQL Server. Дополнительные сведения см. в статье [Установка SQL Server с помощью SysPrep](http://msdn.microsoft.com/library/ee210664.aspx).
3. Разработка пакетов и сценариев развертывания для приложений и баз данных. Если планируется использовать доступную виртуальную машину из библиотеки образов, требуемые локальные приложения и базы данных можно развернуть на виртуальных машинах Microsoft Azure.
	- Создайте пакеты развертывания для существующих локальных приложений и баз данных с помощью средств работы с данными SQL Server и Visual Studio.
	- С использованием этих пакетов разверните приложения и базы данных на виртуальных машинах Azure.
4. Развертывание приложений SharePoint и баз данных.
	- Настройте систему безопасности в конечной точке портала управления и установите порт входящего трафика в брандмауэре Windows виртуальной машины.
	- Разверните приложения и базы данных SharePoint на виртуальных машинах Azure с использованием пакетов и сценариев развертывания, созданных в действии 3.
- Протестируйте развернутые приложения и базы данных.
5. Управление виртуальными машинами:
	- Отслеживайте виртуальные машины с помощью портала управления.
	- Ведите мониторинг приложений с использованием Visual Studio и студии управления SQL Server.
	- Кроме того, можно отслеживать виртуальные машины и управлять ими с использованием локального программного обеспечения для управления, например с помощью Microsoft System Center Operations Manager.

### Сценарий 2. Общедоступная ферма SharePoint с пользовательской настройкой

Организациям требуется обеспечить присутствие в Интернете с использованием средств, которые размещаются в облаке и легко масштабируются с учетом потребностей и спроса. Им также нужны партнерские веб-сайты внешней сети для совместной работы наряду с удобным процессом распределенного создания и утверждения контента веб-сайта. Наконец, для обработки растущих нагрузок эти организации хотят подключать для своих веб-сайтов дополнительные мощности при возникновении такой потребности.

В этом сценарии сервер SharePoint Server используется как основа для размещения общедоступного веб-сайта. Это позволяет организациям быстро развертывать, настраивать и размещать свои корпоративные веб-сайты в безопасной и масштабируемой облачной инфраструктуре. Благодаря общедоступным веб-сайтам SharePoint в Azure организации могут масштабировать ресурсы по мере роста трафика и платить только за то, что они используют. Для создания содержимого, управления рабочими процессами и утверждения в SharePoint в Azure могут использоваться средства, аналогичные локальным.

Более того, с помощью виртуальных машин Azure организации могут с легкостью настраивать тестовые и рабочие среды на виртуальных машинах. Общедоступные виртуальные машины SharePoint, созданные в Azure, могут архивироваться в виртуальном хранилище. Кроме того, функция непрерывной георепликации позволяет организациям автоматически создавать резервные копии виртуальных машин, работающих в одном центре обработки данных, в другом ЦОД на большом расстоянии от первого, что обеспечивает аварийное восстановление.

Виртуальные машины в инфраструктуре Azure тестируются и поддерживаются для работы с другими продуктами Microsoft, такими как SQL Server и SharePoint Server. Azure и SharePoint Server созданы друг для друга: оба продукта входят в семейство Microsoft, тщательно интегрированы, поддерживаются и совместно протестированы, что обеспечивает их эффективную работу. Оба этих продукта имеют одну точку поддержки приложения SharePoint и используют единую инфраструктуру Azure.

В этом сценарии требуется добавить для сервера SharePoint Server дополнительные интерфейсные веб-серверы, чтобы обеспечить обработку дополнительного трафика. Эти серверы требуют усиленной безопасности и наличия контроллеров домена доменных служб Active Directory для поддержки проверки подлинности и авторизации пользователей. На рис. 4 показана схема для этого сценария.

**Рис. 4. Общедоступная ферма SharePoint с пользовательской настройкой**

![azure-sharepoint-wp-12](./media/virtual-machines-deploy-sharepoint-2010/azure-sharepoint-wp-12.png)

Чтобы реализовать общедоступную ферму SharePoint в Azure, выполните следующее:

1. Выполните развертывание Active Directory. Базовые требования в отношении развертывания Active Directory на виртуальных машинах Azure аналогичны требованиям для локального развертывания этой службы на виртуальных машинах (и, в некоторой степени, на физических компьютерах), но не полностью идентичны. Дополнительную информацию о различиях, а также рекомендации и другие материалы см. в [Рекомендациях по развертыванию Active Directory на виртуальных машинах в Azure](http://msdn.microsoft.com/library/jj156090). Вот как можно развернуть Active Directory в Azure:
	- Определите и создайте виртуальную сеть, в которой виртуальные машины могут быть назначены конкретным подсетям.
	- Для создания и развертывания контроллера домена на новых виртуальных машинах в Azure воспользуйтесь порталом управления. Вы также можете указать сценарий Windows PowerShell для развертывания отдельного домена в облаке с помощью виртуальных машин Azure и виртуальной сети. Дополнительную информацию о создании нового леса Active Directory на виртуальной машине в виртуальной сети Azure см. в разделе [Установка нового леса Active Directory в Azure](active-directory-new-forest-virtual-machine.md).
2. Подготовка виртуальной машины. На портале управления подготовьте новую виртуальную машину с использованием готового образа из библиотеки образов.
3. Выполните развертывание фермы SharePoint.
	- Настройте балансировку нагрузки на портале управления. Настройте конечные точки виртуальной машины, выберите вариант балансировки нагрузочного трафика в существующей конечной точке, а затем укажите имя виртуальной машины с балансировкой нагрузки.
	- Добавьте еще одну виртуальную машину веб-интерфейса в существующую ферму SharePoint для дополнительного трафика.
3. Управление виртуальными машинами:
	- Отслеживайте виртуальные машины с помощью портала управления.
	- Ведите мониторинг фермы SharePoint с помощью центра администрирования.

### Сценарий 3. Горизонтально масштабируемая ферма для дополнительных служб бизнес-аналитики

Бизнес-аналитика является необходимым условием для формирования аналитических данных, а также принятия оперативных и при этом обоснованных решений. Отказываясь от использования локальных систем, организации не хотят вносить изменения в среде бизнес-аналитики в ходе развертывания существующих приложений бизнес-аналитики в облаке. Им нужно размещение отчетов из служб SQL Server Analysis Services (SSAS) или служб SQL Server Reporting Services (SSRS) в среде, отличающейся высокой надежностью и доступностью, при этом сохраняя полный контроль над приложением бизнес-аналитики без затрат большого объема времени и денежных средств на его обслуживание.

Этот сценарий описывает, как организации могут использовать виртуальные машины Azure для размещения критически важных для деятельности приложений бизнес-аналитики. Организациям доступно развертывание ферм SharePoint на виртуальных машинах Azure и горизонтальное масштабирование компонентов бизнес-аналитики виртуальной машины сервера приложений, таких как SSRS или службы Excel. Благодаря масштабированию ресурсоемких компонентов в облаке им проще и удобнее обеспечивать обработку специализированных рабочих нагрузок. Обратите внимание, что сервер SQL Server на виртуальных машинах в Azure отличается высокой эффективностью, поскольку экземпляры SQL Server легко поддаются масштабированию в любом диапазоне. Это обеспечивает гибкость среды и предоставляет организациям возможность динамически подготавливать (добавлять) или отключать (убирать) экземпляры бизнес-аналитики в соответствии с сиюминутными потребностями, обусловленными рабочей нагрузкой.

Перенос существующих приложений бизнес-аналитики в Azure обеспечивает более широкие возможности масштабирования. С помощью SharePoint Server, SSAS и SSRS организации могут создавать мощные приложения в области бизнес-аналитики и отчетности, а также панели мониторинга с масштабированием вверх или вниз. Эти приложения и панели мониторинга также поддерживают более безопасную интеграцию с локальными данными и приложениями. Azure обеспечивает соответствие центра обработки данных стандартам ISO 27001. Дополнительную информацию см. на веб-странице [Центр управления безопасностью Azure](http://azure.microsoft.com/support/trust-center/compliance/).

Для масштабирования развертывания компонентов бизнес-аналитики необходимо установить новый сервер приложений с такими службами, как PowerPivot, службы Excel, Power View или службы PerformancePoint. Можно также добавить в существующую ферму экземпляры бизнес-аналитики SQL Server, такие как SSAS или SSRS, для дополнительной поддержки обработки запросов. Сервер добавляется как новая виртуальная машина Azure с SharePoint 2010 Server или SQL Server. Затем на этом сервере можно установить, развернуть и настроить компоненты бизнес-аналитики (рис. 5).

**Рис. 5. Горизонтально масштабированная ферма SharePoint для дополнительных служб бизнес-аналитики**

![azure-sharepoint-wp-13](./media/virtual-machines-deploy-sharepoint-2010/azure-sharepoint-wp-13.png)

Для горизонтального масштабирования среды бизнес-аналитики в Azure выполните следующее:

1. Подготовка:
	- Подготовьте VPN-подключение между локальной средой и Azure с помощью виртуальной сети Azure. Дополнительные сведения см. в статье [Общие сведения о виртуальных сетях](http://msdn.microsoft.com/library/jj156007.aspx).
	- На портале управления подготовьте новую виртуальную машину с использованием готового образа из библиотеки образов. Можно отправить в библиотеку образы рабочей нагрузки бизнес-аналитики SharePoint Server или SQL Server, после чего любой пользователь с достаточными полномочиями сможет выбрать эти компоненты бизнес-аналитики на виртуальной машине для создания горизонтально масштабированной среды.
2. Установка: 
	- Если ваша организация не располагает готовыми образами компонентов бизнес-аналитики SQL Server и SharePoint Server, установите SharePoint Server и SQL Server на виртуальных машинах с использованием подключения к удаленному рабочему столу.
	- Дополнительные сведения об установке SharePoint см. в статье [Установка SharePoint Server 2010 с помощью Windows PowerShell](http://technet.microsoft.com/library/cc262839.aspx) или на странице [CodePlex: AutoSPInstaller](http://autospinstaller.codeplex.com/).
	- Дополнительную информацию об установке SQL Server см. в разделе [Установка SQL Server с помощью SysPrep](http://msdn.microsoft.com/library/ee210664.aspx).
3. Добавление виртуальной машины бизнес-аналитики.
	- Настройте систему безопасности в конечной точке портала управления и установите порт входящего трафика в брандмауэре Windows виртуальной машины.
	- Добавьте созданную виртуальную машину бизнес-аналитики в существующую ферму SharePoint или SQL Server.
4. Управление виртуальными машинами:
	- Отслеживайте виртуальные машины с помощью портала управления.
	- Ведите мониторинг фермы SharePoint с помощью центра администрирования.
	- Мониторинг виртуальных машин и управление ими можно также вести с использованием локального программного обеспечения для управления, например с помощью Microsoft System Center — Operations Manager.

### Сценарий 4. Полностью настраиваемый веб-сайт на основе SharePoint

Все больше организаций хотят создать полностью настраиваемые веб-сайты SharePoint в облаке. Им требуется надежная и доступная среда, которая обеспечивает полный контроль над ведением комплексных приложений, выполняемых в облаке, без существенных затрат времени и ресурсов.

В этом сценарии организация может развернуть всю свою ферму SharePoint в облаке и динамически масштабировать все компоненты для получения дополнительных мощностей либо дополнить свое локальное развертывание компонентами в облаке с целью при необходимости получить дополнительные ресурсы и повысить эффективность. Данный сценарий нацелен на организации, желающие получить все возможности среды SharePoint для разработки приложений и управления корпоративным информационным содержимым. Более сложные сайты также могут включать расширенные средства отчетности, Power View, PerformancePoint, PowerPivot, подробные диаграммы и большую часть других возможностей узла SharePoint, что обеспечивает комплексную функциональность, охватывающую все аспекты работы.

Организации могут использовать виртуальные машины Azure для размещения настраиваемых приложений и связанных компонентов в экономичной и безопасной облачной инфраструктуре. Они также могут использовать локальный центр Microsoft System Center как общее средство управления приложениями, расположенными локально и в облаке.

Чтобы реализовать полностью настраиваемый веб-узел SharePoint в Azure, организация должна развернуть в облаке домен Active Directory и подготовить новые виртуальные машины в этом домене. Затем необходимо создать виртуальную машину с SQL Server 2012 и настроить ее как часть фермы SharePoint. И, наконец, необходимо создать ферму SharePoint, выполнить для нее балансировку нагрузки и подключить ее к Active Directory и SQL Server (Рис. 6).

**Рис. 6. Полностью настраиваемый веб-сайт на основе SharePoint**

![azure-sharepoint-wp-14](./media/virtual-machines-deploy-sharepoint-2010/azure-sharepoint-wp-14.png)

Ниже показано, как создать настраиваемую среду фермы SharePoint на основе готовых образов, доступных в библиотеке образов. При этом следует обратить внимание, что также можно передать виртуальные машины фермы SharePoint в библиотеку образов, после чего пользователи с достаточными полномочиями смогут при помощи этих образов создать требуемую ферму SharePoint в Azure.

1. Выполните развертывание Active Directory. Базовые требования в отношении развертывания Active Directory на виртуальных машинах Azure аналогичны требованиям для локального развертывания этой службы на виртуальных машинах (и, в некоторой степени, физических компьютерах), но не полностью идентичны. Дополнительную информацию о различиях, а также рекомендации и другие материалы см. в [Рекомендациях по развертыванию Active Directory на виртуальных машинах в Azure](http://msdn.microsoft.com/library/jj156090). Вот как можно развернуть Active Directory в Azure:
	- Определите и создайте виртуальную сеть, в которой виртуальные машины могут быть назначены конкретным подсетям.
	- Для создания и развертывания контроллера домена на новых виртуальных машинах в Azure воспользуйтесь порталом управления.
	- Дополнительную информацию о создании нового леса Active Directory на виртуальной машине в виртуальной сети Azure см. в разделе [Установка нового леса Active Directory в Azure](active-directory-new-forest-virtual-machine).
2. Развертывание SQL Server.
	- На портале управления подготовьте новую виртуальную машину с использованием готового образа из библиотеки образов.
	- Настройте SQL Server на виртуальной машине. Дополнительные сведения см. в статье [Установка SQL Server с помощью SysPrep](http://msdn.microsoft.com/library/ee210664.aspx).
	- Присоедините виртуальную машину к вновь созданному домену Active Directory.
3. Выполните развертывание фермы SharePoint на нескольких серверах.
	- Создайте виртуальную сеть. Дополнительные сведения см. в статье [Общие сведения о виртуальных сетях](http://msdn.microsoft.com/library/jj156007.aspx).
	- При развертывании виртуальных машин SharePoint необходимо предоставить для сервера SharePoint подсети, чтобы обеспечить наличие DNS-адресов в поле локального Active Directory во время подготовки.
	- Создание виртуальной машины на портале управления.
	- Установите на этой виртуальной машине сервер SharePoint Server и создайте образ для многократного использования. Дополнительные сведения об установке сервера SharePoint Server см. в статье [Установка SharePoint Server 2010 с помощью Windows PowerShell](http://technet.microsoft.com/library/cc262839.aspx) или на веб-странице [CodePlex: AutoSPInstaller](http://autospinstaller.codeplex.com/).
	- Настройте виртуальную машину SharePoint для создания фермы SharePoint и подключения к ней с помощью команды [Join-SharePointFarm](http://technet.microsoft.com/library/ff607979.aspx).
	- С помощью портала управления настройте подсистему балансировки нагрузки: настройте конечные точки виртуальной машины, выберите вариант балансировки нагрузки трафика в существующей конечной точке, а затем укажите имя виртуальной машины с балансировкой нагрузки.
4. Управление фермой SharePoint с помощью System Center.
	- С помощью агента Operations Manager и нового пакета интеграции Azure подключите локальный System Center к виртуальным машинам Azure.
	- Для управления следует использовать локальные контроллер приложений и оркестратор.

## Сводка

Виртуальные машины Azure обеспечивают полный спектр развертываний SharePoint. Они имеют полную поддержку и прошли надлежащее тестирование для обеспечения оптимальной работы с другими приложениями корпорации Майкрософт. Благодаря этому организации могут с легкостью настроить и развернуть сервер SharePoint в Azure, чтобы подготовить инфраструктуру для нового развертывания SharePoint или расширить уже действующую инфраструктуру. По мере роста рабочих нагрузок в области бизнеса организации могут быстро расширять свою инфраструктуру SharePoint. Аналогичным образом, при снижении рабочей нагрузки организации могут привлекать ресурсы по требованию, оплачивая только то, что они используют. Виртуальные машины Azure обеспечивают исключительную инфраструктуру для широкого спектра бизнес-потребностей, что было продемонстрировано в четырех сценариях на основе SharePoint, рассмотренных в этой статье.

Успешное развертывание SharePoint Server на виртуальных машинах в Azure требует тщательного планирования, что еще усугубляется большим количеством критически важных параметров архитектуры и развертывания фермы. Дополнительная информация и рекомендации, изложенные в данной статье, помогут принять правильные решения для внедрения продуманного развертывания SharePoint.

## Дополнительные ресурсы

[Сервер SharePoint в службах инфраструктуры Azure](http://msdn.microsoft.com/library/dn275955.aspx)

[Фермы SharePoint, размещенные в службах инфраструктуры Azure](virtual-machines-sharepoint-infrastructure-services.md)

[Рабочая нагрузка служб инфраструктуры Azure: ферма SharePoint в интрасети](virtual-machines-workload-intranet-sharepoint-farm)

[Руководство по реализации служб инфраструктуры Azure](virtual-machines-infrastructure-services-implementation-guidelines.md)

 

<!---HONumber=58_postMigration-->