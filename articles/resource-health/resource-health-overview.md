<properties
   pageTitle="Обзор службы работоспособности ресурсов Azure | Microsoft Azure"
   description="Обзор службы работоспособности ресурсов Azure"
   services="Resource health"
   documentationCenter="dev-center-name"
   authors="bernardm"
   manager=""
   editor=""/>

<tags
   ms.service="resource-health"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="Supportability"
   ms.date="06/01/2016"
   ms.author="bernardm"/>

# Обзор службы работоспособности ресурсов Azure

Служба работоспособности ресурсов Azure определяет состояние работоспособности отдельных ресурсов Azure и предоставляет рекомендации по устранению проблем. В облачной среде, где невозможно получить прямой доступ к серверам и компонентам инфраструктуры, цель этой службы — сократить время, которое клиенты затрачивают на устранение неполадок, в частности ускорить определение того, что является первопричиной проблемы: само приложение или событие на платформе Azure.

## Что представляет собой ресурс и каким образом служба работоспособности ресурсов определяет его состояние? 
Ресурс — это созданный пользователем экземпляр ресурса, предоставленного службой, например виртуальная машина, веб-приложение или база данных SQL.

Для определения состояния ресурса в службе работоспособности ресурсов используются сигналы, генерируемые ресурсом и/или службой. Важно отметить, что в настоящее время служба работоспособности ресурсов учитывает состояние одного конкретного ресурса и не рассматривает другие компоненты, которые могут влиять на общую работоспособность. Например, при оповещении о состоянии виртуальной машины учитывается только вычислительная часть инфраструктуры, т. е. сведения о проблемах в сети в колонке этой службы отображаться не будут. Однако в случае явного простоя службы соответствующие сведения будут отображены на баннере в верхней части колонки. Дополнительные сведения о простое службы представлены далее.

## Чем служба работоспособности ресурсов отличается от панели мониторинга работоспособности службы?

Служба работоспособности ресурсов предоставляет более детализированные сведения, чем панель мониторинга работоспособности службы. В то время как на панели содержатся сведения о событиях, которые влияют на доступность службы в регионе, служба работоспособности ресурсов предоставляет сведения, касающиеся конкретного ресурса, например информацию о событиях, которые влияют на доступность виртуальной машины, веб-приложения или базы данных SQL. Например, если узел неожиданно перезагружается, пользователи, чьи виртуальные машины выполнялись на этом узле, смогут узнать, почему их виртуальная машина была некоторое время недоступна.

## Как получить доступ к службе работоспособности ресурсов
Существует 2 способа, которыми можно получить доступ к службе работоспособности ресурсов, для поддерживаемых ею служб.

### Портал Azure
В колонке работоспособности ресурсов на портале Azure предоставляются подробные сведения о состоянии работоспособности ресурса, а также рекомендуемые действия, которые зависят от текущего состояния ресурса. Эта колонка упрощает доступ к другим ресурсам на портале путем запроса состояния работоспособности ресурса. Как упоминалось ранее, набор рекомендуемых действий в колонке работоспособности ресурсов зависит от текущего состояния работоспособности.

* Работоспособные ресурсы. Так как проблемы, которые могут повлиять на работоспособность ресурса, не обнаружены, приведенные действия предназначены помочь в процессе устранения неполадок. Например, предоставляется прямой доступ к колонке устранения неполадок, где содержатся рекомендации по устранению наиболее распространенных проблем.
* Неисправные ресурсы. Если проблемы связаны со службой Azure, в колонке отображаются действия, которые предпринимает корпорация Майкрософт (или предприняла), чтобы восстановить работу ресурса. Если проблемы вызваны действиями пользователей, в колонке приводится перечень действий, которые можно предпринять, чтобы устранить проблему и восстановить работу ресурса.  

Войдя на портал Azure, вы можете получить доступ к колонке работоспособности ресурсов двумя способами.

####Колонка ресурса
Откройте колонку определенного ресурса. В колонке параметров, которая откроется рядом с колонкой ресурса, щелкните пункт "Работоспособность ресурсов", чтобы открыть колонку работоспособности ресурсов.

![Колонка работоспособности ресурсов](./media/resource-health-overview/resourceBladeAndResourceHealth.png)

### Колонка "Справка и поддержка"
Чтобы открыть колонку "Справка и поддержка", щелкните вопросительный знак в правом верхнем углу и выберите "Справка и поддержка".

**Использование верхней панели навигации**

![Справка + поддержка](./media/resource-health-overview/HelpAndSupport.png)

Затем щелкните плитку "Работоспособность ресурсов", после чего откроется колонка подписки, где будут перечислены все ресурсы в подписке. Рядом с каждым ресурсом отображается значок, указывающий его состояние работоспособности. Чтобы открыть колонку работоспособности ресурсов, щелкните соответствующий ресурс.

**Плитка работоспособности ресурсов**

![Плитка работоспособности ресурсов](./media/resource-health-overview/resourceHealthTile.png)

### API работоспособности ресурсов
Помимо портала Azure для запроса службы работоспособности ресурсов можно также использовать интерфейс API. Этот API поддерживает вызовы для получения состояния всех ресурсов в подписке, всех ресурсов в группе ресурсов или конкретного ресурса.

Прежде чем использовать API для запроса состояния работоспособности ресурса, необходимо зарегистрировать подписку в службе путем отправки запроса POST по следующему URL-адресу:

        https://management.azure.com/subscriptions/<SubID>/providers/Microsoft.ResourceHealth/register?api-version=2015-01-01
        
Ниже приведены примеры вызова API работоспособности ресурсов

        // GET health of all resources in a subscription:
        https://management.azure.com/subscriptions/<SubID>/providers/Microsoft.ResourceHealth/availabilityStatuses?api-version=2015-01-01
        
        //GET health of all resources in a resource group:
        https://management.azure.com/subscriptions/<SubID>/resourceGroups/<ResourceGroupName>/providers/Microsoft.ResourceHealth/availabilityStatuses?api-version=2015-01-01
        
        //GET the health of a single resource:
        https://management.azure.com/subscriptions/<SubID>/resourceGroups/<ResourceGroupName>/providers/<ResourceProvider>/<ResourceType>/<ResourceName>/providers/Microsoft.ResourceHealth/availabilityStatuses/current?api-version=2015-01-01


## Что означает состояние работоспособности ресурса?
В ответе может прийти одно из 4 различных состояний работоспособности.

### Доступна
Служба не обнаружила на платформе проблем, которые могут повлиять на доступность ресурса. Это состояние обозначается зеленым значком галочки.

![Ресурс доступен](./media/resource-health-overview/Available.png)

### Рекомендации недоступны

Служба обнаружила на платформе текущую проблему, которая влияет на доступность данного ресурса, например узел, где выполнялась виртуальная машина, был неожиданно перезагружен. Это состояние обозначается красным значком предупреждения. В средней части колонки содержатся дополнительные сведения о проблеме, в частности следующее:

1.	Какие действия предпринимает корпорация Майкрософт для восстановления работы ресурса. 
2.	Подробная временная шкала проблемы, включая ожидаемое время разрешения.
3.	Список рекомендуемых действий для пользователей. 

![Ресурс недоступен](./media/resource-health-overview/Unavailable.png)

### Недоступен из-за действий пользователя
Ресурс недоступен из-за запроса пользователя, например на остановку или перезагрузку ресурса. Это состояние обозначается синим информационным значком.

![Ресурс недоступен из-за инициированного пользователем действия](./media/resource-health-overview/userInitiated.png)

### Unknown
Служба не получала сведения об этом ресурсе более 5 минут. Это состояние обозначается серым значком с вопросительным знаком.

Важно отметить, что это не всегда означает, что с ресурсом возникла проблема. Поэтому пользователям необходимо соблюдать следующие рекомендации:

* Если ресурс работает в обычном режиме, но в колонке работоспособности указано состояние "Неизвестно", то все в порядке и через несколько минут состояние ресурса изменится на работоспособное.
* Если возникают проблемы при доступе к ресурсу и в колонке работоспособности указано состояние "Неизвестно", это может быть ранним признаком проблемы и того, что необходимо провести дополнительный анализ еще до того, как состояние изменится на "Работоспособен" или "Неработоспособен".

![Состояние работоспособности ресурса неизвестное.](./media/resource-health-overview/unknown.png)

## События, влияющие на службы
Если на работу ресурса может повлиять текущее событие, влияющее на службы, в верхней части колонки работоспособности ресурсов отобразится соответствующий баннер. Если щелкнуть этот баннер, откроется колонка событий аудита, где можно получить дополнительные сведения о простое.

![На работоспособность ресурса могло повлиять событие прерывания службы](./media/resource-health-overview/serviceImpactingEvent.png)

## Что еще необходимо знать о службе работоспособности ресурсов?

### Задержка сигналов
Сигналы, на которые полагается служба работоспособности ресурсов, могут быть отложены на период до 15 минут, что может привести к несоответствию текущего и фактического состояния работоспособности ресурса. Важно помнить об этом, так как это поможет сэкономить время на поиск возможных проблем.

### Исключение, касающееся SQL 
Служба работоспособности ресурсов сообщает состояние базы данных SQL, а не SQL Server. Хотя таким образом можно получить более реалистичную картину работоспособности, для определения состояния базы данных необходимо учитывать много компонентов и служб. Текущий сигнал зависит от операций входа в базу данных. Это означает, что состояние работоспособности баз данных, в которые постоянно выполняется вход (и которые, помимо прочего, получают запросы на выполнение запроса), будет отображаться регулярно. Если к базе данных в течение 10 минут или более не осуществлялся доступ, ее состояние меняется на "Неизвестное". Это не означает, что база данных недоступна. Просто сигнал не отправляется, так как не осуществляются операции входа. При подключении к базе данных и выполнении запроса снова начнут отправляться сигналы, необходимые для определения и обновления ее состояния работоспособности.

## Отзыв
Мы всегда рады вашим отзывам и предложениям! Отправляйте нам свои [предложения](https://feedback.azure.com/forums/266794-support-feedback). Кроме того, с нами можно связаться через [Twitter](https://twitter.com/azuresupport) или [форумы MSDN](https://social.msdn.microsoft.com/Forums/azure).

<!---HONumber=AcomDC_0615_2016-->