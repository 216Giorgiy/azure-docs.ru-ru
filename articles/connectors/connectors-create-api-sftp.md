<properties
	pageTitle="Добавление API SFTP в приложения логики | Microsoft Azure"
	description="Обзор API SFTP с параметрами интерфейса API REST"
	services=""
	documentationCenter="" 
	authors="MandiOhlinger"
	manager="erikre"
	editor=""
	tags="connectors"/>

<tags
   ms.service="multiple"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na" 
   ms.date="02/25/2016"
   ms.author="mandia"/>

# Начало работы с API-интерфейсом SFTP
Подключитесь к SFTP-серверу, чтобы управлять своими файлами. На SFTP-сервере можно выполнять различные задачи, такие как отправка файлов, их удаление и многое другое. API SFTP можно использовать из:

- приложений логики.

>[AZURE.NOTE] Эта версия статьи предназначена для приложений логики со схемой версии 2015-08-01-preview.

С помощью SFTP вы можете:

- формировать бизнес-процессы на основе данных, получаемых из SFTP; 
- использовать триггер при обновлении файла;
- использовать действия по созданию файлов, их удалению и т. д. Эти действия получают ответ и делают выходные данные доступными для использования другими действиями. Например, можно получить содержимое файла и затем обновить базу данных SQL. 

Сведения о добавлении операции в приложения логики см. в статье [Создание приложения логики](../app-service-logic/app-service-logic-create-a-logic-app.md).


## Триггеры и действия
Соединитель SFTP предоставляет следующие триггеры и действия.

триггеры; | Действия
--- | ---
<ul><li>При создании или изменении файла </li></ul> | <ul><li>Создание файла</li><li>Копирование файла</li><li>Удаление файла</li><li>Извлечение папки</li><li>Получение содержимого файла</li><li>Получение содержимого файла с помощью пути</li><li>Получение метаданных файла</li><li>Получение метаданных файла с помощью пути</li><li>Обновление файла</li><li>При создании или изменении файла </li></ul>

Все API-интерфейсы поддерживают данные в форматах JSON и XML.


## Создание подключения к SFTP
При добавлении этого API в приложения логики введите указанные ниже значения:

|Свойство| Обязательно|Описание|
| ---|---|---|
|Адрес сервера узла| Да | Введите полное доменное имя \(FQDN\) или IP-адрес SFTP-сервера.|
|Имя пользователя| Да | Введите имя пользователя для подключения к SFTP-серверу.|
|Пароль | Да | Введите пароль для этого имени пользователя.|
|Отпечаток хост-ключа для сервера SSH | Да | Укажите отпечаток открытого хост-ключа для сервера SSH. <br/><br/>Как правило, этот ключ можно получить у администратора сервера. Для получения отпечатка ключа также используются средства ```WinSCP``` или ```ssh-keygen-g3 -F```. | 

После создания подключения укажите свойства SFTP, такие как путь к папке или имя файла. Эти свойства описаны далее в **справочнике по REST API**.

>[AZURE.TIP] Это SFTP-подключение можно использовать в других приложениях логики.


## Справочник по REST API Swagger
Относится к версии 1.0.

### Создание файла
Передает файл в SFTP. ```POST: /datasets/default/files```

| Имя| Тип данных|Обязательно|Местонахождение|Значение по умолчанию|Описание|
| ---|---|---|---|---|---|
|folderPath|строка|Да|запрос|Нет |Уникальный путь к папке в SFTP|
|name|строка|Да|запрос| Нет|Имя файла|
|текст|string\(binary\) |Да|текст|Нет |Содержимое файла, создаваемого в SFTP|

#### Ответ
|Имя|Описание|
|---|---|
|200|ОК|
|по умолчанию|Операция завершилась ошибкой.|

### Копирование файла
Копирует файл в SFTP. ```POST: /datasets/default/copyFile```

| Имя| Тип данных|Обязательно|Местонахождение|Значение по умолчанию|Описание|
| ---|---|---|---|---|---|
|источник|string|Да|запрос| Нет|Путь к исходному файлу|
|ресурс destination|строка|Да|запрос|Нет |Путь к конечному файлу, включая имя файла|
|overwrite|Логическое|Нет|запрос|Нет|Перезаписывает конечный файл, если задано значение "true"|

#### Ответ
|Имя|Описание|
|---|---|
|200|ОК|
|по умолчанию|Операция завершилась ошибкой.|

### Удаление файла 
Удаляет файл из SFTP. ```DELETE: /datasets/default/files/{id}```

| Имя| Тип данных|Обязательно|Местонахождение|Значение по умолчанию|Описание|
| ---|---|---|---|---|---|
|id|строка|Да|path|Нет |Уникальный идентификатор файла в SFTP|

#### Ответ
|Имя|Описание|
|---|---|
|200|ОК|
|по умолчанию|Операция завершилась ошибкой.|

### Извлечение папки
Извлекает файл архива в папку с помощью SFTP \(например: ZIP-файл\). ```POST: /datasets/default/extractFolderV2```

| Имя| Тип данных|Обязательно|Местонахождение|Значение по умолчанию|Описание|
| ---|---|---|---|---|---|
|источник|string|Да|запрос|Нет |Путь к файлу архива|
|ресурс destination|строка|Да|запрос|Нет |Путь к конечной папке|
|перезаписать|Логическое|Нет|запрос|Нет|Перезаписывает конечные файлы, если задано значение "true"|

#### Ответ
|Имя|Описание|
|---|---|
|200|ОК|
|по умолчанию|Операция завершилась ошибкой.|

### Получение содержимого файла
Получает содержимое файла из SFTP с помощью идентификатора. ```GET: /datasets/default/files/{id}/content```

| Имя| Тип данных|Обязательно|Местонахождение|Значение по умолчанию|Описание|
| ---|---|---|---|---|---|
|id|строка|Да|path|Нет |Уникальный идентификатор файла в SFTP|

#### Ответ
|Имя|Описание|
|---|---|
|200|ОК|
|по умолчанию|Операция завершилась ошибкой.|


### Получение содержимого файла с помощью пути
Получает содержимое файла из SFTP с помощью пути. ```GET: /datasets/default/GetFileContentByPath```

| Имя| Тип данных|Обязательно|Местонахождение|Значение по умолчанию|Описание|
| ---|---|---|---|---|---|
|path|строка|Да|запрос| Нет|Уникальный путь к файлу в SFTP|

#### Ответ
|Имя|Описание|
|---|---|
|200|ОК|
|по умолчанию|Операция завершилась ошибкой.|


### Получение метаданных файла 
Извлекает метаданные файла из SFTP с помощью идентификатора файла. ```GET: /datasets/default/files/{id}```

| Имя| Тип данных|Обязательно|Местонахождение|Значение по умолчанию|Описание|
| ---|---|---|---|---|---|
|id|строка|Да|path| Нет|Уникальный идентификатор файла в SFTP|

#### Ответ
| Имя | Описание |
| --- | --- |
| 200 | ОК | 
| по умолчанию | Операция завершилась ошибкой.


### Получение метаданных файла с помощью пути
Извлекает метаданные файла из SFTP с помощью пути. ```GET: /datasets/default/GetFileByPath```

| Имя| Тип данных|Обязательно|Местонахождение|Значение по умолчанию|Описание|
| ---|---|---|---|---|---|
|path|строка|Да|запрос|Нет |Уникальный путь к файлу в SFTP|

#### Ответ
|Имя|Описание|
|---|---|
|200|ОК|
|по умолчанию|Операция завершилась ошибкой.|


### Обновление файла
Обновляет содержимое файла с помощью SFTP. ```PUT: /datasets/default/files/{id}```

| Имя| Тип данных|Обязательно|Местонахождение|Значение по умолчанию|Описание|
| ---|---|---|---|---|---|
|id|строка|Да|path|Нет |Уникальный идентификатор файла в SFTP|
|текст|string\(binary\) |Да|текст| Нет|Содержимое файла, обновляемого в SFTP|

#### Ответ
|Имя|Описание|
|---|---|
|200|ОК|
|по умолчанию|Операция завершилась ошибкой.|


### При создании или изменении файла 
Активирует поток в случае изменения файла в SFTP. ```GET: /datasets/default/triggers/onupdatedfile```

| Имя| Тип данных|Обязательно|Местонахождение|Значение по умолчанию|Описание|
| ---|---|---|---|---|---|
|folderId|string|Да|запрос|Нет |Уникальный идентификатор папки|

#### Ответ
|Имя|Описание|
|---|---|
|200|ОК|
|по умолчанию|Операция завершилась ошибкой.|


## Определения объектов

#### DataSetsMetadata

| Имя | Тип данных | Обязательно|
|---|---|---|
|tabular|Не определен|Нет|
|blob-объект|Не определен|Нет|

#### TabularDataSetsMetadata

| Имя | Тип данных | Обязательно|
|---|---|---|
|источник|строка|Нет|
|displayName|строка|Нет|
|urlEncoding|string|Нет|
|tableDisplayName|string|Нет|
|tablePluralName|string|Нет|

#### BlobDataSetsMetadata

| Имя | Тип данных | Обязательно|
|---|---|---|
|источник|строка|Нет|
|displayName|строка|Нет|
|urlEncoding|string|Нет|

#### BlobMetadata

| Имя | Тип данных | Обязательно|
|---|---|---|
|Идентификатор|string|Нет|
|Имя|строка|Нет|
|DisplayName|строка|Нет|
|Путь|string|Нет|
|LastModified|string|Нет|
|Размер|целое число|Нет|
|MediaType|строка|Нет|
|IsFolder|Логическое|Нет|
|ETag|строка|Нет|
|FileLocator|строка|Нет|


## Дальнейшие действия
[Создание приложения логики](../app-service-logic/app-service-logic-create-a-logic-app.md).

<!---HONumber=AcomDC_0413_2016-->