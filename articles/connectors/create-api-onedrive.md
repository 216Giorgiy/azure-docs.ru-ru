<properties
pageTitle="Добавление API OneDrive в службу PowerApps Enterprise и приложения логики | Microsoft Azure"
description="Обзор API OneDrive с параметрами интерфейса API REST"
services=""	
documentationCenter="" 	
authors="msftman"	
manager="erikre"	
editor=""
tags="connectors"/>

<tags
ms.service="multiple"
ms.devlang="na"
ms.topic="article"
ms.tgt_pltfrm="na"
ms.workload="na"
ms.date="02/25/2016"
ms.author="mandia"/>

# Начало работы с API-интерфейсом OneDrive

Подключитесь к OneDrive для управления файлами, включая передачу, получение, удаление файлов и многое другое. API OneDrive можно использовать из:

- PowerApps; 
- приложений логики. 

>[AZURE.NOTE] Эта версия статьи предназначена для приложений логики со схемой версии 2015-08-01-preview. Чтобы узнать версию схемы 2014-12-01-preview, щелкните [API OneDrive](../app-service-logic/app-service-logic-connector-onedrive.md).

С помощью OneDrive вы можете:

- формировать бизнес-процессы на основе данных, получаемых из OneDrive; 
- использовать триггеры при создании или обновлении файла;
- использовать действия по созданию, удалению файлов и т. д. Эти действия получают ответ и делают выходные данные доступными для использования другими действиями. Например, новый файл, созданный в OneDrive, можно отправить по электронной почте с помощью Office 365.
- Добавлять API OneDrive в PowerApps Enterprise. После этого пользователи смогут использовать этот API в своих приложениях. 

Сведения о добавлении API в PowerApps Enterprise см. в статье [Регистрация API в PowerApps](../power-apps/powerapps-register-from-available-apis.md).

Сведения о добавлении операции в приложения логики см. в статье [Создание приложения логики](../app-service-logic/app-service-logic-create-a-logic-app.md).

## Триггеры и действия
API OneDrive предоставляет следующие триггеры и действия.

| триггеры; | Действия|
| --- | --- |
|<ul><li>При создании файла</li><li>При изменении файла</li></ul> | <ul><li>Создание файла</li><li>Вывод списка файлов в папке</li><li>При создании файла</li><li>Копирование файла</li><li>Удаление файла</li><li>Извлечение папки</li><li>Получение содержимого файла с помощью идентификатора</li><li>Получение содержимого файла с помощью пути</li><li>Получение метаданных файла с помощью идентификатора</li><li>Получение метаданных файла с помощью пути</li><li>Вывод содержимого корневой папки</li><li>Обновление файла</li><li>При изменении файла</li></ul>

Все API-интерфейсы поддерживают данные в форматах JSON и XML.

## Создание подключения к OneDrive

### Добавление дополнительных настроек в PowerApps
При добавлении OneDrive в PowerApps Enterprise нужно ввести значения **ключа приложения** и **секрета приложения** для приложения OneDrive. В приложении OneDrive также используется **URL-адрес перенаправления**. Если у вас нет приложения OneDrive, создайте его, выполнив приведенные ниже действия.

1. Перейдите на [страницу создания приложения][5] в _Центре разработчиков для учетной записи Microsoft_ и войдите с помощью своей _учетной записи Майкрософт_.

2. Введите **имя приложения** и примите условия соглашения. ![Новое приложение OneDrive][6]

3. В разделе параметров:

	1. Щелкните **Параметры API**.  
	2. В поле **URL-адрес перенаправления** введите значение, которое отображалось при добавлении API OneDrive на портале Azure.  
	3. **Сохраните** изменения.  

	![Параметры API приложения OneDrive][7]

Скопируйте и вставьте значения **ключа приложения** и **секрета приложения** в конфигурацию OneDrive на портале Azure.

### Добавление дополнительных настроек в приложения логики
При добавлении API в приложения логики эти приложения необходимо авторизовать для подключения к OneDrive.

1. Войдите в свою учетную запись OneDrive.
2. Разрешите приложениям логики подключаться к учетной записи OneDrive и использовать ее. 

После создания подключения укажите свойства OneDrive, такие как путь к папке или имя файла. Эти свойства описаны далее в **справочнике по REST API**.

>[AZURE.TIP] Это подключение можно использовать в других приложениях логики.

## Справочник по REST API Swagger
Относится к версии 1.0.


### Получение метаданных файла с помощью идентификатора
Извлекает метаданные из файла в OneDrive с помощью идентификатора. ```GET: /datasets/default/files/{id}```

| Имя| Тип данных|Обязательно|Местонахождение|Значение по умолчанию|Описание|
| ---|---|---|---|---|---|
|id|строка|Да|path|Нет|Уникальный идентификатор файла в OneDrive|

### Ответы
|Имя|Описание|
|---|---|
|200|ОК|
|по умолчанию|Операция завершилась ошибкой.|


### Обновление файла
Обновляет файл в OneDrive. ```PUT: /datasets/default/files/{id}```

| Имя| Тип данных|Обязательно|Местонахождение|Значение по умолчанию|Описание|
| ---|---|---|---|---|---|
|id|строка|Да|path|Нет|Уникальный идентификатор файла, обновляемого в OneDrive|
|текст| |Да|текст|Нет|Содержимое файла, обновляемого в OneDrive|


### Ответ
|Имя|Описание|
|---|---|
|200|ОК|
|по умолчанию|Операция завершилась ошибкой.|

### Удаление файла
Удаляет файл из OneDrive. ```DELETE: /datasets/default/files/{id}```

| Имя| Тип данных|Обязательно|Местонахождение|Значение по умолчанию|Описание|
| ---|---|---|---|---|---|
|id|строка|Да|path|Нет|Уникальный идентификатор файла, удаляемого из OneDrive|


### Ответ
|Имя|Описание|
|---|---|
|200|ОК|
|по умолчанию|Операция завершилась ошибкой.|


### Получение метаданных файла с помощью пути
Извлекает метаданные из файла в OneDrive с помощью пути. ```GET: /datasets/default/GetFileByPath```

| Имя| Тип данных|Обязательно|Местонахождение|Значение по умолчанию|Описание|
| ---|---|---|---|---|---|
|path|строка|Да|запрос|Нет|Уникальный путь к файлу в OneDrive|


### Ответ
|Имя|Описание|
|---|---|
|200|ОК|
|по умолчанию|Операция завершилась ошибкой.|




### Получение содержимого файла с помощью пути
Извлекает содержимое файла в OneDrive с помощью пути. ```GET: /datasets/default/GetFileContentByPath```

| Имя| Тип данных|Обязательно|Местонахождение|Значение по умолчанию|Описание|
| ---|---|---|---|---|---|
|path|строка|Да|запрос|Нет|Уникальный путь к файлу в OneDrive|


### Ответ

|Имя|Описание|
|---|---|
|200|ОК|
|по умолчанию|Операция завершилась ошибкой.|




### Получение содержимого файла с помощью идентификатора
Извлекает содержимое файла в OneDrive с помощью идентификатора. ```GET: /datasets/default/files/{id}/content```

| Имя| Тип данных|Обязательно|Местонахождение|Значение по умолчанию|Описание|
| ---|---|---|---|---|---|
|id|строка|Да|path|Нет|Уникальный идентификатор файла в OneDrive|


### Ответ

|Имя|Описание|
|---|---|
|200|ОК|
|по умолчанию|Операция завершилась ошибкой.|




### Создание файла
Передает файл в OneDrive. ```POST: /datasets/default/files```

| Имя| Тип данных|Обязательно|Местонахождение|Значение по умолчанию|Описание|
| ---|---|---|---|---|---|
|folderPath|строка|Да|запрос|Нет|Путь к папке для отправки файла в OneDrive|
|name|строка|Да|запрос|Нет|Имя файла, создаваемого в OneDrive|
|текст| |Да|текст|Нет|Содержимое файла, отправляемого в OneDrive|


### Ответ

|Имя|Описание|
|---|---|
|200|ОК|
|по умолчанию|Операция завершилась ошибкой.|



### Копирование файла
Копирует файл в OneDrive. ```POST: /datasets/default/copyFile```

| Имя| Тип данных|Обязательно|Местонахождение|Значение по умолчанию|Описание|
| ---|---|---|---|---|---|
|источник|string|Да|запрос|Нет|URL-адрес исходного файла|
|ресурс destination|строка|Да|запрос|Нет|Путь к конечному файлу в OneDrive, включая имя конечного файла|
|overwrite|Логическое|Нет|запрос|нет|Перезаписывает конечный файл, если задано значение "true"|


### Ответ

|Имя|Описание|
|---|---|
|200|ОК|
|по умолчанию|Операция завершилась ошибкой.|



### При создании файла
Активирует поток при создании файла в папке OneDrive. ```GET: /datasets/default/triggers/onnewfile```

| Имя| Тип данных|Обязательно|Местонахождение|Значение по умолчанию|Описание|
| ---|---|---|---|---|---|
|folderId|string|Да|запрос|Нет|Уникальный идентификатор папки в OneDrive|


### Ответ

|Имя|Описание|
|---|---|
|200|ОК|
|по умолчанию|Операция завершилась ошибкой.|



### Запускает поток при изменении файла в папке OneDrive
Активирует поток при изменении файла в папке OneDrive. ```GET: /datasets/default/triggers/onupdatedfile```

| Имя| Тип данных|Обязательно|Местонахождение|Значение по умолчанию|Описание|
| ---|---|---|---|---|---|
|folderId|string|Да|запрос|Нет|Уникальный идентификатор папки в OneDrive|


### Ответ

|Имя|Описание|
|---|---|
|200|ОК|
|по умолчанию|Операция завершилась ошибкой.|



### Извлечение папки
Извлекает папку в OneDrive. ```POST: /datasets/default/extractFolderV2```

| Имя| Тип данных|Обязательно|Местонахождение|Значение по умолчанию|Описание|
| ---|---|---|---|---|---|
|источник|string|Да|запрос|Нет|Путь к файлу архива|
|ресурс destination|строка|Да|запрос|Нет|Путь в OneDrive для извлечения содержимого архива|
|overwrite|Логическое|Нет|запрос|нет|Перезаписывает конечные файлы, если задано значение "true"|


### Ответ

|Имя|Описание|
|---|---|
|200|ОК|
|по умолчанию|Операция завершилась ошибкой.|



## Определения объектов

#### DataSetsMetadata

|Имя свойства | Тип данных | Обязательно|
|---|---|---|
|tabular|Не определен|Нет|
|blob-объект|Не определен|Нет|


#### TabularDataSetsMetadata

|Имя свойства | Тип данных |Обязательно|
|---|---|---|
|источник|строка|Нет|
|displayName|строка|Нет|
|urlEncoding|string|Нет|
|tableDisplayName|string|Нет|
|tablePluralName|string|Нет|


#### BlobDataSetsMetadata

|Имя свойства | Тип данных |Обязательно|
|---|---|---|
|источник|строка|Нет|
|displayName|строка|Нет|
|urlEncoding|string|Нет|



#### BlobMetadata

|Имя свойства | Тип данных |Обязательно|
|---|---|---|
|Идентификатор|string|Нет|
|Имя|строка|Нет|
|DisplayName|строка|Нет|
|Путь|string|Нет|
|LastModified|string|Нет|
|Размер|целое число|Нет|
|MediaType|строка|Нет|
|IsFolder|Логическое|Нет|
|ETag|строка|Нет|
|FileLocator|строка|Нет|


## Дальнейшие действия
После добавления API OneDrive в PowerApps Enterprise [предоставьте пользователям разрешения](../power-apps/powerapps-manage-api-connection-user-access.md) на использование API в своих приложениях.

[Создание приложения логики](../app-service-logic/app-service-logic-create-a-logic-app.md).


[5]: https://account.live.com/developers/applications/create
[6]: ./media/create-api-onedrive/onedrive-new-app.png
[7]: ./media/create-api-onedrive/onedrive-app-api-settings.png

<!---HONumber=AcomDC_0302_2016-->