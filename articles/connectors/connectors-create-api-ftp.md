<properties
pageTitle="Использование соединителя FTP в приложениях логики | Microsoft Azure"
description="Создание приложений логики с помощью службы приложений Azure. Подключение к FTP-серверу для управления файлами. Вы можете выполнять различные действия, такие как отправка, обновление, получение и удаление файлов на FTP-сервере."
services="logic-apps"	
documentationCenter=".net,nodejs,java" 	
authors="msftman"	
manager="erikre"	
editor=""
tags="connectors" />

<tags
ms.service="logic-apps"
ms.devlang="multiple"
ms.topic="article"
ms.tgt_pltfrm="na"
ms.workload="integration"
ms.date="07/22/2016"
ms.author="deonhe"/>

# Начало работы с соединителем FTP

Соединитель FTP можно использовать для создания и мониторинга файлов на FTP-сервере, а также для управления ими.

Чтобы использовать [соединитель](./apis-list.md), сначала нужно создать приложение логики. Вы можете начать с [создания приложения логики](../app-service-logic/app-service-logic-create-a-logic-app.md).

## Подключение к FTP

Чтобы обеспечить доступ приложения логики к какой-либо службе, сначала необходимо создать *подключение* к этой службе. Таким образом вы установите [подключение](./connectors-overview.md) между приложением логики и другой службой.

### Создание подключения к FTP

>[AZURE.INCLUDE [Шаги по созданию подключения к FTP](../../includes/connectors-create-api-ftp.md)]

## Использование триггера FTP

Триггер — это событие, которое можно использовать для запуска рабочего процесса, определенного в приложении логики. Дополнительные сведения о триггерах см. [здесь](../app-service-logic/app-service-logic-what-are-logic-apps.md#logic-app-concepts).

>[AZURE.IMPORTANT]Для соединителя FTP требуется доступный через Интернет FTP-сервер, который настроен для работы с пассивным режимом. Кроме того, соединитель FTP **не поддерживает неявную конфигурацию FTPS (FTP через SSL)**. Он поддерживает только явную конфигурацию FTPS (FTP через SSL).

Из этого примера вы узнаете, как использовать триггер **FTP - When a file is added or modified** (FTP — при добавлении или изменении файла) для запуска рабочего процесса приложения логики при добавлении или изменении файла на FTP-сервере. В контексте предприятия можно использовать этот триггер, чтобы отслеживать в папке FTP новые файлы, представляющие заказы от клиентов. Вы также можете использовать действие соединителя FTP **Get file content** (Получить содержимое файла), чтобы получить содержимое заказа для дальнейшей обработки и хранения в базе данных заказов.

1. Введите *ftp* в поле поиска в конструкторе приложений логики, а затем выберите триггер **FTP - When a file is added or modified**.![Триггер FTP, изображение 1](./media/connectors-create-api-ftp/ftp-trigger-1.png) После этого откроется элемент управления **When a file is added or modified** (При добавлении или изменении файла). ![Триггер FTP, изображение 2](./media/connectors-create-api-ftp/ftp-trigger-2.png)
- Щелкните **…** в правой части элемента управления. Откроется элемент управления средства выбора папок. ![Триггер FTP, изображение 3](./media/connectors-create-api-ftp/ftp-trigger-3.png)
- Щелкните **>** (стрелку вправо) и перейдите к папке, которую требуется отслеживать на добавление или изменение файлов. Выберите папку и обратите внимание, что теперь она отображается в элементе управления **Папка**. ![Триггер FTP, изображение 4](./media/connectors-create-api-ftp/ftp-trigger-4.png)


На этом этапе для приложения логики настроен триггер, который будет активировать другие триггеры и действия в рабочем процессе при изменении или создании файла в указанной папке FTP.

>[AZURE.NOTE]Чтобы приложение логики функционировало, оно должно содержать по крайней мере один триггер и одно действие. Шаги по добавлению действия описаны в следующем разделе.



## Использование действия FTP

Действие — это операция, выполняемая рабочим процессом, определенным в приложении логики. Дополнительные сведения о действиях см. [здесь](../app-service-logic/app-service-logic-what-are-logic-apps.md#logic-app-concepts).

Добавив триггер, выполните следующие шаги, чтобы добавить действие для получения содержимого нового или измененного файла, найденного с помощью триггера.

1. Щелкните **+ Новый шаг**, чтобы добавить действие для получения содержимого файла на FTP-сервере.
- Щелкните ссылку **Добавить действие**. ![Действие FTP, изображение 1](./media/connectors-create-api-ftp/ftp-action-1.png)
- Введите запрос *FTP*, чтобы найти все действия, связанные с FTP.
- Выберите действие **FTP - Get file content** (FTP — получить содержимое файла), которое будет выполняться при обнаружении нового или измененного файла в папке FTP. ![Действие FTP, изображение 2](./media/connectors-create-api-ftp/ftp-action-2.png) Откроется элемент управления **Get file content** (Получить содержимое файла). **Примечание**. Вам будет предложено авторизовать приложение логики для доступа к учетной записи FTP-сервера, если вы еще не сделали это. ![Действие FTP, изображение 3](./media/connectors-create-api-ftp/ftp-action-3.png)
- Выберите элемент управления **Файл** (пустое поле, расположенное под надписью **ФАЙЛ***). Здесь можно использовать одно из множества свойств нового или измененного файла, найденного на FTP-сервере.
- Выберите параметр **Содержимое файла**. ![Действие FTP, изображение 4](./media/connectors-create-api-ftp/ftp-action-4.png)
-  Элемент управления будет обновлен. Таким образом, действие **FTP - Get file content** (FTP — получить содержимое файла) получит *содержимое* нового или измененного файла на FTP-сервере. ![Действие FTP, изображение 5](./media/connectors-create-api-ftp/ftp-action-5.png)
- Сохраните внесенные изменения, а затем добавьте файл в папку FTP, чтобы протестировать рабочий процесс.

На этом этапе для приложения логики настроен триггер, который отслеживает папку на FTP-сервере и запускает рабочий процесс при обнаружении в ней нового или измененного файла.

Кроме того, для приложения логики настроено действие, которое получает содержимое нового или измененного файла.

Теперь вы можете добавить другое действие, например [SQL Server — вставить строку](./connectors-create-api-sqlazure.md#insert-row), которое будет вставлять содержимое нового или измененного файла в таблицу базы данных SQL.

## Технические сведения

Ниже приведены сведения о триггерах, действиях и ответах, которые поддерживает это подключение.

## Триггеры FTP

В FTP доступны следующие триггеры.

|Триггер | Описание|
|--- | ---|
|[When a file is added or modified (При добавлении или изменении файла)](connectors-create-api-ftp.md#when-a-file-is-added-or-modified)|Активирует поток при добавлении или изменении файла в папке.|


## Действия FTP

Соединитель FTP предоставляет следующие действия.


|Действие|Описание|
|--- | ---|
|[Get file metadata (Получение метаданных файла)](connectors-create-api-ftp.md#get-file-metadata)|Извлекает метаданные файла.|
|[Обновление файла](connectors-create-api-ftp.md#update-file)|Обновляет файл.|
|[Удаление файла](connectors-create-api-ftp.md#delete-file)|Удаляет файл.|
|[Получение метаданных файла с помощью пути](connectors-create-api-ftp.md#get-file-metadata-using-path)|Извлекает метаданные файла с помощью пути.|
|[Получение содержимого файла с помощью пути](connectors-create-api-ftp.md#get-file-content-using-path)|Извлекает содержимое файла с помощью пути.|
|[Получение содержимого файла](connectors-create-api-ftp.md#get-file-content)|Извлекает содержимое файла.|
|[Создание файла](connectors-create-api-ftp.md#create-file)|Создает файл.|
|[Копирование файла](connectors-create-api-ftp.md#copy-file)|Копирует файл на FTP-сервер.|
|[List files in folder (Вывод списка файлов в папке)](connectors-create-api-ftp.md#list-files-in-folder)|Извлекает список файлов и вложенных папок в папке.|
|[List files in root folder (Вывод списка файлов в корневой папке)](connectors-create-api-ftp.md#list-files-in-root-folder)|Извлекает список файлов и вложенных папок в корневой папке.|
|[Извлечение папки](connectors-create-api-ftp.md#extract-folder)|Извлекает файл архива в папку (например, ZIP-файл).|
### Сведения о действиях

Ниже приведены подробные сведения о действиях и триггерах этого соединителя, а также ответы на них.



### Get file metadata (Получение метаданных файла)
Извлекает метаданные файла.


|Имя свойства| Отображаемое имя|Описание|
| ---|---|---|
|id*|Файл|Выбор файла|

Звездочка (*) означает, что свойство является обязательным.

#### Сведения о выходных данных

BlobMetadata


| Имя свойства | Тип данных |
|---|---|---|
|Идентификатор|строка|
|Имя|строка|
|DisplayName|строка|
|Путь|строка|
|LastModified|строка|
|Размер|целое число|
|MediaType|строка|
|IsFolder|Логическое|
|ETag|string|
|FileLocator|string|




### Обновление файла
Обновляет файл.


|Имя свойства| Отображаемое имя|Описание|
| ---|---|---|
|id*|Файл|Выбор файла|
|body*|содержимое файла;|Содержимое файла|

Звездочка (*) означает, что свойство является обязательным.

#### Сведения о выходных данных

BlobMetadata


| Имя свойства | Тип данных |
|---|---|---|
|Идентификатор|строка|
|Имя|строка|
|DisplayName|строка|
|Путь|строка|
|LastModified|строка|
|Размер|целое число|
|MediaType|строка|
|IsFolder|Логическое|
|ETag|string|
|FileLocator|string|




### Удаление файла
Удаляет файл.


|Имя свойства| Отображаемое имя|Описание|
| ---|---|---|
|id*|Файл|Выбор файла|

Звездочка (*) означает, что свойство является обязательным.




### Получение метаданных файла с помощью пути
Извлекает метаданные файла с помощью пути.


|Имя свойства| Отображаемое имя|Описание|
| ---|---|---|
|path*|Путь к файлу|Выбор файла|

Звездочка (*) означает, что свойство является обязательным.

#### Сведения о выходных данных

BlobMetadata


| Имя свойства | Тип данных |
|---|---|---|
|Идентификатор|строка|
|Имя|строка|
|DisplayName|строка|
|Путь|строка|
|LastModified|строка|
|Размер|целое число|
|MediaType|строка|
|IsFolder|Логическое|
|ETag|string|
|FileLocator|string|




### Получение содержимого файла с помощью пути
Извлекает содержимое файла с помощью пути.


|Имя свойства| Отображаемое имя|Описание|
| ---|---|---|
|path*|Путь к файлу|Выбор файла|

Звездочка (*) означает, что свойство является обязательным.




### Получение содержимого файла
Извлекает содержимое файла.


|Имя свойства| Отображаемое имя|Описание|
| ---|---|---|
|id*|Файл|Выбор файла|

Звездочка (*) означает, что свойство является обязательным.




### Создание файла
Создает файл.


|Имя свойства| Отображаемое имя|Описание|
| ---|---|---|
|folderPath*|Путь к папке|Выбор папки|
|name*|Имя файла|Имя файла|
|body*|содержимое файла;|Содержимое файла|

Звездочка (*) означает, что свойство является обязательным.

#### Сведения о выходных данных

BlobMetadata


| Имя свойства | Тип данных |
|---|---|---|
|Идентификатор|строка|
|Имя|строка|
|DisplayName|строка|
|Путь|строка|
|LastModified|строка|
|Размер|целое число|
|MediaType|строка|
|IsFolder|Логическое|
|ETag|string|
|FileLocator|string|




### Копирование файла
Копирует файл на FTP-сервер.


|Имя свойства| Отображаемое имя|Описание|
| ---|---|---|
|source*|URL-адрес исходного файла|URL-адрес исходного файла|
|destination*|Путь к конечному файлу|Путь к конечному файлу, включая имя конечного файла|
|перезаписать|Перезаписать?|Перезаписывает конечный файл, если задано значение "true"|

Звездочка (*) означает, что свойство является обязательным.

#### Сведения о выходных данных

BlobMetadata


| Имя свойства | Тип данных |
|---|---|---|
|Идентификатор|строка|
|Имя|строка|
|DisplayName|строка|
|Путь|строка|
|LastModified|строка|
|Размер|целое число|
|MediaType|строка|
|IsFolder|Логическое|
|ETag|string|
|FileLocator|string|




### When a file is added or modified (При добавлении или изменении файла)
Активирует поток при добавлении или изменении файла в папке.


|Имя свойства| Отображаемое имя|Описание|
| ---|---|---|
|folderId*|Папка|Выбор папки|

Звездочка (*) означает, что свойство является обязательным.




### List files in folder (Вывод списка файлов в папке)
Извлекает список файлов и вложенных папок в папке.


|Имя свойства| Отображаемое имя|Описание|
| ---|---|---|
|id*|Папка|Выбор папки|

Звездочка (*) означает, что свойство является обязательным.



#### Сведения о выходных данных

BlobMetadata


| Имя свойства | Тип данных |
|---|---|---|
|Идентификатор|строка|
|Имя|строка|
|DisplayName|строка|
|Путь|строка|
|LastModified|строка|
|Размер|целое число|
|MediaType|строка|
|IsFolder|Логическое|
|ETag|string|
|FileLocator|string|




### List files in root folder (Вывод списка файлов в корневой папке)
Извлекает список файлов и вложенных папок в корневой папке.


Для этого вызова параметры отсутствуют

#### Сведения о выходных данных

BlobMetadata


| Имя свойства | Тип данных |
|---|---|---|
|Идентификатор|строка|
|Имя|строка|
|DisplayName|строка|
|Путь|строка|
|LastModified|строка|
|Размер|целое число|
|MediaType|строка|
|IsFolder|Логическое|
|ETag|string|
|FileLocator|string|




### Извлечение папки
Извлекает файл архива в папку (например, ZIP-файл).


|Имя свойства| Отображаемое имя|Описание|
| ---|---|---|
|source*|Путь к исходному файлу архива|Путь к файлу архива|
|destination*|Путь к конечной папке|Путь к конечной папке|
|перезаписать|Перезаписать?|Перезаписывает конечные файлы, если задано значение "true"|

Звездочка (*) означает, что свойство является обязательным.



#### Сведения о выходных данных

BlobMetadata


| Имя свойства | Тип данных |
|---|---|---|
|Идентификатор|строка|
|Имя|строка|
|DisplayName|строка|
|Путь|строка|
|LastModified|строка|
|Размер|целое число|
|MediaType|строка|
|IsFolder|Логическое|
|ETag|string|
|FileLocator|string|



## Ответы HTTP

Описанные выше действия и триггеры могут возвращать один или несколько кодов состояния HTTP, которые приведены ниже.

|Имя|Описание|
|---|---|
|200|ОК|
|202|Принято|
|400|Ошибка запроса|
|401|Не авторизовано|
|403|Запрещено|
|404|Не найдено|
|500|Внутренняя ошибка сервера. Произошла неизвестная ошибка.|
|по умолчанию|Операция завершилась ошибкой.|







## Дальнейшие действия
[Создайте приложение логики](../app-service-logic/app-service-logic-create-a-logic-app.md)

<!---HONumber=AcomDC_0803_2016-->