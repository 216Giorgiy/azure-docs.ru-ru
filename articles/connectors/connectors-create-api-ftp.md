---
title: "Использование соединителя FTP в приложениях логики | Документация Майкрософт"
description: "Создание приложений логики с помощью службы приложений Azure. Подключение к FTP-серверу для управления файлами. Вы можете выполнять различные действия, такие как отправка, обновление, получение и удаление файлов на FTP-сервере."
services: logic-apps
documentationcenter: .net,nodejs,java
author: msftman
manager: erikre
editor: 
tags: connectors
ms.assetid: d83c55fe-eb59-4b7b-a5ec-afac5c772616
ms.service: logic-apps
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: integration
ms.date: 07/22/2016
ms.author: deonhe
translationtype: Human Translation
ms.sourcegitcommit: 2ea002938d69ad34aff421fa0eb753e449724a8f
ms.openlocfilehash: f08180c196a1f573529c9fed52c7ae5c3869da6d


---
# <a name="get-started-with-the-ftp-connector"></a>Начало работы с соединителем FTP
Соединитель FTP можно использовать для создания и мониторинга файлов на FTP-сервере, а также для управления ими. 

Чтобы использовать [соединитель](apis-list.md), сначала нужно создать приложение логики. Вы можете начать с [создания приложения логики](../app-service-logic/app-service-logic-create-a-logic-app.md).

## <a name="connect-to-ftp"></a>Подключение к FTP
Чтобы обеспечить доступ приложения логики к какой-либо службе, сначала необходимо создать *подключение* к этой службе. Таким образом вы установите [соединение](connectors-overview.md) между приложением логики и другой службой.  

### <a name="create-a-connection-to-ftp"></a>Создание подключения к FTP
> [!INCLUDE [Steps to create a connection to FTP](../../includes/connectors-create-api-ftp.md)]
> 
> 

## <a name="use-a-ftp-trigger"></a>Использование триггера FTP
Триггер — это событие, которое можно использовать для запуска рабочего процесса, определенного в приложении логики. [Дополнительные сведения о триггерах](../app-service-logic/app-service-logic-what-are-logic-apps.md#logic-app-concepts).  

> [!IMPORTANT]
> Для соединителя FTP требуется доступный через Интернет FTP-сервер, который настроен для работы с пассивным режимом. Кроме того, соединитель FTP **не поддерживает неявную конфигурацию FTPS (FTP через SSL)**. Он поддерживает только явную конфигурацию FTPS (FTP через SSL).  
> 
> 

Из этого примера вы узнаете, как использовать триггер **FTP - When a file is added or modified** (FTP — при добавлении или изменении файла) для запуска рабочего процесса приложения логики при добавлении или изменении файла на FTP-сервере. В контексте предприятия можно использовать этот триггер, чтобы отслеживать в папке FTP новые файлы, представляющие заказы от клиентов.  Вы также можете использовать действие соединителя FTP **Get file content** (Получение содержимого файла), чтобы получить содержимое заказа для дальнейшей обработки и сохранения в базе данных заказов.

1. В конструкторе приложений логики в поле поиска введите *sftp*, а затем выберите триггер **SFTP - When a file is added or modified** (SFTP — при добавлении или изменении файла).   
   ![Изображение 1. Триггер FTP](./media/connectors-create-api-ftp/ftp-trigger-1.png)  
   Откроется элемент управления **When a file is added or modified** (При добавлении или изменении файла).  
   ![Изображение 2. Триггер FTP](./media/connectors-create-api-ftp/ftp-trigger-2.png)  
2. В правой части элемента управления щелкните **…**. Откроется элемент управления средства выбора папок.  
   ![Изображение 3. Триггер FTP](./media/connectors-create-api-ftp/ftp-trigger-3.png)  
3. Щелкните **>** (стрелку вправо) и перейдите к папке, в которой требуется отслеживать добавление или изменение файлов. Выберите папку и обратите внимание, что теперь она отображается в элементе управления **Папка**.  
   ![Изображение 4. Триггер FTP](./media/connectors-create-api-ftp/ftp-trigger-4.png)   

На этом этапе для приложения логики настроен триггер, который будет активировать другие триггеры и действия в рабочем процессе при изменении или создании файла в указанной папке FTP. 

> [!NOTE]
> Чтобы приложение логики функционировало, оно должно содержать по крайней мере один триггер и одно действие. Шаги по добавлению действия описаны в следующем разделе.  
> 
> 

## <a name="use-a-ftp-action"></a>Использование действия FTP
Действие — это операция, выполняемая рабочим процессом, определенным в приложении логики. [Дополнительные сведения о действиях](../app-service-logic/app-service-logic-what-are-logic-apps.md#logic-app-concepts).  

Добавив триггер, выполните следующие шаги, чтобы добавить действие для получения содержимого нового или измененного файла, найденного с помощью триггера.    

1. Щелкните **+ Новый шаг**, чтобы добавить действие для получения содержимого файла на FTP-сервере.  
2. Щелкните ссылку **Добавить действие**.  
   ![Изображение 1. Действие FTP](./media/connectors-create-api-ftp/ftp-action-1.png)  
3. Введите *FTP* в поле поиска, чтобы найти все действия, связанные с FTP.
4. Выберите действие **FTP - Get file content** (FTP — получение содержимого файла), которое будет выполняться при обнаружении нового или измененного файла в папке FTP.      
   ![Изображение 2. Действие FTP](./media/connectors-create-api-ftp/ftp-action-2.png)  
   Откроется элемент управления **Get file content** (Получение содержимого файла). **Примечание**. Вам будет предложено авторизовать приложение логики для доступа к учетной записи FTP-сервера, если вы еще не сделали это.  
   ![Изображение 3. Действие FTP](./media/connectors-create-api-ftp/ftp-action-3.png)   
5. Выберите элемент управления **Файл** (пустое поле, расположенное под надписью **Файл***). Здесь можно использовать одно из множества свойств нового или измененного файла, найденного на FTP-сервере.  
6. Выберите параметр **Содержимое файла**.  
   ![Изображение 4. Действие FTP](./media/connectors-create-api-ftp/ftp-action-4.png)   
7. Элемент управления будет обновлен. Значит, действие **FTP - Get file content** (FTP — получение содержимого файла) получит *содержимое* нового или измененного файла на FTP-сервере.      
   ![Изображение 5. Действие FTP](./media/connectors-create-api-ftp/ftp-action-5.png)     
8. Сохраните внесенные изменения, а затем добавьте файл в папку FTP, чтобы протестировать рабочий процесс.    

На этом этапе для приложения логики настроен триггер, который отслеживает папку на FTP-сервере и запускает рабочий процесс при обнаружении в ней нового или измененного файла. 

Кроме того, для приложения логики настроено действие, которое получает содержимое нового или измененного файла.

Теперь вы можете добавить другое действие, например [SQL Server - insert row](connectors-create-api-sqlazure.md#insert-row) (SQL Server — вставка строки), которое будет вставлять содержимое нового или измененного файла в таблицу базы данных SQL.  

## <a name="technical-details"></a>Технические сведения
Ниже приведены сведения о триггерах, действиях и ответах, которые поддерживает это подключение.

## <a name="ftp-triggers"></a>Триггеры FTP
В FTP доступны следующие триггеры.  

| Триггер | Описание |
| --- | --- |
| [When a file is added or modified](connectors-create-api-ftp.md#when-a-file-is-added-or-modified) |Активирует поток при добавлении или изменении файла в папке. |

## <a name="ftp-actions"></a>Действия FTP
Соединитель FTP предоставляет следующие действия.

| Действие | Description (Описание) |
| --- | --- |
| [Получение метаданных файла](connectors-create-api-ftp.md#get-file-metadata) |Извлекает метаданные файла. |
| [Обновление файла](connectors-create-api-ftp.md#update-file) |Обновляет файл. |
| [Удаление файла](connectors-create-api-ftp.md#delete-file) |Удаляет файл. |
| [Получение метаданных файла с помощью пути](connectors-create-api-ftp.md#get-file-metadata-using-path) |Извлекает метаданные файла с помощью пути. |
| [Получение содержимого файла с помощью пути](connectors-create-api-ftp.md#get-file-content-using-path) |Извлекает содержимое файла с помощью пути. |
| [Получение содержимого файла](connectors-create-api-ftp.md#get-file-content) |Извлекает содержимое файла. |
| [Создание файла](connectors-create-api-ftp.md#create-file) |Создает файл. |
| [Копирование файла](connectors-create-api-ftp.md#copy-file) |Копирует файл на FTP-сервер. |
| [Вывод списка файлов в папке](connectors-create-api-ftp.md#list-files-in-folder) |Извлекает список файлов и вложенных папок в папке. |
| [Вывод списка файлов в корневой папке](connectors-create-api-ftp.md#list-files-in-root-folder) |Извлекает список файлов и вложенных папок в корневой папке. |
| [Extract folder](connectors-create-api-ftp.md#extract-folder) |Извлекает файл архива в папку (например, ZIP-файл). |

### <a name="action-details"></a>Сведения о действиях
Ниже приведены подробные сведения о действиях и триггерах этого соединителя, а также ответы на них.

### <a name="get-file-metadata"></a>Get file metadata (Получение метаданных файла)
Извлекает метаданные файла. 

| Имя свойства | Отображаемое имя | Description (Описание) |
| --- | --- | --- |
| id* |Файл |Выбор файла |

Звездочка (*) означает, что свойство является обязательным.

#### <a name="output-details"></a>Сведения о выходных данных
BlobMetadata

| Имя свойства | Тип данных |
| --- | --- | --- |
| id |string |
| Имя |string |
| displayName |string |
| path |string |
| LastModified |string |
| Размер |целое число |
| MediaType |string |
| IsFolder |Логическое |
| ETag |string |
| FileLocator |string |

### <a name="update-file"></a>Обновление файла
Обновляет файл. 

| Имя свойства | Отображаемое имя | Description (Описание) |
| --- | --- | --- |
| id* |Файл |Выбор файла |
| body* |содержимое файла; |Содержимое файла |

Звездочка (*) означает, что свойство является обязательным.

#### <a name="output-details"></a>Сведения о выходных данных
BlobMetadata

| Имя свойства | Тип данных |
| --- | --- | --- |
| id |string |
| Имя |string |
| displayName |string |
| path |string |
| LastModified |string |
| Размер |целое число |
| MediaType |string |
| IsFolder |Логическое |
| ETag |string |
| FileLocator |строка |

### <a name="delete-file"></a>Удаление файла
Удаляет файл. 

| Имя свойства | Отображаемое имя | Description (Описание) |
| --- | --- | --- |
| id* |Файл |Выбор файла |

Звездочка (*) означает, что свойство является обязательным.

### <a name="get-file-metadata-using-path"></a>Получение метаданных файла с помощью пути
Извлекает метаданные файла с помощью пути. 

| Имя свойства | Отображаемое имя | Описание |
| --- | --- | --- |
| path* |Путь к файлу |Выбор файла |

Звездочка (*) означает, что свойство является обязательным.

#### <a name="output-details"></a>Сведения о выходных данных
BlobMetadata

| Имя свойства | Тип данных |
| --- | --- | --- |
| id |string |
| Имя |string |
| displayName |string |
| path |string |
| LastModified |string |
| Размер |целое число |
| MediaType |string |
| IsFolder |Логическое |
| ETag |string |
| FileLocator |строка |

### <a name="get-file-content-using-path"></a>Получение содержимого файла с помощью пути
Извлекает содержимое файла с помощью пути. 

| Имя свойства | Отображаемое имя | Описание |
| --- | --- | --- |
| path* |Путь к файлу |Выбор файла |

Звездочка (*) означает, что свойство является обязательным.

### <a name="get-file-content"></a>Получение содержимого файла
Извлекает содержимое файла. 

| Имя свойства | Отображаемое имя | Description (Описание) |
| --- | --- | --- |
| id* |Файл |Выбор файла |

Звездочка (*) означает, что свойство является обязательным.

### <a name="create-file"></a>Создание файла
Создает файл. 

| Имя свойства | Отображаемое имя | Description (Описание) |
| --- | --- | --- |
| folderPath* |Путь к папке |Выбор папки |
| name* |Имя файла |Имя файла |
| body* |содержимое файла; |Содержимое файла |

Звездочка (*) означает, что свойство является обязательным.

#### <a name="output-details"></a>Сведения о выходных данных
BlobMetadata

| Имя свойства | Тип данных |
| --- | --- | --- |
| id |string |
| Имя |string |
| displayName |string |
| path |string |
| LastModified |string |
| Размер |целое число |
| MediaType |string |
| IsFolder |Логическое |
| ETag |string |
| FileLocator |string |

### <a name="copy-file"></a>Копирование файла
Копирует файл на FTP-сервер. 

| Имя свойства | Отображаемое имя | Description (Описание) |
| --- | --- | --- |
| source* |URL-адрес исходного файла |URL-адрес исходного файла |
| destination* |Путь к конечному файлу |Путь к конечному файлу, включая имя конечного файла |
| overwrite |Перезаписать? |Перезаписывает конечный файл, если задано значение "true" |

Звездочка (*) означает, что свойство является обязательным.

#### <a name="output-details"></a>Сведения о выходных данных
BlobMetadata

| Имя свойства | Тип данных |
| --- | --- | --- |
| id |string |
| Имя |string |
| displayName |string |
| path |string |
| LastModified |string |
| Размер |целое число |
| MediaType |string |
| IsFolder |Логическое |
| ETag |string |
| FileLocator |string |

### <a name="when-a-file-is-added-or-modified"></a>When a file is added or modified (При добавлении или изменении файла)
Активирует поток при добавлении или изменении файла в папке. 

| Имя свойства | Отображаемое имя | Description (Описание) |
| --- | --- | --- |
| folderId* |Папка |Выбор папки |

Звездочка (*) означает, что свойство является обязательным.

### <a name="list-files-in-folder"></a>List files in folder (Вывод списка файлов в папке)
Извлекает список файлов и вложенных папок в папке. 

| Имя свойства | Отображаемое имя | Description (Описание) |
| --- | --- | --- |
| id* |Папка |Выбор папки |

Звездочка (*) означает, что свойство является обязательным.

#### <a name="output-details"></a>Сведения о выходных данных
BlobMetadata

| Имя свойства | Тип данных |
| --- | --- | --- |
| id |string |
| Имя |string |
| displayName |string |
| path |string |
| LastModified |string |
| Размер |целое число |
| MediaType |string |
| IsFolder |Логическое |
| ETag |string |
| FileLocator |строка |

### <a name="list-files-in-root-folder"></a>List files in root folder (Вывод списка файлов в корневой папке)
Извлекает список файлов и вложенных папок в корневой папке. 

Для этого вызова параметры отсутствуют

#### <a name="output-details"></a>Сведения о выходных данных
BlobMetadata

| Имя свойства | Тип данных |
| --- | --- | --- |
| id |string |
| Имя |string |
| displayName |string |
| path |string |
| LastModified |string |
| Размер |целое число |
| MediaType |string |
| IsFolder |Логическое |
| ETag |string |
| FileLocator |string |

### <a name="extract-folder"></a>Извлечение папки
Извлекает файл архива в папку (например, ZIP-файл). 

| Имя свойства | Отображаемое имя | Description (Описание) |
| --- | --- | --- |
| source* |Путь к исходному файлу архива |Путь к файлу архива |
| destination* |Путь к конечной папке |Путь к конечной папке |
| overwrite |Перезаписать? |Перезаписывает конечные файлы, если задано значение "true" |

Звездочка (*) означает, что свойство является обязательным.

#### <a name="output-details"></a>Сведения о выходных данных
BlobMetadata

| Имя свойства | Тип данных |
| --- | --- | --- |
| id |string |
| Имя |string |
| displayName |string |
| path |string |
| LastModified |string |
| Размер |целое число |
| MediaType |string |
| IsFolder |Логическое |
| ETag |string |
| FileLocator |строка |

## <a name="http-responses"></a>Ответы HTTP
Описанные выше действия и триггеры могут возвращать один или несколько кодов состояния HTTP, которые приведены ниже. 

| Имя | Описание |
| --- | --- |
| 200 |ОК |
| 202 |Принято |
| 400 |Ошибка запроса |
| 401 |Не авторизовано |
| 403 |Запрещено |
| 404 |Не найдено |
| 500 |Внутренняя ошибка сервера. Произошла неизвестная ошибка. |
| по умолчанию |Операция завершилась ошибкой. |

## <a name="next-steps"></a>Дальнейшие действия
[Создайте приложение логики](../app-service-logic/app-service-logic-create-a-logic-app.md)




<!--HONumber=Nov16_HO3-->


