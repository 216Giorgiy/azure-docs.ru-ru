<properties
pageTitle="Добавление API Salesforce в службу PowerApps Enterprise и приложения логики | Microsoft Azure"
description="Обзор API Salesforce и параметров интерфейса API REST"
services=""	
documentationCenter="" 	
authors="msftman"	
manager="erikre"	
editor=""
tags="connectors"/>

<tags
ms.service="multiple"
ms.devlang="na"
ms.topic="article"
ms.tgt_pltfrm="na"
ms.workload="na"
ms.date="02/25/2016"
ms.author="deonhe"/>

# Начало работы с API-интерфейсом Salesforce
Подключитесь к Salesforce, чтобы создавать объекты, получать их и выполнять многие другие действия. API Salesforce можно использовать из:

- PowerApps; 
- приложений логики. 

>[AZURE.NOTE] Эта версия статьи предназначена для приложений логики со схемой версии 2015-08-01-preview. Чтобы узнать версию схемы 2014-12-01-preview, щелкните [API Salesforce](../app-service-logic/app-service-logic-connector-salesforce.md).

С помощью Salesforce вы можете:

- формировать бизнес-процессы на основе данных, получаемых из Salesforce; 
- использовать триггеры при создании или обновлении объекта;
- использовать действия по созданию объектов, их удалению и т. д. Эти действия получают ответ и делают выходные данные доступными для использования другими действиями. Например, при создании нового объекта в Salesforce можно отправить сообщение с помощью Office 365.
- Добавлять API Salesforce в службу PowerApps Enterprise. После этого пользователи смогут использовать этот API в своих приложениях. 

Сведения о добавлении API в PowerApps Enterprise см. в статье [Регистрация API в PowerApps](../power-apps/powerapps-register-from-available-apis.md).

Сведения о добавлении операции в приложения логики см. в статье [Создание приложения логики](../app-service-logic/app-service-logic-create-a-logic-app.md).

## Триггеры и действия
API Salesforce предоставляет следующие триггеры и действия.

| триггеры; | Действия|
| --- | --- |
|<ul><li>При создании объекта</li><li>При изменении объекта</li></ul> | <ul><li>Создание объекта</li><li>Получение объектов</li><li>При создании объекта</li><li>При изменении объекта</li><li>Удаление объекта</li><li>Получение объекта</li><li>Получение типов объектов (SObjects)</li><li>Обновление объекта</li></ul>

Все API-интерфейсы поддерживают данные в форматах JSON и XML.

## Создание подключения к Salesforce 

### Добавление дополнительных настроек в PowerApps
При добавлении Salesforce в PowerApps Enterprise нужно ввести значения **ключа приложения** и **секрета приложения** для приложения Salesforce. В приложении Salesforce также используется **URL-адрес перенаправления**. Если у вас нет приложения Salesforce, создайте его, выполнив приведенные ниже действия.

1. [Войдите на домашнюю страницу разработчиков для Salesforce][5], выберите свой профиль и щелкните **Setup** (Настройка). ![домашняя страница SalesForce][6]

3. Выберите **Создать** и **Приложения**. На странице **Apps** (Приложения) в разделе **Connected Apps** (Подключенные приложения) нажмите кнопку **New** (Создать). ![создание приложения SalesForce][7]

4. На экране **Новое подключенное приложение**:

	1. Введите значение в поле **Connected App Name** (Имя подключенного приложения).  
	2. Введите значение в поле **API Name** (Имя API).  
	3. Введите значение в поле **Contact Email** (Контактный электронный адрес).  
	4. В разделе _API (Enable OAuth Settings)_ (API (включение параметров OAuth)) установите флажок **Enable OAuth Settings** (Включить параметры OAuth) и в поле **Callback URL** (URL-адрес обратного вызова) введите значение, которое отображалось при добавлении нового API Salesforce на портале Azure.  

5. В разделе _Выбранные области OAuth_ добавьте следующие области в поле **Выбранные области OAuth**.

	- Доступ к данным Chatter и управление ими (chatter\_api)
	- Доступ к своим данным и управление ими (api)
	- Разрешить доступ к своему уникальному идентификатору (openid)
	- Выполнять запросы от вашего имени в любое время (refresh\_token, offline\_access)

6. **Сохраните** изменения: ![новое приложение SalesForce][8]

Скопируйте и вставьте значения **ключа приложения** и **секрета приложения** в конфигурацию Salesforce на портале Azure.

### Добавление дополнительных настроек в приложения логики
При добавлении API в приложения логики эти приложения необходимо авторизовать для подключения к Salesforce.

1. Войдите в учетную запись Salesforce.
2. Разрешите приложениям логики подключаться к учетной записи Salesforce и использовать ее. 

После создания подключения укажите свойства Salesforce, например имя таблицы. Эти свойства описаны далее в **справочнике по REST API**.

>[AZURE.TIP] Это подключение можно использовать в других приложениях логики.

## Справочник по REST API Swagger
Относится к версии 1.0.


### Создание объекта
Создает объект Salesforce. ```POST: /datasets/default/tables/{table}/items```

| Имя| Тип данных|Обязательно|Местонахождение|Значение по умолчанию|Описание|
| ---|---|---|---|---|---|
|таблица|строка|Да|path|Нет|Тип SObject Salesforce (например "Lead")|
|item| |Да|текст|Нет|Создаваемый объект Salesforce|

### Ответ
|Имя|Описание|
|---|---|
|200|ОК|
|по умолчанию|Операция завершилась ошибкой.|



### Получение объекта
Извлекает объект Salesforce. ```GET: /datasets/default/tables/{table}/items/{id}```

| Имя| Тип данных|Обязательно|Местонахождение|Значение по умолчанию|Описание|
| ---|---|---|---|---|---|
|таблица|строка|Да|path|Нет|Тип SObject Salesforce (например "Lead")|
|id|строка|Да|path|Нет|Уникальный идентификатор извлекаемого объекта Salesforce|

### Ответ

|Имя|Описание|
|---|---|
|200|ОК|
|по умолчанию|Операция завершилась ошибкой.|



### Удаление объекта
Удаляет объект Salesforce. ```DELETE: /datasets/default/tables/{table}/items/{id}```

| Имя| Тип данных|Обязательно|Местонахождение|Значение по умолчанию|Описание|
| ---|---|---|---|---|---|
|таблица|строка|Да|path|Нет|Тип SObject Salesforce (например "Lead")|
|id|строка|Да|path|Нет|Уникальный идентификатор удаляемого объекта Salesforce|

### Ответ
|Имя|Описание|
|---|---|
|200|ОК|
|по умолчанию|Операция завершилась ошибкой.|



### Обновление объекта
Обновляет объект Salesforce. ```PATCH: /datasets/default/tables/{table}/items/{id}```

| Имя| Тип данных|Обязательно|Местонахождение|Значение по умолчанию|Описание|
| ---|---|---|---|---|---|
|таблица|строка|Да|path|Нет|Тип SObject Salesforce (например "Lead")|
|id|строка|Да|path|Нет|Уникальный идентификатор обновляемого объекта Salesforce|
|item| |Да|текст|Нет|Объект Salesforce с измененными свойствами|

### Ответ
|Имя|Описание|
|---|---|
|200|ОК|
|по умолчанию|Операция завершилась ошибкой.|



### При создании объекта
Активирует поток при создании объекта в Salesforce. ```GET: /datasets/default/tables/{table}/onnewitems```

| Имя| Тип данных|Обязательно|Местонахождение|Значение по умолчанию|Описание|
| ---|---|---|---|---|---|
|таблица|строка|Да|path|Нет|Тип SObject Salesforce (например "Lead")|
|$skip|целое число|Нет|запрос|Нет|Количество пропускаемых записей (значение по умолчанию — 0)|
|$top|целое число|Нет|запрос|Нет|Максимальное количество извлекаемых записей (значение по умолчанию — 256)|
|$filter|string|Нет|запрос|Нет|Запрос фильтра ODATA для ограничения количества записей|
|$orderby|строка|Нет|запрос|Нет|Запрос orderBy ODATA для указания порядка записей|

### Ответ
|Имя|Описание|
|---|---|
|200|ОК|
|по умолчанию|Операция завершилась ошибкой.|



### При изменении объекта 
Активирует поток при изменении объекта в Salesforce. ```GET: /datasets/default/tables/{table}/onupdateditems```

| Имя| Тип данных|Обязательно|Местонахождение|Значение по умолчанию|Описание|
| ---|---|---|---|---|---|
|таблица|строка|Да|path|Нет|Тип SObject Salesforce (например "Lead")|
|$skip|целое число|Нет|запрос|Нет|Количество пропускаемых записей (значение по умолчанию — 0)|
|$top|целое число|Нет|запрос|Нет|Максимальное количество извлекаемых записей (значение по умолчанию — 256)|
|$filter|string|Нет|запрос|Нет|Запрос фильтра ODATA для ограничения количества записей|
|$orderby|строка|Нет|запрос|Нет|Запрос orderBy ODATA для указания порядка записей|

### Ответ
|Имя|Описание|
|---|---|
|200|ОК|
|по умолчанию|Операция завершилась ошибкой.|



## Определения объектов 

#### DataSetsMetadata

| Имя | Тип данных | Обязательно|
|---|---|---|
|tabular|Не определен|Нет|
|blob-объект|Не определен|Нет|


#### TabularDataSetsMetadata

| Имя | Тип данных | Обязательно|
|---|---|---|
|источник|строка|Нет|
|displayName|строка|Нет|
|urlEncoding|string|Нет|
|tableDisplayName|string|Нет|
|tablePluralName|string|Нет|


#### BlobDataSetsMetadata

| Имя | Тип данных | Обязательно|
|---|---|---|
|источник|строка|Нет|
|displayName|строка|Нет|
|urlEncoding|string|Нет|


#### TableMetadata

| Имя | Тип данных | Обязательно|
|---|---|---|
|name|строка|Нет|
|title|string|Нет|
|x-ms-permission|строка|Нет|
|schema|Не определен|Нет|


#### DataSetsList

| Имя | Тип данных | Обязательно|
|---|---|---|
|value|array|Нет|


#### DataSet

| Имя | Тип данных | Обязательно|
|---|---|---|
|Имя|строка|
|DisplayName|строка|Нет|


#### Таблица

| Имя | Тип данных | Обязательно|
|---|---|---|
|Имя|строка|Нет|
|DisplayName|строка|Нет|


#### Элемент

| Имя | Тип данных | Обязательно|
|---|---|---|
|ItemInternalId|строка|Нет|


#### ItemsList

| Имя | Тип данных | Обязательно|
|---|---|---|
|value|array|Нет|


#### TablesList

| Имя | Тип данных | Обязательно|
|---|---|---|
|value|array|Нет|


## Дальнейшие действия
После добавления API Salesforce в PowerApps Enterprise [предоставьте пользователям разрешения](../power-apps/powerapps-manage-api-connection-user-access.md) на использование API в своих приложениях.

[Создание приложения логики](../app-service-logic/app-service-logic-create-a-logic-app.md).


[5]: https://developer.salesforce.com
[6]: ./media/create-api-salesforce/salesforce-developer-homepage.png
[7]: ./media/create-api-salesforce/salesforce-create-app.png
[8]: ./media/create-api-salesforce/salesforce-new-app.png

<!---HONumber=AcomDC_0302_2016-->