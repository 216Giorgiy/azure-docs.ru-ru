---
title: Настройка мониторинга с помощью концентраторов событий Azure для Azure Logic Apps | Документация Майкрософт
description: Мониторинг потоков данных для приема и отправки событий в ваши логические приложения с помощью концентраторов событий Azure
services: logic-apps
keywords: поток данных, монитор событий, концентраторы событий
author: ecfan
manager: anneta
editor: ''
documentationcenter: ''
tags: connectors
ms.assetid: ''
ms.service: logic-apps
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 02/06/2018
ms.author: estfan; LADocs
ms.openlocfilehash: 8de56cd64f38791fb27d9bcce1e16641fb162c2f
ms.sourcegitcommit: 1362e3d6961bdeaebed7fb342c7b0b34f6f6417a
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/18/2018
---
# <a name="monitor-receive-and-send-events-with-the-event-hubs-connector"></a>Мониторинг, получение и отправка событий с помощью соединителя концентратора событий

Чтобы настроить мониторинг событий, предоставляя приложениям логики возможность обнаруживать, получать и отправлять события, подключитесь из приложения логики к [концентратору событий Azure](https://azure.microsoft.com/services/event-hubs). Дополнительные сведения о [концентраторах событий Azure](../event-hubs/event-hubs-what-is-event-hubs.md) и [ценах на соединители приложений логики](../logic-apps/logic-apps-pricing.md).

## <a name="prerequisites"></a>предварительным требованиям

Перед использованием соединителя концентраторов событий вам понадобятся следующие элементы:

* [Пространство имен концентраторов событий и концентратор событий](../event-hubs/event-hubs-create.md).
* [Приложение логики](../logic-apps/quickstart-create-first-logic-app-workflow.md).

<a name="permissions-connection-string"></a>

## <a name="connect-to-azure-event-hubs"></a>Подключение к концентраторам событий Azure

Чтобы приложение логики получило доступ к любой службе, следует создать [*подключение*](./connectors-overview.md) между приложением логики и службой (если вы еще не сделали это). Такое подключение предоставит приложению логики права на доступ к данным. Чтобы приложение логики могло использовать концентратор событий, проверьте свои разрешения и получите строку подключения для доступа к пространству имен концентраторов событий.

1.  Войдите на [портал Azure](https://portal.azure.com "Портал Azure"). 

2.  Перейдите к *пространству имен* концентраторов событий (но не к конкретному концентратору событий). На странице пространства имен в разделе **Параметры** выберите **Политики общего доступа**. В разделе **Утверждения** убедитесь, что у вас есть разрешения на **управление** для этого пространства имен.

    ![Управление разрешениями для пространства имен концентраторов событий](./media/connectors-create-api-azure-event-hubs/event-hubs-namespace.png)

3. Если вы хотите в дальнейшем вручную ввести сведения о подключении, получите строку подключения для пространства имен концентраторов событий. Выберите **RootManageSharedAccessKey**. Теперь нажмите кнопку копирования рядом со строкой подключения первичного ключа. Сохраните строку подключения для дальнейшего использования.

    ![Скопируйте строку подключения к пространству имен концентраторов событий](media/connectors-create-api-azure-event-hubs/find-event-hub-namespace-connection-string.png)

    > [!TIP]
    > Чтобы проверить, относится ли строка подключения к пространству имен концентраторов событий или к определенному концентратору событий, попробуйте найти в ней параметр `EntityPath`. Если в строке подключения есть такой параметр, значит она относится к определенной сущности концентратора событий, и ее нельзя использовать в приложении логики.

## <a name="trigger-workflow-when-your-event-hub-gets-new-events"></a>Активация рабочего процесса при получении новых событий в концентраторе событий

[*Триггер*](../logic-apps/logic-apps-overview.md#logic-app-concepts) — это событие, которое запускает рабочий процесс приложения логики. Чтобы рабочий процесс запускался при отправке нового события в концентратор событий, добавьте триггер для обнаружения событий, сделав следующее.

1. На [портале Azure](https://portal.azure.com "портал Azure ") перейдите к существующему приложению логики или создайте пустое приложение логики.

2. В поле поиска конструктора Logic Apps введите в качестве фильтра "концентраторы событий". Выберите триггер с именем **При наличии событий в концентраторе событий**.

   ![Выбор триггера, срабатывающего при получении концентратором событий новых событий](./media/connectors-create-api-azure-event-hubs/find-event-hubs-trigger.png)

   1. Если у вас еще нет подключения к пространству имен концентраторов событий, вам будет предложено создать такое подключение. Назовите подключение и выберите пространство имен концентраторов событий.

      ![Создание подключения концентратора событий](./media/connectors-create-api-azure-event-hubs/create-event-hubs-connection-1.png)

      Чтобы ввести строку подключения вручную, выберите **Вручную введите сведения о подключении**. 
      Сведения о том, как найти строку подключения, см. в разделе [Проверка разрешений для пространства имен концентраторов событий и определение строки подключения](#permissions-connection-string).

   2. Теперь выберите нужную политику концентраторов событий и нажмите кнопку **Создать**.

      ![Создание подключения концентратора событий, часть 2](./media/connectors-create-api-azure-event-hubs/create-event-hubs-connection-2.png)

3. Выберите концентратор событий для отслеживания, затем настройте интервал и частоту его проверки.

    ![Выбор концентратора событий или группы потребителей](./media/connectors-create-api-azure-event-hubs/select-event-hub.png)
    
    > [!NOTE]
    > Все триггеры концентратора событий являются триггерами *длинного опроса*. Это значит, что при запуске триггер обрабатывает все события, а затем 30 секунд ожидает, пока в концентраторе событий не появятся дополнительные события.
    > Запуск триггера пропускается, если на протяжении 30 секунд не будет получено ни одного события. В противном случае триггер продолжит считывать события до момента, пока концентратор событий не останется пустим.
    > Следующий опрос триггера основывается на интервале повторения, установленном в свойствах триггера.


4. Если вы хотите выбрать некоторые из расширенных параметров триггера, щелкните **Показать расширенные параметры**.

    ![Расширенные параметры триггера](./media/connectors-create-api-azure-event-hubs/event-hubs-trigger-advanced.png)

    | Свойство | Сведения |
    | --- | --- |
    | Тип содержимого  |Выберите тип содержимого событий из раскрывающегося списка. По умолчанию в поле установлено значение application/octet-stream. |
    | Схема содержимого |Введите схему содержимого в формате JSON для событий, которые считываются из концентратора событий. |
    | Имя группы потребителей |Чтобы считывать события, введите [имя группы потребителей](../event-hubs/event-hubs-features.md#consumer-groups) в концентратор событий. Если имя группы потребителей не указано, используется имя группы потребителей по умолчанию. |
    | Minimum partition key (Минимальное количество ключей секций) |Введите минимальное количество идентификаторов [секций](../event-hubs/event-hubs-features.md#partitions) для считывания. По умолчанию считываются все секции. |
    | Maximum partition key (Максимальное количество ключей секций) |Введите максимальное количество идентификаторов [секций](../event-hubs/event-hubs-features.md#partitions) для считывания. По умолчанию считываются все секции. |
    | Maximum events count (Счетчик максимального количества событий) |Введите максимальное количество событий. Триггер возвращает значение от 1 до количества событий, заданного в этом свойстве. |
    |||

5. Сохраните приложение логики. На панели инструментов конструктора нажмите кнопку **Сохранить**.

Теперь, когда приложение логики проверяет выбранный концентратор событий и находит новое событие, триггер запускает действия в приложении логики для найденного события.

## <a name="send-events-to-your-event-hub-from-your-logic-app"></a>Отправка событий в концентратор событий из приложения логики

[*Действие*](../logic-apps/logic-apps-overview.md#logic-app-concepts) — это задание, выполняемое рабочим процессом приложения логики. После добавления триггера в приложение логики вы можете добавить действие, выполняющее операции с данными, созданными этим триггером. Чтобы отправлять события в концентратор событий из приложения логики, сделайте следующее.

1. В конструкторе Logic Apps выберите для триггера пункты **New step** (Новый шаг) > **Add an action** (Добавить действие).

2. В поле поиска в качестве фильтра введите "концентраторы событий".
Выберите это действие: **Event Hubs — Send event** (Концентраторы событий — отправка события).

   ![Выбор Event Hubs — Send event (Концентраторы событий — отправка события)](./media/connectors-create-api-azure-event-hubs/select-event-hubs-send-event-action.png)

3. Выберите концентратор событий для отправки события. Введите содержимое события и любые другие сведения.

   ![Выбор имени концентратора событий и указание содержимого события](./media/connectors-create-api-azure-event-hubs/event-hubs-send-event-action.png)

4. Сохраните приложение логики.

Теперь у вас есть настроенное действие для отправки событий из приложения логики. 

## <a name="connector-specific-details"></a>Сведения о соединителях

Дополнительные сведения о триггерах и действиях, определенных файлом Swagger, и о любых ограничениях см. в статье [Event Hubs](/connectors/eventhubs/) (Концентраторы событий).

## <a name="get-support"></a>Получение поддержки

* Если у вас возникли вопросы, то посетите [форум Azure Logic Apps](https://social.msdn.microsoft.com/Forums/en-US/home?forum=azurelogicapps).
* Отправить идею по поводу возможности или проголосовать за нее вы можете на [сайте отзывов пользователей Logic Apps](http://aka.ms/logicapps-wish).

## <a name="next-steps"></a>Дополнительная информация

* Дополнительные сведения о других соединителях для приложений логики Azure см. в статье [Список соединителей](../connectors/apis-list.md).