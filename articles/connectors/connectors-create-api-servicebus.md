<properties
pageTitle="Использование API служебной шины Azure в приложениях логики | Microsoft Azure"
description="Начало использования API (соединителя) служебной шины Azure в приложениях логики службы приложений Microsoft Azure"
services=""	
documentationCenter="" 	
authors="msftman"	
manager="erikre"	
editor=""
tags="connectors"/>

<tags
ms.service="multiple"
ms.devlang="na"
ms.topic="article"
ms.tgt_pltfrm="na"
ms.workload="na"
ms.date="03/16/2016"
ms.author="deonhe"/>

# Начало работы с API-интерфейсом служебной шины Azure

Подключитесь к служебной шине Azure для отправки и получения сообщений. Вы можете выполнять такие действия, как отправка в очередь, отправка в раздел, получение из очереди, получение из подписки и т. д.

>[AZURE.NOTE] Эта версия статьи предназначена для приложений логики со схемой версии 2015-08-01-preview. Чтобы узнать версию схемы 2014-12-01-preview, щелкните [Служебная шина Azure](../app-service-logic/app-service-logic-connector-azureservicebus.md).

С помощью служебной шины Azure вы можете:

* создавать приложения логики.  

Сведения о добавлении операции в приложения логики см. в статье [Создание приложения логики](../app-service-logic/app-service-logic-create-a-logic-app.md).

## Поговорим о триггерах и действиях

API служебной шины Azure можно использовать в качестве действия. Кроме того, он имеет триггеры. Все API-интерфейсы поддерживают данные в форматах JSON и XML.

 API служебной шины Azure предоставляет следующие триггеры и действия:

### Действия служебной шины Azure
Вы можете выполнять перечисленные ниже действия:

|Действие|Описание|
|--- | ---|
|SendMessage|Отправляет сообщение в очередь или раздел служебной шины Azure.|
### Триггеры служебной шины Azure
Можно прослушивать указанные ниже события:

|Триггер | Описание|
|--- | ---|
|GetMessageFromQueue|Получает новое сообщение из очереди служебной шины Azure.|
|GetMessageFromTopic|Получает новое сообщение из подписки раздела служебной шины Azure.|


## Создание подключения к служебной шине Azure
Чтобы использовать API служебной шины Azure, сначала нужно создать **подключение**, а затем указать сведения для приведенных ниже свойств.

|Свойство| Обязательно|Описание|
| ---|---|---|
|ConnectionString|Да|Указание строки подключения к служебной шине Azure|  

Выполните следующие действия, чтобы создать **подключение** служебной шины, которое затем можно будет использовать в приложении логики:

1. Выберите **Повторение**.
2. Выберите **частоту** и введите **интервал**. ![Настройка служебной шины][1] 
3. Выберите **Добавить действие**. ![Настройка служебной шины][2]   
4. В поле поиска введите **служебная шина** и дождитесь возвращения всех записей с "служебная шина" в имени.
5. Выберите **Служебная шина — отправка сообщения**. ![Настройка служебной шины][3]
7. Введите **имя подключения** и **строку подключения**, затем выберите пункт **Создать подключение**. ![Настройка служебной шины][4]
7. После создания подключения отобразится диалоговое окно **Отправка сообщения**. Введите все необходимые данные для отправки сообщения. ![Настройка служебной шины][5]
8. Нажмите кнопку **Сохранить** в меню вверху, чтобы сохранить внесенные изменения.    

>[AZURE.TIP] Это подключение можно использовать в других приложениях логики.

## Справочник по API REST служебной шины Azure
#### Эта документация предназначена для версии 1.0


### Отправляет сообщение в очередь или раздел служебной шины Azure.
**```POST: /{entityName}/messages```**



| Имя| Тип данных|Обязательно|Местонахождение|Значение по умолчанию|Описание|
| ---|---|---|---|---|---|
|message| |Да|текст|Нет|Сообщение служебной шины|
|entityName|string|Да|path|Нет|Имя очереди или раздела|


### Ниже перечислены возможные ответы:

|Имя|Описание|
|---|---|
|200|ОК|
|по умолчанию|Операция завершилась ошибкой.|
------



### Получает новое сообщение из очереди служебной шины Azure.
**```GET: /{queueName}/messages/head```**



| Имя| Тип данных|Обязательно|Местонахождение|Значение по умолчанию|Описание|
| ---|---|---|---|---|---|
|queueName|строка|Да|path|Нет|Имя очереди.|


### Ниже перечислены возможные ответы:

|Имя|Описание|
|---|---|
|200|ОК|
|по умолчанию|Операция завершилась ошибкой.|
------



### Получает новое сообщение из подписки раздела служебной шины Azure.
**```GET: /{topicName}/subscriptions/{subscriptionName}/messages/head```**



| Имя| Тип данных|Обязательно|Местонахождение|Значение по умолчанию|Описание|
| ---|---|---|---|---|---|
|topicName|string|Да|path|Нет|Имя раздела.|
|subscriptionName|строка|Да|path|Нет|Имя подписки раздела.|


### Ниже перечислены возможные ответы:

|Имя|Описание|
|---|---|
|200|ОК|
|по умолчанию|Операция завершилась ошибкой.|
------



## Определения объектов: 

 **ServiceBusMessage**: сообщение состоит из содержимого и свойств.

Обязательные свойства для ServiceBusMessage:

ContentTransferEncoding

**Все свойства**:


| Имя | Тип данных |
|---|---|
|ContentData|строка|
|ContentType|string|
|ContentTransferEncoding|строка|
|Свойства|object|


## Дальнейшие действия
[Создание приложения логики](../app-service-logic/app-service-logic-create-a-logic-app.md).

[1]: ./media/connectors-create-api-servicebus/connectionconfig1.png
[2]: ./media/connectors-create-api-servicebus/connectionconfig2.png
[3]: ./media/connectors-create-api-servicebus/connectionconfig3.png
[4]: ./media/connectors-create-api-servicebus/connectionconfig4.png
[5]: ./media/connectors-create-api-servicebus/connectionconfig5.png
[6]: ./media/connectors-create-api-servicebus/connectionconfig6.png

<!---HONumber=AcomDC_0323_2016-->