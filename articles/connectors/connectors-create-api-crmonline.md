.<properties
	pageTitle="Добавление соединителя Dynamics CRM Online в приложения логики | Microsoft Azure"
	description="Создание приложений логики с помощью службы приложений Azure. Поставщик подключений Dynamics CRM Online предоставляет API для работы с сущностями в Dynamics CRM Online."
	services="logic-apps"    
	documentationCenter=""     
	authors="MandiOhlinger"    
	manager="erikre"    
	editor="" 
	tags="connectors" />

.<tags
ms.service="logic-apps"
ms.devlang="na"
ms.topic="article"
ms.tgt_pltfrm="na"
ms.workload="integration"
ms.date="08/15/2016"
ms.author="mandia"/>

# Приступая к работе с соединителем Dynamics CRM Online
Подключение к Dynamics CRM Online позволяет создавать записи, обновлять элементы и выполнять многие другие действия. С помощью CRM Online можно:

- формировать бизнес-процессы на основе данных, получаемых из CRM Online;
- использовать действия, которые удаляют запись, получают сущности и т. д. Эти действия получают ответ и делают выходные данные доступными для использования другими действиями. Например, при обновлении элемента в CRM можно отправлять сообщение электронной почты с помощью Office 365.

В этой статье содержатся сведения об использовании соединителя Dynamics CRM Online в приложении логики, а также перечислены предоставляемые им триггеры и действия.

>[AZURE.NOTE] Эта версия статьи предназначена для общедоступного выпуска приложений логики.

Дополнительные сведения о приложениях логики см. в статье, посвященной [приложениям логики](../app-service-logic/app-service-logic-what-are-logic-apps.md), и [руководстве по созданию приложения логики](../app-service-logic/app-service-logic-create-a-logic-app.md).

## Подключение к Dynamics CRM Online

Чтобы обеспечить доступ приложения логики к какой-либо службе, сначала необходимо создать *подключение* к этой службе. Таким образом вы установите соединение между приложением логики и другой службой. Например, чтобы подключиться к Dynamics, необходимо сначала создать *подключение* к Dynamics CRM Online. Чтобы создать подключение, введите учетные данные, которые используются для доступа к определенной службе. Для создания подключения к Dynamics необходимо использовать учетные данные учетной записи Dynamics CRM Online.


### Создание подключения

>[AZURE.INCLUDE [Шаги по созданию подключения к поставщику подключений Dynamics CRM Online](../../includes/connectors-create-api-crmonline.md)]

## Использование триггера

Триггер — это событие, которое можно использовать для запуска рабочего процесса, определенного в приложении логики. Триггеры опрашивают службу с определенным интервалом и частотой. Дополнительные сведения о триггерах см. [здесь](../app-service-logic/app-service-logic-what-are-logic-apps.md#logic-app-concepts).

1. Чтобы открыть список триггеров, в текстовом поле приложения логики введите "dynamics".

	.![](./media/connectors-create-api-crmonline/dynamics-triggers.png)

2. Выберите **Dynamics CRM Online - When a record is created** (Dynamics CRM Online — при создании записи). Если подключение уже существует, выберите организацию и сущность в раскрывающемся списке.

	![](./media/connectors-create-api-crmonline/select-organization.png)

	Если появится запрос на вход, введите учетные данные для входа, чтобы создать подключение. Дополнительные сведения о создании подключения см. в [разделе выше](connectors-create-api-crmonline.md#create-the-connection).

	> [AZURE.NOTE] В этом примере приложение логики выполняется при создании записи. Чтобы увидеть результаты триггера, добавьте другое действие, которое отправляет сообщение электронной почты. Например, добавьте действие Office 365 *Отправить сообщение электронной почты* для отправки вам сообщения электронной почты после создания новой записи.

3. Нажмите кнопку **Изменить** и задайте **частоту** и **интервал**. Например, если требуется, чтобы триггер выполнял опрос каждые 15 минут, задайте для параметра **Частота** значение **Минута**, а для параметра **Интервал** — **15**.

	.![](./media/connectors-create-api-crmonline/edit-properties.png)

4. **Сохраните** изменения, нажав соответствующую кнопку в левом верхнем углу панели инструментов. Приложение логики сохранено и теперь может быть включено автоматически.


## Использование действий

Действие — это операция, выполняемая рабочим процессом, определенным в приложении логики. Дополнительные сведения о действиях см. [здесь](../app-service-logic/app-service-logic-what-are-logic-apps.md#logic-app-concepts).

1. Щелкните знак "плюс". Отобразятся следующие параметры: **Добавить действие**, **Добавить условие** или **Еще**.

	.![](./media/connectors-create-api-crmonline/add-action.png)

2. Выберите **Добавить действие**.

3. Чтобы открыть список всех доступных действий, в текстовом поле введите "dynamics".

	.![](./media/connectors-create-api-crmonline/dynamics-actions.png)

4. В нашем примере мы выберем действие **Dynamics CRM Online - Update a record** (Dynamics CRM Online — обновить запись). Если подключение уже существует, задайте **Название организации**, **Имя сущности** и другие свойства:

	.![](./media/connectors-create-api-crmonline/sample-action.png)

	Если появится запрос на предоставление сведений о подключении, введите их, чтобы создать подключение. Эти свойства описаны в разделе [Создание подключения](connectors-create-api-crmonline.md#create-the-connection) этой статьи.

	> [AZURE.NOTE] В нашем примере мы обновляем существующую запись в CRM Online. Для обновления записи можно использовать выходные данные другого триггера. Например, добавьте триггер SharePoint *When an existing item is modified * (При изменении имеющегося элемента). Затем добавьте действие CRM Online *Update a record* (Обновить запись), которое использует поля SharePoint, чтобы обновить существующую запись в CRM Online.

5. **Сохраните** изменения, нажав соответствующую кнопку в левом верхнем углу панели инструментов. Приложение логики сохранено и теперь может быть включено автоматически.


## Технические сведения

## триггеры;

|Триггер | Description (Описание)|
|--- | ---|
|[When a record is created](connectors-create-api-crmonline.md#when-a-record-is-created) (При создании записи)|Активирует поток при создании объекта в CRM.|
|[When a record is updated](connectors-create-api-crmonline.md#when-a-record-is-updated) (При обновлении записи)|Активирует поток при изменении объекта в CRM.|
|[When a record is deleted](connectors-create-api-crmonline.md#when-a-record-is-deleted) (При удалении записи)|Активирует поток при удалении объекта в CRM.|


## Действия

|Действие|Описание|
|--- | ---|
|[List records](connectors-create-api-crmonline.md#list-records) (Отобразить список записей)|Эта операция получает сведения о записях сущности.|
|[Создание записи](connectors-create-api-crmonline.md#create-a-new-record)|Эта операция создает новую запись сущности.|
|[Get record](connectors-create-api-crmonline.md#get-record) (Получить запись)|Эта операция получает сведения об указанной записи сущности.|
|[Delete a record](connectors-create-api-crmonline.md#delete-a-record) (Удалить запись)|Эта операция удаляет запись из коллекции сущностей.|
|[Изменение записи](connectors-create-api-crmonline.md#update-a-record)|Эта операция обновляет существующую запись сущности.|

### Сведения о триггерах и действиях

В этом разделе приведены сведения о каждом триггере и действии, включая обязательные и необязательные входные свойства, а также соответствующие выходные данные, связанные с соединителем.

#### When a record is created (При создании записи)
Активирует поток при создании объекта в CRM.

|Имя свойства| Отображаемое имя|Описание|
| ---|---|---|
|dataset*|Название организации|Название организации CRM, например Contoso|
|table*|Имя сущности|Имя сущности|
|$skip|Число пропусков|Количество пропускаемых записей (значение по умолчанию — 0)|
|$top|Максимальное число записей|Максимальное количество получаемых записей (значение по умолчанию — 256)|
|$filter|Запрос фильтра|Запрос фильтра ODATA для ограничения возвращаемых записей|
|$orderby|Упорядочить по|Запрос orderBy ODATA для указания порядка записей|

Звездочка (*) означает, что свойство является обязательным.

##### Сведения о выходных данных
ItemsList

| Имя свойства | Тип данных |
|---|---|
|value|array|


#### When a record is updated (При обновлении записи)
Активирует поток при изменении объекта в CRM.

|Имя свойства| Отображаемое имя|Описание|
| ---|---|---|
|dataset*|Название организации|Название организации CRM, например Contoso|
|table*|Имя сущности|Имя сущности|
|$skip|Число пропусков|Количество пропускаемых записей (значение по умолчанию — 0)|
|$top|Максимальное число записей|Максимальное количество получаемых записей (значение по умолчанию — 256)|
|$filter|Запрос фильтра|Запрос фильтра ODATA для ограничения возвращаемых записей|
|$orderby|Упорядочить по|Запрос orderBy ODATA для указания порядка записей|

Звездочка (*) означает, что свойство является обязательным.

##### Сведения о выходных данных
ItemsList

| Имя свойства | Тип данных |
|---|---|
|value|array|


#### When a record is deleted (При удалении записи)
Активирует поток при удалении объекта в CRM.

|Имя свойства| Отображаемое имя|Описание|
| ---|---|---|
|dataset*|Название организации|Название организации CRM, например Contoso|
|table*|Имя сущности|Имя сущности|
|$skip|Число пропусков|Количество пропускаемых записей (значение по умолчанию — 0)|
|$top|Максимальное число записей|Максимальное количество получаемых записей (значение по умолчанию — 256)|
|$filter|Запрос фильтра|Запрос фильтра ODATA для ограничения возвращаемых записей|
|$orderby|Упорядочить по|Запрос orderBy ODATA для указания порядка записей|

Звездочка (*) означает, что свойство является обязательным.

##### Сведения о выходных данных
ItemsList

| Имя свойства | Тип данных |
|---|---|
|value|array|


#### List records (Отобразить список записей)
Эта операция получает сведения о записях сущности.

|Имя свойства| Отображаемое имя|Описание|
| ---|---|---|
|dataset*|Название организации|Название организации CRM, например Contoso|
|table*|Имя сущности|Имя сущности|
|$skip|Число пропусков|Количество пропускаемых записей (значение по умолчанию — 0)|
|$top|Максимальное число записей|Максимальное количество получаемых записей (значение по умолчанию — 256)|
|$filter|Запрос фильтра|Запрос фильтра ODATA для ограничения возвращаемых записей|
|$orderby|Упорядочить по|Запрос orderBy ODATA для указания порядка записей|

Звездочка (*) означает, что свойство является обязательным.

##### Сведения о выходных данных
ItemsList

| Имя свойства | Тип данных |
|---|---|
|value|array|


#### Создание записи
Эта операция создает новую запись сущности.

|Имя свойства| Отображаемое имя|Описание|
| ---|---|---|
|dataset*|Название организации|Название организации CRM, например Contoso|
|table*|Имя сущности|Имя сущности|

Звездочка (*) означает, что свойство является обязательным.

##### Сведения о выходных данных
Отсутствует.


#### Get record (Получить запись)
Эта операция получает сведения об указанной записи сущности.

|Имя свойства| Отображаемое имя|Описание|
| ---|---|---|
|dataset*|Название организации|Название организации CRM, например Contoso|
|table*|Имя сущности|Имя сущности|
|id*|Идентификатор элемента|Укажите идентификатор записи|

Звездочка (*) означает, что свойство является обязательным.

##### Сведения о выходных данных
Отсутствует.


#### Delete a record (Удалить запись)
Эта операция удаляет запись из коллекции сущностей.

|Имя свойства| Отображаемое имя|Описание|
| ---|---|---|
|dataset*|Название организации|Название организации CRM, например Contoso|
|table*|Имя сущности|Имя сущности|
|id*|Идентификатор элемента|Укажите идентификатор записи|

Звездочка (*) означает, что свойство является обязательным.


#### Изменение записи
Эта операция обновляет существующую запись сущности.

|Имя свойства| Отображаемое имя|Описание|
| ---|---|---|
|dataset*|Название организации|Название организации CRM, например Contoso|
|table*|Имя сущности|Имя сущности|
|id*|Идентификатор записи|Укажите идентификатор записи|

Звездочка (*) означает, что свойство является обязательным.

##### Сведения о выходных данных
Отсутствует.


## Ответы HTTP

Действия и триггеры могут возвращать один или несколько кодов состояния HTTP, которые приведены ниже.

|Имя|Описание|
|---|---|
|200|ОК|
|202|Принято|
|400|Ошибка запроса|
|401|Не авторизовано|
|403|Запрещено|
|404|Не найдено|
|500|Внутренняя ошибка сервера. Произошла неизвестная ошибка.|
|по умолчанию|Операция завершилась ошибкой.|


## Дальнейшие действия

[Создайте приложение логики](../app-service-logic/app-service-logic-create-a-logic-app.md). Чтобы узнать, какие еще соединители доступны в Logic Apps, см. [список интерфейсов API](apis-list.md).

<!---HONumber=AcomDC_0817_2016-->