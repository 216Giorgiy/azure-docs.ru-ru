---
title: Часто задаваемые вопросы о резервном копировании баз данных SQL Server на виртуальных машинах Azure с помощью Azure Backup
description: В этой статье приведены ответы на часто задаваемые вопросы о резервном копировании баз данных SQL Server на виртуальных машинах Azure с помощью Azure Backup.
services: backup
author: sogup
manager: vijayts
ms.service: backup
ms.topic: conceptual
ms.date: 8/16/2018
ms.author: sogup
ms.openlocfilehash: a14406733ff60d53d4bf7792ff0c9a015c57d9b3
ms.sourcegitcommit: 9aa9552c4ae8635e97bdec78fccbb989b1587548
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/20/2019
ms.locfileid: "56430928"
---
# <a name="faq-on-sql-server-running-on-azure-vm-backup"></a>Часто задаваемые вопросы о выполнении SQL Server на резервной копии виртуальных машин Azure

В этой статье приведены ответы на часто задаваемые вопросы о резервном копировании баз данных SQL Server в виртуальных машинах Azure с помощью службы [Azure Backup](backup-overview.md).

> [!NOTE]
> Эта функция сейчас доступна в виде общедоступной предварительной версии.



## <a name="can-i-throttle-the-backup-speed"></a>Могу ли я регулировать скорость резервного копирования?

Да. Вы можете регулировать частоту, с которой выполняется политика резервного копирования, чтобы свести к минимуму влияние на экземпляр SQL Server. Чтобы изменить этот параметр:
1. На экземпляре SQL Server в папке *C:\Program Files\Azure Workload Backup\bin* создайте файл **ExtensionSettingsOverrides.json**.
2. В файле **ExtensionSettingsOverrides.json** измените параметр **DefaultBackupTasksThreshold**, указав меньшее значение (например, 5) <br>
  ` {"DefaultBackupTasksThreshold": 5}`

3. Сохраните изменения. Закройте файл.
4. На экземпляре SQL Server откройте **диспетчер задач**. Перезагрузите службу **AzureWLBackupCoordinatorSvc**.

## <a name="can-i-run-a-full-backup-from-a-secondary-replica"></a>Можно ли запустить полное резервное копирование из вторичной реплики?
Нет. Эта возможность не поддерживается.

## <a name="do-successful-backup-jobs-create-alerts"></a>Отправляются ли оповещения об успешно выполненных заданиях резервного копирования?

Нет. Для успешно выполненных заданий резервного копирования не создаются оповещения. Оповещения отправляются только в случае сбоя.

## <a name="can-i-see-scheduled-backup-jobs-in-the-jobs-menu"></a>Можно ли просмотреть запланированные задания резервного копирования в меню "Задания"?

№ В меню **Задания архивации** отображаются сведения о заданиях по требованию, но не о запланированных заданиях резервного копирования. В случае сбоя запланированного задания резервного копирования все сведения содержатся в оповещениях о сбое задания. Все запланированные и нерегламентированные задания резервного копирования можно отслеживать в [SQL Server Management Studio](manage-monitor-sql-database-backup.md).

## <a name="are-future-databases-automatically-added-for-backup"></a>Добавляются ли автоматически будущие базы данных в резервное копирование?

№ Если настройке защиты для экземпляра SQL Server выбран параметр уровня сервера, то добавляются все базы данных. Если вы добавите базы данных в экземпляр SQL Server после настройки защиты, вам придется добавить их вручную, чтобы обеспечить защиту. Базы данных не включаются в настроенную защиту автоматически.

##  <a name="how-do-i-restart-protection-after-changing-recovery-type"></a>После изменения типа восстановления, как я могу перезапустить систему защиты?

Активируйте полное резервное копирование. Создание резервных копий журналов начнется должным образом.

## <a name="can-i-protect-availability-groups-on-premises"></a>Можно ли защитить группы доступности локально?

№ Azure Backup обеспечивает защиту серверов SQL Server, работающих в Azure. Если группа доступности распределена между Azure и локальными компьютерами, ее можно защитить только в том случае, если первичная реплика работает в Azure. Кроме того, Azure Backup защищает только узлы, работающие в том же регионе Azure, что и хранилище служб восстановления.

## <a name="can-i-protect-availability-groups-across-regions"></a>Можно ли защитить группы доступности в разных регионах?

Хранилище Служб восстановления Azure Backup может обнаруживать и защищать все узлы, которые находятся в том же регионе, что и хранилище Служб восстановления. Если у вас есть группа доступности AlwaysOn SQL, охватывающая множество регионов Azure, необходимо настроить резервное копирование из региона, в котором находится основной узел. Azure Backup будет иметь возможность обнаруживать и защищать все базы данных в группе доступности согласно требованиям к резервному копированию. Если требования к резервному копированию не выполняются, резервные копирования будут завершаться ошибкой и вы будете получать оповещения о сбое.

## <a name="can-i-exclude-databases-with-auto-protection-enabled"></a>Могу ли я исключить базы данных из экземпляра с автоматической защитой?

Нет, [автоматическая защита](backup-azure-sql-database.md#enable-auto-protection) применяется ко всему экземпляру. Невозможно выборочно защитить лишь некоторые базы данных экземпляра с помощью автоматической защиты.

## <a name="can-i-have-different-policies-in-an-auto-protected-instance"></a>Можно ли применять различные политики в экземпляре с автоматической защитой?

Если у вас уже есть некоторые защищенные базы данных в экземпляре, они будут по-прежнему защищены с помощью соответствующих политик даже после **включения** параметра [автоматической защиты](backup-azure-sql-database.md#enable-auto-protection). Но все незащищенные базы данных вместе с теми, которые будут добавлены в дальнейшем, будут иметь только одну политику, определенную вами в разделе **Настройка архивации** после выбора баз данных. В отличие от других защищенных баз данных, невозможно даже изменить политику в базе данных экземпляра с автоматической защитой.
Единственный способ это сделать — отключить на время автоматическую защиту экземпляра, а затем изменить политику для этой базы данных. Затем можно повторно включить автоматическую защиту для этого экземпляра.

## <a name="if-i-delete-a-database-from-auto-protection-will-backups-stop"></a>Если удалить базу данных из экземпляра с автоматической защитой, прекратиться ли ее резервное копирование?

Нет. Если база данных удаляется из экземпляра с автоматической защитой, попытки ее резервного копирования будут продолжаться. Это означает, что удаленная база данных начнет отображаться как неработоспособная в разделе **Элементы архивации** и будет по-прежнему обрабатываться как защищенная.

Единственный способ остановить защиту этой базы данных — отключить на время [автоматическую защиту](backup-azure-sql-database.md#enable-auto-protection) экземпляра, а затем выбрать параметр **Остановить архивацию** в разделе **Элементы архивации** для этой базы данных. Затем можно повторно включить автоматическую защиту для этого экземпляра.

##  <a name="why-cant-i-see-an-added-database-for-an-auto-protected-instance"></a>Почему я не вижу добавленную базу данных в экземпляре с автоматической защитой?

База данных, недавно добавленная в экземпляр с [автоматической защитой](backup-azure-sql-database.md#enable-auto-protection), может отобразиться не мгновенно. Это обусловлено тем, что обнаружение обычно выполняется раз в 8 часов. Но пользователь может выполнить обнаружение вручную с помощью параметра **Восстановление баз данных**, чтобы мгновенно обнаружить и защитить новые базы данных, как показано на изображении ниже.

  ![Просмотреть только что добавленную базу данных](./media/backup-azure-sql-database/view-newly-added-database.png)

## <a name="next-steps"></a>Дополнительная информация

Дополнительные сведения о резервном копировании баз данных SQL Server в Azure см в [этой статье](backup-azure-sql-database.md).
