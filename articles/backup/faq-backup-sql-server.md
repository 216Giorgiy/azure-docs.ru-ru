---
title: Часто задаваемые вопросы о резервном копировании баз данных SQL Server на виртуальных машинах Azure с помощью Azure Backup
description: Ответы на часто задаваемые вопросы о резервном копировании баз данных SQL Server на виртуальных машинах Azure с помощью службы архивации Azure.
services: backup
author: sachdevaswati
manager: vijayts
ms.service: backup
ms.topic: conceptual
ms.date: 03/13/2019
ms.author: sachdevaswati
ms.openlocfilehash: 3d02c8b3d763e3bd767964c8056fa948bfbb13d1
ms.sourcegitcommit: 2d0fb4f3fc8086d61e2d8e506d5c2b930ba525a7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/18/2019
ms.locfileid: "57996045"
---
# <a name="faq-about-sql-server-databases-that-are-running-on-an-azure-vm-backup"></a>Часто задаваемые вопросы о базах данных SQL Server, работающих под управлением на резервную копию виртуальной Машины Azure

В этой статье содержатся ответы на часто задаваемые вопросы о резервном копировании баз данных SQL Server, работающие на виртуальных машинах (ВМ) и, в которых используется [Azure Backup](backup-overview.md) службы.

> [!NOTE]
> Эта функция сейчас доступна в виде общедоступной предварительной версии.

## <a name="can-i-control-as-to-how-many-concurrent-backups-run-on-the-sql-server"></a>Могу ли я контролировать количество параллельных операций резервного копирования, выполнение на SQL server?

Да. Вы можете регулировать частоту, с которой выполняется политика резервного копирования, чтобы свести к минимуму влияние на экземпляр SQL Server. Чтобы изменить этот параметр:
1. На экземпляре SQL Server в *C:\Program Files\Azure рабочей нагрузки Backup\bin* папке создайте *ExtensionSettingsOverrides.json* файла.
2. В *ExtensionSettingsOverrides.json* измените **DefaultBackupTasksThreshold** параметр меньшее значение (например, 5). <br>
  ` {"DefaultBackupTasksThreshold": 5}`

3. Сохраните изменения и закройте файл.
4. На экземпляре SQL Server откройте **диспетчер задач**. Перезагрузите службу **AzureWLBackupCoordinatorSvc**.

> [!NOTE]
> UX по-прежнему можно пойти дальше и запланировать столько резервных копий в любой момент времени Однако они будут обрабатываться в скользящее окно, скажем, 5, для примера выше.

## <a name="can-i-run-a-full-backup-from-a-secondary-replica"></a>Можно ли запустить полное резервное копирование из вторичной реплики?
В соответствии с ограничениями SQL можно запустить копирование только полной резервной копии на вторичной реплике; Однако полное резервное копирование не допускается.

## <a name="do-successful-backup-jobs-create-alerts"></a>Отправляются ли оповещения об успешно выполненных заданиях резервного копирования?
Нет. Для успешно выполненных заданий резервного копирования не создаются оповещения. Оповещения отправляются только в случае сбоя.

## <a name="can-i-see-scheduled-backup-jobs-in-the-jobs-menu"></a>Можно просмотреть запланированные задания резервного копирования, в меню "задания"?
**Задание резервного копирования** меню будут отображаться только ad-hoc заданий резервного копирования. Для запланированного задания используйте [мониторинг с помощью Azure Monitor](backup-azure-monitoring-use-azuremonitor.md).

## <a name="are-future-databases-automatically-added-for-backup"></a>Добавляются ли автоматически будущие базы данных в резервное копирование?
Да, с помощью [автоматической защиты](backup-azure-sql-database.md#enable-auto-protection)

## <a name="can-i-protect-availability-groups-on-premises"></a>Защитить доступности группами локально?
№ Служба архивации Azure обеспечивает защиту баз данных SQL Server, работающих в Azure. Если группы доступности (AG) распределяется между Azure и локальными компьютерами, группы Доступности могут быть защищены только в том случае, если первичная реплика работает в Azure. Кроме того Azure Backup защищает только узлы, которые выполняются в том же регионе Azure, что и хранилище служб восстановления.

## <a name="can-i-protect-availability-groups-across-regions"></a>Может защищать группы доступности в нескольких регионах?
Хранилище служб восстановления Azure Backup можно обнаруживать и защищать все узлы, расположенные в том же регионе, что и хранилище. Если группы доступности SQL Server Always On охватывает несколько регионов Azure, настройте функцию архивирования из региона с основного узла. Служба архивации Azure можно обнаруживать и защищать все базы данных в группе доступности в соответствии с настроек резервного копирования. Когда настроек резервного копирования не соблюдается, резервное копирование завершается сбоем, и вы получаете оповещение о сбое.

## <a name="can-i-exclude-databases-with-autoprotection-enabled"></a>Можно исключить базы данных с поддержкой autoprotection?
№ Autoprotection [применяется ко всему экземпляру](backup-azure-sql-database.md#enable-auto-protection). Нельзя использовать autoprotection для выборочной защиты баз данных в экземпляре.

## <a name="can-i-have-different-policies-in-an-autoprotected-instance"></a>Может иметь разные политики в экземпляре autoprotected?
Если ваш экземпляр уже включает некоторые защищенные базы данных, они будут продолжать выполнять защищенные под свои соответствующие политики даже после того как вы [включите autoprotection](backup-azure-sql-database.md#enable-auto-protection). Тем не менее все незащищенные базы данных и баз данных, добавляемые позже будет иметь только одну политику. Определение этой политики в разделе **Настройка резервного копирования** после выбора базы данных. На самом деле в отличие от других защищенных баз данных невозможно даже изменить политику для базы данных в экземпляре autoprotected.
Чтобы временно отключить autoprotection для экземпляра — единственный способ изменить политику, базы данных. Затем повторно включить autoprotection для экземпляра.

## <a name="if-i-delete-a-database-from-an-autoprotected-instance-will-backups-stop"></a>Если удалить базу данных из экземпляра autoprotected, перестанет резервных копий
№ Если базы данных удаляется из экземпляра autoprotected, по-прежнему применяются резервные копии базы данных. Это означает, что удаленную базу данных начинается отображение неработоспособности в разделе **архивные элементы** и по-прежнему защищено.

Единственный способ остановить защиту этой базы данных — временно [отключить autoprotection](backup-azure-sql-database.md#enable-auto-protection) на экземпляре. Затем в разделе **архивные элементы** для базы данных, выберите **остановить архивацию**. Затем повторно включить autoprotection для данного экземпляра.

##  <a name="why-cant-i-see-an-added-database-for-an-autoprotected-instance"></a>Почему не дополнительной базы данных для экземпляра autoprotected?
Объект базы данных, которые [добавить в экземпляр autoprotected](backup-azure-sql-database.md#enable-auto-protection) может не сразу появится в группе защищенных элементов. Это обусловлено тем, что обнаружение обычно выполняется раз в 8 часов. Тем не менее, можно обнаружить и защитить новые базы данных сразу же в том случае, если вы вручную запустить обнаружение, выбрав **восстановление баз данных SQL**, как показано на следующем рисунке.

  ![Обнаружить новые базы данных вручную](./media/backup-azure-sql-database/view-newly-added-database.png)

## <a name="next-steps"></a>Дальнейшие действия

Узнайте, как [резервное копирование базы данных SQL Server](backup-azure-sql-database.md) , на котором выполняется на виртуальной Машине Azure.
