---
title: Создание настраиваемых панелей мониторинга в Azure Application Insights | Документация Майкрософт
description: Руководство по созданию настраиваемых панелей мониторинга ключевых показателей эффективности с помощью Azure Application Insights.
keywords: ''
services: application-insights
author: lgayhardt
ms.author: lagayhar
ms.date: 01/11/2019
ms.service: application-insights
ms.custom: mvc
ms.topic: tutorial
manager: carmonm
ms.openlocfilehash: 3abe0511200bf5828b485b15a4b8a512731c4ffa
ms.sourcegitcommit: 5839af386c5a2ad46aaaeb90a13065ef94e61e74
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2019
ms.locfileid: "58082132"
---
# <a name="create-custom-kpi-dashboards-using-azure-application-insights"></a>Создание настраиваемых панелей мониторинга ключевых показателей эффективности с помощью Azure Application Insights

Вы можете создать несколько панелей мониторинга на портале Azure, каждая из которых будет включать плитку, визуализирующую данные из нескольких ресурсов Azure в разных группах ресурсов и подписках.  Вы можете закрепить различные диаграммы и представления Azure Application Insights для создания пользовательских панелей мониторинга, предоставляющих полную картину работоспособности и производительности приложения.  В этом руководстве описано создание пользовательской панели мониторинга, которая включает несколько типов данных и визуализации из Azure Application Insights.  Вы узнаете, как выполнять следующие задачи:

> [!div class="checklist"]
> * Создание настраиваемой панели мониторинга в Azure.
> * Добавление плитки из коллекции плиток.
> * Добавление стандартных метрик Application Insights на панель мониторинга. 
> * Добавление пользовательской диаграммы метрики Application Insights на панель мониторинга.
> * Добавление результатов запроса аналитики на панель мониторинга. 



## <a name="prerequisites"></a>Предварительные требования

Для работы с этим руководством:

- Разверните приложение .NET в Azure и [включите пакет SDK для Application Insights](../../azure-monitor/app/asp-net.md). 

## <a name="log-in-to-azure"></a>Вход в Azure
Войдите на портал Azure по адресу [https://portal.azure.com](https://portal.azure.com).

## <a name="create-a-new-dashboard"></a>Создание панели мониторинга
Одна панель мониторинга может содержать ресурсы из нескольких приложений, групп ресурсов и подписок.  Начните работу с руководством с создания панели мониторинга для приложения.  

1. На панели мониторинга выберите **Новая панель мониторинга**.

   ![Новая панель мониторинга](media/tutorial-app-dashboards/1newdashboard.png)

1. Введите имя для панели мониторинга.
1. Ознакомьтесь с **коллекцией плиток** для различных плиток, которые можно добавить на панель мониторинга.  Помимо добавления плиток из галереи можно закрепить диаграммы и другие представления непосредственно из Application Insights на панели мониторинга.
1. Найдите плитку **Markdown** и перетащите ее на панель мониторинга.  Эта плитка позволяет добавлять форматированный текст в разметку, которая отлично подходит для добавления описательного текста для панели мониторинга.
1. Добавьте текст в свойства плитки и измените его размер на холсте панели мониторинга.
    
    ![Изменение разметки плитки](media/tutorial-app-dashboards/2dashboard-text.png)

1. Щелкните **Настройка выполнена** в верхней части экрана, чтобы выйти из режима настройки плитки.

## <a name="add-health-overview"></a>Добавление общих сведений о работоспособности
Панель мониторинга только со статическим текстом не очень интересна, поэтому добавьте плитку из Application Insights для отображения информации о приложении.  Можно добавить плитку Application Insights из коллекции плитки или закрепить ее напрямую с экранов Application Insights.  Это позволяет настроить диаграммы и представления, с которыми вы уже знакомы, перед закреплением их на панели мониторинга.  Начните с добавления стандартного обзора работоспособности приложения.  Это не требует настройки и предоставляет минимальные настройки на панели мониторинга.


1. На начальном экране выберите ресурс **Application Insights**.
2. На панели **Обзор** щелкните значок вешки, чтобы добавить плитку на последнюю панель мониторинга, которую вы просматривали.  

    ![Закрепление временной шкалы обзора](media/tutorial-app-dashboards/3overview.png)
 
3. В правом верхнем углу появится уведомление о том, что ваша плитка была прикреплена к панели мониторинга. Щелкните **Закреплено на панели мониторинга** в уведомлении, чтобы вернуться к информационной панели, или панели мониторинга.
4. Эта плитка теперь добавлена ​​на вашу панель мониторинга. Чтобы изменить расположение плитки, выберите **Правка**. Щелкните и перетащите ее в нужное место, а затем щелкните **Настройка выполнена**. Теперь на панели мониторинга есть плитка с полезной информацией.

    ![Панель мониторинга с временной шкалой обзора](media/tutorial-app-dashboards/4dashboard-edit.png)



## <a name="add-custom-metric-chart"></a>Добавление пользовательской диаграммы метрики
Панель **Метрики** позволяет графически отображать метрики, собранные Application Insights, с помощью дополнительных фильтров и группировки.  Как и все остальное в Application Insights, эту диаграмму можно добавить на панель мониторинга.  Для этого необходимо сначала выполнить небольшую настройку.

1. На начальном экране выберите ресурс **Application Insights**.
1. Выберите **Метрики**.  
2. Пустая диаграмма уже создана. Вам будет предложено ввести метрику.  Добавьте метрику на диаграмму, при необходимости можно добавить фильтры и группировку.  В приведенном ниже примере показано количество запросов к серверу, сгруппированных по успешности.  Это предоставляет постоянное представление об успешных и неуспешных запросах.

    ![Добавление метрики](media/tutorial-app-dashboards/5sumserverrequests.png)

4. Выберите **Закрепить на панели мониторинга** справа. После этого представление будет добавлено на последнюю панель мониторинга, с которой вы работали.

    ![Закрепление диаграммы метрики](media/tutorial-app-dashboards/6sumserverrequests-pin.png)

3.  В правом верхнем углу появится уведомление о том, что ваша плитка была прикреплена к панели мониторинга. Щелкните **Закреплено на панели мониторинга** в уведомлении, чтобы вернуться к панели мониторинга, или используйте колонку панели мониторинга.

4. Эта плитка теперь добавлена ​​на вашу панель мониторинга. Чтобы изменить расположение плитки, выберите **Правка**. Щелкните и перетащите ее в нужное место, а затем щелкните **Настройка выполнена**.

    ![Панель мониторинга с метриками](media/tutorial-app-dashboards/7dashboard-edit2.png)

## <a name="add-analytics-query"></a>Добавление запроса аналитики
Аналитика Azure Application Insights предоставляет полнофункциональный язык запросов, позволяющий анализировать все данные, собранные Application Insights.  Так же, как диаграммы и другие представления, выходные данные запроса аналитики можно добавить на панель мониторинга.   

Так как Azure Applications Insights Analytics является отдельной службой, необходимо предоставить общий доступ к панели мониторинга для включения запросов Analytics. При предоставлении общего доступа к панели мониторинга Azure она будет опубликована в качестве ресурса Azure, который может сделать ее доступной другим пользователям и ресурсам.  

1. В верхней части экрана панели мониторинга щелкните **Доступ**.

    ![Публикация панели мониторинга](media/tutorial-app-dashboards/8dashboard-share.png)

2. Сохраните **имя панели мониторинга** без изменений и выберите **Имя подписки**, чтобы предоставить общий доступ к панели мониторинга.  Щелкните **Опубликовать**.  Панель мониторинга теперь доступна для других служб и подписок.  При необходимости можно задать определенных пользователей, которые будут иметь доступ к панели мониторинга.
1. На начальном экране выберите ресурс **Application Insights**.
2. Нажмите кнопку **Аналитика** в верхней части экрана, чтобы открыть портал аналитики.

    ![Запуск аналитики](media/tutorial-app-dashboards/9analytics.png)

3. Введите следующий запрос, который возвращает 10 наиболее часто запрашиваемых страниц и их число запросов:

    ```
    requests
    | summarize count() by name
    | sort by count_ desc
    | take 10 
    ```

4. Щелкните **Выполнить**, чтобы проверить результаты запроса.
5. Щелкните значок закрепления и выберите имя своей панели мониторинга. Причина, по которой в этом варианте была выбрана панель мониторинга, в отличие от предыдущих шагов, когда использовалась последняя панель мониторинга, заключается в том, что консоль аналитики является отдельной службой и выбирает панель мониторинга из всех общедоступных.

    ![Закрепление запроса аналитики](media/tutorial-app-dashboards/10query.png)

5. Прежде чем вернуться к панели мониторинга, добавьте другой запрос, но теперь отобразите его в виде диаграммы, чтобы видеть разные способы визуализации запроса аналитики на панели мониторинга.  Начните со следующего запроса, который обобщит 10 лучших операций с наибольшим количеством исключений.

    ```
    exceptions
    | summarize count() by operation_Name
    | sort by count_ desc
    | take 10 
    ```

6. Выберите **Диаграмма**, а затем измените ее на **Кольцевая**, чтобы визуализировать выходные данные.

    ![Диаграмма аналитики](media/tutorial-app-dashboards/11querychart.png)

6. Щелкните значок закрепления, чтобы закрепить диаграмму на панели мониторинга, и в этот раз выберите ссылку для возвращения на панель мониторинга.
4. Теперь результаты запросов будут добавлены на панель мониторинга в выбранном формате.  Щелкните и перетащите каждый из них в нужное место, затем щелкните **Настройка выполнена**.
5. Выберите значок карандаша на каждом заголовке, чтобы дать им описательный заголовок.

    ![Панель мониторинга с аналитикой](media/tutorial-app-dashboards/12edit-title.png)

5. Выберите **Опубликовать**, чтобы повторно публиковать изменения на панели мониторинга, которая теперь включает различные диаграммы и визуализации из Application Insights.


## <a name="next-steps"></a>Дополнительная информация
Теперь, когда вы узнали, как создавать настраиваемые панели мониторинга, ознакомьтесь с остальной документацией по Application Insights, включая пример внедрения.

> [!div class="nextstepaction"]
> [Углубленная диагностика для веб-приложений и служб с помощью Application Insights](../../azure-monitor/app/devops.md)
