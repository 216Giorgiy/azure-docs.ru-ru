---
title: Отправка оповещений из Azure Application Insights | Документация Майкрософт
description: Руководство по отправке оповещений в ответ на ошибки в приложении, которое использует Azure Application Insights.
keywords: ''
author: mrbullwinkle
ms.author: mbullwin
ms.date: 09/20/2017
ms.service: application-insights
ms.custom: mvc
ms.topic: tutorial
manager: carmonm
ms.openlocfilehash: 70a11867dded3b7156f6b212ceb4756ee7c287f6
ms.sourcegitcommit: 5839af386c5a2ad46aaaeb90a13065ef94e61e74
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2019
ms.locfileid: "58079168"
---
# <a name="monitor-and-alert-on-application-health-with-azure-application-insights"></a>Мониторинг и оповещение о работоспособности приложения с помощью Azure Application Insights

Azure Application Insights позволяет выполнять мониторинг приложения и отправлять оповещения, когда оно отключено, недоступно или в нем возникают проблемы с производительностью.  В этом руководстве описано процесс создания тестов для постоянной проверки доступности приложения и отправки различных типов оповещений в ответ на обнаруженные неполадки.  Вы узнаете, как выполнять следующие задачи:

> [!div class="checklist"]
> * Создание теста доступности для постоянной проверки ответа приложения.
> * Отправка сообщения администраторами при возникновении проблемы.
> * Создание оповещений на основе метрик производительности. 
> * Использование приложения логики для отправки сводных данных телеметрии по расписанию.


## <a name="prerequisites"></a>Предварительные требования

Для работы с этим руководством:

- Установите [Visual Studio 2017](https://www.visualstudio.com/downloads/) с указанными ниже рабочими нагрузками:
    - ASP.NET и веб-разработка.
    - разработка Azure;
    - Разверните приложение .NET в Azure и [включите пакет SDK для Application Insights](../../azure-monitor/app/asp-net.md). 


## <a name="log-in-to-azure"></a>Вход в Azure
Войдите на портал Azure по адресу [https://portal.azure.com](https://portal.azure.com).

## <a name="create-availability-test"></a>Создание теста доступности
Благодаря тестам доступности в Application Insights можно автоматически тестировать свое приложение из различных расположений по всему миру.   В этом руководстве выполняется простой тест, позволяющий убедиться, что приложение доступно.  Вы также можете создать полное пошаговое руководство для подробной проверки его работы. 

1. Выберите **Application Insights**, а затем выберите подписку.  
1. В разделе **Исследовать** выберите **Доступность**, а затем щелкните **Добавить тест**.
 
    ![Добавление теста доступности](media/tutorial-alert/add-test.png)

2. Введите имя для теста и оставьте другие значения по умолчанию.  При этом домашняя страница приложения запрашивается каждые 5 минут из 5 разных географических мест. 
3. Выберите **Оповещения**, чтобы открыть область **Оповещения**, где можно задать сведения о том, как реагировать, если тест не будет выполнен. Введите адрес электронной почты, на который будет отправлено сообщение при соблюдении условий оповещения.  При необходимости можно ввести адрес веб-перехватчика, который будет вызван при соблюдении условий оповещения.

    ![Создание теста](media/tutorial-alert/create-test.png)
 
4. Вернитесь в область теста. Через несколько минут должны появиться результаты теста доступности.  Щелкните имя теста для просмотра сведений из каждого расположения.  На точечной диаграмме представлены сведения об успешности выполнения и продолжительности каждого теста.

    ![Сведения о тесте](media/tutorial-alert/test-details.png)

5.  Вы можете подробно изучить сведения о любом конкретном тесте, щелкнув его точку на точечной диаграмме.  В приведенном ниже примере показан код для невыполненных запросов.

    ![Результат проверки](media/tutorial-alert/test-result.png)
  
6. При соблюдении условий оповещения письмо электронной почты, аналогичное приведенному ниже, будет отправлено на указанный адрес.

    ![Оповещения почты](media/tutorial-alert/alert-mail.png)


## <a name="create-an-alert-from-metrics"></a>Создание оповещения из метрик
Помимо отправки оповещений из тестов доступности можно создавать оповещения на основе любых метрик производительности, собранных в приложении.

1. В меню **Настроить** выберите **Оповещения**.  Откроется панель оповещения Azure.  Для других служб здесь могут быть настроены другие правила генерации оповещений.
1. Щелкните **Add metric alert** (Добавить оповещение метрики).  Откроется панель создания правила генерации оповещения.

    ![Добавление оповещения для метрики](media/tutorial-alert/add-metric-alert.png)

1. Введите **имя** правила генерации оповещений и выберите приложение из раскрывающегося списка **Resource** (Ресурс).
1. Выберите **Метрика** для примера.  Отображается график, указывающий значение этого запроса за последние 24 часа.  Это полезно при настройке условий для метрики.

    ![Добавление правила оповещения](media/tutorial-alert/add-alert-01.png)

1. Укажите **условие** и **пороговое значение** оповещения. Это число попыток, которое должно быть превышено метрикой для создания оповещения. 
1. В разделе **Notify via** (Уведомить через) проверьте поле **Владельцы, авторы и читатели электронных писем** для отправки электронной почты пользователям при соблюдении условий оповещения и добавьте адреса электронной почты любых дополнительных получателей.  Здесь можно также указать веб-перехватчик или логику приложения, выполняемую при соблюдении условия.  Они могут использоваться для устранения обнаруженной проблемы. 

    ![Добавление правила оповещения](media/tutorial-alert/add-alert-02.png)


## <a name="proactively-send-information"></a>Упреждающая отправка сведений
Оповещения создаются в ответ на ряд определенных проблем, обнаруженных в приложении, и обычно резервируются для аварийных состояний, требующих немедленного внимания.  Вы можете заранее получать сведения о своем приложении с помощью приложения логики, которое запускается автоматически по расписанию.  Например, можно ежедневно отправлять администраторам письмо электронной почты со сводными сведениями, необходимыми для дальнейшего вычисления.

Дополнительные сведения о создании приложения логики с помощью Application Insights см. в статье [Автоматизация процессов Application Insights с помощью Logic Apps](../../azure-monitor/app/automate-with-logic-apps.md).

## <a name="next-steps"></a>Дополнительная информация
Теперь, когда вы узнали, как создавать оповещения о неполадках, перейдите к следующему руководству, чтобы узнать, как анализировать взаимодействие пользователей с приложением.

> [!div class="nextstepaction"]
> [Use Azure Application Insights to understand how customers are using your application](../../azure-monitor/learn/tutorial-users.md) (Анализ взаимодействия клиентов с приложением с помощью Azure Application Insights)