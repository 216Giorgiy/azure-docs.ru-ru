---
title: Известные проблемы в Azure Monitor для виртуальных машин (предварительная версия) | Документация Майкрософт
description: В этой статье рассказывается об известных проблемах с решением "Azure Monitor для виртуальных машин", которое совмещает мониторинг работоспособности и производительности операционной системы виртуальной машины Azure. Azure Monitor для виртуальных машин автоматически обнаруживает компоненты приложений и их зависимости от других ресурсов и сопоставляет взаимодействие между ними.
services: azure-monitor
documentationcenter: ''
author: mgoedtel
manager: carmonm
editor: tysonn
ms.assetid: ''
ms.service: azure-monitor
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 11/07/2018
ms.author: magoedte
ms.openlocfilehash: b2a60ddee58a7a9c37582085132ee8a1df767cb4
ms.sourcegitcommit: 5b869779fb99d51c1c288bc7122429a3d22a0363
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/10/2018
ms.locfileid: "53190362"
---
# <a name="known-issues-with-azure-monitor-for-vms-preview"></a>Известные проблемы в Azure Monitor для виртуальных машин (предварительная версия)

В этой статье рассказывается об известных проблемах с решением "Azure Monitor для виртуальных машин", которое совмещает мониторинг работоспособности и производительности операционной системы виртуальной машины Azure. 

Ниже перечислены известные проблемы с функцией проверки работоспособности.

- Функция работоспособности включена для всех виртуальных машин, подключенных к рабочей области Log Analytics. Это происходит, даже если действие начинается и заканчивается на одной виртуальной машине.
- После отключения мониторинга для виртуальной машины с помощью поддерживаемых методов следует попытаться повторно развернуть его в той же рабочей области. Если вы используете новую рабочую область и пытаетесь просмотреть состояния работоспособности для этой виртуальной машины, может наблюдаться аномальное поведение.
- Удаленная виртуальная машина Azure продолжает отображается в представлении списка виртуальных машин еще в течение трех–семи дней. Кроме того, если щелкнуть строку состояния такой виртуальной машины, появится представление **Диагностика работоспособности**, после чего начнется цикл загрузки. Если выбрать имя удаленной виртуальной машины, откроется область с сообщением о том, что виртуальная машина удалена.
- В этом выпуске невозможно изменить период времени и частоту проверки работоспособности. 
- Критерии работоспособности нельзя отключить. 
- После развертывания данные в областях **Azure Monitor** > **Виртуальные машины** > **Работоспособность** и **Ресурс виртуальной машины** > **Аналитика** появляются только спустя какое-то время.
- Представление "Диагностика работоспособности" обновляется быстрее других. При переключении между представлениями данные могут отображаться с небольшой задержкой. 
- В сводке по оповещениям, которая предоставляется вместе с Azure Monitor для виртуальных машин, отображаются только оповещения, касающиеся проблем с работоспособностью, выявленных на отслеживаемых виртуальных машинах Azure.
- В области **Список оповещений** на одной виртуальной машине и в Azure Monitor отображаются оповещения, у которых за последние 30 дней было состояние монитора *срабатывание*. Оповещения не настраиваются. Однако после отображения области **Список оповещений** можно выбрать сводку, чтобы изменить значение фильтра как для состояния монитора, так и для диапазона времени.
- Рекомендуется не изменять фильтры **Тип ресурса**, **Ресурс** и **Мониторинг службы** в области **Список оповещений**. Они настроены специально для решения. В этом представлении списка отображается больше полей, чем в представлении списка **Azure Monitor** > **Оповещения**.   
- На виртуальных машинах Linux в представлении **Диагностика работоспособности** указано полное доменное имя виртуальной машины, а не имя, определенное пользователем.
- Завершение работы виртуальных машин приводит к тому, что некоторые критерии работоспособности меняются на *критические*, а другие — на *работоспособность*. Итоговое состояние виртуальной машины отображается как *критическое*.
- Невозможно изменить серьезность оповещения о работоспособности. Его можно только включить или отключить. Кроме того, некоторые степени серьезности обновляются на основе состояния критериев работоспособности.
- При изменении любого параметра экземпляра критерия работоспособности изменяются все экземпляры критериев работоспособности того же типа на виртуальной машине. Например, если изменяется пороговое значение экземпляра критерия работоспособности диска, соответствующего логическому диску C, этот порог будет применяться ко всем другим логическим дискам, обнаруженным и контролируемым для этой же виртуальной машины.  
- Пороговые значения для критериев работоспособности виртуальной машины Windows невозможно изменить, так как для работоспособности виртуальной машины настроено состояние *Выполняется* или *Доступно*. При запросе состояния работоспособности из [API мониторинга рабочей нагрузки](https://github.com/Azure/azure-rest-api-specs/tree/master/specification/workloadmonitor/resource-manager) отображается параметр *comparisonOperator* со значением **LessThan** или **GreaterThan** и с *пороговым* значением **4** для службы или объекта при таких ошибках:
   - Служба "Работоспособность служб" DNS-клиента не запущена. 
   - Служба "Работоспособность служб" DHCP-клиента не запущена. 
   - Служба "Работоспособность служб" RPC не запущена. 
   - Служба "Работоспособность служб" брандмауэра Windows не запущена.
   - Служба "Работоспособность служб" журнала событий Windows не запущена. 
   - Служба "Работоспособность служб" сервера не запущена. 
   - Служба "Работоспособность служб" удаленного управления Windows не запущена. 
   - Ошибка или повреждение файловой системы — логический диск недоступен.

- Пороговые значения для следующих критериев работоспособности Linux невозможно изменить, так как для их состояния работоспособности уже установлено значение *true*. Для состояния работоспособности отображается параметр *compareOperator* со значением **LessThan** и *пороговым* значением **1** при запросе из API мониторинга рабочей нагрузки для объекта в зависимости от его контекста:
   - Состояние логического диска — логический диск работает в автономном режиме или недоступен.
   - Состояние диска — диск работает в автономном режиме или недоступен.
   - Состояние сетевого адаптера — сетевой адаптер отключен.  

- Критерий работоспособности *Общая загрузка ЦП* в Windows используется для отображения порогового значения **не равно 4** на портале и в API мониторинга рабочей нагрузки. Пороговое значение достигается, когда *Общая загрузка ЦП* больше 95%, длина очереди системы больше 15. В этом выпуске нельзя изменить данный критерий работоспособности. 
- Изменения конфигурации, такие как обновление порогового значения, занимают 30 минут, несмотря на мгновенное обновление портала или API мониторинга рабочей нагрузки. 
- В Windows недоступны критерии работоспособности на уровне отдельного процессора или логического процессора. Для виртуальных машин Windows доступен только критерий "Общая загрузка ЦП". 
- Правила генерации оповещений, определенные для каждого критерия работоспособности, не отображаются на портале Azure. Вы можете включить или отключить правило генерации оповещений о работоспособности только в [API мониторинга рабочей нагрузки](https://github.com/Azure/azure-rest-api-specs/tree/master/specification/workloadmonitor/resource-manager). 
- На портале Azure нельзя присвоить [группы действий Azure Monitor](../../azure-monitor/platform/action-groups.md) для оповещений о работоспособности. Можно использовать только API параметров уведомлений для настройки группы действий, которая будет запускаться всякий раз, когда выдается оповещение о работоспособности. Группы действий сейчас можно назначать виртуальной машине, чтобы все *оповещения о работоспособности* для этой виртуальной машины активировали одни и те же группы действий. В отличие от традиционных оповещений Azure, для каждого правила генерации оповещений о работоспособности не предусмотрены отдельные группы действий. Кроме того, при активации оповещений о работоспособности поддерживаются только группы действий, настроенные для уведомления по электронной почте или с помощью SMS. 

## <a name="next-steps"></a>Дополнительная информация
Сведения о требованиях и методах, помогающих отслеживать виртуальные машины, см. в статье [Подключение Azure Monitor для виртуальных машин](vminsights-onboard.md).
