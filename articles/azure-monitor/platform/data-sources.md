---
title: Источники данных в Azure Monitor | Документация Майкрософт
description: Описывает данные, доступные для мониторинга работоспособности и производительности ресурсов Azure, а также выполняющихся на их базе приложений.
documentationcenter: ''
author: bwren
manager: carmonm
editor: tysonn
ms.service: monitoring
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 11/13/2018
ms.author: bwren
ms.openlocfilehash: b9029676df6a878a6d3d5796928cbad9c20cd685
ms.sourcegitcommit: b4755b3262c5b7d546e598c0a034a7c0d1e261ec
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/24/2019
ms.locfileid: "54889065"
---
# <a name="sources-of-data-in-azure-monitor"></a>Источники данных в Azure Monitor
В этой статье описываются источники данных, собранные Azure Monitor для мониторинга работоспособности и производительности ваших ресурсов, а также выполняющихся на их базе приложений. Эти ресурсы могут находиться в Azure, в другом облаке или в локальной среде.  Подробную информацию о том, как эти данные хранятся и как вы можете их просматривать, см. в разделе [Сбор данных мониторинга в Azure](data-collection.md).

Данные мониторинга в Azure поступают из различных источников, которые можно упорядочить по уровням, где верхним является уровень приложения и любых операционных систем, а нижним — уровень компонентов платформы Azure. Эта концепция проиллюстрирована на следующей схеме, а каждый из уровней подробно описан в разделах ниже.

![Уровни данных мониторинга](media/data-sources/monitoring-tiers.png)

## <a name="azure-tenant"></a>Клиент Azure
Данные телеметрии, связанные с клиентом Azure, собираются из служб на уровне клиента, таких как Azure Active Directory.

![Сбор клиентов Azure](media/data-sources/tenant-collection.png)

### <a name="azure-active-directory-audit-logs"></a>Журналы аудита Azure Active Directory
[Отчеты Azure Active Directory](../../active-directory/reports-monitoring/overview-reports.md) включают в себя журнал действий входа и журнал аудита изменений, внесенных в пределах конкретного клиента. Эти журналы аудита могут записываться в журналы Azure Monitor для анализа с другими данными журнала.


## <a name="azure-platform"></a>Платформа Azure
Телеметрия, связанная с работоспособностью и работой самой платформы Azure, включает в себя данные об операциях и управлении подпиской Azure. Она включает в себя данные о работоспособности служб, хранящиеся в журнале действий Azure и журналах аудита из Azure Active Directory.

![Сбор подписок Azure](media/data-sources/azure-collection.png)

### <a name="azure-service-health"></a>Работоспособность служб Azure
[Работоспособность служб Azure](../../azure-monitor/platform/service-notifications.md) предоставляет сведения о работоспособности служб Azure в вашей подписке, используемых приложением и ресурсами. Вы можете создать оповещения, чтобы получать уведомления о текущих и ожидаемых критических проблемах, которые могут затронуть ваше приложение. Записи работоспособности служб сохраняются в [журнале действий Azure](../../azure-monitor/platform/activity-logs-overview.md), чтобы вы могли просматривать их в обозревателе журналов действий и копировать в журналы Azure Monitor.

### <a name="azure-activity-log"></a>Журнал действий Azure
[Журнал действий Azure](../../azure-monitor/platform/activity-logs-overview.md) включает в себя записи работоспособности служб, а также записи о любых изменениях конфигурации, внесенных для ресурсов Azure. Журнал действий доступен всем ресурсам Azure и является их _внешним_ представлением. Конкретные типы записей в журнале действий описаны в [схеме событий журнала действий Azure](../../azure-monitor/platform/activity-log-schema.md).

Вы можете просматривать журнал действий для определенного ресурса на его странице на портале Azure или журналы из нескольких ресурсов в [обозревателе журналов действий](../../azure-monitor/platform/activity-logs-overview.md). Это особенно удобно для копирования записей журналов в Azure Monitor для объединения с другими данными мониторинга. Вы также можете отправлять их в другие расположения с помощью [Центров событий](../../azure-monitor/platform/activity-logs-stream-event-hubs.md).



## <a name="azure-services"></a>Службы Azure
Метрики и журналы диагностики по уровням ресурсов содержат сведения о _внутренних_ операциях с ресурсами Azure. Они доступны для большинства служб Azure, а решения по управлению предоставляют дополнительные сведения о конкретных службах.

![Коллекция ресурсов Azure](media/data-sources/azure-resource-collection.png)


### <a name="metrics"></a>Метрики
Большинство служб Azure будут генерировать [метрики платформы](data-collection.md#metrics), отражающие их производительность и операции. Конкретные [метрики зависят от типа ресурса](../../azure-monitor/platform/metrics-supported.md).  Они доступны в обозревателе метрик и могут быть скопированы в Log Analytics для выявления тенденций и другого анализа.


### <a name="resource-diagnostic-logs"></a>Журналы диагностики ресурсов
Хотя журнал действий содержит сведения об операциях с ресурсами Azure, [журналы диагностики](../../azure-monitor/platform/diagnostic-logs-overview.md) по уровням ресурсов предоставляют сведения о работе самого ресурса.   Требования к конфигурации и содержимое этих журналов [зависит от типа ресурса](../../azure-monitor/platform/diagnostic-logs-schema.md).

Вы не можете просматривать журналы диагностики непосредственно на портале Azure, но можете [отправлять их в службу хранилища Azure для архивации](../../azure-monitor/platform/archive-diagnostic-logs.md) и экспортировать их в [концентратор событий](../../event-hubs/event-hubs-about.md) для перенаправления в другие службы либо в [Log Analytics](../../azure-monitor/platform/diagnostic-logs-stream-log-store.md) для анализа. Некоторые ресурсы могут выполнять запись непосредственно в Log Analytics, а другие записывают данные в учетную запись хранения перед их [импортом в Log Analytics](../../azure-monitor/platform/azure-storage-iis-table.md#use-the-azure-portal-to-collect-logs-from-azure-storage).

### <a name="monitoring-solutions"></a>Решения для мониторинга
 [Решения для мониторинга](../insights/solutions.md) собирают данные, чтобы получить дополнительные аналитические сведения о работе конкретной службы или приложения. Они собирают данные в журналы Azure Monitor, где их можно проанализировать с помощью [языка запросов](../log-query/log-query-overview.md) или [представлений](view-designer.md), которые обычно включены в решение.

## <a name="guest-operating-system"></a>Операционная система на виртуальной машине
Вычислительные ресурсы в Azure, других облаках и локальной среде имеют гостевую операционную систему для мониторинга. Установив один или несколько агентов, вы можете собирать данные телеметрии из гостевой ОС и передавать их в те же средства мониторинга, что и сами службы Azure.

![Коллекция вычислительных ресурсов Azure](media/data-sources/compute-resource-collection.png)

### <a name="azure-diagnostic-extension"></a>Расширение системы диагностики Azure
Расширение системы диагностики Azure обеспечивает базовый уровень мониторинга путем сбора журналов и данных о производительности из клиентской операционной системы вычислительных ресурсов Azure.   

### <a name="log-analytics-agent"></a>Агент Log Analytics
Комплексный мониторинг и управление виртуальными машинами Windows или Linux или физическими компьютерами обеспечивается с помощью агента Log Analytics. Виртуальная машина может работать в Azure, другом облаке или локальной среде. Агент подключается к Azure Monitor либо напрямую, либо через System Center Operations Manager и позволяет собирать данные из настроенных [источников данных](agent-data-sources.md) или [решений мониторинга](../insights/solutions.md), которые предоставляют дополнительные сведения о приложениях, выполняемых на виртуальной машине.

### <a name="dependency-agent"></a>Агент зависимостей
[Сопоставление служб](../insights/service-map.md) и [Azure Monitor для виртуальных машин](../insights/vminsights-overview.md) требует наличия Dependency Agent на виртуальных машинах Windows и Linux. Это решение интегрируется с агентом Log Analytics для сбора выявленных данных о процессах, запущенных на виртуальной машине, и зависимостях от внешних процессов. Оно сохраняет эти данные в Azure Monitor и визуализирует обнаруженные взаимосвязанные компоненты.  

Дополнительные сведения о различиях между агентами мониторинга и о том, какие агенты использовать в зависимости от требований мониторинга, см. в [этой статье](agents-overview.md).

## <a name="applications"></a>ПРИЛОЖЕНИЯ
Кроме данных телеметрии, которые приложение может записывать в гостевую операционную систему, подробный мониторинг приложений осуществляется с помощью [Application Insights](https://docs.microsoft.com/azure/application-insights/). Application Insights может собирать данные из приложений, работающих на различных платформах. Приложение может выполняться в Azure, другом облаке или локальной среде.

![Сбор данных приложения](media/data-sources/application-collection.png)


### <a name="application-data"></a>Данные приложения
Когда вы включаете службу Application Insights для приложения, установив пакет инструментирования, она собирает метрики и журналы, относящиеся к производительности и операциям приложения. Сюда входят подробные сведения о просмотрах страниц, запросах приложений и исключениях. Служба Application Insights сохраняет собранные данные в Azure Monitor. Она обладает эффективными средствами для анализа этих данных, но вы можете анализировать их вместе с данными из других источников, используя такие средства, как аналитика метрик и Log Analytics.

Вы также можете использовать Application Insights для [создания пользовательских метрик](../../azure-monitor/app/api-custom-events-metrics.md).  Это позволяет определить собственную логику для вычисления числового значения и последующего сохранения этого значения с другими метриками, которые можно просмотреть из обозревателя метрик и использовать для [автомасштабирования](../../azure-monitor/platform/autoscale-custom-metric.md) и оповещений метрик.

### <a name="dependencies"></a>Зависимости
Для наблюдения за различными логическими операциями приложения нужно [собирать данные телеметрии по нескольким компонентам](../../azure-monitor/app/transaction-diagnostics.md). Application Insights поддерживает [распределенную корреляцию телеметрии](../../azure-monitor/app/correlation.md), определяющую зависимости между компонентами, что позволяет анализировать их совместно.

### <a name="availability-tests"></a>Тесты доступности
[Тесты доступности](../../azure-monitor/app/monitor-web-app-availability.md) в Application Insights позволяют протестировать доступность и скорость реагирования приложения из разных расположений в общедоступном Интернете. Вы можете выполнить простую проверку связи, чтобы убедиться, что приложение активно, или воспользоваться Visual Studio для создания веб-теста, имитирующего пользовательский сценарий.  Тесты доступности не требуют никакого инструментирования в приложении.

## <a name="custom-sources"></a>Пользовательские источники
В дополнение к стандартным уровням приложения вам может потребоваться отслеживать другие ресурсы, имеющие данные телеметрии, которые невозможно собрать через другие источники данных. Для этих ресурсов вам необходимо записать данные с помощью API Azure Monitor.

![Сбор пользовательских данных](media/data-sources/custom-collection.png)

### <a name="data-collector-api"></a>API сборщика данных
Azure Monitor может собирать данные журналов из любого клиента REST с помощью [API сборщика данных](data-collector-api.md). Это позволяет создавать пользовательские сценарии мониторинга и подвергать мониторингу ресурсы, которые не предоставляют данные телеметрии через другие источники.

## <a name="next-steps"></a>Дополнительная информация

- Дополнительные сведения о типах данных мониторинга, собранных Azure Monitor, и о том, как просматривать и анализировать эти данные, см. в статье [Сбор данных мониторинга в Azure](data-collection.md).
