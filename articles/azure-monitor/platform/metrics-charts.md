---
title: Обозреватель метрик Azure Monitor
description: Узнайте о новых возможностях обозревателя метрик Azure Monitor
author: vgorbenko
services: azure-monitor
ms.service: azure-monitor
ms.topic: conceptual
ms.date: 12/20/2018
ms.author: vitalyg
ms.component: metrics
ms.openlocfilehash: 457c7e8904797955854c4c3e16a631cf6537e2b8
ms.sourcegitcommit: dede0c5cbb2bd975349b6286c48456cfd270d6e9
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/16/2019
ms.locfileid: "54330081"
---
# <a name="azure-monitor-metrics-explorer"></a>Обозреватель метрик Azure Monitor

Обозреватель метрик Azure Monitor является компонентом портала Microsoft Azure, который позволяет создавать диаграммы, визуально коррелируемые тренды и изучать пики и спады в значениях метрик. Обозреватель метрик является важной отправной точкой при изучении различных проблем производительности и доступности приложений и инфраструктуры, размещенных в Azure или отслеживаемых службами Azure Monitor.

## <a name="metrics-in-azure"></a>Метрики в Azure

Метрики в Microsoft Azure — это ряд измеренных значений и счетчиков, которые собираются и сохраняются в течение определенного времени. Существуют стандартные метрики (или "метрики платформы") и настраиваемые метрики. Стандартные метрики предоставляет платформа Azure. Стандартные метрики показывают работоспособность и статистику потребления ресурсов Azure. При отправке настраиваемой метрики в Azure приложения используют [API Application Insights для пользовательских событий](https://docs.microsoft.com/azure/application-insights/app-insights-api-custom-events-metrics). Настраиваемые метрики хранятся в ресурсах Application Insights вместе с другими метриками для конкретного приложения.

## <a name="create-a-new-chart"></a>Создание диаграммы

1. Откройте портал Azure.
2. Перейдите к новой вкладке **Монитор** и выберите **Metrics** (Метрики).

   ![Образ метрик](./media/metrics-charts/00001.png)

3. Автоматически откроется **селектор метрик**. Выберите ресурс из списка, чтобы просмотреть связанные с ним метрики. В списке будут показаны только ресурсы с метриками.

   ![Образ метрик](./media/metrics-charts/00002.png)

   > [!NOTE]
   >При наличии нескольких подписок Azure обозреватель метрик извлекает ресурсы из всех подписок, заданных в разделе "Параметры портала -> Filter by subscriptions list" (Фильтровать по списку подписок). Чтобы изменить это, щелкните значок шестеренки параметров портала в верхней части экрана и выберите подписку, которую необходимо использовать.

4. Для некоторых типов ресурсов (учетных записей хранения и виртуальных машин) перед выбором метрики нужно выбрать **Пространство имен**. Каждое пространство имен имеет собственный набор метрик, не имеющий отношение к другим пространствам имен.

   Например, каждая служба хранилища Azure имеет метрики для подслужб "Большие двоичные объекты", "Файлы", "Очереди" и "Таблицы", которые являются частями учетной записи хранения. Однако метрика "Число сообщений в очереди" применяется исключительно к подслужбе "Очередь", а не к любым другим подслужбам ученой записи хранения.

   ![Образ метрик](./media/metrics-charts/00003.png)

5. Выберите метрику из списка. Если вы знаете часть имени требуемой метрики, можно начать вводить ее, чтобы просмотреть отфильтрованный список доступных метрик:

   ![Образ метрик](./media/metrics-charts/00004.png)

6. После выбора метрики диаграмма будет преобразована для просмотра агрегирования по умолчанию. На этом этапе можно щелкнуть за пределами **селектора метрик**, чтобы закрыть его. Диаграммы также при необходимости можно переключить на другое агрегирование. Для некоторых метрик при переключении агрегирования можно выбрать значение, которое нужно показать на диаграмме. Например, можно переключаться между средними, минимальными и максимальными значениями. 

7. Нажмите кнопку **Добавить метрику** и повторите действия 3–6, чтобы добавить дополнительные метрики на одну диаграмму.

   > [!NOTE]
   > Как правило, метрики с различными единицами измерения (например, миллисекундами и килобайтами) или значительно отличающимися масштабами на одной диаграмме не требуются. Вместо этого следует использовать несколько диаграмм. Нажмите кнопку Add Chart (Добавить диаграмму), чтобы создать несколько диаграмм в обозревателе метрик.

## <a name="apply-filters-to-charts"></a>Применение фильтров к диаграммам

К диаграммам, на которых показаны метрики с измерениями, можно применить фильтры. Например, если метрика "Счетчик транзакций" имеет измерение "Тип ответа", которое указывает, успешен ли ответ от транзакции, тогда при фильтрации по этому измерению будет создана диаграмма только для успешных (или только неудачных) транзакций. 

### <a name="to-add-a-filter"></a>Добавление фильтра

1. Выберите **Добавить фильтр** над диаграммой.

2. Выберите измерение (свойство), которое необходимо отфильтровать.

   ![изображение метрики](./media/metrics-charts/00006.png)

3. Выберите значения измерения, которые нужно включить при создании диаграммы (в этом примере показаны отфильтрованные успешные транзакции с хранилищем):

   ![изображение метрики](./media/metrics-charts/00007.png)

4. Выбрав значения фильтра, щелкните за пределами средства выбора фильтра, чтобы закрыть его. Теперь на диаграмме показано, сколько транзакций с хранилищем не удалось выполнить:

   ![изображение метрики](./media/metrics-charts/00008.png)

5. Шаги 1–4 можно повторить, чтобы применить несколько фильтров к одной диаграмме.

## <a name="segment-a-chart"></a>Сегментирование диаграммы

Метрики можно разделить по измерениям, чтобы визуализировать сравнения между различными сегментами метрики и идентифицировать внешние сегменты измерения. 

### <a name="to-segment-a-chart"></a>Сегментирование диаграммы

1. Щелкните **Применить разделение** над диаграммой.
 
   > [!NOTE]
   > У вас может быть несколько фильтров, но только одно значение разделения или сегментации для одной диаграммы.

2. Выберите измерения, по которому необходимо сегментировать диаграммы:

   ![изображение метрики](./media/metrics-charts/00010.png)

   Теперь на диаграмме отображаются несколько строк, по одной для каждого сегмента измерения:

   ![изображение метрики](./media/metrics-charts/00012.png)

3. Щелкните за пределами **селектора группирования**, чтобы закрыть его.

   > [!NOTE]
   > С помощью фильтрации и разделения одного измерения можно скрыть сегменты, которые не имеют значения для сценария, и облегчить анализ диаграмм.

### <a name="new-alert-rule"></a>Новое правило генерации оповещений

Можно также использовать условия, которые вы задали для визуализации метрик, как основу для базовой логики правила генерации оповещений на основе метрик. 

Щелкните **Создать правило генерации оповещений**.

![Кнопка "Создать правило генерации оповещений", выделенная красным цветом](./media/metrics-charts/015.png)

Откроется панель создания правила генерации оповещений с измерениями базовой метрики из предварительно заполненной диаграммы, чтобы вам было проще создавать настраиваемые правила генерации оповещений.

![Создать правило генерации оповещений](./media/metrics-charts/016.png)

Ознакомьтесь с этой [статьей](alerts-metric.md), чтобы узнать больше о настройке оповещений на основе метрик.

## <a name="lock-boundaries-of-chart-y-axis"></a>Фиксирование границ диаграммы по оси Y

Фиксирование диапазона оси Y приобретает значение, если в диаграмме отображаются небольшие колебания больших значений. 

Например, когда объем успешных запросов снижается с 99,99 % до 99,5 %, это может представлять собой значительное снижение качества обслуживания. Тем не менее будет трудно или даже невозможно заметить маленькое колебание числового значения, если заданы параметры диаграммы по умолчанию. В этом случае можно зафиксировать самую нижнюю границу диаграммы на уровне 99 %, в результате чего небольшой спад будет более очевидным. 

Другой пример — колебание объема доступной памяти, когда значение технически никогда не достигнет значения 0. Благодаря фиксированию диапазона на уровне большего значения легче обнаружить уменьшение объема доступной памяти. 

Для управления диапазоном оси Y используйте меню диаграммы "..." и выберите **Изменить диаграмму**, чтобы получить доступ к дополнительным параметрам диаграммы. Измените значения в разделе "Диапазон оси Y" или нажмите кнопку **Автоматически**, чтобы вернуть значения по умолчанию.

![изображение метрики](./media/metrics-charts/00014-manually-set-granularity.png)

> [!WARNING]
> При фиксировании границ оси Y диаграмм, отслеживающих различные количества или суммы за период времени (и таким образом использующих количество, сумму, минимальные или максимальные агрегирования) обычно требуется указать степень детализации фиксированного времени, а не полагаться на автоматические значения по умолчанию. Это необходимо, так как значения на диаграммах изменяются из-за автоматического изменения степени детализации, когда пользователь изменяет размер окна браузера или переходит от одного разрешения экрана к другому. Полученное изменение степени детализации времени влияет на внешний вид диаграммы таким образом, что текущее выделение диапазона оси Y становится недопустимым.

## <a name="pin-charts-to-dashboards"></a>Закрепление диаграмм на панелях мониторинга

После настройки диаграмм их можно добавить на панели мониторинга, чтобы их можно было просмотреть повторно, возможно, в контексте другой телеметрии мониторинга или совместно с другими участниками команды.

Чтобы закрепить настроенную диаграмму на панели мониторинга, сделайте следующее:

После настройки диаграммы щелкните меню **Chart Actions** (Действия на диаграмме) в правом верхнем углу диаграммы и выберите **Закрепить на панели мониторинга**.

![изображение метрики](./media/metrics-charts/00013.png)

## <a name="next-steps"></a>Дополнительная информация

  Дополнительные сведения о рекомендациях по созданию готовых к работе панелей мониторинга с метриками см. в статье [Create custom KPI dashboards using Azure Application Insights](https://docs.microsoft.com/azure/application-insights/app-insights-tutorial-dashboards) (Создание пользовательских панелей мониторинга KPI с помощью Azure Application Insights).
