---
title: Общие сведения о службе Azure Monitor | Microsoft Docs
description: Обзор функциональных возможностей и служб Майкрософт, которые являются частью стратегии мониторинга ваших служб и приложений в Azure.
author: bwren
manager: carmonm
editor: ''
services: monitoring-and-diagnostics
documentationcenter: monitoring-and-diagnostics
ms.service: azure-monitor
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 09/14/2018
ms.author: bwren
ms.openlocfilehash: 97cc6d6e922ab0bedd729eddca754ae016f041bf
ms.sourcegitcommit: 32d218f5bd74f1cd106f4248115985df631d0a8c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/24/2018
ms.locfileid: "46958022"
---
# <a name="azure-monitor-overview"></a>Общие сведения о службе Azure Monitor

Служба Azure Monitor обеспечивает максимальную доступность и производительность приложений, предоставляя полноценное решение для сбора, анализа и обработки данных телеметрии из облачных и локальных сред. Она поможет вам понять, как выполняются приложения, а также заранее определить проблемы, влияющие на них, и ресурсы, от которых они зависят.

> [!VIDEO https://www.youtube.com/embed/_hGff5bVtkM]

## <a name="overview"></a>Обзор
На приведенной ниже схеме показано высокоуровневое представление Azure Monitor. В центре схемы находятся хранилища данных для метрик и журналов — двух основных типов данных, используемых службой Azure Monitor. Слева находятся [источники, которые собирают данные телеметрии из разных отслеживаемых ресурсов](../monitoring/monitoring-data-sources.md) и заполняют [хранилища данных](../monitoring/monitoring-data-collection.md). Справа находятся различные операции, которые Azure Monitor выполняет с собранными данными (например, анализ, оповещение и потоковая передача во внешние системы).


![Общие сведения о службе Azure Monitor](media/overview/overview.png)


## <a name="monitoring-data-platform"></a>Платформа данных мониторинга
Все данные, собираемые службой Azure Monitor, соответствуют одному из двух основных типов, то есть представляют собой [метрики или журналы](../monitoring/monitoring-data-collection.md). [Метрики](../monitoring/monitoring-data-collection.md#metrics) — это числовые значения, описывающие конкретный аспект системы в определенный момент времени. Они занимают небольшой объем, и их можно использовать в сценариях, предусматривающих работу в режиме практически реального времени. [Журналы](../monitoring/monitoring-data-collection.md#logs) содержат данные различных типов, упорядоченные по записям с разными наборами свойств для каждого типа. Помимо данных производительности в системе (в виде журналов) хранятся данные телеметрии, например события и трассировки, так что можно объединить все эти данные для анализа.

Для многих ресурсов Azure данные, собранные службой Azure Monitor, отображаются непосредственно на странице "Обзор" портала Azure. Обратите внимание на любую виртуальную машину, и вы увидите несколько диаграмм с метриками производительности. Щелкните любой график, чтобы открыть данные в [обозревателе метрик](../monitoring-and-diagnostics/monitoring-metric-charts.md) на портале Azure, где вы можете отмечать значения нескольких метрик с течением времени.  Вы можете просматривать графики в интерактивном режиме или закрепить их на панели мониторинга, чтобы просматривать их вместе с другими визуализациями.

![Метрики](media/overview/metrics.png)

Данные журнала, собранные службой Azure Monitor, хранятся в службе Log Analytics, которая поддерживает [функциональный язык запросов](../log-analytics/log-analytics-queries.md) для быстрого получения, консолидации и анализа данных.  Вы можете создавать и тестировать запросы с помощью [страницы Log Analytics](../log-analytics/log-analytics-log-search-portals.md) на портале Azure, а затем либо напрямую анализировать данные с помощью этих средств, либо сохранять запросы для использования с [визуализациями](visualizations.md) или [правилами генерации оповещений](../monitoring-and-diagnostics/monitoring-overview-alerts.md).

Язык запросов Log Analytics подходит для простых запросов к журналам, однако он также включает расширенные функции (например, функции агрегирования, объединения и интеллектуальную аналитику). Вы можете быстро изучить язык запросов с помощью доступных [уроков](../log-analytics/query-language/get-started-queries.md).  Для пользователей, которые уже знакомы с [SQL](../log-analytics/query-language/sql-cheatsheet.md) и [Splunk](../log-analytics/query-language/splunk-cheatsheet.md), предоставляются отдельные руководства.

![Журналы](media/overview/logs.png)

## <a name="what-data-does-azure-monitor-collect"></a>Какие данные собирает Azure Monitor?
Log Analytics может собирать данные из различных источников. Данные мониторинга для приложений можно рассматривать по уровням — от приложения и всех используемых им операций и служб до самой платформы. Azure Monitor собирает данные со следующих уровней:

- **Данные мониторинга приложений.** Данные о производительности и функциональности написанного вами кода, не зависящие от платформы.
- **Данные мониторинга ОС на виртуальной машине.** Данные об операционной системе, в которой выполняется ваше приложение. Это может быть Azure, другое облако или локальная среда. 
- **Данные мониторинга ресурсов Azure.** Данные о работе ресурса Azure.
- **Данные мониторинга подписки Azure.** Данные об операциях и управлении подпиской Azure, а также о работоспособности и операциях самой платформы Azure. 
- **Данные мониторинга клиента Azure.** Данные о работе служб Azure на уровне клиента (например, Azure Active Directory).

Как только вы создадите подписку Azure и начнете добавлять такие ресурсы, как виртуальные машины и веб-приложения, Azure Monitor начнет собирать данные.  [Журналы действий](../monitoring-and-diagnostics/monitoring-overview-activity-logs.md) содержат сведения о времени создания и изменения ресурсов. [Метрики](../monitoring-and-diagnostics/monitoring-overview-metrics.md) указывают производительность ресурса и используемые им ресурсы. 

В собираемые данные можно включить сведения о фактической работе ресурсов, [включив диагностику](../monitoring-and-diagnostics/monitoring-overview-of-diagnostic-logs.md) и [добавив агент](../log-analytics/log-analytics-agent-windows.md) для вычисления ресурсов. При этом собираются данные телеметрии для внутренней работы ресурса и можно настраивать различные [источники данных](../log-analytics/log-analytics-data-sources.md) на сбор журналов и метрик из операционной системы Windows или Linux на виртуальной машине. 

[Добавьте пакет инструментирования в приложение](../application-insights/app-insights-azure-web-apps.md), чтобы служба Application Insights могла собирать подробные сведения о приложении, включая просмотры страниц, запросы приложений и исключения. Проверьте доступность приложения, настроив [тест доступности](../application-insights/app-insights-monitor-web-app-availability.md) для имитации пользовательского трафика.

### <a name="custom-sources"></a>Пользовательские источники
Azure Monitor может собирать данные журналов из любого клиента REST с помощью [API сборщика данных](../log-analytics/log-analytics-data-collector-api.md). Это позволяет создавать пользовательские сценарии мониторинга и обеспечить мониторинг ресурсов, которые не предоставляют данные телеметрии через другие источники.



## <a name="insights"></a>Аналитика
Данные мониторинга полезны, только если они могут сделать работу вычислительной среды более открытой. Azure Monitor включает несколько функций и средств, предоставляющих ценные аналитические сведения о ваших приложениях и других ресурсах, от которых они зависят. [Решения для мониторинга](../monitoring/monitoring-solutions.md) и такие функции, как [Application Insights](../application-insights/app-insights-overview.md) и аналитика для контейнеров, предоставляют аналитические сведения о различных аспектах приложения и определенных служб Azure. 

### <a name="application-insights"></a>Application Insights
Служба [Application Insights](http://azure.microsoft.com/documentation/services/application-insights) контролирует доступность, производительность и использование ваших веб-приложений независимо от того, размещены ли они в облачной или локальной среде. Она использует мощную платформу анализа данных в Log Analytics для предоставления подробных аналитических сведений о работе приложения и диагностике ошибок, не дожидаясь, пока пользователь сообщит о них. Application Insights включает точки подключения к различным средствам разработки и интегрируется с Visual Studio для поддержки процессов DevOps.

![Анализ приложения](media/overview/app-insights.png)

### <a name="azure-monitor-for-containers"></a>Azure Monitor для контейнеров
Azure Monitor для контейнеров — это компонент, призванный контролировать производительность рабочих нагрузок контейнеров, развертываемых на управляемых кластерах Kubernetes в службе Azure Kubernetes (AKS). С его помощью можно отслеживать производительность, собирая данные метрик памяти и процессора из контроллеров, узлов и контейнеров, доступных в Kubernetes, с помощью API метрик. Также собираются журналы контейнеров.  После включения мониторинга из кластеров Kubernetes эти метрики и журналы автоматически собираются через контейнеризованную версию агента Log Analytics для Linux и хранятся в Log Analytics.

![Работоспособность контейнеров](media/overview/container-insights.png)

### <a name="azure-monitor-for-vms"></a>Azure Monitor для виртуальных машин
Аналитика виртуальных машин Azure Monitor отслеживает виртуальные машины Azure в крупных масштабах, анализируя производительность и работоспособность виртуальных машин Windows и Linux, включая различные процессы и взаимосвязанные зависимости от других ресурсов и внешних процессов. Решение включает поддержку мониторинга производительности и зависимостей приложений для виртуальных машин, размещенных в локальном или другом поставщике облачных служб.  


![Аналитика виртуальных машин](media/overview/vm-insights.png)

### <a name="monitoring-solutions"></a>Решения для мониторинга
[Решения для мониторинга](../monitoring/monitoring-solutions.md) в Azure Monitor — это упакованные наборы логики, которые предоставляют аналитические сведения об определенном приложении или службе. Они собирают данные в Log Analytics вместе с другими данными мониторинга, используя [запросы](../log-analytics/log-analytics-queries.md) для анализа и [представления](../log-analytics/log-analytics-view-designer.md) для визуализации. [Корпорация Майкрософт](../monitoring/monitoring-solutions-inventory.md) и ее партнеры предоставляют решения для мониторинга, позволяющие контролировать различные службы Azure и другие приложения.

![Решения для мониторинга](../monitoring/media/monitoring-solutions/overview.png)

## <a name="responding-to-critical-situations"></a>Реагирование на критические ситуации
Помимо интерактивного анализа данных мониторинга, эффективное решение для мониторинга должно иметь возможность заранее реагировать на критические условия, определенные в данных, которые оно собирает. Например, оно может отправлять SMS или электронное письмо администратору, ответственному за расследование проблемы. Вы также можете запустить автоматизированный процесс, пытающийся исправить ошибку.


### <a name="alerts"></a>Оповещения
[Оповещения в Azure Monitor](../monitoring-and-diagnostics/monitoring-overview-alerts.md) заранее сообщают вам о критических условиях и пытаются выполнить корректирующие действия. Правила генерации оповещений, основанные на метриках, обеспечивают отправку оповещений с числовыми значениями практически в реальном времени, а правила, основанные на журналах, позволяют использовать сложную логику для данных из множества источников.

Правила генерации оповещений Azure Monitor используют [группы действий](../monitoring-and-diagnostics/monitoring-action-groups.md), содержащие уникальные наборы получателей и действий, которые могут использоваться в различных правилах. В зависимости от требований, группы действий могут выполнять различные действия (например, использовать веб-перехватчики, чтобы оповещения запускали внешние операции, или интегрироваться со средствами ITSM).

![Оповещения](media/overview/alerts.png)

### <a name="autoscale"></a>Autoscale
Благодаря автомасштабированию вы получаете именно тот объем ресурсов, который нужен для обработки нагрузки в вашем приложении. Это позволяет создавать правила, которые используют метрики, собираемые службой Azure Monitor, чтобы определить, когда будут автоматически добавляться ресурсы для реагирования на пики нагрузки, а также экономить деньги, удаляя простаивающие ресурсы. Вы можете указать минимальное и максимальное количество экземпляров, а также логику увеличения и уменьшения объема выделяемых ресурсов.

![Autoscale](media/overview/autoscale.png)

## <a name="visualizing-monitoring-data"></a>Визуализация данных мониторинга
[Визуализации](visualizations.md), такие как диаграммы и таблицы, — это эффективные средства создания сводок по данным мониторинга и их представления для различных аудиторий. Служба Azure Monitor включает собственные функции для визуализации данных мониторинга и использует другие службы Azure, чтобы публиковать их для различных аудиторий.

### <a name="dashboards"></a>Панели мониторинга
[Панели мониторинга Azure](../azure-portal/azure-portal-dashboards.md) позволяют объединять данные различных типов, включая метрики и журналы, в одну панель на [портале Azure](https://portal.azure.com). При желании вы можете предоставить доступ к этой панели другим пользователям Azure. Помимо выходных данных для любого запроса на получение журнала или для диаграммы метрик, на панель мониторинга Azure можно добавлять элементы из Azure Monitor. Например, вы можете создать панель мониторинга, на которой совмещаются плитки с графиком метрик, таблицей журналов действий, графиком использования из Application Insights и выходными данными запроса из Log Analytics.

![панель мониторинга](media/overview/dashboard.png)

### <a name="views"></a>Views
[Представления из Azure Monitor](../log-analytics/log-analytics-view-designer.md) визуализируют данные журналов в Log Analytics.  Каждое представление содержит одну плитку, детализирующую сочетание визуализаций, таких как линейчатые диаграммы и графики, в дополнение к спискам, суммирующим важные данные.  Решения для мониторинга включают представления, которые суммируют данные для конкретного приложения. Вы можете создавать собственные представления, чтобы отобразить данные, полученные при любом поиске по журналам Log Analytics. Как и другие элементы в Azure Monitor, представления можно добавлять на панели мониторинга Azure.

![Представление Log Analytics](media/overview/view.png)

### <a name="power-bi"></a>Power BI
[Power BI](https://powerbi.microsoft.com) — это служба бизнес-аналитики, предоставляющая интерактивные визуализации данных из различных источников. Это эффективное средство предоставления доступа к данным другим пользователям в организации и за ее пределами. Вы можете настроить Power BI на [автоматический импорт данных журналов из Azure Monitor](../log-analytics/log-analytics-powerbi.md), чтобы воспользоваться этими дополнительными визуализациями.


![Power BI](media/overview/power-bi.png)


## <a name="integrate-and-export-data"></a>Интеграция и экспорт данных
Часто требуется интегрировать Azure Monitor с другими системами и создавать настраиваемые решения, использующие ваши данные мониторинга. Другие службы Azure работают с Azure Monitor для обеспечения этой интеграции.

### <a name="event-hub"></a>Концентратор событий
[Центры событий Azure](https://docs.microsoft.com/azure/event-hubs) — это платформа потоковой передачи и служба приема событий, которая может трансформировать и хранить данные с помощью любого поставщика аналитических данных в реальном времени либо адаптеров хранения или пакетной обработки. Используйте "Центры событий" для [потоковой передачи данных из Azure Monitor](../monitoring-and-diagnostics/monitor-stream-monitoring-data-event-hubs.md) партнерским средствам мониторинга и SIEM.

> [!VIDEO https://www.youtube.com/embed/SPHxCgbcvSw]

### <a name="logic-apps"></a>Logic Apps
[Logic Apps](https://azure.microsoft.com/services/logic-apps) — это служба, позволяющая автоматизировать задачи и бизнес-процессы с помощью рабочих процессов, которые интегрируются с различными системами и службами. Доступны действия для считывания и записи метрик и журналов в Azure Monitor, позволяющие создавать рабочие процессы, которые интегрируются с различными системами.

![приложение логики;](../log-analytics/media/log-analytics-activity-logs-subscriptions/log-analytics-logic-apps-activity-log-overview.png)

### <a name="api"></a>API
Помимо доступа к генерируемым оповещениям, доступно множество API для считывания и записи метрик и журналов в службе Azure Monitor. Вы также можете настраивать и получать оповещения. Это предоставляет вам практически неограниченные возможности создания настраиваемых решений, которые интегрируются с Azure Monitor.

## <a name="next-steps"></a>Дополнительная информация
См. также:

* [Azure Monitor](https://azure.microsoft.com/services/monitor/) поможет начать работу с метриками и предупреждениями базового мониторинга.
* [Application Insights](https://azure.microsoft.com/documentation/services/application-insights/), если вы пытаетесь диагностировать проблемы в работе веб-приложения службы приложений.
* [Log Analytics](https://azure.microsoft.com/documentation/services/log-analytics/) полезен для анализа собранных данных и журналов мониторинга.



