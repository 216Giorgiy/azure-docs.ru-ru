---
title: 'Руководство. Динамическое членство в группах: добавление и удаление пользователей в Azure Active Directory'
description: В этом руководстве вы используете группы с правилами членства пользователя, чтобы автоматически добавлять или удалять пользователей
services: active-directory
documentationcenter: ''
author: curtand
manager: mtillman
editor: ''
ms.service: active-directory
ms.workload: identity
ms.subservice: users-groups-roles
ms.topic: tutorial
ms.date: 01/28/2019
ms.author: curtand
ms.reviewer: krbain
ms.custom: it-pro;seo-update-azuread-jan
ms.openlocfilehash: bf625b45fa47d4fa681521eb992bd2b07cc08946
ms.sourcegitcommit: a7331d0cc53805a7d3170c4368862cad0d4f3144
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/30/2019
ms.locfileid: "55296253"
---
# <a name="tutorial-add-or-remove-group-members-automatically"></a>Руководство. Автоматическое добавление или удаление участников группы

В Azure Active Directory (Azure AD) можно автоматически добавлять или удалять пользователей в группах безопасности или Office 365, поэтому не обязательно всегда делать это вручную. Всякий раз, когда какие-либо свойства пользователя или устройства меняются, Azure AD оценивает все динамические групповые правила в клиенте, чтобы узнать, следует ли добавлять или удалять участников.

Из этого руководства вы узнаете, как выполнять следующие задачи:
> [!div class="checklist"]
> * Создание автоматически заполняемых групп гостевых пользователей из отдельной партнерской компании.
> * Присвоение группе лицензий для партнерских функций, чтобы обеспечить к ним доступ гостевых пользователей.
> * (Дополнительно.) Защита группы **Все пользователи** путем удаления гостевых пользователей, чтобы, например, предоставить своим пользователям доступ только ко внутренним сайтам.

Если у вас еще нет подписки Azure, [создайте бесплатную учетную запись Azure](https://azure.microsoft.com/free/), прежде чем начинать работу.

## <a name="prerequisites"></a>Предварительные требования

Глобальному администратору клиента для этой функции требуется одна лицензия Microsoft Azure Active Directory Premium. Если у вас ее нет, в Azure AD выберите **Лицензии** > **Продукты** > **Try/Buy** (Попробовать или купить).

Вы не обязаны назначать лицензии пользователям, чтобы они были членами динамических групп. Чтобы охватить всех пользователей, требуется только минимальное количество доступных лицензий Azure AD Premium P1 в клиенте. 

## <a name="create-a-group-of-guest-users"></a>Создание группы гостевых пользователей

Сначала вы создадите группу для гостевых пользователей, которые принадлежат одной партнерской компании. Они нуждаются в специальном лицензировании, поэтому для этого лучше создать группу.

1. Войдите на портал Azure (https://portal.azure.com) с помощью учетной записи глобального администратора клиента.
2. Выберите **Azure Active Directory** > **Группы** > **New group** (Новая группа).
  ![выберите команду новой группы](./media/groups-dynamic-tutorial/new-group.png)
3. В колонке **Группа**:
  
  * выберите **Безопасность** в качестве типа группы;
  * введите `Guest users Contoso` в качестве имени и описание группы;
  * измените **тип членства** на **Динамический пользователь**;
  * выберите **Добавить динамический запрос**.
  
4. Выберите **расширенное правило**, а затем в поле **Расширенное правило** введите следующее: `(user.userType -eq "Guest") -and (user.companyName -eq "Contoso")`.
5. Выберите **Добавить запрос**, чтобы закрыть колонку.
6. Щелкните **Создать** в колонке **Группа**, чтобы создать группу.

## <a name="assign-licenses"></a>Назначение лицензий

Теперь, когда у вас есть новая группа, можно применить лицензии, которые требуются этим пользователям-партнерам.

1. В Azure AD выберите **Лицензии**, выберите одну или несколько лицензий, а затем щелкните **Присвоить**.
2. Выберите **Пользователи и группы**, а затем щелкните группу **Guest users Contoso** (Гостевые пользователи Contoso) и сохраните изменения.
3. **Параметры назначения** позволяют включать и выключать планы обслуживания, содержащие выбранные лицензии. При внесении изменений необходимо нажать кнопку **ОК**, чтобы сохранить их.
4. Чтобы завершить назначение, в нижней части области **Назначение лицензии** щелкните **Назначить**.

## <a name="remove-guests-from-all-users-group"></a>Удаление гостей из группы "Все пользователи"

Возможно, ваш окончательный административный план состоит в том, чтобы назначить всех гостевых пользователей в их группы по компании. Кроме того, теперь можно изменить группу **Все пользователи**, чтобы она была зарезервирована только для пользователей-участников в клиенте. Затем ее можно использовать для присвоения приложений и лицензий, которые относятся к домашней организации.

   ![Изменение группы "Все пользователи" на группу "Только для членов"](./media/groups-dynamic-tutorial/all-users-edit.png)

## <a name="clean-up-resources"></a>Очистка ресурсов

**Удаление группы гостевых пользователей**

1. Войдите на [портал Azure](https://portal.azure.com) с помощью учетной записи глобального администратора клиента.
2. Выберите **Azure Active Directory** > **Группы**. Выберите группу **Guest users Contoso** (Гостевые пользователи Contoso), нажмите кнопку с многоточием (...), а затем выберите **Удалить**. При удалении группы удаляются все присвоенные лицензии.

**Восстановление группы "Все пользователи"**
1. Выберите **Azure Active Directory** > **Группы**. Выберите имя группы **Все пользователи**, чтобы открыть ее.
1. Выберите **Правила динамического членства**, очистите весь текст в правиле и нажмите кнопку **Сохранить**.

## <a name="next-steps"></a>Дополнительная информация

Из этого руководства вы узнали, как выполнить следующие задачи:
> [!div class="checklist"]
> * Создание группы гостевых пользователей
> * Присвоение лицензий новой группе
> * Изменение группы "Все пользователи" на группу "Только для членов"

Перейдите к следующей статье, чтобы получить основные сведения о групповом лицензировании.
> [!div class="nextstepaction"]
> [Основы группового лицензирования в Azure Active Directory](../fundamentals/active-directory-licensing-whatis-azure-portal.md)



