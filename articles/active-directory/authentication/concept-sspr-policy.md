---
title: Политики самостоятельного сброса пароля в Azure AD
description: Настройка параметров политик самостоятельного сброса пароля в Azure AD.
services: active-directory
ms.service: active-directory
ms.component: authentication
ms.topic: conceptual
ms.date: 01/08/2019
ms.author: joflore
author: MicrosoftGuyJFlo
manager: daveba
ms.reviewer: sahenry
ms.openlocfilehash: 2b0e96186221908352771a80803c17b772d660be
ms.sourcegitcommit: 9999fe6e2400cf734f79e2edd6f96a8adf118d92
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/22/2019
ms.locfileid: "54431864"
---
# <a name="password-policies-and-restrictions-in-azure-active-directory"></a>Политики и ограничения для паролей в Azure Active Directory

В этой статье описываются политики паролей и требования к сложности, связанные с учетными записями пользователей в клиенте Azure Active Directory (Azure AD).

## <a name="administrator-reset-policy-differences"></a>Различия политики сброса администратора

**Корпорация Майкрософт применяет строгую *двухфакторную* политику сброса пароля по умолчанию для любой роли администратора Azure**. Эта политика может отличаться от политики, которую вы определили для пользователей, и она не может быть изменена. Всегда следует тестировать функции сброса пароля от имени пользователя, которому не назначена какая-либо роль администратора Azure.

При использовании двухфакторной политики у **администраторов нет возможности применять контрольные вопросы**.

Двухфакторная политика требует ввода двух фрагментов данных для аутентификации, таких как **адрес электронной почты**, **приложение Authenticator** или **номер телефона**. Двухфакторная политика применяется в следующих случаях:

* затронуты все следующие роли администратора:
  * администратор службы технической поддержки;
  * администратор службы поддержки;
  * Администратор выставления счетов
  * Служба поддержка партнеров уровня 1
  * Служба поддержка партнеров уровня 2
  * администратор службы Exchange;
  * администратор службы Lync;
  * администратор учетных записей;
  * создатели каталогов;
  * глобальный или корпоративный администратор;
  * администратор службы SharePoint;
  * администратор соответствия требованиям.
  * администратор приложений;
  * администратор безопасности;
  * администратор привилегированных ролей;
  * администратор службы Microsoft Intune;
  * администратор прокси-сервера приложений;
  * администратор службы CRM;
  * администратор службы Power BI.

* если прошло 30 дней с момента установки пробной подписки; или
* при наличии личного домена (например, contoso.com); или
* Azure AD Connect выполняет синхронизацию удостоверений из вашего локального каталога.

### <a name="exceptions"></a>Исключения

Однофакторная политика требует ввода одного фрагмента данных для аутентификации, такого как адрес электронной почты *или* номер телефона. Однофакторная политика применяется в следующих случаях:

* еще не прошло 30 дней с момента установки пробной подписки; или
* личный домен отсутствует (*. onmicrosoft.com); и
* Azure AD Connect не выполняет синхронизацию удостоверений.

## <a name="userprincipalname-policies-that-apply-to-all-user-accounts"></a>Политики UserPrincipalName, которые применяются ко всем учетным записям пользователей

Все учетные записи пользователей, используемые для входа в Azure AD, должны иметь уникальное значение атрибута имени субъекта-пользователя (UPN), связанное с этой учетной записью. В следующей таблице описываются политики, которые применяются к локальным учетным записям пользователей Active Directory, которые синхронизируются с облаком, и к облачным учетным записям пользователей.

| Свойство | Требования UserPrincipalName |
| --- | --- |
| Допустимые символы |<ul> <li>A–Z</li> <li>a–z</li><li>0–9</li> <li> ' \. - \_ ! \# ^ \~</li></ul> |
| Недопустимые символы |<ul> <li>Любой знак \@\", который не отделяет имя пользователя от домена.</li> <li>Не может содержать знак точки "." непосредственно перед знаком \@\".</li></ul> |
| Ограничения длины |<ul> <li>Общая длина не должна превышать 113 знаков.</li><li>Перед знаком \@\" может быть до 64 знаков.</li><li>После знака \@\" может быть до 48 знаков.</li></ul> |

## <a name="password-policies-that-only-apply-to-cloud-user-accounts"></a>Политики паролей, которые применяются только к облачным учетным записям пользователей.

В следующей таблице приведены доступные параметры политики паролей, которые могут применяться к учетным записям пользователей, создаваемым и управляемым в Azure AD.

| Свойство | Требования |
| --- | --- |
| Допустимые символы |<ul><li>A–Z</li><li>a–z</li><li>0–9</li> <li>@ # $ % ^ & * - _ ! + = [ ] { } &#124; \ : ‘ , . ? / ` ~ " ( ) ;</li></ul> |
| Недопустимые символы |<ul><li>Знаки Юникода.</li><li>Пробелы.</li><li> Используйте только надежные пароли. Не может содержать знак точки "." непосредственно перед символом "\@\"".</li></ul> |
| Ограничения для пароля |<ul><li>От 8 до 16 знаков.</li><li>Используйте только надежные пароли. Необходимо выполнить 3 из 4 следующих условий:<ul><li>строчные буквы;</li><li>прописные буквы;</li><li>числа (0–9);</li><li>символы (см. ограничения для пароля выше).</li></ul></li></ul> |
| Длительность срока действия пароля |<ul><li>Значение по умолчанию: **90** дней.</li><li>Значение можно изменить с помощью командлета `Set-MsolPasswordPolicy` из модуля Azure Active Directory для Windows PowerShell.</li></ul> |
| Уведомление об окончании срока действия пароля |<ul><li>Значение по умолчанию: **14** дней (до истечения срока действия пароля).</li><li>Это значение можно настроить с помощью командлета `Set-MsolPasswordPolicy`.</li></ul> |
| Срок действия пароля |<ul><li>Значение по умолчанию: **false** дней (означает, что включен срок действия пароля).</li><li>Это значение можно настроить для каждой учетной записи пользователя с помощью командлета `Set-MsolUser`.</li></ul> |
| Журнал изменения пароля |Последний пароль *невозможно* использовать повторно, когда пользователь изменяет пароль. |
| Журнал сброса пароля | Последний пароль *можно* использовать повторно, когда пользователь сбрасывает забытый пароль. |
| Блокировка учетной записи |После 10 неудачных попыток входа (с неправильным паролем) пользователь будет заблокирован на одну минуту. Последующие неудачные попытки входа приведут к блокировке пользователя на более длительное время. |

## <a name="set-password-expiration-policies-in-azure-ad"></a>Установка политик срока действия пароля в Azure AD

Глобальный администратор облачной службы Майкрософт может использовать модуль Microsoft Azure AD для Windows PowerShell, чтобы настроить неограниченный срок действия паролей пользователей. Можно также использовать командлеты Windows PowerShell, чтобы удалить бессрочную конфигурацию или просмотреть, какие пароли пользователей имеют неограниченный срок действия. 

Эти указания применимы к другим поставщикам, таким как Intune и Office 365, которые используют Azure AD для служб идентификации и каталогов. Срок действия пароля — это единственное, что может быть изменено в политике.

> [!NOTE]
> Неограниченный срок действия можно настроить только для паролей учетных записей пользователей, которые не синхронизируются в процессе синхронизации каталогов. Дополнительные сведения о синхронизации каталогов см. в статье [Интеграция локальных каталогов с Azure Active Directory](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect).
>

## <a name="set-or-check-the-password-policies-by-using-powershell"></a>Задание или проверка политик пароля с помощью PowerShell

Чтобы начать работу, необходимо [скачать и установить модуль Azure AD PowerShell](https://docs.microsoft.com/powershell/module/Azuread/?view=azureadps-2.0). После его установки вы можете выполнить следующие процедуры по настройке каждого поля.

### <a name="check-the-expiration-policy-for-a-password"></a>Проверка политики срока действия пароля

1. Подключитесь к Windows PowerShell с помощью учетных данных администратора.
1. Выполните следующие команды:

   * Чтобы увидеть, задан ли для отдельного пользователя бессрочный пароль, выполните следующий командлет, используя имя участника-пользователя (например, *aprilr@contoso.onmicrosoft.com*) или идентификатор проверяемого пользователя: `Get-AzureADUser -ObjectId <user ID> | Select-Object @{N="PasswordNeverExpires";E={$_.PasswordPolicies -contains "DisablePasswordExpiration"}}`.
   * Чтобы просмотреть параметр **Пароль не имеет окончания срока действия** для всех пользователей, выполните следующий командлет: `Get-AzureADUser -All $true | Select-Object UserPrincipalName, @{N="PasswordNeverExpires";E={$_.PasswordPolicies -contains "DisablePasswordExpiration"}}`.

### <a name="set-a-password-to-expire"></a>Задание срока действия пароля

1. Подключитесь к Windows PowerShell с помощью учетных данных администратора.
1. Выполните следующие команды:

   * Чтобы установить пароль отдельного пользователя со сроком действия, выполните следующий командлет, используя имя участника-пользователя или идентификатор пользователя: `Set-AzureADUser -ObjectId <user ID> -PasswordPolicies None`.
   * Чтобы задать срок действия паролей всех пользователей в организации, используйте следующий командлет: `Get-AzureADUser -All $true | Set-AzureADUser -PasswordPolicies None`

### <a name="set-a-password-to-never-expire"></a>Установка бессрочного пароля

1. Подключитесь к Windows PowerShell с помощью учетных данных администратора.
1. Выполните следующие команды:

   * Чтобы установить бессрочный пароль отдельного пользователя, выполните следующий командлет, используя имя участника-пользователя или идентификатор пользователя: `Set-AzureADUser -ObjectId <user ID> -PasswordPolicies DisablePasswordExpiration`.
   * Чтобы установить бессрочные пароли для всех пользователей в организации, выполните следующий командлет: `Get-AzureADUser -All $true | Set-AzureADUser -PasswordPolicies DisablePasswordExpiration`

   > [!WARNING]
   > Пароль, для которого задано `-PasswordPolicies DisablePasswordExpiration`, по-прежнему имеет срок использования, определяемый атрибутом `pwdLastSet`. Если задать для пользователей бессрочные пароли, то по прошествии 90 дней их срок действия истечет. В зависимости от атрибута `pwdLastSet`, если задать срок действия, указав `-PasswordPolicies None`, то всем пользователям, у паролей которых значение `pwdLastSet` превышает 90 дней, будет необходимо сменить пароль при следующем входе. Это изменение может повлиять на большое количество пользователей. 

## <a name="next-steps"></a>Дополнительная информация

Дополнительные сведения о сбросе пароля с помощью Azure AD см. в следующих статьях:

* [Как развернуть самостоятельный сброс пароля?](howto-sspr-deployment.md)
* [Сброс или изменение пароля](../user-help/active-directory-passwords-update-your-own-password.md)
* [Регистрация для самостоятельного сброса пароля](../user-help/active-directory-passwords-reset-register.md)
* [Требования к лицензированию самостоятельного сброса пароля в Azure AD](concept-sspr-licensing.md)
* [Какие данные используются для SSPR и какие сведения нужно указывать для пользователей](howto-sspr-authenticationdata.md)
* [Доступные пользователям методы проверки подлинности](concept-sspr-howitworks.md#authentication-methods).
* [Обзор обратной записи паролей](howto-sspr-writeback.md).
* [Как сообщать о действиях в SSPR](howto-sspr-reporting.md)
* [Обзор всех параметров SSPR и их значение](concept-sspr-howitworks.md)
* [Как устранить неполадки самостоятельного сброса пароля](active-directory-passwords-troubleshoot.md)
* [Вопросы, не вошедшие в другие статьи](active-directory-passwords-faq.md)
