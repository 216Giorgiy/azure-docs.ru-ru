<properties
	pageTitle="Контроль доступа на основе ролей Azure Active Directory | Microsoft Azure"
	description="В этой статье описывается контроль доступа на основе ролей Azure."
	services="active-directory"
	documentationCenter=""
	authors="IHenkel"
	manager="stevenpo"
	editor=""/>

<tags
	ms.service="active-directory"
	ms.devlang="na"
	ms.topic="article"
	ms.tgt_pltfrm="na"
	ms.workload="identity"
	ms.date="10/12/2015"
	ms.author="inhenk"/>

# Контроль доступа на основе ролей Azure Active Directory

## Контроль доступа на основе ролей
Контроль доступа на основе ролей (RBAC) Azure обеспечивает точное управление доступом для Azure. С помощью RBAC вы можете распределить обязанности внутри команды разработчиков и предоставить членам этой группы именно ту степень доступа, которая им необходима для выполнения поставленных задач.

### Основы управления доступом в Azure
Каждая подписка Azure связана с Azure Active Directory. Только пользователям, группам и приложениям из этого каталога может быть предоставлен доступ для управления ресурсами в подписке Azure с помощью портала управления Azure, программ командной строки Azure и API-интерфейсов управления Azure.

Доступ предоставляется путем назначения соответствующей роли RBAC пользователям, группам и приложениям в подходящей области. Чтобы предоставить доступ ко всей подписке, назначьте роль в области подписки. Чтобы предоставить доступ к определенной группе ресурсов в подписке, назначьте роль в области этой группы ресурсов. Вы также можете назначать роли на уровне определенных ресурсов, таких как веб-сайты, виртуальные машины и подсети, чтобы предоставить доступ только к отдельному ресурсу.

![](./media/role-based-access-control-configure/overview.png)

Роль RBAC, которую вы назначаете пользователям, группам и приложениям, определяет, какими именно ресурсами пользователь (или приложение) может управлять в этой области.

### Встроенные роли RBAC в Azure
Контроль доступа на основе ролей Azure имеет три основные роли, которые применяются ко всем типам ресурсов: владелец, участник и читатель. Владелец имеет полный доступ ко всем ресурсам, включая право делегировать доступ другим. Участник может создавать все типы ресурсов Azure и управлять ими, но не может предоставить доступ другим. Читатель может только просматривать существующие ресурсы Azure. Остальные роли RBAC в Azure разрешают управление определенными ресурсами Azure. Например, роль участника виртуальной машины разрешает создавать виртуальные машины и управлять ими, но не разрешает управлять виртуальной сетью или подсетью, к которой подключается виртуальная машина.

В разделе [Встроенные роли RBAC](role-based-access-built-in-roles.md) перечислены встроенные роли RBAC, доступные в Azure. Для каждой роли указаны операции, к которым встроенная роль предоставляет доступ.

### Иерархия ресурсов Azure и наследование прав доступа
Каждая подписка в Azure принадлежит только к одному каталогу, каждая группа ресурсов принадлежит только к одной подписке, а каждый ресурс принадлежит только к одной группе ресурсов. Доступ, предоставленный вами в родительской области, наследуется в дочерних областях. Если вы назначаете роль читателя группе Azure AD в области уровня подписки, члены этой группы смогут просматривать все группы ресурсов и все ресурсы в подписке. Если вы назначаете роль участника приложению в области группы ресурсов, оно сможет управлять всеми типами ресурсов в этой группе ресурсов, но не в других группах ресурсов в подписке.

### Сравнение Azure RBAC с классическими администраторами и соадминистраторами подписки
Классические администраторы и соадминистраторы подписки имеют полный доступ к подписке Azure. Они могут управлять ресурсами с помощью как классического портала (https://manage.windowsazure.com) и API диспетчера служб Azure, так и нового портала управления (https://portal.azure.com) и новых API диспетчера ресурсов Azure. В модели RBAC классическим администраторам назначается роль владельца в области подписки.

Более детализированная модель авторизации (Azure RBAC) поддерживается только новым порталом управления (https://portal.azure.com) и API диспетчера ресурсов Azure. Пользователи и приложения, которым назначены роли RBAC (в области подписки, группы ресурсов или отдельного ресурса), не могут использовать классический портал управления (http://manage.windowsazure.com) и API управления службами Azure.

### Предоставление прав на управление и операции с данными
Более детализированная модель авторизации (Azure RBAC) поддерживается только для операций управления ресурсами Azure на портале Azure и в API диспетчера ресурсов Azure. С помощью RBAC можно разрешить доступ не ко всем операциям на уровне данных для ресурсов Azure. Например, с помощью RBAC можно управлять разрешениями на создание, чтение, обновление и удаление учетных записей хранения. Однако на сегодняшний день невозможно применять RBAC для управления разрешениями на создание, чтение, обновление и удаление BLOB-объектов или таблиц в учетной записи хранения. Аналогично с помощью RBAC можно управлять разрешениями на создание, чтение, обновление и удаление базы данных SQL, но не разрешениями на создание, чтение, обновление и удаление таблиц SQL в базе данных.

## Управление доступом с помощью портала управления Azure
### Просмотр доступа
Выберите параметры доступа в разделе "Основное" колонки группы ресурсов. Колонка **Пользователи** содержит список всех пользователей, групп и приложений, которым предоставлен доступ к группе ресурсов. Доступ либо назначается для группы ресурсов, либо наследуется от назначения в родительской подписке.

![](./media/role-based-access-control-configure/view-access.png)

> [AZURE.NOTE]Классические администраторы и соадминистраторы подписки являются действующими владельцами подписки в новой модели RBAC.

### Добавление доступа
1. Щелкните значок **Добавить** в столбце **Пользователи**. ![](./media/role-based-access-control-configure/grant-access1.png)
2. Выберите роль, которую хотите назначить.
3. Найдите и выберите пользователя, группу или приложение, которым хотите предоставить доступ.
4. Найдите каталог для пользователей, групп и приложений с помощью отображаемых имен, адресов электронной почты и идентификаторов объектов.![](./media/role-based-access-control-configure/grant-access2.png)

### Запрет доступа
1. В колонке **Пользователи** выберите назначение роли, которое нужно удалить.
2. Щелкните значок **Удалить** в колонке сведений о назначении.
3. Нажмите кнопку **Да** для подтверждения удаления.

![](./media/role-based-access-control-configure/remove-access1.png)


> [AZURE.NOTE]Унаследованные назначения нельзя удалить из дочерних областей. Для удаления таких назначений перейдите к родительской области.


![](./media/role-based-access-control-configure/remove-access2.png)

## Управление доступом с помощью Azure PowerShell
Доступом можно управлять с помощью команд Azure RBAC в средствах Azure PowerShell.

-	Используйте `Get-AzureRoleDefinition`, чтобы вывести список доступных для назначения ролей RBAC и для просмотра операций, к которым они предоставляют доступ.

-	Используйте `Get-AzureRoleAssignment`, чтобы вывести список назначений доступа RBAC, действующих для указанной подписки, группы ресурсов или отдельного ресурса. Используйте параметр `ExpandPrincipalGroups`, чтобы вывести список назначений доступа для указанного пользователя, а также для групп, членом которых он является. Используйте параметр `IncludeClassicAdministrators`, чтобы вывести список классических администраторов и соадминистраторов подписки.

-	Используйте `New-AzureRoleAssignment` для предоставления доступа для пользователей, групп и приложений.

-	Используйте `Remove-AzureRoleAssignment` для запрета доступа.

В разделе [Управление доступом с помощью Azure PowerShell](role-based-access-control-manage-access-powershell.md) приведены более подробные примеры управления доступом с помощью Azure PowerShell.

## Управление доступом с помощью интерфейса командной строки Azure
Доступом можно управлять с помощью команд Azure RBAC в интерфейсе командной строки Azure.

-	Используйте `azure role list`, чтобы вывести список доступных для назначения ролей RBAC. Используйте azure role show, чтобы просмотреть операции, к которым они предоставляют доступ.

-	Используйте `azure role assignment list`, чтобы вывести список назначений доступа RBAC, действующих для указанной подписки, группы ресурсов или отдельного ресурса. Используйте параметр `expandPrincipalGroups`, чтобы вывести список назначений доступа для указанного пользователя, а также для групп, членом которых он является. Используйте параметр `includeClassicAdministrators`, чтобы вывести список классических администраторов и соадминистраторов подписки.

-	Используйте `azure role assignment create` для предоставления доступа для пользователей, групп и приложений.

-	Используйте `azure role assignment delete` для запрета доступа.

В разделе [Управление доступом с помощью интерфейса командной строки Azure (Azure CLI)](role-based-access-control-manage-access-azure-cli.md) приведены более подробные примеры управления доступом с помощью Azure CLI.

## Использование отчета с журналом изменений доступа
Все изменения доступа, осуществляемые в ваших подписках Azure, регистрируются в журнале событий Azure.

### Создание отчета с помощью Azure PowerShell
Чтобы создать отчет о том, кто предоставил или запретил определенные типы доступа, для кого изменялся доступ и в какой области внутри ваших подписок Azure, используйте следующую команду PowerShell:

    Get-AzureAuthorizationChangeLog

### Создание отчета с помощью Azure CLI
Чтобы создать отчет о том, кто предоставил или запретил определенные типы доступа, для кого изменялся доступ и в какой области внутри ваших подписок Azure, используйте следующую команду интерфейса командной строки Azure:

    azure authorization changelog

> [AZURE.NOTE]Можно запрашивать изменения доступа за последние 90 дней (пакетами по 15 дней).

В следующем примере выводится список всех изменений доступа в подписке за последние 7 дней.

![](./media/role-based-access-control-configure/access-change-history.png)

### Экспорт изменений доступа в электронную таблицу
Для просмотра изменений доступа их удобно экспортировать в электронную таблицу.

![](./media/role-based-access-control-configure/change-history-spreadsheet.png)

<!---HONumber=Oct15_HO3-->