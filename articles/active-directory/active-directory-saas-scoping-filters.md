---
title: "Подготовка приложений с использованием фильтров области | Документация Майкрософт"
description: "Узнайте, как использовать фильтры области, чтобы предотвратить подготовку объектов, которые поддерживают автоматическую подготовку пользователей, но не отвечают требованиям компании."
services: active-directory
documentationcenter: 
author: MarkusVi
manager: femila
ms.assetid: bcfbda74-e4d4-4859-83bc-06b104df3918
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/02/2017
ms.author: markvi
ms.custom: H1Hack27Feb2017
ms.translationtype: HT
ms.sourcegitcommit: 469246d6cb64d6aaf995ef3b7c4070f8d24372b1
ms.openlocfilehash: e40ba3d3035d5c04017a8ed558981b01fae40a13
ms.contentlocale: ru-ru
ms.lasthandoff: 09/27/2017

---
# <a name="attribute-based-application-provisioning-with-scoping-filters"></a>Подготовка приложений на основе атрибутов с использованием фильтров области
В этой статье объясняется, как использовать фильтры области, чтобы задать правила на основе атрибутов, которые определяют, какие пользователи подготовлены для работы с приложением.

## <a name="scoping-filter-use-cases"></a>Варианты использования фильтра области

Фильтр области позволяет указать службе подготовки Azure AD включить или исключить всех пользователей с атрибутом, значение которого совпадает с конкретным значением. Например, при подготовке пользователей из Azure AD для приложения SaaS, используемого группой продаж, можно указать, что только пользователи, атрибут "Отдел" которых имеет значение "Продажи", подлежат подготовке.

Фильтры области можно использовать по-разному, в зависимости от типа соединителя подготовки.

* **Исходящая подготовка из Azure AD для приложений SaaS**. Если Azure AD является исходной системой, то для определения пользователей, входящих в область подготовки, чаще всего используются [назначения пользователей и групп](active-directory-coreapps-assign-user-azure-portal.md). Эти назначения также используется для включения единого входа и обеспечивают единый метод управления доступом и подготовкой. Фильтры области можно использовать наряду с назначениями или же вместо них, чтобы фильтровать пользователей на основе значений атрибутов.

>[!TIP]
> Можно отключить подготовку на основе назначений для корпоративного приложения, воспользовавшись меню **[Область](active-directory-saas-app-provisioning.md#how-do-i-set-up-automatic-provisioning-to-an-application)** на странице параметров подготовки и задав параметр **Синхронизация всех пользователей и групп**. С помощью этого параметра и фильтров области на основе атрибутов можно повысить производительность по сравнению с использованием назначений на основе групп.  

* **Входящая подготовка из приложений HCM в Azure AD и Active Directory**. Если исходной системой является [приложение HCM, например Workday](active-directory-saas-workday-tutorial.md), то фильтры области являются основным средством для определения пользователей, которые должны быть подготовлены из приложения HCM в Active Directory или Azure Active Directory.

По умолчанию для соединителей подготовки Azure AD не настроены какие-либо фильтры области на основе атрибутов. 

## <a name="scoping-filter-construction"></a>Создание фильтра области

Фильтр области состоит из одного или нескольких **предложений**. Предложение определяет, какие пользователи могут проходить через фильтр области, оценивая атрибуты каждого пользователя. Например, у вас может быть одно предложение, требующее, чтобы атрибут пользователя "Область" имел значение "Тверская". Тогда только пользователи из Твери будут подготовлены для работы с приложением. 

Отдельное предложение определяет одно условие для одного значения атрибута. Если в одном фильтре области создается несколько предложений, они вычисляются вместе с применением логического оператора "И". Это означает, что все предложения должны иметь значение true, чтобы пользователь был подготовлен.

Наконец, для одного приложения можно создать несколько фильтров области. При наличии нескольких фильтров области они вычисляются вместе с применением логического оператора "ИЛИ". Это означает, что если все предложения в каком-либо одном из настроенных фильтров области имеют значение true, то пользователь будет предоставлен.

Фильтр области вычисляется отдельно для каждого пользователя или группы, обрабатываемой службой подготовки Azure AD.

Например, рассмотрим фильтр области, представленный ниже.

![Фильтр области действия](./media/active-directory-saas-scoping-filters/scoping-filter.PNG) 

Согласно этому фильтру области подготовке подлежат только пользователи, которые отвечают следующим условиям:

1. они должны находиться в Нью-Йорке;
2. они должны работать в отделе разработки;
3. их идентификатор сотрудника компании должен быть в диапазоне 1 000 000–2 000 000;
4. их должность должна иметь значение NULL или быть пустой.

## <a name="creating-scoping-filters"></a>Создание фильтров области
Фильтры области настраиваются как часть сопоставления атрибутов для каждого соединителя подготовки пользователей Azure AD. В приведенной ниже процедуру предполагается, что вы уже настроили автоматическую подготовку для [одного из поддерживаемых приложений](active-directory-saas-tutorial-list.md) и добавляете для нее фильтр области.

### <a name="to-create-a-scoping-filter"></a>Вот как можно создать фильтр области.
1. На [портале Azure](https://portal.azure.com) перейдите в раздел **Azure Active Directory > Корпоративные приложения > Все приложения**.
2. Выберите приложение, для которого настроена автоматическая подготовка. Пример: ServiceNow.
3. Выберите вкладку **Подготовка**.
4. В разделе **Сопоставления** выберите сопоставление, для которого требуется настроить фильтр области. Пример: "Synchronize Azure Active Directory Users to ServiceNow" (Синхронизировать пользователей Azure Active Directory с ServiceNow).
5. Выберите меню **Область исходного объекта**.
6. Выберите **Добавить фильтр области**.
7. Определите предложение, выбрав исходные параметры **Имя атрибута**, **Оператор** и **Значение атрибута** для сопоставления. Ниже приведены поддерживаемые операторы.
   * **EQUALS**. Предложение возвращает значение true, если вычисленный атрибут точно совпадает со значением входной строки (с учетом регистра).
   * **NOT EQUALS**. Предложение возвращает значение true, если вычисленный атрибут не совпадает со значением входной строки (с учетом регистра).
   * **IS TRUE**. Предложение возвращает значение true, если вычисленный атрибут содержит логическое значение true.
   * **IS FALSE**. Предложение возвращает значение true, если вычисленный атрибут содержит логическое значение false.
   * **IS NULL**. Предложение возвращает значение true, если вычисленный атрибут пустой.
   * **IS NOT NULL**. Предложение возвращает значение true, если вычисленный атрибут не пустой.
   * **REGEX MATCH**. Предложение возвращает значение true, если вычисленный атрибут соответствует шаблону регулярного выражения. Пример: ([1-9][0-9]) соответствует любому числу от 10 до 99.
   * **NOT REGEX MATCH**. Предложение возвращает значение true, если вычисленный атрибут не соответствует шаблону регулярного выражения.
8. Выберите **Добавить новое предложение ограничения области**.
9. При необходимости повторите шаги 7–8, чтобы добавить дополнительные предложения ограничения области.
10. В поле **Название фильтра области** введите имя фильтра области.
11. Нажмите кнопку **ОК**.
12. Еще раз нажмите кнопку **ОК** на странице "Фильтры области" (или повторите шаги 6–11, чтобы добавить еще один фильтр области).
13. Нажмите кнопку **Сохранить** на странице "Сопоставление атрибутов". 

>[!IMPORTANT] 
> Сохранение нового фильтра области активирует полную синхронизацию для приложения. Все пользователи в исходной системе будут повторно оценены с применением нового фильтра области. Если ранее пользователь в приложении находился в области для подготовки, но теперь не попадает в нее, то его учетная запись в приложении будет отключена или отозвана.


## <a name="related-articles"></a>Связанные статьи
* [Указатель статьей по управлению приложениями в Azure Active Directory](active-directory-apps-index.md)
* [Автоматическая подготовка пользователей и ее отзыв для приложений SaaS](active-directory-saas-app-provisioning.md)
* [Настройка сопоставления атрибутов для подготовки пользователей](active-directory-saas-customizing-attribute-mappings.md)
* [Запись выражений для сопоставления атрибутов](active-directory-saas-writing-expressions-for-attribute-mappings.md)
* [Уведомления о подготовке учетных записей](active-directory-saas-account-provisioning-notifications.md)
* [Автоматическая подготовка пользователей и групп из Azure Active Directory в приложениях с использованием SCIM](active-directory-scim-provisioning.md)
* [Список учебников по интеграции приложений SaaS](active-directory-saas-tutorial-list.md)


