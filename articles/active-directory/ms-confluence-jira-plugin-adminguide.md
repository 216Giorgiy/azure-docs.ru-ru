---
title: Руководство по администрированию. Подключаемый модуль единого входа Microsoft Azure Active Directory | Документация Майкрософт
description: Узнайте, как настроить единый вход между Azure Active Directory и приложением единого входа Microsoft Azure Active Directory для JIRA.
services: active-directory
documentationCenter: na
author: jeevansd
manager: femila
ms.reviewer: joflore
ms.assetid: 4b663047-7f88-443b-97bd-54224b232815
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 02/06/2018
ms.author: jeedes
ms.openlocfilehash: af949d1db8af37a534a16364f9f0763479c436e4
ms.sourcegitcommit: 8aab1aab0135fad24987a311b42a1c25a839e9f3
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/16/2018
---
# <a name="microsoft-azure-active-directory-single-sign-on-plugin-admin-guide"></a>Руководство по администрированию. Подключаемый модуль единого входа Microsoft Azure Active Directory

## <a name="table-of-contents"></a>Оглавление

1. **[Обзор](#overview)**
2. **[Принцип работы](#how-it-works)**
3. **[Аудитория](#audience)**
4. **[Предположения](#assumptions)**
5. **[Предварительные требования](#prerequisites)**
6. **[Поддерживаемые версии JIRA и Confluence](#supported-versions-of-jira-and-confluence)**
7. **[Установка](#installation)**
8. **[Настройка подключаемого модуля](#plugin-configuration)**
9. **[Описание полей экрана конфигурации надстройки](#field-explanation-for-add---on-configuration-screen:)**
10. **[Устранение неполадок](#troubleshooting)**

## <a name="overview"></a>Обзор

Эти надстройки позволяют клиентам Microsoft Azure Active Directory (Azure AD) использовать свое имя пользователя и пароль для входа на серверные продукты Atlassian Jira и Confluence. Они реализуют единый вход на основе SAML 2.0.

## <a name="how-it-works"></a>Принцип работы

При входе в приложение Atlassian Jira или Confluence пользователи видят кнопку **Login with Azure AD** (Войти с помощью Azure AD) на странице входа. После нажатия этой кнопки пользователи перенаправляются на страницу входа в организацию Azure AD.

Пройдя аутентификацию, они смогут войти в приложение. Если они уже прошли аутентификацию с идентификатором организации и паролем, вход в приложение выполняется напрямую. Обратите внимание, что вход в систему JIRA и Confluence выполняется одновременно. Если пользователи вошли в приложение JIRA и в окне того же браузера открыто приложение Confluence, достаточно войти в систему один раз и не нужно снова предоставлять учетные данные для другого приложения. Пользователи также могут получить доступ к продукту Atlassian через MyApps с помощью учетной записи Azure, при этом не указывая учетные данные.

> [!NOTE]
> Подготовка пользователей в этой надстройке не выполняется.

## <a name="audience"></a>Аудитория

Администраторы JIRA и Confluence, которые планируют использовать этот подключаемый модуль для включения SSO с использованием Azure AD.

## <a name="assumptions"></a>Предположения

* Экземпляры JIRA и Confluence поддерживают протокол HTTP.
* Пользователи уже созданы в JIRA и Confluence.
* Пользователям назначена роль в JIRA и Confluence.
* Администраторы имеют доступ к информации, необходимой для настройки подключаемого модуля.
* Приложения JIRA и Confluence также доступны вне сети компании.
* Надстройка работает только с локальной версией JIRA и Confluence.

## <a name="prerequisites"></a>предварительным требованиям

Прежде чем приступить к установке надстройки, обратите внимание на следующие предварительные требования.

* Приложения JIRA и Confluence установлены в 64-разрядной версии Windows.
* Версии JIRA и Confluence поддерживают протокол HTTPS.
* Обратите внимание на сведения о поддерживаемой версии подключаемого модуля в разделе "Поддерживаемые версии" ниже.
* Приложения JIRA и Confluence доступны в Интернете.
* Учетные данные администратора для JIRA и Confluence.
* Учетные данные администратора для Azure AD.
* Сеансы WebSudo в JIRA и Confluence должны быть отключены.

## <a name="supported-versions-of-jira-and-confluence"></a>Поддерживаемые версии JIRA и Confluence

Сейчас поддерживаются следующие версии JIRA и Confluence:

* JIRA Core и JIRA Software: 6.0–7.2.0;
* JIRA Service Desk: 3.0–3.2.
* Confluence: версии c 5.0 по 5.10

## <a name="installation"></a>Установка

Чтобы установить подключаемый модуль, администратор должен выполнить следующие шаги.

1. Войдите в свой экземпляр JIRA или Confluence с правами администратора.
    
2. Перейдите в раздел администрирования JIRA или Confluence и щелкните "Надстройки".
    
3. На сайте Atlassian Marketplace выполните поиск по запросу **Microsoft SAML SSO Plugin** (Подключаемый модуль единого входа SAML Microsoft).
 
4. Соответствующая версия надстройки появится в результатах поиска.
 
5. Выберите подключаемый модуль, и дополнительный модуль контроля использования установит его.
 
6. После установки подключаемый модуль появится в разделе "Управление надстройками", подраздел User Installed add-ons (Установленные пользователем).
 
7. Перед началом использования подключаемый модуль необходимо настроить.
 
8. Щелкните модуль, и отобразится кнопка настройки.
 
9. Нажмите ее, чтобы предоставить входные данные конфигурации.
    
## <a name="plugin-configuration"></a>Настройка подключаемого модуля

На следующем изображении показан экран конфигурации надстройки в JIRA и Confluence.
    
![конфигурация надстройки](./media/ms-confluence-jira-plugin-adminguide/jira.png)

### <a name="field-explanation-for-add-on-configuration-screen"></a>Ниже приведено описание полей экрана конфигурации надстройки.

1.   "URL-адрес метаданных". URL-адрес для получения метаданных федерации из Azure AD.
 
2.   "Идентификатор". Используется в Azure AD для проверки источника запроса. Это поле соответствует элементу "Идентификатор" в Azure AD. Оно автоматически заполняется подключаемым модулем в формате: https://<домен:порт>/
 
3.   "URL-адрес ответа". Используйте URL-адрес ответа в поставщике удостоверений (IdP), чтобы инициировать вход SAML. Это поле сопоставляется с элементом "URL-адрес ответа" в Azure AD. Оно автоматически заполняется подключаемым модулем в формате: https://<домен:порт>/plugins/servlet/saml/auth
 
4.   Sign On URL (URL-адрес для входа). Используйте URL-адрес для входа в IdP, чтобы инициировать вход SAML. Он сопоставляется с элементом "Вход" в Azure AD. Оно автоматически заполняется подключаемым модулем в формате: https://<домен:порт>/plugins/servlet/saml/auth
 
5.   IdP Entity ID (Идентификатор сущности IdP). Идентификатор сущности, который использует поставщик удостоверений. Это поле заполняется, если URL-адрес метаданных разрешен.
 
6.   "URL-адрес для входа". URL-адрес входа, предоставленный поставщиком удостоверений. Это поле заполняется из Azure AD, если URL-адрес метаданных разрешен.
 
7.   Log out URL (URL-адрес для выхода). URL-адрес для выхода от поставщика удостоверений. Это поле заполняется из Azure AD, если URL-адрес метаданных разрешен.
 
8.   "Сертификат X.509". Сертификат X.509 от поставщика удостоверений. Это поле заполняется из Azure AD, если URL-адрес метаданных разрешен.
 
9.   Login Button Name (Имя кнопки входа в систему). Назовите кнопку входа в систему, чтобы она отображалась для пользователей организации. Этот текст отображается пользователям при входе в систему на экране входа.
 
10.   SAML User ID Locations (Расположения идентификаторов пользователей в SAML). Расположение идентификатора пользователя в ответе SAML. Он может находиться либо в NameID, либо в имени настраиваемого атрибута. Этим идентификатором должен быть идентификатор пользователя JIRA или Confluence.
 
11.   "Имя атрибута". Имя атрибута, в котором может находиться идентификатор пользователя.
 
12.   Enable Home Realm Discovery (Включить обнаружение домашней области). Установите этот флажок, если компания использует вход на основе ADFS.
 
13.   "Доменное имя". Введите доменное имя, если вы используете вход на основе ADFS.
 
14.   Enable Single Sign out (Включить единый выход). Установите этот флажок, если после выхода пользователя из JIRA или Confluence необходимо выйти и из Azure AD.

### <a name="troubleshooting"></a>Устранение неполадок

* Если вы получаете несколько сообщений об ошибках сертификатов.
    
    * Войдите в Azure AD и удалите несколько сертификатов, доступных для приложения. Оставьте только один сертификат.

* Срок действия сертификата в Azure AD скоро истечет.
    
    * Надстройки выполнят автоматическую замену сертификата. По истечении срока действия старого сертификата новый должен быть помечен как активный, а неиспользуемый сертификат — удален. Если в этом случае пользователь попытается войти в JIRA, надстройка извлечет новый сертификат и сохранит его в подключаемом модуле.

* Отключение WebSudo (отключение безопасного сеанса администратора).
    
    * JIRA. Безопасные сеансы администратора (то есть подтверждение пароля перед доступом к функциям администрирования) включены по умолчанию. Если вы хотите отключить эту функцию в своем экземпляре JIRA, укажите следующую строку в файле jira-config.properties: "ira.websudo.is.disabled = true".
    
    * Confluence. Выполните действия, указанные на следующей странице: https://confluence.atlassian.com/doc/configuring-secure-administrator-sessions-218269595.html.

* Поля, которые должны быть заполнены URL-адресом метаданных, не заполняются.
    
    * Проверьте правильность URL-адреса. Проверьте, сопоставили ли вы правильные идентификатор клиента и приложения.
    
    * Удалите URL-адрес из браузера и посмотрите, получаете ли вы XML метаданных федерации.

* Внутренняя ошибка сервера.
    
    * Просмотрите журналы в каталоге журналов установки. Если вы получаете сообщение об ошибке при попытке входа в систему с помощью единого входа Azure AD, предоставьте доступ к журналам службе поддержки (сведения о ней см. ниже).

* Идентификатор пользователя не найден при попытке входа в систему.
    
    * Это означает, что пользователь не создан в JIRA или Confluence. Его необходимо создать.

* Приложение не найдено в Azure AD.
    
    * Проверьте, правильный ли URL-адрес сопоставлен с приложением в Azure AD.

* Сведения о поддержке. Обратитесь к [команде по интеграции единого входа в Azure AD](<mailto:SaaSApplicationIntegrations@service.microsoft.com>). Мы ответим в течение 24–48 рабочих часов.
    
    * Можно также создать обращение в службу поддержки корпорации Майкрософт через портал Azure.