---
title: "Отчеты об Azure AD SSPR | Документация Майкрософт"
description: "Отчеты о событиях самостоятельного сброса пароля в Azure AD"
services: active-directory
keywords: 
documentationcenter: 
author: MicrosoftGuyJFlo
manager: femila
ms.reviewer: sahenry
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 10/24/2017
ms.author: joflore
ms.custom: it-pro
ms.openlocfilehash: e4524704c6db0d21388ea407870c65d4f69a6323
ms.sourcegitcommit: 732e5df390dea94c363fc99b9d781e64cb75e220
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/14/2017
---
# <a name="reporting-options-for-azure-ad-password-management"></a>Параметры отчетов для управления паролями Azure AD

После развертывания многие организации хотят знать, как использовать SSPR и действительно ли используется эта функция. Azure AD предоставляет функции отчетности, которые помогут получить ответы на вопросы из готовых отчетов и позволяют создавать пользовательские запросы при наличии требуемой лицензии.

![Отчеты][Reporting]

Ответ на указанные ниже вопросы можно найти в отчетах на портале Azure (https://portal.azure.com/).

> [!NOTE]
> Вы должны иметь права [глобального администратора](active-directory-assign-admin-roles-azure-portal.md) и указать, что эти данные необходимо собирать от имени вашей организации, открыв вкладку "Отчеты" или журналы аудита по крайней мере один раз. До этого сбор данных для организации выполняться не будет.

* Сколько пользователей зарегистрировалось для сброса пароля?
* Кто зарегистрировался для сброса пароля?
* Какие данные регистрируют пользователи?
* Сколько пользователей сбросило пароли за последние 7 дней?
* Каковы наиболее распространенные способы, применяемые пользователями или администраторами для сброса своих паролей?
* С какими наиболее распространенными проблемами сталкиваются пользователи или администраторы при попытке использовать сброс пароля?
* Какие администраторы часто сбрасывают свои пароли?
* Наблюдается ли какая-либо подозрительная активность по сбросу паролей?

## <a name="power-bi-content-pack"></a>Пакет содержимого Power BI

Если вы являетесь пользователем Power BI, то можете использовать пакет содержимого для Azure AD, который содержит простые в использовании отчеты для SSPR. Дополнительные сведения об использовании и развертывании этого пакета содержимого см. в статье [Как использовать пакет содержимого Azure Active Directory Power BI](active-directory-reporting-power-bi-content-pack-how-to.md). Вы сможете создавать собственные панели мониторинга и использовать их совместно с другими пользователями в организации.

## <a name="how-to-view-password-management-reports-in-the-azure-portal"></a>Как просмотреть отчеты об управлении паролями на портале Azure

На портале Azure мы реализовали более эффективный способ просмотра действий регистрации сброса пароля и собственно самого сброса пароля.  Чтобы просмотреть эти действия, сделайте следующее:

1. Перейдите по адресу [**portal.azure.com**](https://portal.azure.com).
2. На главном портале Azure в области навигации слева щелкните меню **Больше служб**.
3. В списке служб найдите и выберите **Azure Active Directory**.
4. В меню навигации Azure Active Directory щелкните **Пользователи и группы**.
5. В меню навигации "Пользователи и группы" щелкните элемент **Журналы аудита**. Здесь вы увидите все события аудита, выполняемые в отношении всех пользователей в каталоге. Чтобы просмотреть все связанные с паролем события, это представление можно фильтровать.
6. Чтобы отфильтровать это представление по событиям, связанным со сбросом пароля, нажмите кнопку **Фильтр** в верхней части колонки.
7. В меню **Фильтр** в раскрывающемся списке **Категория** измените тип категории на **Self-service Password Management** (Самостоятельное управление паролями).
8. При необходимости этот список можно отфильтровать по определенному **действию**.

## <a name="how-to-retrieve-password-management-events-from-the-azure-ad-reports-and-events-api"></a>Как получить события об управлении паролями из API отчетов и событий Azure AD

API отчетов и событий Azure AD поддерживают извлечение всех сведений, включаемых в отчеты о сбросе паролей и отчеты о регистрации данных для сброса паролей. Этот API позволяет скачивать отдельные события регистрации для сброса пароля или собственно события сброса пароля, используемые для интеграции с выбранной системой создания отчетов.

### <a name="how-to-get-started-with-the-reporting-api"></a>Как начать работу с API отчетов

Для доступа к этим данным необходимо написать небольшое приложение или скрипт получения этих данных с наших серверов. [Приступая к работе с API отчетов Azure AD](active-directory-reporting-api-getting-started.md).

После создания сценария вы сможете исследовать события сброса пароля и регистрации, которые можно получить в соответствии с вашими сценариями.

* [SsprActivityEvent](https://msdn.microsoft.com/library/azure/mt126081.aspx#BKMK_SsprActivityEvent): получает список столбцов, доступных для события сброса пароля.
* [SsprRegistrationActivityEvent](https://msdn.microsoft.com/library/azure/mt126081.aspx#BKMK_SsprRegistrationActivityEvent): получает список столбцов, доступных для события регистрации для сброса пароля.

### <a name="reporting-api-data-retrieval-limitations"></a>Ограничения на извлечение данных с API отчетов

Сейчас с помощью API отчетов и событий Azure AD вы можете получить до **75 000 отдельных событий** типа [SsprActivityEvent](https://msdn.microsoft.com/library/azure/mt126081.aspx#BKMK_SsprActivityEvent) и [SsprRegistrationActivityEvent](https://msdn.microsoft.com/library/azure/mt126081.aspx#BKMK_SsprRegistrationActivityEvent), выполняемых в течение **последних 30 дней**.

Если требуется получить или сохранить больший объем данных, мы рекомендуем поместить их во внешнюю базу данных и использовать API, чтобы запросить сведения о возникающих изменениях. Мы рекомендуем получить эти данные, когда вы начнете использовать SSPR в организации. Затем их необходимо сохранить во внешней базе данных и продолжить отслеживать изменения с этого момента.

## <a name="description-of-report-columns-in-azure-portal"></a>Описание столбцов отчета на портале Azure

В следующем списке подробно описан каждый из столбцов отчета:

* **Пользователь** — пользователь, который предпринял попытку регистрации сброса пароля.
* **Роль** — роль пользователя в каталоге.
* **Дата и время** — дата и время попытки.
* **Зарегистрированные данные** — какие данные для проверки подлинности предоставил пользователь в ходе регистрации сброса пароля.

## <a name="description-of-report-values-in-azure-portal"></a>Описание значений отчета на портале Azure

В следующей таблице описаны различные значения, разрешенные для каждого столбца:

| столбец | Допустимые значения и их описание |
| --- | --- |
| Зарегистрированные данные |**Альтернативный адрес электронной почты** — пользователь использовал для проверки подлинности запасной адрес электронной почты или адрес, указанный при регистрации<p><p>**Рабочий телефон** — пользователь использовал для проверки подлинности рабочий телефон<p>**Мобильный телефон** — пользователь использовал для проверки подлинности мобильный телефон или телефон, указанный при регистрации<p>**Контрольные вопросы** — пользователь использовал для проверки подлинности контрольные вопросы<p>**Любое сочетание указанного выше (например, запасной адрес электронной почты и мобильный телефон)** — отображается, если настроена двухфакторная политика. Показывает, какие два метода применил пользователь для проверки подлинности своего запроса на сброс пароля. |

## <a name="self-service-password-management-activity-types"></a>Типы действий по самостоятельному управлению паролями

Ниже приведены типы действий, которые отображаются после выбора категории событий аудита **Self-Service Password Management** (Самостоятельное управление паролями),  а также их описание.

* [**Blocked from self-service password reset**](#activity-type-blocked-from-self-service-password-reset) (Блокировка самостоятельного сброса пароля). Указывает, что пользователь пытался сбросить пароль, использовать определенный шлюз или проверить телефонный номер более 5 раз подряд за 24 часа.
* [**Change password (self-service)**](#activity-type-change-password-self-service) (Изменение пароля (самостоятельное)). Указывает, что пользователь добровольно или принудительно (из-за истечения срока действия) изменил пароль.
* [**Reset password (by admin)**](#activity-type-reset-password-by-admin) (Сброс пароля (администратор)). Указывает, что администратор сбросил пароль от имени пользователя на портале Azure.
* [**Reset password (self-service)**](#activity-type-reset-password-self-service) (Сброс пароля (самостоятельный)). Указывает, что пользователь успешно сбросил пароль на [портале сброса паролей Azure AD](https://passwordreset.microsoftonline.com).
* [**Self service password reset flow activity progress**](#activity-type-self-serve-password-reset-flow-activity-progress) (Ход выполнения процесса самостоятельного сброса пароля). Указывает каждый этап, выполняемый пользователем в рамках процесса сброса пароля (например, прохождение определенного шлюза проверки подлинности для сброса паролей).
* [**Unlock user account (self-service)**](#activity-type-unlock-user-account-self-service) (Разблокирование учетной записи пользователя (самостоятельное)). Указывает, что пользователь успешно разблокировал учетную запись Active Directory, не сбрасывая пароль на [портале сброса паролей Azure AD](https://passwordreset.microsoftonline.com) с помощью функции разблокирования учетной записи AD без сброса пароля.
* [**User registered for self-service password reset**](#activity-type-user-registered-for-self-service-password-reset) (Регистрация пользователей для самостоятельного сброса пароля). Указывает, что пользователь зарегистрировал всю информацию, необходимую для сброса пароля в соответствии с указанной политикой сброса пароля клиента.

### <a name="activity-type-blocked-from-self-service-password-reset"></a>Тип действия: Blocked from self-service password reset (Блокировка самостоятельного сброса пароля)

В приведенном ниже списке подробно описано это действие.

* **Описание действия.** Указывает, что пользователь пытался сбросить пароль, использовать определенный шлюз или проверить телефонный номер более 5 раз подряд за 24 часа.
* **Субъект действия.** Пользователь, не имеющий прав на выполнение дополнительных операций сброса. Это может быть пользователь или администратор.
* **Целевой объект действия.** Пользователь, не имеющий прав на выполнение дополнительных операций сброса. Это может быть пользователь или администратор.
* **Разрешенные состояния действия**
  * _Успешно._ Указывает, что пользователь не сможет выполнять дополнительные сбросы, применять любые дополнительные методы проверки подлинности и проверять любые дополнительные телефонные номера в течение следующих 24 часов.
* **Причина сбоя состояния действия** — неприменимо.

### <a name="activity-type-change-password-self-service"></a>Тип действия: Change password (self-service) (Изменение пароля (самостоятельное))

В приведенном ниже списке подробно описано это действие.

* **Описание действия.** Указывает, что пользователь добровольно или принудительно (из-за истечения срока действия) изменил пароль.
* **Субъект действия.** Пользователь, изменивший свой пароль. Это может быть пользователь или администратор.
* **Целевой объект действия.** Пользователь, изменивший свой пароль. Это может быть пользователь или администратор.
* **Разрешенные состояния действия**
  * _Успешно._ Указывает, что пользователь успешно изменил свой пароль.
  * _Сбой._ Указывает, что во время изменения пароля произошел сбой. Чтобы узнать о причине сбоя, щелкните строку и выберите категорию **Activity Status Reason** (Причина состояния действия).
* **Причина сбоя состояния действия** - 
  * _FuzzyPolicyViolationInvalidPassword._ Пользователь выбрал пароль, автоматически заблокированный функцией обнаружения запрещенных паролей Майкрософт (общих или ненадежных паролей).

### <a name="activity-type-reset-password-by-admin"></a>Тип действия: Reset password (by admin) (Сброс пароля (администратор))

В приведенном ниже списке подробно описано это действие.

* **Описание действия.** Указывает, что администратор сбросил пароль от имени пользователя на портале Azure.
* **Субъект действия.** Администратор, сбросивший пароль от имени другого пользователя или администратора. Это должен быть глобальный администратор, администратор паролей, администратор пользователей или администратор службы технической поддержки.
* **Целевой объект действия.** Пользователь, чей пароль сброшен. Это может быть конечный пользователь или другой администратор.
* **Разрешенные состояния действия**
  * _Успешно._ Указывает, что администратор успешно сбросил пароль пользователя.
  * _Сбой._ Указывает, что во время сброса администратором пароля произошел сбой. Чтобы узнать о причине сбоя, щелкните строку и выберите категорию **Activity Status Reason** (Причина состояния действия).

### <a name="activity-type-reset-password-self-service"></a>Тип действия: Reset password (self-service) (Сброс пароля (самостоятельный))

В приведенном ниже списке подробно описано это действие.

* **Описание действия.** Указывает, что пользователь успешно сбросил пароль на [портале сброса паролей Azure AD](https://passwordreset.microsoftonline.com).
* **Субъект действия.** Пользователь, сбросивший свой пароль. Это может быть пользователь или администратор.
* **Целевой объект действия.** Пользователь, сбросивший свой пароль. Это может быть пользователь или администратор.
* **Разрешенные состояния действия**
  * _Успешно._ Указывает, что пользователь успешно сбросил свой пароль.
  * _Сбой._ Указывает, что во время сброса собственного пароля произошел сбой. Чтобы узнать о причине сбоя, щелкните строку и выберите категорию **Activity Status Reason** (Причина состояния действия).
* **Причина сбоя состояния действия** -
  * _FuzzyPolicyViolationInvalidPassword._ Администратор выбрал пароль, автоматически заблокированный функцией обнаружения заблокированных паролей Майкрософт (общих или ненадежных паролей).

### <a name="activity-type-self-serve-password-reset-flow-activity-progress"></a>Тип действия: Self serve password reset flow activity progress (Ход выполнения процесса самостоятельного сброса пароля)

В приведенном ниже списке подробно описано это действие.

* **Описание действия.** Указывает каждый этап, выполняемый пользователем в рамках процесса сброса пароля (например, прохождение определенного шлюза проверки подлинности для сброса паролей).
* **Субъект действия.** Пользователь, сбросивший пароль. Это может быть пользователь или администратор.
* **Целевой объект действия.** Пользователь, сбросивший пароль. Это может быть пользователь или администратор.
* **Разрешенные состояния действия**
  * _Успешно._ Указывает, что пользователь успешно завершил определенный этап сброса пароля.
  * _Сбой._ Указывает, что при выполнении определенного этапа сброса пароля произошел сбой. Чтобы узнать о причине сбоя, щелкните строку и выберите категорию **Activity Status Reason** (Причина состояния действия).
* **Разрешенные причины состояния действия**
  * [Все разрешенные причины состояния действия сброса](#allowed-values-for-details-column) см. в таблице ниже.

### <a name="activity-type-unlock-user-account-self-service"></a>Тип действия: Unlock user account (self-service) (Разблокирование учетной записи пользователя (самостоятельное))

В приведенном ниже списке подробно описано это действие.

* **Описание действия.** Указывает, что пользователь успешно разблокировал учетную запись Active Directory, не сбрасывая пароль на [портале сброса паролей Azure AD](https://passwordreset.microsoftonline.com) с помощью функции разблокирования учетной записи AD без сброса пароля.
* **Субъект действия.** Пользователь, разблокировавший свою учетную запись, не сбрасывая пароль. Это может быть пользователь или администратор.
* **Целевой объект действия.** Пользователь, разблокировавший свою учетную запись, не сбрасывая пароль. Это может быть пользователь или администратор.
* **Разрешенные состояния действия**
  * _Успешно._ Указывает, что пользователь успешно разблокировал свою учетную запись.
  * _Сбой._ Указывает, что во время разблокирования учетной записи произошел сбой. Чтобы узнать о причине сбоя, щелкните строку и выберите категорию **Activity Status Reason** (Причина состояния действия).

### <a name="activity-type-user-registered-for-self-service-password-reset"></a>Тип действия: User registered for self-service password reset (Регистрация пользователей для самостоятельного сброса пароля)

В приведенном ниже списке подробно описано это действие.

* **Описание действия.** Указывает, что пользователь зарегистрировал всю информацию, необходимую для сброса пароля в соответствии с указанной политикой сброса пароля клиента. 
* **Субъект действия.** Пользователь, зарегистрировавшийся для сброса пароля. Это может быть пользователь или администратор.
* **Целевой объект действия.** Пользователь, зарегистрировавшийся для сброса пароля. Это может быть пользователь или администратор.
* **Разрешенные состояния действия**
  * _Успешно._ Указывает, что пользователь успешно зарегистрировался для сброса пароля в соответствии с текущей политикой. 
  * _Сбой._ Указывает, что во время регистрации для сброса пароля произошел сбой. Чтобы узнать о причине сбоя, щелкните строку и выберите категорию **Activity Status Reason** (Причина состояния действия). Примечание. Это не означает, что пользователь не сможет сбросить свой пароль. Это только означает, что он не завершил процесс регистрации. Если в учетной записи содержатся непроверенные, но правильные данные (например, непроверенный телефонный номер), их по-прежнему можно использовать для сброса пароля. Дополнительные сведения см. в разделе [Что происходит, когда пользователь проходит регистрацию?](https://docs.microsoft.com/azure/active-directory/active-directory-passwords-learn-more#what-happens-when-a-user-registers)

## <a name="next-steps"></a>Дальнейшие действия

* [Как развернуть самостоятельный сброс пароля](active-directory-passwords-best-practices.md)
* [Сброс или изменение пароля](active-directory-passwords-update-your-own-password.md)
* [Регистрация для самостоятельного сброса пароля](active-directory-passwords-reset-register.md)
* [Вопросы по лицензированию](active-directory-passwords-licensing.md)
* [Какие данные используются для SSPR и какие сведения нужно указывать для пользователей](active-directory-passwords-data.md)
* [Доступные пользователям методы проверки подлинности](active-directory-passwords-how-it-works.md#authentication-methods)
* [Параметры политики для SSPR](active-directory-passwords-policy.md)
* [Обзор обратной записи паролей](active-directory-passwords-writeback.md).
* [Руководство по самостоятельному сбросу пароля в Azure AD](active-directory-passwords-how-it-works.md).
* [Как устранить неполадки самостоятельного сброса пароля](active-directory-passwords-troubleshoot.md)
* [Вопросы, не вошедшие в другие статьи](active-directory-passwords-faq.md)

[Reporting]: ./media/active-directory-passwords-reporting/sspr-reporting.png "Пример журналов аудита действий SSPR в Azure AD"
