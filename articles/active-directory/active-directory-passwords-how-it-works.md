---
title: "Принципы работы. Azure AD SSPR | Документация Майкрософт"
description: "Руководство по самостоятельному сбросу пароля в Azure AD."
services: active-directory
keywords: 
documentationcenter: 
author: MicrosoftGuyJFlo
manager: femila
ms.reviewer: sahenry
ms.assetid: 618c5908-5bf6-4f0d-bf88-5168dfb28a88
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 10/24/2017
ms.author: joflore
ms.custom: it-pro
ms.openlocfilehash: 71310534ec62b62bcd408d75060859c79bc470cf
ms.sourcegitcommit: dfd49613fce4ce917e844d205c85359ff093bb9c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/31/2017
---
# <a name="self-service-password-reset-in-azure-ad-deep-dive"></a>Руководство по самостоятельному сбросу пароля в Azure AD

Как работает самостоятельный сброс пароля (SSPR)? Что означает этот элемент интерфейса? Прочтите эту статью и расширьте свои знания о самостоятельном сбросе пароля в Azure AD.

## <a name="how-does-the-password-reset-portal-work"></a>Как работает портал для сброса паролей

При переходе пользователя на портал сброса паролей запускается рабочий процесс, определяющий следующее:

   * язык страницы;
   * допустимость учетной записи;
   * организация, к которой принадлежит пользователь;
   * параметры управления паролем пользователя;
   * наличие лицензии на использование функции.


Прочитайте описанные ниже шаги, чтобы узнать о логике страницы сброса пароля.

1. Пользователь открывает ссылку "Не удается получить доступ к своей учетной записи" или переходит непосредственно по адресу [https://aka.ms/sspr](https://passwordreset.microsoftonline.com).
2. Язык интерфейса функции сброса паролей зависит от языка браузера. Эта функция переведена на все языки, поддерживаемые Office 365.
3. Пользователь вводит идентификатор пользователя и проходит тест CAPTCHA.
4. Azure AD проверяет, может ли пользователь использовать эту функцию, с помощью следующих проверок:
   * Проверяет, включена ли данная функция у пользователя и назначена ли ему лицензия Azure AD.
     * Если у пользователя эта функция не включена или ему не назначена лицензия, то для сброса пароля ему предлагается обратиться к администратору.
   * Проверяет наличие у пользователя нужных проверочных данных, определенных в его учетной записи в соответствии с политикой администратора.
     * Если политика требует только один запрос, то проверяется, определены ли у пользователя соответствующие данные по крайней мере для одной из проверок, включенных политикой администратора.
       * Если учетная запись не настроена, то для сброса пароля пользователю предлагается обратиться к администратору.
     * Если политика требует два запроса, выполняется проверка наличия у пользователя соответствующих данных, определенных по крайней мере для двух проверок, включенных политикой администратора.
       * Если учетная запись не настроена, то для сброса пароля пользователю предлагается обратиться к администратору.
   * Проверяет, управляется ли пароль пользователя локально (является ли он федеративным или для него включена синхронизация хэшей паролей).
     * Если развернута обратная запись, а управление паролем пользователя осуществляется локально, то пользователю разрешается продолжить проверку подлинности и сбросить свой пароль.
     * Если обратная запись не развернута, а управление паролем пользователя осуществляется локально, то пользователю предлагается обратиться к администратору для сброса своего пароля.
5. Если выяснилось, что пользователь может сбросить свой пароль, ему выдаются указания по ходу процесса сброса.

## <a name="authentication-methods"></a>Методы проверки подлинности

Если функция самостоятельного сброса пароля включена, необходимо выбрать один из приведенных ниже методов проверки подлинности. Иногда эти методы называют шлюзами. Мы настоятельно советуем выбрать по крайней мере два метода проверки подлинности.

* Email
* Мобильный телефон
* Рабочий телефон
* Секретные вопросы

![Аутентификация][Authentication]

### <a name="what-fields-are-used-in-the-directory-for-authentication-data"></a>Поля, используемые в каталоге для данных проверки подлинности

* В поле "Рабочий телефон" необходимо ввести рабочий телефон.
    * Пользователь не может самостоятельно задать значение этого поля. Это должен сделать администратор.
* В поле "Мобильный телефон" необходимо ввести телефон для проверки подлинности (невидимый для пользователей) или мобильный телефон (видимый для пользователей).
    * Служба сначала ищет телефон для проверки подлинности, а если он отсутствует — мобильный телефон.
* В поле "Запасной адрес электронной почты" необходимо ввести адрес электронной почты для проверки подлинности (невидимый для пользователей) или альтернативный электронный адрес.
    * Служба сначала ищет адрес электронной почты для проверки подлинности, а если он отсутствует — альтернативный электронный адрес.

По умолчанию с облачным каталогом синхронизируются только облачные атрибуты "Рабочий телефон" и "Мобильный телефон" из локального каталога данных проверки подлинности.

Пользователи смогут сбросить пароль, только если у них есть необходимые данные для методов проверки подлинности, которые включил администратор.

Если пользователь не хочет, чтобы его номер мобильного телефона отображался в каталоге, но по-прежнему хочет использовать этот метод проверки подлинности, администратор не должен заполнять соответствующее поле в каталоге. Затем пользователь сможет заполнить атрибут **Телефон для проверки подлинности** на [портале регистрации сброса паролей](http://aka.ms/ssprsetup). Администраторы смогут просматривать эту информацию в профиле пользователя, но она не будет публиковаться в другом месте.

### <a name="number-of-authentication-methods-required"></a>Необходимое количество методов проверки подлинности

Этот параметр определяет минимальное количество методов (шлюзов) проверки подлинности, необходимых пользователю, чтобы сбросить или разблокировать пароль. Для этого параметра можно задать значение 1 или 2.

Кроме того, пользователь может указать дополнительные методы проверки подлинности, если они включены администратором.

Если количество методов проверки подлинности не соответствует минимально установленному значению, отобразится страница ошибки со ссылкой, по которой можно отправить запрос администратору на сброс пароля.

### <a name="how-secure-are-my-security-questions"></a>Уровень безопасности контрольных вопросов

При использовании контрольных вопросов мы советуем усилить безопасность дополнительным методом проверки подлинности, так как в этом случае есть опасение, что другие пользователи могут знать ответы на предложенные вопросы.

> [!NOTE] 
> Контрольные вопросы надежно хранятся в объекте пользователя в каталоге. Ответы на них пользователь может задать только в процессе регистрации. Администратор не может прочитать или изменить вопросы или ответы пользователя.
>

### <a name="security-question-localization"></a>Локализация контрольных вопросов

Все стандартные вопросы переведены на языки, поддерживаемые Office 365. Язык вопросов зависит от языка браузера пользователя.

* В каком городе вы познакомились с первой супругой или первым супругом?
* В каком городе познакомились ваши родители?
* В каком городе живет ваш ближайший родственник?
* В каком городе родился ваш отец?
* В каком городе была ваша первая работа?
* В каком городе родилась ваша мать?
* В каком городе вы провели Новый год в 2000 году?
* Какая фамилия у вашего любимого учителя в старшей школе?
* Как называлось учебное заведение, в которое вы поступили, но не стали учиться?
* В каком месте была ваша первая свадебная церемония?
* Какое отчество у вашего отца?
* Какое ваше любимое блюдо?
* Какие имя и фамилия у вашей бабушки по материнской линии?
* Какое отчество у вашей матери?
* Какой месяц и год рождения вашего старшего брата или сестры? (Например, ноябрь 1985 г.)
* Какое отчество у вашего самого старого родственника?
* Какие имя и фамилия у вашего дедушки по отцовской линии?
* Какое отчество у вашего самого младшего родственника?
* Какую школу вы посещали в шестом классе?
* Какие имя и фамилия у вашего лучшего друга детства?
* Какие имя и фамилия у вашей первой любви?
* Какая фамилия у вашего любимого учителя в начальной школе?
* Какая марка и модель вашей первой машины или мотоцикла?
* Как называлась первая школа, в которую вы ходили?
* Как называлось медицинское учреждение, в котором вы родились?
* Как называлась первая улица, где вы жили в детстве?
* Как звали героя вашего детства?
* Как звали вашу любимую плюшевую игрушку?
* Как звали вашего первого питомца?
* Какое прозвище было у вас в детстве?
* Какой вид спорта вы любили в старших классах?
* Какова ваша первая работа?
* Какие последние 4 цифры вашего номера телефона в детстве?
* Кем вы хотели стать в детстве?
* Какую самую известную личность вы встречали?

### <a name="custom-security-questions"></a>Пользовательские контрольные вопросы

Пользовательские контрольные вопросы не переведены на другие языки. Все пользовательские вопросы отображаются на том языке, на котором вы ввели их в интерфейсе пользователя с правами администратора, даже если язык браузера отличается. Если требуются переведенные вопросы, используйте стандартные вопросы.

Максимальная длина пользовательского контрольного вопроса составляет 200 символов.

### <a name="security-question-requirements"></a>Требования к контрольному вопросу

* Минимальное количество знаков в ответе — 3.
* Максимальное количество знаков в ответе — 40.
* Пользователи не могут отвечать на один и тот же вопрос несколько раз.
* Пользователи не могут давать один и тот же ответ на несколько вопросов.
* Для определения вопросов и ответов можно использовать любой набор символов, в том числе символы Юникода.
* Количество определенных вопросов должно быть не меньше числа вопросов, необходимых для регистрации.

## <a name="registration"></a>Регистрация

### <a name="require-users-to-register-when-signing-in"></a>"Требовать регистрацию пользователей при входе"

Если включить этот параметр, пользователь с возможностью сброса пароля должен завершить регистрацию, если он входит в приложения, использующие Azure AD для входа. К таким приложениям относятся:

* Office 365
* Портал Azure
* Панель доступа
* федеративные приложения;
* пользовательские приложения, использующие Azure AD.

Если эта функция отключена, пользователи по-прежнему могут зарегистрировать свои контактные данные вручную, посетив страницу [http://aka.ms/ssprsetup](http://aka.ms/ssprsetup) или щелкнув ссылку **Регистрация для сброса пароля** на вкладке "Профиль" панели доступа.

> [!NOTE]
> Пользователи могут закрыть портал регистрации сброса паролей, нажав кнопку "Отмена" или закрыв окно, но при каждом входе будет появляться запрос вплоть до завершения регистрации.
>

### <a name="number-of-days-before-users-are-asked-to-reconfirm-their-authentication-information"></a>"Количество дней, по истечении которых пользователям будет предложено повторно подтвердить данные проверки подлинности"

Этот параметр определяет период времени между указанием и повторным подтверждением данных проверки подлинности. Он доступен, только если включен параметр **Требовать регистрацию пользователей при входе**.

Допустимые значения: 0–730 дней. Значение 0 означает, что запрос на повторное подтверждение данных проверки подлинности не появляется.

## <a name="notifications"></a>Уведомления

### <a name="notify-users-on-password-resets"></a>"Уведомлять пользователей о сбросе пароля"

Если для этого параметра задать значение "Да", пользователь, сбрасывающий пароль, получит письмо, в котором указано, что его пароль изменили на портале SSPR. Это письмо приходит на основной и запасной адрес электронной почты, указанный в Azure AD. Больше это уведомление никому не отправляется.

### <a name="notify-all-admins-when-other-admins-reset-their-passwords"></a>"Уведомлять всех администраторов, если другие администраторы сбрасывают свои пароли"

Если для этого параметра задать значение "Да", на основной и запасной адрес электронной почты, указанный в Azure AD, **всех администраторов** будет отправлено письмо, указывающее, что другой администратор изменил их пароль на портале SSPR.

Пример. В среде есть 4 администратора. Администратор А сбрасывает их пароли с помощью SSPR. Администраторы Б, В и Г получат письмо с уведомлением об этом событии.

## <a name="on-premises-integration"></a>Интеграция с локальной средой

Установив, настроив и включив Azure AD Connect, вы получите приведенные ниже дополнительные параметры интеграции с локальной средой.

### <a name="write-back-passwords-to-your-on-premises-directory"></a>"Включить обратную запись паролей в локальный каталог"

Определяет, включена ли обратная запись паролей для каталога и, если включена, указывает состояние локальной службы обратной записи. Этот параметр удобен, если требуется временно отключить компонент обратной записи паролей без повторной настройки Azure AD Connect.

* Если задано значение "Да", обратная запись включена и федеративные пользователи и пользователи с синхронизацией хэшей паролей могут сбрасывать свои пароли.
* Если задано значение "Нет", обратная запись выключена и федеративные пользователи и пользователи с синхронизацией хэшей паролей не могут сбрасывать свои пароли.

### <a name="allow-users-to-unlock-accounts-without-resetting-their-password"></a>Разрешить пользователям разблокировать учетные записи без сброса пароля

Указывает, следует ли предоставить пользователям, посещающим портал сброса паролей, возможность разблокировать свои локальные учетные записи Active Directory без сброса пароля. По умолчанию Azure AD снимает блокировку учетных записей при сбросе пароля. Этот параметр позволяет разделить две эти операции. 

* Если выбрано значение "Да", пользователи могут сбросить пароль и разблокировать учетную запись или разблокировать учетную запись без сброса пароля.
* Если значение — "Нет", пользователи могут разблокировать учетную запись только после сброса пароля.

## <a name="how-does-password-reset-work-for-b2b-users"></a>Как работает сброс пароля для пользователей B2B
Сброс и изменение пароля полностью поддерживается во всех конфигурациях B2B. Ниже приведены три варианта, поддерживаемых системой сброса пароля для пользователей B2B.

1. **Пользователи из партнерской организации с клиентом Azure AD.** Если организация, с которой вы вступили в партнерские отношения, имеет клиент Azure AD, мы **учитываем политики сброса пароля, включенные в этом клиенте**. Для работы сброса пароля партнерская организация должна включить Azure AD SSPR. Дополнительная плата для клиентов Office 365 не требуется. Указания по включению см. в статье [Приступая к работе с компонентами управления паролями](https://azure.microsoft.com/documentation/articles/active-directory-passwords-getting-started/#enable-users-to-reset-or-change-their-aad-passwords).
2. **Пользователи, зарегистрировавшиеся с помощью функции [самостоятельной регистрации](active-directory-self-service-signup.md)**. Если организация, с которой вы вступили в партнерские отношения, использует функцию [самостоятельной регистрации](active-directory-self-service-signup.md) для входа в клиент, мы позволим ее пользователям сбросить пароль, указав зарегистрированный адрес электронной почты.
3. **Пользователи B2B.** Все новые пользователи B2B, созданные с помощью [возможностей Azure AD B2B](active-directory-b2b-what-is-azure-ad-b2b.md), также смогут сбросить пароль, указав адрес электронной почты, зарегистрированный в процессе приглашения.

Чтобы протестировать этот сценарий, перейдите на сайт http://passwordreset.microsoftonline.com. Если они определили дополнительный адрес электронной почты или адрес электронной почты для проверки подлинности, сброс паролей будет работать должным образом.

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения о сбросе пароля с помощью Azure AD см. в следующих источниках:

* [Как развернуть самостоятельный сброс пароля](active-directory-passwords-best-practices.md)
* [Сброс или изменение пароля](active-directory-passwords-update-your-own-password.md)
* [Регистрация для самостоятельного сброса пароля](active-directory-passwords-reset-register.md)
* [Вопросы по лицензированию](active-directory-passwords-licensing.md)
* [Какие данные используются для SSPR и какие сведения нужно указывать для пользователей](active-directory-passwords-data.md)
* [Доступные пользователям методы проверки подлинности](active-directory-passwords-how-it-works.md#authentication-methods)
* [Параметры политики для SSPR](active-directory-passwords-policy.md)
* [Что такое обратная запись паролей и каково ее назначение](active-directory-passwords-writeback.md)
* [Как сообщать о действиях в SSPR](active-directory-passwords-reporting.md)
* [Обзор всех параметров SSPR и их значение](active-directory-passwords-how-it-works.md)
* [Как устранить неполадки самостоятельного сброса пароля](active-directory-passwords-troubleshoot.md)
* [Вопросы, не вошедшие в другие статьи](active-directory-passwords-faq.md)

[Authentication]: ./media/active-directory-passwords-how-it-works/sspr-authentication-methods.png "Доступные методы проверки подлинности Azure AD и требуемое число методов"