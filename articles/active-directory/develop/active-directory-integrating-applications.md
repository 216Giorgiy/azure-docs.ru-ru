---
title: "Интеграция приложений с Azure Active Directory | Документация Майкрософт"
description: "Сведения о том, как добавить, обновить или удалить приложение в Active Directory (Azure AD)."
services: active-directory
documentationcenter: 
author: lnalepa
manager: mbaldwin
editor: mbaldwin
ms.assetid: ae637be5-0b71-4b1e-b1fe-b83df3eb4845
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 07/20/2017
ms.author: lenalepa
ms.custom: aaddev
ms.reviewer: luleon
ms.translationtype: HT
ms.sourcegitcommit: 83f19cfdff37ce4bb03eae4d8d69ba3cbcdc42f3
ms.openlocfilehash: 3be341bcb897a1481f145825429a1a94dfaae3b0
ms.contentlocale: ru-ru
ms.lasthandoff: 08/21/2017

---
# <a name="integrating-applications-with-azure-active-directory"></a>Интеграция приложений с Azure Active Directory
[!INCLUDE [active-directory-devguide](../../../includes/active-directory-devguide.md)]

Разработчики корпоративных решений и поставщики программного обеспечения как услуги (SaaS) могут разрабатывать коммерческие облачные службы или бизнес-приложения, которые можно интегрировать с Azure Active Directory (Azure AD) для обеспечения безопасного входа и авторизации для служб. Чтобы интегрировать приложение или службу с Azure AD, разработчику сначала необходимо зарегистрировать сведения о своем приложении в Azure AD с помощью классического портала управления Azure.

В этой статье показано, как добавить, обновить или удалить приложение в Azure AD. Вы узнаете о различных типах приложений, которые можно интегрировать с Azure AD, способах настройки приложений для доступа к другим ресурсам, таким как веб-API, и многое другое.

Дополнительные сведения об объектах, которые представляют зарегистрированное приложение, и отношениях между ними см. в статье [Объекты приложения и субъекта-службы в Azure Active Directory](active-directory-application-objects.md). Рекомендации по фирменной символике, которых следует придерживаться при разработке приложений с помощью Azure Active Directory, см. в статье [Рекомендации по фирменной символике для приложений](active-directory-branding-guidelines.md).

## <a name="adding-an-application"></a>Добавление приложения
Все приложения, которые будут использовать возможности Azure AD, сначала следует зарегистрировать в клиенте Azure AD. Этот процесс регистрации включает в себя предоставление Azure AD сведений о приложении, например URL-адреса, по которому оно расположено, URL-адреса для отправки ответов после проверки подлинности пользователя, URI, идентифицирующего приложение, и т. д.

При создании веб-приложения, в котором требуется только поддержка входа для пользователей в Azure AD, можно просто следовать приведенным ниже инструкциям. Если вашему приложению для доступа к веб-API требуются учетные данные или оно должно поддерживать доступ пользователей из других клиентов Azure AD, см. раздел [Обновление приложения](#updating-an-application), чтобы продолжить настройку приложения.

### <a name="to-register-a-new-application-in-the-azure-portal"></a>Регистрация нового приложения на портале Azure
1. Войдите на [портал Azure](https://portal.azure.com).
2. Выберите клиент Azure AD, щелкнув имя своей учетной записи в правом верхнем углу страницы.
3. На панели навигации слева выберите **Другие службы**, щелкните **Регистрация приложений**, а затем нажмите кнопку **Добавить**.
4. Следуйте инструкциям на экране, а затем создайте новое приложение. Конкретные примеры для веб-приложений или собственных приложений см. в наших [примерах использования](active-directory-developers-guide.md).
  * Для веб-приложений укажите **URL-адрес входа**, который является базовым URL-адресом вашего приложения и через который пользователи могут входить в приложение, например `http://localhost:12345`.
<!--TODO: add once App ID URI is configurable: The **App ID URI** is a unique identifier for your application. The convention is to use `https://<tenant-domain>/<app-name>`, e.g. `https://contoso.onmicrosoft.com/my-first-aad-app`-->
  * Для собственных приложений укажите **URI перенаправления**, который Azure AD будет использовать для возврата ответов маркеров. Укажите значение, специфичное для вашего приложения, например `http://MyFirstAADApp`
5. После завершения регистрации Azure AD присвоит приложению уникальный идентификатор клиента (идентификатор приложения). Приложение добавляется в систему, и выполняется переход на страницу быстрого запуска для вашего приложения. В зависимости от того, является ли ваше приложение веб-приложением или собственным приложением, вы увидите различные параметры для добавления дополнительных возможностей в приложение. После добавления приложения можно начать его обновление, чтобы пользователи могли выполнить вход, получить доступ к веб-API в других приложениях или настроить мультитенантное приложение (что позволяет другим организациям осуществлять доступ к вашему приложению).

> [!NOTE]
> По умолчанию регистрация вновь созданного приложения позволяет пользователям из вашего каталога выполнять вход в это приложение.
> 
> 

## <a name="updating-an-application"></a>Обновление приложения
После регистрации приложения в Azure AD может потребоваться обновить его для предоставления доступа к веб-API, обеспечения доступа из других организаций и в других целях. В этом разделе описываются различные способы дальнейшей настройки приложения. Мы начнем с обзора платформы согласия. Ее важно понять, если вы создаете приложения ресурсов или API, которые будут использоваться клиентскими приложениями, создаваемыми разработчиками в вашей или другой организации.

Дополнительные сведения о принципах работы проверки подлинности в Azure AD см. в статье [Сценарии аутентификации в Azure Active Directory](active-directory-authentication-scenarios.md).

### <a name="overview-of-the-consent-framework"></a>Обзор платформы согласия
Платформа согласия Azure AD упрощает разработку веб-приложений или собственных клиентских приложений с несколькими клиентами, которым требуется доступ к веб-API, защищенным клиентом Azure AD, отличающимся от клиента, в котором зарегистрировано клиентское приложение. Помимо собственных веб-API, эти веб-API содержат API Microsoft Graph (для доступа к Azure Active Directory, Intune и службам Office 365) и другие API-интерфейсы служб Майкрософт. Эта платформа использует согласие пользователя или администратора на регистрацию приложения в своем каталоге, что может включать в себя доступ к данным каталога.

Например, если приложению веб-клиента необходимо прочитать сведения календаря о пользователе Office 365, этот пользователь должен дать согласие на приложение. После предоставления такого разрешения клиентское приложение сможет вызывать API Microsoft Graph от имени этого пользователя и пользоваться сведениями календаря по мере необходимости. [API Microsoft Graph](https://graph.microsoft.io) предоставляет доступ к данным в Office 365 (календарям и сообщениям Exchange, сайтам и спискам SharePoint, документам в OneDrive, записным книжкам в OneNote, задачам планировщика, книгам Excel и т. д.), а также к пользователям и группам Azure AD и другим объектам данных других облачных служб Майкрософт. 

Платформа согласия основана на OAuth 2.0 и различных его процедурах, таких как предоставление кода авторизации и учетных данных пользователя, с помощью общедоступных или конфиденциальных клиентов. Благодаря OAuth 2.0 среда Azure AD позволяет создавать множество различных клиентских приложений, например на телефоне, планшете, сервере или в Интернете, и получить доступ к необходимым ресурсам.

Дополнительные сведения о платформе согласия см. в статьях [Авторизация доступа к веб-приложениям с помощью OAuth 2.0 и Azure Active Directory](https://msdn.microsoft.com/library/azure/dn645545.aspx), [Сценарии аутентификации в Azure Active Directory](active-directory-authentication-scenarios.md), а сведения о получении авторизованного доступа к Office 365 с помощью Microsoft Graph см. в статье [Получение маркеров доступа для вызова Microsoft Graph](https://graph.microsoft.io/docs/authorization/auth_overview).

#### <a name="example-of-the-consent-experience"></a>Пример процедуры согласия
Ниже показаны особенности работы процедуры согласия для разработчика приложений и пользователя.

1. Задайте необходимые приложению разрешения на странице настройки приложения веб-клиента на портале Azure, используя меню в разделе "Необходимые разрешения".
   
    ![Разрешения для других приложений](./media/active-directory-integrating-applications/requiredpermissions.png)
2. Представим себе, что разрешения вашего приложения были обновлены, само приложение запущено, а пользователь собирается воспользоваться им в первый раз. Если приложение еще не получило токен доступа или обновления, ему следует перейти к конечной точке авторизации Azure AD для получения кода авторизации, который можно использовать для получения нового токена доступа и обновления.
3. Если пользователь еще не прошел проверку подлинности, ему предлагается выполнить вход в Azure AD.
   
    ![Вход пользователя или администратора в Azure AD](./media/active-directory-integrating-applications/usersignin.png)
4. После входа Azure AD определяет, требуется ли отобразить этому пользователю страницу согласия. Принятие этого решения основано на том, дал ли этот пользователь (или администратор его организации) свое согласие для приложения. Если согласие еще не было дано, Azure AD запрашивает у пользователя согласие и отображает необходимые для этого разрешения. В диалоговом окне согласия отображается тот же набор разрешений, который вы выбрали в элементе управления "Необходимые разрешения" на портале Azure.
   
    ![Процедура использования согласия пользователей](./media/active-directory-integrating-applications/consent.png)
5. После того как пользователь дает свое согласие, в ваше приложение возвращается код авторизации, который можно использовать для получения токена доступа и токена обновления. Дополнительные сведения об этой процедуре см. в разделе [Из веб-приложения к веб-интерфейсу API](active-directory-authentication-scenarios.md#web-application-to-web-api) статьи [Сценарии аутентификации в Azure Active Directory](active-directory-authentication-scenarios.md).

6. Обладая правами администратора, вы можете также согласиться использовать делегированные разрешения приложения от имени всех пользователей в клиенте. В этом случае диалоговое окно согласия не будет отображаться отдельно для каждого пользователя в клиенте. Это можно сделать на странице приложения на [портале Azure](https://portal.azure.com). В колонке **Параметры** приложения щелкните **Необходимые разрешения** и **Предоставить разрешения**. 

    ![Предоставление разрешений, на которые требуется явное согласие администратора](./media/active-directory-integrating-applications/grantpermissions.png)
    
> [!NOTE]
> Сейчас явное согласие требуется предоставлять, нажимая кнопку **Предоставить разрешения**, для одностраничных приложений (SPA), использующих ADAL.js. Это связано с тем, что запрос маркера доступа выполняется без запроса на согласие, что приводит к ошибке, если согласие не было предоставлено ранее.   

### <a name="configuring-a-client-application-to-access-web-apis"></a>Настройка клиентского приложения для доступа к веб-API
Чтобы клиентское веб-приложение или конфиденциальное клиентское приложение могло участвовать в потоке предоставления кода авторизации, требующего проверки подлинности (и получения маркера доступа), в нем нужно задать защищенные учетные данные. По умолчанию на портале Azure используется метод проверки подлинности "идентификатор клиента + симметричный ключ". В этом разделе рассматриваются шаги настройки, необходимые для предоставления секретного ключа учетных данных клиента.

Кроме того, чтобы клиент смог получить доступ к веб-API, предоставляемому приложением ресурсов (например, API Microsoft Graph), платформа согласия должна позволить ему получить требуемое разрешение в зависимости от запрошенных разрешений. По умолчанию все приложения могут выбирать разрешения из Azure Active Directory (API Graph) и API управления службами Azure, при этом разрешение Enable sign on and read user’s profile (Включить вход и чтение профиля пользователя) Azure AD уже выбрано по умолчанию. Если клиентское приложение регистрируется в клиенте Azure AD Office 365, веб-API и разрешения для SharePoint и Exchange Online также будут доступны для выбора. В раскрывающихся меню рядом с нужным веб-API можно выбрать один из [двух типов разрешений](active-directory-dev-glossary.md#permissions).

* Разрешения приложения: вашему клиентскому приложению требуется доступ к веб-API от своего имени (без контекста пользователя). Этот тип разрешения требует согласия администратора и недоступен для собственных клиентских приложений.
* Делегированное разрешение: вашему приложению требуется доступ к веб-API от лица выполнившего вход пользователя, но с ограничением доступа по выбранному разрешению. Этот тип разрешения может быть предоставлен пользователем, если только для разрешения не настроено обязательное согласие администратора. 

> [!NOTE]
> Когда вы добавляете в приложение делегированные разрешения, согласие не предоставляется автоматически для всех пользователей в клиенте, как это происходило ранее на классическом портале Azure. Теперь пользователи должны вручную предоставлять согласие на дополнительные делегированные полномочия в процессе их использования, если администратор не нажмет кнопку **Предоставить полномочия** в разделе **Необходимые разрешения** на странице приложения на портале Azure. 

#### <a name="to-add-credentials-or-permissions-to-access-web-apis"></a>Добавление учетных данных или разрешений для доступа к веб-API
1. Войдите на [портал Azure](https://portal.azure.com).
2. Выберите клиент Azure AD, щелкнув имя своей учетной записи в правом верхнем углу страницы.
3. В меню сверху выберите **Azure Active Directory**, затем щелкните **Регистрации приложения** и выберите приложение, которое требуется настроить. Откроется страница быстрого запуска и колонка с параметрами этого приложения.
4. Чтобы добавить секретный ключ для учетных данных веб-приложения, щелкните раздел "Ключи" в колонке "Параметры".  
   
   * Добавьте описание ключа и выберите срок его действия (1 или 2 года). 
   * Когда вы сохраните изменения конфигурации, значение ключа отобразится в крайнем правом столбце. Нажав кнопку "Сохранить", вернитесь к этому разделу и скопируйте это значение, чтобы вы могли использовать его в клиентском приложении для проверки подлинности во время выполнения.
5. Чтобы добавить разрешения на доступ к API-интерфейсам ресурсов из клиента, щелкните раздел "Необходимые разрешения" в колонке "Параметры". 
   
   * Сначала нажмите кнопку "Добавить".
   * Щелкните "Выбрать API", чтобы выбрать требуемый тип ресурсов.
   * Просмотрите список доступных API-интерфейсов или используйте поле поиска, чтобы выбрать доступные ресурсы приложений в каталоге, предоставляющие веб-интерфейс API. Щелкните нужный ресурс, а затем — **Выбрать**.
   * Выбрав ресурс, вы перейдете в меню **Выбор разрешений**, где сможете выбрать параметры "Разрешения приложения" и "Делегированные разрешения" для вашего приложения.
   
6. Завершив, нажмите кнопку **Готово**.

> [!NOTE]
> При нажатии кнопки **Готово** для приложения также автоматически задаются разрешения в каталоге на основе разрешений, которые вы задали для других приложений.  Присвоенные разрешения можно просмотреть на вкладке **Параметры** приложения.
> 
> 

### <a name="configuring-a-resource-application-to-expose-web-apis"></a>Настройка приложения ресурсов для предоставления веб-API
Вы можете разработать веб-API и сделать его доступным для клиентских приложений, предоставив [области доступа](active-directory-dev-glossary.md#scopes) и [роли](active-directory-dev-glossary.md#roles). Доступ к правильно настроенному веб-API предоставляется по аналогии с другими веб-API корпорации Майкрософт, включая API Graph и API Office 365. Области доступа и роли задаются с помощью [манифеста приложения](active-directory-dev-glossary.md#application-manifest), JSON-файла, который представляет собой конфигурацию удостоверения приложения.  

Ниже показано, как задать области доступа, изменив манифест приложения ресурсов.

#### <a name="adding-access-scopes-to-your-resource-application"></a>Добавление областей доступа в приложение ресурсов
1. Войдите на [портал Azure](https://portal.azure.com).
2. Выберите клиент Azure AD, щелкнув имя своей учетной записи в правом верхнем углу страницы.
3. В меню сверху выберите **Azure Active Directory**, затем щелкните **Регистрации приложения** и выберите приложение, которое требуется настроить. Откроется страница быстрого запуска и колонка с параметрами этого приложения.
4. Щелкните **Манифест** на странице приложения, чтобы открыть встроенный редактор манифеста. 
5. Замените узел oauth2Permissions следующим фрагментом JSON. В этом фрагменте приведен пример предоставления области доступа, которая называется "олицетворением пользователя", позволяющей владельцу ресурса предоставлять клиентскому приложению тип делегированного доступа к ресурсу. Не забудьте изменить текст и значения для своего приложения:
   
        "oauth2Permissions": [
        {
            "adminConsentDescription": "Allow the application full access to the Todo List service on behalf of the signed-in     user",
            "adminConsentDisplayName": "Have full access to the Todo List service",
            "id": "b69ee3c9-c40d-4f2a-ac80-961cd1534e40",
            "isEnabled": true,
            "type": "User",
            "userConsentDescription": "Allow the application full access to the todo service on your behalf",
            "userConsentDisplayName": "Have full access to the todo service",
            "value": "user_impersonation"
            }
        ],
   
    В качестве значения идентификатора должен выступать новый GUID, созданный с помощью [специального средства](https://msdn.microsoft.com/library/ms241442%28v=vs.80%29.aspx) или программным способом. Оно представляет уникальный идентификатор для разрешения, предоставляемого веб-API. Когда клиент настроен должным образом для запроса доступа к веб-API и вызывает веб-API, он будет представлять токен JWT OAuth 2.0, у которого для утверждения (scp) области задано указанное выше значение (в данном случае это user_impersonation).
   
   > [!NOTE]
   > Позднее вы можете по мере необходимости предоставлять дополнительные области доступа. Помните о том, что веб-API может предоставлять несколько областей, связанных с множеством разных функций. Теперь вы можете управлять доступом к веб-API с помощью утверждения (scp) области в полученном токене JWT OAuth 2.0.
   > 
   > 
6. Нажмите кнопку **Сохранить**, чтобы сохранить манифест. Теперь веб-интерфейс API настроен для использования другими приложениями в каталоге.

#### <a name="to-verify-the-web-api-is-exposed-to-other-applications-in-your-directory"></a>Для проверки доступности веб-API другим приложениям каталога
1. В меню сверху щелкните пункт **Регистрация приложений**, выберите нужное клиентское приложение, для которого нужно настроить доступ к веб-интерфейсу API, и перейдите в колонку с параметрами этого приложения.
2. В разделе **Необходимые разрешения** выберите веб-интерфейс API, для доступа к которому вы только что предоставили разрешение. В раскрывающемся меню "Делегированные разрешения" выберите новое разрешение.

![Показаны разрешения списка задач](./media/active-directory-integrating-applications/todolistpermissions.png)

#### <a name="more-on-the-application-manifest"></a>Дополнительная информация о манифесте приложения
На самом деле манифест приложения является механизмом обновления сущности "Приложение", который определяет все атрибуты конфигурации удостоверения приложения Azure AD, в том числе области доступа API, рассмотренные выше. Дополнительные сведения см. в разделе, посвященном сущности "Приложение" (в [документации по сущности "Приложение API Graph"](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#application-entity)). В этом разделе вы найдете полную информацию об элементах сущности "Приложение", которые используются при указании разрешений для API:  

* элемент appRoles — коллекция сущностей [AppRole](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#approle-type), которые можно использовать при определении **разрешений приложения** для веб-API;  
* элемент oauth2Permissions — коллекция сущностей [OAuth2Permission](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#oauth2permission-type), которые можно использовать при определении **делегированных разрешений** для веб-API.

Дополнительные сведения о концепции манифеста приложения см. в статье [Основные сведения о манифесте приложения Azure Active Directory](active-directory-application-manifest.md).

### <a name="accessing-the-azure-ad-graph-and-office-365-via-microsoft-graph-apis"></a>Доступ к Azure AD Graph и Office 365 с помощью API Microsoft Graph  
Как упоминалось ранее, наряду с предоставлением доступа к API в ваших приложениях ресурсов вы также можете обновить клиентское приложение для доступа к API, которые предоставляются ресурсами Майкрософт.  API Microsoft Graph, который называется Microsoft Graph в списке разрешений для других приложений, доступен для всех приложений, которые зарегистрированы в Azure AD. Если вы регистрируете клиентское приложение в клиенте Azure AD, который был подготовлен Office 365, вам также будут доступны все разрешения, предоставляемые API Microsoft Graph к различным ресурсам Office 365.

Полное описание областей доступа, предоставляемых API Microsoft Graph, см. в статье [Permission scopes | Microsoft Graph API concepts](https://graph.microsoft.io/docs/authorization/permission_scopes) (Области разрешений | Основные понятия API Microsoft Graph).

> [!NOTE]
> Из-за имеющихся в данный момент ограничений собственные клиентские приложения могут вызывать API Graph Azure AD только при использовании разрешения Access your organization's directory (Доступ к каталогу организации).  Это ограничение не распространяется на веб-приложения.
> 
> 

### <a name="configuring-multi-tenant-applications"></a>Настройка мультитенантных приложений
При добавлении приложения Azure AD вам может потребоваться предоставить доступ к этому приложению только пользователям в вашей организации. Кроме того, может потребоваться, чтобы доступ к приложению могли получить пользователи из других организаций. Два этих типа приложений называются однотенантными и мультитенантными. Можно изменить конфигурацию отдельного однотенантного приложения, чтобы сделать его мультитенантным, что рассмотрено ниже.

Следует отметить различия между однотенантным и мультитенантным приложением.  

* Однотенантное (для одного клиента) приложение предназначено для использования в одной организации. Обычно это бизнес-приложения (LoB), которые создает разработчик компании. Однотенантное приложение предоставляет пользователям доступ только в одном каталоге. В результате, его достаточно подготовить в одном каталоге.
* Мультитенантное (для нескольких клиентов) приложение предназначено для использования в нескольких организациях. Как правило, это веб-приложение категории "программное обеспечение как услуга" (SaaS), созданное независимым поставщиком программного обеспечения (ISV). Мультитенантные приложения необходимо подготавливать в каждом каталоге, где они будут использоваться. Следовательно, для их регистрации требуется предоставление разрешений пользователем или администратором с помощью инфраструктуры согласия Azure AD. Обратите внимание, что все собственные клиентские приложения являются мультитенантными по умолчанию, так как они установлены на устройстве владельца ресурсов. Дополнительные сведения об инфраструктуре согласия см. в разделе "Обзор инфраструктуры согласия" выше.

#### <a name="enabling-external-users-to-grant-your-application-access-to-their-resources"></a>Предоставление внешним пользователям возможности открывать вашему приложению доступ к своим ресурсам
Если вы создаете приложение, которое будет доступно для сторонних клиентов или партнеров, следует обновить определение приложения на портале Azure.

> [!NOTE]
> При включении поддержки нескольких клиентов необходимо убедиться, что URI идентификатора приложения принадлежит к проверенному домену. Кроме того, URL-адрес возврата должен начинаться с https://. Дополнительные сведения см. в статье [Объекты приложения и субъекта-службы в Azure Active Directory](active-directory-application-objects.md).
> 
> 

Чтобы предоставить доступа к вашему приложению внешним пользователям, выполните следующие действия. 

1. Войдите на [портал Azure](https://portal.azure.com).
2. Выберите клиент Azure AD, щелкнув имя своей учетной записи в правом верхнем углу страницы.
3. В меню сверху выберите **Azure Active Directory**, затем щелкните **Регистрации приложения** и выберите приложение, которое требуется настроить. Откроется страница быстрого запуска и колонка с параметрами этого приложения.
4. В колонке "Параметры" выберите **Свойства** и переведите переключатель **Мультитенантное** в положение **Да**.

После внесения указанных выше изменений пользователи и администраторы в других организациях смогут предоставить вашему приложению доступ к их каталогу и другим данным.

#### <a name="triggering-the-azure-ad-consent-framework-at-runtime"></a>Активация инфраструктуры согласия Azure AD во время выполнения
Чтобы использовать инфраструктуру согласия, мультитенантное приложение должно запросить авторизацию с помощью OAuth 2.0. Доступны [примеры кода](https://azure.microsoft.com/documentation/samples/?service=active-directory&term=multi-tenant), демонстрирующие, как веб-приложение, собственное приложение, а также серверное или управляющее приложение запрашивают коды авторизации и маркеры доступа для вызова веб-API.

Веб-приложение может предлагать пользователям пройти регистрацию. Если вы предлагаете процедуру регистрации, предполагается, что пользователь нажмет кнопку регистрации, которая перенаправит браузер на конечную точку authorize OAuth 2.0 Azure AD или конечную точку userinfo OpenID Connect. Эти конечные точки позволяют приложению получить сведения о новом пользователе путем проверки id_token. На следующем этапе регистрации пользователя появится запрос на согласие, как показано в разделе "Обзор инфраструктуры согласия" выше.

Кроме того, веб-приложение может также предлагать процедуру, позволяющую администраторам зарегистрировать компанию. Эта процедура также перенаправляет пользователя на конечную точку "authorize" OAuth 2.0 Azure AD. В этом случае вы также можете передать параметр prompt=admin_consent на конечную точку авторизации для запуска процедуры получения согласия администратора, где администратор предоставит согласие от имени своей организации. Только пользователь, выполняющий проверку подлинности с помощью учетной записи, принадлежащей роли глобального администратора, может предоставить согласие. Остальные пользователи увидят сообщение об ошибке. После успешного получения согласия ответ будет содержать admin_consent=true. При активации токена доступа вы также получите id_token, предоставляющий сведения об организации и администраторе, зарегистрированных для приложения.

### <a name="enabling-oauth-20-implicit-grant-for-single-page-applications"></a>Включение неявного предоставления авторизации OAuth 2.0 для одностраничных приложений
В одностраничных приложениях (SPA) обычно используется клиент с большим объемом кода на JavaScript, который выполняется в браузере и вызывает веб-API серверного приложения для выполнения своих операций бизнес-логики. Для одностраничных приложений, размещенных в Azure AD, проверка подлинности пользователя в Azure AD выполняется с помощью протокола OAuth 2.0 Implicit Grant. После этого пользователь получает маркер, который можно использовать для безопасных вызовов серверного веб-API из клиентского кода JavaScript приложения. После того как пользователь предоставил свое согласие, этот же протокол проверки подлинности можно использовать для получения маркеров для защиты вызовов между клиентом и другими ресурсами веб-API, которые настроены для приложения. Дополнительные сведения о процессе неявного предоставления авторизации и его совместимости с вашим приложением см. в статье [Общие сведения о неявном потоке предоставления OAuth2 в Azure Active Directory (AD)](active-directory-dev-understanding-oauth2-implicit-grant.md).

По умолчанию неявное предоставление авторизации OAuth 2.0 для приложений отключено. Вы можете включить протокол OAuth 2.0 Implicit Grant для приложения, задав значение `oauth2AllowImplicitFlow` в [манифесте приложения](active-directory-application-manifest.md) — JSON-файле, который представляет собой конфигурацию удостоверения приложения.

#### <a name="to-enable-oauth-20-implicit-grant"></a>Чтобы включить неявное предоставление авторизации OAuth 2.0, выполните следующие действия.
1. Войдите на [портал Azure](https://portal.azure.com).
2. Выберите клиент Azure AD, щелкнув имя своей учетной записи в правом верхнем углу страницы.
3. В меню сверху выберите **Azure Active Directory**, затем щелкните **Регистрации приложения** и выберите приложение, которое требуется настроить. Откроется страница быстрого запуска и колонка с параметрами этого приложения.
4. Щелкните **Манифест** на странице приложения, чтобы открыть встроенный редактор манифеста.
   Найдите параметр oauth2AllowImplicitFlow и установите для него значение true. По умолчанию значение этого параметра равно false.
   
    `"oauth2AllowImplicitFlow": true,`
5. Сохраните обновленный манифест. Теперь этот веб-интерфейс API будет использовать для аутентификации пользователей протокол OAuth 2.0 Implicit Grant.


## <a name="removing-an-application"></a>Удаление приложения
В этом разделе описывается удаление приложения из клиента Azure AD.

### <a name="removing-an-application-authored-by-your-organization"></a>Удаление приложения, созданного организацией
Это приложения, которые отображаются при применении фильтра "Приложения моей компании" на главной странице "Приложения" клиента Azure AD. Технически такие приложения регистрируются вручную с помощью классического портала Azure или программным путем с помощью PowerShell или API Graph. В частности, в вашем клиенте они представлены объектами приложения и субъекта-службы. Дополнительные сведения см. в статье [Объекты приложения и субъекта-службы в Azure Active Directory](active-directory-application-objects.md).

#### <a name="to-remove-a-single-tenant-application-from-your-directory"></a>Порядок удаления однотенантного приложения из каталога
1. Войдите на [портал Azure](https://portal.azure.com).
2. Выберите клиент Azure AD, щелкнув имя своей учетной записи в правом верхнем углу страницы.
3. В меню сверху выберите **Azure Active Directory**, затем щелкните **Регистрации приложения** и выберите приложение, которое требуется настроить. Откроется страница быстрого запуска и колонка с параметрами этого приложения.
4. На странице приложения щелкните **Удалить**.
5. Нажмите кнопку **Да** в сообщении с подтверждением.

#### <a name="to-remove-a-multi-tenant-application-from-your-directory"></a>Порядок удаления мультитенантного приложения из каталога
1. Войдите на [портал Azure](https://portal.azure.com).
2. Выберите клиент Azure AD, щелкнув имя своей учетной записи в правом верхнем углу страницы.
3. В меню сверху выберите **Azure Active Directory**, затем щелкните **Регистрации приложения** и выберите приложение, которое требуется настроить. Откроется страница быстрого запуска и колонка с параметрами этого приложения.
4. В колонке "Параметры" выберите **Свойства** и переведите переключатель **Мультитенантное** в положение **Нет**. Приложение будет преобразовано в однотенантное, но оно по-прежнему будет относиться к организации, которая предоставила свое согласие.
5. Щелкните кнопку **Удалить** на странице приложения.
6. Нажмите кнопку **Да** в сообщении с подтверждением.

### <a name="removing-a-multi-tenant-application-authorized-by-another-organization"></a>Удаление мультитенантного приложения, авторизованного другой организацией
Это подмножество приложений, которые отображаются при применении фильтра "Приложения, используемые моей компанией" на главной странице "Приложения" вашего клиента Azure AD, — в частности те, которые не перечислены в списке "Приложения моей компании". Технически такие мультитенантные приложения регистрируются в процессе предоставления разрешения. В частности, в вашем клиенте они представлены только объектом субъекта-службы. Дополнительные сведения см. в статье [Объекты приложения и субъекта-службы в Azure Active Directory](active-directory-application-objects.md).

Чтобы запретить доступ многопользовательского приложения к своему каталогу (после предоставления согласия), администратор компании должен сделать это на портале Azure с помощью своей подписки Azure. Чтобы запретить доступ, администратор компании также может использовать [командлеты Azure AD PowerShell](http://go.microsoft.com/fwlink/?LinkId=294151) .

## <a name="next-steps"></a>Дальнейшие действия
* Сведения о визуальных подсказках для вашего приложения см. в статье [Рекомендации по фирменной символике для приложений](active-directory-branding-guidelines.md).
* Дополнительные сведения о связи между объектами приложения и субъекта-службы см. в статье [Объекты приложения и субъекта-службы в Azure Active Directory](active-directory-application-objects.md).
* Дополнительные сведения о роли манифеста приложения см. в статье [Основные сведения о манифесте приложения Azure Active Directory](active-directory-application-manifest.md).
* Определения некоторых основных понятий для разработчиков Azure Active Directory (AD) приведены в статье [Глоссарий по Azure Active Directory для разработчика](active-directory-dev-glossary.md).
* Сведения для разработчиков см. в [руководстве разработчика по Active Directory](active-directory-developers-guide.md).


