---
title: Azure Active Directory. Справочные материалы о критических изменениях | Документация Майкрософт
description: Изменения, внесенные в протоколы Azure AD, которые могут повлиять на приложение.
services: active-directory
documentationcenter: ''
author: CelesteDG
manager: mtillman
editor: ''
ms.assetid: 68517c83-1279-4cc7-a7c1-c7ccc3dbe146
ms.service: active-directory
ms.component: develop
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/31/2018
ms.author: celested
ms.reviewer: hirsin
ms.custom: aaddev
ms.openlocfilehash: 14217d03cdb56c5c641ab8f8c3fc0748e8e815a2
ms.sourcegitcommit: 32d218f5bd74f1cd106f4248115985df631d0a8c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/24/2018
ms.locfileid: "46987785"
---
# <a name="whats-new-for-authentication"></a>Новые возможности для проверки подлинности. 

|
>Получайте уведомления о том, когда следует повторно посетить страницу для обновлений, добавив этот [URL-адрес](https://docs.microsoft.com/api/search/rss?search=%22whats%20new%20for%20authentication%22&locale=en-us) в средство чтения RSS-канала.

Система проверки подлинности изменяет и добавляет функции на постоянной основе для повышения безопасности и соответствия стандартам. Чтобы вы оставались в курсе последних разработок, в этой статье предоставлены такие сведения:

- Новые возможности
- Известные проблемы
- Изменения протокола
- Нерекомендуемые функции.

> [!TIP] 
> Эта страница обновляется регулярно, поэтому нужно часто пересматривать ее. Если иное не указано, эти изменения вводятся только для приложений, зарегистрированных после вступления в силу соответствующих изменений.  

## <a name="upcoming-changes"></a>Предстоящие изменения

### <a name="authorization-codes-can-no-longer-be-reused"></a>Коды авторизации больше нельзя использовать повторно

**Дата вступления в силу**: 10 октября 2018 г. **Затронутые конечные точки**: версии 1.0 и 2.0 **Затронутый протокол**: [поток кода](v2-oauth2-auth-code-flow.md)

Начиная с 10 октября 2018 года Azure AD перестанет принимать использованные коды проверки подлинности для новых приложений. Любое приложение, созданное до 10 октября 2018 года, по-прежнему сможет повторно использовать коды проверки подлинности. Это изменение системы безопасности помогает Azure AD соответствовать спецификации OAuth и будет применяться для конечных точек версии 1 и 2.

Если ваше приложение повторно использует коды проверки подлинности для получения маркеров для нескольких ресурсов, мы рекомендуем использовать код для получения маркера обновления, а затем использовать этот маркер для получения дополнительных маркеров для других ресурсов. Коды проверки подлинности можно использовать только один раз, однако маркеры обновления можно использовать несколько раз для нескольких ресурсов. Любое новое приложение, которое пытается повторно использовать код проверки подлинности во время потока кода OAuth, получит ошибку invalid_grant.

Дополнительные сведения о маркерах обновления см. в статье [Обновление маркеров доступа](v1-protocols-oauth-code.md#refreshing-the-access-tokens).

## <a name="may-2018"></a>Май 2018 г.

### <a name="id-tokens-cannot-be-used-for-the-obo-flow"></a>Для потока OBO нельзя использовать маркеры идентификации

**Дата**: 1 мая 2018 г. **Затронутые конечные точки**: версии 1.0 и 2.0 **Затронутые протоколы**: неявный поток и [поток OBO](v1-oauth2-on-behalf-of-flow.md)

Начиная с 1 мая 2018 г. новые приложения не могут использовать маркеры id_token в качестве утверждения в потоке OBO.  Вместо этого следует использовать маркеры доступа для защиты API, даже между клиентом и средним уровнем того же приложения.  Приложения, зарегистрированные до 1 мая 2018 года, продолжат работать и смогут заменить маркеры id_token на маркеры доступа, однако это не считается лучшей методикой.

Чтобы обойти это изменение, можно сделать следующее.

1. Создайте веб-API для своего приложения среднего уровня с одной или несколькими областями.  Это позволит обеспечить более точный контроль и безопасность.
1. В манифесте вашего приложения, на [портале Azure](https://portal.azure.com) или [портале регистрации приложений](https://apps.dev.microsoft.com), убедитесь, что приложению разрешено выдавать маркеры доступа через неявный поток. Это определяется с помощью ключа `oauth2AllowImplicitFlow`.
1. Когда ваше клиентское приложение запрашивает id_token через `response_type=id_token`, оно также запрашивает маркер доступа (`response_type=token`) для веб-API, созданного выше.  Таким образом при использовании конечной точки версии 2.0 параметр `scope` должен выглядеть примерно так: `api://GUID/SCOPE`.  В конечной точке версии 1.0 параметр `resource` должен быть универсальным кодом ресурса (URI) приложения веб-API.
1. Передайте этот маркер доступа на средний уровень вместо id_token.  