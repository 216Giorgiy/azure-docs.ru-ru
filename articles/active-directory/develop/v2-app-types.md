---
title: Типы приложений для версии 2.0 | Azure
description: Типы приложений и сценарии, поддерживаемые конечной точкой Azure Active Directory версии 2.0.
services: active-directory
documentationcenter: ''
author: CelesteDG
manager: mtillman
editor: ''
ms.assetid: 494a06b8-0f9b-44e1-a7a2-d728cf2077ae
ms.service: active-directory
ms.subservice: develop
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 12/18/2018
ms.author: celested
ms.reviewer: saeeda, jmprieur, andret
ms.custom: aaddev
ms.collection: M365-identity-device-management
ms.openlocfilehash: 0aac3e40089c67cd71a2c634280e333964e47902
ms.sourcegitcommit: f24fdd1ab23927c73595c960d8a26a74e1d12f5d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2019
ms.locfileid: "58499987"
---
# <a name="application-types-for-v20"></a>Типы приложений для версии 2.0

Конечная точка Azure Active Directory версии 2.0 поддерживает аутентификацию для различных современных архитектур приложений, которые основаны на стандартном отраслевом протоколе [OAuth 2.0 или OpenID Connect](active-directory-v2-protocols.md). В этой статье описываются типы приложений, которые можно создавать с помощью Azure AD версии 2.0 вне зависимости от выбранного языка и платформы. Сведения в этой статье помогут вам получить общее представление о возможных сценариях, прежде вы [приступите к работе с кодом](v2-overview.md#getting-started).

> [!NOTE]
> Не все сценарии и компоненты Azure Active Directory поддерживаются конечной точкой версии 2.0. Чтобы определить, стоит ли вам использовать конечную точку версии 2.0, ознакомьтесь с [ограничениями версии 2.0](active-directory-v2-limitations.md).

## <a name="the-basics"></a>Основные сведения

Каждое приложение, использующее конечную точку версии 2.0, нужно зарегистрировать на [портале регистрации приложений Майкрософт](https://apps.dev.microsoft.com). В процессе регистрации приложения будет задано несколько параметров приложения:

* **идентификатор приложения**, который определяет конкретное приложение;
* **универсальный код ресурса (URI) перенаправления**, который можно использовать для направления ответов к приложению;
* несколько других зависящих от сценария значений.

Дополнительные сведения см. в статье о [регистрации приложения](quickstart-v2-register-an-app.md).

После регистрации приложение взаимодействует со службой Azure AD, отправляя запросы к конечной точке Azure AD версии 2.0. Мы предоставляем платформы и библиотеки с открытым кодом, которые отвечают обрабатывают данные этих запросов. Также имеется возможность самостоятельно реализовать логику аутентификации, создавая запросы к этим конечным точкам.

```
https://login.microsoftonline.com/common/oauth2/v2.0/authorize
https://login.microsoftonline.com/common/oauth2/v2.0/token
```

## <a name="single-page-apps-javascript"></a>Одностраничные приложения (JavaScript)

Многие современные приложения содержат интерфейсное одностраничное приложение, созданное преимущественно на языке JavaScript. Часто они создаются с помощью таких платформ, как AngularJS, Ember.js или Durandal.js. Конечная точка Azure AD версии 2.0 поддерживает эти приложения с помощью [неявного потока OAuth 2.0](v2-oauth2-implicit-grant-flow.md).

В этом потоке приложение получает маркеры из конечной точки авторизации версии 2.0 напрямую, без какого-либо обмена данными между серверами. Вся логика аутентификации и обработки сеансов размещается в клиенте JavaScript без перенаправления на дополнительные страницы.

![Неявный поток аутентификации](./media/v2-app-types/convergence_scenarios_implicit.png)

Чтобы увидеть этот сценарий в действии, изучите один из примеров кода одностраничного приложения из руководства по [началу работы с версией 2.0](v2-overview.md#getting-started).

## <a name="web-apps"></a>веб-приложений:

Для веб-приложений (.NET, PHP, Java, Ruby, Python, Node), доступных пользователю через браузер, для входа пользователей можно использовать [OpenID Connect](active-directory-v2-protocols.md). В OpenID Connect веб-приложение получает маркер идентификации. Это маркер безопасности, который проверяет удостоверение пользователя и предоставляет сведения о пользователе в форме утверждений.

```
// Partial raw ID token
eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6ImtyaU1QZG1Cd...

// Partial content of a decoded ID token
{
    "name": "John Smith",
    "email": "john.smith@gmail.com",
    "oid": "d9674823-dffc-4e3f-a6eb-62fe4bd48a58"
    ...
}
```

Дополнительные сведения о разных типах маркеров, используемых в конечной точке версии 2.0, см. в [справочнике по маркерам доступа](access-tokens.md) и [справочнике по `id_token`](id-tokens.md).

В приложениях веб-сервера поток аутентификации для входа состоит из следующих базовых этапов.

![Поток аутентификации веб-приложения](./media/v2-app-types/convergence_scenarios_webapp.png)

Личность пользователя можно подтвердить, проверив маркер идентификации с открытым ключом подписывания, полученный от конечной точки версии 2.0. Для этого задается файл cookie сеанса, с помощью которого можно идентифицировать пользователя при последующих запросах страницы.

Чтобы увидеть этот сценарий в действии, изучите один из примеров кода для входа в веб-приложение в руководстве по [началу работы с версией 2.0](v2-overview.md#getting-started).

Помимо простого входа в систему, приложению веб-сервера может потребоваться доступ к некоторым другим веб-службам, например интерфейсу REST API. В этом случае приложение веб-сервера участвует в объединенном потоке OpenID Connect и OAuth 2.0 с использованием [потока кода авторизации OAuth 2.0](active-directory-v2-protocols.md). Чтобы больше узнать об этом сценарии, ознакомьтесь с тем, как [приступить к работе с веб-приложениями и интерфейсами веб-API](active-directory-v2-devquickstarts-webapp-webapi-dotnet.md).

## <a name="web-apis"></a>Веб-API

Конечную точку версии 2.0 можно использовать для защиты веб-служб, таких как веб-API REST. Веб-API вместо маркеров идентификации и файлов cookie сеанса использует маркер доступа OAuth 2.0 для защиты данных и аутентификации входящих запросов. Объект, вызывающий веб-API, добавляет маркер доступа в начале заголовка авторизации HTTP-запроса, как показано ниже.

```
GET /api/items HTTP/1.1
Host: www.mywebapi.com
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6...
Accept: application/json
...
```

Веб-API использует маркер доступа для проверки удостоверения объекта, вызывающего API, и получения сведений о нем из утверждений, которые закодированы в маркере доступа. Дополнительные сведения о разных типах маркеров, используемых в конечной точке версии 2.0, см. в [справочнике по маркерам доступа](access-tokens.md) и [справочнике по `id_token`](id-tokens.md).

Веб-API может дать пользователям возможность применять определенные функции и данные или отказаться от них, предоставляя разрешения, которые также называют [областями](v2-permissions-and-consent.md). Чтобы вызывающее приложение получило разрешение для области, пользователь должен дать согласие на это. Конечная точка версии 2.0 запрашивает разрешения у пользователя и записывает их во все маркеры доступа, получаемые веб-API. Веб-API проверяет маркеры доступа, получаемые при каждом вызове, и выполняет проверки авторизации.

Веб-API может получать маркеры доступа от всех типов приложений, включая приложения веб-сервера, классические и мобильные приложения, одностраничные приложения, серверные управляющие программы и даже другие веб-API. Общий поток для веб-API выглядит следующим образом.

![Поток аутентификации веб-API](./media/v2-app-types/convergence_scenarios_webapi.png)

Чтобы узнать, как защитить веб-API с помощью маркеров доступа OAuth 2.0, изучите примеры кода веб-API в руководстве по [началу работы с версией 2.0](v2-overview.md#getting-started).

Во многих случаях веб-интерфейсам API также требуется выполнять исходящие запросы к другим нижестоящим веб-API, защищенным Azure Active Directory. Для этого веб-API могут воспользоваться преимуществами потока **От имени** Azure AD. Это позволяет им обменять входящий маркер доступа на другой маркер доступа, который будет использоваться в исходящих запросах. Дополнительные сведения о потоке "От имени" конечной точки версии 2.0 см. [здесь](v2-oauth2-on-behalf-of-flow.md).

## <a name="mobile-and-native-apps"></a>Мобильные и собственные приложения

Приложениям, установленным на устройстве, например мобильным и классическим приложениям, часто требуется доступ к внутренним службам или интерфейсам веб-API, которые хранят данные и выполняют различные функции от имени пользователя. В этих приложениях можно реализовать процесс входа и авторизации во внутренних службах с помощью [потока кода авторизации OAuth 2.0](v2-oauth2-auth-code-flow.md).

В этом потоке приложение получает код авторизации от конечной точки версии 2.0 при входе пользователя в систему. Код авторизации представляет собой разрешение, полученное от приложения, на вызов внутренних служб от имени пользователя, выполнившего вход. Приложение может передать код авторизации в фоновом режиме, чтобы получить маркер доступа OAuth 2.0 и маркер обновления. Приложение может использовать маркер доступа для аутентификации в интерфейсах веб-API в HTTP-запросах и использовать маркер обновления, чтобы получать новые маркеры доступа после истечения срока действия старых маркеров.

![Поток аутентификации собственного приложения](./media/v2-app-types/convergence_scenarios_native.png)

## <a name="daemons-and-server-side-apps"></a>Управляющие программы и серверные приложения

Приложениям, использующим долговременные процессы или работающим без взаимодействия с пользователем, тоже нужна возможность доступа к защищенным ресурсам, таким как интерфейсы веб-API. Такие приложения могут выполнять аутентификацию и получать маркеры, используя удостоверение приложения (а не делегированное удостоверение пользователя) с помощью потока учетных данных клиента OAuth 2.0. Можно подтвердить удостоверение приложения с помощью секрета или сертификата клиента. Дополнительные сведения см. в разделе [Аутентификация в Azure AD в приложениях управляющей программы с помощью сертификатов](https://azure.microsoft.com/resources/samples/active-directory-dotnet-daemon-certificate-credential/).

В этом потоке приложение взаимодействует напрямую с `/token` конечная точка для получения доступа:

![Поток аутентификации управляющей программы](./media/v2-app-types/convergence_scenarios_daemon.png)

Чтобы создать управляющую программу, изучите [документацию по учетным данным клиентов](v2-oauth2-client-creds-grant-flow.md) или ознакомьтесь с [примером приложения .NET](https://github.com/Azure-Samples/active-directory-dotnet-daemon-v2).
