<properties
	pageTitle="Модель приложений версии 2.0: протоколы | Microsoft Azure"
	description="Протоколы, поддерживаемые в общедоступной предварительной версии модели приложений 2.0 Azure AD."
	services="active-directory"
	documentationCenter=""
	authors="dstrockis"
	manager="mbaldwin"
	editor=""/>

<tags
	ms.service="active-directory"
	ms.workload="identity"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="11/10/2015"
	ms.author="dastrock"/>

# Предварительная версия модели приложений 2.0: протоколы — OAuth 2.0 и OpenID Connect

Модель приложений 2.0 предоставляет "удостоверение как услугу" для приложений за счет поддержки стандартных отраслевых протоколов, OpenID Connect и OAuth 2.0. Несмотря на то что эта служба соответствует стандартам, между любыми двумя реализациями этих протоколов могут быть незначительные различия. Сведения в этой статье могу оказаться полезными, если вы планируете писать код путем прямой отправки и обработки HTTP-запросов, а не использовать одну из наших библиотек с открытым исходным кодом.<!-- TODO: Need link to libraries above -->

> [AZURE.NOTE]Эти сведения относятся к общедоступной предварительной версии модели приложений 2.0. Инструкции по интеграции с общедоступной службой Azure AD см. в статье [Руководство разработчика по Azure Active Directory](active-directory-developers-guide.md).

## Основы
Каждое приложение, использующее модель приложений 2.0, необходимо зарегистрировать на сайте [apps.dev.microsoft.com](https://apps.dev.microsoft.com). В процессе регистрации для приложения будет собрано и назначено несколько значений:

- **Идентификатор приложения**, определяющий конкретное приложение.
- **Универсальный код ресурса (URI) перенаправления** или **Идентификатор пакета**, которые можно использовать для возврата ответов к приложению.
- Несколько других зависящих от сценария значений. Вы можете подробнее узнать о процедуре [регистрации приложения](active-directory-v2-app-registration.md).

После регистрации приложение подключается к Azure AD путем отправки приложений на конечную точку версии 2.0:

```
https://login.microsoftonline.com/common/oauth2/v2.0/authorize
https://login.microsoftonline.com/common/oauth2/v2.0/token
```

Почти во всех потоках обмена данными в OAuth и OpenID Connect участвуют четыре стороны:

![Роли OAuth 2.0](../media/active-directory-v2-flows/protocols_roles.png)

- **Сервер авторизации** — это конечная точка версии 2.0. Он отвечает за удостоверение пользователя, предоставление и блокировку доступа к ресурсам, а также предоставление маркеров. Кроме того, этот сервер выполняет роль поставщика удостоверений: он безопасным способом обрабатывает любые данные, связанные со сведениями о пользователе, его доступом и отношениями доверия между участниками потока.
- **Владелец ресурса** — это, как правило, конечный пользователь. Это сторона, владеющая данными, которая может предоставлять третьим сторонам доступ к этим данным или ресурсу.
- **Клиент OAuth** — это ваше приложение, определяемое идентификатором приложения. Обычно именно с этой стороной взаимодействует конечный пользователь. Она также запрашивает маркеры у сервера авторизации. Владелец ресурса должен предоставить клиенту разрешение на доступ к ресурсу.
- **Сервер ресурсов** — место размещения ресурса или данных. Он позволяет серверу авторизации выполнять безопасную проверку подлинности и авторизацию клиента OAuth и использует маркеры доступа носителя для обеспечения возможности предоставления доступа к ресурсу.


## Маркеры
В реализации OAuth 2.0 и OpenID Connect через модель приложений 2.0 широко используются маркеры носителя, включая маркеры носителя в виде JWT. Маркер носителя — это упрощенный маркер безопасности, предоставляющий его носителя (предъявителю) доступ к защищенному ресурсу. В этом смысле предъявителем является любая сторона, которая может предъявить маркер. Несмотря на то, что для получения токена носителя сторона должны сначала пройти проверку подлинности в Azure AD, если действия, необходимые для защиты маркера при его передаче и хранении не выполняются, его может перехватить и использовать несанкционированная сторона. Хотя в некоторых маркерах безопасности для предотвращения несанкционированного использования применяется специальный встроенный механизм, в токенах носителя такого механизма нет, и они должны передаваться по защищенному каналу, например с использованием стандарта безопасности транспортного уровня (HTTPS). Если токен носителя передается в незашифрованном виде, злоумышленник может использовать атаку "злоумышленник в середине", чтобы получить токен и использовать его для несанкционированного доступа к защищенному ресурсу. Те же принципы безопасности применяются при сохранении или кэшировании токенов носителя для последующего использования. Необходимо всегда проверять, что приложение передает и сохраняет токены носителя безопасным образом. Дополнительные сведения о безопасности в случае применения маркеров носителя см. в [RFC 6750, раздел 5](http://tools.ietf.org/html/rfc6750).

Дополнительные сведения о различных типах маркеров, используемых в модели приложений 2.0, можно найти в [справочных материалах по маркерам в модели приложений 2.0](active-directory-v2-tokens.md).

## Протоколы

Если вы готовы рассмотреть несколько примеров запросов, приступите к одному из учебников ниже. Каждый из них соответствует определенному сценарию аутентификации. Сведения о том, как выбрать правильный поток, см. в статье о [типах приложений, которые можно создать с помощью модели приложений версии 2.0](active-directory-v2-flows.md).

- [Создание мобильного и собственного приложения с использованием OAuth 2.0](active-directory-v2-protocols-oauth-code.md)
- [Создание веб-приложений с использованием OpenID Connect](active-directory-v2-protocols-oidc.md)
- [Создание одностраничных приложений с использованием неявного потока OAuth 2.0](active-directory-v2-protocols-implicit.md)
- Создание управляющих программ или серверных процессов с использованием потока учетных данных клиентов OAuth 2.0 (скоро)
- Получение токенов в веб-API потока «от имени» OAuth 2.0 (скоро)

<!-- - Get tokens using a username & password with the OAuth 2.0 Resource Owner Password Credentials Flow (coming soon) -->
<!-- [Call the Azure AD Graph API using the OAuth 2.0 Client Credentials Flow](active-directory-reference-graph.md) -->

<!---HONumber=AcomDC_1203_2015-->