<properties pageTitle="Учебник. Интеграция Azure Active Directory с TimeOffManager | Microsoft Azure" description="Узнайте, как использовать TimeOffManager вместе с Azure Active Directory для реализации единого входа, автоматической подготовки пользователей и выполнения других задач." services="active-directory" authors="MarkusVi"  documentationCenter="na" manager="stevenpo"/>
<tags ms.service="active-directory" ms.devlang="na" ms.topic="article" ms.tgt_pltfrm="na" ms.workload="identity" ms.date="08/01/2015" ms.author="markvi" />
#Учебник. Интеграция Azure Active Directory с TimeOffManager
>[AZURE.TIP]Чтобы оставить отзыв, нажмите [здесь](http://go.microsoft.com/fwlink/?LinkId=534748).
  
Цель данного учебника — показать интеграцию Azure и TimeOffManager. Сценарий, описанный в этом учебнике, предполагает, что у вас уже имеется:

-   Действующая подписка на Azure
-   Подписка с поддержкой единого входа TimeOffManager
  
После завершения этого учебника пользователи Azure AD, которым вы назначите доступ к TimeOffManager, смогут пользоваться единым входом в приложение на веб-сайте TimeOffManager для вашей компании (вход, инициированный поставщиком услуг) или с помощью инструкций из статьи [Общие сведения о панели доступа](https://msdn.microsoft.com/library/dn308586)
  
Сценарий, описанный в этом учебнике, состоит из следующих блоков:

1.  Включение интеграции приложений для TimeOffManager
2.  Настройка единого входа
3.  Настройка подготовки учетных записей пользователей
4.  Назначение пользователей

![Сценарий](./media/active-directory-saas-timeoffmanager-tutorial/IC795909.png "Сценарий")

##Включение интеграции приложений для TimeOffManager
  
В этом разделе показано, как включить интеграцию приложений для TimeOffManager.

###Чтобы включить интеграцию приложений для TimeOffManager, выполните следующие действия:

1.  На портале управления Azure в левой области навигации нажмите **Active Directory**.

    ![Active Directory](./media/active-directory-saas-timeoffmanager-tutorial/IC700993.png "Active Directory")

2.  Из списка **Каталог** выберите каталог, для которого нужно включить интеграцию каталогов.

3.  Чтобы открыть представление приложений, в представлении каталога нажмите **Приложения** в верхнем меню.

    ![Приложения](./media/active-directory-saas-timeoffmanager-tutorial/IC700994.png "Приложения")

4.  В нижней части страницы нажмите кнопку **Добавить**.

    ![Добавление приложения](./media/active-directory-saas-timeoffmanager-tutorial/IC749321.png "Добавление приложения")

5.  В диалоговом окне **Что необходимо сделать?** щелкните **Добавить приложение из коллекции**.

    ![Добавление приложения из коллекции](./media/active-directory-saas-timeoffmanager-tutorial/IC749322.png "Добавление приложения из коллекции")

6.  В **поле поиска** введите **TimeOffManager**.

    ![Коллекция приложений](./media/active-directory-saas-timeoffmanager-tutorial/IC795910.png "Коллекция приложений")

7.  В области результатов выберите **TimeOffManager** и нажмите кнопку **Завершить**, чтобы добавить приложение.

    ![TimeOffManager](./media/active-directory-saas-timeoffmanager-tutorial/IC795911.png "TimeOffManager")

##Настройка единого входа
  
В этом разделе показано, как разрешить пользователям проходить проверку подлинности в TimeOffManager со своей учетной записью Azure AD, используя федерацию на основе протокола SAML. В рамках этой процедуры потребуется передать в клиент TimeOffManager сертификат в кодировке Base-64. Если вы не знакомы с этой процедурой, посмотрите видео [Преобразование двоичного сертификата в текстовый файл](http://youtu.be/PlgrzUZ-Y1o)

###Чтобы настроить единый вход, выполните следующие действия:

1.  На странице интеграции с приложением **TimeOffManager** портала Azure AD щелкните **Настройка единого входа**, чтобы открыть диалоговое окно **Настройка единого входа**.

    ![Настройка единого входа](./media/active-directory-saas-timeoffmanager-tutorial/IC795912.png "Настройка единого входа")

2.  На странице **Как пользователи будут входить в TimeOffManager?** выберите **Единый вход Microsoft Azure AD** и нажмите кнопку **Далее**.

    ![Настройка единого входа](./media/active-directory-saas-timeoffmanager-tutorial/IC795913.png "Настройка единого входа")

3.  На странице **Настроить URL-адрес приложения** в текстовом поле **URL-адрес ответа TimeOffManager** введите URL-адрес AssertionConsumerService TimeOffManager (например: "*Example: https://www.timeoffmanager.com/cpanel/sso/consume.aspx?company\_id=IC34216*", а затем нажмите кнопку **Далее**.

    ![Настройка URL-адреса приложения](./media/active-directory-saas-timeoffmanager-tutorial/IC795914.png "Настройка URL-адреса приложения")

    Получить URL-адрес ответа можно на странице параметров единого входа в TimeOffManager.

    ![Параметры единого входа](./media/active-directory-saas-timeoffmanager-tutorial/IC795915.png "Параметры единого входа")

4.  Для загрузки сертификата на странице **Настройка единого входа в TimeOffManager** нажмите кнопку **Загрузить сертификат** и сохраните файл сертификата на своем компьютере.

    ![Настройка единого входа](./media/active-directory-saas-timeoffmanager-tutorial/IC795916.png "Настройка единого входа")

5.  В другом окне веб-браузера войдите на свой корпоративный веб-сайт TimeOffManager в качестве администратора.

6.  Последовательно выберите пункты **Учетная запись > Параметры учетной записи > Параметры единого входа**.

    ![Параметры единого входа](./media/active-directory-saas-timeoffmanager-tutorial/IC795917.png "Параметры единого входа")

7.  В разделе **Параметры единого входа** выполните следующие действия:

    ![Параметры единого входа](./media/active-directory-saas-timeoffmanager-tutorial/IC795918.png "Параметры единого входа")

    1.  Создайте файл **в кодировке Base-64** из скачанного сертификата.  

        >[AZURE.TIP]Дополнительные сведения можно узнать в видео [Преобразование двоичного сертификата в текстовый файл](http://youtu.be/PlgrzUZ-Y1o)

    2.  Откройте сертификат в кодировке Base-64 в блокноте, скопируйте его содержимое в буфер обмена и вставьте весь сертификат текстовое поле **Сертификат X.509**.
    3.  На странице **Настройка единого входа в TimeOffManager** портала Azure скопируйте значение поля **URL-адрес издателя** и вставьте его в текстовое поле **Издатель Idp**.
    4.  На странице **Настройка единого входа в TimeOffManager** портала Azure скопируйте значение поля **URL-адрес удаленного входа** и вставьте его в текстовое поле **URL-адрес конечной точки IdP**.
    5.  Установите для пункта **Применить SAML** значение **Нет**.
    6.  Установите для пункта **Автосоздание пользователей** значение **Да**.
    7.  На странице **Настройка единого входа в TimeOffManager** портала Azure скопируйте значение поля **URL-адрес удаленного выхода** и вставьте его в текстовое поле **URL-адрес выхода**.
    8.  Нажмите кнопку **Сохранить изменения**.

8.  На портале Azure в диалоговом окне **Настройка единого входа в TimeOffManager** выберите подтверждение настройки единого входа и нажмите кнопку **Готово**.

    ![Настройка единого входа](./media/active-directory-saas-timeoffmanager-tutorial/IC795919.png "Настройка единого входа")

9.  В меню в верхней части экрана выберите пункт **Атрибуты**, чтобы открыть диалоговое окно **Атрибуты токена SAML**.

    ![Атрибуты](./media/active-directory-saas-timeoffmanager-tutorial/IC795920.png "Атрибуты")

10. Чтобы добавить требуемые сопоставления атрибутов, выполните следующие действия:

    ![атрибуты токена SAML](./media/active-directory-saas-timeoffmanager-tutorial/IC795921.png "атрибуты токена SAML")

    |Имя атрибута|Значение атрибута|
	|---|---|
    |Firstname|User.givenname|
	|Lastname|User.surname|

    1.  Для каждой строки данных в приведенной выше таблице нажмите кнопку **добавить атрибут пользователя**.
    2.  В текстовом поле **Имя атрибута** введите имя атрибута, отображаемое для этой строки.
    3.  В текстовом поле **Значение атрибута** выберите значение атрибута, отображаемое для этой строки.
    4.  Нажмите **Завершено**.

11. Нажмите кнопку **Применить изменения**.

##Настройка подготовки учетных записей пользователей
  
Чтобы пользователи Azure AD могли входить в систему TimeOffManager, их необходимо подготовить для нее. TimeOffManager поддерживает автоматическую подготовку пользователей. С вашей стороны никакие действия не требуются. Пользователи автоматически добавляются при первом входе с помощью единого входа.

>[AZURE.NOTE]Вы можете использовать любые другие средства создания учетной записи пользователя TimeOffManager или API-интерфейсы, предоставляемые TimeOffManager для подготовки учетных записей пользователя AAD.

##Назначение пользователей
  
Чтобы проверить свою конфигурацию, предоставьте пользователям Azure AD, которые должны использовать приложение, доступ путем их назначения.

###Чтобы назначить пользователей для TimeOffManager, выполните следующие действия:

1.  На портале Azure AD создайте тестовую учетную запись.

2.  На странице интеграции с приложением **TimeOffManager** нажмите кнопку **Назначить пользователей**.

    ![Назначить пользователей](./media/active-directory-saas-timeoffmanager-tutorial/IC795922.png "Назначить пользователей")

3.  Выберите тестового пользователя, нажмите кнопку **Назначить**, а затем — **Да** для подтверждения назначения.

    ![Да](./media/active-directory-saas-timeoffmanager-tutorial/IC767830.png "Да")
  
Если вы хотите проверить параметры единого входа, откройте панель доступа. Дополнительные сведения о панели доступа можно найти в статье [Общие сведения о панели доступа](https://msdn.microsoft.com/library/dn308586).

<!---HONumber=August15_HO7-->