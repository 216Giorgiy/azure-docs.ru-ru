---
title: "Реализация синхронизации паролей с помощью синхронизации Azure AD Connect | Документация Майкрософт"
description: "В этой статье объясняется, как работает синхронизация паролей и как ее включить."
services: active-directory
documentationcenter: 
author: MarkusVi
manager: femila
editor: 
ms.assetid: 05f16c3e-9d23-45dc-afca-3d0fa9dbf501
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/13/2017
ms.author: markvi
translationtype: Human Translation
ms.sourcegitcommit: 64b6447608ecdd9bdd2b307f4bff2cae43a4b13f
ms.openlocfilehash: cff066ff2943443749ee8eb2ef71c7ca93bb829c
ms.lasthandoff: 03/01/2017


---
# <a name="implementing-password-synchronization-with-azure-ad-connect-sync"></a>Реализация синхронизации паролей с помощью службы Azure AD Connect Sync
В этой статье содержатся сведения о том, как синхронизировать пароли пользователей локальной службы Active Directory (AD) и облачной службы Azure Active Directory (Azure AD).

## <a name="what-is-password-synchronization"></a>Что такое синхронизация паролей
Вероятность того, что сделанная работа может быть заблокирована из-за забытого пароля, связана с количеством разных паролей, которые необходимо помнить. Чем больше паролей необходимо помнить, тем выше вероятность забыть один из них. Вопросы и звонки о восстановлении паролей и прочие проблемы, связанные с паролями, забирают больше всего ресурсов службы технической поддержки.

Синхронизация паролей — это функция для синхронизации паролей пользователей локальной службы Active Directory и облачной службы Azure Active Directory (Azure AD).
Эта функция позволяет входить в службы Azure Active Directory (например, Office 365, Microsoft Intune, CRM Online и доменные службы Azure AD) с помощью пароля, используемого для входа в локальную службу Active Directory.

![Что такое Azure AD Connect?](./media/active-directory-aadconnectsync-implement-password-synchronization/arch1.png)

За счет сокращения числа паролей, которые должны помнить пользователи, до одного единственного, синхронизация паролей дает следующие преимущества:

* Повышение производительности пользователей
* Снижение затрат, связанных со службой технической поддержки  

Если выбран параметр [**Федерация с AD FS**](https://channel9.msdn.com/Series/Azure-Active-Directory-Videos-Demos/Configuring-AD-FS-for-user-sign-in-with-Azure-AD-Connect), можно также включить синхронизацию паролей на случай сбоя в инфраструктуре AD FS.

Синхронизация паролей — это расширение функции синхронизации каталогов, реализованное при помощи служб синхронизации Azure AD Connect. Для использования синхронизации паролей в определенной среде необходимо выполнение следующих действий.

* Установка Azure AD Connect  
* Настройка синхронизации служб каталогов между локальной службой AD и Azure Active Directory
* Включение синхронизации паролей

Дополнительные сведения см. в статье [Интеграция локальных удостоверений с Azure Active Directory](active-directory-aadconnect.md).

> [!NOTE]
> Дополнительную информацию о доменных службах Active Directory, настроенных для использования FIPS и синхронизации паролей, см. в разделе [Синхронизация паролей и FIPS](#password-synchronization-and-fips).
>
>

## <a name="how-password-synchronization-works"></a>Как работает синхронизация паролей
Доменная служба Active Directory хранит пароли в виде хэш-значений, которые представляют фактические пароли пользователей. Хэш-значение — это результат односторонней математической функции (*алгоритма хэширования*). Не существует метода для возврата результата односторонней функции в обычную текстовую версию пароля. Хэш пароля не может использоваться для входа в локальную сеть.

Чтобы синхронизировать пароль, Azure AD Connect Sync извлекает хэш пароля из локального каталога Active Directory. Перед синхронизацией в службу проверки подлинности Azure Active Directory хэш пароля дополнительно обрабатывается системой безопасности. Пароли синхронизируются для каждого пользователя отдельно и в хронологическом порядке.

Фактический поток данных в процессе синхронизации паролей аналогичен синхронизации данных пользователей, таких как отображаемые имена или адреса электронной почты. Но синхронизация паролей происходит чаще, чем это обычно делается для других атрибутов. Процесс синхронизации паролей выполняется каждые 2 минуты. Нельзя изменять частоту выполнения этого процесса. При синхронизации пароль перезаписывает существующий в облачной службе.

При первом включении функции синхронизации паролей она выполняет первоначальную синхронизацию паролей всех пользователей в области. Нельзя явно определить подмножество паролей пользователей, которые требуется синхронизировать.

При изменении локального пароля новый пароль, как правило, синхронизируется в течение нескольких минут.
Если синхронизация паролей завершается сбоем, автоматически осуществляется новая попытка. Ошибки, возникающие во время синхронизации паролей, записываются в журнал событий.

Синхронизация пароля не влияет на пользователей, находящихся в системе в момент ее выполнения.
Если изменение пароля синхронизируется во время вашего пребывания в облачной службе, оно не применяется в сеансе облачной службы немедленно. Однако, когда снова возникнет необходимость в проверке подлинности в облачной службе, потребуется указать новый пароль.

> [!NOTE]
> Синхронизация паролей поддерживается только для типа объектов user в Active Directory. Она не поддерживается для типа объектов iNetOrgPerson.
>
>

### <a name="how-password-synchronization-works-with-azure-ad-domain-services"></a>Как синхронизация паролей работает с доменными службами Azure AD
Функцию синхронизации паролей также можно использовать для синхронизации локальных паролей с [доменными службами Azure AD](../../active-directory-domain-services/active-directory-ds-overview.md). Данный сценарий позволяет доменным службам Azure AD проверять подлинность пользователей в облаке, применяя все методы, доступные в локальной службе AD. Действия в этом сценарии аналогичны использованию инструмента миграции Active Directory Migration Tool (ADMT) в локальной среде.

### <a name="security-considerations"></a>Вопросы безопасности
При синхронизации пароли в текстовом формате не передаются в службу синхронизации паролей, Azure AD или какие-либо другие связанные службы.

Кроме того, в локальном каталоге Active Directory пароли могут храниться в зашифрованном виде и не подлежать восстановлению. При передаче данных между локальным каталогом AD и Azure Active Directory используется хэш-код пароля Active Directory. Хэш-код пароля не может использоваться для доступа к ресурсам вашей локальной среды.

### <a name="password-policy-considerations"></a>Рекомендации по политикам паролей
Есть два типа политик паролей, которые затрагивает синхронизация паролей:

1. Политика сложности паролей.
2. Политика срока действия паролей.

**Password complexity policy**  
При включении синхронизации паролей политики сложности паролей, настроенные в локальном каталоге Active Directory, переопределяют политики сложности, настроенные в облаке для синхронизированных пользователей. Все допустимые пароли из локального Active Directory можно использовать для доступа к службам Azure AD.

> [!NOTE]
> Пароли пользователей, созданные непосредственно в облаке, и впредь регулируются политиками паролей, которые настроены в облаке.
>
>

**Password expiration policy**  
Если пароль пользователя синхронизируется, для пароля облачной учетной записи устанавливается*неограниченный срок действия*.
Синхронизированный пароль, срок действия которого в локальной среде истек, можно использовать для входа в облачные службы. Пароль для облачной учетной записи изменяется, когда вы изменяете пароль в локальной среде.

### <a name="overwriting-synchronized-passwords"></a>Перезапись синхронизированных паролей
Администратор может вручную сбросить пароль с помощью Windows PowerShell.

В таком случае новый пароль перезапишет синхронизированный пароль, и к новому паролю будут применены все политики паролей, настроенные в облаке.

Если вы снова измените локальный пароль, новый пароль синхронизируется в облако и перезапишет пароль, измененный вручную.

## <a name="enabling-password-synchronization"></a>Включение синхронизации паролей
Если во время установки Azure AD Connect используются **стандартные параметры**, синхронизация паролей включается по умолчанию. Дополнительные сведения см. в статье [Приступая к работе с Azure AD Connect с использованием стандартных параметров](active-directory-aadconnect-get-started-express.md).

Если во время установки Azure AD Connect используются пользовательские параметры, вам нужно включить синхронизацию паролей на странице входа в систему. Дополнительные сведения см. в статье [Выборочная установка Azure AD Connect](active-directory-aadconnect-get-started-custom.md).

![Включение синхронизации паролей](./media/active-directory-aadconnectsync-implement-password-synchronization/usersignin.png)

### <a name="password-synchronization-and-fips"></a>Синхронизация паролей и FIPS
Если сервер заблокирован в соответствии с федеральным стандартом обработки информации (FIPS), схема MD5 отключена.

**Чтобы включить MD5 для синхронизации паролей выполните следующие действия.**

1. Перейдите к папке **%programfiles%\Azure AD Sync\Bin**.
2. Откройте файл **miiserver.exe.config**.
3. Перейдите на узел **конфигурации или среды выполнения** (в конце файла конфигурации).
4. Добавьте следующий узел: `<enforceFIPSPolicy enabled="false"/>`
5. Сохраните изменения.

Этот фрагмент должен выглядеть следующим образом.

```
    <configuration>
        <runtime>
            <enforceFIPSPolicy enabled="false"/>
        </runtime>
    </configuration>
```

Дополнительные сведения о безопасности и FIPS см. в записи блога [AAD Password Sync, Encryption and FIPS compliance](https://blogs.technet.microsoft.com/enterprisemobility/2014/06/28/aad-password-sync-encryption-and-fips-compliance/) (Синхронизация паролей, шифрование и соответствие FIPS в AAD).

## <a name="troubleshooting-password-synchronization"></a>Устранение неполадок синхронизации паролей
При возникновении проблем с синхронизацией паролей см. статью [Устранение неполадок синхронизации паролей с помощью службы синхронизации Azure AD Connect](active-directory-aadconnectsync-troubleshoot-password-synchronization.md).

## <a name="next-steps"></a>Дальнейшие действия
* [Azure AD Connect Sync: настройка параметров синхронизации](active-directory-aadconnectsync-whatis.md)
* [Интеграция локальных удостоверений с Azure Active Directory](active-directory-aadconnect.md)

