<properties
   pageTitle="Объекты приложений и объекты участников-служб"
   description="Обсуждение связи между объектами Application и ServicePrincipal в Azure Active Directory"
   documentationCenter="dev-center-name"
   authors="msmbaldwin"
   manager="mbaldwin"
   services="active-directory"
   editor=""/>

<tags
   ms.service="active-directory"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="identity"
   ms.date="09/08/2015"
   ms.author="mbaldwin"/>


# Объекты приложений и объекты участников-служб

На этой схеме показана связь между объектом приложения (Application) и объектом участника-службы (ServicePrincipal) в контексте образца приложения под названием **Приложение по управлению персоналом**. Имеется три клиента: **Adatum** — разрабатывающий приложение клиент, а также **Contoso** и **Fabrikam** — клиенты, которые потребляют **Приложение по управлению персоналом**.

![Связь между объектом Application и объектом ServicePrincipal](./media/active-directory-application-objects/application-objects-relationship.png)


При регистрации приложения на портале управления Azure в вашем клиенте каталога создаются два объекта:

- **Объект Application**: этот объект представляет определение вашего приложения. Подробное описание его свойств можно найти в разделе **Объект Application** ниже.

- **Объект ServicePrincipal**: этот объект представляет экземпляр приложения в вашем клиенте каталога. К объектам ServicePrincipal можно применять политики, включая назначение для ServicePrincipal разрешений, позволяющих приложению читать данные каталога вашего клиента. При каждом изменении объекта Application изменения также применяются к связанному объекту ServicePrincipal в вашем клиенте.


> [AZURE.NOTE]Если приложение настроено для внешнего доступа, изменения объекта приложения не отражаются в ServicePrincipal клиента-потребителя до тех пор, пока клиент-потребитель не отменит доступ и не предоставит его снова.



На схеме выше шаг 1 — это процесс создания объектов Application и ServicePrincipal.

На шаге 2 при предоставлении доступа администратором компании в клиенте Azure AD компании создается объект ServicePrincipal, и ему назначается уровень доступа к каталогу, предоставленный администратором компании.

На шаге 3 каждый из клиентов-потребителей приложения (таких как Contoso и Fabrikam) имеют собственный объект ServicePrincipal, который представляет его экземпляр приложения. В этом примере у каждого есть ServicePrincipal, представляющий «Приложение по управлению персоналом».





## Свойства объекта Application

В следующих таблицах перечислены все свойства объекта приложения и содержатся важные сведения для разработчиков. Эти свойства применяются к веб-приложениям, веб-API и собственным клиентским приложениям, которые зарегистрированы в Azure AD.


### Общие сведения

Свойство | Описание
| ------------- | -----------
| Имя | Отображаемое имя приложения. Обязательное свойство в мастере **добавления приложения**.
| Логотип | Логотип приложения, который представляет приложение или компанию. Этот логотип позволяет внешним пользователям легче связывать запрос на предоставление доступа с вашим приложением. При отправке логотипа следует придерживаться спецификаций мастера **отправки логотипа**. Если не указать логотип, отображается логотип по умолчанию.
| Внешний доступ | Определяет, разрешено ли пользователям во внешних организациях предоставлять вашему приложению единый вход и доступ к данным в каталоге организации. Этот элемент управления затрагивает только возможность предоставления доступа. Он не влияет на доступ, который уже был предоставлен. Доступ могут предоставлять только администраторы компаний.


### Единый вход

Свойство | Описание
| ------------- | -----------
| URI кода приложения | Уникальный логический идентификатор вашего приложения. Обязательное свойство в мастере **добавления приложения**. <br><br>Поскольку URI кода приложения является логическим идентификатором, его не требуется разрешать в адрес Интернета. Он предъявляется приложением при отправке запроса единого входа в Azure AD. Azure AD идентифицирует приложение и отправляет ответ на вход (токен SAML) на URL-адрес ответа, который был предоставлен во время регистрации приложения. Используйте значение URI кода приложения для установки свойства wtrealm (для WS-Federation) или свойства Issuer (для SAML-P) при осуществлении запроса на вход. **URI кода приложения** должен быть уникальным значением в Azure AD вашей организации.<br><br>**Примечание**. При включении приложения для внешних пользователей значение URI кода приложения должно быть адресом в одном из проверенных доменов вашего каталога. Таким образом, этим значением не может быть URN. Эта мера безопасности предотвращает указание (и получение) другими организациями уникального свойства, которой принадлежит вашей организации. Во время разработки можно изменить URI кода приложения на расположение в исходном домене вашей организации (если пользовательский или собственный домен еще не проверен) и обновить приложение для использования этого нового значения. Исходный домен является доменом третьего уровня, который создается во время регистрации в системе, например contoso.onmicrosoft.com.
| URL-адрес приложения | Адрес веб-страницы, на которой пользователи могут войти и использовать ваше приложение. Обязательное свойство в мастере **добавления приложения**.<br><BR>**Примечание**. Значение, заданное для этого свойства в мастере добавления приложения, также задается в качестве значения URL-адреса ответа.
| URL-адрес ответа | Физический адрес приложения. Azure AD отправляет по этому адресу токен с ответом на единый вход. При первой регистрации в мастере **добавления приложения** значение, заданное для URL-адреса приложения, также задается в качестве значения URL-адреса ответа. При выполнении запроса на вход используйте значение URL-адреса ответа для задания свойства wreply (WS-Federation) или свойства **AssertionConsumerServiceURL** (для SAML-P).<br><BR>**Примечание**. При включении приложения для внешних пользователей URL-адресом ответа должен быть адрес **https://**. | URL-адрес метаданных федерации | (Необязательно). Представляет физический URL-адрес документа метаданных федерации для вашего приложения. Он необходим для поддержки выхода SAML-P. Azure AD загружает документ метаданных, который размещается в данной конечной точке, и использует его для обнаружения открытой части сертификата, которая используется вами для проверки подписи запросов выхода и URL-адреса выхода вашего приложения. Это свойство нельзя настроить при первоначальном добавлении приложения. Его можно настроить только позже.<br><BR>**Примечание**. Если необходима поддержка выхода SAML-P, но для вашего приложения нет конечной точки метаданных федерации, обратитесь в службу поддержки пользователей для получения других вариантов.


### Вызов API Graph или веб-API

Свойство | Описание
| ------------- | -----------
| Идентификатор клиента | Уникальный идентификатор вашего приложения. Этот идентификатор необходимо использовать в вызовах API Graph или других веб-API, зарегистрированных с помощью Azure AD. Azure AD автоматически создает это значение во время регистрации приложения, и его нельзя изменить.<BR><BR>Чтобы разрешить приложению доступ к каталогу (для доступа на чтение или запись) через API Graph, требуется идентификатор клиента и ключ (известный в OAuth 2.0 как секрет клиента). Приложение использует идентификатор клиента и ключ для запроса маркера доступа из конечной точки токена OAuth 2.0 в Azure AD. (Чтобы просмотреть все конечные точки Azure AD, в командной строке щелкните **Просмотреть конечные точки**.) При использовании API Graph для получения или задания (изменения) данных каталога ваше приложение использует этот маркер доступа в заголовке авторизации (Authorize) запроса к API Graph.
| Ключи | Если приложение считывает или записывает данные в Azure AD, например данные, которые становятся доступными через API Graph, приложению необходим ключ. При запросе маркера доступа для вызова API Graph приложение передает его **идентификатор клиента** и **ключ**. Конечная точка токена использует идентификатор и ключ для проверки подлинности приложения перед выдачей маркера доступа. Можно создать несколько ключей для обслуживания сценариев смены ключей. Также можно удалить ключи, которые просрочены, скомпрометированы или больше не используется.
| Управление доступом | Выберите один из трех различных уровней доступа: единый вход (SSO), единый вход и чтение данных каталога или единый вход и чтение и запись данных каталога. Можно также удалить доступ. Дополнительные сведения о доступе к каталогу см. в статье [Уровни доступа приложения](https://msdn.microsoft.com/library/azure/b08d91fa-6a64-4deb-92f4-f5857add9ed8#BKMK_AccessLevels).<br><BR>**Примечание**. Изменения в уровне доступа приложения к каталогу применяются только к вашему каталогу. Изменения не применяются к пользователям, которым был предоставлен доступ к вашему приложению.


### Собственные клиенты

Свойство | Описание
| ------------- | -----------
| URI перенаправления | URI, на который Azure AD будет перенаправлять агент пользователя в ответ на запрос авторизации OAuth 2.0. Значение не обязательно должно быть физической конечной точкой, но должно быть допустимым URI-адресом.

##

<!---HONumber=Sept15_HO2-->