<properties 
	pageTitle="Создание виртуальной машины с MySQL в Azure" 
	description="Создание виртуальной машины Azure под управлением Windows Server 2008 R2 и последующая установка и настройка базы данных MySQL на виртуальной машине." 
	services="virtual-machines" 
	documentationCenter="" 
	authors="KBDAzure" 
	manager="timlt" 
	editor="tysonn"/>

<tags 
	ms.service="virtual-machines" 
	ms.workload="infrastructure-services" 
	ms.tgt_pltfrm="vm-windows" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="10/23/2014" 
	ms.author="kathydav"/>


#Установка MySQL на виртуальной машине под управлением Windows Server 2008 R2 в Azure

[MySQL](http://www.mysql.com) является популярной базой данных SQL с открытым исходным кодом. С помощью [портала управления Azure][AzurePreviewPortal] можно создать виртуальную машину под управлением Windows Server 2008 R2 из коллекции образов. Затем можно установить и настроить базу данных MySQL на виртуальной машине.

В этом учебнике описаны следующие процедуры.

- Создание виртуальной машины под управлением Windows Server 2008 R2 с помощью портала управления.

- Установка и запуск MySQL Community Server на виртуальной машине.

##Создание виртуальной машины под управлением Windows Server

[AZURE.INCLUDE [virtual-machines-create-WindowsVM](../includes/virtual-machines-create-WindowsVM.md)]

##Присоединение диска данных

После создания виртуальной машины присоедините диск данных. Он будет выполнять роль хранилища данных, необходимого при установке MySQL. Подключите пустой диск, следуя указаниям в статье [Как присоединить диск данных к виртуальной машине](http://azure.microsoft.com/documentation/articles/storage-windows-attach-disk/).

##Вход на виртуальную машину
Далее вам необходимо войти в виртуальной машину, чтобы установить MySQL.

[AZURE.INCLUDE [virtual-machines-log-on-win-server](../includes/virtual-machines-log-on-win-server.md)]

##Установка и запуск MySQL Community Server на виртуальной машине
Для установки, настройки и запуска MySQL Community Server выполните следующие действия:

1. После подключения к виртуальной машине с помощью удаленного рабочего стола откройте **Internet Explorer** из меню **Пуск**. 

2. Нажмите кнопку **Сервис** в правом верхнем углу. В окне **Свойства браузера** выберите вкладку **Безопасность**, выберите значок **Надежные сайты**, а затем нажмите кнопку **Сайты**. Добавьте  *http://\*.mysql.com* в список надежных сайтов.

3. Перейдите на страницу [Скачивание MySQL Community Server][MySQLDownloads].

4. Выберите **Microsoft Windows** в раскрывающемся меню **Платформа** и щелкните **Выбрать**.

5. Найдите самый последний выпуск **Windows (x 86, 64-разрядная), установщик MSI** и нажмите кнопку **Загрузить**. 

6. Выберите **Нет, просто начать скачивание!** (или зарегистрируйте учетную запись).  Если будет предложено, выберите сайт зеркальной загрузки установщика MySQL и сохраните установщик на рабочем столе.

7. Дважды щелкните файл установщика на рабочем столе, чтобы начать установку.

8. Нажмите кнопку **Далее**.

9. Примите условия лицензионного соглашения и нажмите кнопку **Далее**.

10. Нажмите кнопку **Обычная** для установки общих компонентов.

11. Нажмите **Установить**.

12. Запустите мастер настройки MySQL и щелкните **Далее**.

13. Выберите **Подробные настройки** и щелкните "Далее".

14. Выберите **Сервер**, если вы планируете запустить MySQL вместе с другими приложениями на сервере, или выберите вариант, который наилучшим образом соответствует вашим потребностям.  Нажмите кнопку **Далее**.

15. Выберите **Многофункциональная база данных** или выберите вариант, который наилучшим образом соответствует вашим потребностям.  Нажмите кнопку **Далее**.

16. Выберите диск с данными, присоединенный в предыдущем разделе.

	![Configure MySQL][MySQLConfig5]

17. Выберите **Поддержка принятия решений (DSS)/OLAP** или выберите вариант, который наилучшим образом соответствует вашим потребностям.  Нажмите кнопку **Далее**.

18. Выберите **Включение сети TCP/IP** и **Добавить исключения брандмауэра для порта** (это создаст правила входящего трафика в брандмауэре Windows с именем **MySQL Server**).

	![Configure MySQL][MySQLConfig7]

19. Если вам необходимо хранить текст на нескольких языках, выберите **Максимальная поддержка различных языков**. В противном случае выберите один из других параметров.  Нажмите кнопку **Далее**.

	![Configure MySQL][MySQLConfig8]

20. Выберите **Установить как службу Windows** и **Автоматически запустить сервер MySQL**.  Кроме того, выберите **Включить каталог Bin в Windows PATH**. Нажмите кнопку **Далее**.

	![Configure MySQL][MySQLConfig9]

21. Введите корневой пароль. Не отмечайте пункты **Разрешить доступ с правами корневого пользователя с удаленных компьютеров** или **Создать анонимную учетную запись**.  Нажмите кнопку **Далее**.

	![Configure MySQL][MySQLConfig10]

22. Щелкните **Выполнить** и дождитесь завершения настройки.

23. Нажмите кнопку **Готово**

24. Щелкните **Пуск** и выберите **Клиент командной строки MySQL 5.x** для запуска клиента командной строки.

25.  При появлении запроса введите корневой пароль MySQL (который был установлен на предыдущем шаге), чтобы открыть командное окно, в котором можно вводить инструкции SQL для взаимодействия с базой данных.

26. Чтобы создать нового пользователя MySQL, выполните следующую команду в командной строке **mysql>**:

		mysql> CREATE USER 'mysqluser'@'localhost' IDENTIFIED BY 'password';

	Точка с запятой (;) в конце строки представляет собой символ завершения команды.

27. Чтобы создать базу данных и предоставить разрешения пользователю  `mysqluser`, выполните следующие команды:

		mysql> CREATE DATABASE testdatabase;
		mysql> GRANT ALL ON testdatabase.* TO 'mysqluser'@'localhost' IDENTIFIED BY 'password';

	Обратите внимание, что имена пользователей и пароли для базы данных используются только скриптами, подключающимися к базе данных.  Имена учетных записей базы данных могут не совпадать с учетными записями компьютера.

28. Чтобы войти в систему с другого компьютера, выполните следующую команду:

		mysql> GRANT ALL ON testdatabase.* TO 'mysqluser'@'<ip-address>' IDENTIFIED BY 'password';

	где `ip-address`  это IP-адрес компьютера, с которого осуществляется подключение к MySQL.
	
29. Чтобы выйти из клиента командной строки MySQL, выполните следующую команду:

		quit

30. После установки MySQL настройте конечную точку для удаленного доступа к MySQL. Войдите на [портал управления Azure][AzurePreviewPortal]. На портале Azure щелкните **Виртуальные машины** и выберите имя новой виртуальной машины, а затем щелкните **Конечные точки** и **Добавить конечную точку**.

31. Выберите **Добавить конечную точку** и щелкните стрелку для продолжения.
	

32. Добавьте конечную точку с именем "MySQL", протоколом **TCP** и портами **Общий** и **Частный** со значением "3306". Щелкните значок галочки. Это позволит вам получать удаленный доступ к MySQL.
	

33. Проверьте удаленное подключение к MySQL.  Чтобы войти в систему в качестве пользователя **mysqluser**, с локального компьютера, на котором запущена MySQL, выполните команду, аналогичную следующей.

		mysql -u mysqluser -p -h <yourservicename>.cloudapp.net

	Например, если имя вашей виртуальной машины — testwinvm, выполните следующую команду:

		mysql -u mysqluser -p -h testwinvm.cloudapp.net

##Ресурсы
Дополнительную информацию о MySQL см. в [документации по MySQL](http://dev.mysql.com/doc/).

[AzurePreviewPortal]: http://manage.windowsazure.com
[MySQLDownloads]: http://www.mysql.com/downloads/mysql/


<!--HONumber=42-->
