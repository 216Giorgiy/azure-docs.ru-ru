---
title: Управление аутентификацией в Azure Maps | Документация Майкрософт
description: Вы можете управлять аутентификацией в Azure Maps с помощью портала Azure.
author: walsehgal
ms.author: v-musehg
ms.date: 02/14/2018
ms.topic: conceptual
ms.service: azure-maps
services: azure-maps
manager: timlt
ms.openlocfilehash: 68c3c8ac39f5803e01ee1038ec85ddb96ac80b30
ms.sourcegitcommit: b3d74ce0a4acea922eadd96abfb7710ae79356e0
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/14/2019
ms.locfileid: "56242691"
---
# <a name="manage-authentication-in-azure-maps"></a>Управление аутентификацией в Azure Maps

После создания учетной записи Azure Maps создаются идентификатор клиента и ключи для поддержки аутентификации Azure Active Directory (Azure AD) или аутентификации на основе общего ключа.

Сведения об аутентификации можно найти на портале Azure, перейдя на страницу **Аутентификация** в разделе **Параметры**. Перейдите к учетной записи. Затем в меню выберите **Аутентификация**.


## <a name="view-authentication-details"></a>Просмотр сведений об аутентификации

Чтобы просмотреть сведения об аутентификации, выберите пункт **Аутентификация** в меню параметров.

![Просмотр аутентификации](./media/how-to-manage-authentication/how-to-view-auth.png)

 Дополнительные сведения об аутентификации и Azure Maps см. в статье [Аутентификация в Azure Maps](https://aka.ms/amauth).


## <a name="configure-azure-ad-app-registration"></a>Настройка регистрации Azure AD App

После создания учетной записи Azure Maps необходима связь между клиентом Azure AD и ресурсом Azure в Azure Maps. 

1. Перейдите к колонке Azure AD и создайте регистрацию приложения с именем и URL-адресом входа в качестве домашней страницы веб-приложения или API, например https://localhost/. Если у вас уже есть зарегистрированное приложение, перейдите к шагу 2.

    ![Регистрация приложения](./media/how-to-manage-authentication/app-registration.png)

    ![Регистрация приложения](./media/how-to-manage-authentication/app-create.png)

2. Назначьте делегированные разрешения API для Azure Maps. Для этого перейдите к приложению в разделе "Регистрация приложений" и щелкните **Параметры**.  Выберите **Необходимые разрешения** и щелкните **Добавить**. Найдите и выберите Azure Maps в разделе **Выбор API**, а затем щелкните **Выбрать**.

    ![Разрешения API приложения](./media/how-to-manage-authentication/app-permissions.png)

3. Наконец, в разделе "Выбор разрешений" выберите "Access Azure Maps" (Доступ к Azure Maps) и щелкните "Выбрать".

    ![Выбор разрешений API приложения](./media/how-to-manage-authentication/select-app-permissions.png)

4. Выполните шаг А или Б в зависимости от реализации аутентификации.

    1. Если приложение собирается использовать аутентификацию на основе маркера пользователя с помощью веб-пакета SDK Azure Maps, необходимо включить `oauthEnableImplicitFlow`, присвоив ему значение true в разделе "Манифест" на странице сведений о регистрации приложения.
    
       ![Манифест приложения](./media/how-to-manage-authentication/app-manifest.png)

    2. Если приложение использует аутентификацию сервера или приложения, перейдите к колонке **Ключи** во время регистрации приложения и создайте пароль или отправьте сертификат открытого ключа для регистрации приложения. Если вы создаете пароль, после того как щелкнете **Сохранить**, скопируйте пароль для дальнейшего использования и надежно сохраните его. С его помощью вы получите маркеры из Azure AD.

       ![Ключи приложения](./media/how-to-manage-authentication/app-keys.png)


## <a name="grant-rbac-to-azure-maps"></a>Предоставление RBAC для Azure Maps

После того как учетная запись Azure Maps будет связана с клиентом Azure AD, можно предоставить управление доступом, назначив пользователю или приложению доступные роли управления доступа Azure Maps.

1. Перейдите к параметру **Контроль доступа**, щелкните **Назначения ролей** и **Добавить назначение ролей**.

    ![Предоставление RBAC](./media/how-to-manage-authentication/how-to-grant-rbac.png)

2. Во всплывающем окне "Назначение ролей" в поле **Роль** выберите Azure Maps Date Reader (Preview) (Читатель даты Azure Maps (предварительная версия)), а в поле **Назначение доступа к** — "Пользователь, группа или субъект-служба Azure AD", в поле **Выбор** выберите пользователя или приложение в раскрывающемся списке и щелкните **Сохранить**.

    ![Добавление назначения роли](./media/how-to-manage-authentication/add-role-assignment.png)

## <a name="view-available-azure-maps-rbac-roles"></a>Просмотр доступных ролей RBAC Azure Maps

Чтобы просмотреть доступные роли управления доступом на основе ролей для Azure Maps, к которым можно предоставить доступ, перейдите к параметру **Управление доступом (IAM)**, щелкните **Роли** и выполните поиск ролей, начиная с **Azure Maps**.

![Просмотр доступных ролей](./media/how-to-manage-authentication/how-to-view-avail-roles.png)


## <a name="view-azure-maps-role-based-access-control-rbac"></a>Просмотр управления доступом на основе ролей (RBAC) в Azure Maps

В Azure AD доступен детальный контроль доступа путем управления доступом на основе ролей (RBAC). 

Чтобы просмотреть пользователей или приложения, которым был предоставлен RBAC для Azure Maps, перейдите к параметру **Управление доступом (IAM)**, выберите **Назначения ролей** и выполните фильтрацию по **Azure Maps**. Все доступные роли отобразятся ниже.

![Просмотр RBAC](./media/how-to-manage-authentication/how-to-view-amrbac.png)


## <a name="request-tokens-for-azure-maps"></a>Запрос маркеров для Azure Maps

После того как приложение зарегистрировано и связано с Azure Maps, вы можете запросить маркеры доступа.

* Если приложение собирается использовать аутентификацию на основе маркера пользователя с помощью веб-пакета SDK Azure Maps, необходимо настроить HTML-страницу с помощью идентификатора клиента Azure Maps и идентификатора приложения Azure AD.

* Для приложений, использующих аутентификацию сервера или приложения, запросите маркер из конечной точки для входа Azure AD `https://login.microsoftonline.com` с идентификатором ресурса Azure AD `https://atlas.microsoft.com/`, идентификатором клиента Azure Maps, идентификатором Azure AD App и паролем или сертификатом регистрации Azure AD App.

Дополнительные сведения о запросе маркеров доступа из Azure AD для пользователей и субъектов-служб см. в статье [Что такое проверка подлинности?](https://docs.microsoft.com/azure/active-directory/develop/authentication-scenarios).


## <a name="next-steps"></a>Дополнительная информация

* Дополнительные сведения об аутентификации Azure AD и веб-пакете SDK Azure Maps см. в статье [Использование библиотеки Map Control в службе Azure Maps](https://docs.microsoft.com/azure/azure-maps/how-to-use-map-control).