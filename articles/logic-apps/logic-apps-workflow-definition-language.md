---
title: Сведенья о схеме языка определения рабочих процессов в Azure Logic Apps | Документация Майкрософт
description: Написание пользовательских определений рабочих процессов для Azure Logic Apps с помощью языка определения рабочих процессов
services: logic-apps
ms.service: logic-apps
author: ecfan
ms.author: estfan
manager: jeconnoc
ms.topic: reference
ms.date: 04/30/2018
ms.reviewer: klam, LADocs
ms.suite: integration
ms.openlocfilehash: d5dadd054f95e61626942a1cab7d95ba8c9182e1
ms.sourcegitcommit: 30c7f9994cf6fcdfb580616ea8d6d251364c0cd1
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/18/2018
ms.locfileid: "42146703"
---
# <a name="schema-reference-for-workflow-definition-language-in-azure-logic-apps"></a>Сведения о схеме языка определения рабочих процессов в Azure Logic Apps

Когда вы создаете рабочий процесс приложения логики с помощью [Azure Logic Apps](../logic-apps/logic-apps-overview.md), базовое определение вашего рабочего процесса описывает фактическую логику, выполняемую для этого приложения. Это описание следует структуре, которая определена и проверена с помощью схемы языка определения рабочих процессов, использующей формат [JSON (нотация объектов JavaScript)](https://www.json.org/). 
  
## <a name="workflow-definition-structure"></a>Структура определения рабочего процесса

Определение рабочего процесса имеет по крайней мере один триггер, который создает ваше приложение логики, а также одно или несколько действий, выполняемых вашим приложением. 

Ниже приведена высокоуровневая структура определения рабочего процесса.  
  
```json
"definition": {
  "$schema": "<workflow-definition-language-schema-version>",
  "contentVersion": "<workflow-definition-version-number>",
  "parameters": { "<workflow-parameter-definitions>" },
  "triggers": { "<workflow-trigger-definitions>" },
  "actions": { "<workflow-action-definitions>" },
  "outputs": { "<workflow-output-definitions>" }
}
```
  
| Элемент | Обязательно | ОПИСАНИЕ | 
|---------|----------|-------------| 
| Определение | Yes | Начальный элемент определения рабочего процесса. | 
| $schema | Только в случае использования внешней ссылки на определение рабочего процесса | Расположение файла схемы JSON, который описывает версию языка определения рабочих процессов: <p>`https://schema.management.azure.com/schemas/2016-06-01/Microsoft.Logic.json`</p> |   
| contentVersion | Нет  | Номер версии для вашего определения рабочего процесса (по умолчанию — 1.0.0.0). Чтобы помочь определить и подтвердить правильное определение при развертывании рабочего процесса, укажите значение для использования. | 
| parameters | Нет  | Определения для одного или нескольких параметров, которые передают данные в рабочий процесс <p><p>Максимальное количество параметров: 50. | 
| триггеры; | Нет  | Определения для одного или нескольких триггеров, которые создают рабочий процесс Вы можете определить более одного триггера, но только, используя язык определения рабочих процессов, а не визуально через конструктор логических приложений. <p><p>Максимальное количество триггеров: 10. | 
| actions | Нет  | Определения для одного или нескольких действий, которые будут запущены во время выполнения рабочего процесса. <p><p>Максимальное количество действий: 250. | 
| outputs | Нет  | Определения для выходных данных, которые возвращаются из рабочего процесса. <p><p>Максимальное количество типов выходных данных: 10. |  
|||| 

## <a name="parameters"></a>Параметры

В разделе `parameters` нужно определить все параметры рабочего процесса, для которых приложение логики принимает входные данные во время развертывания. Во время развертывания требуется объявить параметры и их значения. Прежде чем использовать эти параметры в других разделах рабочего процесса, объявите все параметры в этих разделах. 

Ниже приведена общая структура определения параметров:  

```json
"parameters": {
  "<parameter-name>": {
    "type": "<parameter-type>",
    "defaultValue": "<default-parameter-value>",
    "allowedValues": [ <array-with-permitted-parameter-values> ],
    "metadata": { 
      "key": { 
        "name": "<key-value>"
      } 
    }
  }
},
```

| Элемент | Обязательно | type | ОПИСАНИЕ |  
|---------|----------|------|-------------|  
| Тип | Yes | int, float, string, securestring, bool, массив, объект JSON, secureobject <p><p>**Примечание**. Для всех паролей, ключей и секретов используйте типы `securestring` и `secureobject`, потому что операция `GET` не возвращает эти типы. | Тип параметра. |
| defaultValue | Нет  | То же, что `type` | Значение параметра по умолчанию, если значение не задано при создании экземпляра рабочего процесса. | 
| allowedValues | Нет  | То же, что `type` | Массив со значениями, которые может принимать параметр. |  
| metadata | Нет  | Объект JSON | Любые другие параметры, например, имя или читаемое описание вашего приложения логики либо данные времени разработки, используемые Visual Studio или другими средствами. |  
||||

## <a name="triggers-and-actions"></a>Триггеры и действия  

В определении рабочего процесса разделы `triggers` и `actions` определяют вызовы, которые происходят во время выполнения рабочего процесса. Синтаксис и дополнительные сведения об этих разделах см. в статье [Triggers and actions for workflow definitions in Azure Logic Apps](../logic-apps/logic-apps-workflow-actions-triggers.md) (Триггеры и действия для определений рабочих процессов в Azure Logic Apps).
  
## <a name="outputs"></a>outputs 

В разделе `outputs` определите данные, которые ваш рабочий процесс может вернуть при завершении работы. Например, чтобы отслеживать определенное состояние или значение из каждого выполнения, укажите, что в возвращенных выходных данных рабочего процесса должны содержаться такие данные. 

> [!NOTE]
> При ответе на входящие запросы из REST API службы не используйте `outputs`. Вместо этого используйте тип действия `Response`. Дополнительные сведения см. в статье [Triggers and actions for workflow definitions in Azure Logic Apps](../logic-apps/logic-apps-workflow-actions-triggers.md) (Триггеры и действия для определений рабочих процессов в Azure Logic Apps).

Ниже приведена общая структура определения выходных данных. 

```json
"outputs": {
  "<key-name>": {  
    "type": "<key-type>",  
    "value": "<key-value>"  
  }
} 
```

| Элемент | Обязательно | type | ОПИСАНИЕ | 
|---------|----------|------|-------------| 
| <*key-name*> | Yes | Строка | Имя ключа для возвращаемого значения в выходных данных. |  
| Тип | Yes | int, float, string, securestring, bool, массив, объект JSON | Тип возвращаемого значения в выходных данных. | 
| value | Yes | То же, что `type` | Возвращаемое значение в выходных данных. |  
||||| 

Чтобы получить результат выполнения рабочего процесса, просмотрите журнал выполнения и подробности приложения логики на портале Azure или используйте [REST API рабочих процессов](https://docs.microsoft.com/rest/api/logic/workflows). Также можно передать выходные данные во внешние системы, например Power BI, для создания панели мониторинга. 

<a name="expressions"></a>

## <a name="expressions"></a>Выражения

При работе с JSON вы можете иметь литеральные значения, которые существуют во время разработки, например:

```json
"customerName": "Sophia Owen", 
"rainbowColors": ["red", "orange", "yellow", "green", "blue", "indigo", "violet"], 
"rainbowColorsCount": 7 
```

Вы также можете использовать значения, которые не существуют до начала времени выполнения. Чтобы представить эти значения, можно использовать *выражения*, которые вычисляются во время выполнения. Выражение представляет собой последовательность, которая может содержать одну или несколько [функций](#functions), [операторов](#operators), переменных, явных значений или констант. В определении рабочего процесса вы можете использовать выражение в любом месте в строчном значении JSON, указав его вместе с префиксом (\@). При вычислении выражения, представляющего значение JSON, тело выражения извлекается без символа \@ и всегда приводит к другому значению JSON. 

Например, вы можете получить значение для ранее определенного свойства `customerName`, используя функцию [parameters()](../logic-apps/workflow-definition-language-functions-reference.md#parameters) в выражении, и присвоить это значение свойству `accountName`:

```json
"customerName": "Sophia Owen", 
"accountName": "@parameters('customerName')"
```

*Интерполяция строк* также позволяет использовать несколько выражений внутри строк, которые начинаются символом \@ и заключены в фигурные скобки ({}). Ниже приведен синтаксис.

```json
@{ "<expression1>", "<expression2>" }
```

Результат всегда является строкой, что делает эту функцию аналогичной функции `concat()`, например: 

```json
"customerName": "First name: @{parameters('firstName')} Last name: @{parameters('lastName')}"
```

Если у вас есть строковый литерал, начинающийся с символа \@, добавьте перед символом \@ другой символ \@ в качестве escape-символа: \@\@.

В примерах ниже показано, как вычисляются выражения.

| Значение JSON | Результат |
|------------|--------| 
| "Sophia Owen" | Возвращаются символы: "Sophia Owen". |
| "array[1]" | Возвращаются символы: "array[1]". |
| "\@\@" | Эти символы возвращаются в виде строки с одним символом: "\@". |   
| " \@" | Эти символы возвращаются в виде строки с двумя символами: " \@". |
|||

Для этих примеров предположим, что вы определяете "myBirthMonth" равным "January", а "myAge" равным числу 42:  
  
```json
"myBirthMonth": "January",
"myAge": 42
```

В примерах ниже показано, как вычисляются выражения.

| Выражение JSON | Результат |
|-----------------|--------| 
| "\@parameters('myBirthMonth')" | Возвращается строка: "January". |  
| "\@{parameters('myBirthMonth')}" | Возвращается строка: "January". |  
| "\@parameters('myAge')" | Возвращается число: 42. |  
| "\@{parameters('myAge')}" | Возвращается число как строка: "42". |  
| "My age is \@{parameters('myAge')}" | Возвращается строка: "My age is 42". |  
| "\@concat('My age is ', string(parameters('myAge')))" | Возвращается строка: "My age is 42". |  
| "My age is \@\@{parameters('myAge')}" | Возвращается строка, содержащая выражение: "My age is \@{parameters('myAge')}". | 
||| 

При работе с визуальными элементами в конструкторе Logic Apps вы можете создавать выражения с помощью построителя выражений, например: 

![Конструктор Logic Apps > Построитель выражений](./media/logic-apps-workflow-definition-language/expression-builder.png)

Когда вы закончите, выражение появится для соответствующего свойства в определении рабочего процесса, например свойства `searchQuery`:

```json
"Search_tweets": {
  "inputs": {
    "host": {
      "connection": {
       "name": "@parameters('$connections')['twitter']['connectionId']"
      }
    }
  },
  "method": "get",
  "path": "/searchtweets",
  "queries": {
    "maxResults": 20,
    "searchQuery": "Azure @{concat('firstName','', 'LastName')}"
  }
},
```

<a name="operators"></a>

## <a name="operators"></a>Операторы

В [выражениях](#expressions) и [функциях](#functions) операторы выполняют определенные задачи, такие как ссылка на свойство или значение в массиве. 

| Оператор | Задача | 
|----------|------|
| ' | Чтобы использовать строковый литерал как входные данные или указать его в выражениях и функциях, поместите строку в одинарные кавычки, например `'<myString>'`. Не используйте двойные кавычки (""), так как они конфликтуют с форматированием JSON вокруг всего выражения. Например:  <p>**Правильно**: length('Hello'). </br>**Неправильно**: length("Hello"). <p>Когда вы передаете массивы или числа, их не нужно заключать в какие-либо символы. Например:  <p>**Правильно**: length([1, 2, 3]). </br>**Неправильно**: length("[1, 2, 3]"). | 
| [] | Чтобы указать ссылку на значение в определенной позиции (индексе) в массиве, используйте квадратные скобки. Например, чтобы получить второй элемент в массиве: <p>`myArray[1]` | 
| . | Для указания ссылки на свойство в объекте используйте оператор "точка". Например, чтобы получить свойство `name` объекта JSON `customer`: <p>`"@parameters('customer').name"` | 
| ? | Оператор "вопросительный знак" позволяет ссылаться на отсутствующие свойства объекта без ошибок времени выполнения. Например, следующее выражение можно использовать для обработки отсутствующих выходных данных триггера: <p>`@coalesce(trigger().outputs?.body?.<someProperty>, '<property-default-value>')` | 
||| 

<a name="functions"></a>

## <a name="functions"></a>Функции Azure

Некоторые выражения получают значения из действий среды выполнения, которые могут не существовать в начале выполнения приложения логики. Чтобы работать с этими значениями или ссылаться на них в выражениях, можно использовать [*функции*](../logic-apps/workflow-definition-language-functions-reference.md), предоставляемые языком определения рабочего процесса. 

## <a name="next-steps"></a>Дополнительная информация

* Дополнительные сведения о [действиях и триггерах языка определения рабочих процессов](../logic-apps/logic-apps-workflow-actions-triggers.md).
* Дополнительные сведения, о том как программным способом создавать приложения логики и управлять ими с помощью [REST API рабочих процессов](https://docs.microsoft.com/rest/api/logic/workflows).
