---
title: "Создание соглашения X12 в Azure Logic Apps | Документация Майкрософт"
description: "Информация о создании соглашения X12 для пакета интеграции Enterprise"
services: logic-apps
documentationcenter: .net,nodejs,java
author: padmavc
manager: anneta
editor: cgronlun
ms.assetid: 7422d2d5-b1c7-4a11-8c9b-0d8cfa463164
ms.service: logic-apps
ms.workload: integration
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/31/2017
ms.author: padmavc
translationtype: Human Translation
ms.sourcegitcommit: 1a982309fe771c0c244c691ae648bd5f4844a825
ms.openlocfilehash: f7b61b85cadfabde6637e46f0e65108a29901198


---
# <a name="enterprise-integration-with-x12"></a>Интеграция Enterprise с X12

## <a name="prereqs"></a>Предварительные требования
Прежде чем начать обмен сообщениями X12, необходимо создать соглашение X12 и сохранить его в учетной записи интеграции. Далее описывается процесс создания соглашения X12.

* В подписке Azure должна быть определена [учетная запись интеграции](../logic-apps/logic-apps-enterprise-integration-accounts.md).  
* По меньшей мере два [партнера](../logic-apps/logic-apps-enterprise-integration-partners.md), для бизнес-идентификаторов которых настроены квалификаторы EDI X12.   
* Требуемая [схема](../logic-apps/logic-apps-enterprise-integration-schemas.md), переданная в [учетную запись интеграции](../logic-apps/logic-apps-enterprise-integration-accounts.md).

## <a name="create-an-x12-agreement"></a>Создание соглашения X12
Войдите на [портал Azure](http://portal.azure.com "портал Azure")и сделайте следующее:  

1. Войдите на [портал Azure](http://portal.azure.com "портал Azure").
2. Выберите **Больше служб** и в поле фильтрации результатов поиска введите **интеграция**. В списке результатов выберите **Учетные записи интеграции**.    
![](./media/logic-apps-enterprise-integration-agreements/overview-1.png)    
3. Выберите учетную запись интеграции, в которую необходимо добавить сертификат.    
![](./media/logic-apps-enterprise-integration-overview/overview-3.png)   
4. Выберите плитку **Соглашения** . Если вы не видите эту плитку, добавьте соглашение.     
![](./media/logic-apps-enterprise-integration-agreements/agreement-1.png)   
5. В открывшейся колонке "Соглашения" щелкните **Добавить** .   
![](./media/logic-apps-enterprise-integration-agreements/agreement-2.png)     
6. В открывшейся колонке "Соглашения" введите **имя** соглашения в соответствующем поле, затем задайте значения параметров **Тип соглашения**, **Главный партнер**, **Главный идентификатор**, **Гостевой партнер**, **Гостевой идентификатор**.    
![](./media/logic-apps-enterprise-integration-x12/x12-1.png)  

| Свойство | Описание |
| --- | --- |
| Имя |Имя соглашения |
| Тип соглашения | Здесь должен быть указан тип X12 |
| "Host Partner" (Главный партнер) |Для соглашения нужно указать главного партнера и партнера-гостя. Главный партнер — это та организация, которая настраивает соглашение. |
| "Host Identity" (Идентификатор главного партнера) |Идентификатор главного партнера. |
| "Guest Partner" (Партнер-гость) |Для соглашения нужно указать главного партнера и партнера-гостя. Гостевой партнер представляет организацию, у которой есть деловые отношения с главным партнером. |
| Guest Identity |Идентификатор гостевого партнера |
| "Receive Settings" (Параметры получения) |Эти свойства применяются ко всем сообщениям, получаемым посредством соглашения. |
| "Send Settings" (Параметры отправки) |Эти свойства применяются ко всем сообщениям, отправляемым посредством соглашения. |  

> [!NOTE]
> Разрешение соглашения X12 определяется сопоставлением квалификаторов и идентификаторов отправителя и получателя, определенных в свойствах партнеров и входящем сообщении.  Если эти значения для одного из партнеров изменятся, измените также и соглашение.
> 
> 

## <a name="receive-settings"></a>"Receive Settings" (Параметры получения)

1. Выберите **Receive Settings** (Параметры получения), чтобы настроить обработку сообщений, получаемых посредством данного соглашения.  
2. Элемент управления "Receive Settings" (Параметры получения) состоит из приведенных ниже разделов, в том числе "Identifiers" (Идентификаторы), "Acknowledgment" (Подтверждение), "Schemas" (Схемы), "Envelopes" (Оболочка), "Control Numbers" (Контрольные номера), "Validations" (Проверки) и "Internal Settings" (Внутренние параметры). Настройте эти свойства в соответствии с вашим соглашением с партнером, с которым вы будете обмениваетесь сообщениями. Ниже приводятся представления этих элементов управления. Здесь вы можете настроить, как это соглашение будет идентифицировать и обрабатывать входящие сообщения.  

### <a name="identifiers"></a>"Identifiers" (Идентификаторы)

![](./media/logic-apps-enterprise-integration-x12/x12-2.png)  

| Свойство | Описание |
| --- | --- |
| ISA1 (Authorization Qualifier) (ISA1 (квалификатор авторизации)) |Выберите значение квалификатора авторизации из раскрывающегося списка. |
| ISA2 |необязательный параметр. Введите сведения об авторизации. Если указанное для ISA1 значение отличается от 00, то введите от одной до десяти букв или цифр. |
| ISA3 (Security Qualifier) (ISA3 (квалификатор безопасности)) |Выберите значение квалификатора безопасности из раскрывающегося списка. |
| ISA4 |необязательный параметр. Введите сведения о безопасности. Если указанное для ISA3 значение отличается от 00, то введите от одной до десяти букв или цифр. |

### <a name="acknowledgments"></a>Благодарности

![](./media/logic-apps-enterprise-integration-x12/x12-3.png) 

| Свойство | Описание |
| --- | --- |
| TA1 expected (Ожидается TA1) |Возвращает техническое подтверждение отправителю сообщения |
| FA expected (Ожидается функциональное подтверждение) |Возвращает функциональное подтверждение отправителю сообщения. Выберите подтверждения 997 или 999 в зависимости от версии используемой схемы. |
| Include AK2/IK2 Loop (Включить цикл AK2/IK2) |Разрешает создание циклов AK2 в функциональных подтверждениях для допустимых наборов транзакций |


### <a name="schemas"></a>Схемы
Выберите схему для каждого типа транзакции (ST1) и приложения отправителя (GS2). Конвейер получения будет разбирать входящие сообщения, сопоставляя значения ST1 и GS2 во входящем сообщении с заданными здесь значениями, а схему входящего сообщения — с указанной здесь схемой.

![](./media/logic-apps-enterprise-integration-x12/x12-33.png) 

| Свойство | Описание |
| --- | --- |
| Version (версия) |Выберите версию X12. |
| Transaction Type (ST01) (Тип транзакции (ST01)) |Выберите тип транзакции. |
| Sender Application (GS02) (Приложение отправителя (GS02)) |Выберите приложение отправителя. |
| Схема |Выберите файл схемы для использования. Схемы добавляются в учетную запись интеграции. |

> [!NOTE]
> Настройте требуемую [схему](../logic-apps/logic-apps-enterprise-integration-schemas.md), которая передается в [учетную запись интеграции](../logic-apps/logic-apps-enterprise-integration-accounts.md).
> 
> 

### <a name="envelopes"></a>Envelopes (Оболочка)

![](./media/logic-apps-enterprise-integration-x12/x12-34.png) 

| Свойство | Описание |
| --- | --- |
| ISA11 Usage (Использование ISA11) |Это поле используется для указания разделителя в наборе транзакций.</br></br>Выберите стандартный идентификатор, чтобы использовать десятичное представление "." вместо десятичного представления входящего документа в конвейере получения EDI.</br></br>Выберите разделитель повторений, чтобы указать разделитель для повторяющихся вхождений простых элементов данных или повторяемой структуры данных. Например, в качестве разделителя повторений обычно используется (^). Для схем HIPPA можно использовать только (^). |

### <a name="control-numbers"></a>Control Numbers (Контрольные номера)

![](./media/logic-apps-enterprise-integration-x12/x12-35.png) 

| Свойство | Описание |
| --- | --- |
| Disallow Interchange Control Number duplicates (Запретить повторяющиеся контрольные номера обмена) |Повторяющиеся операции обмена блоков. Сверяет контрольное число операции обмена (ISA13) с контрольными числами уже полученных операций. Если они совпадают, то конвейер получения не обрабатывает обмен. Вы можете указать длительность периода (в днях), за который выполняется проверка, задав значение параметра *Check for duplicate ISA13 every x days* (Проверять наличие повторов ISA13 за каждые X дней). |
| Disallow Group control number duplicates (Запретить повторяющиеся контрольные номера групп) |Запрещает операции обмена с повторяющимися контрольными номерами групп. |
| Disallow Transaction set control number duplicates (Запретить повторяющиеся контрольные номера наборов транзакций) |Запрещает операции обмена с повторяющимися контрольными номерами наборов транзакций. |

### <a name="validations"></a>Validations (Проверки)

![](./media/logic-apps-enterprise-integration-x12/x12-36.png) 

| Свойство | Описание |
| --- | --- |
| Message Type (Тип сообщения) |Типы сообщения EDI, например 850 (заказ на покупку) или 999 (подтверждение реализации). |
| EDI Validation (Проверка EDI) |Выполняет проверку EDI для типов данных в соответствии со свойствами EDI схемы, ограничениями длины, пустыми элементами данных и конечными разделителями. |
| Extended Validation (Расширенная проверка) |Если тип данных не EDI, то проверка проводится согласно требованиям к элементу данных и разрешены повторы, перечисления и контроль длины элементов данных (минимальная и максимальная длина). |
| Allow Leading/Trailing Zeroes (Разрешить начальные и конечные нули) |Сохраняются все дополнительные начальные или конечные пробелы либо знаки нуля. Они не удаляются. |
| Trailing Separator Policy (Политика конечных разделителей) |Создает конечные разделители в полученном обмене. Возможные значения: "NotAllowed" (Запрещено), "Optional" (Необязательно) и "Mandatory" (Обязательно). |

### <a name="internal-settings"></a>Internal Settings (Внутренние параметры)

![](./media/logic-apps-enterprise-integration-x12/x12-37.png) 

| Свойство | Описание |
| --- | --- |
| Convert implied decimal format Nn to base 10 numeric value (Преобразовать подразумеваемый десятичный формат Nn в числовое значение с основанием 10) |Преобразует число EDI, которое указано в формате Nn, в числовое значение с основанием&10;. |
| Create empty XML tags if trailing separators are allowed (Создать пустые теги XML, если конечные разделители разрешены) |Установите этот флажок, чтобы отправитель при обмене добавлял пустые теги XML для конечных разделителей. |
| Разделение документа Interchange на наборы транзакций — заблокировать наборы транзакций при ошибке|Указывает, что каждый набор транзакций в рамках операции обмена нужно анализировать в виде отдельного XML-документа, применяя к этому набору транзакций соответствующую оболочку. Приостанавливаются только те транзакции, для которых происходит сбой проверки. |
| Разделение документа Interchange на наборы транзакций — заблокировать документ Interchange при ошибке|Указывает, что каждый набор транзакций в рамках операции обмена нужно анализировать в виде отдельного XML-документа, применяя соответствующую оболочку. Если один или несколько наборов транзакций, входящих в обмен, не проходят проверку, обработка останавливается для всего обмена. | 
| Сохранение документа Interchange — заблокировать наборы транзакций при ошибке |Сохраняет операцию обмена неделимой, создавая XML-документ для всего пакетного обмена. Обработка будет прекращаться только для тех наборов транзакций, которые не прошли проверку, и продолжится для всех остальных наборов транзакций. |
| Сохранение документа Interchange — заблокировать операцию обмена при ошибке |Сохраняет операцию обмена неделимой, создавая XML-документ для всего пакетного обмена.  Если один или несколько наборов транзакций, входящих в обмен, не проходят проверку, обработка останавливается для всего обмена. |

Настроив параметры получения, нажмите кнопку **ОК**.  
   
Ваше соглашение готово к обработке входящих сообщений, которые соответствуют выбранной схеме.

## <a name="send-settings"></a>"Send Settings" (Параметры отправки)

1. Выберите **Настройки отправки** , чтобы настроить обработку сообщений, отправляемых при помощи данного соглашения.  

2. Элемент управления "Send Settings" (Параметры отправки) состоит из приведенных ниже разделов, в том числе "Identifiers" (Идентификаторы), "Acknowledgment" (Подтверждение), "Schemas" (Схемы), "Envelopes" (Оболочка), "Control Numbers" (Контрольные номера), "Character Sets and Separators" (Наборы символов и разделители) и "Validation" (Проверка).  Настройте эти свойства в соответствии с вашим соглашением с партнером, с которым вы будете обмениваетесь сообщениями. Ниже приведено представление этих элементов управления. Настройте их ч учетом того, как с помощью соглашения должны идентифицироваться и обрабатываться исходящие сообщения.


### <a name="identifiers"></a>"Identifiers" (Идентификаторы)

![](./media/logic-apps-enterprise-integration-x12/x12-4.png)  

| Свойство | Описание |
| --- | --- |
| Authorization qualifier (ISA1) (Квалификатор авторизации (ISA1)) |Выберите значение квалификатора авторизации из раскрывающегося списка. |
| ISA2 |Введите сведения об авторизации. Если значение отличается от 00, то введите от одной до десяти букв или цифр. |
| Security qualifier (ISA3) (Квалификатор авторизации (ISA3)) |Выберите значение квалификатора безопасности из раскрывающегося списка. |
| ISA4 |Введите сведения о безопасности. Если значение в текстовом поле "ISA4" отличается от 00, то введите от одной до десяти букв или цифр. |

### <a name="acknowledgment"></a>Acknowledgment (Подтверждение)

![](./media/logic-apps-enterprise-integration-x12/x12-5.png)  

| Свойство | Описание |
| --- | --- |
| TA1 expected (Ожидается TA1) |Установите этот флажок, чтобы возвращать техническое подтверждение (TA1) отправителю при обмене. Этот параметр указывает, что главный партнер, отправляющий сообщение, запрашивает подтверждение от гостевого партнера в соглашении. Эти подтверждения ожидаются главным партнером согласно параметрам получения в соглашении. |
| FA expected (Ожидается функциональное подтверждение) |Установите этот флажок, чтобы возвращать функциональное подтверждение (FA) отправителю при обмене. Затем согласно версиям схемы, с которыми вы работаете, укажите, требуются ли подтверждения 997 или 999. Эти подтверждения ожидаются главным партнером согласно параметрам получения в соглашении. |
| FA Version (Версия функционального подтверждения) |Выберите версию функционального подтверждения. |

### <a name="schemas"></a>Схемы

![](./media/logic-apps-enterprise-integration-x12/x12-5.png)  

| Свойство | Описание |
| --- | --- |
| Version (версия) |Выберите версию X12. |
| Transaction Type (ST01) (Тип транзакции (ST01)) |Выберите тип транзакции. |
| Схема |Выберите схему для использования. Схемы находятся в вашей учетной записи интеграции. Если вы сначала выберете схему, будут автоматически настроены версия и тип транзакции.  |

> [!NOTE]
> Настройте требуемую [схему](../logic-apps/logic-apps-enterprise-integration-schemas.md), которая передается в [учетную запись интеграции](../logic-apps/logic-apps-enterprise-integration-accounts.md).
> 
> 

### <a name="envelopes"></a>Envelopes (Оболочка)

![](./media/logic-apps-enterprise-integration-x12/x12-6.png) 

| Свойство | Описание |
| --- | --- |
| ISA11 Usage (Использование ISA11) |Это поле используется для указания разделителя в транзакции. |
| Стандартный идентификатор |Выберите стандартный идентификатор, чтобы использовать десятичное представление "." |
| Разделитель повторений |Выберите разделитель повторений, чтобы указать разделитель для повторяющихся вхождений простых элементов данных или повторяемой структуры данных. Например, в качестве разделителя повторений обычно используется (^). Для схем HIPPA можно использовать только (^). |

### <a name="control-numbers"></a>Control Numbers (Контрольные номера)

![](./media/logic-apps-enterprise-integration-x12/x12-8.png) 

| Свойство | Описание |
| --- | --- |
| Control Version Number (ISA12) (Контрольный номер версии (ISA12)) |Выберите версию стандартной X12 |
| Usage Indicator (ISA15) (Индикатор использования (ISA15)) |Выберите контекст обмена.  Значения содержат сведения, рабочие или тестовые данные. |
| SCHEMA (Схема) |Создает сегменты GS и ST для обмена в кодировке X12, которые отправляются в конвейер отправки. |
| GS1 |Необязательно. Выберите значение функционального кода в раскрывающемся списке. |
| GS2 |Необязательно. Приложение-отправитель. |
| GS3 |Необязательно. Приложение-получатель. |
| GS4 |Необязательно. Выберите формат CCYYMMDD или YYMMDD. |
| GS5 |Необязательно. Выберите формат HHMM, HHMMSS или HHMMSSdd. |
| GS7 |Необязательно. Выберите значение ответственного агентства из раскрывающегося списка. |
| GS8 |Необязательно. Версия документа. |
| Interchange Control Number (ISA13) (Контрольный номер обмена (ISA13)) |Обязательно. Введите диапазон значений для контрольного номера обмена. Введите числовое значение в диапазоне от 1 до 999 999 999. |
| Group Control Number (GS06) (Контрольный номер группы (GS06)) |Обязательно. Введите диапазон значений для контрольного номера группы. Введите числовое значение в диапазоне от 1 до 999 999 999. |
| Transaction Set Control Number (ST02) (Контрольный номер набора транзакций (ST02)) |Обязательно. Введите диапазон значений для контрольного номера набора транзакций. Задайте диапазон числовых значений в пределах от 1 до 999 999 999. |
| Prefix (Префикс) |Необязательно. Применяется к диапазону контрольных номеров наборов транзакций, используемых в подтверждении. Введите числовое значение в два поля посередине и буквы или цифры (при необходимости) в поля префикса и суффикса. Поля посередине являются обязательными и содержат минимальное и максимальное значения контрольного номера. |
| Суффикс |Необязательно. Применяется к диапазону контрольных номеров наборов транзакций, используемых в подтверждении. Введите числовое значение в два поля посередине и буквы или цифры (при необходимости) в поля префикса и суффикса. Поля посередине являются обязательными и содержат минимальное и максимальное значения контрольного номера. |

### <a name="character-sets-and-separators"></a>Character Sets and Separators (Наборы символов и разделители)

Отдельно от набора символов можно ввести отличающийся набор разделителей для каждого типа сообщений. Если для заданной схемы сообщений набор символов не указан, то используется набор символов по умолчанию.

![](./media/logic-apps-enterprise-integration-x12/x12-9.png) 


| Свойство | Описание |
| --- | --- |
| Character Set to be used (Используемый набор символов) |Выберите набор символов X12 для проверки свойств.  Возможные варианты: Basic (базовый), Extended (расширенный) или UTF8 |
| SCHEMA (Схема) |Выберите схему из раскрывающегося списка. Выберите разделители, которые будут использоваться для выбранной схемы |
| Тип входных данных |Выберите тип входных данных из раскрывающегося списка. |
| Разделитель элементов компонента |Введите один символ, который будет разделять составные элементы данных. |
| Разделитель элементов данных |Введите один символ, который будет разделять простые элементы данных в составных элементах данных. |
| Символ замены |Введите символ замены. При создании исходящего сообщения X12 все экземпляры знаков разделителей в полезных данных будут заменены указанным символом замены. |
| Признак конца сегмента |Введите один символ, который будет обозначать конец сегмента EDI. |
| Суффикс |Выберите символ, который будет использоваться с идентификатором сегмента. Если указывается суффикс, то элемент данных признака конца сегмента может быть пустым. Если признак конца сегмента оставить пустым, то необходимо будет указать суффикс. |

### <a name="validation"></a>Проверка

![](./media/logic-apps-enterprise-integration-x12/x12-10.png) 

| Свойство | Описание |
| --- | --- |
| Message Type (Тип сообщения) |Выберите из списка тип сообщения |
| EDI Validation (Проверка EDI) |Этот параметр позволяет включить проверку для получателя обмена. В ней выполняется проверка EDI для элементов данных набора транзакций, включая типы данных, ограничения длины, пустые элементы данных и конечные разделители. |
| Extended Validation (Расширенная проверка) |Этот параметр позволяет включить расширенную проверку обмена, получаемого от отправителя при обмене. В дополнение к проверке типов данных XSD она включает в себя проверку длины поля, необязательности и числа повторов. Можно включить расширенную проверку, не включая проверку EDI, и наоборот. |
| Allow Leading/Trailing Zeroes (Разрешить начальные и конечные нули) |Если выбрать этот параметр, то обмен EDI, полученный от какой-либо стороны, пройдет проверку, если элемент данных в обмене EDI не соответствует требованиям к длине из-за конечных пробелов, но соответствует этим требованиям после их удаления. |
| Trailing Separator (Конечный разделитель) |Если выбрать этот параметр, то обмен EDI, полученный от какой-либо стороны, пройдет проверку, если элемент данных в обмене EDI не соответствует требованиям к длине из-за начальных (или конечных) нулей или конечных пробелов, но соответствует этим требованиям после их удаления.</br></br>Выберите значение "Запрещено", если хотите запретить конечные разделители в обмене, получаемом от отправителя. Если обмен содержит конечные разделители, он будет объявлен недопустимым.</br></br>Выберите значение "Необязательно", чтобы принимать обмен с конечными разделителями или без них.</br></br>Выберите значение "Обязательно", если получаемый обмен должен содержать конечные разделители. |

Настроив параметры отправки, нажмите кнопку **ОК**.  Ваше соглашение готово к обработке исходящих сообщений, которые соответствуют выбранной схеме.

Щелкните "ОК", чтобы создать соглашение.

Выберите элемент **Соглашения** в колонке "Учетная запись интеграции", и вы увидите новое соглашение в списке.  
![](./media/logic-apps-enterprise-integration-x12/x12-7.png)   

## <a name="learn-more"></a>Подробнее
* [Обзор пакета интеграции Enterprise](../logic-apps/logic-apps-enterprise-integration-overview.md "Обзор пакета интеграции Enterprise")  




<!--HONumber=Feb17_HO1-->


