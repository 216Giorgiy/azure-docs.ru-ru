---
title: "Добавление условной логики и запуск рабочих процессов с помощью Azure Logic Apps | Документация Майкрософт"
description: "Узнайте, как управлять запуском рабочих процессов в Azure Logic Apps с помощью добавления условной логики, триггеров, действий и параметров."
author: stepsic-microsoft-com
manager: anneta
editor: 
services: logic-apps
documentationcenter: 
ms.assetid: e4e24de4-049a-4b3a-a14c-3bf3163287a8
ms.service: logic-apps
ms.workload: integration
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/28/2017
ms.author: LADocs; stepsic
ms.translationtype: Human Translation
ms.sourcegitcommit: 9f7d623ec213de6d46f59547aff9d4417ac95ede
ms.openlocfilehash: 41aafe94d24f0e22fe2256ab213c7668b670764c
ms.contentlocale: ru-ru
ms.lasthandoff: 02/15/2017


---
# <a name="use-logic-apps-features"></a>Использование функций приложений логики
В [предыдущем разделе](../logic-apps/logic-apps-create-a-logic-app.md)вы создали свое первое приложение логики. В этой статье показан полный процесс с использованием Azure Logic Apps. В этом разделе вводятся следующие новые понятия, используемые в Azure Logic Apps:

* Условная логика, которая выполняет действие только в том случае, если выполнено определенное условие.
* Представление кода для изменения существующего приложения логики.
* Варианты запуска рабочего процесса.

Перед выполнением этого раздела следует выполнить действия, описанные в разделе [Создание нового приложения логики](../logic-apps/logic-apps-create-a-logic-app.md). На [портале Azure]найдите свое приложение логики и щелкните элемент **Триггеры и действия** в сводке, чтобы изменить определение приложения логики.

## <a name="reference-material"></a>Справочные материалы
Возможно, вы найдете полезными следующие документы:

* [API REST управления и среды выполнения](https://msdn.microsoft.com/library/azure/mt643787.aspx) : содержит инструкции по вызову приложений логики напрямую.
* [Справочник по языку](https://msdn.microsoft.com/library/azure/mt643789.aspx) : полный список поддерживаемых функций и выражений.
* [Типы триггеров и действий](https://msdn.microsoft.com/library/azure/mt643939.aspx) : различные типы действий и входные данные, которые они принимают.
* [Обзор службы приложения](../app-service/app-service-value-prop-what-is.md) : рекомендации по выбору компонентов при создании решения.

## <a name="add-conditional-logic-to-your-logic-app"></a>Добавление условной логики в приложение логики

Хотя изначальный процесс приложения логики работает, некоторые области можно улучшить.

### <a name="conditional"></a>Условная логика

Создав первое приложение логики, вы можете получить множество сообщений электронной почты. Выполнив следующие действия, можно добавить условную логику, чтобы вы получали сообщение, только если у автора твита определенное количество подписчиков.

0. В конструкторе приложений логики выберите **Новый шаг** (+) > **Добавить действие**.
0.    Найдите и добавьте для Twitter действие **Получение пользователя**.
0. Найдите и добавьте значение поля **Tweeted by** (Автор твита) из триггера, чтобы получить сведения о пользователе Twitter.

    ![Get User](media/logic-apps-use-logic-app-features/getuser.png)

0. Выберите **Новый шаг** (+) > **Добавить условие**.
0. Чтобы отфильтровать количество подписчиков, которые есть у пользователей, в разделе **Имя объекта** выберите **Добавить динамическое содержимое**. 
0.    В поле поиска найдите и добавьте поле **Followers count** (Число подписчиков).
0. В поле **Связь** выберите **больше**.
0. В поле **Значение** введите нужное количество подписчиков у пользователей.

    ![Условная логика](media/logic-apps-use-logic-app-features/conditional.png)

0. Наконец, перетащите поле **Отправить сообщение** в поле **Если "да"**. 

Теперь вы будете получать сообщения электронной почты, только когда число последователей будет соответствовать условию.

## <a name="repeat-actions-over-a-list-with-foreach"></a>Повтор действия для каждого элемента списка с помощью forEach

Цикл forEach определяет массив, для каждого элемента которого должно быть выполнено действие. Если определенный объект не является массивом, цикл завершается сбоем. Например, если есть действие action1, которое выводит массив сообщений, и нужно отправить каждое сообщение, то можно включить оператор forEach в свойства действия: forEach: `forEach : "@action('action1').outputs.messages"`.

## <a name="edit-the-code-definition-for-a-logic-app"></a>Изменение определения кода в приложении логики

Помимо конструктора приложения логики, вы можете изменять непосредственно код, задающий приложение логики.

1. В панели команд выберите **Представление кода**.

    Откроется полный редактор, показывающий определение, которое вы только что изменили.

    ![Просмотр кода](media/logic-apps-use-logic-app-features/codeview.png)

    С помощью текстового редактора вы можете копировать и вставлять любое количество действий в том же приложении логики или в разных приложениях логики. 
    Вы также можете легко добавлять или удалять целые разделы в определении или совместно использовать определения с другими пользователями.

2. Чтобы сохранить изменения, нажмите кнопку **Сохранить**.

### <a name="parameters"></a>Параметры

Некоторые возможности Logic Apps (например, параметры) доступны только в представлении кода. Параметры облегчают многократное использование значений во всем приложении логики. Например, если вы хотите использовать один адрес электронной почты в нескольких действиях, можно задать его как параметр.

Параметры — это хороший способ извлечения значений, которые вы планируете часто изменять. Их особенно удобно использовать, когда вам нужно переопределять параметры в разных средах. Дополнительные сведения о переопределении параметров в зависимости от среды см. в [документации по REST API](https://docs.microsoft.com/rest/api/logic).

Далее приводится пример обновления существующего приложения логики, чтобы в нем использовались параметры для условия запроса.

1. В представлении кода найдите объект `parameters : {}` и вставьте в него следующий объект topic:

        "topic" : {
            "type" : "string",
            "defaultValue" : "MicrosoftAzure"
        }

2. Выберите действие `twitterconnector`, найдите значение запроса и замените его значением `#@{parameters('topic')}`. 

    Чтобы объединить несколько строк, можно использовать функцию `concat`. 
    Например `@concat('#',parameters('topic'))` действует так же, как описано выше.

3.    Когда все будет готово, нажмите **Сохранить**. 

    Теперь, вы будете каждый час получать новые твиты, имеющие более 5 ретвитов, которые будут отправляться в папку **tweets** в Dropbox.

Подробнее об определениях приложений логики: [Создание определений приложений логики](../logic-apps/logic-apps-author-definitions.md).

## <a name="start-logic-app-workflows"></a>Запуск рабочих процессов приложения логики

Существует несколько различных вариантов запуска рабочего процесса, заданного в приложении логики. Рабочий процесс всегда можно запустить по запросу на [портале Azure].

### <a name="recurrence-triggers"></a>Триггеры повторения

Триггер повторения запускается с заданным интервалом. Если в триггере предусмотрена условная логика, он проверяет, нужно ли запустить рабочий процесс. Триггер указывает, что рабочий процесс должен быть запущен, возвращая код состояния `200`. Если не требуется запускать рабочий процесс, триггер возвращает код состояния `202`.

### <a name="callback-using-rest-apis"></a>Обратный вызов с использованием REST API

Службы могут вызывать конечную точку приложения логики для запуска рабочего процесса. Чтобы запустить подобное приложение логики по требованию, нажмите кнопку **Запустить сейчас** на панели команд. Дополнительные сведения см. в статье [Приложения логики как вызываемые конечные точки](../logic-apps/logic-apps-http-endpoint.md). 

<!-- Shared links -->
[портале Azure]: https://portal.azure.com

