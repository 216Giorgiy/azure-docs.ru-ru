---
title: "Использование Функций Azure с приложениями логики | Документация Майкрософт"
description: "Узнайте, как использовать функции Azure с приложениями логики"
services: logic-apps,functions
documentationcenter: .net,nodejs,java
author: jeffhollan
manager: anneta
editor: 
ms.assetid: 9fab1050-cfbc-4a8b-b1b3-5531bee92856
ms.service: logic-apps
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: integration
ms.date: 10/18/2016
ms.author: jehollan
translationtype: Human Translation
ms.sourcegitcommit: dc8c9eac941f133bcb3a9807334075bfba15de46
ms.openlocfilehash: de073c5a5cda5b4b1caacd0163f785f6295f35ba


---
# <a name="using-azure-functions-with-logic-apps"></a>Использование функций Azure с приложениями логики
Настраиваемые фрагменты кода C# или Node.js можно выполнять с помощью функций Azure из приложения логики.  [Функции Azure](../azure-functions/functions-overview.md) позволяют производить в Microsoft Azure вычисления без использования серверов. Это полезно для выполнения следующих задач.

* Расширенные функции форматирования или вычисления полей в приложении логики
* Выполнение вычислений в рабочем процессе
* Расширение функциональных возможностей приложений логики с помощью функций, поддерживаемых в C# или Node.js.

## <a name="create-a-function-for-logic-apps"></a>Создание функции для приложения логики.
Мы рекомендуем создавать новые функции на портале функций Azure с помощью шаблонов **универсальный веб-перехватчик — узел** или **универсальный веб-перехватчик — C#**. Таким образом автоматически заполняется шаблон, который принимает `application/json` из приложения логики.  При выборе вкладки **Интегрировать** в функциях Azure для параметра **Режим** должно быть установлено значение **Веб-перехватчик** и **Тип webhook** **универсального JSON**.  Функции, которые используют эти шаблоны, обнаруживаются автоматически и включаются в список в разделе **Функции Azure в моем регионе**

Функции веб-перехватчика принимают запрос и передают его методу в виде переменной `data` . Для доступа к свойствам рабочей нагрузки можно использовать запись с точками типа `data.foo`.  Вот пример простой функции JavaScript, которая преобразует значение DateTime в строку даты:

```
function start(req, res){
    var data = req.body;
    res = {
        body: data.date.ToDateString();
    }
}
```

## <a name="call-azure-functions-from-a-logic-app"></a>Вызов функций Azure из приложения логики
В меню **действий** в конструкторе вы можете выбрать пункт **Функции Azure в моем регионе**.  Откроется список контейнеров в подписке, из которого вы сможете выбрать нужную функцию.  

После выбора функции вам будет предложено указать объект входных данных. Это сообщение, которое должно быть объектом в формате JSON и которое приложение логики передает функции. Например, если вы хотите передать **дату последнего изменения** из триггера Salesforce, полезные данные функции могут выглядеть примерно так:

![Дата последнего изменения][1]

## <a name="trigger-logic-apps-from-a-function"></a>Запуск приложения логики из функции
Приложение логики можно также запустить из самой функции.  Для этого создайте приложение логики с ручным запуском. Дополнительные сведения см. в статье [Приложения логики как вызываемые конечные точки](logic-apps-http-endpoint.md).  Затем в функции создайте HTTP-запрос POST к URL-адресу ручного запуска, включающий полезные данные, которые нужно отправить в приложение логики.

### <a name="create-a-function-from-the-designer"></a>Создание функции из конструктора
Функцию веб-перехватчика node.js можно также создать из конструктора. Для начала выберите раздел **Функции Azure в моем регионе** , а затем контейнер для своей функции.  Если у вас еще нет контейнера, его необходимо создать на [портале функций Azure](https://functions.azure.com/signin). Щелкните **Создать**.  

Чтобы создать шаблон на основе данных для вычисления, укажите объект контекста, который будет передан в функцию. Это должен быть объект JSON. Например, если передать содержимое файла из действия FTP, полезные данные контекста будут выглядеть так:

![Полезные данные контекста][2]

> [!NOTE]
> Поскольку для объекта не выполнялось приведение к строковому типу, содержимое будет добавлено непосредственно в полезные данные JSON. Но если содержимое не является маркером JSON (т. е. строкой, объектом или массивом JSON), возникнет ошибка. Чтобы преобразовать содержимое в строку, просто заключите его в кавычки, как показано на первом рисунке в этой статье.
> 
> 

Затем конструктор создаст шаблон функции, который позволит создавать встроенные функции. Переменные создаются заранее в зависимости от содержимого, которое вы планируете передать в функцию.

<!--Image references-->
[1]: ./media/logic-apps-azure-functions/callfunction.png
[2]: ./media/logic-apps-azure-functions/createfunction.png



<!--HONumber=Jan17_HO3-->


