---
title: "Использование оператора switch в Azure Logic Apps | Документация Майкрософт"
description: "Оператор switch в Logic Apps позволяет выполнять разные действия в зависимости от значения выражения."
services: logic-apps
documentationcenter: dev-center-name
manager: erikre
ms.service: logic-apps
ms.devlang: wdl
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 11/18/2016
ms.author: deli
translationtype: Human Translation
ms.sourcegitcommit: 3a028507f9bbf15c8fd52ccc7c22a5763a9b1b3e
ms.openlocfilehash: 284cfca17b5abf785f7af9569c518c4400fe36fd


---
# <a name="use-switch-statement-in-logic-apps"></a>Использование оператора switch в Logic Apps
При создании рабочего процесса часто требуется выполнять разные действия в зависимости от значения объекта или выражения. Например, поведение службы Logic Apps может быть разным при разных кодах состояния HTTP-запроса или выборе разных параметров в электронном письме с подтверждением.

Такие сценарии можно реализовать с помощью оператора switch. Встретив его, служба Logic Apps оценивает маркер или выражение, выбирает вариант с таким значением и выполняет указанные в нем действия. Проверяемое выражение должно совпадать только с одним вариантом.

 > [!TIP]
 > Как и в других языках программирования, оператор switch поддерживает только операторы равенства. Если вам нужны другие операторы сравнения (например, оператор greater than), используйте выражение условия.
 >
 > Чтобы выполнение было детерминированным, варианты должны содержать уникальные статические значения, а не динамические маркеры или выражения.

## <a name="prerequisites"></a>Предварительные требования

- Активная подписка Azure.
    - Если у вас еще нет активной подписки Azure, [создайте бесплатную учетную запись Azure](https://azure.microsoft.com/free/) или [попробуйте бесплатную версию Logic Apps](https://tryappservice.azure.com/).
- [Базовые сведения о Logic Apps](logic-apps-what-are-logic-apps.md).

## <a name="working-with-switch-statement-in-designer"></a>Работа с оператором switch в конструкторе
Чтобы изучить использование оператора switch, давайте создадим приложение логики, которое отслеживает файлы, переданные в Dropbox. Это приложение логики отправит сообщение электронной почты, определяя необходимость его передачи в SharePoint. С помощью оператора switch оно будет выполнять разные действия в зависимости от значения, которое выберет утверждающий.

1. Для начала создайте приложение логики и выберите триггер **Dropbox - When a file is created** (Dropbox — при создании файла).

 ![Использование триггера Dropbox — When a file is created (Dropbox — при создании файла)](./media/logic-apps-switch-case/dropbox-trigger.jpg)

2. Для триггера создайте действие **Outlook.com - Send approval email** (Outlook — отправка сообщения электронной почты для утверждения).

 > [!TIP]
 > Также Logic Apps поддерживает утверждение по электронной почте из учетной записи Outlook в Office 365.

 - Если у вас нет существующего подключения, вам будет предложено создать его.
 - Заполните обязательные поля. Электронная почта будет отправляться на адрес approvers@contoso.com.
 - В разделе *User Options* (Параметры пользователя) введите `Approve, Reject`.

 ![Настройка подключения](./media/logic-apps-switch-case/send-approval-email-action.jpg)

3. Добавьте оператор switch.
 - Выберите **+ New step** (+Новый шаг), **... More** (Дополнительно), **Add a switch statement** (Добавить оператор switch).
 - Теперь нужно выбрать, что будет выполняться в зависимости от значений `SelectedOptions` в действии *Send approval email* (Оправка сообщения электронной почты для утверждения), которое можно найти в селекторе **Add dynamic content** (Добавление динамического содержимого).
 - Вариант *Case 1* определяет действия на случай, если пользователь выбрал `Approve`.
    - Если поступит утверждение, исходный файл копируется в SharePoint Online с помощью действия **SharePoint Online - Create file** (SharePoint Online — создать файл).
    - Добавьте в этот вариант еще одно действие, которое уведомит пользователей о наличии нового файла на сайте SharePoint.
 - Добавьте другой вариант на случай, если пользователь выбрал `Reject`.
    - Если поступит отклонение, другим утверждающим отправляется уведомление по электронной почте о том, что файл отклоняется и никаких дальнейших действий не требуется.
 - Мы знаем, что `SelectedOptions` может иметь только одно из двух предложенных значений, поэтому вариант *default* (По умолчанию) можно оставить пустым.

 ![Оператор switch](./media/logic-apps-switch-case/switch.jpg)

 > [!NOTE]
 > В операторе switch должен быть создан по меньшей мере один вариант (Case), кроме варианта по умолчанию.

4. После выполнения оператора switch следует удалить исходный файл, загруженный в Dropbox, с помощью действия **Dropbox - Delete file** (Dropbox — удалить файл).

5. Сохраните приложение логики и проверьте его, передав файла в Dropbox. Вскоре вы получите сообщение электронной почты для утверждения. Выберите параметр и проверьте результат.
 > [!TIP]
 > Узнайте о возможностях [мониторинга приложений логики](logic-apps-monitor-your-logic-apps.md).

## <a name="understanding-code-behind"></a>Описание программного кода
Вы успешно создали приложение логики с оператором switch. Давайте подробнее рассмотрим его программный код.

```json
"Switch": {
    "type": "Switch",
    "expression": "@body('Send_approval_email')?['SelectedOption']",
    "cases": {
        "Case 1" : {
            "case" : "Approved",
            "actions" : {}
        },
        "Case 2" : {
            "case" : "Rejected",
            "actions" : {}
        }
    },
    "default": {
        "actions": {}
    },
    "runAfter": {
        "Send_approval_email": [
            "Succeeded"
        ]
    }
}
```

Здесь `"Switch"` — это имя конструкции с оператором switch, оно может быть любым. `"type": "Switch"` обозначает, что конструкция является оператором switch. `"expression"` указывает на вариант, выбранный пользователем, который сравнивается с указанными далее в определении вариантами значений. `"cases"` может содержать любое число вариантов. Если ни одно из этих значений не будет соответствовать значению выражения switch, выполняется действие в блоке `"default"`.

Число вариантов в блоке `"cases"` не ограничено. В каждом из них указывается имя варианта, например `"Case 1"`. Это может быть любое удобное для чтения имя. `"case"` является меткой значения case, с которым сравнивается выражение switch. Эти значения должны быть постоянными и уникальными.  

## <a name="next-steps"></a>Дальнейшие действия
- Изучите другие функции в статье [Использование функций приложений логики](logic-apps-use-logic-app-features.md).
- Узнайте, как [обрабатываются ошибки и исключения в Logic Apps](logic-apps-exception-handling.md).
- Ознакомьтесь с [возможностями рабочих процессов языка](logic-apps-author-definitions.md).
- [Оставьте комментарий](https://feedback.azure.com/forums/287593-logic-apps) с вопросом, отзывом или предложением по улучшению Logic Apps.


<!--HONumber=Feb17_HO2-->


