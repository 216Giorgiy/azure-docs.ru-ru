---
title: "Как создать соглашение AS2 для Пакета интеграции Enterprise | Документация Майкрософт"
description: "Как создать соглашение AS2 для Пакета интеграции Enterprise| Azure Logic Apps"
services: logic-apps
documentationcenter: .net,nodejs,java
author: msftman
manager: anneta
editor: 
ms.assetid: c9b7e1a9-4791-474c-855f-988bd7bf4b7f
ms.service: logic-apps
ms.workload: integration
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/29/2016
ms.author: deonhe
translationtype: Human Translation
ms.sourcegitcommit: 47a1c5653d84a55224c18222bc547e1c863ea442
ms.openlocfilehash: ea256557a38b3ce6cb457d195fa4b48cfd8879b8


---
# <a name="enterprise-integration-with-as2"></a>Интеграция Enterprise с AS2
## <a name="create-an-as2-agreement"></a>Создание соглашения AS2
Чтобы использовать корпоративные компоненты в приложениях логики, необходимо сначала создать соглашения. 

### <a name="heres-what-you-need-before-you-get-started"></a>Вот что понадобится для начала работы
* В подписке Azure должна быть определена [учетная запись интеграции](../logic-apps/logic-apps-enterprise-integration-accounts.md).  
* В учетной записи интеграции должны быть определены по крайней мере два [партнера](logic-apps-enterprise-integration-partners.md).  

> [!NOTE]
> При создании соглашения содержимое его файла должно соответствовать типу соглашения.    
> 
> 

После [создания учетной записи интеграции](../logic-apps/logic-apps-enterprise-integration-accounts.md) и [добавления партнеров](logic-apps-enterprise-integration-partners.md) можно создать соглашение, сделав следующее.  

### <a name="from-the-azure-portal-home-page"></a>На домашней странице портала Azure
Войдите на [портал Azure](http://portal.azure.com "портал Azure") и выполните следующие действия:  

1. Выберите **Больше служб** и в поле фильтра поиска введите **интеграции**. В списке результатов выберите **Учетные записи интеграции**.    
![](./media/logic-apps-enterprise-integration-agreements/overview-1.png)    
2. Выберите учетную запись интеграции, в которую необходимо добавить сертификат. 
![](./media/logic-apps-enterprise-integration-overview/overview-3.png)  
3. Выберите плитку **Соглашения** . Если вы не видите эту плитку, добавьте соглашение.   
![](./media/logic-apps-enterprise-integration-agreements/agreement-1.png)   
4. В открывшейся колонке "Соглашения" щелкните **Добавить** .  
![](./media/logic-apps-enterprise-integration-agreements/agreement-2.png)  
5. В колонке "Соглашения" введите **имя** соглашения в соответствующем поле, затем в поле **Тип соглашения** выберите **AS2**, и заполните поля **Главный партнер**, **Главный идентификатор**, **Гостевой партнер** и **Гостевой идентификатор**.  
![](./media/logic-apps-enterprise-integration-agreements/agreement-3.png)  

Ниже приведены некоторые сведения, которые могут оказаться полезными при настройке параметров соглашения. 

| Свойство | Описание |
| --- | --- |
| "Host Partner" (Главный партнер) |Для соглашения нужно указать главного партнера и партнера-гостя. Главный партнер представляет организацию, которая настраивает соглашение. |
| "Host Identity" (Идентификатор главного партнера) |Идентификатор главного партнера. |
| "Guest Partner" (Партнер-гость) |Для соглашения нужно указать главного партнера и партнера-гостя. Партнер-гость представляет организацию, которая имеет деловые отношения с главным партнером. |
| Guest Identity |Идентификатор партнера-гостя. |
| "Receive Settings" (Параметры получения) |Эти свойства применяются ко всем сообщениям, получаемым посредством соглашения. |
| "Send Settings" (Параметры отправки) |Эти свойства применяются ко всем сообщениям, отправляемым посредством соглашения. |

Итак, продолжим.  

1. Выберите **Receive Settings** (Параметры получения), чтобы настроить обработку сообщений, получаемых посредством данного соглашения.  
   
   * При необходимости можно переопределить свойства во входящем сообщении. Чтобы сделать это, установите флажок **Переопределить свойства сообщения**.
   * Установите флажок **Сообщение должно быть подписано**, чтобы требовать наличие подписи во всех входящих сообщениях. Если этот флажок установлен, то также необходимо выбрать *общий сертификат гостевого партнера*, который будет использоваться для проверки подписи сообщений.
   * Установите флажок **Сообщение должно быть зашифровано**, чтобы требовать шифрование всех входящих сообщениях.  Если этот флажок установлен, то также необходимо выбрать *закрытый сертификат главного партнера*, который будет использоваться для расшифровки входящих сообщений.
   * Можно также потребовать, чтобы сообщения были сжаты. Чтобы сделать это, установите флажок **Сообщение должно быть сжато**.    
   * Установите флажок **Отправить MDN**, чтобы отправлять синхронные MDN для полученных сообщений.
   * Установите флажок **Отправить подписанное MDN**, чтобы отправлять подписанные MDN для полученных сообщений.
   * Установите флажок **Отправить асинхронное MDN**, чтобы отправлять асинхронные MDN для полученных сообщений.     
    ![](./media/logic-apps-enterprise-integration-agreements/agreement-4.png)  

Если вы хотите узнать больше о том, какие параметры получения следует включить, ознакомьтесь со следующей таблицей.  

| Свойство | Описание |
| --- | --- |
| Override message properties |Установите этот флажок, чтобы указать, что свойства в полученных сообщениях могут быть переопределены. |
| Message should be signed |Установите этот флажок, чтобы требовать наличие цифровой подписи в сообщениях.  Настройте общий сертификат гостевого партнера для проверки подписи.  |
| Message should be encrypted |Установите этот флажок, чтобы требовать шифрование сообщений. Незашифрованные сообщения будут отклонены. Настройте закрытый сертификат главного партнера для расшифровки сообщений.  |
| Message should be compressed |Установите этот флажок, чтобы требовать сжатие сообщений. Несжатые сообщения будут отклонены. |
| "MDN Text" (Текст MDN) |Это уведомление MDN по умолчанию, отправляемое отправителю сообщения. |
| "Send MDN" (Отправлять MDN) |Включите этот параметр, чтобы отправлять уведомления MDN. |
| "Send signed MDN" (Отправлять MDN с подписью) |Включите этот параметр, чтобы требовать отправки MDN с подписью. |
| "MIC Algorithm" (Алгоритм контроля целостности учетных данных) | |
| "Send asynchronous MDN" (Отправлять асинхронные MDN) |Включите этот параметр, чтобы требовать асинхронную отправку сообщений. |
| URL-адрес |Это URL-адрес, на который будут отправляться MDN. |

Давайте продолжим.  

1. Выберите **Настройки отправки** , чтобы настроить обработку сообщений, отправляемых при помощи данного соглашения.  

   * Установите флажок **Включить подпись сообщений**, чтобы отправлять партнеру подписанные сообщения. Если этот флажок установлен, то также необходимо выбрать *алгоритм MIC закрытого сертификата главного партнера* и *закрытый сертификат главного партнера*, чтобы подписывать сообщения.
   * Установите флажок **Включить шифрование сообщений**, чтобы отправлять партнеру зашифрованные сообщения. Если этот флажок установлен, то также необходимо выбрать *алгоритм общего сертификата гостевого партнера* и *общий сертификат гостевого партнера*, чтобы шифровать сообщения.
   * Установите флажок **Сообщение должно быть сжато**, чтобы сжимать сообщения. 
   * Установите флажок **Раскрыть заголовки HTTP**, чтобы разворачивать заголовки HTTP Content-Type в одну строку. 
   * Установите флажок **Запросить MDN**, чтобы получать синхронные MDN для отправленных сообщений.
   * Установите флажок **Запросить подписанное MDN**, чтобы получать подписанные MDN для отправленных сообщений.
   * Установите флажок **Запросить асинхронное MDN**, чтобы получать асинхронные MDN для отправленных сообщений. Если выбран этот параметр, то необходимо указать URL-адрес, на который будут отправляться MDN.  
   * Установите флажок **Включить NRR**, чтобы включить неотрекаемость от получения.    
   ![](./media/logic-apps-enterprise-integration-agreements/agreement-5.png)  

Если вы хотите узнать больше о том, какие параметры отправки следует включить, ознакомьтесь со следующей таблицей.  

| Свойство | Описание |
| --- | --- |
| "Enable message signing" (Включить подписание сообщений) |Установите этот флажок, чтобы включить подписание всех сообщений, отправляемых посредством соглашения. |
| "MIC Algorithm" (Алгоритм контроля целостности учетных данных) |Выберите алгоритм, используемый для подписания сообщений. Настройте алгоритм MIC закрытого сертификата главного партнера, используемый для подписания сообщений. |
| Сертификат |Выберите сертификат, используемый для подписания сообщений. Настройте закрытый сертификат главного партнера, используемый для подписания сообщений. |
| "Enable message encryption" (Включить шифрование сообщений) |Установите этот флажок для шифрования всех сообщений, отправляемых посредством данного соглашения. Настройте алгоритм общего сертификата гостевого партнера, используемый для шифрования сообщений. |
| "Encryption Algorithm" (Алгоритм шифрования) |Выберите алгоритм шифрования, используемый для шифрования сообщений. Настройте общий сертификат гостевого партнера для шифрования сообщений. |
| "Unfold HTTP headers" (Развернуть заголовки HTTP) |Установите этот флажок для разворачивания заголовков HTTP Content-Type в одну строку. |
| "Request MDN" (Запрашивать MDN) |Установите этот флажок, чтобы запрашивать уведомления MDN для всех сообщений, отправляемых посредством данного соглашения. |
| "Request signed MDN" (Запрашивать подписанные MDN) |Включите этот параметр, чтобы требовать наличие подписи у всех уведомлений MDN, отправляемых в это соглашение. |
| "Request asynchronous MDN" (Запрашивать асинхронные MDN) |Включите этот параметр, чтобы запрашивать отправку асинхронных уведомлений MDN в данное соглашение. |
| URL-адрес |URL-адрес, по которому будут отправляться уведомления MDN. |
| "Enable NRR" (Включить NRR) |Установите этот флажок, чтобы включить неотрекаемость от получения. |

Выберите элемент **Соглашения** в колонке "Учетная запись интеграции", и вы увидите новое соглашение в списке.  
![](./media/logic-apps-enterprise-integration-agreements/agreement-6.png)

## <a name="next-steps"></a>Дальнейшие действия
* [Обзор пакета интеграции Enterprise](logic-apps-enterprise-integration-overview.md "Обзор пакета интеграции Enterprise")  


<!--HONumber=Jan17_HO4-->


