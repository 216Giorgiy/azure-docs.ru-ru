<properties title="Azure Machine Learning Sample: Network intrusion detection" pageTitle="Пример машинного обучения: обнаружение сетевого вторжения | Azure" description="Пример эксперимента с Машинным обучением Azure, использующего модель классификации, чтобы определить, какие действия в сети относятся к вторжению в сеть." metaKeywords="" services="machine-learning" solutions="" documentationCenter="" authors="garye" manager="paulettm" editor="cgronlun"  videoId="" scriptId="" />

<tags ms.service="machine-learning" ms.workload="data-services" ms.tgt_pltfrm="na" ms.devlang="na" ms.topic="article" ms.date="10/23/2014" ms.author="garye" />



# Пример машинного обучения Azure: обнаружение сетевого вторжения

>[AZURE.NOTE]
>[Пример эксперимента] и [образец набора данных], связанные с этой моделью, доступны в ML Studio. См. дополнительные сведения ниже.
[Пример эксперимента]: #sample-experiment
[Образец набора данных]: #sample-dataset


## Описание проблемы ##

В демонстрационном примере используются различные сетевые функции для обнаружения сетевых операций, являющихся частью вторжения/атаки. Эта проблема двоичной классификации не является слишком трудной, так как функции являются хорошо прогнозируемыми по классу, а классы равномерно сбалансированы.  Поскольку несколько функций являются частью метки, важно удалить все части метки до обучения классификатора. 

## Данные ##

1. Данные (из программы состязания KDD Cup 1999) включают в себя обучающие и тестовые наборы данных.  Уровни точности классификации в наборе данных для обучения являются исторически более высокими, чем набор данных для тестирования, так как в тестовую выборку введены новые сетевые вторжения.  Набор данных для обучения имеет приблизительно 126 000 строк и 43 столбца, включая метки.  Так как три столбца являются частью информации о метке, для обучения модели имеется 40 столбцов.  Эти 40 столбцов в основном являются числовыми с несколькими строковыми/категориальными функциями. Тестовые данные содержат около 22 500 тестовых примеров (с теми же 43 столбцами для обучающих данных). 
1. Данные были загружены в общедоступный BLOB-объект для удобного доступа. AzureML содержит модули чтения для считывания данных из различных хранилищ, например BLOB-объектов, с помощью нескольких щелчков мыши (никакой код создавать не нужно). 

## Модель ##

1. Первый шаг в модели должен представлять собой создание условия для данных для классификации в будущем.  Столбец "Класс" содержит метки для прогнозирования.  Эти метки либо являются "нормальными" (вторжение отсутствует), либо содержат имя атаки.  Для некоторых атак в обучающих данных нет большого количества примеров, а в наборе тестовых данных есть новые атаки, поэтому мы преобразуем эти многоклассовые метки в двоичные метки класса для моделирования проблемы.  Studio содержит встроенный модуль, который позволяет упростить этот шаг предварительной обработки. Модуль индикаторных значений используется для преобразования в двоичную форму меток классов, а затем модуль столбцов проекта используется для выбора этого столбца метки класса в двоичном виде (исключая исходный столбец метки класса).  
1. В рамках разработки этого эксперимента благодаря выбору/корреляции функций мы видим, что многие функции сильно коррелируют с меткой. Это является распространенной ситуацией в синтетических наборах данных.  Облачная система ML обеспечивает такую визуализацию несколькими щелчками мыши. Выберите параметр визуализации на выходе модуля проекта, щелкните заголовок любой функции, чтобы активировать визуализатор, а затем выберите метку класса в раскрывающемся списке.
1. Так как с меткой сильно коррелирует небольшое количество функций, мы будет тестировать комбинации линейных и нелинейных классификаторов с выбором функции и без него, чтобы определить наилучшую модель.  Такое сравнение выполняется с помощью модуля анализа модели.    

## Результаты ##

1. Нелинейный классификатор (увеличивающееся дерево решений) работает чуть лучше, чем линейный классификатор (логистическая регрессия): 

![][1]


Теперь мы хотим провести сравнение с увеличивающимся деревом решений с выбором функции. Характеристики классификации примерно похожи, но увеличивающееся дерево решений на всех функциях работает немного лучше и будет использоваться для рабочего процесса выставления оценок.  Следует отметить, что такой AUC с высокой классификацией является типичным для этого набора данных. 


![][2]

<!-- Removed until this part is fixed
## Operationalization ##


We wanted to see our model in action, to do this we wanted a request-response service around the model we just learned. Doing this is straightforward and can be achieved in few simple clicks in studio: 

1. First step is to save the learned model (by right clicking on the classifier module output) 
1. Now create a new experiment and search for saved model and drop it in the panel for new experiment 
1. Then we need to replicate the steps we did for pre-process, again we can just select the modules from experiment we need and copy and paste to the new experiment 
1. The last step is to plug in the test data and run the experiment, once the run is finished we can define the input and output points for the service 
1. Again, using one click we can publish the service end points that is deployed right away and can be tested using a friendly user interface - all within studio   
-->


## Пример эксперимента

Следующий пример эксперимента, связанный с этой моделью, доступен в ML Studio в разделе **ЭКСПЕРИМЕНТЫ** на вкладке **ПРИМЕРЫ**.

> **Пример эксперимента - Обнаружение сетевого вторжения - Разработка**


## Образец набора данных

Следующий образец набора данных, используемый для этого эксперимента, доступен в ML Studio в палитре модулей в разделе **Сохраненные наборы данных**.

###network_intrusion_detection.csv
[AZURE.INCLUDE [machine-learning-sample-dataset-network-intrusion](../includes/machine-learning-sample-dataset-network-intrusion.md)]




[1]: ./media/machine-learning-sample-network-intrusion-detection/network-intrusion-detection-1.png
[2]: ./media/machine-learning-sample-network-intrusion-detection/network-intrusion-detection-2.png
