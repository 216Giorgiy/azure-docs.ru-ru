<properties 
	pageTitle="Концентраторы уведомлений Azure" 
	description="Узнайте, как использовать push-уведомления в Azure. Примеры кода написаны на C# с использованием API .NET." 
	authors="wesmc7777" 
	manager="dwrede" 
	editor="" 
	services="notification-hubs" 
	documentationCenter=""/>

<tags 
	ms.service="notification-hubs" 
	ms.workload="mobile" 
	ms.tgt_pltfrm="" 
	ms.devlang="multiple" 
	ms.topic="article" 
	ms.date="02/24/2015" 
	ms.author="wesmc"/>


#Концентраторы уведомлений Azure

##Обзор

Поддержка push-уведомлений в Azure позволяет получить доступ к простой в использовании, многоплатформенной и масштабируемой инфраструктуре для отправки push-уведомлений, которая значительно упрощает реализацию push-уведомлений как для индивидуальных пользователей, так и для корпоративных приложений для мобильных платформ.

##Что такое push-уведомления

Смартфоны и планшетные компьютеры имеют возможность "уведомлять" пользователей о наступлении определенных событий. В приложениях для Магазина Windows может появляться _всплывающее уведомление_, то есть отображается немодальное окно со звуком для обозначения нового push-уведомления. На устройствах iOS Apple получение push-уведомления приводит к отображению диалогового окна, запрашивающего у пользователя просмотр или закрытие уведомления. Щелкнув **Вид**, можно открыть приложение, которое получает сообщение.

Push-уведомлений помогают мобильным устройствам отображать новую информацию и при этом экономить энергию. Push-уведомления являются жизненно важным компонентом приложений для потребителей, где они служат для увеличения степени вовлеченности и использования таких приложений. Уведомления также полезны для предприятий, когда обновленная информация увеличивает скорость реагирования сотрудника на бизнес-события. 

Ниже приведены некоторые конкретные примеры сценариев использования push-уведомлений в мобильных приложениях:

1.  Обновление плитки на Windows 8 и Windows Phone с текущей финансовой информацией.
2.  Оповещение пользователя о рабочем задании с помощью всплывающего уведомления в корпоративном приложении на основе рабочего процесса.
3.  Отображение значка с количеством текущих потенциальных продаж в приложении CRM (например, Microsoft Dynamics CRM).

##Как работают push-уведомления

Push-уведомления доставляются через зависящую от платформы инфраструктуру PNS (Platform Notification System). PNS предоставляют только одни функции (то есть без поддержки вещания, персонализации) и не имеют общего интерфейса. Например, для отправки уведомления в приложение Магазина Windows разработчик должен обратиться в WNS (службу уведомлений Windows) для отправки уведомления на устройство iOS и тот же разработчик должен обратиться в APNS (службу push-уведомлений Apple) и отправить сообщение еще раз.

На высоком уровне, однако, все системы уведомления платформ выполняют одну и ту же процедуру:

1.  Клиентское приложение обращается к PNS для извлечения _дескриптора_. Тип дескриптора зависит от системы. Для WNS это URI или "канал уведомлений". Для APNS это маркер.
2.  Клиентское приложение сохраняет дескриптор на серверной части приложения, чтобы использовать позже. Для WNS серверной частью обычно является облачная служба. Для Apple эта система называется _поставщиком_.
3.  Для отправки push-уведомления серверная часть приложения обращается к PNS, используя дескриптор, чтобы указать определенный экземпляр клиентского приложения.
4.  PNS перенаправляет уведомление на устройство, указанное дескриптором.

![][0]

##Трудности в работе с push-уведомлениями

Хотя эти системы являются очень мощным средством, разработчикам приложений по-прежнему требуется прилагать много усилий для реализации даже распространенных сценариев использования push-уведомлений, например вещания или отправки push-уведомлений пользователю.

Push-уведомления - одна из самых часто запрашиваемых возможностей облачных служб для мобильных приложений. Это объясняется тем, что инфраструктура, необходимая для их работы, довольно сложная и обычно не связана с основной бизнес-логикой приложения. Ниже приведены некоторые из задач, стоящих перед разработчиком при создании инфраструктуры для push-уведомлений по требованию.

- **Зависимость от платформы.** Для отправки уведомлений на устройства на разных платформах в серверной части необходимо закодировать несколько интерфейсов. Различается не только информация низкого уровня, но также и представление уведомления (плитка, всплывающее уведомление или эмблема), которое зависит от платформы. Эти отличия приводят к сложному и трудно поддерживаемому серверному коду.

- **Масштабирование.** Масштабирование этой инфраструктуры имеет два аспекта:
1. По инструкции PNS маркеры устройства необходимо обновлять каждый раз, когда запускается приложение. Это приводит к большому объему трафика (и последовательным обращениям к базе данных) только для обновления маркеров устройств. Когда возрастает количество устройств (возможно, до миллионов), затраты на создание и поддержку такой инфраструктуры уже нельзя игнорировать.
2.  Большинство PNS не поддерживают вещание на несколько устройств. Следовательно, вещание на миллионы устройств приведет к миллионам вызовов систем PNS. Иметь возможность масштабировать эти запросы является нетривиальной задачей, так как обычно разработчики приложений хотят сократить общую задержку (например, устройство, получающее сообщение последним, не должно получать уведомление через 30 минут после его отправки, поскольку во многих случаях это сделает push-уведомления неэффективными).
- **Маршрутизация.** Системы PNS обеспечивают способ отправки сообщения на устройство. Однако в большинстве приложений уведомления направляются пользователям и/или группам интересов (например, всем сотрудникам, связанным с определенной учетной записью клиента). Таким образом, чтобы направить уведомления на нужные устройства, серверная часть приложения должна поддерживать реестр, который связывает группы интересов с маркерами устройств. Это увеличивает время выхода приложения на рынок и затраты на его обслуживание.

##Зачем использовать центры уведомлений

Концентраторы уведомлений предоставляют готовую инфраструктуру для push-уведомлений, которая поддерживает следующие возможности.

- **Несколько платформ.** Центры уведомлений предоставляют общий интерфейс для отправки уведомлений на все поддерживаемые платформы. Серверная часть приложения может отправлять уведомления в форматах, которые используются для конкретной платформы или вообще не зависят от платформы. Центры уведомлений могут отправлять push-уведомления приложениям для Магазина Windows, iOS, Android и Windows Phone.
- **Маршрутизация Pub/Sub.** Каждое устройство, отправляя свой дескриптор в центр уведомлений, может задать один или несколько _тегов_. Дополнительную информацию о тегах см. в следующем разделе. Заранее подготавливать или размещать теги не требуется. Они предоставляют простой способ для отправки уведомлений пользователям или группам интересов. Так как в тегах может содержаться любой зависящий от приложения идентификатор (например, идентификатор пользователя или группы), их использование освобождает приложение от необходимости хранить дескрипторы устройств и управлять ими.
- **Масштабирование.** Центры уведомлений поддерживают масштабирование на миллионы устройств без необходимости повторного проектирования или переделки архитектуры.

Концентраторы уведомлений используют полную многоплатформенную масштабируемую инфраструктуру для push-уведомлений и значительно сокращают количество необходимого для push-уведомлений кода, выполняющегося в серверной части приложения. Концентраторы уведомлений реализуют все функции инфраструктуры для push-уведомлений. Устройства отвечают только за регистрацию своих дескрипторов PNS, а серверная часть отвечает за отправку пользователям и заинтересованным группам сообщений, которые не зависят от платформы.

![][1]

##Дальнейшие действия

Дополнительные сведения о концентраторах уведомлений можно найти в следующих статьях:

+ **[Как центры уведомлений используются клиентами]**

+ **[Учебники и руководства по работе с концентраторами уведомлений]** 

+ **Учебники по началу работы с центрами уведомлений** ([iOS], [Android], [Windows Universal], [Windows Phone], [Kindle], [Xamarin.iOS], [Xamarin.Android])

Соответствующие управляемые API-ссылки .NET на push-уведомления приведены ниже.

+ [Microsoft.WindowsAzure.Messaging.NotificationHub]
+ [Microsoft.ServiceBus.Notifications] 


  [0]: ./media/notification-hubs-overview/SBPushNotifications1.gif
  [1]: ./media/notification-hubs-overview/SBPushNotifications2.gif
  [Как центры уведомлений используются клиентами]: http://azure.microsoft.com/services/notification-hubs
  [Учебники и руководства по работе с концентраторами уведомлений]: http://azure.microsoft.com/documentation/services/notification-hubs
  [iOS]: http://azure.microsoft.com/documentation/articles/notification-hubs-ios-get-started
  [Android]: http://azure.microsoft.com/documentation/articles/notification-hubs-android-get-started
  [Универсальное приложение Windows]: http://azure.microsoft.com/documentation/articles/notification-hubs-windows-store-dotnet-get-started
  [Windows Phone]: http://azure.microsoft.com/documentation/articles/notification-hubs-windows-phone-get-started
  [Kindle]: http://azure.microsoft.com/documentation/articles/notification-hubs-kindle-get-started
  [Xamarin.iOS]: http://azure.microsoft.com/documentation/articles/partner-xamarin-notification-hubs-ios-get-started
  [Xamarin.Android]: http://azure.microsoft.com/documentation/articles/partner-xamarin-notification-hubs-android-get-started
  [Microsoft.WindowsAzure.Messaging.NotificationHub]: http://msdn.microsoft.com/library/microsoft.windowsazure.messaging.notificationhub.aspx
  [Microsoft.ServiceBus.Notifications]: http://msdn.microsoft.com/library/microsoft.servicebus.notifications.aspx
  

<!--HONumber=49--> 