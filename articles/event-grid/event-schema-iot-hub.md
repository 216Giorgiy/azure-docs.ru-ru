---
title: "Схема службы \"Сетка событий Azure\" для Центра Интернета вещей | Документация Майкрософт"
description: "Страница со справочными сведениями о формате схемы событий и свойствах Центра Интернета вещей"
services: iot-hub
documentationcenter: 
author: kgremban
manager: timlt
editor: 
ms.service: event-grid
ms.topic: article
ms.date: 01/30/2018
ms.author: kgremban
ms.openlocfilehash: 29ad1233a344c3085286c27cb925b2dc9fb41f7e
ms.sourcegitcommit: 9d317dabf4a5cca13308c50a10349af0e72e1b7e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/01/2018
---
# <a name="azure-event-grid-event-schema-for-iot-hub"></a>Схема событий службы "Сетка событий Azure" для Центра Интернета вещей

В этой статье описаны свойства и схема для событий Центра Интернета вещей Azure. Общие сведения о схемах событий см. в статье [Схема событий службы "Сетка событий Azure"](event-schema.md). 

## <a name="available-event-types"></a>Доступные типы событий

Центр Интернета вещей выдает следующие типы событий:

| Тип события | ОПИСАНИЕ |
| ---------- | ----------- |
| Microsoft.Devices.DeviceCreated | Публикуется при регистрации устройства в Центре Интернета вещей. |
| Microsoft.Devices.DeviceDeleted | Публикуется при удалении устройства из Центра Интернета вещей. | 

## <a name="example-event"></a>Пример события

Структура схемы для событий DeviceCreated и DeviceDeleted идентична. Этот пример демонстрирует схему события, возникающего при регистрации устройства в Центре Интернета вещей:

```json
[{
  "id": "56afc886-767b-d359-d59e-0da7877166b2",
  "topic": "/SUBSCRIPTIONS/<subscription ID>/RESOURCEGROUPS/<resource group name>/PROVIDERS/MICROSOFT.DEVICES/IOTHUBS/<hub name>",
  "subject": "devices/LogicAppTestDevice",
  "eventType": "Microsoft.Devices.DeviceCreated",
  "eventTime": "2018-01-02T19:17:44.4383997Z",
  "data": {
    "twin": {
      "deviceId": "LogicAppTestDevice",
      "etag": "AAAAAAAAAAE=",
      "status": "enabled",
      "statusUpdateTime": "0001-01-01T00:00:00",
      "connectionState": "Disconnected",
      "lastActivityTime": "0001-01-01T00:00:00",
      "cloudToDeviceMessageCount": 0,
      "authenticationType": "sas",
      "x509Thumbprint": {
        "primaryThumbprint": null,
        "secondaryThumbprint": null
      },
      "version": 2,
      "properties": {
        "desired": {
          "$metadata": {
            "$lastUpdated": "2018-01-02T19:17:44.4383997Z"
          },
          "$version": 1
        },
        "reported": {
          "$metadata": {
            "$lastUpdated": "2018-01-02T19:17:44.4383997Z"
          },
          "$version": 1
        }
      }
    },
    "hubName": "egtesthub1",
    "deviceId": "LogicAppTestDevice",
    "operationTimestamp": "2018-01-02T19:17:44.4383997Z",
    "opType": "DeviceCreated"
  },
  "dataVersion": "",
  "metadataVersion": "1"
}]
```

### <a name="event-properties"></a>Свойства события

Все события содержат одинаковые данные верхнего уровня: 

| Свойство | type | ОПИСАНИЕ |
| -------- | ---- | ----------- |
| id | строка | Уникальный идентификатор события. |
| Раздел | строка | Полный путь к ресурсу для источника событий. Это поле защищено от записи. Это значение предоставляет служба "Сетка событий". |
| subject | строка | Определенный издателем путь к субъекту событий. |
| eventType | строка | Один из зарегистрированных типов событий для этого источника событий. |
| eventTime | строка | Время создания события с учетом времени поставщика в формате UTC. |
| data | object | Данные событий в Центре Интернета вещей.  |
| dataVersion | строка | Версия схемы для объекта данных. Версию схемы определяет издатель. |
| metadataVersion | строка | Версия схемы для метаданных события. Служба "Сетка событий" определяет схему свойств верхнего уровня. Это значение предоставляет служба "Сетка событий". |

Для всех издателей событий используется различное содержимое объекта данных. Для событий Центра Интернета вещей объект данных содержит следующие свойства:

| Свойство | type | ОПИСАНИЕ |
| -------- | ---- | ----------- |
| hubName | строка | Имя Центра Интернета вещей, в котором было создано или из которого было удалено устройство. |
| deviceId | строка | Уникальный идентификатор устройства. Это строка с учетом регистра длиной до 128 знаков, состоящая из букв и цифр в 7-битном формате ASCII, а также следующие специальные символы: `- : . + % _ # * ? ! ( ) , = @ ; $ '`. |
| operationTimestamp | строка | Метка времени операции в формате ISO8601. |
| opType | строка | Тип события, определенный для этой операции Центром Интернета вещей: `DeviceCreated` или `DeviceDeleted`.
| twin | object | Сведения о двойнике устройства, которые представляют собой метаданные устройства для приложения в облаке. | 
| deviceID | строка | Уникальный идентификатор двойника устройства. | 
| etag | строка | Фрагмент сведений с описанием содержимого двойника устройства. Для каждого двойника устройства обеспечена уникальность каждого тега etag. | 
| status | строка | Состояние двойника устройства: включен или отключен. | 
| statusUpdateTime | строка | Метка времени последнего обновления состояния для двойника устройства в формате ISO8601. |
| connectionState | строка | Состояние подключения двойника устройства: подключен или не подключен. | 
| lastActivityTime | строка | Метка времени последнего действия в формате ISO8601. | 
| cloudToDeviceMessageCount | целое число | Число сообщений, отправленных из облака на это устройство. | 
| authenticationType | строка | Тип аутентификации, используемый для этого устройства: `SAS`, `SelfSigned` или `CertificateAuthority`. |
| x509Thumbprint | строка | Отпечаток — это уникальное значение для сертификата x509, которое обычно используется для поиска определенного сертификата в хранилище сертификатов. Отпечаток динамически создается с помощью алгоритма SHA1 и физически не существует в сертификате. | 
| primaryThumbprint | строка | Первичный отпечаток для сертификата x509. |
| secondaryThumbprint | строка | Вторичный отпечаток для сертификата x509. | 
| версия | целое число | Целое число, которое увеличивается на единицу при каждом обновлении двойника устройства. |
| desired | object | Часть свойств, которые могут быть записаны только серверной частью приложения и считаны устройством. | 
| reported | object | Часть свойств, которые могут быть записаны только устройством и считаны серверной частью приложения. |
| lastUpdated | строка | Метка времени последнего обновления свойств для двойника устройства в формате ISO8601. | 

## <a name="next-steps"></a>Дополнительная информация

* См. общие сведения о [службе "Сетка событий Azure"](overview.md).
* Дополнительные сведения о совместной работе Центра Интернета вещей и службы "Сетка событий" см. в статье о [реагировании на события Центра Интернета вещей с использованием службы "Сетка событий" для активации действий](../iot-hub/iot-hub-event-grid.md).