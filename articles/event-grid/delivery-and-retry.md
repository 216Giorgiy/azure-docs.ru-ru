---
title: Доставка и повторные попытки доставки сетки событий Azure
description: В статье описывается, как сетка событий Azure передает события и обрабатывает недоставленные сообщения.
services: event-grid
author: tfitzmac
ms.service: event-grid
ms.topic: conceptual
ms.date: 08/08/2018
ms.author: tomfitz
ms.openlocfilehash: b34386a7b416d6f7d8b008a9cb5ef142948a370f
ms.sourcegitcommit: d0ea925701e72755d0b62a903d4334a3980f2149
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/09/2018
ms.locfileid: "40005401"
---
# <a name="event-grid-message-delivery-and-retry"></a>Доставка и повторные попытки доставки сообщений сетки событий 

В этой статье описывается, как Сетка событий Azure обрабатывает события, когда доставка не подтверждена.

Сетка событий обеспечивает надежную доставку. Она обеспечивает доставку каждого сообщения по крайней мере один раз для каждой подписки. Отправка событий для зарегистрированных веб-перехватчиков каждой подписки осуществляется мгновенно. Если веб-перехватчик не подтверждает получения события в течение 60 секунд с момента первой попытки доставки, сетка событий предпринимает повторную попытку доставить событие. 

Сейчас служба "Сетка событий Azure" отправляет каждое событие непосредственно подписчикам. Каждый подписчик получает массив с одним событием.

## <a name="message-delivery-status"></a>Состояние доставки сообщения

Сетка событий использует коды ответов HTTP для подтверждения получения событий. 

### <a name="success-codes"></a>Коды успешной доставки

Следующие коды ответов HTTP указывают, что событие было успешно доставлено в веб-перехватчик. В этом случае сетка события считает доставку выполненной.

- 200 ОК
- 202 — принято

### <a name="failure-codes"></a>Коды сбоя доставки

Следующие коды ответов HTTP указывают на то, что попытка доставить событие завершилась сбоем. 

- 400 — недопустимый запрос
- 401 — недостаточно прав
- 404 — не найдено
- 408 — истекло время ожидания запроса
- 414 — слишком длинный универсальный код ресурса (URI)
- 429 — слишком много запросов
- 500 — Внутренняя ошибка сервера
- 503 — Служба недоступна
- 504 — Истекло время ожидания шлюза

Если служба "Сетка событий" получит ошибку, которая указывает, что конечная точка временно недоступна или запрос в будущем может быть выполнен успешно, служба попытается снова отправить событие. Если [настроена конечная точка недоставленных сообщений](manage-event-delivery.md) и служба "Сетка событий" получает ошибку, которая указывает, что событие никогда не будет доставлено, служба отправляет событие в конечную точку недоставленных сообщений. 

## <a name="retry-intervals-and-duration"></a>Длительность и интервалы повторов

Для доставки событий сетка событий использует политику экспоненциального увеличения задержки повтора. Если веб-перехватчик не отвечает или возвращает код сбоя, служба "Сетка событий" предпринимает повторные попытки доставки по следующему расписанию:

1. 10 с
2. 30 секунд
3. 1 минута
4. 5 мин
5. 10 минут
6. 30 минут
7. 1 час

Сетка событий добавляет небольшой случайный выбор во все интервалы повторных попыток. Через 1 час доставка событий повторяется один раз в час.

По умолчанию служба "Сетка событий" завершает срок действия всех событий, которые не были доставлены в течение 24 часов. [Политику повтора можно настроить](manage-event-delivery.md) во время создания подписки на события. Укажите максимальное число попыток доставки (по умолчанию — 30) и срок жизни события (по умолчанию — 1440 минут).

## <a name="dead-letter-events"></a>События недоставленных сообщений

Когда службе "Сетка событий Azure" не удается доставить событие, она может отправлять его в учетною запись хранилища. Этот процесс называется перемещение в очередь недоставленных сообщений. Чтобы просмотреть недоставленные события, извлеките их из расположения недоставленных сообщений. Дополнительные сведения см. [здесь](manage-event-delivery.md).

## <a name="next-steps"></a>Дополнительная информация

* Сведения о том, как просмотреть состояние доставки событий, см. в статье [Мониторинг доставки сообщений Сетки событий](monitor-event-delivery.md).
* Сведения о настройке параметров доставки событий, см. в статье [Управление параметрами доставки службы "Сетка событий Azure"](manage-event-delivery.md).
* Общие сведения о службе "Сетка событий" см. в разделе [Общие сведения о службе "Сетка событий Azure"](overview.md).
* Сведения о том, как быстро приступить к использованию службы "Сетка событий", см. в разделе [Создание и перенаправление пользовательского события со службой "Сетка событий Azure"](custom-event-quickstart.md).