---
title: "Доставка и повторные попытки доставки сетки событий Azure"
description: "В статье описывается, как сетка событий Azure передает события и обрабатывает недоставленные сообщения."
services: event-grid
author: djrosanova
manager: timlt
ms.service: event-grid
ms.topic: article
ms.date: 01/05/2018
ms.author: darosa
ms.openlocfilehash: 4eacb37d6e19b4b69d604aa84fd404479dead1ea
ms.sourcegitcommit: 1d423a8954731b0f318240f2fa0262934ff04bd9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/05/2018
---
# <a name="event-grid-message-delivery-and-retry"></a>Доставка и повторные попытки доставки сообщений сетки событий 

В этой статье описывается, как сетка событий Azure обрабатывает события, когда доставка не подтверждена.

Сетка событий обеспечивает надежную доставку. Она обеспечивает доставку каждого сообщения по крайней мере один раз для каждой подписки. Отправка событий для зарегистрированных веб-перехватчиков каждой подписки осуществляется мгновенно. Если веб-перехватчик не подтверждает получения события в течение 60 секунд с момента первой попытки доставки, сетка событий предпринимает повторную попытку доставить событие.

## <a name="message-delivery-status"></a>Состояние доставки сообщения

Сетка событий использует коды ответов HTTP для подтверждения получения событий. 

### <a name="success-codes"></a>Коды успешной доставки

Следующие коды ответов HTTP указывают, что событие было успешно доставлено в веб-перехватчик. В этом случае сетка события считает доставку выполненной.

- 200 ОК
- 202 — принято

### <a name="failure-codes"></a>Коды сбоя доставки

Следующие коды ответов HTTP указывают на то, что попытка доставить событие завершилась сбоем. Сетка событий повторно предпринимает попытку отправить событие. 

- 400 — недопустимый запрос
- 401 — недостаточно прав
- 404 — не найдено
- 408 — истекло время ожидания запроса
- 414 — слишком длинный универсальный код ресурса (URI)
- 500 — Внутренняя ошибка сервера
- 503 — Служба недоступна
- 504 — Истекло время ожидания шлюза

Любой другой код ответа или его отсутствие указывают на сбой. Сетка событий повторно предпринимает попытку доставки. 

## <a name="retry-intervals"></a>Интервалы повтора

Для доставки событий сетка событий использует политику экспоненциального увеличения задержки повтора. Если веб-перехватчик не отвечает или возвращает код сбоя, сетка событий предпринимает повторные попытки доставки по следующему расписанию.

1. 10 с
2. 30 секунд
3. 1 минута
4. 5 мин
5. 10 минут
6. 30 минут
7. 1 час

Сетка событий добавляет небольшой случайный выбор во все интервалы повторных попыток.

## <a name="retry-duration"></a>Длительность повтора

В предварительной версии сетка событий Azure завершает срок действия любых событий, которые не были доставлены в течение двух часов.

## <a name="monitoring"></a>Мониторинг

Портал можно использовать для просмотра состояния доставки событий.

Чтобы просмотреть метрики для подписки на события, поиск **подписки на события** в доступных служб и выберите его.

![Поиск подписки на события](./media/delivery-and-retry/select-event-subscriptions.png)

Фильтрация по типу события, подписки и расположения. Выберите **метрики** для подписки для просмотра.

![Фильтр подписки на события](./media/delivery-and-retry/filter-events.png)

Просмотр метрик для событий статьи и подписки.

![Представление событий метрики](./media/delivery-and-retry/subscription-metrics.png)

При публикации пользовательский раздел можно просмотреть метрики для него. Выберите группу ресурсов, содержащую раздел и выберите раздел.

![Выберите пользовательский раздел](./media/delivery-and-retry/select-custom-topic.png)

Просмотр метрик для раздела пользовательского события.

![Представление событий метрики](./media/delivery-and-retry/custom-topic-metrics.png)

## <a name="next-steps"></a>Дальнейшие действия

* Общие сведения о службе "Сетка событий" см. в разделе [Общие сведения о службе "Сетка событий Azure"](overview.md).
* Сведения о том, как быстро приступить к использованию службы "Сетка событий", см. в разделе [Создание и перенаправление пользовательского события со службой "Сетка событий Azure"](custom-event-quickstart.md).