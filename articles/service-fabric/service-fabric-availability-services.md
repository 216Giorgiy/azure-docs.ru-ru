---
title: "Доступность служб Service Fabric | Документация Майкрософт"
description: "Описание процессов обнаружения сбоев, отработки отказа, восстановления для служб"
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: 279ba4a4-f2ef-4e4e-b164-daefd10582e4
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/18/2017
ms.author: masnider
ms.translationtype: HT
ms.sourcegitcommit: 847eb792064bd0ee7d50163f35cd2e0368324203
ms.openlocfilehash: b0d4615a9b8ab566f69b27e4879b6e2d597b4990
ms.contentlocale: ru-ru
ms.lasthandoff: 08/19/2017

---

# <a name="availability-of-service-fabric-services"></a>Доступность служб структуры служб
В этой статье представлен обзор способа, который используется в Service Fabric для поддержания доступности службы.

## <a name="availability-of-service-fabric-stateless-services"></a>Доступность служб без отслеживания состояния в структуре служб
Службы Azure Service Fabric могут предусматривать или не предусматривать отслеживание состояния. Служба без отслеживания состояния — это служба приложения, не имеющая [локального состояния](service-fabric-concepts-state.md), которая не должна быть высокодоступной или надежной.

При создании службы без отслеживания состояния требуется определить `InstanceCount`. Число экземпляров определяет количество экземпляров логики приложения службы без отслеживания состояния, которые нужно запустить в кластере. Увеличение количества экземпляров — это рекомендованный способ развертывания службы без отслеживания состояния.

При сбое экземпляра именованной службы без отслеживания состояния создается новый экземпляр на каком-либо подходящем узле в кластере. Например, экземпляр службы без отслеживания состояния может завершиться с ошибкой на узле Node1 и быть создан заново на узле Node5.

## <a name="availability-of-service-fabric-stateful-services"></a>Доступность служб с отслеживанием состояния в структуре служб
Служба с отслеживанием состояния обладает определенным состоянием, которое с ней связано. В структуре служб служба с отслеживанием состояния моделируется в виде набора реплик. Каждая реплика — это выполняемый экземпляр кода службы, в котором имеется копия состояния этой службы. Операции чтения и записи выполняются в одной реплике (которая называется первичной). Изменения состояния, вызванные операциями записи, *реплицируются* на другие реплики в наборе (которые называются активными вторичными репликами) и применяются. 

Первичная реплика может быть только одна. Активных вторичных реплик может быть несколько. Количество активных вторичных реплик можно настроить. Большее количество вторичных реплик позволяет обрабатывать большее количество программных и аппаратных сбоев.

В случае сбоя первичной реплики Service Fabric передает функции первичной реплики одной из активных вторичных реплик. Активная вторичная реплика уже имеет обновленную версию состояния (через *репликацию*) и может продолжить дальнейшую обработку операций чтения и записи.

Такое представление о том, что реплика может быть первичной или активной вторичной, известно как роль реплики.

### <a name="replica-roles"></a>Роли реплик
Роль реплики используется для управления жизненным циклом состояния, управляемого этой репликой. Реплика, роль которой определена как первичная, обслуживает запросы на чтение. Первичная реплика также обслуживает запросы на запись путем обновления своего состояния и репликации изменений. Эти изменения применяются к активным вторичным репликам в наборе реплик. Активная вторичная реплика отвечает за получение изменений состояния, реплицируемых первичной репликой, а также за обновление представления о собственном состоянии.

> [!NOTE]
> Модели программирования более высокого уровня, такие как [Reliable Actors](service-fabric-reliable-actors-introduction.md) и [Reliable Services](service-fabric-reliable-services-introduction.md), скрывают представление о роли реплики от разработчика. В модели Reliable Actors понятие роли не требуется, а в Reliable Services оно во многом упрощено для большинства сценариев.
>

## <a name="next-steps"></a>Дальнейшие действия
Дополнительные сведения о понятиях Service Fabric см. в следующих статьях:

- [Масштабирование служб Service Fabric](service-fabric-concepts-scalability.md)
- [Разделение служб Service Fabric](service-fabric-concepts-partitioning.md)
- [Определение состояния и управление им](service-fabric-concepts-state.md)
- [Надежные службы](service-fabric-reliable-services-introduction.md)

