<properties
   pageTitle="Доступность служб структуры служб"
   description="Описание процессов обнаружения сбоев, отработки отказа, восстановления для служб"
   services="service-fabric"
   documentationCenter=".net"
   authors="appi101"
   manager="timlt"
   editor=""/>

<tags
   ms.service="service-fabric"
   ms.devlang="dotnet"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="NA"
   ms.date="04/13/2015"
   ms.author="aprameyr"/>

# Доступность служб структуры служб
Службы структуры служб могут располагать отслеживанием состояния или нет. Настоящая статья предоставляет обзор способа, который используется в структуре служб для поддержания доступности службы в случае сбоев.

## Доступность служб без отслеживания состояния в структуре служб
Служба без отслеживания состояния — это служба приложения, которая не имеет [локального постоянного состояния](service-fabric-concepts-state.md).

Создание службы без отслеживания состояний требует задания определенного количества экземпляров службы без отслеживания состояния, которая должна быть запущена в кластере. Имеется несколько копий логики приложения, которые будут реализованы в кластере. Увеличение количества экземпляров — это рекомендованный способ масштабирования службы без отслеживания состояния.

При обнаружении ошибки в любом из экземпляров службы без отслеживания состояния будет создана новая служба на каком-либо другом подходящем узле кластера.

## Доступность служб с отслеживанием состояния в структуре служб
Служба с отслеживанием состояния обладает определенным состоянием, которое с ней связано. В структуре служб служба с отслеживанием состояния моделируется в виде набора реплик. Каждая реплика является экземпляром кода службы, в которой имеется копия состояния. Операции чтения и записи выполняются в одной реплике (которая называется первичной). Изменения в состоянии, вызванные операциями записи, *реплицируются* на множество других реплик (которые называются активными вторичными репликами). Это сочетание первичной и активных вторичных реплик представляет собой набор реплик службы.

Может существовать только одна первичная реплика, которая обслуживает запросы на чтение и запись. Активных вторичных реплик может быть несколько. Количество активных вторичных реплик является настраиваемым, и большее количество вторичных реплик позволяет обрабатывать большее количество программных и аппаратных сбоев.

В случае сбоя (при котором первичная реплика перестает работать) структура службы передает функции первичной реплики одной из активных вторичных реплик. Активная вторичная реплика уже имеет обновленную версию состояния (через *репликацию*) и может продолжить дальнейшую обработку операций чтения и записи.

Такое представление о том, что реплика может быть первичной или активной вторичной, известно как роль реплики.

### Роли реплик
Роль реплики используется для управления жизненным циклом состояния, управляемого этой репликой. Реплика, роль которой определена как первичная, обслуживает запросы на чтение. Она также обслуживает запросы на запись путем обновления своего состояния и репликации изменений на активные вторичные реплики в своем наборе реплик. Активная вторичная реплика отвечает за получение изменений состояния, реплицируемых первичной репликой, а также за обновление представления о собственном состоянии.

>[AZURE.NOTE]Модели программирования более высокого уровня, такие как [среда Reliable Actors](service-fabric-reliable-actors-introduction.md), абстрагируют представление о роли реплики от разработчика.

## Дальнейшие действия

Сведения о понятиях, принятых для структуры служб, см. в следующих статьях:

- [Масштабируемость служб структуры служб](service-fabric-concepts-scalability.md)

- [Разделение служб структуры служб](service-fabric-concepts-partitioning.md)

- [Определение состояния и управление им](service-fabric-concepts-state.md)
 

<!---HONumber=July15_HO2-->