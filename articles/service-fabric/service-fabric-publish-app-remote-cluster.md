<properties
    pageTitle="Публикация приложения в удаленный кластер с VS | Microsoft Azure"
    description="Узнайте о действиях, необходимых для публикации приложения в удаленный кластер Service Fabric с помощью Visual Studio."
    services="service-fabric"
    documentationCenter="na"
    authors="cawa"
    manager="timlt"
    editor="" />

<tags
    ms.service="multiple"
    ms.devlang="dotnet"
    ms.topic="article"
    ms.tgt_pltfrm="na"
    ms.workload="multiple"
    ms.date="10/28/2015"
    ms.author="cawa" />

# Публикация приложения на удаленный кластер с помощью Visual Studio

Инструменты Service Fabric Visual Studio предоставляют простой, воспроизводимый и реализуемый с помощью сценария способ публикации приложения в кластер Service Fabric. Для этого используется сценарий развертывания PowerShell с профилями публикации. Профили публикации представляют собой файлы форматирования XML, содержащие основные сведения о публикации. Также добавлено диалоговое окно **Публикация приложения Service Fabric**. С его помощью пользователи могут легко опубликовать приложение на локальном или удаленном кластере. Любые изменения параметров, выполненные в диалоговом окне "Публикация", фиксируются в профилях публикации. Это позволяет вручную изменить параметры публикации позже в процессе автоматизации.

## Артефакты, необходимые для публикации приложения в кластере Service Fabric

### Deploy-FabricApplication.ps1

Это скрипт PowerShell, который использует путь к профилю публикации в качестве параметра для публикации приложений Service Fabric.

### Профили публикации

Каталог **PublishProfiles** в проекте приложения Service Fabric содержит файлы **Cloud.XML** и **Local.XML**. Это "профили публикации", которые содержат важную информацию для публикации приложения, такую как: параметры подключения к кластеру Service Fabric; путь к файлу параметров приложения; параметры обновления.

### Файлы параметров приложений

Каталог **ApplicationParameters** в проекте приложения Service Fabric содержит файлы XML с определяемыми пользователем значениями параметров манифеста приложения. Файлы манифеста приложения могут быть параметризованы, так что можно использовать различные значения для параметров развертывания.

Например, можно изменить количество секций для соответствия различным средам для каждого развертывания. При создании проекта параметры в манифесте приложения, такие как **TargetReplicaSetSize** и **PartitionCount**, преобразуются в параметры. Значение по умолчанию для этих параметров указывается в разделе **Параметры** файла манифеста приложения (ApplicationManifest.XML, расположенный в проекте приложения Service Fabric). Любые значения, добавленные в файле параметров приложения, переопределяют значения по умолчанию в файле манифеста приложения.

>[AZURE.NOTE]Для служб субъекта для генерации параметров в файле манифеста необходимо сначала собрать проект.

Ниже приведен пример манифеста приложения.

```xml
<?xml version="1.0" encoding="utf-8"?>
<ApplicationManifest xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" ApplicationTypeName="Application2Type" ApplicationTypeVersion="1.0.0" xmlns="http://schemas.microsoft.com/2011/01/fabric">
   <Parameters>
      <Parameter Name="Actor1ActorService_PartitionCount" DefaultValue="10" />
      <Parameter Name="Actor1ActorService_MinReplicaSetSize" DefaultValue="2" />
      <Parameter Name="Actor1ActorService_TargetReplicaSetSize" DefaultValue="3" />
   </Parameters>
   <ServiceManifestImport>
      <ServiceManifestRef ServiceManifestName="Actor1Pkg" ServiceManifestVersion="1.0.0" />
      <ConfigOverrides />
   </ServiceManifestImport>
   <DefaultServices>
      <Service Name="Actor1ActorService">
         <StatefulService ServiceTypeName="Actor1ActorServiceType" TargetReplicaSetSize="[Actor1ActorService_TargetReplicaSetSize]" MinReplicaSetSize="[Actor1ActorService_MinReplicaSetSize]">
            <UniformInt64Partition PartitionCount="[Actor1ActorService_PartitionCount]" LowKey="-9223372036854775808" HighKey="9223372036854775807" />
         </StatefulService>
      </Service>
   </DefaultServices>
</ApplicationManifest>
```

## Публикация приложения в кластер Service Fabric с помощью диалогового окна "Публикация приложения Service Fabric"

Следующие шаги показывают, как опубликовать приложение с помощью диалогового окна **Публикация приложения Service Fabric**, предоставляемого инструментами Service Fabric Visual Studio.

1. В контекстном меню проекта приложения Service Fabric выберите **Опубликовать...**. Откроется диалоговое окно **Публикация приложения Service Fabric**.

    ![][0]

    В файле, выбранном в раскрывающемся списке **Целевой профиль**, сохраняются все параметры за исключением параметра **Версии манифеста**. Можно повторно использовать существующий профиль или создать новый, выбрав **< Управление профилями... >** в раскрывающемся списке **Целевой профиль**. При выборе профиля публикации его содержимое отображается в соответствующих полях диалогового окна. Чтобы сохранить изменения в любое время, щелкните ссылку **Сохранить профиль**.

1. В разделе **Конечная точка подключения** можно указать локальную или удаленную конечную точку публикации кластера Service Fabric. Чтобы добавить или изменить конечную точку подключения, нажмите кнопку **Выбрать...**. В диалоговом окне **Выбор кластера Service Fabric** будут показаны конечные точки подключения кластера Service Fabric, доступные для публикации. (Если вы еще не выполнили вход в подписку Azure, вам будет предложено сделать это.) Выберите конечную точку подключения.

    ![][1]

    После выбора конечной точки Visual Studio проверит подключение к выбранному кластеру Service Fabric. Если кластер не защищен, Visual Studio можно подключиться к нему немедленно. Если же кластер защищен, для продолжения потребуется установить сертификат на локальном компьютере. Дополнительные сведения см. в разделе [Настройка безопасных подключений](service-fabric-visualstudio-configure-secure-connections.md). Когда все будет готово, нажмите кнопку **ОК**. Выбранный кластер появится в диалоговом окне **Публикация приложения Service Fabric**.

1. Файл параметров приложения можно выбрать в раскрывающемся списке **Файл параметров приложения**. Файл параметров приложения содержит значения параметров, указанные пользователем в файле манифеста приложения. Чтобы добавить или изменить параметр, нажмите кнопку **Изменить**. Введите или измените значение параметра в сетке **Параметры**. Когда все будет готово, нажмите кнопку **Сохранить**.

    ![][2]

1. Флажок **Обновить приложение** позволяет указать, подразумевает ли эта публикация обновление. Действия обновления отличаются от обыкновенных действий публикации. Список различий см. в разделе [Обновление приложения Service Fabric](service-fabric-application-upgrade.md). Чтобы настроить параметры обновления, щелкните ссылку **Настроить параметры обновления**. Откроется редактор параметров обновления. Дополнительные сведения о параметрах обновления см. в разделе [Настройка обновления приложений Service Fabric](service-fabric-visualstudio-configure-upgrade.md).

1. Нажмите кнопку **Версии манифеста...**, чтобы открылось диалоговое окно **Изменение версий**. Чтобы обновление произошло, необходимо обновить версии приложения и службы. Чтобы узнать, как версии манифеста служб влияют на процесс обновления, обратитесь к [Учебнику по обновлению приложений Service Fabric](service-fabric-application-upgrade-tutorial.md).

    ![][3]

    Если версии приложения и службы используют семантическое управление версиями, например 1.0.0 или числовые значения в формате 1.0.0.0, выберите параметр **Автоматически обновлять версии приложения и службы**. При выборе этого параметра номера версий приложения и службы автоматически обновляются при каждом обновлении кода, конфигурации или версии пакета данных. При необходимости изменить версии вручную снимите этот флажок, чтобы отключить эту функцию.

    >[AZURE.NOTE]Для всех элементов пакета, которые появляются в проекте субъекта, сначала необходимо собрать проект, чтобы создать записи в файлах манифеста службы.

1. Выполнив все необходимые параметры, нажмите кнопку **Опубликовать**, чтобы опубликовать приложение в выбранный кластер Service Fabric. Указанные параметры применяются к процессу публикации.

## Дальнейшие действия

Чтобы узнать, как автоматизировать процесс публикации в среде непрерывной интеграции, обратитесь к статье [Настройка непрерывной интеграции Service Fabric](service-fabric-set-up-continuous-integration.md).


[0]: ./media/service-fabric-publish-app-remote-cluster/PublishDialog.png
[1]: ./media/service-fabric-publish-app-remote-cluster/SelectCluster.png
[2]: ./media/service-fabric-publish-app-remote-cluster/EditParams.png
[3]: ./media/service-fabric-publish-app-remote-cluster/EditVersions.png

<!---HONumber=Nov15_HO4-->