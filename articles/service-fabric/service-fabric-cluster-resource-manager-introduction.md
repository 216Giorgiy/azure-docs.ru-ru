<properties
   pageTitle="Общие сведения о диспетчере кластерных ресурсов Service Fabric"
   description="Общие сведения о диспетчере кластерных ресурсов Service Fabric."
   services="service-fabric"
   documentationCenter=".net"
   authors="masnider"
   manager="timlt"
   editor=""/>

<tags
   ms.service="Service-Fabric"
   ms.devlang="dotnet"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="NA"
   ms.date="03/03/2016"
   ms.author="masnider"/>

# Общие сведения о диспетчере кластерных ресурсов Service Fabric

Как правило, для управления ИТ-системами или набором служб выделяются несколько отдельных компьютеров. Многие крупные службы разбиваются на веб-уровень и уровень данных (или хранилище), иногда используя специализированные компоненты, такие как кэш. Другие типы приложений включают уровень обмена сообщениями, куда поступают и откуда исходят запросы, подключенный к рабочему уровню для выполнения анализа и преобразований, необходимых для обмена сообщениями. Каждая часть получает отдельные машины или пару машин: для базы данных выделяется пара машин, для веб-серверов — несколько. Если определенный тип рабочей нагрузки вызывает перегрев машины, на которой она выполняется, для этого типа нагрузки выделяют дополнительные машины или заменяют некоторые из имеющихся машин на более мощные. Все просто. Если на машине возникает сбой, соответствующая часть приложения выполняется с меньшей емкостью, пока машина не будет восстановлена. По-прежнему довольно просто (пусть и не слишком увлекательно).

А теперь допустим, что произошло расширение и число контейнеров и микрослужб резко возросло. Неожиданно у вас оказались сотни или даже тысячи машин, десятки различных типов службы, возможно даже сотни различных экземпляров этих служб и каждая из них с одним или несколькими экземплярами или репликами для обеспечения высокой доступности.

Внезапно управление средой оказалось гораздо сложнее, чем управление несколькими компьютерами, выделенными для отдельных типов рабочей нагрузки. Ваши серверы виртуальны и больше не имеют имен (в конце концов вы переключились с [мелкого на крупный рогатый скот](http://www.slideshare.net/randybias/architectures-for-open-and-scalable-clouds/20)), а машины больше не ограничиваются одним единственным типом рабочей нагрузки. Настройка конфигурации теперь связана не столько с машинами, сколько с самими службами.

В результате такого разделения когда-то цельного многоуровневого решения на отдельные службы вам приходится принимать во внимание гораздо больше комбинаций. Кто решает, какие типы рабочей нагрузки можно выполнять на определенной машине или параллельно? Как узнать, какие службы выполнялись на машине, если произошел сбой? Кто должен проследить за повторным запуском этой машины? Нужно ли дожидаться восстановления (виртуальной) машины или рабочая нагрузка будет выполняться без перерыва? Требуется ли вмешательство для того, чтобы все заработало снова? И что делать с обновлениями в такого рода среде? Нам потребуется определенная помощь, а у вас возникнет чувство, что расширение штата и попытка уладить сложности с персоналом — не лучшее решение.

Что делать?

## Знакомство с оркестраторами
Термин "оркестратор" означает элемент программного обеспечения, помогающий администраторам управлять такими типами развертываний. Оркестраторы — это компоненты, которые принимают запросы вида "Хочу, чтобы в моей среде выполнялось 5 копий этой службы", выполняют их и поддерживают (стараются поддерживать) работу системы. Оркестраторы (а не люди) принимают меры при сбое машины или остановке рабочей нагрузки по непредвиденной причине. Большинство оркестраторов не просто устраняют отказы, но и помогают при выполнении новых развертываний, обработке обновления и контроле за использованием ресурсов, но в целом все это связано с тем, чтобы поддерживать среду в желаемом состоянии. Для этого вам нужно сообщить оркестратору свои пожелания и дать ему выполнить необходимые действия. Chronos в Mesosphere, Fleet, Swarm, Kubernetes и Service Fabric — это оркестраторы или оболочки, в которые встроены оркестраторы. Со временем их число будет расти, поскольку сложность управления развертывания в различных средах и условиях продолжает увеличиваться и изменяться.

## Оркестратор как служба
Задание оркестратора в кластере Service Fabric преимущественно выполняет диспетчер кластерных ресурсов. Диспетчер кластерных ресурсов Service Fabric — одна из системных служб Service Fabric, которая автоматически запускается в каждом кластере. Как правило, задание диспетчера ресурсов делится на три части:

1. Применение правил
2. Оптимизация среды
3. Помощь в других процессах

Прежде чем мы изучать все возможности диспетчера ресурсов, рассмотрим, как он работает. Диспетчер кластерных ресурсов Service Fabric

## Общая архитектура и реализация
Прежде чем углубляться в описание диспетчера кластерных ресурсов и его функций, поговорим о том, что он собой представляет и как работает.

### Чем он не является
В традиционных N-уровневых веб-приложениях всегда используется какая-либо подсистема балансировки нагрузки, которая обычно называется подсистемой балансировки сетевой нагрузки (NLB) или подсистемой балансировки нагрузки приложений (ALB) в зависимости от того, какое место в сетевом стеке она занимает. Одни подсистемы балансировки нагрузки используют оборудование как BigIP от F5, другие — программное обеспечение как NLB корпорации Майкрософт. В подобных архитектурах подсистема балансировки должна следить за тем, чтобы разнообразные управляющие машины без отслеживания состояния или машины в кластере получали примерно одинаковый объем работы. Для этого применяются различные стратегии от отправки каждого отдельного вызова на отдельный сервер до распределения (закрепления) сеансов, а также оценки и распределение вызовов в зависимости от ожидаемых расходов и нагрузки на текущую машину.

Обратите внимание, что в лучшем случае такой механизм обеспечивал балансировку только на веб-уровне. Стратегия балансировки на уровне данных совершенно иная, зависит от механизма хранения данных и обычно связана с сегментированием данных, кэшированием, контролем базы данных за представлением данных, хранимыми процедурами и т. п.

И хотя некоторые из этих стратегий довольно интересны, диспетчер кластерных ресурсов Service Fabric совсем не похож на подсистему балансировки нагрузки или кэш. NLB обеспечивает распределение нагрузки на внешних машинах, направляя трафик туда, где выполняются службы, а диспетчер кластерных ресурсов Service Fabric делает совсем другую работу — по сути, он переносит службы в наиболее подходящее место. Это могут быть, например, узлы, которые находятся в холодном состоянии, поскольку размещенные в них службы в этот момент не выполняют никакой значительной работы. Кроме того, диспетчер кластерных ресурсов может убрать службу из узла, который должен подвергнуться обновлению или находится под чрезмерной нагрузкой из-за скачка в использовании службы, размещенной на этом узле. Отвечая за перемещение служб (а не за доставку сетевого трафика туда, где эти службы уже находятся), диспетчер кластерных ресурсов Service Fabric отличается большей гибкостью и обладает более широкими возможностями для контроля за местом размещения служб и способами их перемещения.

<!--Every topic should have next steps and links to the next logical set of content to keep the customer engaged-->
## Дальнейшие действия
- [Дополнительные сведения об архитектуре диспетчера кластерных ресурсов](service-fabric-cluster-resource-manager-architecture.md)
- [Описание кластера](service-fabric-cluster-resource-manager-cluster-description.md)
- [Дополнительные сведения о настройке служб](service-fabric-cluster-resource-manager-configure-services.md)
- [Дополнительные сведения о метриках](service-fabric-cluster-resource-manager-metrics.md)
- [Узнайте, как диспетчер кластерных ресурсов интегрируется с остальными функциями управления Service Fabric](service-fabric-cluster-resource-manager-management-integration.md)

<!---HONumber=AcomDC_0309_2016-->