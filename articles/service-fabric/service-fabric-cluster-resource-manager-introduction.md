---
title: "Общие сведения о диспетчере кластерных ресурсов Service Fabric | Документация Майкрософт"
description: "Введение в работу с диспетчера кластерных ресурсов Service Fabric."
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: cfab735b-923d-4246-a2a8-220d4f4e0c64
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 01/05/2017
ms.author: masnider
translationtype: Human Translation
ms.sourcegitcommit: dafaf29b6827a6f1c043af3d6bfe62d480d31ad5
ms.openlocfilehash: ec470466f006265af5c4ccfddeeba975e6e648b5


---
# <a name="introducing-the-service-fabric-cluster-resource-manager"></a>Общие сведения о диспетчере кластерных ресурсов Service Fabric
Как правило, для управления ИТ-системами или набором служб выделяется несколько компьютеров или виртуальных машин. Многие крупные службы разбиваются на веб-уровень и уровень данных (или хранилище), иногда используя специализированные компоненты, такие как кэш. В приложениях других типов может существовать уровень обмена сообщениями, на котором поступают и выдаются запросы. Этот уровень подключается к рабочему уровню для анализа или преобразования данных, когда это требуется для обмена сообщениями. Для рабочей нагрузки каждого типа выделяются отдельные виртуальные машины или компьютеры: несколько машин выделяется для базы данных, и еще несколько — для веб-серверов. Если виртуальные машины или компьютеры не могут справиться с объемом рабочей нагрузки определенного типа, вы добавляете дополнительные машины с такой же конфигурацией. Но чаще всего компьютеры заменяются новыми с большей мощностью. Все просто. Если на машине возникает сбой, соответствующая часть приложения выполняется с меньшей емкостью, пока машина не будет восстановлена. По-прежнему довольно просто (пусть и не слишком увлекательно).

А теперь допустим, что произошло расширение и число контейнеров и микрослужб резко возросло. Неожиданно вы понимаете, что у вас есть десятки, сотни или даже тысячи компьютеров. У вас есть десятки служб различных типов (но ни одной из них не нужно столько ресурсов, сколько предоставляет целый компьютер) и, возможно, несколько сотен экземпляров этих служб. На каждом именованном экземпляре есть один или несколько экземпляров или реплик для обеспечения высокой доступности.

Внезапно управление средой оказалось гораздо сложнее, чем управление несколькими компьютерами, выделенными для отдельных типов рабочей нагрузки. Ваши серверы виртуальны и больше не имеют имен (в конце концов вы *переключились* с [мелкого на крупный рогатый скот](http://www.slideshare.net/randybias/architectures-for-open-and-scalable-clouds/20)). Настройка конфигурации теперь связана не столько с машинами, сколько с самими службами. Выделенное оборудование осталось в прошлом, а сами службы стали небольшими распределенными системами, которые занимают несколько небольших узлов стандартного оборудования.

В результате такого разделения когда-то цельного многоуровневого приложения на отдельные службы, работающие на стандартном оборудовании, вам приходится принимать во внимание гораздо больше комбинаций. Кто решает, какие типы рабочей нагрузки можно выполнять на том или ином оборудовании и в каком количестве? Какие рабочие нагрузки хорошо работают на одном оборудовании, а какие конфликтуют? Как узнать, какие службы выполнялись на машине, если произошел сбой? Кто должен проследить за повторным запуском этой рабочей нагрузки? Нужно ли дожидаться возврата (виртуальной) машины, или рабочие нагрузки автоматически переключатся на другие виртуальные машины и продолжат выполнение? Требуется ли вмешательство? Как устанавливать обновления в такой среде?

Разработчикам и операторам для работы с этой сложной системой требуется некоторая помощь. Вы осознаете, что активное расширение штата, чтобы заткнуть сложные проблемы большим количеством сотрудников, — не лучший вариант решения.

Что делать?

## <a name="introducing-orchestrators"></a>Знакомство с оркестраторами
Термин "оркестратор" означает элемент программного обеспечения, помогающий администраторам управлять такими типами сред. Оркестраторы — это компоненты, которые принимают запросы вида "Хочу, чтобы в моей среде выполнялось пять копий этой службы". Они пытаются в любой ситуации привести среду к требуемому состоянию.

Оркестраторы (а не люди) принимают меры при сбое машины или остановке рабочей нагрузки по непредвиденной причине. Большинство оркестраторов способны на большее, чем просто устранение сбоев. Они также могут управлять новыми развертываниями, применять обновления и контролировать потребление ресурсов. Все оркестраторы, по сути, занимаются поддержанием требуемого состояния в определенной среде. Для этого вам нужно сообщить оркестратору свои пожелания и дать ему выполнить необходимые действия. Chronos или Marathon в Mesos, Fleet, Docker Datacenter/Docker Swarm, Kubernetes и Service Fabric — это все примеры оркестраторов или решений, в которые встроены оркестраторы. Со временем их число будет расти, поскольку сложность управления развертывания в различных средах и условиях продолжает увеличиваться и изменяться.

## <a name="orchestration-as-a-service"></a>Оркестрация как служба
Задание оркестратора в кластере Service Fabric преимущественно выполняет диспетчер кластерных ресурсов. Диспетчер кластерных ресурсов Service Fabric — одна из системных служб Service Fabric, которая автоматически запускается в каждом кластере. Как правило, задание диспетчера кластерных ресурсов делится на три части:

1. Применение правил.
2. Оптимизация среды.
3. Помощь с другими процессами.

Посмотрите следующий видеоролик от Microsoft Virtual Academy, который демонстрирует работу диспетчера кластерных ресурсов: <center><a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=d4tka66yC_5706218965">
<img src="./media/service-fabric-cluster-resource-manager-introduction/ConceptsAndDemoVid.png" WIDTH="360" HEIGHT="244">
</a></center>

### <a name="what-it-isnt"></a>Чем это не является
В традиционных многоуровневых приложениях всегда существовала какая-то подсистема балансировки нагрузки. Обычно это была подсистема балансировки сетевой нагрузки или нагрузки приложений, в зависимости от ее расположения в стеке сетевых протоколов. Одни балансировщики (например, BigIP от F5) работают на аппаратном уровне, а другие (например, балансировщик сетевой нагрузки от Майкрософт) — на программном. В других средах в этой роли может выступать, например, HAProxy или nginx. В этих архитектурах балансировка нагрузки заключается в (приблизительно) равномерном распределении заданий между рабочими нагрузками без отслеживания состояний. Используются самые разные стратегии балансировки нагрузки. Некоторые подсистемы балансировки распределяют разные вызовы между разными серверами. Другие поддерживают закрепление сеансов. Более сложные подсистемы используют инструменты оценки или информирования и маршрутизируют вызовы, исходя из прогнозируемых затрат на их обработку и текущей загрузки компьютера.

Балансировщики сетевой нагрузки (маршрутизаторы сообщений) стремятся к тому, чтобы уровень веб-ролей и рабочих ролей был загружен относительно равномерно. На уровне данных используется другая стратегия балансировки, зависящая от механизма хранения данных. Обычно применяются методы сегментирования данных, кэширования, управляемые представления, хранимые процедуры и другие механизмы, предоставляемые хранилищем.

И хотя некоторые из этих стратегий довольно интересны, диспетчер кластерных ресурсов Service Fabric совсем не похож на подсистему балансировки нагрузки или кэш. Балансировщики сетевой нагрузки поддерживают баланс между интерфейсными серверами, передавая трафик туда, где выполняются службы. Диспетчер кластерных ресурсов Service Fabric использует другой подход. Платформа Service Fabric перемещает *службы* туда, где они будут наиболее полезны, и ожидает соответствующих перемещений трафика или нагрузки. Например, она может переместить службы на те узлы, у которых ниже температура, предполагая, что размещенные там службы работают не очень активно. Возможно даже, что размещенные там службы уже удалены или перемещены в другое место. Кроме того, диспетчер кластерных ресурсов может убрать службу с определенного компьютера, например перед его обновлением или в случае перегрузки от всплеска активности размещенных там служб.

Так как диспетчер кластерных ресурсов отвечает за перемещение служб (а не доставляет сетевой трафик к службам), набор его функций отличается от возможностей подсистемы балансировки сетевой нагрузки. Как мы увидим далее, он применяет совершенно иные стратегии для обеспечения эффективного использования аппаратных ресурсов в кластере.

## <a name="next-steps"></a>Дальнейшие действия
* Сведения об архитектуре и потоке информации в диспетчере кластерных ресурсов см. в [этой статье](service-fabric-cluster-resource-manager-architecture.md).
* Диспетчер кластерных ресурсов предоставляет много параметров для описания кластера. Дополнительные сведения об этих параметрах см. в статье с [описанием кластера Service Fabric](service-fabric-cluster-resource-manager-cluster-description.md).
* Дополнительные сведения о других вариантах настройки служб см. в статье [Настройка параметров диспетчера кластерных ресурсов для служб Service Fabric](service-fabric-cluster-resource-manager-configure-services.md).
* Метрики показывают, как диспетчер кластерных ресурсов Service Fabric управляет потреблением и емкостью в кластере. Дополнительные сведения о метриках и их настройке см. в [этой статье](service-fabric-cluster-resource-manager-metrics.md).
* Диспетчер кластерных ресурсов работает с функциями управления Service Fabric. Подробные сведения об этой интеграции см. в [этой статье](service-fabric-cluster-resource-manager-management-integration.md).
* Чтобы узнать, как диспетчер кластерных ресурсов управляет нагрузкой кластера и балансирует ее, ознакомьтесь со статьей о [балансировке нагрузки](service-fabric-cluster-resource-manager-balancing.md)



<!--HONumber=Jan17_HO1-->


