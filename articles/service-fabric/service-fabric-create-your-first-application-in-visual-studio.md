<properties
   pageTitle="Создание первого приложения Service Fabric в Visual Studio | Microsoft Azure"
   description="Создание, развертывание и отладка приложения Service Fabric с помощью Visual Studio"
   services="service-fabric"
   documentationCenter=".net"
   authors="seanmck"
   manager="timlt"
   editor=""/>

<tags
   ms.service="service-fabric"
   ms.devlang="dotNet"
   ms.topic="hero-article"
   ms.tgt_pltfrm="NA"
   ms.workload="NA"
   ms.date="01/11/2016"
   ms.author="seanmck"/>

# Создание первого приложения Azure Service Fabric в Visual Studio

Пакет SDK Service Fabric содержит надстройку для Visual Studio, в которой есть шаблоны и средства для создания, развертывания и отладки приложений Service Fabric. Эта статья описывает пошаговый процесс создания первого приложения в Visual Studio.

## Предварительные требования

Перед началом работы [настройте среду разработки](service-fabric-get-started.md).

## Видеоруководство

Действия, описанные в этом руководстве, показаны в следующем видеоролике.

>[AZURE.VIDEO creating-your-first-service-fabric-application-in-visual-studio]

## Создание приложения

Приложение Service Fabric может содержать одну или несколько служб, каждая из которых выполняет определенную роль в работе приложения. С помощью мастера создания проекта создайте проект приложения и первый проект службы. Позже вы можете добавить дополнительные службы.

1. Запустите Visual Studio от имени администратора.

2. Щелкните пункты **Файл > Новый проект > Облако > Приложение Service Fabric**.

3. Присвойте приложению имя и нажмите кнопку **ОК**.

	![Диалоговое окно "Новый проект" в Visual Studio][1]

4. На следующей странице выберите тип службы, которая будет первой для вашего приложения. Для нашего примера мы выберем **службу с отслеживанием состояния**. Присвойте ей имя и нажмите кнопку **ОК**.

	![Диалоговое окно "Новая служба" в Visual Studio][2]

	>[AZURE.NOTE] Дополнительные сведения о возможных вариантах см. в статье [Выбор платформы для службы](service-fabric-choose-framework.md).

	Visual Studio создаст проект приложения и проект службы с отслеживанием состояния, затем отобразит их в обозревателе решений.

	![Обозреватель решений после создания приложения и службы с отслеживанием состояния][3]

	Проект приложения не содержит код. Он только ссылается на набор проектов служб. Также он содержит данные еще трех типов.

	- **Профили публикации**. Управляют настройками инструментов для различных сред.

	- **Сценарии**. Сюда входит сценарий PowerShell для развертывания и обновления приложения. Visual Studio выполняет такой сценарий в фоновом режиме. Вы также можете запустить его из командной строки.

	- **Определение приложения**. Сюда входит манифест приложения и файлы параметров приложения, определяющие его характеристики. С их помощью вы можете настроить приложение для конкретной среды.

    Обзор содержимого проекта службы вы найдете в статье [Начало работы с надежными службами Service Fabric Microsoft Azure](service-fabric-reliable-services-quick-start.md).

## Развертывание и отладка приложения

Теперь, когда вы создали приложение, попробуйте запустить его.

1. Чтобы начать отладку, разверните приложение, нажав в Visual Studio клавишу F5.

	>[AZURE.NOTE] Первый раз этот процесс занимает много времени, так как Visual Studio создает локальный кластер для разработки. Локальный кластер выполняет на одном локальном компьютере тот же код платформы, который будет затем развернут на кластере с несколькими компьютерами. Процесс создания кластера можно наблюдать в окне вывода Visual Studio.

	Когда кластер будет готов, диспетчер локального кластера в области уведомлений (входит в состав пакета SDK) отобразит соответствующее уведомление.

	![Уведомление в области уведомлений локального кластера][4]

2. После запуска приложения Visual Studio автоматически открывает средство просмотра событий диагностики, в котором отображаются данные трассировки службы.

	![Средство просмотра диагностических событий][5]

	Для шаблона службы с отслеживанием состояния эти сообщения содержат просто значение счетчика, которое увеличивается в методе `RunAsync` файла MyStatefulService.cs.

3. Разверните одно из событий для получения дополнительных сведений, в том числе об узле, где выполняется код. В данном случае это узел 2, хотя на вашем компьютере это может быть другой узел.

	![Подробная информация в средстве просмотра диагностических событий][6]

	Локальный кластер содержит пять узлов, размещенных на одном компьютере. Он имитирует кластер из пяти узлов, находящихся на разных компьютерах. Давайте отключим один из узлов локального кластера, имитируя потерю связи с машиной. Заодно мы потренируемся использовать отладчик Visual Studio.

    >[AZURE.NOTE] Шаблон проекта создает события диагностики приложений, использующие встроенный класс `ServiceEventSource`. Дополнительные сведения см. в статье [Мониторинг и диагностика состояния служб в локальной среде разработки](service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally.md).

4. Найдите в проекте службы класс, унаследованный от StatefulService (например, MyStatefulService), и установите в нем точку останова на первой строке метода `RunAsync`.

	![Точка останова в методе RunAsync службы с отслеживанием состояния][7]

5. Щелкните правой кнопкой мыши область уведомлений диспетчера локального кластера и выберите пункт **Управление локальным кластером**, чтобы запустить обозреватель Service Fabric.

    ![Запуск обозревателя Service Fabric из диспетчера локального кластера][systray-launch-sfx]

    В обозревателе Service Fabric отображаются кластер, составляющие его физические узлы и развернутые на них приложения. Дополнительную информацию об обозревателе Service Fabric см. в статье [Визуализация кластера](service-fabric-visualizing-your-cluster.md).

6. В области слева разверните пункт **Кластер > Узлы** и найдите узел, в котором выполняется код приложения.

7. Щелкните **Действия > Деактивация (Перезагрузка)** для имитации перезапуска компьютера.

	![Остановка узла в обозревателе Service Fabric][sfx-stop-node]

	Вы сразу же увидите срабатывание точки останова в Visual Studio. Это означает, что процесс вычислений с отключенного узла передан на другой узел как единое целое.

8. Вернитесь к средству просмотра диагностических событий и изучите сообщения. Обратите внимание, что показания счетчика продолжают расти, хотя события теперь поступают с другого узла.

    ![Информация в средстве просмотра диагностических событий после аварийного переключения][diagnostic-events-viewer-detail-post-failover]

### Очистка.

  Прежде чем завершить работу, важно помнить, что локальный кластер работает по-настоящему. Даже когда вы остановите отладчик и закроете Visual Studio, приложения будут продолжать работать в фоновом режиме. Работая в фоновом режиме, приложения могут использовать ресурсы компьютера. Объем этих ресурсов зависит от свойств приложений. Вы можете выбрать один из вариантов управления этими приложениями.

  1. Чтобы удалить отдельное приложение и все его данные, в обозревателе Service Fabric выберите команду **Удалить приложение**.

  2. Чтобы завершить работу кластера, но сохранить данные приложения и трассировки, в приложении области уведомлений выберите команду **Остановить кластер**.

  3. Чтобы полностью удалить кластер, в приложении области уведомлений щелкните **Удалить кластер**. Обратите внимание, что выбор этого параметра приведет к медленному развертыванию при последующем нажатии клавиши F5 в Visual Studio. Используйте его только в том случае, если вы не собираетесь использовать локальный кластер в течение некоторого времени или если необходимо освободить ресурсы.



## Дальнейшие действия

- [Узнайте, как предоставить доступ к службам из Интернета с помощью внешнего интерфейса веб-службы](service-fabric-add-a-web-frontend.md).
- [Узнайте, как создавать кластер в Azure.](service-fabric-cluster-creation-via-portal.md)
- [Узнайте больше о Reliable Services](service-fabric-reliable-services-quick-start.md).
- [Попробуйте создать службу с помощью модели программирования Reliable Actors](service-fabric-reliable-actors-get-started.md).

<!-- Image References -->

[1]: ./media/service-fabric-create-your-first-application-in-visual-studio/new-project-dialog.png
[2]: ./media/service-fabric-create-your-first-application-in-visual-studio/new-project-dialog-2.png
[3]: ./media/service-fabric-create-your-first-application-in-visual-studio/solution-explorer-stateful-service-template.png
[4]: ./media/service-fabric-create-your-first-application-in-visual-studio/local-cluster-manager-notification.png
[5]: ./media/service-fabric-create-your-first-application-in-visual-studio/diagnostic-events-viewer.png
[6]: ./media/service-fabric-create-your-first-application-in-visual-studio/diagnostic-events-viewer-detail.png
[7]: ./media/service-fabric-create-your-first-application-in-visual-studio/runasync-breakpoint.png
[sfx-stop-node]: ./media/service-fabric-create-your-first-application-in-visual-studio/sfe-deactivate-node.png
[systray-launch-sfx]: ./media/service-fabric-create-your-first-application-in-visual-studio/launch-sfx.png
[diagnostic-events-viewer-detail-post-failover]: ./media/service-fabric-create-your-first-application-in-visual-studio/diagnostic-events-viewer-detail-post-failover.png

<!---HONumber=AcomDC_0218_2016-->