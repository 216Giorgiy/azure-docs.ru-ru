<properties
   pageTitle="Создание первого приложения Service Fabric в Visual Studio | Microsoft Azure"
   description="Создание, развертывание и отладка приложения Service Fabric с помощью Visual Studio"
   services="service-fabric"
   documentationCenter=".net"
   authors="seanmck"
   manager="timlt"
   editor=""/>

<tags
   ms.service="service-fabric"
   ms.devlang="dotNet"
   ms.topic="hero-article"
   ms.tgt_pltfrm="NA"
   ms.workload="NA"
   ms.date="11/13/2015"
   ms.author="seanmck"/>

# Создание первого приложения Service Fabric в Visual Studio

Пакет Service Fabric SDK содержит надстройку для Visual Studio, в которой есть шаблоны и средства для создания, отладки и развертывания приложений Service Fabric. Эта статья описывает пошаговый процесс создания первого приложения в Visual Studio.

## Предварительные требования

Перед началом работы [настройте свою среду разработки](service-fabric-get-started.md).

## Создание приложения

Приложение Service Fabric может содержать одну или несколько служб, каждая из которых выполняет определенную роль в работе приложения. Мастер создания проекта позволяет создать проект приложения и проект первой службы. Позже вы можете добавить дополнительные службы.

1. Запустите Visual Studio от имени администратора.

2. Щелкните пункты **Файл > Новый проект > Облако > Приложение Service Fabric**.

3. Присвойте приложению имя и нажмите кнопку OK.

	![Диалоговое окно «Новый проект» в Visual Studio][1]

4. В следующем диалоговом окне выберите тип службы, которая будет первой для вашего приложения. Для нашего примера мы выберем службу с отслеживанием состояния. Присвойте ей имя и нажмите кнопку OK.

	![Диалоговое окно «Новая служба» в Visual Studio][2]

	>[AZURE.NOTE]Дополнительные сведения о возможных вариантах см. в статье [Выбор платформы](service-fabric-choose-framework.md).

	Visual Studio создаст проект приложения и проект службы с отслеживанием состояния, затем отобразит их в обозревателе решений.

	![Обозреватель решений после создания приложения и службы с отслеживанием состояния][3]

	Проект приложения не содержит код. Он только ссылается на набор проектов служб. Также он содержит данные еще трех типов.

	- **Профили публикации** — управляют настройками инструментов для различных сред.

	- **Сценарии** — сценарии PowerShell для развертывания и обновления приложения. Visual Studio выполняет такой сценарий в фоновом режиме. Вы также можете запустить его из командной строки.

	- **Определение приложения** — манифест и файлы параметров приложения определяют характеристики этого приложения. С их помощью вы можете настроить приложение для конкретной среды.

  Обзор содержимого проекта службы вы найдете в статье [Приступая к работе с Reliable Services](service-fabric-reliable-services-quick-start.md).

## Развертывание и отладка приложения

У нас уже есть приложение. Давайте попробуем запустить его.

1. Чтобы начать отладку, нужно развернуть приложение, нажав в Visual Studio клавишу F5.

	>[AZURE.NOTE]При первом выполнении этот процесс займет много времени, поскольку Visual Studio создает локальный кластер для разработки. Локальный кластер выполняет на одном локальном компьютере тот же код платформы, который будет затем развернут на кластере с несколькими компьютерами. Процесс создания кластера можно наблюдать в окне вывода Visual Studio.

	Когда кластер будет готов, вы получите уведомление от приложения диспетчера области уведомлений локального кластера, которое входит в состав пакета SDK.

	![Уведомление в области уведомлений локального кластера][4]

2. После запуска приложения Visual Studio автоматически открывает средство просмотра событий диагностики, в котором отображаются данные трассировки службы.

	![Средство просмотра диагностических событий][5]

	Для шаблона службы с отслеживанием состояния эти сообщения содержат просто значение счетчика, которое увеличивается в методе `RunAsync` файла MyStatefulService.cs.

3. Разверните одно из событий, чтобы увидеть подробные сведения. Здесь же будет указано, какой узел выполняет код. В нашем примере это узел 2, а на вашем компьютере значение может быть другим.

	![Подробная информация в средстве просмотра диагностических событий][6]

	Локальный кластер состоит из пяти узлов, которые размещены на одном компьютере. Он является моделью кластера из пяти узлов, размещенных на различных компьютерах. Давайте отключим один из узлов локального кластера, имитируя потерю связи с машиной. Заодно мы потренируемся использовать отладчик Visual Studio.

    >[AZURE.NOTE]Шаблон проекта создает события диагностики приложений, которые используют встроенный класс `ServiceEventSource`. Дополнительные сведения см. в статье [Мониторинг и диагностика состояния служб в локальной среде разработки](service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally).

4. Найдите в проекте службы класс, унаследованный от StatefulService (например, MyStatefulService), и установите в нем точку останова на первой строке метода `RunAsync`.

	![Точка останова в методе RunAsync службы с отслеживанием состояния][7]

5. Щелкните правой кнопкой мыши на области уведомлений диспетчера локального кластера и выберите пункт «Управление локальным кластером», чтобы запустить обозреватель Service Fabric.

  ![Запуск обозревателя Service Fabric из диспетчера локального кластера][systray-launch-sfx]

  Обозреватель Service Fabric отображает кластер, составляющие его физические узлы и развернутые на нем приложения.

6. В области слева разверните пункт **Кластер > Узлы** и найдите узел, который выполняет код приложения.

7. Щелкните **Действия > Деактивация (Перезагрузка)** для имитации перезапуска компьютера.

	![Остановка узла в обозревателе Service Fabric][sfx-stop-node]

	Вы сразу же увидите срабатывание точки останова в Visual Studio. Это означает, что процесс вычислений с отключенного узла передан на другой узел как единое целое.

8. Вернитесь к средству просмотра диагностических событий и изучите сообщения. Обратите внимание, что показания счетчика продолжают расти, хотя события теперь поступают с другого узла.

  ![Информация в средстве просмотра диагностических событий после аварийного переключения][diagnostic-events-viewer-detail-post-failover]


## Дальнейшие действия

- [Узнайте, как создавать кластер в Azure](service-fabric-cluster-creation-via-portal.md).
- [Изучите принципы создания надежных служб](service-fabric-reliable-services-quick-start.md).
- [Узнайте, как предоставить доступ к службам из Интернета с помощью WebAPI](service-fabric-add-a-web-frontend.md).
- [Попробуйте создать службы с использованием модели надежного субъекта](service-fabric-reliable-actors-get-started.md).

<!-- Image References -->

[1]: ./media/service-fabric-create-your-first-application-in-visual-studio/new-project-dialog.png
[2]: ./media/service-fabric-create-your-first-application-in-visual-studio/new-project-dialog-2.png
[3]: ./media/service-fabric-create-your-first-application-in-visual-studio/solution-explorer-stateful-service-template.png
[4]: ./media/service-fabric-create-your-first-application-in-visual-studio/local-cluster-manager-notification.png
[5]: ./media/service-fabric-create-your-first-application-in-visual-studio/diagnostic-events-viewer.png
[6]: ./media/service-fabric-create-your-first-application-in-visual-studio/diagnostic-events-viewer-detail.png
[7]: ./media/service-fabric-create-your-first-application-in-visual-studio/runasync-breakpoint.png
[sfx-stop-node]: ./media/service-fabric-create-your-first-application-in-visual-studio/sfe-deactivate-node.png
[systray-launch-sfx]: ./media/service-fabric-create-your-first-application-in-visual-studio/launch-sfx.png
[diagnostic-events-viewer-detail-post-failover]: ./media/service-fabric-create-your-first-application-in-visual-studio/diagnostic-events-viewer-detail-post-failover.png

<!---HONumber=Nov15_HO4-->