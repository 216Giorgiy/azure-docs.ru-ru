<properties
   pageTitle="Взаимодействие со службами в Azure Service Fabric и подключение к ним | Microsoft Azure"
   description="Научитесь подключаться к службам в приложениях Service Fabric и взаимодействовать с ними."
   services="service-fabric"
   documentationCenter=".net"
   authors="kunaldsingh"
   manager="timlt"
   editor=""/>

<tags
   ms.service="service-fabric"
   ms.devlang="dotnet"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="NA"
   ms.date="08/21/2015"
   ms.author="kunalds"/>


# Взаимодействие со службами
В мире микрослужб комплексное решение состоит из множества различных служб, каждая из которых выполняет специализированную задачу. Между этими микрослужбами выполняется обмен данными, чтобы обеспечить непрерывный рабочий процесс. Существуют также клиентские приложения, которые подключаются и обмениваются данными со службами. В этом документе рассматривается, как при помощи Azure Service Fabric можно легко настроить взаимодействие со службами, написанными с помощью Service Fabric.

## Основные понятия
Ниже приведены несколько ключевых понятий, которые необходимо учитывать при настройке взаимодействия со службами.
### Обмен данными представляется в контексте "клиент — сервер".
API обмена данными Service Fabric используется в качестве средства обеспечения взаимодействия "клиент — сервер", даже если обмен данными выполняется между двумя службами в одном кластере. Целевая служба, к которой будет подключен клиент или другая служба, действует как сервер, прослушивая входящие запросы. Клиент, который может быть просто другой службой в этом же кластере, подключается к серверу и формирует запросы для него.
### Перемещение служб
В распределенной системе экземпляры службы, которые вы запускаете, могут со временем перемещаться с одного компьютера на другой. Это может происходить по разным причинам, включая балансировку нагрузки при использовании метрик нагрузки для балансировки ресурсов, обновление, отработку отказа, масштабирование. Поэтому адреса конечных точек экземпляра службы могут изменяться. Для настройки взаимодействия с экземпляром службы должен быть выполнен следующий цикл. Эти сведения извлекаются у вас при использовании API обмена данными, представляемыми структурой служб.

* **Разрешение**. Все экземпляры службы в Service Fabric имеют уникальные универсальные коды ресурсов (URI). Например, служба fabric:/MyApplication/MyService и ее URI не изменяются со временем. Кроме того, каждый экземпляр службы делает доступными конечные точки, которые могут меняться при перемещении экземпляров службы. Это аналогично веб-сайтам, URL-адреса которых не меняются, даже когда могут меняться их IP-адреса. Подобно службе DNS в Интернете, которая разрешает URL веб-сайтов в IP-адреса, платформа Service Fabric обладает системной службой, которая разрешает URI-адреса в конечные точки. Этот шаг подразумевает разрешение URI экземпляра служб до конечной точки.

* **Подключение**. После того как универсальный код ресурса (URI) службы был разрешен в адрес конечной точки, выполняется попытка подключения к этой службе. Такое подключение может дать сбой, если адрес конечной точки изменился из-за перемещения службы, вызванного, например, аппаратным отказом или балансировкой нагрузки.

* **Повторение попытки**. Если при попытке подключения произойдет отклонение предыдущей операции разрешения и возникнет необходимость повтора всех шагов по подключению, этот цикл повторяется до успешной установки подключения.

## Варианты API обмена данными
В рамках Service Fabric мы предоставляем несколько различных вариантов API обмена данными. Выбор оптимального варианта зависит от модели программирования, платформы взаимодействия и языка программирования, на котором написаны службы.
### Обмен данными для Reliable Actors
Для служб, написанных с использованием API Reliable Actors, все параметры обмена данными являются абстрактными. Обмен данными происходит, когда метод вызывает ActorProxy, поэтому чтение на этом можно закончить.

### Параметры обмена данными для Reliable Services
Если служба написана при помощи API надежных служб, существует несколько вариантов. Выбранный вами протокол обмена данными поможет выбрать наиболее подходящий API взаимодействия Service Fabric.

* **Без указания конкретного протокола**. Если вы не выбрали среду обмена данными, но хотите быстро настроить и запустить что-то работоспособное, идеальным вариантом будет выбор [стека по умолчанию](service-fabric-reliable-services-communication-remoting.md), который допускает использование модели, подобной модели обмена данными субъектов. Это самый простой и наиболее быстрый способ начать обмен данными между службами. Он обеспечивает выраженный обмен данными RPC, который исключает множество подробной информации об обмене данными так, что вызов метода на удаленной службе в коде выглядит как метод на локальном экземпляре объекта. Эти классы выделяют разрешение, подключение, повторные попытки и обработку ошибок, одновременно настраивая канал обмена данными, и позволяют реализовать модель обмена данными путем вызова методов. Для этого при обмене данными на стороне сервера будет использоваться класс `ServiceCommunicationListener`, а на стороне клиента будет использоваться класс `ServiceProxy`.

* **HTTP**. Чтобы использовать гибкость, которую предоставляет обмен данными на основе HTTP, вы можете применить API обмена данными Service Fabric, которые позволяют определить механизм обмена данными, в то время как логические операции разрешения, подключения и повторения попыток остаются за кадром. Например, вы можете использовать веб-API для задания механизма обмена данными и классы [`ICommunicationClient` и `ServicePartitionClient`](service-fabric-reliable-services-communication.md) для установки взаимодействия.
* **WCF**. Если имеется уже существующий код, который использует WCF как среду обмена данными, то вы можете использовать класс WcfCommunicationListener для серверной стороны и классы WcfCommunicationClient и ServicePartitionClient для клиентской стороны. Дополнительные сведения см. в статье [Реализация стека связи на основе WCF](service-fabric-reliable-services-communication-wcf.md).

* **Другие платформы обмена данными, в том числе пользовательские протоколы**: если планируется использовать какие-либо другие протоколы обмена данными, в том числе пользовательские протоколы, реализованные в API обмена данными в Service Fabric, в которые вы можете включить свой стек обмена данными, в то время как все действия по обнаружению и подключению скрыты от вас. Дополнительные сведения см. в статье [Модель взаимодействия надежных служб](service-fabric-reliable-services-communication.md).

### Обмен данными между службами, написанными на разных языках программирования
Все API-интерфейсы обмена данными Service Fabric в настоящее время доступны только на C#. Это означает, что, если у вас имеется служба, написанная на каком-либо другом языке программирования, например Java или Node.JS, вам потребуется создать собственный механизм обмена данными.

## Дальнейшие действия
* [Стек обмена данными по умолчанию, предоставляемый платформой Reliable Services](service-fabric-reliable-services-communication-remoting.md)
* [Модель обмена данными Reliable Services](service-fabric-reliable-services-communication.md)
* [Начало работы со службами веб API Microsoft Azure Service Fabric с собственным хостом OWIN](service-fabric-reliable-services-communication-webapi.md)
* [Коммуникационный стек WCF для надежных служб](service-fabric-reliable-services-communication-wcf.md)

<!---HONumber=AcomDC_1223_2015-->