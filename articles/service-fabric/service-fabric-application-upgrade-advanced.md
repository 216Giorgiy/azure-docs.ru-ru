<properties
   pageTitle="Обновление приложения структуры служб: дополнительные темы"
   description="В этой статье рассматриваются некоторые дополнительные темы, относящиеся к обновлению приложения структуры служб."
   services="service-fabric"
   documentationCenter=".net"
   authors="mani-ramaswamy"
   manager="samgeo"
   editor=""/>

<tags
   ms.service="service-fabric"
   ms.devlang="dotnet"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="NA"
   ms.date="07/17/2015"
   ms.author="subramar"/>

# Обновление приложения структуры служб: дополнительные темы

## Ручной режим обновления

> [AZURE.NOTE]Этот режим предназначен только для сбойных или отложенных обновлений в случаях, когда рассматривается использование неотслеживаемого ручного режима. Отслеживаемый режим представляет собой режим обновления, рекомендованный для приложений структуры служб.

Структура служб обеспечивает применение нескольких режимов обновления для поддержки разработки и производственного кластера. Каждый из вариантов развертывания идеально подходит для разных типов сред. Отслеживаемое последовательное обновление приложений является наиболее распространенным типом обновления, используемого в производственной среде. При определении политики обновления структура служб обеспечивает работоспособность приложения перед продолжением обновления. В определенных ситуациях, когда требуется использовать пользовательскую или сложную политику оценки работоспособности, либо в случае нестандартного обновления (приложение может уже испытывать потерю данных и т. п.) администратор приложения может использовать режим ручного обновления приложения для обеспечения полного контроля над обновлением в нескольких доменах обновления. Наконец, автоматизированное последовательное обновление полезно для сред разработки или тестирования, что обеспечивает быстрый цикл итераций во время разработки службы.

**Ручной**. Остановка обновления приложения на текущем домене обновления и изменение режима обновления на "Неотслеживаемый ручной". Администратору необходимо вручную вызвать **MoveNextApplicationUpgradeDomainAsync**, чтобы продолжить обновление или запустить откат путем запуска нового обновления. После того как обновление перейдет в ручной режим, оно остается в нем до тех пор, пока не будет запущено новое обновление. Команда **GetApplicationUpgradeProgressAsync** возвращает FABRIC_APPLICATION_UPGRADE_STATE_ROLLING_FORWARD_PENDING.

## Обновление при помощи пакета Diff

Приложение структуры служб может обновляться путем подготовки полного самостоятельного пакета приложения. Приложение может также быть обновлено путем использования пакета diff, который содержит только обновленные файлы приложения, обновленные файлы манифеста приложения и манифеста служб.

Полный пакет приложений содержит все необходимые файлы для запуска и выполнения приложения структуры служб. Пакет diff содержит только файлы, которые изменились между последним выделением приложения и текущим обновлением, плюс полные файлы манифеста приложения и служб. Для любой ссылки в манифесте приложения или манифесте службы, которую структура службы не может найти в макете сборки, структурой службы будет выполнен поиск объекта ссылки в ImageStore (ссылка будет сообщена).

Полные пакеты приложений необходимы для первичной установки приложений в кластер. При последующих обновлениях может использоваться либо полный пакет обновлений, либо пакет diff.

Случаи, в которых использование пакета diff является оптимальным.

* Пакет diff предпочтительно применять тогда, когда используется объемный пакет приложения, который ссылается на несколько файлов манифеста службы или на несколько пакетов кода, пакетов конфигурации или пакетов данных.

* Использование пакета diff является предпочтительным в случае, если система развертывания формирует структуру сборки напрямую в ходе создания сборки приложения. В этом случае, хотя в самом коде ничего не изменилось, новые сборки будут обладать другой контрольной суммой. Использование полного пакета приложения потребует обновления версии всех пакетов кода. При использовании пакета diff вы предоставляете только измененные файлы и файлы манифеста, версия которых изменилась.

## Дальнейшие действия

[Учебник по обновлению](service-fabric-application-upgrade-tutorial.md)

[Параметры обновления](service-fabric-application-upgrade-parameters.md)

[Сериализация данных](service-fabric-application-upgrade-data-serialization.md)

[Поиск и устранение неисправностей при обновлении приложения](service-fabric-application-upgrade-troubleshooting.md)
 

<!---HONumber=July15_HO4-->