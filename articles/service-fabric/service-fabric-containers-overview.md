<properties
   pageTitle="Обзор Service Fabric и контейнеров | Microsoft Azure"
   description="Обзор Service Fabric и использования контейнеров для развертывания приложений микрослужб. В этой статье содержатся общие сведения об использовании контейнеров и возможностях, предоставляемых Service Fabric"
   services="service-fabric"
   documentationCenter=".net"
   authors="msfussell"
   manager=""
   editor=""/>

<tags
   ms.service="service-fabric"
   ms.devlang="dotnet"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="NA"
   ms.date="09/25/2016"
   ms.author="msfussell"/>

# Service Fabric и контейнеры (предварительная версия) 

>[AZURE.NOTE] Эта функция доступна в режиме предварительной версии для Linux и пока недоступна для Windows Server. Предварительная версия для Windows Server будет доступна в следующем выпуске Service Fabric после выпуска общедоступной версии Windows Server 2016. Она также будет поддерживаться в последующем выпуске.

## Введение
Service Fabric — это [оркестратор](service-fabric-cluster-resource-manager-introduction.md) служб в кластере виртуальных машин. Службы можно разрабатывать различными способами — от использования [моделей программирования Service Fabric](service-fabric-choose-framework.md) до развертывания [гостевых исполняемых файлов](service-fabric-deploy-existing-app.md). По умолчанию Service Fabric развертывает и активирует эти службы как процессы. Процессы обеспечивают самую быструю активацию и максимально высокую плотность использования ресурсов кластера. Service Fabric также позволяет развернуть службы в образах контейнеров, и, что самое важное, выполнять разные службы в процессах и объединить их в контейнерах для одного и того же приложения. В зависимости от сценария вы получаете преимущества при использовании любого способа.

## Что такое контейнеры
Контейнеры — это инкапсулированные компоненты, которые развертываются по отдельности и выполняются как изолированные экземпляры на одном ядре, используя виртуализацию на уровне операционной системы. Это означает, что каждое приложение, его среда выполнения, зависимости и системные библиотеки выполняются внутри контейнера с полным закрытым доступом к собственному изолированному представлению конструкций операционной системы. Наряду с переносимостью такая степень безопасности и изоляции ресурсов — основное преимущество использования в Service Fabric контейнеров вместо выполнения служб в процессах.

Контейнеры — это технология виртуализации, которая виртуализирует базовую ОС в приложениях. Они выступают в качестве неизменяемой среды для запуска приложений с различной степенью изоляции. Контейнеры запускаются непосредственно поверх ядра. У них изолированное представление файловой системы и других ресурсов. По сравнению с виртуальными машинами контейнеры имеют следующие преимущества:

1.  **Небольшой размер.** Контейнеры используют единое дисковое пространство и имеют меньше изменений для каждого слоя, что делает их более эффективными.

2.  **Быстрая загрузка.** Контейнерам не нужно загружать операционную систему, поэтому они становятся доступными для использования гораздо быстрее, чем виртуальные машины, обычно через несколько секунд.

3.  **Переносимость.** Образ контейнерного приложения можно перенести и запустить в облаке или в локальной среде, на виртуальных машинах или непосредственно на физических компьютерах.

4.  **Возможность управления ресурсами.** Благодаря этому можно ограничить физические ресурсы, которые может использовать контейнер на узле.

## Типы контейнеров
Service Fabric поддерживает следующие типы контейнеров.

### Контейнеры Docker в Linux
Docker предоставляет API-интерфейсы более высокого уровня для создания контейнеров и управления ими поверх контейнеров ядра Linux, а также центральный репозиторий Docker Hub для хранения и получения образов контейнеров.

### Контейнеры Windows Server
Windows Server 2016 поддерживает два типа контейнеров, которые отличаются уровнем изоляции. В контейнерах Windows Server, так же, как и в контейнерах Docker, предусмотрена изоляция пространства имен и файловой системы, однако они совместно используют ядро и узел, на котором они выполняются. В Linux эта изоляция обычно обеспечивается с помощью cgroups и пространств имен. У контейнеров Windows Server все аналогично.

Контейнеры Windows Hyper-V обеспечивают более высокую степень изоляции и безопасности, так как каждый контейнер не использует ядро ОС совместно с другими контейнерами или узлом. В связи с высоким уровнем изоляции и безопасности контейнеры Hyper-V в основном предназначены для мультитенантных сценариев, связанных с злонамеренным вмешательством.

На рисунке ниже показаны различные типы уровней изоляции и виртуализации, которые доступны в операционной системе. ![Платформа Service Fabric][Image1]

## Сценарии использования контейнеров
Ниже представлены некоторые распространенные примеры использования контейнеров.

1. **Быстрая загрузка и удаление IIS.** Если у вас есть приложения ASP.NET MVC, которые вы хотите и дальше использовать, вместо перемещения их в ASP.NET Core поместите их в контейнер. Эти приложения ASP.NET MVC зависят от служб IIS. Их можно упаковать в образ контейнера из предварительно созданного образа IIS и развернуть в Service Fabric. Сведения о создании образов IIS см. в статье [Container Images on Windows Server](https://msdn.microsoft.com/virtualization/windowscontainers/quick_start/quick_start_images) (Образы контейнеров в Windows Server).


2. **Совмещение контейнеров и микрослужб Service Fabric.** Используйте имеющийся образ контейнера для части приложения. Например, можно использовать [контейнер NGINX](https://hub.docker.com/_/nginx/) для веб-интерфейса приложения и службы с отслеживанием состояния, созданные с помощью Reliable Services, для ресурсоемких вычислений серверной части. Примером такого сценария могут быть игровые приложения.


3. **Сокращение влияния "шумных соседей".** Возможность управления ресурсами контейнеров позволяет ограничить ресурс, который использует служба на узле. Службы, которые используют много ресурсов и таким образом влияют на производительность других служб (например, выполняют длительные запросы), рекомендуется поместить в контейнеры с управлением ресурсами.

## Поддержка Service Fabric для контейнеров
В настоящее время Service Fabric поддерживает развертывание контейнеров Docker в Linux и контейнеров Windows Server на Windows Server 2016. Поддержка контейнеров Hyper-V будет добавлена в следующем выпуске.

В [модели приложения](service-fabric-application-model.md) Service Fabric контейнер представляет собой узел приложения, в котором размещается несколько реплик службы. Для контейнеров поддерживаются следующие сценарии:

1.	**Гостевые контейнеры.** Идентичны [сценарию с гостевым исполняемым файлом](service-fabric-deploy-existing-app.md), когда в контейнере можно развернуть имеющиеся приложения. Это может быть файл Node.js, JavaScript или любой другой исполняемый файл (EXE).


2.	**Службы без отслеживания состояния внутри контейнеров.** Это службы, которые используют модели программирования Reliable Services и Reliable Actors. В настоящий момент поддерживаются только в Linux. Поддержка служб без отслеживания состояния в контейнерах Windows будет добавлена в следующем выпуске.

 
3.	**Службы с отслеживанием состояния внутри контейнеров.** Это службы, которые используют модели программирования Reliable Actors в Linux. В настоящий момент Reliable Services не поддерживаются в Linux. Поддержка служб с отслеживанием состояния в контейнерах Windows будет добавлена в следующем выпуске.

В Service Fabric реализовано несколько способов использования контейнеров для создания приложений, состоящих из контейнерных микрослужб. Они называются контейнерными службами, которые включают следующие возможности:

- развертывание и активация образа контейнера;
- управление ресурсами;
- проверка подлинности репозитория;
- сопоставление порта контейнера с портом узла;
- межконтейнерное обнаружение и взаимодействие;
- возможность настройки и установки переменных среды.

## Дальнейшие действия
Из этой статьи вы узнали о контейнерах, о том, что Service Fabric — это оркестратор контейнеров, а также о функциях, предоставляемых этой службой для поддержки контейнеров. Далее рассмотрим примеры использования каждой функции.

[Развертывание контейнера в Service Fabric](service-fabric-deploy-container.md)

[Image1]: media/service-fabric-containers/Service-Fabric-Types-of-Isolation.png

<!---HONumber=AcomDC_0928_2016-->