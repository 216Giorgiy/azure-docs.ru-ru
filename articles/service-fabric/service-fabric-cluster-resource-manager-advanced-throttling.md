---
title: Регулирование в диспетчере кластерных ресурсов Service Fabric | Microsoft Docs
description: Узнайте, как настраивать регулирование в диспетчере кластерных ресурсов Service Fabric.
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: ''

ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/19/2016
ms.author: masnider

---
# Регулирование поведения диспетчера кластерных ресурсов Service Fabric
Даже если диспетчер кластерных ресурсов настроен правильно, работа кластера может быть нарушена. Например, отказы нескольких узлов или доменов сбоя могут произойти во время установки новой версии или при применении обновлений. Resource Manager будет пытаться все исправить, но в таких случаях вы задумаетесь о поддержке, позволяющей кластеру самостоятельно стабилизировать работу (чтобы восстанавливаемые узлы возвращались в строй, сети сами восстанавливали свою работоспособность, а исправленные биты развертывались). Чтобы помочь в подобных ситуациях, диспетчер кластерных ресурсов Service Fabric включает в себя несколько регулировок. Обратите внимание, что это может значительно повлиять на работу системы, поэтому не стоит их использовать, пока вы тщательно не просчитали объем параллельных работ, которые фактически можно выполнить в кластере, и не определили, насколько часто приходится реагировать на подобные события незапланированной колоссальной перенастройки (т. н. "очень неудачные дни").

Обычно мы рекомендуем избегать очень неудачных дней иными средствами (в первую очередь, регулярно обновляя код и не перегружая расписание кластера), а не регулировать кластер, чтобы он не пытался использования ресурсы, одновременно пытаясь восстановить свою работоспособность. Регулировки имеют значения по умолчанию, которые мы определили, основываясь на своем опыте. Однако рекомендуем вам взглянуть на них и настроить в соответствии с ожидаемой фактической нагрузкой. Рекомендуется не ограничивать и не перегружать кластер чрезмерно. Однако вы можете выяснить, что существуют случаи, когда (пока вы не устраните проблему) необходимо иметь несколько регулировок, даже если это означает, что стабилизация кластера будет занимать больше времени.

## Настройка регулирования
По умолчанию включены следующие регулировки:

* GlobalMovementThrottleThreshold — управляет общим количеством перемещений в кластере за некоторое время (определяется в секундах как GlobalMovementThrottleCountingInterval).
* MovementPerPartitionThrottleThreshold — управляет общим количеством перемещений для любой секции службы за некоторое время (MovementPerPartitionThrottleCountingInterval, значение задается в секундах).

``` xml
<Section Name="PlacementAndLoadBalancing">
     <Parameter Name="GlobalMovementThrottleThreshold" Value="1000" />
     <Parameter Name="GlobalMovementThrottleCountingInterval" Value="600" />
     <Parameter Name="MovementPerPartitionThrottleThreshold" Value="50" />
     <Parameter Name="MovementPerPartitionThrottleCountingInterval" Value="600" />
</Section>
```

Имейте в виду, что чаще всего клиенты используют эти регулировки, так как в их среде уже были ограничены ресурсы (например, ограниченная пропускная способность подключений к отдельным узлам или дискам, которые не соответствовали предъявляемым к ним требованиям параллельных сборок реплик), то есть такие операции в любом случае не выполнялись бы или выполнялись бы медленно. В таких ситуациях клиентов устраивало, что они потенциально увеличивают время, затрачиваемое на стабилизацию работы кластера, и что регулирование может привести к понижению общей надежности.

## Дальнейшие действия
* Чтобы узнать, как диспетчер кластерных ресурсов управляет нагрузкой кластера и балансирует ее, ознакомьтесь со статьей о [балансировке нагрузки](service-fabric-cluster-resource-manager-balancing.md).
* В диспетчере кластерных ресурсов много параметров для описания кластера. Чтобы узнать о них больше, ознакомьтесь с этой статьей об [описании кластера Service Fabric](service-fabric-cluster-resource-manager-cluster-description.md).

<!---HONumber=AcomDC_0824_2016-->