<properties
   pageTitle="Добавление настраиваемых отчетов о работоспособности Service Fabric"
   description="Здесь описано, как отправлять настраиваемые отчеты о работоспособности в сущности работоспособности Azure Service Fabric. Здесь собраны рекомендации по разработке и реализации качественных отчетов о работоспособности."
   services="service-fabric"
   documentationCenter=".net"
   authors="oanapl"
   manager="timlt"
   editor=""/>

<tags
   ms.service="service-fabric"
   ms.devlang="dotnet"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="06/16/2015"
   ms.author="oanapl"/>

# Добавление настраиваемых отчетов о работоспособности Service Fabric
Service Fabric позволяет пользоваться [моделью работоспособности](service-fabric-health-introduction.md), предназначенной для обозначения неработоспособных кластеров или условий приложений на отдельных сущностях. Этим занимаются **докладчики о работоспособности** (системные компоненты и модули наблюдения). Их целью является простая и быстрая диагностика и восстановление. Создатели службы должны предупреждать проблемы работоспособности. Любые условия, которые могут повлиять на работоспособность, должны регистрироваться, так как это может помочь выяснить причину возникновения проблем. Благодаря этому не нужно выполнять дополнительные отладки и исследования после полноценного запуска службы в облаке (частном или Azure).

Докладчики Service Fabric отслеживают определенные условия. Они сообщают об этих условиях на основе своего локального представления. В [хранилище данных о работоспособности](service-fabric-health-introduction.md#Health-Store) собираются данные о работоспособности, отправленные всеми докладчиками, для определения глобальной работоспособности сущностей. Модель оптимизирована, и она гибкая и простая в использовании. Качество отчетов о работоспособности определяет точность представления работоспособности кластера. Ложные положительные результаты, которые неправильно отображают проблемы работоспособности, могут отрицательно повлиять на обновления или другие службы, использующие данные о работоспособности, например службы восстановления или механизмы предупреждений. Поэтому нужно тщательно обдумать, как получить отчеты с отображением только нужных условий.

Чтобы разработать и реализовать отчетность о работоспособности, от модулей наблюдения и компонентов системы требуется выполнить указанные ниже действия.

- Задайте нужные условия, способ их отслеживания и влияние на работу кластера или приложения. Этим вы определите свойства отчета о работоспособности и состояние работоспособности.

- Определите [сущность](service-fabric-health-introduction.md#health-entities-and-hierarchy), к которой применяется отчет.

- Укажите, откуда должен выполняться отчет — из службы, внутреннего или внешнего модуля наблюдения.

- Укажите источник, используемый для идентификации докладчика.

- Выберите стратегию создания отчетов — периодическую или на основе переходов. Мы рекомендуем выбирать периодическую отчетность, так как она требует более простого кода и, следовательно, меньше подвержена ошибкам.

- Укажите срок хранения отчетов о неработоспособности в хранилище и правила их очистки. Так вы определите период существования отчета и его удаление по истечению срока хранения.

Как упоминалось выше, отчет могут создавать следующие компоненты.

- Отслеживаемая реплика службы Service Fabric.

- Внутренние модули наблюдения, развернутые как служба Service Fabric. Например, служба без отслеживания состояния Service Fabric, которая отслеживает условия и проблемы отчета. Модули наблюдения можно развернуть на всех узлах или сгруппировать с отслеживаемой службой

- Внутренние модули наблюдения, которые запускаются на узлах Service Fabric, но **не** реализованы как службы Service Fabric.

- Внешние модули наблюдения, которые зондируют ресурс **за пределами** кластера Service Fabric. Например, служба отслеживания Gomez.

> [AZURE.NOTE]По умолчанию кластер заполняется отчетами о работоспособности, отправляемыми компонентами системы. Дополнительную информацию см. в статье [Использование отчетов о работоспособности системы для устранения неполадок](service-fabric-understand-and-troubleshoot-with-system-health-reports.md). Отчеты пользователей должны отправляться в [сущности работоспособности](service-fabric-health-introduction.md#health-entities-and-hierarchy), которые уже созданы системой.

Если схема отчетности определена, отправлять отчеты о работоспособности очень просто. Это можно сделать через API с помощью FabricClient.HealthManager.ReportHealth через Powershell или REST. По сути, во всех случаях используется клиент работоспособности, содержащийся в клиенте Fabric. Повысить производительность можно с помощью настройки пакетных отчетов.

> [AZURE.NOTE]Отчеты о работоспособности синхронизированы, и они отображают только проверку на стороне клиента. То, что отчет принимается клиентом работоспособности, не означает, что он применим в хранилище. Он будет отправлен асинхронно, возможно, в пакете с другими отчетами, и во время обработки на сервере может произойти сбой (например, из-за устаревшего порядкового номера, из-за удаления сущности, к которой должен был применяться отчет, и т. д).

## Клиент работоспособности
Отчеты о работоспособности отправляются в хранилище данных о работоспособности с помощью клиента, который находится в клиенте Fabric. Клиент работоспособности можно настроить с помощью приведенных ниже параметров.

- HealthReportSendInterval. Задержка между временем добавления отчета в клиент и отправкой в хранилище данных о работоспособности. Она используется для отправки пакетных отчетов одним сообщением вместо отдельных сообщений для каждого отчета с целью повышения производительности. Значение по умолчанию — 30 секунд.

- HealthReportRetrySendInterval. Интервал, через который клиент работоспособности повторно отправляет накопленные отчеты о работоспособности хранилища данных о работоспособности. Значение по умолчанию — 30 секунд.

- HealthOperationTimeout. Время ожидания сообщения с отчетом, отправленного в хранилище данных о работоспособности. После истечения времени ожидания сообщения клиент работоспособности будет повторять попытки, пока хранилище данных о работоспособности не подтвердит обработку отчетов. Значение по умолчанию — 2 минуты.

> [AZURE.NOTE]Чтобы отправить отчеты, объединенные в пакеты, клиент Fabric должен работать хотя бы на протяжении времени, указанного в HealthReportSendInterval. Если сообщение утеряно или хранилищу данных о работоспособности не удалось применить его из-за временных ошибок, клиент Fabric должен работать дольше, чтобы стала возможной повторная попытка.

Буферизация на клиенте выполняется с учетом уникальности отчетов. Например, если какой-либо неисправный докладчик отправляет 100 отчетов в секунду для одного свойства одной сущности, будет использоваться последняя версия отчета. В очереди клиента существует только один такой отчет. Если настроена пакетная обработка, то за один интервал отправки только один отчет будет отправляться в хранилище данных о работоспособности. Последний добавленный отчет отображает актуальное состояние сущности. Все параметры настройки можно указать при создании FabricClient, передав FabricClientSettings с нужными значениями в записи, связанные с работоспособностью.

В примере ниже приведено создание клиента Fabric и указано, что отчеты должны отправляться сразу после их добавления. Если при повторных попытках возникают ошибки или превышено время ожидания, попытки повторяются каждые 40 секунд.

```csharp
var clientSettings = new FabricClientSettings()
{
    HealthOperationTimeout = TimeSpan.FromSeconds(120),
    HealthReportSendInterval = TimeSpan.FromSeconds(0),
    HealthReportRetrySendInterval = TimeSpan.FromSeconds(40),
};
var fabricClient = new FabricClient(clientSettings);
```

Такие же параметры можно задать при создании подключения к кластеру через Powershell. Приведенный ниже код запускает подключение к локальному кластеру.

```powershell
PS C:> Connect-ServiceFabricCluster -HealthOperationTimeoutInSec 120 -HealthReportSendIntervalInSec 0 -HealthReportRetrySendIntervalInSec 40
True

ConnectionEndpoint   :
FabricClientSettings : {
                       ClientFriendlyName                   : PowerShell-1944858a-4c6d-465f-89c7-9021c12ac0bb
                       PartitionLocationCacheLimit          : 100000
                       PartitionLocationCacheBucketCount    : 1024
                       ServiceChangePollInterval            : 00:02:00
                       ConnectionInitializationTimeout      : 00:00:02
                       KeepAliveInterval                    : 00:00:20
                       HealthOperationTimeout               : 00:02:00
                       HealthReportSendInterval             : 00:00:00
                       HealthReportRetrySendInterval        : 00:00:40
                       NotificationGatewayConnectionTimeout : 00:00:00
                       NotificationCacheUpdateTimeout       : 00:00:00
                       }
GatewayInformation   : {
                       NodeAddress                          : localhost:19000
                       NodeId                               : 1880ec88a3187766a6da323399721f53
                       NodeInstanceId                       : 130729063464981219
                       NodeName                             : Node.1
                       }
```

> [AZURE.NOTE]Чтобы запретить неавторизованным службам отправлять отчеты о работоспособности сущностям в кластере, можно настроить сервер на прием запросов только от надежных клиентов. Так как отчеты отправляются с помощью FabricClient, это означает, что для FabricClient необходимо включить защиту, чтобы иметь возможность связываться с кластером (например, проверку подлинности Kerberos или проверку подлинности на основе сертификата).

## Создание отчета о работоспособности
Первым шагом в создании высококачественных отчетов является определение условий, которые могут повлиять на работоспособность службы. Если условие может помочь найти проблемы в службе или кластере при их запуске или — что еще лучше — выявить проблемы до их возникновения, оно потенциально может сохранить миллиарды долларов. Представьте себе меньшее время простоя, меньше ночей, потраченных на анализ и устранение проблем, и высокое качество обслуживания клиентов.

После задания условий авторам модулей наблюдения нужно выбрать лучший способ отслеживания, чтобы найти баланс между нагрузкой и пользой. Например, рассмотрим службу, которая выполняет некоторые сложные вычисления, используя некоторые временные файлы в общей папке. Модуль наблюдения может отслеживать общую папку на наличие в ней достаточного объема свободного места. Он может прослушивать уведомления для изменения файла или папки. Модуль может также отправлять предупреждение при приближении к пороговому значению и сообщение об ошибке, если общий ресурс заполнен. После получения предупреждения система восстановления может запустить очистку старых файлов в общей папке. После получения сообщения об ошибке система восстановления может переместить реплику службы на другой узел. Обратите внимание, что состояния условий описаны с точки зрения работоспособности: обращается внимание на то, какое состояние условия можно считать работоспособным, а какое нет (предупреждение или ошибка).

После настройки сведений об отслеживании автор модуля наблюдения должен определить, как реализовать модуль. Если условия можно определить из службы, модуль отслеживания может быть интегрирован в отслеживаемую службу. Например, код службы может проверять использование общего ресурса и отправлять отчеты с помощью локального клиента Fabric каждый раз, когда он пытается записать файл. Преимущество такого подхода заключается в простоте отчетности. Будьте осторожны, чтобы не допустить влияния ошибок модуля наблюдения на работу службы.

Создание отчетов в отслеживаемой службе не всегда целесообразно. Модуль наблюдения в службе может не обнаружить условия: либо он не имеет логики или данных для определения, либо накладные затраты на отслеживание состояния высокие, либо условия не характерны для службы, а касаются взаимодействия между службами. Другой вариант — использовать модули наблюдения в кластере как отдельные процессы. Модули наблюдения просто отслеживают условия и отправляют отчеты, никак не затрагивая основные службы. Эти модули можно реализовать, к примеру, как службы без отслеживания состояния в одном приложении, развернуть на всех узлах или на тех же узлах как службу.

В некоторых случаях модули наблюдения, выполняющиеся в кластере, также использовать нецелесообразно. Если отслеживаемые состояния — доступность или функциональность службы с точки зрения пользователей, лучше размещать модули наблюдения там же, где находятся пользовательские клиенты, и тестировать операции так же, как их вызывают пользователи. Например, у нас может быть модуль наблюдения, который выходит за пределы кластера и отправляет запросы службе, проверяя задержку и правильность результата (например, запрос службе калькулятора: возвращает ли 2 + 2 результат 4 в разумные сроки).

Когда разработка модуля наблюдения завершена, выберите идентификатор источника, который однозначно идентифицирует его. Если в кластере имеется несколько модулей наблюдения одинакового типа, они либо отправляют отчеты о различных сущностях, либо об одной и той же сущности. Чтобы отчеты могли сосуществовать, убедитесь, что идентификаторы источника или свойства отличаются. Свойство отчета о работоспособности должно содержать отслеживаемое условие. Например, в примере выше это свойство может быть ShareSize. Если к одному условию применяется множество данных, в свойстве должны содержаться некоторые динамические сведения, чтобы отчеты могли сосуществовать. Например, при наличии нескольких общих папок, которые нужно отслеживать, имя свойства может быть ShareSize-sharename.

> [AZURE.NOTE]Хранилище данных о работоспособности **нельзя** использовать для хранения сведений о состоянии. В хранилище должны поступать только сведения, связанные с работоспособностью, которые влияют на оценку работоспособности сущности. Хранилище данных о работоспособности не является хранилищем общего назначения. Оно использует логику оценки работоспособности для сбора всех данных в состояние работоспособности. Отправка сведений, связанных с неработоспособностью (например, сообщение с состоянием работоспособности «ОК»), не повлияет на собранное состояние работоспособности, однако может отрицательно повлиять на производительность хранилища данных о работоспособности.

Следующий вопрос: какие сущности включать в отчет. В большинстве случаев это очевидно и выбор делается на основе условия. Выберите сущность с наиболее оптимальной степенью детализации. Если условие влияет на все реплики в разделе, отправляется отчет о разделе, а не о службе. Бывают тупиковые случаи, когда принять решение сложно. Если условие влияет на сущность (например, реплику), но его нужно помечать дольше, чем жизненный цикл реплики, должен отправляться отчет о разделе. В противном случае после удаления реплики все отчеты, связанные с ней, удаляются из хранилища. Это означает, что авторам модулей наблюдения следует также подумать о времени существования сущности и отчета. Должно быть понятно, когда отчет нужно удалять из хранилища (например, в случае сообщения об ошибке сущности, которая больше не применяется).

Рассмотрим пример, чтобы лучше понять все описанное выше. У нас есть приложение Service Fabric, которое состоит из главной службы с отслеживанием состояния и подчиненных служб без отслеживания состояния, развернутых на всех узлах (один тип подчиненной службы для одного типа задачи). Главная служба имеет очередь обработки команд, которые выполняются подчиненными службами. Подчиненные службы выполняют полученные запросы и отправляет подтверждения. Может отслеживаться только одно условие — длина очереди обработки главной службы. Если длина очереди главной службы достигает порогового значения, отправьте предупреждение, которое будет означать, что ведомые не могут справиться с нагрузкой. Если очередь достигла максимальной длины и команды удаляются, отправьте сообщение об ошибке, так как службу невозможно восстановить. Отчеты могут содержать сведения о свойстве QueueStatus. Модуль наблюдения находится в службе и отправляется периодически в основной реплике главной службы. Срок жизни составляет 2 минуты с периодической отправкой каждые 30 секунд. Если основная реплика выходит из строя, отчет автоматически удаляется из хранилища. Если реплика службы работает, но заблокирована или имеет другие проблемы, срок хранения отчета в хранилище данных о работоспособности истечет, и сущность будет считаться ошибочной.

Другое условие, которое можно отслеживать, — время выполнения задачи. Главная служба распределяет задачи для подчиненных служб в зависимости от типа задач. В зависимости от структуры главная служба может опрашивать подчиненные о состоянии задачи или ожидать от них подтверждений о завершении. Во втором случае необходимо внимательно следить, чтобы не пропустить ситуации, когда подчиненные службы останавливаются или сообщения теряются. Один из вариантов — отправка главной службой запроса проверки связи одной и той же подчиненной службе для получения ответа о состоянии. Если состояние не получено, считайте, что случился сбой и переназначьте задачу. Это предполагает, что задачи являются идемпотентными. Мы можем интерпретировать отслеживаемое условие как предупреждение, если задача не выполняется через определенное время t1 (например, 10 минут), или как ошибку, если задача не будет завершена за время t2 (например, 20 минут). Отчеты можно отправлять несколькими способами.

- Основная реплика главной службы периодически отправляет отчеты о себе. Вы можете иметь одно свойство для всех незавершенных задач в очереди. Если хотя бы одна задача выполняется дольше, следует отправить отчет о свойстве PendingTasks с предупреждением или ошибкой соответственно. Если нет ожидающих задач или все они только что запущены, отправьте отчет «ОК». Задачи постоянные, поэтому, если главная служба выходит из строя, новая назначенная главная служба продолжает отправлять отчеты надлежащим образом.

- Другой процесс модуля наблюдения (облачный или внешний) проверяет (снаружи, на основе нужного результата задачи) состояние завершения задач. Если они выходят за пределы пороговых значений, следует отправить отчет о главной службе. Отправьте отчет по каждой задаче и включите идентификатор задачи (например, PendingTask + taskid). Сообщайте только о неработоспособных состояниях. Задайте срок жизни в несколько минут и пометьте отчеты для удаления по истечении срока, чтобы выполнить очистку.

- Подчиненная служба, выполняющая задачу, отправляет отчет, если выполнение задачи занимает больше времени, чем ожидалось. Она отправляет отчет об экземпляре службы для свойства PendingTasks. В нем выявляет экземпляр службы, который имеет проблемы, но он не включает случаи, когда экземпляр выходит из строя. В это время отчеты будут удалены. Можно отправить отчет о подчиненной службе. Если подчиненная служба выполняет задачу, экземпляр подчиненной службы удаляет отчет из хранилища. В нем не регистрируются случаи, когда подтверждение теряется и задача не выполнена с точки зрения главной службы.

Хотя отчеты отправляются в описанных выше случаях, они будут собираться при оценке работоспособности приложения.

## Периодические отчеты и отчеты на основе переходов
С помощью модели создания отчетов о работоспособности модули наблюдения могут отправлять отчеты периодически или на основе переходов. Мы рекомендуем выбирать периодическую отчетность, так как она требует более простого кода и, следовательно, меньше подвержена ошибкам. Во избежание ошибок, которые приводят к неправильным отчетам, модули наблюдения должны быть максимально простыми. Неправильный отчет о неработоспособности влияет на оценку работоспособности и на сценарии, основанные на работоспособности, например обновления. Неправильные отчеты о работоспособности скрывают проблемы в кластере, а это нежелательно.

Для периодической отчетности модуль наблюдения можно реализовать с таймером. При обратном вызове таймера модуль наблюдения может проверить состояние и отправить отчет на основе текущего состояния. При этом не нужны сведения о том, какой отчет был отправлен ранее, и не нужно оптимизировать что-либо в обмене сообщениями. Клиент работоспособности имеет логику для облегчения пакетной обработки. Пока клиент работоспособности активен, внутри него будут повторяться попытки, пока отчет не подтвердится хранилищем данных о работоспособности или модуль наблюдения не создаст новый отчет с теми же сущностью, свойством и источником.

Отчеты о переходах требует тщательной обработки состояния. Модуль наблюдения отслеживает некоторые условия и создает отчет только в случае изменения условий. Преимущество состоит в меньшем количестве отчетов. Минусом является сложность логики модуля наблюдения. Условия или отчеты нужно сохранять, чтобы можно было отследить изменения состояний. При обработке отказа нужно уделить внимание отправке отчета, который, возможно, не удалось отправить ранее (поставлен в очередь, но еще не отправлен в хранилище данных о работоспособности). Порядковый номер должен постоянно увеличиваться, иначе отчеты будут отклонены из-за устаревания. В некоторых случаях после потерь данных может понадобиться синхронизация состояния докладчика с состоянием хранилища данных о работоспособности.

## Реализация отчетов о работоспособности
Мы рассмотрели сущности и отчеты, теперь можно переходить к отправке отчетов о работоспособности с помощью API, Powershell или REST.

### API
Чтобы отправить отчет через API, нужно создать отчет о работоспособности, соответствующий типу сущности, по которому нужен отчет, и передать его клиенту работоспособности.

В приведенном ниже примере показано создание периодических отчетов из модуля наблюдения в кластере. Модуль наблюдения проверяет наличие доступа к внешнему ресурсу с узла. Ресурс необходим манифесту службы в приложении. Если ресурс недоступен, другие службы в приложении могут работать неправильно. Следовательно, отчет отправляется периодически в развернутую сущность пакета службы каждые 30 секунд.

```csharp
private static Uri ApplicationName = new Uri("fabric:/WordCount");
private static string ServiceManifestName = "WordCount.Service";
private static string NodeName = FabricRuntime.GetNodeContext().NodeName;
private static Timer ReportTimer = new Timer(new TimerCallback(SendReport), null, 30 * 1000, 30 * 1000);
private static FabricClient Client = new FabricClient(new FabricClientSettings() { HealthReportSendInterval = TimeSpan.FromSeconds(0) });

public static void SendReport(object obj)
{
    // Test whether the resource can be accessed from the node
    HealthState healthState = this.TestConnectivityToExternalResource();

    // Send report on deployed service package, as the connectivity is needed by the specific service manifest
    // and can be different on different nodes
    var deployedServicePackageHealthReport = new DeployedServicePackageHealthReport(
        ApplicationName,
        ServiceManifestName,
        NodeName,
        new HealthInformation("ExternalSourceWatcher", "Connectivity", healthState));

    // TODO: handle exception. Code omitted for snipet brevity.
    Client.HealthManager.ReportHealth(deployedServicePackageHealthReport);
}
```

### PowerShell
Пользователи могут отправлять отчеты о работоспособности с Send-ServiceFabric*EntityType*HealthReport.

В следующем примере показано создание периодических отчетов по загрузке ЦП на узле. Отчеты должны отправляться каждые 30 секунд, срок их жизни составляет 2 минуты. Если срок хранения истекает, это означает, что возникли проблемы с докладчиком, поэтому узел будет считаться ошибочным. Если загрузка ЦП превышает пороговое значение, состояние работоспособности в отчете —предупреждение, а если загрузка ЦП превышает пороговое значение в течение заданного времени, состоянием работоспособности будет ошибка. В противном случае докладчик отправляет состояние «ОК».

```powershell
PS C:> Send-ServiceFabricNodeHealthReport -NodeName Node.1 -HealthState Warning -SourceId PowershellWatcher -HealthProperty CPU -Description "CPU is above 80% threshold" -TimeToLiveSec 120

PS C:> Get-ServiceFabricNodeHealth -NodeName Node.1
NodeName              : Node.1
AggregatedHealthState : Warning
UnhealthyEvaluations  :
                        Unhealthy event: SourceId='PowershellWatcher', Property='CPU', HealthState='Warning', ConsiderWarningAsError=false.

HealthEvents          :
                        SourceId              : System.FM
                        Property              : State
                        HealthState           : Ok
                        SequenceNumber        : 5
                        SentAt                : 4/21/2015 8:01:17 AM
                        ReceivedAt            : 4/21/2015 8:02:12 AM
                        TTL                   : Infinite
                        Description           : Fabric node is up.
                        RemoveWhenExpired     : False
                        IsExpired             : False
                        Transitions           : ->Ok = 4/21/2015 8:02:12 AM

                        SourceId              : PowershellWatcher
                        Property              : CPU
                        HealthState           : Warning
                        SequenceNumber        : 130741236814913394
                        SentAt                : 4/21/2015 9:01:21 PM
                        ReceivedAt            : 4/21/2015 9:01:21 PM
                        TTL                   : 00:02:00
                        Description           : CPU is above 80% threshold
                        RemoveWhenExpired     : False
                        IsExpired             : False
                        Transitions           : ->Warning = 4/21/2015 9:01:21 PM
```

В следующем примере создается временное предупреждение о реплике. Сначала берется идентификатор раздела и реплики для нужной службы, а затем отправляется отчет из PowershellWatcher о свойстве ResourceDependency. Отчет хранится только 2 минуты, затем автоматически удаляется из хранилища.

```powershell
PS C:> $partitionId = (Get-ServiceFabricPartition -ServiceName fabric:/WordCount/WordCount.Service).PartitionId

PS C:> $replicaId = (Get-ServiceFabricReplica -PartitionId $partitionId | where {$_.ReplicaRole -eq "Primary"}).ReplicaId

PS C:> Send-ServiceFabricReplicaHealthReport -PartitionId $partitionId -ReplicaId $replicaId -HealthState Warning -SourceId PowershellWatcher -HealthProperty ResourceDependency -Description "The external resource that the primary is using has been rebooted at 4/21/2015 9:01:21 PM. Expect processing delays for a few minutes." -TimeToLiveSec 120 -RemoveWhenExpired

PS C:> Get-ServiceFabricReplicaHealth  -PartitionId $partitionId -ReplicaOrInstanceId $replicaId


PartitionId           : 8f82daff-eb68-4fd9-b631-7a37629e08c0
ReplicaId             : 130740415594605869
AggregatedHealthState : Warning
UnhealthyEvaluations  :
                        Unhealthy event: SourceId='PowershellWatcher', Property='ResourceDependency', HealthState='Warning', ConsiderWarningAsError=false.

HealthEvents          :
                        SourceId              : System.RA
                        Property              : State
                        HealthState           : Ok
                        SequenceNumber        : 130740768777734943
                        SentAt                : 4/21/2015 8:01:17 AM
                        ReceivedAt            : 4/21/2015 8:02:12 AM
                        TTL                   : Infinite
                        Description           : Replica has been created.
                        RemoveWhenExpired     : False
                        IsExpired             : False
                        Transitions           : ->Ok = 4/21/2015 8:02:12 AM

                        SourceId              : PowershellWatcher
                        Property              : ResourceDependency
                        HealthState           : Warning
                        SequenceNumber        : 130741243777723555
                        SentAt                : 4/21/2015 9:12:57 PM
                        ReceivedAt            : 4/21/2015 9:12:57 PM
                        TTL                   : 00:02:00
                        Description           : The external resource that the primary is using has been rebooted at 4/21/2015 9:01:21 PM. Expect processing delays for a few minutes.
                        RemoveWhenExpired     : True
                        IsExpired             : False
                        Transitions           : ->Warning = 4/21/2015 9:12:32 PM
```

## Дальнейшие действия

На основе данных о работоспособности создатели служб и администраторы кластеров или приложений могут решить, как использовать полученные сведения. Например, они могут настроить оповещения на основе состояний работоспособности для выявления серьезных проблем, которые могут вызвать простои. Кроме того, можно настроить системы автоматического восстановления, чтобы устранять неполадки автоматически.

[Общие сведения о мониторинге работоспособности в Service Fabric](service-fabric-health-introduction.md)

[Просмотр отчетов о работоспособности Service Fabric](service-fabric-view-entities-aggregated-health.md)

[Использование отчетов о работоспособности системы для устранения неполадок](service-fabric-understand-and-troubleshoot-with-system-health-reports.md)

[Локальный мониторинг и диагностика состояния служб](service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally.md)

[Обновление приложения Service Fabric](service-fabric-application-upgrade.md)
 

<!---HONumber=July15_HO2-->