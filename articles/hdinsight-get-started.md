<properties linkid="manage-services-hdinsight-get-started-hdinsight-hadoop" urlDisplayName="Get Started" pageTitle="Get started using Hadoop in HDInsight | Azure" metaKeywords="" description="Get started using Hadoop in HDInsight, a big data solution. Learn how to provision clusters, run hive jobs, and output data to Excel for analysis." metaCanonical="" services="hdinsight" documentationCenter="" title="Get started using Hadoop in HDInsight" authors="nitinme" solutions="big-data" manager="paulettm" editor="cgronlun" />

<tags ms.service="hdinsight" ms.workload="big-data" ms.tgt_pltfrm="na" ms.devlang="na" ms.topic="article" ms.date="01/01/1900" ms.author="nitinme"></tags>

# Начало работы с Hadoop 2.4 в HDInsight

<div class="dev-center-tutorial-selector sublanding">
<a href="../hdinsight-get-started" title="Начало работы с Hadoop 2.4 в HDInsight" class="current">Hadoop 2.4</a>
<a href="../hdinsight-get-started-30" title="Начало работы с Hadoop 2.2 в HDInsight">Hadoop 2.2</a>
<!--a href="../hdinsight-get-started-21" title="Get started using Hadoop 1.2 in HDInsight">Hadoop 1.2</a-->
</div>

HDInsight делает Apache Hadoop, платформу программного обеспечения MapReduce, доступной в более простой, более масштабируемой и экономически выгодной среде Azure. Кроме того, HDInsight предоставляет экономически эффективный подход к управлению данными и их хранению с использованием хранилища BLOB-объектов Azure.

> [WACOM.NOTE] Если вы новичок в Hadoop и данных большого размера, полезно будет познакомиться подробнее с терминами [Apache Hadoop][], [MapReduce][], [HDFS][] и [Hive][]. Чтобы разобраться, как HDInsight поддерживает Hadoop в Azure, см. [Введение для Hadoop в HDInsight][].

Наряду с выпуском общедоступной версии Azure HDInsight корпорация Майкрософт выпустила также эмулятор HDInsight для Azure, ранее известный как *Microsoft HDInsight Developer Preview*. Этот продукт предназначен для сценариев разработки и поэтому поддерживает только развертывания на одном узле. Сведения об использовании эмулятора HDInsight см. в руководстве [Приступая к работе с эмулятором HDInsight][].

> [WACOM.NOTE] Инструкции по подготовка кластера HBase см. в разделе [Подготовка кластера HBase в HDInsight][]. Для получения информации о выборе того или иного кластера см. в разделе [В чем разница между Hadoop и HBase?][].

## Цели учебника

Предположим, что у вас есть большой набор неструктурированных данных, и необходимо выполнить запросы для извлечения из него содержательной информации. Именно этим мы и собираемся заняться в этом учебнике. Вот как это делается:

![HDI.GetStartedFlow][]

Вы также можете посмотреть видео этого учебника:

<center>
<iframe width="560" height="315" src="http://www.youtube.com/embed/v=Y4aNjnoeaHA?list=PLDrz-Fkcb9WWdY-Yp6D4fTC1ll_3lU-QS" frameborder="0" allowfullscreen>
</iframe>
</center>
<!--center><a href="https://www.youtube.com/watch?v=Y4aNjnoeaHA&list=PLDrz-Fkcb9WWdY-Yp6D4fTC1ll_3lU-QS" target = "_blank">![HDI.getstarted.video][img-hdi-getstarted-video]</a></center-->

**Предварительные требования:**

Перед началом работы с этим учебником необходимо иметь следующее:

-   Подписка Azure. Дополнительные сведения о получении подписки см. в разделах [Варианты приобретения][], [Предложения для участников][] или [Бесплатное пробное использование][].
-   Компьютер с Office 2013 профессиональный плюс, Office 365 профессиональный плюс, Excel 2013 автономный или Office 2010 профессиональный плюс.

**Предполагаемое время выполнения:** 30 минут

## В этом учебнике рассматриваются следующие темы:

-   [Создание учетной записи хранения Azure][]
-   [Подготовка кластера HDInsight][]
-   [Выполнение задания Hive][]
-   [Подключение к средствам бизнес-аналитики Microsoft][]
-   [Дальнейшие действия][]

## <a name="storage"></a>Создайте учетную запись хранения Azure

HDInsight использует для хранения данных хранилище BLOB-объектов Azure. Оно называется *WASB* или *Хранилище Azure — BLOB-объекты*. WASB — это реализация HDFS на базе хранилища BLOB-объектов Azure от корпорации Майкрософт. Дополнительные сведения см. в разделе [Использование хранилища BLOB-объектов Azure с HDInsight][].

При подготовке кластера HDInsight указывается учетная запись хранения Azure Storage. Конкретный контейнер хранилища BLOB-объектов из этой учетной записи назначается в качестве файловой системы по умолчанию, так же как и в HDFS. По умолчанию подготовка кластера HDInsight выполняется в том же центре обработки данных, в котором находится указанная учетная запись хранения.

Помимо этой учетной записи хранения в процессе настройки кластера HDInsight можно добавить дополнительные учетные записи хранения. Эти дополнительные учетные записи хранения могут быть из той же подписки Azure или из других подписок Azure. Указания см. в разделе [Подготовка кластеров HDInsight с использованием настраиваемых параметров][].

Чтобы упростить этот учебник, используются только контейнер BLOB-объектов и учетная запись хранения по умолчанию. На практике файлы данных обыкновенно хранятся в заданной учетной записи хранения.

**Создание учетной записи хранения Azure**

1.  Выполните вход на [Портал управления Azure][].
2.  Щелкните **СОЗДАТЬ** в левом нижнем углу, выберите **СЛУЖБЫ ДАННЫХ**, **ХРАНИЛИЩЕ**, а затем щелкните **БЫСТРО СОЗДАТЬ**.

    ![HDI.StorageAccount.QuickCreate][]

3.  Введите сведения в поля **URL-АДРЕС**, **РАСПОЛОЖЕНИЕ** и **РЕПЛИКАЦИЯ**, а затем щелкните **СОЗДАТЬ УЧЕТНУЮ ЗАПИСЬ ХРАНЕНИЯ**. Территориальные группы не поддерживаются. Вы увидите новую учетную запись хранения в списке хранилищ.

    > [WACOM.NOTE] Если для подготовки кластера HDInsight используется параметр "Быстрое создание", как в этом учебнике, то местоположение при подготовке кластера не указывается. Вместо этого по умолчанию кластер располагается в том же центре обработки данных, что и учетная запись хранения. Таким образом, необходимо создать учетную запись хранения в тех местах, в которых поддерживается кластер, а именно: **Восточная Азия**, **Юго-Восточная**, **Северная Европа**, **Западная Европа**, **Восток США**, **Запад США**, **Северо-центральный регион США**, **Южно-центральный регион США**.

4.  Дождитесь, пока **СОСТОЯНИЕ** новой учетной записи хранения не изменится на **В сети**.
5.  Выберите новую учетную запись хранения в списке и щелкните **УПРАВЛЕНИЕ КЛЮЧАМИ ДОСТУПА** в нижней части страницы.
6.  Запишите **ИМЯ УЧЕТНОЙ ЗАПИСИ ХРАНЕНИЯ** и **ПЕРВИЧНЫЙ КЛЮЧ ДОСТУПА** (или **ВТОРИЧНЫЙ КЛЮЧ ДОСТУПА**. Любой из ключей будет работать). Они потребуются позже в данном руководстве.

Подробные инструкции см. в разделах
[Как создать учетную запись хранения][] и [Использование хранилища BLOB-объектов Azure с HDInsight][].

## <a name="provision"></a>Подготовка кластера HDInsight

При подготовке кластера HDInsight происходит подготовка вычислительных ресурсов Azure, содержащих Hadoop и соответствующие приложения. В этом разделе подготавливается кластер HDInsight версии 3.1 на базе Hadoop версии 2.4. Если хотите, можно подготовить кластер HDInsight с Hadoop версии 2.2. Для этого перейдите по вкладке с определенной версией в начале этой статьи. Кроме этого, можно создать кластеры Hadoop для других версий с использованием командлетов HDInsight PowerShell или с помощью пакета SDK для HDInsight .NET. Указания см. в разделе [Подготовка кластеров HDInsight с использованием настраиваемых параметров][]. Для получения дополнительной информации о различных версиях HDInsight и их соглашениях SLA см. страницу [Версии компонентов НDInsight][].

**Подготовка кластера HDInsight**

1.  Выполните вход на [Портал управления Azure][].

2.  Щелкните **HDInsight** слева, чтобы просмотреть состояние кластеров в вашей учетной записи. На следующем снимке экрана кластеры HDInsight отсутствуют.

    ![HDI.ClusterStatus][]

3.  Щелкните **СОЗДАТЬ** в левой нижней части, выберите **Службы данных**, **HDInsight**, а затем щелкните **Hadoop**.

    ![HDI.QuickCreateCluster][]

4.  Введите или выберите следующие значения:

    | Имя                     | Значение                                                                                                                                                                                                                                                                                                                                                                                                                              |
    |-------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
    | Имя кластера,           | Имя кластера                                                                                                                                                                                                                                                                                                                                                                                                                          |
    | Размер кластера         | Число узлов данных, которые требуется развернуть. Значение по умолчанию — 4. Но кластеры с 1 или 2 узлами данных также доступны в раскрывающемся списке. При использовании варианта **Настраиваемое создание** можно указать любое число узлов данных. Доступны сведения о стоимости использования для различных размеров кластеров. Щелкните символ **?** над раскрывающимся списком и перейдите по ссылке во всплывающей подсказке. |
    | Пароль                  | Пароль для учетной записи *admin*. Если не используется параметр "Настраиваемое создание", имя пользователя кластера указывается как "admin". Обратите внимание, что это НЕ учетная запись администратора Windows для ВМ, на которых происходит подготовка кластеров. Имя учетной записи можно изменить с помощью мастера **Настраиваемое создание**.                                                                                 |
    | Учетная запись хранения | Выберите созданную вами учетную запись хранения в раскрывающемся списке.                                                                                                                                                                                                                                                                                                                                                              
                                После выбора учетной записи хранения изменить ее невозможно. Если удалить учетную запись хранения, кластер будет недоступен для использования. Кластер HDInsight размещается в том же центре обработки данных, что и учетная запись хранения.                                                                                                                                                                                         |

    Сохраните копию имени кластер. Они потребуются позже в данном руководстве.

5.  Щелкните **Создать кластер HDInsight**. После завершения процесса подготовки в столбце состояния будет отображаться **Работает**.

    > [WACOM.NOTE] В результате указанной выше процедуры создается кластер HDInsight версии 3.1. Чтобы создать другие версии кластеров, используйте метод настраиваемого создания на портале управления или Azure PowerShell. Для получения информации о различиях между версиями кластеров см. раздел [Новые возможности версий кластеров, предоставляемых HDInsight][] Для получения дополнительной информации о параметре **НАСТРАИВАЕМОЕ СОЗДАНИЕ** см. раздел [Подготовка кластеров HDInsight с использованием настраиваемых параметров][].

## <a name="sample"></a>Выполнение задания Hive

Теперь, когда у вас есть подготовленный кластер HDInsight, на следующем шаге выполняется задание Hive для запроса примера таблицы Hive, *hivesampletable*, которая поставляется вместе с кластерами HDInsight. Эта таблица содержит данные о производителях мобильных устройств, платформах и моделях. Мы запрашиваем таблицу, чтобы извлечь данные для мобильных устройств определенного производителя.

**Выполнение задания Hive с панели мониторинга кластера**

1.  Выполните вход на [Портал управления Azure][].
2.  На левой панели щелкните **HDINSIGHT**. Вы увидите список созданных кластеров, в том числе кластер, созданный вами в последнем разделе.
3.  Щелкните имя кластера, в котором будет выполняться задание Hive, а затем щелкните **УПРАВЛЕНИЕ КЛАСТЕРОМ** в нижней части страницы.
4.  Откроется веб-страница на отдельной вкладке браузера. Введите учетную запись и пароль пользователя Hadoop. Имя по умолчанию — **admin**; пароль тот же, который вы ввели при подготовке кластера. Панель мониторинга примет следующий вид:

    ![hdi.dashboard][]

    В верхней части имеются несколько вкладок. Вкладка по умолчанию — **Редактор Hive**, остальные вкладки — **Журнал заданий** и **Браузер файлов**. С помощью панели мониторинга можно отправлять запросы Hive, проверять журналы заданий и просматривать файлы WASB.

    > [WACOM.NOTE] Обратите внимание, что у веб-страницы следующий URL-адрес: *\<ClusterName\>.azurehdinsight.net*. Таким образом, вместо открывания панели мониторинга с портала управления, можно открыть ее из веб-браузера, используя этот URL-адрес.

5.  На вкладке **Редактор Hive** в поле **Имя запроса**ведите **HTC20**. Имя запроса представляет собой название задания.

6.  В панели запросов введите следующий запрос:

        SELECT * FROM hivesampletable
            WHERE devicemake LIKE "HTC%"
            LIMIT 20;

    ![hdi.dashboard.query.select][]

7.  Нажмите кнопку **Submit** (Отправить). На получение результатов уходит несколько минут. Экран обновляется каждые 30 секунд. Чтобы обновить экран, можно также нажать кнопку **Обновить**.

    После завершения экран будет выглядеть следующим образом:

    ![hdi.dashboard.query.select.result][]

8.  Чтобы увидеть выходные данные, щелкните имя запроса на экране. Отметьте **Время запуска задания (формат UTC)**. Оно понадобится вам позднее.

    ![hdi.dashboard.query.select.result.output][]

    На странице также отображаются **Выходные данные задания** и **Журнал заданий**. Кроме этого, можно также загрузить выходной файл (\_stdout) и файл журнала (\_stderr).

    > [WACOM.NOTE] В таблице **Сеанс задания** на вкладке **Редактор Hive** перечисляются завершенные или выполняемые задания пока вы находитесь на вкладке. В таблице не перечисляются задания, если перейти с этой страницы. Таблица **Журнал заданий** поддерживает список всех завершенных или выполняемых заданий.

**Переход к выходному файлу**

1.  В панели мониторинга кластера щелкните **Браузер файлов** в верхней части.
2.  Последовательно щелкните имя учетной записи, имя контейнера (совпадает с именем кластера) и **пользователь**.
3.  Щелкните "администратор", а затем щелкните номер GUID, время последнего изменения которого немного позднее времени запуска задания, которое вы отметили ранее. Запомните этот GUID. Он вам понадобится в следующем разделе.

    ![hdi.dashboard.query.browse.output][]

## <a name="powerquery"></a>Подключение к средствам бизнес-аналитики Microsoft

С помощью надстройки Power Query для Microsoft Excel можно импортировать выходные данные задания из HDInsight в Excel, где для дальнейшего анализа результатов могут использоваться средства бизнес-аналитики Microsoft.

Для выполнения действий из этой части учебника требуется Excel 2010 или Excel 2013.

**Загрузка Microsoft Power Query для Excel**

-   Загрузите Microsoft Power Query для Excel из [Центра загрузки Майкрософт][] и установите.

**Чтобы импортировать данные HDInsight, выполните следующие действия:**

1.  Откройте Excel и создайте новую пустую книгу.
2.  Щелкните меню **Power Query**, выберите **Из других источников**, а затем щелкните **Из Windows Azure HDInsight**.

    ![HDI.GettingStarted.PowerQuery.ImportData][]

3.  Введите **Имя учетной записи** учетной записи хранилища BLOB-объектов Azure, связанной с вашим кластером, и нажмите кнопку **ОК**. Это учетная запись хранения, созданная вами ранее в этом учебнике.
4.  Введите **Ключ учетной записи** для учетной записи хранилища BLOB-объектов Azure, а затем нажмите кнопку **Сохранить**.
5.  В области навигатора в правой части окна дважды щелкните имя контейнера хранилища BLOB-объектов. По умолчанию имя контейнера совпадает с именем кластера.

6.  Найдите **stdout** в столбце **Имя**. Проверьте, чтобы GUID в соответствующем столбце "Путь папки" совпадал с GUID, который вы запомнили ранее. Нажмите **Двоичный код** слева от **stdout**.

    ![HDI.GettingStarted.PowerQuery.ImportData2][]

7.  Щелкните **Закрыть и загрузить** в верхнем левом углу для импортирования результатов задания Hive в Excel.

## <a name="nextsteps"></a>Дальнейшие действия

Из этого учебника вы узнали, как подготовить кластер с помощью HDInsight, запустить на нем задание MapReduce и импортировать результаты в Excel для дальнейшей обработки и отображения с использованием средств бизнес-аналитики. Для получения дополнительных сведений ознакомьтесь со следующими статьями:

-   [Приступая к работе с эмулятором HDInsight][]
-   [Использование хранилища BLOB-объектов Azure с HDInsight][]
-   [Администрирование HDInsight с использованием PowerShell][]
-   [Отправка данных в HDInsight][]
-   [Использование MapReduce с HDInsight][]
-   [Использование Hive с HDInsight][]
-   [Использование Pig с HDInsight][]
-   [Использование Oozie с HDInsight][]
-   [Разработка программ потоковой передачи Hadoop на C# для HDInsight][]
-   [Разработка программ MapReduce на Java для HDInsight][]

  [Hadoop 2.4]: ../hdinsight-get-started "Начало работы с Hadoop 2.4 в HDInsight"
  [Hadoop 2.2]: ../hdinsight-get-started-30 "Начало работы с Hadoop 2.2 в HDInsight"
  [Apache Hadoop]: http://go.microsoft.com/fwlink/?LinkId=510084
  [MapReduce]: http://go.microsoft.com/fwlink/?LinkId=510086
  [HDFS]: http://go.microsoft.com/fwlink/?LinkId=510087
  [Hive]: http://go.microsoft.com/fwlink/?LinkId=510085
  [Введение для Hadoop в HDInsight]: ../hdinsight-introduction/
  [Приступая к работе с эмулятором HDInsight]: ../hdinsight-get-started-emulator/
  [Подготовка кластера HBase в HDInsight]: http://azure.microsoft.com/en-us/documentation/articles/hdinsight-hbase-get-started/
  [В чем разница между Hadoop и HBase?]: http://go.microsoft.com/fwlink/?LinkId=510237
  [HDI.GetStartedFlow]: ./media/hdinsight-get-started/HDI.GetStartedFlow.png
  [Варианты приобретения]: http://azure.microsoft.com/en-us/pricing/purchase-options/
  [Предложения для участников]: http://azure.microsoft.com/en-us/pricing/member-offers/
  [Бесплатное пробное использование]: http://azure.microsoft.com/en-us/pricing/free-trial/
  [Создание учетной записи хранения Azure]: #storage
  [Подготовка кластера HDInsight]: #provision
  [Выполнение задания Hive]: #sample
  [Подключение к средствам бизнес-аналитики Microsoft]: #powerquery
  [Дальнейшие действия]: #nextsteps
  [Использование хранилища BLOB-объектов Azure с HDInsight]: ../hdinsight-use-blob-storage/
  [Подготовка кластеров HDInsight с использованием настраиваемых параметров]: ../hdinsight-provision-clusters/
  [Портал управления Azure]: https://manage.windowsazure.com/
  [HDI.StorageAccount.QuickCreate]: ./media/hdinsight-get-started/HDI.StorageAccount.QuickCreate.png
  [Как создать учетную запись хранения]: ../storage-create-storage-account/
  [Версии компонентов НDInsight]: http://azure.microsoft.com/en-us/documentation/articles/hdinsight-component-versioning/
  [HDI.ClusterStatus]: ./media/hdinsight-get-started/HDI.ClusterStatus.png
  [HDI.QuickCreateCluster]: ./media/hdinsight-get-started/HDI.QuickCreateCluster.png
  [Новые возможности версий кластеров, предоставляемых HDInsight]: ../hdinsight-component-versioning/
  [hdi.dashboard]: ./media/hdinsight-get-started/HDI.dashboard.png
  [hdi.dashboard.query.select]: ./media/hdinsight-get-started/HDI.dashboard.query.select.png
  [hdi.dashboard.query.select.result]: ./media/hdinsight-get-started/HDI.dashboard.query.select.result.png
  [hdi.dashboard.query.select.result.output]: ./media/hdinsight-get-started/HDI.dashboard.query.select.result.output.png
  [hdi.dashboard.query.browse.output]: ./media/hdinsight-get-started/HDI.dashboard.query.browse.output.png
  [Центра загрузки Майкрософт]: http://www.microsoft.com/en-us/download/details.aspx?id=39379
  [HDI.GettingStarted.PowerQuery.ImportData]: ./media/hdinsight-get-started/HDI.GettingStarted.PowerQuery.ImportData.png
  [HDI.GettingStarted.PowerQuery.ImportData2]: ./media/hdinsight-get-started/HDI.GettingStarted.PowerQuery.ImportData2.png
  [Администрирование HDInsight с использованием PowerShell]: ../hdinsight-administer-use-powershell/
  [Отправка данных в HDInsight]: ../hdinsight-upload-data/
  [Использование MapReduce с HDInsight]: ../hdinsight-use-mapreduce
  [Использование Hive с HDInsight]: ../hdinsight-use-hive/
  [Использование Pig с HDInsight]: ../hdinsight-use-pig/
  [Использование Oozie с HDInsight]: ../hdinsight-use-oozie/
  [Разработка программ потоковой передачи Hadoop на C# для HDInsight]: ../hdinsight-hadoop-develop-deploy-streaming-jobs/
  [Разработка программ MapReduce на Java для HDInsight]: ../hdinsight-develop-deploy-java-mapreduce/
