<properties urlDisplayName="Staging Deployment" pageTitle="Выполнение развертывания облачной службы в промежуточной среде (Node.js) &mdash; Azure" metaKeywords="Azure staging, Azure application staging, Azure test environment, Azure staging environment, Azure Virtual IP swap, Azure VIP swap" description="Узнайте, как можно сначала выполнить развертывание приложения Azure в промежуточной среде, а затем в рабочей среде с помощью переключения виртуальных IP-адресов (VIP)." metaCanonical=" " services="cloud-services" documentationCenter="nodejs" title="Развертывание приложения в промежуточной среде Azure" authors="larryfr" solutions="" manager="wpickett" editor="" />

<tags ms.service="cloud-services" ms.workload="tbd" ms.tgt_pltfrm="na" ms.devlang="nodejs" ms.topic="article" ms.date="09/17/2014" ms.author="wpickett" />

# Развертывание приложения в промежуточной среде Azure

Упакованное приложение можно развернуть в промежуточной среде
Azure и протестировать его перед развертыванием в рабочей среде,
где оно будет доступно пользователям через Интернет. Промежуточная
среда в точности похожа на рабочую среду, за исключением того,
что доступ к приложению в промежуточной среде возможен только с использованием допустимого URL-адреса
на основе GUID, который создается Azure. Убедившись, что приложение работает
правильно,вы можете развернуть его в рабочей среде,
выполнив переключение виртуальных IP-адресов (VIP).

<div class="dev-callout">
    <b>Примечание.</b>
    <p>Действия, приведенные в этой статье, применяются только к приложениям узла, размещенным в качестве облачной службы Azure.</p>
    </div>

Эта задача включает следующие шаги:

-   [Шаг 1: Развертывание приложения в промежуточной среде][Шаг 1: Развертывание приложения в промежуточной среде]
-   [Шаг 2: Развертывание приложения в рабочей среде путем переключения виртуальных IP-адресов][Шаг 2: Развертывание приложения в рабочей среде путем переключения виртуальных IP-адресов]

## <span id="step1"></span></a>Шаг 1: Развертывание приложения в промежуточной среде

В этой задаче описывается развертывание приложения в промежуточной среде с помощью оболочки **WindowsAzure
PowerShell**.

1.  При публикации службы необходимо просто передать параметр **-Slot** в
    командлет **Publish-AzureServiceProject**.

    **Publish-AzureServiceProject -Slot staging**

2.  Выполните вход на [портал управления Azure][портал управления Azure] и выберите **Облачные службы**. После того, как создана облачная служба, и в столбце состояния **Промежуточная среда** установлено значение **Выполняется**, щелкните имя службы.

    ![портал, на котором отображается выполняющаяся служба][портал, на котором отображается выполняющаяся служба]

3.  Выберите **Панель мониторинга** и нажмите **Промежуточная среда**.

    ![панель мониторинга облачной службы][панель мониторинга облачной службы]

4.  Обратите внимание на значение в поле **URL-адрес сайта** справа. DNS-имя представляет собой образец внутреннего идентификатора, созданного Azure.

    ![URL-адрес сайта][URL-адрес сайта]

Далее необходимо проверить работоспособность приложения с помощью URL-адреса сайта в промежуточной среде.

В сценарии обновления, в котором приложение в промежуточной среде представляет собой обновленную версию ранее развернутого в рабочей среде приложения, вы можете
[обновить приложение в рабочей среде, выполнив переключение виртуальных
IP-адресов][Шаг 2: Развертывание приложения в рабочей среде путем переключения виртуальных IP-адресов].

## <span id="step2"></span></a>Шаг 2: Обновление приложения в рабочей среде путем переключения виртуальных IP-адресов

После проверки обновленной версии приложения в промежуточной среде
вы можете мгновенно опубликовать его в рабочей,
выполнив переключение виртуальных IP-адресов между этими
двумя средами.

<div class="dev-callout">
<b>Примечание.</b>
<p>На этом шаге предполагается, что развертывание приложения
в производственной среде уже выполнено в промежуточной среде
приложения.</p>
</div>

1.  Выполните вход на [портал управления Azure][портал управления Azure],
    щелкните **Облачные службы** и выберите имя службы.

2.  В разделе **Панель мониторинга** выберите **Промежуточная среда** и нажмите кнопку **Переключить** внизу страницы. Откроется диалоговое окно
    переключения виртуального IP-адреса.

    ![диалоговое окно переключения виртуального IP-адреса][диалоговое окно переключения виртуального IP-адреса]

3.  Проверьте данные и нажмите кнопку **ОК**. Обновление обоих развертываний
    начинается в момент переключения промежуточной
    и рабочей сред.

Вы успешно выполнили развертывание в промежуточной среде и обновили
развертывание в рабочей среде, выполнив переключение виртуальных IP-адресов в развертывании в промежуточной среде.

## Дополнительные ресурсы

-   [Развертывание обновления службы путем переключения виртуальных IP-адресов в Azure][Развертывание обновления службы путем переключения виртуальных IP-адресов в Azure]
-   [Обзор управления развертываниями в Azure.][Обзор управления развертываниями в Azure.]

  [Шаг 1: Развертывание приложения в промежуточной среде]: #step1
  [Шаг 2: Развертывание приложения в рабочей среде путем переключения виртуальных IP-адресов]: #step2
  [портал управления Azure]: http://manage.windowsazure.com
  [портал, на котором отображается выполняющаяся служба]: ./media/cloud-services-nodejs-stage-application/staging-cloud-service-running.png
  [панель мониторинга облачной службы]: ./media/cloud-services-nodejs-stage-application/cloud-service-dashboard-staging.png
  [URL-адрес сайта]: ./media/cloud-services-nodejs-stage-application/cloud-service-staging-url.png
  [диалоговое окно переключения виртуального IP-адреса]: ./media/cloud-services-nodejs-stage-application/vip-swap-dialog.png
  [Развертывание обновления службы путем переключения виртуальных IP-адресов в Azure]: http://msdn.microsoft.com/ru-ru/library/windowsazure/ee517253.aspx
  [Обзор управления развертываниями в Azure.]: http://msdn.microsoft.com/ru-ru/library/windowsazure/hh386336.aspx
