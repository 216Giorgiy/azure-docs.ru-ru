<properties linkid="dev-nodejs-enablestaging" urlDisplayName="Развертывание в промежуточной среде" pageTitle="Развертывание облачной службы в промежуточной среде (Node.js) - Azure" metaKeywords="развертывание в промежуточной среде Azure, промежуточная среда приложений Azure, тестовая среда Azure, промежуточная среда Azure, переключение виртуального IP-адреса Azure, переключение VIP Azure" description="Узнайте, как развернуть ваше приложение Azure в промежуточной, а затем в рабочей среде с использованием функции переключения виртуальных IP-адресов (VIP)." metaCanonical=" " services="cloud-services" documentationCenter="Node.js" title="Развертывание приложения в промежуточной среде Azure" authors="" solutions="" manager="" editor="" />







# Развертывание приложения в промежуточной среде Azure

Упакованное приложение можно развернуть в промежуточной среде
Azure и протестировать его перед развертыванием в рабочей среде,
где оно будет доступно пользователям через Интернет. Промежуточная среда
в точности схожа с рабочей средой за исключением того, что
доступ к приложению в промежуточной среде возможен только с использованием допустимого
URL-адреса, который создается Azure. Убедившись, что приложение работает правильно,
вы можете развернуть его в рабочей среде,
выполнив переключение виртуальных IP-адресов (VIP).

<div class="dev-callout">
	<b>Примечание.</b>
	<p>Действия, приведенные в этой статье, применяются только к приложениям узла, размещенным в качестве облачной службы Azure.</p>
	</div>

Эта задача включает следующие шаги:

-   [Шаг 1. Развертывание приложения в промежуточной среде.]
-   [Шаг 2. Развертывание приложения в рабочей среде путем переключения виртуальных IP-адресов.]

<h2><a id="step1"></a>Шаг 1. Развертывание приложения в промежуточной среде</h2>

В этой задаче описывается развертывание приложения в промежуточной среде с помощью оболочки **Windows
Azure PowerShell**.

1.  При публикации службы необходимо просто передать параметр **-Slot** в
    командлет **Publish-AzureServiceProject**.

    **Publish-AzureServiceProject -Slot staging**

2.  Выполните вход на [портал управления Azure] и выберите **Облачные службы**. После того, как создана облачная служба, и в столбце состояния **Промежуточная среда** установлено значение **Выполняется**, щелкните имя службы.

	![портал, на котором отображается выполняющаяся служба][cloud-service]

3.  Выберите **Панель мониторинга** и щелкните **Промежуточная среда**.

	![панель мониторинга облачной службы][cloud-service-dashboard]

4. Обратите внимание на значение в поле **URL-адрес сайта** справа. DNS-имя представляет собой образец внутреннего идентификатора, созданного Azure.

    ![URL-адрес сайта][cloud-service-staging-url]

Далее необходимо проверить работоспособность приложения с помощью URL-адреса сайта в промежуточной среде.

В сценарии обновления, в котором приложение в промежуточной среде представляет собой
обновленную версию ранее развернутого в рабочей среде приложения, вы можете
[обновить приложение в рабочей среде, выполнив переключение
виртуальных IP-адресов][Шаг 2. Развертывание приложения в рабочей среде путем переключения виртуальных IP-адресов].

<h2><a id="step2"></a>Шаг 2. Обновление приложения в рабочей среде путем переключения виртуальных IP-адресов</h2>

После проверки обновленной версии приложения в промежуточной среде
вы можете мгновенно опубликовать его в рабочей,
выполнив переключение виртуальных IP-адресов между этими
двумя средами.

<div class="dev-callout">
<b>Примечание.</b>
<p>Предполагается, что вы опубликовали приложение
в рабочей среде и развернули его обновленную версию в промежуточной
среде.</p>
</div>

1.  Выполните вход на [портал управления Azure],
    щелкните **Облачные службы** и выберите имя службы.

2.  В разделе **Панель мониторинга** выберите **Промежуточная среда** и нажмите кнопку **Переключить** внизу страницы. Откроется диалоговое окно
    "Переключение виртуального IP-адреса".

    ![диалоговое окно переключения виртуального IP-адреса][vip-swap-dialog]

3.  Проверьте данные и нажмите кнопку **ОК**. Обновление обоих развертываний
    начинается в момент переключения промежуточной
    и рабочей сред.

Вы успешно выполнили развертывание в промежуточной среде и обновили развертывание в
рабочей среде, выполнив переключение виртуальных IP-адресов в развертывании в промежуточной среде.

## Дополнительные ресурсы

- [Развертывание обновления службы путем переключения виртуальных IP-адресов в Azure]
- [Обзор управления развертываниями в Azure.]

  [Шаг 1. Развертывание приложения в промежуточной среде.]: #step1
  [Шаг 2. Развертывание приложения в рабочей среде путем переключения виртуальных IP-адресов]: #step2
  [Портал управления Azure]: http://manage.windowsazure.com
[cloud-service]: ./media/cloud-services-nodejs-stage-application/staging-cloud-service-running.png
[cloud-service-dashboard]: ./media/cloud-services-nodejs-stage-application/cloud-service-dashboard-staging.png
  [cloud-service-staging-url]: ./media/cloud-services-nodejs-stage-application/cloud-service-staging-url.png
  [vip-swap-dialog]: ./media/cloud-services-nodejs-stage-application/vip-swap-dialog.png
  [Развертывание обновления службы путем переключения виртуальных IP-адресов в Azure]: http://msdn.microsoft.com/ru-ru/library/windowsazure/ee517253.aspx
  [Обзор управления развертываниями в Azure.]: http://msdn.microsoft.com/ru-ru/library/windowsazure/hh386336.aspx

