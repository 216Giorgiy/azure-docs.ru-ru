<properties 
	pageTitle="Выполнение развертывания облачной службы в промежуточной среде (Node.js) - Azure" 
	description="Узнайте, как можно сначала выполнить развертывание приложения Azure в промежуточной среде, а затем в рабочей среде с помощью переключения виртуальных IP-адресов (VIP)." 
	services="cloud-services" 
	documentationCenter="nodejs" 
	authors="" 
	manager="wpickett" 
	editor=""/>

<tags 
	ms.service="cloud-services" 
	ms.workload="tbd" 
	ms.tgt_pltfrm="na" 
	ms.devlang="nodejs" 
	ms.topic="article" 
	ms.date="09/17/2014" 
	ms.author="wpickett"/>







# Развертывание приложения в промежуточной среде Azure

Упакованное приложение можно развернуть в промежуточной среде в
Azure, чтобы протестировать его перед перемещением в рабочую
среду, где оно будет доступно пользователям через Интернет.  
Промежуточная среда в точности похожа на рабочую среду, за исключением того,
что доступ к приложению в промежуточной среде возможен только с использованием затененного URL-адреса,
который создается Azure. Убедившись, что
приложение работает правильно, вы можете развернуть его в рабочей
среде, выполнив переключение виртуальных IP-адресов.

> [AZURE.NOTE] Действия, приведенные в этой статье, применяются только к приложениям узла, размещенным в качестве облачной службы Azure.

Эта задача включает следующие шаги:

-   [Шаг 1. Развертывание приложения в промежуточной среде]
-   [Шаг 2. Развертывание приложения в рабочей среде путем переключения виртуальных IP-адресов]

<h2><a id="step1"></a>Шаг 1. Развертывание приложения в промежуточной среде</h2>

В этой задаче описывается развертывание приложения в промежуточной среде с помощью оболочки **Windows
Azure PowerShell**.

1.  При публикации службы необходимо просто передать параметр **-Slot** в
    командлет **Publish-AzureServiceProject**.

    **Publish-AzureServiceProject -Slot staging**

2.  Выполните вход на [портал управления Azure](http://manage.windowsazure.com) и выберите **Облачные службы**. После того, как создана облачная служба, и в столбце состояния **Промежуточная среда** установлено значение **Выполняется**, щелкните имя службы.

	![portal displaying a running service][cloud-service]

3.  Выберите **Панель мониторинга** и щелкните **Промежуточная среда**.

	![cloud service dashboard][cloud-service-dashboard]

4. Обратите внимание на значение в поле **URL-адрес сайта** справа. DNS-имя представляет собой образец внутреннего идентификатора, созданного Azure.

    ![site url][cloud-service-staging-url]

Далее необходимо проверить работоспособность приложения с помощью URL-адреса сайта в промежуточной среде.

В сценарии обновления, в котором приложение в промежуточной среде представляет собой обновленную
версию ранее развернутого в рабочей среде приложения, вы можете
[обновить приложение в рабочей среде, выполнив переключение
виртуальных IP-адресов][Шаг 2. Развертывание приложения в рабочей среде путем переключения виртуальных IP-адресов].

<h2><a id="step2"></a>Шаг 2. Обновление приложения в рабочей среде путем переключения виртуальных IP-адресов</h2>

После проверки обновленной версии приложения в
промежуточной среде вы можете мгновенно сделать его доступным в рабочей среде, выполнив
переключение виртуальных IP-адресов (VIP) между промежуточной и рабочей
средами.

> [AZURE.NOTE] На этом шаге предполагается, что развертывание приложения
в производственной среде уже выполнено, а в промежуточной среде
развернута усовершенствованная версия приложения.

1.  Войдите на [портал управления Azure](http://manage.windowsazure.com),
    щелкните **Облачные службы** и выберите имя службы.

2.  В разделе **Панель мониторинга** выберите **Промежуточная среда** и нажмите кнопку **Переключить** внизу страницы. Откроется диалоговое окно "Переключение виртуального IP-адреса"
    диалоговое окно.

    ![vip swap dialog][vip-swap-dialog]

3.  Проверьте данные и нажмите кнопку **ОК**. Обновление обоих развертываний
    начинается в момент переключения промежуточной и
    рабочей сред.

Вы успешно выполнили развертывание в промежуточной среде и обновили развертывание в рабочей среде,
выполнив переключение виртуальных IP-адресов в развертывании в промежуточной среде.

## Дополнительные ресурсы

- [Развертывание обновления службы путем переключения виртуальных IP-адресов в Azure]
- [Обзор управления развертываниями в Azure]

  [Шаг 1. Развертывание приложения в промежуточной среде]: #step1
  [Шаг 2. Развертывание приложения в рабочей среде путем переключения виртуальных IP-адресов]: #step2
  [Портал управления Azure]: http://manage.windowsazure.com
[cloud-service]: ./media/cloud-services-nodejs-stage-application/staging-cloud-service-running.png
[cloud-service-dashboard]: ./media/cloud-services-nodejs-stage-application/cloud-service-dashboard-staging.png
  [cloud-service-staging-url]: ./media/cloud-services-nodejs-stage-application/cloud-service-staging-url.png
  [vip-swap-dialog]: ./media/cloud-services-nodejs-stage-application/vip-swap-dialog.png
  [Развертывание обновления службы путем переключения виртуальных IP-адресов в Azure]: http://msdn.microsoft.com/library/windowsazure/ee517253.aspx
  [Обзор управления развертываниями в Azure]: http://msdn.microsoft.com/library/windowsazure/hh386336.aspx

<!--HONumber=45--> 
