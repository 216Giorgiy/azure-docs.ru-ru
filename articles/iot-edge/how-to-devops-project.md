---
title: Конвейер CI/CD с Azure DevOps Projects — Azure IoT Edge | Документация Майкрософт
description: Azure DevOps Projects упрощает начало работы с Azure. В этой статье вы узнаете, как запустить необходимое приложение Azure IoT Edge за несколько быстрых шагов.
author: shizn
manager: ''
ms.author: xshi
ms.date: 12/04/2018
ms.topic: conceptual
ms.service: iot-edge
services: iot-edge
ms.custom: seodec18
ms.openlocfilehash: ebb7e515f9d9205f364d50b3d686c68a2988f86a
ms.sourcegitcommit: 9fb6f44dbdaf9002ac4f411781bf1bd25c191e26
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/08/2018
ms.locfileid: "53074220"
---
# <a name="create-a-cicd-pipeline-for-iot-edge-with-azure-devops-projects-preview"></a>Создание конвейера CI/CD для IoT Edge с помощью Azure DevOps Projects (предварительная версия)

Настройте непрерывную интеграцию (CI) и непрерывную доставку (CD) для приложения IoT Edge с помощью DevOps Projects. DevOps Projects упрощает начальную настройку конвейера сборки и выпуска в Azure Pipelines.

Если у вас нет активной подписки Azure, перед началом работы создайте [бесплатную учетную запись](https://azure.microsoft.com/free).

## <a name="sign-in-to-the-azure-portal"></a>Вход на портал Azure

DevOps Projects создает конвейер CI/CD в Azure DevOps. Вы можете создать новую организацию Azure DevOps или использовать существующую. DevOps Projects также создает ресурсы Azure в требуемой подписке Azure.

1. Войдите на [портал Microsoft Azure](https://portal.azure.com).

1. В области слева на панели навигации щелкните значок **Создать ресурс** и в поле поиска введите **DevOps Projects**.  

1.  Нажмите кнопку **Создать**.

## <a name="select-a-sample-application-and-azure-service"></a>Выбор примера приложения и службы Azure

1. Модули Azure IoT Edge могут быть написаны на языках [C#](tutorial-csharp-module.md), [Node.js](tutorial-node-module.md), [Python](tutorial-python-module.md), [C](tutorial-c-module.md) и [Java](tutorial-java-module.md). Выберите необходимый язык для запуска нового приложения. Вы также можете выбрать **.NET**, **Node.js**, **Python**, **C** или **Java**, а затем щелкнуть **Далее**.

    ![Выбор языка для создания приложения](./media/how-to-devops-project/select-language.png)

2. Выберите **Simple IoT (Preview)** (Простой Интернет вещей (предварительная версия)), а затем нажмите кнопку **Далее**.

    ![Выбор платформы "Простой Интернет вещей"](media/how-to-devops-project/select-iot.png)

3. Выберите **IoT Edge** и щелкните **Далее**.

    ![Выбор службы IoT Edge](media/how-to-devops-project/select-iot-edge.png)

## <a name="configure-azure-devops-and-an-azure-subscription"></a>настройка Azure DevOps и подписки Azure;

1. Создайте новую бесплатную организацию Azure DevOps или выберите существующую.

    a. Выберите имя для проекта. 

    b. Выберите подписку Azure и расположение, задайте имя приложения и нажмите кнопку **Готово**.  

    ![Выбор имени приложения и его создание](media/how-to-devops-project/select-devops.png)

1. Через несколько минут панель мониторинга DevOps Projects отобразится на портале Azure. Пример приложения IoT Edge настраивается в репозитории в организации Azure DevOps, после чего выполняется его сборка и оно развертывается на устройство IoT Edge. Эта панель мониторинга позволяет просматривать репозиторий кода, конвейер CI/CD и приложение в Azure.

    ![Просмотр приложения на портале DevOps](./media/how-to-devops-project/devops-portal.png)


## <a name="commit-code-changes-and-execute-cicd"></a>Фиксация изменений, внесенных в код, и выполнение CI/CD

DevOps Projects создает репозиторий Git в Azure Repos или на сайте GitHub. Выполните описанные ниже действия, чтобы просмотреть репозиторий и внести изменения в код приложения.

1. В левой части панели мониторинга DevOps Projects выберите ссылку на ветвь **master**.  
Эта ссылка открывает представление созданного репозитория Git.

1. Чтобы просмотреть URL-адрес клона репозитория, щелкните **Клонировать** в правом верхнем углу браузера. Вы можете клонировать репозиторий Git в Visual Studio Code или другие средства. На следующих нескольких шагах вы будете использовать веб-браузер для создания и фиксации изменений кода непосредственно в главной ветви.

    ![Клонирование репозитория Git](media/how-to-devops-project/clone.png)

1. В левой части браузера перейдите к файлу **modules/FilterModule/module.json**.

1. Выберите **Изменить** и внесите изменения в параметр `"version"` в разделе `"tag"`. Например,можно указать значение `"version": "${BUILD_BUILDID}"`, чтобы использовать [переменные сборки Azure DevOps](https://docs.microsoft.com/azure/devops/pipelines/build/variables?view=vsts#build-variables) как часть тега образа модуля Azure IoT Edge.

    ![Изменение версии для принятия переменных сборки](media/how-to-devops-project/update-module-json.png)

1. Выберите **Зафиксировать** и сохраните изменения.

1. В браузере откройте панель мониторинга для проекта Azure DevOps.  Теперь вы должны увидеть, что сборка выполняется. С помощью конвейера CI/CD выполняется автоматическая сборка и развертывание внесенных изменений.

    ![Просмотр состояния выполнения](media/how-to-devops-project/ci-cd-in-progress.png)

## <a name="examine-the-cicd-pipeline"></a>Изучение конвейера CI/CD

На предыдущем этапе конвейер CI/CD автоматически настроен с помощью Azure DevOps Projects для приложения IoT Edge. При необходимости изучите и настройте конвейер. Выполните следующие действия, чтобы ознакомиться с конвейерами сборки и выпуска Azure DevOps.

1. В верхней части панели мониторинга DevOps Projects выберите **Конвейеры сборки**.  
По ссылке откроется вкладка браузера, содержащая сведения о конвейере сборки Azure DevOps для нового проекта.

1. Выберите **Изменить**

    ![Изменение конвейера сборки](media/how-to-devops-project/click-edit-button.png)

1. В этой области можно просмотреть различные задачи для конвейера сборки. Операция сборки выполняет различные задачи, такие как получение исходного кода из репозитория Git, сборка образов модуля IoT Edge, отправка модулей IoT Edge и публикация полученных файлов, используемых для развертывания. Чтобы узнать больше о задачах Azure IoT Edge для непрерывной интеграции, ознакомьтесь с разделом [Настройка непрерывной интеграции в Azure Pipelines](https://docs.microsoft.com/azure/iot-edge/how-to-ci-cd#configure-azure-pipelines-for-continuous-integration).

    ![Просмотр задач непрерывной интеграции](media/how-to-devops-project/ci.png)

1. Выберите имя конвейера сборки в верхней части соответствующей области.

1. Замените имя конвейера сборки более понятным для себя, выберите **Сохранить и поместить в очередь** и нажмите кнопку **Сохранить**.

1. Под именем конвейера сборки щелкните **Журнал**.   
В области **Журнал** можно просмотреть журнал аудита последних изменений сборки.  Azure Pipelines отслеживает все изменения, внесенные в конвейер сборки, и позволяет сравнивать версии.

1. Выберите **Триггеры**. DevOps Projects автоматически создает триггер CI, а каждая фиксация в репозитории запускает новую сборку.  При желании выберите включение или исключение ветвей из процесса непрерывной интеграции.

1. Щелкните **Период удержания**. В зависимости от сценария можно указать политики для хранения или удаления определенного количества сборок.

1. Выберите **Выпуск** в разделе **Конвейеры**. DevOps Projects создает конвейер выпуска для управления развертываниями в Azure IoT Edge.

    ![Просмотр конвейера выпуска](media/how-to-devops-project/release-pipeline.png)

1. Выберите **Изменить** Конвейер выпуска содержит конвейер, определяющий процесс выпуска.  

1. В разделе **Артефакты** выберите **Удалить**. Конвейер сборки, который вы изучали на предыдущих этапах, создает выходные данные для артефакта. 

1. Рядом со значком **Удалить** выберите **Триггер непрерывного развертывания**.  
В этом конвейере выпуска активирован триггер непрерывного развертывания, выполняющий развертывание каждый раз, когда становится доступным новый артефакт сборки. При желании можно отключить триггер, чтобы выполнить развертывание вручную.  

1. В области слева выберите **Задачи**. Задачи — это действия, выполняемые при развертывании. В этом примере задача заключается в развертывании образов модулей в Azure IoT Edge. Чтобы узнать больше о задачах Azure IoT Edge для непрерывной доставки, ознакомьтесь с [этим разделом](https://docs.microsoft.com/azure/iot-edge/how-to-ci-cd#configure-azure-pipelines-for-continuous-deployment).

    ![Просмотр задач непрерывного развертывания](media/how-to-devops-project/dev-release.png)

1. В области справа выберите **Просмотреть выпуски**. В этом представлении можно просмотреть журнал выпусков.

1. Щелкните многоточие (...) рядом с одним из выпусков и выберите **Открыть**.  
В этом представлении доступно несколько меню, например меню сводки по выпуску, меню связанных рабочих элементов и тестов.

1. Щелкните **Фиксации**. В этом представлении отображаются фиксации кода, связанные с определенным развертыванием. 

1. Выберите **Журналы**. Журналы содержат полезную информацию о процессе развертывания. Их можно просматривать как во время, так и после развертывания.


## <a name="clean-up-resources"></a>Очистка ресурсов

Ненужную Службу приложений Azure и связанные ресурсы можно удалить. Для этого воспользуйтесь функцией **Удалить** на панели мониторинга DevOps Projects.

## <a name="next-steps"></a>Дополнительная информация
* Дополнительные сведения о задачах Azure IoT Edge в Azure DevOps см. в статье [Непрерывная интеграция и непрерывное развертывание в Azure IoT Edge](how-to-ci-cd.md).
* Основные сведения о развертывании IoT Edge см. в статье [Understand IoT Edge deployments for single devices or at scale](module-deployment-monitoring.md) (Основные сведения о развертываниях IoT Edge для отдельных устройств или в требуемом масштабе).
* Ознакомьтесь со статьей [Развертывание и мониторинг модулей IoT Edge в нужном масштабе (предварительная версия)](how-to-deploy-monitor.md), чтобы узнать, как создавать, обновлять или удалять развертывание.
