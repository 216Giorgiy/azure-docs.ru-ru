---
title: Отладка модулей C# с помощью Azure IoT Edge | Документация Майкрософт
description: Выполняйте отладку модуля C# с помощью Azure IoT Edge в Visual Studio Code с использованием Visual Studio Code.
author: shizn
manager: ''
ms.author: xshi
ms.date: 03/18/2018
ms.topic: conceptual
ms.service: iot-edge
services: iot-edge
ms.openlocfilehash: 5d521a4e5b22222f0b0a5505f14684598d7d5b0a
ms.sourcegitcommit: 266fe4c2216c0420e415d733cd3abbf94994533d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/01/2018
ms.locfileid: "34631400"
---
# <a name="use-visual-studio-code-to-debug-a-c-module-with-azure-iot-edge"></a>Использование Visual Studio Code для отладки модуля C# с помощью Azure IoT Edge
В этой статье приведены подробные инструкции по использованию [Visual Studio (VS) Code](https://code.visualstudio.com/) в качестве основного средства для отладки модулей Azure IoT Edge.

## <a name="prerequisites"></a>предварительным требованиям
В этой статье предполагается, что для разработки вы используете компьютер или виртуальную машину под управлением Windows или Linux. Устройством IoT Edge может быть другое физическое устройство или имитация устройства, запущенная на компьютере разработки.

> [!NOTE]
> Модуль C# можно отлаживать только в контейнерах linux-amd64.

Перед выполнением инструкции в этой статье, выполните действия, описанные в статье о [разработке решения IoT Edge с несколькими модулями в Visual Studio Code](tutorial-multiple-modules-in-vscode.md). После этого должны быть готовы следующие элементы:
- Локальный реестр Docker, запущенный на компьютере разработки. Рекомендуем использовать локальный реестр Docker для создания прототипов и тестирования. Можно обновить реестр контейнеров в файле `module.json` каждой папки модулей.
- Рабочая область проекта решения IoT Edge вложенной папкой модуля C#.
- Файл `Program.cs` с последним кодом модуля.
- Среда выполнения Edge, выполняемая на компьютере разработки.

## <a name="build-your-iot-edge-c-module-for-debugging"></a>Сборка модуля C# для IoT Edge для отладки
1. Чтобы начать отладку, повторно выполните сборку образа Docker с помощью **Dockerfile.amd64.debug** и повторно разверните решение Edge. В проводнике VS Code перейдите к файлу `deployment.template.json`. Обновите URL-адрес образа функции, добавив `.debug` в конце.

2. Перестройте решение. В палитре команд VS Code введите и выполните команду **Edge: Build IoT Edge solution**.

3. В обозревателе устройств Центра Интернета вещей Azure щелкните правой кнопкой мыши идентификатор устройства IoT Edge и выберите **Create deployment for Edge device** (Создать развертывание для устройства Edge). Выберите файл `deployment.json` в папке `config`. Ход развертывания можно отслеживать с помощью идентификатора развертывания во встроенном терминале VS Code.

Чтобы проверить состояние контейнера, откройте обозреватель кода Docker VS или выполните команду `docker images` в окне терминала.

## <a name="start-debugging-c-module-in-vs-code"></a>Запуск модуля отладки C# в VS Code
1. VS Code хранит информацию о конфигурации отладки в файле `launch.json`, расположенном в папке `.vscode` рабочей области. Этот файл `launch.json` создан при создании решения IoT Edge. Он автоматически обновляется при каждом добавлении нового модуля, который поддерживает отладку. Перейдите к представлению отладки и выберите соответствующий файл конфигурации отладки.
    ![Выбор конфигурации отладки](./media/how-to-debug-csharp-function/select-debug-configuration.jpg)

2. Перейдите на страницу `program.cs`. Добавьте точку останова в этот файл.

3. Нажмите кнопку **Начать отладку** или клавишу **F5**, затем выберите процесс для присоединения.

4. В представлении отладки VS Code можно просмотреть переменные на панели слева. 

> [!NOTE]
> В предыдущем примере показаны способы отладки модулей в контейнерах .NET Core IoT Edge. Они основаны на отладочной версии файла `Dockerfile.debug`, который при сборке образа контейнера включает в него отладчик командной строки .NET Core (VSDBG). После отладки модулей C# рекомендуется непосредственно использовать или настраивать файл `Dockerfile` без VSDBG для готовых модулей IoT Edge.

## <a name="next-steps"></a>Дополнительная информация

[Использование Visual Studio Code для отладки решения "Функции Azure" с помощью Azure IoT Edge](how-to-vscode-debug-azure-function.md)

