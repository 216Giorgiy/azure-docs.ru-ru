---
title: Использование Visual Studio Code для отладки модуля C# с помощью Azure IoT Edge | Документация Майкрософт
description: Отладка модуля C# с помощью Azure IoT Edge в Visual Studio Code.
services: iot-edge
keywords: ''
author: shizn
manager: timlt
ms.author: xshi
ms.date: 03/18/2018
ms.topic: article
ms.service: iot-edge
ms.openlocfilehash: c2a1acd2c249bdbc92119bc92f055b095f318f00
ms.sourcegitcommit: d74657d1926467210454f58970c45b2fd3ca088d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2018
---
# <a name="use-visual-studio-code-to-debug-a-c-module-with-azure-iot-edge"></a>Использование Visual Studio Code для отладки модуля C# с помощью Azure IoT Edge
В этой статье приведены подробные инструкции по использованию [Visual Studio Code](https://code.visualstudio.com/) в качестве основного средства для отладки модулей Azure IoT Edge.

## <a name="prerequisites"></a>предварительным требованиям
В этом руководстве предполагается, что в качестве компьютера для разработки вы используете компьютер или виртуальную машину под управлением Windows или Linux. Устройством IoT Edge может быть другое физическое устройство или имитация устройства, запущенная на компьютере разработки.

Перед началом работы необходимо выполнить инструкции из такого руководства:
- [Разработка решения IoT Edge с несколькими модулями в Visual Studio Code](tutorial-multiple-modules-in-vscode.md)

Когда вы выполните предыдущее руководство, вы подготовите следующие элементы:
- Локальный реестр Docker, запущенный на компьютере разработки. Рекомендуем использовать локальный реестр Docker для создания прототипов и тестирования. Можно обновить реестр контейнеров в файле `module.json` каждой папки модулей.
- Рабочая область проекта решения IoT Edge вложенной папкой модуля C#.
- Файл `Program.cs` с последним кодом модуля.
- Среда выполнения Edge, выполняемая на компьютере разработки.

## <a name="build-your-iot-edge-c-module-for-debugging"></a>Сборка модуля C# для IoT Edge для отладки
1. Чтобы начать отладку, повторно выполните сборку образа Docker с помощью **Dockerfile.amd64.debug** и повторно разверните решение Edge. В проводнике VS Code перейдите к файлу `deployment.template.json`. Обновите URL-адрес образа функции, добавив `.debug` в конце.

2. Перестройте решение. В палитре команд VS Code введите и выполните команду **Edge: Build IoT Edge solution**.

3. В обозревателе устройств Центра Интернета вещей Azure щелкните правой кнопкой мыши идентификатор устройства IoT Edge и выберите **Create deployment for Edge device** (Создать развертывание для устройства Edge). Выберите `deployment.json` в папке `config`. Ход развертывания можно отслеживать с помощью идентификатора развертывания во встроенном терминале VS Code.

> [!NOTE]
> Чтобы проверить состояние контейнера, откройте обозреватель кода Docker VS или выполните команду `docker images` в окне терминала.

## <a name="start-debugging-c-module-in-vs-code"></a>Запуск модуля отладки C# в VS Code
1. VS Code хранит информацию о конфигурации отладки в файле `launch.json`, расположенном в папке `.vscode` рабочей области. Этот файл `launch.json` был создан при создании нового решения IoT Edge. Он будет автоматически обновляться при каждом добавлении нового модуля, который поддерживает отладку. Перейдите к представлению отладки и выберите соответствующий файл конфигурации отладки.
    ![Выбор конфигурации отладки](./media/how-to-debug-csharp-function/select-debug-configuration.jpg)

2. Перейдите на страницу `program.cs`. Добавьте точку останова в этот файл.

3. Нажмите кнопку "Начать отладку" или клавишу **F5**, затем выберите процесс для присоединения.

4. В представлении отладки VS Code можно просмотреть переменные на панели слева. 

> [!NOTE]
> В предыдущем примере показаны способы отладки модулей в контейнерах .NET Core IoT Edge. Они основаны на отладочной версии файла `Dockerfile.debug`, который при сборке образа контейнера включает в него отладчик командной строки .NET Core (VSDBG). После отладки модулей C# рекомендуется непосредственно использовать или настраивать файл `Dockerfile` без VSDBG для готовых модулей IoT Edge.

## <a name="next-steps"></a>Дополнительная информация

В этом руководстве вы создали модуль IoT Edge и развернули его для отладки. Вы начали делать его отладку в VS Code. Чтобы узнать о других сценариях при разработке Azure IoT Edge в VS Code, см. статью: 

> [!div class="nextstepaction"]
> [Разработка решения IoT Edge с несколькими модулями в Visual Studio Code](tutorial-multiple-modules-in-vscode.md)

