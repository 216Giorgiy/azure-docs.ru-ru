---
title: Разработка модулей для Azure IoT Edge | Документация Майкрософт
description: Разработка пользовательских модулей для Azure IoT Edge, способных взаимодействовать со средой выполнения и Центром Интернета вещей
author: kgremban
manager: philmea
ms.author: kgremban
ms.date: 10/05/2017
ms.topic: conceptual
ms.service: iot-edge
services: iot-edge
ms.custom: seodec18
ms.openlocfilehash: 50e9c0667761e43c63b03fbaf5f8ce93eb49e749
ms.sourcegitcommit: 9fb6f44dbdaf9002ac4f411781bf1bd25c191e26
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/08/2018
ms.locfileid: "53100095"
---
# <a name="understand-the-requirements-and-tools-for-developing-iot-edge-modules"></a>Сведения о требованиях и средствах разработки модулей IoT Edge

В этой статье объясняется, какие функции доступны, если создать приложения, работающие в качестве модуля IoT Edge, и как их использовать.

## <a name="iot-edge-runtime-environment"></a>Среда выполнения IoT Edge
Среда выполнения IoT Edge предоставляет инфраструктуру для интеграции функциональных возможностей нескольких модулей IoT Edge и их развертывания на пограничных устройствах Интернета вещей. На высоком уровне любую программу можно упаковать в виде модуля IoT Edge. Однако, чтобы воспользоваться всеми преимуществами взаимодействия и управления IoT Edge, программу, работающую в модуле, нужно подключить к локальному концентратору IoT Edge, интегрированному в среде выполнения IoT Edge.

## <a name="using-the-iot-edge-hub"></a>Использование концентратора IoT Edge
Концентратор IoT Edge предоставляет две основные функции: прокси-сервер для Центра Интернета вещей и локальные подключения.

### <a name="iot-hub-primitives"></a>Основные сведения о Центре Интернета вещей
Центр Интернета вещей рассматривает экземпляр модуля как устройство, в том смысле, что он:

* имеет двойник модуля, который является уникальным и изолирован от [двойника устройства](../iot-hub/iot-hub-devguide-device-twins.md) и других двойников модуля этого устройства;
* может отправлять [сообщения с устройства в облако](../iot-hub/iot-hub-devguide-messaging.md);
* может получать [прямые методы](../iot-hub/iot-hub-devguide-direct-methods.md), специально предназначенные для него.

Сейчас модуль не может получать сообщения из облака на устройство или использовать функцию передачи файлов.

При записи модуля можно воспользоваться [пакетом SDK для устройств Azure IoT](../iot-hub/iot-hub-devguide-sdks.md), чтобы подключиться к концентратору IoT Edge и получить доступ к описанным выше возможностям, как и при использовании Центра Интернета вещей с приложением устройства. Единственная разница заключается в том, что из серверной части вашего приложения необходимо ссылаться на идентификатор модуля, а не устройства.

Пример приложения модуля, которое отправляет сообщения с устройства в облако и использует двойник модуля, см. в статье [Руководство по разработке модуля IoT Edge с кодом C# и его развертывание на имитированном устройстве](tutorial-csharp-module.md).

### <a name="device-to-cloud-messages"></a>Отправка сообщений с устройства в облако
Чтобы разрешить сложную обработку сообщений с устройства в облако, концентратор IoT Edge предоставляет декларативную маршрутизацию сообщений между самими модулями и модулями и Центром Интернета вещей. Декларативная маршрутизация позволяет модулям перехватывать и обрабатывать сообщения, отправленные другими модулями, и распространять их в сложные конвейеры. В статье [Сведения об использовании манифестов развертывания для развертывания модулей и установки маршрутов](module-composition.md) объясняется, как составлять модули в сложные конвейеры с помощью маршрутов.

Модуль IoT Edge, в отличие от обычного приложения устройства Центра Интернета вещей, может получать сообщения с устройства в облако, которые передаются его локальному центру IoT Edge для обработки.

Концентратор IoT Edge передает сообщения в ваш модуль на основе декларативных маршрутов, описанных в статье [Сведения об использовании манифестов развертывания для развертывания модулей и установки маршрутов](module-composition.md). При разработке модуля IoT Edge вы можете получать эти сообщения, настроив обработчики сообщений.

Для упрощения создания маршрутов IoT Edge добавляет понятие *входных* и *выходных* конечных точек модуля. Модуль может получать и отправлять все сообщения с устройства в облако, предназначенные для него, не указывая входные и выходные данные (соответственно).
Использование явных входов и выходов упрощает правила маршрутизации. Дополнительные сведения о правилах маршрутизации и конечных точках ввода и вывода для модулей см. в статье [Сведения об использовании манифестов развертывания для развертывания модулей и установки маршрутов](module-composition.md).

Сообщения с устройства в облако, обрабатываемые концентратором Edge, имеют следующие свойства системы:

| Свойство | ОПИСАНИЕ |
| -------- | ----------- |
| $connectionDeviceId | Идентификатор устройства клиента, отправившего сообщение. |
| $connectionModuleId | Идентификатор модуля, отправившего сообщение. |
| $inputName | Входная конечная точка, получившая это сообщение. Это свойство может быть пустым. |
| $outputName | Выходная конечная точка, используемая для отправки сообщения. Это свойство может быть пустым. |

### <a name="connecting-to-iot-edge-hub-from-a-module"></a>Подключение к концентратору IoT Edge из модуля
Подключение к локальному центру IoT Edge из модуля состоит из двух этапов: 
1. Используйте строку подключения, предоставляемую средой выполнения IoT Edge при запуске модуля.
2. Убедитесь, что приложение принимает сертификат, предоставленный центром IoT Edge на этом устройстве.

Используемая строка подключения, выданная средой выполнения IoT Edge, содержится в переменной среды `EdgeHubConnectionString`. Это делает ее доступной для любой программы, которой необходимо ее использовать.

Аналогично сертификат, используемый для проверки подключения концентратора IoT Edge, указан средой выполнения IoT Edge в файле, путь которого доступен в переменной среды `EdgeModuleCACertificateFile`.

## <a name="next-steps"></a>Дополнительная информация

После разработки модуля узнайте, как [развертывать и отслеживать модули IoT Edge в нужном масштабе](how-to-deploy-monitor.md).

