<properties
	pageTitle="Вход из интерфейса командной строки Azure (Azure CLI) | Microsoft Azure"
	description="Подключение к среде Azure с использованием интерфейса командной строки Azure (Azure CLI)"
	editor="tysonn"
	manager="timlt"
	documentationCenter=""
	authors="dlepow"
	services=""/>

<tags
	ms.service="multiple"
	ms.workload="multiple"
	ms.tgt_pltfrm="command-line-interface"
	ms.devlang="na"
	ms.topic="article"
	ms.date="06/09/2015"
	ms.author="danlep"/>

# Подключение к среде Azure с использованием интерфейса командной строки Azure (Azure CLI)

Azure CLI представляет собой набор межплатформенных команд с открытым кодом для работы с платформой Azure. В этом документе объясняется, как подключиться к подписке Azure из интерфейса Azure CLI. Инструкции по установке см. в статье [Установка Azure CLI](xplat-cli-install.md).

<a id="configure"></a>
## Подключение к подписке Azure

Для выполнения большинства команд Azure CLI необходимо подключение к учетной записи Azure. Настроить Azure CLI для работы с подпиской можно двумя способами.

* Войдите в Azure, используя учетную запись своей компании или учебного заведения (она также называется учетной записью организации или рабочей учетной записью). В этом случае для проверки подлинности учетных данных используется система Azure Active Directory.

или

* Скачайте и используйте файл параметров публикации. При этом устанавливается сертификат, который позволяет выполнять различные задачи управления в течение всего срока действия подписки и сертификата.

Дополнительные сведения о проверке подлинности и управлении подписками см. в разделе ["Различия между способами проверки подлинности на основе учетной записи и сертификата"][authandsub].

Если ее нет, можно создать бесплатную пробную учетную запись всего за несколько минут. Дополнительные сведения см. в разделе [Бесплатная пробная версия Azure][free-trial].

> [AZURE.NOTE]Наиболее гибкие и функциональные службы Azure используют диспетчер ресурсов Azure или [режим ARM](xplat-cli-azure-resource-manager.md). Для работы в режиме ARM необходимо подключиться к среде Azure с учетной записи компании или учебного заведения описанным ниже способом.

### Использование метода входа

Этот метод входа действителен только для рабочей учетной записи. Это учетная запись, которая управляется организацией и определена в ее каталоге Azure Active Directory.

> [AZURE.NOTE]Если вы используете для входа в подписку Azure личную учетную запись, вы можете создать рабочую учетную запись, выполнив перечисленные ниже действия.
>
> 1. Войдите на [портал Azure][portal] и щелкните **Active Directory**.
>
> 2. Если каталог не существует, выберите **Создание каталога** и укажите нужные данные.
>
> 3. Выберите каталог и добавьте нового пользователя. Этот пользователь будет соответствовать вашей рабочей учетной записи.
>
>     При создании пользователя вам будут предоставлены электронной адрес и временный пароль. Сохраните эти сведения.
>
> 4. На портале Azure выберите **Параметры**, а затем **Администраторы**. Щелкните **Добавить**, чтобы добавить нового пользователя в качестве соадминистратора. Это позволит использовать вашу рабочую учетную запись для управления подпиской Azure.
>
> 5. Выйдите из портала Azure, а затем войдите снова с использованием рабочей учетной записи. При первом входе в учетную запись появится запрос на изменение пароля.
>
> 6. Проверьте, отображаются ли ваши подписки при входе с рабочей учетной записью.
>
>Дополнительные сведения о рабочих учетных записях см. в статье [Подпишитесь на Azure как организация][signuporg].

Чтобы войти из интерфейса Azure CLI с использованием рабочей учетной записи, выполните следующую команду:

	azure login -u <username>

В ответ на запрос введите свой пароль.

> [AZURE.NOTE]При первом входе с использованием этих учетных данных вам будет предложено настроить кэширование токена проверки подлинности. Кроме того, аналогичный запрос появляется в том случае, если вы ранее использовали команду `azure logout`, которая описывается ниже. Чтобы пропустить этот запрос в сценариях автоматизации, добавьте параметр `-q` к команде `azure login`.

Чтобы выйти из системы, введите следующую команду:

	azure logout -u <username>

> [AZURE.NOTE]Если для проверки подлинности подписок, связанных с учетной записью, использовался только Active Directory, при выходе из системы данные о подписке удаляются из локального профиля. Однако если вы также импортировали файл параметров публикации для подписок, то при выходе из системы из локального профиля удаляются только данные, относящиеся к Active Directory.

### Использование файла параметров публикации

> [AZURE.NOTE]При подключении этим способом можно использовать только команды управления службами Azure (режим ASM).

Чтобы загрузить параметры публикации для вашей учетной записи, воспользуйтесь следующей командой:

	azure account download

Откроется браузер по умолчанию, и появится приглашение для входа на [портал Azure][portal]. После входа будет загружен файл `.publishsettings`. Запишите место сохранения этого файла.

> [AZURE.NOTE]Если ваша учетная запись связана с несколькими клиентами Azure Active Directory, может появиться запрос на выбор службы Active Directory, для которой следует загрузить файл параметров публикации.
>
> После выбора на странице скачивания или на портале Azure соответствующая служба Active Directory становится службой каталогов по умолчанию, которая будет использоваться на портале и странице скачивания. После определения службы каталогов по умолчанию в верхней части страницы загрузки появится текст "__щелкните здесь, чтобы вернуться на страницу выбора__". Используйте предоставленную ссылку, чтобы вернуться на страницу выбора.

Затем импортируйте файл `.publishsettings` с помощью следующей команды:

	azure account import <path to your .publishsettings file>

После импорта параметров публикации удалите файл `.publishsettings`, так как он больше не используется интерфейсом Azure CLI и представляет угрозу безопасности, поскольку может быть использован для получения доступа к подписке.

> [AZURE.NOTE]При входе с рабочей учетной записью или импорте параметров публикации информация о доступе к подписке Azure сохраняется в папке `.azure`, расположенной в каталоге `user`. Каталог `user` защищен операционной системой, однако рекомендуется принять дополнительные меры для его шифрования. Это можно сделать одним из следующих способов:
>
> * В ОС Windows измените свойства каталога или используйте BitLocker.
> * В ОС Mac включите FileVault для этого каталога.
> * В ОС Ubuntu используйте функцию каталога Encrypted Home. В других дистрибутивах Linux есть аналогичные функции.

### Несколько подписок

Если у вас есть несколько подписок Azure, при подключении вы получаете доступ ко всем подпискам, связанным с вашими учетными данными. При этом одна подписка выбирается по умолчанию и используется для выполнения операций в Azure CLI. Вы можете просмотреть подписки, а также узнать, какая из них используется по умолчанию, с помощью команды `azure account list`. Эта команда возвращает сведения, аналогичные следующим:

	info:    Executing command account list
	data:    Name              Id                                    Current
	data:    ----------------  ------------------------------------  -------
	data:    Azure-sub-1       ####################################  true
	data:    Azure-sub-2       ####################################  false

В приведенном выше списке **Current** означает текущую подписку по умолчанию Azure-sub-1. Для изменения подписки по умолчанию используйте команду `azure account set`, указав соответствующую подписку. Например:

	azure account set Azure-sub-2

Это приведет к изменению подписки по умолчанию на Azure-sub-2.

> [AZURE.NOTE]Изменение подписки по умолчанию вступает в силу сразу же и является глобальным. Новые команды Azure CLI (запускаемые как из того же, так и из другого экземпляра командной строки) будут использовать новую подписку по умолчанию.

Если вы хотите при работе с Azure CLI использовать подписку, которая не выбрана по умолчанию, но не хотите менять текущие настройки, вы можете использовать параметр `--subscription`, указав имя подписки, которую следует использовать для данной операции.

Подключившись к подписке Azure, можно приступать к использованию команд Azure CLI. Дополнительные сведения см. в статье [Использование Azure CLI](xplat-cli.md).

<a id="additional-resources"></a>
## Дополнительные ресурсы

* [Использование межплатформенного интерфейса командной строки Microsoft Azure совместно с диспетчером служб][cliasm]

* [Использование межплатформенного интерфейса командной строки Microsoft Azure совместно с диспетчером ресурсов][cliarm]

* Найти дополнительные сведения об интерфейсе Azure CLI, загрузить исходный код, сообщить о проблеме или внести свой вклад в проект можно на странице[репозитория GitHub для Azure CLI](https://github.com/azure/azure-xplat-cli).

* Если у вас возникли проблемы с использованием Azure CLI или Azure, посетите [форумы Azure](http://social.msdn.microsoft.com/Forums/windowsazure/home).

* Дополнительную информацию об Azure см. на сайте [http://azure.microsoft.com/](http://azure.microsoft.com).





[authandsub]: http://msdn.microsoft.com/library/windowsazure/hh531793.aspx#BKMK_AccountVCert
[free-trial]: http://azure.microsoft.com/pricing/free-trial/
[portal]: https://manage.windowsazure.com
[signuporg]: http://azure.microsoft.com/documentation/articles/sign-up-organization/
[cliasm]: virtual-machines/virtual-machines-command-line-tools.md
[cliarm]: virtual-machines/xplat-cli-azure-resource-manager.md

<!---HONumber=July15_HO3-->