<properties 
	pageTitle="Масштабирование веб-приложения в службе приложений Azure" 
	description="Увеличение и уменьшение масштаба, а также автоматическое масштабирование веб-приложения в службе приложений Azure." 
	services="app-service\web" 
	documentationCenter="" 
	authors="cephalin" 
	manager="wpickett" 
	editor="mollybos"/>

<tags 
	ms.service="app-service-web" 
	ms.workload="web" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="03/23/2015" 
	ms.author="cephalin"/>

# Масштабирование веб-приложения в службе приложений Azure #

Для повышения производительности и пропускной способности веб-приложений в Microsoft Azure и для включения дополнительных функций, необходимых организации, можно масштабировать режим плана службы приложений на портале управления Azure с Free на Shared, Basic, Standard и Premium (предварительная версия). 

Увеличение масштаба веб-приложений Azure включает в себя два связанных действия: изменение режима плана службы приложений до более высокого уровня обслуживания и настройка определенных параметров после переключения на более высокий уровень обслуживания. В данной статье рассматриваются оба этих действия. Более высокие уровни обслуживания, такие как режим "Стандартный", обеспечивают повышение надежности и гибкости при определении способа использования ресурсов в Azure.

Смена режима и их настройка легко выполняются на вкладке "Масштаб" портала управления. При необходимости можно выполнять масштабирование вверх или вниз. Применение этих изменений занимает секунды и влияет на все веб-приложения в плане службы. Они не требуют ни изменения кода, ни повторного развертывания приложений.

Сведения о планах служб приложений (прежнее название - планы веб-размещения) см. в разделах [Чтобы такое план размещения службы приложений?](web-sites-web-hosting-plan-overview.md) и [Подробный обзор планов размещения службы приложений Azure](azure-web-sites-web-hosting-plans-in-depth-overview.md). Сведения о ценах и функциях отдельных планов службы приложений см. в разделе [Сведения о ценах службы приложений](http://http://azure.microsoft.com/pricing/details/web-sites/).  

> [AZURE.NOTE] Перед переключением веб-приложения с режима **Free** в режим **Basic** или **Standard** нужно сначала удалить предельную сумму расходов в подписке на службу приложений Azure. Сведения о просмотре или изменении параметров подписки на службу приложений Microsoft Azure см. в разделе [Подписки Microsoft Azure][azuresubscriptions].

<a name="scalingsharedorbasic"></a>
<!-- ===================================== -->
## Масштабирование службы приложений до режима плана Shared или Basic
<!-- ===================================== -->

1. В браузере откройте [портал Azure][portal].
	
2. В колонке веб-приложения последовательно щелкните пункты **Все параметры**, **Масштаб**, **Обновить план Free, добавив экземпляры и повысив производительность**.
	
	![Choose Hosting Plan][ChooseWHP]
	
4. В колонке **Выбор ценовой категории** укажите режим **Shared** или **Basic**, а затем щелкните **Выбрать**.

	После завершения операции на вкладке **Уведомления** появится зеленая надпись **ВЫПОЛНЕНО**. 
	
5. Перетащите ползунок **Экземпляр** вправо, чтобы увеличить количество экземпляров, а затем щелкните в командной строке **Сохранить**. Параметр размера экземпляра недоступен в режиме **Shared**. Дополнительные сведения о размерах экземпляров см. в разделе [Размеры виртуальных машин и облачных служб для Microsoft Azure][vmsizes].
	
	![Instance size for Basic mode][ChooseBasicInstances]
	
	После завершения операции на вкладке **Уведомления** появится зеленая надпись **ВЫПОЛНЕНО**. 
	
<a name="scalingstandard"></a>
<!-- ================================= -->
## Масштабирование службы приложений до режима плана Standard
<!-- ================================= -->

> [AZURE.NOTE] Перед переключением плана службы приложений с режима **Free** на **Standard** нужно удалить предельную сумму расходов в подписке на службу приложений Azure. В противном случае веб-сайт может стать недоступным при достижении ограничений до истечения расчетного периода. Сведения о просмотре или изменении параметров подписки на службу приложений Microsoft Azure см. в разделе [Подписки Microsoft Azure][azuresubscriptions].

1. Для масштабирования до режима **Standard** выполните те же начальные шаги, которые использовались при масштабировании до плана **Shared** или **Basic**, а затем укажите режим **Standard** в меню **Выбор ценовой категории** и щелкните **Выбрать**. 
	
	После завершения операции на вкладке **Уведомления** появится зеленая надпись **ВЫПОЛНЕНО** и будет включен **Режим автомасштабирования**.

	![Scale in Standard Mode][ScaleStandard]

	Вы по-прежнему можете перетащить ползунок **Экземпляр** для увеличения количества экземпляров вручную, как показано выше, для режима **Basic**. Однако здесь вы узнаете, как использовать **Режим автомасштабирования**. 

2. В разделе **Режим автомасштабирования** выберите **Производительность**, чтобы выполнить автомасштабирование на основе метрик.
	
	![Autoscale Mode set to Performance][Autoscale]
	
3. В разделе **Диапазон количества экземпляров** переместите два ползунка на значения минимального и максимального количества экземпляров, чтобы выполнить автоматическое масштабирование плана службы приложений. В этом учебнике переместите ползунок максимального количества на **6** экземпляров.

4. Щелкните в командной строке **Сохранить**.

4. В разделе **Целевые метрики** щелкните **>**, чтобы настроить правила автомасштабирования для метрик по умолчанию.  
	
	![Set Target Metrics][SetTargetMetrics]
	
	Вы можете настроить правила автомасштабирования для разных метрик производительности, включая ЦП, память, очередь диска, очередь HTTP и поток данных. Здесь вы настроите автомасштабирование процента ЦП следующим образом:

	- Увеличение масштаба на один экземпляр, если загрузка ЦП была больше 70 % в течение последних 10 минут
	- Увеличение масштаба на три экземпляра, если загрузка ЦП была больше 90 % в течение последних пяти минут
	- Уменьшение масштаба на один экземпляр, если загрузка ЦП была ниже 50 % в течение последних 30 минут 


4. Оставьте в раскрывающемся списке **Метрики** значение **Процент ЦП**.
	
5. В разделе **Правила увеличения масштаба** настройте первое правило, задав для параметра **Условие** значение **Больше**, для параметра **Пороговое значение** значение **70** (%), для параметра **За последние** значение **10** (в минутах), для параметра **Увеличение масштаба на** значение **1** (в экземплярах), а для параметра **Время простоя** значение **10** (в минутах). 
	
	![Set First Autoscale Rule][SetFirstRule]

	>[AZURE.NOTE] Параметр **Время простоя** указывает время ожидания правила между масштабированиями.
	
6. Щелкните **Добавить правило увеличения масштаба**, затем настройте второе правило, задав для параметра **Условие** значение **Больше**, для параметра **Пороговое значение** значение **90** (%), для параметра **За последние** значение **1** (в минутах), для параметра **Увеличение масштаба на** значение **3** (в экземплярах), для параметра **Время простоя** значение **1** (в минутах).
	
	![Set Second Autoscale Rule][SetSecondRule]
	
5. В разделе **Правила уменьшения масштаба** настройте третье правило, задав для параметра **Условие** значение **Меньше**, для параметра **Пороговое значение** значение **50** (%), для параметра **За последние** значение **30** (в минутах), для параметра **Уменьшение масштаба** значение **1** (в экземплярах), а для параметра **Время ожидания** значение **60** (в минутах). 
	
	![Set Third Autoscale Rule][SetThirdRule]
	
7. Щелкните в командной строке **Сохранить**. После этого правило автомасштабирования должно появиться в колонке **Масштаб**. 
	
	![Set Autoscale Rule Result][SetRulesFinal]
	
<a name="ScalingSQLServer"></a>
##Масштабирование базы данных SQL Server, подключенной к веб-приложению
Если вы настроили одну или больше баз данных SQL Server, связанных с веб-приложением (независимо от режима плана службы приложений), вы можете быстро масштабировать ее в соответствии со своими потребностями.

1. Для масштабирования одной из связанных баз данных откройте колонку веб-приложения на [портале Azure][portal]. В раскрывающемся списке **Основные компоненты** щелкните ссылку **Группа ресурсов**. Затем в области **Сводка** колонки группы ресурсов щелкните одну из связанных баз данных.
	
	![Linked database][ResourceGroup]
	
2. В колонке связанной базы данных SQL щелкните область **Ценовая категория**, укажите одну из категорий в зависимости от требований к производительности и щелкните **Выбрать**. 
	
	![Scale your SQL Database][ScaleDatabase]
	
3. Вы можете также настроить георепликацию, чтобы увеличить возможности высокой доступности и аварийного восстановления базы данных SQL. Для этого щелкните область **Георепликация**.

	![Set up geo-replication for SQL Database][GeoReplication]

<a name="devfeatures"></a>
## Возможности разработчика
В зависимости от режима плана службы веб-приложения доступны следующие функции, ориентированные на разработчика:

### Разрядность ###

- Режимы планов "Базовый" и "Стандартный" поддерживают 32-разрядные и 64-разрядные приложения.
- Режимы планов "Бесплатный" и "Общий доступ" поддерживают только 32-разрядные приложения.

### Поддержка отладчика ###

- Поддержка отладки доступна для режимов планов Free, Shared и Basic службы приложений для одного одновременного подключения на каждое приложение.
- Поддержка отладки доступна для режима плана Standard службы приложений для пяти одновременных подключений на каждое приложение.

<a name="OtherFeatures"></a>
## Другие возможности

### Мониторинг конечных веб-точек ###

- Мониторинг конечной веб-точки доступен в режимах планов Basic и Standard службы приложений. Дополнительные сведения о мониторинге конечных веб-точек см. в разделе [Мониторинг веб-приложений](web-sites-monitor.md).

- Подробные сведения обо всех оставшихся функциях в планах службы приложений, включая цены и функции, интересующие всех пользователей (в том числе разработчиков) см. в разделе [Сведения о ценах службы приложений](http://azure.microsoft.com/pricing/details/web-sites/).

<a name="Next Steps"></a>	
## Дальнейшие действия

- Сведения о начале работы с Azure см. в разделе [Бесплатная пробная версия Microsoft Azure](http://azure.microsoft.com/pricing/free-trial/).

- Сведения о ценах, поддержке и соглашениях об уровне обслуживания см. по следующим ссылкам:
	
	[Информация о ценах - передача данных](http://azure.microsoft.com/pricing/details/data-transfers/)
	
	[Планы поддержки Microsoft Azure](http://azure.microsoft.com/support/plans/)
	
	[Соглашения об уровне обслуживания](http://azure.microsoft.com/support/legal/sla/)
	
	[Информация о ценах - база данных SQL](http://azure.microsoft.com/pricing/details/sql-database/)
	
	[Размеры виртуальных машин и облачных служб для Microsoft Azure][vmsizes]
	
	[Сведения о ценах на службу приложений](http://azure.microsoft.com/pricing/details/web-sites/)
	
	[Сведения о ценах на службу приложений - SSL-соединения](http://azure.microsoft.com/pricing/details/web-sites/#ssl-connections)

- Рекомендации по службе приложений Azure, в том числе по сборке масштабируемой и устойчивой архитектуры, см. в разделе [Рекомендации: веб-сайты Microsoft Azure (WAWS)](http://blogs.msdn.com/b/windowsazure/archive/2014/02/10/best-practices-windows-azure-websites-waws.aspx).

- Видео о масштабировании веб-сайтов Azure:
	
	[Когда масштабировать веб-сайты Azure, автор - Стефан Шаков (Stefan Schackow)](http://azure.microsoft.com/documentation/videos/azure-web-sites-free-vs-standard-scaling/)
	
	[Автоматическое масштабирование веб-сайтов Azure, ЦП или по расписанию, автор - Стефан Шаков (Stefan Schackow)](http://azure.microsoft.com/documentation/videos/auto-scaling-azure-web-sites/)

	[Как масштабируются веб-сайты Azure, автор - Стефан Шаков (Stefan Schackow)](http://azure.microsoft.com/documentation/videos/how-azure-web-sites-scale/)



<!-- LINKS -->
[vmsizes]:http://go.microsoft.com/fwlink/?LinkId=309169
[SQLaccountsbilling]:http://go.microsoft.com/fwlink/?LinkId=234930
[azuresubscriptions]:http://go.microsoft.com/fwlink/?LinkID=235288
[portal]: https://portal.azure.com/

<!-- IMAGES -->
[ChooseWHP]: ./media/web-sites-scale/scale1ChooseWHP.png
[ChooseBasicInstances]: ./media/web-sites-scale/scale2InstancesBasic.png
[SaveButton]: ./media/web-sites-scale/05SaveButton.png
[BasicComplete]: ./media/web-sites-scale/06BasicComplete.png
[ScaleStandard]: ./media/web-sites-scale/scale3InstancesStandard.png
[Autoscale]: ./media/web-sites-scale/scale4AutoScale.png
[SetTargetMetrics]: ./media/web-sites-scale/scale5AutoScaleTargetMetrics.png
[SetFirstRule]: ./media/web-sites-scale/scale6AutoScaleFirstRule.png
[SetSecondRule]: ./media/web-sites-scale/scale7AutoScaleSecondRule.png
[SetThirdRule]: ./media/web-sites-scale/scale8AutoScaleThirdRule.png
[SetRulesFinal]: ./media/web-sites-scale/scale9AutoScaleFinal.png
[ResourceGroup]: ./media/web-sites-scale/scale10ResourceGroup.png
[ScaleDatabase]: ./media/web-sites-scale/scale11SQLScale.png
[GeoReplication]: ./media/web-sites-scale/scale12SQLGeoReplication.png

<!--HONumber=49-->