<properties
    pageTitle="Решение "Данные передачи" в Log Analytics | Microsoft Azure"
    description="Данные передачи — это объединенные сетевые данные и данные производительности, передаваемые с компьютеров с установленными агентами OMS, включая агенты Operations Manager и агенты, подключенные к Windows. Сетевые данные вместе с данными журнала помогают коррелировать данные."
    services="log-analytics"
    documentationCenter=""
    authors="bandersmsft"
    manager="jwhit"
    editor=""/>

<tags
    ms.service="log-analytics"
    ms.workload="na"
    ms.tgt_pltfrm="na"
    ms.devlang="na"
    ms.topic="article"
    ms.date="08/11/2016"
    ms.author="banders"/>


# <a name="wire-data-solution-in-log-analytics"></a>Решение "Данные передачи" в Log Analytics

Данные передачи — это объединенные сетевые данные и данные производительности, передаваемые с компьютеров с установленными агентами OMS, включая агенты Operations Manager и агенты, подключенные к Windows. Сетевые данные вместе с данными журнала помогают коррелировать данные. Агенты OMS, установленные на компьютерах в ИТ-инфраструктуре, отслеживают сетевые данные, отправляемые на эти компьютеры и с них, для сетевых уровней 2–3 в [модели OSI](https://en.wikipedia.org/wiki/OSI_model) , включая различные используемые протоколы и порты.

>[AZURE.NOTE] Решение "Данные передачи" пока нельзя добавлять в рабочие области. Клиенты, у которых решение "Данные передачи" уже включено, могут продолжать его использовать.

По умолчанию OMS собирает зарегистрированные в журналах данные производительности ЦП, памяти, дисков и сети на основе показателей счетчиков, встроенных в Windows. Процесс сбора сетевых и других данных выполняется в режиме реального времени для каждого агента, включая протоколы подсетей и протоколы уровня приложений, используемые компьютером. Дополнительные счетчики производительности можно добавить на странице "Параметры" на вкладке "Журналы".

Если вы использовали [sFlow](http://www.sflow.org/) или другое программное обеспечение с [протоколом etFlow от Cisco](http://www.cisco.com/c/en/us/products/collateral/ios-nx-os-software/ios-netflow/prod_white_paper0900aecd80406232.html), передаваемые статистические данные будут вам знакомы.

Ниже перечислены некоторые типы встроенных запросов поиска в журналах.

- агенты,предоставляющие данные передачи;
- IP-адреса агентов, предоставляющих данные передачи;
- исходящие подключения по IP-адресам;
- количество байт, отправленных протоколами приложений;
- количество байт, отправленных службой приложений;
- количество байт, полученных различными протоколами;
- общее количество отправленных и полученных байт по IP-адресу;
- IP-адреса, с которых осуществлять взаимодействие связь с агентами в подсети 10.0.0.0/8;
- среднее время задержки для подключений, которые оценивались как надежные;
- компьютерные процессы, которые инициировали или получали сетевой трафик;
- объем сетевого трафика для процесса.

Выполняя поиск с помощью данных передачи, можно отфильтровать и сгруппировать данные, чтобы просмотреть сведения об основных агентах и основных протоколах. Кроме того, можно узнать, когда определенные компьютеры (IP-адреса или MAC-адреса) взаимодействовали друг с другом, как долго длился процесс и сколько данных было отправлено. По сути, вы просматриваете метаданные о сетевом трафике на основе поиска.

Однако просмотр метаданных не всегда полезен для проведения глубокой диагностики. Данные передачи в OMS не являются полным отражением сетевых данных. Поэтому они не предназначены для расширенного устранения неполадок на уровне пакетов.
Преимуществом использования агента (по сравнению с другими методами сбора) является отсутствие необходимости установки устройств, перенастройки сетевых коммутаторов или выполнения сложных настроек. Данные передачи основаны на использовании агента — установите агент на компьютере, и он будет отслеживать свой собственный сетевой трафик. Еще одно преимущество проявляется в случае, если нужно отслеживать рабочие нагрузки, выполняющиеся у поставщиков облачных служб, поставщиков услуг размещения или в Microsoft Azure, где пользователь не является владельцем уровня структуры.

С другой стороны, если вы не установите агенты на всех компьютерах в сетевой инфраструктуре, вы не сможете получить полное представление о том, что происходит в сети.

## <a name="installing-and-configuring-the-solution"></a>Установка и настройка решения
Для установки и настройки решений используйте указанные ниже данные.

- Решение "Данные передачи" получает данные с компьютеров под управлением Windows Server 2012 R2, Windows 8.1 и более поздних операционных систем.
- На компьютерах, с которых предполагается выполнять сбор данных передачи, необходимо установить Microsoft .NET Framework 4.0 или более поздней версии.
- Решение "Данные передачи" необходимо добавить в рабочую область OMS, как описано в статье [Добавление решений Log Analytics из каталога решений](log-analytics-add-solutions.md).  Дополнительная настройка не требуется.
- Для просмотра данных передачи для конкретного решения это решение должно быть уже добавлено в рабочую область OMS.

## <a name="wire-data-data-collection-details"></a>Сведения о сборе данных передачи

Данные передачи собирают метаданные о сетевом трафике с помощью включенных агентов.

В следующей таблице приведены методы сбора данных и другие сведения о сборе данных для решения "Данные передачи".


| платформа | Direct Agent | Агент SCOM | Хранилище Azure | Нужен ли SCOM? | Отправка данных агента SCOM через группу управления | частота сбора |
|---|---|---|---|---|---|---|
|Windows (2012 R2/8.1 или более поздней версии)|![Да](./media/log-analytics-wire-data/oms-bullet-green.png)|![Да](./media/log-analytics-wire-data/oms-bullet-green.png)|![Нет](./media/log-analytics-wire-data/oms-bullet-red.png)|            ![Нет](./media/log-analytics-wire-data/oms-bullet-red.png)|![Нет](./media/log-analytics-wire-data/oms-bullet-red.png)| каждую минуту|


## <a name="combining-wire-data-with-other-solution-data"></a>Объединение данных передачи с данными других решений

Данные, возвращенные из приведенных выше встроенных запросов, могут быть интересны сами по себе. Однако преимущества данных передачи проявляются при их сочетании с данными из других решений OMS. Например, можно использовать данные событий безопасности, собранные решением "Безопасность и аудит", и объединить их с данными передачи, чтобы выявлять нехарактерные попытки входа в сеть для именованных процессов.  В этом примере используется операторы IN и DISTINCT для объединения точек данных в запросе поиска.

Требования. Для использования следующего примера необходимо установить решение "Безопасность и аудит". Однако для получения аналогичных результатов данные передачи можно объединить с данными из других решений.

### <a name="to-combine-wire-data-with-security-events"></a>Объединение данных передачи с событиями безопасности

1. На странице "Обзор" щелкните элемент **WireData** (Данные передачи).
2. В списке **Common WireData Queries** (Общие запросы данных передачи) щелкните **Amount of Network Traffic (in Bytes) by Proces** (Объем сетевого трафика в байтах по процессам), чтобы просмотреть список возвращенных процессов.
    ![Запросы данных передачи](./media/log-analytics-wire-data/oms-wiredata-01.png)
3. Если список процессов слишком велик и неудобен для просмотра, поисковый запрос можно изменить так, чтобы он выглядел следующим образом:

    ```
    Type WireData | measure count() by ProcessName | where AggregatedValue <40
    ```
    В следующем примере показан процесс DancingPigs.exe, который выглядит подозрительным.
    ![Результаты поиска данных передачи](./media/log-analytics-wire-data/oms-wiredata-02.png)

4. Используя данные, возвращенные в списке, щелкните именованный процесс. В этом примере был выбран процесс DancingPigs.exe. В приведенных ниже результатах описывается тип сетевого трафика, например исходящий обмен данными по различным протоколам.
    ![Результаты данных передачи, показывающие именованный процесс](./media/log-analytics-wire-data/oms-wiredata-03.png)

5. Так как установлено решение "Безопасность и аудит", можно взглянуть на события безопасности с одним и тем же значением поля ProcessName, изменив поисковый запрос с помощью операторов запроса IN и DISTINCT. Это можно сделать, когда данные передачи и другие журналы решений имеют значения в одном формате. Измените запрос, чтобы он имел следующий вид.

    ```
    Type=SecurityEvent ProcessName IN {Type:WireData "DancingPigs.exe" | distinct ProcessName}
    ```    

    ![результаты данных передачи, показывающие объединенные данные](./media/log-analytics-wire-data/oms-wiredata-04.png)
6. В результатах выше отображаются сведения об учетной записи. Теперь можно уточнить запрос, чтобы узнать частоту использования учетной записи, отображающей данные о безопасности и аудите, в процессе. Запрос должен выглядеть следующим образом:        

    ```
    Type=SecurityEvent ProcessName IN {Type:WireData "DancingPigs.exe" | distinct ProcessName} | measure count() by Account
    ```

    ![результаты данных передачи, показывающие данные учетной записи](./media/log-analytics-wire-data/oms-wiredata-05.png)



## <a name="next-steps"></a>Дальнейшие действия

- [поиск в журналах](log-analytics-log-searches.md) , чтобы просмотреть подробные записи поиска данных передачи.
- Прочитайте запись в блоге Дэна [Using Wire Data in Operations Management Suite Log Search](http://blogs.msdn.com/b/dmuscett/archive/2015/09/09/using-wire-data-in-operations-management-suite.aspx) (Использование данных передачи в поиске по журналам Operations Management Suite), которая включает дополнительные сведения о частоте сбора данных и способах изменения свойств сбора для агентов Operations Manager.



<!--HONumber=Oct16_HO2-->


