---
title: "Обновление Azure Log Analytics до нового поиска по журналам | Документация Майкрософт"
description: "Новый язык запросов Log Analytics практически доступен, и вы сможете участвовать в общедоступной предварительной версии.  В этой статье описаны преимущества нового языка и процедура преобразования рабочей области."
services: log-analytics
documentationcenter: 
author: bwren
manager: carmonm
editor: 
ms.service: log-analytics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/08/2017
ms.author: magoedte;bwren
ms.translationtype: HT
ms.sourcegitcommit: 7456da29aa07372156f2b9c08ab83626dab7cc45
ms.openlocfilehash: 4a3ee3c4d1fa9b626a51f24997603adceed8311f
ms.contentlocale: ru-ru
ms.lasthandoff: 08/28/2017

---

# <a name="upgrade-your-azure-log-analytics-workspace-to-new-log-search"></a>Обновление рабочей области Azure Log Analytics до нового поиска по журналам

> [!NOTE]
> Сейчас, [чтобы освоить новый язык](https://go.microsoft.com/fwlink/?linkid=856078), необязательно выполнять обновление до нового языка запросов Log Analytics.  

Новый язык запросов Log Analytics уже доступен, и вам необходимо обновить рабочую область, чтобы воспользоваться его преимуществами.  В этой статье описаны преимущества нового языка и процедура преобразования рабочей области.  Если вы решили не выполнять обновление сейчас, рабочая область будет работать так, как прежде, но позже она автоматически преобразуется.  У вас будет достаточно времени и вы получите уведомление о предстоящем преобразовании.

В этой статье содержатся сведения о новом языке и процессе обновления.

## <a name="why-the-new-language"></a>Преимущества нового языка
Мы понимаем, что при переходе с одного языка на другой возникают проблемы. Мы не просто так меняем язык запросов.  Существует несколько причин, по которым это изменение предоставит значительную ценность клиентам Log Analytics.

- **Простой и эффективный.** Новый язык легче понять. Он аналогичен языку SQL с конструкциями, более похожими на естественный язык, чем устаревший.
- **Язык полной передачи.**  В отличие от устаревшего языка новый язык имеет более широкие возможности передачи.  Практически любые выходные данные можно передать в другую команду, чтобы создать более сложные запросы, чем раньше.
- **Извлечение полей во время поиска.**  По сравнению с устаревшим языком новый язык поддерживает более сложные вычисляемые поля среды выполнения.  Вы можете использовать сложные вычисления для расширенных полей, а затем — вычисляемые поля для дополнительных команд, включающих операции соединения и агрегирования.
- **Сложные соединения.**  Новый язык обеспечивает более сложные соединения, чем устаревший язык, включая возможность объединения таблиц по нескольким полям, использование внутренних и внешних соединений и объединение по расширенным полям.
- **Функции даты и времени.**  По сравнению с устаревшим языком этот язык содержит более расширенные функции даты и времени.
- **Смарт-аналитика.**  Новый язык содержит дополнительные алгоритмы для оценки шаблонов в наборах данных и сравнения различных наборов данных.
- **Портал расширенной аналитики.**  Портал расширенной аналитики предлагает функции анализа, не доступные на портале Log Analytics, включая редактирование нескольких строк запросов, дополнительные визуализации и расширенную диагностику.
- **Согласованность с другими приложениями.**  Новый язык и портал расширенной аналитики уже используются для аналитики в Application Insights.  Реализация этой функции в Log Analytics обеспечивает согласованность между службами Azure.
- **Улучшенная интеграция с Power BI.** Запросы на новом языке можно экспортировать в службу Power BI Desktop, а следовательно можно использовать ее расширенные возможности преобразования данных.
- **Многое другое.** Дополнительные сведения и руководства по новому языку см. на сайте [языка запросов Azure Log Analytics](https://docs.loganalytics.io).


## <a name="when-can-i-upgrade"></a>Когда можно выполнить обновление?
Обновление будет выполняться по всем регионам Azure, поэтому оно может быть доступно в некоторых регионах раньше других.  Когда для вашей рабочей области будет доступна возможность обновления, в верхней части появится фиолетовый баннер.

![Обновление 1](media/log-analytics-log-search-upgrade/upgrade-01a.png)

## <a name="what-happens-when-i-upgrade"></a>Что происходит при обновлении?
При преобразовании рабочей области все сохраненные поисковые запросы, правила генерации оповещений и представления, созданные с помощью конструктора представлений, автоматически преобразуются в новый язык.  Поисковые запросы, включенные в решения, не преобразуются автоматически, но они преобразуются "на лету", когда вы их открываете.  Этот процесс является полностью прозрачным.

## <a name="can-i-go-back-after-i-upgrade"></a>Можно ли вернуться обратно после обновления?
При обновлении создается полная резервная копия рабочей области, которая содержит моментальный снимок всех сохраненных поисковых запросов, правило генерации оповещений и представления.  Это позволяет восстановить старую рабочую область позже.

Чтобы восстановить устаревшую рабочую область, в рабочей области выберите **Параметры**, а затем — **Upgrade Summary** (Сводка обновлений).  Затем можно выбрать параметр **Restore legacy workspace** (Восстановить устаревшую рабочую область).  

![Восстановление устаревшей версии](media/log-analytics-log-search-upgrade/restore-legacy-b.png)

## <a name="how-do-i-perform-the-upgrade"></a>Как выполнить обновление?
Вы можете обновить рабочую область, когда появится фиолетовой баннер в верхней части портала.  

1.  Начните обновление, щелкнув фиолетовый баннер с уведомлением **Дополнительные сведения и обновление**.<br>![Обновление 2](media/log-analytics-log-search-upgrade/upgrade-01a.png)<br>
2.  Дополнительные сведения об обновлении см. на странице сведений об обновлении.<br>![Обновление 2](media/log-analytics-log-search-upgrade/upgrade-03.png)<br>
3.  Щелкните **Обновить сейчас**, чтобы запустить обновление.<br>![Обновление 4](media/log-analytics-log-search-upgrade/upgrade-04.png)<br>В поле уведомления в правом верхнем углу отображается состояние.<br>![Обновление 5](media/log-analytics-log-search-upgrade/upgrade-05.png)
4.  Это все!  Перейдите на страницу поиска по журналам, чтобы просмотреть обновленную рабочую область.<br>![Обновление 6](media/log-analytics-log-search-upgrade/upgrade-06.png)<br>

Если возникла проблема, которая приводит к сбою обновления, можно перейти на [форум для обсуждений](https://social.msdn.microsoft.com/Forums/azure/home?forum=opinsights) и опубликовать свой вопрос или [создать запрос в службу поддержки](../azure-supportability/how-to-create-azure-support-request.md) на портале Azure.

## <a name="how-do-i-learn-the-new-language"></a>Где найти дополнительные сведения о новом языке?
Так как он используется несколькими службами, мы создали [внешний сайт для размещения документации](https://docs.loganalytics.io/) по новому языку.  Сюда входят руководства, примеры и полный справочник. Вы можете изучить руководство по новому языку [Getting Started with Queries](https://go.microsoft.com/fwlink/?linkid=856078) (Приступая к работе с запросами) и получить доступ к справочнику по языку [запросов Log Analytics](https://go.microsoft.com/fwlink/?linkid=856079).  

Если вы уже знакомы с прежней версией языка запросов Log Analytics, можно использовать преобразователь языка, который добавляется в рабочую область при обновлении.

Чтобы просмотреть преобразованную версию, просто введите запрос на старом языке и нажмите кнопку **Преобразовать**.  Затем вы можете нажать кнопку поиска, чтобы выполнить поиск, или скопировать и вставить преобразованный запрос в другое место, например в правило генерации оповещений.

![Преобразователь языка](media/log-analytics-log-search-upgrade/language-converter.png)


## <a name="next-steps"></a>Дальнейшие действия
- Ознакомьтесь с [руководством по новому языку](https://go.microsoft.com/fwlink/?linkid=856078).
- Изучите [руководство по использованию портала поиска по журналам](log-analytics-log-search-log-search-portal.md) с новым языком запросов.
- Ознакомьтесь с новым [порталом расширенной аналитики](https://go.microsoft.com/fwlink/?linkid=856587).

