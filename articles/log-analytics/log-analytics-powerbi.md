<properties
   pageTitle="Экспорт данных Log Analytics в Power BI | Microsoft Azure"
   description="Power BI — это облачная служба бизнес-аналитики от Майкрософт, предоставляющая расширенную визуализацию данных и отчеты по анализу различных наборов данных. Log Analytics может непрерывно экспортировать данные из репозитория OMS в Power BI, чтобы вы могли использовать предоставляемые службой визуализации и средства анализа. В этой статье описывается настройка запросов в службе Log Analytics, которые автоматически экспортируются в Power BI с регулярной периодичностью."
   services="log-analytics"
   documentationCenter=""
   authors="bwren"
   manager="jwhit"
   editor="tysonn" />
<tags
   ms.service="log-analytics"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="infrastructure-services"
   ms.date="05/02/2016"
   ms.author="bwren" />

# Экспорт данных Log Analytics в Power BI

[Power BI](https://powerbi.microsoft.com/ru-RU/documentation/powerbi-service-get-started/) — это облачная служба бизнес-аналитики от Майкрософт, предоставляющая расширенную визуализацию данных и отчеты по анализу различных наборов данных. Log Analytics может автоматически экспортировать данные из репозитория OMS в Power BI, чтобы вы могли использовать предоставляемые службой визуализации и средства анализа.

Настраивая Power BI с использованием службы Log Analytics, вы создаете запросы журналов, экспортирующие свои результаты в соответствующие наборы данных в Power BI. Запросы и экспорт продолжают автоматически выполняться по расписанию, установленному вами для обновления набора данных в соответствии с последними данными, собранными службой Log Analytics.

![Из Log Analytics в Power BI](media/log-analytics-power-bi/overview.png)

## Расписания Power BI

*Расписание Power BI* включает поиск по журналам, который экспортирует набор данных из репозитория OMS в соответствующий набор данных в Power BI, а также расписание, определяющее периодичность выполнения этого поиска для актуализации набора данных.

Поля в наборе данных должны соответствовать свойствам записей, возвращаемых в результате поиска по журналам. Если поиск выдает записи разных типов, набор данных включает все свойства каждого из включенных типов записей.

Запрос поиска по журналу, возвращающий необработанные данные, более предпочтителен, чем консолидация с использованием таких команд, как [Measure](log-analytics-search-reference.md#measure). На основе необработанных данных в Power BI можно выполнять любые операции агрегирования и расчеты.

## Подключение рабочей области OMS к Power BI

Прежде чем экспортировать данные из службы Log Analytics в Power BI, необходимо подключить рабочую область OMS к учетной записи Power BI, выполнив указанные ниже действия.

1. В консоли OMS щелкните плитку **Параметры**.
2. Выберите **Учетные записи**.
3. В разделе **Информация о рабочей области** щелкните **Подключиться к учетной записи Power BI**.
4. Введите данные учетной записи Power BI.

## Создание расписания Power BI

Создайте расписание Power BI для каждого набора данных, выполнив указанные ниже действия.

1. В консоли OMS щелкните плитку **Поиск по журналам**.
2. Введите новый запрос или выберите сохраненный поиск, возвращающий данные, которые нужно экспортировать в **Power BI**.  
3. Нажмите кнопку **Power BI** в верхней части страницы, чтобы открыть диалоговое окно **Power BI**.
4. Введите данные в следующую таблицу и нажмите кнопку **Сохранить**.

| Свойство | Описание |
|:--|:--|
| Действие | Имя для идентификации расписания при просмотре списка расписаний Power BI. |
| Сохраненные поисковые запросы | Поисковый запрос, который нужно выполнить. Вы можете выбрать текущий запрос и сохраненный поисковый запрос из раскрывающегося списка. |
| Расписание | Периодичность выполнения сохраненного поискового запроса и экспорта в набор данных Power BI. Значение должно составлять от 15 минут до 24 часов. |
| Имя набора данных | Имя набора данных в Power BI. Если оно не существует, то создается, а если существует, то обновляется. |

## Просмотр и удаление расписаний Power BI

Просмотрите список существующих расписаний Power BI, выполнив указанные ниже действия.

1. В консоли OMS щелкните плитку **Параметры**.
2. Выберите **Power BI**.

Наряду с информацией о расписании отображаются данные о том, сколько раз расписание было выполнено за прошлую неделю, а также состояние последней синхронизации. Если при синхронизации возникают ошибки, щелкните ссылку для поиска записей, содержащих сведения об ошибке, по журналам.

Расписание можно удалить, щелкнув **X** в столбце **Удалить столбец**. Расписание можно отключить, выбрав параметр **Откл**. Чтобы изменить расписание, необходимо удалить его и создать новое с новыми параметрами.

![Расписания Power BI](media/log-analytics-power-bi/schedules.png)

## Пример пошагового руководства
В следующем разделе демонстрируется создание расписания Power BI и использование его набора данных для создания простого отчета. В этом примере все данные о производительности по набору компьютеров экспортируются в Power BI, после чего создается линейный график, который показывает загрузку процессора.

### Создание запроса поиска по журналу
Для начала создадим запрос для поиска данных, которые нужно отправить в набор данных. В этом примере будет использоваться запрос, возвращающий все данные о производительности компьютеров, имена которых начинаются с *srv*.

![Расписания Power BI](media/log-analytics-power-bi/walkthrough-query.png)

### Создания запроса для поиска по Power BI
Мы нажимаем кнопку **Power BI**, чтобы открыть диалоговое окно "Power BI" и ввести необходимые данные. Мы хотим, чтобы этот поиск выполнялся один раз в час и создавал набор данных с именем *Contoso Perf*. Поскольку у нас уже есть поисковый запрос, выдающий необходимые данные, для параметра **Сохраненный поисковый запрос** мы оставляем значение по умолчанию — *Использовать текущий поисковый запрос*.

![Поиск Power BI](media/log-analytics-power-bi/walkthrough-schedule.png)

### Проверка поиска по Power BI
Чтобы проверить, правильно ли создано расписание, мы просматриваем список поисковых запросов Power BI на плитке **Параметры** на панели мониторинга OMS. Мы ждем несколько минут и обновляем представление, пока оно не сообщит, что синхронизация выполнена.

![Поиск Power BI](media/log-analytics-power-bi/walkthrough-schedules.png)

### Проверка набора данных в Power BI
Мы входим в свою учетную запись на сайте [powerbi.microsoft.com](http://powerbi.microsoft.com/) и прокручиваем экран до пункта **Datasets** (Наборы данных) в нижней части левой панели. Как видите, набор данных *Contoso Perf* присутствует в списке с указанием на то, что экспорт был выполнен успешно.

![Набор данных Power BI](media/log-analytics-power-bi/walkthrough-datasets.png)

### Создание отчета на основе набора данных
Мы выбираем набор данных **Contoso Perf** и щелкаем **Results** (Результат) на панели **Fields** (Поля) справа, чтобы просмотреть, какие поля входят в этот набор данных. Чтобы создать линейный график, отражающий использование процессора на каждом компьютере, мы выполняем следующие действия:

1. Выбираем визуализацию линейного графика.
2. Перетаскиваем параметр **ObjectName** (Имя объекта) в **Report level filter** (Фильтр уровней отчетности) и устанавливаем флажок **Processor** (Процесс).
3. Перетаскиваем параметр **CounterName** (Имя счетчика) в **Report level filter** (Фильтр уровней отчетности) и устанавливаем флажок **% Processor Time** (Процент процессорного времени).
4. Перетаскиваем параметр **CounterValue** (Значение счетчика) в поле **Values** (Значения).
5. Перетаскиваем параметр **Computer** (Компьютер) в поле **Legend** (Условные обозначения).
6. Перетаскиваем параметр **TimeGenerated** (Время создания) в поле **Axis** (Ось).

В результате отображается линейный график с данными из набора данных.

![График Power BI](media/log-analytics-power-bi/walkthrough-linegraph.png)

### Сохранение отчета
Мы сохраняем отчет, нажав кнопку "Сохранить" в верхней части экрана, и проверяем, отображается ли он в разделе Report (Отчет) на левой панели.

![Отчеты Power BI](media/log-analytics-power-bi/walkthrough-report.png)

## Дальнейшие действия

- Узнайте больше о [запросах поиска по журналам](log-analytics-log-searches.md), чтобы создавать запросы, которые можно экспортировать в Power BI.
- Узнайте больше о [Power BI](powerbi.microsoft.com), чтобы создавать визуализации на основе экспорта Log Analytics.

<!---HONumber=AcomDC_0504_2016-->