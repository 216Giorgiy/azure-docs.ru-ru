<properties urlDisplayName="How to sync data" pageTitle="Начало работы с синхронизацией данных SQL" metaKeywords="" description="" metaCanonical="" services="sql-database" documentationCenter="" title="Getting Started with Azure SQL Data Sync" authors="spelleru" solutions="" manager="jhubbard" editor="" />

<tags ms.service="sql-database" ms.workload="data-management" ms.tgt_pltfrm="na" ms.devlang="na" ms.topic="article" ms.date="01/01/1900" ms.author="spelleru" />





#Приступая к работе с синхронизацией данных SQL Azure (предварительная версия)
В этом учебнике вы ознакомитесь с основами синхронизации данных SQL Azure с использованием портала Azure (предварительная версия). 

Для выполнения приведенных в нем действий необходим минимальный опыт работы с SQL Server и базой данных SQL Azure. В этом учебнике вы создадите гибридную группу синхронизацию (экземпляры SQL Server и базы данных SQL), полностью настроенную и синхронизирующуюся по заданному вами расписанию.

##Оглавление ##

* [Шаг 1: подключение к базе данных SQL Azure](#Connect)
* [Шаг 2: добавление агента клиента ()](#AddAgent)
* [Шаг 3: регистрация базы данных SQL Server в агенте клиента](#RegisterSSDB)
* [Шаг 4: создание группы синхронизации](#CreateSG)
* [Шаг 5: выбор данных для синхронизации](#SyncRules)
* [Шаг 6: настройка группы синхронизации](#Configure)

<h2><a id="Connect"></a>Шаг 1: подключение к базе данных SQL Azure</h2>

1. Выполните вход на [портал управления](http://manage.windowsazure.com).

2. Щелкните **БАЗЫ ДАННЫХ SQL** на левой панели.

3. В нижней части страницы щелкните **СИНХРОНИЗАЦИЯ**. При нажатии вами кнопки СИНХРОНИЗАЦИЯ появится список элементов, которые вы можете добавить: **Новая группа** и **Новый агент синхронизации**.

4. Чтобы запустить мастер нового агента синхронизации данных SQL, щелкните **Новый агент синхронизации**.

5. Если вы не добавляли агент ранее, **щелкните здесь для его загрузки**.

	![Image1](./media/sql-database-get-started-data-sync/SQLDatabaseScreen-Figure1.PNG)


<h2><a id="AddAgent"></a>Шаг 2: добавление агента клиента</h2>
Этот шаг необходим только в том случае, если база данных SQL Server, включенная в группу синхронизации, будет размещена на локальных ресурсах. В противном случае вы можете перейти к шагу 4. Создайте группу синхронизации, если в вашей группе синхронизации заданы только экземпляры базы данных SQL.

<h3><a id="InstallRequiredSoftware"></a>Шаг 2а: установка необходимого программного обеспечения</h3>
Убедитесь, что на компьютере, где установлен агент клиента, установлены следующие компоненты.

- **.NET Framework 4.0** 

 Платформу .NET Framework 4.0 вы можете установить [отсюда](http://go.microsoft.com/fwlink/?linkid=205836).

- **Системные типы CRL Microsoft SQL Server 2008 R2 SP1 (x86)**

 Вы можете установить Microsoft SQL Server 2008 R2 SP1 систему типов CLR (x86) [отсюда](http://www.microsoft.com/download/en/details.aspx?id=26728).

- **Общие объекты управления Microsoft SQL Server 2008 R2 SP1 (x86)**

 Общие объекты управления Microsoft SQL Server 2008 R2 SP1 (x86) вы можете установить[отсюда](http://www.microsoft.com/download/en/details.aspx?id=26728).


<h3><a id="InstallClient"></a>Шаг 2б: установка нового агента клиента</h3>

Выполните инструкции в разделе [Установка агента клиента (синхронизация данных SQL)](http://msdn.microsoft.com/ru-ru/library/jj823137.aspx) для установки агента. 


<h3><a id="RegisterSSDb"></a>Шаг 2в: завершение работы мастера создания нового агента синхронизации данных SQL</h3> 

1. 	Вернитесь в мастер нового агента синхронизации данных SQL.
2.	Присвойте агенту понятное имя.
3.	В раскрывающемся списке выберите **РЕГИОН** (центр обработки данных) для размещения этого агента.
4.	В раскрывающемся списке выберите пункт **ПОДПИСКА** для размещения этого агента.
5.	Щелкните стрелку вправо.



<h2><a id="RegisterSSDB"></a>Шаг 3: регистрация базы данных SQL Server в агенте клиента</h2>

После установки клиентского агента зарегистрируйте каждую локальную базу данных SQL Server, которую следует включить в группу синхронизации агента.
Чтобы зарегистрировать базу данных в агенте, выполните инструкции, приведенные в разделе [Регистрация базы данных SQL Server в агенте клиента](http://msdn.microsoft.com/ru-ru/library/jj823138.aspx).



<h2><a id="CreateSG"></a>Шаг 4: создание группы синхронизации</h2>

<h3><a id="StartNewSGWizard"></a>Шаг 4а: запуск мастера создания новой группы синхронизации</h3>
1.	Вернитесь на [портал управления](http://manage.windowsazure.com).
2.	Щелкните **БАЗЫ ДАННЫХ SQL**.
3.	Щелкните **ДОБАВИТЬ СИНХРОНИЗАЦИЮ** в нижней части страницы, затем выберите пункт "Новая группа синхронизации".

	![Image2](./media/sql-database-get-started-data-sync/NewSyncGroup-Figure2.png)


<h3><a id=""></a>Шаг 4б: ввод основных параметров</h3>	
1.	Введите понятное имя для группы синхронизации.
2.	В раскрывающемся списке выберите **РЕГИОН** (центр обработки данных) для размещения этой группы синхронизации.
3. Щелкните стрелку вправо.

	![Image3](./media/sql-database-get-started-data-sync/NewSyncGroupName-Figure3.PNG)
 
<h3><a id="DefineHubDB"></a>Шаг 4в: указание концентратора синхронизации</h3>
1. В раскрывающемся списке выберите экземпляр базы данных SQL, который будет служить концентратором группы синхронизации.
2. Введите учетные данные для этого экземпляра базы данных SQL: **ИМЯ ПОЛЬЗОВАТЕЛЯ КОНЦЕНТРАТОРА** и **ПАРОЛЬ КОНЦЕНТРАТОРА**.
3. Дождитесь подтверждения функцией синхронизации данных SQL ИМЕНИ ПОЛЬЗОВАТЕЛЯ И ПАРОЛЯ. При подтверждении учетных данных зеленая галочка отображается справа от ПАРОЛЯ.
4. В раскрывающемся списке выберите политику **РАЗРЕШЕНИЕ КОНФЛИКТОВ**.

 **Выигрывает концентратор** - любые изменения, записанные в центральную базу данных, записываются в справочные базы данных, переопределяя изменения той же записи в справочной базе данных. Функционально это означает, что первое изменение, записанное на концентратор, распространяется на другие базы данных.


 **Выигрывает клиент** - изменения, записанные на концентраторе, переопределяются изменениями в справочных базах данных. Функционально это означает, что последнее изменение, записанное на концентратор, сохраняется и распространяется на другие базы данных.

5.	Щелкните стрелку вправо.

	![Image4](./media/sql-database-get-started-data-sync/NewSyncGroupHub-Figure4.PNG)

<h3><a id="AddRefDB"></a>Шаг 4г: добавление справочной базы данных</h3>

Повторите этот шаг для каждой дополнительной базы данных, которую следует добавить в группу синхронизации.

1. В раскрывающемся списке выберите базу данных, которую следует добавить.

	Базы данных в раскрывающемся списке включают и базы данных SQL Server, которые были зарегистрированы в агенте, и экземпляры баз данных SQL.
2.	Введите учетные данные для этой базы данных: **ИМЯ ПОЛЬЗОВАТЕЛЯ** и **ПАРОЛЬ**.
3.	В раскрывающемся списке выберите **НАПРАВЛЕНИЕ СИНХРОНИЗАЦИИ** для этой базы данных.

	**Двунаправленная** - изменения справочной базы данных записываются в центральную базу данных, а изменения в центральной базе данных записываются в справочную базу данных.

	**Синхронизация из концентратора** - база данных получает обновления от концентратора. Изменения не отправляются на концентратор.

	**Синхронизация в концентратор** - база данных отправляет обновления на концентратор. Изменения в концентраторе не записываются в эту базу данных.

4.	Чтобы завершить создание группы синхронизации, выберите флажок в правом нижнем углу мастера. Дождитесь подтверждения функцией синхронизации данных SQL учетных данных. Зеленая галочка указывает на то, что учетные данные подтверждены.

5.	Еще раз щелкните галочку. Это позволит вернуться на страницу **СИНХРОНИЗАЦИЯ** в разделе "Базы данных SQL". Эта группа синхронизации теперь отображается вместе с другими группами синхронизации и агентами.

	![Image5](./media/sql-database-get-started-data-sync/NewSyncGroupReference-Figure5.PNG)


<h2><a id="SyncRules"></a>Шаг 5: выбор данных для синхронизации</h2>

При использовании синхронизации данных SQL Azure вы можете выбрать таблицы и столбцы для синхронизации. Если вам также требуется отфильтровать столбец, чтобы синхронизировались только строки с определенными значениями (например, "возраст>=65"), используйте для выбора данных для синхронизации портал синхронизации данных SQL Azure, а также ознакомьтесь с документацией, посвященной выбору таблиц, столбцов и строк для синхронизации.

1.	Вернитесь на [портал управления](http://manage.windowsazure.com).
2.	Щелкните **БАЗЫ ДАННЫХ SQL**.
3.	Выберите вкладку **СИНХРОНИЗАЦИЯ**.
4.	Щелкните имя этой группы синхронизации.
5.	Выберите вкладку **ПРАВИЛА СИНХРОНИЗАЦИИ**.
6.	Выберите базу данных, для которой следует предоставить схему группы синхронизации.
7.	Щелкните стрелку вправо.
8.	Щелкните **ОБНОВИТЬ СХЕМУ**.
9.	Для каждой таблицы в базе данных выберите столбцы, которые следует включить в синхронизацию. 
	- Столбцы с данными неподдерживаемых типов выбрать нельзя. 
	- Если в таблице не выбраны столбцы, она не будет включена в группу синхронизации. 
	- Чтобы выбрать все таблицы или отменить их выбор, щелкните "ВЫБРАТЬ" в нижней части экрана.
10.	Щелкните **СОХРАНИТЬ**, затем дождитесь завершения провизионирования группы синхронизации.
11.	Чтобы вернуться на главную страницу синхронизации данных, щелкните стрелку назад в левом верхнем углу экрана (над именем группы синхронизации).

	![Image6](./media/sql-database-get-started-data-sync/NewSyncGroupSyncRules-Figure6.PNG)

<h2><a id="Configure"></a>Шаг 6: настройка группы синхронизации</h2>

Всегда можно синхронизировать группу синхронизации, щелкнув СИНХРОНИЗАЦИЯ в нижней части главной страницы синхронизации данных.
Если необходимо, чтобы группа синхронизации синхронизировалась по расписанию, необходимо настроить группу синхронизации.

1.	Вернитесь на [портал управления](http://manage.windowsazure.com).
2.	Щелкните **БАЗЫ ДАННЫХ SQL**.
3.	Выберите вкладку **СИНХРОНИЗАЦИЯ**.
4.	Щелкните имя этой группы синхронизации.
5.	Выберите вкладку **НАСТРОЙКА**.
6.	**АВТОМАТИЧЕСКАЯ СИНХРОНИЗАЦИЯ**
	- Чтобы настроить группу синхронизации для синхронизации с заданной частотой, щелкните **ВКЛ**. Вы все еще можете выполнить синхронизацию по требованию нажатием кнопки СИНХРОНИЗАЦИЯ.
	- Нажмите кнопку **ВЫКЛ**, чтобы синхронизация группы синхронизации происходила только при нажатии кнопки СИНХРОНИЗАЦИЯ.
7.	**ЧАСТОТА СИНХРОНИЗАЦИИ**
	- Если включена автоматическая синхронизация, задайте частоту синхронизации. Частота должна быть от 5 минут до 1 месяца.
8.	Щелкните **СОХРАНИТЬ**.

![Image7](./media/sql-database-get-started-data-sync/NewSyncGroupConfigure-Figure7.PNG)

Поздравляем! Вы создали группу синхронизации, которая включает и экземпляр базы данных SQL, и базу данных SQL Server.

<h2><a id="NextSteps"></a>Дальнейшие действия</h2>
Дополнительные сведения о синхронизации данных SQL и базе данных SQL см. в следующих документах:

* [Подпишитесь на расширенное предложение по базе данных SQL] (../sign-up-for-sql-database-premium/)
* [Синхронизация данных SQL (портал WA)](http://msdn.microsoft.com/ru-ru/library/windowsazure/jj856263.aspx)
* [Приступая к работе с базой данных SQL Azure](../getting-started-w-sql-databases/)
* [Жизненный цикл базы данных SQL Server ](http://go.microsoft.com/fwlink/?LinkId=275193)









