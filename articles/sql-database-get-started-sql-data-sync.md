<properties linkid="manage-services-sql-databases-datasync" urlDisplayName="How to sync data" pageTitle="Getting started with SQL Databases Data Sync" metaKeywords="" description="" metaCanonical="" services="sql-database" documentationCenter="" title="Getting Started with Azure SQL Data Sync" authors="spelleru" solutions="" manager="" editor="" />

<tags ms.service="sql-database" ms.workload="data-management" ms.tgt_pltfrm="na" ms.devlang="na" ms.topic="article" ms.date="01/01/1900" ms.author="spelleru"></tags>

# Приступая к работе с синхронизацией данных SQL Azure

В этом учебнике вы ознакомитесь с основами синхронизации данных SQL Azure с использованием портала Azure (предварительная версия).

Для выполнения приведенных в нем действий необходим минимальный опыт работы с SQL Server и базой данных SQL Azure. В этом учебнике вы создадите гибридную группу синхронизацию (экземпляры SQL Server и базы данных SQL), полностью настроенную и синхронизирующуюся по заданному расписанию.

## Оглавление

-   [Шаг 1: подключение к базе данных SQL Azure][Шаг 1: подключение к базе данных SQL Azure]
-   [Шаг 2: добавление агента клиента ()][Шаг 2: добавление агента клиента ()]
-   [Шаг 3: регистрация базы данных SQL Server в агенте клиента][Шаг 3: регистрация базы данных SQL Server в агенте клиента]
-   [Шаг 4: создание группы синхронизации][Шаг 4: создание группы синхронизации]
-   [Шаг 5: выбор данных для синхронизации][Шаг 5: выбор данных для синхронизации]
-   [Шаг 6: настройка группы синхронизации][Шаг 6: настройка группы синхронизации]

## <span id="Connect"></span></a>Шаг 1: подключение к базе данных SQL Azure

1.  Выполните вход на [Портал управления][Портал управления].

2.  Щелкните **БАЗЫ ДАННЫХ SQL** на левой панели.

3.  Щелкните **СИНХРОНИЗИРОВАТЬ** в нижней части страницы. При нажатии кнопки СИНХРОНИЗАЦИЯ появится список элементов, которые можно добавить: **Новая группа** и **Новый агент синхронизации**.

4.  Чтобы запустить мастер нового агента синхронизации данных SQL, щелкните **Новый агент синхронизации**

5.  Если вы не добавляли агента ранее, **щелкните здесь для его загрузки**.

    ![рисунок 1][рисунок 1]

## <span id="AddAgent"></span></a>Шаг 2: добавление агента клиента ()

Этот шаг необходим только в том случае, если база данных SQL Server, включенная в группу синхронизации, будет размещена на локальных ресурсах. В противном случае вы можете перейти к шагу 4. Создайте группу синхронизации, если в вашей группе синхронизации заданы только экземпляры базы данных SQL.

### <span id="InstallRequiredSoftware"></span></a>Шаг 2а: установка необходимого программного обеспечения

Убедитесь, что на компьютере, где установлен агент клиента, установлены следующие компоненты.

-   **.NET Framework 4,0**

    Платформу .NET Framework 4.0 можно установить [отсюда][отсюда].

-   **Системные типы CRL Microsoft SQL Server 2008 R2 SP1 (x86)**

    Системные типы CLR Microsoft SQL Server 2008 R2 SP1 (x86) можно установить [отсюда][1]

-   **Общие объекты управления Microsoft SQL Server 2008 R2 SP1 (x86)**

    Общие объекты управления Microsoft SQL Server 2008 R2 SP1 (x86) можно установить [отсюда][1]

### <span id="InstallClient"></span></a>Шаг 2б: установка нового агента клиента

Выполните инструкции в разделе [Установка агента клиента (синхронизация данных SQL)][Установка агента клиента (синхронизация данных SQL)] для установки агента.

### <span id="RegisterSSDb"></span></a>Шаг 2в: завершение работы мастера создания нового агента синхронизации данных SQL

1.  Вернитесь в мастер нового агента синхронизации данных SQL.
2.  Присвойте агенту понятное имя.
3.  В раскрывающемся списке выберите **РЕГИОН** (центр обработки данных) для размещения этого агента.
4.  В раскрывающемся списке выберите пункт **ПОДПИСКА** для размещения этого агента.
5.  Щелкните стрелку вправо.

## <span id="RegisterSSDB"></span></a>Шаг 3: регистрация базы данных SQL Server в агенте клиента

Установив агент клиента, зарегистрируйте все локальные базы данных SQL Server, которые следует включить в группу синхронизации агента.
Чтобы зарегистрировать базу данных в агенте, следуйте указаниям, приведенным в статье [Как зарегистрировать базу данных SQL Server в клиентском агенте][Как зарегистрировать базу данных SQL Server в клиентском агенте].

## <span id="CreateSG"></span></a>Шаг 4: создание группы синхронизации

### <span id="StartNewSGWizard"></span></a>Шаг 4а: запуск мастера создания новой группы синхронизации

1.  Вернитесь на [портал управления][Портал управления].
2.  Нажмите кнопку **БАЗЫ ДАННЫХ SQL**
3.  Щелкните **ДОБАВИТЬ СИНХРОНИЗАЦИЮ** в нижней части страницы, затем выберите пункт "Новая группа синхронизации".

    ![рисунок 2][рисунок 2]

### <span></span></a>Шаг 4б: ввод основных параметров

1.  Введите понятное имя для группы синхронизации.
2.  В раскрывающемся списке выберите **РЕГИОН** (центр обработки данных) для размещения этой группы синхронизации.
3.  Щелкните стрелку вправо.

    ![рисунок 3][рисунок 3]

### <span id="DefineHubDB"></span></a>Шаг 4в: указание концентратора синхронизации

1.  В раскрывающемся списке выберите экземпляр базы данных SQL, который будет служить концентратором группы синхронизации.
2.  Введите учетные данные для этого экземпляра базы данных SQL: **ИМЯ ПОЛЬЗОВАТЕЛЯ КОНЦЕНТРАТОРА** и **ПАРОЛЬ КОНЦЕНТРАТОРА**.
3.  Дождитесь подтверждения функцией синхронизации данных SQL ИМЕНИ ПОЛЬЗОВАТЕЛЯ И ПАРОЛЯ. При подтверждении учетных данных зеленая галочка отображается справа от ПАРОЛЯ.
4.  В раскрывающемся списке выберите политику **РАЗРЕШЕНИЕ КОНФЛИКТОВ**.

     **Выигрывает концентратор** – любые изменения, записанные в центральную базу данных, записываются в справочные базы данных, переопределяя изменения той же записи в справочной базе данных. Функционально это означает, что первое изменение, записанное на концентратор, распространяется на другие базы данных.

     **Выигрывает клиент** – изменения, записанные на концентраторе, переопределяются изменениями в справочных базах данных. Функционально это означает, что последнее изменение, записанное на концентратор, сохраняется и распространяется на другие базы данных.

1.  Щелкните стрелку вправо.

    ![рисунок 4][рисунок 4]

### <span id="AddRefDB"></span></a>Шаг 4г: добавление справочной базы данных

Повторите этот шаг для каждой дополнительной базы данных, которую следует добавить в группу синхронизации.

1.  В раскрывающемся списке выберите базу данных, которую следует добавить.

    Базы данных в раскрывающемся списке включают и базы данных SQL Server, которые были зарегистрированы в агенте, и экземпляры баз данных SQL.

2.  Введите учетные данные для этой базы данных: **ИМЯ ПОЛЬЗОВАТЕЛЯ** и **ПАРОЛЬ**.
3.  В раскрывающемся списке выберите **НАПРАВЛЕНИЕ СИНХРОНИЗАЦИИ** для этой базы данных.

    **Двунаправленная** – изменения справочной базы данных записываются в центральную базу данных, а изменения в центральной базе данных записываются в справочную базу данных.

    **Синхронизация из концентратора** – база данных получает обновления от концентратора. Изменения не отправляются на концентратор.

    **Синхронизация в концентратор** – база данных отправляет обновления на концентратор. Изменения в концентраторе не записываются в эту базу данных.

4.  Чтобы завершить создание группы синхронизации, выберите флажок в правом нижнем углу мастера. Дождитесь подтверждения функцией синхронизации данных SQL учетных данных. Зеленая галочка указывает на то, что учетные данные подтверждены.

5.  Еще раз щелкните галочку Это позволит вернуться на страницу **СИНХРОНИЗАЦИЯ** в разделе "Базы данных SQL". Эта группа синхронизации теперь отображается вместе с другими группами синхронизации и агентами.

    ![рисунок 5][рисунок 5]

## <span id="SyncRules"></span></a>Шаг 5: выбор данных для синхронизации

При использовании синхронизации данных SQL Azure вы можете выбрать таблицы и столбцы для синхронизации. Если также требуется отфильтровать столбец, чтобы синхронизировались только строки с определенными значениями (например, «возраст\>=65»), используйте для выбора данных для синхронизации портал синхронизации данных SQL Azure, а также ознакомьтесь с документацией, посвященной выбору таблиц, столбцов и строк для синхронизации.

1.  Вернитесь на [портал управления][Портал управления].
2.  Нажмите кнопку **БАЗЫ ДАННЫХ SQL**
3.  Щелкните вкладку **СИНХРОНИЗАЦИЯ**.
4.  Щелкните имя этой группы синхронизации.
5.  Щелкните вкладку **ПРАВИЛА СИНХРОНИЗАЦИИ**.
6.  Выберите базу данных, для которой следует предоставить схему группы синхронизации.
7.  Щелкните стрелку вправо.
8.  Щелкните **ОБНОВИТЬ СХЕМУ**.
9.  Для каждой таблицы в базе данных выберите столбцы, которые следует включить в синхронизацию.
    -   Столбцы с данными неподдерживаемых типов выбрать нельзя.
    -   Если в таблице не выбраны столбцы, она не будет включена в группу синхронизации.
    -   Чтобы выбрать все таблицы или отменить их выбор, щелкните «ВЫБРАТЬ» в нижней части экрана.
10. Щелкните **СОХРАНИТЬ**, затем дождитесь завершения подготовки группы синхронизации.
11. Чтобы вернуться на главную страницу синхронизации данных, щелкните стрелку назад в левом верхнем углу экрана (над именем группы синхронизации).

    ![рисунок 6][рисунок 6]

## <span id="Configure"></span></a>Шаг 6: настройка группы синхронизации

Вы можете в любой момент синхронизировать группу синхронизации, щелкнув «СИНХРОНИЗАЦИЯ» в нижней части целевой страницы синхронизации данных.
Если требуется, чтобы группа синхронизации синхронизировалась по расписанию, настройте группу синхронизации соответствующим образом.

1.  Вернитесь на [портал управления][Портал управления].
2.  Нажмите кнопку **БАЗЫ ДАННЫХ SQL**
3.  Щелкните вкладку **СИНХРОНИЗАЦИЯ**.
4.  Щелкните имя этой группы синхронизации.
5.  Выберите вкладку **НАСТРОЙКА**.
6.  **АВТОМАТИЧЕСКАЯ СИНХРОНИЗАЦИЯ**
    -   Чтобы настроить группу синхронизации для синхронизации с заданной частотой, щелкните **ВКЛ**. По-прежнему можно выполнить синхронизацию по требованию нажатием кнопки СИНХРОНИЗАЦИЯ.
    -   Щелкните **ВЫКЛ**, чтобы настроить группу синхронизации для синхронизации только при нажатии кнопки «СИНХРОНИЗАЦИЯ».
7.  **ЧАСТОТА СИНХРОНИЗАЦИИ**
    -   Если включена автоматическая синхронизация, задайте частоту синхронизации. Частота должна быть между 5 минутами и 1 месяцем.
8.  Щелкните **СОХРАНИТЬ**.

![рисунок 7][рисунок 7]

Поздравляем! Вы создали группу синхронизации, которая включает и экземпляр базы данных SQL, и базу данных SQL Server.

## <span id="NextSteps"></span></a> Дальнейшие действия

Дополнительные сведения о синхронизации данных SQL и базе данных SQL см. в следующих документах:

-   [Подпишитесь на расширенное предложение для базы данных SQL] (../sign-up-for-sql-database-premium/)
-   [Синхронизация данных SQL (портал WA)][Синхронизация данных SQL (портал WA)]
-   [Приступая к работе с базой данных SQL Azure][Приступая к работе с базой данных SQL Azure]
-   [Жизненный цикл базы данных SQL Server][Жизненный цикл базы данных SQL Server]

  [Шаг 1: подключение к базе данных SQL Azure]: #Connect
  [Шаг 2: добавление агента клиента ()]: #AddAgent
  [Шаг 3: регистрация базы данных SQL Server в агенте клиента]: #RegisterSSDB
  [Шаг 4: создание группы синхронизации]: #CreateSG
  [Шаг 5: выбор данных для синхронизации]: #SyncRules
  [Шаг 6: настройка группы синхронизации]: #Configure
  [Портал управления]: http://manage.windowsazure.com
  [рисунок 1]: ./media/sql-database-get-started-data-sync/SQLDatabaseScreen-Figure1.PNG
  [отсюда]: http://go.microsoft.com/fwlink/?linkid=205836
  [1]: http://www.microsoft.com/download/en/details.aspx?id=26728
  [Установка агента клиента (синхронизация данных SQL)]: http://msdn.microsoft.com/ru-ru/library/jj823137.aspx
  [Как зарегистрировать базу данных SQL Server в клиентском агенте]: http://msdn.microsoft.com/ru-ru/library/jj823138.aspx
  [рисунок 2]: ./media/sql-database-get-started-data-sync/NewSyncGroup-Figure2.png
  [рисунок 3]: ./media/sql-database-get-started-data-sync/NewSyncGroupName-Figure3.PNG
  [рисунок 4]: ./media/sql-database-get-started-data-sync/NewSyncGroupHub-Figure4.PNG
  [рисунок 5]: ./media/sql-database-get-started-data-sync/NewSyncGroupReference-Figure5.PNG
  [рисунок 6]: ./media/sql-database-get-started-data-sync/NewSyncGroupSyncRules-Figure6.PNG
  [рисунок 7]: ./media/sql-database-get-started-data-sync/NewSyncGroupConfigure-Figure7.PNG
  [Синхронизация данных SQL (портал WA)]: http://msdn.microsoft.com/ru-ru/library/windowsazure/jj856263.aspx
  [Приступая к работе с базой данных SQL Azure]: ../getting-started-w-sql-databases/
  [Жизненный цикл базы данных SQL Server]: http://go.microsoft.com/fwlink/?LinkId=275193
