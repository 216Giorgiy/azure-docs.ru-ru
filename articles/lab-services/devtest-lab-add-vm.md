---
title: Добавление виртуальной машины в лабораторию в Azure DevTest Labs | Документация Майкрософт
description: Узнайте, как добавить виртуальную машину в лабораторию в Azure DevTest Labs
services: devtest-lab,virtual-machines
documentationcenter: na
author: spelluru
manager: ''
editor: ''
ms.assetid: ''
ms.service: devtest-lab
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/11/2018
ms.author: spelluru
ms.openlocfilehash: ce95a2177260e97113fd5e639671075eb6ad40cd
ms.sourcegitcommit: 248c2a76b0ab8c3b883326422e33c61bd2735c6c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/23/2018
ms.locfileid: "39215022"
---
# <a name="add-a-vm-to-a-lab-in-azure-devtest-labs"></a>Добавление виртуальной машины в лабораторию в Azure DevTest Labs
Если вы уже [создали свою первую виртуальную машину](devtest-lab-create-first-vm.md), скорее всего, вы использовали предварительно загруженный [образ Мarketplace](devtest-lab-configure-marketplace-images.md). Теперь, если вы хотите добавить в лабораторию больше виртуальных машин, вы также можно использовать *базовый образ* — [пользовательский образа](devtest-lab-create-template.md) или [формулу](devtest-lab-manage-formulas.md). В данном руководстве описывается добавление виртуальной машины в лабораторию в DevTest Labs с помощью портала Azure.

В этой статье также описывается управление артефактами для виртуальной машины в лаборатории.

## <a name="steps-to-add-a-vm-to-a-lab-in-azure-devtest-labs"></a>Добавление виртуальной машины в лабораторию в Azure DevTest Labs
1. Войдите на [портале Azure](http://go.microsoft.com/fwlink/p/?LinkID=525040).
1. Щелкните **Все службы** и выберите в списке **DevTest Labs**.
1. Из списка лабораторий выберите ту, в которой необходимо создать виртуальную машину.  
1. В области **Обзор** выберите **+ Добавить**.  

    ![Кнопка добавления виртуальной машины](./media/devtest-lab-add-vm/devtestlab-home-blade-add-vm.png)

1. В области **Выбрать базу** выберите базу для виртуальной машины.
1. В области **Виртуальная машина** поле **Имя виртуальной машины** предварительно заполнено уникальным автоматически созданным именем. Имя соответствует имени пользователя в вашем адресе электронной почты, за которым следует уникальное трехзначное число. Эта функция экономит ваше время, избавляя вас от необходимости придумывать и вводить имя каждый раз, когда вы создаете виртуальную машину. Вы можете изменить автозаполненное значение в этом поле на имя, которое вам требуется. Чтобы переопределить автозаполненное имя виртуальной машины, введите его в текстовое поле **Имя виртуальной машины**. 

    ![Область виртуальной машины в лаборатории](./media/devtest-lab-add-vm/devtestlab-lab-vm-blade.png)

1. **Имя пользователя** для виртуальной машины предварительно заполнено уникальным автоматически созданным именем. Имя соответствует имени пользователя в вашем адресе электронной почты. Эта функция экономит ваше время, избавляя от необходимости придумывать имя пользователя при создании новой виртуальной машины. Вы также можете изменить автозаполненное значение в этом поле на имя пользователя, которое вам требуется. Чтобы переопределить значение автозаполнения для имени пользователя, введите значение в текстовое поле **Имя пользователя**. Этому пользователю будут предоставлены права **администратора** на виртуальной машине.     
1. Для **пароля**.
    
    Если вы создаете первую виртуальную машину в лаборатории, введите пароль в текстовое поле **Введите значение**. Чтобы сохранить этот пароль в качестве пароля по умолчанию в Azure Key Vault, связанном с лабораторией, щелкните **Save as default password** (Сохранить как пароль по умолчанию). Пароль по умолчанию сохраняется в хранилище ключей с именем: **VmPassword**. Когда вы пытаетесь создать последующие виртуальные машины в лаборатории, **VmPassword** автоматически выбирается в качестве **пароля**. Чтобы переопределить значение, снимите флажок **Use a saved secret** (Использовать сохраненный секрет) и введите пароль. 

    Вы также можете сначала сохранить секреты в хранилище ключей, а затем использовать их при создании виртуальной машины в лаборатории. Дополнительные сведения см. в статье [Хранение секретов в хранилище ключей в Azure DevTest Labs](devtest-lab-store-secrets-in-key-vault.md). Если вы хотите использовать пароль, хранящийся в хранилище ключей, выберите **Use a saved secret** (Использовать сохраненный секрет) и укажите значение ключа, которое соответствует секрету (пароль). 
3. **Virtual machine disk type** (Тип диска виртуальной машины) определяет, какой тип диска хранилища поддерживается для виртуальных машин в лаборатории.
4. Щелкните **Размер виртуальной машины** и выберите один из стандартных пунктов, указывающих количество ядер процессора, объем ОЗУ и размер жесткого диска для создаваемой виртуальной машины.
5. Щелкните **Артефакты**, а затем выберите из списка и настройте артефакты, которые нужно добавить в базовый образ.
    **Примечание.** Если вы незнакомы с DevTest Labs или настройкой артефактов, перейдите к разделу [Добавление существующего артефакта к виртуальной машине](#add-an-existing-artifact-to-a-vm), а затем вернитесь в этот раздел.
6. Чтобы настроить сетевые параметры виртуальной машины и срок ее действия, выберите **Дополнительные параметры**. 

   Чтобы задать срок действия, щелкните значок календаря и укажите дату, в которую виртуальная машина будет автоматически удалена.  По умолчанию виртуальная машина является бессрочной. 
1. Если вы хотите просмотреть или скопировать шаблон Azure Resource Manager, перейдите к разделу [Сохранение шаблона Azure Resource Manager](#save-azure-resource-manager-template), а по завершении вернитесь сюда.
1. Щелкните **Создать** , чтобы добавить в лабораторию указанную виртуальную машину.
1. В области лаборатории отображается состояние создания виртуальной машины. Сначала это состояние **Создается**, а после запуска виртуальной машины — **Выполняется**.

> [!NOTE]
> Описание процесса [добавления запрашиваемой виртуальной машины](devtest-lab-add-claimable-vm.md) поможет создать запрашиваемую виртуальную машину, которую смогут использовать вcе пользователи в лаборатории.
>
>

## <a name="add-an-existing-artifact-to-a-vm"></a>Добавление существующего артефакта к виртуальной машине
Существующие артефакты можно добавить при создании виртуальной машины. Каждая лаборатория включает в себя артефакты из общедоступного репозитория артефактов DevTest Labs, а также артефакты, созданные и добавленные в ваш собственный репозиторий артефактов.

* *Артефакты* Azure DevTest Labs позволяют указывать *действия*, которые выполняются при подготовке виртуальной машины, включая запуск скриптов Windows PowerShell, выполнение команд Bash и установку программного обеспечения.
* *Параметры* артефакта позволяют настроить артефакт для определенной ситуации.

Дополнительные сведения о создании артефактов см. в статье [Создание пользовательских артефактов для виртуальной машины DevTest Lab](devtest-lab-artifact-author.md).

1. Войдите на [портале Azure](http://go.microsoft.com/fwlink/p/?LinkID=525040).
1. Щелкните **Все службы** и выберите в списке **DevTest Labs**.
1. Из списка лабораторий выберите ту, где содержится виртуальная машина, с которой вы будете работать.  
1. Выберите **My virtual machines** (Мои виртуальные машины).
1. Выберите нужную виртуальную машину.
1. Выберите **Управление артефактами**. 
1. Выберите **Apply artifacts** (Применить артефакты).
1. В области **Применение артефактов** выберите артефакт для добавления к виртуальной машине.
1. В области **Добавление артефакта** введите значения обязательных параметров и другие параметры по желанию.  
1. Выберите **Добавить**, чтобы добавить артефакт и вернуться в область **Применение артефактов**.
1. Продолжайте добавлять артефакты, необходимые для виртуальной машины.
1. После добавления артефактов можно [изменить порядок, в котором они выполняются](#change-the-order-in-which-artifacts-are-run). Также можно вернуться к [просмотру или изменению артефакта](#view-or-modify-an-artifact).
1. После добавления артефактов выберите **Применить**.

## <a name="change-the-order-in-which-artifacts-are-run"></a>Изменение порядка выполнения артефактов
По умолчанию действия артефактов выполняются в порядке их добавления на виртуальную машину. Ниже показано, как изменить порядок, в котором выполняются артефакты.

1. В верхней части области **Применение артефактов** щелкните ссылку, указывающую количество добавленных к виртуальной машине артефактов.
   
    ![Количество артефактов, добавленных к виртуальной машине](./media/devtest-lab-add-vm-with-artifacts/devtestlab-add-artifacts-blade-selected-artifacts.png)
1. В области **Выбранные артефакты** расположите артефакты в нужном порядке с помощью перетаскивания. **Примечание.** Если у вас возникли проблемы при перетаскивании артефактов, убедитесь, что вы перетаскиваете их за левую сторону. 
1. По окончании нажмите кнопку **ОК** .  

## <a name="view-or-modify-an-artifact"></a>просмотру или изменению артефакта
Для просмотра или изменения параметров артефакта выполните следующие действия:

1. В верхней части области **Применение артефактов** щелкните ссылку, указывающую количество добавленных к виртуальной машине артефактов.
   
    ![Количество артефактов, добавленных к виртуальной машине](./media/devtest-lab-add-vm-with-artifacts/devtestlab-add-artifacts-blade-selected-artifacts.png)
1. В области **Выбранные артефакты** выберите артефакт, который нужно просмотреть или изменить.  
1. В области **Добавление артефакта** внесите необходимые изменения. Затем нажмите кнопку **ОК**, чтобы закрыть область **Добавление артефакта**.
1. Нажмите кнопку **ОК**, чтобы закрыть область **Выбранные артефакты**.

## <a name="save-azure-resource-manager-template"></a>Сохранение шаблона Azure Resource Manager
С помощью шаблона Azure Resource Manager можно декларативно определить повторяемое развертывание. Далее описывается процесс сохранения шаблона Azure Resource Manager для создаваемой виртуальной машины.
После сохранения шаблон Azure Resource Manager можно использовать для [развертывания новых виртуальных машин с помощью Azure PowerShell](../azure-resource-manager/resource-group-overview.md#template-deployment).

1. В области **Виртуальная машина** выберите **Просмотр шаблона Azure Resource Manager**.
2. В области **Просмотр шаблона Azure Resource Manager** выделите текст шаблона.
3. Скопируйте выделенный текст в буфер обмена.
4. Нажмите кнопку **ОК**, чтобы закрыть область **Просмотр шаблона Azure Resource Manager**.
5. Откройте текстовый редактор.
6. Вставьте текст шаблона из буфера обмена.
7. Сохраните файл для последующего использования.

[!INCLUDE [devtest-lab-try-it-out](../../includes/devtest-lab-try-it-out.md)]

## <a name="next-steps"></a>Дополнительная информация
* После создания виртуальной машины к ней можно подключиться, щелкнув **Подключиться** в области виртуальной машины.
* Узнайте, как [создавать пользовательские артефакты для виртуальной машины DevTest Labs](devtest-lab-artifact-author.md).
* Изучите [коллекцию шаблонов быстрого запуска Azure Resource Manager для DevTest Labs](https://github.com/Azure/azure-devtestlab/tree/master/Samples).
