<properties
	pageTitle="Технический обзор пакетной службы Azure | Microsoft Azure"
	description="Узнайте об основных понятиях, рабочих процессах и сценариях Пакетной службы Azure"
	services="batch"
	documentationCenter=""
	authors="dlepow"
	manager="timlt"
	editor=""/>

<tags
	ms.service="batch"
	ms.workload="big-compute"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="get-started-article"
	ms.date="07/13/2015"
	ms.author="danlep"/>


# Технический обзор Пакетной службы Azure
Пакетная служба Azure помогает эффективно запускать крупномасштабные параллельные и высокопроизводительные (HPC) приложения в облаке. Это служба платформы, которая предоставляет планирование заданий и автоматическое масштабирование управляемой коллекции виртуальных машин (ВМ) для запуска заданий. С помощью Пакетной службы можно настроить пакетные рабочие нагрузки для запуска в Azure по требованию или по расписанию и не беспокоиться о сложности планирования заданий, а также о настройке и управлении кластером HPC или виртуальными машинами.

>[AZURE.NOTE]Для использования Пакетной службы необходима учетная запись Azure. Если ее нет, можно создать бесплатную пробную учетную запись всего за несколько минут. Подробную информацию см. в разделе [Создание учетной записи Azure](http://azure.microsoft.com/develop/php/tutorials/create-a-windows-azure-account/).


## Варианты использования

Пакетная служба использует эластичность и масштаб облака, чтобы помочь вам с *пакетной обработкой* или *пакетными вычислениями*, —для этого выполняется большое количество схожих задач, чтобы получить некоторый требуемый результат. Программа командной строки или сценарий принимает набор файлов данных в качестве входных данных, обрабатывает их в виде последовательности задач и создает набор выходных файлов. Выходные файлы могут быть как конечным результатом, так и промежуточным этапом в рабочем процессе большего размера.

Пакетные вычисления — это общий шаблон для организаций, используемый для обработки, преобразования и анализа больших объемов данных по расписанию или запросу. Он включает в себя обработку полного цикла. Например, создание ежедневного банковского отчета о рисках или зарплатах, который должен формироваться по расписанию. Также он может решать задачи крупного бизнеса, науки и технического применения, для которых обычно требуются инструменты и ресурсы вычислительного кластера или сетки. Приложения включают традиционные HPC-приложения, например симуляцию динамики жидкостей, а также специальные рабочие нагрузки от создания цифрового содержимого до финансовых операций и естественнонаучных исследований.

Пакетная служба хорошо работает с приложениями и рабочими нагрузками, которые параллельно выполняют задачи на нескольких компьютерах, таких как вычислительные виртуальные машины под управлением Пакетной службы.

![Параллельные задачи][parallel]

**Рисунок 1. Параллельные задачи, выполняемые на нескольких компьютерах**

Примеры приведены ниже.

* Моделирование финансовых рисков.
* Обработка и визуализация изображений.
* Кодирование и перекодировка мультимедиа.
* Анализ генетических последовательностей.
* Тестирование программного обеспечения.

Пакетная служба может использоваться для выполнения параллельных вычислений с уменьшением шага в конце, а также других, более сложных параллельных рабочих нагрузок.

>[AZURE.NOTE]В настоящее время в Пакетной службе можно запускать только рабочие нагрузки Windows Server. Текущая версия Пакетной службы также не поддерживает приложения, использующие интерфейс передачи сообщений (MPI).

## Сценарии для разработчика

Пакетная служба поддерживает сценарии других разработчиков для настройки и запуска крупномасштабных параллельных рабочих нагрузок. Эти сценарии используют API для создания и управления пулами виртуальных машин (вычислительными узлами) и планирования заданий и задач, которые запускаются на них. В разделе [Основы API Пакетной службы Azure](batch-api-basics.md) приведены дополнительные сведения о пакетной службе.

Типичные сценарии разработчика Пакетной службы находятся в следующих разделах.

### Развертывание параллельной рабочей нагрузки

Используйте API Пакетной службы для развертывания параллельных, по сути, задач, таких как отрисовка изображений, на пул размером до нескольких тысяч вычислительных ядер. Вместо того, чтобы настраивать вычислительный кластер или писать код для создания очереди и планирования заданий и перемещения необходимых входных и выходных данных, можно автоматизировать процессы планирования объемных вычислительных заданий и масштабирования пула вычислительных виртуальных машин для выполнения заданий. Вы можете написать клиентские приложения для запуска заданий и задач по требованию, по расписанию или как часть большего рабочего процесса под управлением таких средств, как [Фабрика данных Azure](https://azure.microsoft.com/documentation/services/data-factory/).

На рис. 2 показан упрощенный рабочий процесс отправки приложения в пул Пакетной службы, где оно распределяется для обработки.

![Рабочие элементы рабочего процесса][work_item_workflow]

**Рис. 2. Развертывание параллельной рабочей нагрузки в Пакетной службе**

1.	Передайте входные файлы (например, исходные данные или изображения) для задания учетной записи хранения Azure. Чтобы Пакетная служба имела к ним доступ, они должны находиться в учетной записи хранения. Пакетная служба загружает файлы на вычислительные узлы при выполнении задачи.
2.	Передайте зависимые двоичные файлы в учетную запись хранения. Двоичные файлы включают в себя программу, которая выполняется задачей, и зависимые сборки. Эти файлы также должны быть доступны из хранилища и загружены на вычислительные узлы.
3.	Создайте пул вычислительных узлов, указав такие свойства, как размер их виртуальной машины и ОС, на которой они работают. Также можно определить, как изменяется количество узлов в пуле в зависимости от рабочей нагрузки. При запуске задачи ей назначается узел из этого пула.
4.	Определите задание для выполнения в пуле.
5.	Добавьте задачи в задание. Каждая задача использует переданную вами программу для обработки информации из переданного вами файла.
6.	Запустите приложение и отслеживайте полученные выходные данные.


### Перенос ресурсоемкого приложения в облако

Для запуска приложения в качестве службы в пуле вычислительных узлов, которым в фоновом режиме управляет пакетная служба, можно создать программу-оболочку для приложения в API приложений пакетной службы в режиме предварительного просмотра. Это может быть приложение, которое сегодня выполняется клиентских рабочих станциях или в вычислительном кластере. Вы можете разрабатывать службы, которые позволят пользователям перенести пиковую нагрузку в облако или запускать свои задачи полностью в облаке. Платформа пакетных приложений обеспечивает перемещение входных и выходных файлов, разделение заданий на задачи, обработку задач и заданий и постоянное хранение данных.

>[AZURE.IMPORTANT]Azure предоставляет API приложений пакетной службы только в режиме предварительного просмотра. Разработку приложений с этим API следует выполнять только для тестирования или проверки концепции проекта. Ключевые возможности будут интегрированы в API приложений пакетной службы в следующих релизах.

На рис. 3 показан базовый рабочий процесс публикации приложения с помощью API пакетных приложений с последующей отправкой задач в приложение пользователем.

![Рабочий процесс публикации приложений][app_pub_workflow]

**Рис. 3. Рабочий процесс публикации и запуска приложения с помощью приложений Пакетной службы**

1.	Подготовьте **образ приложения** — ZIP-файл с исполняемыми файлами приложения и всеми необходимыми файлами. Это могут быть те же исполняемые файлы, которые вы запускаете на традиционных фермах серверов или кластере.
2.	Создайте ZIP-файл с **облачной сборкой**, которая вызывает рабочие нагрузки и перенаправляет их в пакетную службу. Он состоит из двух компонентов.

	а. **Разделитель заданий** разбивает задание на задачи, которые могут быть обработаны независимо друг от друга. Например, в сценарии анимации разделитель заданий будет принимать в качестве задания фильм и разбивать его на отдельные кадры.

	b. **Обработчик задач** вызывает исполняемый файл приложения для заданной задачи. Например, в сценарии анимации обработчик задач будет вызывать программу визуализации для обработки отдельного, указанного задачей кадра.

3.	Используйте API пакетных приложений или инструменты разработчика для загрузки подготовленных на двух предыдущих шагах ZIP-файлов в учетную запись хранения Azure. Чтобы Пакетная служба имела к ним доступ, они должны находиться в учетной записи хранения. Обычно эта операция однократно выполняется администратором службы для каждого приложения.
4.	Укажите способ отправки заданий в приложение в Azure. Это может быть подключаемый модуль пользовательского интерфейса в приложении, веб-портал или автоматическая служба, которая является частью серверной системы.

	Вот как можно выполнить задание:

	а. Передайте входные файлы задания пользователя (например, исходные данные или изображения). Чтобы Пакетная служба имела к ним доступ, они должны находиться в учетной записи хранения.

	b. Отправьте задание с необходимыми параметрами и списком файлов.

	c. Отслеживайте ход выполнения задания с помощью интерфейсов API или портала приложений Пакетной службы.



## <a id="BKMK_Account">Учетная запись Пакетной службы</a>
Для использования Пакетной службы и разработки с ее помощью необходимо создать одну или несколько **учетных записей пакетной службы**. Все запросы в Пакетную службу должны быть аутентифицированы с помощью имени учетной записи и ее клавиши доступа.

Создать учетную запись Пакетной службы и управлять ее ключами доступа можно на портале предварительной версии Azure или с помощью [командлетов PowerShell Пакетной службы](batch-powershell-cmdlets-get-started.md).

Создание учетной записи Пакетной службы на портале:

1. Выполните вход на [портал предварительной версии Azure](https://portal.azure.com).

2. Щелкните **Создать** > **Вычисления** > **Marketplace** > **Всё** и введите *Batch* в поле поиска.

	![Пакетная служба в Marketplace][marketplace_portal]

3. Щелкните **Batch Service** в результатах поиска и выберите **Создать**.

4. В колонке **Новая учетная запись Пакетной службы** введите следующие сведения.

	а. В поле **Имя учетной записи** введите уникальное имя, которое будет использоваться в URL-адресе учетной записи Пакетной службы.

	>[AZURE.NOTE]Имя учетной записи Пакетной службы в Azure должно быть уникальным, содержать от 3 до 24 символов и состоять только из строчных букв и цифр.

	b. Щелкните **Группы ресурсов**, выберите существующую группу ресурсов для учетной записи или создайте новую.

	c. Если имеется несколько подписок, щелкните **Подписка** для выбора доступной подписки, в которой будет создана учетная запись.

	г) В поле **Расположение** выберите регион Azure, в котором доступна Пакетная служба.

	![Создание учетной записи Пакетной службы][account_portal]

5. Щелкните **Создать**для завершения создания учетной записи.


После создания учетной записи ее можно найти на портале для управления ключами доступа и другими параметрами. Например, для управления ключами доступа щелкните по значку ключа.

![Ключи учетной записи Пакетной службы][account_keys]

## Дополнительные ресурсы

* [Приступая к работе с библиотекой Пакетной службы Azure для .NET](batch-dotnet-get-started.md)
* [Библиотеки и инструменты разработки Пакетной службы Azure](batch-development-libraries-tools.md)
* [Справочник по REST API Пакетной службы Azure](http://go.microsoft.com/fwlink/p/?LinkId=517803)
* [Справочник по REST API приложений Пакетной службы Azure](http://go.microsoft.com/fwlink/p/?LinkId=517804)

[parallel]: ./media/batch-technical-overview/parallel.png
[marketplace_portal]: ./media/batch-technical-overview/marketplace_batch.PNG
[account_portal]: ./media/batch-technical-overview/batch_acct_portal.png
[account_keys]: ./media/batch-technical-overview/account_keys.PNG
[work_item_workflow]: ./media/batch-technical-overview/work_item_workflow.png
[app_pub_workflow]: ./media/batch-technical-overview/app_pub_workflow.png

<!---HONumber=Oct15_HO3-->