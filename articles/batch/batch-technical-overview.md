<properties
	pageTitle="Основные сведения о пакетной службе Azure | Microsoft Azure"
	description="Узнайте об использовании пакетной службы Azure для крупномасштабных параллельных рабочих нагрузок и рабочих нагрузок HPC."
	services="batch"
	documentationCenter=""
	authors="mmacy"
	manager="timlt"
	editor=""/>

<tags
	ms.service="batch"
	ms.workload="big-compute"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="get-started-article"
	ms.date="02/16/2016"
	ms.author="marsma"/>

# Основные сведения о пакетной службе Azure

Пакетная служба Azure позволяет эффективно запускать приложения, выполняющие крупномасштабные параллельные вычислительные задания с высокой производительностью, в облаке. Это служба платформы, которая планирует запуск ресурсоемких вычислительных задач в управляемой коллекции виртуальных машин и автоматически масштабирует вычислительные ресурсы в соответствии с требованиями задания.

С помощью пакетной службы вы можете программным способом определить вычислительные ресурсы Azure, которые будут использоваться для выполнения крупномасштабных пакетных заданий. Эти задания можно выполнять по запросу или по расписанию. Вам не нужно вручную настраивать кластер высокопроизводительных вычислений (HPC), отдельные виртуальные машины, виртуальные сети или планировщик заданий, а также управлять ими.

## Варианты использования пакетной службы

Пакетная служба — это управляемая служба Azure, которая используется для *пакетной обработки* и *пакетных вычислений*. Она выполняет большое количество схожих задач, чтобы получить нужный результат. Пакетная обработка данных чаще всего используется в организациях для обработки, преобразования и анализа больших объемов данных.

Пакетная служба хорошо работает с параллельными приложениями и рабочими нагрузками, которые выполняют задачи одновременно на нескольких компьютерах.

![Параллельные задачи][1]<br/>

Примеры рабочих нагрузок, которые обрабатываются по этому методу:

* Моделирование финансовых рисков.
* анализ климатических и гидрологических данных;
* отрисовка, обработка и анализ изображений;
* Кодирование и перекодировка мультимедиа.
* Анализ генетических последовательностей.
* анализ расчетного напряжения;
* Тестирование программного обеспечения.

Пакетная служба также может выполнять параллельные вычисления с уменьшением шага в конце и более сложные рабочие нагрузки HPC, такие как приложения, использующие интерфейс передачи сообщений (MPI).

Сравнение пакетной службы с другими решениями HPC в Azure см. в статье [Пакетные решения и решения HPC в облаке Azure](batch-hpc-solutions.md).

>[AZURE.NOTE] На данный момент пакетная служба поддерживает только рабочие нагрузки, выполняющиеся на виртуальных машинах под управлением Windows Server.

## Разработка с использованием пакетной службы

Решения, использующие пакетную службу Azure для обработки параллельных рабочих нагрузок, можно создать программным способом с помощью API-интерфейсов пакетной службы. Эти интерфейсы позволяют создавать пулы вычислительных узлов (виртуальных машин) и управлять ими, а также планировать задания и задачи, которые на них выполняются. Клиентское приложение или служба, которые вы создадите, будут использовать API-интерфейсы пакетной службы для взаимодействия с пакетной службой. Вы можете эффективно обрабатывать крупномасштабные рабочие нагрузки в своей организации или предоставлять внешние интерфейсы служб клиентам, чтобы они могли выполнять задания и задачи (по требованию или по расписанию) на одном, сотнях или тысячах узлов. Кроме того, пакетную службу также можно использовать в рамках более крупного рабочего процесса под управлением таких средств, как [фабрика данных Azure][data_factory].

> [AZURE.TIP] Дополнительные сведения о возможностях, которые предоставляют API пакетной службы, см. в статье [Обзор функций пакетной службы Azure](batch-api-basics.md).

### Учетные записи Azure, которые вам понадобятся

При разработке решений с использованием пакетной службы требуются следующие учетные записи в Microsoft Azure.

- **Учетная запись и подписка Azure**. Если у вас еще нет учетной записи Azure, вы можете активировать [преимущества для подписчиков MSDN][msdn_benefits] или зарегистрироваться для получения [бесплатной пробной версии][free_trial]. При создании учетной записи автоматически создается подписка по умолчанию.

- **Учетная запись пакетной службы**. Когда приложения взаимодействуют с пакетной службой, в качестве учетных данных используются имя, URL-адрес учетной записи и ключ доступа пакетной службы. Все ресурсы пакетной службы, такие как пулы, вычислительные узлы, задания и задачи, связаны с учетной записью пакетной службы. [Создать учетную запись пакетной службы и управлять ею](batch-account-create-portal.md) можно на портале Azure.

- **Учетная запись хранения**. В пакетную службу встроена поддержка работы с файлами в [службе хранилища Azure][azure_storage]. В большинстве сценариев пакетной службы служба хранилища Azure используется для промежуточного хранения файлов программ, которые запускают задачи, и данных, которые они обрабатывают, а также для хранения выходных данных, которые создаются в результате выполнения задач. Чтобы создать учетную запись хранения, см. инструкции в статье [Об учетных записях хранения Azure](./../storage/storage-create-storage-account.md).

### Библиотеки и инструменты для разработки в пакетной службе

Для разработки решений на базе пакетной службы Azure можно использовать клиентские библиотеки .NET для пакетной службы, PowerShell и даже прямые вызовы REST API. Используйте одно или все приведенные ниже средства для разработки клиентских приложений и служб, которые выполняют задания в пакетной службе.

- Клиентская библиотека [.NET для пакетной службы][api_net]. Эта библиотека используется для разработки большинства решений, использующих пакетную службу. Она [доступна на сайте NuGet][api_net_nuget].

- Клиентская библиотека [.NET для управления пакетной службой][api_net_mgmt]. Она также [доступна на сайте NuGet][api_net_mgmt_nuget]. Эта библиотека используется для программного управления учетными записями пакетной службы в клиентских приложениях или службах.

- [REST API пакетной службы][batch_rest]. Эти интерфейсы предоставляют те же возможности, что и клиентская библиотека .NET для пакетной службы. На самом деле эта библиотека также использует эти интерфейсы REST API для взаимодействия с пакетной службой.

- [Командлеты PowerShell для пакетной службы][batch_ps].С помощью командлетов для пакетной службы Azure в модуле [Azure PowerShell](./../powershell-install-configure.md) можно управлять ресурсами пакетной службы в PowerShell.

- [Обозреватель пакетной службы Azure][batch_explorer]. Это один из примеров приложений .NET для пакетной службы, [доступный на сайте GitHub][github_samples]. Создайте приложение WPF с помощью Visual Studio 2013 или 2015 и используйте его для просмотра ресурсов в учетной записи пакетной службы и управления ими во время разработки и отладки решений, использующих пакетную службу. Просматривайте сведения о заданиях, пулах и задачах, скачивайте файлы из вычислительных узлов и удаленно подключайтесь к узлам с помощью файлов удаленного рабочего стола (RDP). Чтобы получить их, нужно всего несколько раз щелкнуть в интерфейсе обозревателя пакетной службы.

- [Обозреватель службы хранилища Azure Microsoft][storage_explorer]. Хотя этот обозреватель не является собственно средством пакетной службы Azure, это полезный инструмент при разработке и отладке решений, использующих пакетную службу.

## Сценарий: развертывание параллельной рабочей нагрузки

Распространенное решение с использованием API пакетной службы для взаимодействия с пакетной службой включает в себя масштабирование принципиально параллельных рабочих нагрузок, таких как отрисовка изображений для 3D-формата, в пуле вычислительных узлов. Этот пул вычислительных узлов может быть своего рода фермой отрисовки, которая предоставляет десятки, сотни или даже тысячи ядер для заданий отрисовки.

На следующей схеме показан общий рабочий процесс, в котором используется клиентское приложение или размещенная служба для запуска параллельной рабочей нагрузки с помощью пакетной службы.

![Рабочий процесс решения с использованием пакетной службы][2]

В этом распространенном сценарии для обработки вычислительной рабочей нагрузки приложением или службой в пакетной службе Azure необходимо выполнить следующие действия:

1. Передайте **входные файлы** и **приложение**, которое будет обрабатывать эти файлы, в учетную запись хранения Azure. Входными файлами могут быть любые данные, которые будет обрабатывать приложение, например данные финансового моделирования или видеофайлы, которые необходимо перекодировать. В качестве приложения можно использовать любое приложение для обработки данных, например приложение отрисовки 3D-данных или медиатранскодер.

2. Создайте **пул** пакетной службы, состоящий из вычислительных узлов (виртуальные машины, которые будут выполнять задачи) в учетной записи пакетной службы. Укажите свойства, такие как [размер узла](./../cloud-services/cloud-services-sizes-specs.md), используемая операционная система и расположение в службе хранилища Azure для установки приложения (переданного на шаге 1) при присоединении узлов к пулу. Можно также настроить [автоматическое масштабирование](batch-automatic-scaling.md) пула для динамического изменения количества вычислительных узлов в пуле в зависимости от рабочей нагрузки.

3. Создайте **задание** пакетной службы для выполнения рабочей нагрузки в пуле вычислительных узлов. При создании задание связывается с пулом пакетной службы.

4. Добавьте **задачи** в задание. При добавлении задач в задание пакетная служба автоматически планирует их выполнение в вычислительных узлах пула. Каждая задача использует приложение, переданное для обработки входных файлов.

    - 4а. Перед выполнением задачи данные (входные файлы), которые нужно обработать, могут быть скачаны в назначенный задаче вычислительный узел. Если приложение еще не установлено на узле (см. шаг 2), оно будет скачано на данном этапе. По завершении скачивания задачи будут выполняться в соответствующих назначенных узлах.

5. При выполнении задач можно отправить запрос к пакетной службе, чтобы отслеживать ход выполнения задания и задач. Клиентское приложение или служба взаимодействует с пакетной службой по протоколу HTTPS, поэтому вы можете отслеживать состояние тысяч задач, выполняющихся на тысячах вычислительных узлов. Однако выполняйте только [эффективные запросы к пакетной службе](batch-efficient-list-queries.md).

6. Выполненные задачи отправляют выходные данные в службу хранилища Azure. Можно также извлечь файлы непосредственно из вычислительных узлов.

7. Если при мониторинге обнаруживается, что задачи в задании выполнены, выходные данные могут быть скачаны для дальнейшей обработки или оценки через клиентское приложение или службу.

Это всего лишь один из способов использования пакетной службы, и в этом сценарии описывается только небольшая часть доступных функций. Например, можно выполнять [несколько задач параллельно](batch-parallel-node-tasks.md) на каждом вычислительном узле и использовать [задачи подготовки и завершения задания](batch-job-prep-release.md) для подготовки узлов к запуску заданий и последующей очистки.

## Дальнейшие действия

Теперь, когда вы ознакомились с примером использования пакетной службы, пора узнать, как ее можно использовать для обработки параллельных рабочих нагрузок с ресурсоемкими вычислениями.

- Сведения об использовании C# и библиотеки .NET пакетной службы для реализации описанных выше методов см. в статье [Начало работы с библиотекой пакетной службы Azure для .NET](batch-dotnet-get-started.md). Это один из основных ресурсов, с которым нужно ознакомиться, приступая к работе с пакетной службой.

- Подробные сведения о возможностях API, которые предоставляет пакетная служба для рабочих нагрузок с ресурсоемкими вычислениями, см. в статье [Обзор функций пакетной службы Azure](batch-api-basics.md).

- Помимо обозревателя пакетной службы, использование многих функций пакетной службы с помощью библиотеки .NET для пакетной службы также демонстрируют другие [примеры кодов на сайте GitHub][github_samples].

- Список ресурсов по работе с пакетной службой см. на схеме в статье [Пакетная служба][learning_path].

[azure_storage]: https://azure.microsoft.com/services/storage/
[api_net]: https://msdn.microsoft.com/library/azure/mt348682.aspx
[api_net_nuget]: https://www.nuget.org/packages/Azure.Batch/
[api_net_mgmt]: https://msdn.microsoft.com/library/azure/mt463120.aspx
[api_net_mgmt_nuget]: https://www.nuget.org/packages/Microsoft.Azure.Management.Batch/
[batch_explorer]: https://github.com/Azure/azure-batch-samples/tree/master/CSharp/BatchExplorer
[batch_ps]: https://msdn.microsoft.com/library/azure/mt125957.aspx
[batch_rest]: https://msdn.microsoft.com/library/azure/Dn820158.aspx
[data_factory]: https://azure.microsoft.com/documentation/services/data-factory/
[free_trial]: https://azure.microsoft.com/pricing/free-trial/
[github_samples]: https://github.com/Azure/azure-batch-samples
[learning_path]: https://azure.microsoft.com/documentation/learning-paths/batch/
[msdn_benefits]: https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/
[storage_explorer]: http://storageexplorer.com/

[1]: ./media/batch-technical-overview/tech_overview_01.png
[2]: ./media/batch-technical-overview/tech_overview_02.png

<!---HONumber=AcomDC_0218_2016-->