<properties
	pageTitle="Основные сведения о пакетной службе Azure | Microsoft Azure"
	description="Узнайте об использовании пакетной службы Azure для крупномасштабных параллельных рабочих нагрузок и рабочих нагрузок HPC."
	services="batch"
	documentationCenter=""
	authors="mmacy"
	manager="timlt"
	editor=""/>

<tags
	ms.service="batch"
	ms.workload="big-compute"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="get-started-article"
	ms.date="06/02/2016"
	ms.author="marsma"/>

# Основные сведения о пакетной службе Azure

Пакетная служба Azure позволяет эффективно запускать приложения, выполняющие крупномасштабные параллельные вычислительные задания с высокой производительностью, в облаке. Это служба платформы, которая планирует запуск ресурсоемких вычислительных задач в управляемой коллекции виртуальных машин и автоматически масштабирует вычислительные ресурсы в соответствии с требованиями задания.

С помощью пакетной службы вы можете определять вычислительные ресурсы Azure, необходимые для выполнения приложений в параллельном режиме и в нужном масштабе. Вы можете выполнять задания по запросу или по расписанию. При этом вам не нужно вручную создавать и настраивать кластер высокопроизводительных вычислений (HPC), отдельные виртуальные машины, виртуальные сети или сложную инфраструктуру планировщика задач и заданий, а также управлять всеми этими ресурсами.

## Варианты использования пакетной службы

Пакетная служба — это управляемая служба Azure, которая используется для *пакетной обработки* и *пакетных вычислений*. Она выполняет большое количество схожих задач, чтобы получить нужный результат. Пакетная обработка данных чаще всего используется в организациях для обработки, преобразования и анализа больших объемов данных.

Пакетная служба хорошо работает с параллельными приложениями и рабочими нагрузками, которые выполняют задачи одновременно на нескольких компьютерах.

![Параллельные задачи][1]<br/>

Примеры рабочих нагрузок, которые обрабатываются по этому методу:

* Моделирование финансовых рисков.
* анализ климатических и гидрологических данных;
* отрисовка, обработка и анализ изображений;
* Кодирование и перекодировка мультимедиа.
* Анализ генетических последовательностей.
* анализ расчетного напряжения;
* Тестирование программного обеспечения.

Пакетная служба также может выполнять параллельные вычисления с уменьшением шага в конце и более сложные рабочие нагрузки HPC, включая приложения, использующие [интерфейс передачи сообщений](batch-mpi.md).

Сравнение пакетной службы с другими решениями HPC в Azure см. в статье [Пакетные решения и решения HPC в облаке Azure](batch-hpc-solutions.md).

## Разработка с использованием пакетной службы

Решения, использующие пакетную службу Azure для обработки параллельных рабочих нагрузок, можно создать программным способом с помощью API-интерфейсов пакетной службы. Эти интерфейсы позволяют создавать пулы вычислительных узлов (виртуальных машин) и управлять ими, а также планировать задания и задачи, которые на них выполняются. Клиентское приложение или служба, которые вы создадите, будут использовать API-интерфейсы пакетной службы для взаимодействия с пакетной службой. Вы можете эффективно обрабатывать крупномасштабные рабочие нагрузки в своей организации или предоставлять внешние интерфейсы служб клиентам, чтобы они могли выполнять задания и задачи (по требованию или по расписанию) на одном, сотнях или тысячах узлов. Кроме того, пакетную службу можно использовать в рамках более крупного рабочего процесса под управлением таких средств, как [фабрика данных Azure][data_factory].

> [AZURE.TIP] Дополнительные сведения о возможностях, которые предоставляют API пакетной службы, см. в статье [Обзор функций пакетной службы Azure](batch-api-basics.md).

### Учетные записи Azure, которые вам понадобятся

При разработке решений с использованием пакетной службы требуются следующие учетные записи в Microsoft Azure.

- **Учетная запись и подписка Azure.** Если у вас еще нет подписки Azure, вы можете активировать [преимущества для подписчиков MSDN][msdn_benefits] или зарегистрироваться для получения [бесплатной учетной записи Azure][free_account]. При создании учетной записи автоматически создается подписка по умолчанию.

- **Учетная запись пакетной службы.** Когда приложения взаимодействуют с пакетной службой, в качестве учетных данных используются имя и URL-адрес учетной записи, а также ключ доступа. Все ресурсы пакетной службы, такие как пулы, вычислительные узлы, задания и задачи, связаны с учетной записью пакетной службы. [Создать учетную запись пакетной службы и управлять ею](batch-account-create-portal.md) можно на портале Azure.

- **Учетная запись хранения.** В пакетную службу встроена поддержка работы с файлами в [службе хранилища Azure][azure_storage]. В большинстве сценариев пакетной службы служба хранилища Azure используется не только для промежуточного хранения файлов программ, которые запускают задачи, и данных, которые они обрабатывают, но и для хранения выходных данных, которые создаются в результате выполнения задач. Чтобы создать учетную запись хранения, см. инструкции в статье [Об учетных записях хранения Azure](./../storage/storage-create-storage-account.md).

### API-интерфейсы для разработки в пакетной службе

Приложения и службы могут отправлять прямые вызовы REST API с помощью одной или нескольких представленных ниже клиентских библиотек или их комбинаций. Таким образом они управляют вычислительными ресурсами и выполняют параллельные рабочие нагрузки в требуемом масштабе с помощью пакетной службы.

| API | Справочник по API | Загрузить | Примеры кода |
| ----------------- | ------------- | -------- | ------------ |
| **Пакетная служба (REST)** | [MSDN][batch_rest] | Недоступно | [MSDN][batch_rest] |
| **Пакетная служба (.NET)** | [MSDN][api_net] | [NuGet][api_net_nuget] | [GitHub][api_sample_net] |
| **Пакетная служба Python** | [readthedocs.io][api_python] | [PyPI][api_python_pypi] |[GitHub][api_sample_python] |
| **Batch Node.js** | [github.io][api_nodejs] | [npm][api_nodejs_npm] | - | 
| **Batch Java** (preview) | [github.io][api_java] | [Maven snapshot repo][api_java_jar] | - |

### Управление ресурсами пакетной службы

Помимо клиентских API, для управления ресурсами в своей учетной записи пакетной службы вы также можете использовать следующие средства.

- [Командлеты PowerShell для пакетной службы.][batch_ps] Командлеты пакетной службы Azure в модуле [Azure PowerShell](../powershell-install-configure.md) позволяют управлять ресурсами пакетной службы с помощью PowerShell.

- [Azure CLI.](../xplat-cli-install.md) Интерфейс командной строки Azure (Azure CLI) — это кроссплатформенный набор средств, обеспечивающий взаимодействие с разными службами Azure, включая пакетную службу, с помощью команд оболочки.

- Клиентская библиотека [.NET для управления пакетной службой](batch-management-dotnet.md). Эта библиотека, используемая для программного управления учетными записями, квотами и пакетами приложений пакетной службы, также [доступна на сайте NuGet][api_net_mgmt_nuget]. Ссылки на библиотеку управления см. на сайте [MSDN][api_net_mgmt].

### Средства пакетной службы

Хотя решения не обязательно создавать с помощью пакетной службы, эти средства могут оказаться полезными при создании и отладке приложений и служб пакетной службы.

- [Обозреватель пакетной службы Azure.][batch_explorer] Это один из примеров приложений .NET для пакетной службы, доступный на сайте [GitHub][github_samples]. Создайте приложение WPF с помощью Visual Studio 2013 или 2015 и используйте его для просмотра ресурсов в учетной записи пакетной службы и управления ими во время разработки и отладки решений, использующих пакетную службу. Просматривайте сведения о заданиях, пулах и задачах, скачивайте файлы из вычислительных узлов и удаленно подключайтесь к узлам с помощью файлов удаленного рабочего стола (RDP). Чтобы получить их, нужно всего несколько раз щелкнуть в интерфейсе обозревателя пакетной службы.

- [Обозреватель службы хранилища Microsoft Azure.][storage_explorer] Строго говоря, этот обозреватель не является средством пакетной службы Azure, но это полезный инструмент для разработки и отладки решений пакетной службы.

## Сценарий: развертывание параллельной рабочей нагрузки

Распространенное решение с использованием API пакетной службы для взаимодействия с пакетной службой включает в себя масштабирование принципиально параллельных рабочих нагрузок, таких как отрисовка изображений для 3D-формата, в пуле вычислительных узлов. Этот пул вычислительных узлов может быть своего рода фермой отрисовки, которая предоставляет десятки, сотни или даже тысячи ядер для заданий отрисовки.

На следующей схеме показан общий рабочий процесс, в котором используется клиентское приложение или размещенная служба для запуска параллельной рабочей нагрузки с помощью пакетной службы.

![Рабочий процесс решения с использованием пакетной службы][2]

В этом распространенном сценарии для обработки вычислительной рабочей нагрузки приложением или службой в пакетной службе Azure необходимо выполнить следующие действия:

1. Отправьте **входные файлы** и **приложение**, которое будет обрабатывать эти файлы, в учетную запись службы хранилища Azure. Входными файлами могут быть любые данные, которые будет обрабатывать приложение, например данные финансового моделирования или видеофайлы, которые необходимо перекодировать. В качестве приложения можно использовать любое приложение для обработки данных, например приложение отрисовки 3D-данных или медиатранскодер.

2. Создайте в учетной записи пакетной службы **пул** пакетной службы, состоящий из вычислительных узлов — виртуальных машин, которые будут выполнять задачи. Чтобы установить приложение (отправленное на шаге 1) при присоединении узлов к пулу, укажите свойства, включая [размер узла](./../cloud-services/cloud-services-sizes-specs.md), используемую операционную систему и расположение в службе хранилища Azure. Кроме того, вы можете настроить [автоматическое масштабирование](batch-automatic-scaling.md) пула (динамическое изменение количества вычислительных узлов в пуле) в соответствии с рабочей нагрузкой, создаваемой вашими задачами.

3. Создайте **задание** пакетной службы для выполнения рабочей нагрузки в пуле вычислительных узлов. При создании задание связывается с пулом пакетной службы.

4. Добавьте **задачи** в задание. При добавлении задач в задание пакетная служба автоматически планирует их выполнение в вычислительных узлах пула. Каждая задача использует приложение, переданное для обработки входных файлов.

    - 4а. Перед выполнением задачи данные (входные файлы), которые нужно обработать, могут быть скачаны в назначенный задаче вычислительный узел. Если приложение еще не установлено на узле (см. шаг 2), оно будет скачано на данном этапе. По завершении скачивания задачи будут выполняться в соответствующих назначенных узлах.

5. При выполнении задач можно отправить запрос к пакетной службе, чтобы отслеживать ход выполнения задания и задач. Клиентское приложение или служба взаимодействует с пакетной службой по протоколу HTTPS. Так как вы можете отслеживать состояние тысяч задач, выполняющихся на тысячах вычислительных узлов, [отправляйте в пакетную службу только эффективные запросы](batch-efficient-list-queries.md).

6. Выполненные задачи отправляют выходные данные в службу хранилища Azure. Можно также извлечь файлы непосредственно из вычислительных узлов.

7. Если при мониторинге обнаруживается, что задачи в задании выполнены, выходные данные могут быть скачаны для дальнейшей обработки или оценки через клиентское приложение или службу.

Это всего лишь один из способов использования пакетной службы, и в этом сценарии описывается только небольшая часть доступных функций. Например, можно выполнять [несколько задач параллельно](batch-parallel-node-tasks.md) на каждом вычислительном узле. Или же можно использовать [задачи подготовки и завершения задания](batch-job-prep-release.md), чтобы подготовить узлы к запуску заданий, а затем выполнить очистку.

## Дальнейшие действия

Теперь, когда вы ознакомились с примером использования пакетной службы, пора узнать, как ее можно использовать для обработки параллельных рабочих нагрузок с ресурсоемкими вычислениями.

- Сведения об использовании C# и библиотеки .NET для пакетной службы при реализации описанных выше методов см. в статье [Начало работы с библиотекой пакетной службы Azure для .NET](batch-dotnet-get-started.md). Это один из основных ресурсов, с которым нужно ознакомиться, приступая к работе с пакетной службой.

- Подробные сведения о возможностях API, которые пакетная служба предоставляет для рабочих нагрузок с ресурсоемкими вычислениями, см. в статье [Обзор функций пакетной службы Azure](batch-api-basics.md).

- Изучить способы использования многих функций пакетной службы с помощью библиотеки .NET для пакетной службы можно не только на примере обозревателя пакетной службы, но и на других [примерах кодов на сайте GitHub][github_samples].

- Список ресурсов для работы с пакетной службой см. на схеме обучения [Пакетная служба][learning_path].

[azure_storage]: https://azure.microsoft.com/services/storage/
[api_java]: http://azure.github.io/azure-sdk-for-java/
[api_java_jar]: http://adxsnapshots.azurewebsites.net/?dir=com%5cmicrosoft%5cazure%5cazure-batch
[api_net]: https://msdn.microsoft.com/library/azure/mt348682.aspx
[api_net_nuget]: https://www.nuget.org/packages/Azure.Batch/
[api_net_mgmt]: https://msdn.microsoft.com/library/azure/mt463120.aspx
[api_net_mgmt_nuget]: https://www.nuget.org/packages/Microsoft.Azure.Management.Batch/
[api_nodejs]: http://azure.github.io/azure-sdk-for-node/azure-batch/latest/
[api_nodejs_npm]: https://www.npmjs.com/package/azure-batch
[api_python]: http://azure-sdk-for-python.readthedocs.io/en/latest/ref/azure.batch.html
[api_python_pypi]: https://pypi.python.org/pypi/azure-batch
[api_sample_net]: https://github.com/Azure/azure-batch-samples/tree/master/CSharp
[api_sample_python]: https://github.com/Azure/azure-batch-samples/tree/master/Python/Batch
[batch_explorer]: https://github.com/Azure/azure-batch-samples/tree/master/CSharp/BatchExplorer
[batch_ps]: https://msdn.microsoft.com/library/azure/mt125957.aspx
[batch_rest]: https://msdn.microsoft.com/library/azure/Dn820158.aspx
[data_factory]: https://azure.microsoft.com/documentation/services/data-factory/
[free_account]: https://azure.microsoft.com/free/
[github_samples]: https://github.com/Azure/azure-batch-samples
[learning_path]: https://azure.microsoft.com/documentation/learning-paths/batch/
[msdn_benefits]: https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/
[storage_explorer]: http://storageexplorer.com/

[1]: ./media/batch-technical-overview/tech_overview_01.png
[2]: ./media/batch-technical-overview/tech_overview_02.png

<!---HONumber=AcomDC_0608_2016-->