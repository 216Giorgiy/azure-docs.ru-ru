---
title: Передача данных с помощью службы "Шлюз Azure Data Box" | Документация Майкрософт
description: Узнайте, как добавлять общие папки на устройстве Шлюза Data Box и подключаться к ним.
services: databox
author: alkohli
ms.service: databox
ms.subservice: gateway
ms.topic: tutorial
ms.date: 02/21/2019
ms.author: alkohli
ms.openlocfilehash: f36e13ccf91c983c54897dcff7e1c02689fb055c
ms.sourcegitcommit: a8948ddcbaaa22bccbb6f187b20720eba7a17edc
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/21/2019
ms.locfileid: "56592661"
---
# <a name="tutorial-transfer-data-with-azure-data-box-gateway-preview"></a>Руководство. передаче данных с помощью службы "Шлюз Azure Data Box" (предварительная версия)


## <a name="introduction"></a>Введение

В этой статье описывается, как добавить общие папки в службу "Шлюз Data Box" и подключаться к ним. После добавления общих папок устройство Шлюза Data Box может выполнять передачу данных в Azure.

Эта процедура может занять около 10 минут. 

Из этого руководства вы узнаете, как выполнять следующие задачи:

> [!div class="checklist"]
> * Добавление общей папки
> * Подключение к общей папке.

> [!IMPORTANT]
> - Шлюз Data Box доступен в качестве предварительной версии. Изучите [Дополнительные условия использования Предварительных выпусков Microsoft Azure](https://azure.microsoft.com/support/legal/preview-supplemental-terms/), прежде чем заказывать и развертывать это решение. 
 
## <a name="prerequisites"></a>Предварительные требования

Прежде чем добавлять общие папки в службу "Шлюз Data Box", убедитесь, что:

* Вы подготовили виртуальное устройство и подключились к нему, как подробно описано в статье [Tutorial: Provision Azure Data Box Gateway in Hyper-V (Preview)](data-box-gateway-deploy-provision-hyperv.md) (Руководство по подготовке Шлюза Azure Data Box в Hyper-V (предварительная версия)) или [Руководство. Подготовка к работе Шлюза Azure Data Box в VMware](data-box-gateway-deploy-provision-vmware.md). 

    Виртуальное устройство активируется (как описано в статье [о подключении и активации службы "Шлюз Azure Data Box"](data-box-gateway-deploy-connect-setup-activate.md)) и готово для создания общих папок и передачи данных.


## <a name="add-a-share"></a>Добавление общей папки

Чтобы создать общую папку, выполните следующие действия на [портале Azure](https://portal.azure.com/).

1. Вернитесь на портал Azure. Перейдите к разделу **Все ресурсы** и выполните поиск ресурса службы "Шлюз Data Box".
    
2. В отфильтрованном списке ресурсов выберите ресурс службы "Шлюз Data Box" и перейдите к разделу **Обзор**. На панели команд для устройства щелкните **+ Add share** (+ Добавление общего файлового ресурса).
   
   ![Добавление общей папки](./media/data-box-gateway-deploy-add-shares/click-add-share.png)

4. В разделе **Добавление общего файлового ресурса** укажите параметры общей папки. Укажите уникальное имя для общей папки. 

   Имена общих папок могут содержать только цифры, строчные буквы и дефисы. Имя общей папки может содержать от 3 до 63 знаков и начинаться с буквы или цифры. Перед каждым дефисом должен быть знак без дефиса.
    
5. Выберите **тип** для общей папки. Вы можете выбрать тип SMB или NFS (тип SMB задан по умолчанию). SMB является стандартным для клиентов Windows, а NFS используется для клиентов Linux. В зависимости от того, выбраны ли общие папки типа SMB или NFS, предложенные варианты могут немного отличаться. 

6. Необходимо предоставить учетную запись хранения, где будет храниться общая папка. При отсутствии контейнера он создается в учетной записи хранения с именем общей папки. Если контейнер уже существует, используется имеющийся контейнер. 
    
7. В блочном BLOB-объекте, страничном BLOB-объекте или файлах выберите **Служба хранилища**. Тип выбранной службы зависит от того, в каком формате необходимо хранить данные в Azure. Например, в данном экземпляре необходимо, чтобы данные хранились как блочные BLOB-объекты в Azure, поэтому мы выбираем блочный BLOB-объект. При выборе страничного BLOB-объекта необходимо убедиться, что данные выровнены по размеру 512 байт. Обратите внимание, что VHDX всегда выравнивается по размеру 512 байт.
   
8. Этот шаг зависит от того, создается ли общая папка типа SMB или NFS. 
     
    - **При создании общей папки SMB** в поле "Все привилегированные локальные пользователи" выберите **Создать** или **Use existing** (Использовать имеющийся). При создании локального пользователя укажите **имя пользователя**, **пароль**, а затем **подтвердите пароль**. Таким образом вы предоставите разрешения локальному пользователю. Назначив разрешения здесь, вы сможете изменять их в проводнике.
    
        ![Добавление общей папки SMB](./media/data-box-gateway-deploy-add-shares/add-share-smb-1.png)
        
        Если **разрешить только операции чтения** для данных этой общей папки, появится параметр, позволяющий указать пользователей с правами только для чтения.
        
    - **При создании общей папки типа NFS** необходимо предоставить IP-адреса разрешенных клиентов, которые могут получать доступ к ресурсу.

        ![Добавление общей папки типа NFS](./media/data-box-gateway-deploy-add-shares/add-share-nfs-1.png)
   
9. Щелкните **Создать**, чтобы создать общую папку. 
    
    Вы получите уведомление о том, что общая папка создается. После создания общей папки с указанными параметрами колонка **Общие папки** обновится, и в ней появится новая общая папка. 
    
    ![Обновленный список общих папок](./media/data-box-gateway-deploy-add-shares/updated-list-of-shares.png) 

## <a name="connect-to-the-share"></a>Подключение к общей папке

Выполните эти действия на клиентском компьютере Windows Server, подключенном к службе "Шлюз Data Box", чтобы подключиться к общим папкам.


1. Откройте командное окно. В командной строке выполните следующую команду:

    `net use \\<IP address of the device>\<share name>  /u:<user name for the share>`

    При отображении соответствующего запроса введите пароль для общей папки. Здесь приведен пример выходных данных этой команды.

    ```powershell
    Microsoft Windows [Version 18.8.16299.192) 
    (c) 2817 microsoft Corporation. All rights reserved . 
    
    C: \Users\GatewayUser>net use \\10.10.10.60\newtestuser /u:Tota11yNewUser 
    Enter the password for 'TotallyNewUser' to connect to '10.10.10.60' • 
    The command completed successfully. 
    
    C: \Users\GatewayUser>
    ```   


2. Нажмите клавиши WINDOWS+R. В окне **Выполнить** введите `\\<device IP address>`. Последовательно выберите **ОК**. Откроется проводник. и вы сможете увидеть общие папки. Для просмотра содержимого выберите и дважды щелкните общую папку.
 
    ![Подключение к общей папке типа SMB](./media/data-box-gateway-deploy-add-shares/connect-to-share2.png)-->

    Данные записываются в эти общие папки по мере их создания, а устройство отправляет эти данные в облако.

### <a name="connect-to-an-nfs-share"></a>Подключение к общей папке типа NFS

Выполните эти действия на клиентском компьютере Linux, подключенном к Data Box Edge.

1. Убедитесь, что на этом клиенте установлен клиент NFSv4. Используйте следующую команду для установки NFS-клиента:

   `sudo apt-get install nfs-common`

    Дополнительные сведения см. в разделе об [установке клиента NFSv4](https://help.ubuntu.com/community/SettingUpNFSHowTo#NFSv4_client).

2. После установки NFS-клиента используйте следующую команду, чтобы подключить общую папку типа NFS, созданную на устройстве Шлюза Data Box:

   `sudo mount -t nfs -o sec=sys,resvport <device IP>:/<NFS shares on device> /home/username/<Folder on local Linux computer>`

    Прежде чем настроить подключение, убедитесь, что каталоги, которые будут выступать в качестве точки подключения на локальном компьютере, уже созданы и не содержат файлов и вложенных папок.

    В следующем примере показано, как выполнить подключение к папке на устройстве шлюза через NFS. IP-адрес виртуального устройства — `10.10.10.60`, общая папка `mylinuxshare2` подключена на виртуальной машине под управлением Ubuntu, точка подключения — `/home/databoxubuntuhost/gateway`.

    `sudo mount -t nfs -o sec=sys,resvport 10.10.10.60:/mylinuxshare2 /home/databoxubuntuhost/gateway`

> [!NOTE] 
> В предварительной версии действуют следующие факторы:
> - После создания файла в общих папках его невозможно переименовать. 
> - Удаление файла из общей папки не приводит к удалению записи в учетной записи хранения.
> - При использовании `rsync` для копирования данных параметр `rsync -a` не поддерживается.

## <a name="next-steps"></a>Дополнительная информация

В этом руководстве раскрыты следующие сведения о Шлюзе Data Box:

> [!div class="checklist"]
> * Добавление общей папки
> * Подключение к общей папке.


Перейдите к следующему руководству, чтобы узнать, как администрировать службу "Шлюз Data Box".

> [!div class="nextstepaction"]
> [Microsoft Azure Data Box Gateway Management Guide](https://aka.ms/dbg-docs) (Руководство по управлению Шлюзом Microsoft Azure Data Box)


