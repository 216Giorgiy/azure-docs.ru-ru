.<properties 
	pageTitle="Как управлять содержимым с помощью служб мультимедиа Azure на классическом портале Azure" 
	description="Сведения об управлении мультимедийным контентом в службах мультимедиа Azure. Сюда относятся: передача, индексирование, кодирование, шифрование и публикация." 
	services="media-services" 
	documentationCenter="" 
	authors="Juliako" 
	manager="erikre" 
	editor=""/>

<tags 
	ms.service="media-services" 
	ms.workload="media" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="08/17/2016"  
	ms.author="juliako"/>


# Управление содержимым с помощью служб мультимедиа Azure на классическом портале Azure


В этой статье показано, как использовать классический портал Azure для управления содержимым в учетной записи служб мультимедиа.

Здесь вы узнаете, как выполнять следующие операции с содержимым непосредственно на портале.

- Просмотр сведений о содержимом, например опубликованного состояния, опубликованного URL-адреса, размера, даты и времени последнего обновления и наличия шифрования актива.
- Загрузка нового контента
- Индексирование содержимого
- Кодирование контента
- шифрование;
- Публикация и отмена публикации контента
- воспроизведение содержимого;


##<a id="upload"></a>Практическое руководство. Передача содержимого


[AZURE.INCLUDE [media-services-selector-upload-files](../../includes/media-services-selector-upload-files.md)]


1. На [классическом портале Azure](http://go.microsoft.com/fwlink/?LinkID=256666&clcid=0x409) щелкните **Службы мультимедиа**, а затем выберите имя учетной записи служб мультимедиа.
2. Выберите страницу "КОНТЕНТ".
3. Нажмите кнопку **Передать** на странице или в нижней части портала.
4. В диалоговом окне **Передача контента** перейдите к нужному файлу актива. Щелкните файл и нажмите кнопку **Открыть** либо нажмите клавишу **Ввод**.

	![UploadContentDialog][uploadcontent]

5. В диалоговом окне "Передача контента" нажмите кнопку с галочкой, чтобы принять значения полей "Файл" и "Имя контента".
6. Начнется загрузка. Ход ее выполнения можно отслеживать в нижней части портала.

	![JobStatus][status]

После завершения загрузки в списке "Контент" появится новый актив. По существующему соглашению в конец имени будет добавлено значение **-Source**. Это означает, что новый контент будет служить источником для задач кодирования.

![ContentPage][contentpage]

Если значение размера файла не обновляется после остановки процесса загрузки, нажмите кнопку **Синхронизировать метаданные**. Это синхронизирует размер файла актива с фактическим размером файла в хранилище и обновляет значение на странице "Контент".

##<a id="index"></a>Практическое руководство. Индексирование содержимого

> [AZURE.SELECTOR]
- [.NET](media-services-index-content.md)
- [Портал](media-services-manage-content.md#index)

Индексатор мультимедийных данных Azure позволяет искать содержимое файлов мультимедиа и создавать полнотекстовую транскрипцию для скрытых субтитров и ключевых слов. Содержимое можно индексировать на классическом портале Azure с помощью действий, показанных ниже. Однако, если вам требуется больше контроля над файлами и выполнением задания индексирования, можно использовать пакет SDK служб мультимедиа для .NET или API REST. Дополнительную информацию см. в разделе [Индексирование файлов мультимедиа с помощью индексатора мультимедийных данных Azure](media-services-index-content.md).

В следующих шагах показано, как использовать классический портал Azure для индексирования содержимого.

1. Выберите файл, который следует индексировать.

	Если для этого типа файла поддерживается индексирование, кнопка "Обработать" в нижней части страницы "Содержимое" будет включена.
	
1. Нажмите кнопку ОБРАБОТАТЬ.
2. В диалоговом окне **Обработка** выберите процессор **Индексатор службы мультимедиа Azure**.
3. Затем заполните поля **заголовок** и **описание** в диалоговом окне «Обработка» подробной информацией из входного файла мультимедиа.

![Process][process]

##<a id="encode"></a>Практическое руководство. Кодирование содержимого

> [AZURE.SELECTOR]
- [.NET](media-services-dotnet-encode-asset.md)
- [REST](media-services-rest-encode-asset.md)
- [Портал](media-services-manage-content.md#encode)

Для доставки цифрового видео через Интернет необходимо выполнить сжатие мультимедиа. Службы мультимедиа предоставляют кодировщик мультимедиа, который позволяет указать, как следует кодировать содержимое (например, используемые кодеки, формат файла, разрешение и битрейт).

При работе со службами мультимедиа Azure один из самых частых сценариев — доставка потоковой передачи с адаптивным битрейтом клиентам. С помощью потоковой передачи с адаптивным битрейтом клиент может переключаться на потоковую передачу с более высоким или более низким битрейтом, так как видео отображается на основе текущей пропускной способности сети, загрузки ЦП и других факторов. Службы мультимедиа поддерживают следующие технологии потоковой передачи с адаптивной скоростью: потоковая трансляция HTTP (HLS), Smooth Streaming, MPEG DASH и HDS (только для владельцев лицензий Adobe PrimeTime/Access).

Службы мультимедиа обеспечивают динамическую упаковку, которая позволяет доставлять закодированное содержимое MP4-файлов с адаптивным битрейтом или потоковой передачей Smooth Streaming в форматах потоковой передачи с поддержкой служб мультимедиа (MPEG DASH, HLS, Smooth Streaming, HDS) без необходимости повторной упаковки в эти форматы потоковой передачи.

Чтобы воспользоваться преимуществом динамической упаковки, необходимо выполнить следующие действия:

- закодировать мезонинный (исходный) файл в набор MP4-файлов с адаптивной скоростью или в набор файлов Smooth Streaming (шаги кодирования показаны далее в этом учебнике);
- получить по крайней мере одну единицу потокового воспроизведения по запросу для конечной точки потоковой передачи, из которой планируется доставлять содержимое. Дополнительную информацию см. в разделе [Масштабирование зарезервированных единиц потоковой передачи по запросу](media-services-manage-origins.md#scale_streaming_endpoints/).

Благодаря динамической упаковке вы оплачиваете хранение файлов только в одном формате, так как службы мультимедиа автоматически подготавливают и передают содержимое в нужном формате на основе полученных от клиента запросов.

Помимо возможности использовать динамическую упаковку, зарезервированные единицы потокового воспроизведения по запросу обеспечивают выделенную выходную пропускную способность, которую можно приобрести с шагом 200 Мбит/с. По умолчанию потоковое воспроизведение по запросу настроено в модели общего экземпляра, для которой серверные ресурсы (например, вычислительная мощность или объем исходящего трафика) используются совместно с другими пользователями. Чтобы повысить производительность потоковой передачи по требованию, рекомендуется приобретать зарезервированные единицы потоковой передачи по требованию.

В этом разделе описаны шаги, которые можно предпринять для кодирования содержимого с помощью стандартного кодировщика служб мультимедиа на классическом портале Azure.

1.  Выберите файл, который следует закодировать.

	Если для этого типа файла поддерживается кодирование, кнопка "Обработать" в нижней части страницы "Содержимое" будет включена.

2. В диалоговом окне **Процесс** выберите **Media Encoder Standard**.
3. Выберите одну из **конфигураций кодирования**.

	![Process2][process2]


	В статье [Task Presets for MES (Media Encoder Standard)](https://msdn.microsoft.com/library/mt269960) (Предустановки задач для Media Encoder Standard) объясняется, что означает каждая предустановка.

4. Затем введите нужное понятное имя выходного содержимого или примите значение по умолчанию. Нажмите кнопку проверки, чтобы начать операцию кодирования, ход выполнения которой можно отслеживать в нижней части портала.
5. Нажмите кнопку ОК.

После выполнения кодирования на странице "Содержимое" появится закодированный файл.

Чтобы просмотреть ход задания кодирования, перейдите на страницу **ЗАДАНИЯ**.

Если значение размера файла не обновляется после завершения кодирования, нажмите кнопку **Синхронизировать метаданные**. Это синхронизирует размер файла выводимого актива с фактическим размером файла в хранилище и обновляет значение на странице "Контент".

##<a id="encrypt"></a>Практическое руководство. Шифрование содержимого


Если необходимо, чтобы службы мультимедиа динамически шифровали ресурс с использованием ключа AES или PlayReady DRM, обязательно сделайте следующее:

- Закодируйте мезонинный (исходный) файл в набор MP4-файлов с адаптивной скоростью или в набор файлов Smooth Streaming (шаги кодирования показаны разделе [Кодирование](#encode)).
- получить по крайней мере одну единицу потокового воспроизведения по запросу для конечной точки потоковой передачи, из которой планируется доставлять содержимое. Дополнительную информацию см. в разделе [Масштабирование зарезервированных единиц потоковой передачи по запросу](media-services-manage-origins.md#scale_streaming_endpoints/).
- Настройте "политику службы незащищенного ключа AES по умолчанию" или "политику службы лицензий PlayReady по умолчанию". Дополнительную информацию см. в статье [Настройка политики авторизации ключей содержимого](media-services-portal-configure-content-key-auth-policy.md).


	Когда все будет готово для включения шифрования, нажмите кнопку **ШИФРОВАНИЕ** в нижней части страницы **СОДЕРЖИМОЕ**.

	![шифрование;][encrypt]

	После включения шифрования, каждый раз, когда поток запрашивается проигрыватель, службы мультимедиа используют указанный ключ для динамического шифрования содержимого с помощью шифрования AES или PlayReady. Чтобы расшифровать поток, проигрыватель запросит ключ у службы доставки ключей. Чтобы определить, есть ли у пользователя право на получение ключа, служба оценивает политики авторизации, заданные для ключа.

См. также:

- [Защита с помощью PlayReady DRM](media-services-rest-deliver-streaming-content.md)
- [Защита с помощью ключа AES-128](media-services-protect-with-aes128.md)

##<a id="publish"></a>Практическое руководство. Публикация содержимого

> [AZURE.SELECTOR]
- [.NET](media-services-deliver-streaming-content.md)
- [REST](media-services-rest-deliver-streaming-content.md)
- [Портал](media-services-manage-content.md#publish)

###Обзор

Чтобы предоставить пользователю URL-ссылку, которую можно использовать для потоковой передачи или скачивания содержимого, сначала необходимо "опубликовать" ресурс, создав указатель. Указатели предоставляют доступ к файлам, содержащимся в активе. Службы мультимедиа поддерживают два типа указателей: указатели на OnDemandOrigin, использующиеся для потоковой передачи служб мультимедиа (например, MPEG DASH, HLS или Smooth Streaming), и указатели на подписанный URL-адрес, использующиеся для скачивания файлов мультимедиа.

При публикации ресурсов на классическом портале Azure создаются указатели, а также предоставляется URL-адрес на основе OnDemantOrigin (если ресурс-контейнер содержит ISM-файл) или URL-адрес SAS.

Ниже приведен формат URL-адреса SAS:

	{blob container name}/{asset name}/{file name}/{SAS signature}

URL-адрес потоковой передачи имеет следующий формат, его можно использовать для воспроизведения ресурсов Smooth Streaming:

	{streaming endpoint name-media services account name}.streaming.mediaservices.windows.net/{locator ID}/{filename}.ism/Manifest

Чтобы создать URL-адрес потоковой передачи HLS, добавьте (format=m3u8-aapl) к URL-адресу.

	{streaming endpoint name-media services account name}.streaming.mediaservices.windows.net/{locator ID}/{filename}.ism/Manifest(format=m3u8-aapl)

Чтобы создать URL-адрес для потоковой передачи в формате MPEG DASH, добавьте к исходному адресу строку (format=mpd-time-csf).

	{streaming endpoint name-media services account name}.streaming.mediaservices.windows.net/{locator ID}/{filename}.ism/Manifest(format=mpd-time-csf)


Указатели имеют срок действия. При использовании портала для публикации ресурсов создаются указатели со сроком действия 100 лет.

>[AZURE.NOTE] Если вы использовали портал для создания указателей раньше марта 2015 года, вы создали указатели со сроком действия два года.

Чтобы обновить срок действия указателя, используйте [REST API](http://msdn.microsoft.com/library/azure/hh974308.aspx#update_a_locator) или [API .NET](http://go.microsoft.com/fwlink/?LinkID=533259). При обновлении срока действия указателя SAS URL-адрес изменяется.

###Опубликовать

Чтобы использовать портал для публикации ресурса, выполните следующие действия.

1. Выберите ресурс.
2. Затем нажмите кнопку "Опубликовать".
	
 ![PublishedContent][publishedcontent]


## Практическое руководство. Воспроизведение контента на портале

На **классическом портале Azure** доступен проигрыватель содержимого, с помощью которого можно проверить видео.

Выберите нужное видео и нажмите кнопку **Воспроизвести** в нижней части портала.
 
Важные особенности

- Убедитесь, что видео опубликовано.
- **ПРОИГРЫВАТЕЛЬ КОНТЕНТА СЛУЖБ МУЛЬТИМЕДИА** выполняет воспроизведение из конечной точки потоковой передачи по умолчанию. Если требуется воспроизвести из конечной точке потоковой передачи не по умолчанию, используйте другой проигрыватель. Например, [Проигрыватель служб мультимедиа Azure](http://amsplayer.azurewebsites.net/azuremediaplayer.html).

![AMSPlayer][AMSPlayer]

##Схемы обучения работе со службами мультимедиа

[AZURE.INCLUDE [media-services-learning-paths-include](../../includes/media-services-learning-paths-include.md)]

##Отзывы

[AZURE.INCLUDE [media-services-user-voice-include](../../includes/media-services-user-voice-include.md)]




<!-- Images -->
[portaloverview]: ./media/media-services-manage-content/media-services-content-page.png
[publishedcontent]: ./media/media-services-manage-content/media-services-upload-content-published.png
[uploadcontent]: ./media/media-services-manage-content/UploadContent.png
[status]: ./media/media-services-manage-content/Status.png
[encoder]: ./media/media-services-manage-content/EncoderDialog2.png
[branding]: ./media/branding-reporting.png
[contentpage]: ./media/media-services-manage-content/media-services-content-page.png
[process]: ./media/media-services-manage-content/media-services-process-video.png
[process2]: ./media/media-services-manage-content/media-services-process-video2.png
[encrypt]: ./media/media-services-manage-content/media-services-encrypt-content.png
[AMSPlayer]: ./media/media-services-manage-content/media-services-portal-player.png

<!---HONumber=AcomDC_0824_2016-->