<properties 
	pageTitle="Управление мультимедийным содержимым с помощью служб мультимедиа Azure на портале управления Azure" 
	description="Сведения об управлении мультимедийным контентом в службах мультимедиа Azure. Сюда относятся: передача, индексирование, кодирование, шифрование и публикация." 
	services="media-services" 
	documentationCenter="" 
	authors="Juliako" 
	manager="dwrede" 
	editor=""/>

<tags 
	ms.service="media-services" 
	ms.workload="media" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="04/08/2015" 
	ms.author="juliako"/>


# Управление содержимым с помощью служб мультимедиа Azure с использованием портала управления Azure

Это одна из статей цикла [Рабочий процесс для видео по запросу в службах мультимедиа](media-services-video-on-demand-workflow.md).

В этом разделе показано, как использовать портал управления Azure для управления содержимым в учетной записи служб мультимедиа.

В этом разделе показано, как выполнять следующие операции с содержимым непосредственно на портале.

- просмотр сведений о содержимом, например, опубликованного состояния, опубликованного URL-адреса, размера, даты и времени последнего обновления и наличия шифрования актива;
- Загрузка нового контента
- Индексирование содержимого
- Кодирование контента
- шифрование;
- Публикация и отмена публикации контента
- воспроизведение содержимого;


##<a id="upload"></a>Практическое руководство. Передача содержимого 


1. На [Портале управления](http://go.microsoft.com/fwlink/?LinkID=256666&clcid=0x409) щелкните **Службы мультимедиа**, а затем щелкните имя учетной записи служб мультимедиа.
2. Выберите страницу "КОНТЕНТ". 
3. Нажмите кнопку **Передать** на странице или в нижней части портала. 
4. В диалоговом окне **Передача контента** перейдите к нужному файлу актива. Щелкните файл и нажмите кнопку **Открыть** либо нажмите клавишу **Ввод**.

	![UploadContentDialog][uploadcontent]

5. В диалоговом окне "Передача контента" нажмите кнопку с галочкой, чтобы принять значения полей "Файл" и "Имя контента".
6. Начнется передача, ход ее выполнения можно отслеживать в нижней части портала.  

	![JobStatus][status]

После завершения загрузки в списке "Контент" появится новый актив. По соглашению в конец имени будет добавлено «**-Источник**» для отслеживания нового содержимого как источника содержимого для задач кодирования.

![ContentPage][contentpage]

Если значение размера файла не обновляется после остановки процесса загрузки, нажмите кнопку **Синхронизировать метаданные**. Это синхронизирует размер файла актива с фактическим размером файла в хранилище и обновляет значение на странице "Контент".

##<a id="index"></a>Практическое руководство. Индексирование содержимого

Azure Media Indexer позволяет искать содержимое файлов мультимедиа и создавать полнотекстовую транскрипцию для скрытых субтитров и ключевых слов. Содержимое можно индексировать на портале управления с помощью действий, показанных ниже. Однако, если вам требуется больше контроля над файлами и выполнением задания индексирования, можно использовать пакет SDK служб мультимедиа для .NET или API REST. Дополнительную информацию см. в разделе [Индексирование файлов мультимедиа с помощью индексатора мультимедийных данных Azure](media-services-index-content.md).

В следующих шагах показано, как использовать портал управления для индексирования содержимого.

1. Выберите файл, который следует индексировать. Если индексирование поддерживается для этого типа файла, кнопка ОБРАБОТАТЬ будет включена в нижней части страницы СОДЕРЖИМОЕ.
1. Нажмите кнопку ОБРАБОТАТЬ.
2. В диалоговом окне **Обработка** выберите **индексатор мультимедийных данных Azure**.
3. Затем заполните поля **заголовок** и **описание** в диалоговом окне «Обработка» подробной информацией из входного файла мультимедиа.
	
	![Process][process]

##<a id="encode"></a>Практическое руководство. Кодирование содержимого

Для поставки цифрового видео по Интернету необходимо сжать мультимедиа. Службы мультимедиа предоставляют кодировщик мультимедиа, который позволяет указать, как следует кодировать содержимое (например, используемые кодеки, формат файла, разрешение и битрейт).

При работе со службами мультимедиа Azure один из самых частых сценариев — доставка потоковой передачи с адаптивным битрейтом клиентам. С помощью потоковой передачи с адаптивным битрейтом клиент может переключаться на потоковую передачу с более высоким или более низким битрейтом, так как видео отображается на основе текущей пропускной способности сети, загрузки ЦП и других факторов. Службы мультимедиа поддерживают следующие технологии потоковой передачи с адаптивной скоростью: потоковая трансляция HTTP (HLS), Smooth Streaming, MPEG DASH и HDS (только для владельцев лицензий Adobe PrimeTime/Access).

Службы мультимедиа обеспечивают динамическую упаковку, которая позволяет доставлять закодированное содержимое MP4-файлов с адаптивным битрейтом или Smooth Streaming в форматах потоковой передачи с поддержкой служб мультимедиа (MPEG DASH, HLS, Smooth Streaming, HDS) без необходимости повторной упаковки в эти форматы потоковой передачи.

Чтобы воспользоваться преимуществом динамической упаковки, необходимо выполнить следующие действия:

- закодировать мезонинный (исходный) файл в набор MP4-файлов с адаптивной скоростью или в набор файлов Smooth Streaming (шаги кодирования показаны далее в этом учебнике);
- получить по крайней мере одну единицу потоковой передачи по запросу для конечной точки потоковой передачи, из которой планируется доставлять содержимое. Дополнительную информацию см. в разделе [Масштабирование зарезервированных единиц потоковой передачи по запросу](media-services-manage-origins.md#scale_streaming_endpoints/).

С динамической упаковкой потребуется хранить и оплачивать файлы только в одном формате хранения, а службы мультимедиа выполнят сборку и будут обслуживать соответствующий ответ на основе запросов клиента.

Обратите внимание, что кроме возможности использовать динамическую упаковку, зарезервированные единицы потоковой передачи по запросу обеспечивают выделенную выходную пропускную способность, которую можно приобрести с шагом 200 Мбит/с. По умолчанию потоковая передача по требованию настроена в модели общего экземпляра, для которой серверные ресурсы (например, вычислительные ресурсы, мощности исходящего трафика и т. д.) совместно используются со всеми другими пользователями. Чтобы повысить производительность потоковой передачи по требованию, рекомендуется приобретать зарезервированные единицы потоковой передачи по требованию.

В этом разделе описаны шаги, которые можно предпринять для кодирования содержимого с помощью Azure Media Encoder на портале управления.

1.  Выберите файл, который следует закодировать. Если кодирование поддерживается для этого типа файла, кнопка ОБРАБОТАТЬ будет активна в нижней части страницы СОДЕРЖИМОЕ.
4. В диалоговом окне **Обработка** выберите **кодировщика служб мультимедиа Azure.5. Выберите одну из **конфигураций кодирования**.

	![Process2][process2]

		
	В разделе [Предустановки задачи для кодировщика служб мультимедиа](https://msdn.microsoft.com/library/azure/dn619392.aspx) описывается значение каждой предустановки в категориях **Предустановки для адаптивной потоковой передачи (динамическая упаковка)**, **Предустановки для поэтапного скачивания**, **Устаревшие предустановки для адаптивной потоковой передачи**.


	**Другие** конфигурации описаны ниже.

	+ **Кодирование с защитой контента PlayReady**. Эта предустановка позволяет получить кодированный актив с защитой контента PlayReady.  
	
	
		Служба лицензий PlayReady служб мультимедиа включена по умолчанию. Чтобы указать другую службу, из которой клиенты могут получить лицензию на воспроизведение зашифрованного контента PlayReady, используйте API-интерфейсы REST или пакета SDK .NET для служб мультимедиа. Для получения дополнительной информации ознакомьтесь с разделом [Использование статического шифрования для защиты контента]() и установите свойство **licenseAcquisitionUrl** в предустановке Media Encryptor. Также можно использовать динамическое шифрование и установить свойство **PlayReadyLicenseAcquisitionUrl**, как описано в разделе [Использование динамического шифрования PlayReady и службы доставки лицензий](http://go.microsoft.com/fwlink/?LinkId=507720). 
	+ **Воспроизведение на ПК и компьютерах "Макинтош" (с помощью Flash или Silverlight)**. Эта предустановка позволяет получить актив с бесперебойной потоковой передачей, который имеет следующие характеристики: стереозвук CBR 44,1 кГц в разрядности 16 бит/сэмпл с кодировкой 96 Кбит/с в AAC, а также видео CBR с разрешением 720 пикселей и 6 скоростями — от 3400 Кбит/с до 400 Кбит/с — с использованием основного профиля H.264 и двумя вторичными группами GOP.
	+ **Воспроизведение в HTML5 (IE/Chrome/Safari)**. Эта предустановка позволяет получить отдельный MP4-файл, который имеет следующие характеристики: стереозвук CBR 44,1 кГц в разрядности 16 бит/сэмпл с кодировкой 128 Кбит/с в AAC, а также видео CBR с разрешением 720 пикселей и скоростью 4500 Кбит/с с использованием основного профиля H.264.
	+ **Воспроизведение на устройствах iOS, ПК и компьютерах "Макинтош"**. Эта предустановка позволяет получить актив с теми же характеристиками, что и у актива с бесперебойной потоковой передачей (описан выше), но в формате, который может использоваться для доставки потоков Apple HLS на устройства iOS. 

5. Затем введите нужное понятное имя выходного содержимого или примите значение по умолчанию. Нажмите кнопку проверки, чтобы начать операцию кодирования, ход выполнения которой можно отслеживать в нижней части портала.
6. Нажмите кнопку ОК.

	После выполнения кодирования на странице СОДЕРЖИМОЕ появится закодированный файл.

	Чтобы просмотреть ход задания кодирования, перейдите на страницу **ЗАДАНИЯ**.

	Если значение размера файла не обновляется после завершения кодирования, нажмите кнопку **Синхронизировать метаданные**. Это синхронизирует размер файла выводимого актива с фактическим размером файла в хранилище и обновляет значение на странице "Контент".

##<a id="encrypt"></a>Практическое руководство. Шифрование содержимого

Если необходимо, чтобы службы мультимедиа динамически шифровали ресурс с использованием ключа AES или PlayReady DRM, обязательно сделайте следующее:

- Закодируйте мезонинный (исходный) файл в набор MP4-файлов с адаптивной скоростью или в набор файлов Smooth Streaming (шаги кодирования показаны разделе [Кодирование](#encode)).
- получить по крайней мере одну единицу потоковой передачи по запросу для конечной точки потоковой передачи, из которой планируется доставлять содержимое. Дополнительную информацию см. в разделе [Масштабирование зарезервированных единиц потоковой передачи по запросу](media-services-manage-origins.md#scale_streaming_endpoints/).
- Настройте "политику службы незащищенного ключа AES по умолчанию" или "политику службы лицензий PlayReady по умолчанию". Дополнительную информацию см. в статье [Настройка политики авторизации ключей содержимого](media-services-portal-configure-content-key-auth-policy.md).  


	Когда все будет готово для включения шифрования, нажмите кнопку **ШИФРОВАНИЕ** в нижней части страницы **СОДЕРЖИМОЕ**.

	![шифрование;][encrypt]

	После включения шифрования, каждый раз, когда поток запрашивается проигрыватель, службы мультимедиа используют указанный ключ для динамического шифрования содержимого с помощью шифрования AES или PlayReady. Чтобы расшифровать поток, проигрыватель запросит ключ у службы доставки ключей. Чтобы определить, есть ли у пользователя право на получение ключа, служба оценивает политики авторизации, заданные для ключа.

##<a id="publish"></a>Практическое руководство. Публикация содержимого

###Обзор

Чтобы предоставить пользователю URL-ссылку, которую можно использовать для потоковой передачи или скачивания содержимого, сначала необходимо «опубликовать» ресурс, создав указатель. Указатели предоставляют доступ к файлам, содержащимся в активе. Службы мультимедиа поддерживают два типа указателей: указатели на OnDemandOrigin, использующиеся для потоковой передачи служб мультимедиа (например, MPEG DASH, HLS или Smooth Streaming), и указатели на подписанный URL-адрес, использующиеся для скачивания файлов мультимедиа.

При использовании портала управления Azure для публикации ресурсов создаются указатели, а также предоставляется URL-адрес на основе OnDemantOrigin (если ресурс содержит файл .ISM) или URL-адрес SAS.

Ниже приведен формат URL-адреса SAS:

	{blob container name}/{asset name}/{file name}/{SAS signature}

URL-адрес потоковой передачи имеет следующий формат, его можно использовать для воспроизведения ресурсов Smooth Streaming:

	{streaming endpoint name-media services account name}.streaming.mediaservices.windows.net/{locator ID}/{filename}.ism/Manifest

Чтобы создать URL-адрес потоковой передачи HLS, добавьте (format=m3u8-aapl) к URL-адресу.

	{streaming endpoint name-media services account name}.streaming.mediaservices.windows.net/{locator ID}/{filename}.ism/Manifest(format=m3u8-aapl)

Чтобы создать URL-адрес потоковой передачи MPEG DASH, добавьте к URL-адресу (format=mpd-time-csf).

	{streaming endpoint name-media services account name}.streaming.mediaservices.windows.net/{locator ID}/{filename}.ism/Manifest(format=mpd-time-csf)


Указатели имеют срок действия. При использовании портала для публикации ресурсов создаются указатели со сроком действия 100 лет.

>[AZURE.NOTE]Если портал использовался для создания указателей до марта 2015 года, были созданы указатели со сроком действия два года.

Чтобы обновить срок действия указателя, используйте [REST API](http://msdn.microsoft.com/library/azure/hh974308.aspx#update_a_locator) или [API .NET](http://go.microsoft.com/fwlink/?LinkID=533259). Обратите внимание, что при обновлении срока действия указателя SAS изменяется URL-адрес.

###Опубликовать

Чтобы использовать портал для публикации ресурса, выполните следующие действия.

1. Выберите ресурс. 
2. Затем нажмите кнопку "Опубликовать". 
	
 ![PublishedContent][publishedcontent]


## Практическое руководство. Воспроизведение контента на портале

**Портал управления Azure** предлагает проигрыватель содержимого, который можно использовать для тестирования видео.

Выберите нужное видео и нажмите кнопку **Воспроизвести** в нижней части портала.
 
Важные особенности

- Убедитесь, что видео опубликовано.
- **ПРОИГРЫВАТЕЛЬ КОНТЕНТА СЛУЖБ МУЛЬТИМЕДИА** выполняет воспроизведение из конечной точки потоковой передачи по умолчанию. Если требуется воспроизвести из конечной точке потоковой передачи не по умолчанию, используйте другой проигрыватель. Например, [Проигрыватель служб мультимедиа Azure](http://amsplayer.azurewebsites.net/azuremediaplayer.html).
 

![AMSPlayer][AMSPlayer]

<!-- Images -->
[portaloverview]: ./media/media-services-manage-content/media-services-content-page.png
[publishedcontent]: ./media/media-services-manage-content/media-services-upload-content-published.png
[uploadcontent]: ./media/media-services-manage-content/UploadContent.png
[status]: ./media/media-services-manage-content/Status.png
[encoder]: ./media/media-services-manage-content/EncoderDialog2.png
[branding]: ./media/branding-reporting.png
[contentpage]: ./media/media-services-manage-content/media-services-content-page.png
[process]: ./media/media-services-manage-content/media-services-process-video.png
[process2]: ./media/media-services-manage-content/media-services-process-video2.png
[encrypt]: ./media/media-services-manage-content/media-services-encrypt-content.png
[AMSPlayer]: ./media/media-services-manage-content/media-services-portal-player.png

<!---HONumber=July15_HO3-->