<properties 
	pageTitle="Общие сведения о динамической упаковке" 
	description="В этом разделе представлены общие сведения о технологии динамической упаковки." 
	authors="Juliako" 
	manager="dwrede" 
	editor="" 
	services="media-services" 
	documentationCenter=""/>

<tags 
	ms.service="media-services" 
	ms.workload="media" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="04/15/2015" 
	ms.author="juliako"/>


#Динамическая упаковка 

##Обзор

Службы мультимедиа Microsoft Azure можно использовать для передачи содержимого исходных файлов, потоков мультимедиа и защищенного содержимого в различных форматах на вход клиентов, реализованных на базе различных технологий (например, iOS, XBOX, Silverlight или Windows 8). Эти клиенты работают по разным протоколам: например, для iOS используется формат потоковой трансляции HTTP (HLS) V4, а для технологий Silverlight и Xbox необходимо использовать формат Smooth Streaming. Если у вас есть набор файлов MP4 (ISO Base Media 14496-12) с адаптивной скоростью (мультискоростных) или аналогичных файлов Smooth Streaming, которые вам нужно передать клиентам, принимающим форматы MPEG DASH, HLS или Smooth Streaming, вы можете воспользоваться функциями динамической упаковки служб мультимедиа.

При работе с этими функциями достаточно создать ресурс, содержащий набор мультискоростных MP4-файлов или файлов Smooth Streaming. Затем с учетом формата, указанного в манифесте или запросе фрагмента, сервер потоковой передачи по запросу организует передачу содержимого по выбранному протоколу. В результате вы сможете хранить и оплачивать файлы только в одном формате, а службы мультимедиа выполнят сборку и будут обслуживать соответствующий ответ на основе запросов клиента.

На схеме ниже показан рабочий процесс, в котором используются традиционные технологии кодирования и статической упаковки.

![Статическое кодирование](./media/media-services-dynamic-packaging-overview/media-services-static-packaging.png)

На схеме ниже показан рабочий процесс, в котором используются технологии динамической упаковки.

![Динамическое кодирование](./media/media-services-dynamic-packaging-overview/media-services-dynamic-packaging.png)


>[AZURE.NOTE]Для использования динамической упаковки вам потребуется получить по крайней мере одну единицу потоковой передачи по запросу для конечной точки потоковой передачи, из которой планируется передавать содержимое. Дополнительную информацию см. в статье [Масштабирование служб мультимедиа](media-services-manage-origins.md#scale_streaming_endpoints).

##Стандартный сценарий

1. Отправьте входной файл (он также называется мезонинным). Например, это может быть файл в формате H.264, MP4 или WMV (список поддерживаемых форматов см. в разделе «Форматы, поддерживаемые кодировщиком служб мультимедиа»).
 
1. Преобразуйте мезонинный файл в набор мультискоростных MP4-файлов в формате H.264.
 
1. Опубликуйте ресурс, содержащий набор мультискоростных MP4-файлов, создав указатель OnDemand.
 
1. Создайте URL-адреса для доступа к содержимому и его потоковой передачи.
 
>[AZURE.NOTE]Технология динамической упаковки поддерживает не все форматы MP4-файлов (дополнительные сведения см. в разделе [Форматы, не поддерживаемые динамической упаковкой](media-services-dynamic-packaging-overview.md#unsupported_formats)).

##Подготовка ресурсов для динамической потоковой передачи

Подготовить ресурс для динамической потоковой передачи можно двумя способами.

- Отправьте главный файл и сформируйте наборы мультискоростных MP4-файлов в формате H.264 с помощью кодировщика мультимедиа Azure.
- Отправьте имеющиеся наборы мультискоростных файлов и проверьте их с помощью упаковщика мультимедиа.

###Отправка главного файла и формирование наборов мультискоростных MP4-файлов в формате H.264 с помощью кодировщика Azure Media Encoder

Сведения об отправке и кодировании ресурсов см. в перечисленных ниже статьях.


Отправка файлов с использованием **портала управления Azure**, **.NET** или **API REST**.

[AZURE.INCLUDE [media-services-selector-upload-files](../../includes/media-services-selector-upload-files.md)]

Кодирование файлов с помощью **Azure Media Encoder** с использованием **портала управления Azure**, **.NET** или **API REST**.
 
[AZURE.INCLUDE [media-services-selector-encode](../../includes/media-services-selector-encode.md)]


###Отправка имеющихся наборов мультискоростных файлов и их проверка с помощью упаковщика мультимедиа

Этот способ обычно используется для отправки набора мультискоростных MP4-файлов, для кодирования которых не использовался кодировщик служб мультимедиа. Выполнение этой задачи описано в разделе [Проверка MP4-файлов с адаптивной скоростью, закодированных с помощью сторонних кодировщиков](https://msdn.microsoft.com/library/azure/dn750842.aspx).

##Потоковая передача содержимого клиентам

Подготовив наборы файлов с адаптивной скоростью, вы можете опубликовать свой ресурс, создав указатель OnDemand и URL-адреса для потоковой передачи по протоколам Smooth Streaming, MPED DASH, HLS и HDS (только для владельцев лицензий Adobe PrimeTime/Access).

Информацию о создании указателей и потоковой передаче содержимого с использованием средств динамической упаковки см. в перечисленных ниже статьях.

[Общие сведения о передаче содержимого клиентам](media-services-deliver-content-overview.md).

Настройка политики передачи ресурсов с помощью **.NET** или **API REST**.

[AZURE.INCLUDE [media-services-selector-asset-delivery-policy](../../includes/media-services-selector-asset-delivery-policy.md)]

Опубликуйте ресурсы (создав указатели) с помощью **портала управления Azure** или **.NET**.

[AZURE.INCLUDE [media-services-selector-publish](../../includes/media-services-selector-publish.md)]


##<a id="unsupported_formats"></a>Форматы, не поддерживаемые динамической упаковкой

Перечисленные ниже форматы файлов не поддерживаются технологией динамической упаковки.

- MP4-файлы в формате Dolby Digital Plus.
- Файлы Smooth в формате Dolby Digital Plus. 

<!---HONumber=July15_HO4-->