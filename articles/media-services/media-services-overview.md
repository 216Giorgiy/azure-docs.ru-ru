<properties 
	pageTitle="Общие сведения о службах мультимедиа Azure и распространенные сценарии" 
	description="В этом разделе приводится краткий обзор служб мультимедиа Azure." 
	services="media-services" 
	documentationCenter="" 
	authors="Juliako" 
	manager="erikre" 
	editor=""/>

<tags 
	ms.service="media-services" 
	ms.workload="media" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="hero-article" 
 	ms.date="05/03/2016" 
	ms.author="juliako;anilmur"/>

#Общие сведения о службах мультимедиа Azure и распространенные сценарии

Службы мультимедиа Azure — это расширяемая облачная платформа, которая позволяет разработчикам создавать масштабируемые приложения для управления и доставки файлов мультимедиа. С помощью служб мультимедиа Azure можно безопасно передавать, сохранять, кодировать и упаковывать видео- или аудиосодержимое как локально, так и для потоковой трансляции разным клиентам (например, на ТВ, ПК и мобильные устройства).

Можно создавать сквозные рабочие процессы, полностью использующие службы мультимедиа. Также можно использовать сторонние компоненты в качестве некоторых частей рабочего процесса. Например, можно выполнять кодирование с помощью стороннего кодировщика. А затем отправить, защитить, упаковать и доставить содержимое с использованием служб мультимедиа.

Вы можете выполнить потоковую передачу содержимого динамически или доставить содержимое по запросу. В этом разделе приведены типичные сценарии доставки содержимого [динамически](media-services-overview.md#live_scenarios) или [по запросу](media-services-overview.md#vod_scenarios). В этом разделе также есть ссылки на другие разделы.

## Пакеты SDK и средства 

Для сборки решений на базе служб мультимедиа можно использовать

- [REST API для службы мультимедиа.](https://msdn.microsoft.com/library/azure/hh973617.aspx)
- Один из доступных клиентских пакетов SDK: 
	- [Пакет SDK служб мультимедиа Azure для .NET](https://github.com/Azure/azure-sdk-for-media-services). 
	- [Пакет Azure SDK для Java](https://github.com/Azure/azure-sdk-for-java). 
	- [Пакет Azure SDK для PHP](https://github.com/Azure/azure-sdk-for-php). 
	- [Службы мультимедиа Azure для Node.js](https://github.com/michelle-becker/node-ams-sdk/blob/master/lib/request.js) (это версия пакета SDK для Node.js сторонних производителей. Она поддерживается сообществом и в настоящее время не обладает полным покрытием всех интерфейсов API AMS). 
- Существующие средства: 
	- [Классический портал Azure](http://manage.windowsazure.com/) 
	- [Azure-Media-Services-Explorer](https://github.com/Azure/Azure-Media-Services-Explorer) (обозреватель служб мультимедиа Azure (AMSE) является приложением Winforms/С# для Windows)

##Схемы обучения работе со службами мультимедиа

Схемы обучения AMS можно просмотреть здесь:

- [Рабочий процесс для потоковой передачи в реальном времени в службах AMS](https://azure.microsoft.com/documentation/learning-paths/media-services-streaming-live/)
- [Рабочий процесс для потоковой передачи по запросу в службах AMS](https://azure.microsoft.com/documentation/learning-paths/media-services-streaming-on-demand/)

##Плакат

[Здесь](https://azure.microsoft.com/documentation/infographics/media-services/) можно просмотреть плакат служб мультимедиа Azure, на котором показаны рабочие потоки AMS, начиная от создания медиаданных до их потребления.

##Предварительные требования

Приступить к использованию служб мультимедиа Azure можно только при наличии следующих компонентов.
 
3. Учетная запись Azure. Если ее нет, можно создать бесплатную пробную учетную запись всего за несколько минут. Дополнительные сведения см. в разделе [Бесплатная пробная версия Azure](azure.microsoft.com).
2. Учетная запись служб мультимедиа Azure. Используйте классический портал Azure, .NET или API REST, чтобы создать учетную запись служб мультимедиа Azure. Дополнительные сведения можно найти в разделе [Создание учетной записи](media-services-create-account.md).
3. Настройка среды разработки (необязательно) Выберите .NET или REST API для среды разработки. Дополнительные сведения см. в [разделе о настройке среды](media-services-dotnet-how-to-use.md). 

	Кроме того, ознакомьтесь с разделом о [подключении](media-services-dotnet-connect-programmatically.md) с помощью программных средств.
4. Выделите одну или несколько единиц масштабирования (рекомендуется). Рекомендуем выделить одну или несколько единиц масштабирования для приложения в рабочей среде. Дополнительные сведения см. в разделе [Управление конечными точками потоковой передачи](media-services-manage-origins.md).

##Основные сведения и понятия

Основные понятия служб мультимедиа Azure см. в статье [Основные понятия](media-services-concepts.md).

Инструкции по работе с основными компонентами служб мультимедиа Azure см. в соответствующих [пошаговых руководствах](https://docs.com/fukushima-shigeyuki/3439/english-azure-media-services-step-by-step-series). Они содержат отличный обзор основных понятий и демонстрируют выполнение задач AME с помощью средства AMSE. Обратите внимание, что средство AMSE разработано для Windows. Оно поддерживает большинство задач, которые можно решать программным путем, используя [пакет SDK AMS для .NET](https://github.com/Azure/azure-sdk-for-media-services), [пакет SDK Azure для Java](https://github.com/Azure/azure-sdk-for-java) и [пакет SDK Azure для PHP](https://github.com/Azure/azure-sdk-for-php).

##<a id="vod_scenarios"></a>Доставка мультимедиа по запросу с помощью служб мультимедиа Azure: распространенные сценарии и задачи

В этом разделе описаны распространенные сценарии и приведены ссылки на соответствующие разделы. На следующей схеме показаны основные части платформы служб мультимедиа, участвующие в доставке содержимого по запросу.

![Рабочий процесс для видео по запросу](./media/media-services-video-on-demand-workflow/media-services-video-on-demand.png)


###Защита содержимого в хранилище и доставка потокового мультимедиа в незашифрованном виде

1. Передача мезонинного файла в высоком качестве в ресурс.
	
	Рекомендуется применять параметр шифрования хранилища для ресурса, чтобы защитить содержимое при отправке и хранении.
 
1. Кодирование в набор MP4-файлов с адаптивным битрейтом.

	Рекомендуется применять параметр шифрования хранилища для выходного ресурса, чтобы защитить содержимое при хранении.
	
1. Настройка политики доставки ресурсов (используется динамической упаковкой).
	
	Если ресурс зашифрован в хранилище, **нужно** настроить политику доставки ресурсов.

1. Опубликуйте ресурс, создав указатель OnDemand.

	Убедитесь, что есть как минимум одна зарезервированная единица потоковой передачи на конечной точке потоковой передачи, с которой необходимо выполнять потоковую передачу содержимого.

1. Потоковая передача содержимого.

###Защита содержимого в хранилище, доставка потокового мультимедиа с динамическим шифрованием  

Чтобы использовать динамическое шифрование, необходимо сначала получить как минимум одну зарезервированную единицу потоковой передачи на конечной точке потоковой передачи, с которой необходимо выполнять потоковую передачу содержимого.

1. Добавьте высококачественный основной файл в ресурс. Примените шифрование хранилища к ресурсу.
1. Кодирование в набор MP4-файлов с адаптивным битрейтом. Примените шифрование хранилища к выходному ресурсу.
1. Создайте ключ шифрования содержимого для ресурса, который вы хотите динамически шифровать во время воспроизведения.
2. Настройте политику авторизации ключа содержимого.
1. Настройте политику доставки ресурсов (она используется средствами динамической упаковки и шифрования).
1. Опубликуйте ресурс, создав указатель OnDemand.
1. Потоковая передача содержимого. 

###Использование служб медиа-аналитики для принятия важных решений на основе видео 

Службы медиа-аналитики включают набор речевых и визуальных компонентов, которые помогают организациям и компаниям выполнять анализ видеофайлов. Дополнительные сведения см. в статье [Общие сведения об аналитике служб мультимедиа Azure](media-services-analytics-overview.md).

1. Передача мезонинного файла в высоком качестве в ресурс.
2. Для обработки видео можно использовать одну из следующих служб медиа-аналитики.
	
	- **Индексатор** — [обработка видео с помощью индексатора службы мультимедиа Azure 2](media-services-process-content-with-indexer2.md).
	- **Hyperlapse** – [обработка файлов мультимедиа с помощью Azure Media Hyperlapse](media-services-hyperlapse-content.md).
	- **Распознавание движений** — [распознавание движений для служб медиа-аналитики Azure](media-services-motion-detection.md).
	- **Распознавание лиц и эмоций** — [распознавание лиц и эмоций для служб медиа-аналитики Azure](media-services-face-and-emotion-detection.md).
	- **Формирование сводных данных о видео** — [использование Azure Media Video Thumbnail для формирования сводных данных о видео](media-services-video-summarization.md).
3. Обработчики мультимедийных данных служб медиа-аналитики создают файлы в формате MP4 или JSON. Если обработчик мультимедиа создает файл в формате MP4, такой файл можно скачать постепенно. Если обработчик мультимедиа создает файл в формате JSON, такой файл можно скачать из хранилища BLOB-объектов. 


###Использование прогрессивного скачивания 

1. Передача мезонинного файла в высоком качестве в ресурс.
1. Кодирование в один MP4-файл.
1. Опубликуйте ресурс, создав указатель OnDemand или SAS.

	При использовании указателя OnDemand убедитесь, что есть как минимум одна зарезервированная единица потоковой передачи на конечной точке потоковой передачи, с которой планируется выполнять последовательное скачивание содержимого.

	При использовании указателя SAS содержимое скачивается из хранилища BLOB-объектов Azure. В этом случае нет необходимости в зарезервированных единицах потоковой передачи.
  
1. Прогрессивное скачивание содержимого.

###См. также

- [Практическое руководство. Передача содержимого](media-services-manage-content.md#upload)
- [Практическое руководство. Получение обработчика мультимедиа](media-services-get-media-processor.md)
- [Практическое руководство. Кодирование содержимого](media-services-manage-content.md#encode)
- [Практическое руководство. Отслеживание заданий](media-services-portal-check-job-progress.md)
- [Общие сведения об аналитике служб мультимедиа Azure](media-services-analytics-overview.md)
- [Практическое руководство. Защита содержимого](media-services-manage-content.md#encrypt)
- [Практическое руководство. Публикация содержимого](media-services-manage-content.md#publish)
- [Масштабирование кодирования](media-services-portal-encoding-units.md)

##<a id="live_scenarios"></a>Трансляция мероприятий путем динамической потоковой передачи с помощью служб мультимедиа Azure

При работе с динамической потоковой передачей часто используются следующие компоненты:

- Камера, которая используется для трансляции события.
- Динамический видеокодировщик, который преобразует сигналы от камеры в потоки, отправляемые службе динамической потоковой передачи. 
  
	При необходимости задействуются несколько динамических кодировщиков. Для некоторых критически важных транслируемых событий, для которых требуется очень высокая степень доступности и качество передачи, рекомендуется задействовать активно-активные избыточные кодировщики для достижения беспроблемной отработки отказа без потери данных.
- Служба динамической потоковой передачи, которая позволяет делать следующее: 
	- прием содержимого в реальном времени с использованием различных протоколов динамической потоковой передачи (например, RTMP или Smooth Streaming); 
	- кодирование вашего потока в поток с адаптивной скоростью;
	- предварительный просмотр динамического потока;
	- хранение принятого содержимого для потоковой передачи в дальнейшем (видео по запросу);
	- доставка содержимого посредством общих потоковых протоколов (например, MPEG DASH, Smooth, HLS, HDS) непосредственно клиентам или в сеть доставки содержимого (CDN) для дальнейшего распространения. 
	
		
**Службы мультимедиа Microsoft Azure** (AMS) предоставляют возможность приема, кодирования, предварительного просмотра, хранения и доставки содержимого динамической потоковой передачи.

При доставке содержимого клиентам ваша задача — доставлять видео высокого качества для различных устройств в разных сетевых условиях. Для учета качества и сетевых условий используйте динамические кодировщики, кодирующие поток в видеопоток с разными скоростями (с адаптивной скоростью). Для обеспечения потоковой передачи на различных устройствах используйте [динамическое упаковывание](media-services-dynamic-packaging-overview.md) служб мультимедиа, чтобы выполнить повторное динамическое упаковывание потока в разные протоколы. Службы мультимедиа поддерживают доставку следующих потоковых технологий с адаптивной скоростью: HTTP Live Streaming (HLS), Smooth Streaming, MPEG DASH и HDS (только для обладателей лицензий Adobe PrimeTime/Access).

**Каналы**, **программы** и **конечные точки потоковой передачи** в службах мультимедиа Azure обрабатывают все связанные с потоковым вещанием функции, включая прием, форматирование, DVR, безопасность, масштабируемость и избыточность.

**Канал** представляет собой конвейер для обработки содержимого, передаваемого динамически в потоковом режиме. В настоящее время канал может получать динамические входные потоки следующим способом.


- Локальный динамический кодировщик передает односкоростной поток в канал, который может осуществлять кодирование в реальном времени с помощью служб мультимедиа, в одном из следующих форматов: RTP (MPEG-TS), RTMP или Smooth Streaming (Fragmented MP4) . Затем канал кодирует входящий односкоростной поток в реальном времени в многоскоростной (адаптивный) видеопоток. При получении запроса службы мультимедиа предоставляют потоки клиентам.

	Функция кодирования потока в реальном времени с помощью служб мультимедиа в настоящее время находится в состоянии **предварительной версии**.
- Локальный динамический кодировщик передает содержимое во многоскоростном формате **RTMP** или формате **Smooth Streaming** (фрагментированный MP4) в канал. Вы можете использовать следующие динамические кодировщики, выдающие контент в многоскоростном формате Smooth Streaming: Elemental, Envivio, Cisco. Следующие динамические кодировщики выдают контент в формате RTMP: Adobe Flash Live, Telestream Wirecast и транскодеры Tricaster. Полученные потоки передаются через **каналы** без дальнейшей обработки. Динамический кодировщик может также передавать односкоростной поток в канал, для которого не включено динамическое кодирование, но это не рекомендуется. При получении запроса службы мультимедиа предоставляют потоки клиентам.


###Работа с каналами, выполняющими кодирование в реальном времени с помощью служб мультимедиа Azure


На следующей схеме показаны основные части платформы AMS, участвующие в процессе динамическое потоковой передачи, где для кодировщика включено динамическое кодирование с помощью служб мультимедиа.

![Динамический рабочий процесс][live-overview1]

Дополнительные сведения см. в разделе [Работа с каналами, выполняющими кодирование в реальном времени с помощью служб мультимедиа Azure](media-services-manage-live-encoder-enabled-channels.md).


###Работа с каналами, получающими динамические многоскоростные потоки данных от локальных кодировщиков


На следующей схеме показаны основные части платформы AMS, участвующие в рабочем процессе динамической потоковой передачи.

![Динамический рабочий процесс][live-overview2]

Дополнительные сведения можно найти в разделе [Работа с каналами, получающими динамические многоскоростные потоки данных от локальных кодировщиков](media-services-manage-channels-overview.md).

##Использование содержимого

Службы мультимедиа Azure предоставляют средства, необходимые для создания динамических многофункциональных клиентских приложений проигрывателя для большинства платформ, включая: устройства iOS, устройства Android, Windows, Windows Phone, Xbox и абонентские приставки. В указанном ниже разделе приведены ссылки на пакеты SDK и платформы проигрывателей, которые можно использовать для разработки собственных клиентских приложений, способных использовать потоковое мультимедийное содержимое, находящееся в службах мультимедиа.

[Разработка приложений видеопроигрывателя](media-services-develop-video-players.md)

##Поддержка сети CDN Azure

Службы мультимедиа поддерживают интеграцию с сетью CDN Azure. Информацию о включении сети CDN Azure см. в разделе [Управление конечными точками потоковой передачи в учетной записи служб мультимедиа](media-services-manage-origins.md#enable_cdn).

##Масштабирование учетной записи служб мультимедиа

Можно масштабировать **службы мультимедиа**, указав число **зарезервированных единиц потоковой передачи** и **зарезервированных единиц кодирования**, которые необходимо использовать при подготовке учетной записи.

Можно также масштабировать учетную запись служб мультимедиа, добавляя к ней учетные записи хранения. Каждая учетная запись хранения ограничена 500 ТБ. Чтобы увеличить емкость хранилища за пределы ограничений по умолчанию, можно присоединить несколько учетных записей хранения для одной учетной записи служб мультимедиа.

[Этот](media-services-how-to-scale.md) раздел содержит ссылки на соответствующие разделы.

##Поддержка

[Служба поддержки Azure](https://azure.microsoft.com/support/options/) обеспечивает различные варианты поддержки для Azure, включая службы мультимедиа.

##Отзывы

[AZURE.INCLUDE [media-services-user-voice-include](../../includes/media-services-user-voice-include.md)]

##Соглашение об уровне обслуживания (SLA):

- для кодирования с помощью служб мультимедиа мы гарантируем доступность транзакций через интерфейс REST API на уровне 99,9 %;
- для потоковой передачи мы будем успешно обслуживать запросы с гарантией доступности на уровне 99,9 % для существующего мультимедийного содержимого, если приобретена по крайней мере одна единица потоковой передачи;
- для динамических каналов мы гарантируем возможность внешнего подключения запущенных каналов в течение как минимум 99,9 % времени;
- для защиты содержимого мы гарантируем, что мы будет успешно выполнять ключевые запросы по крайней мере 99,9 % времени;
- для индексатора мы будет успешно обслуживать запросы задачи индексатора, обработанные с помощью зарезервированный единицы кодирования, в течение 99,9 % времени.

	Дополнительные сведения можно найти в разделе [Соглашение об уровне обслуживания Microsoft Azure](https://azure.microsoft.com/support/legal/sla/).

<!-- Images -->
[overview]: ./media/media-services-overview/media-services-overview.png
[vod-overview]: ./media/media-services-video-on-demand-workflow/media-services-video-on-demand.png
[live-overview1]: ./media/media-services-live-streaming-workflow/media-services-live-streaming-new.png
[live-overview2]: ./media/media-services-live-streaming-workflow/media-services-live-streaming-current.png
 

<!----HONumber=AcomDC_0504_2016-->