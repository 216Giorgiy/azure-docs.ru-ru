---
title: "Общие сведения о службах мультимедиа Azure и распространенные сценарии | Документация Майкрософт"
description: "В этом разделе приводится краткий обзор служб мультимедиа Azure."
services: media-services
documentationcenter: 
author: Juliako
manager: erikre
editor: 
ms.assetid: 7a5e9723-c379-446b-b4d6-d0e41bd7d31f
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: hero-article
ms.date: 01/05/2017
ms.author: juliako;anilmur
ms.translationtype: Human Translation
ms.sourcegitcommit: 95b8c100246815f72570d898b4a5555e6196a1a0
ms.openlocfilehash: 0a84e69f33ae30040c2365e6a5180e17e8df7539
ms.contentlocale: ru-ru
ms.lasthandoff: 05/18/2017


---
# <a name="azure-media-services-overview-and-common-scenarios"></a>Общие сведения о службах мультимедиа Azure и распространенные сценарии

Службы мультимедиа Azure — это расширяемая облачная платформа, которая позволяет разработчикам создавать масштабируемые приложения для управления и доставки файлов мультимедиа. С помощью служб мультимедиа Azure можно безопасно передавать, сохранять, кодировать и упаковывать видео- или аудиосодержимое как локально, так и для потоковой трансляции разным клиентам (например, на ТВ, ПК и мобильные устройства).

Можно создавать сквозные рабочие процессы, полностью использующие службы мультимедиа. Также можно использовать сторонние компоненты в качестве некоторых частей рабочего процесса. Например, можно выполнять кодирование с помощью стороннего кодировщика. А затем отправить, защитить, упаковать и доставить содержимое с использованием служб мультимедиа.

Вы можете выполнить потоковую передачу содержимого динамически или доставить содержимое по запросу. В этом разделе приведены типичные сценарии доставки содержимого [динамически](media-services-overview.md#live_scenarios) или [по запросу](media-services-overview.md#vod_scenarios). В этом разделе также есть ссылки на другие разделы.

## <a name="sdks-and-tools"></a>Пакеты SDK и средства

Для сборки решений на базе служб мультимедиа можно использовать

* [REST API для службы мультимедиа.](https://docs.microsoft.com/rest/api/media/operations/azure-media-services-rest-api-reference)
* Один из доступных клиентских пакетов SDK:
    * [Пакет SDK служб мультимедиа Azure для .NET](https://github.com/Azure/azure-sdk-for-media-services).
    * [Пакет Azure SDK для Java](https://github.com/Azure/azure-sdk-for-java).
    * [Пакет Azure SDK для PHP](https://github.com/Azure/azure-sdk-for-php).
    * [Службы мультимедиа Azure для Node.js](https://github.com/michelle-becker/node-ams-sdk/blob/master/lib/request.js) (это версия пакета SDK для Node.js сторонних производителей. Она поддерживается сообществом и в настоящее время не обладает полным покрытием всех интерфейсов API AMS).
* Существующие средства:
    * [портал Azure](https://portal.azure.com/)
    * [Azure-Media-Services-Explorer](https://github.com/Azure/Azure-Media-Services-Explorer) (обозреватель служб мультимедиа Azure (AMSE) является приложением Winforms/С# для Windows)

На следующем рисунке показаны некоторые из объектов, которые чаще всего используются при разработке с использованием модели OData служб мультимедиа.

Щелкните изображение, чтобы просмотреть его полноразмерную версию.  

<a href="./media/media-services-overview/media-services-overview-object-model.png" target="_blank"><img src="./media/media-services-overview/media-services-overview-object-model-small.png"></a> 

Всю модель можно просмотреть [здесь](https://media.windows.net/API/$metadata?api-version=2.15).  


## <a name="media-services-learning-paths"></a>Схемы обучения работе со службами мультимедиа
Схемы обучения AMS можно просмотреть здесь:

* [Рабочий процесс для потоковой передачи в реальном времени в службах AMS](https://azure.microsoft.com/documentation/learning-paths/media-services-streaming-live/)
* [Рабочий процесс для потоковой передачи по запросу в службах AMS](https://azure.microsoft.com/documentation/learning-paths/media-services-streaming-on-demand/)

## <a name="prerequisites"></a>Предварительные требования

Приступить к использованию служб мультимедиа Azure можно только при наличии следующих компонентов.

1. Учетная запись Azure. Если ее нет, можно создать бесплатную пробную учетную запись всего за несколько минут. Дополнительные сведения см. в разделе [Бесплатная пробная версия Azure](https://azure.microsoft.com).
2. Учетная запись служб мультимедиа Azure. Используйте портал Azure, .NET или API REST, чтобы создать учетную запись служб мультимедиа Azure. Дополнительные сведения см. в статье [Создание учетной записи служб мультимедиа Azure с помощью портала Azure](media-services-portal-create-account.md).
3. Настройка среды разработки (необязательно) Выберите .NET или REST API для среды разработки. Дополнительные сведения см. в [разделе о настройке среды](media-services-dotnet-how-to-use.md).

    Кроме того, ознакомьтесь с разделом о [подключении с помощью программных средств](media-services-dotnet-connect-programmatically.md).
4. Конечная точка потоковой передачи уровня "Стандартный" или "Премиум" в состоянии "Запущено".  Дополнительные сведения см. в статье [Управление конечными точками потоковой передачи](https://docs.microsoft.com/en-us/azure/media-services/media-services-portal-manage-streaming-endpoints).

## <a name="concepts-and-overview"></a>Основные сведения и понятия
Основные понятия служб мультимедиа Azure см. в статье [Основные понятия служб мультимедиа Azure](media-services-concepts.md).

Инструкции по работе с основными компонентами служб мультимедиа Azure см. в соответствующих [пошаговых руководствах](https://docs.com/fukushima-shigeyuki/3439/english-azure-media-services-step-by-step-series). В них не только приводятся основные сведения о концепциях, но и с помощью инструмента AMSE демонстрируется выполнение задач AMS. Обратите внимание, что средство AMSE разработано для Windows. Оно поддерживает большинство задач, которые можно решать программным путем, используя [пакет SDK AMS для .NET](https://github.com/Azure/azure-sdk-for-media-services), [пакет SDK Azure для Java](https://github.com/Azure/azure-sdk-for-java) или [пакет SDK Azure для PHP](https://github.com/Azure/azure-sdk-for-php).

## <a id="vod_scenarios"></a>Доставка мультимедиа по запросу с помощью служб мультимедиа Azure: распространенные сценарии и задачи
В этом разделе описаны распространенные сценарии и приведены ссылки на соответствующие ресурсы. На следующей схеме показаны основные части платформы служб мультимедиа, участвующие в доставке содержимого по запросу.

![Рабочий процесс для видео по запросу](./media/media-services-video-on-demand-workflow/media-services-video-on-demand.png)

>[!NOTE]
>При создании учетной записи AMS в нее добавляется конечная точка потоковой передачи **по умолчанию** в состоянии **Остановлена**. Чтобы начать потоковую передачу содержимого и воспользоваться динамической упаковкой и динамическим шифрованием, конечная точка потоковой передачи, из которой необходимо выполнять потоковую передачу содержимого, должна находиться в состоянии **Выполняется**.

### <a name="protect-content-in-storage-and-deliver-streaming-media-in-the-clear-non-encrypted"></a>Защита содержимого в хранилище и доставка потокового мультимедиа в незашифрованном виде
1. Передача мезонинного файла в высоком качестве в ресурс.

    Рекомендуется применять параметр шифрования хранилища для ресурса, чтобы защитить содержимое при отправке и хранении.
2. Кодирование в набор MP4-файлов с адаптивным битрейтом.

    Рекомендуется применять параметр шифрования хранилища для выходного ресурса, чтобы защитить содержимое при хранении.
3. Настройка политики доставки ресурсов (используется динамической упаковкой).

    Если ресурс зашифрован в хранилище, **нужно** настроить политику доставки ресурсов.
4. Опубликуйте ресурс, создав указатель OnDemand.
5. Потоковая передача содержимого.

### <a name="protect-content-in-storage-deliver-dynamically-encrypted-streaming-media"></a>Защита содержимого в хранилище, доставка потокового мультимедиа с динамическим шифрованием

1. Передача мезонинного файла в высоком качестве в ресурс. Примените шифрование хранилища к ресурсу.
2. Кодирование в набор MP4-файлов с адаптивным битрейтом. Примените шифрование хранилища к выходному ресурсу.
3. Создайте ключ шифрования содержимого для ресурса, который вы хотите динамически шифровать во время воспроизведения.
4. Настройте политику авторизации ключа содержимого.
5. Настройте политику доставки ресурсов (она используется средствами динамической упаковки и шифрования).
6. Опубликуйте ресурс, создав указатель OnDemand.
7. Потоковая передача содержимого.

### <a name="use-media-analytics-to-derive-actionable-insights-from-your-videos"></a>Использование служб медиа-аналитики для принятия важных решений на основе видео
Службы медиа-аналитики включают набор речевых и визуальных компонентов, которые помогают организациям и компаниям выполнять анализ видеофайлов. Дополнительные сведения см. в статье [Общие сведения об аналитике служб мультимедиа Azure](media-services-analytics-overview.md).

1. Передача мезонинного файла в высоком качестве в ресурс.
2. Для обработки видео можно использовать одну из следующих служб медиа-аналитики.

   * **Индексатор** — [Process videos with Azure Media Индексатор 2](media-services-process-content-with-indexer2.md)
   * **Hyperlapse** — [обработка файлов мультимедиа с помощью технологии Hyperlapse служб мультимедиа Azure](media-services-hyperlapse-content.md)
   * **Распознавание движений** — [распознавание движений для служб медиа-аналитики Azure](media-services-motion-detection.md).
   * **Распознавание лиц и эмоций** — [распознавание лиц и эмоций для служб медиа-аналитики Azure](media-services-face-and-emotion-detection.md).
   * **Формирование сводных данных о видео** — [использование Azure Media Video Thumbnail для формирования сводных данных о видео](media-services-video-summarization.md)
3. Обработчики мультимедийных данных служб медиа-аналитики создают файлы в формате MP4 или JSON. Если обработчик мультимедиа создает файл в формате MP4, такой файл можно скачать постепенно. Если обработчик мультимедиа создает файл в формате JSON, такой файл можно скачать из хранилища BLOB-объектов.

### <a name="deliver-progressive-download"></a>Использование прогрессивного скачивания
1. Передача мезонинного файла в высоком качестве в ресурс.
2. Кодирование в один MP4-файл.
3. Опубликуйте ресурс, создав указатель OnDemand или SAS.

    При использовании указателя SAS содержимое скачивается из хранилища BLOB-объектов Azure. В этом случае вам не нужны конечные точки потоковой передачи в состоянии "Запущено".
4. Прогрессивное скачивание содержимого.

## <a id="live_scenarios"></a>Трансляция мероприятий путем динамической потоковой передачи с помощью служб мультимедиа Azure
При работе с динамической потоковой передачей часто используются следующие компоненты:

* Камера, которая используется для трансляции события.
* Динамический видеокодировщик, который преобразует сигналы от камеры в потоки, отправляемые службе динамической потоковой передачи.

Несколько синхронизированных кодировщиков динамической передачи (по желанию). Для некоторых критически важных транслируемых событий, для которых требуется очень высокая степень доступности и качество передачи, рекомендуется задействовать активные или активно-избыточные кодировщики с синхронизацией по времени для достижения беспроблемной отработки отказа без потери данных.

* Служба динамической потоковой передачи, которая позволяет делать следующее:
* прием содержимого в реальном времени с использованием различных протоколов динамической потоковой передачи (например, RTMP или Smooth Streaming);
* кодирование вашего потока в поток с адаптивной скоростью (по желанию);
* предварительный просмотр динамического потока;
* запись и хранение принятого содержимого для потоковой передачи в дальнейшем (видео по запросу);
* доставка содержимого посредством общих потоковых протоколов (например, MPEG DASH, Smooth, HLS) непосредственно клиентам или в сеть доставки содержимого (CDN) для дальнейшего распространения.

**Службы мультимедиа Microsoft Azure** (AMS) предоставляют возможность приема, кодирования, предварительного просмотра, хранения и доставки содержимого динамической потоковой передачи.

При доставке содержимого клиентам ваша задача — доставлять видео высокого качества для различных устройств в разных сетевых условиях. Для учета качества и сетевых условий используйте динамические кодировщики, кодирующие поток в видеопоток с разными скоростями (с адаптивной скоростью).  Для обеспечения потоковой передачи на различных устройствах используйте [динамическое упаковывание](media-services-dynamic-packaging-overview.md) служб мультимедиа, чтобы выполнить повторное динамическое упаковывание потока в разные протоколы. Службы мультимедиа поддерживают доставку следующих технологий потоковой передачи с переменной скоростью: HTTP Live Streaming (HLS), Smooth Streaming и MPEG-DASH.

**Каналы**, **программы** и **конечные точки потоковой передачи** в службах мультимедиа Azure обрабатывают все связанные с потоковым вещанием функции, включая прием, форматирование, DVR, безопасность, масштабируемость и избыточность.

**Канал** представляет собой конвейер для обработки содержимого, передаваемого динамически в потоковом режиме. Канал может получать динамические входные потоки следующим способом.

* Локальный динамический кодировщик передает контент в многоскоростном формате **RTMP** или **Smooth Streaming** (фрагментированный формат MP4) в канал, настроенный для **сквозной** доставки. **Сквозная** доставка осуществляется, когда переданные потоки проходят через **каналы** без дополнительного перекодирования или кодирования. Вы можете использовать следующие динамические кодировщики, выдающие содержимое в формате потоковой передачи Smooth Streaming с несколькими скоростями: MediaExcel, Imagine Communications, Ateme, Envivio, Cisco и Elemental. Следующие динамические кодировщики выдают содержимое в формате RTMP: Adobe Flash Live Encoder, Haivision, Telestream Wirecast, Teradek и Tricaster.  Динамический кодировщик может также передавать односкоростной поток в канал, для которого не включено кодирование в реальном времени, но это не рекомендуется. При получении запроса службы мультимедиа предоставляют потоки клиентам.

> [!NOTE]
> Метод сквозной доставки — наиболее экономичный способ осуществления потоковой передачи в режиме реального времени, если передается ряд событий за длительный период времени и у вас уже есть локальные кодировщики. См. сведения о [ценах](https://azure.microsoft.com/pricing/details/media-services/).
>
>

* Локальный динамический кодировщик передает односкоростной поток в канал, который может осуществлять кодирование в реальном времени с помощью служб мультимедиа, в одном из следующих форматов: RTP (MPEG-TS), RTMP или Smooth Streaming (Fragmented MP4) . Затем канал кодирует входящий односкоростной поток в реальном времени в многоскоростной (адаптивный) видеопоток. При получении запроса службы мультимедиа предоставляют потоки клиентам.

### <a name="working-with-channels-that-receive-multi-bitrate-live-stream-from-on-premises-encoders-pass-through"></a>Работа с каналами, получающими динамические многоскоростные потоки данных от локальных кодировщиков (сквозная передача)
На следующей схеме показаны основные части платформы AMS, участвующие в рабочем процессе **сквозной передачи** .

![Динамический рабочий процесс][live-overview2]

Дополнительные сведения см. в разделе [Работа с каналами, получающими динамические многоскоростные потоки данных от локальных кодировщиков (сквозная передача)](media-services-live-streaming-with-onprem-encoders.md).

### <a name="working-with-channels-that-are-enabled-to-perform-live-encoding-with-azure-media-services"></a>Работа с каналами, выполняющими кодирование в реальном времени с помощью служб мультимедиа Azure
На следующей схеме показаны основные части платформы AMS, участвующие в процессе динамическое потоковой передачи, где для кодировщика включено динамическое кодирование с помощью служб мультимедиа.

![Динамический рабочий процесс][live-overview1]

Дополнительные сведения можно найти в разделе [Working with Channels that are Enabled to Perform Live Encoding with Azure Media Services](media-services-manage-live-encoder-enabled-channels.md).

## <a name="consuming-content"></a>Использование содержимого
Службы мультимедиа Azure предоставляют средства, необходимые для создания динамических многофункциональных клиентских приложений проигрывателя для большинства платформ, включая: устройства iOS, устройства Android, Windows, Windows Phone, Xbox и абонентские приставки. В указанном ниже разделе приведены ссылки на пакеты SDK и платформы проигрывателей, которые можно использовать для разработки собственных клиентских приложений, способных использовать потоковое мультимедийное содержимое, находящееся в службах мультимедиа.

[Разработка приложений видеопроигрывателя](media-services-develop-video-players.md)

## <a name="enabling-azure-cdn"></a>Поддержка сети CDN Azure
Службы мультимедиа поддерживают интеграцию с сетью CDN Azure. Информацию о включении сети CDN Azure см. в статье [Управление конечными точками потоковой передачи в учетной записи служб мультимедиа](media-services-portal-manage-streaming-endpoints.md).

## <a name="scaling-a-media-services-account"></a>Масштабирование учетной записи служб мультимедиа

Можно масштабировать **службы мультимедиа**, указав число **зарезервированных единиц потоковой передачи** и **зарезервированных единиц кодирования**, которые необходимо использовать при подготовке учетной записи.

Можно также масштабировать учетную запись служб мультимедиа, добавляя к ней учетные записи хранения. Каждая учетная запись хранения ограничена 500 ТБ. Чтобы увеличить емкость хранилища за пределы ограничений по умолчанию, можно присоединить несколько учетных записей хранения для одной учетной записи служб мультимедиа.
Пользователи служб мультимедиа в зависимости от своих потребностей могут выбрать конечную точку потоковой передачи уровня **Стандартный** либо одну или несколько конечных точек потоковой передачи уровня **Премиум**. Конечная точка потоковой передачи уровня "Стандартный" подходит для большинства задач потоковой передачи. Она обладает такими же возможностями, что и единицы потоковой передачи уровня "Премиум". Если у вас есть продвинутые рабочие нагрузки или требования к емкости потоковой передачи не соответствуют целевым показателям пропускной способности стандартной конечной точки потоковой передачи, или же вам нужно управлять емкостью службы StreamingEndpoint, чтобы справляться с растущими требованиями к пропускной способности путем корректировки единиц масштабирования (также известных как единицы потоковой передачи уровня "Премиум"), мы рекомендуем выделить единицы масштабирования.

[Этот](media-services-portal-scale-streaming-endpoints.md) раздел содержит ссылки на соответствующие разделы.

## <a name="support"></a>Поддержка
[Служба поддержки Azure](https://azure.microsoft.com/support/options/) обеспечивает различные варианты поддержки для Azure, включая службы мультимедиа.

## <a name="provide-feedback"></a>Отзывы
[!INCLUDE [media-services-user-voice-include](../../includes/media-services-user-voice-include.md)]

## <a name="service-level-agreement-sla"></a>Соглашение об уровне обслуживания (SLA):
* для кодирования с помощью служб мультимедиа мы гарантируем доступность транзакций через интерфейс REST API на уровне 99,9 %;
* Для потоковой передачи мы будем успешно обслуживать запросы с гарантией доступности на уровне 99,9 % для существующего мультимедийного содержимого, если приобретена одна конечная точка потоковой передачи уровня "Стандартный" или "Премиум".
* для динамических каналов мы гарантируем возможность внешнего подключения запущенных каналов в течение как минимум 99,9 % времени;
* для защиты содержимого мы гарантируем, что мы будет успешно выполнять ключевые запросы по крайней мере 99,9 % времени;
* для индексатора мы будет успешно обслуживать запросы задачи индексатора, обработанные с помощью зарезервированный единицы кодирования, в течение 99,9 % времени.

Дополнительные сведения можно найти в разделе [Соглашение об уровне обслуживания Microsoft Azure](https://azure.microsoft.com/support/legal/sla/).

<!-- Images -->
[overview]: ./media/media-services-overview/media-services-overview.png
[vod-overview]: ./media/media-services-video-on-demand-workflow/media-services-video-on-demand.png
[live-overview1]: ./media/media-services-live-streaming-workflow/media-services-live-streaming-new.png
[live-overview2]: ./media/media-services-live-streaming-workflow/media-services-live-streaming-current.png

