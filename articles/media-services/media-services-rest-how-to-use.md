<properties 
	pageTitle="Обзор интерфейса REST API служб мультимедиа | Microsoft Azure" 
	description="Обзор интерфейса REST API служб мультимедиа" 
	services="media-services" 
	documentationCenter="" 
	authors="Juliako" 
	manager="dwrede" 
	editor=""/>

<tags 
	ms.service="media-services" 
	ms.workload="media" 
	ms.tgt_pltfrm="na" 
	ms.devlang="dotnet" 
	ms.topic="article" 
	ms.date="12/05/2015"
	ms.author="juliako"/>


# Обзор интерфейса REST API служб мультимедиа 

[AZURE.INCLUDE [media-services-selector-setup](../../includes/media-services-selector-setup.md)]

Службы мультимедиа Microsoft Azure — это службы, которые принимают HTTP-запросы на основе OData и могут отвечать с использованием подробного формата JSON или atom+pub. Так как службы мультимедиа соответствуют правилам проектирования Azure, для них предусмотрен набор обязательных HTTP-заголовков, которые каждый клиент должен использовать при подключении к службам мультимедиа, а также набор дополнительных заголовков, которые можно использовать при необходимости. В следующих разделах описываются заголовки и HTTP-команды, которые можно использовать при создании запросов и получения ответов из служб мультимедиа.


## Стандартные заголовки HTTP-запроса, поддерживаемые службами мультимедиа

Для каждого вызова, отправляемого в службы мультимедиа, предусмотрен набор обязательных заголовков, которые необходимо включить в запрос, а также набор дополнительных заголовков, которые можно включить при необходимости. Обязательные заголовки перечислены в следующей таблице:


Заголовок|Тип|Значение
---|---|---
Авторизация|Носитель|Носитель – единственный принимаемый механизм авторизации. Значение должно содержать маркер доступа, предоставленный службой ACS.
x-ms-version|Decimal|2\.11
DataServiceVersion|Decimal|3\.0
MaxDataServiceVersion|Decimal|3\.0



>[AZURE.NOTE]Так как службы мультимедиа используют OData для предоставления своего базового репозитория метаданных ресурсов через REST API, заголовки DataServiceVersion и MaxDataServiceVersion должны быть включены во все запросы. Тем не менее, если они отсутствуют, в настоящее время в службах мультимедиа предполагается, что для DataServiceVersion используется значение 3.0.

Ниже приведен набор дополнительных заголовков.

Заголовок|Тип|Значение
---|---|---
Дата|RFC 1123 date|Метка времени запроса
Принять|Тип содержимого|Запрошенный тип содержимого для ответа, например: <p> -application/json;odata=verbose<p> - application/atom+xml<p> Тип содержимого ответов может отличаться. Например, при получении BLOB-объектов полезными данными в успешном ответе будет поток BLOB-объектов.
Accept-Encoding|Gzip, deflate|Кодировка GZIP и, в соответствующих случаях, DEFLATE. Примечание. Для больших ресурсов службы мультимедиа могут пропустить этот заголовок и вернуть несжатые данные.
Accept-Language|"en", "ru" и т. д.|Указывает предпочитаемый язык для ответа.
Accept-Charset|Тип кодировки, например "UTF-8"|По умолчанию — UTF-8.
X-HTTP-Method|Метод HTTP|Позволяет клиентам или брандмауэрам, которые не поддерживают методы HTTP, например PUT или DELETE, использовать эти методы, туннелированные посредством вызова GET.
Content-Type|Тип содержимого|Тип содержимого текста запросов PUT или POST.
client-request-id|Строка|Определяемое вызывающим объектом значение, по которому можно идентифицировать данный запрос. Если это значение указано, оно будет включено в ответное сообщение в качестве способа сопоставления запроса. <p><p>**Важно**<p>Значения должны превышать 2096 Б (2 КБ).

## Стандартные ответы HTTP-запроса, поддерживаемые службами мультимедиа

Ниже приведен набор заголовков, которые могут быть возвращены в зависимости от запрошенного ресурса и действия, которое необходимо выполнить.


Заголовок|Тип|Значение
---|---|---
request-id|Строка|Уникальный идентификатор текущей операции, создаваемый службой.
client-request-id|Строка|Идентификатор, указанный вызывающим объектом в исходном запросе, если он имеется.
Дата|RFC 1123 date|Дата обработки запроса.
Content-Type|Varies|Тип содержимого текста ответа.
Content-Encoding|Varies|Соответственно, Gzip или Deflate.


## Стандартные HTTP-команды, поддерживаемые службами мультимедиа

Ниже приведен полный список HTTP-команд, которые могут использоваться при создании HTTP-запросов:


Команда|Описание
---|---
GET|Возвращает текущее значение объекта.
ПУБЛИКАЦИЯ|Создает объект на основе предоставленных данных или отправляет команду.
ОТПРАВКА|Заменяет объект или создает именованный объект (в зависимости от ситуации).
УДАЛИТЬ|Удаляет объект.
MERGE|Вносит в существующий объект изменения в именованном свойстве.
HEAD|Возвращает метаданные объекта для ответа GET.


## Обнаружение модели служб мультимедиа

Чтобы упростить обнаружение сущностей служб мультимедиа, можно использовать операцию $metadata. Она позволяет получать все допустимые типы сущностей, свойства сущностей, ассоциации, функции, действия и т. д. Следующий пример демонстрирует формирование URI:https://media.windows.net/API/$metadata

Чтобы метаданные можно было просмотреть в браузере, в конце универсального кода ресурса необходимо добавить выражение "?api-version=2.x" или не включать в запрос заголовок x-ms-version.



##Схемы обучения работе со службами мультимедиа

[AZURE.INCLUDE [media-services-learning-paths-include](../../includes/media-services-learning-paths-include.md)]

##Отзывы

[AZURE.INCLUDE [media-services-user-voice-include](../../includes/media-services-user-voice-include.md)]

  
  [Azure Classic Portal]: http://manage.windowsazure.com/



 

<!---HONumber=AcomDC_1210_2015-->