---
title: Компонент LiveEvent Служб мультимедиа Azure и средство цифровой видеозаписи в облаке | Документация Майкрософт
description: В этой статье объясняется, что такое компонент LiveOutput и как использовать средство цифровой видеозаписи в облаке.
services: media-services
documentationcenter: ''
author: Juliako
manager: femila
editor: ''
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: ne
ms.topic: article
ms.date: 01/14/2019
ms.author: juliako
ms.openlocfilehash: 8543f00ccaecd8fd3f46132b05c2af925e6de10a
ms.sourcegitcommit: a1cf88246e230c1888b197fdb4514aec6f1a8de2
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/16/2019
ms.locfileid: "54352365"
---
# <a name="using-a-cloud-dvr"></a>Использование средства цифровой видеозаписи в облаке

Компонент [LiveOutput](https://docs.microsoft.com/rest/api/media/liveoutputs) дает возможность управлять свойствами исходящей прямой трансляции, в частности тем, какая ее часть записывается (объем DVR в облаке) и могут ли зрители начать просмотр трансляции. Отношения между компонентами **LiveEvent** и соответствующими **LiveOutput** похожи на традиционное телевещание, когда канал (**LiveEvent**) передает постоянный поток видео, а запись (**LiveOutput**) ограничивается определенным периодом времени (например, вечерние новости с 18:30 до 19:00). Телевизионные передачи можно записывать с помощью устройства записи цифрового видео (DVR). Аналогичная функция в LiveEvents управляется с помощью свойства ArchiveWindowLength. Это длительность временного диапазона ISO-8601 (например, PTHH:MM:SS), задающая объем DVR. Для нее можно задать значение от 3 минут до 25 часов.

## <a name="liveoutput"></a>Компонент LiveOutput

Значение **ArchiveWindowLength** определяет, насколько далеко зритель может отмотать назад относительно текущей позиции вещания.  **ArchiveWindowLength** также определяет, как долго могут увеличиваться манифесты клиентов.

Предположим, что вы выполняете потоковую передачу футбольного матча и для свойства **ArchiveWindowLength** задано значение всего 30 минут. Зритель, который начинает смотреть событие спустя 45 минут после начала игры, может отмотать назад не далее, чем к отметке в 15 минут. Ваши компоненты **LiveOutput** для игры будут работать далее, пока компонент **LiveEvent** не будет остановлен, но содержимое, находящееся вне допустимых значений **ArchiveWindowLength**, постоянно удаляется из хранилища без возможности восстановления. В этом примере отрезок видео между началом события и отметкой в 15 минут будет удален из вашего DVR и из контейнера в хранилище BLOB-объектов для компонента [Ресурс](https://docs.microsoft.com/rest/api/media/assets). Этот архив невозможно восстановить, и он удаляется из контейнера в хранилище BLOB-объектов Azure.

Каждый компонент **LiveOutput** связан с компонентом **Ресурс**, который используется для записи видео в связанный контейнер хранилища BLOB-объектов Azure. Чтобы опубликовать LiveOutput, создайте компонент **StreamingLocator** для этого компонента **Ресурс**. После создания [StreamingLocator](https://docs.microsoft.com/rest/api/media/streaminglocators) вы можете создать URL-адрес потоковой передачи и предоставить его зрителям.

Компонент **LiveEvent** поддерживает одновременную потоковую трансляцию для трех компонентов **LiveOutput**, то есть из одного потока можно создать не более 3 записей или архивов. Благодаря этому можно публиковать и архивировать разные части транслируемого мероприятия. Предположим, что вам необходимо круглосуточно транслировать содержимое по линейному веб-каналу в реальном времени и создавать "записи" разных программ, чтобы клиенты могли по запросу просмотреть пропущенное содержимое. Для этого сценария вам нужно сначала создать основной компонент LiveOutput с коротким периодом архивации (1 час или меньше) — это основной поток, к которому подключаются клиенты. Для этого компонента **LiveOutput** вы создадите **StreamingLocator** и опубликуете его в приложении или на веб-сайте, обозначив как веб-канал "прямой трансляции". Запустив работу компонента **LiveEvent**, вы можете программными средствами создавать дополнительный, параллельный компонент **LiveOutput** в начале программы (или на 5 минут раньше, чтобы оставить запас на небольшие сдвиги, который вы удалите позднее). Этот дополнительный компонент **LiveOutput** можно удалить через 5 минут после окончания программы. С помощью дополнительного компонента **Ресурс** можно создать компонент **StreamingLocator**, чтобы опубликовать эту программу в качестве ресурса по запросу в каталоге приложения. Этот процесс можно повторять любое количество раз для других программ или особо важных моментов, которые вы хотите предоставить в качестве видео по запросу. При этом веб-канал "прямой трансляции" из первого компонента **LiveOutput** продолжает транслировать содержимое по линейному веб-каналу. 

> [!NOTE]
> Компоненты **LiveOutput** запускаются при создании и останавливаются при удалении. При удалении компонента **LiveOutput** базовый компонент **Asset** и его содержимое не удаляются. 
>
> Если вы опубликовали **указатели потоковой передачи** в ресурсе для **LiveOutput**, событие (до окна DVR) будет по-прежнему доступно для просмотра до времени окончания **указателя потоковой передачи** или до тех пор, пока вы не удалите его, в зависимости от того, что произойдет раньше.   
  

## <a name="next-steps"></a>Дополнительная информация

- [Общие сведения о потоковой трансляции](live-streaming-overview.md)
- [Руководство по потоковой трансляции](stream-live-tutorial-with-api.md)

