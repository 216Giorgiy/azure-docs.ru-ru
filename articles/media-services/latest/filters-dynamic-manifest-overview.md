---
title: Фильтры и динамические манифесты Служб мультимедиа Azure | Документация Майкрософт
description: В этом разделе описывается создание фильтров, с помощью которых клиент может передавать определенные секции потока. Для достижения такой выборочной потоковой передачи службы мультимедиа создают динамические манифесты.
services: media-services
documentationcenter: ''
author: Juliako
manager: femila
editor: ''
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: ne
ms.topic: article
ms.date: 01/24/2019
ms.author: juliako
ms.openlocfilehash: 9c463740acf6ef464880a43e0e68de683b97f64f
ms.sourcegitcommit: 359b0b75470ca110d27d641433c197398ec1db38
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/07/2019
ms.locfileid: "55813430"
---
# <a name="filters-and-dynamic-manifests"></a>Фильтры и динамические манифесты

При распространении содержимого пользователям (потоковой трансляции событий или видео по запросу) клиенту может потребоваться больше возможностей, чем определено в файле манифеста ресурса-контейнера по умолчанию. Службы мультимедиа Azure позволяют определять фильтры учетной записи и фильтры ресурсов для содержимого. 

Фильтры — это серверные правила, с помощью которых пользователи могут выполнять различные действия, в том числе перечисленные ниже. 

- Воспроизведение только части видео (вместо воспроизведения видео целиком). Например: 

    - Сокращение манифеста для отображения субклипа текущего события ("фильтрация субклипов").
    - Обрезка начала видео ("обрезка видео").

- Доставка только указанных представлений и/или языковых дорожек, поддерживаемых устройством, на котором воспроизводится содержимое ("фильтрация представлений"). 
- Настройка окна представления (DVR) для предоставления ограниченной длительности окна DVR в проигрывателе ("настройка окна представления").

В этой статье описываются [понятия](#concepts) и показаны определения фильтров. Далее в ней представлены сведения о распространенных сценариях. В конце статьи вы найдете ссылки на инструкции по созданию фильтров программным способом.  

## <a name="concepts"></a>Основные понятия

### <a name="dynamic-manifests"></a>Динамические манифесты

Службы мультимедиа предоставляют **динамические манифесты** на основе предварительно определенных фильтров. После определения фильтров клиенты могут использовать их для потоковой передачи определенного представления или субклипов видео. Фильтры указываются в URL-адресе потоковой передачи. Фильтры можно применять к протоколам потоковой передачи с переменной скоростью: Apple HTTP Live Streaming (HLS), MPEG-DASH и Smooth Streaming. 

В представленной ниже таблице приводятся некоторые примеры URL-адресов с фильтрами.

|Протокол|Пример|
|---|---|
|HLS V4|`http://testendpoint-testaccount.streaming.mediaservices.windows.net/fecebb23-46f6-490d-8b70-203e86b0df58/BigBuckBunny.ism/Manifest(format=m3u8-aapl,filter=myAccountFilter)`|
|HLS V3|`http://testendpoint-testaccount.streaming.mediaservices.windows.net/fecebb23-46f6-490d-8b70-203e86b0df58/BigBuckBunny.ism/Manifest(format=m3u8-aapl-v3,filter=myAccountFilter)`|
|MPEG DASH|`http://testendpoint-testaccount.streaming.mediaservices.windows.net/fecebb23-46f6-490d-8b70-203e86b0df58/BigBuckBunny.ism/Manifest(format=mpd-time-csf,filter=myAssetFilter)`|
|Smooth Streaming|`http://testendpoint-testaccount.streaming.mediaservices.windows.net/fecebb23-46f6-490d-8b70-203e86b0df58/BigBuckBunny.ism/Manifest(filter=myAssetFilter)`|

> [!NOTE]
> Динамические манифесты не меняют актив и его манифест по умолчанию. Клиент может запросить поток с фильтрами или без них. 
> 
> 

### <a name="manifest-files"></a>Файлы манифестов

При кодировании актива для потоковой передачи с адаптивной скоростью создается файл **манифеста** (списка воспроизведения) (в основе файла — текст или XML). Файл **манифеста** содержит потоковые метаданные, например тип дорожки (звук, видео или текст), имя дорожки, время начала и окончания, скорость (качество), языки дорожки, окно представления (скользящее окно фиксированной длительности), видеокодек (FourCC). Также он предписывает проигрывателю получить следующий фрагмент, предоставляя информацию о следующих доступных для воспроизведения фрагментах видео и их расположении. Фрагменты (или сегменты) — это фактические блоки видеосодержимого.

Ниже приведен пример файла манифеста HLS. 

```
#EXT-X-MEDIA:TYPE=AUDIO,GROUP-ID="audio",NAME="aac_eng_2_128041_2_1",LANGUAGE="eng",DEFAULT=YES,AUTOSELECT=YES,URI="QualityLevels(128041)/Manifest(aac_eng_2_128041_2_1,format=m3u8-aapl)"
#EXT-X-STREAM-INF:BANDWIDTH=536209,RESOLUTION=320x180,CODECS="avc1.64000d,mp4a.40.2",AUDIO="audio"
QualityLevels(380658)/Manifest(video,format=m3u8-aapl)
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=536209,RESOLUTION=320x180,CODECS="avc1.64000d",URI="QualityLevels(380658)/Manifest(video,format=m3u8-aapl,type=keyframes)"
#EXT-X-STREAM-INF:BANDWIDTH=884474,RESOLUTION=480x270,CODECS="avc1.640015,mp4a.40.2",AUDIO="audio"
QualityLevels(721426)/Manifest(video,format=m3u8-aapl)
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=884474,RESOLUTION=480x270,CODECS="avc1.640015",URI="QualityLevels(721426)/Manifest(video,format=m3u8-aapl,type=keyframes)"
#EXT-X-STREAM-INF:BANDWIDTH=1327838,RESOLUTION=640x360,CODECS="avc1.64001e,mp4a.40.2",AUDIO="audio"
QualityLevels(1155246)/Manifest(video,format=m3u8-aapl)
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=1327838,RESOLUTION=640x360,CODECS="avc1.64001e",URI="QualityLevels(1155246)/Manifest(video,format=m3u8-aapl,type=keyframes)"
#EXT-X-STREAM-INF:BANDWIDTH=2414544,RESOLUTION=960x540,CODECS="avc1.64001f,mp4a.40.2",AUDIO="audio"
QualityLevels(2218559)/Manifest(video,format=m3u8-aapl)
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=2414544,RESOLUTION=960x540,CODECS="avc1.64001f",URI="QualityLevels(2218559)/Manifest(video,format=m3u8-aapl,type=keyframes)"
#EXT-X-STREAM-INF:BANDWIDTH=3805301,RESOLUTION=1280x720,CODECS="avc1.640020,mp4a.40.2",AUDIO="audio"
QualityLevels(3579378)/Manifest(video,format=m3u8-aapl)
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=3805301,RESOLUTION=1280x720,CODECS="avc1.640020",URI="QualityLevels(3579378)/Manifest(video,format=m3u8-aapl,type=keyframes)"
#EXT-X-STREAM-INF:BANDWIDTH=139017,CODECS="mp4a.40.2",AUDIO="audio"
QualityLevels(128041)/Manifest(aac_eng_2_128041_2_1,format=m3u8-aapl)
```

### <a name="get-and-examine-manifest-files"></a>Получение и просмотр файлов манифестов

Вы указываете список условий для фильтрации свойств дорожек с учетом того, какие дорожки вашего потока (прямой трансляции или видео по запросу) следует включить в динамически создаваемый манифест. Чтобы получить и просмотреть свойства дорожек, необходимо сначала загрузить манифест Smooth Streaming.

В статье [Руководство. Отправка, кодирование и потоковая передача видео с помощью API](stream-files-tutorial-with-api.md) показано, как составлять URL-адреса для потоковой передачи с помощью .NET (см. раздел [Получение URL-адресов потоковой передачи](stream-files-tutorial-with-api.md#get-streaming-urls)). Если запустить приложение, один из URL-адресов будет указывать на манифест Smooth Streaming: `https://amsaccount-usw22.streaming.media.azure.net/00000000-0000-0000-0000-0000000000000/ignite.ism/manifest`.<br/>Скопируйте и вставьте URL-адрес в адресную строку браузера. Файл будет скачан. Вы можете открыть его в текстовом редакторе по своему усмотрению.

Пример для REST представлен в статье [Руководство. Отправка, кодирование и потоковая передача видео с помощью REST](stream-files-tutorial-with-rest.md#list-paths-and-build-streaming-urls).

### <a name="monitor-the-bitrate-of-a-video-stream"></a>Отслеживание скорости видеопотока

Для отслеживания скорости видеопотока можно использовать [страницу с демонстрацией Проигрывателя мультимедиа Azure](http://aka.ms/amp). Диагностические сведения отображаются на вкладке **Диагностика** демонстрационной страницы:

![Диагностика Проигрывателя мультимедиа Azure Media Player][amp_diagnostics]

## <a name="defining-filters"></a>Определение фильтров

Существуют два типа фильтров активов. 

* [Фильтры учетных записей](https://docs.microsoft.com/rest/api/media/accountfilters) (глобальные) — применимы к любому ресурсу в учетной записи Служб мультимедиа Azure и действуют в течение всего времени ее существования.
* [Фильтры ресурсов](https://docs.microsoft.com/rest/api/media/assetfilters) (локальные) — применимы только к тому ресурсу, с которым фильтр был связан при создании, и действуют в течение времени существования ресурса. 

[Фильтры учетных записей](https://docs.microsoft.com/rest/api/media/accountfilters) и [ресурсов](https://docs.microsoft.com/rest/api/media/assetfilters) содержат одинаковые свойства для определения и описания фильтра. Во всех случаях, кроме создания **фильтра ресурса**, необходимо указать имя ресурса, с которым требуется связать фильтр.

В зависимости от сценария, вы выбираете наиболее подходящий тип фильтра (фильтр ресурса или учетной записи). Фильтры учетных записей подходят для профилей устройств (фильтрация представлений), в то время как фильтры ресурсов можно использовать для обрезки определенного ресурса.

Для описания фильтров можно использовать указанные ниже свойства. 

|ИМЯ|ОПИСАНИЕ|
|---|---|
|firstQuality|Первая качественная скорость фильтра.|
|presentationTimeRange|Диапазон времени презентации. Это свойство используется для фильтрации начальной и конечной точек манифеста, длины окна презентации и начального положения прямой трансляции. <br/>Дополнительные сведения см. в разделе [PresentationTimeRange](#PresentationTimeRange).|
|tracks|Условия выбора дорожек. Дополнительные сведения см. в разделе [tracks](#tracks).|

### <a name="presentationtimerange"></a>PresentationTimeRange

Это свойство используется с **фильтрами ресурсов**. Не рекомендуем задавать это свойство для **фильтров учетных записей**.

|ИМЯ|ОПИСАНИЕ|
|---|---|
|**endTimestamp**|Абсолютная граница времени окончания. Применяется для видео по запросу (VoD). Во время презентаций в прямом эфире это свойство игнорируется. Оно применяется по окончании презентации, когда поток преобразуется в VoD.<br/><br/>Значение представляет абсолютную конечную точку потока. Оно округляется до начала ближайшей из следующих групп изображений.<br/><br/>Используйте свойства StartTimestamp и EndTimestamp, чтобы обрезать список воспроизведения (манифест). Например, если задать значения StartTimestamp = 40000000 и EndTimestamp = 100000000, создается список воспроизведения, содержащий контент между StartTimestamp и EndTimestamp. Если фрагмент выходит за границы, он будет включен в манифест целиком.<br/><br/>Кроме того, ознакомьтесь с приведенным ниже определением **forceEndTimestamp**.|
|**forceEndTimestamp**|Применяется к фильтрам прямых трансляций.<br/><br/>**forceEndTimestamp** — это логическое значение, указывающее, было ли задано допустимое значение для свойства **endTimestamp**. <br/><br/>Если выбрано значение **true**, следует задать значение **endTimestamp**. Если оно не задано, возвращается ошибка запроса.<br/><br/>Например, если вам нужно определить фильтр, который начинается на 5-минутной отметке входного видео и продолжается до окончания потока, то следует задать для свойства **forceEndTimestamp** значение false и не указывать параметр **endTimestamp**.|
|**liveBackoffDuration**|Применяется только к прямым трансляциям. Это свойство используется для определения позиции при воспроизведении прямой трансляции. С помощью этого свойства можно задержать позицию воспроизведения прямой трансляции и создать на стороне сервера буфер для проигрывателей. Значение LiveBackoffDuration указывается относительно положения прямой трансляции. Максимальная продолжительность задержки потоковой трансляции составляет 300 секунд.|
|**presentationWindowDuration**|Применяется к прямым трансляциям. Свойство **presentationWindowDuration** используется для применения скользящего окна к списку воспроизведения. Например, задайте значение presentationWindowDuration = 1200000000, чтобы применить двухминутное скользящее окно. В список воспроизведения будут включены данные мультимедиа за две минуты до крайней позиции прямой трансляции. Если фрагмент выходит за границы, он будет включен в список воспроизведения целиком. Минимальная продолжительность окна презентации составляет 60 секунд.|
|**startTimestamp**|Применяется к VoD и прямым трансляциям. Значение представляет абсолютную начальную точку потока. Оно округляется до начала ближайшей из следующих групп изображений.<br/><br/>Используйте свойства **startTimestamp** и **endTimestamp**, чтобы обрезать список воспроизведения (манифест). Например, если задать значения startTimestamp = 40000000 и endTimestamp = 100000000, создается список воспроизведения, содержащий контент между StartTimestamp и EndTimestamp. Если фрагмент выходит за границы, он будет включен в манифест целиком.|
|**timescale**|Применяется к VoD и прямым трансляциям. Шкала времени, используемая для указанных выше меток времени и продолжительностей. По умолчанию задана шкала времени 10000000. Можно использовать альтернативную шкалу. Значение по умолчанию составляет 10000000 HNS (сотен наносекунд).|

### <a name="tracks"></a>Дорожки

Вы указываете список условий для фильтрации свойств дорожек (FilterTrackPropertyConditions) с учетом того, какие дорожки вашего потока (прямой трансляции или видео по запросу) следует включить в динамически создаваемый манифест. Фильтры объединяются с помощью логических операций **AND** и **OR**.

Условия фильтрации свойств дорожек описывают типы дорожек, значения (приведенные в таблице ниже) и операции (Equal, NotEqual). 

|ИМЯ|ОПИСАНИЕ|
|---|---|
|**Bitrate**|Фильтрация по скорости дорожки.<br/><br/>Рекомендуемое значение — диапазон скоростей (в битах в секунду). Пример: "0-2427000".<br/><br/>Примечание: можно использовать конкретное значение скорости, например 250000 (бит в секунду), но такой подход не рекомендуется, так как точная скорость может меняться от ресурса к ресурсу.|
|**FourCC**|Фильтрация по значению FourCC дорожки.<br/><br/>Это значение является первым элементом формата кодеков согласно стандарту [RFC 6381](https://tools.ietf.org/html/rfc6381). Сейчас поддерживаются перечисленные ниже кодеки. <br/>Для видео: "avc1", "hev1", "hvc1"<br/>Для звука: "mp4a", "ec-3"<br/><br/>Чтобы определить значения FourCC для дорожек в ресурсе, [получите и просмотрите файл манифеста](#get-and-examine-manifest-files).|
|**Язык**|Фильтрация по языку дорожки.<br/><br/>Это значение представляет собой тег языка, который требуется включить, как указано в стандарте RFC 5646. Например, en.|
|**Имя**|Фильтрация по имени дорожки.|
|**Тип**|Фильтрация по типу дорожки.<br/><br/>Допускаются следующие значения: "video", "audio" и "text".|

### <a name="example"></a>Пример

```json
{
  "properties": {
    "presentationTimeRange": {
      "startTimestamp": 0,
      "endTimestamp": 170000000,
      "presentationWindowDuration": 9223372036854776000,
      "liveBackoffDuration": 0,
      "timescale": 10000000,
      "forceEndTimestamp": false
    },
    "firstQuality": {
      "bitrate": 128000
    },
    "tracks": [
      {
        "trackSelections": [
          {
            "property": "Type",
            "operation": "Equal",
            "value": "Audio"
          },
          {
            "property": "Language",
            "operation": "NotEqual",
            "value": "en"
          },
          {
            "property": "FourCC",
            "operation": "NotEqual",
            "value": "EC-3"
          }
        ]
      },
      {
        "trackSelections": [
          {
            "property": "Type",
            "operation": "Equal",
            "value": "Video"
          },
          {
            "property": "Bitrate",
            "operation": "Equal",
            "value": "3000000-5000000"
          }
        ]
      }
    ]
  }
}
```

## <a name="rendition-filtering"></a>Фильтрация представлений

По выбору можно закодировать актив в несколько профилей кодирования (H.264 Baseline, H.264 High, AACL, AACH, Dolby Digital Plus) и с несколькими значениями скорости потока и соответственно качества. Однако не все клиентские устройства будут поддерживать все профили и скорости потока вашего актива. Например, старые устройства Android поддерживают только профиль H.264 Baseline+AACL. Отправка высокоскоростного потока на устройство, которое не способно показать его преимущества, приводит к трате пропускной способности и вычислительных ресурсов устройства. Такое устройство должно декодировать всю заданную информацию только для того, чтобы уменьшать ее масштаб для отображения.

С помощью динамического манифеста можно создавать профили устройств, например мобильных устройств, консолей, HD/SD и т. д., включая в них дорожки и варианты качества, которые следует сделать частью каждого из профилей.

![Пример фильтрации представлений][renditions2]

В следующем примере использовался кодировщик для кодирования промежуточного актива в семь MP4-видеофайлов стандарта ISO (с разрешением от 180p до 1080p). Закодированный ресурс можно динамически упаковать в любой из следующих потоковых протоколов: HLS, MPEG DASH и Smooth.  В верхней части схемы показан манифест HLS манифеста для актива без фильтров (он содержит все семь представлений).  В левом нижнем углу показан манифест HLS, к которому был применен фильтр с именем ott. Фильтр ott предписывает удалить все варианты скорости потока ниже 1 Мбит/с, что ведет к исключению двух нижних уровней качества. В правом нижнем углу показан манифест HLS, к которому был применен фильтр с именем mobile. Фильтр mobile предписывает удалить представления, где разрешение больше 720p, что ведет к исключению двух представлений с разрешением 1080p.

![Фильтрация представлений][renditions1]

## <a name="removing-language-tracks"></a>Удаление языковых дорожек
Активы могут содержать аудиодорожки на нескольких языках, например английском, испанском, французском и т. д. Как правило, пакет SDK проигрывателя управляет выбором аудиодорожки по умолчанию и доступными на выбор пользователя аудиодорожками. Такие пакеты SDK для проигрывателей разрабатывать сложно, они требуют разных реализаций для разных платформ проигрывателей на конкретных устройствах. Кроме того, на некоторых платформах API-интерфейсы проигрывателей ограничены и не включают функции выбора звука, когда пользователи не могут выбрать или изменить установленную по умолчанию звуковую дорожку. С помощью фильтров активов можно управлять поведением проигрывателей, создавая фильтры с включением только нужных языков аудио.

![Фильтрация языковых дорожек][language_filter]

## <a name="trimming-start-of-an-asset"></a>Обрезка начала актива
При большинстве событий потоковой трансляции в реальном времени операторы проводят процедуры тестирования до фактического события. Например, перед началом события они могут включить заставку: "Программа начнется очень скоро". При архивировании программы данные проверок и заставок также будут архивированы и включены в представление. Однако эту информацию не следует отображать клиентам. С помощью динамического манифеста можно создать фильтр времени начала и удалить ненужные данные из манифеста.

![Начало обрезки][trim_filter]

## <a name="creating-subclips-views-from-a-live-archive"></a>Создание субклипов (представлений) из текущего архива
Многие текущие события являются длительными, и их текущий архив может включать в себя несколько событий. После окончания текущего события вещателям может потребоваться разбить текущий архив на логические последовательности начала и остановки программ. Затем нужно опубликовать эти виртуальные программы отдельно без последующей обработки текущего архива и без создания отдельных активов (что не позволит воспользоваться преимуществами существующих кэшированных фрагментов в CDN). Примерами таких виртуальных программ являются четверти при игре в американский футбол или баскетбол, иннинги в бейсболе или отдельные события любой программы о спорте.

С помощью динамического манифеста можно создавать фильтры с указанием времени начала и окончания, а также создавать виртуальные представления поверх текущего архива. 

![Фильтр субклипа][subclip_filter]

Фильтрованный архив:

![Лыжный спорт][skiing]

## <a name="adjusting-presentation-window-dvr"></a>Настройка окна презентации (DVR)
В настоящее время службы мультимедиа Azure поддерживают циклический архив, продолжительность которого можно настроить от 5 минут до 25 часов. Фильтрация манифеста позволяет создать скользящее окно DVR поверх архива, без удаления медиаданных. Есть множество сценариев, где вещателям требуется предоставить ограниченное окно DVR, которое перемещается вместе с текущей границей, и в то же время поддерживать более крупное окно архивации. Вещателю может понадобиться использовать данные, находящиеся за пределами окна DVR, для выделения клипов, или же предоставлять разные окна DVR для различных устройств. Например, большинство мобильных устройств не обрабатывает большие окна DVR (для мобильных устройств можно установить окно DVR продолжительностью в две минуты, а для настольных клиентов — один час).

![Окно DVR][dvr_filter]

## <a name="adjusting-livebackoff-live-position"></a>Настройка LiveBackoff (динамической позиции)
Фильтрация манифеста позволяет удалить несколько секунд с динамической границы текущей программы. Это позволяет вещателям просматривать представление в точке предварительной публикации и создавать точки вставки рекламы до того, как зрители получат потоковую передачу (резерв составляет 30 секунд). Затем вещатели могут передавать рекламу на клиентские платформы, располагая временем для получения и обработки информации до появления возможности для рекламы.

Кроме поддержки рекламы параметр LiveBackoff можно использовать для регулирования позиции представлений, благодаря чему даже если клиенты переместятся и выйдут из зоны покрытия, они все равно смогут получать фрагменты с сервера вместо ошибок HTTP 404 или 412.

![livebackoff_filter][livebackoff_filter]

## <a name="combining-multiple-rules-in-a-single-filter"></a>Объединение нескольких правил в одном фильтре
В одном фильтре можно объединить несколько правил фильтрации. В качестве примера можно определить правило диапазона для удаления заставок из текущего архива, а также для фильтрации доступных скоростей потока. При применении нескольких правил фильтрации конечным результатом является объединение по пересечению всех правил.

![multiple-rules][multiple-rules]

## <a name="combining-multiple-filters-filter-composition"></a>Объединение нескольких фильтров (сложение фильтров)

Кроме того, вы можете объединять несколько фильтров в одном URL-адресе. 

В следующем сценарии показано, для чего могут потребоваться подобные фильтры:

1. При необходимости отфильтровать качество видео для мобильных устройств, например, Android или iPAD (для ограничения качества видео). Чтобы удалить содержимое нежелательного качества, вы могли бы создать фильтр учетной записи, который подходит для профилей устройств. Фильтры учетных записей можно использовать для всех ресурсов в одной учетной записи служб мультимедиа без каких-либо дополнительных связей. 
2. При необходимости обрезать время начала и окончания ресурс-контейнера. Для этого можно создать фильтр ресурсов и задать время начала и окончания. 
3. При необходимости объедините оба этих фильтра. Без объединения вам потребуется добавить фильтрацию качества в фильтр обрезки, что может затруднить использование фильтра.

Для объединения фильтров необходимо указать их имена в URL-адресе манифеста или списка воспроизведения через точку с запятой. Допустим, у вас есть фильтр качества с именем *MyMobileDevice* и фильтр *MyStartTime* для выбора конкретного времени начала. Их можно объединить следующим образом:

Вы можете объединить до трех фильтров. 

Дополнительную информацию см. в [этом](https://azure.microsoft.com/blog/azure-media-services-release-dynamic-manifest-composition-remove-hls-audio-only-track-and-hls-i-frame-track-support/) блоге.

## <a name="considerations-and-limitations"></a>Ограничения и рекомендации

- Для фильтра VoD не следует задавать значения **forceEndTimestamp**, **presentationWindowDuration** и **liveBackoffDuration**. Они используются только для фильтрации прямых трансляций. 
- Динамический манифест работает в пределах GOP (по ключевым кадрам), поэтому обрезка производится с точностью GOP. 
- Одно и то же имя фильтра можно использовать для фильтров учетных записей и ресурсов. Фильтры ресурсов имеют более высокий приоритет и переопределяют фильтры учетных записей.
- При обновлении фильтра может понадобиться до 2 минут на обновление правил конечной точкой потоковой передачи. Если содержимое было обработано с помощью каких-либо фильтров (и кэшировано на прокси-серверах и в кэшах CDN), обновление этих фильтров может привести к сбоям проигрывателя. Рекомендуется очистить кэш после обновления фильтра. Если такой вариант невозможен, рассмотрите возможность использования другого фильтра.
- Клиентам необходимо вручную скачать манифест и получить точное значение startTimestamp и шкалу времени.
    
    - Чтобы определить свойства дорожек в ресурсе, [получите и просмотрите файл манифеста](#get-and-examine-manifest-files).
    - Формула для установки свойств меток времени в фильтрах ресурсов: <br/>startTimestamp = &lt;время начала в манифесте&gt; +  &lt;ожидаемое начальное время фильтра в секундах&gt;*шкала времени


## <a name="next-steps"></a>Дополнительная информация

В указанных ниже статьях показано, как создавать фильтры программным способом.  

- [Create filters with REST APIs](filters-dynamic-manifest-rest-howto.md) (Создание фильтров с помощью интерфейсов REST API)
- [Создание фильтров с помощью .NET](filters-dynamic-manifest-dotnet-howto.md)
- [Create filters with CLI](filters-dynamic-manifest-cli-howto.md) (Создание фильтров с помощью .NET)

[renditions1]: ./media/filters-dynamic-manifest-overview/media-services-rendition-filter.png
[renditions2]: ./media/filters-dynamic-manifest-overview/media-services-rendition-filter2.png

[rendered_subclip]: ./media/filters-dynamic-manifests/media-services-rendered-subclip.png
[timeline_trim_event]: ./media/filters-dynamic-manifests/media-services-timeline-trim-event.png
[timeline_trim_subclip]: ./media/filters-dynamic-manifests/media-services-timeline-trim-subclip.png

[multiple-rules]:./media/filters-dynamic-manifest-overview/media-services-multiple-rules-filters.png

[subclip_filter]: ./media/filters-dynamic-manifest-overview/media-services-subclips-filter.png
[trim_event]: ./media/filters-dynamic-manifests/media-services-timeline-trim-event.png
[trim_subclip]: ./media/filters-dynamic-manifests/media-services-timeline-trim-subclip.png
[trim_filter]: ./media/filters-dynamic-manifest-overview/media-services-trim-filter.png
[redered_subclip]: ./media/filters-dynamic-manifests/media-services-rendered-subclip.png
[livebackoff_filter]: ./media/filters-dynamic-manifest-overview/media-services-livebackoff-filter.png
[language_filter]: ./media/filters-dynamic-manifest-overview/media-services-language-filter.png
[dvr_filter]: ./media/filters-dynamic-manifest-overview/media-services-dvr-filter.png
[skiing]: ./media/filters-dynamic-manifest-overview/media-services-skiing.png
[amp_diagnostics]: ./media/filters-dynamic-manifest-overview/amp_diagnostics.png
