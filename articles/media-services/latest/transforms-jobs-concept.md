---
title: Преобразования и задания в Службах мультимедиа Azure | Документация Майкрософт
description: При использовании Служб мультимедиа необходимо создать преобразование, чтобы описать правила или спецификации для обработки видео. В данной статье приводится обзор преобразования и способы его использования.
services: media-services
documentationcenter: ''
author: Juliako
manager: femila
editor: ''
ms.service: media-services
ms.workload: ''
ms.topic: article
ms.date: 02/19/2019
ms.author: juliako
ms.openlocfilehash: d621afd682e6040179777f4cd6d991ff31acb5a3
ms.sourcegitcommit: 6cab3c44aaccbcc86ed5a2011761fa52aa5ee5fa
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/20/2019
ms.locfileid: "56445497"
---
# <a name="transforms-and-jobs"></a>Преобразования и задания
 
[Преобразования](https://docs.microsoft.com/rest/api/media/transforms) можно использовать для настройки общих задач кодирования или анализа видеоматериалов. Каждое **преобразование** описывает набор инструкций (или рабочий процесс задач) для обработки видео- и аудиофайлов. Одно преобразование может применять несколько правил. Например, преобразование может указать, что каждое видео кодируется в MP4-файл с заданной скоростью и что эскиз будет создан из первого кадра видео. Необходимо добавить одну запись TransformOutput для каждого правила, которое требуется включить в преобразование. Можно создать преобразования в учетной записи Служб мультимедиа с помощью API Служб мультимедиа версии 3 или любого из опубликованных пакетов SDK. Так как API Служб мультимедиа версии 3 управляется с помощью Azure Resource Manager, вы можете использовать шаблоны Resource Manager для создания и развертывания преобразований в учетной записи Служб мультимедиа. Управление доступом на основе ролей можно использовать для блокировки доступа к преобразованиям.

Операция Update сущности [Transform](https://docs.microsoft.com/rest/api/media/transforms) предназначена для внесения изменений в описание или приоритеты базовой сущности TransformOutputs. Рекомендуется выполнять такие операции обновления после завершения всех текущих заданий. Если вы хотите перезаписать набор инструкций, нужно создать новое преобразование.

Объект [задание](https://docs.microsoft.com/rest/api/media/jobs) содержит фактический запрос к Службам мультимедиа, который применяет **преобразование** к указанному видео- и (или) аудиосодержимому. После создания преобразования можно отправлять задания с помощью API Служб мультимедиа или любого из опубликованных пакетов SDK. **Задание** указывает такую информацию, как расположение входного и выходного видео. Расположение входного видео можно указать с помощью: URL-адресов HTTPS, URL-адресов SAS или [ресурсов](https://docs.microsoft.com/rest/api/media/assets). Ход выполнения и состояние заданий можно получить, отслеживая события с помощью Сетки событий. Дополнительные сведения см. в статье [Создание и мониторинг событий Служб мультимедиа Azure с помощью Сетки событий и Azure CLI](job-state-events-cli-how-to.md).

Операция Update сущности [Job](https://docs.microsoft.com/rest/api/media/jobs) может использоваться для изменения свойств *description*и *priority* после отправки задания. Изменение свойства *priority* вступает в силу только в том случае, если задание все еще находится в очереди. Если задание приступило к обработке или завершено, изменение приоритета не оказывает какого-либо влияния.

Рабочий процесс выполнения преобразований и заданий показан на схеме.

![Преобразования](./media/encoding/transforms-jobs.png)

> [!NOTE]
> Свойства сущностей **Transform** и **Job** типа Datetime всегда задаются в формате UTC.

## <a name="typical-workflow"></a>Стандартный рабочий процесс

1. Создайте преобразование. 
2. Отправьте задания в преобразование. 
3. Выведите список преобразований. 
4. Удалите преобразование, если не планируете использовать его в будущем. 

### <a name="example"></a>Пример

Предположим, что требуется извлечь первый кадр всех видео в качестве эскиза. Ниже приведены действия по выполнению этого процесса. 

1. Определите правило для обработки (набор инструкций). Например, используйте первый кадр видео в качестве эскиза. 
2. Для каждого видео следует сообщить службе: 
    1. расположение видео;  
    2. место для записи выходных данных (например, эскиза). 

Шаблон **Преобразования** позволяет создать набор инструкций один раз (шаг 1) и отправить задания с использованием этой инструкции (шаг 2).

## <a name="job-error-codes"></a>Коды ошибок задания

См. статью о [кодах ошибок](https://docs.microsoft.com/rest/api/media/jobs/get#joberrorcode).

## <a name="paging"></a>Разбиение по страницам

Ознакомьтесь с разделом [Фильтрация, упорядочивание и разбиение по страницам сущностей Служб мультимедиа](entities-overview.md).

## <a name="configure-media-reserved-units"></a>Настройка зарезервированных единиц мультимедиа

Для заданий анализа аудио и видео, активируемых Службами мультимедиа версии 3 или Индексатором видео, настоятельно рекомендуется подготовить10 зарезервированных единиц мультимедиа (MRU) типа S3 в учетной записи. Если вам требуется более 10 единиц MRU S3, отправьте запрос в службу поддержки с помощью [портала Azure](https://portal.azure.com/).

Дополнительные сведения см. в разделе [Масштабирование при обработке мультимедиа](media-reserved-units-cli-how-to.md).

## <a name="next-steps"></a>Дополнительная информация

- [Руководство Отправка, кодирование и потоковая передача видео с помощью .NET](stream-files-tutorial-with-api.md)
- [Руководство Анализ видео с помощью Служб мультимедиа версии 3 и .NET](analyze-videos-tutorial-with-api.md)
