---
title: Кодирование в облаке с помощью Служб мультимедиа — Azure | Документация Майкрософт
description: В этой статье описывается процесс кодирования при использовании Служб мультимедиа Azure
services: media-services
documentationcenter: ''
author: Juliako
manager: femila
editor: ''
ms.service: media-services
ms.workload: ''
ms.topic: article
ms.date: 02/27/2019
ms.author: juliako
ms.custom: seodec18
ms.openlocfilehash: de2c60d4449762c4a8fcc3e2f486130f3df37c7c
ms.sourcegitcommit: ad019f9b57c7f99652ee665b25b8fef5cd54054d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/02/2019
ms.locfileid: "57243625"
---
# <a name="encoding-with-media-services"></a>Кодирование с помощью Служб мультимедиа

Службы мультимедиа Azure позволяет кодирования файлов мультимедиа высокого качества в файлы MP4 с переменной скоростью, поэтому содержимое может воспроизводиться для широкого круга обозревателей и устройств. Успешно задания кодирования служб мультимедиа создает выходной ресурс-контейнер с набор мультискоростных MP4-файлов и потоковой передачи файлов конфигурации. Файлы конфигурации включают ISM-файла, .ismc, .mpi и другие файлы, которые не следует изменять. После завершения задания кодирования, можно воспользоваться преимуществами [динамической упаковки](dynamic-packaging-overview.md) и начать потоковую передачу.

Чтобы сделать видео в выходные данные средства, доступные клиентам для воспроизведения, необходимо создать **указатель потоковой передачи** и построения потоковой передачи URL-адреса. Исходя из формата, указанного в манифесте, ваши клиенты будут получать поток в выбранный протокол.

На следующей схеме показана потоковой передачи по требованию с помощью динамической упаковки рабочего процесса.

![Динамическая упаковка](./media/dynamic-packaging-overview/media-services-dynamic-packaging.svg)

В этой статье содержатся рекомендации о том, как закодировать содержимое с помощью Служб мультимедиа версии 3.

## <a name="transforms-and-jobs"></a>Преобразования и задания

Для кодирования с помощью Служб мультимедиа версии 3 необходимо создать [преобразование](https://docs.microsoft.com/rest/api/media/transforms) и [задание](https://docs.microsoft.com/rest/api/media/jobs). Преобразование определяет инструкции для параметров кодирования и выходных данных, а задание является экземпляром инструкций. Дополнительные сведения см. в статье [Преобразования и задания](transforms-jobs-concept.md).

При кодировании с помощью Служб мультимедиа используются предустановки. На их основе кодировщик обрабатывает входные файлы мультимедиа. Например, можно указать разрешение видео и число аудиоканалов для закодированного содержимого. 

Можно быстро приступить к работе, используя одну из рекомендуемых встроенных предустановок, основанных на передовых отраслевых рекомендациях. Можно также создать пользовательскую предустановку в соответствии с требованиями сценария или устройства. Дополнительные сведения см. в статье [Кодирование с помощью пользовательского преобразования](customize-encoder-presets-how-to.md). 

Начиная с января 2019 г., при кодировании с помощью Media Encoder Standard для создания файлов MP4 создается и добавляется в выходной ресурс новый MPI-файл. Этот MPI-файл предназначен для повышения производительности [динамической упаковки](dynamic-packaging-overview.md) и потоковой передачи.

> [!NOTE]
> Не следует изменять или удалять MPI-файл, а также ваша служба не должна зависеть от существования (или отсутствия) такого файла.

## <a name="built-in-presets"></a>Встроенные предустановки

В настоящее время Службы мультимедиа поддерживают следующие встроенные предустановки кодирования:  

### <a name="builtinstandardencoderpreset-preset"></a>Предустановка BuiltInStandardEncoderPreset

[BuiltInStandardEncoderPreset](https://docs.microsoft.com/rest/api/media/transforms/createorupdate#builtinstandardencoderpreset) задает встроенную предустановку для кодирования входящего видео с помощью кодировщика категории "Стандартный". 

В настоящее время поддерживаются приведенные ниже предустановки.

- **EncoderNamedPreset.AdaptiveStreaming** (рекомендуется). Дополнительные сведения см. в статье [Кодирование с помощью автоматически созданной схемы скоростей](autogen-bitrate-ladder.md).
- **EncoderNamedPreset.AACGoodQualityAudio**. Данная предустановка создает один MP4-файл, содержащий только закодированный стереозвук со скоростью 192 Кбит/с.
- **EncoderNamedPreset.H264MultipleBitrate1080p**. Данная предустановка создает набор из 8 MP4-файлов с одинаковыми группами GOP, скоростями 400–6000 Кбит/с и стереофоническим звуком в формате AAC. Разрешение — 360–1080 пикселей.
- **EncoderNamedPreset.H264MultipleBitrate720p**. Данная предустановка создает набор из 6 MP4-файлов с одинаковыми группами GOP, скоростями 400–3400 Кбит/с и стереофоническим звуком в формате AAC. Разрешение — 360–720 пикселей.
- **EncoderNamedPreset.H264MultipleBitrateSD**. Данная предустановка создает набор из 5 MP4-файлов с одинаковыми группами GOP, скоростями 400–1600 Кбит/с и стереофоническим звуком в формате AAC. Разрешение — 360–480 пикселей.<br/><br/>Дополнительные сведения см. в статье [Руководство. Отправка, кодирование и потоковая передача видео с помощью API](stream-files-tutorial-with-api.md).

### <a name="standardencoderpreset-preset"></a>Предустановка StandardEncoderPreset

[StandardEncoderPreset](https://docs.microsoft.com/rest/api/media/transforms/createorupdate#standardencoderpreset) описывает параметры, используемые при кодировании входящего видео с помощью кодировщика категории "Стандартный". Эту предустановку следует использовать при настройке предустановок преобразования. 

#### <a name="custom-presets"></a>Пользовательские предустановки

Службы мультимедиа полностью поддерживают настройку всех значений в предустановках в соответствии с конкретными требованиями к кодированию. Предустановка **StandardEncoderPreset** используется при настройке предустановок преобразования. Подробные описания и примеры см. в статье о [настройке предустановок кодировщика](customize-encoder-presets-how-to.md).

## <a name="scaling-encoding-in-v3"></a>Масштабирование кодирования в версии 3

Масштабирование обработки мультимедиа см. в разделе [масштабирование с помощью CLI](media-reserved-units-cli-how-to.md).

## <a name="next-steps"></a>Дальнейшие действия

* [Кодирование из URL-адрес HTTPS, используя встроенные стили](job-input-from-http-how-to.md)
* [Кодирование локальный файл, используя встроенные стили](job-input-from-local-file-how-to.md)
* [Создать пользовательскую предустановку для конкретных требований сценария или устройства](customize-encoder-presets-how-to.md)
* [Руководство. Отправка, кодирование и потоковая передача видео с помощью API](stream-files-tutorial-with-api.md)
