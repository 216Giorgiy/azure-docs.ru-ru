---
title: Сведения о локальных кодировщиках потоковой трансляции, рекомендованных Службами мультимедиа Azure | Документация Майкрософт
description: Узнайте о локальных кодировщиках потоковой трансляции, рекомендованных Службами мультимедиа
services: media-services
keywords: encoding;encoders;media
author: johndeu
manager: johndeu
ms.author: johndeu
ms.date: 01/17/2019
ms.topic: article
ms.service: media-services
ms.openlocfilehash: c3e42ba9fe84ded8c60fc71f19de785945852116
ms.sourcegitcommit: de32e8825542b91f02da9e5d899d29bcc2c37f28
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/02/2019
ms.locfileid: "55656674"
---
# <a name="recommended-live-streaming-encoders"></a>Мы рекомендуем использовать кодировщики потоковой трансляции

В Службах мультимедиа [трансляция](https://docs.microsoft.com/rest/api/media/liveevents) (канал) представляет собой конвейер для обработки содержимого потоковой трансляции. Трансляция получает входные потоки одним из двух способов.

* Локальный динамический кодировщик передает содержимое в формате RTMP или Smooth Streaming (фрагментированный MP4-файл) с несколькими скоростями в трансляцию, для которой не включена поддержка кодирования в реальном времени с помощью Служб мультимедиа. Полученные потоки передаются через трансляции без дальнейшей обработки. Этот способ называется **сквозной передачей**. Динамический кодировщик может передавать поток с единой скоростью в сквозной канал. Но применять такую конфигурацию не рекомендуется, так как она не позволяет использовать потоковую передачу с переменной скоростью для клиента.

  > [!NOTE]
  > Использование сквозной передачи является наиболее экономичным способом потоковой передачи в реальном времени.

* Локальный динамический кодировщик передает односкоростной поток в трансляцию, которая может осуществлять кодирование в реальном времени с помощью Служб мультимедиа, в одном из следующих форматов: RTMP или Smooth Streaming (фрагментированный формат MP4). Затем трансляция выполняет кодирование в реальном времени входящего односкоростного потока в видеопоток с несколькими скоростями (адаптивный алгоритм).

Подробные сведения о кодировании в реальном времени с помощью Служб мультимедиа см. в статье [Потоковая трансляция в Службах мультимедиа Azure версии 3](live-streaming-overview.md).

## <a name="live-encoders-that-output-rtmp"></a>Динамические кодировщики, выдающие RTMP

Для Служб мультимедиа рекомендуется использовать один из следующих динамических кодировщиков, которые выдают содержимое в формате RTMP. Поддерживаемые схемы URL-адрес — `rtmp://` или `rtmps://`.

> [!NOTE]
 > При потоковой передаче через RTMP проверьте параметры брандмауэра или прокси-сервера, чтобы убедиться, что исходящие TCP-порты 1935 и 1936 открыты.<br/>
 При потоковой передаче через RTMPS проверьте параметры брандмауэра или прокси-сервера, чтобы убедиться, что исходящие TCP-порты 2935 и 2936 открыты.

- Adobe Flash Media Live Encoder 3.2;
- Haivision KB
- Haivision Makito X HEVC;
- OBS Studio
- Switcher Studio (iOS)
- Telestream Wirecast 8.1+
- Telestream Wirecast S
- Teradek Slice 756;
- TriCaster 8000;
- Tricaster Mini HD-4.
- VMIX
- xStream

## <a name="live-encoders-that-output-fragmented-mp4"></a>Динамические кодировщики, выдающие фрагментированный MP4

Для Служб мультимедиа рекомендуется использовать один из следующих динамических кодировщиков, которые выдают потоковую передачу Smooth Streaming (фрагментированного MP4) с несколькими скоростями. Поддерживаемые схемы URL-адрес — `http://` или `https://`.

- Ateme TITAN Live;
- Cisco Digital Media Encoder 2200;
- Elemental Live
- Envivio 4Caster C4 Gen III;
- Imagine Communications Selenio MCP3;
- Media Excel Hero Live и Hero 4K (UHD/HEVC)

## <a name="configuring-on-premises-live-encoder-settings"></a>Настройка параметров локального динамического кодировщика

Сведения о том, какие параметры являются допустимыми для вашего типа трансляции, см. в разделе [Сравнение типов событий потоковой трансляции](live-event-types-comparison.md).

### <a name="playback-requirements"></a>Требования к воспроизведению

Для воспроизведения содержимого требуется наличие аудиопотока и видеопотока. Воспроизведение видео без аудиопотока не поддерживается.

### <a name="configuration-tips"></a>Советы по настройке

- По возможности используйте проводное подключение к Интернету.
- Для получения необходимой пропускной способности рекомендуется удвоить скорость потоковой передачи. Хотя это требование не является обязательным, оно поможет уменьшить влияние перегрузки сети на пропускную способность.
- При использовании программных кодировщиков закройте все ненужные программы.
- Не изменяйте конфигурацию кодировщика после начала отправки. Это оказывает отрицательное влияние на событие и может привести к его нестабильной работе. 
- Выделите достаточно времени для настройки события. Для крупномасштабных событий рекомендуется начать настройку за час до события.

## <a name="how-to-become-an-on-premises-encoder-partner"></a>Как стать партнером по локальным кодировщикам

Службы мультимедиа Azure помогают партнеру по локальным кодировщикам продвигать продукты, рекомендуя кодировщик корпоративным клиентам. Чтобы стать партнером по локальным кодировщикам, необходимо проверить совместимость вашего локального кодировщика со Службами мультимедиа. Для этого выполните следующие проверки.

### <a name="pass-through-live-event-verification"></a>Проверка сквозной трансляции

1. В своей учетной записи Служб мультимедиа убедитесь, что **конечная точка потоковой передачи** запущена. 
2. Создайте и запустите **сквозную** трансляцию. <br/> Дополнительные сведения см. в статье [Состояния компонента LiveEvent и выставление счетов за его использование](live-event-states-billing.md).
3. Получите URL-адреса приема и настройте использование URL-адреса в локальном кодировщике для отправки трансляции с несколькими скоростями в Службы мультимедиа.
4. Получите URL-адрес для предварительного просмотра, чтобы проверить получение входных данных от кодировщика.
5. Создание объекта **ресурса**.
6. Создание компонента **выходных данных прямой трансляции** с использованием имени созданного ресурса.
7. Создайте **указатель потоковой передачи** со встроенным типом **политики потоковой передачи**.
8. Создайте список путей на основе **потокового указателя**, чтобы получать URL-адреса для использования.
9. Получите имя узла для **конечной точки потоковой передачи**, с которой должна идти трансляция.
10. Объедините URL-адрес (полученный на шаге 8) с именем узла (полученным на шаге 9), чтобы получить полный URL-адрес.
11. Запустите динамический кодировщик примерно на 10 минут.
12. Остановите событие потоковой трансляции. 
13. Используйте проигрыватель, например [Проигрыватель мультимедиа Azure](https://ampdemo.azureedge.net/azuremediaplayer.html), чтобы просмотреть архивные ресурсы и проверить наличие ошибок воспроизведения для всех уровней качества (или просмотрите и проверьте ресурсы по URL-адресу предварительного просмотра во время сеанса трансляции).
14. Запишите идентификатор ресурса, опубликованный URL-адрес потоковой передачи для динамического архива, а также настройки и версию, которые использовались в динамическом кодировщике.
15. Сбрасывайте состояние трансляции после создания каждого примера.
16. Повторите шаги 5–15 для всех конфигураций, поддерживаемых вашим кодировщиком (с сообщениями о рекламе, субтитрами, различными скоростями кодирования и без этих настроек).

### <a name="live-encoding-live-event-verification"></a>Проверка трансляции с кодированием в реальном времени

1. В своей учетной записи Служб мультимедиа убедитесь, что **конечная точка потоковой передачи** запущена. 
2. Создайте и запустите трансляцию с **кодированием в реальном времени**. <br/> Дополнительные сведения см. в статье [Состояния компонента LiveEvent и выставление счетов за его использование](live-event-states-billing.md).
3. Получите URL-адреса приема и настройте кодировщик для отправки динамического потока с одной скоростью в Службы мультимедиа.
4. Получите URL-адрес для предварительного просмотра, чтобы проверить получение входных данных от кодировщика.
5. Создание объекта **ресурса**.
6. Создание компонента **выходных данных прямой трансляции** с использованием имени созданного ресурса.
7. Создайте **указатель потоковой передачи** со встроенным типом **политики потоковой передачи**.
8. Создайте список путей на основе **потокового указателя**, чтобы получать URL-адреса для использования.
9. Получите имя узла для **конечной точки потоковой передачи**, с которой должна идти трансляция.
10. Объедините URL-адрес (полученный на шаге 8) с именем узла (полученным на шаге 9), чтобы получить полный URL-адрес.
11. Запустите динамический кодировщик примерно на 10 минут.
12. Остановите событие потоковой трансляции.
13. Используйте проигрыватель, например [Проигрыватель мультимедиа Azure](https://ampdemo.azureedge.net/azuremediaplayer.html), чтобы просмотреть архивные ресурсы и проверить наличие ошибок воспроизведения для всех уровней качества (или просмотрите и проверьте ресурсы по URL-адресу предварительного просмотра во время сеанса трансляции).
14. Запишите идентификатор ресурса, опубликованный URL-адрес потоковой передачи для динамического архива, а также настройки и версию, которые использовались в динамическом кодировщике.
15. Сбрасывайте состояние трансляции после создания каждого примера.
16. Повторите шаги 5–15 для всех конфигураций, поддерживаемых вашим кодировщиком (с сообщениями о рекламе, субтитрами, различными скоростями кодирования и без этих настроек).

### <a name="longevity-verification"></a>Проверка срока службы

Инструкции те же, что и для [проверки сквозной трансляции](#pass-through-live-event-verification), за исключением шага 11. <br/>Запустите динамический кодировщик не на 10 минут, а на неделю или на более длительный период. Используйте проигрыватель, например [Проигрыватель мультимедиа Azure](https://ampdemo.azureedge.net/azuremediaplayer.html), чтобы время от времени смотреть потоковую трансляцию (или архивный ресурс) и проверять видео на наличие видимых ошибок.

### <a name="email-your-recorded-settings"></a>Отправка записанных параметров по электронной почте

Наконец, отправьте свои записанные настройки и параметры динамического архива в Службы мультимедиа Azure по адресу amsstreaming@microsoft.com ​​в качестве уведомления о том, что все проверки для самопроверки пройдены. Кроме того, включите вашу контактную информацию для любых последующих действий. С любыми вопросами, касающимися этого процесса, вы можете связаться с командой Службы мультимедиа Azure.

## <a name="next-steps"></a>Дополнительная информация

[Потоковая трансляция в Службах мультимедиа Azure версии 3](live-streaming-overview.md)
