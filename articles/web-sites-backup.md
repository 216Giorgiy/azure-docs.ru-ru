<properties 
	pageTitle="Резервное копирование веб-сайтов Azure" 
	description="Информация о создании резервных копий веб-сайтов Azure." 
	services="web-sites" 
	documentationCenter="" 
	authors="cephalin" 
	manager="wpickett" 
	editor="mollybos"/>

<tags 
	ms.service="web-sites" 
	ms.workload="web" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="9/19/2014" 
	ms.author="cephalin"/>

#Резервное копирование веб-сайтов Azure

Возможность резервного копирования и восстановления веб-сайтов Azure позволяет легко создавать резервные копии веб-сайта в ручном или автоматическом режиме. Можно восстановить предыдущее состояние веб-сайта или создать новый веб-сайт на основе одной из резервных копий исходного сайта. 


Информацию о восстановлении веб-сайта Azure из резервной копии см. в разделе [Восстановление веб-сайта Azure](http://www.windowsazure.com/ru-ru/documentation/articles/web-sites-restore/).

##Содержание

- [Автоматическое и простое резервное копирование (видео)](#video)
- [Что включается в резервную копию](#whatsbackedup)
- [Требования и ограничения](#requirements)
- [Создание резервной копии вручную](#manualbackup)
- [Настройка автоматически создаваемых резервных копий](#automatedbackups)
- [Хранение резервных копий](#aboutbackups)
- [Примечания](#notes)
- [Дальнейшие действия](#nextsteps)
	- [Подробнее об учетных записях хранения](#moreaboutstorage)

<a name="video"></a>
##Автоматическое и простое резервное копирование (видео)

В этом видео Эдуардо Лауреано (Eduardo Laureano) и Скотт Хансельман (Scott Hanselman) знакомят зрителей с резервным копированием веб-сайтов Azure. (Длительность: 11:43)  

> [AZURE.VIDEO azure-websites-automatic-and-easy-backup]

<a name="whatsbackedup"></a>
##Что включается в резервную копию 
В резервные копии веб-сайтов Azure включаются следующие сведения:

* Конфигурация веб-сайта
* Файловое содержимое веб-сайта
* Подключенные к сайту базы данных MySQL или SQL Server (вы можете выбрать конкретные базы для включения в резервную копию)

Для этих данных осуществляется резервное копирование в указанную учетную запись хранения Azure. 

> [AZURE.NOTE] Каждая резервная копия является полной автономной копией веб-сайта, а не добавочным обновлением.

<a name="requirements"></a>
##Требования и ограничения

* Компонент резервного копирования и восстановления требует нахождения сайта на уровне Standard. Дополнительную информацию о масштабировании веб-сайта уровня Standard см. в разделе [Как масштабировать веб-сайты](http://www.windowsazure.com/ru-ru/documentation/articles/web-sites-scale/). 

* Компоненту резервного копирования и восстановления требуется учетная запись хранения Azure, которая должна принадлежать к той же подписке, что и веб-сайт, для которого вы собираетесь выполнить резервное копирование. Если у вас еще нет учетной записи хранения, можно создать ее, нажав кнопку **Хранилище** (значок сетки) в левой части портала Azure, а затем выбрав **Создать** в расположенной внизу панели команд. Дополнительную информацию об учетных записях хранения Azure см по [ссылкам](#moreaboutstorage) в конце этой статьи.

<a name="manualbackup"></a>
## Создание резервной копии вручную

1. На портале Azure перейдите на вкладку **Резервные копии** для своего сайта.
	
	![Страница резервных копий][ChooseBackupsPage]
	
2. Выберите учетную запись хранения, для которой требуется выполнить резервное копирование веб-сайта. Эта учетная запись хранения должна принадлежать к той же подписке, что и веб-сайт, для которого вы собираетесь выполнить резервное копирование.
	
	![Выбор учетной записи хранения][ChooseStorageAccount]
	
3. В области **Включенные базы данных** выберите базы данных, подключенные к веб-сайту (SQL Server или MySQL), для которого вы собираетесь выполнить резервное копирование. 
	
	![Выбор включаемых баз данных][IncludedDatabases]

	> [AZURE.NOTE] 	Чтобы база данных появилась в этом списке, ее строка подключения должна присутствовать в разделе **Строки подключения** на вкладке "Настройка" портала.
	
4. На панели команд щелкните **Создать резервную копию**.
	
	![Кнопка BackUpNow][BackUpNow]
	
	Во время резервного копирования отображается сообщение о ходе его выполнения:
	
	![Сообщение о ходе выполнения резервного копирования][BackupProgress]
	
В любое время можно выполнить резервное копирование вручную. Во время предварительного просмотра за 24-часовой период вручную можно сделать не более 2 резервных копий (возможны изменения).  

<a name="automatedbackups"></a>
## Настройка автоматически создаваемых резервных копий

1. На странице "Резервные копии" установите для параметра **Автоматическая архивация** значение "ВКЛ.".
	
	![Включение автоматически создаваемых резервных копий][SetAutomatedBackupOn]
	
2. Выберите учетную запись хранения, для которой требуется выполнить резервное копирование веб-сайта. Эта учетная запись хранения должна принадлежать к той же подписке, что и веб-сайт, для которого вы собираетесь выполнить резервное копирование.
	
	![Выбор учетной записи хранения][ChooseStorageAccount]
	
3. В поле **Частота** укажите, как часто требуется осуществлять автоматическое резервное копирование. (Во время действия предварительной версии в качестве единицы измерения времени можно использовать только дни.)
	
	![Выбор частоты резервного копирования][Frequency]
	
	Число дней должно быть в диапазоне от 1 до 90 включительно (от одного раза в день до одного раза каждые 90 дней).
	
4. Используйте параметр **Дата начала**, чтобы указать дату и время начала автоматического резервного копирования. 
	
	![Выбор даты начала][StartDate]
	
	Время можно задавать с шагом в полчаса.
	
	![Выбор времени начала][StartTime]
	
	> [AZURE.NOTE] Azure хранит значения времени резервного копирования в формате UTC, но отображает их в соответствии с системным временем на компьютере, где отображается портал.
	
5. В разделе **Включенные базы данных** выберите базы данных, подключенные к веб-сайту (SQL Server или MySQL), для которого вы собираетесь выполнить резервное копирование. Чтобы база данных появилась в этом списке, ее строка подключения должна присутствовать в разделе **Строки подключения** на вкладке "Настройка" портала.
	
	![Выбор включаемых баз данных][IncludedDatabases]
	
	> [AZURE.NOTE] Если требуется включить в резервную копию одну или несколько баз данных и указана частота менее 7 дней, выводится предупреждение о том, что такое частое резервное копирование может увеличить расходы на базу данных.
	
6. В панели команд нажмите кнопку **Сохранить**, чтобы сохранить изменения конфигурации (или выберите **Отменить**, чтобы отказаться от сохранения).
	
	![Кнопка "Сохранить"][SaveIcon]

<a name="aboutbackups"></a>
## Хранение резервных копий

После создания одной или нескольких резервных копий они будут отображаться на вкладке "Контейнеры" вашей учетной записи хранения. Резервные копии будут находиться в контейнере с именем **websitebackups**. Каждая резервная копия состоит из ZIP-файла, содержащего резервную копию данных, и XML-файла, содержащего манифест для содержимого ZIP-файла. 

Имена архивных файлов ZIP и XML состоят из имени сайта, за которым через символ подчеркивания следует метка времени, указывающая время создания данной резервной копии. Метка времени содержит дату в формате ГГГГММДД (в виде цифр без пробелов), а также время в 24-часовом формате UTC (например, fabrikam_201402152300.zip). Содержимое этих файлов можно распаковать и просмотреть, если требуется получить доступ к резервным копиям без фактического восстановления веб-сайта.

В XML-файле, сохраняемом с ZIP-файлом, имя файла базы данных указывается в разделе *backupdescription* > *databases* > *databasebackupdescription* > *filename*.

Файл резервной копии базы данных сохраняется в корне файла .zip. Для базы данных SQL это файл BACPAC (без расширения), и его можно импортировать. Чтобы создать новую базу данных SQL на основе экспорта BACPAC, выполните шаги, описанные в разделе [Импорт файла BACPAC для создания новой базы данных пользователя](http://technet.microsoft.com/ru-ru/library/hh710052.aspx).

Информацию о восстановлении веб-сайта Azure (включая базы данных) с помощью портала управления Azure см. в разделе [Восстановление веб-сайта Microsoft Azure]( http://azure.microsoft.com/ru-ru/documentation/articles/web-sites-restore/).

> [AZURE.NOTE] Изменение любого из этих файлов в контейнере **websitebackups** может привести к повреждению резервной копии и сделать восстановление из нее невозможным.

<a name="notes"></a>
## Примечания

* Убедитесь, что для каждой базы данных на вкладке "Настройка" веб-сайта правильно настроены строки подключения, чтобы компонент резервного копирования и восстановления мог использовать ваши базы данных.
* Во время действия предварительной версии вы несете ответственность за управление резервными копиями, сохраненными в вашей учетной записи хранения. Если вы удалили резервную копию из вашей учетной записи хранения и не создали копию этих данных в другом месте, восстановить эту резервную копию будет невозможно. 
* Хотя вы можете выполнить резервное копирование нескольких веб-сайтов в одну учетную запись хранения, для упрощения обслуживания рекомендуется создать отдельную учетную запись хранения для каждого веб-сайта.
* В режиме предварительного ознакомления операции резервного копирования и восстановления доступны только на портале управления Azure.

<a name="nextsteps"></a>
## Дальнейшие действия
Информацию о восстановлении веб-сайта Azure из резервной копии см. в разделе [Восстановление веб-сайта Azure](http://www.windowsazure.com/ru-ru/documentation/articles/web-sites-restore/).

Чтобы начать работу с Azure, см. раздел [Бесплатная пробная версия Microsoft Azure](http://azure.microsoft.com/ru-ru/pricing/free-trial/).


<a name="moreaboutstorage"></a>
### Подробнее об учетных записях хранения

[Что такое учетная запись хранения?](http://www.windowsazure.com/ru-ru/documentation/articles/storage-whatis-account/)

[Практическое руководство. Создание учетной записи хранения](http://www.windowsazure.com/ru-ru/documentation/articles/storage-create-storage-account/)

[Мониторинг учетной записи хранения](http://www.windowsazure.com/ru-ru/documentation/articles/storage-monitor-storage-account/)

[Общая информация об оплате службы хранилища Microsoft Azure](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/07/09/understanding-windows-azure-storage-billing-bandwidth-transactions-and-capacity.aspx)

<!-- IMAGES -->
[ChooseBackupsPage]: ./media/web-sites-backup/01ChooseBackupsPage.png
[ChooseStorageAccount]: ./media/web-sites-backup/02ChooseStorageAccount.png
[IncludedDatabases]: ./media/web-sites-backup/03IncludedDatabases.png
[BackUpNow]: ./media/web-sites-backup/04BackUpNow.png
[BackupProgress]: ./media/web-sites-backup/05BackupProgress.png
[SetAutomatedBackupOn]: ./media/web-sites-backup/06SetAutomatedBackupOn.png
[Frequency]: ./media/web-sites-backup/07Frequency.png
[StartDate]: ./media/web-sites-backup/08StartDate.png
[StartTime]: ./media/web-sites-backup/09StartTime.png
[SaveIcon]: ./media/web-sites-backup/10SaveIcon.png


<!--HONumber=42-->
