---
title: Служба Azure Front Door — серверные системы и серверные пулы | Документы Майкрософт
description: Эта статья поможет вам понять, что представляют собой серверные системы и серверные пулы в конфигурации Front Door.
services: front-door
documentationcenter: ''
author: sharad4u
ms.service: frontdoor
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 09/10/2018
ms.author: sharadag
ms.openlocfilehash: 228ed5c54a382db7b47d19adacf9e5db398c53ae
ms.sourcegitcommit: 5839af386c5a2ad46aaaeb90a13065ef94e61e74
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2019
ms.locfileid: "58123697"
---
# <a name="backends-and-backend-pools-in-azure-front-door-service"></a>Серверные системы и серверные пулы в службе Azure Front Door
В этой статье объясняются различные понятия, связанные с сопоставлением развертывания вашего приложения со службой Front Door. Мы также расскажем, различные термины в начале конфигурации дверцу вокруг серверной части приложения разъяснения.

## <a name="backend-pool"></a>Серверный пул
Серверный пул в службе Front Door — это набор эквивалентных серверных систем, способных принимать для своих приложений один и тот же тип трафика. Другими словами, это логическая группа экземпляров вашего приложения по всему миру, способных принимать одинаковый трафик и отвечать в соответствии с ожиданиями. Эти серверные системы обычно развертываются в разных регионах или в одном. Кроме того эти серверные системы могут находиться в режиме развертывания "активный — активный" либо определяться как конфигурация "активный/активный".

Серверный пул также определяет, как необходимо оценивать работоспособность различных серверных систем с помощью проб работоспособности и, соответственно, как должна происходить балансировка нагрузки между серверными системами.

### <a name="health-probes"></a>Пробы работоспособности.
Служба Front Door отправляет периодические HTTP/HTTPS-запросы проб в каждую из настроенных серверных систем и, таким образом, определяет близость и работоспособность каждой серверной системы для балансировки нагрузки по запросам ваших конечных пользователей. Настройки проб работоспособности для серверного пула определяют, как мы будем проверять работоспособность серверных систем вашего приложения. Для конфигурации балансировки нагрузки доступны следующие параметры:

1. **Путь**. URL-путь, где запросов на проверку будет отправляться для всех серверных систем в серверном пуле. Например, если одной из ваших серверных систем является `contoso-westus.azurewebsites.net`, задан путь `/probe/test.aspx` и выбран протокол HTTP, то среды Front Door будут отправлять запросы проб работоспособности в http://contoso-westus.azurewebsites.net/probe/test.aspx. 
2. **Протокол**: Определяет, отправляются ли запросы от входной двери на серверы по протоколу HTTP или HTTPS.
3. **Интервал (в секундах)**: Это поле определяет частоту проверки работоспособности серверных систем, то есть интервалы, в которых каждой из сред двери отправит пробу. Примечание. Если вам требуется более быстрая отработка отказа, укажите в этом поле более низкое значение. При этом чем ниже значение, тем больше проб работоспособности будут получать ваши серверные системы. Чтобы получить представление о том, какой объем проб работоспособности служба Front Door будет создавать в ваших серверных системах, рассмотрим один пример. Допустим, вы задали интервал 30 секунд и у вас есть 90 сред службы Front Door или POP по всему миру. Это значит, что каждая из ваших серверных систем будет получать от 3 до 5 запросов проб в секунду.

Более подробные сведения см. в статье о [пробах работоспособности](front-door-health-probes.md).

### <a name="load-balancing-settings"></a>Параметры балансировки нагрузки
Параметры балансировки нагрузки для серверного пула определяют, как мы оцениваем пробы работоспособности серверных систем и как нам следует распределять трафик между различными серверными системами в серверном пуле. Для конфигурации балансировки нагрузки доступны следующие параметры:

1. **Размер выборки**: Это свойство определяет количество выборок для пробы работоспособности, нам нужно учесть для оценки работоспособности серверной части.
2. **Размер выборки успешно**: Это свойство определяет, что «пример размера» как объяснялось выше, сколько примеры нам нужны для проверки успешного выполнения для вызова внутренней службы подтверждения работоспособности. 
</br>Допустим, например, что в службе Front Door установлен 30-секундный *интервал* забора проб работоспособности, *размер выборки* имеет значение "5", а *размер успешной выборки* — "3". Это конфигурация означает, что каждый раз, оценивая пробы работоспособности своей серверной системы, мы будем рассматривать пять последних образцов, полученных за последние 150 секунд (5x30 с), и, если три или больше из этих образцов не окажутся успешными, мы будем объявлять серверную систему неработоспособной. Допустим, успешных проб только две, так что мы считаем серверную систему неработоспособной. Если при следующей оценке три из последних пяти проб будут успешными, мы скажем, что серверная система снова работоспособна.
3. **Задержка чувствительности (дополнительная задержка)**: Поле чувствительности задержка определяет, следует ли двери, чтобы отправить запрос в серверную часть, находятся в диапазоне от чувствительности с точки зрения измерения задержки или отправить запрос к ближайшей серверной части. Дополнительные сведения см. в статье о [методе маршрутизации с минимальной задержкой](front-door-routing-methods.md#latency).

## <a name="backend"></a>Серверная часть
Серверная система эквивалентна экземпляру развертывания приложения в регионе. Front Door поддерживает и серверные системы Azure, и другие серверные системы, поэтому здесь могут использоваться не только регионы Azure, но и локальный центр обработки данных, и экземпляр приложения в любом другом облаке.

В контексте Front Door серверные системы ссылаются на имя узла или общедоступный IP-адрес вашего приложения, которые могут обслуживать клиентские запросы. Таким образом, серверные системы не следует путать с уровнем базы данных или уровнем хранилища и т. д. Их следует рассматривать как общедоступную конечную точку серверной системы вашего приложения.

При добавлении серверной системы в серверный пул Front Door необходимо указать следующие данные:

1. **Тип узла серверной части**: Тип ресурса, который вы хотите добавить. Front Door поддерживает автоматическое обнаружение серверных систем вашего приложения из службы приложений, облачной службы или хранилища. Если вам нужен другой ресурс в Azure или даже сторонняя серверная система, выберите "Пользовательский узел". Примечание. При настройке конфигурации API не проверяют, доступна ли серверная система из сред Front Door — вам придется проверить это самостоятельно. 
2. **Подписки и серверную часть имени узла**: Если вы не выбрали введите «Настраиваемый узел» для узла серверной части, то необходимо определить область вниз и выберите серверную часть, выбрав соответствующую подписку и имя соответствующего узла серверной части с помощью пользовательского интерфейса.
3. **Заголовок узла серверной части**: Значение заголовка узла, отправляемое в серверную часть для каждого запроса. Дополнительные сведения см. в разделе о [заголовке узла серверной системы](#hostheader).
4. **Приоритет**. Если вы хотите использовать основной внутренний сервер службы для всего трафика, а также предоставлять резервные внутренние серверы на случай, если основной или резервный внутренний сервер станут недоступны, можно назначить различным внутренним серверам разные приоритеты. Дополнительные сведения см. в разделе о [приоритете](front-door-routing-methods.md#priority).
5. **Вес**: Если вы хотите распределять трафик по всему набору серверных систем, будь то равномерно или с учетом весовых коэффициентов, можно назначить различным серверным системам разный вес. Дополнительные сведения см. в разделе о [весовых коэффициентах](front-door-routing-methods.md#weighted).


### <a name = "hostheader"></a>Заголовок узла серверной системы

Запросы, перенаправляемые службой Front Door в серверную систему, включают поле заголовка узла, которое серверная система использует для извлечения целевого ресурса. Значение для этого поля обычно берется из URI серверной системы и содержит узел и порт. Например, запрос в `www.contoso.com` будет иметь заголовок узла `www.contoso.com`. При настройке серверной системы с помощью портала Azure в это поле по умолчанию вставляется имя узла серверной системы. Например, если ваша серверная система — `contoso-westus.azurewebsites.net`, то на портале Azure будет автоматически задано значение заголовка узла серверной системы `contoso-westus.azurewebsites.net`. 
</br>Если же вы используете шаблоны Resource Manager или другой механизм и не настраиваете это поле напрямую, Front Door отправляет входящее имя узла как значение для заголовка узла. Например, если запрос относится к `www.contoso.com`, ваша серверная система — `contoso-westus.azurewebsites.net`, а поле заголовка узла серверной системы пустое, Front Door определит заголовок узла как `www.contoso.com`.

Большинство серверных систем приложений (включая веб-приложения, хранилище BLOB-объектов и облачные службы) требуют, чтобы заголовок узла совпадал с доменом серверной системы. Тем не менее, внешний интерфейс узла, ведущий к серверной части будет иметь другой имя узла, например www\.contoso.azurefd.net. Если настраиваемая серверная система требует, чтобы заголовок узла совпадал с именем узла серверной системы, убедитесь, что в качестве заголовка узла серверной системы также указано имя узла серверной системы.

#### <a name="configuring-the-backend-host-header-for-the-backend"></a>Настройка заголовка узла серверной системы
Поле "Заголовок узла серверной системы" можно настроить для серверной системы в разделе "Серверный пул".

1. Откройте ресурс Front Door и выберите серверный пул, в который входит настраиваемая серверная система.

2. Добавьте серверную систему, если вы это еще не сделали, или измените уже существующую. В поле "Заголовок узла серверной системы" можно указать пользовательское значение или оставить его пустым, в случае чего имя узла для входящего запроса будет использоваться как значение заголовка узла.



## <a name="next-steps"></a>Дальнейшие действия

- Дополнительные сведения о [создании Front Door](quickstart-create-front-door.md).
- Дополнительные сведения о том, [как работает Front Door](front-door-routing-architecture.md).