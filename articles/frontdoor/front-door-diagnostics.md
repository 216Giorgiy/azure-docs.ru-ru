---
title: 'Azure Front Door Service: метрики и ведение журнала | Документация Майкрософт'
description: В этой статье содержатся сведения о различных метриках и журналах доступа, поддерживаемых службой Azure Front Door Service.
services: frontdoor
documentationcenter: ''
author: sharad4u
ms.service: frontdoor
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 09/18/2018
ms.author: sharadag
ms.openlocfilehash: 3097f4a1716718df5d67769e234562a234623cfe
ms.sourcegitcommit: 280d9348b53b16e068cf8615a15b958fccad366a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/25/2019
ms.locfileid: "58407034"
---
# <a name="monitoring-metrics-and-logs-for-front-door"></a>Мониторинг метрик и журналов на передовой линии

С помощью службы Azure двери, вы можете отслеживать ресурсы следующим образом:

* [Метрики](#metrics). В настоящее время Шлюз приложений использует семь метрик для просмотра счетчиков производительности.
* [Журналы](#diagnostic-logging). Можно сохранять или использовать данные производительности, доступа и другие данные, относящиеся к ресурсу, чтобы отслеживать его состояние.

## <a name="metrics"></a>Метрики

Метрики — это функция определенных ресурсов Azure, позволяющая просматривать данные счетчиков производительности на портале. Для службы Front Door доступны следующие метрики.

| Метрика | Отображаемое имя метрики | Единица измерения | Измерения | ОПИСАНИЕ |
| --- | --- | --- | --- | --- |
| RequestCount | Число запросов | Количество | HttpStatus</br>HttpStatusGroup</br>ClientRegion</br>ClientCountry | Число клиентских запросов, обслуженных службой Front Door.  |
| RequestSize | Размер запроса | Байты | HttpStatus</br>HttpStatusGroup</br>ClientRegion</br>ClientCountry | Число байт, отправленных в качестве запросов от клиентов в службу Front Door. |
| ResponseSize | Размер ответа | Байты | HttpStatus</br>HttpStatusGroup</br>ClientRegion</br>ClientCountry | Число байт, отправленных клиентам в качестве ответов из службы Front Door. |
| TotalLatency | Total Latency (Общая задержка) | Миллисекунды | HttpStatus</br>HttpStatusGroup</br>ClientRegion</br>ClientCountry | Время с момента получения клиентского запроса службой Front Door до подтверждения клиентом последнего байта ответа от Front Door. |
| BackendRequestCount | Число запросов к серверному компоненту | Количество | HttpStatus</br>HttpStatusGroup</br>Серверная часть | Число запросов, отправленных из службы Front Door к серверным частям. |
| BackendRequestLatency | Backend Request Latency (Задержка запросов к серверным частям) | Миллисекунды | Серверная часть | Время с момента отправки запроса службой Front Door к серверной части до получения Front Door последнего байта ответа от серверной части. |
| BackendHealthPercentage | Работоспособность серверного компонента (в процентах) | Процент | Серверная часть</br>BackendPool | Процент успешных проб работоспособности от службы Front Door к серверным частям. |
| WebApplicationFirewallRequestCount | Web Application Firewall Request Count (Число запросов к брандмауэру веб-приложения) | Количество | PolicyName</br>RuleName</br>Действие | Количество клиентских запросов, обрабатываемых механизмом безопасности на прикладном уровне службы Front Door. |

## <a name="activity-log"></a>Журналы действий

Журналы действий позволяют подробно проанализировать операции, которые были выполнены на ваш входной двери. С помощью журналов действий, можно определить «что, кто и когда» для любой операции записи (PUT, POST, DELETE на ваш входной двери).

> [!NOTE]
> Журналы действий не содержат операций чтения (GET) и операций, выполненных на портале Azure или с помощью исходных API управления.

Можно получить доступ к журналам действий в вашей входной двери или получить доступ к журналам всех ресурсов Azure в Azure Monitor. 

Чтобы просмотреть журналы действий, сделайте следующее:

1. Выберите свой экземпляр входной двери.
2. Щелкните **Журнал действий**.

    ![Журнал действий](./media/front-door-diagnostics/activity-log.png)

3. Выберите требуемую область фильтрации и щелкните **Применить**.

## <a name="diagnostic-logging"></a>Журналы диагностики
Журналы диагностики предоставляют подробные сведения об операциях и ошибках, которые важны для аудита, а также для устранения неполадок. Журналы диагностики отличаются от журналов действий. Журналы действий позволяют подробно проанализировать операции, выполненные с ресурсами Azure. Журналы диагностики дают представление об операциях, выполняемых ресурсом. Дополнительные сведения о [журналов диагностики Azure Monitor](../azure-monitor/platform/diagnostic-logs-overview.md). 

Чтобы настроить журналы диагностики для вашей двери.

1. Выберите свой экземпляр службы управления API.
2. Щелкните **Параметры диагностики**.

    ![Журналы диагностики](./media/front-door-diagnostics/diagnostic-log.png)

3. Щелкните **Включить диагностику**. Вы можете архивировать журналы диагностики и метрики в учетную запись хранения, передать их потоком в концентратор событий или отправить в журналы Azure Monitor. 

Служба Azure двери в настоящее время предоставляет средства диагностики запросить журналы (в пакетном режиме каждый час) отдельных API со следующей схемой каждой записи:

| Свойство  | ОПИСАНИЕ |
| ------------- | ------------- |
| ClientIp | IP-адрес отправившего запрос клиента. |
| clientPort | Порт IP-адрес клиента, который отправил запрос. |
| HttpMethod | Метод HTTP, используемый для запроса. |
| HttpStatusCode | Код состояния HTTP, возвращаемый прокси-сервер. |
| HttpStatusDetails | Итоговое состояние в запросе. Значение этого свойства строки можно найти в ссылочной таблице состояния. |
| HttpVersion | Тип запроса или подключения. |
| RequestBytes | Размер сообщения HTTP-запроса в байтах, включая заголовки запроса и тексте запроса. |
| requestUri | URI полученного запроса. |
| ResponseBytes | Байт, отправленных серверу базы данных, как и в ответе.  |
| RoutingRuleName | Имя правила маршрутизации, соответствующий запрос. |
| SecurityProtocol | Версия протокола TLS/SSL, используемые в запросе или значение null, если без шифрования. |
| TimeTaken | Продолжительность времени, затраченное на выполнение действия, в миллисекундах. |
| UserAgent | Тип браузера, используемый клиентом |
| TrackingReference | Уникальная ссылка строку, которая определяет запросов, выполненных с входной двери, также клиенту как заголовок X-Azure-Ref. Требуется для поиска сведений в журналах доступа для конкретного запроса. |

## <a name="next-steps"></a>Дальнейшие действия

- Дополнительные сведения о [создании Front Door](quickstart-create-front-door.md).
- Дополнительные сведения о том, [как работает Front Door](front-door-routing-architecture.md).
