<properties 
   pageTitle="Отладка опубликованной облачной службы с помощью IntelliTrace и Visual Studio | Microsoft Azure"
   description="Отладка опубликованной облачной службы с помощью IntelliTrace и Visual Studio"
   services="visual-studio-online"
   documentationCenter="n/a"
   authors="patshea123"
   manager="douge"
   editor="tlee" />
<tags 
   ms.service="visual-studio-online"
   ms.devlang="multiple"
   ms.topic="article"
   ms.tgt_pltfrm="multiple"
   ms.workload="na"
   ms.date="08/14/2015"
   ms.author="patshea" />



# Отладка опубликованной облачной службы с помощью IntelliTrace и Visual Studio

##Обзор

С помощью IntelliTrace можно записывать в журнал расширенные отладочные сведения для экземпляра роли при его запуске в Azure. Если вам необходимо найти причину проблемы, можете использовать журналы IntelliTrace для пошагового выполнения кода из Visual Studio, как если бы он запускался в Azure. Фактически IntelliTrace записывает выполнение ключевого кода и данные среды при запуске приложения Azure в качестве облачной службы в Azure и позволяет воспроизводить записанные данные в Visual Studio. В качестве альтернативы можно использовать удаленную отладку для непосредственного подключения к облачной службе, запущенной в Azure. См. [Отладка облачных служб](http://go.microsoft.com/fwlink/p/?LinkId=623041).

>[AZURE.IMPORTANT]IntelliTrace предназначена только для отладки и не должна использоваться в рабочей среде.

>[AZURE.NOTE]IntelliTrace можно использовать, если ваше приложение Azure предназначено для .NET Framework 4 или более поздней версии и если у вас установлена среда разработки Visual Studio Enterprise. IntelliTrace собирает сведения для ваших ролей Azure. Виртуальные машины для этих ролей всегда запускают 64-разрядные операционные системы.

## Настройка приложения Azure для IntelliTrace

Чтобы включить IntelliTrace для приложения Azure, необходимо создать и опубликовать приложение из проекта Visual Studio Azure. Перед публикацией в Azure необходимо настроить IntelliTrace для приложения Azure. Если вы опубликовали приложение без настройки IntelliTrace, но затем решили, что хотите настроить IntelliTrace, необходимо еще раз опубликовать приложение из Visual Studio. Дополнительные сведения см. в статье [Публикация облачной службы с помощью инструментов Azure](http://go.microsoft.com/fwlink/p/?LinkId=623012).

1. Перед развертыванием приложения Azure убедитесь, что в качестве целей сборки проекта выбрана **Отладка**.

1. Откройте контекстное меню для проекта Azure в обозревателе решений и выберите **Опубликовать**.
 
    Откроется мастер публикации приложения Azure.

1. Чтобы собирать журналы IntelliTrace для приложения во время его публикации в облаке, установите флажок **Включить IntelliTrace**.

    >[AZURE.NOTE]При публикации приложения Azure можно включить IntelliTrace или профилирование. И то и другое одновременно включить нельзя.

1. Чтобы настроить базовую конфигурацию IntelliTrace, выберите гиперссылку **Параметры**.

    Откроется диалоговое окно "Параметры IntelliTrace", как показано на следующем рисунке. Можно указать, какие события будут записываться в журнал, требуется ли осуществлять сбор сведений о вызовах, для каких модулей и процессов необходимо записывать журналы и какой объем дискового пространства необходимо выделить для записи. Дополнительные сведения об IntelliTrace см. в статье [Отладка с помощью IntelliTrace](http://go.microsoft.com/fwlink/?LinkId=214468).

    ![VST\_IntelliTraceSettings](./media/vs-azure-tools-intellitrace-debug-published-cloud-services/IC519063.png)

Журнал IntelliTrace представляет собой кольцевой файл журнала максимального размера, указанного в настройках IntelliTrace (размер по умолчанию — 250 МБ). Журналы IntelliTrace записываются в файл в файловой системе виртуальной машины. При запросе журналов формируется моментальный снимок на данный момент времени и загружается на локальный компьютер.

После публикации приложения в Azure с помощью вычислительного узла Azure в обозревателе сервера можно определить, был ли включен IntelliTrace, как показано на следующем рисунке.

![VST\_DeployComputeNode](./media/vs-azure-tools-intellitrace-debug-published-cloud-services/IC744134.png)

## Скачивание журналов IntelliTrace для экземпляра роли

Вы можете скачать журналы IntelliTrace для экземпляра роли из узла **Облачные службы** в **обозревателе сервера**. Разверните узел **Облачные службы**, найдите экземпляр, который вас интересует, откройте контекстное меню для этого экземпляра и выберите **Просмотр журналов IntelliTrace**. Журналы IntelliTrace будут загружены в файл в каталоге на локальном компьютере. При каждом запросе журналов IntelliTrace создается новый моментальный снимок.

Во время загрузки журналов Visual Studio отображает ход выполнения операции в окне журнала действий Azure. Как показано на следующем рисунке, элемент строки можно развернуть для более детального просмотра операции.

![VST\_IntelliTraceDownloadProgress](./media/vs-azure-tools-intellitrace-debug-published-cloud-services/IC745551.png)

Во время загрузки журналов IntelliTrace можно продолжать работу в Visual Studio. После завершения загрузки журнала он автоматически открывается в Visual Studio.

>[AZURE.NOTE]Журналы IntelliTrace могут содержать исключения, которые платформа создает и в дальнейшем обрабатывает. Эти исключения формируются внутренним кодом платформы при обычном запуске роли, поэтому на них можно не обращать внимания.

## См. также

[Отладка облачных служб](https://msdn.microsoft.com/library/ee405479.aspx)

<!---HONumber=Oct15_HO3-->