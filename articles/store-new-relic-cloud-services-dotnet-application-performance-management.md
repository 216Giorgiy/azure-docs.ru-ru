<properties 
	pageTitle="Использование New Relic с Azure | Microsoft Azure" 
	description="Узнайте, как можно использовать службу New Relic для мониторинга приложений Azure и управления ими." 
	services="" 
	documentationCenter=".net" 
	authors="nickfloyd" 
	manager="timlt" 
	editor=""/>

<tags 
	ms.service="cloud-services" 
	ms.workload="tbd" 
	ms.tgt_pltfrm="na" 
	ms.devlang="dotnet" 
	ms.topic="article" 
	ms.date="03/16/2015" 
	ms.author="nickfloyd@newrelic.com"/>



# Инструмент управления производительностью приложений New Relic для Azure

В этом руководстве показано, как добавить соответствующий мировым стандартам инструмент мониторинга производительности New Relic в свои приложения, размещенные в Azure. Вы узнаете, как быстро и просто добавить его в свое приложение, а также найдете описание некоторых функций New Relic. Дополнительные сведения об использовании New Relic см. в разделе [Использование New Relic](#using-new-relic)

## Что такое New Relic?

New Relic — это инструмент для разработчиков, который осуществляет мониторинг рабочих приложений и предоставляет подробные данные об их производительности и надежности. Таким образом, он позволяет быстрее выявлять и диагностировать возникающие проблемы с производительностью, а также предоставляет в ваше распоряжение данные, необходимые для решения этих проблем.

Инструмент New Relic отслеживает время загрузки и пропускную способность веб-транзакций как через сервер, так и через браузеры пользователей. Он позволяет увидеть, как долго вы пользуетесь базой данных, анализирует медленные запросы и веб-запросы, обеспечивает мониторинг бесперебойной работы и отображает соответствующие предупреждения, отслеживает исключения в приложениях, а также поддерживает множество других функций.

## Специальные цены на New Relic в Магазине Azure


New Relic Standard для пользователей Azure предлагается бесплатно. New Relic Pro предоставляется в зависимости от размера экземпляра для облачных служб Azure.

Информацию по ценам см. в разделе [Страница New Relic в Магазине Azure](https://azure.microsoft.com/marketplace/partners/newrelic/newrelic/).

> [AZURE.NOTE] Версия, предлагаемая по указанной цене, поддерживает до 10 вычислительных операций. Если количество вычислительных операций превышает 10, стоимость корпоративного лицензирования вы можете узнать непосредственно в компании New Relic (sales@newrelic.com).

Клиенты Azure получают пробную двухнедельную подписку на New Relic Pro при развертывании агента New Relic.

## Подписка на New Relic с использованием Магазина Azure

New Relic тесно интегрируется с веб-ролями и рабочими ролями Azure.

Чтобы подписаться на New Relic непосредственно из Магазина Azure выполните три простых шага, как указано далее.

### Шаг 1. Регистрация через Магазин Azure

1. Выполните вход на [портал управления Azure](https://manage.windowsazure.com).
2. В нижней части портала управления щелкните **Создать**.
3. Нажмите кнопку **Магазин**.
4. В диалоговом окне **Выберите надстройку** выберите **New Relic** и щелкните **Далее**.
5. В диалоговом окне **Настроить надстройку** выберите нужный план New Relic.
6. Введите промокод (при наличии).
7. Введите имя службы New Relic, которое будет отображаться в параметрах Azure, или используйте значение по умолчанию **NewRelic**. Это имя должно быть уникальным в списке элементов Магазина Azure, на которые вы подписались.
8. Укажите регион, например **Запад США**.
9. Нажмите кнопку **Далее**.
10. В диалоговом окне **Просмотр приобретения** просмотрите информацию о плане и ценах, а также ознакомьтесь с условиями использования. Если вы согласны с данными условиями, щелкните **Купить**.
11. После нажатия кнопки **Купить** начнется процесс создания учетной записи New Relic. Состояние можно отслеживать на портале управления Azure.
12. Чтобы получить лицензионный ключ для New Relic, щелкните **Выходные значения**. 
13. Скопируйте лицензионный ключ, который появится на экране. Его нужно будет ввести при установке пакета Nuget New Relic.

### Шаг 2. Установка пакета NuGet

1. Откройте решение Visual Studio или создайте новое решение, последовательно выбрав пункты **Файл -> Создать -> Проект**.

	![Visual Studio](./media/store-new-relic-cloud-services-dotnet-application-performce-management/NewRelicAzureNuget01.png)

2. Если в решении отсутствует проект облачной службы Azure, добавьте его. Для этого щелкните правой кнопкой мыши приложение в обозревателе решений и выберите пункт **Добавить проект облачной службы Azure**.

	![Создать облачную службу](./media/store-new-relic-cloud-services-dotnet-application-performce-management/NewRelicAzureNuget02.png)

3. Откройте консоль диспетчера пакетов, последовательно выбрав пункты **Средства -> Диспетчер пакетов библиотеки -> Консоль диспетчера пакетов**. Установите проект как проект по умолчанию в верхней части окна консоли диспетчера пакетов.

	![Консоль диспетчера пакетов](./media/store-new-relic-cloud-services-dotnet-application-performce-management/NewRelicAzureNuget04.png)

4. В командной строке диспетчера пакетов введите `Install-Package
   NewRelicWindowsAzure` и нажмите клавишу **ВВОД**.

	![установка в диспетчере пакетов](./media/store-new-relic-cloud-services-dotnet-application-performce-management/NewRelicAzureNuget06.png)

5. При появлении соответствующего запроса введите лицензионный ключ, полученный в Магазине Azure.

	![введите лицензионный ключ](./media/store-new-relic-cloud-services-dotnet-application-performce-management/NewRelicAzureNuget07.png)

6. (Необязательно) В запросе имени приложения введите имя своего приложения, которое будет отображаться в панели мониторинга New Relic. Или используйте имя решения по умолчанию.

	![введите имя приложения](./media/store-new-relic-cloud-services-dotnet-application-performce-management/NewRelicAzureNuget08.png)

7. В обозревателе решений щелкните правой кнопкой мыши проект облачной службы Azure и выберите **Опубликовать**.

	![публикация облачного проекта](./media/store-new-relic-cloud-services-dotnet-application-performce-management/NewRelicAzureNuget09.png)


**Примечание.** Если это приложение развертывается в Azure впервые, вам будет предложено ввести учетные данные Azure. Дополнительные сведения см. в разделе [Развертывание веб-приложения ASP.NET на веб-сайте Azure](app-service-web\web-sites-dotnet-get-started.md)

![Параметры публикации](./media/store-new-relic-cloud-services-dotnet-application-performce-management/NewRelicAzureNuget10.png)

### Шаг 3. Проверка производительности приложения в New Relic

Для просмотра панели мониторинга New Relic:

1. На портале Azure нажмите кнопку **Управление**.
2. Выполните вход, используя адрес электронной почты и пароль для New Relic.
3. В строке меню New Relic выберите **Приложения -> (имя приложения)**.

	Автоматически отобразится панель мониторинга **Мониторинг > Обзор**.

	![Панель мониторинга New Relic](./media/store-new-relic-cloud-services-dotnet-application-performce-management/NewRelic_app.png)

	После выбора приложения из списка в меню **Приложения** на панели мониторинга **Обзор** будут показаны сведения о текущем сервере приложений, а также о браузере.

### <a id="using-new-relic"></a>Использование New Relic

После выбора приложения из списка в меню "Приложения" на панели мониторинга "Обзор" будут показаны сведения о текущем сервере приложений, а также о браузере. Для переключения между двумя представлениями щелкните кнопку **Сервер приложений** или **Браузер**.

В дополнение к функциям [стандартного пользовательского интерфейса New Relic](https://newrelic.com/docs/site/the-new-relic-ui#functions") и [детализации панели мониторинга](https://newrelic.com/docs/site/the-new-relic-ui#drilldown) на панели мониторинга "Обзор приложений" также доступны дополнительные функции.

| Если вы хотите... | Процедура |
| ----------------- | ---------- |
| Показать сведения о панели мониторинга для выбранного сервера приложений или браузера. | Нажмите кнопку **Сервер приложений** или **Браузер**. |
| Просмотреть пороговые значения оценки [Apdex](https://newrelic.com/docs/site/apdex) по приложению. | Выберите значок оценки Apdex **?**. |
| Просмотреть сведения Apdex по всему миру | В разделе "Обзор" представления **Браузер** выберите любую точку на карте Global Apdex. **Совет.** Чтобы напрямую перейти к панели мониторинга [География](https://docs.newrelic.com/docs/new-relic-browser/geography-dashboard") для выбранного приложения, щелкните заголовок **Global Apdex** или выберите любую точку на карте Global Apdex. |
| Просмотреть панель мониторинга [Веб-транзакции](https://newrelic.com/docs/applications-dashboards/web-transactions). | На панели мониторинга «Обзор приложений» выберите таблицу «Веб-транзакции». Либо щелкните название транзакции, чтобы просмотреть информацию об определенной веб-транзакции (включая [Ключевые транзакции](https://newrelic.com/docs/site/key-transactions")). |
| Просмотреть панель мониторинга [Ошибки](https://newrelic.com/docs/site/errors). | На панели мониторинга "Обзор " щелкните заголовок диаграммы "Частота ошибок". **Совет.** Панель мониторинга также можно открыть, последовательно выбрав пункты **Приложения** -> (ваше приложение) > "События" > "Ошибки". |


Кроме того, если необходимо просмотреть сведения о приложении на стороне сервера, выполните одно из следующих действий.

- Переключитесь между табличным представлением узлов и представлением отдельных показателей по каждому узлу.
- Щелкните имя одного из серверов.
- Выберите оценку Apdex для одного из серверов.
- Выберите "Использование процессора" или "Память" одного из серверов.

Ниже приведен пример панели мониторинга "Обзор приложений" при выборе представления "Браузер".

![Консоль диспетчера пакетов](./media/store-new-relic-cloud-services-dotnet-application-performce-management/NewRelic_app_browser.png)

## Дальнейшие действия

Для получения дополнительных сведений используйте следующие ресурсы:

 * [Установка агента .NET в Azure](https://newrelic.com/docs/dotnet/installing-the-net-agent-on-azure): процедуры установки агента .NET New Relic. 
 * [Пользовательский интерфейс New Relic](https://newrelic.com/docs/site/the-new-relic-ui): обзор пользовательского интерфейса New Relic, настройка прав пользователей и профилей с использованием стандартных функций и детализированных данных панели мониторинга.
 * [Обзор приложений](https://newrelic.com/docs/site/applications-overview): возможности и функции при использовании панели мониторинга "Обзор приложений" в New Relic.
 * [Apdex](https://newrelic.com/docs/site/apdex): обзор способов, используемых Apdex для измерения степени удовлетворенности пользователей приложением.
 * [Мониторинг реального пользователя](https://newrelic.com/docs/features/real-user-monitoring): обзор способов, используемых RUM для подробного анализа времени, необходимого пользовательским браузерам для загрузки веб-страниц, а также получения данных о регионе пребывания пользователей и используемых браузерах.
 * [Поиск справки](https://newrelic.com/docs/site/finding-help): ресурсы, доступные через интерактивный центр справки New Relic.

<!---HONumber=AcomDC_0128_2016-->