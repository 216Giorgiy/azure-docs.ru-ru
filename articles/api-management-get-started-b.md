<properties pageTitle="Get started with Azure API Management" metaKeywords="" description="Learn how to create APIs, operations, and get started with API Management." metaCanonical="" services="" documentationCenter="API Management" title="Get started with Azure API Management" authors="sdanie" solutions="" manager="" editor="" />

# Начало работы с Azure API Management

Это руководство покажет как быстро начать работу с API Management и сделать первый вызов API.

> Для работы с этим учебником требуется учетная запись Azure. Если ее нет, можно создать бесплатную пробную учетную запись всего за несколько минут. Дополнительные сведения см. в разделе [Бесплатная пробная версия Azure][Бесплатная пробная версия Azure].

Создание экземпляра службы — это первый шаг в работе с API Management. Войдите на портал [Портал управления][Портал управления] и щелкните **Создать**, **Службы приложений**, **Управление API**, **Создать**.

![Новый экземпляр API Management][Новый экземпляр API Management]

В качестве **URL-адреса** укажите уникальное имя поддомена для использования в качестве URL-адреса службы.

Выберите нужный **Уровень цен**, **Подписку** и **Регион** для экземпляра службы. Все уровни цен можно использовать в этом руководстве. После выбора нажмите кнопку "Далее".

![Новая служба API Management][Новая служба API Management]

Введите **Contoso Ltd.** в поле **Имя организации** и укажите адрес электронной почты в поле электронной почты администратора.

> Этот адрес электронный почты используется для получения уведомлений от системы API Management. Дополнительные сведения см. в разделе [Настройка уведомлений][Настройка уведомлений].

Установите флажок для создания экземпляра службы.

![Новая служба API Management][1]

![Новая служба API Management][2]

После создания службы на следующем шаге создается API.

## <a name="create-api"> </a>Создание API

API в API Management представляет набор операций, которые могут быть вызваны клиентскими приложениями. Операции API передаются существующей веб-службе.

Каждый экземпляр службы API Management поставляется предварительно настроенным с примером интерфейса Echo API, в котором можно вызвать любую команду HTTP, а возвращаемое значение будет содержать заголовки и тело, которые были отправлены. В этом учебнике используется серверная веб-служба для Echo API для создания нового интерфейса API в API Management с именем **My Echo Service**.

API создаются и настраиваются из консоли API Management, которая доступна на портале управления Azure. Чтобы открыть консоль API Management, щелкните **Консоль управления** на портале Azure Portal службы API Management.

![Новая консоль API Management][Новая консоль API Management]

Для создания **My Echo API** щелкните **API** в расположенном слева меню **Управление API** , а затем щелкните **Добавить API**.

![Создание API][Создание API]

![Добавление нового API][Добавление нового API]

Следующие три поля используются для настройки нового API.

-   Введите **My Echo API** в текстовом поле **Название веб-API**. **Название веб-API** обеспечивает уникальное описательное имя для API. Оно выводится на порталах разработчика и управления.
-   Наберите **<http://echoapi.cloudapp.net/api>** в поле **URL веб-службы**. **URL-адрес веб-службы** ссылается на реализующую API HTTP-службу. Портал управления API направит запросы по этому адресу.
-   Введите **myecho** в поле **Суффикс URL-адреса веб-API**. **Суффикс URL-адреса веб-API** добавляется к основному URL-адресу для службы управления API. Ваши интерфейсы API используют общий основной URL-адрес и отличаются уникальным суффиксом, добавляемым после основного адреса.

Щелкните **Сохранить**, чтобы создать API. После создания нового API на портале управления выводится страница сводных данных для API.

![Сводные данные API][Сводные данные API]

> Выступающий в качестве примера интерфейс не использует проверку подлинности, и для получения дополнительной информации о настройках проверки см. раздел [Задание настроек API][Задание настроек API].

## <a name="add-operation"> </a>Добавление операции

Щелкните **Операции** для вывода панели операций API. Определения операций используются для проверки входящих запросов и автоматической генерации документации. Ничего не выводится, поскольку еще не добавлено ни одной операции.

![Операции][Операции]

Щелкните **Добавить операцию**, чтобы добавить новую операцию. Появится окно **Новая операция**, вкладка **Сигнатура** будет выбрана по умолчанию.

![Сигнатура операции][Сигнатура операции]

В этом примере указывается операция GET для службы echo. Введите следующие значения в полях на вкладке **Сигнатура**.

-   Введите **GET** в текстовом поле **Команда HTTP**. По мере ввода символов можно выбрать **GET** из выводимого списка команд.
-   Наберите **/resource** в текстовом поле **шаблон URL-адреса**.
-   Наберите **GET resource** в текстовом поле **Экран**.
-   Наберите **Демонстрация вызова GET ресурса из примера. Управляется фоновой службой echo, которая возвращает в ответ полученный запрос (отправленные заголовки и содержимое возвращаются без изменений).** в текстовом поле **Описание**. Описание используется для генерации документации по этой операции при использовании API разработчиками.

Щелкните **Параметры** для настройки параметров строки запроса для этой операции. Для добавления параметра запроса щелкните **Добавить параметр запроса** и укажите следующие значения.

-   Введите **param1** в текстовом поле **Имя**.
-   Введите **Требующийся для примера параметр** в текстовом поле **Описание**.
-   Щелкните поле **Тип** и выберите **string** из списка. Поддерживаются типы **string**, **number**, **boolean** и **dateTime**.
-   Щелкните поле **Значения**, наберите **пример** в текстовом поле и щелкните значок "плюс" для добавления текстового значения по умолчанию для параметра. После добавления текста по умолчанию щелкните вне поля **Значения** для закрытия окна добавления значения.
-   Установите флажок **Обязательный**.

Щелкните **Сохранить** для добавления вновь настроенной операции в API.

## <a name="add-api-to-product"> </a>Добавление нового API к продукту

Разработчики сперва должны подписаться на продукт, прежде чем делать вызовы API. Продукт предоставляет доступ к API и может содержать ограничения доступа, например квоты использования и ограничения скорости. На этом шаге руководства мы добавим My Echo API к существующему продукту.

Щелкните **Продукты** в меню **Управление API** слева для просмотра и настройки продуктов, доступных для экземпляра API.

![Продукты][Продукты]

По умолчанию каждый экземпляр API управления поставляется с двумя примерами продуктов:

-   **Начальный**
-   **Без ограничений**

В этом руководстве используется продукт **Начальный**. Щелкните **Начальный** для просмотра настроек, включая интерфейсы, которые связаны с продуктом.

![Добавление API][Добавление API]

Щелкните **Добавить API к продукту**.

![Добавление API][3]

Установите флажок **My Echo API** и щелкните **Сохранить**.

![API добавлен][API добавлен]

Теперь, когда **My Echo API** связан с продуктом, разработчики могут подписаться на него и использовать API.

> Этот шаг руководства использует продукт **Начальный**, который поставляется предварительно настроенным и готовым к использованию. Для получения пошагового руководства по созданию и публикации нового продукта см. раздел [Как создать и опубликовать продукт][Как создать и опубликовать продукт].

Администратор автоматически подписывается на все продукты и может получать доступ к интерфейсам API, которым эти продукты предоставляют доступ. Следовательно, не нужно вручную подписываться на только что созданный продукт перед отправкой вызова.

## <a name="call-operation"> </a>Вызов операции из портала разработчика

Операции могут быть вызваны из портала разработчика, где предоставляется удобный способ для просмотра и проверки операций API. На этом шаге руководства создается метод Get, который добавляется к **My Echo API**. Щелкните **Портал разработчика** в меню наверху справа на портале управления.

![Портал разработчика][Портал разработчика]

Щелкните **Интерфейсы API** в меню вверху и затем щелкните **My Echo API** для просмотра доступных операций.

![Портал разработчика][4]

Обратите внимание, что показаны описание и параметры, добавленные при создании операции, что предоставляет документацию разработчикам, которые будут использовать эту операцию.

Щелкните **GET Resource** и выберите пункт **Открыть консоль**.

![Консоль операции][Консоль операции]

Введите любые значения для параметров, укажите ключ разработчика и щелкните **HTTP Get**.

![HTTP Get][HTTP Get]

После вызова операции портал разработчика выводит **Запрошенный URL-адрес** от фоновой службы, **Состояние ответа**, **Заголовки ответа** и **Содержимое ответа**.

![Ответ][Ответ]

## <a name="next-steps"> </a>Дальнейшие действия

-   Настройка политик
-   Настройка портала разработчика
-   Трассировка вызовов с помощью инспектора API

  [Бесплатная пробная версия Azure]: http://www.windowsazure.com/ru-ru/pricing/free-trial/
  [Портал управления]: https://manage.windowsazure.com/
  [Новый экземпляр API Management]: ./media/api-management-get-started/api-management-create-instance-menu.png
  [Новая служба API Management]: ./media/api-management-get-started/api-management-create-instance-step1.png
  [Настройка уведомлений]: ../api-management-howto-configure-notifications
  [1]: ./media/api-management-get-started/api-management-create-instance-step2.png
  [2]: ./media/api-management-get-started/api-management-instance-created.png
  [Новая консоль API Management]: ./media/api-management-get-started/api-management-management-console.png
  [Создание API]: ./media/api-management-get-started/api-management-create-api.png
  [Добавление нового API]: ./media/api-management-get-started/api-management-add-new-api.png
  [Сводные данные API]: ./media/api-management-get-started/api-management-new-api-summary.png
  [Задание настроек API]: ../api-management-howto-create-apis/#configure-api-settings
  [Операции]: ./media/api-management-get-started/api-management-myecho-operations.png
  [Сигнатура операции]: ./media/api-management-get-started/api-management-operation-signature.png
  [Продукты]: ./media/api-management-get-started/api-management-list-products.png
  [Добавление API]: ./media/api-management-get-started/api-management-add-api-to-product.png
  [3]: ./media/api-management-get-started/api-management-add-myechoapi-to-product.png
  [API добавлен]: ./media/api-management-get-started/api-management-api-added-to-product.png
  [Как создать и опубликовать продукт]: ../api-management-howto-add-products
  [Портал разработчика]: ./media/api-management-get-started/api-management-developer-portal-menu.png
  [4]: ./media/api-management-get-started/api-management-developer-portal-myecho-api.png
  [Консоль операции]: ./media/api-management-get-started/api-management-developer-portal-myecho-api-console.png
  [HTTP Get]: ./media/api-management-get-started/api-management-invoke-get.png
  [Ответ]: ./media/api-management-get-started/api-management-invoke-get-response.png
