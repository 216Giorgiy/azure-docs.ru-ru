<properties linkid="manage-services-hdinsight-howto-administer-hdinsight" urlDisplayName="Administration" pageTitle="Manage Hadoop clusters in HDInsight using Azure Portal | Azure" metaKeywords="" description="Learn how to administer HDInsight Service. Create an HDInsight cluster, open the interactive JavaScript console, and open the Hadoop command console." metaCanonical="" services="hdinsight" documentationCenter="" title="Manage Hadoop clusters in HDInsight using the Azure Management Portal" authors="jgao" solutions="" manager="paulettm" editor="cgronlun" />

<tags ms.service="hdinsight" ms.workload="big-data" ms.tgt_pltfrm="na" ms.devlang="na" ms.topic="article" ms.date="01/01/1900" ms.author="jgao"></tags>

# Управление кластерами Hadoop в HDInsight с использованием портала управления Azure

На портале управления Azure можно подготовить кластеры Hadoop в HDInsight, изменить пароль пользователя Hadoop и активировать RDP, чтобы получить доступ к командной консоли Hadoop в кластере. Помимо портала управления доступны и другие средства для администрирования HDInsight.

-   Дополнительные сведения об администрировании HDInsight с помощью Azure PowerShell см. в разделе [Администрирование HDInsight с использованием PowerShell][].

-   Дополнительные сведения об администрировании HDInsight с помощью межплатформенных средств командной строки см. в разделе [Администрирование HDInsight с использованием межплатформенного интерфейса командной строки][].

**Предварительные требования:**

Перед началом работы с этой статьей необходимо иметь следующее:

-   **Подписка Azure**. Azure — это платформа на основе подписок. Сведения о получении подписки см. в разделе [Варианты приобретения][], [Предложения для участников][] или [Бесплатное пробное использование][].

## Содержание

-   [Подготовка кластеров HDInsight к работе][]
-   [Настройка кластеров HDInsight][]
-   [Изменение имени пользователя и пароля для кластера HDInsight][]
-   [Подключение к кластерам HDInsight с использованием RDP][]
-   [Предоставление и отмена доступа к службам HTTP][]
-   [Открытие командной консоли Hadoop][]
-   [Дальнейшие действия][]

## <span id="create"></span></a> Подготовка кластеров HDInsight

Существует несколько методов для создания кластеров HDInsight, но в этой статье описывается только использование параметра "Быстрое создание" на портале управления Azure. Другие методы см. в разделе [Подготовка кластеров HDInsight][].

Кластер HDInsight использует контейнер хранилища BLOB-объектов Azure в качестве файловой системы по умолчанию. Дополнительные сведения о том, каким образом хранилище BLOB-объектов Azure обеспечивает удобную работу с кластерами HDInsight, см. в разделе [Использование хранилища BLOB-объектов Azure с HDInsight][].

Учетную запись хранения Azure необходимо создать в том же центре обработки данных, в котором должна осуществляться подготовка кластера HDInsight. В настоящее время кластеры HDInsight можно подготовить в пяти центрах обработки данных:

-   Юго-Восточная Азия
-   Северная Европа
-   Западная Европа
-   Восток США
-   Запад США

Сведения о создании учетной записи хранения Azure см. в разделе [Создание учетной записи хранения][].

**Подготовка кластера HDInsight**

1.  Выполните вход на [Портал управления Azure][].
2.  В нижней части страницы щелкните **СОЗДАТЬ**, затем последовательно щелкните **СЛУЖБЫ ДАННЫХ**, **HDINSIGHT** и **БЫСТРО СОЗДАТЬ**.

3.  Укажите значения **Имя кластера**, **Размер кластера**, **Пароль администратора кластера** и **Учетная запись хранения** Azure, а затем щелкните **Создать кластер HDInsight**. После создания и запуска кластера отображается статус *Выполняется*.

    ![HDI.QuickCreate][]

    Если для создания кластера используется параметр "Быстрое создание", то для учетной записи пользователя Hadoop по умолчанию используется имя пользователя *admin*. Чтобы присвоить учетной записи другое имя пользователя, используйте параметр "Настраиваемое создание" вместо параметра "Быстрое создание". Имя учетной записи можно также изменить после завершения подготовки.

    Если для создания кластера используется параметр "Быстрое создание", то в указанной учетной записи хранения автоматически создается новый контейнер с именем кластера HDInsight. Чтобы изменить имя контейнера, которое будет использоваться по умолчанию в кластере, необходимо использовать параметр "Настраиваемое создание".

    > [WACOM.NOTE] Когда учетная запись хранения Azure выбрана для кластера HDInsight, единственный способ изменить учетную запись хранения — удалить кластер и создать новый кластер с нужной учетной записью хранения.

4.  Щелкните вновь созданный кластер. Он отображается на главной странице.

    ![HDI.ClusterLanding][]

## <span id="customize"></span></a> Настройка кластеров HDInsight

HDInsight работает со множеством компонентов Hadoop. Список проверенных и поддерживаемых компонентов см. в разделе [Какая версия Hadoop включена в Azure HDInsight?][]. Настройка HDInsight может выполняться с использованием одного из следующих вариантов:

-   Используйте параметры настройки кластера в Azure PowerShell или пакете SDK для HDInsight .NET во время подготовки кластера. Такие изменения конфигурации сохраняются на протяжении всего срока существования кластера и не попадают под воздействие операций повторного создания образа узла, которые периодически выполняет платформа Azure в рамках обслуживания. Дополнительные сведения об использовании параметров настройки кластера см. в разделе [Подготовка кластеров HDInsight][].
-   Некоторые собственные компоненты Java, такие как Mahout, Cascading, могут выполняться в кластере как JAR-файлы. Эти JAR-файлы можно распространить в хранилище BLOB-объектов Azure (WASB) и отправить в кластеры HDInsight с помощью механизмов отправки заданий Hadoop. Дополнительные сведения см. в разделе [Отправка заданий Hadoop программными средствами][].

    > [WACOM.NOTE] Если возникают проблемы при развертывании JAR-файлов в кластерах HDInsight или при вызове JAR-файлов в кластерах HDInsight, обратитесь в [службу поддержки Майкрософт][].

    > Компонент Cascading не поддерживается службой HDInsight и на него не распространяется техническая поддержка Майкрософт. Списки поддерживаемых компонентов см. в разделе [Новые возможности версий кластеров, предоставляемых HDInsight][Какая версия Hadoop включена в Azure HDInsight?].

Установка пользовательского программного обеспечения в кластере с помощью подключения к удаленному рабочему столу не поддерживается. Не храните файлы на дисках головного узла, поскольку они будут потеряны, если потребуется повторно создать кластеры. Рекомендуется хранить файлы в хранилище BLOB-объектов Azure. Хранилище BLOB-объектов остается неизменным.

## <span id="password"></span></a> Изменение имени пользователя и пароля для кластера HDInsight

Кластер HDInsight может иметь две учетные записи пользователя. Учетная запись пользователя кластера HDInsight создается в процессе подготовки. Можно также создать учетную запись пользователя RDP для доступа к кластеру через RDP. См. [Включение удаленного рабочего стола][].

**Изменение имени пользователя и пароля для кластера HDInsight**

1.  Выполните вход на [Портал управления Azure][].
2.  На левой панели щелкните **HDINSIGHT**. Появится список развернутых кластеров HDInsight.
3.  Щелкните кластер HDInsight, для которого хотите переопределить имя пользователя и пароль.
4.  В верхней части страницы щелкните **КОНФИГУРАЦИЯ**.
5.  Щелкните **ВЫКЛ** рядом с элементом **СЛУЖБЫ HADOOP**.
6.  В нижней части страницы щелкните **СОХРАНИТЬ** и дождитесь отключения.
7.  После отключения службы щелкните **ВКЛ** рядом с элементом **СЛУЖБЫ HADOOP**.
8.  Введите **ИМЯ ПОЛЬЗОВАТЕЛЯ** и **НОВЫЙ ПАРОЛЬ**. Это будут новые имя пользователя и пароль для кластера.
9.  Щелкните **СОХРАНИТЬ**.

## <span id="rdp"></span></a> Подключение к кластерам HDInsight с использованием RDP

Учетные данные, указанные при создании кластера, предоставляют доступ к службам в кластере, но не дают доступа к самому кластеру через удаленный рабочий стол. Доступ через удаленный рабочий стол по умолчанию отключен, поэтому для прямого доступа к кластеру с его помощью требуется некоторая дополнительная настройка после создания.

**Включение удаленного рабочего стола**

1.  Выполните вход на [Портал управления Azure][].
2.  На левой панели щелкните **HDINSIGHT**. Появится список развернутых кластеров HDInsight.
3.  Щелкните кластер HDInsight, к которому хотите подключиться.
4.  В верхней части страницы щелкните **КОНФИГУРАЦИЯ**.
5.  В нижней части страницы щелкните **ВКЛЮЧИТЬ УДАЛЕННЫЙ ДОСТУП**.
6.  В мастере **Настройка удаленного рабочего стола** введите имя пользователя и пароль для удаленного рабочего стола. Обратите внимание, что имя пользователя должно отличаться от имени пользователя, которое использовалось при создании кластера (по умолчанию *admin* при использовании параметра "Быстрое создание"). Введите дату окончания срока действия в поле **ИСТЕКАЕТ**. Обратите внимание, что дата окончания срока действия должна быть в будущем и не позднее чем через неделю от сегодняшней даты. В качестве времени окончания срока действия по умолчанию предполагается полночь указанной даты. Затем щелкните значок флажка.

    ![HDI.CreateRDPUser][]

    Дата окончания срока действия должна быть в будущем и не позднее чем через семь дней от сегодняшнего дня. Время — полночь выбранной даты.

> [WACOM.NOTE] После включения RDP для кластера необходимо обновить страницу, прежде чем подключаться к кластеру.

**Подключение к кластеру с помощью RDP**

1.  Выполните вход на [Портал управления Azure][].
2.  На левой панели щелкните **HDINSIGHT**. Появится список развернутых кластеров HDInsight.
3.  Щелкните кластер HDInsight, к которому хотите подключиться.
4.  В верхней части страницы щелкните **КОНФИГУРАЦИЯ**.
5.  Щелкните **ПОДКЛЮЧИТЬСЯ**, а затем следуйте инструкциям.

## <span id="httpservice"></span></a> Предоставление и отмена доступа к службам HTTP

В кластерах HDInsight имеются следующие веб-службы HTTP (все эти службы имеют конечные точки RESTful):

-   ODBC
-   JDBC
-   Ambari
-   Oozie
-   Templeton

По умолчанию эти службы предоставляются для доступа. Вы можете сами отменять и предоставлять доступ с портала управления.

> [WACOM.NOTE] Предоставляя или отменяя доступ, вы переопределяете имя пользователя и пароль кластера.

**Предоставление или отмена доступа к веб-службам HTTP**

1.  Выполните вход на [Портал управления Azure][].
2.  На левой панели щелкните **HDINSIGHT**. Появится список развернутых кластеров HDInsight.
3.  Щелкните кластер HDInsight, который хотите настроить.
4.  В верхней части страницы щелкните **КОНФИГУРАЦИЯ**.
5.  Щелкните **ВКЛ** или **ВЫКЛ** рядом с элементом **СЛУЖБЫ HADOOP**.
6.  Введите **ИМЯ ПОЛЬЗОВАТЕЛЯ** и **НОВЫЙ ПАРОЛЬ**. Это будут новые имя пользователя и пароль для кластера.
7.  Щелкните **СОХРАНИТЬ**.

Это можно сделать также с помощью командлетов Azure PowerShell.

-   Grant-AzureHDInsightHttpServicesAccess
-   Revoke-AzureHDInsightHttpServicesAccess

См. раздел [Администрирование HDInsight с использованием PowerShell][].

## <span id="hadoopcmd"></span></a> Открытие командной строки Hadoop

Чтобы подключиться к кластеру с помощью удаленного рабочего стола и использовать командную строку Hadoop, необходимо сначала включить доступ к кластеру с удаленного рабочего стола, как описано в предыдущем разделе.

**Открытие командной строки Hadoop**

1.  Выполните вход на [Портал управления Azure][].
2.  На левой панели щелкните **HDINSIGHT**. Вы увидите список развернутых кластеров Hadoop.
3.  Щелкните кластер HDInsight, к которому хотите подключиться.
4.  В верхней части страницы щелкните **КОНФИГУРАЦИЯ**.
5.  В нижней части страницы щелкните **Подключиться**.
6.  Щелкните **Открыть**.
7.  Введите свои учетные данные и нажмите кнопку **ОК**. Используйте имя пользователя и пароль, которые были настроены при создании кластера.
8.  Щелкните **Да**.
9.  На рабочем столе дважды щелкните элемент **Командная строка Hadoop**.

    ![HDI.HadoopCommandLine][]

    Дополнительные сведения о командах Hadoop см. в [Справочнике по командам Hadoop][].

На предыдущем снимке экрана в имя папки включен номер версии Hadoop. Номер версии может меняться в зависимости от версии компонентов Hadoop, установленных в кластере. Для ссылки на эти папки можно использовать переменные среды Hadoop. Например:

    cd %hadoop_home%
    cd %hive_home%
    cd %pig_home%
    cd %sqoop_home%   
    cd %hcatalog_home%

## <span id="nextsteps"></span></a>Дальнейшие действия

Из этой статьи вы узнали, как создать кластер HDInsight с помощью портала управления Azure и как открыть средство командной строки Hadoop. Для получения дополнительных сведений ознакомьтесь со следующими статьями:

-   [Администрирование HDInsight с использованием PowerShell][]
-   [Администрирование HDInsight с использованием межплатформенного интерфейса командной строки][]
-   [Подготовка кластеров HDInsight к работе][Подготовка кластеров HDInsight]
-   [Отправка заданий Hadoop программными средствами][]
-   [Приступая к работе с Azure HDInsight][]
-   [Какая версия Hadoop включена в Azure HDInsight?][]

  [Администрирование HDInsight с использованием PowerShell]: ../hdinsight-administer-use-powershell/
  [Администрирование HDInsight с использованием межплатформенного интерфейса командной строки]: ../hdinsight-administer-use-command-line/
  [Варианты приобретения]: http://azure.microsoft.com/en-us/pricing/purchase-options/
  [Предложения для участников]: http://azure.microsoft.com/en-us/pricing/member-offers/
  [Бесплатное пробное использование]: http://azure.microsoft.com/en-us/pricing/free-trial/
  [Подготовка кластеров HDInsight к работе]: #create
  [Настройка кластеров HDInsight]: #customize
  [Изменение имени пользователя и пароля для кластера HDInsight]: #password
  [Подключение к кластерам HDInsight с использованием RDP]: #rdp
  [Предоставление и отмена доступа к службам HTTP]: #httpservice
  [Открытие командной консоли Hadoop]: #hadoopcmd
  [Дальнейшие действия]: #nextsteps
  [Подготовка кластеров HDInsight]: ../hdinsight-provision-clusters/
  [Использование хранилища BLOB-объектов Azure с HDInsight]: ../hdinsight-use-blob-storage/
  [Создание учетной записи хранения]: ../storage-create-storage-account/
  [Портал управления Azure]: https://manage.windowsazure.com/
  [HDI.QuickCreate]: ./media/hdinsight-administer-use-management-portal/HDI.QuickCreateCluster.png
  [HDI.ClusterLanding]: ./media/hdinsight-administer-use-management-portal/HDI.ClusterLanding.PNG "Главная страница кластера"
  [Какая версия Hadoop включена в Azure HDInsight?]: ../hdinsight-component-versioning/
  [Отправка заданий Hadoop программными средствами]: ../hdinsight-submit-hadoop-jobs-programmatically/
  [службу поддержки Майкрософт]: http://azure.microsoft.com/en-us/support/options/
  [Включение удаленного рабочего стола]: #enablerdp
  [HDI.CreateRDPUser]: ./media/hdinsight-administer-use-management-portal/HDI.CreateRDPUser.png
  [HDI.HadoopCommandLine]: ./media/hdinsight-administer-use-management-portal/HDI.HadoopCommandLine.PNG "Командная строка Hadoop"
  [Справочнике по командам Hadoop]: http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/CommandsManual.html
  [Приступая к работе с Azure HDInsight]: ../hdinsight-get-started/
