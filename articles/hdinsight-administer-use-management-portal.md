<properties 
	pageTitle="Управление кластерами Hadoop в HDInsight с использованием портала Azure | Azure" 
	description="Сведения об управлении службой HDInsight. Создайте кластер HDInsight, откройте интерактивную консоль JavaScript и командную консоль Hadoop.." 
	services="hdinsight" 
	documentationCenter="" 
	authors="mumian" 
	manager="paulettm" 
	editor="cgronlun"/>

<tags 
	ms.service="hdinsight" 
	ms.workload="big-data" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="11/21/2014" 
	ms.author="jgao"/>



# Управление кластерами Hadoop в HDInsight с использованием портала управления Azure

На портале управления Azure можно подготовить кластеры Hadoop в HDInsight, изменить пароль пользователя Hadoop и активировать RDP, чтобы получить доступ к командной консоли Hadoop в кластере. Помимо портала управления доступны и другие средства для администрирования HDInsight. 

- Дополнительные сведения об администрировании HDInsight с помощью Azure PowerShell см. в разделе [Администрирование HDInsight с использованием PowerShell][hdinsight-admin-powershell].

- Дополнительные сведения об администрировании HDInsight с помощью межплатформенных программ командной строки см. в разделе [Администрирование HDInsight с использованием межплатформенного интерфейса командной строки][hdinsight-admin-cross-platform]. 

**Предварительные требования:**

Перед началом работы с этой статьей необходимо иметь следующее:

- **Подписка Azure**. Azure - это платформа на основе подписок. Сведения о получении подписки см. в разделе [Варианты приобретения][azure-purchase-options], [Предложения для участников][azure-member-offers] или [Бесплатное пробное использование][azure-free-trial].


##Содержание

* [Подготовка кластеров HDInsight к работе](#create)
* [Настройка кластеров HDInsight](#customize)
* [Изменение имени пользователя и пароля для кластера HDInsight](#password)
* [Подключение к кластерам HDInsight с использованием RDP](#rdp)
* [Создание самозаверяющего сертификата](#cert)
* [Предоставление и отмена доступа к службам HTTP](#httpservice)
* [Открытие командной консоли Hadoop](#hadoopcmd)
* [Дальнейшие действия](#nextsteps)

##<a id="create"></a> Подготовка кластеров HDInsight

Существует несколько методов для создания кластеров HDInsight, но в этой статье описывается только использование параметра "Быстрое создание" на портале управления Azure. Другие методы см. в разделе [Подготовка кластеров HDInsight к работе][hdinsight-provision].

Кластер HDInsight использует контейнер хранилища BLOB-объектов Azure в качестве файловой системы по умолчанию. Дополнительные сведения о том, каким образом хранилище BLOB-объектов Azure обеспечивает удобную работу с кластерами HDInsight, см. в разделе [Использование хранилища BLOB-объектов Azure с HDInsight][hdinsight-storage].

Учетную запись хранения Azure необходимо создать в том же центре обработки данных, в котором должна осуществляться подготовка кластера HDInsight. В настоящее время кластеры HDInsight можно подготовить в пяти центрах обработки данных: 

- Юго-Восточная Азия 
- Северная Европа
- Западная Европа 
- Восток США 
- Запад США 

Сведения о создании учетной записи хранения Azure см. в разделе [Создание учетной записи хранения][azure-create-storageaccount].


**Подготовка кластера HDInsight к работе**

1. Войдите на [портал управления Azure][azure-management-portal].
2. В нижней части страницы щелкните **СОЗДАТЬ**, затем последовательно щелкните **СЛУЖБЫ ДАННЫХ**, **HDINSIGHT** и **БЫСТРОЕ СОЗДАНИЕ**.

3. Укажите значения **Имя кластера**, **Размер кластера**, **Пароль администратора кластера** и **Учетная запись хранения** Azure, затем щелкните **Создать кластер HDInsight**. После создания и запуска кластера отображается статус *Running*.

	![HDI.QuickCreate][image-cluster-quickcreate]

	Если для создания кластера используется параметр "Быстрое создание", то для учетной записи пользователя Hadoop по умолчанию используется имя пользователя *admin*. Чтобы присвоить учетной записи другое имя пользователя, используйте параметр "Настраиваемое создание" вместо параметра "Быстрое создание". Имя учетной записи можно также изменить после завершения подготовки.

	Если для создания кластера используется параметр "Быстрое создание", то в указанной учетной записи хранения автоматически создается новый контейнер с именем кластера HDInsight. Чтобы изменить имя контейнера, которое будет использоваться по умолчанию в кластере, необходимо использовать параметр "Настраиваемое создание". 

	> [AZURE.NOTE] Если для кластера HDInsight выбрана учетная запись хранения Azure, единственный способ изменить ее - удалить кластер и создать новый кластер с нужной учетной записью хранения.

4. Щелкните вновь созданный кластер.  Он отображается на главной странице.

	![HDI.ClusterLanding][image-cluster-landing]


##<a id="customize"></a> Настройка кластеров HDInsight

HDInsight работает со множеством компонентов Hadoop. Список проверенных и поддерживаемых компонентов см. в разделе [Какая версия Hadoop включена в Azure HDInsight?][hdinsight-versions]. Настройка HDInsight может выполняться с использованием одного из следующих вариантов:

- Используйте параметры настройки кластера в Azure PowerShell или пакете SDK для HDInsight .NET во время подготовки кластера. Такие изменения конфигурации сохраняются на протяжении всего срока существования кластера и не попадают под воздействие операций повторного создания образа узла, которые периодически выполняет платформа Azure в рамках обслуживания. Дополнительные сведения об использовании параметров настройки кластера см. в разделе [Подготовка кластеров HDInsight к работе][hdinsight-provision].
- Некоторые собственные компоненты Java, такие как Mahout, Cascading, могут выполняться в кластере как JAR-файлы. Эти JAR-файлы можно распространить в хранилище BLOB-объектов Azure (WASB) и отправить в кластеры HDInsight с помощью механизмов отправки заданий Hadoop. Дополнительные сведения см. в разделе [Отправка заданий Hadoop программными средствами][hdinsight-submit-jobs]. 


	>[AZURE.NOTE] Если возникают проблемы при развертывании или вызове JAR-файлов в кластерах HDInsight, обратитесь в [службу поддержки Майкрософт][hdinsight-support].
	
	> Компонент Cascading не поддерживается службой HDInsight и на него не распространяется техническая поддержка Майкрософт. Списки поддерживаемых компонентов см. в разделе [Новые возможности версий кластеров, предоставляемых HDInsight][hdinsight-versions].


Установка пользовательского программного обеспечения в кластере с помощью подключения к удаленному рабочему столу не поддерживается. Не храните файлы на дисках головного узла, поскольку они будут потеряны, если потребуется повторно создать кластеры. Рекомендуется хранить файлы в хранилище BLOB-объектов Azure. Хранилище BLOB-объектов остается неизменным.

##<a id="password"></a> Изменение имени пользователя и пароля для кластера HDInsight
Кластер HDInsight может иметь две учетные записи пользователя.  Учетная запись пользователя кластера HDInsight создается в процессе подготовки.  Можно также создать учетную запись пользователя RDP для доступа к кластеру через RDP. См. раздел [Включение удаленного рабочего стола](#enablerdp).

**Изменение имени пользователя и пароля для кластера HDInsight**

1. Войдите на [портал управления Azure][azure-management-portal].
2. На левой панели щелкните **HDINSIGHT**. Появится список развернутых кластеров HDInsight.
3. Щелкните кластер HDInsight, для которого хотите переопределить имя пользователя и пароль.
4. В верхней части страницы щелкните **КОНФИГУРАЦИЯ**.
5. Щелкните **ВЫКЛ** рядом  с элементом **СЛУЖБЫ HADOOP**.
6. В нижней части страницы щелкните **СОХРАНИТЬ** и дождитесь отключения.
7. После отключения службы щелкните **ВКЛ** рядом с элементом **СЛУЖБЫ HADOOP**.
8. Введите **ИМЯ ПОЛЬЗОВАТЕЛЯ** и **НОВЫЙ ПАРОЛЬ**.  Это будут новые имя пользователя и пароль для кластера.
8. Щелкните **СОХРАНИТЬ**.


##<a id="rdp"></a> Подключение к кластерам HDInsight с использованием RDP

Учетные данные, указанные при создании кластера, предоставляют доступ к службам в кластере, но не дают доступа к самому кластеру через удаленный рабочий стол. Доступ через удаленный рабочий стол по умолчанию отключен, поэтому для прямого доступа к кластеру с его помощью требуется некоторая дополнительная настройка после создания.

**Включение удаленного рабочего стола**

1. Войдите на [портал управления Azure][azure-management-portal].
2. На левой панели щелкните **HDINSIGHT**. Появится список развернутых кластеров HDInsight.
3. Щелкните кластер HDInsight, к которому хотите подключиться.
4. В верхней части страницы щелкните **КОНФИГУРАЦИЯ**.
5. В нижней части страницы щелкните **ВКЛЮЧИТЬ УДАЛЕННЫЙ ДОСТУП**.
6. В мастере **Настройка удаленного рабочего стола** введите имя пользователя и пароль для удаленного рабочего стола. Обратите внимание, что имя пользователя должно отличаться от имени пользователя, которое использовалось при создании кластера (по умолчанию *admin* при использовании параметра "Быстрое создание"). Введите дату окончания срока действия в поле **ИСТЕКАЕТ**. Обратите внимание, что дата окончания срока действия должна быть в будущем и не позднее чем через неделю от сегодняшней даты. В качестве времени окончания срока действия по умолчанию предполагается полночь указанной даты. Затем щелкните значок флажка.

	![HDI.CreateRDPUser][image-hdi-create-rpd-user]

	Дата окончания срока действия должна быть в будущем и не позднее чем через семь дней от сегодняшнего дня. Время - полночь выбранной даты.

> [AZURE.NOTE] После включения RDP для кластера прежде чем подключаться к кластеру, вам необходимо обновить страницу.
 
**Подключение к кластеру с помощью RDP**

1. Войдите на [портал управления Azure][azure-management-portal].
2. На левой панели щелкните **HDINSIGHT**. Появится список развернутых кластеров HDInsight.
3. Щелкните кластер HDInsight, к которому хотите подключиться.
4. В верхней части страницы щелкните **КОНФИГУРАЦИЯ**.
5. Щелкните **ПОДКЛЮЧИТЬСЯ**, а затем следуйте инструкциям.

##<a id="cert"></a>Создание самозаверяющего сертификата

Для выполнения любых операций на кластере с использование .NET SDK требуется создать на рабочей станции самозаверяющий сертификат, а также загрузить его в подписку Azure. Выполнить данную операцию достаточно всего один раз. Один и тот же сертификат можно устанавливать и на других машинах в течение всего срока его действия.

**Создание самозаверяющего сертификата**

1. Создайте самозаверяющий сертификат, который используется для проверки подлинности запросов. Чтобы создать сертификат, можно использовать службы IIS или команду [makecert][makecert-info].
 
2. Перейдите к расположению сертификата, щелкните сертификат правой кнопкой мыши, выберите команду **Установить сертификат** и установите сертификат в личное хранилище на компьютере. Измените свойства сертификата, чтобы назначить ему понятное имя.

3. Выполните импорт сертификата в портал управления Azure. На портале управления в нижней левой части страницы щелкните **Параметры**, а затем выберите **Управление сертификатами**. В нижней части страницы щелкните **Отправить** и выполните указания для отправки CER-файла, созданного на предыдущем шаге.

	![HDI.ClusterCreate.UploadCert][image-hdiclustercreate-uploadcert]


##<a id="httpservice"></a> Предоставление и отмена доступа к службам HTTP

В кластерах HDInsight имеются следующие веб-службы HTTP (все эти службы имеют конечные точки RESTful):

- ODBC
- JDBC
- Ambari
- Oozie
- Templeton

По умолчанию эти службы предоставляются для доступа. Вы можете сами отменять и предоставлять доступ с портала управления. 

>[AZURE.NOTE] Предоставляя или отменяя доступ, вы сбрасываете имя пользователя и пароль кластера.

**Предоставление или отмена доступа к веб-службам HTTP**

1. Войдите на [портал управления Azure][azure-management-portal].
2. На левой панели щелкните **HDINSIGHT**. Появится список развернутых кластеров HDInsight.
3. Щелкните кластер HDInsight, который хотите настроить.
4. В верхней части страницы щелкните **КОНФИГУРАЦИЯ**.
5. Щелкните **ВКЛ** или **ВЫКЛ** рядом с элементом **СЛУЖБЫ HADOOP**.  
6. Введите **ИМЯ ПОЛЬЗОВАТЕЛЯ** и **НОВЫЙ ПАРОЛЬ**.  Это будут новые имя пользователя и пароль для кластера.
7. Щелкните **СОХРАНИТЬ**.

Это можно сделать также с помощью командлетов Azure PowerShell.

- Grant-AzureHDInsightHttpServicesAccess
- Revoke-AzureHDInsightHttpServicesAccess

См. раздел [Администрирование HDInsight с использованием PowerShell][hdinsight-admin-powershell].

##<a id="hadoopcmd"></a> Открытие командной строки Hadoop

Чтобы подключиться к кластеру с помощью удаленного рабочего стола и использовать командную строку Hadoop, необходимо сначала включить доступ к кластеру с удаленного рабочего стола, как описано в предыдущем разделе. 

**Открытие командной строки Hadoop**

1. Войдите на [портал управления Azure][azure-management-portal].
2. На левой панели щелкните **HDINSIGHT**. Вы увидите список развернутых кластеров Hadoop.
3. Щелкните кластер HDInsight, к которому хотите подключиться.
3. В верхней части страницы щелкните **КОНФИГУРАЦИЯ**.
4. В нижней части страницы щелкните **Подключиться**.
5. Щелкните **Открыть**.
6. Введите свои учетные данные и нажмите кнопку **ОК**.  Используйте имя пользователя и пароль, которые были настроены при создании кластера.
7. Щелкните **Да**.
8. На рабочем столе дважды щелкните элемент **Командная строка Hadoop**.
		
	![HDI.HadoopCommandLine][image-hadoopcommandline]


	Дополнительные сведения о командах Hadoop см. в [справочнике по командам Hadoop][hadoop-command-reference].

На предыдущем снимке экрана в имя папки включен номер версии Hadoop. Номер версии может меняться в зависимости от версии компонентов Hadoop, установленных в кластере. Для ссылки на эти папки можно использовать переменные среды Hadoop.  Например:

	cd %hadoop_home%
	cd %hive_home%
	cd %pig_home%
	cd %sqoop_home%   
	cd %hcatalog_home%

##<a id="nextsteps"></a> Дальнейшие действия
Из этой статьи вы узнали, как создать кластер HDInsight с помощью портала управления Azure и как открыть средство командной строки Hadoop. Для получения дополнительных сведений ознакомьтесь со следующими статьями:

* [Администрирование HDInsight с использованием PowerShell][hdinsight-admin-powershell]
* [Администрирование HDInsight с использованием межплатформенного интерфейса командной строки][hdinsight-admin-cross-platform]
* [Подготовка кластеров HDInsight к работе][hdinsight-provision]
* [Отправка заданий Hadoop программными средствами][hdinsight-submit-jobs]
* [Приступая к работе с Azure HDInsight][hdinsight-get-started]
* [Какая версия Hadoop включена в Azure HDInsight?][hdinsight-versions]

[hdinsight-admin-cross-platform]: ../hdinsight-administer-use-command-line/

[hdinsight-admin-powershell]: ../hdinsight-administer-use-powershell/
[hdinsight-get-started]: ../hdinsight-get-started/
[hdinsight-provision]: ../hdinsight-provision-clusters/
[hdinsight-submit-jobs]: ../hdinsight-submit-hadoop-jobs-programmatically/
[hdinsight-storage]: ../hdinsight-use-blob-storage/
[hdinsight-versions]: ../hdinsight-component-versioning/
[hdinsight-support]: http://azure.microsoft.com/ru-ru/support/options/
[makecert-info]: http://msdn.microsoft.com/ru-ru/library/bfsktky3(v=vs.110).aspx

[azure-create-storageaccount]: ../storage-create-storage-account/ 
[azure-management-portal]: https://manage.windowsazure.com/

[azure-purchase-options]: http://azure.microsoft.com/ru-ru/pricing/purchase-options/
[azure-member-offers]: http://azure.microsoft.com/ru-ru/pricing/member-offers/
[azure-free-trial]: http://azure.microsoft.com/ru-ru/pricing/free-trial/


[hadoop-command-reference]: http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/CommandsManual.html

[image-cluster-quickcreate]: ./media/hdinsight-administer-use-management-portal/HDI.QuickCreateCluster.png
[image-cluster-landing]: ./media/hdinsight-administer-use-management-portal/HDI.ClusterLanding.PNG "Cluster landing page"
[image-hdi-create-rpd-user]: ./media/hdinsight-administer-use-management-portal/HDI.CreateRDPUser.png
[image-hadoopcommandline]: ./media/hdinsight-administer-use-management-portal/HDI.HadoopCommandLine.PNG "Hadoop command line"
[image-hdiclustercreate-uploadcert]: ./media/hdinsight-administer-use-management-portal/HDI.ClusterCreate.UploadCert.png

<!--HONumber=42-->
