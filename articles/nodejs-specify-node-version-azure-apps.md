<properties linkid="develop-nodejs-common-tasks-specifying-a-node-version" urlDisplayName="Установка версии Node.js" pageTitle="Установка версии Node.js" metaKeywords="" description="" metaCanonical="" services="" documentationCenter="Node.js" title="Установка версии Node.js в приложении Azure" authors="larryfr" solutions="" manager="paulettm" editor="mollybos" />





# Установка версии Node.js в приложении Azure

При размещении приложения Node.js может потребоваться, чтобы приложение использовало конкретную версию Node.js. Существует несколько способов это сделать для приложений, размещенных в Azure.

##Версия по умолчанию

В настоящее время Azure предоставляет версии Node.js 0.6.17, 0.6.20 и 0.8.4. Если не указано иначе, по умолчанию будет использоваться версия 0.6.20.

<div class="dev-callout">
<strong>Примечание.</strong>
<p>При первом размещении приложения в облачной службе Azure (веб-роль или рабочая роль), Azure будет пытаться использовать ту же версию Node.js, что установлена в вашей среде разработки, если она совпадает с одной из версий по умолчанию, доступных в Azure.</p>
</div>


##Управление версиями с использованием package.json

Можно указать требуемую версию Node.js, добавив в файл **package.json** следующий текст:

	"engines":{"node":version}

Где *версия* указывает на номер конкретной версии, которую нужно использовать. Можно задать более сложные условия для версии, например:

	"engines":{"node": "0.6.22 || 0.8.x"}

Поскольку 0.6.22 не является одной из версий, доступных в среде размещения, будет использоваться самая новая из доступных версий серии 0.8 вместо - 0.8.4.

##Управление версиями облачных служб с использованием PowerShell

В случае размещения приложения в облачной службе и при использовании для развертывания Azure PowerShell, версию Node.js по умолчанию можно переопределить с помощью командлета **Set-AzureServiceProjectRole**. Например:

	Set-AzureServiceProjectRole WebRole1 node 0.8.4

Можно также использовать **Get-AzureServiceProjectRoleRuntime** для получения списка версий Node.js, доступных для приложений, размещенных в виде облачной службы.

##С помощью настраиваемой версии веб-сайтов Azure

Хотя Azure предоставляет несколько версий Node.js по умолчанию, может потребоваться версия, не доступная по умолчанию. Если приложение размещено как веб-сайт Azure, это можно сделать с помощью файла **iisnode.yml**. Ниже рассмотрен процесс использования настраиваемой версии Node.Js на веб-сайте Azure:

1. Создайте новый каталог, а затем создайте в каталоге файл **server.js**. Файл **server.js** должен содержать следующее:

		var http = require('http');
		http.createServer(function(req,res) {
		  res.writeHead(200, {'Content-Type': 'text/html'});
		  res.end('Hello from Azure running node version: ' + process.version + '</br>');
		}).listen(process.env.PORT || 3000);

	Будет показана версия Node.js, используемая на момент просмотра веб-сайта.

2. Создайте новый веб-сайт и запишите его имя. Например, ниже представлен пример использования [средств командной строки Azure] для создания нового веб-сайта Azure с именем **mywebsite** с последующим включением репозитория Git для веб-сайта.

		azure site create mywebsite --git

3. Создайте новый каталог с именем **bin**, являющийся дочерним по отношению к каталогу, содержащему файл **server.js**.

4. Загрузите конкретную версию **node.exe** (версию Windows), которую нужно использовать вместе с приложением. Например, в следующем примере используется **curl** для загрузки версии 0.8.1:

		curl -O http://nodejs.org/dist/v0.8.1/node.exe

	Сохраните файл **node.exe** в ранее созданный каталог **bin**.

5. Создайте файл **iisnode.yml** в том же каталоге, что и файл **server.js**, и добавьте следующее содержимое в файл **iisnode.yml**:

		nodeProcessCommandLine: "D:\home\site\wwwroot\bin\node.exe"

	Этот путь указывает на размещение файла **node.exe** в проекте после публикации приложения на веб-сайте Azure.

6. Опубликуйте приложение. Например, поскольку ранее был создан веб-сайт с помощью параметра--git, следующие команды добавят файлы приложения в локальное хранилище Git и передадут их в хранилище веб-сайта:

		git add .
		git commit -m "testing node v0.8.1"
		git push azure master

	После публикации приложения откройте веб-сайт в обозревателе. Должно появиться сообщение "Hello from Azure running node version: v0.8.1".

##Дальнейшие действия

Теперь, когда вы научились устанавливать версии Node.js, используемые приложением, узнайте, как [работать с модулями], [строить и развертывать веб-сайт Node.js] и [использовать средства командной строки Azure для Mac и Linux].

[использовать средства командной строки Azure для Mac и Linux]: /ru-ru/develop/nodejs/how-to-guides/command-line-tools/
[средств командной строки Azure]: /ru-ru/develop/nodejs/how-to-guides/command-line-tools/
[работать с модулями]: /ru-ru/develop/nodejs/common-tasks/working-with-node-modules/
[строить и развертывать веб-сайт Node.js]: /ru-ru/develop/nodejs/tutorials/create-a-website-(mac)/

