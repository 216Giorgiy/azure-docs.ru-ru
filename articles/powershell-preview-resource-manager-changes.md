<properties
	pageTitle="Изменения в диспетчере ресурсов Azure PowerShell 1.0 Preview | Microsoft Azure"
	description="Описывает изменения в командлетах диспетчера ресурсов Azure PowerShell 1.0 Preview."
	services="azure-resource-manager"
	documentationCenter="na"
	authors="ravbhatnagar"
	manager="ryjones"
	editor=""/>

<tags
	ms.service="azure-resource-manager"
	ms.devlang="na"
	ms.topic="article"
	ms.tgt_pltfrm="powershell"
	ms.workload="na"
	ms.date="10/09/2015"
	ms.author="gauravbh;tomfitz"/>

#Изменения в командлетах PowerShell для управления диспетчером ресурсов Azure

В выпуске Azure PowerShell 1.0 Preview мы внесли ряд усовершенствований в командлеты управления. Кроме этих усовершенствований, в выпуске 1.0 Preview также были изменены имена командлетов. Некоторые из таких усовершенствований подразумевают значительные изменения, которые могут нарушать работу существующих сценариев. Мы надеемся, что эти изменения помогут сделать вашу работу лучше и удобнее. Мы будем рады получить от вас отзывы об этих изменениях и обязательно учтем их при выпуске Azure PowerShell 1.0. Поэтому мы просим вас оценить внесенные изменения и поделиться с нами своим мнением.

##Разделение функций развертывания шаблона из групп ресурсов

В выпуске 0.9.8 все параметры развертывания шаблона также присутствовали в командлетах групп ресурсов. Поэтому в New-AzureResourceGroup вы могли создать новую группу ресурсов, а также указать сведения о шаблонах, которые хотите развернуть. Те же функциональные возможности развертывания шаблона присутствовали и в New-AzureResourceGroupDeployment. В выпуске 1.0 preview мы разделили эту функциональность. Теперь New-AzureRMResourceGroup предоставляет функциональные возможности создания новых групп ресурсов, а New-AzureRmResourceGroupDeployment предоставляет функциональные возможности развертывания шаблона. Вы можете воспользоваться конвейером, чтобы совместно использовать две эти функциональные возможности. Это облегчает понимание механизмов работы и использование командлетов.

##Консолидированные командлеты журналов аудита

Для журналов аудита имеется огромное количество командлетов, обеспечивающих ведение журналов в различных областях, например Get-AzureResourceProviderLog, Get-AzureResourceGroupLog, Get-AzureSubscriptionIdLog и Get-AzureResourceLog. Для получения журналов часто приходится выполнять сразу несколько командлетов журналов. Такая процедура не была оптимальной. Мы обеспечили консолидацию этих функций в одном командлете, который можно вызывать в различных областях с помощью параметров. Теперь можно вызвать комадлет Get-AzureRmLog с соответствующим параметром для указания области.

В версии 0.9.8, чтобы получить журналы для конкретной группы ресурсов, требовалось запустить примерно следующую команду:

    Get-AzureResourceGroupLog -ResourceGroup <resource-group-name>

Чтобы получить журналы для определенного ресурса, нужно было выполнить следующую команду:

     Get-AzureResourceLog -ResourceId
     /subscriptions/#######-####-####-####-############/resourcegroups/<resource-group-name>/providers/<provider-namespace>/
     <resource-name>

В предварительной версии 1.0 те же данные можно получить, запустив командлеты, указанные ниже. Для получения журналов для группы ресурсов запустите:

     Get-AzureRmLog -ResourceGroup <resource-group-name>
     
Для получения журналов для определенного ресурса запустите:

     Get-AzureRmLog -ResourceId /subscriptions/#######-####-####-####-############/resourcegroups/<resource-group-name>
     /providers/<provider-namespace>/<resource-name>

##Изменения в командлете Get для ресурсов и групп ресурсов

Мы внесли изменения в командлеты Get-AzureRmResource и Get-AzureRmResourceGroup, чтобы они направляли запросы непосредственно поставщику ресурсов. Мы вынесли функциональные возможности по выполнению запросов к кэшу в новые командлеты с именем Find-AzureRmResource*. Если вы хотите найти группу ресурсов с определенным тегом, можете воспользоваться новым командлетом Find-AzureRmResourceGroup. С учетом этого изменения параметры для выполнения запросов по тегам были удалены из командлетов Get-AzureRmResource и Get-AzureRmResourceGroup.

В версии 0.9.8 для поиска всех групп ресурсов, которые содержат определенный тег, нужно было выполнить команду:

    Get-AzureResourceGroup -Tag <tag-object>

В предварительной версии 1.0 для этого нужно запустить командлет:

    Find-AzureRmResourceGroup -Tag <tag-object>
    
##Удалены командлеты Test-AzureResource и Test-AzureResourceGroup.

Эти командлеты не обеспечивали надежную работу для всех типов сценариев и ресурсов. Сейчас мы работаем над более оптимальным решением для реализации данных функциональных возможностей. При этом мы решили отказаться от использования таких ненадежных командлетов. Мы полностью удалили их в этом выпуске и собираемся добавить надежное решение в одном из будущих выпусков.

##Усовершенствования командлета Get-AzureRmResourceProvider

Теперь вы можете использовать командлет Get-AzureRmResourceProvider для получения сведений о расположении для поставщиков ресурсов. Он предоставит сведения о том, какие поставщики и типы доступны в определенном регионе. Кроме того, этот командлет позволяет получить список доступных расположений для конкретного поставщика. Мы удалили командлет Get-AzureLocation, так как все сведения о расположении можно получить через командлет Get-AzureRmResourceProvider.

В версии 0.9.8 для получения списка всех поддерживаемых расположений требовалось выполнить команду:

     Get-AzureLocation

А для получения состояния регистрации поставщиков требовалось выполнить команду:

     Get-AzureProvider -ListAvailable

В предварительной версии 1.0 выполнить оба действия можно с помощью всего одного командлета, как показано ниже:

     Get-AzureRmResourceProvider -Location <location>

Эта команда отфильтрует результаты, оставив только поставщиков и типы, доступные в указанном расположении.

Результат также можно отфильтровать по конкретному поставщику, как показано ниже:

     Get-AzureRmResourceProvider -ProviderNamespace <provider-namespace>

Эта команда отфильтрует результаты, оставив только расположения, поддерживаемые для указанного поставщика.

##Командлеты политик

Мы добавили поддержку политик в диспетчер ресурсов Azure. В этот выпуск были добавлены командлеты PowerShell для управления политиками. Дополнительные сведения о политиках см. в разделе [Применение политик для управления ресурсами и контроля доступа](resource-manager-policy.md).

<!---HONumber=Oct15_HO4-->