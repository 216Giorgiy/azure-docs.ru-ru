<properties 
	pageTitle="Начало работы с Поиском Azure на NodeJS" 
	description="Пошаговое создание пользовательского приложения Поиска Azure с использованием NodeJS в качестве языка программирования." 
	services="search" 
	documentationCenter="" 
	authors="HeidiSteen" 
	manager="mblythe" 
	editor=""/>

<tags 
	ms.service="search" 
	ms.devlang="na" 
	ms.workload="search" 
	ms.topic="article" 
	ms.tgt_pltfrm="na" 
	ms.date="03/25/2015" 
	ms.author="heidist"/>

#Начало работы с Поиском Azure на NodeJS#

Узнайте, как создать собственное приложение поиска на NodeJS на базе Поиска Azure. В этом учебнике [REST API службы поиска Azure](https://msdn.microsoft.com/library/dn798935.aspx) используется для создания для создания объектов и операций, используемых в этом уроке.

Мы использовали [NodeJS](https://nodejs.org) и NPM, [Sublime Text 3](http://www.sublimetext.com/3) и Windows PowerShell в Windows 8.1 для разработки и проверки этого кода.

Чтобы запустить этот пример, вам потребуется служба поиска Azure, в которой можно зарегистрироваться на [портале Azure](https://portal.azure.com).

> [AZURE.TIP]Загрузите исходный код для этого учебника в разделе [AzureSearchNodeJSIndexerDemo](http://go.microsoft.com/fwlink/p/?LinkId=530198).

##О данных##

Этот пример приложения использует данные [Геологической службы США \(USGS\)](http://geonames.usgs.gov/domestic/download_data.htm), отфильтрованные по штату Род-Айленд для сокращения размера набора данных. Мы будем использовать эти данные при создании приложения поиска, возвращающего важные здания, такие как больницы и школы, а также геологические объекты, например реки, озера и вершины.

В этом приложении программа **DataIndexer** создает и загружает индекс с помощью конструкции [Indexer](https://msdn.microsoft.com/library/azure/dn798918.aspx), получая отфильтрованный набор данных USGS из общей Базы данных SQL Azure. Учетные данные и сведения о подключении к сетевому источнику данных предоставляются в программном коде. Дальнейшая настройка не требуется.

> [AZURE.NOTE]Мы применили фильтр к этому набору данных, чтобы не превысить ограничение бесплатной ценовой категории в 10 000 документов. Если используется стандартная категория, это ограничение не накладывается. Подробнее об ограничениях каждой ценовой категории см. в разделе [Ограничения](https://msdn.microsoft.com/library/azure/dn798934.aspx).

##Создание службы##

1. Войдите в [портал Azure](https://portal.azure.com).

2. На навигационной панели последовательно щелкните **Создать** \| **Данные + хранилище** \| **Поиск**.
 
     ![][1]

3. Настройте имя службы, ценовую категорию, группу ресурсов, подписку и расположение. Эти параметры обязательны и не могут быть изменены после завершения подготовки службы.

     ![][2]

	- **Имя службы** должно быть уникальным и содержать не более 15 строчных символов без пробелов. Это имя становится частью конечной точки службы поиска Azure. Подробнее о правилах именования см. в разделе [Правила именования](https://msdn.microsoft.com/library/azure/dn857353.aspx). 
	
	- **Ценовая категория** определяет доступную емкость и порядок выставления счетов. Оба уровня обеспечивают аналогичные функции на разных уровнях ресурсов.
	
		- **Бесплатная служба** выполняется на кластерах, используемых совместно с другими подписчиками. Она предоставляет достаточный объем для прохождения учебного курса и написания экспериментального кода, однако она не предназначена для промышленной эксплуатации. Как правило, развертывание бесплатной службы занимает всего несколько минут.
		- **Стандартная служба** выполняется на выделенных ресурсах и отличается высокой масштабируемостью. Изначально стандартная служба включает одну реплику и один раздел, но после создания службы вы можете изменить ее емкость. Развертывание стандартной службы занимает больше времени \(обычно около пятнадцати минут\).
	
	- **Группы ресурсов** — это контейнеры для служб и ресурсов, используемых для одной и той же цели. Например, если вы создаете пользовательские приложения поиска на основе Поиска Azure, веб-сайтов Azure, хранилища BLOB-объектов Azure, то можно создать группу ресурсов, которая будет объединять все эти службы вместе на страницах портала управления.
	
	- В разделе **Подписка** вы можете выбрать одну из нескольких подписок \(при наличии\).
	
	- **Расположение** — это регион центра обработки данных. В настоящее время все ресурсы должны выполняться в одном центре обработки данных. Распределение ресурсов между несколькими центрами обработки данных не поддерживается.

4. Нажмите кнопку **Создать**, чтобы подготовить службу.

Следите за уведомлениями на навигационной панели. Когда служба будет готова к использованию, отобразится соответствующее уведомление.

<a id="sub-2"></a>
##Поиск имени службы и ключа API службы поиска Azure

После создания службы можно вернуться на портал, чтобы получить URL-адрес или `api-key`. Для подключения к службе поиска вам потребуется как URL-адрес, так и `api-key`, чтобы проверить подлинность при вызове.

1. На навигационной панели нажмите кнопку **Главная** и щелкните службу поиска, чтобы открыть панель мониторинга службы. 

2. На панели мониторинга службы вы увидите плитки, указывающие на важную информацию, а также значок ключа для доступа к ключам администратора.

  	![][3]

3. Скопируйте URL-адрес службы, ключ администратора и ключ запроса. Все эти три элемента потребуются вам позже, при добавлении их в файл config.js.

##Загрузка примеров файлов

Загрузить пример можно одним из следующих способов.

1. Перейдите в раздел [AzureSearchNodeJSIndexerDemo](http://go.microsoft.com/fwlink/p/?LinkId=530198).
2. Нажмите кнопку **Загрузить ZIP-файл**, сохраните ZIP-файл, после чего извлеките все содержащиеся в нем файлы.

Все последующие изменения и операторы выполнения будут применяться к файлам в этой папке.

Кроме того, при наличии GIT в операторе пути вы можете открыть окно PowerShell и ввести `git clone https://github.com/EvanBoyle/AzureSearchNodeJSIndexerDemo.git`

##Добавление URL-адреса службы поиска и ключа API в файл config.js

С помощью ранее скопированного URL-адреса и ключей API укажите URL-адрес, ключ администратора и ключ запроса в файле конфигурации.

Ключи администратора предоставляют полный контроль над операциями службы, включая создание или удаление индекса и загрузку документов. Напротив, ключи запросов предназначены только для операций чтения, которые, как правило, используются клиентскими приложениями, подключающимися к Поиску Azure.

В этом примере мы добавили ключ запроса, чтобы закрепить лучший метод использования ключа запроса в клиентских приложениях.

На следующем снимке экрана показан файл **config.js**, открытый в текстовом редакторе, с обозначенными соответствующими записями, чтобы вы могли видеть места в файле, в которые необходимо добавить значения, допустимые для вашей службы поиска.

![][5]


##Размещение среды выполнения для примера

Для примера требуется HTTP-сервер, который вы можете установить глобально с помощью npm.

Выполните следующие команды в окне PowerShell.

1. Перейдите в папку, содержащую файл **package.json**.
2. Введите `npm install`.
2. Введите `npm install -g http-server`.

##Создание индекса и запуск приложения

1. Введите `npm run indexDocuments`. 
2. Введите `npm run build`.
3. Введите `npm run start_server`.
4. В браузере откройте страницу `http://localhost:8080/index.html`

##Поиск по данным USGS##

Набор данных USGS включает записи, относящиеся к штату Род-Айленд. Если нажать кнопку **Поиск** в пустом поле поиска, вы получите 50 первых записей. Это настройка по умолчанию.

Если ввести условие поиска, поисковая система будет искать конкретные записи. Попробуйте ввести региональное имя или название. "Роджер Уильямс" был первым губернатором Род-Айленда. В его честь названы многие парки, здания и школы.

![][9]

Вы также можете попробовать одно из следующих условий поиска:

- Pawtucket
- Pembroke
- гусь +мыс


##Дальнейшие действия##

Это первый учебник по Поиску Azure на базе NodeJS и набора данных USGS. Мы будем постепенно расширять этот учебник, чтобы рассказать о дополнительных функциях поиска, которые вы можете использовать в собственных решениях.

Если у вас уже есть опыт работы с Поиском Azure, вы можете использовать этот пример как фундамент для средств подбора \(запросы опережающего ввода или автозаполнения\), фильтров и фасетной навигации. Вы также можете улучшить страницу результатов поиска путем добавления счетчиков и пакетной обработки документов, чтобы пользователи могли просматривать результаты постранично.

Новичок в Поиске Azure? Мы рекомендуем ознакомиться с другими учебниками, чтобы получить представление о том, что вы можете создать. Посетите нашу [страницу документации](http://azure.microsoft.com/documentation/services/search/), чтобы найти дополнительные ресурсы. Вы также можете перейти по ссылкам в нашем [списке видео и учебников](https://msdn.microsoft.com/library/azure/dn798933.aspx), чтобы получить дополнительные сведения.

<!--Image references-->
[1]: ./media/search-get-started-nodejs/create-search-portal-1.PNG
[2]: ./media/search-get-started-nodejs/create-search-portal-2.PNG
[3]: ./media/search-get-started-nodejs/create-search-portal-3.PNG
[5]: ./media/search-get-started-nodejs/AzSearch-NodeJS-configjs.png
[9]: ./media/search-get-started-dotnet/rogerwilliamsschool.png
<!--HONumber=54-->