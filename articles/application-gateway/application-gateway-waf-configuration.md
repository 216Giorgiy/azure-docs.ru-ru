---
title: Предельный размер запросов брандмауэра веб-приложения и списки исключений в шлюзе приложений Azure — портал Azure | Документы Майкрософт
description: В этой статье приводятся сведения о настройке предельного размера запросов брандмауэра веб-приложения и списков исключений в шлюзе приложений на портале Azure.
documentationcenter: na
services: application-gateway
author: vhorne
manager: jpconnock
ms.service: application-gateway
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.custom: ''
ms.workload: infrastructure-services
ms.date: 09/24/2018
ms.author: victorh
ms.openlocfilehash: 995e003422d5a94fe57174dc9733c870e4e003aa
ms.sourcegitcommit: 32d218f5bd74f1cd106f4248115985df631d0a8c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/24/2018
ms.locfileid: "46965511"
---
# <a name="web-application-firewall-request-size-limits-and-exclusion-lists-public-preview"></a>Предельный размер запросов брандмауэра веб-приложения и списки исключений (общедоступная предварительная версия)

Брандмауэр веб-приложения (WAF) шлюза приложений Azure обеспечивает защиту веб-приложений В этой статье описывается настройка предельного размера запросов WAF и списков исключений.

> [!IMPORTANT]
> Настройка предельного размера запросов WAF и списков исключений находится на этапе общедоступной предварительной версии. Предварительная версия предоставляется без соглашения об уровне обслуживания. Не рекомендуем использовать ее в рабочей среде. Некоторые функции могут не поддерживаться или их возможности могут быть ограничены. См. [дополнительные условия использования для предварительных версий Microsoft Azure](https://azure.microsoft.com/support/legal/preview-supplemental-terms/).

## <a name="waf-request-size-limits"></a>Предельный размер запросов WAF
Брандмауэр веб-приложения позволяет пользователям настроить предельный размер запроса с нижней и верхней границей. Доступны следующие две конфигурации предельного размера:
- Поле "Максимальный размер текста запроса" указано в КБ и определяет общий предельный размер запроса, за исключением отправок файлов. Значение поля может варьироваться от 1 КБ (минимум) до 128 КБ (максимум). Значение по умолчанию — 128 КБ.
- Поле "Предельный размер отправки файла" указывается в МБ и определяет максимальный размер отправки файла. Минимальное значение поля — 1 МБ, максимальное — 500 МБ. Значение по умолчанию — 100 МБ.

WAF также позволяет настроить ручку, включающую и отключающую проверку текста запроса. По умолчанию проверка включена. Если проверка текста запроса отключена, WAF не проверяет содержимое текста сообщения HTTP. В таких случаях WAF продолжит применять свои правила к заголовкам, файлам cookie и URI. Если проверка текста запроса отключена, то поле максимального размера текста запроса будет неприменимо и его невозможно будет настроить. Отключение проверки текста запроса позволяет отправлять в WAF сообщения размером свыше 128 КБ. Однако текст сообщения не проверяется на наличие уязвимостей.

## <a name="waf-exclusion-lists"></a>Списки исключений WAF

Списки исключений WAF позволяют пользователям пропустить некоторые атрибуты запроса при проверке WAF. Распространенный пример — вставленные токены Active Directory, которые используются для проверки подлинности или полей пароля. Такие атрибуты часто могут содержать специальные символы, которые активируют ложные срабатывания правил WAF. После добавления атрибута в список исключений WAF он не учитывается ни одним настроенным и активным правилом WAF. Списки исключений применяются глобально.
Вы можете добавлять заголовки запросов, запрашивать файлы cookie или аргументы строки запроса в списках исключений WAF. Можно указать точный заголовок запроса, файл cookie или атрибут строки запроса либо при необходимости задать частичное соответствие. Поддерживаемые операторы критериев соответствия: 
- **Equals**: этот оператор используется для точного совпадения. Например, для выбора заголовка **bearerToken**”** используйте оператор equals с селектором **bearerToken**. 
- **Starts with**: этот оператор сопоставляет все поля, которые начинаются с указанного значения селектора. 
- **Ends with**: этот оператор сопоставляет все поля запроса, заканчивающиеся на указанное значение селектора. 
- **Contains**: этот оператор сопоставляет все поля запроса, которые содержат указанное значение селектора.

Во всех случаях при сопоставлении не учитывается регистр, а регулярные выражения запрещено использовать в качестве селекторов.

## <a name="next-steps"></a>Дополнительная информация

После настройки параметров WAF вы можете узнать, как просматривать журналы WAF. Дополнительные сведения см. в разделе [Журналы диагностики](application-gateway-diagnostics.md#diagnostic-logging).