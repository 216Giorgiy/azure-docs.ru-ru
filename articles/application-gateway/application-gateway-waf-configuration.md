---
title: Предельный размер запросов брандмауэра веб-приложения и списки исключений в Шлюзе приложений Azure — портал Azure
description: В этой статье приводятся сведения о настройке предельного размера запросов брандмауэра веб-приложения и списков исключений в шлюзе приложений на портале Azure.
services: application-gateway
author: vhorne
ms.service: application-gateway
ms.workload: infrastructure-services
ms.date: 11/6/2018
ms.author: victorh
ms.openlocfilehash: bed406f90c8da62919337c1fa9f30221b0ba8d90
ms.sourcegitcommit: 7862449050a220133e5316f0030a259b1c6e3004
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/22/2018
ms.locfileid: "53752730"
---
# <a name="web-application-firewall-request-size-limits-and-exclusion-lists"></a>Предельный размер запросов брандмауэра веб-приложения и списки исключений

Брандмауэр веб-приложения (WAF) шлюза приложений Azure обеспечивает защиту веб-приложений В этой статье описывается настройка предельного размера запросов WAF и списков исключений.

## <a name="waf-request-size-limits"></a>Предельный размер запросов WAF

![Предельный размер запросов](media/application-gateway-waf-configuration/waf-requestsizelimit.png)

Брандмауэр веб-приложения позволяет пользователям настроить предельный размер запроса с нижней и верхней границей. Доступны следующие две конфигурации предельного размера:

- Поле "Максимальный размер текста запроса" указано в КБ и определяет общий предельный размер запроса, за исключением отправок файлов. Значение поля может варьироваться от 1 КБ (минимум) до 128 КБ (максимум). Значение по умолчанию — 128 КБ.
- Поле "Предельный размер отправки файла" указывается в МБ и определяет максимальный размер отправки файла. Минимальное значение поля — 1 МБ, максимальное — 500 МБ. Значение по умолчанию — 100 МБ.

WAF также позволяет настроить ручку, включающую и отключающую проверку текста запроса. По умолчанию проверка включена. Если проверка текста запроса отключена, WAF не проверяет содержимое текста сообщения HTTP. В таких случаях WAF продолжит применять свои правила к заголовкам, файлам cookie и URI. Если проверка текста запроса отключена, то поле максимального размера текста запроса будет неприменимо и его невозможно будет настроить. Отключение проверки текста запроса позволяет отправлять в брандмауэр веб-приложения сообщения, длина которых превышает 128 Кбайт, но текст сообщения не проверяется на наличие уязвимостей.

## <a name="waf-exclusion-lists"></a>Списки исключений WAF

![waf-exclusion.png](media/application-gateway-waf-configuration/waf-exclusion.png)

Списки исключений WAF позволяют пользователям пропустить некоторые атрибуты запроса при проверке WAF. Распространенный пример — вставленные токены Active Directory, которые используются для проверки подлинности или полей пароля. Такие атрибуты часто могут содержать специальные символы, которые активируют ложные срабатывания правил WAF. После добавления атрибута в список исключений WAF он не учитывается ни одним настроенным и активным правилом WAF. Списки исключений применяются глобально.

В списки исключений можно добавить следующие атрибуты:

* Заголовки запроса
* Объекты cookie запросов
* Текст запроса

   * Данные формы с разделителем
   * XML
   * JSON

Вы можете указать точный заголовок запроса, текст, файл cookie или атрибут строки запроса либо при необходимости задать частичное соответствие.

Поддерживаемые операторы критериев соответствия:

- **Equals**:  этот оператор используется для точного совпадения. Например, для выбора заголовка с именем **bearerToken** используйте оператор равенства со значением селектора **bearerToken**.
- **Starts with**: этот оператор находит все поля, которые начинаются с указанного значения селектора.
- **Ends with**:  этот оператор находит все поля запроса, которые заканчиваются на указанное значение селектора.
- **Contains**: этот оператор находит все поля запроса, которые содержат указанное значение селектора.

Во всех случаях при поиске не учитывается регистр, и в качестве селекторов запрещено использовать регулярные выражения.

## <a name="next-steps"></a>Дополнительная информация

После настройки параметров WAF вы можете узнать, как просматривать журналы WAF. Дополнительные сведения см. в разделе [Журналы диагностики](application-gateway-diagnostics.md#diagnostic-logging).