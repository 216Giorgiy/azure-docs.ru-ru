

<properties
   pageTitle="Обзор мониторинга работоспособности для шлюза приложений Azure | Microsoft Azure"
   description="Дополнительные сведения о возможностях мониторинга для шлюза приложений Azure"
   services="application-gateway"
   documentationCenter="na"
   authors="georgewallace"
   manager="carmonm"
   editor=""
   tags="azure-resource-manager"
/>
<tags  
   ms.service="application-gateway"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="infrastructure-services"
   ms.date="03/03/2016"
   ms.author="gwallace" />

# Обзор мониторинга работоспособности шлюза приложений


Шлюз приложений Azure по умолчанию отслеживает работоспособность всех ресурсов в своем пуле внутренних серверов и автоматически удаляет из пула все ресурсы, признанные неработоспособными. Шлюз приложений продолжает отслеживать неисправные экземпляры и добавляет их в пул внутренних серверов, как только они становятся доступными и начинают отвечать на проверку работоспособности.

Помимо проверки работоспособности по умолчанию проверку также можно настроить в соответствии с требованиями приложения. В этой статье мы рассмотрим как проверку по умолчанию, так и пользовательскую проверку.

## Проверка работоспособности по умолчанию

Если ни одной из пользовательских проверок работоспособности не настроено, шлюз приложений автоматически настраивает проверку работоспособности по умолчанию. Мониторинг осуществляется путем выполнения HTTP-запроса к IP-адресам пула внутренних серверов.

Пример. Вы настроили шлюз приложений, так что внутренние серверы A, B и C используются для получения сетевого трафика HTTP на порт 80. По умолчанию мониторинг работоспособности осуществляет проверку трех серверов каждые 30 секунд и ожидает получения HTTP-ответа, подтверждающего работоспособность. HTTP-ответ, подтверждающий работоспособность, имеет [код состояния](https://msdn.microsoft.com/library/aa287675.aspx) от 200 до 399.

Если проверка работоспособности по умолчанию для сервера А завершается неудачно, шлюз приложений удаляет его из внутреннего пула и сетевой трафик перестает поступать на этот сервер. Проверка работоспособности по умолчанию по-прежнему продолжает проверять сервер A каждые 30 секунд. Когда сервер A успешно отвечает на запрос проверки работоспособности по умолчанию, он возвращается в пул внутренних серверов, и передача трафика на этот сервер возобновляется.

Для определения состояния работоспособности проба по умолчанию использует только http://127.0.0.1:<порт>. Если необходимо настроить проверку работоспособности для перехода на настраиваемый URL-адрес или изменить любые другие параметры, используйте пользовательскую проверку работоспособности, как описано ниже.

### Параметры проверки работоспособности по умолчанию

|Свойства проверки | Значение | Описание|
|---|---|---|
| URL-адрес проверки| .http://127.0.0.1/ | URL-адрес |
| Интервал | 30 | Интервал проверки в секундах |
| Время ожидания | 30 | Время ожидания проверки в секундах |
| Пороговое значение сбоя | 3 | Количество повторных попыток проверки. Сервер внутреннего пула считается неисправным, когда количество повторных неудачных попыток проверки достигает порогового значения сбоя. |


## Пользовательская проверка работоспособности

Пользовательская проверка работоспособности позволяет добиться более детального контроля над мониторингом работоспособности. При использовании пользовательской проверки можно настроить интервал проверки, URL-адрес и путь проверки, а также количество неудачных попыток проверки, после которых экземпляр пула внутренних серверов должен считаться неработоспособным.


### Параметры пользовательской проверки работоспособности

|Свойства проверки| Описание|
|---|---|
| Name (Имя) | Имя проверки. Это имя используется для указания проверки в параметрах HTTP внутреннего сервера |
| Протокол | Протокол, используемый для проверки. Единственным допустимым протоколом является HTTP. |
| Узел | Имя узла для проверки. |
| Путь | Относительный путь проверки. Путь должен начинаться с "/". Проба отправляется по адресу <protocol>://<host>:<port><path>. |
| Интервал | Интервал проверки в секундах. Интервал времени между двумя последовательными проверками.|
| Время ожидания | Время ожидания проверки в секундах. Проверка считается неудачной, если ответ о работоспособности не получен в течение этого времени ожидания. |
| Пороговое значение сбоя | Количество повторных попыток проверки. Сервер внутреннего пула считается неисправным, когда количество повторных неудачных попыток проверки достигает порогового значения сбоя. |

## Дальнейшие действия

Ознакомившись со сведениями о мониторинге работоспособности шлюза приложений, можно настроить [пользовательскую пробу работоспособности](application-gateway-create-probe-ps.md) для Azure Resource Manager или [пользовательскую пробу](application-gateway-create-probe-classic-ps.md) для классической модели развертывания Azure.

<!---HONumber=AcomDC_0810_2016-->