<properties 
   pageTitle="Общие сведения о шлюзе приложений | Microsoft Azure"
   description="На этой странице представлены общие сведения о службе шлюза приложений для балансировки нагрузки 7 уровня, включая размеры шлюза, балансировку нагрузки HTTP, соответствие сеансу на основе файлов cookie и разгрузку SSL."
   documentationCenter="na"
   services="application-gateway"
   authors="joaoma"
   manager="carmonm"
   editor="tysonn"/>
<tags 
   ms.service="application-gateway"
   ms.devlang="na"
   ms.topic="article" 
   ms.tgt_pltfrm="na"
   ms.workload="infrastructure-services" 
   ms.date="11/09/2015"
   ms.author="joaoma"/>

# Что такое шлюз приложений?


Шлюз приложений Microsoft Azure обеспечивает управляемое Azure решение по балансировке нагрузки HTTP на основе технологии балансировки нагрузки на 7 уровне.

Балансировка нагрузки приложений позволяет ИТ-администраторам и разработчикам создавать правила маршрутизации сетевого трафика на основе HTTP. Служба шлюза приложений отличается высокой доступностью и измеримостью. Соглашение об уровне обслуживания и цены см. на страницах [Соглашение об уровне обслуживания](http://azure.microsoft.com/support/legal/sla/) и [Цены](https://azure.microsoft.com/pricing/details/application-gateway/).

Шлюз приложений в настоящее время поддерживает доставку приложений 7 уровня для следующего.

- Балансировка нагрузки HTTP
- Соответствие сеансу на основе файлов cookie
- Разгрузка SSL

![Шлюз приложений](./media/application-gateway-introduction/appgateway1.png)

## Балансировка нагрузки HTTP 7 уровня

Azure обеспечивает балансировку нагрузки на 4 уровне с использованием балансировщика нагрузки Azure, работающего на транспортном уровне (TCP/UDP). Также выполняется балансировка нагрузки всего входящего сетевого трафика службы шлюза приложений. Затем шлюз приложений применяет правила маршрутизации к трафику HTTP, обеспечивая балансировку нагрузки на 7 уровне (HTTP). При создании шлюза приложений конечная точка (VIP) будет связана и использоваться в качестве общедоступного IP-адреса для входящего сетевого трафика.

Шлюз приложений будет направлять трафик HTTP в зависимости от своей конфигурации, будь то виртуальная машина, облачная служба, веб-приложение или внешний IP-адрес.

На приведенной ниже схеме показан поток трафика для шлюза приложений.

 
![Шлюз приложений 2](./media/application-gateway-introduction/appgateway2.png)

Балансировка нагрузки HTTP 7 уровня может использоваться для следующих приложений.


- Приложения, которым для достижения той же виртуальной машины сервера требуются запросы от сеанса того же пользователя/клиента. В качестве примера можно привести покупку приложений и веб-серверы электронной почты.
- Приложения, которым нужно освободить фермы веб-серверов от нагрузки, связанной с завершением SSL-запросов.
- Приложения (такие как CDN), которым для маршрутизации или распределения нагрузки на другие внутренние серверы требуются многократные HTTP-запросы к одному и тому же долгосрочному TCP-подключению.

## Размеры и экземпляры шлюза

Шлюз приложений в настоящее время предлагается в трех размерах: малый, средний и большой. Экземпляры малого размера предназначены для разработки и тестирования сценариев.

На каждую подписку можно создавать до 50 шлюзов приложений, а у каждого шлюза может быть до десяти экземпляров. Как служба под управлением Azure, балансировка нагрузки шлюза приложений позволяет использовать подсистему балансировщика нагрузки 7 уровня в обход подсистемы балансировщика нагрузки программного обеспечения Azure.

В следующей таблице показана средняя производительность для каждого экземпляра шлюза приложений.


| Ответ серверной страницы | Малый | Средний | Крупный|
|---|---|---|---|
| 6K | 7,5 Мбит/с | 13 Мбит/с | 50 Мбит/с |
|100k | 35 Мбит/с | 100 Мбит/с| 200 Мбит/с |


>[AZURE.NOTE]Это примерные рекомендации для настройки пропускной способности шлюза приложений. Фактическая производительность зависит от различных параметров среды, таких как средний размер страницы, расположение внутренних экземпляров, время обработки страницы сервером и так далее.

## Мониторинг работоспособности
 

Шлюз приложений Azure отслеживает работоспособность внутренних экземпляров каждые 30 секунд. Он отправляет запрос проверки работоспособности HTTP в каждый экземпляр по порту, настроенному в элементе конфигурации *BackendHttpSettings*. Проверка работоспособности ожидает успешный HTTP-ответ с кодом состояния ответа в диапазоне 200–399.

При получении успешного HTTP-ответа внутренний сервер помечается как работоспособный и продолжает получать трафик от шлюза приложений Azure. В случае сбоя проверки внутренний сервер удаляется из пула работоспособных серверов, и трафик перестает поступать на этот сервер. Проверка работоспособности по-прежнему выполняется для неисправного внутреннего экземпляра каждые 30 секунд для проверки его текущего состояния. Внутренний экземпляр, успешно прошедший проверку работоспособности, добавляется в пул работоспособных внутренних серверов, и в этот экземпляр возобновляется передача трафика.

## Настройка и управление

Для создания шлюзов приложений и управления этими шлюзами можно использовать REST API и командлеты PowerShell.



## Дальнейшие действия

Создание шлюза приложений. См. статью [Создание шлюза приложений](application-gateway-create-gateway.md).

Настройка разгрузки SSL. См. статью [Настройка разгрузки SSL с помощью шлюза приложений](application-gateway-ssl.md).

<!---HONumber=Nov15_HO3-->