---
title: Обзор поддержки мультитенантных серверных частей в Шлюзе приложений Azure
description: На этой странице предоставлен обзор поддержки мультитенантных серверных частей в шлюзе приложений.
services: application-gateway
author: vhorne
ms.service: application-gateway
ms.topic: article
ms.date: 8/1/2018
ms.author: victorh
ms.openlocfilehash: c0084580a2e4860f24aecd37232f38da2e55ccc8
ms.sourcegitcommit: 615403e8c5045ff6629c0433ef19e8e127fe58ac
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/06/2018
ms.locfileid: "39578438"
---
# <a name="application-gateway-support-for-multi-tenant-back-ends"></a>Поддержка мультитенантных серверных частей в Шлюзе приложений

Шлюз приложений Azure поддерживает масштабируемые наборы виртуальных машин, сетевые интерфейсы, частные и общедоступные IP-адреса и полные доменные имена как часть своих серверных пулов. По умолчанию шлюз приложений не изменяет заголовок узла входящих данных HTTP от клиента и без изменений отправляет его на серверную часть. Имеется много служб, таких как [веб-приложения Azure](../app-service/app-service-web-overview.md), которые мультитенантны по своей природе и зависят от конкретного заголовка узла или расширения SNI при разрешении в правильную конечную точку. Шлюз приложений теперь позволяет пользователям переопределять заголовок узла входящих HTTP-данных на основе серверных HTTP-параметров. Эта возможность включает поддержку веб-приложений Azure и службы управления API с мультитенантными серверными частями. Эта возможность доступна для SKU "Стандартный" и SKU для WAF. Поддержка мультитенантных серверных частей также работает с завершением SSL-запросов и сквозным SSL-шифрованием.

> [!NOTE]
> Для надежных служб Azure, таких как Веб-приложения Azure, настраивать сертификат аутентификации не нужно.

![сценарий веб-приложения](./media/application-gateway-web-app-overview/scenario.png)

Возможность указывать переопределение узла определяется в параметрах HTTP и может применяться к любому серверному пулу во время создания правила. Мультитенантные серверные части поддерживают два способа переопределения заголовка узла и расширения SNI.

1. Возможность задавать имя узла в качестве фиксированного значения в параметрах HTTP. Эта возможность гарантирует, что заголовок узла будет перезаписан этим значением для всего трафика к серверному пулу, где применяются параметры HTTP. При использовании сквозного шифрования SSL переопределенное имя узла используется в расширении SNI. Эта возможность позволяет использовать сценарии, в которых ферма серверных пулов ожидает заголовок узла, который отличается от входящего заголовка узла клиента.

2. Возможность получать имя узла из IP-адреса или полного доменного имени участников серверного пула. Параметры HTTP также обеспечивают возможность получить имя узла из полного доменного имени участника серверного пула, если такая возможность настроена. При использовании сквозного шифрования SSL имя узла извлекается из полного доменного имени и используется в расширении SNI. Эта возможность позволяет использовать сценарии, в которых серверный пул имеет несколько мультитенатных служб PaaS, таких как Веб-приложения Azure, а заголовок узла в запросе к каждому участнику содержит имя узла, извлеченное из полного доменного имени.

> [!NOTE]
> В обоих случаях выше параметры влияют только на поведение текущего трафика, а не на поведение проверки работоспособности. Пользовательские пробы уже поддерживают возможность указать заголовок узла в конфигурации пробы. Пользовательские пробы теперь также поддерживают возможность извлекать поведение заголовка узла из настроенных в настоящее время параметров HTTP. Эту конфигурацию можно указать с помощью параметра `PickHostNameFromBackendHttpSettings` в конфигурации пробы. Для комплексной работы функции и пробы, и параметры HTTP необходимо изменить в соответствии с правильной конфигурацией.

Благодаря этой возможности клиенты настраивают параметры HTTP и пользовательские пробы для соответствующей конфигурации. Этот параметр затем привязывается к прослушивателю и серверному пулу с помощью правила.

## <a name="next-steps"></a>Дополнительная информация

Сведения о том, как в веб-приложении настроить шлюз приложений в качестве участника серверного пула, см. в статье [Настройка веб-приложений службы приложений с помощью шлюза приложений](application-gateway-web-app-powershell.md).
