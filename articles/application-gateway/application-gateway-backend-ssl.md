---
title: "Включение политики SSL и сквозного режима связи SSL в шлюзе приложений | Документация Майкрософт"
description: "На этой странице представлен обзор поддержки сквозного режима связи SSL в шлюзе приложений."
documentationcenter: na
services: application-gateway
author: amsriva
manager: rossort
editor: amsriva
ms.assetid: 3976399b-25ad-45eb-8eb3-fdb736a598c5
ms.service: application-gateway
ms.devlang: na
ms.topic: hero-article
ms.tgt_pltfrm: na
ms.custom: H1Hack27Feb2017
ms.workload: infrastructure-services
ms.date: 12/12/2016
ms.author: amsriva
translationtype: Human Translation
ms.sourcegitcommit: 5009b13cec57e6974f71610c84fdaad837085df0
ms.openlocfilehash: 5f81d8146f8000e73a2eb578ff2371a62c8875e9
ms.lasthandoff: 03/01/2017


---
# <a name="overview-of-end-to-end-ssl-and-ssl-policy-on-application-gateway"></a>Обзор сквозного шифрования SSL и политики SSL в шлюзе приложений

Шлюз приложений поддерживает функции моста SSL, после применения которых трафик обычно передается в незашифрованном виде на внутренние серверы. Это позволяет избавить веб-серверы от накладных расходов, связанных с ресурсоемкими операциями шифрования или расшифровки. Однако для некоторых клиентов незашифрованная связь с внутренними серверами — неприемлемый вариант. Причина может быть связана с требованиями безопасности и соответствия или с тем, что приложение может принимать только безопасные подключения. Теперь для таких приложений шлюз приложений поддерживает сквозное шифрование SSL.

## <a name="overview"></a>Обзор

Сквозное шифрование SSL позволяет безопасно передавать зашифрованные конфиденциальные данные в серверную часть, используя при этом обеспечиваемые шлюзом приложений преимущества балансировки нагрузки уровня 7: сходство файлов cookie, маршрутизация на основе URL-адресов, поддержка маршрутизации на основе сайтов и возможность внедрения заголовков X-Forwarded-*.

Если на шлюзе приложений настроен сквозной режим связи SSL, то он завершает сеансы SSL пользователей на шлюзе и расшифровывает пользовательский трафик. Затем он применяет настроенные правила и выбирает подходящий экземпляр внутреннего пула для передачи трафика в него. Затем шлюз приложений инициирует новое SSL-подключение ко внутреннему серверу и повторно шифрует данные с помощью сертификата открытого ключа внутреннего сервера, прежде чем передать запрос в серверную часть. Чтобы включить сквозной режим связи SSL, следует задать значение Https для параметра протокола в BackendHTTPSetting, который применяется к внутреннему пулу. Для каждого внутреннего сервера во внутреннем пуле, для которого включен сквозной режим связи SSL, должен быть настроен сертификат, обеспечивающий безопасный обмен данными.

![Сценарий сквозного шифрования SSL][1]

В этом примере запросы, в которых используется TLS1.2, направляются на внутренние серверы в пул 1 с помощью сквозного шифрования SSL.

## <a name="end-to-end-ssl-and-whitelisting-of-certificates"></a>Сквозное шифрование SSL и список разрешенных сертификатов

Шлюз приложений взаимодействует только с известными экземплярами серверной части, которые имеют сертификат из списка разрешений, определенного на шлюзе приложений. Чтобы включить список разрешенных сертификатов, необходимо передать открытый ключ сертификатов внутреннего сервера (а не корневой сертификат) в шлюз приложений. После этого будут разрешены подключения только к известным и включенным в разрешенный список серверам. Оставшиеся серверы будут выдавать ошибку шлюза. Самозаверяющие сертификаты предназначены только для тестирования и не рекомендуются для рабочих нагрузок в рабочей среде. Такие сертификаты также должны быть добавлены в список разрешений с помощью шлюза приложений, как было описано ранее, прежде чем их можно будет использовать.

## <a name="application-gateway-ssl-policy"></a>Политика SSL шлюза приложений

Шлюз приложений поддерживает настраиваемые пользователем политики согласования SSL, которые предоставляют клиентам более широкие возможности для управления SSL-подключениями в шлюзе приложений.

1. Протоколы SSL 2.0 и 3.0 отключены по умолчанию для всех шлюзов приложений. Какие-либо возможности настройки в них отсутствуют.
2. Определение политики SSL дает возможность отключить любой из трех следующих протоколов: **TLSv1\_0**, **TLSv1\_1** и **TLSv1\_2**.
3. Если политика SSL не определена, все три протокола (TLSv1\_0, TLSv1\_1 и TLSv1_2) будут включены.

## <a name="next-steps"></a>Дальнейшие действия

Ознакомившись со сквозным режимом связи SSL и политиками SSL, перейдите к [включению сквозного режима связи SSL в шлюзе приложений](application-gateway-end-to-end-ssl-powershell.md), чтобы создать шлюз приложений с помощью сквозного шифрования SSL.

<!--Image references-->

[1]: ./media/application-gateway-backend-ssl/scenario.png

