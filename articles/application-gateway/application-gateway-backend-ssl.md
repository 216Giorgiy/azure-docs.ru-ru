<properties
   pageTitle="Включение политики SSL и сквозного режима связи SSL в шлюзе приложений | Microsoft Azure"
   description="На этой странице представлен обзор поддержки сквозного режима связи SSL в шлюзе приложений."
   documentationCenter="na"
   services="application-gateway"
   authors="amsriva"
   manager="rossort"
   editor="amsriva"/>
<tags
   ms.service="application-gateway"
   ms.devlang="na"
   ms.topic="hero-article"
   ms.tgt_pltfrm="na"
   ms.workload="infrastructure-services"
   ms.date="09/26/2016"
   ms.author="amsriva"/>


# <a name="enabling-ssl-policy-and-end-to-end-ssl-on-application-gateway"></a>Включение политики SSL и сквозного режима связи SSL в шлюзе приложений

## <a name="overview"></a>Обзор

Шлюз приложений поддерживает функции моста SSL, после применения которых трафик обычно передается в незашифрованном виде на внутренние серверы. Это позволяет избавить веб-серверы от накладных расходов, связанных ресурсоемкими операциями шифрования или расшифровки. Однако для некоторых клиентов незашифрованная связь с внутренними серверами — неприемлемый вариант. Причина может быть в требованиях безопасности и соответствия или в том, что приложение может принимать только безопасные подключения. Теперь для таких приложений шлюз приложений поддерживает сквозное шифрование SSL.

Сквозной режим связи SSL позволяет безопасно передавать зашифрованные конфиденциальные данные в серверную часть, используя при этом преимущества балансировки нагрузки уровня 7, обеспечиваемые шлюзом приложений, в том числе сходство файлов cookie, маршрутизацию на основе URL-адресов, поддержку маршрутизации на основе сайтов или возможность внедрения заголовков X-Forwarded-*.

Если на шлюзе приложений настроен сквозной режим связи SSL, то он завершает сеансы SSL пользователей на шлюзе и расшифровывает пользовательский трафик. Затем он применяет настроенные правила и выбирает подходящий экземпляр внутреннего пула для передачи трафика в него. Затем шлюз приложений инициирует новое SSL-соединение с внутренним сервером и повторно шифрует данные с помощью сертификата открытого ключа внутреннего сервера, прежде чем передать запрос в серверную часть. Чтобы включить сквозной режим связи SSL, следует задать значение Https для параметра протокола в BackendHTTPSetting, который применяется к внутреннему пулу. Для каждого внутреннего сервера во внутреннем пуле, для которого включен сквозной режим связи SSL, должен быть настроен сертификат, обеспечивающий безопасный обмен данными.

![imageURLroute](./media/application-gateway-multi-site-overview/multisite.png)

В этом примере запросы к https://contoso.com могут направляться в ContosoServerPool по протоколу HTTP, а запросы к https://fabrikam.com будут направляться в FabrikamServerPool по протоколу HTTPS с использованием сквозного режима связи SSL.

## <a name="end-to-end-ssl-and-white-listing-of-certificates"></a>Сквозной режим связи SSL и список разрешенных сертификатов

Шлюз приложений взаимодействует только с известными экземплярами серверной части, которые имеют сертификат из списка разрешений, определенного на шлюзе приложений. Чтобы включить список разрешенных сертификатов, необходимо передать открытый ключ сертификатов внутреннего сервера в шлюз приложений. Тогда будут разрешены подключения только к известным и разрешенным экземплярам серверной части, а все прочие подключения будут приводить к ошибке шлюза. Самозаверяющие сертификаты предназначены только для тестирования и не рекомендуются для рабочих нагрузок в рабочей среде. Такие сертификаты также должны быть добавлены в список разрешений с помощью шлюза приложений, как описано выше, прежде чем их можно будет использовать.

## <a name="application-gateway-ssl-policy"></a>Политика SSL шлюза приложений

Шлюз приложений поддерживает также настраиваемые пользователем политики согласования SSL, которые позволяют клиентам более точно контролировать SSL-соединения в шлюзе приложений.

1. Протоколы SSL 2.0 и 3.0 принудительно отключены для всех шлюзов приложений. Какие-либо возможности настройки в них отсутствуют.
2. Определение политики SSL дает возможность отключить любой из трех следующих протоколов: TLSv1_0, TLSv1_1, TLSv1_2.
3. Если политика SSL не определена, то будут включены все три протокола (TLSv1_0, TLSv1_1, TLSv1_2).

## <a name="next-steps"></a>Дальнейшие действия

Ознакомившись со сквозным режимом связи SSL и политиками SSL, перейдите к [включению сквозного режима связи SSL в шлюзе приложений](application-gateway-end-to-end-ssl-powershell.md) , чтобы создать шлюз приложений с возможностью отправки трафика в серверную часть в зашифрованном виде.



<!--HONumber=Oct16_HO2-->


