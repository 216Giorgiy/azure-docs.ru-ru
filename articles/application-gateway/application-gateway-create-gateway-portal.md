---
title: Создание шлюза приложений с помощью портала Azure | Документация Майкрософт
description: Узнайте, как создать шлюз приложений с помощью портала Azure.
services: application-gateway
author: davidmu1
manager: timlt
editor: ''
tags: azure-resource-manager
ms.service: application-gateway
ms.topic: article
ms.workload: infrastructure-services
ms.date: 01/25/2018
ms.author: davidmu
ms.openlocfilehash: df9235bc7ff61943de52a0bcc4064bf9fab6636a
ms.sourcegitcommit: ded74961ef7d1df2ef8ffbcd13eeea0f4aaa3219
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/29/2018
---
# <a name="create-an-application-gateway-using-the-azure-portal"></a>Создание шлюза приложений с помощью портала Azure

Портал Azure можно использовать для создания шлюзов приложений и управления ими. В этом кратком руководстве показано, как создать сетевые ресурсы, внутренние серверы и шлюз приложений.

Если у вас еще нет подписки Azure, [создайте бесплатную учетную запись Azure](https://azure.microsoft.com/free/?WT.mc_id=A261C142F), прежде чем начинать работу.

## <a name="log-in-to-azure"></a>Вход в Azure

Войдите на портал Azure по адресу [http://portal.azure.com](http://portal.azure.com).

## <a name="create-an-application-gateway"></a>Создание шлюза приложений

Виртуальная сеть необходима для обмена данными между создаваемыми ресурсами. В этом примере создаются две подсети: одна для шлюза приложений, а другая — для внутренних серверов. Вы можете создать виртуальную сеть во время создания шлюза приложений.

1. Щелкните **Создать** в верхнем левом углу портала Azure.
2. Щелкните **Сети**, а затем в списке "Рекомендованные" выберите **Шлюз приложений**.
3. Введите следующие значения для шлюза приложений:

    - *myAppGateway* — в качестве имени шлюза приложений.
    - *myResourceGroupAG* — в качестве для новой группы ресурсов.

    ![Создание шлюза приложений](./media/application-gateway-create-gateway-portal/application-gateway-create.png)

4. Примите значения по умолчанию для остальных параметров и нажмите кнопку **ОК**.
5. Щелкните **Выбор виртуальной сети**, выберите **Create new** (Создать), а затем введите следующие значения для виртуальной сети.

    - *myVNet* — для имени виртуальной сети.
    - *10.0.0.0/16* — для адресного пространства виртуальной сети.
    - *myAGSubnet* — для имени подсети.
    - *10.0.0.0/24* — для адресного пространства подсети.

    ![Создание виртуальной сети](./media/application-gateway-create-gateway-portal/application-gateway-vnet.png)

6. Нажмите кнопку **ОК**, чтобы создать виртуальную сеть и подсеть.
6. Щелкните **Выберите общедоступный IP-адрес**, выберите **Create new** (Создать), а затем введите имя общедоступного IP-адреса. В этом примере общедоступный IP-адрес — *myAGPublicIPAddress*. Примите значения по умолчанию для остальных параметров и нажмите кнопку **ОК**.
8. Примите значения по умолчанию для конфигурации прослушивателя, оставьте брандмауэр веб-приложения отключенным и нажмите кнопку **ОК**.
9. Просмотрите параметры на странице сводки и нажмите кнопку **ОК**, чтобы создать виртуальную сеть, общедоступный IP-адрес и шлюз приложений. Процесс создания шлюза приложений может занять несколько минут. Дождитесь успешного завершения развертывания, прежде чем переходить к следующему разделу.

### <a name="add-a-subnet"></a>Добавление подсети

1. Щелкните **Все ресурсы** в меню слева, а затем из списка ресурсов выберите **myVNet**.
2. Щелкните **Подсети**, а затем — **Подсеть**.

    ![Создание подсети](./media/application-gateway-create-gateway-portal/application-gateway-subnet.png)

3. Введите *myBackendSubnet* в качестве имени подсети, а затем нажмите кнопку **ОК**.

## <a name="create-backend-servers"></a>Создание внутренних серверов

В этом примере вы создадите две виртуальные машины, которые будут использоваться как внутренние серверы для шлюза приложений. Вы также установите службы IIS на виртуальных машинах, чтобы убедиться, что шлюз приложений создан успешно.

### <a name="create-a-virtual-machine"></a>Создание виртуальной машины

1. Нажмите кнопку **Создать**.
2. Щелкните **Вычисление**, а затем в списке "Рекомендованные" выберите **Windows Server 2016 Datacenter**.
3. Введите следующие значения для виртуальной машины.

    - *myVM* — в качестве имени виртуальной машины.
    - *azureuser* — в качестве имени пользователя учетной записи администратора.
    - *Azure123456!* — в качестве пароля.
    - Щелкните **Use existing** (Использовать существующую), а затем выберите *myResourceGroupAG*.

4. Последовательно выберите **ОК**.
5. Выберите **DS1_V2** в качестве размера виртуальной машины и нажмите кнопку **Выбрать**.
6. Убедитесь, что выбрана виртуальная сеть **myVNet** и подсеть **myBackendSubnet**. 
7. Щелкните **Отключено**, чтобы отключить диагностику загрузки.
8. Нажмите кнопку **ОК**, просмотрите параметры на странице сводки и щелкните **Создать**.

### <a name="install-iis"></a>Установка служб IIS

1. Откройте интерактивную оболочку и убедитесь, что для нее задано значение **PowerShell**.

    ![Установка пользовательского расширения](./media/application-gateway-create-gateway-portal/application-gateway-extension.png)

2. Чтобы установить службы IIS, выполните на виртуальной машине следующие команды: 

    ```azurepowershell-interactive
    Set-AzureRmVMExtension `
      -ResourceGroupName myResourceGroupAG `
      -ExtensionName IIS `
      -VMName myVM `
      -Publisher Microsoft.Compute `
      -ExtensionType CustomScriptExtension `
      -TypeHandlerVersion 1.4 `
      -SettingString '{"commandToExecute":"powershell Add-WindowsFeature Web-Server; powershell Add-Content -Path \"C:\\inetpub\\wwwroot\\Default.htm\" -Value $($env:computername)"}' `
      -Location EastUS
    ```

3. Создайте вторую виртуальную машину и установите службы IIS, следуя только что выполненным инструкциям. Введите *myVM2* в качестве имени виртуальной машины и значения параметра VMName в команде Set-AzureRmVMExtension.

### <a name="add-backend-servers"></a>Добавление внутренних серверов

3. Выберите **Все ресурсы**, а затем щелкните **myAppGateway**.
4. Щелкните **Серверные пулы**. Пул по умолчанию был создан автоматически с помощью шлюза приложений. Щелкните **appGatewayBackendPool**.
5. Щелкните **Добавить цель**, чтобы добавить в серверный пул каждую созданную виртуальную машину.

    ![Добавление внутренних серверов](./media/application-gateway-create-gateway-portal/application-gateway-backend.png)

6. Выберите команду **Сохранить**.

## <a name="test-the-application-gateway"></a>Тестирование шлюза приложений

1. Найдите общедоступный IP-адрес для шлюза приложений на экране обзора. Выберите **Все ресурсы**, а затем щелкните **myAGPublicIPAddress**.

    ![Запись общедоступного IP-адреса шлюза приложений](./media/application-gateway-create-gateway-portal/application-gateway-record-ag-address.png)

2. Скопируйте общедоступный IP-адрес и вставьте его в адресную строку браузера.

    ![Тестирование шлюза приложений](./media/application-gateway-create-gateway-portal/application-gateway-iistest.png)


## <a name="clean-up-resources"></a>Очистка ресурсов

Ставшие ненужными группу ресурсов, шлюз приложений и все связанные ресурсы можно удалить. Для этого выберите группу ресурсов, содержащую шлюз приложений, и щелкните **Удалить**.

## <a name="next-steps"></a>Дополнительная информация

В этом кратком руководстве вы создали группу ресурсов, сетевые ресурсы и внутренние серверы. В дальнейшем вы можете использовать эти ресурсы для создания шлюза приложений. Чтобы узнать больше о шлюзах приложений и связанных с ними ресурсах, перейдите к статьям с инструкциями.
