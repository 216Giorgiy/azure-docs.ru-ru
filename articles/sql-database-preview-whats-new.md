<properties 
	pageTitle="Новые возможности версии 12 базы данных SQL" 
	description="Описывает новые улучшения базы данных SQL Azure, добавленные в декабре 2014 года или позднее." 
	services="sql-database" 
	documentationCenter="" 
	authors="MightyPen" 
	manager="jeffreyg" 
	editor=""/>

<tags 
	ms.service="sql-database" 
	ms.workload="sql-database" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="03/05/2015" 
	ms.author="genemi"/>


# Новые возможности версии 12 базы данных SQL


<!--
GeneMi, четверг, 5 марта 2015 года, 20:06
Удалить 'Azure' из названия статьи, добавить "версию 12" (в соответствии с J.G.).
-->



Версия 12 базы данных SQL Azure была переведена в состояние общей доступности в январе 2015 г. Благодаря этому крупному обновлению база данных SQL обеспечивает практически полную совместимость с подсистемой Microsoft SQL Server. Теперь база данных SQL предлагает клиентам преимущества повышенной производительности. Эти улучшения упрощают миграцию приложений SQL Server в базу данных SQL и помогают клиентами справляться с повышенными рабочими нагрузками базы данных.


Несколько географических регионов все еще находятся на этапе предварительной версии и пока не перешли на этап общей доступности. Найдите свой регион в [таблице с указанием состояния общей доступности для разных регионов](../sql-database-preview-whats-new/#V12AzureSqlDbPreviewGaTable). Пока ваш регион не будет переведен на этап общей доступности, базы данных версию 12 удобнее использовать в качестве тестовых, а не рабочих.


**[Зарегистрируйтесь](https://portal.azure.com) для получения базы данных SQL, чтобы воспользоваться преимуществами баз данных нового поколения в Microsoft Azure. Во-первых, вам требуется подписка на Microsoft Azure. Вы можете подписаться на [бесплатную пробную версию Azure](http://azure.microsoft.com/pricing/free-trial) и просмотреть информацию о [ценах](http://azure.microsoft.com/pricing/details/sql-database).**


Информацию о планировании и обновлении баз данных версии 11 до версии 12 см. в статье [Планирование и подготовка к обновлению до последней версии 12 базы данных SQL (предварительная версия)](http://azure.microsoft.com/documentation/articles/sql-database-preview-plan-prepare-upgrade/).


### Ключевые преимущества


Ниже перечислены ключевые особенности базы данных SQL Azure версии 12.


- **Безопасность ** за счет новой возможности - [пользователи в автономных базах данных](../sql-database-preview-whats-new/#UsersInContainedDatabases). Две другие возможности - это [безопасность на уровне строк](../sql-database-preview-whats-new/#RowLevelSecurity) и [динамическое маскирование данных](../sql-database-preview-whats-new/#DynamicDataMasking), хотя они все еще находятся на этапе предварительной версии и не являются общедоступными.


- **Упрощенное управление** большими базами данных для поддержки повышенных рабочих нагрузок с параллельными запросами (только Premium), [секционирование таблиц](http://msdn.microsoft.com/library/ms187802.aspx), [индексирование в сети](http://msdn.microsoft.com/library/ms188388.aspx), беспрепятственная перестройка большого индекса без ограничения размера в 2 ГБ, а также другие возможности использования инструкции [alter database](http://msdn.microsoft.com/library/bb522682.aspx).


- **Поддержка функций программирования ключа** для обеспечения более надежной структуры приложения с [интеграцией CLR](http://msdn.microsoft.com/library/ms189524.aspx), [оконными функциями](http://msdn.microsoft.com/library/ms189461.aspx) T-SQL, [индексами XML](http://msdn.microsoft.com/library/bb934097.aspx), а также [отслеживанием изменений](http://msdn.microsoft.com/library/bb933875.aspx) данных.


- **Рекордная производительность** с поддержкой запросов [columnstore](http://msdn.microsoft.com/library/gg492153.aspx) в памяти (только уровень Premium) для киосков данных и небольших аналитических нагрузок.


- **Мониторинг и устранение неполадок** дополнены свыше 100 новыми представлениями таблиц в расширенном наборе представлений управления базами данных ([DMV](http://msdn.microsoft.com/library/ms188754.aspx)).


- **Новый уровень производительности S3 для уровня службы Standard:** обеспечивает более гибкое ценообразование по сравнению с уровнями Standard и Premium. Уровень S3 предусматривает больше единиц DTU (единиц пропускной способности базы данных), а также все функции, доступные в службе уровня Standard.


## 1. Подробные сведения об улучшениях в новой версии 12


В этом разделе перечислены и описаны новые функции в каждой категории.


### 1.1 Категория: Расширенное управление базой данных


| Функция | Описание |
| :--- | :--- |
| . | ***Декабрь 2014 г.*** |
| <a name="UsersInContainedDatabases" id="UsersInContainedDatabases"></a>Пользователи в автономных базах данных | Теперь можно создать пользователей в автономной базе данных без наличия соответствующего имени входа в базе данных master. Это значительно упрощает перемещение базы данных на другой сервер. В клиентских приложениях используется одинаковый код подключения независимо от того, используете ли вы автономную базу данных или нет.<br/><br/>Эта возможность может быть необходима клиентам, которые хотят использовать преимущества соглашений об уровне обслуживания, обеспеченных расширенными гарантиями.<br/><br/>Обычно мы рекомендуем использовать данную возможность. Однако некоторые клиенты могут иметь дело с определенными сценариями, в которых оптимальнее использовать традиционное сочетание *login+user*.<br/><br/>Дополнительные сведения см. в разделе:<br/>- [Рекомендации и ограничения для базы данных SQL Azure с точки зрения безопасности](http://msdn.microsoft.com/library/azure/ff394108.aspx)<br/>[Управление базами данных и учетными записями в базе данных SQL Azure](http://msdn.microsoft.com/library/azure/ee336235.aspx)<br/>- [Автономные базы данных](http://msdn.microsoft.com/library/azure/ff929071.aspx) |
| Секционирование таблиц | Предыдущие ограничения на [секционирование таблиц](http://msdn.microsoft.com/library/ms190787.aspx) снимаются. |
| Увеличенный размер транзакций | В версии 12 больше не существует ограничения размера данных, изменяемых в одной транзакции (2 ГБ). <br/><br/> Одним преимуществом является возможность перестройки большого индекса без ограничения на размер данных в 2 ГБ. Общая информация приведена в разделе [Ограничения ресурсов базы данных SQL Azure](http://msdn.microsoft.com/library/azure/dn338081.aspx). |
| Сборка и перестройка индекса в сети | До версии 12 база данных SQL Azure в общем поддерживала предложение (ONLINE=ON) инструкции ALTER INDEX, но это не относилось к индексам в столбцах типа BLOB. Теперь в версии 12 предложение (ONLINE=ON) поддерживается даже для индексов в столбцах BLOB.<br/><br/> Функция ONLINE позволяет использовать в запросах преимущества индекса даже во время его перестройки. |
| Поддержка CHECKPOINT | В версии 12 можно выдать инструкцию T-SQL CHECKPOINT для своей базы данных. |
| Улучшение ALTER TABLE | Позволяет выполнять множество действий по изменению столбцов, при этом оставляя таблицу доступной. Дополнительные сведения см. в разделе [ALTER TABLE (Transact-SQL)](http://msdn.microsoft.com/library/ms190273.aspx). |
| Улучшение TRUNCATE TABLE | Допускает усечение отдельных разделов. Дополнительные сведения см. в разделе [TRUNCATE TABLE (Transact-SQL)](http://msdn.microsoft.com/library/ms177570.aspx). |
| Дополнительные параметры инструкции ALTER DATABASE | В версии 12 поддерживается больше параметров, доступных для инструкции ALTER DATABASE. <br/><br/> Дополнительную информацию см. в статье [ALTER DATABASE (Transact-SQL)](http://msdn.microsoft.com/library/ms174269.aspx) или [Справочник по базе данных SQL Azure (Transact-SQL)](http://msdn.microsoft.com/library/azure/ee336281.aspx). |
| Дополнительные команды DBCC | В версии 12 теперь доступно несколько дополнительных команд DBCC. Дополнительную информацию см. в разделе [Справочник по базе данных SQL Azure (Transact-SQL)](http://msdn.microsoft.com/library/azure/ee336281.aspx). |


### 1.2 Категория: Программирование и поддержка приложения


| Функция | Описание |
| :--- | :--- |
| . | ***Февраль 2015 г.*** |
| <a name="DynamicDataMasking" id="DynamicDataMasking"></a> Предварительная версия функции динамического маскирования данных | При создании набора строк из запроса заданная политика маскирования данных может заменить фрагменты данных символами X, чтобы перекрыть и защитить конфиденциальную информацию. После завершения операции маскирования измененный набор строк отправляется клиенту.<br/><br/>Возможный пример использования - маскирование всех, кроме последних нескольких, цифр номера кредитной карты.<br/><br/>**ПРИМЕЧАНИЕ.** Эта функция находится в состоянии предварительного просмотра и еще не была переведена в состояние общей доступности для использования в рабочей среде.<br/><br/>Дополнительную информацию см. в разделе [Приступая к работе с функцией динамического маскирования данных базы данных SQL Azure](http://azure.microsoft.com/documentation/articles/sql-database-dynamic-data-masking-get-started/). |
| . | ***Январь 2015 г.*** |
| <a name="RowLevelSecurity" id="RowLevelSecurity"></a> Предварительная версия функции обеспечения безопасности на уровне строк | **Внимание!** В настоящий момент функция обеспечения безопасности на уровне строк доступна только в состоянии *preview*, даже в тех географических регионах, где версия 12 переведена до состояния общей доступности. Пока функция обеспечения безопасности на уровне строк не переведена до состояния общей доступности, ее не рекомендуется использовать в рабочих базах данных, важных для бизнеса.<br/><br/>Новый оператор СОЗДАНИЯ ПОЛИТИКИ БЕЗОПАСНОСТИ в T-SQL позволяет использовать функцию обеспечения безопасности на уровне строк. Эта функция позволяет добавлять условия, по которым отфильтровываются некоторые строки данных перед возвращением набора строк вызывающему объекту, на сервере базы данных.<br/><br/>В отрасли эту функцию также иногда называют детальным управлением доступом.<br/><br/>Примеры кода и другую информацию см. в разделе [Предварительная версия функции обеспечения безопасности на уровне строк](http://msdn.microsoft.com/library/7221fa4e-ca4a-4d5c-9f93-1b8a4af7b9e8.aspx). |
| . | ***Декабрь 2014 г.*** |
| Оконные функции в запросах T-SQL | Оконные функции ANSI доступны с помощью [предложения OVER](http://msdn.microsoft.com/library/ms189461.aspx). <br/><br/> Пользователь Itzik Ben-Gan опубликовал замечательный [блог](http://sqlmag.com/sql-server-2012/how-use-microsoft-sql-server-2012s-window-functions-part-1) об оконных функциях и предложении OVER. |
| Интеграция со средой CLR .NET | Среда CLR (общеязыковая среда выполнения) платформы .NET Framework интегрирована в версию 12. <br/><br/> Поддерживаются только сборки SAFE, скомпилированные полностью на бинарном коде. Подробнее об этом можно узнать в статье [Ограничения модели программирования интеграции CLR](http://msdn.microsoft.com/library/ms403273.aspx). <br/><br/> Сведения об этой функции приведены в следующих статьях: <br/> * [Введение в интеграцию CLR сервера SQL Server](http://msdn.microsoft.com/library/ms254498.aspx) <br/> * [CREATE ASSEMBLY (Transact-SQL)](http://msdn.microsoft.com/library/ms189524.aspx). |
| Отслеживание изменений данных | Теперь отслеживание изменений данных можно настроить на уровне базы данных или таблицы. <br/><br/> Об отслеживании изменений читайте в статье [Отслеживание изменений (сервер SQL Server)](http://msdn.microsoft.com/library/bb933875.aspx). |
| XML-индексы | В версии 12 можно использовать такие инструкции T-SQL, как CREATE XML INDEX и CREATE SELECTIVE XML INDEX. <br/><br/> Сведения об XML-индексах: <br/> * [CREATE XML INDEX (Transact-SQL)](http://msdn.microsoft.com/library/bb934097.aspx) <br/> * [Создание, изменение и удаление селективных XML-индексов](http://msdn.microsoft.com/library/jj670109.aspx) |
| Таблица в виде кучи | В версии 12 можно создавать таблицы без кластеризованного индекса. <br/><br/> Эта функция особенно полезна для поддержки инструкции T-SQL SELECT...INTO, которая создает таблицу из результата запроса. |
| Роли приложений | С целью обеспечения безопасности и управления разрешениями в версии 12 можно выдавать инструкции GRANT - DENY - REMOVE для [ролей приложения](http://msdn.microsoft.com/library/ms190998.aspx). |


### 1.3 Категория: Улучшенное понимание потребителя


| Функция | Описание |
| :--- | :--- |
| . | ***Декабрь 2014 г.*** |
| Динамические административные представления | В версии 12 добавлено несколько динамических административных представлений. Дополнительную информацию см. в разделе [Справочник по базе данных SQL Azure (Transact-SQL)](http://msdn.microsoft.com/library/azure/ee336281.aspx). |
| Отслеживание изменений | Версия 12 полностью поддерживает отслеживание изменений. <br/><br/> Подробнее об этой функции можно узнать в статье [Включение и отключение отслеживания изменений (сервер SQL Server)](http://msdn.microsoft.com/library/bb964713.aspx). |


### 1.4. Улучшения производительности на уровне служб Premium


Перечисленные ниже улучшения производительности применяются к уровням служб Premium P2 и P3.


| Функция | Описание |
| :--- | :--- |
| . | ***Декабрь 2014 г.*** |
| Параллельная обработка запросов | В версии 12 повышен уровень параллелизма для соответствующих запросов. |
| Уменьшенная задержка ввода-вывода | Версия 12 имеет значительно меньшую задержку для операций ввода-вывода. |
| Увеличенное число операций ввода-вывода в секунду | В версии 12 можно обрабатывать большее количество операций ввода-вывода за одну секунду. |
| Скорость регистрации данных | Версия 12 способна регистрировать больше изменений данных за одну секунду. |


### 1.5 Сводка улучшений


Версия 12 способствует полной совместимости нашей базы данных SQL с продуктом SQL Server. Версия 12 содержит самые востребованные функции и предусматривает поддержку программирования. Это делает процесс разработки более эффективным и интересным.  Переносить приложения базы данных SQL в облако стало еще проще.


Кроме того, значительно повышена производительность служб уровня Premium в версии 12. Скорость обработки запросов в некоторых приложениях впечатляет. Повышена надежность пропускной способности приложений с интенсивной нагрузкой.


## <a name="V12AzureSqlDbPreviewGaTable"></a>2. Состояние общей доступности версии 12 по регионам


База данных SQL Azure версии 12 была выпущена только для предварительного просмотра и тестирования в декабре 2014 года в регионах, указанных в следующей таблице. Состояние предварительного просмотра изменяется до состояния общей доступности в разные дни в зависимости от региона. В следующей таблице показано текущее состояние версии 12 для каждого региона.


> [AZURE.NOTE]
> [Цены](http://azure.microsoft.com/pricing/details/sql-database/) на использование предварительной версии были снижены. 31 марта 2015 года для всех регионов цены будут подняты до цен уровня общей доступности.


| Регион Azure | Текущее состояние<br/>выпуска версии 12 | Дата перехода в<br/>состояние общей доступности |
| :--- | :--- | :--- |
| Южно-центральный регион США | Общая доступность | 9 февраля 2015 г. |
| Центральный регион США | Общая доступность | 9 февраля 2015 г. |
| Северо-центральный регион США | Общая доступность | 9 февраля 2015 г. |
| Запад США | Общая доступность | 9 февраля 2015 г. |
| Восток США | Общая доступность | 9 февраля 2015 г. |
| Восток США 2 | Общая доступность | 9 февраля 2015 г. |
| Восточная Азия | Общая доступность | 24 февраля 2015 г. |
| Юго-Восточная Азия | Общая доступность | 24 февраля 2015 г. |
| Западная часть Японии | Общая доступность | 24 февраля 2015 г. |
| Восточная часть Японии | Общая доступность | 24 февраля 2015 г. |
| Северная Европа | Общая доступность | 29 января 2015 г. |
| Западная Европа | Общая доступность | 29 января 2015 г. |
| Южная часть Бразилии | Недоступно | Приблизительно в третьем квартале 2015 г. |
| Восточная часть Австралии | Предварительный просмотр | Приблизительно во втором квартале 2015 г. |
| Юго-Восточная часть Австралии | Предварительный просмотр | Приблизительно во втором квартале 2015 г. |


В любом регионе, в котором версия была переведена до состояния общей доступности, во всех новых подписках и их последующих базах данных используется архитектура службы версии 12, поэтому у них есть доступ к последним возможностям. В этой статье перечислены новые возможности, представленные в версии 12.


Заказчики, находящиеся в регионах общей доступности версии, которые используют серверы и базы данных предварительной версии 12, могут обновить (или переместить) свои базы данных до архитектуры службы версии 12, чтобы использовать эти новые возможности в рабочей среде. Базы данных версии 12 должны быть доступны для таких [ценовых уровней](http://azure.microsoft.com/documentation/articles/sql-database-upgrade-new-service-tiers/): Basic, Standard и Premium.


## 3. Дальнейшие действия


Чтобы узнать, как обновить базы данных с версии 11 Базы данных SQL Azure до версии 12, см. статью [Планирование и подготовка к обновлению до последней версии 12 базы данных SQL (предварительная версия)](http://azure.microsoft.com/documentation/articles/sql-database-preview-plan-prepare-upgrade/).


Номера версий, например 12, указывают на значение, возвращаемое следующей инструкцией Transact-SQL:<br/>
**SELECT @@version;**


- 11.0.9228.18 *(версия 11)*
- 12.0.2000.8 *(или немного более поздняя, 12)*


*Скидка.* Ознакомиться с возможностями предварительной версии 12 можно по сниженной цене. Новый уровень S3 обеспечивает 100 единиц DTU (единиц пропускной способности базы данных), а также все функции, доступные в службе уровня Standard, по цене 0,2016 долл. США в час. Цена использования предварительной версии составляет всего 0,1008 долл. США в час. Подробнее об этом см. в статье [Стоимость использования базы данных SQL](http://azure.microsoft.com/pricing/details/sql-database/).


## 4. Предостережения для версии 12


Обратите внимание на следующие меры предосторожности, касающиеся обновления и использования после обновления до предварительной версии последней версии базы данных SQL Azure (12).


### 4.1 Портал предварительной версии для версии 12


Только первый из следующих двух порталов управления Azure поддерживает базы данных версии 12:


- [http://portal.azure.com/](http://portal.azure.com/)
 - Этот более новый портал находится в состоянии предварительной версии и еще не перешел на этап общей доступности.<br/><br/>
- [http://manage.windowsazure.com/](http://manage.windowsazure.com/)
 - Этот старый портал не будет обновлен для поддержки версии 12.


Мы рекомендуем клиентам подключаться к своим базам данных SQL Azure с помощью Visual Studio 2013 (VS2013). VS2013 можно использовать для следующих задач.


- Выполнение инструкции T-SQL.
- Проектирование схемы.
- Разработка базы данных, работающей в сети или в автономном режиме.


Вместо этого можно подключиться с помощью [Visual Studio Community 2013](https://www.visualstudio.com/ru-ru/news/vs2013-community-vs.aspx/) - бесплатной и полнофункциональной версии VS2013.


На странице базы данных на старом портале управления Azure можно щелкнуть **Открыть в Visual Studio**, чтобы запустить VS2013 на компьютере для подключения к базе данных SQL Azure.


Кроме того, можно использовать SQL Server Management Studio (SSMS) 2014 с [CU6](http://support.microsoft.com/kb/3031047/) для подключения к базе данных SQL Azure. Дополнительные сведения приведены в этой записи блога:<br/>[Обновление клиентских средств для базы данных SQL Azure](http://azure.microsoft.com/blog/2014/12/22/client-tooling-updates-for-azure-sql-database/).


### 4.2 Предостережения *during* обновления до версии 12


> [AZURE.NOTE]
> База данных, версия которой ниже 12, *remains available* обеспечивает доступ к данным во время обновления до версии 12.


- Обновление баз данных, размер которых превышает 50 ГБ, до версии 12 может длиться до 24 часов.
- При обновлении сервера базы данных до версии 12 базы данных SQL Azure до завершения обновления на сервере нельзя делать следующее.
 - Создать новую базу данных.
 - Скопировать базу данных на сервер.
 - Восстановить удаленную базу данных.
 - Восстановить базы данных на определенный момент времени.
 - Выполнять георепликацию.
- С момента завершения обновления до версии 12 системе требуется несколько минут, чтобы обновить запись службы доменных имен (DNS) до базы данных версии 12. После обновления DNS клиентское приложение может подключиться к базе данных.
- Ценовые категории служб уровня Web и Business не поддерживаются в версии 12 и не будут поддерживаться в будущих версиях.


### 4.3 Предостережения *after* обновления до версии 12


- Состояние базы данных, обновленной локально до версии 12, восстановить невозможно.
- Скидка 50 % на базу данных SQL Azure версии 12 действует во всех географических регионах до истечения срока ее действия во вторник 31 марта 2015 года. Скидка распространяется на регионы, где действует как состояние предварительного просмотра, так и состоянии общей доступности.


### 4.4 Экспорт и импорт *after* обновления до версии 12


Вы можете экспортировать или импортировать базу данных версии 12 с помощью [веб-портала Azure](http://portal.azure.com/). Также вы можете выполнять экспорт или импорт с помощью любого из следующих инструментов:


- SQL Server Management Studio (SSMS) 2014
- Visual Studio 2013
- Платформа Data-Tier Application Framework (DacFx)


Тем не менее, чтобы использовать эти инструменты, необходимо сначала установить их последние обновления, чтобы убедиться, что они поддерживают новые возможности версии 12:


- [Накопительный пакет обновления 6 для SQL Server Management Studio 2014](http://support2.microsoft.com/kb/3031047)
- [Обновление для средств SQL Server Database в Visual Studio 2013 (февраль 2015 г.)](https://msdn.microsoft.com/data/hh297027)
- [Платформа Data-Tier Application Framework (DacFx) для Azure SQL Database версии 12 (февраль 2015 г.)](http://www.microsoft.com/download/details.aspx?id=45886)


> [AZURE.NOTE] Ссылки на предыдущие средства были обновлены 2 марта 2015 г. или позднее. Рекомендуется использовать эти обновленные средства.


[2. Состояние общей доступности версии 12 по регионам]:#V12AzureSqlDbPreviewGaTable


<!-- EndOfFile -->


<!--HONumber=47-->
