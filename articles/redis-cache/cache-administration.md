---
title: "Администрирование кэша Redis для Azure | Документация Майкрософт"
description: "Узнайте, как выполнять задачи администрирования, такие как перезагрузка и планирование обновлений кэша Redis для Azure."
services: redis-cache
documentationcenter: na
author: steved0x
manager: douge
editor: tysonn
ms.assetid: 8c915ae6-5322-4046-9938-8f7832403000
ms.service: cache
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: cache-redis
ms.workload: tbd
ms.date: 02/09/2017
ms.author: sdanie
translationtype: Human Translation
ms.sourcegitcommit: 8929a1697bf88da82fc027520d0126eaef872840
ms.openlocfilehash: 488212ad1b43d5e35bf46a334bc7ac8e1acabebc


---
# <a name="how-to-administer-azure-redis-cache"></a>Администрирование кэша Redis для Azure
В этом разделе описывается выполнение задач администрирования, таких как [перезагрузка](#reboot) и [планирование обновлений](#schedule-updates) для экземпляров кэша Redis для Azure.

> [!IMPORTANT]
> Параметры и функции, описанные в этой статье, доступны только для кэшей уровня "Премиум".
> 
> 

## <a name="reboot"></a>Reboot
Колонка **Перезагрузка** позволяет перезагрузить один или несколько узлов кэша. Это дает возможность протестировать приложение на устойчивость в случае сбоя.

![Reboot](./media/cache-administration/redis-cache-administration-reboot.png)

Выберите узлы, которые нужно перезагрузить, и щелкните **Перезагрузить**.

![Reboot](./media/cache-administration/redis-cache-reboot.png)

Если у вас кэш уровня "Премиум" с включенной кластеризацией, то вы можете выбрать сегменты кэша для перезагрузки.

![Reboot](./media/cache-administration/redis-cache-reboot-cluster.png)

Чтобы перезагрузить один или несколько узлов кэша, выберите необходимые узлы и нажмите кнопку **Перезагрузить**. Если у вас кэш уровня "Премиум" с включенной кластеризацией, выберите сегменты для перезагрузки и нажмите кнопку **Перезагрузить**. Через несколько минут выбранные узлы перезагрузятся, а еще через несколько минут — возобновят работу.

Воздействие на клиентские приложения зависит от того, какие узлы перезагружаются.

* **Главный** : при перезагрузке главного узла кэш Redis для Azure выполняет отработку отказа на узел реплики, а затем повышает его уровень до главного узла. Во время этой отработки отказа может возникать короткий интервал, когда попытки подключения к кэшу заканчиваются сбоем.
* **Подчиненный** : перезагрузка подчиненного узла обычно не оказывает никакого воздействия на клиенты кэша.
* **Главный и подчиненный**: при перезагрузке обоих узлов кэша все данные в нем теряются. Подключения к кэшу завершаются сбоем, пока первичный узел снова не станет доступным. Если вы настроили [сохраняемость данных](cache-how-to-premium-persistence.md), то последняя резервная копия восстанавливается, когда кэш снова становится доступным. Обратите внимание, что все записи в кэше, выполненные после сохранения последней резервной копии, будут утеряны.
* **Узлы кэша уровня "Премиум" с включенной кластеризацией.** При перезагрузке узлов кэша уровня "Премиум" с включенной кластеризацией процедура восстановления выбранных узлов такая же, как при перезагрузке узлов некластеризованного кэша.

> [!IMPORTANT]
> Функция перезагрузки доступна только для кэшей уровня "Премиум".
> 
> 

## <a name="reboot-faq"></a>Часто задаваемые вопросы о перезагрузке
* [Какой узел следует перезагрузить, чтобы протестировать приложение?](#which-node-should-i-reboot-to-test-my-application)
* [Можно ли перезагрузить кэш, чтобы очистить подключения клиентов?](#can-i-reboot-the-cache-to-clear-client-connections)
* [Сохранятся ли данные кэша после перезагрузки?](#will-i-lose-data-from-my-cache-if-i-do-a-reboot)
* [Можно ли перезагрузить кэш с помощью PowerShell, интерфейса командной строки или других средств управления?](#can-i-reboot-my-cache-using-powershell-cli-or-other-management-tools)
* [Для каких ценовых категорий доступна функция перезагрузки?](#what-pricing-tiers-can-use-the-reboot-functionality)

### <a name="which-node-should-i-reboot-to-test-my-application"></a>Какой узел следует перезагрузить, чтобы протестировать приложение?
Чтобы протестировать приложение на устойчивость в случае сбоя основного узла кэша, перезагрузите **главный** узел. Чтобы протестировать приложение на устойчивость в случае сбоя вторичного узла, перезагрузите **подчиненный** узел. Чтобы протестировать приложение на устойчивость в случае общего сбоя кэша, перезагрузите **оба** узла.

### <a name="can-i-reboot-the-cache-to-clear-client-connections"></a>Можно ли перезагрузить кэш, чтобы очистить подключения клиентов?
Да, при перезагрузке кэша все клиентские подключения очищаются. Это может оказаться полезным, когда все подключения клиентов уже использованы, например, из-за логической ошибки или ошибки в клиентском приложении. В каждой ценовой категории существуют [ограничения на подключение клиентов](cache-configure.md#default-redis-server-configuration) для различных размеров, и когда эти ограничения достигаются, последующие подключения не принимаются. Перезагрузка кэша позволяет очистить все подключения клиентов.

> [!IMPORTANT]
> Если связь с клиентом разорвана из-за ошибки в коде клиента или логической ошибки, помните, что StackExchange.Redis автоматически восстановит подключение, когда узел Redis снова станет доступным. Если основную проблему не устранить, связь с клиентом по-прежнему будет отсутствовать.
> 
> 

### <a name="will-i-lose-data-from-my-cache-if-i-do-a-reboot"></a>Сохранятся ли данные кэша после перезагрузки?
Если перезагрузить и **главный**, и **подчиненный** узлы, то все данные в кэше (или в отдельном сегменте при использовании кэша уровня "Премиум" с включенной кластеризацией) будут утеряны. Если вы настроили [сохраняемость данных](cache-how-to-premium-persistence.md), последняя резервная копия будет восстановлена, когда кэш снова станет доступным. Обратите внимание, что все записи в кэше, выполненные после сохранения последней резервной копии, будут утеряны.

Если перезагрузить только один из узлов, то, как правило, данные не теряются, но это все же может произойти. Например, если перезагрузить главный узел в то время, когда выполняется запись в кэш, то данные кэша будут потеряны. Данные также могут быть утеряны, если вы перезагрузите один узел, а другой узел случайно выйдет из строя в то же время. Дополнительные сведения о возможных причинах потери данных см. в статье [What happened to my data in Redis?](https://gist.github.com/JonCole/b6354d92a2d51c141490f10142884ea4#file-whathappenedtomydatainredis-md) (Что произошло с моими данными в Redis?).

### <a name="can-i-reboot-my-cache-using-powershell-cli-or-other-management-tools"></a>Можно ли перезагрузить кэш с помощью PowerShell, интерфейса командной строки или других средств управления?
Да, инструкции по использованию PowerShell см. в разделе, посвященном [перезагрузке кэша Redis](cache-howto-manage-redis-cache-powershell.md#to-reboot-a-redis-cache).

### <a name="what-pricing-tiers-can-use-the-reboot-functionality"></a>Для каких ценовых категорий доступна функция перезагрузки?
Функция перезагрузки доступна только в ценовой категории "Премиум".

## <a name="schedule-updates"></a>Планирование обновлений
В колонке **Планирование обновлений** можно указать период обслуживания для кэша. Если задан период обслуживания, то любые обновления сервера Redis выполняются в этот период. Обратите внимание, что данный период обслуживания относится только к обновлениям сервера Redis, а не ко всем обновлениям Azure или операционной системы виртуальных машин, на которых размещен кэш.

![Планирование обновлений](./media/cache-administration/redis-schedule-updates.png)

Чтобы задать период обслуживания, отметьте необходимые дни и укажите, когда будет начинаться период обслуживания в каждый из дней, а затем нажмите кнопку **ОК**. Обратите внимание, что время периода обслуживания указывается в формате UTC. 

> [!NOTE]
> Период обслуживания по умолчанию для обновлений — 5 часов. Это значение можно настроить на портале Azure, а также в PowerShell с помощью параметра `MaintenanceWindow` командлета [New-AzureRmRedisCacheScheduleEntry](https://docs.microsoft.com/powershell/resourcemanager/azurerm.rediscache/v2.5.0/new-azurermrediscachescheduleentry). Дополнительные сведения см. в разделе [Можно ли управлять запланированными обновлениями с помощью PowerShell, интерфейса командной строки или других инструментов управления?](#can-i-manage-scheduled-updates-using-powershell-cli-or-other-management-tools)
> 
> 

## <a name="schedule-updates-faq"></a>Часто задаваемые вопросы о планировании обновлений
* [Когда происходят обновления, если функция планирования обновлений не используется?](#when-do-updates-occur-if-i-dont-use-the-schedule-updates-feature)
* [Какие типы обновлений выполняются в запланированный период обслуживания?](#what-type-of-updates-are-made-during-the-scheduled-maintenance-window)
* [Можно ли управлять запланированными обновлениями с помощью PowerShell, интерфейса командной строки или других средств управления?](#can-i-managed-scheduled-updates-using-powershell-cli-or-other-management-tools)
* [Для каких ценовых категорий доступна функция планирования обновлений?](#what-pricing-tiers-can-use-the-schedule-updates-functionality)

### <a name="when-do-updates-occur-if-i-dont-use-the-schedule-updates-feature"></a>Когда происходят обновления, если функция планирования обновлений не используется?
Если период обслуживания не указан, то обновления могут выполняться в любое время.

### <a name="what-type-of-updates-are-made-during-the-scheduled-maintenance-window"></a>Какие типы обновлений выполняются в запланированный период обслуживания?
В запланированный период обслуживания выполняются только обновления сервера Redis. Этот период обслуживания не распространяется на обновления Azure или обновления операционной системы виртуальной машины.

### <a name="can-i-managed-scheduled-updates-using-powershell-cli-or-other-management-tools"></a>Можно ли управлять запланированными обновлениями с помощью PowerShell, интерфейса командной строки или других средств управления?
Да, управлять запланированными обновлениями можно с помощью следующих командлетов PowerShell:

* [Get-AzureRmRedisCachePatchSchedule](https://docs.microsoft.com/powershell/resourcemanager/azurerm.rediscache/v2.5.0/get-azurermrediscachepatchschedule)
* [New-AzureRmRedisCachePatchSchedule](https://docs.microsoft.com/powershell/resourcemanager/azurerm.rediscache/v2.5.0/new-azurermrediscachepatchschedule)
* [New-AzureRmRedisCacheScheduleEntry](https://docs.microsoft.com/powershell/resourcemanager/azurerm.rediscache/v2.5.0/new-azurermrediscachescheduleentry)
* [Remove-AzureRmRedisCachePatchSchedule](https://docs.microsoft.com/powershell/resourcemanager/azurerm.rediscache/v2.5.0/remove-azurermrediscachepatchschedule)

### <a name="what-pricing-tiers-can-use-the-schedule-updates-functionality"></a>Для каких ценовых категорий доступна функция планирования обновлений?
Функция планирования обновлений доступна только в ценовой категории "Премиум".

## <a name="next-steps"></a>Дальнейшие действия
* Узнайте больше о [кэше Redis для Azure уровня "Премиум"](cache-premium-tier-intro.md).




<!--HONumber=Feb17_HO2-->


