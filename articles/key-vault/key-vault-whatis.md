---
title: Что такое хранилище ключей Azure? Azure Key Vault | Документация Майкрософт
description: Хранилище ключей Azure защает криптографические ключи и секреты, используемые облачными приложениями и службами. Клиенты могут шифровать ключи аутентификации, ключи учетных записей хранения, ключи шифрования данных, PFX-файлы и пароли, используя ключи, защищенные аппаратными модулями безопасности.
services: key-vault
documentationcenter: ''
author: barclayn
manager: mbaldwin
tags: azure-resource-manager
ms.assetid: e759df6f-0638-43b1-98ed-30b3913f9b82
ms.service: key-vault
ms.workload: identity
ms.tgt_pltfrm: na
ms.topic: conceptual
ms.date: 01/18/2019
ms.author: barclayn
ms.openlocfilehash: db2e2e80ecc98eba0f1bba18abad8b561b16036c
ms.sourcegitcommit: 947b331c4d03f79adcb45f74d275ac160c4a2e83
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/05/2019
ms.locfileid: "55745866"
---
# <a name="what-is-azure-key-vault"></a>Что такое хранилище ключей Azure?

Azure Key Vault помогает в решении следующих проблем:

- **Управление секретами.** Azure Key Vault обеспечивает безопасное хранение токенов, паролей, сертификатов, ключей API и других секретных сведений со строгим контролем доступа к ним.
- **Управление ключами.** Azure Key Vault также может использоваться как решение по управлению ключами. Эта служба позволяет легко создавать и контролировать ключи шифрования, используемые для шифрования данных. 
- **Управление сертификатами.** С помощью службы Azure Key Vault можно с легкостью подготавливать, администрировать и развертывать общедоступные и частные сертификаты SSL и TLS для использования в Azure и внутренних подключенных ресурсах. 
- **Хранение секретов, защищенных аппаратными модулями безопасности.** Секреты и ключи могут быть защищены с помощью программного обеспечения или FIPS 140-2 уровня 2 с проверкой HSM.

## <a name="basic-concepts"></a>Основные понятия

Azure Key Vault — это средство для безопасного хранения и доступа к секретам. Секрет — это то, к чему необходимо строго контролировать доступ, например ключи API, пароли или сертификаты. **Хранилище** представляет логическую группу секретов. Теперь для выполнения любых операций с хранилищем ключей необходимо сначала пройти проверку подлинности в нем. 

По сути, существует три способа проверки подлинности в Key Vault.

1. **Использование [управляемых удостоверений для ресурсов Azure](https://docs.microsoft.com/azure/active-directory/managed-identities-azure-resources/overview)** (**рекомендуемое решение**): при развертывании приложения на виртуальной машине в Azure можно назначить для виртуальной машины удостоверение, имеющее доступ к Key Vault. Можно также назначить удостоверения другим ресурсам Azure, которые перечислены [здесь](https://docs.microsoft.com/azure/active-directory/managed-identities-azure-resources/overview). Преимущество этого подхода заключается том, что приложение или служба не управляют сменой первого секрета. Azure автоматически меняет удостоверение. 
2. Использование **субъекта-службы и сертификата**: второй вариант заключается в использовании субъекта-службы и связанного сертификата, который имеет доступ к Key Vault. Ответственность за смену сертификата возлагается на владельца приложения или разработчика; поэтому использовать этот вариант не рекомендуется.
3. **Использование субъекта-службы и секрета:** третий вариант (который не рекомендуется применять) — использовать субъект-службу и секретный ключ для проверки подлинности в Key Vault.

> [!NOTE]
> Описанный выше третий вариант не рекомендуется применять, так как сложно реализовать автоматическую смену ключа начальной загрузки, используемого для проверки подлинности в Key Vault.

Вот несколько основных терминов:

- **Tenant:** Это организация, которая владеет и управляет определенным экземпляром облачных служб Майкрософт. Это определение наиболее часто используется в прямом смысле для ссылки на набор услуг Azure и Office 365 для организации.
- **Владелец хранилища**. Он может создать хранилище ключей, получить полный доступ и контроль над ним. Владелец хранилища имеет доступ к секретам и ключам, а также может настроить аудит журнала. Администраторы могут управлять жизненным циклом ключей. Он может откатить ключ до новой версии, создать ее резервную копию и выполнять другие связанные задачи.
- **Объект-получатель хранилища**. Он может выполнять действия в ресурсах хранилища ключей, когда владелец хранилища предоставляет пользовательский доступ. Доступные действия зависят от предоставленных разрешений.
- **Ресурс**: Это управляемый элемент, доступный в Azure. Самые распространенные ресурсы — виртуальная машина, учетная запись хранения, веб-приложение, база данных и виртуальная сеть, но существуют и многие другие.
- **Группа ресурсов.** Группа ресурсов — это контейнер, содержащий связанные ресурсы для решения Azure. В группу ресурсов могут входить все ресурсы приложения или только те, которыми необходимо управлять совместно. Пользователи могут выбрать оптимальный для своей организации способ распределения ресурсов в группах ресурсов.
- **Субъект-служба Azure** — это идентификатор безопасности, который созданные пользователем приложения, службы и средства автоматизации используют для доступа к определенным ресурсам Azure. Это что-то вроде удостоверения пользователя (имя пользователя и пароль или сертификат) с определенной ролью и строго контролируемыми разрешениями. В отличие от удостоверений пользователей субъект-служба должен выполнять только определенные задачи. Это решение повышает безопасность, если вы предоставите ему минимальный уровень разрешений для выполнения задач управления.
- **[Azure Active Directory (Azure AD)](../active-directory/active-directory-whatis.md)**. Это служба Active Directory для клиента. Каждый каталог содержит один или несколько доменов. Каталог может иметь много подписок, связанных с ним, но только один клиент. 
- **Идентификатор клиента Azure**. Это уникальный способ идентификации экземпляра Azure AD в пределах подписки Azure.
- **Управляемые удостоверения для ресурсов Azure**. Azure Key Vault позволяет обеспечить безопасное хранение учетных данных, а также других ключей и секретов, но для их получения код должен выполнять аутентификацию в Key Vault. Управляемое удостоверение упрощает решение этой задачи, предоставляя службам Azure автоматически управляемое удостоверение в Azure AD. Это удостоверение можно использовать для аутентификации хранилища ключей или любой службы, которая поддерживает аутентификацию Azure AD, не храня какие-либо учетные данные в коде. Дополнительные сведения см. на рисунке ниже и в статье об [управляемых удостоверениях для ресурсов Azure](../active-directory/managed-identities-azure-resources/overview.md).

    ![Схема работы управляемых удостоверений для ресурсов Azure](./media/key-vault-whatis/msi.png)

## <a name="key-vault-roles"></a>Роли Key Vault

Используйте таблицу ниже, чтобы лучше понять, как хранилище ключей может помочь в удовлетворении требований разработчиков и администраторов безопасности.

| Роль | Проблема | Решение с помощью хранилища ключей Azure |
| --- | --- | --- |
| Разработчик приложения Azure |"Я хочу написать приложение для Azure, которое будет использовать ключи для подписывания и шифрования, но эти ключи должны быть внешними по отношению к приложению, чтобы решение подходило для географически удаленного приложения. <br/><br/>Необходимо, чтобы эти ключи и секреты были защищены и не нужно было писать код самостоятельно, а также чтобы их можно было с легкостью и оптимальной производительностью использовать в моем приложении". |√ Ключи хранятся в хранилище, и при необходимости их можно вызывать с помощью URI.<br/><br/> √ Azure защищает ключи с использованием стандартных отраслевых алгоритмов, методов управления длиной ключей и аппаратных модулей безопасности.<br/><br/>  √ Ключи обрабатываются в аппаратных модулях безопасности, которые находятся в тех же центрах обработки данных Azure, что и приложения. Это обеспечивает более высокую надежность и менее длительную задержку, чем при расположении ключей в другом месте, например в локальной среде. |
| Разработчик программного обеспечения как услуги (SaaS) |«Я не хочу нести ответственность или связывать себя потенциальными обязательствами, связанными с ключами и секретами клиентов моих заказчиков. <br/><br/>Мне нужно, чтобы заказчики владели и управляли своими ключами, а мне можно было полностью сосредоточиться на своей основной работе, а именно предоставлении базовых функций программного обеспечения". |√ Клиенты могут импортировать свои ключи в Azure и управлять ими. Если приложению SaaS необходимо выполнять операции шифрования, используя ключи клиентов, то хранилище ключей выполняет эти операции от имени приложения. Приложение не видит ключи клиентов. |
| Руководитель службы безопасности |«Мне необходимо знать, что аппаратные модули безопасности, используемые в наших приложениях, соответствуют стандарту FIPS 140-2 уровня 2, обеспечивающему безопасное управление ключами. <br/><br/>Я также хочу убедиться, что моя организация может управлять жизненным циклом ключей и отслеживать их использование. <br/><br/>Кроме того, хотя мы используем множество служб и ресурсов Azure, необходимо, чтобы ключами можно было управлять из одного расположения в Azure». |√ Аппаратные модули безопасности прошли проверку по стандарту FIPS 140-2 уровня 2.<br/><br/>√ Хранилище ключей разработано таким образом, чтобы сотрудники Майкрософт не могли видеть или извлекать ваши ключи.<br/><br/>√ Использование ключа протоколируется почти в реальном времени.<br/><br/>√ Хранилище предоставляет единый интерфейс, независимо от количества хранилищ в Azure, поддерживаемых регионов и использующих их приложений. |

Хранилища ключей может создавать и использовать любой пользователь, у которого есть подписка Azure. Хотя Key Vault предоставляет преимущества для разработчиков и администраторов безопасности, администратор организации, который управляет в ней другими службами Azure, может также реализовать хранилища и управлять ими. Например, этот администратор может войти в систему, используя подписку Azure, и создать для организации хранилище, в котором будут храниться ключи. Затем он будет отвечать за выполнение таких операционных задач, как:

- создание или импорт ключа или секрета;
- отзыв или удаление ключа или секрета;
- авторизация пользователей или приложений для доступа к хранилищу ключей с целью управления ключами и секретами или их использования;
- настройка использования ключей (например, подписи и шифрования);
- мониторинг использования ключей.

Затем этот администратор будет предоставлять разработчикам URI для вызова ключей из приложения, а их администраторам безопасности — информацию журналов использования ключей. 

![Общие сведения о работе хранилища Azure Key Vault][1]

Разработчики также могут управлять ключами напрямую с помощью API. Дополнительные сведения см. в статье [Руководство разработчика хранилища ключей Azure](key-vault-developers-guide.md).

## <a name="next-steps"></a>Дополнительная информация

Узнайте, как [защитить свое хранилище](key-vault-secure-your-key-vault.md)

<!--Image references-->
[1]: ./media/key-vault-whatis/AzureKeyVault_overview.png
Хранилище ключей Azure доступно в большинстве регионов. Дополнительные сведения см. на странице [цен на хранилище ключей](https://azure.microsoft.com/pricing/details/key-vault/).
