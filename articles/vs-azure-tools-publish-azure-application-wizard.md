<properties 
   pageTitle="Мастер публикации приложений Azure | Microsoft Azure"
   description="Мастер публикации приложений Azure"
   services="visual-studio-online"
   documentationCenter="na"
   authors="TomArcher"
   manager="douge"
   editor="" />
<tags 
   ms.service="multiple"
   ms.devlang="multiple"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="04/19/2016"
   ms.author="tarcher" />

# Мастер публикации приложений Azure

## Обзор

Разработанное в Visual Studio веб-приложение проще всего опубликовать в облачной службе Azure, используя мастер **публикации приложений Azure**. В первом разделе описаны шаги, которые необходимо выполнить, прежде чем использовать мастер. В остальных разделах описаны возможности мастера.

>[AZURE.NOTE] Эта статья посвящена развертыванию в облачных службах, а не на веб-сайтах. Сведения о развертывании на веб-сайтах см. в статье [Развертывание веб-сайта Azure](https://social.msdn.microsoft.com/Search/windowsazure?query=How%20to%20Deploy%20an%20Azure%20Web%20Site&Refinement=138&ac=4#refinementChanges=117&pageNumber=1&showMore=false).

## Предварительные требования

Чтобы опубликовать веб-приложение в Azure, необходимо иметь учетную запись Майкрософт и подписку Azure, а также связать веб-приложение с облачной службой Azure. Если вы уже выполнили эти задачи, можно перейти к следующему разделу.

1. Получите учетную запись Майкрософт и подписку Azure. [Здесь](https://azure.microsoft.com/pricing/free-trial/) вы можете получить бесплатную пробную подписку Azure на месяц.

1. Создайте облачную службу и учетную запись хранения в Azure. Это можно сделать в обозревателе сервера в Visual Studio или на [портале управления Azure](http://go.microsoft.com/fwlink/?LinkID=213885).

1. Включите веб-приложение для Azure. Чтобы включить веб-приложение для публикации в Azure из Visual Studio, необходимо связать его с проектом облачной службы Azure в Visual Studio. Чтобы создать связанный проект облачной службы, откройте контекстное меню для проекта веб-приложения и выберите «Преобразовать», а затем — **Преобразовать в проект облачной службы Azure**.

1. После добавления в решение проекта облачной службы снова откройте это контекстное меню и выберите **Опубликовать**. Дополнительные сведения о включении приложений для Azure см. в статье [Инструкции. Миграция и публикация веб-приложения в облачную службу Azure из среды Visual Studio](https://msdn.microsoft.com/library/azure/hh420322.aspx).

>[AZURE.NOTE] Не забудьте запустить Visual Studio с правами администратора («Запуск от имени администратора»).

1. Когда вы будете готовы к публикации приложения, откройте контекстное меню для проекта облачной службы Azure и выберите команду **Опубликовать**. Ниже показаны шаги мастера публикации приложений Azure.

## Выбор подписки

### Чтобы выбрать подписку, сделайте следующее.

1. Если вы используете мастер впервые, сначала необходимо выполнить вход. Нажмите ссылку **Вход**. Войдите на портал Azure, указав в окне запроса имя пользователя и пароль учетной записи Azure. 

    ![Это одно из окон мастера публикации](./media/vs-azure-tools-publish-azure-application-wizard/IC799159.png)

    В списке подписок указаны подписки, связанные с вашей учетной записью. Подписки также можно просмотреть в любом импортированном ранее файле подписки.

1. В списке **Выберите подписку** выберите подписку, которую следует использовать для этого развертывания.

   Если выбрать **<Управление…>**, откроется диалоговое окно **Управление подписками**. В нем можно выбрать подписку и учетную запись пользователя, которые следует использовать. На вкладке **Учетные записи** отображаются все ваши учетные записи, а на вкладке **Подписки** — все подписки, связанные с учетными записями. Кроме того, можно выбрать регион, из которого необходимо использовать ресурсы Azure, а также создать или импортировать с портала Azure сертификаты для подписки. Если вы импортировали подписки из файла подписки, связанные сертификаты будут отображаться на вкладке **Сертификаты**. Когда все будет готово, нажмите кнопку **Закрыть**.

    ![Manage subscriptions](./media/vs-azure-tools-publish-azure-application-wizard/IC799160.png)

    >[AZURE.NOTE] A subscription file can contain more than one subscription.

1. Чтобы продолжить, нажмите кнопку **Далее**. 

    Если в подписке нет облачных служб, необходимо создать облачную службу в Azure для размещения проекта. Откроется диалоговое окно **Создание облачной службы и учетной записи хранилища**.

    Укажите новое имя для облачной службы. Имя должно быть уникальным в рамках Azure. Укажите регион или территориальную группу для центра обработки данных, ближайшего к вам или к большинству ваших клиентов. Это имя также используется для новой учетной записи хранения, которую создает Azure для вашей облачной службы.

1. Измените любые параметры, необходимые для этого развертывания, а затем опубликуйте его с помощью кнопки **Опубликовать** (в следующем разделе приведены дополнительные сведения о различных параметрах). Чтобы просмотреть параметры перед публикацией, нажмите кнопку **Далее**.

    >[AZURE.NOTE] Если на этом шаге нажать кнопку «Опубликовать», состояние этого развертывания можно будет отслеживать в Visual Studio.

Как общие, так и расширенные параметры развертывания можно изменить с помощью мастера **публикации приложений Azure**. Например, можно выбрать параметр для развертывания приложения в тестовой среде перед выпуском. На рисунке ниже показана вкладка **Общие параметры** для развертывания Azure.

![Общие параметры](./media/vs-azure-tools-publish-azure-application-wizard/IC749013.png)

## Настройка параметров публикации

### Чтобы настроить параметры публикации, сделайте следующее.

1. В списке **Облачная служба** выполните один из следующих наборов действий.

   1. В раскрывающемся списке выберите существующую облачную службу. Отобразится расположение центра обработки данных для службы. Запишите это расположение и убедитесь, что учетная запись хранения расположена в том же центре обработки данных.

    1. Выберите **Создать**, чтобы создать облачную службу, размещенную в Azure. В диалоговом окне **Создание облачной службы** укажите имя службы, а затем выберите регион или территориальную группу, чтобы указать расположение центра обработки данных, где будет размещена эта облачная служба. Имя должно быть уникальным в рамках Azure.

1. В списке **Среда** выберите **Рабочая среда** или **Промежуточная среда**. Выберите промежуточную среду, если хотите развернуть приложение в тестовой среде. Приложение можно переместить в рабочую среду позже.

1. В списке **Конфигурация построения** выберите **Отладка** или **Выпуск**.

1. В списке **Конфигурация службы** выберите **Облако** или **Локально**.

    Установите флажок **Включить удаленный рабочий стол для всех ролей**, если хотите удаленно подключаться к службе. Этот параметр в основном используется для устранения неполадок. Если этот флажок установлен, откроется диалоговое окно **Конфигурация удаленного рабочего стола**. Чтобы изменить конфигурацию, нажмите ссылку «Параметры».

    Установите флажок **Включить веб-развертывание для всех веб-ролей**, чтобы включить веб-развертывание для службы. Для использования этой функции необходимо включить удаленный рабочий стол. Дополнительные сведения см. в статье [[Публикация облачной службы с помощью инструментов Azure](https://msdn.microsoft.com/library/azure/ff683672.aspx)](https://msdn.microsoft.com/library/azure/ff683672.aspx). Дополнительные сведения о веб-развертывании см. в статье [[Публикация облачной службы с помощью инструментов Azure](https://msdn.microsoft.com/library/azure/ff683672.aspx)](https://msdn.microsoft.com/library/azure/ff683672.aspx).

1. Выберите вкладку **Дополнительные параметры**. В поле **Метка развернутого приложения** оставьте имя по умолчанию или введите имя на свой выбор. Чтобы добавить дату к метке развертывания, оставьте флажок установленным.

    ![Третье окно мастера публикации](./media/vs-azure-tools-publish-azure-application-wizard/IC749014.png)

1. В списке **Учетная запись хранения** выберите учетную запись хранения для этого развертывания. Сравните расположения центров обработки данных для облачной службы и учетной записи хранения. В идеале эти расположения должны совпадать.

    >[AZURE.NOTE] В учетной записи хранения Azure содержится пакет для развертывания приложения. После развертывания приложения пакет удаляется из учетной записи хранения.

1. Установите флажок **Обновление развертывания**, если требуется развернуть только обновленные компоненты. Этот тип развертывания выполняется быстрее, чем полное развертывание. Выберите ссылку **Параметры**, чтобы открыть диалоговое окно **Параметры обновления развертывания**, показанное на следующем рисунке.

    ![Параметры развертывания](./media/vs-azure-tools-publish-azure-application-wizard/IC617060.png)

    Можно выбрать один из вариантов для развертывания обновлений — добавочное или одновременное. В случае добавочного развертывания за один раз обновляется один развернутый экземпляр, чтобы приложение оставалось в сети доступным для пользователей. В случае одновременного развертывания обновляются все развернутые экземпляры одновременно. Одновременное обновление выполняется быстрее, чем добавочное, но если выбрать этот вариант, приложения могут быть недоступны во время обновления.

    Если полное развертывание должно выполняться автоматически в случае сбоя развертывания обновлений, установите флажок «Если развертывание невозможно обновить, выполнять полное развертывание». Полное развертывание сбрасывает виртуальный IP-адрес облачной службы. Дополнительные сведения см. в статье [Инструкции. Сохранение константного виртуального IP-адреса для облачной службы](https://msdn.microsoft.com/library/azure/jj614593.aspx).


1. Чтобы выполнить отладку службы, установите флажок **Включить IntelliTrace**. Или же, если вы развертываете конфигурацию **Отладка** и требуется отладка облачной службы в Azure, установите флажок **Включить удаленный отладчик для всех ролей**, чтобы развернуть службы удаленной отладки.

2. Чтобы выполнить профилирование приложения, установите флажок **Включить профилирование**, а затем нажмите ссылку **Параметры**, чтобы отобразить параметры профилирования.


    >[AZURE.NOTE] Чтобы включить IntelliTrace или профилирование уровневого взаимодействия, необходимо использовать Visual Studio Ultimate. Оба типа профилирования нельзя включить одновременно.

    Дополнительные сведения см. в статьях [Отладка опубликованной облачной службы с помощью IntelliTrace и Visual Studio](https://msdn.microsoft.com/library/azure/ff683671.aspx) и [Тестирование производительности облачной службы](https://msdn.microsoft.com/library/azure/hh369930.aspx).

1. Чтобы просмотреть страницу сводки для приложения, выберите **Далее**.

## Публикация приложения

1. Вы можете создать профиль публикации на основе ранее выбранных параметров. Например, можно создать один профиль для тестовой среды, а другой — для рабочей. Чтобы сохранить профиль, щелкните значок **Сохранить**. Мастер создаст профиль и сохранит его в проекте Visual Studio. Чтобы изменить имя профиля, откройте список **Целевой профиль**, а затем выберите **<Управление…>**.

    ![Окно сводки мастера публикации](./media/vs-azure-tools-publish-azure-application-wizard/IC749015.png)

    >[AZURE.NOTE] Профиль публикации отображается в обозревателе решений в Visual Studio, а параметры профиля записываются в файл с расширением AZUREPUBXML. Параметры сохраняются как атрибуты XML-тегов.

1. Чтобы опубликовать приложение, нажмите кнопку **Опубликовать**. Состояние процесса можно отслеживать в окне **Вывод** в Visual Studio.

## См. также

[Инструкции. Миграция и публикация веб-приложения в облачную службу Azure из среды Visual Studio](https://msdn.microsoft.com/library/azure/hh420322.aspx)

[Публикация облачной службы с помощью инструментов Azure](https://msdn.microsoft.com/library/azure/ff683672.aspx)

[Отладка опубликованной облачной службы с помощью IntelliTrace и Visual Studio](https://msdn.microsoft.com/library/azure/ff683671.aspx)

[Тестирование производительности облачной службы](https://msdn.microsoft.com/library/azure/hh369930.aspx)

<!---HONumber=AcomDC_0420_2016-->