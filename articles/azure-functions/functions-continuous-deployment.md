<properties
   pageTitle="Непрерывное развертывание для Функций Azure | Microsoft Azure"
   description="Публикация Функций Azure с помощью средств непрерывного развертывания службы приложений Azure."
   services="functions"
   documentationCenter="na"
   authors="ggailey777"
   manager="erikre"
   editor=""
   tags=""
   />

<tags
   ms.service="functions"
   ms.devlang="multiple"
   ms.topic="article"
   ms.tgt_pltfrm="multiple"
   ms.workload="na"
   ms.date="09/25/2016"
   ms.author="glenga"/>


# <a name="continuous-deployment-for-azure-functions"></a>Непрерывное развертывание для Функций Azure 

Функции Azure упрощают процесс настройки непрерывного развертывания для приложения-функции. Они используют интеграцию службы приложений Azure с BitBucket, Dropbox, GitHub и Visual Studio Team Services (VSTS), что обеспечивает непрерывное развертывание, когда Azure добавляет обновления в код функций, опубликованных в одной из этих служб. Если вы еще не работали с Функциями Azure, начните с [обзора](functions-overview.md).

Непрерывное развертывание очень удобно для проектов, которые часто обновляются несколькими участниками. Этот процесс также обеспечивает поддержку системы управления версиями в коде функций. В настоящее время поддерживаются следующие источники развертывания:

+ [Bitbucket;](https://bitbucket.org/)
+ [Dropbox](https://bitbucket.org/)
+ [локальный репозиторий Git;](../app-service-web/app-service-deploy-local-git.md)
+ внешний репозиторий Git;
+ [GitHub]
+ внешний репозиторий Mercurial;
+ [OneDrive](https://onedrive.live.com/)
+ Visual Studio Team Services

Развертывания настраиваются на основе приложения-функции. После включения непрерывного развертывания доступ к коду функции на портале предоставляется *только для чтения*.

## <a name="continuous-deployment-requirements"></a>Требования к непрерывному развертыванию

Перед настройкой непрерывного развертывания необходимо настроить источник развертывания и код функций в этом источнике. В заданном развертывании приложения-функции каждая функция расположена в именованном подкаталоге, где имя каталога соответствует имени функции. Структура папок соответствует коду сайта. 

[AZURE.INCLUDE [functions-folder-structure](../../includes/functions-folder-structure.md)]

## <a name="setting-up-continuous-deployment"></a>Настройка непрерывного развертывания

Чтобы настроить непрерывное развертывание для имеющегося приложения-функции, сделайте следующее:

1. В приложении-функции на [портале функций Azure](https://functions.azure.com/signin) щелкните **Параметры приложения-функции** > **Настройка непрерывной интеграции** > **Настройка**.

    ![Настройка непрерывного развертывания](./media/functions-continuous-deployment/setup-deployment.png)
    
    ![Настройка непрерывного развертывания](./media/functions-continuous-deployment/setup-deployment-1.png)
    
    Кроме того, колонку "Развертывания" можно открыть на странице быстрого запуска Функций, щелкнув **Start from source control**(Система управления версиями).

2. В колонке "Развертывания" щелкните **Выбор источника**, а затем введите информацию о выбранном источнике развертывания и нажмите кнопку **OК**.

    ![Выбор источника развертывания](./media/functions-continuous-deployment/choose-deployment-source.png)

После настройки непрерывного развертывания все файлы об изменениях в источнике развертывания копируются в приложение-функцию и активируется полное развертывание сайта. После обновления файлов в источнике выполняется повторное развертывание сайта.


##<a name="deployment-options"></a>Варианты развертывания

Ниже приведены некоторые стандартные сценарии развертывания.

+ 

###<a name="create-a-staging-deployment"></a>Создание промежуточного развертывания

В настоящее время приложения-функции не поддерживают слоты развертывания. Однако промежуточными и рабочими развертываниями можно отдельно управлять с помощью непрерывной интеграции.

Обычно процедура настройки и работа с промежуточным развертыванием выглядят следующим образом.

1. Создайте в своей подписке два приложения-функции: одно для рабочего кода, а второе для промежуточного. 

2. Создайте источник развертывания, если он еще не создан. В этом примере используется [GitHub].
 
3. Для рабочего приложения-функции выполните действия, описанные в разделе **Настройка непрерывного развертывания** , и выберите в качестве ветви развертывания главную ветвь репозитория GitHub.

    ![Выбор ветви развертывания](./media/functions-continuous-deployment/choose-deployment-branch.png)

4. Повторите это действие для промежуточного приложения-функции, но в этот раз выберите промежуточную ветвь в своем репозитории GitHub. Если источник развертывания не поддерживает ветвление, используйте другую папку.
 
5. Обновите код в промежуточной ветви или папке и убедитесь, что эти изменения отражаются в промежуточном развертывании.

6. После проверки внесите изменения из промежуточной ветви в главную. Это позволит активировать развертывание в рабочем приложении-функции. Если источник развертывания не поддерживает ветвление, замените файлы в рабочей папке файлами из промежуточной папки.

###<a name="move-existing-functions-to-continuous-deployment"></a>Перемещение имеющихся функций в среду непрерывного развертывания

Если вы создали функции и разместили их на портале, прежде чем настроить непрерывное развертывание, как описано выше, необходимо скачать имеющиеся файлы кода функции с помощью FTP или локального репозитория Git. Это можно сделать в параметрах службы приложений для приложения-функции. Скачанные файлы можно отправить в выбранный источник непрерывного развертывания.

>[AZURE.NOTE]После настройки непрерывной интеграции исходные файлы больше нельзя изменять на портале функций.

####<a name="how-to:-configure-deployment-credentials"></a>Практическое руководство. Настройка учетных данных развертывания
Чтобы скачать файлы из приложения-функции, на портале необходимо настроить учетные данные для доступа к сайту. Учетные данные задаются на уровне приложения-функции.

1. В приложении-функции на [портале функций Azure](https://functions.azure.com/signin) щелкните **Параметры приложения-функции** > **Перейти к параметрам службы приложений** > **Учетные данные развертывания**.

    ![Настройка учетных данных локального развертывания](./media/functions-continuous-deployment/setup-deployment-credentials.png)

2. Введите имя пользователя и пароль, а затем щелкните **Сохранить**. Теперь эти учетные данные можно использовать для доступа к приложению-функции из FTP или встроенного репозитория Git.

####<a name="how-to:-download-files-using-ftp"></a>Практическое руководство. Скачивание файлов с помощью FTP

1. В приложении-функции на [портале функций Azure](https://functions.azure.com/signin) щелкните **Параметры приложения-функции** > **Перейти к параметрам службы приложений** > **Свойства** и скопируйте значения параметров **Пользователь FTP или развертывания**, **Имя узла FTP** и **Имя узла FTPS**.  
**Пользователь FTP или развертывания** должно быть введено так, как отображается на портале, включая имя приложения, чтобы обеспечить правильный контекст для FTP-сервера.

    ![Получение сведений о развертывании](./media/functions-continuous-deployment/get-deployment-credentials.png)
    
2. Подключитесь к приложению из клиента FTP, используя полученные сведения, и скачайте исходные файлы функций.

####<a name="how-to:-download-files-using-the-local-git-repository"></a>Практическое руководство. Скачивание файлов с помощью локального репозитория Git

1. В приложении-функции на [портале функций Azure](https://functions.azure.com/signin) щелкните **Параметры приложения-функции** > **Настройка непрерывной интеграции** > **Настройка**.

2. В колонке "Развертывания" щелкните **Выбор источника** > **Локальный репозиторий Git**, а затем нажмите кнопку **ОК**.
 
3. Щелкните **Перейти к параметрам службы приложений** > **Свойства** и запишите значение URL-адреса репозитория Git. 
    
    ![Настройка непрерывного развертывания](./media/functions-continuous-deployment/get-local-git-deployment-url.png)

4. Клонируйте репозиторий на локальном компьютере с помощью средства командной строки, поддерживающего Git, или одного из средств Git. Команда git clone выглядит следующим образом:

        git clone https://username@my-function-app.scm.azurewebsites.net:443/my-function-app.git

5. Получите удаленный доступ к файлам из приложения-функции в клонированном репозитории файлов на локальном компьютере, как показано в следующем примере.

        git pull origin master

    При запросе укажите имя пользователя и пароль для развертывания приложения-функции.  


[GitHub]: https://github.com/



<!--HONumber=Oct16_HO2-->


