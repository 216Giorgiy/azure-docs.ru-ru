---
title: Создание Устойчивых функций с помощью портала Azure
description: Сведения о том, как установить расширение Устойчивых функций для Функций Azure для разработки с помощью портала.
services: functions
author: ggailey777
manager: jeconnoc
keywords: ''
ms.service: azure-functions
ms.devlang: multiple
ms.topic: conceptual
ms.date: 10/23/2018
ms.author: azfuncdf, glenga
ms.openlocfilehash: acbba991e6dcce56fad7f27c45f85214cc8fc707
ms.sourcegitcommit: c8088371d1786d016f785c437a7b4f9c64e57af0
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/30/2018
ms.locfileid: "52637009"
---
# <a name="create-durable-functions-using-the-azure-portal"></a>Создание Устойчивых функций с помощью портала Azure

Расширение [устойчивых функций](durable-functions-overview.md) для Функций Azure предоставляется в пакете NuGet [Microsoft.Azure.WebJobs.Extensions.DurableTask](https://www.nuget.org/packages/Microsoft.Azure.WebJobs.Extensions.DurableTask). Это расширение необходимо установить в приложении-функции. В этой статье показано, как установить этот пакет, чтобы иметь возможность разрабатывать Устойчивые функции на портале Azure.

>[!NOTE]
>
>* Если вы разрабатываете Устойчивые функции на языке C#, вместо этого рассмотрите возможность [разработки с помощью Visual Studio 2017](durable-functions-create-first-csharp.md).
* Если вы разрабатываете Устойчивые функции на языке JavaScript, вместо этого рассмотрите возможность **разработки с помощью Visual Studio Code**.
>
>Создание Устойчивых функций с использованием JavaScript еще не поддерживается на портале. Вместо этого используйте Visual Studio Code.

## <a name="create-a-function-app"></a>Создание приложения-функции

Для выполнения любых функций вам понадобится приложение-функция, позволяющее группировать функции в логические единицы и упростить развертывание и совместное использование ресурсов, а также управление ими. Необходимо создать приложение-функцию C#, так как шаблоны JavaScript еще не поддерживаются для Устойчивых функций.  

[!INCLUDE [Create function app Azure portal](../../../includes/functions-create-function-app-portal.md)]

По умолчанию для приложения-функции используется версия 2.x среды выполнения Функций Azure. Расширение Устойчивых функций работает для обеих версий среды выполнения Функций Azure: 1.x и 2.x. Но шаблоны доступны, только если планируется использовать среду выполнения версии 2.x.

## <a name="create-an-orchestrator-function"></a>Создание функции оркестратора

1. Разверните приложение-функцию и нажмите кнопку **+** рядом с элементом **Функции**. Если это первая функция в приложении-функции, последовательно выберите **На портале** и **Продолжить**. Если нет, перейдите к шагу 3.

   ![Страница быстрого начала работы с функциями на портале Azure](./media/durable-functions-create-portal/function-app-quickstart-choose-portal.png)

1. Последовательно выберите **Дополнительные шаблоны** и **Finish and view templates** (Закончить и просмотреть шаблоны).

    ![Быстрый запуск функций: просмотр дополнительных шаблонов](./media/durable-functions-create-portal/add-first-function.png)

1. В поле поиска введите `durable` и выберите шаблон **Начальный объект HTTP устойчивых функций**.

1. Когда появится соответствующий запрос, щелкните **Установить**, чтобы установить в приложение-функцию расширение Azure DurableTask и другие необходимые зависимости. Установить расширение для приложения-функции необходимо всего один раз. По завершении установки щелкните **Продолжить**.

    ![Установка расширений привязки](./media/durable-functions-create-portal/install-durabletask-extension.png)

1. После завершения установки присвойте новой функции имя `HttpStart` и выберите **Создать**. Созданная функция используется для запуска оркестрации.

1. Создайте другую функцию в приложении-функции, но на этот раз используя шаблон **Оркестратор устойчивых функций**. Присвойте новой функции оркестрации имя `HelloSequence`.

1. Создайте третью функцию с именем `Hello`, используя шаблон **Действие устойчивых функций**.

## <a name="test-the-durable-function-orchestration"></a>Тестирование оркестрации устойчивых функций

1. Вернитесь к функции **HttpStart**, выберите **</> Получить URL-адрес функции** и щелкните **Копировать**, чтобы скопировать URL-адрес. С помощью этого URL-адреса можно запустить функцию **HelloSequence**.

1. Используя средство HTTP, например Postman или cURL, отправьте запрос POST к скопированному URL-адресу. В следующем примере представлена команда cURL, которая отправляет запрос POST к устойчивой функции:

    ```bash
    curl -X POST https://{your-function-app-name}.azurewebsites.net/api/orchestrators/HelloSequence
    ```

    В этом примере `{your-function-app-name}` — это домен, который является именем приложения-функции. Ответное сообщение содержит набор конечных точек URI, с помощью которых можно отслеживать и контролировать выполнение, которое выглядит следующим образом:

    ```json
    {  
       "id":"10585834a930427195479de25e0b952d",
       "statusQueryGetUri":"https://...",
       "sendEventPostUri":"https://...",
       "terminatePostUri":"https://...",
       "rewindPostUri":"https://..."
    }
    ```

1. Вызовите URI конечной точки `statusQueryGetUri`, и вы увидите текущее состояние устойчивой функции, которое может выглядеть следующим образом:

    ```json
        {
            "runtimeStatus": "Running",
            "input": null,
            "output": null,
            "createdTime": "2017-12-01T05:37:33Z",
            "lastUpdatedTime": "2017-12-01T05:37:36Z"
        }
    ```

1. Продолжайте вызывать конечную точку `statusQueryGetUri`, пока состояние не изменится на **Завершено**, и вы увидите ответ, подобный следующему: 

    ```json
    {
            "runtimeStatus": "Completed",
            "input": null,
            "output": [
                "Hello Tokyo!",
                "Hello Seattle!",
                "Hello London!"
            ],
            "createdTime": "2017-12-01T05:38:22Z",
            "lastUpdatedTime": "2017-12-01T05:38:28Z"
        }
    ```

Ваша первая устойчивая функция создана и успешно работает в Azure.

## <a name="next-steps"></a>Дополнительная информация

> [!div class="nextstepaction"]
> [Дополнительные сведения о распространенных шаблонах устойчивых функций](durable-functions-overview.md)