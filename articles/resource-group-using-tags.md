<properties 
	pageTitle="Использование тегов для организации ресурсов в Azure" 
	description="Здесь описано, как применить теги, чтобы организовать ресурсы для выставления счетов и управления." 
	services="azure-resource-manager" 
	documentationCenter="" 
	authors="tfitzmac"
	manager="wpickett" 
	editor=""/>

<tags 
	ms.service="azure-resource-manager" 
	ms.workload="multiple" 
	ms.tgt_pltfrm="AzurePortal" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="08/05/2015" 
	ms.author="tomfitz"/>


# Использование тегов для организации ресурсов в Azure

Диспетчер ресурсов помогает логически организовать ресурсы с помощью тегов. Теги состоят из пар ключ —значение, которые определяют ресурсы с помощью заданных вами свойств. Чтобы пометить ресурсы как относящиеся к одной категории, примените к ним одинаковый тег.

При просмотре ресурсов с определенным тегом отображаются ресурсы из всех групп. Вы не ограничены только ресурсами из одной группы. Это позволяет организовать их независимо от связей развертывания. Теги особенно помогут, когда требуется организовать ресурсы для выставления счетов или управления.

> [AZURE.NOTE]Теги можно применять только к ресурсам, которые поддерживают операции диспетчера ресурсов. Если вы создали виртуальную машину, виртуальную сеть или хранилище при помощи модели классического развертывания (например, через портал Azure или [API управления службами](https://msdn.microsoft.com/library/azure/dn948465.aspx)), к таким ресурсам нельзя применить теги. Для поддержки тегов эти ресурсы необходимо развернуть повторно с помощью диспетчера ресурсов. Все остальные ресурсы поддерживают теги.

## Теги на портале предварительной версии

Маркировка ресурсов и групп ресурсов в предварительной версии портала выполняется очень просто. Используйте узел "Обзор" для перехода к ресурсу или группе ресурсов, которые вы хотите отметить тегами, и щелкните "Теги" в разделе "Обзор" в верхней части модуля.

![м](./media/resource-group-using-tags/rgblade.png)

После этого откроется модуль со списком уже примененных тегов. Если это ваш первый тег, список будет пустым. Для добавления тега укажите имя и значение, а затем нажмите клавишу ВВОД. Добавив несколько тегов, вы заметите варианты автозаполнения на основании уже существующих имен и значений тегов, которые помогают обеспечить согласованность таксономии в ваших ресурсах и избежать распространенных ошибок, например опечаток.

![Маркировка ресурсов тегами с парами «имя — значение»](./media/resource-group-using-tags/tag-resources.png)

Здесь можно щелкнуть каждый отдельный тег для просмотра списка всех ресурсов с таким же тегом. Конечно, если это ваш первый тег, этот список будет не очень информативным. Теперь давайте перейдем к PowerShell, чтобы быстро разметить тегами все ресурсы.


## Маркировка с помощью PowerShell

Сначала необходимо скачать новейшую версию [модуля Azure PowerShell](./install-configure-powershell.md). Если вы впервые используете модуль Azure PowerShell, [ознакомьтесь с документацией](./install-configure-powershell.md) для быстрого начала работы. В данной статье будем считать, что вы уже добавили учетную запись и выбрали подписку и ресурсы, которые необходимо промаркировать.

Маркировка доступна только для ресурсов и групп ресурсов, доступных в [диспетчере ресурсов](http://msdn.microsoft.com/library/azure/dn790568.aspx), поэтому следующий необходимый шаг — переключиться на использование диспетчера ресурсов. Дополнительные сведения см. в статье [Использование Azure PowerShell с диспетчером ресурсов Azure](powershell-azure-resource-manager.md).

    Switch-AzureMode AzureResourceManager

Теги хранятся непосредственно в ресурсах и их группах, поэтому, чтобы просмотреть, какие теги уже применены, мы можем просто получить ресурс или группу ресурсов с помощью `Get-AzureResource` или `Get-AzureResourceGroup` соответственно. Давайте начнем с группы ресурсов.

![Получение тегов с помощью Get-AzureResourceGroup в PowerShell](./media/resource-group-using-tags/Get-AzureResourceGroup-in-PowerShell.png)

Этот командлет возвращает небольшой объем метаданных о группе ресурсов, включая информацию о примененных тегах, если они есть. Для маркировки группы ресурсов мы просто воспользуемся `Set-AzureResourceGroup` и укажем имя и значение тега.

![Установка тегов с помощью Set-AzureResourceGroup в PowerShell](./media/resource-group-using-tags/Set-AzureResourceGroup-in-PowerShell.png)

Помните, что теги обновляются полностью, так что при добавлении одного тега к ресурсу, который уже содержит теги, вам потребуется использовать массив для сохранения всех необходимых тегов. Для удаления какого-либо тега достаточно сохранить массив без него.

Для ресурсов процесс аналогичен, за исключением того, что будут использоваться командлеты `Get-AzureResource` и `Set-AzureResource`. Чтобы получить ресурсы или группы ресурсов с определенным тегом, используйте командлет `Get-AzureResource` или `Get-AzureResourceGroup` с параметром `-Tag`.

![Получение маркированных тегами ресурсов и групп ресурсов с помощью Get-AzureResource и Get-AzureResourceGroup в PowerShell](./media/resource-group-using-tags/Get-AzureResourceGroup-with-tags-in-PowerShell.png)


## Добавление тегов с помощью REST API

Как на портале, так и в PowerShell «за кулисами» используется [интерфейс REST API диспетчера ресурсов](http://msdn.microsoft.com/library/azure/dn790568.aspx). Если требуется интегрировать теги в другую среду, их можно получить с помощью метода GET по идентификатору ресурса и обновить набор тегов с помощью вызова метода PATCH.


## Управление таксономией

Ранее мы обсудили, как автозаполнение помогает обеспечить согласованность и избежать ошибок. Автозаполнение осуществляется на основе таксономии тегов, доступных в пределах подписки. Каждый тег, присваиваемый ресурсу или группе ресурсов, автоматически добавляется к общей таксономии в пределах подписки. Вы также можете предварительно заполнить эту таксономию именами тегов, которые будут использоваться в дальнейшем для маркировки ресурсов.

Чтобы получить список всех тегов в подписке с помощью PowerShell, используйте командлет `Get-AzureTag`.

![Get-AzureTag в PowerShell](./media/resource-group-using-tags/Get-AzureTag-in-PowerShell.png)


Вы можете увидеть теги, начинающиеся с hidden- и link:. Это внутренние теги, которые вы должны игнорировать. Изменять их не следует.

С помощью командлета `New-AzureTag` в таксономию можно добавлять новые теги. Эти теги будут включены в автозаполнение, даже если они еще не были применены для ресурсов или групп ресурсов. Чтобы удалить имя или значение тега, сначала необходимо удалить тег из всех ресурсов, в которых он может применяться, а затем воспользоваться командлетом `Remove-AzureTag` для удаления тега из таксономии.

Для просмотра таксономии тегов на портале используйте узел "Обзор" для просмотра всех элементов, а затем выберите "Теги".

![Поиск тегов с помощью узла «Обзор»](./media/resource-group-using-tags/browse-tags.png)

Закрепите наиболее важные теги на начальной панели для быстрого доступа к ним. Теперь вы готовы к работе. Желаем успехов!

![Закрепление тегов на начальной панели](./media/resource-group-using-tags/pin-tags.png)

## Добавление тегов и выставление счетов

Для поддерживаемых служб можно использовать теги, чтобы сгруппировать данные выставления счетов. Например, [виртуальные машины, интегрированные с диспетчером ресурсов Azure](/virtual-machines/virtual-machines-azurerm-versus-azuresm.md), позволяют определить и применить теги, чтобы упорядочить сведения об использовании выставления счетов для виртуальных машин. Если вы используете несколько виртуальных машин для различных организаций, можно использовать теги для группирования сведений об использовании по месту возникновения затрат. Теги также можно использовать для упорядочивания затрат по среде выполнения, например сведения об использовании выставления счетов для виртуальных машин, запущенных в рабочей среде.

Сведения о тегах можно получить с помощью [API использования ресурсов](billing-usage-rate-card-overview.md) или файла сведений об использовании с разделителями запятыми, который можно скачать с [портала учетных записей Azure](https://account.windowsazure.com/) или [портала EA](https://ea.azure.com).

При скачивании файла сведений об использовании с разделителями запятыми для служб, поддерживающих теги выставления счетов, эти теги будут отображаться в столбце **Теги**. Дополнительные сведения см. в разделе [Расшифровка счета за использование Microsoft Azure](billing-understand-your-bill.md).

![См. сведения об использовании тегов при выставлении счетов.](./media/resource-group-using-tags/billing_csv.png)

## Дальнейшие действия

- Общие сведения об использовании Azure PowerShell для развертывания ресурсов см. в статье [Использование Azure PowerShell с диспетчером ресурсов Azure](./powershell-azure-resource-manager.md).
- Основные сведения об использовании интерфейса командной строки Azure для развертывания ресурсов см. в статье [Использование интерфейса командной строки Azure для Mac, Linux и Windows со средствами управления ресурсами Azure](./xplat-cli-azure-resource-manager.md)￼.
- Общие сведения об использовании портала предварительной версии см. в статье [Управление ресурсами Azure с помощью портала предварительной версии Azure](./resource-group-portal.md).  
  

  

<!---HONumber=August15_HO6-->