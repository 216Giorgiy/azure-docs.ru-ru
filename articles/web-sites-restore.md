<properties linkid="web-sites-restore" urlDisplayName="Восстановление веб-сайта Microsoft Azure" pageTitle="Восстановление веб-сайта Microsoft Azure" metaKeywords="Веб-сайты Azure, восстановить, восстановление" description="Узнайте, как восстанавливать веб-сайты Azure из резервной копии." metaCanonical="" services="web-sites" documentationCenter="" title="Восстановление веб-сайта Microsoft Azure" authors="timamm"  solutions="" writer="timamm" manager="paulettm" editor="mollybos"  />

#Восстановление веб-сайта Microsoft Azure

В этой статье показано, как восстановить веб-сайт, для которого ранее была создана резервная копия, с помощью компонента резервного копирования веб-сайтов Azure. Дополнительные сведения см. в разделе [Резервные копии веб-сайтов Microsoft Azure](http://www.windowsazure.com/ru-ru/documentation/articles/web-sites-backup/). 

Компонент восстановления веб-сайтов Azure позволяет по требованию восстановить предыдущее состояние веб-сайта или создать новый веб-сайт на основе одной из резервных копий исходного сайта. Создание нового веб-сайта, работающего параллельно с предыдущей версией, может оказаться полезным для A/B тестирования.

Компонент восстановления, доступный на вкладке "Резервные копии" портала веб-сайтов Azure, предоставляется только на уровне Standard.

##Содержание
- [Восстановление веб-сайта Azure из ранее созданной резервной копии](#PreviousBackup)
- [Восстановление веб-сайта Azure прямо из учетной записи хранения](#StorageAccount)
- [Выбор параметров восстановления веб-сайта и запуск процесса восстановления](#RestoreSettings)
- [Просмотр журналов операций](#OperationLogs)


<a name="PreviousBackup"></a>
##Восстановление веб-сайта Azure из ранее созданной резервной копии

1. На вкладке **Резервные копии** щелкните элемент **Восстановить сейчас** в панели команд в нижней части страницы портала. Открывается диалоговое окно **Восстановить сейчас**.
	
	![Выберите источник резервного копирования][ChooseBackupSource]
	
2. В разделе **Выберите источник резервного копирования** выберите **Предыдущая резервная копия для этого веб-сайта**.
3. Выберите дату восстанавливаемой резервной копии и щелкните стрелку вправо, чтобы продолжить.
4. Выполните действия, описанные в разделе [Выбор параметров восстановления веб-сайта](#RestoreSettings) ниже в этой статье.

<a name="StorageAccount"></a>
##Восстановление веб-сайта Azure прямо из учетной записи хранения

1. На вкладке **Резервные копии** щелкните элемент **Восстановить сейчас** в панели команд в нижней части страницы портала. Открывается диалоговое окно **Восстановить сейчас**.
	
	![Выберите источник резервного копирования][ChooseBackupSource]
	
2. В разделе **Выберите источник резервного копирования** выберите **Файл учетной записи хранения**. Здесь можно непосредственно указать URL-адрес для файла учетной записи хранения или щелкнуть значок папки, чтобы перейти к хранилищу BLOB-объектов и указать файл резервной копии. В этом примере осуществляется выбор значка папки.
	
	![Файл учетной записи хранения][StorageAccountFile]
	
3. Щелкните значок папки, чтобы открыть диалоговое окно **Обзор облачного хранилища**.
	
	![Обзор облачного хранилища][BrowseCloudStorage]
	

4. Разверните узел с именем учетной записи хранения, которую хотите использовать, а затем выберите **websitebackups**, содержащий резервные копии.
5. Выберите ZIP-файл, содержащий восстанавливаемую резервную копию, и нажмите кнопку **Открыть**.
6. Файл учетной записи хранения выбран и отображается в поле учетной записи хранения. Для продолжения щелкните стрелку вправо.
	
	![Выбранный файл учетной записи хранения][StorageAccountFileSelected]
	
7. Продолжите работу со следующим разделом [Выбор параметров восстановления веб-сайта и запуск процесса восстановления](#RestoreSettings).

<a name="RestoreSettings"></a>
##Выбор параметров восстановления веб-сайта и запуск процесса восстановления
1. В области **Выберите параметры восстановления веб-сайта**, **Восстановить в** выберите значение **Текущий веб-сайт** или **Новый экземпляр веб-сайта**.
	
	![Выберите параметры восстановления веб-сайта][ChooseRestoreSettings]
	
	При выборе значения **Текущий веб-сайт** существующий веб-сайт будет заменен выбранной резервной копией (восстановление с разрушением). Все изменения, внесенные для веб-сайта с момента создания выбранной резервной копии, будут окончательно удалены, а отменить операцию восстановления будет невозможно. Во время выполнения операции восстановления текущий веб-сайт будет временно недоступен, и об этом будет отображено соответствующее предупреждение.
	
	При выборе значения **Новый экземпляр веб-сайта** создается новый веб-сайт в той же самой области и с указанным именем. (По умолчанию новое имя имеет вид **restored-***старое_имя_сайта*.) 
	
	Восстанавливаемый сайт будет содержать то же содержимое и конфигурацию, которые были созданы в портале для исходного веб-сайта. Он также будет включать в себя все базы данных, выбранные вами в следующем шаге.
2. Если вы хотите восстановить базу данных вместе с веб-сайтом, в разделе **Включенные базы данных** выберите имя сервера базы данных, на который требуется восстановить базу данных, в раскрывающемся списке раздела **Восстановить в**. Можно также создать новый сервер базы данных для восстановления или выбрать **Не восстанавливать**, чтобы не восстанавливать базу данных (это значение используется по умолчанию). 
	
	После выбора имени сервера укажите имя конечной базы данных для восстановления в поле **Имя базы данных**.
	
	Если процесс восстановление включает в себя одну или несколько баз данных, можно выбрать **Автоматическая настройка строк подключения** для обновления строк подключения из резервной копии таким образом, чтобы они указывали на новую базу данных или сервер базы данных. Следует убедиться, что все функциональные возможности, связанные с базами данных, работают должным образом после завершения восстановления.
	
	![Выбор узла сервера базы данных][ChooseDBServer]
	
	> [WACOM.NOTE] Нельзя восстанавливать базу данных SQL с таким же именем на том же сервере SQL Server. Для восстановления базы данных необходимо выбрать либо другое имя базы данных, либо другой узел SQL Server. 
	
	> [WACOM.NOTE] Можно восстановить базу данных MySQL на тот же сервер и с тем же именем, но помните, что это приведет к очистке существующего содержимого, хранящегося в этой базе данных MySQL.	
	
3. Если вы решили восстановить существующую базу данных, потребуется указать имя пользователя и пароль. Если вы решили выполнить восстановление в новую базу данных, потребуется указать ее имя:
	
	![Восстановление в новую базу данных SQL][RestoreToNewSQLDB]
	
	Для продолжения щелкните стрелку вправо.	
4. Если вы решили создать новую базу данных, в следующем диалоговом окне необходимо предоставить учетные данные и другие сведения о начальной конфигурации этой базы данных. В данном примере показана новая база данных SQL. (Параметры для новой базы данных MySQL немного отличаются.)
	
	![Параметры новой базы данных SQL][NewSQLDBConfig]
	
5. Щелкните галочку, чтобы начать операцию восстановления. После завершения в списке веб-сайтов на портале отображается новый экземпляр веб-сайта (если вы выбрали такой вариант восстановления).
	
	![Восстановленный веб-сайт Contoso][RestoredContosoWebSite]

<a name="OperationLogs"></a>
##Просмотр журналов операций
	
1. Для получения сведений о выполнении или сбое операции восстановления веб-сайта перейдите на вкладку "Панель мониторинга" этого веб-сайта. В области **Службы управления** раздела **Сводка** щелкните элемент **Журналы операций**.
	
	![Панель мониторинга — ссылка на журналы операций][DashboardOperationLogsLink]
	
2. Выполняется переход на страницу **Журналы операций** портала управления, где можно просмотреть журнал операции восстановления в списке журналов операций:
	
	![Страница журналов операций служб управления][ManagementServicesOperationLogsList]
	
3. Чтобы просмотреть сведения об операции, выберите ее в списке и нажмите кнопку **Сведения** в панели команд.
	
	![Кнопка сведений][DetailsButton]
	
	После этого открывается окно **Сведения об операции** и отображается содержимое файла журнала, которое можно скопировать:
	
	![Сведения об операции][OperationDetails]
	

<!-- IMAGES -->
[ChooseBackupSource]: ./media/web-sites-restore/01ChooseBackupSource.png
[StorageAccountFile]: ./media/web-sites-restore/02StorageAccountFile.png
[BrowseCloudStorage]: ./media/web-sites-restore/03BrowseCloudStorage.png
[StorageAccountFileSelected]: ./media/web-sites-restore/04StorageAccountFileSelected.png
[ChooseRestoreSettings]: ./media/web-sites-restore/05ChooseRestoreSettings.png
[ChooseDBServer]: ./media/web-sites-restore/06ChooseDBServer.png
[RestoreToNewSQLDB]: ./media/web-sites-restore/07RestoreToNewSQLDB.png
[NewSQLDBConfig]: ./media/web-sites-restore/08NewSQLDBConfig.png
[RestoredContosoWebSite]: ./media/web-sites-restore/09RestoredContosoWebSite.png
[DashboardOperationLogsLink]: ./media/web-sites-restore/10DashboardOperationLogsLink.png
[ManagementServicesOperationLogsList]: ./media/web-sites-restore/11ManagementServicesOperationLogsList.png
[DetailsButton]: ./media/web-sites-restore/12DetailsButton.png
[OperationDetails]: ./media/web-sites-restore/13OperationDetails.png

