<properties pageTitle="Приступая к работе с веб-сайтами Azure для ASP.NET" metaKeywords="" description="В данном учебнике демонстрируется, как создать веб-проект ASP.NET в Visual Studio 2013 и развернуть его на веб-сайте Azure. Менее чем за 15 минут вы получите приложение, которое работает в облаке." metaCanonical="" services="web-sites" documentationCenter=".NET" title="Get started with Azure Websites and ASP.NET" authors="tdykstra"  solutions="" manager="wpickett" editor="mollybos"  />

<tags ms.service="web-sites" ms.workload="web" ms.tgt_pltfrm="na" ms.devlang="dotnet" ms.topic="hero-article" ms.date="11/12/2014" ms.author="tdykstra" />

# Начало работы с веб-сайтами Azure и ASP.NET

В этом учебнике показано, как создать веб-приложение ASP.NET и развернуть его на веб-сайте Azure с помощью Visual Studio 2013 или Visual Studio 2013 для Web Express. Этот учебник разработан для читателей, не имеющих опыта использования Azure или ASP.NET. По завершении изучения этого учебника вы получите простое веб-приложение, работающее в облаке.

Вы узнаете:

* Как подготовить компьютер к разработке для Azure путем установки пакета Azure SDK.
* Как создать веб-проект ASP.NET в Visual Studio и развернуть его на веб-сайте Azure.
* Как внести изменения в веб-проект и повторно развернуть приложение.
* Как использовать портал управления Azure для мониторинга веб-сайта и управления им.

Для работы с этим учебником требуется учетная запись Azure.

* Вы можете [открыть учетную запись Azure бесплатно](/ru-ru/pricing/free-trial/?WT.mc_id=A261C142F) - вы получаете кредиты, которые можно использовать, чтобы опробовать платные службы Azure, и даже после израсходования кредитов вы сохраняете учетную запись и возможность использовать бесплатные службы Azure, такие как веб-сайты.
* Вы имеете возможность [активировать преимущества подписчика MSDN](/ru-ru/pricing/member-offers/msdn-benefits-details/?WT.mc_id=A261C142F) - ваша подписка MSDN каждый месяц приносит вам кредиты, которые можно использовать для оплаты за службы Azure.</li>

> [WACOM.NOTE]
> Если вы хотите начать работу с веб-сайтами Azure до регистрации учетной записи, перейдите по ссылке <a href="https://trywebsites.azurewebsites.net">https://trywebsites.azurewebsites.net</a>, где вы сможете быстро создать кратковременный начальный сайт ASP.NET на веб-сайтах Azure.

На следующем рисунке показано завершенное приложение:

![Web site home page](./media/web-sites-dotnet-get-started-vs2013/deployedandazure.png)

### Сегменты учебника

* [Подписка на Microsoft Azure (видео)](#video)
* [Настройка среды разработки](#set-up-the-development-environment)
* [Создание веб-приложения ASP.NET в Visual Studio](#create-an-aspnet-web-application)
* [Развертывание приложения в Azure](#deploy-the-application-to-azure)
* [Внесение изменений и повторное развертывание](#make-a-change-and-redeploy)
* [Мониторинг веб-сайта и управление им с помощью портала управления](#monitor-and-manage-the-site-in-the-management-portal)
* [Дальнейшие действия](#next-steps)

##<a name="video"></a>Подписка на Microsoft Azure (видео)

В этом видео Скотт Хансельман (Scott Hanselman) демонстрирует. как легко можно подписаться на бесплатную пробную версию Microsoft Azure. (Длительность: 1:58)

> [AZURE.VIDEO sign-up-for-microsoft-azure]

[WACOM.INCLUDE [install-sdk-2013-only](../includes/install-sdk-2013-only.md)]

## Создание веб-приложения ASP.NET

Первым шагом является создание проекта веб-приложения. Visual Studio автоматически создает веб-сайт Azure, на котором ваш проект будет развернут в дальнейшем. На следующей схеме показано, что происходит на этих двух шагах.

![Diagram showing project creation and deployment steps](./media/web-sites-dotnet-get-started-vs2013/createdeploydiagram.png)

1. Откройте Visual Studio 2013 или Visual Studio 2013 Express for Web.

2. В меню **Файл** выберите **Новый проект**.

3. В диалоговом окне **Новый проект** щелкните **C#** > **Интернет** > **Веб-приложение ASP.NET**. При желании вы можете выбрать **Visual Basic**.

3. Убедитесь, что в качестве целевой платформы выбрана **.NET Framework 4.5**.

4. Присвойте приложению имя **MyExample** и нажмите кнопку **ОК**.

	![New Project dialog box](./media/web-sites-dotnet-get-started-vs2013/GS13newprojdb.png)

5. В диалоговом окне **Новый проект ASP.NET** выберите шаблон **MVC**. Если вы предпочитаете работать с веб-формами ASP.NET, можно выбрать шаблон **Веб-формы**. 

	[MVC и веб-формы](http://www.asp.net/get-started/websites) - это платформы ASP.NET для разработки веб-сайтов. В этом учебнике вы можете выбрать любую из них. Однако при выборе веб-форм далее придется изменить Default.aspx, когда в учебнике даются указания на изменение Index.cshtml.

7. Щелкните **Изменить аутентификацию**. 

	![New ASP.NET Project dialog box](./media/web-sites-dotnet-get-started-vs2013/GS13changeauth.png)

6. В диалоговом окне **Изменить аутентификацию** щелкните **Без аутентификации** и нажмите кнопку **ОК**.

	![No Authentication](./media/web-sites-dotnet-get-started-vs2013/GS13noauth.png)

	В создаваемом образце приложения не будет функции входа пользователей в систему. В разделе [Дальнейшие действия](#next-steps) приводятся ссылки на учебник, в котором описывается реализация функций аутентификации и авторизации.

5. В диалоговом окне **Новый проект ASP.NET** оставьте параметры в разделе **Azure** без изменения и нажмите **ОК**. 

	![New ASP.NET Project dialog box](./media/web-sites-dotnet-get-started-vs2013/GS13newaspnetprojdb.png)

	Эти параметры по умолчанию указывают, что Visual Studio создаст веб-сайт Azure для вашего веб-проекта. В следующем разделе учебника вы займетесь разворачиванием веб-проекта на только что созданном веб-сайте.

	(Флажок может называться **Размещать в облаке** или **Создать удаленные ресурсы**. Результат их действия одинаков.)
	
5. Если вы еще не вошли в Azure, Visual Studio покажет запрос для того, чтобы это сделать. Щелкните **Войти**.

	![Sign in to Azure](./media/web-sites-dotnet-get-started-vs2013/signin.png)

6. В диалоговом окне **Вход в Azure** введите идентификатор и пароль, которые вы используете для управления подпиской Azure.
	
	После выполнения входа появится диалоговое окно **Настройка параметров сайта Azure**, где вам будет предложено выбрать ресурсы, которые требуется создать.

	![Signed in to Azure](./media/web-sites-dotnet-get-started-vs2013/configuresitesettings.png)

3. Visual Studio предоставляет **имя сайта** по умолчанию, который Azure будет использовать в качестве префикса URL-адреса приложения. При необходимости введите другое имя сайта.

	Полный URL-адрес будет состоять из того, что вы ввели, плюс .azurewebsites.net (как указано рядом с текстовым полем **Имя сайта**). Например, если имя сайта - MyExample6442, URL-адресом будет MyExample6442.azurewebsites.net. URL-адрес должен быть уникальным. Если кто-то уже использует введенный вами URL-адрес, справа появится красный восклицательный знак вместо зеленой галочки и потребуется ввести другое имя сайта.

4. В раскрывающемся списке **Регион** выберите ближайшее к вам расположение.

	Этот параметр определяет, в каком центре обработки данных Azure будет работать ваш веб-сайт. При работе с учебником вы можете выбрать любой регион, и это не будет оказывать существенного влияния. Однако для производственного сайта необходимо, чтобы веб-сервер располагался максимально близко к браузерам, которые выполняют доступ к вашему сайту, чтобы минимизировать [задержку](http://www.bing.com/search?q=web%20latency%20introduction&qs=n&form=QBRE&pq=web%20latency%20introduction&sc=1-24&sp=-1&sk=&cvid=eefff99dfc864d25a75a83740f1e0090).

5. Оставьте поле базы данных без изменений.

	В этом учебнике база данных не используется. В разделе [Дальнейшие действия](#next-steps) в конце данного учебника приводится ссылка на учебник, в котором показано, как использовать базу данных.

6. Нажмите кнопку **ОК**.

	Через несколько секунд Visual Studio создаст веб-проект в указанной папке и создаст веб-сайт в выбранном регионе Azure.  

	В окне **обозревателя решений** отображаются файлы и папки нового проекта.

	![Solution Explorer](./media/web-sites-dotnet-get-started-vs2013/solutionexplorer.png)

	В окне **Действие веб-публикации** показывается, что сайт был создан.

	![Web site created](./media/web-sites-dotnet-get-started-vs2013/GS13sitecreated1.png)

	А вы сможете увидеть сайт в Обозревателе сервера.

	![Web site created](./media/web-sites-dotnet-get-started-vs2013/siteinse.png)



## Развертывание приложения в Azure

7. В окне **Действие веб-публикации** щелкните **Опубликовать MyExample на этом сайте**.

	![Web site created](./media/web-sites-dotnet-get-started-vs2013/GS13sitecreated.png)

	Через несколько секунд появится мастер **публикации веб-сайта**. 

	Параметры, необходимые Visual Studio для развертывания проекта в Azure, были сохранены в профиле публикации. Мастер дает возможность просмотреть и изменить эти параметры.

8. На вкладке **Подключение** мастера **публикации веб-сайта** нажмите кнопку **Проверить подключение**, чтобы убедиться, что Visual Studio может подключиться к Azure для развертывания веб-проекта.

	![Validate connection](./media/web-sites-dotnet-get-started-vs2013/GS13ValidateConnection.png)

	После проверки подключения рядом с кнопкой **Проверить подключение** отображается зеленая галочка. 

9. Нажмите кнопку **Далее**.

	![Successfully validated connection](./media/web-sites-dotnet-get-started-vs2013/GS13ValidateConnectionSuccess.png)

10. На вкладке **Параметры** нажмите кнопку **Далее**.

	![Settings tab](./media/web-sites-dotnet-get-started-vs2013/GS13SettingsTab.png)

	Можно принять значения по умолчанию для **Конфигурации** и **Параметров публикации файла**.

	Раскрывающийся список **Конфигурация** позволяет развертывать отладочное построение для удаленной отладки. В разделе [Дальнейшие действия](#next-steps) приводятся ссылки на учебник, в котором описывается удаленный запуск Visual Studio в режиме отладки.

	Если развернуть **Параметры публикации файла**, вы увидите несколько параметров, позволяющих выполнять сценарии, которые не рассматриваются в данном учебнике:
 
	* удаление дополнительных файлов в месте назначения.
	  
		Удаляет любые файлы на сервере, которые не входят в ваш проект. Эта функция может понадобиться при развертывании проекта на сайте, на котором раньше уже был развернут другой проект.

	* Предварительная компиляция во время публикации 
	 
		Может уменьшить время подготовки первого запроса для больших сайтов.

	* Удаление файлов из папки App_Data 
	 
		При тестировании в папке App_Data иногда находится файл базы данных SQL Server, который вы не хотите развертывать в производство.
	
11. На вкладке **Предварительный просмотр** нажмите кнопку **Начало предварительного просмотра**.

	![StartPreview button in the Preview tab](./media/web-sites-dotnet-get-started-vs2013/GS13Preview.png)

	На вкладке отображается список файлов, которые будут копироваться на сервер. Предварительный просмотр не является обязательным для публикации приложения, но это полезная функция, о которой нужно знать.

12. Щелкните **Опубликовать**.

	![StartPreview file output](./media/web-sites-dotnet-get-started-vs2013/GS13previewoutput.png)

	Visual Studio начинает процесс копирования файлов на сервер Azure.

	В окнах **Вывод** и **Действие веб-публикации** указывается, какие действия по развертыванию были выполнены, а также сообщается об успешном завершении развертывания.

	![Output window reporting successful deployment](./media/web-sites-dotnet-get-started-vs2013/PublishOutput.png)

	После успешного развертывания URL-адрес развернутого веб-сайта автоматически открывается в используемом по умолчанию браузере, а созданное приложение теперь выполняется в облаке. URL-адрес в адресной строке браузера указывает на то, что сайт загружается из Интернета.

	![Web site running in Azure](./media/web-sites-dotnet-get-started-vs2013/GS13deployedsite.png)

13. Закройте браузер.

## Внесение изменений и повторное развертывание

В этом разделе учебника вы измените заголовок **h1** главной страницы, запустите проект локально на компьютере разработчика, чтобы проверить изменения, а затем развернете изменение в Azure.

2. Откройте файл Views/Home/Index.cshtml или .vbhtml в **обозревателе решений** измените заголовок **h1** с "ASP.NET" на "ASP.NET and Azure" и сохраните файл. 

	![MVC index.cshtml](./media/web-sites-dotnet-get-started-vs2013/index.png)

	![MVC h1 change](./media/web-sites-dotnet-get-started-vs2013/mvcandazure.png)

1. Нажмите CTRL+F5, чтобы увидеть обновленный заголовок, запустив сайт на локальном компьютере.

	![Web site running locally](./media/web-sites-dotnet-get-started-vs2013/localandazure.png)

	URL-адрес http://localhost указывает, что веб-сайт работает на локальном компьютере. По умолчанию он работает в IIS Express - упрощенной версии IIS, используемой на этапе разработки веб-приложений.


1. Закройте браузер.

1. В **обозревателе решений** щелкните правой кнопкой проект и выберите пункт **Опубликовать**.

	![Chooose Publish](./media/web-sites-dotnet-get-started-vs2013/choosepublish.png)

	Появится вкладка "Предварительный просмотр" мастера **публикации веб-сайта**. Если бы вам требовалось изменить какие-либо параметры публикации, вы бы выбрали другую вкладку, но нам нужно просто выполнить повторное развертывание с теми же параметрами.

2. В мастере **публикации веб-сайта** нажмите кнопку **Опубликовать**.

	![Click Publish](./media/web-sites-dotnet-get-started-vs2013/clickpublish.png)

	Visual Studio развертывает проект в Azure и открывает сайт в браузере по умолчанию.

	![Changed site deployed](./media/web-sites-dotnet-get-started-vs2013/deployedandazure.png)

**Подсказка.** Вы можете включить панель инструментов **Веб-публикация одним щелчком** для еще более быстрого развертывания. Щелкните **Просмотр** > **Панели инструментов**, а затем выберите **Веб-публикация одним щелчком**. Панель инструментов позволяет выбрать профиль, нажать кнопку для публикации или кнопку, чтобы открыть мастер **публикации веб-сайта**. 

![Web One Click Publish Toolbar](./media/web-sites-dotnet-get-started-vs2013/weboneclickpublish.png)

## Мониторинг веб-сайта и его управление с помощью портала управления

[Портал управления Azure](/ru-ru/services/management-portal/) - это веб-интерфейс, который позволяет отслеживать службы Azure, например только что созданный вами веб-сайт, и управлять ими. В этом разделе мы познакомимся с тем, что можно сделать в портале.

1. В браузере перейдите по адресу [http://manage.windowsazure.com]() и выполните вход с вашими учетными данными Azure.

	Портал отображает список ваших служб Azure.

2. Щелкните имя веб-сайта.

	![Portal home page with new web site called out](./media/web-sites-dotnet-get-started-vs2013/portalhome.png)
  
3. Выберите вкладку **Панель мониторинга**.

	Вкладка **Панель мониторинга** отображает обзор статистики использования и ссылки на ряд часто применяемых функций управления сайтом. В разделе **Быстрый просмотр** также находится ссылка на главную страницу вашего приложения.

	![Portal web site dashboard tab](./media/web-sites-dotnet-get-started-vs2013/portaldashboard.png)
  
	К этому моменту трафик на сайте был незначительным, и на графике может ничего не показываться. Если вы перейдете к своему приложению, обновите страницу несколько раз, а затем обновите страницу портала **Панель мониторинга**, и вы увидите, как будет отображаться некоторая статистика. Для получения более подробной информации можно щелкнуть вкладку **Монитор**.

4. Выберите вкладку **Настройка**.

	Вкладка [Настройка](/ru-ru/documentation/articles/web-sites-configure//)  позволяет управлять версией .NET, используемой для сайта, включать функции, такие как [WebSockets](/blog/2013/11/14/introduction-to-websockets-on-windows-azure-web-sites/) и [ведение журналов диагностики](/ru-ru/documentation/articles/web-sites-enable-diagnostic-log/), задавать [значения строк подключения](/blog/2013/07/17/windows-azure-web-sites-how-application-strings-and-connection-strings-work/) и многое другое. 

	![Portal web site configure tab](./media/web-sites-dotnet-get-started-vs2013/portalconfigure.png)
  
5. Выберите вкладку **Масштаб**.

	На оплачиваемых уровнях службы веб-сайта вкладка [Масштаб](/ru-ru/documentation/articles/web-sites-scale/) позволяет управлять размером и количеством компьютеров, которые обслуживают ваше веб-приложение для того, чтобы обрабатывать изменения в трафике.

	Масштабировать можно вручную, а также настраивать критерии или расписания для автоматического масштабирования.

	![Portal website scale tab](./media/web-sites-dotnet-get-started-vs2013/portalscale.png)

Это всего лишь несколько функций управления порталом. Кроме этого, можно создавать новые веб-сайты, удалять существующие сайты, останавливать и повторно запускать сайты, а также управлять различными службами Azure, такими как базы данных и виртуальные машины.  

**Подсказка.** В настоящее время существует предварительная версия портала управления, которая заменит используемую вами сейчас версию. Для получения дополнительной информации см. [Предварительную версию портала Azure](/ru-ru/overview/preview-portal/).

## Дальнейшие действия

Из этого учебника вы узнали, как создать простое веб-приложение и развернуть его на веб-сайте Azure. Ниже приведены некоторые связанные разделы и ресурсы для изучения более подробных сведений:

* Другие способы развертывания веб-проекта

	В этом учебнике был показан самый быстрый способ создания сайта и его развертывания в одной операции. Обзор других способов развертывания с помощью Visual Studio или [автоматизации развертывания](http://www.asp.net/aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/continuous-integration-and-continuous-delivery) из [системы управления версиями](http://www.asp.net/aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/source-control) см. в разделе [Как развернуть веб-сайт Azure](/ru-ru/documentation/articles/web-sites-deploy/"). 

	Visual Studio can also generate Windows PowerShell scripts that enable you to automate deployment. For more information, see [Automate Everything (Building Real-World Cloud Apps with Azure)](http://www.asp.net/aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/automate-everything).

* Управление веб-сайтом в Visual Studio

	Дополнительные сведения о функциях управления сайтом, которые можно использовать в  **Обозревателе сервера**, см. в разделе [Troubleshooting Azure Websites in Visual Studio](/ru-ru/develop/net/tutorials/troubleshoot-web-sites-in-visual-studio/).

* Как устранить неполадки веб-сайта

	Visual Studio предоставляет функции, упрощающие просмотр журналов Azure по мере их создания в режиме реального времени. Можно также работать в Azure удаленно в режиме отладки. Дополнительную информацию см. в разделе [Устранение неполадок, связанных с веб-сайтами Azure, в Visual Studio](/ru-ru/develop/net/tutorials/troubleshoot-web-sites-in-visual-studio/).

* Как добавить функции доступа к базе данных и авторизации

	Учебник по доступу к базе данных и ограничению некоторых функций сайта для использования авторизованными пользователями см. в статье [Развертывание безопасного приложения ASP.NET MVC с членством, OAuth и базой данных SQL на веб-сайте Azure](/ru-ru/develop/net/tutorials/web-site-with-sql-database/).

* Добавление настраиваемого доменного имени и SSL

	Информацию об использовании SSL и собственного домена (например, www.contoso.com вместо contoso.azurewebsites.net) см. в следующих ресурсах:

	* [Настройка пользовательского имени домена для веб-сайта Azure](/ru-ru/documentation/articles/web-sites-custom-domain-name/). 
	* [Включение HTTPS для веб-сайта Azure](http://azure.microsoft.com/ru-ru/documentation/articles/web-sites-configure-ssl-certificate/)

* Как избежать затрат времени на ожидание пробуждения после времени простоя 

	По умолчанию в случае простоя в течение определенного периода времени веб-сайты будут выгружены. Первый запрос после этого вынужден ожидать повторной загрузки сайта. Чтобы избежать времени ожидания, можно включить функцию AlwaysOn. Дополнительную информацию о параметрах конфигурации см. в статье [Настройка веб-сайтов](http://azure.microsoft.com/ru-ru/documentation/articles/web-sites-configure/).

* Как добавить работающие в режиме реального времени функции, например, чат

	Если ваш веб-сайт будет содержать функции, работающие в режиме реального времени (например, служба чата, игра, тикер акций и т. д.), наилучшей производительности можно добиться при использовании [ASP.NET SignalR](http://www.asp.net/signalr) с методом транспортировки [WebSockets](/blog/2013/11/14/introduction-to-websockets-on-windows-azure-web-sites/) . Дополнительную информацию см. в разделе [Using SignalR with Windows Azure Websites] (Использование SignalR с веб-сайтами Azure)(http://www.asp.net/signalr/overview/signalr-20/getting-started-with-signalr-20/using-signalr-with-windows-azure-web-sites). 

* Как выбрать между веб-сайтами Azure, облачными службами и виртуальными машинами для веб-приложений

	Веб-приложения в Azure можно выполнять на веб-сайтах, как показано в этом учебнике, а также в облачных службах и на виртуальных машинах. Для получения дополнительной информации см. разделы [Модели выполнения Azure](/ru-ru/develop/net/fundamentals/compute/) и [Веб-сайты Azure, облачные службы и виртуальные машины: когда они используются?](/ru-ru/manage/services/web-sites/choose-web-app-service/).

<!--HONumber=35.1-->
