<properties 
	pageTitle="Создание веб-приложения ASP.NET в службе приложений Azure" 
	description="В этом учебнике показано, как создать веб-проект ASP.NET в Visual Studio 2013 и развернуть его в веб-приложении в службе приложений Azure. Менее чем за 15 минут вы получите приложение, которое работает в облаке." 
	services="app-service\web" 
	documentationCenter=".net" 
	authors="tdykstra" 
	manager="wpickett" 
	editor="mollybos"/>

<tags 
	ms.service="app-service-web" 
	ms.workload="web" 
	ms.tgt_pltfrm="na" 
	ms.devlang="dotnet" 
	ms.topic="hero-article" 
	ms.date="03/24/2015" 
	ms.author="tdykstra"/>

# Создание веб-приложения ASP.NET в службе приложений Azure

## Обзор

В этом учебнике показано, как создать веб-приложение ASP.NET и развернуть его в [веб-приложении службы приложений](http://go.microsoft.com/fwlink/?LinkId=529714) с помощью Visual Studio 2013 или Visual Studio 2013 для Web Express. Этот учебник разработан для читателей, не имеющих опыта использования Azure или ASP.NET. По завершении изучения этого учебника вы получите простое веб-приложение, работающее в облаке.

Вы узнаете:

* Как подготовить компьютер к разработке для Azure путем установки пакета Azure SDK.
* Как создать в Visual Studio веб-проект ASP.NET и развернуть его в веб-приложении Azure.
* Как внести изменения в веб-проект и повторно развернуть приложение.
* Как использовать [портал Azure](http://go.microsoft.com/fwlink/?LinkId=529715) для отслеживания и контроля своего веб-приложения.

Для работы с этим учебником требуется учетная запись Azure.

* Вы можете [создать бесплатную учетную запись Azure](/pricing/free-trial/?WT.mc_id=A261C142F). В этом случае вы получаете кредиты, которые можно использовать для ознакомления с платными службами Azure. Когда кредиты закончатся, вы сможете сохранить свою учетную запись и пользоваться бесплатными службами Azure, например веб-приложениями службы приложений Azure.
* Вы можете [активировать преимущества подписчика MSDN](/pricing/member-offers/msdn-benefits-details/?WT.mc_id=A261C142F). Подписавшись на MSDN, вы будете ежемесячно получать кредиты, которые можно использовать для платных служб Azure.</li>

На иллюстрации ниже показано готовое приложение:

![Web app home page](./media/web-sites-dotnet-get-started-vs2013/deployedandazure.png)

##<a name="video"></a>Подписка на Microsoft Azure (видео)

В этом видео Скотт Хансельман (Scott Hanselman) показывает, насколько просто оформить подписку на ознакомительную версию Microsoft Azure. (Длительность: 1:58)

> [AZURE.VIDEO sign-up-for-microsoft-azure]

[AZURE.INCLUDE [install-sdk-2013-only](../includes/install-sdk-2013-only.md)]

## Создание веб-приложения ASP.NET

Первым шагом является создание проекта веб-приложения. Visual Studio автоматически создаст веб-приложение Azure, в который позже вы развернете свой проект. 

<!-- сделать: восстановить диаграмму после замены в заголовках "веб-сайт" на "веб-приложение"
На следующей схеме показано, что происходит на этих двух шагах.
>>>>>>> 67f4fc9fc261d3288cdba263d3236b9617b6a7df

![Diagram showing project creation and deployment steps](./media/web-sites-dotnet-get-started-vs2013/createdeploydiagram.png)
-->

1. Откройте Visual Studio 2013 или Visual Studio 2013 Express for Web.

2. В меню **Файл** выберите **Новый проект**.

3. В окне **Новый проект** последовательно щелкните **C#** > **Интернет** > **Веб-приложение ASP.NET**. При желании вы можете выбрать **Visual Basic**.

3. Убедитесь, что в качестве целевой платформы выбрана **.NET Framework 4.5**.

4. Назовите приложение **MyExample** и нажмите кнопку **ОК**.

	![New Project dialog box](./media/web-sites-dotnet-get-started-vs2013/GS13newprojdb.png)

5. В диалоговом окне **Новый проект ASP.NET** выберите шаблон **MVC**. Если вы предпочитаете работать с веб-формами ASP.NET, выберите шаблон **Веб-формы**. 

	[MVC и веб-формы](http://www.asp.net/get-started/websites) - это платформы ASP.NET для разработки веб-приложений. Для работы с этим учебником вы можете выбрать любой шаблон. Но если вы выберете веб-формы, вместо указанного в учебнике файла  *Default.aspx* вам позже нужно будет редактировать файл  *Index.cshtml*.

7. Щелкните **Изменить проверку подлинности**. 

	![New ASP.NET Project dialog box](./media/web-sites-dotnet-get-started-vs2013/GS13changeauth.png)

6. В диалоговом окне **Изменить аутентификацию** щелкните **Без аутентификации** и нажмите кнопку **ОК**.

	![No Authentication](./media/web-sites-dotnet-get-started-vs2013/GS13noauth.png)

	В создаваемом примере приложения не будет функции входа пользователей в систему. В разделе [Дальнейшие действия](#next-steps) приводятся ссылки на учебник, в котором описывается реализация функций аутентификации и авторизации.

5. В окне **Новый проект ASP.NET** оставьте без изменений параметры в разделе **Azure** и нажмите кнопку **ОК**. 

	![New ASP.NET Project dialog box](./media/web-sites-dotnet-get-started-vs2013/GS13newaspnetprojdb.png)

	В параметрах по умолчанию указано, что Visual Studio создаст веб-приложение Azure для вашего веб-проекта. В следующем разделе учебника вы развернете веб-проект в созданном веб-приложении.

5. Если вы еще не вошли в Azure, Visual Studio покажет запрос для того, чтобы это сделать. Для входа используйте идентификатор и пароль учетной записи, с помощью которой вы управляете своей подпиской Azure.
	
	После входа в систему в окне **Настройка параметров веб-приложения Microsoft Azure** вам нужно будет указать, какие ресурсы вы хотите создать.

	![Signed in to Azure](./media/web-sites-dotnet-get-started-vs2013/configuresitesettings.png)

3. Visual Studio по умолчанию назначает **имя веб-приложения**, которое Azure будет использовать в качестве префикса в URL-адресе вашего приложения. Если хотите, можете переименовать веб-приложение.

	Полный URL-адрес будет состоять из того, что вы укажете здесь, плюс *.azurewebsites.net* (как показано в текстовом поле **Имя веб-приложения**). Например, если в поле имени указать  `MyExample6442`, the URL will be `MyExample6442.azurewebsites.net`. URL-адрес должен быть уникальным. Если выбранное имя уже использует кто-то другой, вместо зеленой отметки справа вы увидите красный восклицательный знак. Это будет означать, что вам нужно ввести другое имя.

4. В раскрывающемся списке **Регион** выберите ближайшее к вам расположение.

	Этот параметр определяет, в каком центре обработки данных Azure будет работать ваше веб-приложения. В целях этого учебника вы можете выбрать любой регион, так как от этого мало что изменится. Но для производственного веб-приложения нужно, чтобы веб-сервер располагался максимально близко к пользователям, которые работают с вашим сайтом. Это поможет минимизировать [задержки](http://www.bing.com/search?q=web%20latency%20introduction&qs=n&form=QBRE&pq=web%20latency%20introduction&sc=1-24&sp=-1&sk=&cvid=eefff99dfc864d25a75a83740f1e0090).

5. Оставьте поле базы данных без изменений.

	В этом учебнике база данных не используется. В разделе [Дальнейшие действия](#next-steps) в конце данного учебника приводится ссылка на учебник, в котором показано, как использовать базу данных.

6. Нажмите кнопку **ОК**.

	Через несколько секунд Visual Studio создаст в указанной папке веб-проект, а также веб-приложение в выбранном регионе Azure.  

	В окне **Обозреватель решений** появятся файлы и папки нового проекта.

	![Solution Explorer](./media/web-sites-dotnet-get-started-vs2013/solutionexplorer.png)

	В окне **Действие веб-публикации** появится подтверждение того, что веб-приложение создано.

	![Web app created](./media/web-sites-dotnet-get-started-vs2013/GS13sitecreated1.png)

	Вы также сможете увидеть веб-приложение в обозревателе сервера.

	![Web app created](./media/web-sites-dotnet-get-started-vs2013/siteinse.png)



## Развертывание приложения в Azure

7. В окне **Действие веб-публикации** щелкните **Опубликовать MyExample в этом веб-приложении**.

	![Web app created](./media/web-sites-dotnet-get-started-vs2013/GS13sitecreated.png)

	Через несколько секунд появится мастер **веб-публикации**. 

	Параметры, необходимые Visual Studio для развертывания проекта в Azure, были сохранены в *publish profile*. Мастер дает возможность просмотреть и изменить эти параметры.

8. На вкладке **Подключение** мастера **Публикация веб-сайта** нажмите кнопку **Проверить подключение**, чтобы убедиться, что Visual Studio может подключиться к Azure для развертывания веб-проекта.

	![Validate connection](./media/web-sites-dotnet-get-started-vs2013/GS13ValidateConnection.png)

	После проверки подключения рядом с кнопкой **Проверить подключение** отображается зеленая галочка. 

9. Нажмите кнопку **Далее**.

	![Successfully validated connection](./media/web-sites-dotnet-get-started-vs2013/GS13ValidateConnectionSuccess.png)

10. На вкладке **Параметры** нажмите кнопку **Далее**.

	![Settings tab](./media/web-sites-dotnet-get-started-vs2013/GS13SettingsTab.png)

	Для настроек **Конфигурация** и **Параметры публикации файла** можно принять значения по умолчанию.

	В раскрывающемся списке **Конфигурация** можно выбрать вариант развертывания отладочной сборки для удаленной отладки. В разделе [Дальнейшие действия](#next-steps) приводятся ссылки на учебник, в котором описывается удаленный запуск Visual Studio в режиме отладки.

	Если развернуть **Параметры публикации файла**, вы увидите несколько параметров, позволяющих выполнять сценарии, которые не рассматриваются в этом учебнике. Например:
 
	* Удаление дополнительных файлов в месте назначения.
	  
		Удаление любых файлов на сервере, которые не входят в ваш проект. Такая возможность может понадобиться, если вы развертываете проект в веб-приложении, в котором раньше был развернут другой проект.

	* Предварительная компиляция во время публикации. 
	 
		Может уменьшить время подготовки первого запроса для больших приложений.

	* Удаление файлов из папки App_Data. 
	 
		При тестировании в папке App_Data иногда находится файл базы данных SQL Server, который вы не хотите развертывать в производство.
	
11. На вкладке **Предварительный просмотр** нажмите кнопку **Начало предварительного просмотра**.

	![StartPreview button in the Preview tab](./media/web-sites-dotnet-get-started-vs2013/GS13Preview.png)

	На вкладке отображается список файлов, которые будут копироваться на сервер. Предварительный просмотр не является обязательным для публикации приложения, но это полезная функция, о которой нужно знать.

12. Щелкните **Опубликовать**.

	![StartPreview file output](./media/web-sites-dotnet-get-started-vs2013/GS13previewoutput.png)

	Visual Studio начинает процесс копирования файлов на сервер Azure.

	В окнах **Вывод** и **Действие веб-публикации** указывается, какие действия по развертыванию были выполнены, а также сообщается об успешном завершении развертывания.

	![Output window reporting successful deployment](./media/web-sites-dotnet-get-started-vs2013/PublishOutput.png)

	После успешного развертывания URL-адрес развернутого веб-приложения автоматически открывается в браузере по умолчанию, а созданное приложение теперь работает в облаке. URL-адрес в адресной строке браузера указывает на то, что веб-приложение загружается из Интернета.

	![Web app running in Azure](./media/web-sites-dotnet-get-started-vs2013/GS13deployedsite.png)

13. Закройте браузер.

## Внесение изменений и повторное развертывание

В этом разделе учебника вы измените заголовок **h1** главной страницы, запустите проект локально на компьютере разработчика, чтобы проверить изменения, а затем развернете изменение в Azure.

2. Откройте файл  *Views/Home/Index.cshtml* или *.vbhtml* в **обозревателе решений**, измените заголовок **h1** с "ASP.NET" на "ASP.NET and Azure" и сохраните файл. 

	![MVC index.cshtml](./media/web-sites-dotnet-get-started-vs2013/index.png)

	![MVC h1 change](./media/web-sites-dotnet-get-started-vs2013/mvcandazure.png)

1. Нажмите клавиши CTRL+F5, чтобы увидеть обновленный заголовок, запустив веб-приложение на локальном компьютере.

	![Web app running locally](./media/web-sites-dotnet-get-started-vs2013/localandazure.png)

	URL-адрес `http://localhost` указывает, что веб-сайт работает на локальном компьютере. По умолчанию он работает в IIS Express - упрощенной версии IIS, используемой на этапе разработки веб-приложений.


1. Закройте браузер.

1. В **обозревателе решений** щелкните проект правой кнопкой мыши и выберите **Опубликовать**.

	![Chooose Publish](./media/web-sites-dotnet-get-started-vs2013/choosepublish.png)

	Появится вкладка "Предварительный просмотр" мастера **веб-публикации**. Если бы вам требовалось изменить какие-либо параметры публикации, вы бы выбрали другую вкладку, но нам нужно просто выполнить повторное развертывание с теми же параметрами.

2. В диалоговом окне **Публикации веб-сайта** нажмите кнопку **Опубликовать**.

	![Click Publish](./media/web-sites-dotnet-get-started-vs2013/clickpublish.png)

	Visual Studio развернет проект в Azure и откроет веб-приложение в браузере по умолчанию.

	![Changed web app deployed](./media/web-sites-dotnet-get-started-vs2013/deployedandazure.png)

**Совет.** Вы можете включить панель инструментов **Веб-публикация одним щелчком**, чтоб дополнительно ускорить развертывание. Щелкните **Просмотр** > **Панели инструментов**, а затем выберите **Веб-публикация одним щелчком**. Панель инструментов позволяет выбрать профиль, нажать кнопку для публикации или кнопку, открывающую мастер **публикации веб-сайта**.

![Web One Click Publish Toolbar](./media/web-sites-dotnet-get-started-vs2013/weboneclickpublish.png)

## Мониторинг веб-приложение и управление им на портале управления

[Портал управления Azure](/services/management-portal/) - это веб-интерфейс, который позволяет отслеживать службы Azure (например, только что созданное вами веб-приложение) и управлять ими. В этом разделе мы познакомимся с тем, что можно сделать в портале.
  
1. В браузере перейдите по адресу [http://portal.azure.com]() и войдите со своими учетными данными Azure.

2. Щелкните **Обзор > Веб-приложения** и выберите имя своего веб-приложения.

	В колонке **Веб-приложение** откроется обзор статистики использования и ссылки на часто используемые функции управления веб-приложениями.
  
	![Web app blade](./media/web-sites-dotnet-get-started-vs2013/portaldashboard.png)-->

	К этому моменту трафик в веб-приложении был незначительным, и график может ничего не показывать. Если вы перейдете к своему приложению, обновите страницу несколько раз, а затем обновите страницу портала, вы увидите, что уже появилась некоторая статистика.

3. Щелкните **Все параметры**, чтобы открыть дополнительные настройки вашего веб-приложения.

	Откроется список с типами параметров.
  
	![](./media/web-sites-dotnet-get-started-vs2013/portalconfigure1.png)-->

4. Щелкните **Параметры приложения**, чтобы увидеть примеры параметров, которые можно настроить на портале.

	Например, вы можете изменить для веб-приложения версию .NET, включить такие функции, как [WebSockets](/blog/2013/11/14/introduction-to-websockets-on-windows-azure-web-sites/), задать [значения строк подключения](/blog/2013/07/17/windows-azure-web-sites-how-application-strings-and-connection-strings-work/) и многое другое. 

	![Portal web app configure tab](./media/web-sites-dotnet-get-started-vs2013/portalconfigure2.png)

Это всего лишь несколько функций управления порталом. Кроме всего прочего, вы можете создавать новые и удалять существующие веб-приложения, останавливать их, повторно запускать, а также управлять различными службами Azure (например, базами данных и виртуальными машинами).  

>[AZURE.NOTE] Если вы хотите начать работу со службой приложений Azure еще до создания учетной записи Azure, перейдите на страницу [ознакомительной версии службы приложений](http://go.microsoft.com/fwlink/?LinkId=523751). Там вы сможете сразу создать свое первое веб-приложение, правда срок его службы будет ограничен. Никаких кредитных карт и обязательств.

## Дальнейшие действия

Из этого учебника вы узнали, как создать простое веб-приложение и развернуть его в веб-приложении Azure. Ниже приведены некоторые связанные разделы и ресурсы для изучения более подробных сведений:

* Другие способы развертывания веб-проекта.

	В этом учебнике вы увидели самый быстрый способ создания и развертывания веб-приложения за один подход. Другие способы развертывания, с использованием Visual Studio или посредством [автоматического развертывания](http://www.asp.net/aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/continuous-integration-and-continuous-delivery) из [системы управления версиями](http://www.asp.net/aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/source-control), описаны в статье [Развертывание веб-приложения в службе приложений Azure](web-sites-deploy.md).. 

	Visual Studio может также создавать скрипты Windows PowerShell, которые позволяют автоматизировать развертывание. Дополнительные сведения см. в статье [Полная автоматизация (создание реальных облачных приложений в Azure)](http://www.asp.net/aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/automate-everything).

* Управление веб-приложением в Visual Studio.

	Дополнительные сведения о функциях управления веб-приложениями, которые можно использовать в **обозревателе сервера**, см. в статье [Устранение неполадок веб-приложения в службе приложений Azure с помощью Visual Studio](troubleshoot-web-sites-in-visual-studio.md)..

* Устранение неполадок веб-приложения

	Visual Studio предоставляет функции, упрощающие просмотр журналов Azure по мере их создания в режиме реального времени. Можно также работать в Azure удаленно в режиме отладки. Дополнительные сведения см. в статье [Устранение неполадок веб-приложения в службе приложений Azure с помощью Visual Studio](troubleshoot-web-sites-in-visual-studio.md).

* Как добавить функции доступа к базе данных и авторизации

	Учебник по организации доступа к базе данных и предоставлению некоторых функций приложения только авторизованным пользователям см. в разделе [Развертывание безопасного приложения ASP.NET MVC с членством, OAuth и базой данных SQL в веб-приложении Azure](/develop/net/tutorials/web-site-with-sql-database/).

* Добавление настраиваемого доменного имени и SSL

	Информацию об использовании SSL и собственного домена (например, www.contoso.com вместо contoso.azurewebsites.net) см. в следующих ресурсах:

	* [Настройка имени личного домена для веб-приложения Azure](web-sites-custom-domain-name.md).
	* [Включение HTTPS для веб-сайта Azure](web-sites-configure-ssl-certificate.md).

* Как избежать затрат времени на ожидание пробуждения после времени простоя 

	Если в течение определенного периода времени веб-приложение простаивает, оно по умолчанию выгружается. После этого первый запрос вынужден ожидать повторной загрузки веб-приложения. Чтобы избежать времени ожидания, можно включить функцию AlwaysOn. Дополнительные сведения о параметрах конфигурации см. в статье [Настройка веб-приложений в службе приложений Azure](web-sites-configure.md).

* Как добавить работающие в режиме реального времени функции, например, чат

	Если ваше веб-приложение будет содержать компоненты, работающие в режиме реального времени (например, служба чата, игра, тикер акций и т. д.), наилучшей производительности можно добиться за счет использования [ASP.NET SignalR](http://www.asp.net/signalr) с методом транспортировки [WebSockets](/blog/2013/11/14/introduction-to-websockets-on-windows-azure-web-sites/). Дополнительную информацию см. в статье [Использование SignalR с веб-приложениями Azure](http://www.asp.net/signalr/overview/signalr-20/getting-started-with-signalr-20/using-signalr-with-windows-azure-web-sites). 

* Выбор между службой приложений, облачными службами и виртуальными машинами для веб-приложений.

	Веб-приложения в Azure можно выполнять в веб-приложениях службы приложений (как описано в этом учебнике), в облачных службах и на виртуальных машинах. Дополнительную информацию см. в статьях [Модели выполнения Azure](/develop/net/fundamentals/compute/) и [Веб-приложения Azure, облачные службы и виртуальные машины: когда они используются](/manage/services/web-sites/choose-web-app-service/).

## Изменения
* Сведения об изменении веб-сайтов на службу приложений см. в статье [Служба приложений Azure и ее влияние на существующие службы Azure](http://go.microsoft.com/fwlink/?LinkId=529714).
* Сведения о переходе со старого портала на новый см. в статье [Справочная информация о навигации по предварительной версии портала](http://go.microsoft.com/fwlink/?LinkId=529715).

<!--HONumber=49-->