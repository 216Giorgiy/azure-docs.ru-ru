---
title: "Как сохранить постоянный виртуальный IP-адрес для облачной службы Azure | Документация Майкрософт"
description: "Узнайте, как сохранить постоянный виртуальный IP-адрес (VIP) облачной службы Azure."
services: visual-studio-online
documentationcenter: na
author: TomArcher
manager: douge
editor: 
ms.assetid: 4a58e2c6-7a79-4051-8a2c-99182ff8b881
ms.service: multiple
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: multiple
ms.date: 03/21/2017
ms.author: tarcher
translationtype: Human Translation
ms.sourcegitcommit: 424d8654a047a28ef6e32b73952cf98d28547f4f
ms.openlocfilehash: 12d73e2f490acc92bb4a2e1014bb24f7f672f713
ms.lasthandoff: 03/22/2017


---
# <a name="how-to-retain-a-constant-virtual-ip-address-for-an-azure-cloud-service"></a>Сохранение постоянного виртуального IP-адреса для облачной службы Azure
При обновлении облачной службы, размещенной в Azure, необходимо убедиться в том, что виртуальный IP-адрес (VIP) службы не изменяется. Многие службы управления доменом используют службу доменных имен (DNS) для регистрации доменных имен. Регистрация с помощью DNS возможна, только если виртуальный IP-адрес остается неизменным. Проверить, изменяется ли виртуальный IP-адрес облачной службы при обновлении, можно с помощью **мастера публикации** в инструментах Azure. Дополнительные сведения об управлении доменами DNS для облачных служб см. в статье [Настройка пользовательского доменного имени для облачной службы Azure](cloud-services/cloud-services-custom-domain-name.md).

## <a name="publishing-a-cloud-service-without-changing-its-vip"></a>Публикация облачной службы без изменения ее виртуального IP-адреса
Виртуальный IP-адрес (VIP) облачной службы назначается при первом развертывании службы в Azure в конкретной среде, например в рабочей среде. Виртуальный IP-адрес изменяется, только если развертывание удаляется явно или если оно удаляется неявно в процессе обновления. Чтобы сохранить виртуальный IP-адрес, нельзя удалять развертывание. Кроме того, необходимо убедиться, что Visual Studio не удаляет развертывание автоматически. Для управления поведением можно указать параметры развертывания в **мастере публикации**, который поддерживает несколько вариантов развертывания. Можно указать новое развертывание или развертывание обновления, которое может быть добавочным или одновременным. Оба вида развертывания сохраняют виртуальный IP-адрес. Определение разных типов развертывания см. в статье [Мастер публикации приложений Azure](vs-azure-tools-publish-azure-application-wizard.md).  Кроме того, можно указать, нужно ли удалять предыдущее развертывание облачной службы при возникновении ошибки. Виртуальный IP-адрес может неожиданно измениться, если этот параметр не установлен правильно.

## <a name="updating-a-cloud-service-without-changing-its-vip"></a>Обновление облачной службы без изменения ее виртуального IP-адреса
1. Создайте или откройте проект облачной службы Azure в Visual Studio. 

1. В **обозревателе решений** щелкните проект правой кнопкой мыши и в контекстном меню выберите **Опубликовать**.

    ![Меню публикации](./media/vs-azure-tools-cloud-service-retain-a-constant-virtual-ip-address/solution-explorer-publish-menu.png)

1. В диалоговом окне **Опубликовать приложение Azure** выберите подписку Azure, в которую требуется выполнить развертывание, при необходимости войдите в систему и нажмите кнопку **Далее**.

    ![Публикация приложения Azure: вход](./media/vs-azure-tools-cloud-service-retain-a-constant-virtual-ip-address/azure-publish-signin.png)

1. На вкладке **Общие параметры** проверьте правильность имени облачной службы, для которой выполняется развертывание, а также значений параметров **Среда**, **Конфигурация сборки** и **Конфигурация службы**.

    ![Публикация приложения Azure: общие параметры](./media/vs-azure-tools-cloud-service-retain-a-constant-virtual-ip-address/azure-publish-common-settings.png)

1. На вкладке **Дополнительные параметры** проверьте правильность учетной записи хранения и метки развертывания. Кроме того, убедитесь в том, что флажок **Удалить развертывание при сбое** снят, а флажок **Обновлять развертывание** установлен. Установленный флажок **Обновление развертывания** гарантирует, что развертывание не будет удалено, а виртуальный IP-адрес не будет потерян при повторной публикации приложения. Снятый флажок **Удалить развертывание при сбое** гарантирует, что виртуальный IP-адрес не будет потерян при возникновении ошибки во время развертывания.

    ![Публикация приложения Azure: дополнительные параметры](./media/vs-azure-tools-cloud-service-retain-a-constant-virtual-ip-address/azure-publish-advanced-settings.png)

1. (Необязательно) Чтобы указать способ обновления в дальнейшем, перейдите по ссылке **Параметры** рядом с полем **Обновление развертывания**. Затем выберите **Добавочное обновление** или **Одновременное обновление**. Если выбрать **Добавочное обновление**, то все экземпляры приложения будут обновляться по очереди, обеспечивая доступность приложения в любое время. Если выбрать **Одновременное обновление**, то все экземпляры приложения будут обновляться одновременно. Одновременное обновление выполняется быстрее, но служба может быть недоступна во время обновления. По завершении нажмите **Далее**.

    ![Публикация приложения Azure: параметры обновления развертывания](./media/vs-azure-tools-cloud-service-retain-a-constant-virtual-ip-address/azure-publish-deployment-update-settings.png)

1. Вернувшись в диалоговое окно **Опубликовать приложение Azure**, нажимайте кнопку **Далее**, пока не отобразится страница **Сводка**. Проверьте параметры и нажмите кнопку **Опубликовать**.
   
    ![Публикация приложения Azure: сводка](./media/vs-azure-tools-cloud-service-retain-a-constant-virtual-ip-address/azure-publish-summary.png)

## <a name="next-steps"></a>Дальнейшие действия
- [Использование мастера публикации приложений Azure в Visual Studio](vs-azure-tools-publish-azure-application-wizard.md)


