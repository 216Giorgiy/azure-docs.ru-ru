<properties
   pageTitle="Сохранение постоянного виртуального IP-адреса для облачной службы | Microsoft Azure"
   description="Узнайте, как сохранить постоянный виртуальный IP-адрес (VIP) облачной службы Azure."
   services="visual-studio-online"
   documentationCenter="na"
   authors="TomArcher"
   manager="douge"
   editor="" />
<tags
   ms.service="multiple"
   ms.devlang="dotnet"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="multiple"
   ms.date="12/19/2015"
   ms.author="tarcher" />

# Сохранение постоянного виртуального IP-адреса облачной службы

При обновлении облачной службы, размещенной в Azure, необходимо убедиться в том, что виртуальный IP-адрес (VIP) службы не изменяется. Многие службы управления доменом используют службу доменных имен (DNS) для регистрации доменных имен. Регистрация с помощью DNS возможна, только если виртуальный IP-адрес остается неизменным. Проверить, изменяется ли виртуальный IP-адрес облачной службы при обновлении, можно с помощью **мастера публикации** в инструментах Azure. Дополнительные сведения об управлении доменами DNS для облачных служб см. в статье [Настройка имени личного домена для облачной службы Azure](cloud-services-custom-domain-name.md).

## Публикация облачной службы без изменения ее виртуального IP-адреса

Виртуальный IP-адрес (VIP) облачной службы назначается при первом развертывании службы в Azure в конкретной среде, например в рабочей среде. Виртуальный IP-адрес изменяется, только если развертывание удаляется явно или если оно удаляется неявно в процессе обновления. Чтобы сохранить виртуальный IP-адрес, нельзя удалять развертывание. Кроме того, необходимо убедиться, что Visual Studio не удаляет развертывание автоматически. Для управления поведением можно указать параметры развертывания в **мастере публикации**, который поддерживает несколько вариантов развертывания. Можно указать новое развертывание или развертывание обновления, которое может быть добавочным или одновременным. Оба вида развертывания сохраняют виртуальный IP-адрес. Определение разных типов развертывания см. в статье [Мастер публикации приложений Azure](vs-azure-tools-publish-azure-application-wizard.md). Кроме того, можно указать, нужно ли удалять предыдущее развертывание облачной службы при возникновении ошибки. Виртуальный IP-адрес может неожиданно измениться, если этот параметр не установлен правильно.

### Обновление облачной службы без изменения ее виртуального IP-адреса

1. Развернув облачную службу как минимум один раз, откройте контекстное меню узла проекта Azure и выберите **Опубликовать**. Откроется **мастер публикации приложений Azure**.

1. В списке подписок выберите подписку для развертывания, а затем нажмите кнопку **Далее**. Откроется страница **Параметры** мастера.

1. На вкладке **Общие параметры** проверьте правильность имени облачной службы, для которой выполняется развертывание, а также значений параметров **Среда**, **Конфигурация сборки** и **Конфигурация службы**.

1. На вкладке **Дополнительные параметры** проверьте правильность учетной записи хранения и метки развертывания. Кроме того, убедитесь в том, что флажок **Удалить развертывание при сбое** снят, а флажок **Обновлять развертывание** установлен. Установленный флажок **Обновлять развертывание** гарантирует, что развертывание не будет удалено, а виртуальный IP-адрес не будет потерян при повторной публикации приложения. Снятый флажок **Удалить развертывание при сбое** гарантирует, что виртуальный IP-адрес не будет потерян при возникновении ошибки во время развертывания.

1. Чтобы указать способ обновления в дальнейшем, перейдите по ссылке **Параметры** рядом с полем **Обновлять развертывание**. Затем в диалоговом окне **Параметры обновления развертывания** выберите добавочное или одновременное обновление. Если указать добавочное обновление, все экземпляры будут обновляться по очереди, обеспечивая доступность приложения в любое время. Если указать одновременное обновление, все экземпляры будут обновляться одновременно. Одновременное обновление выполняется быстрее, но служба может быть недоступна во время обновления.

1. Изменив настройки, нажмите кнопку **Далее**.

1. На странице **Сводка** мастера проверьте параметры, а затем нажмите кнопку **Опубликовать**.

  >[AZURE.WARNING]Если развертывание завершается ошибкой, следует незамедлительно устранить причину сбоя и выполнить повторное развертывание. Облачная служба не должна оставаться в поврежденном состоянии.

## Дальнейшие действия

Дополнительные сведения о публикации в Azure в среде Visual Studio см. в статье [Мастер публикации приложений Azure](vs-azure-tools-publish-azure-application-wizard.md).

<!---HONumber=AcomDC_1223_2015-->