<properties 
	pageTitle="Масштабирование веб-приложения в службе приложений Azure" 
	description="Узнайте, как развернуть веб-приложение и увеличить его масштаб в службе приложений Azure, а также как работает автоматическое масштабирование." 
	services="app-service\web" 
	documentationCenter="" 
	authors="cephalin" 
	manager="wpickett" 
	editor="mollybos"/>

<tags 
	ms.service="app-service-web" 
	ms.workload="web" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="03/24/2015" 
	ms.author="cephalin"/>

# Масштабирование веб-приложения в службе приложений Azure #

Чтобы повысить производительность и пропускную способность веб-приложения в Microsoft Azure, на [портале Azure](http://go.microsoft.com/fwlink/?LinkId=529715) режим плана [службы приложений](http://go.microsoft.com/fwlink/?LinkId=529714) **Free** можно изменить на **Shared**, **Basic**, **Standard** или **Premium**. 

Масштабирование веб-приложений Azure предполагает два связанных действия: перевод плана службы приложений на более высокий уровень обслуживания и последующую настройку некоторых параметров. В данной статье рассматриваются оба этих действия. Более высокие уровни обслуживания, например **Standard** и **Premium**, предлагают повышенную надежность и гибкость в определении способов использования ресурсов в Azure.

Смена режима и их настройка легко выполняются на вкладке "Масштаб" портала управления. При необходимости можно выполнять масштабирование вверх или вниз. Применение этих изменений занимает всего несколько секунд, но они влияют на все веб-приложения в вашем плане службы приложений. Они не требуют ни изменения кода, ни повторного развертывания приложений.

Сведения о планах службы приложений см. в статьях [Что такое план службы приложений?](web-sites-web-hosting-plan-overview.md) и [Подробный обзор планов службы приложений Azure](azure-web-sites-web-hosting-plans-in-depth-overview.md).. Сведения о стоимости и возможностях отдельных планов службы приложений см. в статье [Сведения о ценах на службу приложений](/pricing/details/web-sites/).  

> [AZURE.NOTE] Прежде чем перевести веб-приложение из режима **Free** в режим **Basic**, **Standard** или **Premium**, следует снять существующие ограничения на расходы, установленные для вашей подписки на службу приложений Azure. Сведения о том, как просмотреть или изменить параметры подписки на службу приложений Microsoft Azure, см. в статье [Подписки Microsoft Azure][azuresubscriptions].

<a name="scalingsharedorbasic"></a>
<!-- ===================================== -->
## Масштабирование с переходом в режим Shared или Basic
<!-- ===================================== -->

1. Откройте в браузере [портал Azure][portal].
	
2. В колонке веб-приложения последовательно щелкните **Все параметры**, **Масштаб** и **Изменить план Free для добавления экземпляров и повышения производительности**.
	
	![Choose Plan][ChooseWHP]
	
4. В колонке **Выбор ценовой категории** выберите режим **Shared** или **Basic** и нажмите кнопку **Выбрать**.
	
	После завершения операции на вкладке **Уведомления** отобразится текст **УСПЕШНО** зеленого цвета. 
	
5. Передвиньте ползунок **Экземпляр** слева направо, чтобы увеличить количество экземпляров, и на панели команд нажмите кнопку **Сохранить**. В режиме **Shared** изменение размера экземпляра недоступно. Дополнительную информацию об использовании размеров экземпляров см. в разделе [Размеры виртуальных машин и облачных служб в Microsoft Azure][vmsizes].
	
	![Instance size for Basic mode][ChooseBasicInstances]
	
	После завершения операции на вкладке **Уведомления** отобразится текст **УСПЕШНО** зеленого цвета. 
	
<a name="scalingstandard"></a>
<!-- ================================= -->
## Масштабирование с переходом в режим Standard или Premium
<!-- ================================= -->

> [AZURE.NOTE] Прежде чем изменять план службы приложений на **Standard** или **Premium**, следует снять существующие ограничения на расходы, установленные для вашей подписки на службу приложений Microsoft Azure. Иначе при достижении ограничения до истечения расчетного периода веб-приложение может стать недоступным. Сведения о том, как просмотреть или изменить параметры подписки на службу приложений Microsoft Azure, см. в статье [Подписки Microsoft Azure][azuresubscriptions].

1. Чтобы изменить режим на **Standard** или **Premium**, сначала выполните те же действия, что и при переходе в режим **Shared** или **Basic**. Затем в колонке **Выбор ценовой категории** выберите режим **Standard** или **Premium** и нажмите кнопку **Выбрать**. 
	
	После завершения операции на вкладке **Уведомления** отобразится текст **УСПЕШНО** зеленого цвета и активируется **режим автоматического масштабирования**.
	
	![Scale in Standard or Premium Mode][ScaleStandard]
	
	Вы по-прежнему можете передвигать ползунок **Экземпляры**. Таким образом вы будете управлять масштабированием вручную и добавлять экземпляры так же, как и в режиме **Базовый** (см. выше). Ниже мы рассмотрим, как можно использовать **режим автоматического масштабирования**. 
	
2. Для **режима автоматического масштабирования** выберите вариант **Производительность**. Таким образом система автоматически будет изменять производительность, исходя из ее показателей.
	
	![Autoscale Mode set to Performance][Autoscale]
	
3. На шкале **Диапазон экземпляров** с помощью двух ползунков определите для функции автоматического масштабирования минимальное и максимальное количество экземпляров. В учебных целях установите для максимального количества значение **6**.
	
4. На панели команд нажмите кнопку **Сохранить**.
	
4. В разделе **Целевые метрики** щелкните **>**, чтобы настроить правила автоматического масштабирования для метрики по умолчанию.  
	
	![Set Target Metrics][SetTargetMetrics]
	
	Вы можете настроить правила автоматического масштабирования для разных метрик производительности, включая ЦП, память, очередь диска, очередь HTTP и поток данных. В нашем случае настройте автоматическое масштабирование использования ЦП, которое предполагает следующее:
	
	- добавление 1 экземпляра, если загрузка ЦП превышает 70 % в течение 10 минут;
	- добавление 3 экземпляров, если загрузка ЦП превышает 90 % в течение 5 минут;
	- удаление 1 экземпляра, если загрузка ЦП составляет меньше 50 % в течение 30 минут. 
	
	
4. В раскрывающемся списке **Метрика** выберите значение **Процент ЦП**.
	
5. В разделе **Правила увеличения масштаба** настройте первое правило: установите для параметра **Условие** значение **Больше**, для параметра **Пороговое значение** - **70** (проценты), для параметра **В течение** - **10** (минуты), для параметра **Увеличить масштаб на** - **1** (экземпляры), а для параметра **Охлаждение** - **10** (минуты). 
	
	![Set First Autoscale Rule][SetFirstRule]
	
	>[AZURE.NOTE] Параметр **Охлаждение** определяет продолжительность паузы между действиями масштабирования.
	
6. Нажмите кнопку **Добавить правило увеличения масштаба** и настройте второе правило: установите для параметра **Условие** значение **Больше**, для параметра **Пороговое значение** - **90** (проценты), для параметра **В течение** - **1** (минуты), для параметра **Увеличить масштаб на** - **3** (экземпляры), а для параметра **Охлаждение** - **1** (минуты).
	
	![Set Second Autoscale Rule][SetSecondRule]
	
5. В разделе **Правила уменьшения масштаба** настройте третье правило: установите для параметра **Условие** значение **Меньше**, для параметра **Пороговое значение** - **50** (проценты), для параметра **В течение** - **30** (минуты), для параметра **Уменьшить масштаб на** - **1** (экземпляры), а для параметра **Охлаждение** - **60** (минуты). 
	
	![Set Third Autoscale Rule][SetThirdRule]
	
7. На панели команд нажмите кнопку **Сохранить**. Созданное правило автоматического масштабирования отобразится в колонке **Масштаб**. 
	
	![Set Autoscale Rule Result][SetRulesFinal]

<a name="ScalingSQLServer"></a>
##Масштабирование базы данных SQL Server, подключенной к веб-приложению
Если с вашим веб-приложением связана одна или несколько баз данных SQL Server(независимо от режима плана службы приложений), вы можете быстро их масштабировать в соответствии со своими потребностями.

1. Чтобы изменить масштаб одной из связанных баз данных, на [портале Azure][portal] откройте колонку своего веб-приложения. На раскрывающейся панели **Основные сведения** выберите ссылку на **группу ресурсов**. Затем в колонке группы ресурсов в части **Сводка** выберите одну из связанных баз данных.

	![Linked database][ResourceGroup]
	
2. В колонке связанной базы данных SQL щелкните часть **Ценовая категория**, выберите одну из категорий согласно своим требованиям к производительности, а затем нажмите кнопку **Выбрать**. 
	
	![Scale your SQL Database][ScaleDatabase]
	
3. Вы также можете настроить георепликацию, что позволит повысить доступность базы данных SQL и улучшить ее возможности аварийного восстановления. Для этого щелкните часть **Георепликация**.
	
	![Set up geo-replication for SQL Database][GeoReplication]

<a name="devfeatures"></a>
## Возможности разработчика
В зависимости от режима веб-приложения вам будут доступны следующие возможности для разработчиков:

### Разрядность ###

- Режимы **Basic**, **Standard** и **Premium** поддерживают 64- и 32-разрядные приложения.
- Режимы **Free** и **Shared** поддерживают только 32-разрядные приложения.

### Поддержка отладчика ###

- Поддержка отладчика доступна в режимах **Free**, **Shared** и **Basic** при 1 одновременном подключении на план службы приложений.
- Поддержка отладчика доступна в режимах **Standard** и **Premium** при 5 одновременных подключениях на план службы приложений.

<a name="OtherFeatures"></a>
## Другие возможности

### Мониторинг конечных веб-точек ###

- Мониторинг конечных веб-точек доступен в режимах **Basic**, **Standard** и **Premium**. Дополнительные сведения о мониторинге конечных веб-точек см. в статье [Мониторинг веб-приложений](web-sites-monitor.md).

- Подробные сведения обо всех остальных возможностях планов службы веб-приложений, в частности о ценообразовании и возможностях, интересных для всех пользователей (включая разработчиков), см. в статье [Сведения о ценах на службу приложений](/pricing/details/web-sites/)..

>[AZURE.NOTE] Если вы хотите начать работу со службой приложений Azure еще до создания учетной записи Azure, перейдите на страницу [ознакомительной версии службы приложений](http://go.microsoft.com/fwlink/?LinkId=523751). Там вы сможете сразу создать свое первое веб-приложение, правда срок его службы будет ограничен. Никаких кредитных карт и обязательств.

<a name="Next Steps"></a>	
## Дальнейшие действия

- Информацию о том, как начать работу с Azure, см. в статье [Бесплатная пробная версия Microsoft Azure](/pricing/free-trial/).
- Сведения о ценах, поддержке и соглашениях об уровне обслуживания см. по следующим ссылкам:
	
	[Информация о ценах - передача данных](/pricing/details/data-transfers/)
	
	[Планы поддержки Microsoft Azure](/support/plans/)
	
	[Соглашения об уровне обслуживания](/support/legal/sla/)
	
	[Информация о ценах - база данных SQL](/pricing/details/sql-database/)
	
	[Размеры виртуальных машин и облачных служб для Microsoft Azure][vmsizes]
	
	[Сведения о ценах на службу приложений](/pricing/details/web-sites/)
	
	[Сведения о ценах на службу приложений - SSL-подключения](/pricing/details/web-sites/#ssl-connections)

- Рекомендации по работе с веб-приложениями Azure, включая создание масштабируемой и устойчивой архитектуры, см. в статье [Рекомендации: веб-приложения службы приложений Azure](http://blogs.msdn.com/b/windowsazure/archive/2014/02/10/best-practices-windows-azure-websites-waws.aspx).

- Видео о масштабировании веб-приложений:
	
	- [Когда масштабировать веб-сайты Azure, автор - Стефан Шаков (Stefan Schackow)](/documentation/videos/azure-web-sites-free-vs-standard-scaling/)
	- [Автоматическое масштабирование веб-сайтов Аzure, ЦП или масштабирование по расписанию, автор - Стефан Шаков (Stefan Schackow)](/documentation/videos/auto-scaling-azure-web-sites/)
	- [Как масштабируются веб-сайты Azure, автор - Стефан Шаков (Stefan Schackow)](/documentation/videos/how-azure-web-sites-scale/)

## Изменения
* Сведения об изменении веб-сайтов на службу приложений см. в статье [Служба приложений Azure и ее влияние на существующие службы Azure](http://go.microsoft.com/fwlink/?LinkId=529714)
* Сведения о переходе со старого портала на новый см. в статье [Справочная информация о навигации по предварительной версии портала](http://go.microsoft.com/fwlink/?LinkId=529715).

<!-- LINKS -->
[vmsizes]:http://go.microsoft.com/fwlink/?LinkId=309169
[SQLaccountsbilling]:http://go.microsoft.com/fwlink/?LinkId=234930
[azuresubscriptions]:http://go.microsoft.com/fwlink/?LinkID=235288
[portal]: https://portal.azure.com/

<!-- IMAGES -->
[ChooseWHP]: ./media/web-sites-scale/scale1ChooseWHP.png
[ChooseBasicInstances]: ./media/web-sites-scale/scale2InstancesBasic.png
[SaveButton]: ./media/web-sites-scale/05SaveButton.png
[BasicComplete]: ./media/web-sites-scale/06BasicComplete.png
[ScaleStandard]: ./media/web-sites-scale/scale3InstancesStandard.png
[Autoscale]: ./media/web-sites-scale/scale4AutoScale.png
[SetTargetMetrics]: ./media/web-sites-scale/scale5AutoScaleTargetMetrics.png
[SetFirstRule]: ./media/web-sites-scale/scale6AutoScaleFirstRule.png
[SetSecondRule]: ./media/web-sites-scale/scale7AutoScaleSecondRule.png
[SetThirdRule]: ./media/web-sites-scale/scale8AutoScaleThirdRule.png
[SetRulesFinal]: ./media/web-sites-scale/scale9AutoScaleFinal.png
[ResourceGroup]: ./media/web-sites-scale/scale10ResourceGroup.png
[ScaleDatabase]: ./media/web-sites-scale/scale11SQLScale.png
[GeoReplication]: ./media/web-sites-scale/scale12SQLGeoReplication.png

<!--HONumber=49-->