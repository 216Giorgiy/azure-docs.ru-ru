<properties 
	pageTitle="Масштабирование веб-сайтов" 
	description="обязательно" 
	services="web-sites" 
	documentationCenter="" 
	authors="cephalin" 
	manager="wpickett" 
	editor="mollybos"/>

<tags 
	ms.service="web-sites" 
	ms.workload="web" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="11/24/2014" 
	ms.author="cephalin"/>

# Как масштабировать веб-сайты #

Для повышения производительности и пропускной способности веб-сайтов Microsoft Azure можно использовать портал управления Azure при выполнении масштабирования плана размещения веб-сайтов с "Бесплатный" до "В общем доступе", "Базовый" или "Стандартный". 

Масштабирование веб-узлов Azure включает в себя два связанных действия: перевод плана размещения веб-сайтов на более высокий уровень обслуживания и настройка некоторых параметров после перехода на более высокий уровень обслуживания. В данной статье рассматриваются оба этих действия. Более высокие уровни обслуживания, такие как режим "Стандартный", обеспечивают повышение надежности и гибкости при определении способа использования ресурсов в Azure.

Смена режима и их настройка легко выполняются на вкладке "Масштаб" портала управления. При необходимости можно выполнять масштабирование вверх или вниз. Выполнение этих изменений занимает несколько секунд, и они влияют на все веб-сайты используемого плана размещения. Они не требуют ни изменения кода, ни повторного развертывания приложений.

Более подробную информацию о планах размещения веб-сайтов см. в статьях [Что такое план размещения веб-сайтов?](http://azure.microsoft.com/ru-ru/documentation/articles/web-sites-web-hosting-plan-overview/) и [Детальный обзор планов размещения веб-сайтов Azure](http://www.azure.microsoft.com/ru-ru/Documentation/Articles/azure-web-sites-web-hosting-plans-in-depth-overview/). Информацию о ценах и возможностях отдельных планов размещения веб-сайтов см. на странице [информации о ценах для веб-сайтов](http://www.windowsazure.com/ru-ru/pricing/details/web-sites/).  

> [AZURE.NOTE]  Прежде чем перевести веб-сайт с плана размещения веб-сайтов **Бесплатный** на план **Базовый** или **Стандартный**, необходимо сначала снять существующие ограничения расходов, установленные для вашей подписки на веб-сайты Azure. Информацию о просмотре или изменении параметров подписки для веб-сайтов Microsoft Azure см. в разделе [Подписки Microsoft Azure][azuresubscriptions].

Содержание:

- [Масштабирование с переключением в режим плана "В общем доступе" или "Базовый"](#scalingsharedorbasic)
- [Масштабирование с переключением в режим плана "Стандартный"](#scalingstandard)
- [Масштабирование базы данных SQL Server, подключенной к веб-сайту](#ScalingSQLServer)
- [Возможности разработчика](#devfeatures)
- [Другие возможности](#OtherFeatures)

<a name="scalingsharedorbasic"></a>
<!-- ===================================== -->
## Масштабирование с переключением в режим плана "В общем доступе" или "Базовый"
<!-- ===================================== -->

1. Откройте в браузере [портал управления][portal].
	
2. На вкладке **Веб-сайты** выберите свой веб-сайт.
	
	![Selecting a website][SelectWebsite]
	
3. Выберите вкладку **Масштаб**.
	
	![The scale tab][SelectScaleTab]
	
4. В разделе **Режим плана размещения веб-сайтов** выберите либо **В ОБЩЕМ ДОСТУПЕ**, либо **БАЗОВЫЙ**. В приведенном примере изображения выбирается план "Базовый".
	
	![Choose Web Hosting Plan][ChooseWHP]
	
	Раздел **Сайты плана размещения веб-сайтов** содержит краткий список веб-сайтов текущего плана. Для всех сайтов текущего плана режим плана размещения веб-сайтов будет изменен на выбранный.
	
5. В разделе **Емкость** выберите **Размер экземпляра**. Доступны следующие варианты: **Малый**, **Средний** или **Крупный** Параметр размера экземпляра недоступен в режиме "В общем доступе". Дополнительную информацию об использовании размеров экземпляров см. в разделе [Размеры виртуальных машин и облачных служб в Microsoft Azure][vmsizes].
	
	![Instance size for Basic mode][ChooseBasicInstanceSize]
	
6. Используйте ползунок, чтобы выбрать нужное **Число экземпляров**.
	
	![Instance count for Basic mode][ChooseBasicInstanceCount]
	
7. В панели команд выберите **Сохранить**. 
	
	![Save button][SaveButton]
 	
	> [AZURE.NOTE] При необходимости значения параметров **План размещения веб-сайтов**, **Размер экземпляра** и **Число экземпляров** можно настроить и сохранить параметры по отдельности.
	
8. Сообщение подтверждения напоминает, что режим для веб-сайтов в этом же плане размещения веб-сайтов также изменится на новый. Выберите **Да** для выполнения изменений. 
	
	В приведенном примере режим плана был изменен на **Базовый**.
	
	![Plan change complete][BasicComplete]
	
<a name="scalingstandard"></a>
<!-- ================================= -->
## Масштабирование с переключением в режим плана "Стандартный"
<!-- ================================= -->

> [AZURE.NOTE] Перед переключением веб-сайта в режим "Стандартный" необходимо сначала снять существующие ограничения расходов, установленные для вашей подписки на веб-сайты Microsoft Azure. В противном случае веб-сайт может стать недоступным при достижении ограничений до истечения расчетного периода. Информацию о просмотре или изменении параметров подписки для веб-сайтов Microsoft Azure см. в разделе [Подписки Microsoft Azure][azuresubscriptions].

1. Для масштабирования с переключением на план "Стандартный" выполните те же начальные действия, что и при масштабировании с переключением на план "В общем доступе" или "Базовый", а затем выберите значение **Стандартный** для параметра **Режим плана размещения веб-сайтов**. 
	
	![Choose Standard Plan][ChooseStandard]
	
	Как и раньше, раздел **Сайты плана размещения веб-сайтов** содержит краткий список веб-сайтов текущего плана. В этом случае для всех веб-сайтов текущего плана режим будет изменен на "Стандартный".
	
2. Выбор значения **Стандартный** расширяет раздел **Емкость**, чтобы показать значения **Размер экземпляра** и **Число экземпляров**, также доступные в режиме "Базовый". Параметры **Изменить параметры масштабирования по расписанию** и **Масштабирование по метрике** доступны только в режиме "Стандартный".
	
	![Capacity section in Standard][CapacitySectionStandard]
	
3. Настройте **Размер экземпляра**. Доступны следующие варианты: **Малый**, **Средний** или **Крупный**
	
	![Choose instance size][ChooseInstanceSize]
	
	Дополнительную информацию об использовании размеров экземпляров см. в разделе [Размеры виртуальных машин и облачных служб в Microsoft Azure][vmsizes].
	
4. Если нужно автоматически выполнять масштабирование (Автомасштабирование) ресурсов в зависимости от времени суток и/или конкретных дат и конкретных времен, выберите значение **Настройка планируемого времени** для параметра **Изменить параметры масштабирования по расписанию**.
	
	![Set up schedule times][SetUpScheduleTimesButton]
	
5. Диалоговое окно **Настройка планируемого времени** содержит ряд полезных параметров конфигурации.
	
	![SetUpScheduleTimesDialog][SetUpScheduleTimesDialog]
	
6. В разделе **Повторяющиеся расписания** выберите **Различное масштабирование днем и ночью** и **Различное масштабирование в рабочий день и выходные** для масштабирования ресурсов на основе отдельных различных расписаний для дня и ночи и/или отдельных расписаний для будней и выходных.
	
	> [AZURE.NOTE] Для задач этой функции все выходные начинаются в конце дня пятницы (20:00 по умолчанию) и заканчивается в начале дня в понедельник (8:00 по умолчанию). Для профиля выходных дней используются те же времена начала и окончания дня, которые определены для параметра **Время**.
	
7. В разделе **Время** выберите время начала и окончания дня с получасовым шагом, а также часовой пояс. По умолчанию день начинается в 8:00 и заканчивается в 20:00. Для выбранного часового пояса учитывается летнее время. 
	
8. В разделе **Определенные даты** можно создать один или несколько именованных интервалов времени, для которых нужно масштабировать ресурсы. Например, может потребоваться предоставить дополнительные ресурсы для продаж или события запуска, когда возможны большие пики веб-трафика.
	
9. После настройки этих параметров нажмите кнопку **ОК**, чтобы закрыть диалоговое окно **Планируемое время**.
	
10.   Теперь поле **Изменить параметры масштабирования по расписанию** содержит настраиваемые расписания или события на основе сделанных изменений. Выберите для настройки одно из повторяющихся расписаний или конкретные даты. 
	
	![Edit scale settings for schedule][EditScaleSettingsForSchedule]
	
	Теперь можно использовать функции **Масштабирование по метрике** и **Число экземпляров**, чтобы точно настроить масштабирование ресурсов для каждого выбранного расписания. 
	
11.  Для динамического изменения числа экземпляров, используемых веб-сайтом при его скачивании, включите **Масштабирование по метрике**, выбрав **ЦП**.
	
	![Scale By Metric][ScaleByMetric]
	
	График показывает число экземпляров, которые использовались за последнюю неделю. Эту диаграмму можно использовать для мониторинга действий масштабирования.
	
12. **Масштабирование по метрике** изменяет **Число экземпляров**, чтобы можно было установить минимальное и максимальное число виртуальных машин, которое будет использоваться для автоматического масштабирования. В Azure установленные ограничения никогда не будут нарушены.
	
	![Instance count][InstanceCount]
	
13. **Масштабирование по метрике** также активирует параметр **Целевой ЦП**, позволяя задать целевой диапазон загрузки ЦП. Этот диапазон представляет среднюю загрузку ЦП для веб-сайта. Windows Azure будет добавлять или удалять стандартные экземпляры, чтобы удерживать веб-сайт в указанном диапазоне.
	
€
	
	**Примечание**. Если функция **Масштабирование по метрике** включена, Microsoft Azure каждые пять минут проверяет ЦП веб-сайта и добавляет экземпляры по мере необходимости. В случае низкой загрузки ЦП Microsoft Azure будет удалять экземпляры раз в два часа, чтобы гарантировать эффективность работы веб-сайта. Обычно правильным является установка минимального значения счетчика экземпляров равным 1. Однако в случае возможных пиков использования ресурсов на веб-сайте необходимо убедиться в наличии достаточного минимального количества экземпляров для надлежащей обработки нагрузки. Например, при появлении внезапного пика трафика в течение 5-минутного интервала перед проверкой загрузки ЦП в Microsoft Azure веб-сайт может перестать реагировать на запросы в это время. Если ожидаются неожиданные большие объемы трафика, увеличьте минимальное значение счетчика экземпляров, чтобы предвидеть эти всплески. 
	
14. Закончив изменения параметров в списке **Изменить параметры масштабирования по расписанию**, щелкните значок **Сохранить** на панели команд в нижней части страницы, чтобы сохранить сразу все настройки расписания (не понадобится сохранять каждое расписание по отдельности).

> [AZURE.NOTE] На [портале предварительной версии Azure](https://portal.azure.com/) можно масштабировать не только процент использования ЦП, но и такие дополнительные метрики, как "Процент использования памяти", "Длина дисковой очереди", "Длина очереди HTTP", "Скорость чтения с диска" и "Скорость записи на диск". Также можно создать одно или несколько правил масштабирования вверх или вниз, которые предоставят вам больше возможностей управления масштабированием. Более подробную информацию см. в статье [Масштабирование веб-сайта](http://azure.microsoft.com/ru-ru/documentation/articles/insights-how-to-scale/) в документации предварительной версии портала Azure.

<a name="ScalingSQLServer"></a>
##Масштабирование базы данных SQL Server, подключенной к веб-сайту	
При наличии одной или нескольких баз данных SQL Server, связанных с веб-сайтом (независимо от режима плана размещения веб-сайтов), они будут перечислены в разделе **Связанные ресурсы** в нижней части страницы "Масштабирование".

1. Для масштабирования одной из баз данных щелкните в разделе **Связанные ресурсы** ссылку **Управление масштабированием для этой базы данных** рядом с именем базы данных.
	
	![Linked database][LinkedResources]
	
2. Эта ссылка открывает вкладку "SQL Server" портала управления Azure, на которой можно настроить параметры **Выпуск** и **Максимальный размер** для базы данных:
	
	![Scale your SQL Server database][ScaleDatabase]
	
	Для параметра **Выпуск** выберите **BASIC**, **STANDARD** или **PREMIUM** в зависимости от требуемой емкости хранилища. Дополнительную информацию о последующем использовании выпусков **Web** и **BUSINESS** см. в разделе [Вопросы и ответы по остановке версий Web и Business](http://msdn.microsoft.com/library/azure/dn741330.aspx).
	
	Значение, выбранное для параметра **Максимальный размер**, задает верхний предел для базы данных. Затраты на базу данных основаны на объеме фактически хранимых данных, поэтому изменение свойства **Максимальный размер** само по себе не влияет на затраты на базу данных. Дополнительную информацию см. в разделе [Учетные записи и выставление счетов в базе данных SQL Microsoft Azure][SQLaccountsbilling].

<a name="devfeatures"></a>
## Возможности разработчика
В зависимости от режима плана размещения веб-сайтов доступны следующие возможности, ориентированные на разработчиков:

**Разрядность**

- Режимы планов "Базовый" и "Стандартный" поддерживают 32-разрядные и 64-разрядные приложения.
- Режимы планов "Бесплатный" и "Общий доступ" поддерживают только 32-разрядные приложения.

**Поддержка отладчика**

- Поддержка отладчика доступна в режиме плана размещения веб-сайтов "Бесплатный", "Общий доступ" и "Базовый" для 1 одновременного подключения на каждое приложение.
- В режиме плана размещения веб-сайтов "Стандартный" поддержка отладчика доступна для 5 одновременных подключений на каждое приложение.

<a name="OtherFeatures"></a>
## Другие возможности

**Мониторинг конечных веб-точек**

- Мониторинг конечных веб-точек доступен в режиме плана размещения веб-сайтов "Базовый" и "Стандартный". Дополнительную информацию о мониторинге веб-точек см. в статье [Мониторинг веб-сайтов](http://www.windowsazure.com/ru-ru/documentation/articles/web-sites-monitor/).

- Подробную информацию обо всех остальных возможностях планов размещения веб-сайтов, включая цены и возможности, представляющие интерес для всех пользователей (включая разработчиков), см. на странице [информации о ценах для веб-сайтов](http://www.windowsazure.com/ru-ru/pricing/details/web-sites/).

<a name="Next Steps"></a>	
## Дальнейшие действия

- Чтобы начать работу с Azure, см. раздел [Бесплатная пробная версия Microsoft Azure](http://azure.microsoft.com/ru-ru/pricing/free-trial/).

- Сведения о ценах, поддержке и соглашениях об уровне обслуживания см. по следующим ссылкам:
	
	[Информация о ценах - передача данных](http://www.windowsazure.com/ru-ru/pricing/details/data-transfers/)
	
	[Планы поддержки Microsoft Azure](http://www.windowsazure.com/ru-ru/support/plans/)
	
	[Соглашения об уровне обслуживания](http://www.windowsazure.com/ru-ru/support/legal/sla/)
	
	[Информация о ценах - база данных SQL](http://www.windowsazure.com/ru-ru/pricing/details/sql-database/)
	
	[Размеры виртуальных машин и облачных служб для Microsoft Azure][vmsizes]
	
	[Информация о ценах для веб-сайтов](http://www.windowsazure.com/ru-ru/pricing/details/web-sites/)
	
	[Информация о ценах для веб-сайтов - SSL-подключения](http://www.windowsazure.com/ru-ru/pricing/details/web-sites/#ssl-connections)

- Рекомендации по работе с веб-сайтами Azure, в том числе по созданию масштабируемой и устойчивой архитектуры, см. в статье [Рекомендации: веб-сайты Microsoft Azure](http://blogs.msdn.com/b/windowsazure/archive/2014/02/10/best-practices-windows-azure-websites-waws.aspx).

- Видео о масштабировании веб-сайтов Azure:
	
	[Когда масштабировать веб-сайты Azure, автор - Стефан Шаков (Stefan Schackow)](http://www.windowsazure.com/ru-ru/documentation/videos/azure-web-sites-free-vs-standard-scaling/)
	
	[Автоматическое масштабирование веб-сайтов Azure, ЦП или по расписанию, автор - Стефан Шаков (Stefan Schackow)](http://www.windowsazure.com/ru-ru/documentation/videos/auto-scaling-azure-web-sites/)

	[Как масштабируются веб-сайты Azure, автор - Стефан Шаков (Stefan Schackow)](http://www.windowsazure.com/ru-ru/documentation/videos/how-azure-web-sites-scale/)



<!-- LINKS -->
[vmsizes]:http://go.microsoft.com/fwlink/?LinkId=309169
[SQLaccountsbilling]:http://go.microsoft.com/fwlink/?LinkId=234930
[azuresubscriptions]:http://go.microsoft.com/fwlink/?LinkID=235288
[portal]: https://manage.windowsazure.com/

<!-- IMAGES -->
[SelectWebsite]: ./media/web-sites-scale/01SelectWebSite.png
[SelectScaleTab]: ./media/web-sites-scale/02SelectScaleTab.png

[ChooseWHP]: ./media/web-sites-scale/03aChooseWHP.png
[ChooseBasicInstanceSize]: ./media/web-sites-scale/03bChooseBasicInstanceSize.png
[ChooseBasicInstanceCount]: ./media/web-sites-scale/04ChooseBasicInstanceCount.png
[SaveButton]: ./media/web-sites-scale/05SaveButton.png
[BasicComplete]: ./media/web-sites-scale/06BasicComplete.png
[ChooseStandard]: ./media/web-sites-scale/07ChooseStandard.png
[CapacitySectionStandard]: ./media/web-sites-scale/08CapacitySectionStandard.png
[ChooseInstanceSize]: ./media/web-sites-scale/09ChooseInstanceSize.png
[SetUpScheduleTimesButton]: ./media/web-sites-scale/10SetUpScheduleTimesButton.png
[SetUpScheduleTimesDialog]: ./media/web-sites-scale/11SetUpScheduleTimesDialog.png
[EditScaleSettingsForSchedule]: ./media/web-sites-scale/12EditScaleSettingsForSchedule.png
[ScaleByMetric]: ./media/web-sites-scale/13ScaleByMetric.png
[InstanceCount]: ./media/web-sites-scale/14InstanceCount.png
[TargetCPU]: ./media/web-sites-scale/15TargetCPU.png
[LinkedResources]: ./media/web-sites-scale/16LinkedResources.png
[ScaleDatabase]: ./media/web-sites-scale/17ScaleDatabase.png


<!--HONumber=42-->
