<properties title="How to Scale Websites" pageTitle="How to Scale Websites" description="required" metaKeywords="scaling Azure websites" services="web-sites" solutions="web" documentationCenter="" authors="cephalin" manager="wpickett" editor="mollybos" videoId="" scriptId="" />

<tags ms.service="web-sites" ms.workload="web" ms.tgt_pltfrm="na" ms.devlang="na" ms.topic="article" ms.date="01/01/1900" ms.author="cephalin" />

# Масштабирование веб-сайтов

Для повышения производительности и пропускной способности веб-сайтов Microsoft Azure можно использовать портал управления Azure при выполнении масштабирования плана размещения веб-сайтов с "Бесплатный" до "В общем доступе", "Базовый" или "Стандартный".

Масштабирование веб-сайтов Azure включает в себя два действия: смена режима плана размещения веб-сайтов на более высокий уровень обслуживания и настройка определенных параметров после перехода на новый уровень. В данной статье рассматриваются оба этих действия. Более высокие уровни обслуживания, такие как режим "Стандартный", обеспечивают повышение надежности и гибкости при определении способа использования ресурсов в Azure.

Смена режима и их настройка легко выполняются на вкладке "Масштаб" портала управления. При необходимости можно выполнять масштабирование вверх или вниз. Выполнение этих изменений занимает несколько секунд, и они влияют на все веб-сайты используемого плана размещения. Они не требуют ни изменения кода, ни повторного развертывания приложений.

Более подробную информацию о планах размещения веб-сайтов см. в статьях [Что такое план размещения веб-сайтов?][Что такое план размещения веб-сайтов?] и [Детальный обзор планов размещения веб-сайтов Azure][Детальный обзор планов размещения веб-сайтов Azure]. Сведения о ценах и возможностях отдельных планов размещения веб-сайтов см. в статье [Сведения о ценах для веб-сайтов][Сведения о ценах для веб-сайтов].

> [WACOM.ПРИМЕЧАНИЕ] Прежде чем перевести веб-сайт с плана размещения веб-сайтов **Бесплатный** на план **Базовый** или **Стандартный**, необходимо сначала снять существующие ограничения расходов, установленные для вашей подписки на веб-сайты Azure. Сведения о просмотре или изменении параметров подписки для веб-сайтов Microsoft Azure см. в разделе [Подписки Microsoft Azure][Подписки Microsoft Azure].

Содержание:

-   [Масштабирование с переключением в режим плана "В общем доступе" или "Базовый"][Масштабирование с переключением в режим плана "В общем доступе" или "Базовый"]
-   [Масштабирование с переключением в режим плана "Стандартный"][Масштабирование с переключением в режим плана "Стандартный"]
-   [Масштабирование базы данных SQL Server, подключенной к веб-сайту][Масштабирование базы данных SQL Server, подключенной к веб-сайту]
-   [Возможности разработчика][Возможности разработчика]
-   [Другие возможности][Другие возможности]

<a name="scalingsharedorbasic"></a>
<!-- ===================================== -->

## Масштабирование с переключением в режим плана "В общем доступе" или "Базовый"

<!-- ===================================== -->

1.  Откройте в браузере [портал управления][портал управления]

2.  На вкладке **Веб-сайты** выберите свой веб-сайт.

    ![Выбор веб-сайта][Выбор веб-сайта]

3.  Щелкните вкладку **Масштаб**.

    ![Вкладка "Масштаб"][Вкладка "Масштаб"]

4.  В разделе **Режим плана размещения веб-сайтов** выберите либо **В ОБЩЕМ ДОСТУПЕ**, либо **БАЗОВЫЙ**. В приведенном примере изображения выбирается план "Базовый".

    ![Выбор плана размещения веб-сайтов][Выбор плана размещения веб-сайтов]

    Раздел **Сайты плана размещения веб-сайтов** содержит краткий список веб-сайтов текущего плана. Для всех сайтов текущего плана режим плана размещения веб-сайтов будет изменен на выбранный.

5.  В разделе **Емкость** выберите **Размер экземпляра**. Доступны следующие варианты: **Малый**, **Средний** или **Крупный** Параметр размера экземпляра недоступен в режиме "В общем доступе". Дополнительные сведения об использовании размеров экземпляров см. в разделе [Размеры виртуальных машин и облачных служб в Microsoft Azure][Размеры виртуальных машин и облачных служб в Microsoft Azure].

    ![Размер экземпляра для режима "Базовый"][Размер экземпляра для режима "Базовый"]

6.  Используйте ползунок, чтобы выбрать необходимое **Число экземпляров**.

    ![Число экземпляров для режима "Базовый"][Число экземпляров для режима "Базовый"]

7.  На панели команд выберите **Сохранить**.

    ![Кнопка сохранения][Кнопка сохранения]

    > [WACOM.ПРИМЕЧАНИЕ] При необходимости значения параметров **План размещения веб-сайтов**, **Размер экземпляра** и **Число экземпляров** можно настроить и сохранить параметры по отдельности.

8.  Сообщение подтверждения напоминает, что режим для веб-сайтов в этом же плане размещения веб-сайтов также изменится на новый. Выберите **Да** для выполнения изменений.

    В приведенном примере режим плана был изменен на **Базовый**.

    ![Выполнение изменения плана][Выполнение изменения плана]

<a name="scalingstandard"></a>
<!-- ================================= -->

## Масштабирование с переключением в режим плана "Стандартный"

<!-- ================================= -->

> [WACOM.ПРИМЕЧАНИЕ] Перед переключением веб-сайта в режим "Стандартный" необходимо сначала снять существующие ограничения расходов, установленные для вашей подписки на веб-сайты Microsoft Azure. В противном случае веб-сайт может стать недоступным при достижении ограничений до истечения расчетного периода. Сведения о просмотре или изменении параметров подписки для веб-сайтов Microsoft Azure см. в разделе [Подписки Microsoft Azure][Подписки Microsoft Azure].

1.  Для масштабирования с переключением на план "Стандартный" выполните те же начальные действия, что и при масштабировании с переключением на план "Общий доступ" или "Базовый", а затем выберите значение **Стандартный** для параметра **Режим плана размещения веб-сайтов**.

    ![Выбор плана "Стандартный"][Выбор плана "Стандартный"]

    Как и раньше, раздел **Сайты плана размещения веб-сайтов** содержит краткий список веб-сайтов текущего плана. В этом случае для всех веб-сайтов текущего плана режим будет изменен на "Стандартный".

2.  Выбор значения **Стандартный** расширяет раздел **Емкость** и отображает значения **Размер экземпляра** и **Число экземпляров**, также доступные в режиме "Базовый". Параметры **Изменить параметры масштабирования по расписанию** и **Масштабирование по метрике** доступны только в режиме "Стандартный".

    ![Раздел "Емкость" для режима "Стандартный"][Раздел "Емкость" для режима "Стандартный"]

3.  Настройте **Размер экземпляра**. Доступны следующие варианты: **Малый**, **Средний** или **Крупный**

    ![Выбор размера экземпляра][Выбор размера экземпляра]

    Дополнительные сведения об использовании размеров экземпляров см. в разделе [Размеры виртуальных машин и облачных служб в Microsoft Azure][Размеры виртуальных машин и облачных служб в Microsoft Azure].

4.  При необходимости выполнения автоматического масштабирования (автомасштабирования) ресурсов в зависимости от времени суток, дня недели и/или конкретной даты и конкретного времени выберите значение **Настройка планируемого времени** для параметра **Изменить параметры масштабирования по расписанию**.

    ![Настройка планируемого времени][Настройка планируемого времени]

5.  Диалоговое окно **Настройка планируемого времени** содержит ряд полезных параметров конфигурации.

    ![SetUpScheduleTimesDialog][SetUpScheduleTimesDialog]

6.  В разделе **Регулярные расписания** выберите **Различное масштабирование днем и ночью** и **Различное масштабирование в рабочий день и выходные** для масштабирования ресурсов на основе отдельных различных расписаний для дня и ночи и/или отдельных расписаний для будней и выходных.

    > [WACOM.ПРИМЕЧАНИЯ] Для данной функции все выходные начинаются в конце дня пятницы (20:00 по умолчанию) и заканчиваются в начале дня в понедельник (8:00 по умолчанию). Для профиля выходных дней используются те же времена начала и окончания дня, которые определены для параметра **Время**.

7.  В разделе **Время** выберите время начала и окончания дня с получасовым шагом, а также часовой пояс. По умолчанию день начинается в 8:00 и заканчивается в 20:00. Для выбранного часового пояса учитывается летнее время.

8.  В разделе **Определенные даты** можно создать один или несколько именованных интервалов времени, для которых нужно масштабировать ресурсы. Например, может потребоваться предоставить дополнительные ресурсы для продаж или события запуска, когда возможны большие пики веб-трафика.

9.  После определения этих параметров нажмите кнопку **ОК**, чтобы закрыть диалоговое окно **Планируемое время**.

10. Теперь поле **Изменить параметры масштабирования по расписанию** содержит настраиваемые расписания или события на основе сделанных изменений. Выберите для настройки одно из повторяющихся расписаний или конкретные даты.

    ![Изменение параметров масштабирования по расписанию][Изменение параметров масштабирования по расписанию]

    Теперь можно использовать функции **Масштабирование по метрике** и **Число экземпляров**, чтобы точно настроить масштабирование ресурсов для каждого выбранного расписания.

11. Для динамического изменения числа экземпляров, используемых веб-сайтом при его загрузке, включите **Масштабирование по метрике**, выбрав **ЦП**.

    ![Масштабирование по метрике][Масштабирование по метрике]

    График показывает число экземпляров, которые использовались за последнюю неделю. Эту диаграмму можно использовать для мониторинга действий масштабирования.

12. **Масштабирование по метрике** изменяет **Число экземпляров**, чтобы можно было установить минимальное и максимальное число виртуальных машин, которое будет использоваться для автоматического масштабирования. В Azure установленные ограничения никогда не будут нарушены.

    ![Число экземпляров][Число экземпляров]

13. **Масштабирование по метрике** также активирует параметр **Целевой ЦП**, позволяя задать целевой диапазон загрузки ЦП. Этот диапазон представляет среднюю загрузку ЦП для веб-сайта. Windows Azure будет добавлять или удалять стандартные экземпляры, чтобы удерживать веб-сайт в указанном диапазоне.

    ![Целевой ЦП][Целевой ЦП]

    **Примечание**. Если функция **Масштабирование по метрике** включена, Microsoft Azure каждые пять минут проверяет ЦП веб-сайта и добавляет экземпляры по мере необходимости. В случае низкой загрузки ЦП Microsoft Azure будет удалять экземпляры раз в два часа, чтобы гарантировать эффективность работы веб-сайта. Обычно правильным является установка минимального значения счетчика экземпляров равным 1. Однако в случае возможных пиков использования ресурсов на веб-сайте необходимо убедиться в наличии достаточного минимального количества экземпляров для надлежащей обработки нагрузки. Например, при появлении внезапного пика трафика в течение 5-минутного интервала перед проверкой загрузки ЦП в Microsoft Azure веб-сайт может перестать реагировать на запросы в это время. Если ожидаются неожиданные большие объемы трафика, увеличьте минимальное значение счетчика экземпляров, чтобы предвидеть эти всплески.

14. По окончании изменения параметров в списке **Изменить параметры масштабирования по расписанию** нажмите значок **Сохранить** на панели команд в нижней части страницы, чтобы сохранить сразу все настройки расписания (вам не понадобится сохранять каждое расписание по отдельности).

> [WACOM.ПРИМЕЧАНИЕ] На [портале предварительной версии Azure][портале предварительной версии Azure] можно масштабировать не только процент использования ЦП, но и такие дополнительные метрики, как "Процент использования памяти", "Длина дисковой очереди", "Длина очереди HTTP", "Скорость чтения с диска" и "Скорость записи на диск". Также можно создать одно или несколько правил масштабирования вверх или вниз, которые предоставят вам больше возможностей управления масштабированием. Более подробную информацию см. в статье [Масштабирование веб-сайта][Масштабирование веб-сайта] в документации предварительной версии портала Azure.

<a name="ScalingSQLServer"></a>

## Масштабирование базы данных SQL Server, подключенной к веб-сайту

При наличии одной или нескольких баз данных SQL Server, связанных с веб-сайтом (независимо от режима плана размещения веб-сайтов), они будут перечислены в разделе **Связанные ресурсы** в нижней части страницы "Масштабирование".

1.  Для масштабирования одной из баз данных перейдите в разделе **Связанные ресурсы** по ссылке **Управление масштабированием для этой базы данных** рядом с именем базы данных.

    ![Связанная база данных][Связанная база данных]

2.  Эта ссылка открывает вкладку "SQL Server" портала управления Azure, на которой можно настроить параметры **Выпуск** и **Максимальный размер** для базы данных:

    ![Масштабирование сервера базы данных SQL Server.][Масштабирование сервера базы данных SQL Server.]

    Для параметра **Выпуск** выберите **Web** или **Business** в зависимости от требуемой емкости хранилища. Для выпуска **Web** предусмотрен диапазон меньших емкостей, а для выпуска **Business** — диапазон больших емкостей.

    Значение, выбранное для параметра **Максимальный размер**, задает верхний предел для базы данных. Затраты на базу данных основаны на объеме фактически хранимых данных, поэтому изменение свойства **Максимальный размер** само по себе не влияет на затраты на базу данных. Дополнительные сведения см. в разделе [Учетные записи и выставление счетов в базе данных SQL Microsoft Azure][Учетные записи и выставление счетов в базе данных SQL Microsoft Azure].

<a name="devfeatures"></a>

## Возможности разработчика

В зависимости от режима плана размещения веб-сайтов доступны следующие возможности, ориентированные на разработчиков:

**Разрядность**

-   Режимы планов "Базовый" и "Стандартный" поддерживают 32-разрядные и 64-разрядные приложения.
-   Режимы планов "Бесплатный" и "Общий доступ" поддерживают только 32-разрядные приложения.

**Поддержка отладчика**

-   Поддержка отладчика доступна в режиме плана размещения веб-сайтов "Бесплатный", "Общий доступ" и "Базовый" для 1 одновременного подключения на каждое приложение.
-   В режиме плана размещения веб-сайтов "Стандартный" поддержка отладчика доступна для 5 одновременных подключений на каждое приложение.

<a name="OtherFeatures"></a>

## Другие возможности

**Мониторинг конечных веб-точек**

-   Мониторинг конечных веб-точек доступен в режиме плана размещения веб-сайтов "Базовый" и "Стандартный". Дополнительные сведения о мониторинге веб-точек см. в статье [Мониторинг веб-сайтов][Мониторинг веб-сайтов].

-   Подробные сведения обо всех остальных возможностях планов размещения веб-сайтов, включая цены и возможности, представляющие интерес для всех пользователей (включая разработчиков), см. в статье [Сведения о ценах для веб-сайтов][Сведения о ценах для веб-сайтов].

<a name="Next Steps"></a>

## Дальнейшие действия

-   Чтобы начать работу с Azure, см. раздел [Бесплатная пробная версия Microsoft Azure][Бесплатная пробная версия Microsoft Azure].

-   Сведения о ценах, поддержке и соглашениях об уровне обслуживания см. по следующим ссылкам:

    [Сведения о ценах — передача данных][Сведения о ценах — передача данных]

    [Планы поддержки Microsoft Azure][Планы поддержки Microsoft Azure]

    [Соглашения об уровне обслуживания][Соглашения об уровне обслуживания]

    [Сведения о ценах — база данных SQL][Сведения о ценах — база данных SQL]

    [Размеры виртуальных машин и облачных служб для Microsoft Azure][Размеры виртуальных машин и облачных служб в Microsoft Azure]

    [Сведения о ценах для веб-сайтов][Сведения о ценах для веб-сайтов]

    [Сведения о ценах для веб-сайтов — SSL-подключения][Сведения о ценах для веб-сайтов — SSL-подключения]

-   Рекомендации по работе с веб-сайтами Azure, в том числе по созданию масштабируемой и устойчивой архитектуры, см. в статье [Рекомендации: веб-сайты Windows Azure][Рекомендации: веб-сайты Windows Azure].

-   Видео о масштабировании веб-сайтов Azure:

    [Когда масштабировать веб-сайты Azure, автор — Стефан Щаков (Stefan Schackow)][Когда масштабировать веб-сайты Azure, автор — Стефан Щаков (Stefan Schackow)]

    [Автоматическое масштабирование веб-сайтов Azure, ЦП или по расписанию, автор — Стефан Щаков (Stefan Schackow)][Автоматическое масштабирование веб-сайтов Azure, ЦП или по расписанию, автор — Стефан Щаков (Stefan Schackow)]

    [Как масштабируются веб-сайты Azure, автор — Стефан Щаков (Stefan Schackow)][Как масштабируются веб-сайты Azure, автор — Стефан Щаков (Stefan Schackow)]



  [Что такое план размещения веб-сайтов?]: http://azure.microsoft.com/ru-ru/documentation/articles/web-sites-web-hosting-plan-overview/
  [Детальный обзор планов размещения веб-сайтов Azure]: http://www.azure.microsoft.com/ru-ru/Documentation/Articles/azure-web-sites-web-hosting-plans-in-depth-overview/
  [Сведения о ценах для веб-сайтов]: http://www.windowsazure.com/ru-ru/pricing/details/web-sites/
  [Подписки Microsoft Azure]: http://go.microsoft.com/fwlink/?LinkID=235288
  [Масштабирование с переключением в режим плана "В общем доступе" или "Базовый"]: #scalingsharedorbasic
  [Масштабирование с переключением в режим плана "Стандартный"]: #scalingstandard
  [Масштабирование базы данных SQL Server, подключенной к веб-сайту]: #ScalingSQLServer
  [Возможности разработчика]: #devfeatures
  [Другие возможности]: #OtherFeatures
  [портал управления]: https://manage.windowsazure.com/
  [Выбор веб-сайта]: ./media/web-sites-scale/01SelectWebSite.png
  [Вкладка "Масштаб"]: ./media/web-sites-scale/02SelectScaleTab.png
  [Выбор плана размещения веб-сайтов]: ./media/web-sites-scale/03aChooseWHP.png
  [Размеры виртуальных машин и облачных служб в Microsoft Azure]: http://go.microsoft.com/fwlink/?LinkId=309169
  [Размер экземпляра для режима "Базовый"]: ./media/web-sites-scale/03bChooseBasicInstanceSize.png
  [Число экземпляров для режима "Базовый"]: ./media/web-sites-scale/04ChooseBasicInstanceCount.png
  [Кнопка сохранения]: ./media/web-sites-scale/05SaveButton.png
  [Выполнение изменения плана]: ./media/web-sites-scale/06BasicComplete.png
  [Выбор плана "Стандартный"]: ./media/web-sites-scale/07ChooseStandard.png
  [Раздел "Емкость" для режима "Стандартный"]: ./media/web-sites-scale/08CapacitySectionStandard.png
  [Выбор размера экземпляра]: ./media/web-sites-scale/09ChooseInstanceSize.png
  [Настройка планируемого времени]: ./media/web-sites-scale/10SetUpScheduleTimesButton.png
  [SetUpScheduleTimesDialog]: ./media/web-sites-scale/11SetUpScheduleTimesDialog.png
  [Изменение параметров масштабирования по расписанию]: ./media/web-sites-scale/12EditScaleSettingsForSchedule.png
  [Масштабирование по метрике]: ./media/web-sites-scale/13ScaleByMetric.png
  [Число экземпляров]: ./media/web-sites-scale/14InstanceCount.png
  [Целевой ЦП]: ./media/web-sites-scale/15TargetCPU.png
  [портале предварительной версии Azure]: https://portal.azure.com/
  [Масштабирование веб-сайта]: http://azure.microsoft.com/ru-ru/documentation/articles/insights-how-to-scale/
  [Связанная база данных]: ./media/web-sites-scale/16LinkedResources.png
  [Масштабирование сервера базы данных SQL Server.]: ./media/web-sites-scale/17ScaleDatabase.png
  [Учетные записи и выставление счетов в базе данных SQL Microsoft Azure]: http://go.microsoft.com/fwlink/?LinkId=234930
  [Мониторинг веб-сайтов]: http://www.windowsazure.com/ru-ru/documentation/articles/web-sites-monitor/
  [Бесплатная пробная версия Microsoft Azure]: http://azure.microsoft.com/ru-ru/pricing/free-trial/
  [Сведения о ценах — передача данных]: http://www.windowsazure.com/ru-ru/pricing/details/data-transfers/
  [Планы поддержки Microsoft Azure]: http://www.windowsazure.com/ru-ru/support/plans/
  [Соглашения об уровне обслуживания]: http://www.windowsazure.com/ru-ru/support/legal/sla/
  [Сведения о ценах — база данных SQL]: http://www.windowsazure.com/ru-ru/pricing/details/sql-database/
  [Сведения о ценах для веб-сайтов — SSL-подключения]: http://www.windowsazure.com/ru-ru/pricing/details/web-sites/#ssl-connections
  [Рекомендации: веб-сайты Windows Azure]: http://blogs.msdn.com/b/windowsazure/archive/2014/02/10/best-practices-windows-azure-websites-waws.aspx
  [Когда масштабировать веб-сайты Azure, автор — Стефан Щаков (Stefan Schackow)]: http://www.windowsazure.com/ru-ru/documentation/videos/azure-web-sites-free-vs-standard-scaling/
  [Автоматическое масштабирование веб-сайтов Azure, ЦП или по расписанию, автор — Стефан Щаков (Stefan Schackow)]: http://www.windowsazure.com/ru-ru/documentation/videos/auto-scaling-azure-web-sites/
  [Как масштабируются веб-сайты Azure, автор — Стефан Щаков (Stefan Schackow)]: http://www.windowsazure.com/ru-ru/documentation/videos/how-azure-web-sites-scale/
