<properties title="Introduction to Azure Data Factory" pageTitle="Введение в фабрику данных Azure" description="Узнайте, как использовать службу фабрики данных Azure для формирования обработки данных, хранилища данных и служб перемещения данных, чтобы создавать конвейеры, производящие надежные данные." metaKeywords=""  services="data-factory" solutions=""  documentationCenter="" authors="spelluru" manager="jhubbard" editor="monicar" />

<tags ms.service="data-factory" ms.workload="data-services" ms.tgt_pltfrm="na" ms.devlang="na" ms.topic="article" ms.date="11/13/2014" ms.author="spelluru" />

# Введение в службу фабрики данных Azure
**Фабрика данных Azure** является полностью управляемой службой для создания хранилищ данных, служб обработки и перемещения данных в упрощенные, масштабируемые и надежные конвейеры производства данных.  Разработчики могут использовать фабрику данных для преобразования частично структурированных, неструктурированных и структурированных данных из локальных и облачных источников в достоверную информацию. Разработчики создают управляемые данными рабочие процессы (конвейеры), которые соединяют, накапливают и преобразовывают данные полученные из локальных, облачных и Интернет-служб, а также настраивают сложную обработку данных с помощью простых сценариев JSON. Служба фабрики данных Azure обеспечивает эффективный мониторинг и управление этими конвейерами благодаря широким визуальным возможностям, предоставляемым на портале предварительной версии Azure. Создаваемая конвейерами информация легко находит применение в инструментах бизнес-аналитики и других приложениях для надежного решения ключевых задач бизнеса и принятия решений.

В этой статье содержится обзор службы фабрики данных Azure, тех преимуществ, которые она обеспечивает, и сценариев, которые поддерживает. 

##Общие сведения о фабрике данных Azure
Обычно проекты интеграции данных развивались вокруг создания процессов извлечения, преобразования и загрузки (Extract-Transform-Load - ETL). То есть данные извлекаются из различных источников данных внутри организации, преобразовываются для соответствия целевой схеме корпоративного хранилища данных (Enterprise Data Warehouse - EDW) и загружаются в EDW, как показано на следующем рисунке. В последствии EDW используется в качестве единого источника истины для решений бизнес-аналитики. 

![Traditional ETL][image-data-factory-introduction-traditional-ETL]

Современный ландшафт корпоративных данных продолжает расти экспоненциально в объеме, разнообразии и сложности, как показано на следующем рисунке.  Он более разнообразный, чем когда-либо, так как присутствуют локальные и облачные данные различных форм и скоростей.  Обработка данных должна выполняться между разными географическими расположениями и включает в себя сочетание программного обеспечения с открытым исходным кодом, коммерческих решений и пользовательских служб обработки; это ресурсоемкие процессы, которые сложно интегрировать и обслуживать.  Гибкость, необходимая для адаптации к современному меняющемуся ландшафту данных большого размера, - это возможность слияния традиционных хранилищ EDW с потребностями современных систем производства информации.  Служба фабрики данных Azure - это сложная платформа для организации параллельной работы с традиционными EDW и с меняющейся средой данных, она предоставляет предприятиям возможность применять все доступные им данные для принятия решений на основе этих данных.

![Todays Diverse Processing Landscape][image-data-factory-introduction-todays-diverse-processing-landspace]


Служба **фабрики данных Azure** дает возможность предприятиям использовать это разнообразие, предоставляя платформу для **организации процессов обработки, хранения и перемещения данных в конвейеры производства информации, а также для управления массивами достоверных данных.**.

Вот какие возможности дает вам служба фабрики данных Azure:

- **Комфортная работа с различными системами хранения и обработки данных.** 
Фабрика данных позволяет использовать данные там, где они хранятся, а также создавать службы для хранения, обработки и перемещения данных.  Например, вы можете составить конвейеры производства информации для обработки локальных данных, допустим, базы данных SQL Server, совместно с облачными данными, допустим, базы данных SQL Azure, BLOB-объектов, таблиц.  
- **Преобразование данных в достоверную информацию.** 
Чтобы объединение и формирование сложных данных было выполнено корректно, может потребоваться более одной попытки, а изменение моделей данных может быть дорогостоящим и длительным.  Используя фабрику данных, вы сможете сосредоточиться на аналитическом преобразовании, а служба позаботится об организации всех коммуникаций.  Фабрика данных поддерживает обработку Hive, Pig и C#, а также ключевые функции обработки, такие как автоматическое управление кластером Hadoop (HDInsight), повторные попытки при временных ошибках, настраиваемые политики времени ожидания и предупреждения.  
- **Мониторинг конвейеров данных в одном окне.** 
При наличии разнообразных данных важно иметь надежный и завершенный обзор служб хранения, обработки и перемещения данных.  Фабрика данных помогает быстро оценить работоспособность конвейера данных от начала до конца, выявить проблемы и предпринять корректирующие действия при необходимости. Отслеживайте визуально журнал преобразований данных и связи между данными во всех ваших источниках. Просматривайте полную историю выполнения заданий, работоспособности системы и зависимостей, используя единую панель мониторинга.
- **Получите исчерпывающие сведения из преобразованных данных.**
Приспосабливайтесь к постоянно изменяющимся запросам к вашей организации и оставайтесь в лидерах, благодаря высокой готовности к действию вашего производства данных.  Расширяйте свои возможности оптимального управления бизнесом, имея под рукой своевременную и достоверную информацию. Используйте конвейеры данных для доставки преобразованных данных из облака в локальные источники, такие как SQL Server, или сохраняйте их в своих облачных хранилищах для использования с инструментами бизнес-аналитики и другими приложениями.

Сегодня чтобы воспользоваться преимуществами фабрики данных, разработчики напрямую взаимодействуют с отдельными конвейерами, службами хранилища и вычислительными службами.  По мере развития службы фабрики данных мы представим дополнительные службы хранилища и обработки данных, а также новые механизмы группировки вычислительных служб, служб хранилища и конвейеров данных в "центры".  В рамках данного введения приведено краткое описание центров, которые представлены в службах в виде развивающейся концепции и прототипа для будущих версий.

Центр фабрики данных Azure - это контейнер для служб хранилища и вычислительных служб (оба типа называются связанными службами), а также для конвейеров данных, которые используют эти ресурсы и выполняются на них. Контейнер центра позволяет разделить фабрику данных на логические или доменные группы.  Например, предприятие может иметь центр "West US Azure Hub", управляющий всеми связанными службами и конвейерами, сконцентрированными в центре обработки данных в западной части США, а может иметь центр "Sales EDW Hub", управляющий всеми связанными службами и конвейерами, задействованными в заполнении и обработке данных для хранилища EDW продаж.  Важной характеристикой центров является то, что один конвейер запускается в одном центре. Это означает, что при определении конвейера все связанные службы, на которые ссылаются таблицы или действия внутри данного конвейера, должны иметь такое же имя центра, как и сам конвейер.

Центры помогают инкапсулировать хранилище и вычисления таким образом, что конвейеры могут ссылаться только на центр, а не на отдельные службы и таблицы, которые он использует. Затем центр может использовать политики, чтобы решить, где должен запускаться конвейер. Это будет иметь несколько важных факторов влияния. Один заключается в том, что обеспечивается более простое масштабирование, так как больше связанных служб можно добавлять в центр, и конвейеры могут балансировать нагрузку между этими новыми связанными службами. Второй заключается в том, что определения конвейеров будут повторно использоваться в разных центрах.

## Сценарии
Существуют разнообразные сценарии для конвейеров данных, охватывающих локальные системы, облачные системы, системы SaaS, а также потоковое и пакетное производство данных.  В этом разделе описывается несколько примеров сценариев, которые фабрика данных Azure поддерживает в настоящий момент и которые будут развиваться как сценарии с использованием центра.

###Сценарий № 1: источники данных для центра данных
![Source the Data Hub][image-data-factory-introduction-secenario1-source-datahub]

Предприятия имеют данные различных типов, расположенные в различных источниках.  Первым этапом в создании системы производства информации является подключение ко всем необходимым источникам данных и службам обработки, таким как службы SaaS, файловые ресурсы с общим доступом, FTP и веб-службы, и переместить данные, необходимые для последующей обработки.

Не имея фабрики данных предприятия вынуждены создавать компоненты для перемещения пользовательских данных или писать пользовательские службы для интеграции этих источников данных и обработки.  Такие системы дорого стоят и создают трудности при интеграции и поддержке; им часто не хватает мониторинга и оповещений корпоративного уровня, а также элементов управления, которые может предложить полностью управляемая служба.
  
При использовании фабрики данных Azure службы хранилища и обработки собираются в контейнер центра, который облегчает и оптимизирует действия вычислений и хранилища, обеспечивает унифицированное управление потреблением ресурсов и предоставляет службы для перемещения данных в случае необходимости.

###Сценарий № 2: ввод в эксплуатацию производства данных

Сценарии ввода в эксплуатацию являются следующим логическим шагом после сценариев подключения источников данных. Когда данные уже находятся в центре, вы захотите создать и ввести в эксплуатацию конвейеры данных, чтобы в соответствии с поддерживаемым и управляемым расписанием надежно производить преобразованные данные для насыщения рабочих сред доверенными данными.  Преобразование данных в фабрике Azure данных выполняется с помощью Hive, Pig и пользовательской обработки C#, работающих на Hadoop (Azure HDInsight).  Эти преобразования можно использовать для очистки данных, создания масок полей важных данных, а также для выполнения других операций над данными с широким разнообразием сложных методов.  Как правило, их практическое применение достигается с помощью сложной инфраструктуры с пользовательскими службами, и создает множество трудностей при реализации, управлении, масштабировании, поиске неисправностей, управлении версиями этих решений.
  
Фабрика данных как полностью управляемая служба позволяет пользователям вводить эти конвейеры в эксплуатацию, определяя их с помощью одноразовых или сложных повторяющихся расписаний, при этом, оркестрация выполняется непосредственно службой фабрики данных.  При использовании центров управление кластерами для всего объема данных и обработка в пределах центра осуществляется от имени пользователя без его участия, поэтому пользователи могут сконцентрироваться на аналитике преобразований вместо управления инфраструктурой.  Фабрика данных Azure устраняет трудности работы с неустойчивыми настраиваемыми службами и позволяет предприятиям производить достоверную информацию с надежностью и воспроизводимостью.


###Сценарий № 3:  интеграция производства информации с обнаружением данных
Хоть традиционные технологии и подходы к бизнес-аналитике предоставляют "авторитетный источник истины", но практически всегда имеют серьезный побочный эффект: постоянная очередь из запросов из-за тщательного контроля обработки запросов на изменение.  Чтобы адаптироваться к быстро меняющимся запросам бизнеса, предприятиям необходимо быть более гибкими, что позволит им подключать свои системы производства информации к системам потребления информации.  Фабрика данных Azure помогает решить задачу подключения этих систем к упрощенным конвейерам данных для производства информации, а также задачу потребления информации, делая актуальные достоверные данные доступными в легких для использования формах.
  
Фабрика данных Azure поддерживает следующие возможности, чтобы включить простое потребление производимых данных:

- Простое перемещение (одноразовое или по расписанию) производимых активов данных в реляционные киоски данных для использования с помощью существующих инструментов бизнес-аналитики (Excel, Tableau и др.).
- Использование активов данных, производимых фабрикой данных, непосредственно с помощью Power Query в Excel.

Подробнее об использовании данных с помощью Power Query см. в следующих разделах: 

- [Power Query: подключение к хранилищу таблиц Microsoft Azure] [Power-Query-Azure-Table]
- [Power Query: подключение к хранилищу BLOB-объектов Microsoft Azure] [Power-Query-Azure-Blob]
- [Power Query: подключение к базе данных SQL Microsoft Azure] [Power-Query-Azure-SQL]
- [Power Query: подключение к локальному серверу Microsoft SQL Server][Power-Query-OnPrem-SQL] 

## Модель приложения
На следующей схеме показана модель приложения, поддерживаемая фабрикой данных Azure.

![Application Model][image-data-factory-application-model]

Существует три этапа производства информации в фабрике данных Azure.


- **Подключение и сбор**. На этом этапе данные из различных источников импортируются в центры данных.
- **Преобразование и обогащение**. На этом этапе выполняется обработка собранных данных.
- **Публикация**. На этом этапе данные публикуются, чтобы их можно было использовать в инструментах бизнес-аналитики и других приложениях.

Фабрики данных дают разработчикам возможность создавать **конвейеры**, представляющие собой группы действий **перемещения и/или обработки данных**, которые принимают один или несколько входных **наборов данных** и производят один или несколько выходных наборов данных.  Конвейеры могут запускаться один раз или по гибкому диапазону расписаний (ежечасно, ежедневно, еженедельно и др.).  **Набор данных** - это именованное представление данных. Диапазон описываемых данных может быть от простых байтов, частично структурированных данных, таких как CSV-файлы, и вплоть до **таблиц** или **моделей**.

**Конвейеры**, состоящие из **действий** перемещения данных (например, действий копирования) часто используются для импорта или экспорта данных из всех **источников данных** (базы данных, файлы, службы SaaS и др.), используемых организацией в **центре данных**.
    
Когда данные находятся в **центре**, **конвейеры**, размещенные в вычислительных службах центра, используются для преобразования данных в подходящую для использования форму (в инструментах бизнес-аналитики, приложениях, заказчиками и т.д.).  
  
Наконец, **конвейеры** могут соединяться в цепочку (как показано на схеме) так, чтобы выходные **наборы данных** одного конвейера были входными наборами другого.  Это позволяет разложить сложные потоки данных на **конвейеры**, которые выполняются внутри центра данных или охватывают несколько центров.  Такое использование **конвейеров** предоставляет организациям строительные блоки для создания лучших в своем роде локальных и облачных служб, а также служб SaaS (Software-as-a-Service - программное обеспечение как услуга) - и все это через объектив единой и легко управляемой фабрики данных. 


##Терминология
В этом разделе вы познакомитесь с терминологией, связанной с фабрикой данных Azure.

### Фабрика данных

**Фабрика данных Azure** является полностью управляемой службой для создания хранилищ данных, служб обработки и перемещения данных в упрощенные, масштабируемые и надежные конвейеры производства данных.

Служба фабрики данных использует, производит, управляет и публикует **наборы данных**. Подписка Azure может иметь один или несколько экземпляров фабрики данных Azure. Фабрику данных Azure можно связать с одной или несколькими службами хранилища или вычислительными службами (которые называются связанными службами).
 
Фабрика данных Azure может иметь один или несколько конвейеров, которые обрабатывают данные в связанных хранилищах, используя связанные вычислительные службы, такие как Azure HDInsight. Фабрика данных Azure не содержит внутри себя данные. Данные хранятся за пределами фабрики данных - в существующей системе хранения пользователя.


### Связанные службы
Связанная служба - это служба, которая связана с фабрикой данных Azure. Вот какие службы могут быть связанными:


- Хранилище данных, такое как служба хранилища Azure, база данных SQL Azure и локальная база данных SQL Server
- Вычислительная служба, такая как Azure HDInsight.

Хранилище данных - это контейнер данных или наборов данных, а Azure HDInsight - это единственная на данный момент поддерживаемая вычислительная служба. Сначала необходимо создать связанную службу, указывающую на хранилище данных, а затем определить наборы данных для представления данных из этого хранилища данных. 

### Набор данных
Именованное представление данных. Диапазон описываемых данных может быть от простых байт, частично структурированных данных, таких как CSV-файлы, и вплоть до реляционных таблиц, или даже моделей. **Таблица** является набором данных с определенной схемой и прямоугольной формой.

###Конвейер
**Конвейер** в фабрике данных Azure обрабатывает данные в связанной службе хранилища с помощью связанных вычислительных служб. Он содержит последовательность действий, где каждое действие выполняет определенную операцию обработки. Например, действие копирования копирует данные из исходного хранилища в целевое хранилище, а действия Hive/Pig используют кластер Azure HDInsight для обработки данных с помощью запросов Hive или сценариев Pig.

Вот какие типичные шаги необходимо выполнить для создания экземпляра фабрики данных Azure:

1. Создать фабрику данных
2. Создать связанную службу для каждого хранилища данных или каждой вычислительной службы
3. Создать входные и выходные наборы данных
4. Создать конвейер 

###Действие
Шаг обработки данных в конвейере, который принимает один или несколько входных наборов данных и создает один или несколько выходных наборов данных.  Действия выполняются в среде выполнения (например, в кластере Azure HDInsight) и считывают или записывают данные в хранилище данных, связанное с экземпляром фабрики данных Azure.
 
###Центр данных
Центр данных Azure - это контейнер для хранения данных и вычислительных служб. Например, кластер Hadoop с HDFS в качестве хранилища и Hive/Pig в качестве вычислений (обработки) - это центр данных. Подобным образом корпоративное хранилище данных (EDW) можно смоделировать как центр данных (база данных - как хранилище, а хранимые процедуры и/или инструмент ETL (извлечение, преобразование и загрузка) - как вычислительные службы).  Конвейеры используют хранилища данных и запускаются на ресурсах вычислений в центре данных. В данный момент поддерживается только центр HDInsight.

Центр данных позволяет разделить фабрику данных на логические или доменные группы. Например, группа "West US Azure Hub" управляет всеми связанными службами (хранилища данных и вычислительными) и конвейерами, сконцентрированными в западной части США; а группа "Sales EDW Hub" управляет всеми связанными службами и конвейерами, задействованными в заполнении и обработке данных для корпоративного хранилища данных продаж.

Важной характеристикой центра является то, что один конвейер запускается в одном центре. Это означает, что при определении конвейера все связанные службы, на которые ссылаются таблицы или действия внутри данного конвейера, должны иметь такое же имя центра, как и сам конвейер. Если свойство HubName для связанной службы не указано, то такая связанная служба помещается в центр "Default".

###Срез
Таблица в фабрике данных Azure состоит из срезов, сделанных по оси времени. Ширина среза определяется расписанием - ежечасно или ежедневно. Если в расписании указано "ежечасно", то срез производится каждый час с временем начала и временем окончания конвейера и т.д.  

Срезы позволяют ИТ-специалистам работать с подмножеством данных для определенного временного окна (например: срез, который создается за время (час)). с 13:00 до 14:00). Они также могут просматривать все нисходящие срезы данных для заданного интервала времени и повторно производить срез в случае сбоя.

Запуск - это единица обработки среза. Может быть один или несколько запусков для среза, если выполняются повторные попытки, или вы повторно производите срез в случае сбоя. Срез идентифицируется по времени начала. 

###Шлюз управления данными
Шлюз управления данными Microsoft Data Management Gateway - это программное обеспечение, которое подключает локальные источники данных к облачным службам для использования. Вам необходимо установить по крайней мере один шлюз в своей корпоративной среде и зарегистрировать его на портале фабрики данных Azure, прежде чем добавлять локальные источники данных как связанные службы.


##Дальнейшие действия

1. [Приступая к работе с фабрикой данных][datafactory-getstarted]. Эта статья содержит пошаговый учебник с примером создания фабрики данных Azure, которая копирует данные из большого двоичного объекта Azure в базу данных SQL Azure.
2. [Учебник. Перемещение и обработка файлов журнала с помощью фабрики данных][adf-tutorial] В этой статье на **пошаговом примере** показано, как при помощи фабрики данных Azure реализовать **реалистичный сценарий** преобразования данных файлов журнала в подробные сведения.

[Power-Query-Azure-Table]: http://office.microsoft.com/en-001/excel-help/connect-to-microsoft-azuretable-storage-HA104122607.aspx
[Power-Query-Azure-Blob]: http://office.microsoft.com/en-001/excel-help/connect-to-microsoft-azure-blob-storage-HA104113447.aspx
[Power-Query-Azure-SQL]: http://office.microsoft.com/en-001/excel-help/connect-to-a-microsoft-azure-sql-database-HA104019809.aspx
[Power-Query-OnPrem-SQL]: http://office.microsoft.com/en-001/excel-help/connect-to-a-sql-server-database-HA104019808.aspx

[adf-tutorial]: ../data-factory-tutorial
[datafactory-getstarted]: ../data-factory-get-started/

[image-data-factory-introduction-traditional-ETL]: ./media/data-factory-introduction/TraditionalETL.PNG

[image-data-factory-introduction-todays-diverse-processing-landspace]:./media/data-factory-introduction/TodaysDiverseDataProcessingLandscape.PNG

[image-data-factory-introduction-secenario1-source-datahub]:./media/data-factory-introduction/Scenario1SourceDataHub.png

[image-data-factory-introduction-secenario2-operationalize-infoproduction]:./media/data-factory-introduction/Scenario2-OperationalizeInformationProduction.png

[image-data-factory-application-model]:./media/data-factory-introduction/DataFactoryApplicationModel.png

[image-data-factory-data-flow]:./media/data-factory-introduction/DataFactoryDataFlow.png




<!--HONumber=35.2-->
