<properties title="Introduction to Azure Data Factory" pageTitle="Введение в фабрику данных Azure" description="Learn how you can use the Azure Data Factory service to compose data processing, data storage and data movement services to create pipelines that produce trusted information." metaKeywords=""  services="data-factory" solutions=""  documentationCenter="" authors="spelluru" manager="jhubbard" editor="monicar" />

<tags ms.service="data-factory" ms.workload="data-services" ms.tgt_pltfrm="na" ms.devlang="na" ms.topic="article" ms.date="01/01/1900" ms.author="spelluru" />

# Введение в службу фабрики данных Azure
Служба **фабрики данных Azure** является полностью управляемой службой для создания хранилищ данных, обработки и перемещения в упрощенные, масштабируемые и надежные конвейеры производства данных.  Разработчики могут использовать фабрику данных для преобразования частично структурированных, неструктурированных и структурированных данных из локальных и облачных источников в доверенную информацию. Разработчики создают управляемые данными рабочие процессы (конвейеры), которые соединяют, накапливают и преобразовывают данные полученные из локальных, облачных и Интернет-служб, а также настраивают сложную обработку данных с помощью простых сценариев JSON. Служба фабрики данных Azure обеспечивает эффективный мониторинг и управление этими конвейерами благодаря широким визуальным возможностям, предоставляемым на портале предварительной версии Azure. Информация, создаваемая конвейерами, может легко использоваться с помощью инструментов бизнес-аналитики и других приложений, чтобы обеспечить надежные данные для понимания сути бизнес-процессов и принятия решений.

В этой статье содержится обзор службы фабрики данных Azure, тех преимуществ, которые она обеспечивает, и сценариев, которые поддерживает. 

##Общие сведения о фабрике данных Azure
Обычно проекты интеграции данных развивались вокруг создания процессов извлечения, преобразования и загрузки (Extract-Transform-Load - ETL). То есть данные извлекаются из различных источников данных внутри организации, преобразовываются для соответствия целевой схеме корпоративного хранилища данных (Enterprise Data Warehouse - EDW) и загружаются в EDW, как показано на следующем рисунке. Затем к EDW осуществляется доступ как к единому источнику истины для решений бизнес-аналитики. 

![Traditional ETL][image-data-factory-introduction-traditional-ETL]

Современный ландшафт корпоративных данных продолжает расти экспоненциально в объеме, разнообразии и сложности, как показано на следующем рисунке.  Он более разнообразный, чем когда-либо, так как присутствуют локальные и облачные данные различных форм и скоростей.  Обработка данных должна выполняться между разными географическими расположениями и включает в себя сочетание программного обеспечения с открытым исходным кодом, коммерческих решений и пользовательских служб обработки; это ресурсоемкие процессы, которые сложно интегрировать и обслуживать.  Гибкость, необходимая для адаптации к современному меняющемуся ландшафту данных большого размера, - это возможность слияния традиционных хранилищ EDW с потребностями современных систем производства информации.  Служба фабрики данных Azure - это композитная платформа для организации работы между традиционными EDW и меняющимся ландшафтом данных, которая предоставляет предприятиям возможность использовать все доступные им данные для принятия решений на основе этих данных.

![Todays Diverse Processing Landscape][image-data-factory-introduction-todays-diverse-processing-landspace]


Служба **фабрики данных Azure** позволяет предприятиям использовать это разнообразие, предоставляя платформу для **организации процессов обработки, хранения и перемещения данных в конвейеры производства информации, а также для управление активами доверенных данных**.

Вот какие возможности дает вам служба фабрики данных Azure:

- **Комфортная работа с различными системами хранения и обработки данных.** 
Фабрика данных позволяет использовать данные там, где они хранятся, а также создавать службы для хранения, обработки и перемещения данных.  Например, вы можете составить конвейеры производства информации для обработки локальных данных, таких как SQL Server, вместе с облачными данными, такими как база данных SQL Azure, большие двоичные объекты и таблицы.  
- **Преобразование данных в доверенную информацию.** 
Чтобы объединение и формирование сложных данных было выполнено корректно, может потребоваться более одной попытки, а изменение моделей данных может быть дорогостоящим и длительным.  Используя фабрику данных, вы сможете сосредоточиться на аналитическом преобразовании, а служба позаботится об организации всех коммуникаций.  Фабрика данных поддерживает обработку Hive, Pig и C#, а также ключевые функции обработки, такие как автоматическое управление кластером Hadoop (HDInsight), повторные попытки при временных ошибках, настраиваемые политики времени ожидания и предупреждения.  
- **Наблюдение за конвейерами данных из одного места.** 
Работая с различными наборами данных, очень важно иметь надежное и полное представление о службах хранилища, обработки и перемещения данных.  Фабрика данных поможет вам быстро оценить сквозную работоспособность конвейера данных, локализовать проблемы и выполнить необходимые действия по устранению этих проблем. Отслеживайте визуально журнал преобразований данных и связи между данными во всех ваших источниках. Просматривайте полную историю выполнения заданий, работоспособности системы и зависимостей, используя единую панель мониторинга.
- **Получение содержательной информации из преобразованных данных**
Адаптируйтесь к постоянно меняющимся вопросам, на которые вашей организации требуется давать ответы, и оставайтесь на высоте, когда ваше производство данных готово к запуску.  Улучшайте свою способность приносить больше пользы для бизнеса, обеспечивая своевременную и доверенную информацию для потребления. Используйте конвейеры данных для доставки преобразованных данных из облака в локальные источники, такие как SQL Server, или сохраняйте их в своих облачных источниках хранения для использования инструментами бизнес-аналитики и другими приложениями.

Сегодня чтобы воспользоваться преимуществами фабрики данных, разработчики напрямую взаимодействуют с отдельными конвейерами, службами хранилища и вычислительными службами.  По мере развития службы фабрики данных мы представим дополнительные службы хранилища и обработки данных, а также новые механизмы группировки вычислительных служб, служб хранилища и конвейеров данных в "центры".  Мы описываем центры в этом введении, так как данная зарождающаяся концепция встречается по всей службе и является базой для будущих выпусков.

Центр фабрики данных Azure - это контейнер для служб хранилища и вычислительных служб (оба типа называются связанными службами), а также для конвейеров данных, которые используют эти ресурсы и выполняются на них. Контейнер центра позволяет разделить фабрику данных на логические или доменные группы.  Например, предприятие может иметь центр "West US Azure Hub", управляющий всеми связанными службами и конвейерами, сконцентрированными в центре обработки данных в западной части США, а может иметь центр "Sales EDW Hub", управляющий всеми связанными службами и конвейерами, задействованными в заполнении и обработке данных для хранилища EDW продаж.  Важной характеристикой центров является то, что один конвейер запускается в одном центре. Это означает, что при определении конвейера все связанные службы, на которые ссылаются таблицы или действия внутри данного конвейера, должны иметь такое же имя центра, как и сам конвейер.

Центры помогают инкапсулировать хранилище и вычисления таким образом, что конвейеры могут ссылаться только на центр, а не на отдельные службы и таблицы, которые он использует. Затем центр может использовать политики, чтобы решить, где должен запускаться конвейер. Это будет иметь несколько важных факторов влияния. Один заключается в том, что обеспечивается более простое масштабирование, так как больше связанных служб можно добавлять в центр, и конвейеры могут балансировать нагрузку между этими новыми связанными службами. Другой заключается в том, что определения конвейеров будут повторно использоваться в разных центрах.

## Сценарии
Существуют разнообразные сценарии для конвейеров данных, охватывающих локальные системы, облачные системы, системы SaaS, а также потоковое и пакетное производство данных.  В этом разделе описывается несколько примеров сценариев, которые фабрика данных Azure может поддерживать сегодня и которые будут развиваться как сценарии с использованием центра.

###Сценарий № 1: источники данных для центра данных
![Source the Data Hub][image-data-factory-introduction-secenario1-source-datahub]

Предприятия имеют данные различных типов, расположенных в разнородных источниках.  Первым этапом в создании системы производства информации является подключение ко всем необходимым источникам данных и обработки, таким как службы SaaS, файловые ресурсы с общим доступом, FTP и веб-службы, и переместить данные, необходимые для последующей обработки.

Не имея фабрики данных предприятия вынуждены создавать компоненты для перемещения пользовательских данных или писать пользовательские службы для интеграции этих источников данных и обработки.  Это дорого стоит, и такие системы трудно интегрировать и обслуживать; им часто не хватает мониторинга и оповещений корпоративного уровня, а также элементов управления, которые может предложить полностью управляемая служба.
  
При использовании фабрики данных Azure службы хранилища и обработки собираются в контейнер центра, который облегчает и оптимизирует действия вычислений и хранилища, обеспечивает унифицированное управление потреблением ресурсов и предоставляет службы для перемещения данных в случае необходимости.

###Сценарий № 2: ввод в эксплуатацию производства данных

Сценарии ввода в эксплуатацию являются следующим логическим шагом после сценариев подключения источников данных. Когда данные уже находятся в центре, вы захотите создать и ввести в эксплуатацию конвейеры данных, чтобы в соответствии с поддерживаемым и управляемым расписанием надежно производить преобразованные данные для насыщения рабочих сред доверенными данными.  Преобразование данных в фабрике Azure данных выполняется с помощью Hive, Pig и пользовательской обработки C#, работающих на Hadoop (Azure HDInsight).  Эти преобразования можно использовать для очистки данных, маскировки полей критически важных данных и выполнения других операций с данными самыми разнообразными сложными способами.  Как правило, ввод в эксплуатацию достигается с помощью сложной и тяжелой в обслуживании инфраструктуры и пользовательских служб. Он создает ряд проблем для реализации, управления, масштабирования, устранения неполадок и управления версиями такого решения.
  
Фабрика данных как полностью управляемая служба позволяет пользователям вводить эти конвейеры в эксплуатацию, определяя их с помощью одноразовых или сложных повторяющихся расписаний, при этом, оркестрация выполняется непосредственно службой фабрики данных.  При использовании центров управление кластером для всех данных и обработка в центре выполняется от имени пользователя, позволяя пользователям сосредоточиться на аналитическом преобразовании, а не на управлении инфраструктурой.  Фабрика данных Azure избавляет от потребности работать с неустойчивыми пользовательскими службами и позволяет предприятиям стабильно производить доверенную информацию с возможностью ее воспроизведения.


###Сценарий № 3:  интеграция производства информации с обнаружением данных
Традиционные подходы и технологии бизнес-аналитики обеспечивают "заслуживающий доверия источник истины", но почти всегда имеют один серьезный побочный эффект: постоянная очередь невыполненных запросов из-за того, что процесс запросов на изменение тщательно контролируется.  Чтобы адаптироваться к быстро меняющимся запросам бизнеса, предприятиям необходимо быть более гибкими, что позволит им подключать свои системы производства информации к системам потребления информации.  Фабрика данных Azure помогает решить задачу подключения этих систем к упрощенным конвейерам данных для производства информации, а также задачу потребления информации, делая актуальные доверенные данные доступными в легких для использования формах.
  
Фабрика данных Azure поддерживает следующие возможности, чтобы включить простое потребление производимых данных:

- Простое перемещение (одноразовое или по расписанию) производимых активов данных в реляционные киоски данных для использования с помощью существующих инструментов бизнес-аналитики (Excel, Tableau и др.).
- Использование активов данных, производимых фабрикой данных, непосредственно с помощью Power Query в Excel.

Подробнее об использовании данных с помощью Power Query см. в следующих разделах: 

- [Power Query: подключение к табличному хранилищу Microsoft Azure] [Power-Query-Azure-Table]
- [Power Query: подключение к хранилищу больших двоичных объектов Microsoft Azure] [Power-Query-Azure-Blob]
- [Power Query: подключение к базе данных SQL Microsoft Azure] [Power-Query-Azure-SQL]
- [Power Query: подключение к локальному серверу Microsoft SQL Server][Power-Query-OnPrem-SQL] 

## Модель приложения
На следующей схеме показана модель приложения, поддерживаемая фабрикой данных Azure.

![Application Model][image-data-factory-application-model]

Существует три этапа производства информации в фабрике данных Azure.


- **Подключение и сбор**. На этом этапе данные из различных источников данных импортируются в центры данных.
- **Преобразование и обогащение**. На этом этапе обрабатываются собранные данные.
- **Публикация**. На этом этапе данные публикуются, чтобы их можно было использовать инструментами бизнес-аналитики и другими приложениями.

Фабрики данных дают разработчикам возможность создавать **конвейеры**, представляющие собой группы действий **перемещения и/или обработки данных**, которые принимают один или несколько входных **наборов данных** и производят один или несколько выходных наборов данных.  Конвейеры могут запускаться один раз или по гибкому диапазону расписаний (ежечасно, ежедневно, еженедельно и др.).  **Набор данных** - это именованное представление данных. Диапазон описываемых данных может быть от простых байт, частично структурированных данных, таких как CSV-файлы, и вплоть до **таблиц** или **моделей**.

**Конвейеры**, состоящие из действий **перемещения данных** (например, действий копирования) часто используются для импорта или экспорта данных из всех **источников данных** (баз данных, файлов, служб SaaS и др.), используемых организацией в **центре данных**.
    
Когда данные находятся в **центре**, **конвейеры**, размещенные в вычислительных службах центра, используются для преобразования данных в форму, подходящую для использования (инструментами бизнес-аналитики, приложениями, заказчиками и др.).  
  
Наконец, **конвейеры** могут соединяться в цепочку (как показано на схеме) так, чтобы выходные **наборы данных** одного конвейера были входными наборами другого.  Это позволяет разложить сложные потоки данных на **конвейеры**, которые выполняются внутри центра данных или охватывают несколько центров.  Такое использование **конвейеров** предоставляет организациям строительные блоки для создания лучших в своем роде локальных и облачных служб, а также служб SaaS (Software-as-a-Service - программное обеспечение как услуга), - и все это через объектив единой и легко управляемой фабрики данных. 


##Терминология
В этом разделе вы познакомитесь с терминологией, связанной с фабрикой данных Azure.

### Фабрика данных

**Фабрика данных Azure** является полностью управляемой службой для создания хранилищ данных, обработки и перемещения в упрощенные, масштабируемые и надежные конвейеры производства данных. 

Служба фабрики данных использует, производит, управляет и публикует **наборы данных**. Подписка Azure может иметь один или несколько экземпляров фабрики данных Azure. Фабрику данных Azure можно связать с одной или несколькими службами хранилища или вычислительными службами (называемыми связанными службами).
 
Фабрика данных Azure может иметь один или несколько конвейеров, которые обрабатывают данные в связанных хранилищах, используя связанные вычислительные службы, такие как Azure HDInsight. Фабрика данных Azure не содержит внутри себя данные. Данные хранятся за пределами фабрики данных - в существующей системе хранения пользователя.


### Связанные службы
Связанная служба - это служба, которая связана с фабрикой данных Azure. Вот какие службы могут быть связанными:


- Хранилище данных, такое как служба хранилища Azure, база данных SQL Azure и локальная база данных SQL Server
- Вычислительная служба, такая как Azure HDInsight.

Хранилище данных - это контейнер данных или наборов данных, а Azure HDInsight - это единственная на данный момент поддерживаемая вычислительная служба. Сначала необходимо создать связанную службу, чтобы указать на хранилище данных, а затем определить наборы данных для представления данных из этого хранилища данных. 

### Набор данных
Именованное представление данных. Диапазон описываемых данных может быть от простых байт, частично структурированных данных, таких как CSV-файлы, и вплоть до реляционных таблиц, или даже моделей. **Таблица** является набором данных, который содержит схему и имеет прямоугольную форму.

###Конвейер
**Конвейер** в фабрике данных Azure обрабатывает данные в связанной службе хранилища с помощью связанных вычислительных служб. Он содержит последовательность действий, где каждое действие выполняет определенную операцию обработки. Например, действие копирования копирует данные из исходного хранилища в целевое хранилище, а действия Hive/Pig используют кластер Azure HDInsight для обработки данных с помощью запросов Hive или сценариев Pig.

Вот какие типичные шаги необходимо выполнить для создания экземпляра фабрики данных Azure:

1. Создать фабрику данных
2. Создать связанную службу для каждого хранилища данных или каждой вычислительной службы
3. Создать входные и выходные наборы данных
4. Создать конвейер 

###Действие
Шаг обработки данных в конвейере, который принимает один или несколько входных наборов данных и создает один или несколько выходных наборов данных.  Действия выполняются в среде выполнения (например, в кластере Azure HDInsight) и считывают или записывают данные в хранилище данных, связанное с экземпляром фабрики данных Azure.
 
###Центр данных
Центр данных Azure - это контейнер для хранения данных и вычислительных служб. Например, кластер Hadoop с HDFS в качестве хранилища и Hive/Pig в качестве вычислений (обработки) - это центр данных. Подобным образом корпоративное хранилище данных (EDW) можно смоделировать как центр данных (база данных - как хранилище, а хранимые процедуры и/или инструмент ETL (извлечение, преобразование и загрузка) - как вычислительные службы).  Конвейеры используют хранилища данных и запускаются на ресурсах вычислений в центре данных. В данный момент поддерживается только центр HDInsight.

Центр данных позволяет разделить фабрику данных на логические или доменные группы. Например, группа "West US Azure Hub" управляет всеми связанными службами (хранилища данных и вычислительными) и конвейерами, сконцентрированными в западной части США; а группа "Sales EDW Hub" управляет всеми связанными службами и конвейерами, задействованными в заполнении и обработке данных для корпоративного хранилища данных продаж.

Важной характеристикой центра является то, что один конвейер запускается в одном центре. Это означает, что при определении конвейера все связанные службы, на которые ссылаются таблицы или действия внутри данного конвейера, должны иметь такое же имя центра, как и сам конвейер. Если свойство HubName для связанной службы не указано, то такая связанная служба помещается в центр "Default".

###Срез
Таблица в фабрике данных Azure состоит из срезов, сделанных по оси времени. Ширина среза определяется расписанием - ежечасно или ежедневно. Если в расписании указано "ежечасно", то срез производится каждый час с временем начала и временем окончания конвейера и т. д.  

Срезы позволяют ИТ-специалистам работать с подмножеством общих данных для определенного временного окна (например, срез, который производится для интервала (час): с 13:00 до 14:00). Они также могут просматривать все нисходящие срезы данных для заданного интервала времени и повторно производить срез в случае сбоя.

Запуск - это единица обработки среза. Может быть один или несколько запусков для среза, если выполняются повторные попытки, или вы повторно производите срез в случае сбоя. Срез идентифицируется по времени начала. 

###Шлюз управления данными
Шлюз управления данными Microsoft Data Management Gateway - это программное обеспечение, которое подключает локальные источники данных к облачным службам для использования. Вам необходимо установить по крайней мере один шлюз в своей корпоративной среде и зарегистрировать его на портале фабрики данных Azure, прежде чем добавлять локальные источники данных как связанные службы.


##Дальнейшие действия
[Приступая к работе с фабрикой данных][datafactory-getstarted]. Эта статья содержит сквозной учебник, в котором приводится пример создания фабрики данных Azure, которая копирует данные из большого двоичного объекта Azure в базу данных SQL Azure.

[Power-Query-Azure-Table]: http://office.microsoft.com/en-001/excel-help/connect-to-microsoft-azuretable-storage-HA104122607.aspx
[Power-Query-Azure-Blob]: http://office.microsoft.com/en-001/excel-help/connect-to-microsoft-azure-blob-storage-HA104113447.aspx
[Power-Query-Azure-SQL]: http://office.microsoft.com/en-001/excel-help/connect-to-a-microsoft-azure-sql-database-HA104019809.aspx
[Power-Query-OnPrem-SQL]: http://office.microsoft.com/en-001/excel-help/connect-to-a-sql-server-database-HA104019808.aspx


[datafactory-getstarted]: ../data-factory-get-started/

[image-data-factory-introduction-traditional-ETL]: ./media/data-factory-introduction/TraditionalETL.PNG

[image-data-factory-introduction-todays-diverse-processing-landspace]:./media/data-factory-introduction/TodaysDiverseDataProcessingLandscape.PNG

[image-data-factory-introduction-secenario1-source-datahub]:./media/data-factory-introduction/Scenario1SourceDataHub.png

[image-data-factory-introduction-secenario2-operationalize-infoproduction]:./media/data-factory-introduction/Scenario2-OperationalizeInformationProduction.png

[image-data-factory-application-model]:./media/data-factory-introduction/DataFactoryApplicationModel.png

[image-data-factory-data-flow]:./media/data-factory-introduction/DataFactoryDataFlow.png



