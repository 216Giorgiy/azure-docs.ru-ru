<properties 
	pageTitle="Шаг 3. Создание нового эксперимента машинного обучения | Azure" 
	description="Шаг 3 пошагового руководства решения. Создание нового эксперимента по обучению в Студии машинного обучения Azure" 
	services="machine-learning" 
	documentationCenter="" 
	authors="garyericson" 
	manager="paulettm" 
	editor="cgronlun"/>

<tags 
	ms.service="machine-learning" 
	ms.workload="data-services" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="01/29/2015" 
	ms.author="garye"/>


Это третий шаг из пошагового руководства [Разработка прогнозирующего решения с помощью Azure ML][develop]:

[develop]: ../machine-learning-walkthrough-develop-predictive-solution/


1.	[Создание рабочей области ML][create-workspace]
2.	[Отправка существующих данных][upload-data]
3.	**Создание нового эксперимента**
4.	[Обучение и анализ моделей][train-models]
5.	[Публикация веб-службы][publish]
6.	[Доступ к веб-службе][access-ws]

[create-workspace]: ../machine-learning-walkthrough-1-create-ml-workspace/
[upload-data]: ../machine-learning-walkthrough-2-upload-data/
[create-new]: ../machine-learning-walkthrough-3-create-new-experiment/
[train-models]: ../machine-learning-walkthrough-4-train-and-evaluate-models/
[publish]: ../machine-learning-walkthrough-5-publish-web-service/
[access-ws]: ../machine-learning-walkthrough-6-access-web-service/

----------

# Шаг 3. Создание нового эксперимента машинного обучения Azure

Нам необходимо создать новый эксперимент в ML Studio с использованием отправленного набора данных.  

1.	В ML Studio нажмите **+СОЗДАТЬ** в нижней части окна.
2.	Выберите **ЭКСПЕРИМЕНТ**.
3.	В палитре модулей слева от полотна эксперимента разверните раздел **Сохраненные наборы данных**.
4.	Найдите созданный набор данных и перетащите его на полотно. Чтобы найти набор данных, можно также ввести имя в поле **Поиск** над палитрой.  

## Подготовка данных
Чтобы просмотреть первые 100 строк данных и некоторую статистическую информацию для всего набора данных, щелкните правой кнопкой мыши выходной порт набора данных и выберите **Визуализировать**. Обратите внимание, что в ML Studio уже определены типы данных для каждого столбца. Также присвоены универсальные заголовки столбцам, так как файл данных поступил без заголовков столбцов.  

Заголовки столбцов не имеют существенного значения, однако они облегчат работу с данными в модели. Кроме того, при последующей публикации этой модели в веб-службе заголовки помогут определять столбцы пользователям службы.  

Заголовки столбцов можно добавить с помощью модуля **Редактор метаданных**.  

1.	В палитре модулей введите "metadata" в поле **Поиск**. Вы увидите **Редактор метаданных** в списке модулей.
2.	Щелкните и перетащите модуль **Редактор метаданных** на полотно и вставьте его под набором данных.
3.	Подключите набор данных к **редактору метаданных**: щелкните выходной порт набора данных, перетащите во входной порт **редактора метаданных** и отпустите кнопку мыши. Набор данных и модуль останутся подключенными даже при их перемещении по полотну.
4.	На панели **Свойства** справа от полотна выберите **Запустить средство выбора столбцов**.
5.	Убедитесь, что в поле **Начинается с** выбрано "Все столбцы", удалите строки и нажмите кнопку **ОК**. В этом случае **редактор метаданных** будет работать со всеми столбцами данных.
6.	Для параметра **Новое имя столбца** введите список имен для 21 столбца набора данных с разделителями-запятыми и в порядке расположения столбцов. Вы можете получить имена столбцов из документации по наборам данных на веб-сайте UCI или скопировать и вставить следующее:  

	состояние проверки счета, длительность в месяцах, кредитная история, цель, сумма кредита, сберегательный счет/обязательства, действительный сотрудник с, величина взноса в процентах от располагаемого дохода, семейное положение и пол, другие должники, настоящее место жительства, собственность, возраст в годах, другие планы погашения, жилищные условия, количество существующих кредитов, работа, количество иждивенцев, телефон, иностранный рабочий, кредитный риск  

Панель свойств будет выглядеть следующим образом:

![Properties for Metadata Editor][1] 

>Подсказка. Если необходимо проверить заголовки столбцов, запустите эксперимент (нажмите кнопку **ВЫПОЛНИТЬ** под полотном эксперимента), щелкните правой кнопкой мыши выходной порт модуля **Редактор метаданных** и выберите **Визуализировать**. Аналогичным образом можно просматривать выход любого модуля, чтобы следить за ходом использования данных в эксперименте.

Теперь наш эксперимент должен выглядеть следующим образом:  

![Adding Metadata Editor][2]
 
## Создание обучающих и тестовых наборов данных
На следующем шаге эксперимента создаются отдельные наборы данных, которые будут использоваться для обучения и тестирования модели. Для этого используется модуль **Разделение**.  

1.	Найдите модуль **Разделение**, перетащите его на полотно и подключите к последнему модулю **Редактор метаданных**.
2.	По умолчанию коэффициент разделения равен 0,5 и задан параметр **Случайное разделение**. Это означает, что случайная половина данных будет выходить через один порт модуля **Разделение**, а вторая половина - через другой. Можно это отрегулировать, а также использовать параметр **Псевдослучайные числа**, чтобы изменить соотношение между данными обучения и оценки. Для этого примера оставим их как есть.
	>Подсказка. По существу, коэффициент разделения определяет, сколько данных будет выходить через левый выходной порт. Например, если коэффициент установлен на 0,7, то 70 % данных выходит через левый порт, а 30 % - через правый.  
	
Выходы модуля **Разделение** можно использовать по своему усмотрению. Однако мы предлагаем использовать левый выход для обучающих данных, а правый - для данных оценки.  

Как отмечалось на веб-сайте UCI, стоимость неверной классификации высокого кредитного риска как низкого в 5 раз выше, чем стоимость неверной классификации низкого кредитного риска как высокого. Чтобы это учесть, создадим новый набор данных, отражающий эту функцию стоимости. В новом наборе данных каждый пример высокого риска реплицируется 5 раз, а каждый пример низкого риска не реплицируется.   

Эту репликацию можно выполнить с помощью кода R:  

1.	Найдите модуль **Выполнение скрипта R**, перетащите его на полотно эксперимента и подключите к левому выходному порту модуля **Разделение**.
2.	На панели **Свойства** удалите текст по умолчанию в параметре **Скрипт** и введите следующий скрипт: 

		dataset1 <- maml.mapInputPort(1)
		data.set<-dataset1[dataset1[,21]==1,]
		pos<-dataset1[dataset1[,21]==2,]
		for (i in 1:5) data.set<-rbind(data.set,pos)
		maml.mapOutputPort("data.set")


Необходимо проделать эту же операцию репликации для каждого выхода модуля **Разделение**, чтобы данные обучения и оценки получили одинаковую корректировку стоимости.

1.	Щелкните правой кнопкой мыши модуль **Выполнение скрипта R** и выберите **Копировать**.
2.	Щелкните правой кнопкой мыши полотно эксперимента и выберите **Вставить**.
3.	Подключите этот модуль **Выполнение скрипта R** к правому выходному порту модуля **Разделение**.  

>Подсказка. Копия модуля "Выполнение скрипта R" содержит тот же скрипт, что и исходный модуль. При копировании и вставке модуля на полотно копия сохраняет все свойства оригинала.  
>
Наш эксперимент теперь выглядит приблизительно следующим образом:
 
![Adding Split module and R scripts][3]

**Далее: [Обучение и анализ моделей][train-models]**


[1]: ./media/machine-learning-walkthrough-3-create-new-experiment/create1.png
[2]: ./media/machine-learning-walkthrough-3-create-new-experiment/create2.png
[3]: ./media/machine-learning-walkthrough-3-create-new-experiment/create3.png

<!--HONumber=46--> 
