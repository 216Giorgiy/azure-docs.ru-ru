<properties title="Sharding Overview" pageTitle="Обзор сегментирования" description="Reasons for sharding: scale database resources to increase availability or performance." metaKeywords="sharding, scaling, elastic scale, Azure SQL Database" services="sql-database" documentationCenter="" manager="jhubbard" authors="sidneyh@microsoft.com"/>

<tags ms.service="sql-database" ms.workload="sql-database" ms.tgt_pltfrm="na" ms.devlang="na" ms.topic="article" ms.date="10/02/2014" ms.author="sidneyh" />
#Обзор сегментирования 

##Принципы сегментирования 

**Сегментирование** - это технология распределения больших объемов данных с одинаковой структурой по множеству независимых баз данных. Она пользуется особенной популярностью среди разработчиков облачных технологий при создании для конечных пользователей и предприятий SAAS-решений. Эти конечные пользователи часто именуются "клиентами". Сегментирование может потребоваться по ряду причин: 

* общий объем данных слишком велик для размещения в пределах одной базы данных; 
* пропускная способность транзакций общей рабочей нагрузки превышает возможности одной базы данных; 
* клиентам может потребоваться физическая изоляция друг от друга, для чего требуются отдельные базы данных для каждого клиента; 
* разные части базы данных могут размещаться в разных регионах по соображениям соответствия требованиям законодательства, производительности или по геополитическим причинам. 
 
Сегментирование лучше всего работает, когда каждая транзакция в приложении может ограничиваться одним значением ключа сегментирования. Это гарантирует, что все транзакции будут осуществляться в пределах отдельной базы данных. 

Некоторые приложения используют простой способ создания отдельной базы данных для каждого клиента. Это **шаблон сегментирования для одного клиента**, который предоставляет возможность изолирования, резервного копирования и восстановления, а также масштабирования ресурсов согласно детализации клиента. Благодаря сегментированию для одного клиента каждая база данных привязывается к отдельному идентификатору клиента (или значению ключа клиента), но этот ключ не должен постоянно присутствовать в самих данных. За направление каждого запроса к соответствующей базе данных отвечает само приложение. 

![][1]

Другие сценарии объединяют несколько клиентов вместе в базах данных вместо изолирования их в отдельных базах данных. Это типовой **шаблон сегментирования на нескольких клиентов**; он может использоваться из соображений стоимости, эффективности или при обработке приложением большого числа очень маленьких клиентов. При сегментировании на несколько клиентов строки таблиц базы данных спроектированы для хранения ключа, идентифицирующего пользователя, или ключа сегментирования. Кроме того, уровень приложения отвечает за направление запроса клиента к соответствующей базе данных. 

В других сценариях, например при получении данных из распределенных устройств, сегментирование может использоваться для заполнения набора баз данных, распределенных по времени. Например, отдельная база данных может выделяться под каждый день или неделю. В этом случае ключом сегментирования может быть целое число, представляющее дату (присутствующую во всех строках сегментированных таблиц), а запросы получения информации о диапазоне дат должны передаваться приложением в подмножество баз данных, которые покрывают рассматриваемый диапазон.

Независимо от используемой модели сегментирования специальная структура данных, известная как **карта сегментов**, служит в качестве подстановочной таблицы, ставящей в соответствие значения ключей сегментирования с базами данных, давая возможность приложению выполнять маршрутизацию запросов к базе данных. Это называется **маршрутизацией, зависящей от данных**, и представляет собой основной ресурс, необходимый для предоставления возможности приложению использовать уровень сегментированных данных. [API клиентов гибкого масштабирования](http://go.microsoft.com/?linkid=9862592) предоставляют большой набор функциональных возможностей, необходимых для [управления картами сегментирования](http://go.microsoft.com/?linkid=9862595) и обеспечения эффективности и простоты использования [Data-depenendent routing capabilities](http://go.microsoft.com/?linkid=9862596) в приложении. 

[AZURE.INCLUDE [elastic-scale-include](../includes/elastic-scale-include.md)]

<!--Image references-->
[1]: ./media/sql-database-elastic-scale-sharding-overview/tenancy.png
