<properties 
	pageTitle="Добавление сертификата в хранилище ЦС Java — Azure" 
	description="Узнайте, как добавить сертификат центра сертификации (ЦС) в хранилище сертификатов (cacerts) центра сертификации Java для службы Twilio или Azure Service Bus." 
	services="" 
	documentationCenter="java" 
	authors="rmcmurray" 
	manager="wpickett" 
	editor="mollybos"/>

<tags 
	ms.service="multiple" 
	ms.workload="na" 
	ms.tgt_pltfrm="na" 
	ms.devlang="Java" 
	ms.topic="article" 
	ms.date="09/25/2014" 
	ms.author="robmcm"/>

# Добавление сертификата в хранилище сертификатов ЦС Java
Ниже показано, как добавить сертификат центра сертификации (ЦС) в хранилище сертификатов (cacerts) ЦС Java. Приведен пример использования сертификата ЦС, требуемого службой Twilio. Ниже в этой статье описана установка сертификата ЦС для шины обслуживания Azure. 

Чтобы добавить сертификат ЦС перед сжатием JDK и добавлением его в свою папку **approot** проекта Azure, можно использовать keytool или выполнить задачу запуска Azure, которая использует keytool для добавления сертификата. В этом примере предполагается, что сертификат ЦС будет добавлен перед сжатием JDK. Кроме того, в примере будет использоваться конкретный сертификат ЦС, но действия, необходимые для получения различных сертификатов ЦС и их импорта в хранилище cacerts, останутся прежними.

## Добавление сертификата в хранилище cacerts

1. Чтобы увидеть установленные сертификаты, в командной строке для папки JDK **jdk\jre\lib\security** выполните следующую команду:

	`keytool -list -keystore cacerts`

	Вам будет предложено ввести пароль хранилища. Пароль по умолчанию - **changeit**. (Чтобы изменить пароль, ознакомьтесь с документацией keytool, находящейся на странице <http://docs.oracle.com/javase/7/docs/technotes/tools/windows/keytool.html>.) В этом примере предполагается, что сертификат с отпечатком пальцев MD5 67:CB:9D:C0:13:24:8A:82:9B:B2:17:1E:D1:1B:EC:D4 отсутствует в списке и вы хотите его импортировать (этот конкретный сертификат необходим для API-службы Twilio).
2. Получите сертификат из списка сертификатов, перечисленных в [корневых сертификатах GeoTrust](http://www.geotrust.com/resources/root-certificates/). Щелкните правой кнопкой мыши ссылку сертификата с серийным номером 35:DE:F4:CF и сохраните его в папку **jdk\jre\lib\security**. Для этого примера он был сохранен в файл с именем **Equifax_Secure_Certificate_Authority.cer**.
3. Импортируйте сертификат с помощью следующей команды:

	`keytool -keystore cacerts -importcert -alias equifaxsecureca -file Equifax_Secure_Certificate_Authority.cer`

	Если сертификат имеет отпечаток пальцев MD5 67:CB:9D:C0:13:24:8A:82:9B:B2:17:1E:D1:1B:EC:D4 и появилось приглашение подтвердить доверие этому сертификату, введите **y**.
4. Выполните следующую команду, чтобы убедиться, что сертификат СЦ был успешно импортирован:

	`keytool -list -keystore cacerts`

5. Запакуйте JDK и добавьте его в папку **approot** проекта Azure.

Дополнительные сведения о keytool можно узнать в статье <http://docs.oracle.com/javase/7/docs/technotes/tools/windows/keytool.html>.

# Корневые сертификаты Azure

Приложения, использующие службы Azure (например, шину обслуживания Azure), должны доверять корневому сертификату Baltimore CyberTrust Root. (С 15 апреля 2013 года Azure начала миграцию с глобальной основы GTE CyberTrust в Baltimore CyberTrust Root. Такая миграция продолжается несколько месяцев.)

Сертификат Baltimore может быть уже установлен в вашем хранилище cacerts, поэтому не забудьте сначала выполнить команду **keytool -list**, чтобы проверить, существует ли он.

Если вам необходимо добавить сертификат Baltimore CyberTrust Root, он имеет серийный номер 02:00:00:b9 и отпечаток пальца SHA1 d4:de:20:d0:5e:66:fc:53:fe:1a:50:88:2c:78:db:28:52:ca:e4:74. Его можно скачать по ссылке <https://cacert.omniroot.com/bc2025.crt>, сохранить в локальном файле с расширением **CER**, а затем импортировать с помощью **keytool**, как показано выше.

Дополнительные сведения о корневых сертификатах, используемых Azure, можно узнать в статье [Windows Azure Root Certificate Migration](http://blogs.msdn.com/b/windowsazure/archive/2013/03/15/windows-azure-root-certificate-migration.aspx) (Миграция корневых сертификатов Windows Azure).


<!--HONumber=46--> 
