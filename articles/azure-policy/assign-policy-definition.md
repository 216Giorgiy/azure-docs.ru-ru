---
title: "Создание назначения политики для идентификации ресурсов, не соответствующих требованиям, в среде Azure | Документация Майкрософт"
description: "В этой статье рассматриваются действия, позволяющие создать определение политики для выявления ресурсов, не соответствующих требованиям."
services: azure-policy
keywords: 
author: Jim-Parker
ms.author: jimpark
ms.date: 10/06/2017
ms.topic: quickstart
ms.service: azure-policy
ms.custom: mvc
ms.openlocfilehash: 2e0962ae02dd8132d878792634abc1f63b2c29a1
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/11/2017
---
# <a name="create-a-policy-assignment-to-identify-non-compliant-resources-in-your-azure-environment"></a>Создание назначения политики для идентификации ресурсов, не соответствующих требованиям, в среде Azure
Чтобы выяснить соответствие требованиям в Azure, нужно определить состояние текущих ресурсов. В этом кратком руководстве описывается поэтапный процесс по созданию назначения политики, чтобы выявлять ресурсы, не использующие SQL Server версии 12.0. Этот процесс позволит вам определить, какие серверы используют неправильную версию, то есть *не соответствуют требованиям*.

Если у вас еще нет подписки Azure, [создайте бесплатную учетную запись Azure](https://azure.microsoft.com/free/?WT.mc_id=A261C142F), прежде чем начинать работу.

## <a name="opt-in-to-azure-policy"></a>Регистрация для использования Политики Azure

Служба "Политика Azure" сейчас доступна в ограниченной предварительной версии, поэтому вам необходимо зарегистрироваться, чтобы подать запрос на доступ.

1. Перейдите к службе "Политика Azure" по адресу https://aka.ms/getpolicy, а затем выберите **Зарегистрироваться** в области слева.

   ![Поиск политики](media/assign-policy-definition/sign-up.png)

2. Согласитесь использовать политику Azure, выбрав подписки, с которыми желаете работать, в списке **Подписка**. Выберите **Зарегистрировать**.

   ![Регистрация для использования Политики Azure](media/assign-policy-definition/preview-opt-in.png)

   Подтверждение запроса на регистрацию может занять несколько дней в зависимости от числа запросов. После принятия запроса вы будете уведомлены по электронной почте о том, что можете начать пользоваться службой.

## <a name="create-a-policy-assignment"></a>Создание назначения политики

В этом кратком руководстве мы создадим назначение политики *Require SQL Server Version 12.0* (Требовать наличия SQL Server версии 12.0) и назначим для нее определение. 

1. Выберите **Назначения** на левой панели страницы Политики Azure.
2. Выберите **Назначить политику** в верхней части панели **Назначения**.

   ![Назначение определения политики](media/assign-policy-definition/select-assign-policy.png)

3. На странице **Назначить политику** нажмите ![кнопку определения политики](media/assign-policy-definition/definitions-button.png) рядом с полем **Политика**, чтобы открыть список доступных определений.

   ![Список доступных определений политик](media/assign-policy-definition/open-policy-definitions.png)

   Политика Azure поставляется с готовыми встроенными определениями политик, которые можно использовать. Вот некоторые примеры встроенных определений политик:

   - принудительно применять тег и его значение;
   - применять тег и его значение;
   - требовать наличия SQL Server версии 12.0.

4. Просмотрите все определения политик и найдите определение *Require SQL Server Version 12.0* (Требовать наличия SQL Server версии 12.0). Щелкните эту политику, а затем выберите действие **Выбрать**.

   ![Поиск нужного определения политики](media/assign-policy-definition/select-available-definition.png)

5. Введите отображаемое **Имя** для назначения политики. Здесь мы используем имя *Require SQL Server version 12.0* (Требовать наличия SQL Server версии 12.0). При желании вы можете добавить необязательное **Описание**. Описание предоставляет сведения о том, как назначение этой политики проверяет все создаваемые в среде серверы SQL Server на наличие версии 12.0.
6. Установите ценовую категорию **Стандартный**, чтобы политика применялась и к существующим ресурсам.

   В Политике Azure используются две ценовые категории: *Бесплатный* и *Стандартный*. Бесплатная категория позволяет применять политики только к новым ресурсам, а Стандартная распространяет действие политик и на существующие ресурсы, что поможет вам лучше понять состояние соответствия. Пока мы используем режим ограниченной предварительной версии, модель ценообразования еще не готова. Это означает, что вам пока не нужно оплачивать категорию *Стандартный*. Подробности о ценах можно узнать на [странице ценообразования для Политики Azure](https://acom-milestone-ignite.azurewebsites.net/pricing/details/azure-policy/).

7. Выберите **Область**, к которой вы хотите применить политику.  Она определяет, к каким ресурсам или группе ресурсов принудительно применяется назначение политики. Политика может назначаться разным ресурсам: от подписки до групп ресурсов.
8. Выберите подписку (или группу ресурсов), которую вы ранее зарегистрировали для использования с Политикой Azure. В этом примере мы используем подписку **Azure Analytics Capacity Dev**, но у вас будут другие варианты.

   ![Поиск нужного определения политики](media/assign-policy-definition/assign-policy.png)

9. Выберите **Назначить**.

Теперь все готово к выявлению ресурсов, которые не соответствуют требованиям, что позволит оценить состояние соответствия в среде.

## <a name="identify-non-compliant-resources"></a>Выявление несоответствующих ресурсов

Выберите **Соответствие** в области слева и выполните поиск созданного назначения политики.

![Соответствие политике](media/assign-policy-definition/policy-compliance.png)

Существующие ресурсы, которые не соответствуют новому назначению, отображаются на вкладке **Non-compliant resources** (Несоответствующие ресурсы).

Если условие применяется к существующим ресурсам и оказывается верным для некоторых из них, такие ресурсы помечаются как несовместимые с настроенной политикой. Ниже приведена таблица доступных на текущий момент действий, правил их применения к результатам оценки условия и состояний соответствия для ресурсов.

|Ресурс  |Результат оценки указанного в политике условия  |Действие, выбранное в политике   |Состояние соответствия  |
|-----------|---------|---------|---------|
|Exists     |Да     |ЗАПРЕТИТЬ     |Не соответствует |
|Exists     |Ложь    |ЗАПРЕТИТЬ     |Соответствует     |
|Exists     |Да     |Добавить   |Не соответствует |
|Exists     |Ложь    |Добавить   |Соответствует     |
|Exists     |Да     |Аудит    |Не соответствует |
|Exists     |Ложь    |Аудит    |Не соответствует |

## <a name="clean-up-resources"></a>Очистка ресурсов

Остальные руководства из этой серии являются продолжением этого документа. Если вы намерены переходить к ним, не удаляйте ресурсы, которые вы создали при работе с этим руководством. Если вы не планируете продолжать работу, удалите все созданные ресурсы, выполнив на портале Azure следующие действия.
1. Выберите **Назначения** на панели слева.
2. Найдите назначение, которое вы только что создали.

   ![Удаление назначения](media/assign-policy-definition/delete-assignment.png)

3.  Выберите действие **Удалить назначение**.

## <a name="next-steps"></a>Дальнейшие действия

В этом кратком руководстве вы назначили для некоторой области определение политики, которая проверяет совместимость для всех ресурсов этой области и выявляет те из них, которые не соответствуют политике.

Следующее руководство серии содержит сведения о назначении политик, обеспечивающих соответствие требованиям для **новых ресурсов**:

> [!div class="nextstepaction"]
> [Создание политик и управление ими](./create-manage-policy.md)

