---
title: Общие сведения о политике Azure
description: "\"Политика Azure\" — это служба в Azure, которая используется для создания, присваивания определений политик, а также управления ими в среде Azure."
services: azure-policy
author: DCtheGeek
ms.author: dacoulte
ms.date: 07/31/2018
ms.topic: overview
ms.service: azure-policy
manager: carmonm
ms.custom: mvc
ms.openlocfilehash: e00af59c39219cf6efd14a1c6b2d831fc8addf5a
ms.sourcegitcommit: f86e5d5b6cb5157f7bde6f4308a332bfff73ca0f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/31/2018
ms.locfileid: "39364434"
---
# <a name="what-is-azure-policy"></a>Что такое служба "Политика Azure"?

Система управления ИТ обеспечит вашей организации достижение целей с помощью эффективного и рационального использования ИТ. Это делается путем создания четкой картины бизнес-целей и ИТ-проектов.

В вашей компании возникает множество проблем в области ИТ, которые никак не удается устранить?
Хорошая система управления ИТ включает в себя планирование инициатив и определение приоритетов на стратегическом уровне для помощи в управлении и для предотвращения проблем. Именно для этого нужна служба "Политика Azure".

"Политика Azure" — это служба в Azure, которая используется для создания, присваивания и управления политиками. Эти политики гарантируют соблюдение различных правил и действий с ресурсами, что обеспечивает соответствие этих ресурсов корпоративным стандартам и соглашениям об уровне обслуживания. Служба "Политика Azure" делает это путем запуска оценки ресурсов, выявляя из них те, которые не соответствуют определениям политик. Например, можно настроить политику, которая разрешает только определенные размеры SKU виртуальных машин в среде. После реализации этой политики она будет оценена при создании и обновлении ресурсов, а также в отношении уже имеющихся ресурсов. Позже в этой документации будут рассмотрены дополнительные сведения о том, как создать и реализовать политики с помощью службы "Политика Azure".

> [!IMPORTANT]
> Сейчас оценка соответствия в службе "Политика Azure" предоставляется для всех назначений независимо от ценовой категории. Если данные о соответствии не отображаются для назначения, убедитесь, что подписка зарегистрирована для поставщика ресурсов Microsoft.PolicyInsights.

## <a name="how-is-it-different-from-rbac"></a>Чем это отличается от управления доступом на основе ролей?

Существует ряд ключевых различий между политиками и управлением доступом на основе ролей (RBAC). RBAC определяет действия пользователя в различных областях. Например, вам может быть назначена роль участника для группы ресурсов в требуемой области. Эта роль позволяет вносить изменения в данную группу ресурсов.
Политика нацелена на свойства ресурсов во время и после их развертывания. Например, с помощью политик можно управлять типами ресурсов, которые можно подготовить, или ограничить расположения, в которых можно подготовить ресурсы. В отличие от RBAC, политика представляет собой систему разрешения по умолчанию и явного запрета.

### <a name="rbac-permissions-in-azure-policy"></a>Разрешения RBAC в службе "Политика Azure"

Служба "Политика Azure" имеет разрешения, предоставленные как операции двух разных поставщиков ресурсов.

- [Microsoft.Authorization](../role-based-access-control/resource-provider-operations.md#microsoftauthorization)
- [Microsoft.PolicyInsight](../role-based-access-control/resource-provider-operations.md#microsoftpolicyinsights)

Некоторые встроенные роли имеют различные уровни доступа к ресурсам службы "Политика Azure", например **Администратор системы безопасности**, которые могут управлять назначениями и определениями политик, но не могут просматривать сведения о соответствии, а **Читатель** может читать сведения о назначениях и определениях политик, но не может вносить изменения и просматривать сведения о соответствии. В то время как **Владелец** имеет полные права, **Участник** не имеет никаких разрешений на службу "Политика Azure". Чтобы предоставить разрешение на просмотр сведений о политике соответствия требованиям, создайте [настраиваемую роль](../role-based-access-control/custom-roles.md).

## <a name="policy-definition"></a>Определение политики

Путь создания и реализации политики в службе "Политика Azure" начинается с создания определения политики. Каждое определение политики содержит условия, при которых она применяется. А также соответствующее действие, которое выполняется, если условия соблюдены.

В службе "Политика Azure" предлагается несколько встроенных политик, доступных по умолчанию. Например: 

- **Require SQL Server 12.0** (Требуется SQL Server 12.0). В этом определении политики есть условия и правила, помогающие убедиться, что все сервера SQL Server используют версию 12.0. Действие политики — запрет всех серверов, которые не удовлетворяют этим критериям.
- **Allowed Storage Account SKUs** (Допустимые SKU учетной записи хранения). В этом определении политики есть ряд условий и правил, которые определяют, была ли развернута учетная запись хранения в наборе размеров SKU. Действие политики — запрет всех учетных записей хранения, которые не соответствуют набору определенных размеров SKU.
- **Allowed Resource Type** (Разрешенный тип ресурса). В этом определении политики есть ряд условий и правил, которые определяют типы ресурсов, которые может развернуть организация. Действие политики — запрет всех ресурсов, которые не являются частью определенного списка.
- **Allowed Locations** (Допустимые расположения). Эта политика позволяет ограничить расположения, которые ваша организация может указать при развертывании ресурсов. Эта политика используется для соблюдения географических требований.
- **Allowed Virtual Machine SKUs** (Разрешенные номера SKU виртуальной машины). Эта политика позволяет задать набор номеров SKU виртуальных машин, которые можно развернуть в организации.
- **Apply tag and its default value** (Применение тега и его значения по умолчанию). Эта политика применяет обязательный тег и его значение по умолчанию, если значение тега не задал пользователь.
- **Enforce tag and its value** (Применение тега и его значения). Эта политика применяет к ресурсу обязательный тег и его значение.
- **Not allowed resource types** (Запрещенные типы ресурсов). Эта политика позволяет указать типы ресурсов, которые нельзя развернуть в вашей организации.

Чтобы реализовать эти определения политик (как встроенные, так и настраиваемые определения), необходимо будет их назначить. Любую из этих политик можно назначить с помощью портала Azure, PowerShell или Azure CLI.

Имейте в виду, что повторная переоценка политики происходит примерно один раз в час. Это значит, что при внесении изменений в определение политики после ее реализации (создание назначения политики) ее повторная переоценка ресурсами будет проходить в течение часа.

Дополнительные сведения о структурах определений политик см. в [этой статье](policy-definition.md).

## <a name="policy-assignment"></a>Назначение политики

Назначение политики — это определение политики, которая назначена в рамках определенной области. Эта область может варьироваться от [группы управления](../azure-resource-manager/management-groups-overview.md) до группы ресурсов. Термин *область* означает все группы ресурсов, подписки или группы управления, которые указаны в определении политики. Назначения политик наследуются всеми дочерними ресурсами. Это значит, что политики, применяемые к группе ресурсов, применяются также ко всем ресурсам в этой группе. Тем не менее из назначения политики можно исключить подобласть.

Например, для области действия подписки можно назначить политику, которая предотвращает создание сетевых ресурсов. Однако можно исключить одну группу ресурсов в подписке, предназначенную для сетевой инфраструктуры. Доступ к этой группе сетевых ресурсов предоставляется пользователям, которым вы доверяете создание сетевых ресурсов.

В другом примере, возможно, потребуется назначить политику списка разрешений для типов ресурсов на уровне группы управления. А затем назначить менее строгую политику (разрешающую дополнительные типы ресурсов) для дочерней группы управления или даже непосредственно для подписок. Но в нашем примере сделать это не удастся, так как в политике реализован явный запрет. Вместо этого исключите дочернюю группу управления или подписку из назначения политики на уровне группы управления. Затем назначьте менее строгую политику на уровне дочерней группы управления или подписки. Таким образом, если любая политика приводит к запрету ресурса, единственным способом обеспечить его доступность является изменение политики запрета.

Дополнительные сведения о настройке определений и назначений политики см. в разделе [Создание назначения политики для идентификации ресурсов, не соответствующих требованиям, в среде Azure](assign-policy-definition.md).

## <a name="policy-parameters"></a>Параметры политики

Использование параметров политики помогает упростить управление политиками за счет сокращения числа определений политики, которые необходимо создать. Параметры можно определить при создании политики, чтобы сделать его более общим. Затем можно повторно использовать определение политики для различных сценариев. Для этого можно передавать различные значения при назначении определения политики. Например, можно указать один набор расположений для подписки.

Параметры определяются или создаются при создании определения политики. Когда параметр определен, ему присваивается имя и (необязательно) задается значение. Например, можно определить параметр политики, *location*. Затем при назначении политики ему можно присваивать различные значения, такие как *EastUS* или *WestUS*.

Дополнительные сведения о параметрах политики см. в [этом разделе](policy-definition.md#parameters).

## <a name="initiative-definition"></a>Определение инициативы

Определение инициативы — это совокупность определений политик, которые предназначены для достижения одной ключевой цели. Определение инициативы упрощает управление определениями политик и их назначение. Это достигается благодаря группированию набора политик в один отдельный элемент. Например, можно создать инициативу, называемую **Enable Monitoring in Azure Security Center** (Включение мониторинга в центре безопасности Azure) с целью мониторинга всех доступных рекомендаций безопасности в центре безопасности Azure.

В соответствии с этой инициативой будут доступны такие определения политики:

- **Monitor unencrypted SQL Database in Security Center** (Мониторинг незашифрованной базы данных в центре безопасности) для наблюдения за незашифрованными базами данных и серверами SQL.
- **Monitor OS vulnerabilities in Security Center** (Мониторинг уязвимостей ОС в центре безопасности) для мониторинга серверов, не соответствующих настроенному базовому плану.
- **Monitor missing Endpoint Protection in Security Center** (Мониторинг отсутствующей защиты конечной точки в центре безопасности) для серверов мониторинга без установленного агента защиты конечной точки.

## <a name="initiative-assignment"></a>Присвоение инициативы

Подобно присвоению политики, присвоение инициативы — это определение инициативы, назначенное определенной области. Присвоения инициативы снижают потребность в создании нескольких определений инициативы для каждой области. Эта область также может варьироваться от группы управления до группы ресурсов.

Инициатива **Enable Monitoring in Azure Security Center** (Включение мониторинга в центре безопасности Azure) из предыдущего примера может быть присвоена различным областям. Например, можно назначить одно назначение подписке **subscriptionA**.
А другое можно назначить подписке **subscriptionB**.

## <a name="initiative-parameters"></a>Параметры инициативы

Как и параметры политики, параметры инициативы помогают упростить управление инициативой за счет сокращения избыточности. Параметры инициативы по существу являются списком параметров, используемых определениями политик внутри инициативы.

Например, возьмем сценарий с определением инициативы — **initiativeC** и определениями политик — **policyA** и **policyB**, каждая из которых имеет различный тип параметра.

| Политика | Имя параметра |Тип параметра  |Примечание |
|---|---|---|---|
| policyA | allowedLocations | array  |Этот параметр ожидает список строк для значения, так как тип параметра был определен как массив. |
| policyB | allowedSingleLocation |строка |Этот параметр ожидает одно слово для значения, так как тип параметра был определен как строка. |

В этом случае при определении параметров инициативы **initiativeC** есть три варианта:

- Используйте параметры определений политик в рамках этой инициативы. В этом примере *allowedLocations* и *allowedSingleLocation* становятся параметрами для инициативы **initiativeC**.
- Укажите значения параметров определений политик в рамках этого определения инициативы. В этом примере необходимо предоставить список расположений для **параметра policyA — allowedLocations** и **параметра policyB — allowedSingleLocation**. Кроме того, можно указать значения при назначении этой инициативы.
- Предоставьте список *значений* параметров, которые могут использоваться при присвоении этой инициативы. При назначении этой инициативы наследуемые параметры из определения политики в рамках инициативы могут иметь значения только из указанного списка.

Например, можно создать список возможных значений в определении инициативы, который содержит значения *EastUS*, *WestUS*, *CentralUS* и *WestEurope*. В этом случае вы не сможете ввести другое значение, например *Юго-Восточная Азия*, во время назначения инициативы, так как его нет в списке.

## <a name="maximum-count-of-policy-objects"></a>Максимальное количество объектов политики

Ниже приведено максимальное количество для каждого типа объекта для службы "Политика Azure". Запись _Область_ означает либо подписку, либо группу управления.

| Where | Что | Максимальное количество |
|---|---|---|
| Область | Определения политик | 250 |
| Область | Определения инициатив | 100 |
| Клиент | Определения инициатив | 1000 |
| Область | Назначения инициатив или политик | 100 |
| Определение политики | Параметры | 20 |
| Определение инициативы | Политики | 100 |
| Определение инициативы | Параметры | 100 |
| Назначения инициатив или политик | Исключения (не области) | 100 |
| Правило политики | Вложенные условные выражения | 512 |

## <a name="recommendations-for-managing-policies"></a>Рекомендации по управлению политиками

Ниже приведены несколько советов, которым рекомендуется следовать при создании и управлении определениями и назначениями политик.

- При создании определений политик в среде рекомендуем начать с действия Audit, а не с действия Deny, чтобы отслеживать влияние определения политики на ресурсы в среде. При наличии сценария для автоматической настройки приложений установка результатов запрета может помешать тем задачам автоматизации, которые у вас уже есть.
- При создании определений и назначений важно учитывать организационные иерархии. Корпорация Майкрософт рекомендует создавать определения на более высоком уровне, например, уровне подписки или группы управления, а присваивать на следующем дочернем уровне. Например, при создании определения политики на уровне группы управления присвоение политики определения можно ограничить на уровне подписки в этой группе управления.
- Мы рекомендуем всегда использовать определения инициативы вместо определения политики, даже при наличии только одной политики. Например, при наличии определения политики *policyDefA* она создается в качестве определения инициативы *initiativeDefC*. Если вы решите позже создать еще одно определение политики для *policyDefB* с целями, как в определении *policyDefA*, то их можно будет добавить в *initiativeDefC*, чтобы более эффективно отслеживать.
- Имейте в виду, что после создания назначения инициативы из определения инициативы все новые определения политики, добавленные к определению инициативы, будут автоматически развертываться вместе с этим определением инициативы.
- При активации присвоения инициативы активируются также все политики этой инициативы. Если же нужно выполнить политику отдельно, то не включайте ее в инициативу.

## <a name="video-overview"></a>Видеообзор

Ниже приведен обзор службы "Политика Azure" с веб-сайта Microsoft Build 2018. Слайды или видеоролик для загрузки можно найти по адресу [Govern your Azure environment through Azure Policy](https://channel9.msdn.com/events/Build/2018/THR2030) (Система управления средой Azure с помощью службы "Политика Azure") на канале Channel 9.

> [!VIDEO https://channel9.msdn.com/events/Build/2018/THR2030/player]

## <a name="next-steps"></a>Дополнительная информация

После знакомства с обзором службы "Политика Azure" и некоторыми представленными ключевыми концепциями можно выполнять следующие шаги.

- [Create a policy assignment to identify non-compliant resources in your Azure environment](assign-policy-definition.md) (Создание назначения политики для определения несоответствующих ресурсов в среде Azure)
- [Create a policy assignment to identify non-compliant resources in your Azure environment with the Azure CLI](assign-policy-definition-cli.md) (Создание назначения политики для определения несоответствующих ресурсов в среде Azure с помощью Azure CLI)
- [Create a policy assignment to identify non-compliant resources in your Azure environment using PowerShell](assign-policy-definition-ps.md) (Создание назначения политики для определения несоответствующих ресурсов в среде Azure с помощью PowerShell)
- См. дополнительные сведения о группе управления в разделе [Упорядочение ресурсов с помощью групп управления Azure](../azure-resource-manager/management-groups-overview.md)
- См. [Govern your Azure environment through Azure Policy](https://channel9.msdn.com/events/Build/2018/THR2030) (Система управления средой Azure с помощью службы "Политика Azure") на канале Channel 9