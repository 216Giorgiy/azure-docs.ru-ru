---
title: Продажа SaaS с помощью Azure | Документация Майкрософт
description: Описание модели выставления счетов в подписке за приложения SaaS и реализации этой модели.
services: Azure, Marketplace, Cloud Partner Portal,
documentationcenter: ''
author: v-miclar
manager: Patrick.Butler
editor: ''
ms.assetid: ''
ms.service: marketplace
ms.workload: ''
ms.tgt_pltfrm: ''
ms.devlang: ''
ms.topic: conceptual
ms.date: 09/17/2018
ms.author: pbutlerm
ms.openlocfilehash: f193138fbc5e779c3a6671757320d8918e08db46
ms.sourcegitcommit: 9eaf634d59f7369bec5a2e311806d4a149e9f425
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/05/2018
ms.locfileid: "48808094"
---
<a name="saas---sell-through-azure"></a>Продажа SaaS с помощью Azure
=========================

В этой статье предоставлено описание модели выставления счетов в подписке за приложения SaaS и реализации этой модели на Портале Cloud Partner.


<a name="overview"></a>Обзор
--------

Azure Marketplace позволяет публиковать и монетизировать предложения SaaS. Теперь ваши клиенты будут получить счета напрямую от Azure, то есть получать один общий счет Azure за все используемые ресурсы и (или) службы. Подписки SaaS предоставляют следующие преимущества для публикации.

-   **Единообразие интерфейса публикации** — если вы уже публикуете предложения SaaS или другие предложения в Azure Marketplace, процесс публикации и портал публикации вам уже знакомы.
-   **Новый онлайн-магазин для исследования** — все опубликованные предложения будут доступны как во внешнем онлайн-магазине Azure Marketplace, так и в расширении Azure Marketplace на портале Azure.
-   **Интегрированное выставление счетов** — теперь вы выходите одновременно во все регионы, где продается Azure, а платформа Azure возьмет на себя все операции со счетами.
-   **Интегрированное привлечение клиентов** — теперь вы можете автоматически получать сведения о потенциальных клиентах из Azure в любую CRM каждый раз, когда пользователь Azure подписывается на вашу службу SaaS через Azure Marketplace.
-   **Совместные продажи с продавцами Майкрософт** — выполнив необходимые требования, вы получите право на двунаправленный обмен потенциальными клиентами, приоритетные описания в каталоге, взаимодействие и заключение совместных сделок с официальными продавцами корпорации Майкрософт.

<a name="billing-models"></a>Модели выставления счетов
--------------

Поддерживается только одна модель выставления счетов — фиксированная ежемесячная плата за каждую подписку на службу SaaS.

**Примечание.** В будущем могут быть добавлены другие модели выставления счетов.

Каждое предложение SaaS может включать один или несколько планов (например, Basic и Premium). С каждым планом связываются базовые метаданные и цена.

Определение плана полностью зависит только от вас. Можно ли получить пример плана Basic? План определяется только вами, и при публикации плана вы можете включить текст с его подробным описанием.

Связанная с планом стоимость выражается в фиксированной плате, которую пользователи Azure будут ежемесячно платить за использование этой службы.

### <a name="what-is-not-supported-today"></a>Что сейчас еще не поддерживается?

-   Выставление счетов за пользовательские единицы измерения, например фиксированная цена за определенное количества запросов.
-   Выставление счетов за выделенные рабочие места, например приобретение пользователями Azure лицензий с указанием количества пользователей.

<a name="end-to-end-flow"></a>Полный поток процесса
---------------

Подписка SaaS представляет поток с точки зрения пользователя

**Примечание.** В описании этого потока предполагается, что вы опубликовали в Azure Marketplace предложение SaaS с именем "Contoso demo SaaS".

![Поток пользователя для подписки SaaS](media/saas-offer-subscription/saas-subscription-user-flow.png)

Пользователь Azure может выполнять следующие взаимодействия со службой SaaS:

-   обнаруживать службу SaaS в Azure Marketplace;
-   подписываться на службу SaaS в Azure;
-   переходить к службе SaaS с портала Azure;
-   создавать учетную запись в службе SaaS и управлять ею (изменять план, удалять);
-   отменять подписку на службу SaaS с портала Azure;

<a name="discover-your-saas-service-in-azure-marketplace"></a>Обнаружение службы SaaS в Azure Marketplace
-----------------------------------------------

Пользователь, открывающий Azure Marketplace на портале Azure, найдет там категорию с именем "Программное обеспечение как услуга (SaaS)".

![Обнаружение SaaS через меню категории](media/saas-offer-subscription/saas-category-menu.png)

Также пользователь может выполнять поиск службы SaaS.

![Обнаружение SaaS с помощью поиска](media/saas-offer-subscription/saas-cpp-search.png)

Затем пользователь сможет просмотреть сведения о службе и выбрать действие **Создать**.

![Создание подписки SaaS](media/saas-offer-subscription/saas-create-subscription.png)

### <a name="subscribe-to-saas-service-in-azure"></a>Подписка на службу SaaS в Azure

Пользователь может оформить подписку на службу SaaS из Azure.

![Подписка на службу SaaS](media/saas-offer-subscription/saas-subscribe-signup.png)

Когда пользователь подписывается на службу SaaS, он предоставляет следующие сведения.

-   Name — имя, которое могут обнаруживать другие пользователи и (или) использовать для управления этим экземпляром подписки SaaS в Azure.
-   Subscription — контекст подписки, с которым будет связано выставление счетов за эту службу SaaS.
-   Plan — план обслуживания SaaS, на который оформляется подписка.

Также перед оформлением подписки на службу SaaS пользователю предоставляется документ с условиями использования, который был предоставлен при публикации предложения.

Теперь пользователь может подписаться на службу, щелкнув **Подписаться**.
Когда подписка будет завершена, Azure отображает на портале уведомление.

### <a name="navigate-to-the-saas-service-from-azure-portal"></a>Переход к службе SaaS с портала Azure

Щелкнув действие **Перейти к ресурсу**, пользователь переходит к просмотру экземпляра подписки SaaS и (или) управлению им.

![Просмотр экземпляра SaaS и управление им](media/saas-offer-subscription/saas-go-to-resource.png)

Пользователь получит сообщение, что прежде всего нужно настроить в службе SaaS учетную запись. Выставление счетов начинается после того, как служба SaaS уведомляет Azure о начале использования, то есть о создании пользователем учетной записи на сайте службы SaaS в Azure.

![Настройка экземпляра службы SaaS](media/saas-offer-subscription/saas-configure-account.png)

Когда пользователь выбирает действие **Настройка учетной записи**, он направляется на конечную точку службы SaaS. При перенаправлении в параметре запроса передается маркер. Например: 

![Маркер учетной записи SaaS](media/saas-offer-subscription/saas-account-token.png)

Обратите внимание на значение этого маркера. Он имеет короткий срок жизни и должен правильно разрешаться для получения идентификатора подписки в Azure.

<a name="creating-a-saas-offer-subscription"></a>Создание подписки на предложение SaaS
----------------------------------

Чтобы создать этот механизм, нужно выполнить два рабочих процесса.

-   Подключить веб-сайт службы SaaS к API-интерфейсам SaaS корпорации Майкрософт. Создания такого подключения описано в документе [SaaS Sell through Azure - APIs](./cloud-partner-portal-saas-subscription-apis.md) (Продажа SaaS с помощью Azure — API-интерфейсы).  
-   Включите функцию **Продажа через Azure** на Портале Cloud Partner в разделе **Технические сведения** и предоставьте все сведения о конфигурации.

![Технические сведения о новом предложении SaaS](media/cpp-creating-saas-offers/saas-new-offer-technical-info-2.png)

Ниже приводится описание всех обязательных полей для раздел **Технические сведения**.

|  **Поля предложения**                 |  **Описание**                                   |
|  ----------------                 |  -------------------------------------             |
| Идентификаторы подписок для предварительного просмотра          | Идентификаторы всех подписок Azure, которые будут использоваться для тестирования предложения в предварительной версии, прежде чем оно станет общедоступным. |
| Инструкции по началу работы      | Инструкции, которые вы предоставите клиентам для помощи в подключении к приложению SaaS. Допускается использование базового синтаксиса HTML, например тегов `<p>`, `<h1>`, `<li>` и т. д.  |
| URL-адрес целевой страницы                  | URL-адрес сайта, на который вы будете направлять клиентов при переходе с портала Azure. Этот же URL-адрес выполняет роль конечной точки, где будут размещены API-интерфейсы подключения для совместного бизнеса с корпорацией Майкрософт.  |
| Веб-перехватчик подключения                | Для всех асинхронных событий, которые корпорация Майкрософт может отправлять вам от имени клиента (например, о прекращении действия подписки Azure), нам нужно предоставить веб-перехватчик подключения. Если вы еще не используете систему веб-перехватчиков, проще всего настроить конечную точку HTTP для приложения логики, которое будет прослушивать все поступающие на нее события и обрабатывать их соответствующим образом.  Подробнее см. статью [Вызовы, срабатывания триггеров и создание вложенных рабочих процессов в приложениях логики](https://docs.microsoft.com/azure/logic-apps/logic-apps-http-endpoint). |
| Идентификатор клиента Azure AD и идентификатор приложения     | На портале Azure необходимо создать приложение Active Directory, чтобы мы могли проверять аутентификацию для подключения между нашими службами. Для заполнения этих полей создайте приложение AD и получите из него необходимый идентификатор клиента и идентификатор приложения. |
|  |  |


Если же вы установили флажок **Sell through Azure** (Продавать через Azure), появится дополнительный раздел **Планы**. Планы нужно создавать только в том случае, если выбрана продажа через Azure. В этом разделе перечислены планы и цены для них, которые поддерживает приложение SaaS. На данный момент мы поддерживаем только фиксированную ежемесячную оплату с возможностью разрешить бесплатный доступ на 1 или 3 месяца. Все планы и цены должны строго соответствовать тем планам и ценам, которые указаны на вашем сайте этого приложения SaaS.
