---
title: "Загрузка данных в хранилище данных SQL Azure с помощью фабрики данных Azure| Документация Майкрософт"
description: "Копирование данных в Azure Data Lake Store в хранилище данных SQL Azure"
services: data-factory
documentationcenter: 
author: linda33wj
manager: jhubbard
editor: spelluru
ms.service: data-factory
ms.workload: data-services
ms.topic: article
ms.date: 01/17/2018
ms.author: jingwang
ms.openlocfilehash: 36e24da50386d1abc441e2beb09f570a9612a346
ms.sourcegitcommit: 828cd4b47fbd7d7d620fbb93a592559256f9d234
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/18/2018
---
# <a name="load-data-into-azure-sql-data-warehouse-using-azure-data-factory"></a>Загрузка данных в хранилище данных SQL Azure с помощью фабрики данных Azure

[Хранилище данных SQL Azure](../sql-data-warehouse/sql-data-warehouse-overview-what-is.md) — это развернутая в облаке база данных, способная обрабатывать большие объемы реляционных и нереляционных данных.  Благодаря реализованной архитектуре вычислений с массовым параллелизмом (MPP) хранилище данных SQL оптимизировано для рабочих нагрузок хранилища корпоративных данных.  Оно предоставляет эластичность облака и гибкие возможности масштабирования хранилища и вычислительной мощности независимо друг от друга.

Приступить к работе с хранилищем данных SQL Azure теперь проще, чем когда-либо, с помощью **фабрики данных Azure**.  Фабрика данных Azure — это полностью управляемая облачная служба интеграции данных, которую можно использовать для заполнения хранилища данных SQL данными из существующей системы, экономя ценное время при оценке хранилища данных SQL и создании решений на основе его аналитики. Ниже приведены ключевые преимущества загрузки данных в хранилище данных SQL Azure с помощью фабрики данных Azure.

* **Простота настройки**: вам доступен 5-этапный интуитивно понятный мастер без необходимости создавать сценарии.
* **Расширенная поддержка хранилищ данных.** Встроенная поддержка обширного набора локальных и облачных хранилищ. Полный список см. в таблице [поддерживаемых хранилищ данных](copy-activity-overview.md#supported-data-stores-and-formats).
* **Безопасность и совместимость**: данные передаются по протоколу HTTPS или ExpressRoute, а наличие глобальной службы гарантирует, что ваши данные никогда не покинут заданных географических границ.
* **Беспрецедентная производительность благодаря PolyBase.** Применение Polybase является наиболее эффективным способом перемещения данных в хранилище данных SQL Azure. Используя функцию промежуточных больших двоичных объектов, можно достичь высокой скорости загрузки данных из хранилищ всех типов, а не только из хранилища BLOB-объектов Azure и Data Lake Store, которое по умолчанию поддерживается Polybase. Дополнительные сведения см. в статье [Руководство по настройке производительности действия копирования](copy-activity-performance.md).

В этой статье показано, как с помощью средства копирования данных фабрики данных **загружать данные из базы данных SQL Azure в хранилище данных SQL Azure**. Для копирования данных из других типов хранилищ данных необходимо выполнить аналогичные шаги.

> [!NOTE]
>  В статье [Копирование данных в хранилище данных Azure SQL и из него с помощью фабрики данных Azure](connector-azure-sql-data-warehouse.md) приведены общие сведения о возможностях фабрики данных по копированию данных в хранилище данных SQL Azure и из него.
>
> Эта статья относится к версии 2 фабрики данных, которая в настоящее время доступна в предварительной версии. Если используется служба фабрики данных версии 1, которая является общедоступной версией, ознакомьтесь со статьей [Move data by using Copy Activity](v1/data-factory-data-movement-activities.md) (Перемещение данных с помощью действия копирования).

## <a name="prerequisites"></a>предварительным требованиям

* **Подписка Azure**. Если у вас еще нет подписки Azure, создайте [бесплатную](https://azure.microsoft.com/free/) учетную запись Azure, прежде чем начинать работу.
* **Хранилище данных Azure SQL.** Это хранилище данных содержит данные, копируемые из базы данных SQL. Если у вас нет хранилища данных SQL Azure, выполните шаги из раздела [Создание хранилища данных SQL](../sql-data-warehouse/sql-data-warehouse-get-started-tutorial.md).
* **База данных SQL Azure**. В этом руководстве данные копируются из базы данных SQL Azure с использованием примера данных Adventure Works LT, который можно создать, следуя инструкциям, приведенным в статье [Создание базы данных SQL Azure на портале Azure](../sql-database/sql-database-get-started-portal.md). 
* **Учетная запись хранения Azure.** Служба хранилища Azure используется в качестве **промежуточного** большого двоичного объекта в операции массового копирования. Если у вас нет учетной записи хранения Azure, ознакомьтесь с разделом [Создание учетной записи хранения](../storage/common/storage-create-storage-account.md#create-a-storage-account).

## <a name="create-a-data-factory"></a>Создание фабрики данных

1. Щелкните **Создать** в меню слева, выберите **Данные+аналитика** и щелкните **Фабрика данных**. 
   
   ![Создать -> Фабрика данных](./media/load-azure-sql-data-warehouse/new-azure-data-factory-menu.png)
2. На странице **Новая фабрика данных** задайте значения, как показано на следующем снимке экрана:
      
     ![Страница "Новая фабрика данных"](./media/load-azure-sql-data-warehouse/new-azure-data-factory.png)
 
   * **Name** (Имя). Введите глобальное уникальное имя фабрики данных. При возникновении указанной ниже ошибки измените имя фабрики данных (например, на ваше_имя_ADFTutorialDataFactory) и попробуйте создать фабрику данных снова. Ознакомьтесь со статьей [Фабрика данных Azure — правила именования](naming-rules.md), чтобы узнать правила именования для артефактов службы "Фабрика данных".
  
            `Data factory name "LoadSQLDWDemo" is not available`

    * **Subscription** (Подписка). Выберите **подписку** Azure, в рамках которой вы хотите создать фабрику данных. 
    * **Resource Group** (Группа ресурсов). Выберите имеющуюся группу ресурсов из раскрывающегося списка или щелкните вариант **Создать новую** и введите имя группы ресурсов. Сведения о группах ресурсов см. в статье, где описывается [использование групп ресурсов для управления ресурсами Azure](../azure-resource-manager/resource-group-overview.md).  
    * **Version** (Версия). Выберите **V2 (Preview)** (V2 (предварительная версия)).
    * **Местоположение**. Укажите расположение фабрики данных. В раскрывающемся списке отображаются только поддерживаемые расположения. Хранилища данных (служба хранилища Azure, база данных SQL Azure и т. д.), используемые фабрикой данных, могут находиться в других расположениях или регионах. 

3. Нажмите кнопку **Создать**.
4. Когда завершится создание, перейдите в фабрику данных и откроется страница **Фабрика данных**, как показано на рисунке ниже. Щелкните плитку **Author & Monitor** (Создание и мониторинг), чтобы открыть на отдельной вкладке приложение интеграции данных.
   
   ![Домашняя страница фабрики данных](./media/load-azure-sql-data-warehouse/data-factory-home-page.png)

## <a name="load-data-into-azure-sql-data-warehouse"></a>Загрузка данных в хранилище данных Azure SQL

1. На странице начала работы щелкните плитку **Копировать данные**, чтобы запустить средство копирования данных. 

   ![Плитка средства копирования данных](./media/load-azure-sql-data-warehouse/copy-data-tool-tile.png)
2. На странице **свойств** для средства копирования данных укажите **CopyFromSQLToSQLDW** в качестве **имени задачи** и щелкните **Далее**. 

    ![Средство копирования данных — страница свойств](./media/load-azure-sql-data-warehouse/copy-data-tool-properties-page.png)
3. На странице **исходного хранилища данных** выберите **базу данных SQL Azure** и щелкните **Далее**.

    ![Страница исходного хранилища данных](./media/load-azure-sql-data-warehouse/specify-source.png)
4. На странице **Specify the Azure SQL database** (Выбор базы данных SQL Azure) выполните следующие действия. 
    1. Выберите нужный сервер Azure SQL в списке **Server name** (Имя сервера).
    2. Выберите базу данных Azure SQL в списке **Database name** (Имя базы данных).
    3. Укажите имя пользователя в поле **User name** (Имя пользователя).
    4. Укажите пароль для этого пользователя в поле **Password** (Пароль).
    5. Нажмите кнопку **Далее**. 

        ![Выбор базы данных SQL Azure](./media/load-azure-sql-data-warehouse/specify-source-connection.png)
5. На странице **Select tables from which to copy the data or use a custom query** (Выберите таблицы, из которых нужно скопировать данные, или введите пользовательский запрос) отфильтруйте таблицы, указав **SalesLT** в поле ввода, а затем проверьте установлен ли флажок **(Выбрать все)** для выбора всех таблиц и щелкните **Далее**. 

    ![Выбор файла или папки входных данных](./media/load-azure-sql-data-warehouse/select-source-tables.png)

6. На странице **целевого хранилища данных** выберите **Хранилище данных SQL Azure** и щелкните **Далее**. 

    ![Страница целевого хранилища данных](./media/load-azure-sql-data-warehouse/specify-sink.png)
7. На странице **Specify the Azure SQL Data Warehouse** (Выбор хранилища данных SQL Azure) выполните следующие действия. 

    1. Выберите нужный сервер Azure SQL в списке **Server name** (Имя сервера).
    2. Выберите хранилище данных SQL Azure в поле **Имя базы данных**.
    3. Укажите имя пользователя в поле **User name** (Имя пользователя).
    4. Укажите пароль для этого пользователя в поле **Password** (Пароль).
    5. Нажмите кнопку **Далее**. 

        ![Выбор хранилища данных SQL Azure](./media/load-azure-sql-data-warehouse/specify-sink-connection.png)
8. На странице **Сопоставление таблицы** выполните проверку и щелкните **Далее**. Отобразится интеллектуальное сопоставление таблиц, которое позволяет связать исходные и целевые таблицы на основе имен таблиц. Если таблица не существует в пункте назначения, по умолчанию фабрика данных Azure создаст таблицу с таким же именем. Вы также можете сопоставить имеющуюся таблицу. 

    > [!NOTE]
    > Автоматическое создание таблицы для приемника хранилища данных SQL применяется, когда SQL Server или база данных SQL Azure является источником. При копировании данных из другого источника хранилища данных необходимо предварительно создать схему в приемнике хранилища данных SQL Azure.

    ![Страница сопоставления таблиц](./media/load-azure-sql-data-warehouse/specify-table-mapping.png)

9. На странице **Сопоставление схемы** выполните проверку и нажмите кнопку **Далее**. Интеллектуальное сопоставление основано на имени столбца. Если включить функцию автоматического создания таблиц, в фабрике данных может выполняться преобразование типов данных. Это позволяет устранить несовместимость между исходными и целевыми хранилищами. Если между исходным и целевым столбцами обнаружится преобразование неподдерживаемого типа данных, появится сообщение об ошибке с указанием на соответствующую таблицу.

    ![Страница сопоставления схем](./media/load-azure-sql-data-warehouse/specify-schema-mapping.png)

11. На странице **Параметры** выберите службу хранилища Azure из раскрывающегося списка **Имя учетной записи хранения**. Оно используется для промежуточного хранения данных перед загрузкой в хранилище данных SQL Azure с помощью PolyBase. После завершения копирования промежуточные данные в хранилище будут удалены автоматически. 

    В разделе "Дополнительные настройки" снимите флажок Use type default (Использовать тип по умолчанию).

    ![Страница «Параметры»](./media/load-azure-sql-data-warehouse/copy-settings.png)
12. На странице **Summary** (Сводка) проверьте все настройки и щелкните **Next** (Далее).

    ![Страница "Сводка"](./media/load-azure-sql-data-warehouse/summary-page.png)
13. На **странице развертывания** щелкните **Monitor** (Мониторинг), чтобы отслеживать созданный конвейер (задачу).

    ![Страница развертывания](./media/load-azure-sql-data-warehouse/deployment-page.png)
14. Обратите внимание, что слева автоматически выбирается вкладка **Мониторинг**. В столбце **действий** отображаются ссылки для просмотра сведений о запусках действий и (или) повторного выполнения конвейере. 

    ![Мониторинг выполнений конвейера](./media/load-azure-sql-data-warehouse/monitor-pipeline-run.png)
15. Чтобы просмотреть сведения о выполнении действий, связанных с этим запуском конвейера, щелкните ссылку **View Activity Runs** (Просмотр сведений о выполнении действий) в столбце **Действия**. В конвейере есть 10 действий копирования, каждое копирует одну таблицу с данными. Чтобы вернуться к представлению запусков конвейера, щелкните ссылку **Pipelines** (Конвейеры) в верхней части окна. Щелкните **Refresh** (Обновить), чтобы обновить этот список. 

    ![Мониторинг выполнений действий](./media/load-azure-sql-data-warehouse/monitor-activity-run.png)

16. Дополнительно можно отслеживать сведения о выполнении каждого действия копирования, щелкнув ссылку **Подробности** в разделе **Действия** в представлении мониторинга действия. Оно содержит сведения, включая объем данных, копируемых из источника в приемник, пропускную способность, действия, которые выполняются для него с соответствующей длительностью и используемыми параметрами.

    ![Мониторинг сведений о выполнении действия](./media/load-azure-sql-data-warehouse/monitor-activity-run-details.png)

## <a name="next-steps"></a>Дополнительная информация

Перейдите к следующей статье, чтобы узнать о поддержке хранилища данных SQL Azure: 

> [!div class="nextstepaction"]
>[Перемещение данных в хранилище данных Azure SQL и из него с помощью фабрики данных Azure](connector-azure-sql-data-warehouse.md).