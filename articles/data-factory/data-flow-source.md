---
title: Сопоставление источников в компоненте сопоставления потоков данных в Фабрике данных Azure
description: Сопоставление источников в компоненте сопоставления потоков данных в Фабрике данных Azure
author: kromerm
ms.author: makromer
ms.reviewer: douglasl
ms.service: data-factory
ms.topic: conceptual
ms.date: 02/12/2019
ms.openlocfilehash: 20491981cb02e428ff4114b9456d74b0de651be8
ms.sourcegitcommit: dd1a9f38c69954f15ff5c166e456fda37ae1cdf2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/07/2019
ms.locfileid: "57569031"
---
# <a name="mapping-data-flow-source-transformation"></a>Преобразование источников в компоненте сопоставления потоков данных

[!INCLUDE [notes](../../includes/data-factory-data-flow-preview.md)]

Функция преобразования источников позволяет настроить источник данных для переноса данных в поток данных. У вас может быть несколько преобразований источников в одном потоке данных. Всегда начинать проектирование ваши потоки данных с помощью преобразования исходного.

> [!NOTE]
> Для каждого потока данных требуется как минимум одно преобразование источников. Добавьте столько дополнительных источников, сколько требуется для завершения преобразований данных. Вы можете соединить эти источники с помощью преобразования соединения или объединения. При отладке потока данных в сеансах отладки, будут считываться данные из источника с помощью параметра выборки или ограничения отладки источника. Тем не менее данные не будут записаны в приемник, до выполнения потока данных из действия конвейера потока данных. 

![Параметры преобразования источников](media/data-flow/source.png "источник")

Каждое преобразование потока данных источника должен быть сопоставлен только один набор данных фабрики данных. Набор данных определяет форму и расположения данных для записи или чтения из. Можно использовать подстановочные знаки и файл списки в источнике для работы с более чем одного файла за раз при использовании источников файлов.

## <a name="data-flow-staging-areas"></a>Промежуточные области потока данных

Поток данных работает с промежуточными наборами данных, которые находятся в Azure. Эти наборы данных потока данных используются для промежуточного хранения данных, необходимых для преобразований данных. Фабрика данных имеет доступ к почти 80 различным собственным соединителям. Чтобы добавить данные из этих других источников в свой поток данных, сначала поместите эти данные в одну из промежуточных областей набора данных в потоке данных с помощью действия копирования.

## <a name="options"></a>Параметры

### <a name="allow-schema-drift"></a>Разрешение смещения схемы
Выберите Allow Schema Drift (Разрешить смещение схемы), если столбцы источника будут часто изменяться. Этот параметр позволит всем входящим полям из вашего источника проходить через преобразования в приемник.

### <a name="validate-schema"></a>Проверка схемы

![Открытый источник](media/data-flow/source1.png "открытый источник 1")

Если входящая версия исходных данных не соответствует определенной схеме, выполнение потока данных завершится ошибкой.

### <a name="sampling"></a>Выборка
Используйте выборку, чтобы ограничить количество записей, поступающих из источника.  Это полезно при тестировании или выборки данных из источника для целей отладки.

## <a name="define-schema"></a>Определение схемы

![Преобразование источников](media/data-flow/source2.png "источник 2")

Для типов исходных файлов, которые не являются строго типизированными (например, неструктурированные файлы, отличающиеся от файлов Parquet), необходимо определить типы данных для каждого поля в преобразовании источников. Впоследствии можно изменить имена столбцов в преобразовании выбора и типы данных в преобразовании производного столбца. 

![Преобразование источников](media/data-flow/source003.png "типы данных")

Для источников со строгой типизацией можно изменить типы данных в последующих выберите преобразование. 

### <a name="optimize"></a>Оптимизация

![Исходные секции](media/data-flow/sourcepart.png "секционирование")

На вкладке Optimize (Оптимизация) для преобразования источников отобразится дополнительный тип секционирования, называемый Source. Он светится только в том случае, если в качестве источника выбрана база данных SQL Azure. Это связано с тем, что ADF будет параллельно устанавливать соединения для выполнения больших запросов к базе данных-источнику SQL Azure.

Секционирование данных в базе данных-источнике SQL необязательно, но полезно для больших запросов. Существует два варианта.

### <a name="column"></a>столбец

Выберите из исходной таблицы столбец для секционирования. Необходимо также задать максимальное количество подключений.

### <a name="query-condition"></a>Условие запроса

При необходимости можно секционировать подключения на основе запроса. Для этого просто введите содержимое предиката WHERE. Например, year > 1980.

## <a name="source-file-management"></a>Управление исходными файлами
![Новые параметры источника](media/data-flow/source2.png "новые параметры")

* Введите путь со знаками подстановки для выбора из исходной папки ряда файлов, соответствующих шаблону. Это переопределяет любой файл, который вы задали в определении набора данных.
* Предоставьте список файлов. То же, что и набор файлов. Укажите созданный текстовый файл со списком относительных путей файлов для обработки.
* Введите столбец для хранения имени файла из источника в ваших данных. Укажите здесь новое имя для хранения строки имени файла.
* Выберите, что делать по завершении: ничего не делать с исходным файлом после выполнения потока данных, удалить или переместить исходные файлы. Пути для перемещения являются относительными.

### <a name="sql-datasets"></a>Наборы данных SQL

При использовании базы данных SQL Azure или Хранилища данных SQL Azure в качестве источника доступны дополнительные параметры.

* Запрос: Введите SQL-запрос для своего источника. При установке запроса будет переопределена любая таблица, выбранная в наборе данных. Обратите внимание, что предложения Order By здесь не поддерживаются.

* Размер пакета. Введите размер пакета, чтобы большие наборы данных разделялись на пакеты для чтения.

> [!NOTE]
> Параметры файловой операции будут выполняться только в том случае, если поток данных выполняется из запуска конвейера (отладка конвейера или запуск выполнения) с использованием действия выполнения потока данных в конвейере. Файловые операции НЕ выполняются в режиме отладки потока данных.

### <a name="projection"></a>Проекция

![Проекция](media/data-flow/source3.png "проекция")

Как и схемы в наборах данных, проекция источника определяет столбцы, типы и форматы исходных данных. Если у вас есть текстовый файл без определенной схемы, щелкните "Определить тип данных", чтобы служба ADF попыталась выполнить выборку и определить типы данных. Вы можете установить форматы данных по умолчанию для автоматического определения с помощью кнопки Define Default Format (Определить формат по умолчанию) и изменить типы данных столбца в последующем преобразовании производного столбца. Имена столбцов можно изменить с помощью преобразования выбора.

![Форматы по умолчанию](media/data-flow/source2.png "форматы по умолчанию")

## <a name="next-steps"></a>Дальнейшие действия

Приступите к созданию преобразований данных с помощью преобразования [производного столбца](data-flow-derived-column.md) и преобразования [выбора](data-flow-select.md).
