<properties 
	pageTitle="Вариант использования фабрики данных: система рекомендации товаров" 
	description="Сведения о решении, в котором используется фабрика данных Azure и другие службы." 
	services="data-factory" 
	documentationCenter="" 
	authors="spelluru" 
	manager="jhubbard" 
	editor="monicar"/>

<tags 
	ms.service="data-factory" 
	ms.workload="data-services" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="04/01/2016" 
	ms.author="spelluru"/>

# Вариант использования: система рекомендации товаров 

Фабрика данных Azure — одна из многочисленных служб, используемых для внедрения набора аналитических инструментов Cortana Intelligence Suite для ускорителей решений. Подробные сведения об этом наборе см. на странице [Cortana Intelligence Suite](http://www.microsoft.com/cortanaanalytics). В этой статье мы рассмотрим проверенное и реализованное многими пользователями Azure решение, в котором используется фабрика данных Azure и другие службы компонентов Cortana Intelligence.

## Сценарий

Как правило, интернет-магазины пытаются привлечь клиентов, предлагая им те товары, которые заинтересуют их с наибольшей вероятностью и, следовательно, которые они скорее всего купят. Для этого продавцам необходимо настроить показ товаров на сайте, используя персонализированные рекомендации товаров для конкретного пользователя. Продавцы должны учитывать исторические и текущие данные о покупательском поведении, сведения о товарах и новых торговых марках, а также данные о сегментации товаров и клиентов. Все это позволит предложить клиенту наиболее интересную для него продукцию. Кроме того, продавцы могут рекомендовать пользователям товары, основываясь на результатах анализа обобщенного покупательского поведения всех пользователей.

Цель таких продавцов — оптимизировать конверсию просмотров в продажи и получить более высокий доход. Они добиваются этого, предоставляя контекстные рекомендации товаров, основанные на покупательском поведении, интересах и действиях клиента. В данном случае мы используем интернет-магазины в качестве примера компаний, которые стараются подстраиваться под своих клиентов. Эти же принципы относятся к любой компании, которая хочет привлечь клиентов к своим товарам и услугам и улучшить процесс покупки, предоставляя клиентам персонализированные рекомендации.

## Сложности

Интернет-магазины сталкиваются со множеством трудностей при попытке реализовать такую модель. Во-первых, им необходимо получать данные разных объемов и типов из различных источников, как локальных, так и облачных. Это, в частности, данные о товаре, исторические данные о поведении клиента и данные о просмотре пользователем сайта интернет-магазина.

Во-вторых, подбор и прогнозирование персонализированных рекомендаций должны быть объективными и точными. Помимо данных о товарах, марках, покупательском поведении и просмотренных клиентом страницах интернет-магазину также необходимо учитывать отзывы о товарах, оставленные другими покупателями. Вместе эти данные позволят подобрать лучшие рекомендации для каждого конкретного пользователя.

В-третьих, пользователи должны мгновенно получать эти рекомендации. Это не только сделает процесс работы с сайтом более удобным, а процедуру покупки более простой, но и позволит пользователям получать наиболее актуальные и релевантные рекомендации. И наконец, продавцам нужно оценивать эффективность такого подхода посредством отслеживания количества успешных дополнительных и перекрестных продаж (конверсия просмотров в продажи) и корректировать последующие рекомендации.

## Обзор решения

Этот пример решения испытан и реализован реальными пользователями Azure. Для получения, подготовки, преобразования, анализа и публикации окончательных данных в нем используется фабрика данных Azure и другие службы компонентов Cortana Intelligence, включая [HDInsight](https://azure.microsoft.com/services/hdinsight/) и [Power BI](https://powerbi.microsoft.com/).

Для хранения данных на протяжении всего рабочего процесса интернет-магазин использует хранилище BLOB-объектов Azure, локальный сервер SQL, базу данных SQL Azure и киоск реляционных данных. Хранилище BLOB-объектов содержит данные о клиентах, их поведении и сведения о товарах. Информация о товарах — это, в частности, сведения о торговых марках и каталоге товаров, который храниться локально в хранилище данных SQL.

Как показано на рисунке ниже, все данные объединяются и передаются в систему рекомендаций товаров, которая затем предоставляет персонализированные рекомендации на основе интересов и действий клиента, когда он просматривает товары в каталоге на веб-сайте магазина. Клиенту также показываются похожие товары, которые могут иметь отношение к просматриваемой позиции, на основании общих моделей использования веб-сайта, не относящихся к конкретному пользователю.

![схема решения](./media/data-factory-product-reco-usecase/diagram-1.png)

Ежедневно с веб-сайта интернет-магазина передаются гигабайты необработанных веб-журналов в виде частично структурированных файлов. Необработанные веб-журналы и сведения о каталогах клиентов и товаров регулярно отправляются в учетную запись хранилища BLOB-объектов Azure. Для этого в фабрике данных используется глобально развернутая служба перемещения. Необработанные веб-журналы за день группируются (по году и месяцу) в хранилище BLOB-объектов для долговременного хранения. [Azure HDInsight](https://azure.microsoft.com/services/hdinsight/) (Hadoop как услуга) группирует необработанные файлы журналов (для более высокой управляемости, доступности и производительности) в хранилище BLOB-объектов и обрабатывает полученные объемы с помощью сценариев Hive и Pig. Из сгруппированных данных веб-журналов затем извлекаются необходимые сведения, которые передаются в систему рекомендаций. С помощью машинного обучения эти данные обрабатываются, и на их основе система предлагает персонализированные рекомендации.

В этом примере для машинного обучения используется открытая платформа рекомендаций [Apache Mahout](http://mahout.apache.org/). Вместо нее можно использовать [службы машинного обучения Azure](https://azure.microsoft.com/services/machine-learning/) или любую другую модель. Модель Mahout используется для определения сходства между элементами на веб-сайте интернет-магазина на основе общей модели использования веб-сайта, а также для создания персонализированных рекомендаций, основанных на данных о конкретном пользователе.

Наконец, финальный набор персонализированных рекомендаций перемещается в киоск реляционных данных, откуда его и берет веб-сайт интернет-магазина. Для других приложений финальный набор также может быть доступен непосредственно в хранилище BLOB-объектов. Кроме того, для других потребителей и вариантов использования набор можно переместить в дополнительные хранилища.

## Преимущества

Вследствие оптимизации стратегии по рекомендациям товаров и ее согласования с целями предприятия решение позволило интернет-магазину достичь своих целей в области сбыта и маркетинга. Кроме того, продавец смог организовать систему рекомендаций и получил инструменты, которые позволяют не только эффективно и надежно управлять ею без лишних затрат, но и постоянно оптимизировать имеющуюся модель на основе данных о конверсии просмотров в продажи. Использование фабрики данных Azure дало возможность отказаться от ручного управления облачными ресурсами, которое сопряжено с высокими затратами времени и ресурсов, и перейти к модели управления облачными ресурсами по требованию. Это позволило сэкономить время и деньги, а также сократить сроки развертывания решения. Благодаря удобному пользовательскому интерфейсу фабрики данных для мониторинга и управления на портале Azure стало проще визуализировать представления журнала преобразований данных и устранять неполадки в работе службы. Теперь решение может постоянно выдавать готовые данные и доставлять их пользователям. При этом управление данными и обработка зависимостей осуществляются автоматически без человеческого вмешательства.

Внедрив такой персонализированный подход, интернет-магазин предложил своим клиентам более увлекательный процесс покупок. За счет этого повысилась конкурентоспособность бизнеса и появились условия для роста продаж и общей удовлетворенности клиентов.



  

<!---HONumber=AcomDC_0427_2016-->