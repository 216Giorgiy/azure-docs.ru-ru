<properties 
	pageTitle="Создание наборов данных" 
	description="Изучите наборы данных фабрики данных Azure и узнайте, как их создавать." 
	services="data-factory" 
	documentationCenter="" 
	authors="spelluru" 
	manager="jhubbard" 
	editor="monicar"/>

<tags 
	ms.service="data-factory" 
	ms.workload="data-services" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="01/26/2016" 
	ms.author="spelluru"/>

# Наборы данных

## Описание
Набор данных — это логическое описание данных. Описываемые данные могут варьироваться от простых байтов и частично структурированных данных, таких как CSV-файлы, вплоть до реляционных таблиц и моделей. Механизм доступа к данным (адрес, протокол, метод проверки подлинности) определяется в связанной службе, ссылка на которую указывается в определении набора данных.

## Синтаксис

	{
	    "name": "<name of dataset>",
	    "properties":
	    {
	       "structure": [ ],
	       "type": "<type of dataset>",
			"external": <boolean flag to indicate external data>,
	        "typeProperties":
	        {
	        },
	        "availability":
	        {
	
	        },
	       "policy": 
	        {      
	
	        }
	    }
	}

**Сведения о синтаксисе**

| Свойство | Описание | Обязательное | По умолчанию |
| -------- | ----------- | -------- | ------- |
| name | Имя набора данных. | Да | — |
| structure | <p>Схема набора данных.</p><p>Подробные сведения см. в разделе [Структура набора данных](#Structure).</p> | Нет | — |
| type | Тип набора данных. | Да | Нет данных |
| typeProperties | <p>Свойства, соответствующие выбранному типу.</p><p>Сведения о поддерживаемых типах и их свойствах см. в разделе [Тип набора данных](#Type).</p> | Да | Нет данных |
| external | Логический флаг, указывающий, создается ли набор данных конвейером фабрики данных явным образом. | Нет | нет | 
| availability | <p>Определяет окно обработки или модель среза для создания набора данных. </p><p>Дополнительные сведения см. в разделе [Доступность набора данных](#Availability).</p><p>Дополнительную информацию о модели среза см. в статье [Планирование и выполнение](data-factory-scheduling-and-execution.md).</p> | Да | Нет данных
| policy | Определяет условия, которым должен соответствовать срез данных. <p>Дополнительные сведения см. в статье [Политика набора данных](#Policy).</p> | Нет | Нет данных |

### Пример

Ниже приведен пример набора данных, представляющий собой таблицу с именем **MyTable** в **базе данных SQL Azure**. Строки подключения к базе данных SQL Azure определяются в службе **AzureSqlLinkedService**, ссылка на которую указывается в наборе данных. Срезы представленного набора данных создаются ежедневно.

	{
	    "name": "DatasetSample",
	    "properties": {
	        "type": "AzureSqlTable",
	        "linkedServiceName": "AzureSqlLinkedService",
	        "typeProperties": 
	        {
	            "tableName": "MyTable"
	        },
	        "availability": 
	        {
	            "frequency": "Day",
	            "interval": 1
	        }
	    }
	}

## <a name="Structure"></a>Структура набора данных

В разделе **Structure** определяется схема набора данных. Он содержит ряд столбцов и их типы. У каждого столбца есть приведенные ниже свойства.

Свойство | Описание | Обязательное | По умолчанию  
-------- | ----------- | -------- | -------
name | Имя столбца. | Нет | Нет данных 
type | Тип данных столбца. | Нет | Нет данных 

### Пример

В приведенном ниже примере набор данных содержит три столбца: slicetimestamp, projectname и pageviews.

	structure:  
	[ 
	    { "name": "slicetimestamp", "type": "String"},
	    { "name": "projectname", "type": "String"},
	    { "name": "pageviews", "type": "Decimal"}
	]

## <a name="Type"></a> Тип набора данных

Поддерживаемые источники данных согласуются с типами наборов данных. Информацию о типах и настройке наборов данных см. в разделах, посвященных соединителям, в статье [Действия перемещения данных](data-factory-data-movement-activities.md).

## <a name="Availability"></a> Доступность набора данных

В разделе availability набора данных определяется окно обработки или модель среза для создания наборов данных. Дополнительные сведения о создании срезов данных и модели зависимостей см. в разделе [Планирование и выполнение](data-factory-scheduling-and-execution.md).

| Свойство | Описание | Обязательное | По умолчанию |
| -------- | ----------- | -------- | ------- |
| frequency | Указывает единицу времени, определяющую частоту создания среза данных.<p>**Поддерживаемые значения**: Minute, Hour, Day, Week, Month.</p> | Да | Нет данных |
| interval | Задает множитель для параметра frequency.<p>Частота создания среза определяется сочетанием значений frequency и interval.</p><p>Если необходимо делать срезы каждый час, задайте для **frequency** значение **Hour**, а для **interval** — **1**.</p><p>**Примечание.** Если frequency указывается в минутах, то рекомендуется выбирать interval не менее 15.</p> | Да | Нет данных |
| style | Указывает, в начале или в конце интервала выполняется срез.<ul><li>StartOfInterval</li><li>EndOfInterval</li></ul><p>Если для frequency задано значение Month, а для style — EndOfInterval, то срез данных будет производиться в последний день месяца. Если для style задано значение StartOfInterval, то срез осуществляется в первый день месяца.</p><p>Если для frequency задано значение Day, а для style — EndOfInterval, то срез создается в последний час дня.</p>Если для frequency задано значение Hour и задан стиль EndOfInterval, то срез создается в конце часа. Например, для периода с 13:00 до 14:00 срез создается в 14:00.</p> | Нет | EndOfInterval |
| anchorDateTime | Определяет момент времени в абсолютном выражении, используемый планировщиком для определения границ среза данных.<p>**Примечание.** Если anchorDateTime содержит более мелкие единицы времени, чем указаны в свойстве frequency, то они не будут учитываться. Например, если задан **ежечасный** **интервал** (frequency — Hour, interval — 1), а **AnchorDateTime** содержит **минуты и секунды**, то **минуты и секунды** AnchorDateTime будут игнорироваться. </p>| Нет | 01/01/0001 |
| offset | Временной интервал, на который сдвигаются начало и конец для всех срезов данных. <p>**Примечание.** Если указано и свойство anchorDateTime, и свойство offset, то сдвиг будет учитывать оба значения.</p> | Нет | Нет данных |

### Пример anchorDateTime

**Пример:** срезы данных с интервалом 23 часа, начало которых запланировано на 2007-04-19T08:00:00.

	"availability":	
	{	
		"frequency": "Hour",		
		"interval": "23",	
		"anchorDateTime":"2007-04-19T08:00:00"	
	}


### Пример смещения

Ежедневные срезы, которые начинаются в 6:00, а не в полночь.

	"availability":
	{
		"frequency": "Day",
		"interval": "1",
		"offset": "06:00:00"
	}

В приведенном примере время начала среза сместится на 6 часов и составит 6:00.

Для годового расписания (frequency — Month, interval — 12) смещение 60.00:00:00 означает, что срез будет выполняться ежегодно 1 или 2 марта (60 дней с начала года, если для параметра style выбрано значение StartOfInterval) в зависимости от того, високосный год или нет.



## <a name="Policy"></a>Политика наборов данных

Раздел Policy набора данных определяет условия, которым должен соответствовать срез данных.

### Политики проверки

| Имя политики | Описание | Применяется к | Обязательное | По умолчанию |
| ----------- | ----------- | ---------- | -------- | ------- |
| minimumSizeMB | Проверяет, соответствуют ли данные в BLOB-объекте Azure требованиям к минимальному размеру (в мегабайтах). | BLOB-объект Azure | Нет | Нет данных |
|minimumRows | Проверяет, содержат ли данные в базе данных Azure SQL или таблице Azure минимальное необходимое количество строк. | <ul><li>База данных SQL Azure</li><li>Таблица Azure</li></ul> | Нет | Нет данных

#### Примеры

**minimumSizeMB:**

	"policy":
	
	{
	    "validation":
	    {
	        "minimumSizeMB": 10.0
	    }
	}

**minimumRows:**

	"policy":
	{
		"validation":
		{
			"minimumRows": 100
		}
	}

### Политики в отношении внешних данных (ExternalData)

Внешние наборы данных — это наборы данных, которые не создаются конвейером в фабрике данных. Если набор данных помечен как внешний (External), то можно задать доступность соответствующих срезов данных с помощью политики ExternalData.

| Имя | Описание | Обязательное | По умолчанию |
| ---- | ----------- | -------- | -------------- |
| dataDelay | <p>Время задержки проверки на наличие внешних данных для определенного среза. Например, если данные должны быть доступны каждый час, проверку доступности внешних данных (и того, находится ли соответствующий срез в состоянии Ready) можно отложить, используя политику dataDelay.</p><p>Применяется только к настоящему времени. Например, если сейчас 13:00 и для dataDelay задано значение 10 minutes (10 минут), то проверка начнется в 13:10.</p><p>Этот параметр не влияет на срезы в прошлом (срезы, у которых сумма SliceEndTime и dataDelay меньше текущего времени), поэтому они будут обрабатываться без задержки.</p> <p>Время, превышающее 23:59, необходимо указать в формате день.часы:минуты:секунды. Например, чтобы задать 24 часа, не используйте формат 24:00:00; вместо этого укажите 1.00:00:00. Если указать 24:00:00, то значение будет рассматриваться как 24 дня (24.00:00:00). Чтобы задать 1 день и 4 часа, укажите 1:04:00:00. </p>| Нет | 0 |
| retryInterval | Время ожидания после сбоя до повторной попытки. Применяется к настоящему времени. Если предыдущая попытка завершилась сбоем, то новая попытка начнется по истечении заданного здесь значения. <p>Предположим, что первая попытка началась в 13:00. Если она длится одну минуту и завершается сбоем, то повторная попытка начнется в 13:02 (13:00 + время выполнения первой проверки (1 минута) + интервал повтора (1 минута)). </p><p>Срезы в прошлом обрабатываются без задержки. Повторная попытка будет выполнена немедленно.</p> | Нет | 00:01:00 (1 минута) | 
| retryTimeout | Время ожидания для повторной попытки.<p>Если оно составляет 10 минут, проверка должна быть выполнена в течение 10 минут. Если проверка занимает больше 10 минут, возникает ошибка времени ожидания.</p><p>Если такая ошибка возникает во время всех попыток, срез будет помечен как TimedOut.</p> | Нет | 00:10:00 (10 минут) |
| maximumRetry | Максимальное количество попыток проверки доступности внешних данных. Максимальное допустимое значение — 10. | Нет | 3 | 

#### Другие примеры

Если конвейер требуется запускать каждый месяц в определенные дату и время (предположим, что запускать его необходимо в третий день каждого месяца в 8:00), можно использовать тег **offset**, чтобы установить дату и время запуска.

	{
	  "name": "MyDataset",
	  "properties": {
	    "type": "AzureSqlTable",
	    "linkedServiceName": "AzureSqlLinkedService",
	    "typeProperties": {
	      "tableName": "MyTable"
	    },
	    "availability": {
	      "frequency": "Month",
	      "interval": 1,
	      "offset": "3.08:10:00",
	      "style": "StartOfInterval"
	    }
	  }
	}

<!---HONumber=AcomDC_0204_2016-->