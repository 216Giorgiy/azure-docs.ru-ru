---
title: Сопоставление преобразованного приемника потоков данных Фабрики данных Azure
description: Сопоставление преобразованного приемника потоков данных Фабрики данных Azure
author: kromerm
ms.author: makromer
ms.reviewer: douglasl
ms.service: data-factory
ms.topic: conceptual
ms.date: 02/03/2019
ms.openlocfilehash: 381dc2f9f6d3a074af00ba047472719c086f5811
ms.sourcegitcommit: 4bf542eeb2dcdf60dcdccb331e0a336a39ce7ab3
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/19/2019
ms.locfileid: "56408414"
---
# <a name="mapping-data-flow-sink-transformation"></a>Сопоставление преобразованного приемника потока данных

[!INCLUDE [notes](../../includes/data-factory-data-flow-preview.md)]

![Параметры приемника](media/data-flow/windows1.png "Приемник 1")

По завершении преобразования потока данных можно принять преобразованные данные в целевом наборе данных. В преобразовании приемника можно выбрать определение набора данных, которые необходимо использовать для назначения выходных данных. У вас может быть столько преобразований приемников, сколько необходимо потоку данных.

Распространенной практикой учета изменений поступающих данных и учета смещения схемы является прием выходных данных в папку без определенной схемы в наборе выходных данных. Вы можете дополнительно учесть все изменения столбцов в источниках, выбрав "Разрешить смещение схемы" в источнике, а затем автоматизировать все поля в приемнике.

Вы можете перезаписать, добавить или завершить с ошибкой поток данных при переходе к набору данных.

Кроме того, вы можете выбрать "Автосопоставление", чтобы записывать в приемник все входящие поля. Если нужно выбрать поля, которые вы хотите передать к месту назначения, или если вы хотите изменить имена полей в месте назначения, выберите "Отключить" для параметра "Автосопоставление", а затем щелкните вкладку "Сопоставление", чтобы отобразить выходные поля:

![Параметры приемника](media/data-flow/sink2.png "Приемник 2")

## <a name="output-to-one-file"></a>Выходные данные в одном файле
Для типов приемников Azure Storage Blob или Data Lake Store преобразованные данные будут выводиться в папку. Spark создает секционированные файлы выходных данных на основе схемы секционирования, используемой при преобразовании приемника. Вы можете задать схему секционирования, щелкнув вкладку "Оптимизировать". Если вы хотите, чтобы ADF объединил выходные данные в один файл, щелкните переключатель "Одна секция".

![Параметры приемника](media/data-flow/opt001.png "Параметры приемника")

### <a name="output-settings"></a>Выходные параметры

Перезапись усечет таблицу, если она существует, а затем создаст ее повторно и загрузит данные. При добавлении будут вставлены новые строки. Если таблица из поля имени таблицы данных отсутствует в целевом ADW, поток данных создаст таблицу, а затем загрузит данные.

Если флажок "Автосопоставление" снят, вы можете сопоставлять поля в целевой таблице вручную.

![Параметры приемника ADW](media/data-flow/adw2.png "Приемник adw")

#### <a name="field-mapping"></a>Сопоставление поля

На вкладке "Сопоставление" преобразования приемника можно сопоставить исходящие столбцы слева с местом назначения справа. При приеме потоков данных в файлы ADF всегда будет записывать новые файлы в папку. При подключении к набору данных базы данных вы можете либо создать таблицу с помощью этой схемы (задайте для параметра "Сохранить политику" значение "Перезаписать"), либо вставить новые строки в имеющуюся таблицу и сопоставить поля со схемой.

Вы можете использовать множественный выбор в таблице сопоставления, чтобы связать несколько столбцов одним щелчком, разделить несколько столбцов или сопоставить несколько строк со столбцом с таким же названием.

![Сопоставления полей](media/data-flow/multi1.png "несколько вариантов")

Если вы хотите сбросить сопоставления столбцов, нажмите кнопку "Переназначение", чтобы восстановить сопоставления.

![Подключения](media/data-flow/maxcon.png "Подключения")

### <a name="updates-to-sink-transformation-for-adf-v2-ga-version"></a>Обновление преобразования приемника до глобально доступной ADF версии 2

![Параметры приемника](media/data-flow/sink1.png "Приемник 1")

![Параметры приемника](media/data-flow/sink2.png "Приемники")

* Параметры Allow Schema Drift (Разрешить смещения схемы) и Validate Schema (Проверить схему) теперь доступны в приемнике. Это позволит вам проинструктировать ADF либо полностью принять гибкие определения схемы (смещение схемы), либо отказаться от приемника, если схема изменится (проверка схемы).

* Очистка папки. ADF усечет содержимое папки приемника, прежде чем записать конечные файлы в эту папку.

* Параметры имени файла

   * Значение по умолчанию: Разрешение Spark называть файлы на основе значений по умолчанию PART
   * Шаблон. Введите имя для выходных файлов.
   * На один раздел. Введите имя файла для одного раздела.
   * Как данные в столбце. Задайте для выходного файла значение столбца

> [!NOTE]
> Файловые операции будут выполняться только при выполнении действия "Выполнить поток данных", а не в режиме отладки потока данных.

С помощью типов приемника SQL можно задать:

* усечение таблицы;
* создание таблицы заново (выполняется удаление или создание);
* размер пакета для больших объемов данных. Введите число для разделения операций записи на блоки.

![Сопоставление полей](media/data-flow/sql001.png "Параметры SQL")

## <a name="next-steps"></a>Дополнительная информация

Теперь, после создания потока данных, добавьте [действие выполнения потока данных в свой конвейер](https://docs.microsoft.com/azure/data-factory/concepts-data-flow-overview).
