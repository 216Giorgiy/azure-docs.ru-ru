<properties 
	pageTitle="Способы переноса хранимых данных в облако|Azure" 
	description="Рекомендации по выбору оптимального варианта для переноса данных из локального развертывания или других облачных источников в Microsoft Azure для расширенного анализа." 
	services="data-factory, hdinsight, machine-learning, storage, sql-database" 
	documentationCenter="" 
	authors="spelluru" 
	manager="jeffgoll" 
	editor=""/>

<tags 
	ms.service="multiple" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.tgt_pltfrm="na" 
	ms.workload="big-data" 
	ms.date="01/07/2014" 
	ms.author="spelluru"/>

# Способы переноса хранимых данных в облако Azure

Эта статья содержит рекомендации по выбору оптимального способа переноса данных из локального развертывания или других облачных источников в Microsoft Azure для расширенного анализа данных. Перенос больших объемов данных может занять много времени и требует должного уровня безопасности.

Содержание:

* [Служба импорта и экспорта Azure для хранилища больших двоичных объектов](#blob)
* [Служебная программа AZCopy](#azcopy-utility)
* [Azure PowerShell](#ps)
* [Фабрика данных Azure (предварительная версия)](#data-factory)
* [Средства миграции базы данных SQL Azure](#tools)
* [Azure SQL Data Sync (предварительная версия)](#data-sync)
* [Концентраторы событий Azure](#event-hubs)
* [Другие способы переноса данных](#other)
* [Выбор подходящего способа переноса данных](#choose)


## Служба импорта и экспорта Azure для хранилища BLOB-объектов

Службу импорта и экспорта Azure можно использовать для переноса больших объемов данных файлов в хранилище BLOB-объектов Azure или из него в случаях, когда затраты на передачу по сети слишком высоки или такая передача не представляется возможной. Отправка или загрузка больших объемов данных по сети занимает слишком много времени. Например, загрузка 10 ТБ данных по каналу T3 занимает 1 месяц (со скоростью 44,7 Мбит/c). С помощью службы импорта и экспорта Microsoft Azure клиенты могут отправить жесткий диск, сократив время выгрузки или загрузки данных. Следует рассчитывать на несколько дней, включая время доставки.

Для передачи больших объемов данных файлов в хранилище BLOB-объектов можно переслать один или несколько жестких дисков с нужными данными в центр обработки данных Azure, где данные будут загружены в вашу учетную запись хранения. Аналогичным образом для экспорта данных из хранилища BLOB-объектов можно отправить в центр обработки данных Azure пустые жесткие диски, после чего на них будут скопированы BLOB-данные из вашей учетной записи хранения и диски будут возвращены. Прежде чем отправить диск, содержащий данные, необходимо зашифровать данные на диске на диске; при экспорте службой импорта и экспорта ваших данных они также будут зашифрованы перед отправкой.

Дополнительную информацию см. в разделе [Использование службы импорта и экспорта Microsoft Azure для переноса данных в хранилище BLOB-объектов][import-export].


## Служебная программа AZCopy

AzCopy — это служебная программа командной строки, разработанная для быстрой отправки, загрузки и копирования данных из хранилища больших двоичных объектов, файлов и табличного хранилища Microsoft Azure. Эта программа подходит для однократного переноса данных между хранилищем Azure и локальным развертыванием, если перенос данных через сеть практически осуществим. См. раздел [Приступая к работе с программной командной строки AzCopy][azcopy].

> [AZURE.NOTE]Для пользователей Linux [загрузите ACP, AzCopy для Linux](http://www.paratools.com/acp)


## Azure PowerShell

Azure PowerShell — это полнофункциональная среда сценариев, которую можно использовать для контроля и автоматизации развертывания и управления вашей рабочей нагрузкой в Azure. Azure PowerShell можно использовать для отправки данных в хранилище BLOB-объектов, чтобы данные могли обрабатываться средствами расширенного анализа или заданиями MapReduce.

См. также:

* [Отправка данных в хранилище больших двоичных объектов с использованием Azure PowerShell][upload]
* [Установка и настройка Azure PowerShell][install]


## Фабрика данных Azure (предварительная версия)

Фабрика данных Azure является полностью управляемой службой для создания хранилищ данных, служб обработки и перемещения данных в упрощенные, масштабируемые и надежные конвейеры производства данных.

Разработчики могут создавать управляемые данными рабочие процессы, которые комбинируют, статистически обрабатывают и преобразуют частично структурированные, неструктурированные и структурированные данные, полученные из локальны (посредством шлюза управления данными) облачных и интернет-служб, а также же настраивать процесс обработки сложных данных с помощью простых скриптов JSON. Результирующие данные могут быть сохранены в хранилище Azure или базе данных SQL Azure для проведения расширенного анализа.

В частности, разработчик может управлять действиями регулярного копирования между различными источниками и местами назначения, как показано в разделе [Поддерживаемые источники и приемники](data-factory-copy-activity.md#SupportedSourcesAndSinks) статьи [Копирование данных с помощью фабрики данных Azure](data-factory-copy-activity.md), в котором также описаны свойства для различных типов хранилищ данных, сопоставлений столбцов, форматов сериализации и типов обработки.

Служба может обрабатывать сбои с помощью функции автоматического перезапуска и выполнять преобразование формата при переносе данных из одного формата в другой. Информацию об определении действия копирования см. в статье [Приступая к работе с фабрикой данных][start]. Процедуры регистрации хранилища данных и установки шлюза описаны в статье [Включение конвейеров для работы с локальными данными][pipelines].

См. также:

* [Введение в службу фабрики данных][intro]

## Средства миграции базы данных SQL Azure

Существует множество средств для успешного переноса локального SQL Server и баз данных, отличных от SQL Server, в базу данных SQL Azure. Выбор подходящего средства зависит от типа, размера и сложности подлежащей переносу базы данных.

* Схему и данные существующей базы данных SQL Azure можно перенести путем экспорта базы данных, сохранения файла экспорта в учетной записи хранилища BLOB-объектов Azure и последующего импорта в качестве новой базы данных SQL Azure. Создаваемый при экспорте файл называется BACPAC-файлом. Дополнительную информацию см. в разделе [Использование службы импорта и экспорта в базе данных SQL Azure)][sql-import].
* Функция копирования базы данных создает новую базу данных в Azure, которая является транзакционно согласованнойкопией существующей базы данных SQL Azure. Дополнительную информацию см. в разделе [Копирование баз данных в базу данных SQL Azure][sql-copy].
* Службы SQL Server Integration Services (SSIS) используются, если требуется осуществить сложные преобразования данных. С их помощью данные можно переносить как в базу данных SQL Azure, так и из нее. Дополнительную информацию см. в разделах [Использование служб Integration Services для миграции базы данных в базу данных SQL Azure][integrate] и [SSIS для переноса данных Azure и гибридных данных][SSIS].
* Мастер импорта и экспорта SQL Server обеспечивает простейший метод создания пакета SSIS для миграции данных. После настройки источника и места назначения можно определить базовые преобразования данных. Эти пакеты могут сохраняться, изменяться, выполняться и планироваться как задание. Дополнительную информацию см. в разделе [Использование мастера импорта и экспорта для миграции базы данных в базу данных SQL Azure][wizard].
* Мастер миграции базы данных SQL представляет собой инструмент для миграции схемы и данных между локальным SQL Server и базой данных SQL Azure, а также между серверами базы данных SQL Azure. Этот инструмент также отслеживает файлы и скрипты для решения проблем совместимости с базой данных SQL Azure. Дополнительную информацию см. в разделе [Использование мастера миграции баз данных SQL][use-wizard].
* С помощью программы bcp можно выполнять импорт большого количества новых строк в таблицы SQL Server или экспорт данных из таблиц в файлы данных. Дополнительную информацию см. в разделе [Использование bcp для миграции базы данных в базу данных SQL Azure][bcp].

См. также:

* [Миграция баз данных в базу данных SQL Azure][migrate]
 

## Azure SQL Data Sync (предварительная версия)

SQL Data Sync (предварительная версия) дает возможность создавать и планировать регулярные синхронизации между базой данных SQL Azure и базами данных, размещенных в SQL Server или базе данных SQL Azure.

С помощью SQL Data Sync разработчики данных могут синхронизировать незначительные изменения между локальными и облачными базами данных Azure. См. раздел [SQL Data Sync][sync].

##	Концентраторы событий Azure

Концентраторы событий Microsoft Azure — это служба сбора событий, используемая для крупномасштабной передачи событий и данных телеметрии в облако при низкой задержке и с высокой надежностью. Эта служба при использовании вместе с другими подчиненными службами особенно полезна в сценариях инструментирования приложений, обеспечения удобства работы пользователя или функционирования рабочих процессов, а также "Интернета вещей" (IoT).

Разработчики могут создавать коды для отправки данных в концентратор событий, обработки данных и их хранения в хранилище BLOB-объектов Azure или базе данных SQL Azure для дальнейшей обработки.

Кроме того, разработчики могут использовать Azure Stream Analytics, полностью управляемую службу, обеспечивающую масштабируемую обработку сложных событий при потоковой передаче данных. Специалист может выбрать поток из концентратора событий Azure, указать формат, используемый для сериализации входящих событий (например, JSON, CSV или Avro), а затем добавить выходное расположение, включая хранилище BLOB-объектов Azure или базу данных SQL Azure.

См.:

* [Информация о службе концентраторов событий](/services/event-hubs/)
* [Общие сведения о концентраторах событий][overview]
* [Введение в Azure Stream Analytics][stream]

## Другие способы переноса данных

Гибридное подключение обеспечивает простой и удобный способ соединения веб-сайтов Azure и мобильных служб Azure с локальными ресурсами. Разработчики могут создать веб-сайт для переноса из локальной среды в Azure. См. раздел [Обзор гибридных подключений][hybrid].

[Виртуальная сеть](/services/virtual-network/) позволяет использовать запущенные на виртуальных машинах инструменты интеграции данных для безопасного подключения к локальным базам данных SQL Server в местном центре обработки данных. Только виртуальные машины и службы, работающие в одной и той же виртуальной сети, могут идентифицировать друг друга и подключаться друг к другу. При желании можно даже создать прямое подключение [ExpressRoute](/services/expressroute/) к Azure, через поставщика сетевых услуг или поставщика exchange, полностью отключив использование общедоступного интернет-подключения.

[Azure Marketplace](?../source=datamarket.md) предлагает решения партнеров для переноса данных в Azure, например управляемый перенос файлов Storm.

## Выбор подходящего способа переноса данных

### Схема принятия решения

![Помощь в решении о том, какую возможность облачной передачи данных выбрать.][decision]

Примечания о схеме принятия решений.

* SQL Data Sync (предварительная версия) запускает синхронизацию из измененных данных.
* Фабрика данных (предварительная версия) поддерживает копирование данных между хранилищем Azure, базой данных SQL Azure и локальным SQL Server. 
* Наряду с использованием фабрики данных можно расширить существующие пакеты служб SSIS для запланированного переноса данных в облако.

### Перенос ГБ данных

<table border="1">
<tr>
<th>Перенос данных</th>
<th>Однократный</th>
<th>Запланированный</th>
<th>Рекомендации</th>
</tr>

<tr>
<td><p>Из файла в хранилище Azure</p>
</td>
<td><ul>
<li><a href="/documentation/articles/storage-use-azcopy/">AzCopy</a></li>
<li><a href="http://www.paratools.com/acp" target="_blank">acp</a></li>
<li><a href="/documentation/articles/install-configure-powershell/">Azure PowerShell</a></li>
<li><a href="/documentation/articles/storage-import-export-service/">Служба импорта и экспорта Azure</a></li>
</ul>
</td>
<td><p>Недоступно</p>
</td>
<td><p>Если перенос данных через сеть является нецелесообразным используйте службу импорта и экспорта Azure вместо AzCopy, acp и Azure PowerShell. Службе может потребоваться несколько дней дополнительно ко времени передачи диска в центр обработки данных.</p>
</td>
</tr>

<tr>
<td>
<ul>
<li>Из SQL Server в базу данных SQL Azure</li>
<li>Из базы данных SQL Azure в SQL Server</li>
</ul>
</td>
<td><ul>
<li><a href="/documentation/articles/data-factory-introduction/">Фабрика данных Azure</a></li>
<li><a href="http://msdn.microsoft.com/library/azure/ee730904.aspx">Инструменты миграции базы данных SQL</a></li>
</ul>
</td>
<td><p><a href="/documentation/articles/data-factory-introduction/">Фабрика данных Azure</a></p>
</td>
<td><p>Вместо средств миграции рекомендуется использовать фабрику данных Azure (предварительная версия), которая обеспечивает преобразование формата и автоматическое восстановление заданий в исключительных случаях. Если SQL Server находится в локальной среде, для подключения к нему требуется шлюз управления данными.</p>
</td>
</tr>

<tr>
<td>
<ul>
<li>Из хранилища Azure в базу данных SQL Azure</li>
<li>Из базы данных SQL Azure в хранилище Azure</li>
</ul>
</td>
<td><p><a href="/documentation/articles/data-factory-introduction/">Фабрика данных Azure</a></p>
</td>
<td><p><a href="/documentation/articles/data-factory-introduction/">Фабрика данных Azure</a></p>
</td>
<td><p>Фабрика данных Azure (предварительная версия) обеспечивает преобразование формата и автоматическое восстановление заданий в исключительных случаях. Если SQL Server находится в локальной среде, для подключения к нему требуется шлюз управления данными.</p>
</td>
</tr>

<tr>
<td>
<ul>
<li>Из SQL Server в SQL Data Sync</li>
<li>Из SQL Data Sync в базу данных SQL Azure</li>
</ul>
</td>
<td><p>Недоступно</p>
</td>
<td><p><a href="http://msdn.microsoft.com/library/azure/hh456371.aspx">Синхронизация данных SQL</a></p>
</td>
<td><p>SQL Data Sync (предварительная версия) синхронизирует данные с помощью групп синхронизации, в которых определяются базы данных, таблицы и столбцы, подлежащие синхронизации, а также расписание синхронизации.</p>
</td>
</tr>

</table>



### Перенос ТБ данных

<table border="1">
<tr>
<th>Перенос данных</th>
<th>Однократный</th>
<th>Запланированный</th>
<th>Рекомендации</th>
</tr>

<tr>
<td><p>Из файла в хранилище Azure</p>
</td>
<td><p><a href="/documentation/articles/storage-import-export-service/">Служба импорта и экспорта Azure</a></p>
</td>
<td><p>Недоступно</p>
</td>
<td><p>Службе может потребоваться несколько дней дополнительно ко времени передачи диска в центр обработки данных.</p>
</td>
</tr>

</table>
<br>


<!--Anchors-->
[Azure Import/Export service for Blob storage]: #blob
[AZCopy utility]: #azcopy-utility
[Azure PowerShell]: #ps
[Azure Data Factory (preview)]: #data-factory
[Azure SQL Database migration tools]: #tools
[Azure SQL Data Sync (preview)]: #data-sync
[Azure Event Hubs]: #event-hubs
[Other options for data transfer]: #other
[Choose the right data transfer option]: #choose

<!--Image references-->
[decision]: ./media/data-management-options-for-transferring-data/data-transfer-decision-tree.png


<!--Link references-->
[import-export]: ../storage-import-export-service.md
[azcopy]: ../storage-use-azcopy.md
[upload]: ../hdinsight-upload-data.md#powershell
[install]: ../install-configure-powershell.md
[start]: data-factory-get-started.md
[pipelines]: data-factory-use-onpremises-datasources.md
[copy]: data-factory-copy-activity.md
[intro]: data-factory-introduction.md
[sql-import]: http://msdn.microsoft.com/library/azure/hh335292.aspx
[sql-copy]: http://msdn.microsoft.com/library/azure/ff951624.aspx
[integrate]: http://msdn.microsoft.com/library/azure/jj156150.aspx
[SSIS]: http://msdn.microsoft.com/library/jj901708.aspx
[wizard]: http://msdn.microsoft.com/library/azure/jj156152.aspx
[use-wizard]: http://msdn.microsoft.com/library/azure/jj156144.aspx
[bcp]: http://msdn.microsoft.com/library/azure/jj156153.aspx
[migrate]: http://msdn.microsoft.com/library/azure/ee730904.aspx
[overview]: http://msdn.microsoft.com/library/dn836025.aspx
[stream]: ../stream-analytics-introduction.md
[sync]: http://msdn.microsoft.com/library/azure/hh456371.aspx
[hybrid]: ../integration-hybrid-connection-overview.md
 

<!---HONumber=July15_HO4-->