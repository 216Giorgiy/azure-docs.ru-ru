<properties 
	pageTitle="Действия перемещения данных" 
	description="Узнайте, какие сущности в конвейере фабрики данных можно использовать для перемещения данных." 
	services="data-factory" 
	documentationCenter="" 
	authors="spelluru" 
	manager="jhubbard" 
	editor="monicar"/>

<tags 
	ms.service="data-factory" 
	ms.workload="data-services" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="02/03/2016" 
	ms.author="spelluru"/>

# Действия перемещения данных
[Действие копирования](#copyactivity) означает перемещение данных в фабрику данных Azure и выполняется [глобально доступной службой](#global), обеспечивающей безопасное, надежное и масштабируемое копирование данных из одного хранилища в другое. Служба автоматически выбирает наиболее оптимальный регион для перемещения данных. Таким регионом является тот, который расположен ближе всего к приемнику данных.
 
Рассмотрим, как происходит перемещение данных в различных ситуациях.

## Копирование данных из одного облачного хранилища в другое
Если источник и приемник (целевое хранилище) данных находятся в облаке, действие копирования включает описанные ниже этапы копирования и переноса данных. Служба, на базе которой реализовано действие копирования, выполняет следующие действия:

1. Считывает данные из источника данных.
2.	Выполняет сериализацию и десериализацию, сжимает или распаковывает данные, сопоставляет столбцы и преобразует данные из одного типа в другой в соответствии с конфигурациями наборов входных данных, наборов выходных данных и действия копирования. 
3.	Записывает данные в целевое хранилище данных.

![cloud-to-cloud copy](.\media\data-factory-data-movement-activities\cloud-to-cloud.png)


## Копирование данных из локального хранилища данных и облачное и наоборот
Для [безопасного переноса данных между локальными хранилищами, защищенными корпоративным брандмауэром и облачным хранилищем данных](#moveonpremtocloud), необходимо установить на локальный компьютер шлюз управления данными — агент, обеспечивающий гибридное перемещение и обработку данных. Шлюз управления данными можно установить на тот же компьютер, где находится хранилище данных, или на отдельную машину с доступом к этому хранилищу. В этом случае сериализацию и десериализацию данных, сжатие и распаковку, сопоставление столбцов и преобразование типов выполняет шлюз управления данными. При этом данные не передаются через службу фабрики данных Azure. Шлюз управления данными напрямую записывает данные в целевое хранилище.

![onprem-to-cloud copy](.\media\data-factory-data-movement-activities\onprem-to-cloud.png)

## Копирование данных в хранилище на виртуальной машине Azure Iaas и из него 
Используя шлюз управления данными, можно также перемещать данные в поддерживаемые хранилища данных, расположенные на виртуальных машинах Azure Iaas (инфраструктура как услуга), и из таких хранилищ. В этом случае шлюз управления данными можно установить на ту же виртуальную машину Azure, где находится хранилище данных, или на отдельную виртуальную машину с доступом к этому хранилищу.

## Поддерживаемые хранилища данных
Действие копирования копирует данные из **хранилища-источника** в **хранилище-приемник**. Фабрика данных поддерживает следующие хранилища данных, и **данные из любого источника можно записывать в любой приемник**. Щелкните название хранилища, чтобы узнать, как скопировать данные из него или в него.

| Источники| Приемники |
|:------- | :---- |
| <ul><li>[Большой двоичный объект Azure](data-factory-azure-blob-connector.md)</li><li>[Таблица Azure](data-factory-azure-table-connector.md)</li><li>[База данных SQL Azure](data-factory-azure-sql-connector.md)</li><li>[Хранилище данных SQL Azure](data-factory-azure-sql-data-warehouse-connector.md)</li><li>[Azure DocumentDB (см. примечание ниже)](data-factory-azure-documentdb-connector.md)</li><li>[Хранилище озера данных Azure](data-factory-azure-datalake-connector.md)</li><li>[Локальная среда SQL Server/Azure IaaS](data-factory-sqlserver-connector.md)</li><li>[Локальная файловая система/Azure IaaS](data-factory-onprem-file-system-connector.md)</li><li>[Локальная база данных Oracle/Azure IaaS](data-factory-onprem-oracle-connector.md)</li><li>[Локальная база данных MySQL/Azure IaaS](data-factory-onprem-mysql-connector.md)</li><li>[Локальная база данных DB2/Azure IaaS](data-factory-onprem-db2-connector.md)</li><li>[Локальная база данных Teradata/Azure IaaS](data-factory-onprem-teradata-connector.md)</li><li>[Локальная база данных Sybase/Azure IaaS](data-factory-onprem-sybase-connector.md)</li><li>[Локальная база данных PostgreSQL/Azure IaaS](data-factory-onprem-postgresql-connector.md)</li><li>[Локальные источники данных ODBC/Azure IaaS](data-factory-odbc-connector.md)</li><li>[Распределенная локальная файловая система Hadoop (HDFS)/Azure IaaS](data-factory-hdfs-connector.md)</li><li>[Источники OData](data-factory-odata-connector.md)</li><li>[Веб-таблица](data-factory-web-table-connector.md)</li></ul> | <ul><li>[Большой двоичный объект Azure](data-factory-azure-blob-connector.md)</li><li>[Таблица Azure](data-factory-azure-table-connector.md)</li><li>[База данных Azure SQL](data-factory-azure-sql-connector.md)</li><li>[Хранилище данных Azure SQL](data-factory-azure-sql-data-warehouse-connector.md)</li><li>[Azure DocumentDB (см. примечание ниже)](data-factory-azure-documentdb-connector.md)</li><li>[Хранилище озера данных Azure](data-factory-azure-datalake-connector.md)</li><li>[Локальная база данных SQL Server/Azure IaaS](data-factory-sqlserver-connector.md)</li><li>[Локальная файловая система/Azure IaaS](data-factory-onprem-file-system-connector.md)</li></ul> |


> [AZURE.NOTE] Перемещать объекты в Azure DocumentDB и из него можно только из других служб Azure, таких как большие двоичные объекты Azure, таблицы Azure, базы данных SQL Azure, хранилища данных SQL Azure, Azure DocumentDB и хранилища озер данных Azure. Также в ближайшее время начнет поддерживаться полный список объектов для Document DB.

## Учебник
Краткий учебник по использованию действия копирования см. в разделе [Учебник. Использование действия копирования в конвейере фабрики данных Azure](data-factory-get-started.md). В этом учебнике действие копирования будет использоваться для копирования данных из хранилища больших двоичных объектов Azure в базу данных SQL Azure.

## <a name="copyactivity"></a>Действие копирования
Действие копирования принимает один входной набор данных (**источник**) и один выходной набор данных (**приемник**). Данные копируются в пакетном режиме в соответствии с заданным для действия расписанием. Общие сведения об определении действий см.в статье [Основные сведения о конвейерах и действиях](data-factory-create-pipelines.md).

Действие копирования предоставляет приведенные ниже возможности.

### <a name="global"></a>Глобально доступное перемещение данных
Хотя фабрика данных Azure доступна только в западной части США и в Северной Европе, служба, на базе которой реализовано действие копирования, доступна глобально в следующих областях и географических регионах. Глобально доступная топология обеспечивает эффективное перемещение данных, в большинстве случаев позволяя избежать "прыжков" по разным регионам.

**Шлюз управления данными** или **фабрика данных Azure** выполняет перемещение данных, исходя из расположения исходного и целевого хранилищ данных во время операции копирования. Дополнительные сведения см. в таблице ниже.

Расположение исходного хранилища данных | Расположение целевого хранилища данных | Что используется для перемещения данных  
-------------------------- | ------------------------------- | ----------------------------- 
локальная система или виртуальная машина Azure (IaaS) | облако | **Шлюз управления данными** на локальном компьютере или на виртуальной машине Azure. Данные не передаются через службу в облаке. <p> Примечание. Шлюз управления данными может находиться на том же локальном компьютере или виртуальной машине Azure, что и хранилище данных, или на другом локальном компьютере или виртуальной машине Azure. Главное — чтобы он мог подключаться к обоим хранилищам данных.</p>
облако | локальная система или виртуальная машина Azure (IaaS) | То же, что и выше. 
локальная система или виртуальная машина Azure (IaaS) | локальная система или виртуальная машина | **Связанный с источником шлюз управления данными**. Данные не передаются через службу в облаке. См. примечание выше.   
облако | облако | <p>**Служба облака, на основе которой реализовано действие копирования**. Фабрика данных Azure развертывает эту службу в регионе, который находится ближе всего к расположению приемника в пределах одной с ним географической области. Особенности сопоставления см. в таблице ниже. </p><table><tr><th>Регион целевого хранилища данных</th> <th>Регион, используемый для перемещения данных</th></tr><tr><td>Восточная часть США</td><td>Восточная часть США</td></tr><tr><td>Восточная часть США 2</td><td>Восточная часть США 2</td><tr/><tr><td>Центральная часть США</td><td>Центральная часть США</td><tr/><tr><td>Западная часть США</td><td>Западная часть США</td></tr><tr><td>Северо-центральный регион США</td><td>Северо-центральный регион США</td></tr><tr><td>Юго-центральный регион США</td><td>Юго-центральный регион США</td></tr><tr><td>Северная Европа</td><td>Северная Европа</td></tr><tr><td>Западная Европа</td><td>Западная Европа</td></tr><tr><td>Юго-Восточная Азия</td><td>Юго-Восточная Азия</td></tr><tr><td>Восточная Азия</td><td>Юго-Восточная Азия</td></tr><tr><td>Восточная Япония</td><td>Восточная Япония</td></tr><tr><td>Западная Япония</td><td>Восточная Япония</td></tr><tr><td>Южная Бразилия</td><td>Южная Бразилия</td></tr><tr><td>Восточная Австралия</td><td>Восточная Австралия</td></tr><tr><td>Юго-восточная Австралия</td><td>Юго-восточная Австралия</td></tr></table>


> [AZURE.NOTE] Если регион целевого хранилища данных не указан в упомянутом выше списке, действие копирования не будет выполнено через другой регион и завершится ошибкой.



### <a name="moveonpremtocloud"></a>Безопасное перемещение данных между локальным расположением и облаком
Одной из проблем интеграции данных является незаметное для пользователя перемещение данных между локальной средой и облаком. Шлюз управления данными — это локально-устанавливаемый агент, который позволяет использовать гибридные конвейеры.

Шлюз данных предоставляет следующие возможности:

1.	Безопасное управление доступом к локальным хранилищам данных.
2.	Моделирование локальных и облачных хранилищ данных в пределах одной фабрики, а также перемещение данных.
3.	Мониторинг и контроль состояния шлюза и управление им с помощью единой облачной панели мониторинга фабрики данных.

Источник данных следует считать локальным (то есть защищенным брандмауэром), даже если используется **ExpressRoute**, а для связи между службой и источником данных **используется шлюз**.

Дополнительные сведения см. в статье [Перемещение данных между локальными источниками и облаком](data-factory-move-data-between-onprem-and-cloud.md).

### Надежное и экономичное перемещение данных
Действие копирования предназначено для перемещения больших объемов данных из самых разных источников с защитой от временных ошибок. Для экономии копируемые данные можно сжать.

### Преобразование типов из различных систем
Различные хранилища данных используют разные собственные системы типов. Во время копирования типы источников автоматически преобразовываются в типы приемников. Такое преобразование выполняется в 2 этапа:

1. Преобразование собственных типов источников в тип .NET.
2. Преобразование типа .NET в собственный тип приемника.

Сведения о сопоставлениях собственных типов с типами .NET см. в статьях, посвященных конкретным соединителям для хранилищ данных. Эти сопоставления позволяют выбрать подходящие типы при создании таблиц и обеспечить правильность преобразований в процессе копирования.

### Работа с различными форматами файлов
При работе с файловыми хранилищами действие копирования поддерживает разнообразные форматы файлов, включая двоичный, текстовый форматы и формат Avro. Действие копирования можно использовать для преобразования из одного формата в другой. Пример: преобразование текста (CSV) в Avro. Если данные не структурированы, свойство **Structure** в JSON-файле определения объекта [dataset](data-factory-create-datasets.md) можно опустить.

### Свойства действия копирования
Такие свойства, как имя, описание, входные и выходные таблицы, различные политики и т. д., доступны для всех типов действий. С другой стороны, свойства, доступные в разделе **typeProperties** действия, зависят от конкретного типа действия.

В случае действия копирования содержимое раздела **typeProperties** зависит от типов источников и приемников. Сведения о свойствах, используемых для конкретных типов хранилищ, см. на страницах, посвященных этим типам.


### Настройка производительности действия копирования 
См. статью [Руководство по настройке производительности действия копирования](data-factory-copy-activity-performance.md), в которой описываются ключевые факторы, влияющие на производительность перемещения данных (действие копирования) в фабрике данных Azure. Кроме того, в ней описывается наблюдаемая производительность во время внутреннего тестирования и рассматриваются различные способы оптимизации производительности действия копирования.

<!---HONumber=AcomDC_0302_2016-->