<properties
	pageTitle="Определение политик лаборатории | Microsoft Azure"
	description="Узнайте, как определить политики лаборатории, такие как размеры виртуальных машин, максимальное количество виртуальных машин для каждого пользователя и автоматизация завершения работы."
	services="devtest-lab,virtual-machines"
	documentationCenter="na"
	authors="tomarcher"
	manager="douge"
	editor=""/>

<tags
	ms.service="devtest-lab"
	ms.workload="na"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="04/13/2016"
	ms.author="tarcher"/>

# Определение политик лаборатории

> [AZURE.NOTE] Щелкните следующую ссылку, чтобы просмотреть видео для этой статьи: [Как создавать настраиваемые артефакты](/documentation/videos/how-to-set-vm-policies-in-a-devtest-lab).

## Обзор

Лаборатория для разработки и тестирования позволяет указать ключевые политики, управляющие использованием лабораторной среды и ее виртуальных машин. Например, можно задать правила для размеров виртуальных машин, разрешенных для создания виртуальных машин, пороговое значение для числа создаваемых виртуальных машин и запланировать задания для автоматического запуска и остановки виртуальных машин лаборатории.

## Доступ к политикам лаборатории

Чтобы просмотреть (и изменить) политики для лаборатории, выполните следующие действия.

1. Войдите на [портал Azure](https://portal.azure.com).

1. Выберите **Обзор**, а затем в списке выберите **Лаборатории для разработки и тестирования**.

1. В списке лабораторий найдите нужную лабораторию.

1. Нажмите **Параметры**.

	![данных](./media/devtest-lab-set-lab-policy/lab-blade-settings.png)

1. В колонке **Параметры** находится группа параметров с именем **Политики виртуальных машин**.

	![Параметры](./media/devtest-lab-set-lab-policy/policies.png)

	В приведенном ниже списке выберите требуемую политику, чтобы узнать о ее установке более подробно.

	- [Допустимые размеры виртуальных машин.](#set-allowed-vm-sizes) Выберите список размеров виртуальных машин, допустимых в лаборатории. Пользователь может создавать виртуальные машины только из этого списка.

	- [Максимальное количество виртуальных машин для каждого пользователя](#set-maximum-vms-per-user). Укажите максимальное количество виртуальных машин, создаваемых для лаборатории, а также максимальное количество виртуальных машин, создаваемых пользователем.

	- [Максимально допустимое количество виртуальных машин](#set-total-vms-allowed). Укажите максимальное количество виртуальных машин, создаваемых для лаборатории, а также максимальное количество виртуальных машин, создаваемых пользователем.

	- [Автоматическое завершение работы.](#set-auto-shutdown) Укажите время завершения работы виртуальных машин в текущей лаборатории.

	- [Автоматический запуск](#set-auto-start). Укажите время запуска виртуальных машин в текущей лаборатории.

## Задание допустимых размеров виртуальных машин

Политика для настройки допустимых размеров виртуальных машин помогает сократить издержки, позволяя указывать, какие размеры виртуальных машин допускаются в лаборатории. Если эта политика включена, для создания виртуальных машин можно использовать размеры виртуальных машин только из этого списка.

1. В колонке **Параметры** в разделе **Политики виртуальных машин** выберите **Допустимые размеры виртуальной машины**.

	![Параметры](./media/devtest-lab-set-lab-policy/allowed-vm-sizes.png)
 
1. Нажмите **Вкл**, чтобы включить эту политику, или **Выкл**, чтобы отключить ее.

1. Если эта политика включена, выберите один или несколько размеров виртуальных машин, которые могут быть созданы в лаборатории.

1. Нажмите **Сохранить**.

## Задание максимального количества виртуальных машин для пользователя

Политика для **максимального количества виртуальных машин для каждого пользователя** позволяет указать максимальное число виртуальных машин, создаваемых отдельным пользователем. Если пользователь пытается создать новую виртуальную машину в случае достижения значения ограничения для пользователя, выводится сообщение об ошибке, информирующее о невозможности создания виртуальной машины.

1. В колонке **Параметры** в разделе **Политики виртуальных машин** выберите **Максимальное количество виртуальных машин для каждого пользователя**.

	![Параметры](./media/devtest-lab-set-lab-policy/max-vms-per-user.png)

1. Нажмите **Вкл**, чтобы включить эту политику, или **Выкл**, чтобы отключить ее.

1. Если эта политика включена, в текстовом поле **Максимальное количество виртуальных машин, допустимое для пользователя** введите числовое значение, указывающее максимальное количество виртуальных машин, создаваемых пользователем. При вводе недопустимого числа в пользовательском интерфейсе будет отображено максимально допустимое значение для данного поля.

1. Нажмите **Сохранить**.

## Задание максимально допустимого количества виртуальных машин

Политика для **максимально допустимого количества виртуальных машин** позволяет указать максимальное число виртуальных машин, создаваемых для текущей лаборатории. Если пользователь пытается создать новую виртуальную машину в случае достижения значения ограничения для лаборатории, выводится сообщение об ошибке, информирующее о невозможности создания виртуальной машины.

1. В колонке **Параметры** в разделе **Политики виртуальных машин** выберите **Максимально допустимое количество виртуальных машин**.

	![Параметры](./media/devtest-lab-set-lab-policy/total-vms-allowed.png)

1. Нажмите **Вкл**, чтобы включить эту политику, или **Выкл**, чтобы отключить ее.

1. Если эта политика включена, в текстовом поле **Максимальное количество виртуальных машин, допустимое в этой лаборатории** введите числовое значение, указывающее максимальное количество виртуальных машин, создаваемых в текущей лаборатории. При вводе недопустимого числа в пользовательском интерфейсе будет отображено максимально допустимое значение для данного поля.

1. Нажмите **Сохранить**.

## Установка автоматического завершения работы

Политика автоматического завершения работы помогает сократить издержки, позволяя указывать время выключения виртуальных машин в этой лаборатории.

1. В колонке **Параметры** в разделе **Политики виртуальных машин** выберите **Автоматическое завершение работы**.

	![Параметры](./media/devtest-lab-set-lab-policy/auto-shutdown.png)

1. Нажмите **Вкл**, чтобы включить эту политику, или **Выкл**, чтобы отключить ее.

1. Если эта политика включена, укажите местное время завершения работы всех виртуальных машин в текущей лаборатории.

1. Нажмите **Сохранить**.

1. По умолчанию после включения эта политика применяется ко всем виртуальным машинам в текущей лаборатории. Чтобы удалить этот параметр из определенной виртуальной машины, откройте колонку виртуальной машины и измените значение параметра **Автоматическое завершение работы**.

## Задание автоматического запуска

Политика автоматического запуска позволяет указать время запуска виртуальных машин в текущей среде.

1. В колонке **Параметры** в разделе **Политики виртуальных машин** выберите **Автоматический запуск**.

	![Параметры](./media/devtest-lab-set-lab-policy/auto-start.png)

1. Нажмите **Вкл**, чтобы включить эту политику, или **Выкл**, чтобы отключить ее.

1. Если эта политика включена, укажите местное время запланированного запуска и дни недели, к которым применяется время.

1. Нажмите **Сохранить**.

1. После включения эта политика не применяется автоматически к виртуальным машинам в текущей лаборатории. Чтобы применить этот параметр к определенной виртуальной машине, откройте колонку виртуальной машины и измените значение параметра **Автоматический запуск**.

## Дальнейшие действия

После определения и применения различных параметров политики виртуальных машин для лаборатории можно выполнить следующие задачи.

- [Создание настраиваемого образа](./devtest-lab-create-template.md). При создании виртуальной машины необходимо указать базовый образ виртуальной машины, который может представлять собой настраиваемый образ или образ из Marketplace. В этой статье показано, как создать настраиваемый образ из VHD-файла.
- [Настройка образов Marketplace](./devtest-lab-configure-marketplace-images.md). Лаборатория для разработки и тестирования поддерживает создание виртуальных машин на основе образов Azure Marketplace. В этой статье показано, как определить, какие образы Azure Marketplace (если таковые имеются) можно использовать при создании виртуальных машин в лаборатории.
- [Создание виртуальной машины в лаборатории](./devtest-lab-add-vm-with-artifacts.md). В этой статье показано, как создать виртуальную машину из базового образа (настраиваемого или из Marketplace) и работать с артефактами в виртуальной машине.

<!---HONumber=AcomDC_0420_2016-->