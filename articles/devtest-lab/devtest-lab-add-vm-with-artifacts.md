<properties
	pageTitle="Добавление виртуальной машины с артефактами в лабораторию | Microsoft Azure"
	description="Узнайте, как добавить виртуальную машину с артефактами в DevTest Labs."
	services="devtest-lab,virtual-machines"
	documentationCenter="na"
	authors="tomarcher"
	manager="douge"
	editor=""/>

<tags
	ms.service="devtest-lab"
	ms.workload="na"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="08/25/2016"
	ms.author="tarcher"/>

# Добавление виртуальной машины с артефактами в лабораторию

> [AZURE.VIDEO how-to-create-vms-with-artifacts-in-a-devtest-lab]

## Обзор

Виртуальная машина создается в лаборатории из *основы*, которая представляет собой [пользовательский образ](./devtest-lab-create-template.md), [формулу](./devtest-lab-manage-formulas.md) или [образ Marketplace](./devtest-lab-configure-marketplace-images.md).

*Артефакты* DevTest Labs позволяют указать *действия*, выполняемые при создании виртуальной машины.

Действия артефактов могут запускать такие процедуры, как выполнение сценариев Windows PowerShell, выполнение команд Bash и установка программного обеспечения.

*Параметры* артефакта позволяют настроить артефакт для конкретной ситуации.

В этой статье показано, как создать виртуальную машину в лаборатории с помощью артефактов.

## Добавление виртуальной машины с артефактами

1. Войдите на [портал Azure](http://go.microsoft.com/fwlink/p/?LinkID=525040).

1. Щелкните **Обзор**, а затем из списка выберите **DevTest Labs**.

1. Из списка лабораторий выберите лабораторию, в которой нужно создать виртуальную машину.

1. В колонке лаборатории щелкните **+ Lab VM** (+ Виртуальная машина лаборатории), как показано на следующем рисунке. ![Кнопка добавления виртуальной машины лаборатории](./media/devtest-lab-add-vm-with-artifacts/devtestlab-home-blade-add-vm.png)

1. В колонке **Выбор основы** выберите основу для виртуальной машины.

1. В колонке **Лаборатория ВМ** введите имя для новой виртуальной машины в текстовое поле **Имя ВМ лаборатории **.

	![Колонка виртуальной машины лаборатории](./media/devtest-lab-add-vm-with-artifacts/devtestlab-lab-vm-blade.png)

1. Введите **имя пользователя**, которому будут предоставлены права администратора на виртуальной машине.

1. Если типом ОС для выбранной основы является Linux, укажите тип проверки подлинности *Пароль* или *Открытый ключ SSH*.

1. В зависимости от указанного типа проверки подлинности введите пароль или открытый ключ SSH.

1. Щелкните **Размер виртуальной машины** и выберите один из стандартных пунктов, указывающих количество ядер процессора, объем ОЗУ и размер жесткого диска для создаваемой виртуальной машины.

1. Щелкните **Виртуальная сеть** и выберите нужную виртуальную сеть.

1. Щелкните **Подсеть** и выберите подсеть.

1. Если политика лаборатории разрешает использовать общедоступные IP-адреса для выбранной подсети, укажите, должен ли IP-адрес быть общедоступным, выбрав **Да** или **Нет**. В противном случае этот параметр отключен и имеет значение **Нет**.

1. Щелкните **Артефакты**, а затем выберите из списка и настройте артефакты, которые нужно добавить в базовый образ. **Примечание**. Если вы не знакомы с DevTest Labs или настройкой артефактов, перейдите к разделу [Добавление существующего артефакта к виртуальной машине](#add-an-existing-artifact-to-a-vm), выполните необходимые действия и вернитесь сюда.

1. Если вы хотите просмотреть или скопировать шаблон Azure Resource Manager, перейдите к разделу [Сохранение шаблона Azure Resource Manager](#save-arm-template), а по завершении вернитесь сюда.

1. Щелкните **Создать**, чтобы добавить в лабораторию указанную виртуальную машину.

1. В колонке лаборатории отображается состояние создания виртуальной машины: сначала **Создается**, а после того, как машина будет создана, — **Выполняется**.

1. Перейдите к разделу [Дальнейшие действия](#next-steps).

## Добавление существующего артефакта к виртуальной машине

Существующие артефакты можно добавить при создании виртуальной машины. Каждая лаборатория включает в себя артефакты из общедоступного репозитория артефактов DevTest Labs, а также артефакты, созданные и добавленные в ваш собственный репозиторий артефактов. Чтобы узнать, как создать артефакты, см. статью [Создание пользовательских артефактов для виртуальной машины DevTest Lab](devtest-lab-artifact-author.md).

1. В колонке **Lab VM** (Виртуальная машина лаборатории) щелкните **Артефакты**.

1. В колонке **Добавить артефакты** щелкните нужный артефакт.

![Колонка "Добавление артефактов"](./media/devtest-lab-add-vm-with-artifacts/devtestlab-add-artifact-blade.png)

1. Введите значения обязательных параметров и другие параметры по желанию.

1. Щелкните **Добавить**, чтобы добавить артефакт и вернуться в колонку **Добавить артефакты**.

1. Продолжайте добавлять артефакты, необходимые для виртуальной машины.

1. После добавления артефактов можно [изменить порядок, в котором они выполняются](#change-the-order-in-which-artifacts-are-run). Также можно вернуться к [просмотру или изменению артефакта](#view-or-modify-an-artifact).

## Изменение порядка выполнения артефактов

По умолчанию действия артефактов выполняются в порядке их добавления на виртуальную машину. Ниже показано, как изменить порядок, в котором выполняются артефакты.

1. В верхней части колонки **Добавить артефакты** щелкните ссылку указывающую на количество артефактов, добавленных в виртуальную машину.

    ![Количество артефактов, добавленных к виртуальной машине](./media/devtest-lab-add-vm-with-artifacts/devtestlab-add-artifacts-blade-selected-artifacts.png)

1. Перетащите артефакты в список в необходимом порядке. **Примечание**. Если у вас возникли проблемы при перетаскивании артефакта, убедитесь, что вы перетаскиваете артефакт за левую сторону.

1. По окончании нажмите кнопку **ОК**.

## Просмотр или изменение артефакта

Для просмотра или изменения параметров артефакта выполните следующие действия:

1. В верхней части колонки **Добавить артефакты** щелкните ссылку указывающую на количество артефактов, добавленных в виртуальную машину.

    ![Количество артефактов, добавленных к виртуальной машине](./media/devtest-lab-add-vm-with-artifacts/devtestlab-add-artifacts-blade-selected-artifacts.png)

1. В колонке **Выбранные артефакты** щелкните артефакт, который хотите просмотреть или изменить.

1. В колонке **Добавить артефакт** внесите необходимые изменения, а затем нажмите кнопку **ОК**, чтобы закрыть колонку **Добавить артефакт**.

1. Нажмите кнопку **ОК**, чтобы закрыть колонку **Выбранные артефакты**.

## Сохранение шаблона Azure Resource Manager

С помощью шаблона Azure Resource Manager можно декларативно определить повторяемое развертывание. Далее описывается процесс сохранения шаблона Azure Resource Manager для создаваемой виртуальной машины. После сохранения шаблон Azure Resource Manager можно использовать для [развертывания новых виртуальных машин с помощью Azure PowerShell](../resource-group-overview.md#template-deployment).

1. В колонке **Lab VM** (Виртуальная машина лаборатории) щелкните **View ARM Template** (Просмотреть шаблон ARM).

1. В колонке **View Azure Resource Manager Template** (Просмотр шаблона Azure Resource Manager) выделите весь текст шаблона.

1. Скопируйте выделенный текст в буфер обмена.

1. Нажмите кнопку **ОК**, чтобы закрыть колонку **View Azure Resource Manager Template** (Просмотр шаблона Azure Resource Manager).

1. Откройте текстовый редактор.

1. Вставьте текст шаблона из буфера обмена.

1. Сохраните файл для последующего использования.

[AZURE.INCLUDE [devtest-lab-try-it-out](../../includes/devtest-lab-try-it-out.md)]

## Дальнейшие действия

- После создания виртуальной машины к ней можно подключиться, щелкнув **Подключиться** в колонке виртуальной машины.
- Узнайте, как [создавать пользовательские артефакты для виртуальной машины DevTest Labs](devtest-lab-artifact-author.md).
- Изучите [коллекцию шаблонов быстрого запуска ARM для DevTest Labs](https://github.com/Azure/azure-devtestlab/tree/master/ARMTemplates).

<!---HONumber=AcomDC_0831_2016-->