---
title: Добавление виртуальной машины с артефактами в лабораторию в Azure DevTest Labs | Microsoft Docs
description: Узнайте, как добавить виртуальную машину с артефактами в Azure DevTest Labs.
services: devtest-lab,virtual-machines
documentationcenter: na
author: tomarcher
manager: douge
editor: ''

ms.service: devtest-lab
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/30/2016
ms.author: tarcher

---
# Добавление виртуальной машины с артефактами в лабораторию в Azure DevTest Labs
> [!VIDEO https://channel9.msdn.com/Blogs/Windows-Azure/How-to-create-VMs-with-Artifacts-in-a-DevTest-Lab/player]
> 
> 

Виртуальная машина создается в лаборатории из *основы*, которая представляет собой [пользовательский образ](devtest-lab-create-template.md), [формулу](devtest-lab-manage-formulas.md) или [образ Marketplace](devtest-lab-configure-marketplace-images.md).

*Артефакты* DevTest Labs позволяют указать *действия*, выполняемые при создании виртуальной машины.

Действия артефактов могут запускать такие процедуры, как выполнение сценариев Windows PowerShell, выполнение команд Bash и установка программного обеспечения.

*Параметры* артефакта позволяют настроить артефакт для конкретной ситуации.

В этой статье показано, как создать виртуальную машину в лаборатории с помощью артефактов.

## Добавление виртуальной машины с артефактами
1. Выполните вход на [портал Azure](http://go.microsoft.com/fwlink/p/?LinkID=525040).
2. Щелкните **Другие службы**, а затем выберите в списке **DevTest Labs**.
3. Из списка лабораторий выберите ту, в которой необходимо создать виртуальную машину.
4. В колонке **Обзор** лаборатории выберите **+ Виртуальная машина**. ![Кнопка добавления виртуальной машины](./media/devtest-lab-add-vm-with-artifacts/devtestlab-home-blade-add-vm.png)
5. В колонке **Выбор основы** выберите основу для виртуальной машины.
6. В колонке **Виртуальная машина** введите имя для новой виртуальной машины в текстовое поле **Имя виртуальной машины**.
   
    ![Колонка виртуальной машины лаборатории](./media/devtest-lab-add-vm-with-artifacts/devtestlab-lab-vm-blade.png)
7. Введите **имя пользователя**, которому будут предоставлены права администратора на виртуальной машине.
8. Если вы хотите использовать пароль, хранящийся в *хранилище секретов*, то выберите **Use secrets from my secret store** (Использовать секреты из моего хранилища секретов) и укажите значение ключа, соответствующее секрету (пароль). В противном случае — просто введите пароль в текстовое поле, где указано **Введите значение**.
9. Щелкните **Размер виртуальной машины** и выберите один из стандартных пунктов, указывающих количество ядер процессора, объем ОЗУ и размер жесткого диска для создаваемой виртуальной машины.
10. Щелкните **Виртуальная сеть** и выберите нужную виртуальную сеть.
11. Щелкните **Подсеть** и выберите подсеть.
12. Если политика лаборатории разрешает использовать общедоступные IP-адреса для выбранной подсети, то укажите, должен ли IP-адрес быть общедоступным, выбрав **Да** или **Нет**. В противном случае этот параметр отключен и имеет значение **Нет**.
13. Щелкните **Артефакты**, а затем выберите из списка и настройте артефакты, которые нужно добавить в базовый образ. **Примечание**. Если вы не знакомы с DevTest Labs или настройкой артефактов, перейдите к разделу [Добавление существующего артефакта к виртуальной машине](#add-an-existing-artifact-to-a-vm), выполните необходимые действия и вернитесь сюда.
14. Если вы хотите просмотреть или скопировать шаблон Azure Resource Manager, перейдите к разделу [Сохранение шаблона Azure Resource Manager](#save-arm-template), а по завершении вернитесь сюда.
15. Щелкните **Создать**, чтобы добавить в лабораторию указанную виртуальную машину.
16. В колонке лаборатории отображается состояние создания виртуальной машины: сначала **Создается**, а после того, как машина будет создана, — **Выполняется**.
17. Перейдите к разделу [Дальнейшие действия](#next-steps).

## Добавление существующего артефакта к виртуальной машине
Существующие артефакты можно добавить при создании виртуальной машины. Каждая лаборатория включает в себя артефакты из общедоступного репозитория артефактов DevTest Labs, а также артефакты, созданные и добавленные в ваш собственный репозиторий артефактов. Чтобы узнать, как создать артефакты, см. статью [Создание пользовательских артефактов для виртуальной машины DevTest Lab](devtest-lab-artifact-author.md).

1. В колонке **Виртуальная машина** выберите **Артефакты**.
2. В колонке **Добавить артефакты** щелкните нужный артефакт.
   
    ![Колонка "Добавление артефактов"](./media/devtest-lab-add-vm-with-artifacts/devtestlab-add-artifact-blade.png)
3. Введите значения обязательных параметров и другие параметры по желанию.
4. Щелкните **Добавить**, чтобы добавить артефакт и вернуться в колонку **Добавить артефакты**.
5. Продолжайте добавлять артефакты, необходимые для виртуальной машины.
6. После добавления артефактов можно [изменить порядок, в котором они выполняются](#change-the-order-in-which-artifacts-are-run). Также можно вернуться к [просмотру или изменению артефакта](#view-or-modify-an-artifact).

## Изменение порядка выполнения артефактов
По умолчанию действия артефактов выполняются в порядке их добавления на виртуальную машину. Ниже показано, как изменить порядок, в котором выполняются артефакты.

1. В верхней части колонки **Добавить артефакты** щелкните ссылку указывающую на количество артефактов, добавленных в виртуальную машину.
   
    ![Количество артефактов, добавленных к виртуальной машине](./media/devtest-lab-add-vm-with-artifacts/devtestlab-add-artifacts-blade-selected-artifacts.png)
2. Чтобы изменить порядок выполнения артефактов, перетащите их в другое положение в списке. **Примечание**. Если у вас возникли проблемы при перетаскивании артефакта, убедитесь, что вы перетаскиваете артефакт за левую сторону.
3. По окончании нажмите кнопку **ОК**.

## Просмотр или изменение артефакта
Для просмотра или изменения параметров артефакта выполните следующие действия:

1. В верхней части колонки **Добавить артефакты** щелкните ссылку указывающую на количество артефактов, добавленных в виртуальную машину.
   
    ![Количество артефактов, добавленных к виртуальной машине](./media/devtest-lab-add-vm-with-artifacts/devtestlab-add-artifacts-blade-selected-artifacts.png)
2. В колонке **Выбранные артефакты** щелкните артефакт, который хотите просмотреть или изменить.
3. В колонке **Добавить артефакт** внесите необходимые изменения, а затем нажмите кнопку **ОК**, чтобы закрыть колонку **Добавить артефакт**.
4. Нажмите кнопку **ОК**, чтобы закрыть колонку **Выбранные артефакты**.

## Сохранение шаблона Azure Resource Manager
С помощью шаблона Azure Resource Manager можно декларативно определить повторяемое развертывание. Далее описывается процесс сохранения шаблона Azure Resource Manager для создаваемой виртуальной машины. После сохранения шаблон Azure Resource Manager можно использовать для [развертывания новых виртуальных машин с помощью Azure PowerShell](../resource-group-overview.md#template-deployment).

1. В колонке **Виртуальная машина** выберите **View ARM Template** (Просмотреть шаблон ARM).
2. В колонке **View Azure Resource Manager Template** (Просмотр шаблона Azure Resource Manager) выделите текст шаблона.
3. Скопируйте выделенный текст в буфер обмена.
4. Нажмите кнопку **ОК**, чтобы закрыть колонку **View Azure Resource Manager Template** (Просмотр шаблона Azure Resource Manager).
5. Откройте текстовый редактор.
6. Вставьте текст шаблона из буфера обмена.
7. Сохраните файл для последующего использования.

[!INCLUDE [devtest-lab-try-it-out](../../includes/devtest-lab-try-it-out.md)]

## Дальнейшие действия
* После создания виртуальной машины к ней можно подключиться, щелкнув **Подключиться** в колонке виртуальной машины.
* Узнайте, как [создавать пользовательские артефакты для виртуальной машины DevTest Labs](devtest-lab-artifact-author.md).
* Изучите [коллекцию шаблонов быстрого запуска ARM для DevTest Labs](https://github.com/Azure/azure-devtestlab/tree/master/ARMTemplates).

<!---HONumber=AcomDC_0907_2016-->