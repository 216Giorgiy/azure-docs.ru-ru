---
title: Общие сведения о жизненном цикле Azure Blueprint
description: Сведения о жизненном цикле схемы и подробные сведения о каждом этапе цикла.
services: blueprints
author: DCtheGeek
ms.author: dacoulte
ms.date: 09/18/2018
ms.topic: conceptual
ms.service: blueprints
manager: carmonm
ms.openlocfilehash: e0790168a8b9590aaa440a04cd99f26c2ece2818
ms.sourcegitcommit: 32d218f5bd74f1cd106f4248115985df631d0a8c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/24/2018
ms.locfileid: "46991545"
---
# <a name="understand-the-life-cycle-of-an-azure-blueprint"></a>Общие сведения о жизненном цикле Azure Blueprint

Как и многие ресурсы в Azure, схемы в Azure Blueprint обладают обычным и естественным жизненным циклом. Они создаются, развертываются и, наконец, удаляются, когда они больше не требуются или нерелевантны.
Схемы поддерживают стандартные операции жизненного цикла CRUD (создание/чтение/обновление/удаление), а также на основе них предоставляют дополнительные уровни состояния, которые поддерживают типичные конвейеры непрерывной интеграции и непрерывного развертывания для использования теми, кто управляет своей инфраструктурой через код. Такая среда называется "инфраструктура как код" и является ключевым элементом DevOps.

Чтобы полностью понять схему и этапы, мы рассмотрим стандартный жизненный цикл:

> [!div class="checklist"]
> - создание и изменение схемы;
> - публикация схемы;
> - создание новой версии схемы и ее изменение;
> - публикация новой версии схемы;
> - удаление определенной версии схемы;
> - удаление схемы.

## <a name="creating-and-editing-a-blueprint"></a>Создание и изменение схемы

При создании схемы добавьте в нее артефакты, сохраните ее в группу управления, а также укажите уникальное имя и уникальную версию схемы. На этом этапе схема находится в режиме **черновика**, поэтому она еще не может быть назначена. Однако в режиме **черновика** ее можно продолжать обновлять и изменять.

Схема в режиме **черновика**, которая никогда не публиковалась, будет отображаться на странице **Определения схем** со значком, отличным от значка ранее **опубликованной** схемы. Для неопубликованных схем параметр **Последняя версия** будет отображаться со значением **Черновик**.

Создайте схему с помощью [портала Azure](../create-blueprint-portal.md#create-a-blueprint) или [REST API](../create-blueprint-rest-api.md#create-a-blueprint) и измените ее.

## <a name="publishing-a-blueprint"></a>Публикация схемы

После внесения всех необходимых изменений в схему в режиме **черновика** ее можно **опубликовать** и сделать доступной для назначения. **Опубликованную** версию схемы нельзя изменить.
После **публикации** схема отображается со значком, отличным от значка схемы в режиме **черновика**, а в столбце **Последняя версия** показана предоставленная версия.

Опубликуйте схему с помощью [портала Azure](../create-blueprint-portal.md#publish-a-blueprint) или [REST API](../create-blueprint-rest-api.md#publish-a-blueprint).

## <a name="creating-and-editing-a-new-version-of-the-blueprint"></a>Создание новой версии схемы и ее изменение

Несмотря на то что **опубликованную** версию схемы нельзя изменить, в существующую схему можно добавить новую версию схемы и изменить ее нужным образом. Это выполняется путем внесения изменений в существующую схему. Если схема уже **опубликована** на момент сохранения изменений, они отображаются в качестве **неопубликованных изменений** в списке определений схем. При сохранении изменений сохраняется версия **черновика** схемы.

Измените схему с помощью [портала Azure](../create-blueprint-portal.md#edit-a-blueprint).

## <a name="publishing-a-new-version-of-the-blueprint"></a>Публикация новой версии схемы

Так же, как первая версия схемы была **опубликована** для назначения, каждую последующую версию той же схемы нужно **опубликовать** перед назначением. Если в схему внесены **новые изменения**, которые еще не **опубликованы**, на странице изменения схемы станет доступна кнопка **Опубликовать схему**. Если кнопка недоступна, значит схема уже была **опубликована**, но в ней нет **неопубликованных изменений**.

> [!NOTE]
> У одной схемы может быть несколько **опубликованных** версий, которые можно назначить подпискам.

Действия по публикации схемы с **неопубликованными изменениями** в качестве новой версии существующей схемы аналогичны шагам для публикации новой схемы.

## <a name="deleting-a-specific-version-of-the-blueprint"></a>Удаление определенной версии схемы

Каждая версия схемы является уникальным объектом и может быть **опубликована** отдельно. Это также означает, что каждую версию схемы можно удалить. Удаление версии схемы никак не влияет на другие версии этой схемы.

> [!NOTE]
> Удалить схему, у которой есть активные назначения, невозможно. Сначала удалите назначения, а затем удалите необходимую версию.

1. Запустите службу Azure Blueprint на портале Azure. Для этого щелкните **Все службы**, а затем найдите и выберите пункт **Политика** на левой панели. На странице **Политика** нажмите кнопку **Схемы**.

1. Выберите **Определения схем** на странице слева и используйте параметры фильтра, чтобы обнаружить схему, версию которой необходимо удалить. Щелкните нужную схему, чтобы открыть страницу изменения.

1. Выберите вкладку **Опубликованные версии** и найдите версию, которую требуется удалить.

1. Щелкните правой кнопкой мыши версию, которую необходимо удалить, и выберите **Удалить эту версию**.

## <a name="deleting-the-blueprint"></a>Удаление схемы

Основную схему также можно удалить. Удаление основной схемы также приведет к удалению всех версий схемы вне зависимости от их состояния: **Черновик** или **Опубликовано**. Как и в случае удаления версии схемы, удаление основной схемы не приводит к удалению имеющихся назначений любых версий схемы.

> [!NOTE]
> Удалить схему, у которой есть активные назначения, невозможно. Сначала удалите назначения, а затем удалите необходимую версию.

Удалите схему с помощью [портала Azure](../create-blueprint-portal.md#delete-a-blueprint) или [REST API](../create-blueprint-rest-api.md#delete-a-blueprint).

## <a name="assignments"></a>Назначения

В рамках жизненного цикла существует несколько моментов, когда схему можно назначить подписке.
Когда версия схемы находится в режиме **Опубликовано**, ее можно назначить подписке. Если есть одна или несколько версий схемы в режиме **Опубликовано**, тогда каждая из этих **опубликованных** версий доступна для назначения, даже при наличии версии **черновика** схемы. Благодаря этому версии схемы можно использовать и активно назначать, в то время как более новые версии разрабатываются.

По мере назначения версий схем необходимо понимать, куда и с какими параметрами они были назначены. Параметры могут быть статическими и динамическими. Дополнительные сведения см. в статье о [статических и динамических параметрах](parameters.md).

### <a name="updating-assignments"></a>Обновление назначений

Когда схема назначена, это назначение можно обновить. Существуют разные причины для обновления существующего назначения, в том числе:

- добавление или удаление [блокировки ресурсов](resource-locking.md);
- изменение значений [динамических параметров](parameters.md#dynamic-parameters);
- обновление назначения до новой **опубликованной** версии схемы.

Узнайте, как [обновлять существующие назначения](../how-to/update-existing-assignments.md).

## <a name="next-steps"></a>Дополнительная информация

- Узнайте, как использовать [статические и динамические параметры](parameters.md)
- Научитесь настраивать [последовательность схемы](sequencing-order.md)
- Узнайте, как применять [блокировку ресурсов схемы](resource-locking.md)
- Узнайте, как [обновлять существующие назначения](../how-to/update-existing-assignments.md)
- Устраняйте проблемы, возникающие во время назначения схемы, с помощью [общих инструкций по устранению неполадок](../troubleshoot/general.md)