---
title: Общие сведения о блокировке ресурсов в Azure Blueprint
description: Узнайте о возможности блокировки для защиты ресурсов при назначении схемы.
services: blueprints
author: DCtheGeek
ms.author: dacoulte
ms.date: 09/18/2018
ms.topic: conceptual
ms.service: blueprints
manager: carmonm
ms.openlocfilehash: 718c23b806da5058c042b961077e51ba0d4b6245
ms.sourcegitcommit: 32d218f5bd74f1cd106f4248115985df631d0a8c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/24/2018
ms.locfileid: "46973258"
---
# <a name="understand-resource-locking-in-azure-blueprints"></a>Общие сведения о блокировке ресурсов в Azure Blueprint

Создание согласованных сред в нужном масштабе имеет ценность, только если существует механизм, гарантирующий сохранение согласованности. В этой статье рассказывается, как работает блокировка ресурсов в Azure Blueprint.

## <a name="locking-modes-and-states"></a>Режимы и состояния блокировки

Режим блокировки применяется для назначения схемы и имеет только два варианта: **Нет** или **Все ресурсы**. Режим настраивается во время назначения схемы, его невозможно изменить после успешного применения назначения к подписке.

Ресурсы, созданные определениями артефактов в составе схемы, назначенной подписке, имеют три состояния: **Не заблокировано**, **Только чтение** и **Невозможно редактировать/удалить**. Любой тип артефакта может находиться в состоянии **Не заблокировано**. Однако артефакты нересурсной группы **доступны только для чтения**, а группы ресурсов имеют состояние **Невозможно редактировать/удалить**. Это важное различие в управлении этими ресурсами.

Состояние **Только чтение** в точности соответствует своему определению: ресурс невозможно изменить или удалить каким-либо образом. Режим **Невозможно редактировать/удалить** имеет больше нюансов из-за "контейнерной" природы групп ресурсов. Объект группы ресурсов доступен только для чтения, но существует возможность создания, обновления и удаления ресурсов в ресурсе группы до тех пор, пока они не являются частью назначения схемы с состоянием блокировки **Только чтение**.

## <a name="overriding-locking-states"></a>Переопределение состояний блокировки

Как правило, пользователь с соответствующими правами [контроля доступа на основе ролей](../../../role-based-access-control/overview.md) (RBAC) в подписке (например, владелец) может изменить или удалить любой ресурс, но только не в случае применения схемами блокировки в рамках развернутого назначения. Если назначение было задано с параметром **Блокировать**, даже владелец подписки не сможет изменить входящие в ее состав ресурсы.

Это защищает согласованность определенной схемы и среды, для создания которой эта схема предназначается, от случайного или программного удаления либо изменения.

## <a name="removing-locking-states"></a>Удаление состояний блокировки

Если необходимо удалить ресурсы, созданные назначением, то сделать это можно, только предварительно удалив назначение. После удаления назначения созданные схемами блокировки удаляются. Однако ресурс остается, и после этого кто-то с соответствующими полномочиями должен удалить его стандартным способом.

## <a name="how-blueprint-locks-work"></a>Как работают блокировки схемы

Роль RBAC`denyAssignments` применяется к ресурсам артефактов во время назначения схемы, если назначение выбрало параметр **Блокировка**. Роль добавляется управляемым удостоверением назначения схемы и может быть удалена из ресурсов артефактов только тем же управляемым удостоверением. Это обеспечивает реализацию механизма блокировки и предотвращает попытки удалить блокировку схемы за пределами схемы. Удаление этой роли и блокировки возможно только путем удаления назначения схемы, а эту операцию могут выполнить только пользователи с соответствующими полномочиями.

## <a name="next-steps"></a>Дополнительная информация

- Ознакомьтесь с [жизненным циклом схемы](lifecycle.md)
- Узнайте, как использовать [статические и динамические параметры](parameters.md)
- Научитесь настраивать [последовательность схемы](sequencing-order.md)
- Узнайте, как [обновлять существующие назначения](../how-to/update-existing-assignments.md)
- Устраняйте проблемы, возникающие во время назначения схемы, с помощью [общих инструкций по устранению неполадок](../troubleshoot/general.md)