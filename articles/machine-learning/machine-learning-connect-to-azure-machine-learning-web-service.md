<properties
	pageTitle="Подключитесь к веб-службе машинного обучения | Microsoft Azure"
	description="При использовании C# или Python для подключения к веб-службе машинного обучения Azure используется ключ авторизации."
	services="machine-learning"
	documentationCenter=""
	authors="garyericson"
	manager="paulettm"
	editor="cgronlun" />

<tags
	ms.service="machine-learning"
	ms.workload="data-services"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="07/06/2016" 
	ms.author="garye" />


# Подключение к веб-службе машинного обучения Azure
Среда разработки машинное обучение Azure — это API веб-службы, предназначенный для прогнозирования на основе входных данных в режиме реального времени или в пакетном режиме. Студия машинного обучения Azure используется для создания прогнозов и их развертывания в веб-службе машинного обучения Azure.

[AZURE.INCLUDE [machine-learning-free-trial](../../includes/machine-learning-free-trial.md)]

Чтобы узнать, как выполнять создание и развертывание веб-службы машинного обучения с помощью студии машинного обучения Azure, обратитесь к следующим разделам:

- Учебник по созданию эксперимента в студии машинного обучения см. в статье [Создание первого эксперимента](machine-learning-create-experiment.md).
- Дополнительные сведения о развертывании веб-службы см. в статье [Развертывание веб-службы машинного обучения](machine-learning-publish-a-machine-learning-web-service.md).
- Дополнительные сведения о машинном обучении см. в [центре документации по машинному обучению Azure](https://azure.microsoft.com/documentation/services/machine-learning/).

## Веб-служба машинного обучения Azure ##

С помощью веб-службы машинного обучения Azure внешнее приложение взаимодействует с рабочим процессом машинного обучения, оценивая модель в режиме реального времени. Вызов веб-службы машинного обучения возвращает результаты прогноза внешнему приложению. Чтобы вызвать веб-службу машинного обучения, следует передать ключ API, создаваемый при развертывании прогноза. Веб-служба машинного обучения работает на основе архитектуры REST, используемой в основном в проектах с веб-программированием.

Машинное обучение Azure содержит два типа служб:

- Служба обработки запросов и ответов (RRS) — высокомасштабируемая служба с малым временем задержки, используемая в качестве интерфейса для моделей без изменения состояния, которые создаются и развертываются в студии машинного обучения Microsoft Azure.
- Служба пакетного выполнения (BES) — асинхронная служба, оценивающая пакет записей данных.

Дополнительные сведения о веб-службах машинного обучения приведены в статье [Развертывание веб-службы машинного обучения](machine-learning-publish-a-machine-learning-web-service.md).

## Получение ключа авторизации машинного обучения Azure ##

При развертывании эксперимента создаются ключи API для веб-службы. Источник получения ключей зависит от того, как развернут эксперимент: как новая веб-служба или как классическая веб-служба.

## Классическая веб-служба ##

 Ключ можно получить из студии машинного обучения или на портале Azure.

### Студия машинного обучения ###

1. В студии машинного обучения щелкните **WEB SERVICES** (ВЕБ-СЛУЖБЫ) слева.
2. Щелкните веб-службу. **Ключ API** указан на вкладке **DASHBOARD** (ПАНЕЛЬ МОНИТОРИНГА).

### Портал Azure ###

1. Щелкните **МАШИННОЕ ОБУЧЕНИЕ** слева.
2. Щелкните рабочую область.
3. Щелкните **ВЕБ-СЛУЖБЫ**.
4. Щелкните веб-службу.
5. Щелкните конечную точку. Элемент "КЛЮЧ API" находится в правом нижнем углу.


## Новая веб-служба 

Для получения ключа API для новой веб-службы машинного обучения необходимо войти на портал [веб-служб Машинного обучения Microsoft Azure](https://services.azureml.net/quickstart).

1. На портале веб-служб Машинного обучения Azure в верхнем меню щелкните **WEB SERVICES** (ВЕБ-СЛУЖБЫ).
2. Щелкните веб-службу, для которой требуется получить ключ.
3. В верхнем меню щелкните **Consume** (Использование).
4. Скопируйте и сохраните **Primary Key** (Первичный ключ).

## <a id="connect"></a>Подключение к веб-службе машинного обучения

К веб-службе машинного обучения можно подключиться, используя любой язык программирования, поддерживающий HTTP-запрос и HTTP-ответ. Примеры на языках C#, Python и R можно просмотреть на странице справки веб-службы машинного обучения.

**Справка по API машинного обучения** Страница справки по API машинного обучения Azure создается при развертывании веб-службы. См. [Пошаговое руководство по машинному обучению Azure — развертывание в веб-службе](machine-learning-walkthrough-5-publish-web-service.md). Справка по API машинного обучения содержит сведения о веб-службе прогнозирования.

**Чтобы открыть справку по API машинного обучения для классической веб-службы**, в студии машинного обучения выполните описанные ниже действия.

1. Щелкните **ВЕБ-СЛУЖБЫ**.
2. Щелкните веб-службу.
3. Щелкните **API help page** (Страница справки API) — **REQUEST/RESPONSE** (ЗАПРОС/ОТВЕТ) или **BATCH EXECUTION** (ПАКЕТНОЕ ВЫПОЛНЕНИЕ).

**Чтобы открыть справку по API машинного обучения для новой веб-службы**, на портале веб-служб Машинного обучения Azure выполните описанные ниже действия.

1. В верхнем меню щелкните **WEB SERVICES** (ВЕБ-СЛУЖБЫ).
2. Щелкните веб-службу, для которой требуется получить ключ.

Щелкните **Consume** (Использование), чтобы получить URI для службы "запрос-ответ" и службы пакетного выполнения, а также для примера кода на C#, R и Python.

Щелкните **Swagger API**, чтобы получить документацию на основе Swagger для интерфейсов API, вызываемых из передаваемых URI.

### Пример на языке C# ###

Для подключения к веб-службе машинного обучения воспользуйтесь клиентом **HttpClient**, передав ScoreData. Данные набора содержат Вектор свойств, n-мерный вектор числовых параметров, представляющий Данные набора. Службу машинного обучения можно аутентифицировать с помощью ключа API.

Для подключения к веб-службе машинного обучения должен быть установлен пакет Nuget **Microsoft.AspNet.WebApi.Client**.

**Установите Microsoft.AspNet.WebApi.Client Nuget в Visual Studio**

1. Опубликуйте набор данных Загрузки из набора UCI: Adult 2 веб-службы.
2. Выберите **Инструменты** > **Диспетчер пакетов Nuget** > **Консоль диспетчера пакетов**.
2. Выберите **Установить пакет Microsoft.AspNet.WebApi.Client**.

**Для запуска примера выполните следующие действия:**

1. Опубликуйте эксперимент "Пример 1. Загрузка набора данных из UCI: набор данных для класса Adult 2", входящий в набор примеров машинного обучения Azure.
2. Назначьте apiKey ключ из веб-службы. См. раздел **Получение ключа авторизации машинного обучения Azure** выше.
3. Назначьте serviceUri универсальный код ресурса запроса.


### Пример на Python ###

Для подключения к веб-службе машинного обучения воспользуйтесь библиотекой **urllib2**, передав ScoreData. Данные набора содержат Вектор свойств, n-мерный вектор числовых параметров, представляющий Данные набора. Службу машинного обучения можно аутентифицировать с помощью ключа API.


**Для запуска примера выполните следующие действия:**

1. Разверните эксперимент "Sample 1: Download dataset from UCI: Adult 2 class dataset" (Пример 1. Скачивание набора данных из UCI: набор данных для класса Adult 2), входящий в набор примеров машинного обучения.
2. Назначьте apiKey ключ из веб-службы. См. раздел **Получение ключа авторизации машинного обучения Azure** выше.
3. Назначьте serviceUri универсальный код ресурса запроса.

<!---HONumber=AcomDC_0720_2016-->