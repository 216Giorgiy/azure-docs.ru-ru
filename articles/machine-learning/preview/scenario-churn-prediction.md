---
title: "Прогнозирование оттока клиентов с помощью Машинного обучения Azure | Документация Майкрософт"
description: "Порядок выполнения анализа оттока с помощью Azure ML Workbench."
services: machine-learning
documentationcenter: 
author: miprasad
manager: kristin.tolle
editor: miprasad
ms.assetid: 
ms.service: machine-learning
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 09/17/2017
ms.author: miprasad
ms.translationtype: HT
ms.sourcegitcommit: c3a2462b4ce4e1410a670624bcbcec26fd51b811
ms.openlocfilehash: 55298a7ff96bd9662310fa6b5d1764370f500be5
ms.contentlocale: ru-ru
ms.lasthandoff: 09/25/2017

---

# <a name="customer-churn-prediction-using-azure-machine-learning"></a>Прогнозирование оттока клиентов с помощью Машинного обучения Azure

В среднем сохранение имеющихся клиентов обходится в пять раз дешевле, чем поиск новых. В результате менеджеры по маркетингу часто пытаются оценить вероятность оттока клиентов и найти необходимые меры для минимизации оттока.

Цель этого решения — продемонстрировать прогнозную аналитику оттока с помощью Azure Machine Learning Workbench. Это решение предоставляет простой в использовании шаблон для разработки конвейеров данных прогнозной аналитики оттока для розничных продавцов. Шаблон можно использовать с различными наборами данных и различными определениями оттока. Целью этого практического примера является:

1. Ознакомление со средствами подготовки данных Azure Machine Learning Workbench для очистки и принятия данных взаимоотношений с клиентами для анализа оттока.

2. Выполнение преобразования признаков для обработки необработанных разнородных данных.

3. Интеграция сторонних библиотек (таких как `scikit-learn` и `azureml`) для разработки классификаторов по методу Байеса и деревьев принятия решений для прогнозирования оттока.

4. Развертывание.

## <a name="link-of-the-gallery-github-repository"></a>Ссылка на репозиторий коллекции на GitHub
Вот ссылка на общедоступный репозиторий GitHub, в котором размещен весь код:

[https://github.com/Azure/MachineLearningSamples-ChurnPrediction](https://github.com/Azure/MachineLearningSamples-ChurnPrediction)

## <a name="use-case-overview"></a>Обзор варианта использования
Компании нуждаются в эффективной стратегии управления оттоком клиентов. Это клиенты, которые прекращают использование службы, переходят на службу конкурента, переходят на более низкий уровень обслуживания или снижают взаимодействие со службой.

В этом случае мы рассматриваем данные французской телекоммуникационной компании Orange, чтобы идентифицировать клиентов, которые, скорее всего, откажутся от службы в ближайшем будущем. Наши усилия направлены на то, чтобы улучшить обслуживание и создать рекламные кампании, которые помогут сохранить клиентов.

Телекоммуникационные компании сталкиваются с конкурентным рынком. Многие операторы теряют доход от клиентов, использующих способ оплаты по факту, из-за оттока. Следовательно, способность точно идентифицировать отток клиентов может быть огромным конкурентным преимуществом.

Вот некоторые из факторов, способствующих оттоку клиентов телекоммуникационных компаний:

* наблюдаются частные неполадки службы;
* плохое обслуживание клиентов в розничных и интернет-магазинах;
* предложения от других конкурирующих операторов (лучший семейный план, план данных и т. д.).

Для данного решения будет использован конкретный пример построения модели прогнозирования оттока клиентов для телекоммуникационных компаний.

## <a name="prerequisites"></a>Предварительные требования

* [Учетная запись Azure](https://azure.microsoft.com/free/) (доступны бесплатные пробные версии).

* Установленная копия [Azure Machine Learning Workbench](./overview-what-is-azure-ml.md). Чтобы установить эту программу и создать рабочую область, выполните инструкции из [краткого руководства по установке](./quickstart-installation.md).

* Для ввода в эксплуатацию модели лучше всего, чтобы модуль Docker был установлен и работал локально. Если нет, то можно использовать вариант с кластером. Имейте в виду, что запуск службы контейнеров Azure (ACS) может быть затратным.

* В этом решении предполагается, что Azure Machine Learning Workbench работает в Windows 10 с модулем Docker, установленным на локальном компьютере. Если вы используете macOS, большинство инструкций будут аналогичными.

## <a name="create-a-new-workbench-project"></a>Создание проекта в Workbench

Создайте проект, используя в качестве шаблона следующий пример:
1.  Откройте Azure Machine Learning Workbench.
2.  На странице **Projects** (Проекты) щелкните знак **+** и выберите **New Project** (Создать проект).
3.  В области **Create New Project** (Создание проекта) введите информацию о новом проекте.
4.  В поле поиска **Search Project Templates** (Поиск шаблонов проектов) введите Customer Churn Prediction (Прогнозирование оттока клиентов) и выберите шаблон.
5.  Нажмите кнопку **Создать**

## <a name="data-description"></a>Описание данных

Набор данных, используемый в решении, взят с конкурса SIDKDD 2009. Он вызывается с помощью `CATelcoCustomerChurnTrainingSample.csv` и находится в папке [`Data`](https://github.com/mezmicrosoft/MachineLearningSamples-ChurnPrediction/tree/master/Data). Набор данных состоит из необработанных разнородных анонимных данных (числовые или категориальные переменные) французской телекоммуникационной компании Orange.

Переменные фиксируют демографическую информацию клиента, статистику звонков (например, среднюю продолжительность звонка, частоту сбоя вызовов и т. д.), информацию о контракте, статистику жалоб. Обработка переменной является двоичной (0 — не было оттока, 1 — отток).

## <a name="scenario-structure"></a>Структура сценария

Папки упорядочены следующим образом.

__Code__. Содержит весь код, относящийся к прогнозированию оттока с помощью Azure Machine Learning Workbench.

__Data__. Содержит набор данных, используемых в решении.  

__Labs__. Содержит практические занятия.

Порядок выполнения практических заданий решения выглядит так:
1. Подготовка данных. Файлы, относящиеся к подготовке данных, находятся в папке code и называются `CATelcoCustomerChurnTrainingSample.dprep`, `CATelcoCustomerChurnTrainingSample.dconn` и `CATelcoCustomerChurnTrainingSample.csv`.
2. Моделирование и оценка. Основной файл, относящийся к моделированию и вычислениям, находится в папке code и называется `CATelcoCustomerChurnModeling.py`.
3. Моделирование и оценка в Docker. Основной файл для выполнения этой задачи находится в папке code и называется `CATelcoCustomerChurnModelingDocker.py`.
4. Ввод в эксплуатацию. Основные файлы для развертывания — это файлы модели (`model.pkl`) и `churn_schema_gen.py`.

| Порядок| Имя файла | Связанные файлы |
|--|-----------|------|
| 1 | [`DataPreparation.md`](https://github.com/Azure/MachineLearningSamples-ChurnPrediction/blob/master/Docs/DataPreparation.md) | "Data/CATelcoCustomerChurnTrainingSample.csv" |
| 2 | [`ModelingAndEvaluation.md`](https://github.com/Azure/MachineLearningSamples-ChurnPrediction/blob/master/Docs/ModelingAndEvaluation.md) | "Code/CATelcoCustomerChurnModeling.py" |
| 3 | [`ModelingAndEvaluationDocker.md`](https://github.com/Azure/MachineLearningSamples-ChurnPrediction/blob/master/Docs/ModelingAndEvaluationDocker.md) | "Code/CATelcoCustomerChurnModelingDocker.py" |
| 4. | [`Operationalization.md`](https://github.com/Azure/MachineLearningSamples-ChurnPrediction/blob/master/Docs/Operationalization.md) | "Code/model.pkl"<br>"Code/churn_schema_gen.py" |

Выполняйте практические задания в последовательном режиме, описанном выше.

## <a name="conclusion"></a>Заключение
В этом практическом сценарии показано, как выполнять прогнозирование оттока с использованием Azure Machine Learning Workbench. Сначала необходимо очистить данные для обработки необработанных и разнородных данных, а затем спроектировать признаки с помощью средств подготовки данных. Затем нужно создать и оценить модель классификации, используя средства машинного обучения с открытым исходным кодом, и с помощью локального контейнера Docker развернуть модель. После этого она готова к работе.

