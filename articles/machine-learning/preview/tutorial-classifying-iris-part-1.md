---
title: "Подготовка данных для руководства \"Классификация цветков ириса\" в службах машинного обучения (предварительная версия) | Документация Майкрософт"
description: "В этом исчерпывающем руководстве описано, как использовать службу \"Машинное обучение Azure\" (предварительная версия). Это 1 часть подготовки данных."
services: machine-learning
author: hning86
ms.author: haining
manager: mwinkle
ms.reviewer: garyericson, jasonwhowell, mldocs
ms.service: machine-learning
ms.workload: data-services
ms.custom: mvc, tutorial
ms.topic: hero-article
ms.date: 09/25/2017
ms.translationtype: HT
ms.sourcegitcommit: c3a2462b4ce4e1410a670624bcbcec26fd51b811
ms.openlocfilehash: e88b6bf74b7492353e5d5d004bde12fa4787e405
ms.contentlocale: ru-ru
ms.lasthandoff: 09/25/2017

---

# <a name="classifying-iris-part-1-prepare-data"></a>Часть 1. Классификация цветков ириса: подготовка данных
Служба "Машинное обучение Azure" (предварительная версия) — это полнофункциональное интегрированное аналитическое решение для специалистов по обработке и анализу данных. Оно помогает подготавливать данные, разрабатывать эксперименты и развертывать модели в масштабе облака.

Это руководство представляет собой первую часть серии (всего три части). Это руководство содержит обзор основных сведений о службах машинного обучения Azure (предварительная версия). Из этого руководства вы узнаете, как выполнять такие задачи:
> [!div class="checklist"]
> * Создание проекта в Azure Machine Learning Workbench.
> * Создание пакета подготовки данных.
> * Создание кода Python или PySpark для вызова пакета подготовки данных.

В этом руководстве для простоты используется классический набор данных — [ирисы Фишера](https://en.wikipedia.org/wiki/Iris_flower_data_set). Снимки экрана представляют среду Windows, но для macOS все процедуры практически идентичны.

## <a name="launch-azure-machine-learning-workbench"></a>Запуск Azure Machine Learning Workbench
Следуйте указаниям, приведенным в статье [Create Azure Machine Learning preview accounts and install Azure Machine Learning Workbench](quickstart-installation.md) (Создание учетных записей для предварительной версии службы "Машинное обучение Azure" и установка Azure Machine Learning Workbench), чтобы установить приложение Azure Machine Learning Workbench, которое также содержит интерфейс командной строки (CLI). Запустите приложение Azure Machine Learning Workbench и при необходимости выполните вход.

## <a name="create-a-new-project"></a>Создание нового проекта
1. В области **ПРОЕКТЫ** щелкните значок **+**, чтобы создать **проект**.

   ![новая рабочая область](media/tutorial-classifying-iris/new_ws.png)

2. Заполните поля в окне **Create New Project** (Создание проекта). 

   ![Новый проект](media/tutorial-classifying-iris/new_project.png)

   - В поле **Имя проекта** введите название проекта. Например, используйте значение **myIris**.
   - Выберите **каталог проекта**, в котором создается проект. Например, используйте значение **C:\Temp**. 
   - Введите **описание проекта**. 
   - Поле **Git repository** (Репозиторий Git) является необязательным и может оставаться пустым. Вы можете указать имеющийся пустой репозиторий Git (репозиторий без главной ветви) в VSTS. Позже благодаря этому вы сможете использовать сценарии перемещения и совместного использования. Дополнительные сведения см. в статье [Using Git repository with an Azure Machine Learning Workbench project](using-git-ml-project.md) (Использование репозитория Git в проекте Azure Machine Learning Workbench). 
   - Выберите **рабочую область**, например в этом руководстве используется **IrisGarden**. 
   - Выберите шаблон **Classifying Iris** в списке шаблонов проекта. 

3. Нажмите кнопку **Создать**, чтобы создать проект. Новый проект создается и открывается автоматически.

## <a name="create-a-data-preparation-package"></a>Создание пакета подготовки данных
1. Откройте файл `iris.csv` в **представлении файлов**. Файл является простой таблицей с 5 столбцами и 150 строками. В таблице есть четыре столбца числовых функций и столбец назначения строки. В ней отсутствуют заголовки столбцов.

   ![iris.csv](media/tutorial-classifying-iris/show_iris_csv.png)

   >[!NOTE]
   >Примечание. Мы не рекомендуем включать файлы данных в папку проекта, особенно если они большие. Мы включаем `iris.csv` в этот шаблон в демонстрационных целях, так как он занимает мало места. Дополнительные сведения см. в статье [Persisting changes and dealing with large files](how-to-read-write-files.md) (Сохранение изменений и работа с большими файлами).

2. В **представлении данных** щелкните значок **+**, чтобы добавить новый источник данных. Будет запущен мастер **добавления источника данных**. 

   ![представление данных](media/tutorial-classifying-iris/data_view.png)

3. Выберите параметр **File(s)/Directory** (Файлы или каталог) и выберите локальный файл `iris.csv`. Примите параметры по умолчанию для каждого экрана и нажмите кнопку **Готово**. 

   ![выбор iris](media/tutorial-classifying-iris/select_iris_csv.png)

   >[!IMPORTANT]
   >Обязательно выберите файл `iris.csv` из текущего каталога проекта для этого упражнения, в противном случае последующие шаги могут завершиться ошибкой. 

4. Создается файл `iris-1.dsource`. Файл имеет уникальное имя с тире, так как пример проекта уже содержит ненумерованный файл `iris.dsource`.  Откроется файл, и отобразятся данные. Набор заголовков столбцов от `Column1` до `Column5` автоматически добавляются в этот набор данных. Прокрутите вниз и обратите внимание, что последняя строка набора данных пуста. Это означает, что существует дополнительный разрыв строки в CSV-файле.

   ![представление данных iris](media/tutorial-classifying-iris/iris_data_view.png)

5. Теперь нажмите кнопку **Метрики**. Просмотрите гистограммы и полный набор статистических данных, рассчитанных для каждого столбца. Кроме того, можно нажать кнопку **Данные**, чтобы просмотреть данные еще раз. 

   ![представление данных iris](media/tutorial-classifying-iris/iris_metrics_view.png)

6. Нажмите кнопку **Подготовить** рядом с кнопкой **Метрики** (или кнопкой **Данные** при работе в представлении метрик). Появится диалоговое окно **Подготовка**. Пример проекта содержит файл `iris.dprep`, поэтому по умолчанию он предложит создать поток данных в имеющемся пакете подготовки данных **iris.dprep**. Измените значение в раскрывающемся списке на **+New Data Preparation Package** (+Создать пакет подготовки данных) и введите новое значение iris-1, а затем нажмите кнопку **ОК**.

   ![представление данных iris](media/tutorial-classifying-iris/new_dprep.png)

Создается пакет подготовки данных с именем `iris-1.dprep`, который открывается в редакторе подготовки данных.

Теперь давайте подготовим данные. Переименуйте имена столбцов, щелкнув заголовок каждого столбца и сделав текст заголовка доступным для редактирования. Введите `Sepal Length`, `Sepal Width`, `Petal Length`, `Petal Width` и `Species` в пять столбцов соответственно.

![переименование столбцов](media/tutorial-classifying-iris/rename_column.png)

Выберите столбец `Species` и щелкните его правой кнопкой мыши. Выберите **Value Counts** (Число значений). 

![число значений](media/tutorial-classifying-iris/value_count.png)

Это действие создает гистограмму с четырьмя столбцами. Обратите внимание, что целевой столбец имеет три различных значения: `Iris_virginica`, `Iris_versicolor` и `Iris-setosa`. Кроме того, имеется одна строка со значением `(null)`. Давайте избавимся от этой строки, выбрав столбец, представляющий значение null, и удалив его, нажав кнопку фильтра **-**. 

![число значений](media/tutorial-classifying-iris/filter_out.png)

Во время переименования и фильтрации строки значения null в области **Steps** (Шаги) каждое действие записывается в качестве шага подготовки данных. Их можно изменить (чтобы настроить их параметры), изменить их порядок или удалить.

![steps](media/tutorial-classifying-iris/steps.png)

## <a name="generate-pythonpyspark-code-to-invoke-data-prep-package"></a>Создание кода Python или PySpark для вызова пакета подготовки данных

Теперь закройте редактор подготовки данных. Не беспокойтесь, он автоматически сохраняется. Щелкните файл **iris 1.dprep** правой кнопкой мыши, чтобы открыть контекстное меню, и выберите **Generate Data Access Code File** (Создать файл с кодом доступа к данным). 

![создание кода](media/tutorial-classifying-iris/generate_code.png)

Файл **iris-1.py** создастся с двумя следующими заполненными строками кода (а также с несколькими комментариями):

```python
# This code snippet will load the referenced package and return a DataFrame.
# If the code is run in a PySpark environment, the code will return a
# Spark DataFrame. If not, the code will return a Pandas DataFrame.

from azureml.dataprep.package import run
df = run('iris.dprep', dataflow_idx=0)
```
Этот фрагмент кода вызывает логику, созданную в виде пакета подготовки данных. В зависимости от контекста выполнения кода `df` может быть [таблицей данных pandas](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.html) при выполнении в среде выполнения Python или [таблицей данных Spark](https://spark.apache.org/docs/latest/sql-programming-guide.html) при выполнении в контексте Spark. Дополнительные сведения о том, как подготовить данные в Azure Machine Learning Workbench, см. в руководстве [Getting started with data preparation](data-prep-getting-started.md) (Приступая к работе с подготовкой данных).

## <a name="next-steps"></a>Дальнейшие действия
В первой части серии руководств, состоящей из трех частей, вы использовали Machine Learning Workbench для выполнения следующих задач:
> [!div class="checklist"]
> * Создание нового проекта 
> * Создание пакета подготовки данных.
> * Создание кода Python или PySpark для вызова пакета подготовки данных.

Вы готовы перейти к следующей части серии для создания модели машинного обучения.
> [!div class="nextstepaction"]
> [Classifying Iris part 2: Build a model](tutorial-classifying-iris-part-2.md) (Часть 2. Классификация цветков ириса: создание модели)

