---
title: "Подготовка данных для руководства \"Классификация цветков ириса\" в службе \"Машинное обучение Azure\" (предварительная версия) | Документация Майкрософт"
description: "Из этого полного руководства вы узнаете, как использовать службу \"Машинное обучение Azure\" (предварительная версия). Это первая часть, в которой рассматривается подготовка данных."
services: machine-learning
author: hning86
ms.author: haining
manager: mwinkle
ms.reviewer: garyericson, jasonwhowell, mldocs
ms.service: machine-learning
ms.workload: data-services
ms.custom: mvc, tutorial
ms.topic: tutorial
ms.date: 09/28/2017
ms.openlocfilehash: 4e558518a5a1fb7b4cd0a58fe2453fd4c083b46a
ms.sourcegitcommit: 9cc3d9b9c36e4c973dd9c9028361af1ec5d29910
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/23/2018
---
# <a name="classify-iris-part-1-prepare-the-data"></a>Часть 1. Классификация цветков ириса: подготовка данных
Служба "Машинное обучение Azure" (предварительная версия) — это полнофункциональное интегрированное аналитическое решение для специалистов по обработке и анализу данных. Оно помогает подготавливать данные, разрабатывать эксперименты и развертывать модели в масштабе облака.

Это руководство представляет собой первую часть серии, состоящей из трех частей. Это руководство содержит основные сведения о службе "Машинное обучение Azure" (предварительная версия). Вы узнаете, как выполнять следующие задачи:
> [!div class="checklist"]
> * создание проекта в Azure Machine Learning Workbench;
> * создание пакета подготовки данных;
> * создание кода Python или PySpark для вызова пакета подготовки данных.

В этом руководстве используется классический [набор данных "Ирисы Фишера"](https://en.wikipedia.org/wiki/Iris_flower_data_set). Снимки экрана представляют среду Windows, но для Mac OS все процедуры практически идентичны.

## <a name="prerequisites"></a>предварительным требованиям
- Создайте учетную запись службы "Экспериментирование в Машинном обучении Azure".
- Установите Azure Machine Learning Workbench.

Вы можете установить приложение Azure Machine Learning Workbench, следуя инструкциям из статьи [Создание учетной записи для предварительной версии службы "Машинное обучение Azure" и установка Azure Machine Learning Workbench](quickstart-installation.md). Эта установка также включает программу командной строки Azure (Azure CLI), которая работает на всех платформах.

## <a name="create-a-new-project-in-azure-machine-learning-workbench"></a>Создание проекта в Azure Machine Learning Workbench
1. Откройте приложение Azure Machine Learning Workbench и при необходимости выполните вход. В области **ПРОЕКТЫ** щелкните значок плюса (**+**), чтобы создать **проект**.

   ![Новая рабочая область](media/tutorial-classifying-iris/new_ws.png)

2. Заполните поля в окне **Создание нового проекта**. 

   ![Новый проект](media/tutorial-classifying-iris/new_project.png)

   - В поле **Имя проекта** введите название проекта. Например, используйте значение **myIris**.
   - Выберите **каталог проекта**, в котором создается проект. Например, используйте значение `C:\Temp\`. 
   - Введите **описание проекта** (не обязательно). 
   - Поле **Репозиторий Git** также является необязательным и может оставаться пустым. Вы можете указать существующий пустой репозиторий Git (репозиторий без главной ветви) в Visual Studio Team Services. При использовании существующего репозитория Git можно позднее включить сценарии роуминга и общего доступа. Дополнительные сведения см. в статье [Использование репозитория Git в проекте Azure Machine Learning Workbench](using-git-ml-project.md). 
   - Выберите **рабочую область**. Например, в этом руководстве используется **IrisGarden**. 
   - Выберите шаблон **Classifying Iris** в списке шаблонов проекта. 

3. Нажмите кнопку **Создать**. Новый проект создается и открывается автоматически.

## <a name="create-a-data-preparation-package"></a>Создание пакета подготовки данных
1. Откройте файл **iris.csv** в **представлении файлов**. Файл — это таблица с 5 столбцами и 150 строками. В таблице есть четыре столбца числовых функций и столбец назначения строки. В ней отсутствуют заголовки столбцов.

   ![iris.csv](media/tutorial-classifying-iris/show_iris_csv.png)

   >[!NOTE]
   > Не включайте файлы данных в папку проекта, особенно если они большие. Мы включаем файл **iris.csv** в этот шаблон для демонстрации, так как он занимает мало места. Дополнительные сведения см. в статье [Сохранение изменений и работа с большими файлами](how-to-read-write-files.md).

2. В **представлении данных** щелкните значок плюса (**+**), чтобы добавить новый источник данных. Откроется страница **Добавление источника данных**. 

   ![Представление данных](media/tutorial-classifying-iris/data_view.png)

3. Выберите **Текстовые файлы (*.csv, .json, .txt.,...)** и нажмите кнопку **Далее**.
   ![Источник данных](media/tutorial-classifying-iris/data-source.png)
   

4. Перейдите к файлу **iris.csv** и щелкните **Далее**.  
 
   ![Выбор файла iris](media/tutorial-classifying-iris/select_iris_csv.png)

   >[!IMPORTANT]
   >Обязательно выберите файл **iris.csv** из текущего каталога проекта для этого упражнения. Иначе последующие шаги могут завершиться ошибкой.
   
5. Не изменяйте значения по умолчанию, а просто нажмите **Готово**.

6. Будет создан файл с именем **iris-1.dsource**. Файлу присвоено уникальное имя "-1", так как пример проекта уже содержит ненумерованный файл **iris.dsource**.  

   Откроется файл, и отобразятся данные. Набор заголовков столбцов от **Column1** до **Column5** добавляется в этот набор данных автоматически. Прокрутите страницу вниз и обратите внимание, что последняя строка набора данных пуста. Она пуста, так CSV-файл содержит дополнительный разрыв строки.

   ![Представление данных iris](media/tutorial-classifying-iris/iris_data_view.png)

7. Нажмите кнопку **Метрики**. Просмотрите гистограммы. Для каждого столбца вычислен полный набор статистических данных. Можно также нажать кнопку **Данные**, чтобы просмотреть данные еще раз. 

   ![Представление данных iris](media/tutorial-classifying-iris/iris_metrics_view.png)

8. Нажмите кнопку **Подготовить**. Откроется диалоговое окно **Подготовка**. 

   Пример проекта содержит файл **iris.dprep**. По умолчанию вам будет предложено создать поток данных в пакете подготовки данных **iris.dprep**, который уже существует. 

   Выберите **+ New Data Preparation Package** (+ Создать пакет подготовки данных) в раскрывающемся меню, введите новое значение для имени пакета (используйте **iris-1**), затем нажмите кнопку **ОК**.

   ![Представление данных iris](media/tutorial-classifying-iris/new_dprep.png)

   Будет создан пакет подготовки данных с именем **iris-1.dprep**, который откроется в редакторе подготовки данных.

9. Теперь подготовим данные. Переименуйте столбцы. Выбирайте заголовок каждого столбца, чтобы редактировать текст заголовка. 

   Введите значения **длины чашелистика**, **ширины чашелистика**, **длины лепестка**, **ширины лепестка** и **видов цветов** в соответствующих столбцах.

   ![Переименование столбцов](media/tutorial-classifying-iris/rename_column.png)

10. Чтобы подсчитать уникальные значения, выберите столбец **Species** (Виды цветов) и щелкните его правой кнопкой мыши. В раскрывающемся меню выберите пункт **Value Counts** (Число значений). 

   ![Выбор числа значений](media/tutorial-classifying-iris/value_count.png)

   Откроется панель **Inspectors** (Инспекторы) с гистограммой, содержащей четыре строки. Целевой столбец имеет три разных значения: **Iris_virginica**, **Iris_versicolor**, **Iris-setosa**и **(null)**.

11. Чтобы отфильтровать значения null, выберите на диаграмме строку, представляющую значение null. Значение **(null)** содержит одна строка. Чтобы удалить эту строку, щелкните значок минуса (**-**).

   ![Гистограмма "Число значений"](media/tutorial-classifying-iris/filter_out.png)

12. Обратите внимание на отдельные действия, описанные на панели **Шаги**. Так как вы переименовали столбцы и отфильтровали строки со значением null, эти действия засчитаны как этап подготовки данных. Можно изменить отдельные действия, чтобы настроить параметры, изменить порядок действий и даже удалить их.

   ![Действия](media/tutorial-classifying-iris/steps.png)

13. Закройте редактор подготовки данных. Нажмите кнопку **Закрыть** (x) на вкладке **iris-1** со значком диаграммы. Изменения будут автоматически сохранены в файле **iris-1.dprep**, который отображается под заголовком **Data Preparations** (Подготовка данных).

## <a name="generate-pythonpyspark-code-to-invoke-a-data-preparation-package"></a>Создание кода Python или PySpark для вызова пакета подготовки данных

1. Щелкните файл **iris-1.dprep** правой кнопкой мыши, чтобы открыть контекстное меню, и выберите пункт **Generate Data Access Code File** (Создать файл с кодом доступа к данным). 

   ![Создание кода](media/tutorial-classifying-iris/generate_code.png)

2. Откроется новый файл с именем **iris-1.py**, который содержит следующие строки кода:

   ```python
   # Use the Azure Machine Learning data preparation package
   from azureml.dataprep import package

   # Use the Azure Machine Learning data collector to log various metrics
   from azureml.logging import get_azureml_logger
   logger = get_azureml_logger()

   # This call will load the referenced package and return a DataFrame.
   # If run in a PySpark environment, this call returns a
   # Spark DataFrame. If not, it will return a Pandas DataFrame.
   df = package.run('iris-1.dprep', dataflow_idx=0)

   # Remove this line and add code that uses the DataFrame
   df.head(10)
   ```

   Этот фрагмент кода вызывает логику, созданную в виде пакета подготовки данных. В зависимости от контекста, в котором выполняется этот код, параметр `df` представляет разные типы кадров данных. Объект [pandas DataFrame](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.html) используется при выполнении в среде Python. В контексте Spark используется [Spark DataFrame](https://spark.apache.org/docs/latest/sql-programming-guide.html). 

   Дополнительные сведения о том, как подготовить данные в Azure Machine Learning Workbench, см. в руководстве [Начало работы со службой подготовки данных](data-prep-getting-started.md).

## <a name="next-steps"></a>Дополнительная информация
В этой статье, которая является первой частью серии руководств, состоящей из трех частей, вы использовали Machine Learning Workbench для выполнения следующих задач:
> [!div class="checklist"]
> * создание проекта; 
> * создание пакета подготовки данных;
> * создание кода Python или PySpark для вызова пакета подготовки данных.

Теперь вы можете перейти к следующей части серии, из которой вы узнаете, как создать модель службы "Машинное обучение Azure".
> [!div class="nextstepaction"]
> [Classifying Iris part 2: Build a model](tutorial-classifying-iris-part-2.md) (Часть 2. Классификация цветков ириса: создание модели)
