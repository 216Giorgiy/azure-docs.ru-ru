---
title: "Подготовка данных для руководства \"Классификация цветков ириса\" в службах машинного обучения (предварительная версия) | Документация Майкрософт"
description: "В этом исчерпывающем руководстве описано, как использовать службу \"Машинное обучение Azure\" (предварительная версия). Это 1 часть подготовки данных."
services: machine-learning
author: hning86
ms.author: haining
manager: mwinkle
ms.reviewer: garyericson, jasonwhowell, mldocs
ms.service: machine-learning
ms.workload: data-services
ms.custom: mvc, tutorial
ms.topic: hero-article
ms.date: 09/28/2017
ms.openlocfilehash: 975a86c1f9d9692f6eadd232177f33cbbbeeff2f
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/11/2017
---
# <a name="classifying-iris-part-1-prepare-data"></a>Часть 1. Классификация цветков ириса: подготовка данных
Служба "Машинное обучение Azure" (предварительная версия) — это полнофункциональное интегрированное аналитическое решение для специалистов по обработке и анализу данных. Оно помогает подготавливать данные, разрабатывать эксперименты и развертывать модели в масштабе облака.

Это руководство представляет собой первую часть серии (всего три части). Это руководство содержит обзор основных сведений о службах машинного обучения Azure (предварительная версия). Из этого руководства вы узнаете, как выполнять такие задачи:
> [!div class="checklist"]
> * Создание проекта в Azure Machine Learning Workbench.
> * Создание пакета подготовки данных.
> * Создание кода Python или PySpark для вызова пакета подготовки данных.

В этом руководстве для простоты используется классический набор данных — [ирисы Фишера](https://en.wikipedia.org/wiki/Iris_flower_data_set). Снимки экрана представляют среду Windows, но для macOS все процедуры практически идентичны.

## <a name="prerequisites"></a>Предварительные требования
- Создайте учетную запись службы "Экспериментирование в Машинном обучении Azure".
- Установите Azure Machine Learning Workbench.

Вы можете следовать инструкциям из статьи [Создание учетной записи для предварительной версии Машинного обучения Azure и установка Azure Machine Learning Workbench](quickstart-installation.md), чтобы установить приложение Azure Machine Learning Workbench. Установка также включает интерфейс командной строки (CLI).

## <a name="create-a-new-project-in-azure-ml-workbench"></a>Создание проекта в Azure ML Workbench
1. Запустите приложение Azure Machine Learning Workbench и при необходимости выполните вход. В области **ПРОЕКТЫ** щелкните значок **+**, чтобы создать **проект**.

   ![новая рабочая область](media/tutorial-classifying-iris/new_ws.png)

2. Заполните поля в окне **Create New Project** (Создание проекта). 

   ![Новый проект](media/tutorial-classifying-iris/new_project.png)

   - В поле **Имя проекта** введите название проекта. Например, используйте значение **myIris**.
   - Выберите **каталог проекта**, в котором создается проект. Например, используйте значение **C:\Temp**. 
   - Введите **описание проекта**. 
   - Поле **Git repository** (Репозиторий Git) является необязательным и может оставаться пустым. Вы можете указать имеющийся пустой репозиторий Git (репозиторий без главной ветви) в VSTS. Позже благодаря этому вы сможете использовать сценарии перемещения и совместного использования. Дополнительные сведения см. в статье [Using Git repository with an Azure Machine Learning Workbench project](using-git-ml-project.md) (Использование репозитория Git в проекте Azure Machine Learning Workbench). 
   - Выберите **рабочую область**, например в этом руководстве используется **IrisGarden**. 
   - Выберите шаблон **Classifying Iris** в списке шаблонов проекта. 

3. Нажмите кнопку **Создать**, чтобы создать проект. Новый проект создается и открывается автоматически.

## <a name="create-a-data-preparation-package"></a>Создание пакета подготовки данных
1. Откройте файл **iris.csv** в **представлении файлов**. Файл является простой таблицей с 5 столбцами и 150 строками. В таблице есть четыре столбца числовых функций и столбец назначения строки. В ней отсутствуют заголовки столбцов.

   ![iris.csv](media/tutorial-classifying-iris/show_iris_csv.png)

   >[!NOTE]
   > Не рекомендуем включать файлы данных в папку проекта, особенно если они большие. Мы включаем файл **iris.csv** в этот шаблон для демонстрации, так как он занимает мало места. Дополнительные сведения см. в статье [Persisting changes and dealing with large files](how-to-read-write-files.md) (Сохранение изменений и работа с большими файлами).

2. В **представлении данных** щелкните значок **+**, чтобы добавить новый источник данных. Будет запущен мастер **добавления источника данных**. 

   ![представление данных](media/tutorial-classifying-iris/data_view.png)

3. Завершите работу мастера подготовки данных. 
   - На первом экране выберите **Файл(ы)/Каталог**, а затем нажмите кнопку **Далее**.
   - На втором экране выберите локальный файл **iris.csv**, например C:\Temp\myIris\iris.csv.
   - На третьем экране **Сведения о файле** примите значения по умолчанию.
   - На четвертом экране **Типы данных** измените **тип данных**. Вместо типа _Строка_ выберите _Число_ для столбцов с _1_по _4_, так как эти столбцы принимают числовые значения. 
   - На пятом и шестом экранах примите параметры по умолчанию.
   - Нажмите кнопку **Готово**.

   ![выбор iris](media/tutorial-classifying-iris/select_iris_csv.png)

   >[!IMPORTANT]
   >Обязательно выберите файл **iris.csv** из текущего каталога проекта для этого упражнения, иначе последующие шаги могут завершиться ошибкой. 

4. Будет создан файл **iris-1.dsource**. Файлу присвоено уникальное имя с дефисом и единицей, так как пример проекта уже содержит ненумерованный файл **iris.dsource**.  

   Откроется файл, и отобразятся данные. Набор заголовков столбцов от **Column1** до **Column5** автоматически добавляется в этот набор данных. Прокрутите вниз и обратите внимание, что последняя строка набора данных пуста. Это означает, что существует дополнительный разрыв строки в CSV-файле.

   ![представление данных iris](media/tutorial-classifying-iris/iris_data_view.png)

5. Теперь нажмите кнопку **Метрики**. Просмотрите гистограммы и полный набор статистических данных, рассчитанных для каждого столбца. Кроме того, можно нажать кнопку **Данные**, чтобы просмотреть данные еще раз. 

   ![представление данных iris](media/tutorial-classifying-iris/iris_metrics_view.png)

6. Нажмите кнопку **Подготовить**. Появится диалоговое окно **Подготовка**. 

   Пример проекта содержит файл **iris.dprep**, поэтому по умолчанию вам будет предложено создать поток данных в существующем пакете подготовки данных **iris.dprep**. 

   Измените значение в раскрывающемся списке на **+New Data Preparation Package** (+Создать пакет подготовки данных) и введите новое значение iris-1, а затем нажмите кнопку **ОК**.

   ![Представление данных iris](media/tutorial-classifying-iris/new_dprep.png)

   Будет создан пакет подготовки данных с именем **iris-1.dprep**, который открывается в редакторе подготовки данных.

7. Теперь подготовим данные. Переименуйте имена столбцов, щелкнув заголовок каждого столбца и сделав текст заголовка доступным для редактирования. 

   Введите значения **длины чашелистика**, **ширины чашелистика**, **длины лепестка**, **ширины лепестка** и **видов цветов** в соответствующих столбцах.

   ![Переименование столбцов](media/tutorial-classifying-iris/rename_column.png)

8. Чтобы подсчитать уникальные значения, выберите столбец **Виды цветов** и щелкните его правой кнопкой мыши. Выберите **Value Counts** (Число значений). 

   ![Выбор числа значений](media/tutorial-classifying-iris/value_count.png)

   Откроется панель **Инспекторы** с гистограммой, содержащей четыре панели. Обратите внимание, что целевой столбец имеет три разных значения: **Iris_virginica**, **Iris_versicolor**, **Iris-setosa**и **(null)**.

9. Отфильтруйте значения null, выбрав на диаграмме строку, представляющую значение null. Значение **(null)** содержит одна строка. Чтобы эта строка не отображалась, нажмите кнопку фильтра **-**.

   ![Гистограмма "Число значений"](media/tutorial-classifying-iris/filter_out.png)

10. Обратите внимание на отдельные действия, описанные на панели **Шаги**. Когда вы переименовывали и отфильтровывали строки со значением null, каждое действие записывалось как этап подготовки данных. Можно изменить отдельные действия, чтобы настроить параметры, изменить порядок действий и даже удалить их.

   ![Действия](media/tutorial-classifying-iris/steps.png)

11. Теперь закройте редактор подготовки данных. Для этого нажмите кнопку **X** на вкладке с именем **iris-1** со значком диаграммы. Изменения будут автоматически сохранены в файле **iris-1.dprep**, который отображается под заголовком **Подготовка данных**.

## <a name="generate-pythonpyspark-code-to-invoke-data-prep-package"></a>Создание кода Python или PySpark для вызова пакета подготовки данных

1. Щелкните файл **iris 1.dprep** правой кнопкой мыши, чтобы открыть контекстное меню, и выберите **Generate Data Access Code File** (Создать файл с кодом доступа к данным). 

   ![создание кода](media/tutorial-classifying-iris/generate_code.png)

2. Откроется новый файл с именем **iris-1.py**, который содержит следующий фрагмент кода:

   ```python
   # This code snippet will load the referenced package and return a DataFrame.
   # If the code is run in a PySpark environment, the code will return a
   # Spark DataFrame. If not, the code will return a Pandas DataFrame.

   from azureml.dataprep.package import run
   df = run('iris.dprep', dataflow_idx=0)
   ```

   Этот фрагмент кода вызывает логику, созданную в виде пакета подготовки данных. В зависимости от контекста, в котором выполняется этот код, параметр `df` представляет различные типы кадров данных. Объект [pandas DataFrame](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.html) используется при выполнении в среде Python. В контексте Spark используется [Spark DataFrame](https://spark.apache.org/docs/latest/sql-programming-guide.html). 

   Дополнительные сведения о том, как подготовить данные в Azure Machine Learning Workbench, см. в руководстве [Getting started with data preparation](data-prep-getting-started.md) (Приступая к работе с подготовкой данных).

## <a name="next-steps"></a>Дальнейшие действия
В первой части серии руководств, состоящей из трех частей, вы использовали Machine Learning Workbench для выполнения следующих задач:
> [!div class="checklist"]
> * Создание нового проекта 
> * Создание пакета подготовки данных
> * Создание кода Python или PySpark для вызова пакета подготовки данных.

Вы готовы перейти к следующей части серии для создания модели машинного обучения.
> [!div class="nextstepaction"]
> [Classifying Iris part 2: Build a model](tutorial-classifying-iris-part-2.md) (Часть 2. Классификация цветков ириса: создание модели)
