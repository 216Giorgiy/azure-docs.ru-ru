<properties 
	pageTitle="Приложение машинного обучения: служба обнаружения аномалий | Microsoft Azure" 
	description="API обнаружения аномалий — это встроенный в Машинное обучение Microsoft Azure пример API, который обнаруживает аномалии в данных временных рядов и предоставляет результаты в виде числовых значений, равномерно распределенных по времени." 
	services="machine-learning" 
	documentationCenter="" 
	authors="alokkirpal" 
	manager="paulettm"
	editor="cgronlun" />

<tags 
	ms.service="machine-learning" 
	ms.devlang="na" 
	ms.topic="reference" 
	ms.tgt_pltfrm="na" 
	ms.workload="multiple" 
	ms.date="06/21/2016" 
	ms.author="alokkirpal"/>


# Служба обнаружения аномалий в машинном обучении#

##Обзор

API обнаружения аномалий — это встроенный в Машинное обучение Azure пример API, который обнаруживает аномалии в данных временных рядов и предоставляет результаты в виде числовых значений, равномерно распределенных по времени.

[AZURE.INCLUDE [machine-learning-free-trial](../../includes/machine-learning-free-trial.md)]

Эта служба обнаружения аномалий может обнаруживать следующие типы аномалий в данных временных рядов:

1. Положительные и отрицательные тенденции. Например, положительная тенденция при мониторинге использования памяти для вычислений свидетельствует об утечке памяти.

2. Увеличение динамического диапазона значений. Например, при мониторинге исключений, инициированных службой, каждое увеличение динамического диапазона свидетельствует о нестабильности состояния службы.

3. Пики и спады. Например, при мониторинге количества сбоев входа в службу или случаев оформления заказа на сайтах электронной коммерции, пики и спады помогают обнаружить ненормальное поведение.


Эти средства обнаружения отслеживают изменения в значениях с течением времени и сообщают о текущих изменениях значений. Они не требуют прямой настройки пороговых значений, и их оценки можно использовать для управления ложноположительными результатами. API обнаружения аномалий удобно использовать в некоторых сценариях, таких как мониторинг служб путем отслеживания ключевых показателей эффективности с течением времени, метрик использования (таких как количество поисковых запросов, количество щелчков), счетчиков производительности (таких как память, ЦП, операции считывания файлов) и т. д. с течением времени.

##Определение интерфейса API

Эта служба предоставляет API-интерфейс REST по протоколу HTTPS, который можно использовать различными способами, в том числе в мобильном или веб-приложении, R, Python, Excel и т. д. Также существует [веб-приложение Azure](http://anomalydetection-aml.azurewebsites.net/), которое помогает запускать веб-службу обнаружения аномалий для анализа определенных данных и представлять результаты в наглядной форме.

В эту службу можно также отправлять данные временных рядов путем вызова REST API, который запускает средства для трех типов аномалий, описанных выше. Эта служба работает на платформе Машинного обучения Azure, которая легко масштабируется в соответствии с потребностями бизнеса и предоставляет соглашения об уровне обслуживания, гарантирующие бесперебойную работу в течение 99,95 % времени.

На следующем рисунке показан пример аномалий, обнаруженных во временном ряду с помощью описанной выше платформы. Во временном ряду есть 2 отчетливых изменения уровня и 3 пика. Красными точками обозначено время обнаружения изменений уровня, а красными стрелками — обнаруженные пики.


![][1]

##Входные данные

API принимает два входных параметра.

1. Параметр data представляет собой входной временной ряд в формате: t1=v1;t2=v2;... 

 
	Пример данных
		
		"9/21/2014 11:05:00 AM=3;9/21/2014 11:10:00 AM=9.09;9/21/2014 11:15:00 AM=0;"

2. Для params задано значение "SpikeDetector.TukeyThresh=3; SpikeDetector.ZscoreThresh=3", которое контролирует чувствительность средств обнаружения пиков. При более высоких значениях будут отлавливаться большие пики и наоборот.

	Пример URL-адреса с входными параметрами, приведенными выше:

		https://api.datamarket.azure.com/data.ashx/aml_labs/anomalydetection/v1/Score?data=%279%2F21%2F2014%2011%3A05%3A00%20AM%3D3%3B9%2F21%2F2014%2011%3A10%3A00%20AM%3D9.09%3B9%2F21%2F2014%2011%3A15%3A00%20AM%3D0%3B%27&params=%27SpikeDetector.TukeyThresh%3D3%3B%20SpikeDetector.ZscoreThresh%3D3%27



###Выходные данные###

API запускает эти средства обнаружения для данных временных рядов и возвращает оценки аномалий в каждый момент времени. Эти выходные данные можно проанализировать с помощью простого средства анализа, как показано на странице по адресу [https://adresultparser.codeplex.com/](https://adresultparser.codeplex.com/). Здесь содержится пример кода, в котором показано, как подключиться к API и проанализировать выходные данные. Созданные предупреждения можно отобразить на панели мониторинга и/или передать специалистам, которые могут принять корректирующие меры.

Пример выходных данных для приведенных выше входных данных:

	"Time,Data,TSpike,ZSpike,Martingale values,Alert indicator,Martingale values(2),Alert indicator(2),;9/21/2014 11:05:00 AM,3,0,0,-0.687952590518378,0,-0.687952590518378,0,;9/21/2014 11:10:00 AM,9.09,0,0,-1.07030497733224,0,-0.884548154298423,0,;9/21/2014 11:15:00 AM,0,0,0,-1.05186237440962,0,-1.173800281031,0,;"

Выходные данные можно представить в виде следующей таблицы:

Время|Данные|Tspike|Zspike|Значения martingale|Индикатор предупреждений|Значения martingale (2)|Индикатор предупреждений (2)
---|---|---|---|---|---|---|---
21\.09.2014, 11:05|3|0|0|-0,687952591|0|-0,687952591|0|   
21\.09.2014, 11:10|9\.09|0|0|-1,070304977|0|-0,884548154|0|    
21\.09.2014, 11:15|0|0|0|-1,051862374|0|-1,1738002814|0|   
   

[1]: ./media/machine-learning-apps-anomaly-detection/anomaly-detection.jpg

 

 

<!---HONumber=AcomDC_0622_2016-->