<properties 
	pageTitle="Настройка кластеров Hadoop для обработки аналитических данных и технологии расширенного анализа | Microsoft Azure" 
	description="Популярные модули Python становятся доступными в настраиваемых кластерах Azure HDInsight Hadoop."
	services="machine-learning" 
	solutions="" 
	documentationCenter="" 
	authors="hangzh-msft" 
	manager="paulettm" 
	editor="cgronlun"  />

<tags 
	ms.service="machine-learning" 
	ms.workload="data-services" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="05/29/2015" 
	ms.author="hangzh;bradsev" />

# Настройка кластеров Azure HDInsight Hadoop для обработки аналитических данных и технологии расширенного анализа

В этой статье рассказывается о том, как настроить кластер Hadoop под управлением службы HDInsight, установив 64-разрядную версию программы Anaconda (Python 2.7) на каждом узле в процессе подготовки кластера в службе HDInsight. В процессе настройки кластер подготавливается к работе системы обработки аналитических данных и технологии расширенного анализа, которая используется в Машинном обучении Azure. Здесь также приведена информация о том, как получить доступ к головному узлу для отправки пользовательских заданий в кластер.

В результате этой настройки многие популярные модули Python, входящие в состав программы Anaconda, станут доступными для использования в определяемых пользователями функциях, предназначенных для обработки записей Hive в кластере. Указания по процедурам, используемым в этом сценарии, см. в статье [Отправка запросов Hive в кластеры HDInsight Hadoop при обработке аналитических данных](machine-learning-data-science-hive-queries.md).


## <a name="customize"></a>Настройка кластера Hadoop под управлением службы Azure HDInsight

Чтобы создать настраиваемый кластер Hadoop под управлением службы HDInsight, пользователям необходимо войти на [**портал управления Azure**](https://manage.windowsazure.com/), щелкнуть **Создать** в левом нижнем углу, а затем выбрать СЛУЖБЫ ДАННЫХ -> HDINSIGHT -> **НАСТРАИВАЕМОЕ СОЗДАНИЕ**, чтобы открыть окно **Сведения о кластере**.

![Создание рабочей области][1]

Введите имя создаваемого кластера на 1-й странице настройки конфигурации и примите значения по умолчанию для других полей. Щелкните стрелку, чтобы перейти к следующей странице конфигурации.

![Создание рабочей области][2]

На странице конфигурации 2 введите количество в поле **УЗЛЫ ДАННЫХ**, выберите значение в поле **РЕГИОН или ВИРТУАЛЬНАЯ СЕТЬ** и выберите размеры в полях **ГОЛОВНОЙ УЗЕЛ** и **УЗЕЛ ДАННЫХ**. Щелкните стрелку, чтобы перейти к следующей странице конфигурации.

>[AZURE.NOTE]Значение, выбранное в поле **РЕГИОН или ВИРТУАЛЬНАЯ СЕТЬ**, должно соответствовать региону, указанному для учетной записи хранения, которая будет использоваться для кластера Hadoop под управлением службы HDInsight. В противном случае учетная запись хранения, которую необходимо использовать, не будет отображаться в раскрывающемся списке **ИМЯ УЧЕТНОЙ ЗАПИСИ** на четвертой странице настройки конфигурации.

![Создание рабочей области][3]

На 3-й странице настройки конфигурации укажите имя пользователя и пароль для кластера Hadoop под управлением службы HDInsight. **Не** устанавливайте флажок _Ввести метахранилище Hive или Oozie_. Затем щелкните стрелку, чтобы перейти к следующей странице конфигурации.

![Создание рабочей области][4]

На 4-й странице настройки конфигурации задайте имя учетной записи хранения и контейнер кластера Hadoop под управлением службы HDInsight по умолчанию. Если выбрать в раскрывающемся списке **КОНТЕЙНЕР ПО УМОЛЧАНИЮ** параметр _Создать контейнер по умолчанию_, будет создан контейнер с тем же именем, что у кластера. Щелкните стрелку, чтобы перейти к последней странице конфигурации.

![Создание рабочей области][5]

На последней странице настройки конфигурации **Действия скриптов** нажмите кнопку **Добавить действие скрипта** и заполните текстовые поля следующими значениями.
 
* **ИМЯ** — любая строка, соответствующая имени этого действия сценария. 
* **ТИП УЗЛА** — выберите значение **Все узлы**. 
* **URI-АДРЕС СЦЕНАРИЯ** — *http://getgoing.blob.core.windows.net/publicscripts/Azure_HDI_Setup_Windows.ps1* 	* *publicscripts* — это общий контейнер в учетной записи хранения; 
	* *getgoing* — используется для совместного доступа к файлам сценариев PowerShell, чтобы упростить работу пользователей в Azure. 
* **ПАРАМЕТРЫ** — оставьте это поле пустым.

Наконец, щелкните значок с изображением флажка, чтобы начать создание настраиваемого кластера Hadoop под управлением службы HDInsight.

![Создание рабочей области][6]

## <a name="headnode"></a> Получение доступа к головному узлу кластера Hadoop

Чтобы получить доступ к головному узлу кластера Hadoop по протоколу RDP, пользователям необходимо включить удаленный доступ к кластеру Hadoop в Azure.

1. Войдите на [**Портал управления Azure**](https://manage.windowsazure.com/), щелкните **HDInsight** в левой части страницы, выберите кластер Hadoop из списка кластеров, перейдите на вкладку **КОНФИГУРАЦИЯ**, а затем щелкните значок **ВКЛЮЧИТЬ УДАЛЕННЫЙ ДОСТУП** в нижней части страницы.
	
	![Создание рабочей области][7]

2. В окне **Настройка удаленного рабочего стола** введите значения в полях «ИМЯ ПОЛЬЗОВАТЕЛЯ» и «ПАРОЛЬ» и выберите дату окончания срока действия для удаленного доступа. Затем щелкните значок с изображением флажка, чтобы включить удаленный доступ к головному узлу кластера Hadoop.
	
	>[AZURE.NOTE]
	>
	>1. Имя пользователя и пароль для удаленного доступа должны отличаться от имени пользователя и пароля, которые использовались при создании кластера Hadoop. Это отдельный набор учетных данных.
	>
	>2. Срок действия удаленного доступа должен истечь не позднее чем через 7 дней с текущей даты.

	![Создание рабочей области][8]

3. После включения удаленного доступа щелкните **ПОДКЛЮЧИТЬСЯ** в нижней части страницы, чтобы получить удаленный доступ к головному узлу. Войдите на головной узел кластера Hadoop, указав заданные ранее учетные данные для удаленного доступа.

	 ![Создание рабочей области][9]

Дальнейшие действия при подготовке и обработке аналитических данных можно найти в статье [Руководство по обучению. Расширенная обработка данных в Azure](machine-learning-data-science-advanced-data-processing.md). Они могут содержать действия, результатом которых будет перемещение данных в HDInsight, их обработка и выборка для подготовки к изучению в рамках машинного обучения Azure.

Указания по получению доступа к модулям Python, которые входят в состав программы Anaconda, с головного узла кластера в пользовательских функциях, предназначенных для обработки записей Hive, которые хранятся в кластере, см. в статье [Отправка запросов Hive в кластеры Hadoop под управлением службы HDInsight при обработке аналитических данных](machine-learning-data-science-process-hive-tables.md).

[1]: ./media/machine-learning-data-science-customize-hadoop-cluster/customize-cluster-img1.png
[2]: ./media/machine-learning-data-science-customize-hadoop-cluster/customize-cluster-img2.png
[3]: ./media/machine-learning-data-science-customize-hadoop-cluster/customize-cluster-img3.png
[4]: ./media/machine-learning-data-science-customize-hadoop-cluster/customize-cluster-img4.png
[5]: ./media/machine-learning-data-science-customize-hadoop-cluster/customize-cluster-img5.png
[6]: ./media/machine-learning-data-science-customize-hadoop-cluster/script-actions.png
[7]: ./media/machine-learning-data-science-customize-hadoop-cluster/enable-remote-access-1.png
[8]: ./media/machine-learning-data-science-customize-hadoop-cluster/enable-remote-access-2.png
[9]: ./media/machine-learning-data-science-customize-hadoop-cluster/enable-remote-access-3.png

 

<!---HONumber=July15_HO4-->