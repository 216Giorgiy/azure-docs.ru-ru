---
title: Настройка среды разработки для машинного обучения Azure | Документы Майкрософт
description: Узнайте, как настроить среду разработки при работе со службой машинного обучения Azure. Изучив этот документ, вы научитесь использовать среды Conda, создавать файлы конфигурации и настраивать Jupyter Notebook, записные книжки Azure, интегрированные среды разработки, редакторы кода и виртуальную машину для обработки и анализа данных.
services: machine-learning
author: rastala
ms.author: roastala
ms.service: machine-learning
ms.component: core
ms.reviewer: larryfr
manager: cgronlun
ms.topic: conceptual
ms.date: 11/6/2018
ms.openlocfilehash: 2fd2d35bde95a3e268f46b398f2163f9d40ab1ee
ms.sourcegitcommit: b62f138cc477d2bd7e658488aff8e9a5dd24d577
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/13/2018
ms.locfileid: "51613959"
---
# <a name="configure-a-development-environment-for-azure-machine-learning"></a>Настройка среды разработки для Машинного обучения Azure

В этом документе описано, как настроить среду разработки для работы со Службой машинного обучения Azure. Служба машинного обучения Azure не зависит от платформы. Единственное требование для среды разработки — __Python 3__, __Conda__ (для изолированных сред) и файл конфигурации, который содержит сведения о рабочей области Машинного обучения Azure.

В этом документе описаны следующие среды и средства:

* [Записные книжки Azure](#aznotebooks) — это служба приложений Jupyter Notebook, размещенная в облаке Azure. Это __самый простой__ способ начать работу, так как пакет SDK для Машинного обучения Azure уже установлен.
* [Виртуальная машина для обработки и анализа данных](#dsvm) — это образ виртуальной машины в облаке Azure, __предназначенный для задач обработки и анализа данных__. Установленные Python 3, Conda, приложения Jupyter Notebook и пакет SDK для Машинного обучения Azure. Виртуальная машина предоставляется с популярными платформами машинного обучения, а также средствами и редакторами для разработки решений машинного обучения. Это, вероятно, __самая многофункциональная__ среда разработки для машинного обучения на платформе Azure.
* [Jupyter Notebook](#jupyter): если вы уже используете приложения Jupyter Notebook, вам нужно установить некоторые вспомогательные элементы, которые содержит пакет SDK.
* [Visual Studio Code](#vscode): если вы используете Visual Studio Code, вы можете установить некоторые полезные расширения.

Если у вас уже есть среда Python 3, или вам нужно выполнить основные шаги для установки пакета SDK, см. инструкции, предназначенные для [локального компьютера](#local).

## <a name="prerequisites"></a>Предварительные требования

- Рабочая область службы машинного обучения Azure. Выполните инструкции из руководства по [началу работы со Службой машинного обучения Azure](quickstart-get-started.md), чтобы создать рабочую область.

- Диспетчер пакетов [Continuum Anaconda](https://www.anaconda.com/download/) или [Miniconda](https://conda.io/miniconda.html).

    > [!IMPORTANT]
    > Anaconda и Miniconda не являются обязательными компонентами при работе с Записными книжками Azure.

- В Linux или Mac OS вам понадобится оболочка bash.

    > [!TIP]
    > Если в Linux или Mac OS вы используете оболочку, отличающуюся от bash (например, zsh), при выполнении некоторых команд могут возникнуть ошибки. Чтобы решить эту проблему, используйте команду `bash`, чтобы запустить bash и выполните там нужные команды.

- В Windows вам понадобится командная строка по умолчанию или командная строка Anaconda (устанавливается вместе с Anaconda и Miniconda).

## <a id="anotebooks"></a>Записные книжки Azure

[Записные книжки Azure](https://notebooks.azure.com) (предварительная версия) — это интерактивная среда разработки в облаке Azure. Это __самый простой__ способ начать разработку с использованием Машинного обучения Azure.

* Пакет SDK для Машинного обучения Azure __уже установлен__.
* Создав рабочую область Службы машинного обучения Azure на портале Azure, можно нажать кнопку, чтобы автоматически настроить среду Записных книжек Azure для работы с рабочей областью.

Чтобы начать разработку с помощью Записных книжек Azure, см. руководство по [началу работы со Службой машинного обучения Azure](quickstart-get-started.md).

## <a id="dsvm"></a>Виртуальная машина для обработки и анализа данных

Виртуальная машина для обработки и анализа данных (DSVM) — это настраиваемый образ виртуальной машины, **предназначенный для задач обработки и анализа данных**. Сюда входят:

  - популярные средства для обработки и анализа данных;
  - интегрированные среды разработки, например PyCharm и RStudio;
  - пакеты, например Jupyter Notebook и Tensorflow.

Пакет SDK для Машинного обучения Azure работает с версией DSVM для Ubuntu или Windows. Чтобы использовать DSVM в качестве среды разработки, выполните следующие действия:

1. Чтобы создать DSVM, выполните действия, описанные в одном из следующих документов:

    * [Создание виртуальной машины Ubuntu для обработки и анализа данных](https://docs.microsoft.com/azure/machine-learning/data-science-virtual-machine/dsvm-ubuntu-intro)
    * [Создание виртуальной машины Windows для обработки и анализа данных](https://docs.microsoft.com/azure/machine-learning/data-science-virtual-machine/provision-vm)

1. Пакет SDK для Машинного обучения Azure **уже установлен** в DSVM. Чтобы использовать среду Conda, которая содержит пакет SDK, используйте одну из следующих команд:

    * В DSVM __Ubuntu__ используйте эту команду:

        ```shell
        conda activate py36
        ```

    * В DSVM __Windows__ используйте эту команду:

        ```shell
        conda activate AzureML
        ```

1. Чтобы убедиться, у вас есть доступ к пакету SDK и проверить версию, используйте следующий код Python:

    ```python
    import azureml.core
    print(azureml.core.VERSION)
    ```

1. См. дополнительные сведения о том, [как настроить](#workspace) DSVM для работы с вашей рабочей областью Службы машинного обучения Azure.

Дополнительные сведения о Виртуальных машинах для обработки и анализа данных см. в [этой статье](https://azure.microsoft.com/services/virtual-machines/data-science-virtual-machines/).

## <a id="local"></a>Локальный компьютер

При использовании локального компьютера (который также может быть удаленной виртуальной машине) следуйте инструкциям ниже, чтобы создать среду Conda и установить пакет SDK:

1. Откройте окно командной строки или оболочку.

1. Создайте среду conda, выполнив следующие команды:

    ```shell
    # create a new conda environment with Python 3.6, numpy, and cython
    conda create -n myenv Python=3.6 cython numpy

    # activate the conda environment
    conda activate myenv

    # On Mac OS run
    source activate myenv
    ```

    Создание среды может занять несколько минут, если потребуется скачать Python 3.6 и (или) другие компоненты.

1. Установите пакет SDK для Машинного обучения Azure и дополнительные компоненты для записных книжек, а также пакет SDK для подготовки данных, выполнив следующую команду:

     ```shell
    pip install --upgrade azureml-sdk[notebooks,automl] azureml-dataprep
    ```

   > [!NOTE]
   > Если появится сообщение о том, что не удается удалить `PyYAML`, попробуйте использовать другую команду:
   >
   > `pip install --upgrade azureml-sdk[notebooks,automl] azureml-dataprep --ignore-installed PyYAML`

   Установка пакета SDK может занять несколько минут.

1. Установите пакеты для экспериментирования в машинном обучении. Используйте следующую команду, заменив в ней `<new package>` именем пакета, который хотите установить:

    ```shell
    conda install <new package>
    ```

1. Чтобы убедиться, что пакет SDK установлен, выполните следующий код Python:

    ```python
    import azureml.core
    azureml.core.VERSION
    ```

### <a id="jupyter"></a>Приложения Jupyter Notebook

Приложения Jupyter Notebook предоставляются компанией [Project Jupyter](https://jupyter.org/). Это решение предназначено для реализации интерактивного процесса кодирования, в котором создаются документы с динамическим кодом, описательным текстом и графикой. Приложения Jupyter Notebook также позволяют совместно использовать результаты вашей работы с другими пользователями, так как вы можете сохранять выходные данные разделы кода в документе. Jupyter Notebook можно устанавливать на различных платформах.

Действия, описанные в инструкциях по работе с [локальным компьютером](#local), позволяют установить дополнительные компоненты для работы с приложениями Jupyter Notebook. Чтобы включить эти компоненты в вашей среде Jupyter Notebook, следуйте инструкциям ниже:

1. Откройте окно командной строки или оболочку.

1. Чтобы установить Conda с поддержкой сервера Jupyter Notebook и включить экспериментальные мини-приложения, используйте следующие команды:

    ```shell
    # install Jupyter
    conda install nb_conda

    # install experiment widget
    jupyter nbextension install --py --user azureml.train.widgets

    # enable experiment widget
    jupyter nbextension enable --py --user azureml.train.widgets
    ```

1. Откройте Jupyter Notebook, выполнив следующую команду:

    ```shell
    jupyter notebook
    ```

1. Чтобы убедиться в том, что в Jupyter Notebook включена поддержка пакета SDK, откройте новую записную книжку и выберите myenv в качестве ядра. Затем выполните приведенную ниже команду в ячейке записной книжки:

    ```python
    import azureml.core
    azureml.core.VERSION
    ```

1. См. дополнительные сведения о том, как [настроить Jupyter Notebook для работы с вашей рабочей областью Службы машинного обучения Azure](#workspace).

### <a id="vscode"></a>Visual Studio Code

Visual Studio Code — это кроссплатформенный редактор кода. Для его использования требуется локальная установка Python 3 и Conda для поддержки Python, но он также предоставляет дополнительные средства для работы с искусственным интеллектом. Кроме того, этот редактор предоставляет поддержку для выбора среды Conda в редакторе кода.

Чтобы использовать Visual Studio Code для разработки, сделайте следующее:

1. Чтобы узнать, как использовать Visual Studio Code для разработки с помощью Python, см. руководство по [началу работы с Python в VSCode](https://code.visualstudio.com/docs/python/python-tutorial).

1. Чтобы выбрать среду Conda, откройте VS Code и используйте сочетание клавиш __CTRL+SHIFT+P__ для Windows или __COMMAND+SHIFT+P__ для Mac, чтобы открыть __палитру команд__. Введите __Python: Select Interpreter__ (Python: выбор интерпретатора) и выберите среду Conda.

1. Чтобы убедиться, что вы можете использовать пакет SDK, создайте новый файл Python (.py), содержащий следующий код. Затем запустите этот файл:

    ```python
    import azureml.core
    azureml.core.VERSION
    ```

1. См. дополнительные сведения о том, как [установить расширение Visual Studio Code Tools for AI ](https://marketplace.visualstudio.com/items?itemName=ms-toolsai.vscode-ai).

    См. дополнительные сведения о том, как [использовать расширение Visual Studio Code Tools for AI с Машинным обучением Azure](how-to-vscode-tools.md).

## <a id="workspace"></a>Создание файла конфигурации рабочей области

Файл конфигурации рабочей области — это документ JSON, который используется пакетом SDK для обмена данными с рабочей областью Службы машинного обучения Azure. Этот файл с именем `config.json` имеет следующий формат:

```json
{
    "subscription_id": "<subscription-id>",
    "resource_group": "<resource-group>",
    "workspace_name": "<workspace-name>"
}
```

Этот файл должен находиться в структуре каталогов, которые содержат скрипты Python или приложения Jupyter Notebook. Он может находиться в том же каталоге, подкаталоге с именем `aml_config` или родительском каталоге.

Чтобы использовать этот файл в коде, выполните `ws=Workspace.from_config()`. Этот код загружает данные из файла и подключается к рабочей области.

Есть три способа создать файл конфигурации:

* Если вы следуете инструкциям по [использованию Машинного обучения Azure](quickstart-get-started.md), файл `config.json` создается в библиотеке Записных книжек Azure. Файл содержит сведения о конфигурации вашей рабочей области. Вы можете скачать или скопировать файл `config.json` в другие среды разработки.

* Вы можете **вручную создать файл** в текстовом редакторе. Для этого найдите значения, передаваемые в файл конфигурации, перейдя в рабочую область на [портале Azure](https://portal.azure.com). Скопируйте __имя рабочей области__, __группу ресурсов__ и __ИД подписки__ для использования в файле конфигурации.
        ![портал Azure](./media/how-to-configure-environment/configure.png)

* Вы можете **создать файл программными средствами**. В следующем фрагменте кода показано, как подключиться к рабочей области, указав идентификатор подписки, группу ресурсов и имя рабочей области. Затем конфигурация рабочей области будет сохранена в файле:

    ```python
    from azureml.core import Workspace

    subscription_id = '<subscription-id>'
    resource_group  = '<resource-group>'
    workspace_name  = '<workspace-name>'

    try:
        ws = Workspace(subscription_id = subscription_id, resource_group = resource_group, workspace_name = workspace_name)
        ws.write_config()
        print('Library configuration succeeded')
    except:
        print('Workspace not found')
    ```

    Этот код записывает файл конфигурации в файл `aml_config/config.json`.

## <a name="next-steps"></a>Дополнительная информация

- [Обучение модели в машинном обучении Azure с помощью набора данных MNIST](tutorial-train-models-with-aml.md)
- [Пакет SDK службы "Машинное обучение Azure" для Python](https://aka.ms/aml-sdk)
- [Пакет SDK azureml-dataprep службы "Машинное обучение Azure"](https://aka.ms/data-prep-sdk)