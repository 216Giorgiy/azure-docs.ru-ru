<properties urlDisplayName="Migrate from IIS to Azure Websites with Migration Assistant" pageTitle="Миграция веб-сайтов IIS на платформу веб-сайтов Azure с помощью службы Migration Assistant" metaKeywords="Azure Websites,миграция,перенос данных,IIS" description="Показывает, как использовать помощник по миграции веб-сайтов Azure для быстрого переноса существующих веб-сайтов IIS на веб-сайты Azure" metaCanonical="" services="web-sites" documentationCenter="" title="Migrate your IIS Websites to Azure Websites using the Migration Assistant" authors="cephalin,anwestg"  solutions="" writer="cephalin" manager="wpickett" editor=""  />

<tags ms.service="web-sites" ms.workload="web" ms.tgt_pltfrm="na" ms.devlang="na" ms.topic="article" ms.date="10/20/2014" ms.author="cephalin" />

# Миграция веб-сайтов IIS на веб-сайты Azure с помощью Migration Assistant #
Можно легко перенести на платформу веб-сайтов Azure существующие веб-сайты, которые работают в службах IIS версии 6 или более поздней версии. [Migration Assistant веб-сайтов Azure](https://www.movemetothecloud.net/) проанализирует установку IIS-сервера, определит, какие сайты можно перенести на веб-сайты Azure, выделит элементы, которые перенести не удастся или которые не поддерживаются платформой, а затем выполнит миграцию веб-сайтов и связанных с ними баз данных на Azure.

>[WACOM.NOTE] Срок поддержки Windows Server 2003 истекает 14 июля 2015 года. Если веб-сайты на IIS-сервере хранятся в Windows Server 2003, то можно поддерживать их работу на основе веб-сайтов Azure - безопасного, экономичного и эффективного решения, при этом служба Migration Assistant веб-сайтов Azure поможет автоматизировать процесс переноса необходимых данных. 

## Элементы, проверяемые во время анализа совместимости ##
Служба Migration Assistant веб-сайтов Azure создает отчет о готовности, позволяющий выявить потенциальные проблемы, которые могут помешать успешной миграции с локального сервера IIS на платформу веб-сайтов Azure. Ниже указаны некоторые ключевые моменты, которые необходимо учесть.

-	Привязки портов: служба веб-сайтов Azure поддерживает только порт 80 для HTTP-трафика и порт 443 для HTTPS-трафика. Конфигурации других портов будут проигнорированы, а трафик будет направлен на порт 80 или 443.
-	Проверка подлинности: служба веб-сайтов Azure поддерживает анонимную проверку подлинности по умолчанию и проверку подлинности на основе форм, указанную в приложении. Проверка подлинности Windows может использоваться только при интеграции в Azure Active Directory и ADFS. Другие методы проверки подлинности, например простая проверка, в настоящее время не поддерживаются. 
-	Глобальный кэш сборок (GAC) не поддерживается службой веб-сайтов Azure. Если приложение имеет ссылки на сборки, которые обычно развертываются в глобальном кэше сборок, то их необходимо развернуть во временную папку приложения на платформе веб-сайтов Azure. 
-	Режим совместимости с IIS5 не поддерживается службой веб-сайтов Azure. 
-	Пулы приложений. каждый сайт и его дочерние приложения в службах веб-сайтов Azure выполняются в том же пуле приложений. Если сайт имеет несколько дочерних приложений, которые используют различные пулы приложений, то их необходимо объединить в единый пул с общими настройками или перенести все приложения на отдельные веб-сайты.
-	Компоненты COM. Служба веб-сайтов Azure не допускает регистрацию COM-компонентов на платформе. Если веб-сайты или приложения используют COM-компоненты, то их необходимо переписать в управляемый код и развернуть вместе с веб-сайтом или приложением.
-	Фильтры ISAPI. Веб-сайты Azure поддерживают использование фильтров ISAPI. Выполните следующие действия.
	-	разверните библиотеки DLL вместе с веб-сайтом; 
	-	зарегистрируйте библиотеки DLL в файле [Web.config](http://www.iis.net/configreference/system.webserver/isapifilters)
	-	разместите файл applicationHost.xdt в корневой каталог сайта с содержимым, указанным ниже:

			?xml version="1.0"?
			<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
			<configSections>
			    <sectionGroup name="system.webServer">
			      <section name="isapiFilters" xdt:Transform="SetAttributes(overrideModeDefault)" overrideModeDefault="Allow" />
			    </sectionGroup>
			  </configSections>
			</configuration>

		Другие примеры использования преобразований XML-документа с помощью веб-сайта см. в разделе [Преобразование веб-сайта Microsoft Azure](http://blogs.msdn.com/b/waws/archive/2014/06/17/transform-your-microsoft-azure-web-site.aspx).

-	Другие компоненты, например SharePoint, серверные расширения главных страниц (FPSE), FTP-служба и SSL-сертификаты, перенесены не будут.

## Использование службы Migration Assistant веб-сайтов Azure ##
В данном разделе рассмотрен пошаговый пример миграции нескольких веб-сайтов, использующих базу данных SQL Server и работающих на локальном компьютере Windows Server 2003 R2 (IIS 6.0):

1.	На IIS-сервере или на клиентской машине перейдите на веб-сайт [https://www.movemetothecloud.net/](https://www.movemetothecloud.net/) 

	![](./media/web-sites-migration-from-iis-server/migration-tool-homepage.png)

2.	Нажав кнопку **Выделенный IIS-сервер**, установите службу Migration Assistant веб-сайтов Azure. Дополнительные параметры можно будет настроить на следующих этапах. 
4.	Нажмите кнопку **Средство установки** и установите службу Migration Assistant веб-сайтов Azure на свой компьютер.

	![](./media/web-sites-migration-from-iis-server/install-page.png)

	>[WACOM.NOTE] В качестве альтернативы можно щелкнуть **Загрузить для офлайн-установки**, загрузить ZIP-файл и установить службу на серверах без подключения к Интернету. Либо можно выбрать пункт **Загрузить имеющийся отчет о готовности к переносу** - дополнительный параметр для работы с имеющимся отчетом о готовности к переносу, который был создан перед этим (процесс создания будет описан ниже).

5.	В окне **Установка приложения** щелкните **Установить**, чтобы начать установку службы на компьютер. При необходимости будут также установлены связанные компоненты, такие как Web Deploy, DacFX и IIS. 

	![](./media/web-sites-migration-from-iis-server/install-progress.png)

	После установки служба Migration Assistant веб-сайтов Azure запускается автоматически.
  
6.	Выберите пункт **Перенести сайты и базы данных с удаленного сервера на платформу Azure**. Введите учетные данные администратора удаленного сервера и нажмите кнопку **Продолжить**. 

	![](./media/web-sites-migration-from-iis-server/migrate-from-remote.png)

 Конечно, можно перенести данные и с локального сервера. Вариант удаленного переноса полезен в тех случаях, когда необходимо перенести веб-сайты с рабочего сервера IIS.
 
 На этом этапе средство переноса проверит конфигурацию сервера IIS (сайты, приложения, пулы приложений и компоненты), чтобы определить, какие веб-сайты готовы к миграции. 

8.	Ниже на снимке экрана показаны три веб-сайта: **Default Web Site**, **TimeTracker** и **CommerceNet4**. У всех этих сайтов есть базы данных, которые необходимо перенести. Выберите все сайты, которые необходимо проверить, и нажмите кнопку **Далее**.

	![](./media/web-sites-migration-from-iis-server/select-migration-candidates.png)
 
9.	Нажмите кнопку **Отправить**, чтобы начать передачу отчета о готовности к переносу. Если нажать кнопку **Сохранить файл локально**, то можно запустить средство переноса и отправить сохраненный отчет о готовности к переносу позже.

	![](./media/web-sites-migration-from-iis-server/upload-readiness-report.png)
 
 Когда отчет о готовности будет передан, Azure выполнит анализ готовности и выведет результаты. Прежде чем продолжить, прочтите детали оценки каждого веб-сайта и убедитесь, что все задачи понятны и решены. 
 
	![](./media/web-sites-migration-from-iis-server/readiness-assessment.png)

12.	Нажмите кнопку **Начать миграцию**, чтобы начать перенос данных. Произойдет перенаправление на платформу Azure для входа в учетную запись. Важно войти учетную запись с активной подпиской Azure. Если у вас нет учетной записи Azure, то зарегистрироваться для получения пробной версии можно здесь. 

13.	Выберите первичную учетную запись, подписку Azure и регион для использования веб-сайтов и баз данных, перенесенных на Azure. Затем нажмите кнопку **Начать миграцию**. Выбрать веб-сайты для переноса можно позже.

	![](./media/web-sites-migration-from-iis-server/choose-tenant-account.png)

14.	В следующем окне можно изменить настройки по умолчанию:

	- использовать существующую базу данных SQL Azure или создать новую базу данных SQL Azure и настроить учетные данные для нее;
	- выбрать веб-сайты для переноса;
	- определить имена для веб-сайтов Azure и связанных с ними баз данных SQL Server;
	- настроить глобальные параметры и параметров на уровне веб-сайта.

	На следующем снимке экрана показаны все выбранные для миграции веб-сайты с параметрами по умолчанию.

	![](./media/web-sites-migration-from-iis-server/migration-settings.png)

	>[WACOM.NOTE] установив флажок **Включить Azure Active Directory** в пользовательских настройках, можно выполнить интеграцию веб-сайта Azure в [Azure Active Directory](http://azure.microsoft.com/ru-ru/documentation/articles/active-directory-whatis/) (**каталог по умолчанию**). Дополнительные сведения о синхронизации Azure Active Directory с локальным каталогом Active Directory см. в разделе [Интеграция каталогов](http://msdn.microsoft.com/library/jj573653).

16.	 После внесения всех необходимых изменений нажмите кнопку **Создать**, чтобы запустить процесс миграции. Средство миграции создаст базу данных SQL Azure и веб-сайт Azure, а затем опубликует содержимое веб-сайта и базы данных. Процесс миграции четко отображается в средстве миграции, а по окончании переноса отобразится окно сводки, в котором будут указаны сведения о перенесенных компонентах сайтов, успешности выполнения миграции, а также ссылки на созданные веб-сайты Azure. 

 Если в процессе миграции возникнут ошибки, то в средстве миграции отобразится сбой и будет выполнен откат изменений. Можно также нажать кнопку **Отправить отчет об ошибке**, чтобы отправить команде разработчиков отчет об ошибке вместе со стеком вызовов ошибки и собственным сообщением. 

	![](./media/web-sites-migration-from-iis-server/migration-error-report.png)

	Если миграция завершена успешно, то можно нажать кнопку **Отправить отзыв**, чтобы оставить свой комментарий. 
 
20.	По ссылкам на веб-сайты Azure проверьте, насколько успешно выполнена миграция.


