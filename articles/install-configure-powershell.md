<properties linkid="Install-Config-Windows-Azure-PowerShell" urlDisplayName="Azure PowerShell" pageTitle="Установка и настройка Azure PowerShell" description="Узнайте, как установить и настроить Azure PowerShell." umbracoNaviHide="0" disqusComments="1" writer="kathydav" editor="tysonn" manager="jeffreyg" documentationCenter="" services="" solutions="" authors="" title="Установка и настройка Azure PowerShell" />

# Установка и настройка Azure PowerShell#

<div class="dev-center-tutorial-selector sublanding"><a href="/ru-ru/manage/install-and-configure-windows-powershell/" title="PowerShell" class="current">PowerShell</a><a href="/ru-ru/manage/install-and-configure-cli/" title=" Межплатформенный интерфейс командной строки"> Межплатформенный интерфейс командной строки</a></div>

С помощью Windows PowerShell можно выполнять различные задачи в Azure в интерактивном режиме, в командной строке или автоматически с помощью скриптов. PowerShell Azure — это модуль, предоставляющий командлеты для управления Azure с помощью Windows PowerShell. Эти командлеты можно использовать для создания, тестирования, развертывания решений и служб на платформе Azure и управления ими. В большинстве случаев с помощью командлетов можно выполнять те же задачи, которые доступны на портале управления Azure. Например, можно создавать и настраивать облачные службы, виртуальные машины, виртуальные сети и веб-сайты. 

Этот модуль распространяется в виде загружаемого файла, а управление исходным кодом осуществляется с помощью общедоступного репозитория. Ссылки на загружаемые файлы приведены в инструкциях по установке далее в этом разделе. Сведения об исходном коде см. в разделе [Репозиторий кода Azure PowerShell](https://github.com/WindowsAzure/azure-sdk-tools).

В данном руководство представлены базовые сведения об установке и настройке Azure PowerShell для управления платформой Azure.

## Оглавление
  
 * [Необходимые компоненты для использования Azure PowerShell](#Prereq)
 * [Установка Azure PowerShell](#Install)  
 * [Подключение к подписке](#Connect)
 * [Использование командлетов: примеры](#Ex)
 * [Получение справки](#Help)
 * [Дополнительные ресурсы](#Resources)  


### <a id="Prereq"></a>Необходимые компоненты для использования Azure PowerShell

Azure — это платформа на основе подписок. Это означает, что для использования платформы требуется подписка. В большинстве случаев это также означает, что при использовании командлетов для выполнения задач, связанных с подпиской, требуются сведения об этой подписке. (Некоторые командлеты, связанные с хранилищем, можно использовать без этой информации.) Эти сведения задаются при настройке подключения компьютера к вашей подписке. Инструкции приведены в разделе "Подключение к подписке" далее в этой статье.

> [WACOM.NOTE] Доступны различные параметры подписки. Дополнительные сведения см. в статье [Приступая к работе с Azure](http://go.microsoft.com/fwlink/p/?LinkId=320795).

При установке модуля установщик проверяет систему на наличие необходимого программного обеспечения и устанавливает все зависимости, такие как нужная версия Windows PowerShell и платформы .NET Framework. 

<h2> <a id="Install"></a>Установка Azure PowerShell</h2>

Вы можете загрузить и установить модуль Azure PowerShell, запустив [установщик веб-платформы Майкрософт](http://go.microsoft.com/fwlink/p/?LinkId=320376). При появлении запроса нажмите кнопку **Запуск**. Выполнится загрузка установщика веб-платформы Майкрософт, при этом модуль **Azure PowerShell** будет доступен для установки. Установщик веб-платформы устанавливает все зависимости для командлетов Azure PowerShell. Следуйте инструкциям на экране для завершения установки.

Дополнительные сведения о средствах командной строки Azure см. в статье [Средства командной строки]( http://go.microsoft.com/fwlink/?LinkId=320796).

При установке модуля также устанавливается специальная консоль для Azure PowerShell. Командлеты можно выполнять в стандартном модуле Windows PowerShell или в консоли Azure PowerShell.

Метод, используемый для открытия консоли, зависит от используемой версии Windows:

- На компьютере под управлением Windows 8, Windows Server 2012 или более поздних версий можно использовать встроенный поиск. На начальном экране начните ввод строки **питание**. В результате вы получите список приложений, включающий Windows PowerShell и Azure PowerShell. Щелкните одно из них, чтобы открыть окно консоли. (Для закрепления приложения на начальном экране щелкните значок правой кнопкой мыши.)

- На компьютере под управлением более ранней версии, чем Windows 8 или Windows Server 2012, можно использовать меню "Пуск". В меню "Пуск" щелкните **Все программы**, выберите **Azure** и щелкните **Azure PowerShell**.


<h2><a id="Connect"></a>Подключение к подписке</h2>

Для использования Azure требуется подписка. Если у вас нет подписки, см. статью [Приступая к работе с Azure](http://go.microsoft.com/fwlink/p/?LinkId=320795).

Командлетам требуются сведения о подписке для управления вашими службами. Начиная с версии 0.7 существует два способа предоставления этой информации. Можно загрузить и использовать сертификат управления, который содержит нужные сведения, или можно войти в Azure с использованием учетной записи Майкрософт или идентификатора организации. После входа Azure Active Directory (Azure AD) проверяет подлинность учетных данных. 

Чтобы помочь вам выбрать метод проверки подлинности, который вам подходит, необходимо учитывать следующее:

- Метод Azure AD может упростить управление доступом к подписке, но может привести к нарушению автоматизации. Учетные данные доступны для Azure PowerShell в течение 12 часов. После истечения этого срока необходимо снова войти в систему.  
- При использовании метода с сертификатом, сведения о подписке доступны, пока подписка и сертификат действительны. Этот метод упрощает использование автоматизации для длительных задач. После загрузки и импорта данных вам не потребуется снова их предоставлять. Однако этот метод затрудняет управление доступом к общим подпискам, например когда несколько пользователей обладают доступом к учетной записи.    

Дополнительные сведения о проверке подлинности и управлении подписками в Azure см. в статье [Управление учетными записями, подписками и административными ролями](http://go.microsoft.com/fwlink/?LinkId=324796).

<h3>Использование Azure AD</h3>

1. Откройте консоль Azure PowerShell, как описано в разделе [Установка Azure PowerShell](#Install).

2. Введите следующую команду:

    `Add-AzureAccount`

3. В окне введите адрес электронной почты и пароль, связанные с вашей учетной записью.

4. Azure выполняет проверку подлинности и сохраняет учетные данные, а затем закрывает окно.

<h3>Использование сертификата</h3>

Модуль Azure PowerShell предоставляет командлеты, с помощью которых можно загрузить и импортировать сертификат.

- Командлет **Get-AzurePublishSettingsFile** открывает веб-страницу на портале управления Azure, с которой можно загрузить сведения о подписке. Эта информация содержится в PUBLISHSETTINGS-файле.

- Командлет **Import-AzurePublishSettingsFile** импортирует PUBLISHSETTINGS-файл для использования в модуле. Этот файл содержит сертификат управления с учетными данными безопасности. 

<div class="dev-callout"> 
<b>Важно</b> 
<p>Рекомендуется удалить профиль публикации, который вы загрузили с помощью <b>Get-AzurePublishSettingsFile</b>, после импорта настроек. Поскольку сертификат управления содержит учетные данные безопасности, он должен быть недоступен неавторизованным пользователям. Если вам необходима информация о ваших подписках, ее можно получить на <a href="http://manage.windowsazure.com/">портале управления Azure</a> или <a href="http://go.microsoft.com/fwlink/p/?LinkId=324875">портал клиента Microsoft Online Services</a>.</p> 
</div>

1. Войдите на [портал управления Azure](http://manage.windowsazure.com) с помощью учетных данных вашей учетной записи Azure.

2. Откройте консоль Azure PowerShell, как описано в разделе [Установка Azure PowerShell](#Install).

3. Введите следующую команду:

    `Get-AzurePublishSettingsFile`

4. При появлении запроса загрузите и сохраните профиль публикации. Запомните путь и имя PUBLISHSETTINGS-файла. Эта информация необходима при выполнении командлета **Import-AzurePublishSettingsFile** для импорта параметров. Расположение и формат файла по умолчанию:

	C:\\Users\&lt;UserProfile&gt;\\Download\\[*MySubscription*-...]-*downloadDate*-credentials.publishsettings

5. Введите команду, подобную следующей, указав имя своей учетной записи Windows, а также имя и путь файла вместо заполнителей:

    Import-AzurePublishSettingsFile C:\Users\&lt;UserProfile&gt;\Downloads\&lt;SubscriptionName&gt;-credentials.publishsettings

> [WACOM.NOTE] Если вы были добавлены в другие подписки как соадминистратор после импорта настроек публикации, необходимо повторить этот процесс для загрузки нового PUBLISHSETTINGS-файла и затем импортировать эти параметры. Дополнительные сведения о добавлении соадминистраторов для управления службами подписки см. в статье [Добавление и удаление администраторов для подписки на Azure](http://msdn.microsoft.com/ru-ru/library/windowsazure/gg456328.aspx).

<h3> Просмотр сведений учетной записи и подписки</h3>
У вас может быть несколько учетных записей и подписок, доступных для использования в Azure PowerShell. Можно добавить несколько учетных записей, выполнив командлет AzureAccount несколько раз. 

Чтобы просмотреть доступные учетные записи, введите следующую команду:

	`Get-AzureAccount`

Чтобы просмотреть сведения о подписках, введите:

	`Get-AzureSubscription`

## <a id="Ex"></a>Использование командлетов: примеры ##

После установки модуля и настройки компьютера для подключения к вашей подписке можно создать веб-сайт как пример использования этих командлетов.

1. Откройте консоль AzurePowerShell, если она еще не открыта.

2. Введите имя веб-сайта. Необходимо использовать имя, соответствующее правилам именования DNS. Допустимые имена могут содержать только буквы "a"-"z", цифры от "0" до "9" и дефис ("-"). Имя должно быть уникальным в пределах Azure. 

	После выбора имени введите команду, аналогичную следующей. Например, чтобы создать веб-сайт с использованием вашей учетной записи и идентификационного номера для повторного применения этого соглашения, введите следующую команду, указав имя вашей учетной записи:

	`New-AzureWebsite my-site-name-1`

	Этот командлет создает веб-сайт и выводит информацию о нем.

3. Чтобы проверить состояние веб-сайта, введите:

	`Get-AzureWebsite`

	Этот командлет отображает имя, состояние и имя узла нового веб-сайта. 

	> [WACOM.NOTE] Если выполнить эту команду в том виде, в котором она показана, будут показаны все сведения о веб-сайтах, связанных с текущей подпиской. 

4. Веб-сайты запускаются после их создания. Чтобы остановить веб-сайт, введите:

	`Stop-AzureWebsite -Name account-name-1`

5. Выполните команду Get-AzureWebsite еще раз, чтобы убедиться, что состояние веб-сайта изменилось на "Остановлено".
  
5. Для завершения этого теста можно удалить веб-сайт. Тип:  

	`Remove-AzureWebsite -Name account-name-1`

	Подтвердите удаление для завершения задачи.

##<a id="Help"></a>Получение справки##

В этих ресурсах вы найдете справку для определенных командлетов: 


-   В консоли можно использовать встроенную справку. Командлет **Get-Help** предоставляет доступ к этой системе. В следующей таблице приведены некоторые примеры команд, которые можно использовать для получения справки. Дополнительные сведения можно получить в консоли, введя команду **help**

    <table border="1" cellspacing="4" cellpadding="4">
    <tbody>
    <tr align="left" valign="top">
		<td><b>Команда</b></td>
		<td><b>Результат</b></td>
    </tr>
    <tr align="left" valign="top">
		<td>help</td>
		<td>Описание использования справочной системы. <p><b>Примечание</b>. В описание включены некоторые сведения о файлах справки, не относящихся к модулю Azure. В частности, файлы справки, установленные при установке модуля. Они недоступны для отдельной загрузки.</p>
</td>
    </tr>
    <tr align="left" valign="top">
		<td>help azure</td>
		<td>Перечисление всех командлетов в модуле Azure PowerShell.</td>
    </tr>
	<tr align="left" valign="top">
		<td>help &lt;<b>язык</b>&gt;-dev</td>
		<td>Перечисление командлетов для разработки приложений на определенном языке и управления ими. Например: help node-dev, help php-dev или help python-dev.</td>
    </tr>
	    <tr align="left" valign="top">
		<td>help &lt;<b>cmdlet</b>&gt;</td>
		<td>Отображение справки о командлете Windows PowerShell.</td>
    </tr>
    <tr align="left" valign="top">
		<td>help &lt;<b>cmdlet</b>&gt; -parameter *</td>
		<td>Отображение определений параметров командлета. Например: help get-azuresubscription -parameter *</td>
    </tr>
    <tr align="left" valign="top">
		<td>help &lt;<b>cmdlet</b>&gt; -examples</td>
		<td> Отображение синтаксиса и описания примеров команд для командлета.</td>
    </tr>
    <tr align="left" valign="top">
		<td>help &lt;<b>cmdlet</b>&gt; -full</td>
		<td>Отображение технических требований для командлета.</td>
    </tr>
    </tbody>
    </table>



- Справочные сведения о командлетах в модуле Azure PowerShell также доступны в библиотеке Azure. Дополнительные сведения см. в [справочнике по командлетам Azure](http://msdn.microsoft.com/ru-ru/library/windowsazure/jj554330.aspx).

На этих популярных форумах можно получить помощь от сообщества:

- [Форум Azure на портале MSDN]( http://go.microsoft.com/fwlink/p/?LinkId=320212) 
- [Stackoverflow](http://go.microsoft.com/fwlink/?LinkId=320213)


## <a id="Resources"></a>Дополнительные ресурсы ##

Вот некоторые ресурсы, которые можно использовать для получений сведений об использовании Azure и Windows PowerShell. 

- Сведения о том, как оставить отзыв о командлетах, сообщить о проблемах или получить доступ к исходному коду, см. в статье [Репозиторий кода Azure PowerShell](https://github.com/WindowsAzure/azure-sdk-tools).

- Сведения о командной строке Windows PowerShell и среде сценариев см. на веб-сайте [TechNet Script Center](http://go.microsoft.com/fwlink/p/?LinkId=320211).

- Сведения об установке, изучении, использовании и настройке Windows PowerShell см. в статье [Скрипты в Windows PowerShell](http://go.microsoft.com/fwlink/p/?LinkId=320210).

- Сведения о скриптах и способах их выполнения в Windows PowerShell см. в разделе [Выполнение скриптов](http://go.microsoft.com/fwlink/p/?LinkId=320627). Данная статья содержит базовые сведения о создании скриптов и настройке компьютера для их запуска. 

- Сведения о командлетах для Azure AD см. в статье [Управление службой Azure AD с помощью Windows PowerShell](http://go.microsoft.com/fwlink/p/?LinkId=320628).



  
  
  [Портал клиента Microsoft Online Services]: https://mocp.microsoftonline.com/site/default.aspx
 
  


