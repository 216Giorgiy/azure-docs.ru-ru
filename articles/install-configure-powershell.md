<properties linkid="Install-Config-Windows-Azure-PowerShell" urlDisplayName="Azure PowerShell" pageTitle="How to install and configure Azure PowerShell" description="Learn how to install and configure Azure PowerShell." umbracoNaviHide="0" disqusComments="1" editor="tysonn" manager="stevenka" documentationCenter="" services="" solutions="" authors="stevenka" title="How to install and configure Azure PowerShell" />

<tags ms.service="multiple" ms.workload="multiple" ms.tgt_pltfrm="powershell" ms.devlang="na" ms.topic="article" ms.date="01/01/1900" ms.author="stevenka;juneb" />

# Установка и настройка Azure PowerShell

<div class="dev-center-tutorial-selector sublanding"><a href="/ru-ru/manage/install-and-configure-windows-powershell/" title="PowerShell" class="current">PowerShell</a><a href="/ru-ru/manage/install-and-configure-cli/" title="Межплатформенный интерфейс командной строки">Межплатформенный интерфейс командной строки</a></div>

С помощью Windows PowerShell можно выполнять различные задачи в Azure в интерактивном режиме, в командной строке или автоматически с помощью сценариев. Azure PowerShell — это модуль, предоставляющий командлеты для управления Azure с помощью Windows PowerShell. Эти командлеты можно использовать для создания, тестирования, развертывания решений и служб на платформе Azure и управления ими. В большинстве случаев с помощью командлетов можно выполнять те же задачи, которые доступны на портале управления Azure. Например, можно создавать и настраивать облачные службы, виртуальные машины, виртуальные сети и веб-сайты.

Этот модуль распространяется в виде загружаемого файла, а управление исходным кодом осуществляется с помощью общедоступного репозитория. Ссылки на загружаемые файлы приведены в инструкциях по установке далее в этом разделе. Информацию об исходном коде см. в [репозитории кода Azure PowerShell][репозитории кода Azure PowerShell].

В данном руководстве представлены основные сведения об установке и настройке Azure PowerShell для управления платформой Azure.

## Оглавление

-   [Необходимые компоненты для использования Azure PowerShell][Необходимые компоненты для использования Azure PowerShell]
-   [Практическое руководство. Установка Azure PowerShell][Практическое руководство. Установка Azure PowerShell]
    .
-   [Практическое руководство. Подключение к подписке][Практическое руководство. Подключение к подписке]
-   [Как использовать командлеты: пример][Как использовать командлеты: пример]
-   [Получение справки][Получение справки]
-   [Дополнительные ресурсы][Дополнительные ресурсы]

### <span id="Prereq"></span></a>Необходимые компоненты для использования Azure PowerShell

Azure — это платформа на основе подписок. Это означает, что для использования платформы требуется подписка. В большинстве случаев это также означает, что при использовании командлетов для выполнения задач, связанных с подпиской, требуются сведения об этой подписке. (Некоторые командлеты, связанные с хранилищем, можно использовать без этой информации.) Эти сведения задаются при настройке подключения компьютера к вашей подписке. Указания приведены в разделе «Практическое руководство. Подключение к подписке» далее в этой статье.

> [WACOM.NOTE] Начиная с версии 0.8.5, модулю Azure PowerShell требуется Microsoft .NET Framework 4.5.

При установке модуля установщик проверяет систему на наличие необходимого программного обеспечения и устанавливает все зависимости, такие как нужная версия Windows PowerShell и платформы .NET Framework.

## <span id="Install"></span></a>Практическое руководство. Установка Azure PowerShell

Вы можете скачать и установить модуль Azure PowerShell, запустив [установщик веб-платформы Майкрософт][установщик веб-платформы Майкрософт]. При появлении запроса нажмите кнопку **Запуск**. Установщик веб-платформы установит модули Azure PowerShell и все зависимости.Следуйте инструкциям на экране для завершения установки.

Дополнительную информацию о программах командной строки Azure см. в разделе [Программы командной строки][Программы командной строки].

При установке модуля также устанавливается специальная консоль для Azure PowerShell. Командлеты можно выполнять в стандартном модуле PowerShell или в консоли Azure PowerShell.

Метод, используемый для открытия консоли, зависит от используемой версии Windows:

-   На компьютере под управлением Windows 8, Windows Server 2012 или более поздних версий можно использовать встроенный поиск. На начальном экране начните ввод строки **питание**. В результате вы получите список приложений, включающий Windows PowerShell и Azure PowerShell. Чтобы открыть консоль, щелкните любое приложение. (Для закрепления приложения на начальном экране щелкните значок правой кнопкой мыши.)

-   На компьютере под управлением Windows более ранней версии, чем Windows 8 или Windows Server 2012, можно использовать меню «Пуск». В меню «Пуск» щелкните **Все программы**, выберите **Azure** и щелкните **Azure PowerShell**.

## <span id="Connect"></span></a>Практическое руководство. Подключение к подписке

Для использования Azure требуется подписка. Если у вас нет подписки, см. статью [Приступая к работе с Azure][Приступая к работе с Azure].

Командлетам необходима ваша подписка для управления службами. Есть два способа предоставить данные подписки в Windows PowerShell. Можно использовать сертификат управления, который содержит нужные данные, или можно войти в Azure с использованием учетной записи Майкрософт или рабочей учетной записи. Когда вы входите, Azure Active Directory (Azure AD) аутентифицирует учетные данные и возвращает маркер доступа, который позволяет Azure PowerShell управлять вашей учетной записью.

Чтобы помочь вам выбрать метод проверки подлинности, который вам подходит, необходимо учитывать следующее:

-   Azure AD является рекомендованным методом аутентификации, поскольку с ним проще управлять доступом к подписке. С обновлением в версии 0.8.6 он также поддерживает сценарий автоматизации с аутентификацией Azure AD при использовании рабочей учетной записи. Также работает с API диспетчера ресурсов Azure.
-   При использовании метода с сертификатом информация о подписке доступна, пока подписка и сертификат действительны. Однако этот метод затрудняет управление доступом к общим подпискам, например когда несколько пользователей обладают доступом к учетной записи. Также API диспетчера ресурсов Azure не принимает проверку подлинности на основе сертификата.

Дополнительную информацию об аутентификации и управлении подписками в Azure см. в статье [Управление учетными записями, подписками и административными ролями][Управление учетными записями, подписками и административными ролями].

### Использование метода Azure AD

1.  Откройте консоль Azure PowerShell, как описано в разделе [Практическое руководство. Установка Azure PowerShell][Практическое руководство. Установка Azure PowerShell].

2.  Введите следующую команду:

    `Add-AzureAccount`

3.  В окне введите адрес электронной почты и пароль, связанные с вашей учетной записью.

4.  Azure выполняет проверку подлинности и сохраняет учетные данные, а затем закрывает окно.

5.  Начиная с версии 0.8.6, если у вас есть рабочая учетная запись, можно ввести следующую команду, чтобы обойти всплывающее окно. При этом появляется стандартное окно ввода учетных данных Windows PowerShell, где следует указать имя пользователя и пароль рабочей учетной записи.

        $cred = Get-Credential
        Add-AzureAccount -Credential $cred

6.  Если вы используете сценарий автоматизации и хотите обойти всплывающие окна, используйте следующий фрагмент кода:

        $userName = "<your organizational account user name>"
        $securePassword = ConvertTo-SecureString -String "<your organizational account password>" -AsPlainText -Force
        $cred = New-Object System.Management.Automation.PSCredential($userName, $securePassword)
        Add-AzureAccount -Credential $cred 

    > [WACOM.NOTE] Этот неинтерактивный метод входа работает только с рабочей учетной записью. Учетная запись организации — это пользователь, который управляется вашей организацией и определен в клиенте Azure Active Directory организации. Если вы используете для входа в подписку Azure учетную запись Microsoft, вы можете создать учетную запись организации, выполнив следующие действия.
    >
    > 1.  Войдите на [портал управления Azure][портал управления Azure] и щелкните **Active Directory**.
    >
    > 2.  Если каталог не существует, выберите **Создание каталога** и укажите нужные данные.
    >
    > 3.  Выберите каталог и добавьте нового пользователя. Этот пользователь будет представлять учетную запись организации.
    >
    >     При создании пользователя вам будут представлены адрес электронной почты и временный пароль. Эти данные используются на следующем шаге. Сохраните их.
    >
    > 4.  На портале управления выберите **Настройки** и затем — **Администраторы**. Щелкните **Добавить**, чтобы добавить нового пользователя в качестве соадминистратора. Это позволит использовать вашу учетную запись организации для управления подпиской Azure.
    >
    > 5.  Выйдите с портала Azure и затем войдите снова, воспользовавшись новой рабочей учетной записью. При первом входе в учетную запись появится запрос на изменение пароля.
    >
    > Дополнительную информацию о рабочей учетной записи в Microsoft Azure см. в разделе [Подпишитесь на Microsoft Azure как организация][Подпишитесь на Microsoft Azure как организация].

### Использование сертификата

Модуль Azure содержит командлеты, с помощью которых можно скачать и импортировать сертификат.

-   Командлет **Get-AzurePublishSettingsFile** открывает веб-страницу на портале управления Azure, с которой можно скачать информацию о подписке. Эта информация содержится в PUBLISHSETTINGS-файле.

-   Командлет **Import-AzurePublishSettingsFile** импортирует PUBLISHSETTINGS-файл для использования в модуле. Этот файл содержит сертификат управления с учетными данными безопасности.

<div class="dev-callout"> 
<b>Примечание.</b>
<p>Командлетам в модуле AzureResourceManager требуется метод Azure AD (Add-AzureAccount). Эти командлеты не поддерживают публикацию файлов параметров. Дополнительную информацию о командлетах в модуле AzureResourceManager см. в разделе <a href="http://go.microsoft.com/fwlink/?LinkID=394765">Azure Resource Manager Cmdlets</a> (Командлеты диспетчера ресурсов Azure).</p> 
</div>

<div class="dev-callout"> 
<b>Важно!</b> 
<p>Мы советуем удалить профиль публикации, который вы скачали с помощью <b>Get-AzurePublishSettingsFile</b>, после импорта
настроек. Поскольку сертификат управления содержит учетные данные безопасности, он должен быть недоступен неавторизованным пользователям.
 Если вам необходима информация о ваших подписках, ее можно получить на <a href="http://manage.windowsazure.com/">портале управления Windows Azure</a> или <a href="http://go.microsoft.com/fwlink/p/?LinkId=324875">портале клиента Microsoft Online Services</a>.
</p> 
</div>

1.  Войдите на [портал управления Windows Azure][портал управления Windows Azure] с помощью своей учетной записи Azure.

2.  Откройте консоль Azure PowerShell, как описано в разделе [Практическое руководство. Установка Azure PowerShell][Практическое руководство. Установка Azure PowerShell].

3.  Введите следующую команду:

    `Get-AzurePublishSettingsFile`

4.  При появлении запроса скачайте и сохраните профиль публикации. Запомните путь и имя PUBLISHSETTINGS-файла. Эта информация необходима при выполнении командлета **Import-AzurePublishSettingsFile** для импорта параметров. Расположение и формат файла по умолчанию:

    `C:\UsersC:\\Users\<UserProfile>\\Download\\[*MySubscription*-...]-*downloadDate*-credentials.publishsettings`lt;UserProfile\>\\Download\\[\*MySubscription\*-...]-\*downloadDate\*-credentials.publishsettings</code>

5.  Введите команду, подобную следующей, указав имя своей учетной записи Windows, а также имя и путь файла вместо заполнителей:

    `Import-AzurePublishSettingsFile C:\UsersImport-AzurePublishSettingsFile C:\Users\<UserProfile>\Downloads\<SubscriptionName>-credentials.publishsettings`lt;UserProfile\>\\Downloads`Import-AzurePublishSettingsFile C:\Users\<UserProfile>\Downloads\<SubscriptionName>-credentials.publishsettings`lt;SubscriptionName\>-credentials.publishsettings</code>

> [WACOM.NOTE] Если вы были добавлены в другие подписки как соадминистратор после импорта настроек публикации, вам нужно будет повторить этот процесс для скачивания нового PUBLISHSETTINGS-файла и затем импортировать эти параметры. Дополнительную информацию о добавлении соадминистраторов для управления службами подписки см. в статье [Добавление и удаление соадминистраторов для подписки Azure][Добавление и удаление соадминистраторов для подписки Azure].

### Просмотр сведений учетной записи и подписки

У вас может быть несколько учетных записей и подписок, доступных для использования в Azure PowerShell. Можно добавить несколько учетных записей, выполнив командлет AzureAccount несколько раз.

Чтобы просмотреть доступные учетные записи Azure, введите:

    Get-AzureAccount

Чтобы просмотреть подписки Azure, введите:

    Get-AzureSubscription

## <span id="Ex"></span></a>Как использовать командлеты: пример

После установки модуля и настройки компьютера для подключения к вашей подписке вы можете создать веб-сайт Azure. Данный пример поможет приступить к работе с командлетами Azure.

1.  Запустите консоль Azure PowerShell.

2.  Выберите имя для веб-сайта. Необходимо использовать имя, соответствующее правилам именования DNS. Допустимые имена могут содержать только буквы a—z, цифры от 0 до 9 и дефис («-»).

    Имя должно быть уникальным в пределах системы Azure. В примере мы будем использовать «mySite», но постарайтесь выбрать другое имя, например, имя учетной записи с номером.

    После выбора имени введите команду, аналогичную следующей. Укажите вместо «mySite» имя вашего веб-сайта.

    `New-AzureWebsite mySite`

    Командлет создает веб-сайт и возвращает объект, который представляет новый веб-сайт. В свойства этого объекта входит полезная информация о веб-сайте.

3.  Чтобы получить информацию о веб-сайте, введите такую команду. Она возвращает информацию о всех веб-сайтах в подписке, в том числе и о только что созданном.

    `Get-AzureWebsite`

4.  Для получения дополнительной информации о веб-сайте укажите в команде имя веб-сайта. Обязательно укажите имя своего веб-сайта вместо «mySite».

    `Get-AzureWebsite -Name mySite`

5.  Веб-сайты запускаются после их создания. Чтобы остановить веб-сайт, введите эту команду и имя своего веб-сайта.

    `Stop-AzureWebsite -Name mySite`

6.  Чтобы убедиться, что сайт в состоянии «остановлен», запустите команду Get-AzureWebsite еще раз.

    `Get-AzureWebsite`

7.  Для завершения этого теста удалите веб-сайт. Тип:

    `Remove-AzureWebsite -Name mySite`

8.  Для завершения этого задания убедитесь, что веб-сайт удален.

    `Get-AzureWebsite -Name mySite`

## <span id="Help"></span></a>Получение справки

В этих ресурсах вы найдете справку для определенных командлетов:

-   В консоли можно использовать встроенную справку. Командлет **Get-Help** предоставляет доступ к этой системе. В следующей таблице приведены некоторые примеры команд, которые можно использовать для получения справки. Дополнительную информацию можно получить в консоли, введя команду **help**.

    <table>
    <colgroup>
    <col width="50%" />
    <col width="50%" />
    </colgroup>
    <tbody>
    <tr class="odd">
    <td align="left"><strong>Команда</strong></td>
    <td align="left"><strong>Результат</strong></td>
    </tr>
    <tr class="even">
    <td align="left">Get-Help</td>
    <td align="left">Описывает, как использовать справочную систему.
    <p><strong>Примечание</strong>. В описание включена некоторая информация о файлах справки, не относящихся к модулю Azure. В частности, файлы справки, установленные при установке модуля. Они недоступны для отдельного скачивания.</p></td>
    </tr>
    <tr class="odd">
    <td align="left">Get-Help Azure</td>
    <td align="left">Получает все командлеты в модуле Azure.</td>
    </tr>
    <tr class="even">
    <td align="left">Get-Help &lt;<strong>язык</strong>&gt;-dev</td>
    <td align="left">Получает командлеты для разработки приложений на определенном языке и управления ими. Например, help node-dev, help php-dev или help python-dev.</td>
    </tr>
    <tr class="odd">
    <td align="left">Get-Help &lt;<strong>командлет</strong>&gt;</td>
    <td align="left">Выводит справку о командлете Windows PowerShell. Замените <cmdlet> именем командлета.</td>
    </tr>
    <tr class="even">
    <td align="left">Get-Help &lt;<strong>командлет</strong>&gt; -Parameter *</td>
    <td align="left">Получает описание параметров командлета. Звездочка (*) означает «все».</td>
    </tr>
    <tr class="odd">
    <td align="left">Get-Help &lt;<strong>командлет</strong>&gt; -Examples</td>
    <td align="left">Получает синтаксис и примеры использования командлета.</td>
    </tr>
    <tr class="even">
    <td align="left">Get-Help &lt;<strong>командлет</strong>&gt; -Full</td>
    <td align="left">Получает всю справку по командлету, в том числе технические подробности.</td>
    </tr>
    </tbody>
    </table>

-   Справочные данные о командлетах в модуле Azure PowerShell также доступны в библиотеке Azure. Дополнительную информацию см. в [справочнике по командлетам Azure][справочнике по командлетам Azure].

На этих популярных форумах можно получить помощь от сообщества:

-   [Форум Azure на портале MSDN][Форум Azure на портале MSDN]
-   [Stackoverflow][Stackoverflow]

## <span id="Resources"></span></a> Дополнительные ресурсы

Вот некоторые ресурсы, которые можно использовать для получений информации об использовании Azure и Windows PowerShell.

-   Информацию о том, как оставить отзывы и предложения о командлетах, сообщить о проблемах или получить доступ к исходному коду, см. в [репозитории кода Azure PowerShell][репозитории кода Azure PowerShell].

-   Информацию о командной строке Windows PowerShell и среде сценариев см. в [Центре сценариев TechNet][Центре сценариев TechNet].

-   Информацию об установке, изучении, использовании и настройке Windows PowerShell см. в статье [Сценарии в Windows PowerShell][Сценарии в Windows PowerShell].

-   Информацию о сценариях и способах их выполнения в Windows PowerShell см. в разделе [Выполнение сценариев][Выполнение сценариев]. Данная статья содержит базовые сведения о создании скриптов и настройке компьютера для их запуска.

-   Информацию о командлетах для Azure AD см. в статье [Управление Azure AD с помощью Windows PowerShell][Управление Azure AD с помощью Windows PowerShell].

  [репозитории кода Azure PowerShell]: https://github.com/WindowsAzure/azure-sdk-tools
  [Необходимые компоненты для использования Azure PowerShell]: #Prereq
  [Практическое руководство. Установка Azure PowerShell]: #Install
  [Практическое руководство. Подключение к подписке]: #Connect
  [Как использовать командлеты: пример]: #Ex
  [Получение справки]: #Help
  [Дополнительные ресурсы]: #Resources
  [установщик веб-платформы Майкрософт]: http://go.microsoft.com/fwlink/p/?LinkId=320376
  [Программы командной строки]: http://go.microsoft.com/fwlink/?LinkId=320796
  [Приступая к работе с Azure]: http://go.microsoft.com/fwlink/p/?LinkId=320795
  [Управление учетными записями, подписками и административными ролями]: http://go.microsoft.com/fwlink/?LinkId=324796
  [портал управления Azure]: https://manage.windowsazure.com
  [Подпишитесь на Microsoft Azure как организация]: http://azure.microsoft.com/ru-ru/documentation/articles/sign-up-organization/
  [портал управления Windows Azure]: http://manage.windowsazure.com
  [Добавление и удаление соадминистраторов для подписки Azure]: http://msdn.microsoft.com/ru-ru/library/windowsazure/gg456328.aspx
  [справочнике по командлетам Azure]: http://msdn.microsoft.com/ru-ru/library/windowsazure/jj554330.aspx
  [Форум Azure на портале MSDN]: http://go.microsoft.com/fwlink/p/?LinkId=320212
  [Stackoverflow]: http://go.microsoft.com/fwlink/?LinkId=320213
  [Центре сценариев TechNet]: http://go.microsoft.com/fwlink/p/?LinkId=320211
  [Сценарии в Windows PowerShell]: http://go.microsoft.com/fwlink/p/?LinkId=320210
  [Выполнение сценариев]: http://go.microsoft.com/fwlink/p/?LinkId=320627
  [Управление Azure AD с помощью Windows PowerShell]: http://go.microsoft.com/fwlink/p/?LinkId=320628
