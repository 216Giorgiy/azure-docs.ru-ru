<properties urlDisplayName="SharePoint on Azure" pageTitle="Развертывание SharePoint 2010 на виртуальных машинах Azure" metaKeywords="" description="Understand the supported scenarios for using SharePoint 2010 on Azure virtual machines." metaCanonical="" services="virtual-machines" documentationCenter="" title="SharePoint 2010 Deployment on Azure Virtual Machines" authors="josephd" solutions="" manager="timlt" editor="" />

<tags ms.service="virtual-machines" ms.workload="infrastructure-services" ms.tgt_pltfrm="na" ms.devlang="na" ms.topic="article" ms.date="10/16/2014" ms.author="josephd" />




<h1>Развертывание SharePoint 2010 на виртуальных машинах Azure</h1>
<h2>Аннотация</h2>

Microsoft SharePoint Server 2010 обеспечивает большую гибкость развертывания, что помогает организациям определить правильные сценарии развертывания в соответствии с их бизнес-потребностями и целями. Виртуальные машины Azure, размещенные и управляемые в облаке, предоставляют полную, надежную и доступную инфраструктуру для поддержки различных рабочих нагрузок, связанных с приложениями по требованию и базами данных, например развертываниями Microsoft SQL Server и SharePoint.


Хотя виртуальные машины Azure поддерживают несколько рабочих нагрузок, в данной статье рассматривается развертывание SharePoint. Виртуальные машины Azure позволяют организациям создавать инфраструктуру SharePoint и управлять этой инфраструктурой с помощью универсальных возможностей быстрой подготовки и доступа практически к любому узлу. Они обеспечивают полный доступ и управление процессорами, ОЗУ, диапазонами ЦП и другими ресурсами виртуальных машин SharePoint.

Виртуальные машины Azure снижают потребность в оборудовании, благодаря чему организации вместо решения вопросов, связанных с затратностью и сложностью проекта, могут переключить внимание на создание инфраструктуры нужного масштаба и управление этой инфраструктурой. Это означает, что они могут внедрять новые возможности, экспериментировать и завершать этапы проекта за считанные часы вместо дней и недель в традиционных развертываниях.

<h3>Для кого предназначен этот документ</h3>

Этот документ предназначен для ИТ-специалистов. Кроме того, эта информация и предлагаемые сценарии могут быть полезны специалистам, принимающим технические решения, таким как системные администраторы и архитекторы, при планировании и проектировании виртуализованной инфраструктуры SharePoint в Azure.

<h3>Почему нужно прочесть эти материалы</h3>

В этой статье объясняется, как организация может настроить и развернуть SharePoint на виртуальных машинах Azure. В нем также описывается, почему этот тип развертывания может быть полезен организациям разных размеров.

<h2>Переход к облачным вычислениям</h2>

Согласно Gartner, облачные вычисления определяются как "стиль вычислений, при котором ИТ-обеспечение с высоким уровнем масштабируемости предоставляется внешним клиентам "как услуга" с использованием технологий Интернета." Ключевые слова в этом определении - масштабируемость, услуга и Интернет. Если кратко, то облачные вычисления можно определить как ИТ-услуги, которые <strong>развертываются и предоставляются через Интернет</strong> и, при необходимости, <strong>могут быть масштабируемыми</strong>.

Без сомнения, облачные вычисления отражают радикальные перемены в современных ИТ. Вчера разговор шел о консолидации и затратах. На сегодняшний день он связан с новым классом преимуществ, которые способны предоставить облачные вычисления. Речь идет о трансформации путей использования ИТ в организациях за счет использования нового вида мощностей. Облачные вычисления меняют мир ИТ в самой его основе и затрагивают все роли - от поставщиков услуг и системных архитекторов до разработчиков и конечных пользователей.

Исследования показывают, что распространение облачных технологий обусловлено тремя основными факторами: гибкость, концентрация ресурсов и рентабельность:

<ul>
<li><p><strong>Динамичность</strong>: облачные вычисления ускоряют внедрение организациями новых возможностей и реагирование на изменения в требованиях бизнеса.</p></li>
<li><p><strong>Возможность сосредоточиться на главном</strong>: облачные вычисления позволяют ИТ-отделам значительно снизить расходы на инфраструктуру. Инфраструктура абстрагируется, ресурсы объединены в пул, поэтому ИТ-обеспечение действует скорее как служебная программа, чем набор сложных служб и систем. Плюс к этому, теперь можно перевести ИТ на более инновационные и стратегические роли.</p></li>
<li><p><strong>Экономичность</strong>: облачные вычисления снижают стоимость ИТ-обеспечения, а также повышают степень загрузки и эффективность использования центра обработки данных. Стоимость обеспечения снижается, поскольку при облачных вычислениях приложения и ресурсы выводятся из обслуживания и появляются новые точные способы оценки их эффективности. Эффективность использования оборудования также растет, так как ресурсы инфраструктуры (хранилище, вычислительные мощности и сетевые ресурсы) теперь помещены в пул и абстрагированы.</p></li>
</ul>

<h2>Модели предоставления услуг для облачных служб</h2>

Говоря простым языком, облачные вычисления являются абстракцией ИТ-услуг. Эти службы могут варьироваться от базовой инфраструктуры до полноценных приложений. Конечные пользователи запрашивают и используют абстрактные услуги без необходимости управлять их составляющими (или даже досконально разбираться в них). Сегодня в отрасли признаны три модели предоставления облачных служб, каждая из которых предлагает уникальный компромисс между возможностями управления, гибкостью и общей стоимостью:

<ul>
<li><p><strong>Инфраструктура как услуга</strong> (IaaS): виртуальная инфраструктура, в которой размещены виртуальные машины и большая часть существующих приложений.</p></li>
<li><p><strong>Платформа как услуга</strong> (PaaS): облачная инфраструктура приложений, которая обеспечивает среду размещения приложений по требованию.</p></li>
<li><p><strong>Программное обеспечение как услуга</strong> (SaaS): модель облачных служб, в которой приложение предоставляется через Интернет и клиенты оплачивают его на основе объема использования (например, Microsoft Office 365 или Microsoft CRM Online).</p></li>
</ul>

На рисунке 1 показана таксономия облачных служб и их соответствие компонентам в ИТ-инфраструктуре. Если применяется модель локального размещения, клиент отвечает за управление всем комплексом компонентов среды - от подключения к сети до приложений. При использовании модели IaaS нижние уровни комплекса компонентов передаются в ведение поставщика, в то время как клиент отвечает за управление на уровнях от операционной системы до приложений. Модель PaaS предполагает, что поставщик предоставляет все компоненты - от подключения к сети до среды выполнения - и отвечает за управление ими. В зоне ответственности клиента остаются только управление приложениями и данными. (Azure подходит для такой модели лучше всего.) Наконец, при модели SaaS поставщик предоставляет приложения и абстрагирует все услуги от базовых компонентов.

<p class="caption">Рис. 1. Таксономия облачных служб</p>

![azure-sharepoint-wp-1](./media/virtual-machines-deploy-sharepoint-2010/azure-sharepoint-wp-1.png)

<h2>Виртуальные машины Azure</h2>

Виртуальные машины Azure обладают функциональными возможностями, которые обеспечивают полный доступ к виртуальным машинам и управление ими, а также расширенные возможности виртуальных сетей. Данное предложение способно предоставить организации надежные преимущества, например следующие:

<ul>
<li><p><strong>Управление</strong>: централизованное управление виртуальными машинами в облаке с полным доступом для настройки и обслуживания инфраструктуры.</p></li>
<li><p><strong>Мобильные приложения</strong>: перемещение виртуальных жестких дисков (VHD) между локальным расположением и облачной средой. Нет необходимости повторно собирать приложения для работы в облаке.</p></li>
<li><p><strong>Доступ к приложениям сервера Microsoft</strong>: запуск в облаке приложений и инфраструктуры из локального размещения, включая Microsoft SQL Server, SharePoint Server, Windows Server и Active Directory.</p></li>
</ul>

Виртуальные машины Azure представляют собой простую, открытую, гибкую и мощную платформу, которая позволяет организациям развертывать и запускать виртуальные машины Windows Server и Linux за считанные минуты:

<ul>
<li><p><strong>Простота</strong>: виртуальные машины Azure делают простым и удобным создание, перенос, развертывание и управление виртуальными машинами в облаке. Организации могут перенести рабочие нагрузки в Azure без необходимости изменять существующий код или создать новые виртуальные машины в Azure при помощи нескольких щелчков мыши. Предложение также предоставляет помощь при разработке новых облачных приложений путем интеграции функциональных возможностей Azure, относящихся к IaaS и PaaS.</p></li>

<li><p><strong>Открытость и гибкость</strong>: Azure - это открытая платформа, которая предоставляет организациям требуемую им гибкость. Их можно запустить из готовых изображений в библиотеке образов, а также создать и использовать настраиваемые и локальные VHD-диски с загрузкой их в библиотеку образов. Также доступны бесплатная и коммерческая версии Linux.</p></li>

<li><p><strong>Мощь</strong>: Azure представляет собой облачную платформу корпоративного класса для запуска в облаке таких приложений, как SQL Server, SharePoint Server и Active Directory. Организации имеют возможность создавать гибридные решения из локальных и облачных решений с VPN-подключениями между центром обработки данных Azure и своими сетями.</p></li>
</ul>

<h2>SharePoint на виртуальных машинах Azure</h2>

Гибкость SharePoint 2010 позволяет поддерживать большинство рабочих нагрузок в развертывании виртуальных машин Azure. Виртуальные машины Azure оптимально подходят для сценариев FIS (SharePoint Server для интернет-сайтов) и разработки. Аналогичным образом поддерживаются основные рабочие нагрузки SharePoint. Если организация хочет самостоятельно управлять своей реализацией SharePoint 2010 и контролировать ее, одновременно пользуясь преимуществами виртуализации в облаке, виртуальные машины Azure оптимально подходят для такого развертывания.

Виртуальные машины Azure размещаются и управляются в облаке. Они обеспечивают гибкость развертывания и сокращают затраты путем снижения капитальных расходов, связанных с закупкой оборудования. Благодаря повышенной гибкости инфраструктуры организации получили возможность развернуть сервер SharePoint Server за считанные часы вместо нескольких дней или недель. Виртуальные машины Azure также позволяют организациям развертывать рабочие нагрузки SharePoint в облаке, используя модель "оплата по мере использования". По мере роста рабочей нагрузки SharePoint организация может быстро расширить инфраструктуру; если же потребности в вычислительных мощностях уменьшатся, она сможет вернуть ставшие ненужными ресурсы и платить только за то, что действительно необходимо.

<h3>Сдвиг в фокусе ИТ</h3>

Многие организации передают на стороннее обслуживание общие компоненты ИТ-инфраструктуры и управления, такие как оборудование, операционные системы, безопасность, хранилище данных и резервное копирование, сохраняя за собой контроль над критически важными приложениями, например SharePoint Server. Делегируя виртуальному поставщику все слои обслуживания своих ИТ-платформ, которые не являются критически важными для деятельности, организации получают возможность сместить фокус ИТ-функции на основные важнейшие службы SharePoint и заняться созданием дополнительной ценности для бизнеса при помощи проектов SharePoint вместо длительной дополнительной настройки инфраструктуры.

<h3>Более быстрое развертывание</h3>

Поддержка и развертывание большой инфраструктуры SharePoint способна снизить возможности ИТ быстро реагировать на изменение потребностей бизнеса. Сборка, тестирование и подготовка ферм и серверов SharePoint, а также их развертывание в рабочей среде могут занять недели и даже месяцы, в зависимости от процессов и ограничений организации. Виртуальные машины Azure позволяют организациям быстро развертывать свои рабочие нагрузки SharePoint без капитальных затрат на оборудование. Благодаря этому организации могут с выгодой использовать гибкость инфраструктуры для выполнения развертывания за несколько часов вместо дней или недель.

<h3>Масштабируемость</h3>

Без необходимости развертывать, тестировать и подготавливать физические серверы и фермы SharePoint организации могут привлекать вычислительные мощности по требованию в кратчайшие сроки. По мере роста требований рабочей нагрузки SharePoint организация может быстро развернуть свою инфраструктуру в облаке. Аналогичным образом, при снижении потребностей в вычислительных мощностях организации могут уменьшить ресурсы, оплачивая только используемые. Виртуальные машины Azure позволяют сократить первоначальные затраты и долгосрочные обязательства, что дает организациям возможность создавать инфраструктуру SharePoint в требуемом масштабе и управлять ей. Снова повторим - это означает, что такие организации могут внедрять новые возможности, экспериментировать и завершать этапы за считанные часы вместо дней и недель в традиционных развертываниях.

<h3>Измерение эффективности использования</h3>

Виртуальные машины Azure обеспечивают вычислительные мощности, память и хранилище для сценариев SharePoint, при этом стоимость обычно основана на потреблении ресурсов. Организации платят только за то, что используются, услуга предоставляет все мощности, необходимые для выполнения инфраструктуры SharePoint. Дополнительную информацию о ценах и выставлении счетов см. в разделе <a href="/ru-ru/pricing/details/">Сведения о ценах Azure</a>. Обратите внимание, что есть номинальные расходы на хранение и перемещение данных в облако Azure из локальной сети. Тем не менее, в Azure не взимается плата за передачу данных.

<h3>Гибкость</h3>

Виртуальные машины Azure предоставляют разработчикам возможность выбрать предпочитаемый язык и среду выполнения благодаря официальной поддержке .NET, Node.js, Java и PHP. Разработчики также могут выбрать свои средства с поддержкой Microsoft Visual Studio, WebMatrix, Eclipse и текстовых редакторов. Кроме того, корпорация Майкрософт предоставляет недорогой, с низким уровнем риска способ перехода в облако, а также экономичные и удобные способы подготовки и развертывания средств отчетности в облаке, предоставляя доступ к бизнес-аналитике (BI) на различных устройствах и в разных местоположениях. Наконец, при помощи Azure пользователи могут не только переместить виртуальные жесткие диски в облако, но и скопировать такие диски обратно и запустить их локально либо у другого поставщика облачных служб при наличии соответствующей лицензии.

<h2>Процесс подготовки</h2>

В этом подразделе обсуждаются основные возможности Azure. Доступная в Azure <strong>библиотека образов</strong> предоставляет список доступных предварительно настроенных виртуальных машин. Пользователи могут публиковать в этой библиотеке образов SharePoint Server, SQL Server, Windows Server и другие ISO-образы либо виртуальные жесткие диски. Для упрощения создания виртуальных машин в библиотеке опубликованы базовые образы. Имеющие нужные полномочия пользователи могут использовать эти образы для создания нужной виртуальной машины. Дополнительную информацию см. в разделе <a href="/ru-ru/manage/windows/tutorials/virtual-machine-from-gallery/">Создание виртуальной машины под управлением ОС Windows Server 2008 R2</a> на сайте Azure. На рисунке 2 показаны основные шаги для создания виртуальной машины с помощью портала управления Azure:

<p class="caption">Рис. 2. Обзор шагов для создания виртуальной машины</p>
![azure-sharepoint-wp-2](./media/virtual-machines-deploy-sharepoint-2010/azure-sharepoint-wp-2.png)

Кроме того, пользователи могут передать образ "sysprepped" на портал управления Azure. Дополнительную информацию см. в разделе <a href="/ru-ru/manage/windows/common-tasks/upload-a-vhd/">Создание и загрузка виртуального жесткого диска</a>. На рисунке 3 показаны основные шаги выгрузки образа для создания виртуальной машины:

<p class="caption">Рис. 3. Обзор шагов для передачи образа</p>
![azure-sharepoint-wp-3](./media/virtual-machines-deploy-sharepoint-2010/azure-sharepoint-wp-3.png)

<h3>Развертывание SharePoint 2010 в Azure</h3>

Вот как вы можете развернуть SharePoint 2010 в Azure:

<ol>
<li>Log on to the <a href="http://manage.windowsazure.com/">портал управления Azure</a> через свою учетную запись подписки Azure.
<ul>

<li>Если у вас нет учетной записи Azure, <a href="http://www.windowsazure.com/ru-ru/pricing/free-trial/">подпишитесь на бесплатную пробную версию Azure</a>.</li>
</ul>
</li>

<li>Чтобы создать виртуальную машину с базовой операционной системой, на портале управления Azure щелкните <strong>СОЗДАТЬ</strong>, затем щелкните <strong>СРЕДА ВЫПОЛНЕНИЯ ПРИЛОЖЕНИЙ</strong>, затем щелкните <strong>ВИРТУАЛЬНАЯ МАШИНА</strong>, а затем выберите <strong>ИЗ КОЛЛЕКЦИИ</strong>.</li>

<li>Появится диалоговое окно <strong>Выбор образа</strong> . Щелкните образ платформы <strong>Windows Server 2008 R2 с пакетом обновления 1</strong> , затем щелкните стрелку вправо.</li>

<li>Появится диалоговое окно <strong><em>Конфигурация виртуальной машины </em></strong>. Введите следующие сведения:

<ul>
<li>Введите <strong>ИМЯ ВИРТУАЛЬНОЙ МАШИНЫ</strong>.
</li>
<li>Выберите подходящее значение в поле <strong>РАЗМЕР</strong>.
<ul>
<li>Для рабочей среды (сервер приложений SharePoint и база данных) мы рекомендуем выбрать размер A3 <em>(4 ядра, 7 ГБ памяти)</em>.</li>
</ul>
</li>
<li>В поле <strong>НОВОЕ ИМЯ ПОЛЬЗОВАТЕЛЯ</strong>введите имя учетной записи локального администратора.</li>
<li>В поле <strong>НОВЫЙ ПАРОЛЬ</strong> введите надежный пароль.</li>
<li>В поле <strong>ПОДТВЕРЖДЕНИЕ</strong> введите пароль еще раз и нажмите стрелку вправо.</li>
</ul>
<li>Появится второе окно <strong>Конфигурация виртуальной машины</strong> . Введите следующие сведения:
<ul>
<li>В поле <strong>ОБЛАЧНАЯ СЛУЖБА</strong> выберите один из следующих параметров:
<ul>
<li><strong>Создать новую облачную службу.</strong>В этом случае необходимо также указать DNS-имя облачной службы.</li>
<li>Выберите существующую облачную службу.</li>
</ul>
<li>В поле <strong>РЕГИОН/ТЕРРИТОРИАЛЬНАЯ ГРУППА/ВИРТУАЛЬНАЯ СЕТЬ </strong>выберите регион, где будет размещаться этот виртуальный образ.</li>
<li>В поле <strong>УЧЕТНАЯ ЗАПИСЬ ХРАНЕНИЯ </strong>выберите один из следующих параметров:
<ul>
<li><strong>Использовать автоматически созданную учетную запись хранения</strong>.</li>
<li>Выберите существующее имя учетной записи хранения.</li>
<ul>
<li>Автоматически будет создана только одна учетная запись хранения для одного региона. Все остальные виртуальные машины, созданные с этим параметром, расположены под этой учетной записью хранения.</li>
<li>Вы можете иметь не более 20 учетных записей хранения.</li>
<li>Дополнительную информацию см. в разделе <a href="/ru-ru/manage/windows/common-tasks/upload-a-vhd/#createstorage">Создание учетной записи хранения в Azure</a>.</li>
</ul>
</li>
<li>В поле <strong>ГРУППА ДОСТУПНОСТИ</strong> выберите <STRONG>(нет)</STRONG>, затем щелкните стрелку вправо.</li>
</ul>
</li>
</ul>
</li>
<li>В третьем диалоговом окне <strong>Конфигурация виртуальной машины </strong>установите флажок, чтобы создать виртуальную машину.</li>


<li>Подключение к виртуальной машине.
<ul>
<li>Откройте виртуальную машину с помощью удаленного рабочего стола.</li>
<li>На портале управления Azure выберите свою виртуальную машину, а затем выберите страницу <strong>ПАНЕЛЬ МОНИТОРИНГА</strong> .</li>
<li>Щелкните <strong>Подключение</strong>.</li>
</ul>
</li>
<li>Создайте виртуальную машину сервера SQL Server с помощью любого из следующих параметров:
<ul>
<li>Создайте виртуальную машину под управлением SQL Server 2012, выполнив описанные выше шаги с 1 по 7, кроме <strong>шага 3</strong>; вместо образа Windows Server 2008 R2 с пакетом обновления 1 воспользуйтесь образом SQL Server 2012. Дополнительную информацию см. в разделе <a href="/ru-ru/manage/windows/common-tasks/install-sql-server/">Подготовка виртуальной машины SQL Server в Azure</a>.
<ul>
<li>При выборе этого параметра процесс подготовки хранит копию файлов настройки SQL Server 2012 в каталоге <em>C:\SQLServer_11.0_Full</em> что позволяет настроить установку. Например, можно преобразовать пробную установку SQL Server 2012 в лицензированную версию с использованием лицензионного ключа.</li>
</ul>
</li>
<li>Чтобы установить SQL Server на виртуальной машине с базовой операционной системой, воспользуйтесь средством подготовки системы для SQL Server (SysPrep), как показано выше в шагах 1-7. Дополнительную информацию см. в разделе <a href="http://msdn.microsoft.com/ru-ru/library/ee210664.aspx">Установите SQL Server 2012 с помощью SysPrep</a>.</li>
<li>Установите SQL Server с помощью командной строки. Дополнительную информацию см. в разделе <a href="http://msdn.microsoft.com/ru-ru/library/ms144259.aspx#SysPrep">Установите SQL Server 2012 с помощью командной строки</a>.</li>
<li>Чтобы установить SQL Server на виртуальной машине с базовой операционной системой, воспользуйтесь поддерживаемым носителем SQL Server и лицензионным ключом, как показано выше в шагах 1-7.</li>
</ul>
</li>
<li>Создайте ферму SharePoint, выполнив следующие дополнительные действия:
<ul>
<li>Дополнительное действие 1: настройка подписки Azure с помощью файлов сценариев.</li>
<li>Дополнительное действие 2: подготовка серверов SharePoint путем создания другой виртуальной машины с базовой операционной системой (как показано выше в действиях 1-7). Чтобы создать сервер SharePoint на этой виртуальной машине, выберите один из следующих параметров:
<ul>
<li>Подготовка с помощью графического интерфейса пользователя SharePoint:
<ul>
<li>Чтобы создать и подготовить ферму SharePoint, перейдите к разделу <a href="http://technet.microsoft.com/ru-ru/library/ee805948.aspx#CreateConfigure">Создание фермы Microsoft SharePoint Server</a>.</li>
<li>Чтобы добавить веб-сервер или сервер приложений в ферму, перейдите к разделу <a href="http://technet.microsoft.com/ru-ru/library/cc261752.aspx">Добавление веб-серверов или серверов приложений в фермы (SharePoint Server 2010)</a>.</li>
<li>
<p>Чтобы добавить сервер базы данных в существующую ферму, перейдите к разделу <a href="http://technet.microsoft.com/ru-ru/library/cc262781">Добавление сервера базы данных в существующую ферму</a>.</p>
<ul>
<li>Чтобы использовать SQL Server 2012 для своей фермы SharePoint, необходимо скачать и установить пакет обновления 1 для SharePoint Server 2010 после установки приложения и отказа от настройки сервера. Дополнительную информацию см. в разделе <a href="http://www.microsoft.com/ru-ru/download/details.aspx?id=26623">Пакет обновления 1 для SharePoint Server 2010</a>.</li>
<li>Чтобы воспользоваться преимуществами функций бизнес-аналитики SQL Server, рекомендуем вам установить сервер SharePoint как ферму серверов, а не отдельный сервер. Дополнительную информацию см. в разделе <a href="http://technet.microsoft.com/ru-ru/library/hh231681(v=sql.110).aspx">Установка компонентов бизнес-аналитики SQL Server 2012</a>.</li>
</ul>
</li>
</ul>
</li>
<li>Подготовка с помощью Microsoft Windows PowerShell: вы можете использовать программу командной строки Psconfig как альтернативный интерфейс для выполнения нескольких операций, которые управляют ходом подготовки продуктов SharePoint 2010. Дополнительную информацию см. в разделе <a href="http://technet.microsoft.com/ru-ru/library/cc263093.aspx">Psconfig Command-line Reference</a>(Справочник по командной строке Psconfig).</li>
</ul>
</li>
<li>Дополнительное действие 3: настройка SharePoint. Когда все виртуальные машины SharePoint находятся в состоянии готовности, настройте SharePoint Server на каждом из серверов, воспользовавшись одним из следующих вариантов:
<ul>
<li>Настройка SharePoint из графического интерфейса пользователя.</li>
<li>Настройка SharePoint с помощью Windows PowerShell. Дополнительную информацию см. в разделе <a href="http://technet.microsoft.com/ru-ru/library/cc262839.aspx">Установка SharePoint Server 2010 с помощью Windows PowerShell</a>.
<ul>
<li>Также вы можете использовать инструмент AutoSPInstaller из CodePlex Project, состоящий из сценариев Windows PowerShell, входного XML-файла и стандартного пакетного файла Microsoft Windows. AutoSPInstaller предоставляет платформу для скрипта установки SharePoint 2010 на основе Windows PowerShell. Дополнительную информацию см. в разделе <a href="http://autospinstaller.codeplex.com/">CodePlex: AutoSPInstaller</a>.

<strong>Примечание</strong>. Убедитесь, что в конечной точке портала управления настроена безопасность, а также задан входящий порт в брандмауэре Windows виртуальной машины. Затем убедитесь, что можно начать удаленный сеанс Windows PowerShell на одном из серверов приложений SharePoint. Для этого откройте сеанс Windows PowerShell с учетными данными администратора.
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>После завершения выполнения скрипта подключитесь к виртуальной машине с помощью панели мониторинга виртуальной машины.</li>
<li>Проверьте конфигурацию SharePoint: войдите на сервер SharePoint, а затем перейдите в центр администрирования, чтобы проверить конфигурацию.</li>
</ol>

<h3>Создание и загрузка виртуального жесткого диска</h3>

Вы также можете создать свои собственные образы и передать их в Azure как VHD-файл. Вот как можно создать и передать VHD-файл в Azure:

<ol>
<li>Create the Hyper-V-enabled image: Use Hyper-V Manager to create the Hyper-V-enabled VHD. For more information, go to <a href="http://technet.microsoft.com/ru-ru/library/cc742509">Создание виртуальных жестких дисков</a>.</li>
<li>Создайте учетную запись хранения в Azure: учетная запись хранения в Azure требуется для передачи VHD-файла, который может использоваться для создания виртуальной машины. Эту учетную запись можно создать с использованием портала управления Azure. Дополнительную информацию см. в разделе <a href="/ru-ru/manage/windows/common-tasks/upload-a-vhd/">Создание учетной записи хранения в Azure</a>.</li>
<li>Подготовьте образ для передачи: перед передачей образа в Azure его необходимо обобщить с помощью команды Sysprep. Дополнительную информацию см. в разделе <a href="http://technet.microsoft.com/ru-ru/library/bb457073.aspx">How to Use Sysprep: An Introduction (Как использовать Sysprep: введение)</a>.</li>
<li>Передайте образ в Azure: чтобы передать образ из файла виртуального жесткого диска, вам необходимо создать и установить сертификат управления. Получите отпечаток сертификата и идентификатор подписки. Установите подключение и загрузите данный VHD-файл с помощью средства командной строки CSUpload. Дополнительную информацию см. в разделе <a href="/ru-ru/manage/windows/common-tasks/upload-a-vhd/">Передача образа в Azure</a>.</li>
</ol>

<h2>Сценарии использования</h2>

В этом разделе рассматриваются некоторые наиболее распространенные сценарии работы пользователей с развертываниями SharePoint с использованием виртуальных машин Azure. Каждый сценарий состоит из двух частей: краткого описания сценария и списка действий для начала работы.

<h3>Сценарий 1. Простая среда разработки и тестирования SharePoint</h3>

<h4>Описание</h4>

Организации находятся в поиске более гибких способов создания приложений SharePoint и настройки сред SharePoint для разработки и тестирования в локальном или удаленном режиме. По существу, они хотят сократить время, необходимое для настройки проектов разработки приложений SharePoint, а также снизить затраты путем повышения эффективности своих тестовых сред. Например, организации может потребоваться выполнить нагрузочное тестирование по требованию на сервере SharePoint Server, а также пользовательское приемочное тестирование (UAT) на большем количестве одновременно работающих пользователей в разных географических точках. Аналогичным образом, интеграция собственных и внешних команд становится все более насущной потребностью во многих современных организациях.

Данный сценарий поясняет, как организации могут использовать заранее настроенные фермы SharePoint для разработки и тестирования нагрузки. Топология развертывания SharePoint выглядит и работает точно так же, как в виртуализованном локальном развертывании. Существующие ИТ-навыки полностью подходят для развертывания виртуальных машин Azure. Основное преимущество заключается в том, что затраты практически полностью преобразуются из капитальных в операционные: заблаговременное приобретение физических серверов не требуется. Организации могут избежать капитальных затрат для серверного оборудования и обрести гибкость благодаря существенному сокращению времени подготовки, требуемой для создания, настройки или расширения фермы SharePoint для среды тестирования и разработки. ИТ-отдел может динамически добавлять и удалять мощности для поддержки изменяющихся потребностей в тестировании и разработке. В дополнение к этому ИТ-отдел может сосредоточиться на обеспечении эффективности бизнеса с проектами SharePoint вместо затрат ресурсов на управление инфраструктурой.

Для полного использования машин нагрузочного тестирования организации могут настроить виртуализованные машины тестирования и разработки SharePoint в Azure с поддержкой операционной системы Windows Server 2008 R2. Это позволяет группам разработчиков создавать и тестировать приложения, а также с легкостью переключаться между рабочими средами на предприятии и в облаке без изменения кода. Платформы и наборы инструментов можно использовать как локально, так и в облаке, что обеспечивает доступ распределенной команды к единой среде. Пользователи также могут обращаться к локальным данным и приложениям путем установки прямого VPN-подключения.

<h4>Приступая к работе</h4>

На рисунке 4 показана среда разработки и тестирования SharePoint на виртуальной машине Azure. Для построения этого развертывания можно начать с локальной среды развертывания и тестирования SharePoint, которое использовалось для разработки приложений. Затем передайте и разверните приложения на виртуальной машине Azure для тестирования и разработки. Если организация решит переместить приложение обратно в локальное расположение, она сможет сделать это без изменения приложения.

<p class="caption">Рис. 4. Среда разработки и тестирования SharePoint на виртуальных машинах Azure</p>

![azure-sharepoint-wp-11](./media/virtual-machines-deploy-sharepoint-2010/azure-sharepoint-wp-11.png)

<h4>Настройка среды сценариев</h4>

Вот как можно реализовать среду разработки и тестирования SharePoint в Azure:

<ol>
<li><em>Provision</em>: First, provision a VPN connection between on-premises and Azure using Azure Virtual Network. (Because Active Directory is not being used here, a VPN tunnel is needed.) For more information, go to <a href="http://msdn.microsoft.com/ru-ru/library/windowsazure/jj156007.aspx">Виртуальная сеть Microsoft Azure (принципы проектирования и сценарии безопасного подключения)</a>. Затем с помощью портала управления требуется подготовить новую виртуальную машину с использованием готового образа из библиотеки образов.
<ul>
<li>Для создания нужной среды вы можете передать виртуальные машины разработки и тестирования SharePoint в свою учетную запись хранения Azure и указать эти виртуальные машины через библиотеку образов.</li>
<li>Вместо образа Windows Server 2008 R2 с пакетом обновления 1 можно воспользоваться образом SQL Server 2012. Дополнительную информацию см. в разделе <a href="/ru-ru/manage/windows/common-tasks/install-sql-server/">Подготовка виртуальной машины SQL Server в Azure</a>.</li>
</ul>
</li>
<li><em>Установка</em>. С помощью подключения к удаленному рабочему столу установите на виртуальных машинах SharePoint Server, Visual Studio и SQL Server.
<ul>
<li>Выберите вариант установки сервера SharePoint Server:
<ul>
<li>для создания компьютера разработчика SharePoint воспользуйтесь сценарием простой настройки SharePoint 2010. Дополнительную информацию см. в разделе <a href="http://www.microsoft.com/ru-ru/download/details.aspx?id=23415">SharePoint 2010 Easy Setup Script (Cценарий простой настройки SharePoint 2010)</a>.</li>
<li>Воспользуйтесь Windows PowerShell. Дополнительную информацию см. в разделе <a href="http://technet.microsoft.com/ru-ru/library/cc262839.aspx">Установка SharePoint Server 2010 с помощью Windows PowerShell</a>.</li>
<li>Воспользуйтесь инструментом AutoSPInstaller из CodePlex Project. Дополнительную информацию см. в разделе <a href="http://autospinstaller.codeplex.com/">CodePlex: AutoSPInstaller</a>.</li>
</ul>
</li>
<li>Установите Visual Studio. Дополнительную информацию см. в разделе <a href="http://msdn.microsoft.com/ru-ru/library/e2h7fzkw.aspx">Установка Visual Studio</a>.</li>
<li>Установите SQL Server. Дополнительную информацию см. в разделе <a href="http://msdn.microsoft.com/ru-ru/library/ee210664.aspx">Установка SQL Server с помощью SysPrep</a>.
<ul>
<li>Информацию о развертывании фермы SharePoint см. в практической работе по созданию и настройке SQL Server 2012: <a href="https://github.com/WindowsAzure-TrainingKit/HOL-DeployingSQLServerForSharePoint">Настройка SQL Server 2012 для SharePoint в Azure</a>.</li>
<li>Информацию о создании фермы SharePoint путем настройки службы каталогов Active Directory с использованием одной базы данных SQL Server см. в практической работе: <a href="https://github.com/WindowsAzure-TrainingKit/HOL-DeploySharePointVMs">Развертывание фермы SharePoint на виртуальных машинах Azure</a>.</li>
</ul>
</li>
</ul>
</li>
<li><em>Разработка пакетов развертывания и сценариев для приложений и баз данных</em>: Если планируется использовать доступные виртуальные машины из библиотеки образов, требуемые локальные приложения и базы данных можно развернуть на виртуальных машинах Azure:
<ul>
<li>Создайте пакеты развертывания для существующих локальных приложений и баз данных с помощью средств работы с данными SQL Server и Visual Studio.</li>
<li>С использованием этих пакетов разверните приложения и базы данных на виртуальных машинах Azure.</li>
</ul>
</li>
<li><em>Развертывание приложений SharePoint и баз данных</em>:
<ul>
<li>Настройте систему безопасности в конечной точке портала управления и установите порт входящего трафика в брандмауэре Windows виртуальной машины.</li>
<li>Разверните приложения и базы данных SharePoint на виртуальных машинах Azure с использованием пакетов и сценариев развертывания, созданных в действии 3.</li>
<li>Протестируйте развернутые приложения и базы данных.</li>
</ul>
</li>
<li><em>Управление виртуальными машинами</em>:
<ul>
<li>Отслеживайте виртуальные машины с помощью портала управления.</li>
<li>Ведите мониторинг приложений с использованием Visual Studio и студии управления SQL Server.</li>
<li>Мониторинг виртуальных машин и управление ими можно также вести с использованием локального программного обеспечения для управления, например с помощью Microsoft System Center - Operations Manager.</li>
</ul>
</li>
</ol>
<h3>Сценарий 2. Общедоступная ферма SharePoint с пользовательской настройкой</h3>

<h4>Описание</h4>

Организациям требуется обеспечить присутствие в Интернете с использованием средств, которые размещаются в облаке и легко масштабируются с учетом потребностей и спроса. Им также нужны партнерские веб-сайты внешней сети для совместной работы наряду с удобным процессом распределенного создания и утверждения контента веб-сайта. Наконец, для обработки растущих нагрузок эти организации хотят подключать для своих веб-сайтов дополнительные мощности при возникновении такой потребности.

В этом сценарии сервер SharePoint Server используется как основа для размещения общедоступного веб-сайта. Это позволяет организациям быстро развертывать, настраивать и размещать свои корпоративные веб-сайты в безопасной и масштабируемой облачной инфраструктуре. Благодаря общедоступным веб-сайтам SharePoint в Azure организации могут масштабировать ресурсы по мере роста трафика и платить только за то, что они используют. Для создания содержимого, управления рабочими процессами и утверждения в SharePoint в Azure могут использоваться средства, аналогичные локальным.

Более того, с помощью виртуальных машин Azure организации могут с легкостью настраивать тестовые и рабочие среды на виртуальных машинах. Общедоступные виртуальные машины SharePoint, созданные в Azure, могут архивироваться в виртуальном хранилище. Кроме того, функция непрерывной георепликации позволяет организациям автоматически создавать резервные копии виртуальных машин, работающих в одном центре обработки данных, в другом ЦОД на большом расстоянии от первого, что обеспечивает аварийное восстановление. (Дополнительную информацию о георепликации см. в разделе <a href="http://blogs.msdn.com/b/windowsazurestorage/archive/2011/09/15/introducing-geo-replication-for-windows-azure-storage.aspx">Introducing Geo-replication for Azure Storage (Введение в георепликацию для службы хранилища Azure)</a>).

Виртуальные машины в инфраструктуре Azure тестируются и поддерживаются для работы с другими продуктами Microsoft, такими как SQL Server и SharePoint Server. Azure и SharePoint Server созданы друг для друга: оба являются частью семейства Microsoft, полностью интегрированы, поддерживаются и протестированы вместе, что позволяет предоставить оптимально эффективную работу. Оба этих продукта имеют одну точку поддержки приложения SharePoint и используют единую инфраструктуру Azure.

<h4>Приступая к работе</h4>

В этом сценарии требуется добавить для сервера SharePoint Server дополнительные интерфейсные веб-серверы, чтобы обеспечить обработку дополнительного трафика. Эти серверы требуют усиленной безопасности и наличия контроллеров домена доменных служб Active Directory для поддержки проверки подлинности и авторизации пользователей. На рисунке 5 показана схема для этого сценария.

<p class="caption">Рис. 5. Общедоступная ферма SharePoint с пользовательской настройкой</p>
![azure-sharepoint-wp-12](./media/virtual-machines-deploy-sharepoint-2010/azure-sharepoint-wp-12.png)

<h4>Настройка среды сценариев</h4>

Чтобы реализовать общедоступную ферму SharePoint в Azure, выполните следующее:

<ol>
<li><em>Deploy Active Directory</em>: The fundamental requirements for deploying Active Directory on Azure Virtual Machines are similar"but not identical"to deploying it on VMs (and, to some extent, physical machines) on-premises. For more information about the differences, as well as guidelines and other considerations, go to <a href="http://msdn.microsoft.com/ru-ru/library/windowsazure/jj156090">Руководства по развертыванию Active Directory на виртуальных машинах Azure</a>. Вот как можно развернуть Active Directory в Azure:
<ul>
<li>Определите и создайте виртуальную сеть, в которой виртуальные машины могут быть назначены конкретным подсетям. Дополнительную информацию см. в разделе <a href="https://github.com/WindowsAzure-TrainingKit/HOL-DeployingActiveDirectory/blob/master/HOL.md">Настройка виртуальной сети</a>.</li>
<li>Для создания и развертывания контроллера домена на новых виртуальных машинах в Azure воспользуйтесь порталом управления. Дополнительную информацию см. в разделе <a href="https://github.com/WindowsAzure-TrainingKit/HOL-DeployingActiveDirectory/blob/master/HOL.md">Развертывание и создание контроллера домена</a>.
<ul>
<li>Вы также можете указать сценарий Windows PowerShell для развертывания отдельного домена в облаке с помощью виртуальных машин Azure и виртуальной сети. Дополнительную информацию см. в разделе <a href="https://github.com/WindowsAzure-TrainingKit/HOL-DeployingActiveDirectoryPS">Развертывание Active Directory в Azure (Windows PowerShell)</a>.</li>
<li>Дополнительную информацию о создании нового леса Active Directory на виртуальной машине в виртуальной сети Azure см. в разделе <a href="/ru-ru/manage/services/networking/active-directory-forest/">Установка нового леса Active Directory в Microsoft Azure</a>.</li>
</ul>
</li>
</ul>
</li>
<li><em>Подготовка виртуальной машины</em>: На портале управления подготовьте новую виртуальную машину с использованием готового образа из библиотеки образов.</li>
<li><em>Развертывание фермы SharePoint</em>:
<ul>
<li>С помощью новой виртуальной машины установите SharePoint и создайте образ для повторного использования. Дополнительную информацию об установке SharePoint Server см. в разделе <a href="http://technet.microsoft.com/ru-ru/library/cc262839.aspx">Установка и настройка SharePoint Server 2010 с помощью Windows PowerShell</a> или <a href="http://autospinstaller.codeplex.com/">CodePlex: AutoSPInstaller</a>.</li>
<li>Настройте виртуальную машину SharePoint для создания фермы SharePoint и подключения к ней.</li>
<li>Настройте балансировку нагрузки на портале управления.
<ul>
<li>Настройте конечные точки виртуальной машины, выберите вариант балансировки нагрузочного трафика в существующей конечной точке, а затем укажите имя виртуальной машины с балансировкой нагрузки.</li>
<li>Добавьте еще одну виртуальную машину веб-интерфейса в существующую ферму SharePoint для дополнительного трафика.</li>
</ul>
</li>
</ul>
</li>
<li><em>Управление виртуальными машинами</em>:
<ul>
<li>Отслеживайте виртуальные машины с помощью портала управления.</li>
<li>Ведите мониторинг фермы SharePoint с помощью центра администрирования.</li>
</ul>
</li>
</ol>

<h3>Сценарий 3. Горизонтально масштабируемая ферма для дополнительных служб бизнес-аналитики</h3>

<h4>Описание</h4>

Бизнес-аналитика является необходимым условием для формирования аналитических данных, а также принятия оперативных и при этом обоснованных решений. Отказываясь от использования локальных систем, организации не хотят вносить изменения в среде бизнес-аналитики в ходе развертывания существующих приложений бизнес-аналитики в облаке. Им нужно размещение отчетов из служб SQL Server Analysis Services (SSAS) или служб SQL Server Reporting Services (SSRS) в среде, отличающейся высокой надежностью и доступностью, при этом сохраняя полный контроль над приложением бизнес-аналитики без затрат большого объема времени и денежных средств на его обслуживание.

Этот сценарий описывает, как организации могут использовать виртуальные машины Azure для размещения критически важных для деятельности приложений бизнес-аналитики. Организациям доступно развертывание ферм SharePoint на виртуальных машинах Azure и горизонтальное масштабирование компонентов бизнес-аналитики виртуальной машины сервера приложений, таких как SSRS или службы Excel. Благодаря масштабированию ресурсоемких компонентов в облаке им проще и удобнее обеспечивать обработку специализированных рабочих нагрузок. Обратите внимание, что сервер SQL Server на виртуальных машинах в Azure отличается высокой эффективностью, поскольку экземпляры SQL Server легко поддаются масштабированию в любом диапазоне. Это обеспечивает гибкость среды, предоставляя организациям возможность динамически подготавливать (добавлять) или отключать (убирать) экземпляры бизнес-аналитики в соответствии с сиюминутными потребностями, обусловленными рабочей нагрузкой.

Перенос существующих приложений бизнес-аналитики в Azure обеспечивает более широкие возможности масштабирования. С помощью SharePoint Server, SSAS и SSRS организации могут создавать мощные приложения в области бизнес-аналитики и отчетности, а также панели мониторинга с масштабированием вверх или вниз. Эти приложения и панели мониторинга также поддерживают более безопасную интеграцию с локальными данными и приложениями. Azure обеспечивает соответствие центра обработки данных стандартам ISO 27001. Дополнительную информацию см. в <a href="/ru-ru/support/trust-center/compliance/">Центре управления безопасностью Azure</a>.

<h4>Приступая к работе</h4>

Для масштабирования развертывания компонентов бизнес-аналитики необходимо установить новый сервер приложений с такими службами, как PowerPivot, службы Excel, Power View или службы PerformancePoint. Можно также добавить в существующую ферму экземпляры бизнес-аналитики SQL Server, такие как SSAS или SSRS, для дополнительной поддержки обработки запросов. Сервер добавляется как новая виртуальная машина Azure с SharePoint 2010 Server или SQL Server. Затем на этом сервере можно установить, развернуть и настроить компоненты бизнес-аналитики (рис. 6).

<p class="caption">Рис. 6. Горизонтально масштабируемая ферма SharePoint для дополнительных служб бизнес-аналитики</p>

![azure-sharepoint-wp-13](./media/virtual-machines-deploy-sharepoint-2010/azure-sharepoint-wp-13.png)

<h4>Настройка среды сценариев</h4>

Для горизонтального масштабирования среды бизнес-аналитики в Azure выполните следующее:

<ol>
<li><em>Provision</em>:
<ul>
<li>Provision a VPN connection between on premises and Azure using Azure Virtual Network. For more information, go to <a href="http://msdn.microsoft.com/ru-ru/library/windowsazure/jj156007.aspx">Виртуальная сеть Microsoft Azure (принципы проектирования и сценарии безопасного подключения)</a>.</li>
<li>На портале управления подготовьте новую виртуальную машину с использованием готового образа из библиотеки образов.
<ul>
<li>Можно загрузить в библиотеку образы рабочей нагрузки бизнес-аналитики SharePoint Server или SQL Server, после чего любой пользователь с достаточными полномочиями сможет выбрать эти компоненты бизнес-аналитики на виртуальной машине для создания среды с горизонтальным масштабированием.</li>
</ul>
</li>
</ul>
</li>
<li><em>Установка</em>: Если ваша организация не располагает готовыми образами компонентов бизнес-аналитики SQL Server и SharePoint Server, установите SharePoint Server и SQL Server на виртуальных машинах с использованием подключения к удаленному рабочему столу.
<ul>
<li>Дополнительную информацию об установке SharePoint см. в разделе <a href="http://technet.microsoft.com/ru-ru/library/cc262839.aspx">Установка SharePoint Server 2010 с помощью Windows PowerShell</a> или <a href="http://autospinstaller.codeplex.com/">CodePlex: AutoSPInstaller</a>.</li>
<li>Дополнительную информацию об установке SQL Server см. в разделе <a href="http://msdn.microsoft.com/ru-ru/library/ee210664.aspx">Установка SQL Server с помощью SysPrep</a>.</li>
<li>Информацию о развертывании фермы SharePoint см. в практической работе по созданию и настройке SQL Server 2012: <a href="https://github.com/WindowsAzure-TrainingKit/HOL-DeployingSQLServerForSharePoint">Настройка SQL Server 2012 для SharePoint в Azure</a>.</li>
<li>Информацию о создании фермы SharePoint путем настройки службы каталогов Active Directory с использованием одной базы данных SQL Server см. в практической работе: <a href="https://github.com/WindowsAzure-TrainingKit/HOL-DeploySharePointVMs">Развертывание фермы SharePoint на виртуальных машинах Azure</a>.</li>
</ul>
</li>
<li><em>Добавление виртуальной машины бизнес-аналитики</em>:
<ul>
<li>Настройте систему безопасности в конечной точке портала управления и установите порт входящего трафика в брандмауэре Windows виртуальной машины.</li>
<li>Добавьте созданную виртуальную машину бизнес-аналитики в существующую ферму SharePoint или SQL Server.</li>
</ul>
</li>
<li><em>Управление виртуальными машинами</em>:
<ul>
<li>Отслеживайте виртуальные машины с помощью портала управления.</li>
<li>Ведите мониторинг фермы SharePoint с помощью центра администрирования.</li>
<li>Мониторинг виртуальных машин и управление ими можно также вести с использованием локального программного обеспечения для управления, например с помощью Microsoft System Center - Operations Manager.</li>
</ul>
</li>
</ol>
<h3>Сценарий 4. Полностью настраиваемый веб-сайт на основе SharePoint</h3>

<h4>Описание</h4>

Все больше организаций хотят создать полностью настраиваемые веб-сайты SharePoint в облаке. Им требуется надежная и доступная среда, которая обеспечивает полный контроль над ведением комплексных приложений, выполняемых в облаке, без существенных затрат времени и ресурсов.

В этом сценарии организация может развернуть всю свою ферму SharePoint в облаке и динамически масштабировать все компоненты для получения дополнительных мощностей либо дополнить свое локальное развертывание компонентами в облаке с целью при необходимости получить дополнительные ресурсы и повысить эффективность. Данный сценарий нацелен на организации, желающие получить все возможности среды SharePoint для разработки приложений и управления корпоративным контентом. Более сложные сайты также могут включать расширенные средства отчетности, Power View, PerformancePoint, PowerPivot, подробные диаграммы и большую часть других возможностей узла SharePoint, что обеспечивает комплексную функциональность, охватывающую все аспекты работы.

Организации могут использовать виртуальные машины Azure для размещения настраиваемых приложений и связанных компонентов в экономичной и безопасной облачной инфраструктуре. Они также могут использовать локальный центр Microsoft System Center как общее средство управления приложениями, расположенными локально и в облаке.

<h4>Приступая к работе</h4>

Чтобы реализовать полностью настраиваемый веб-узел SharePoint в Azure, организация должна развернуть в облаке домен Active Directory и подготовить новые виртуальные машины в этом домене. Затем необходимо создать виртуальную машину с SQL Server 2012 и настроить ее как часть фермы SharePoint. Наконец, должна быть создана ферма SharePoint с балансировкой нагрузки и подключением к Active Directory и SQL Server (рис. 7).

<p class="caption">Рис. 7. Полностью настраиваемый веб-сайт на основе SharePoint</p>

![azure-sharepoint-wp-14](./media/virtual-machines-deploy-sharepoint-2010/azure-sharepoint-wp-14.png)

<h4>Настройка среды сценариев</h4>

Ниже показано, как создать настраиваемую среду фермы SharePoint на основе готовых образов, доступных в библиотеке образов. При этом следует обратить внимание, что также можно передать виртуальные машины фермы SharePoint в библиотеку образов, после чего пользователи с достаточными полномочиями смогут при помощи этих образов создать требуемую ферму SharePoint в Azure.

<ol>
<li>Deploy Active Directory<em>: The fundamental requirements for deploying Active Directory on Azure Virtual Machines are similar"but not identical"to deploying it on VMs (and, to some extent, physical machines) on premises. For more information about the differences, as well as guidelines and other considerations, go to <a href="http://msdn.microsoft.com/ru-ru/library/windowsazure/jj156090">Руководства по развертыванию Active Directory на виртуальных машинах Azure</a>. Вот как можно развернуть Active Directory в Azure:</em>
<ul>
<li>Определите и создайте виртуальную сеть, в которой виртуальные машины могут быть назначены конкретным подсетям. Дополнительную информацию см. в разделе <a href="https://github.com/WindowsAzure-TrainingKit/HOL-DeployingActiveDirectory/blob/master/HOL.md">Настройка виртуальной сети</a>.</li>
<li>Для создания и развертывания контроллера домена на новых виртуальных машинах в Azure воспользуйтесь порталом управления. Дополнительную информацию см. в разделе <a href="https://github.com/WindowsAzure-TrainingKit/HOL-DeployingActiveDirectory/blob/master/HOL.md">Развертывание и создание контроллера домена</a>.
<ul>
<li>Вы также можете указать сценарий Windows PowerShell для развертывания отдельного домена в облаке с помощью виртуальных машин Azure и виртуальной сети. Дополнительную информацию см. в разделе <a href="https://github.com/WindowsAzure-TrainingKit/HOL-DeployingActiveDirectoryPS">Развертывание Active Directory в Azure (Windows PowerShell)</a>.</li>
<li>Дополнительную информацию о создании нового леса Active Directory на виртуальной машине в виртуальной сети Azure см. в разделе <a href="/ru-ru/manage/services/networking/active-directory-forest/">Установка нового леса Active Directory в Microsoft Azure</a>.</li>
</ul>
</li>
</ul>
</li>
<li><em>Развертывание SQL Server</em>:
<ul>
<li>На портале управления подготовьте новую виртуальную машину с использованием готового образа из библиотеки образов.</li>
<li>Настройте SQL Server на виртуальной машине. Дополнительную информацию см. в разделе <a href="http://msdn.microsoft.com/ru-ru/library/ee210664.aspx">Установка SQL Server с помощью SysPrep</a>.</li>
<li>Присоедините виртуальную машину к вновь созданному домену Active Directory.</li>
</ul>
</li>
<li><em>Развертывание фермы SharePoint на нескольких серверах</em>:
<ul>
<li>Создайте виртуальную сеть. Дополнительную информацию см. в разделе <a href="http://msdn.microsoft.com/ru-ru/library/windowsazure/jj156007.aspx">Виртуальная сеть Microsoft Azure (принципы проектирования и сценарии безопасного подключения)</a>.
<ul>
<li>При развертывании виртуальных машин SharePoint необходимо предоставить для сервера SharePoint подсети, чтобы обеспечить наличие DNS-адресов в поле локального Active Directory во время подготовки.</li>
</ul>
</li>
<li>Создание виртуальной машины на портале управления.</li>
<li>Установите на этой виртуальной машине сервер SharePoint Server и создайте образ для многократного использования. Дополнительную информацию об установке SharePoint Server см. в разделе <a href="http://technet.microsoft.com/ru-ru/library/cc262839.aspx">Установка и настройка SharePoint Server 2010 с помощью Windows PowerShell</a> или <a href="http://autospinstaller.codeplex.com/">CodePlex: AutoSPInstaller</a>.</li>
<li>Настройте виртуальную машину SharePoint для создания фермы SharePoint и подключения к ней с помощью команды <a href="http://technet.microsoft.com/ru-ru/library/ff607979.aspx">Join-SharePointFarm</a> .</li>
<li>Настройте балансировку нагрузки на портале управления.
<ul>
<li>Настройте конечные точки виртуальной машины, выберите вариант балансировки нагрузочного трафика в существующей конечной точке, а затем укажите имя виртуальной машины с балансировкой нагрузки.
<ul>
<li>Дополнительную информацию о развертывании ферм SharePoint на виртуальных машинах Azure см. в <a href="http://channel9.msdn.com/Events/TechEd/NorthAmerica/2012/AZR327">видео TechEd North America 2012</a>.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><em>Управление фермой SharePoint с помощью System Center</em>:
<ul>
<li>С помощью агента Operations Manager и нового пакета интеграции Azure подключите локальный центр System Center к виртуальным машинам Azure.</li>
<li>Для управления следует использовать локальные контроллер приложений и оркестратор.</li>
</ul>
</li>
</ol>

<h2>Заключение</h2>
Облачные вычисления преобразуют схему использования ИТ в организациях. Это объясняется тем, что облачные вычисления предоставляют новый класс преимуществ, включая значительное снижение затрат в сочетании с гибкостью, динамичностью и повышением концентрации на ИТ-аспектах. Azure лидирует в области облачных вычислений, предоставляя простую, открытую, гибкую и мощную виртуальную инфраструктуру. Виртуальные машины Azure снижают потребность в оборудовании, что позволяет организациям снизить затратность и сложность систем благодаря созданию инфраструктуры требуемого масштаба с полным доступом и оптимизированными возможностями управления.

Виртуальные машины Azure обеспечивают полный спектр развертываний SharePoint. Они имеют полную поддержку и прошли надлежащее тестирование для обеспечения оптимальной работы с другими приложениями корпорации Майкрософт. Благодаря этому организации могут с легкостью настроить и развернуть сервер SharePoint в Azure, чтобы подготовить инфраструктуру для нового развертывания SharePoint или расширить уже действующую инфраструктуру. По мере роста рабочих нагрузок в области бизнеса организации могут быстро расширять свою инфраструктуру SharePoint. Аналогичным образом, при снижении рабочей нагрузки организации могут привлекать ресурсы по требованию, оплачивая только то, что они используют. Виртуальные машины Azure обеспечивают исключительную инфраструктуру для широкого спектра бизнес-потребностей, что было продемонстрировано в четырех сценариях на основе SharePoint, рассмотренных в этой статье.

Успешное развертывание SharePoint Server на виртуальных машинах в Azure требует тщательного планирования, что еще усугубляется большим количеством критически важных параметров архитектуры и развертывания фермы. Дополнительная информация и рекомендации, изложенные в настоящем документе, помогут принять правильные решения для внедрения продуманного развертывания SharePoint.

<h2>Дополнительные ресурсы</h2>

<ul>
<li>
<p>Учебный набор Azure: практическая работа и презентация</p>
<p><a href="http://windowsazure-trainingkit.github.com/labs.htm">http://windowsazure-trainingkit.github.com/labs.htm</a></p>
</li>
<li>
<p>Приступая к работе с Azure PowerShell</p>
<p><a href="http://msdn.microsoft.com/ru-ru/library/windowsazure/jj156055">http://msdn.microsoft.com/ru-ru/library/windowsazure/jj156055</a></p>
</li>
<li>
<p>Командлеты управления Azure</p>
<p><a href="http://msdn.microsoft.com/ru-ru/library/windowsazure/jj152841">http://msdn.microsoft.com/ru-ru/library/windowsazure/jj152841</a></p>
</li>
<li>
<p>Средства командной строки и командлеты PowerShell для различных операционных систем</p>
<p><a href="/ru-ru/manage/downloads/">https://www.windowsazure.com/ru-ru/manage/downloads/</a></p>
</li>
<li>
<p>Практические руководства и рекомендации</p>
<p><a href="/ru-ru/manage/windows/">https://www.windowsazure.com/ru-ru/manage/windows/</a></p>
</li>
</ul>


<!--HONumber=35_1-->
