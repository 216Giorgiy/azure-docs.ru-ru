<properties
	pageTitle="Технический обзор Пакетной службы Azure"
	description="Узнайте об основных понятиях, рабочих процессах и сценариях Пакетной службы Azure"
	services="batch"
	documentationCenter=""
	authors="dlepow"
	manager="timlt"
	editor=""/>

<tags
	ms.service="batch"
	ms.workload="big-compute"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="04/28/2015"
	ms.author="danlep"/>


#Технический обзор Пакетной службы Azure
Пакет Azure помогает запускать крупномасштабных параллельных и высокой производительности приложения (HPC) в облаке. Это служба платформа, которая предоставляет планирования заданий и автоматического масштабирования управляемую коллекцию виртуальных машин (ВМ) для запуска задания. С помощью пакета обновления, можно настроить рабочие нагрузки пакет для запуска в Azure по требованию или по расписанию, а не беспокоиться о сложности планирования заданий и управление ВМ в базовой платформы.

>[AZURE.NOTE]Сейчас доступна предварительная версия Пакетной службы. Чтобы использовать пакет, необходима учетная запись Azure и необходимо зарегистрироваться в предварительной версии пакета. Если ее нет, можно создать бесплатную пробную учетную запись всего за несколько минут. Подробную информацию см. в разделе [Создание учетной записи Azure](http://azure.microsoft.com/develop/php/tutorials/create-a-windows-azure-account/).


## Варианты использования

Пакет использует эластичности и масштаб облаке помочь вам с *пакетной обработки* или *вычислений пакета* -выполняется большое количество подобных задач для получения некоторых требуемой результат. Программа командной строки или сценарий принимает набор файлов данных в качестве входных данных, обрабатывает их в виде последовательности задач и создает набор выходных файлов. Выходные файлы могут быть конечный результат или промежуточного шага в рабочем процессе большего размера.

Пакетные вычисления — это общий шаблон для организаций, используемый для обработки, преобразования и анализа больших объемов данных по расписанию или запросу. Он включает в себя обработку полного цикла. Например, создание ежедневного банковского отчета о рисках или зарплатах, который должен формироваться по расписанию. Также он может решать задачи крупного бизнеса, науки и технического применения, для которых обычно требуются инструменты и ресурсы вычислительного кластера или сетки. Это могут быть традиционные приложения высокопроизводительных вычислительных систем (например, моделирование динамики жидкостей или специализированные рабочие нагрузки из области проектирования автомобилей, нефтегазовых исследований, исследований науки о жизни и создание цифрового содержимого).

Пакетная служба хорошо работает с приложениями и рабочими нагрузками, которые параллельно выполняют задачи на нескольких компьютерах, таких как вычислительные виртуальные машины под управлением Пакетной службы. См. рис. 1.

![Параллельные задачи][parallel]

**Рисунок 1. Параллельные задачи, работающие на нескольких компьютерах**

Примеры приведены ниже.

* Моделирование финансовых рисков.
* Обработка и визуализация изображений.
* Кодирование и перекодировка мультимедиа.
* Анализ генетических последовательностей.
* Тестирование программного обеспечения.

Пакетная служба может использоваться для выполнения параллельных вычислений с уменьшением шага, а также других, более сложных ациклических параллельных рабочих нагрузок.

>[AZURE.NOTE]Сейчас предварительная версия Пакетной службы не поддерживает приложения интерфейса передачи сообщений (MPI).

## Сценарии для разработчика

Интерфейсы API Пакетной службы на основе REST поддерживают два сценария разработки для настройки и запуска пакетных рабочих нагрузок с помощью Пакетной службы:

1. **Распределения вычислений в качестве рабочих элементов** -использование *пакета* API-интерфейсы для создания и управления гибкий пул вычислительных виртуальные машины и указать работы, они будут выполнены. Это дает полный контроль над ресурсами и клиенту необходимо управлять задача конвейерной — например, с помощью диспетчера рабочих процессов или мета планировщика, может осуществляться с помощью интерфейсов API REST пакета, или при необходимости компонент диспетчера заданий рабочего элемента. Вместо того, чтобы настраивать вычислительный кластер или писать код для создания очереди и планирования заданий, можно автоматизировать процессы планирования заданий и масштабирования пула вычислительных ВМ для выполнения заданий. В процессе определения рабочих элементов определение всех зависимостей и определяется движение входных и выходных файлов.

2. **Публикации и выполнения приложений с помощью пакета обновления** - *пакета приложений* API-интерфейсы работают на более высоком уровне, помогая перенос существующего приложения, он выполняется как службы в пуле виртуальных машин, управляемых в фоновом режиме в пакете. Приложение может быть, выполняемый сегодня на клиентских рабочих станциях или вычислительного кластера. Платформа для приложений Пакетной службы осуществляет перемещение входных и выходных файлов, выполнение заданий, управление заданиями и сохранение данных. Приложения Пакетной службы также позволяют моделировать задачи разделения данных и выделения этапов задания. В состав входит REST API-интерфейс и портал приложений Пакетной службы, где можно наблюдать за выполнением переданных заданий. Доступ к нему можно получить с помощью портала управления Microsoft Azure.


## Основные понятия Пакетной службы

В следующих разделах приведены основные понятия для работы с Пакетной службой и интерфейсами API. Дополнительные сведения см. в разделе [основы API для пакета Azure](batch-api-basics.md).

* [Учетная запись пакета](#BKMK_Account)
* [Задача виртуальных машин и пулы](#BKMK_TVM)
* [Рабочие элементы, заданий и задач](#BKMK_Workitem)
* [Файлы и каталоги](#BKMK_Files)

### <a id="BKMK_Account">Учетная запись пакета</a>
Требуется уникальный **пакета учетной записи** для работы со службой пакета. Все запросы, внесенные в пакет службы должен быть проверку подлинности с помощью имени учетной записи и ключа доступа.

Можно создать учетную запись пакета и управление ключами доступа для учетной записи на портале Azure или с [командлеты PowerShell пакета](batch-powershell-cmdlets-get-started.md).

Создание учетной записи пакета на портале:

1. Выполните вход на [портал управления Azure](https://manage.windowsazure.com).
2. Щелкните **Создать**, щелкните **вычислений**, щелкните **пакета службы**, и нажмите кнопку **Быстрое создание**. ![Создание учетной записи Пакетной службы][account_portal]

3. Введите следующие сведения:

	* В **имя учетной записи**, введите уникальное имя для использования в URL-АДРЕСЕ учетной записи пакета.
	* В **область**, выберите регион, в котором доступен пакет.
	* При наличии нескольких подписок в **подписки**, Выбор доступных подписки, который будет выставлен счет за использование пакета.


### <a id="BKMK_TVM">Задача виртуальных машин и пулы</a>

Объект **задачи виртуальной машины** (TVM) является ВМ Azure, пакета службы выделяет для выполнения определенной задачи для приложения — это исполняемый файл (.exe) или, если пакет приложений, одной или нескольких программ из образа приложения. В отличие от обычной виртуальной Машины Azure не Подготовка и управление TVM напрямую; Вместо этого пакета службы создает и управляет TVMs как **пула** аналогично настроенных виртуальных машин, как показано на рисунке 2.

![Пул и TVMs][TVM_pool]

**Рисунок 2. Пул TVMs**

При использовании интерфейсов API пакета, можно напрямую создать пул или создано автоматически при указании выполняемые операции. При использовании вами интерфейсов API приложений Пакетной службы пул создается автоматически во время запуска вами облачного приложения Пакетной службы.


Атрибуты пула включают в себя:

* Объект [размер](http://msdn.microsoft.com/library/azure/dn197896.aspx) для TVMs
* Операционная система ВМЗ.
* Максимальное количество ВМЗ.
* Правила масштабирования для пула — это формула, основанная на текущей рабочей нагрузке и использовании ресурсов, которая динамически настраивает количество обрабатывающих задачи ВМЗ.
* Доступные порты брандмауэра для обмена данными между ВМЗ внутри пула.
* Установленный на ВМЗ сертификат (например, для аутентификации доступа к учетной записи хранения).
* Задача запуска для ВМЗ — это операция, которая будет выполнена только один раз (например, установка приложений или скачивание данных для задач).

>[AZURE.NOTE]В настоящее время ВМЗ поддерживают только следующие операционные системы: Windows Server 2012 R2, Windows Server 2012 и Windows Server 2008 R2 с пакетом обновления 1 (SP1).

Пул может использоваться только той учетной записью Пакетной службы, с помощью которой он был создан. Учетная запись Пакетной службы может содержать более одного пула.

Каждый TVM в пуле назначается уникальное имя и IP-адреса. При удалении ВМЗ из пула она теряет все изменения, внесенные в операционную систему, свои локальные файлы, назначенное имя и IP-адрес. Когда ВМЗ покидает пул, она перестает существовать.


### <a id="BKMK_Workitem">Рабочие элементы, заданий и задач</a>

Объект **рабочий элемент** является шаблоном, который указывает, как приложение будет работать на TVMs в пуле. Объект **задания** является запланированного рабочего элемента и могут указываться один раз или повторяется. Задание состоит из коллекции **задачи**. На рис. 3 показаны основные связи.

![Рабочий элемент, заданий и задач][job_task]

**Рисунок 3. Рабочий элемент, заданий и задач**

В зависимости от API-интерфейсы, используемого для разработки с использованием пакета необходимо больше или меньше сведений о рабочих элементов, заданий и задач управления.

* При разработке приложения с помощью API пакета необходимо программным способом определения рабочих элементов, заданий и задач и настроить пулы TVM, выполняемых задач.

* Если ваше клиентское приложение интегрируется с помощью API-интерфейсов приложений Пакетной службы и ее инструментов, вы можете использовать компоненты, которые автоматически разделят задания на задачи, выполнят обработку задач и слияние результатов отдельных задач в итоговый результат задания. При отправке рабочей нагрузки для пакета обновления, пакета приложений framework управляет заданиями и выполняет задачи на TVMs.



### <a id="BKMK_Files">Файлы и каталоги</a>

Файл — это часть данных, которые используются в качестве входных данных для задания. Задача может содержать один или несколько связанных с ней входных файлов, либо не содержать их вообще. Файл может использоваться в нескольких задачах. Например, у задач визуализации фильма могут быть общие текстуры и модели. Для задач в задании анализа данных файлы могут содержать набор наблюдений или измерений.

Для каждой задачи, содержит входные данные, которые он обрабатывает и выходные данные, создаваемые им существует рабочий каталог. Во время выполнения задания эти каталоги и файлы доступны для использования в других задачах. Все задачи, файлы и каталоги в ВМЗ принадлежат одной учетной записи.

Опять же в зависимости от того, используемые API с использованием пакета, необходимо будет больше или меньше сведений о входных и выходных файлов для заданий и задач управления. При разработке с помощью API пакета необходимо указать эти зависимости и перемещения файла явным образом. При использовании приложений Пакетной службы большую часть этой работы платформа сделает за вас.

## Рабочий процесс с рабочими элементами
На рисунке 4 показано, как отправить приложение в пул, где он распространяется на обработку. Это используется API пакета.

![Рабочий процесс с рабочими элементами][work_item_workflow]

**Рисунок 4. Рабочий процесс для распространения рабочих элементов в пуле виртуальных машин**

1.	Передайте входные файлы (например, исходные данные или изображения) для задания учетной записи хранения Azure. Чтобы Пакетная служба имела к ним доступ, они должны находиться в учетной записи хранения. Пакетная служба передаст их в ВМЗ при выполнении задачи.
2.	Передайте зависимые двоичные файлы в учетную запись хранения. Двоичные файлы включают в себя программу, которая выполняется задачей, и зависимые сборки. Эти файлы также должны быть доступны из службы хранения и загружены в ВМЗ.
3.	Создайте пул ВМЗ, указав размер ВМЗ в пуле, операционную систему и другие свойства. Когда задача запускается, ей назначается ВМЗ из этого пула.
4.	Создайте рабочий элемент. Задание автоматически создается при создании рабочего элемента. Рабочий элемент позволяет управлять заданием, которое содержит задачи.
5.	Добавьте задачи в задание. Каждая задача использует переданную вами программу для обработки информации из переданного вами файла.
6.	Запустите приложение и отслеживайте полученные выходные данные.

## Рабочий процесс для публикации и выполнения приложений.
На рис. 5 показан основной рабочий процесс публикации приложения с помощью API приложений Пакетной службы с последующей передачей заданий в приложение Пакетной службы.

![Рабочий процесс публикации приложений][app_pub_workflow]

**Рисунок 5. Публикация и запускать приложение с пакетной приложения рабочего процесса**

1.	Подготовка **образа приложения** -существующие исполняемые файлы приложения и все необходимые файлы поддержки ZIP-файл. Это могут быть те же исполняемые файлы, которые вы запускаете на традиционных фермах серверов или кластере.
2.	Создание ZIP-файл из **облако сборки** будут вызывать и перенаправления рабочих нагрузок для пакета обновления. Облачная сборка содержит два компонента, которые доступны с помощью пакета SDK:

	а. **Разделитель задания** — задание разбивает на задачи, которые могут быть обработаны независимо друг от друга. Например, в сценарии анимации разделитель заданий будет принимать в качестве задания фильм и разбивать его на отдельные кадры.

	b. **Обработчика задач** – вызывает приложение исполняемый файл для данной задачи. Например, в сценарии анимации обработчик задач будет вызывать программу визуализации для обработки отдельного, указанного задачей кадра.

3.	Используйте интерфейсы API приложений Пакетной службы или инструменты разработчика, чтобы передать ZIP-файлы, подготовленные на двух предыдущих шагах, в учетную запись хранения Azure. Чтобы Пакетная служба имела к ним доступ, они должны находиться в учетной записи хранения. Обычно эта операция однократно выполняется администратором службы для каждого приложения.
4.	Укажите способ отправки заданий в приложение в Azure. Это может быть подключаемый модуль пользовательского интерфейса в приложении, веб-портал или автоматическая служба, которая является частью серверной системы. Все необходимые примеры, демонстрирующие различные варианты, можно найти в пакете SDK.

	Вот как можно выполнить задание:

	а. Передайте входные файлы задания пользователя (например, исходные данные или изображения). Чтобы Пакетная служба имела к ним доступ, они должны находиться в учетной записи хранения.

	b. Отправьте задание с необходимыми параметрами и списком файлов.

	c. Отслеживайте ход выполнения задания с помощью интерфейсов API или портала приложений Пакетной службы.

	г) Скачайте выходные данные.

## Дополнительные ресурсы

* [Начало работы с библиотекой пакета Azure для .NET](batch-dotnet-get-started.md)
* [Azure пакет разработки библиотек и средств](batch-development-libraries-tools.md)
* [Справочник по API REST Azure пакета](http://go.microsoft.com/fwlink/p/?LinkId=517803)
* [Справочник по API REST Azure пакета приложений](http://go.microsoft.com/fwlink/p/?LinkId=517804)

[parallel]: ./media/batch-technical-overview/parallel.png
[TVM_pool]: ./media/batch-technical-overview/TVM_pool.png
[job_task]: ./media/batch-technical-overview/job_task.png
[account_portal]: ./media/batch-technical-overview/account_portal.png
[work_item_workflow]: ./media/batch-technical-overview/work_item_workflow.png
[app_pub_workflow]: ./media/batch-technical-overview/app_pub_workflow.png

<!---HONumber=GIT-SubDir-->