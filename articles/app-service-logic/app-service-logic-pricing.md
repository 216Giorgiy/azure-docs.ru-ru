<properties 
	pageTitle="Модель ценообразования приложений логики | Microsoft Azure" 
	description="Сведения о ценообразовании в приложениях логики" 
	authors="kevinlam1" 
	manager="dwrede" 
	editor="" 
	services="logic-apps" 
	documentationCenter=""/>

<tags
	ms.service="logic-apps"
	ms.workload="na"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article" 
	ms.date="07/27/2016"
	ms.author="klam"/>

# Модель ценообразования приложений логики

С помощью Azure Logic Apps можно выполнять масштабирование и рабочие процессы интеграции в облаке. В этой статье приведены сведения о планах выставления счетов и тарифных планах приложений логики.

## Ценообразование с тарификацией по мере использования

Теперь в создаваемых приложениях логики используется план с тарификацией по мере использования. Благодаря такой модели ценообразования вы платите только за используемые ресурсы приложений логики. При плане с тарификацией по мере использования приложения логики не регулируются. Все действия, которые выполняются во время работы экземпляра приложения логики, тарифицируются.

### Выполненные действия

Каждый шаг в определении приложения логики — это действие. Сюда относятся триггеры, действия потока управления, например условия, области, циклы ForEach и Do Until, вызовы соединителей и собственных действий. Триггеры — это специальные действия, предназначенные для создания экземпляра приложения логики, когда происходит определенное событие. Поведение различных триггеров отличается. Некоторые из них могут влиять на тарификацию приложения логики.

-	**Опрашивающие триггеры**. Этот триггер непрерывно опрашивает конечную точку, пока не получит сообщение, удовлетворяющее требованиям для создания экземпляра приложения логики. Интервал опроса для триггера можно настроить в конструкторе приложений логики. Каждый опрашивающий запрос, даже если он не создает экземпляр приложения логики, будет учитываться как выполненное действие.

-	**Триггер webhook**. Этот триггер ожидает отправку клиентом запроса в определенную конечную точку. Каждый запрос, отправленный в конечную точку webhook, учитывается как выполненное действие. К триггерам webhook относятся триггеры веб-перехватчика HTTP и триггеры запросов.

-	**Триггер повторения**. Этот триггер создает экземпляр приложения логики в соответствии с настроенным интервалом повторения. Например, можно настроить так, чтобы этот триггер запускался каждые 3 дня или каждую минуту.

Выполнение триггера отображается в колонке ресурсов приложений логики в журнале триггеров.

Все успешные и завершившиеся сбоем действия учитываются как выполненные. Действия, пропущенные из-за несоответствующих условий, или действия, не выполненные из-за того, что приложение логики прекратило работу до их завершения, не учитываются как выполненные.

Действия, выполненные в рамках цикла, считаются по числу итераций цикла. Например, количество выполненных действий при наличии одного действия в цикле foreach с итерацией 10 элементов вычисляется по следующей формуле: количество элементов в списке (10) умножается на количество действий в цикле (1) плюс количество запусков цикла (1). В этом примере — (10 * 1) + 1 = 11.

Для отключенных приложений логики нельзя создавать экземпляры, и, следовательно, в течение этого времени плата взиматься не будет. Следует учитывать, что после отключения приложения логики сначала выполняется замораживание экземпляров, а затем приложение полностью завершает работу.

## Планы службы приложений

При создании приложение логики больше не нужно связывать с планом службы приложений. Вы также можете указать план службы приложений с помощью существующего приложения логики. При этом поведение приложений логики, ранее созданных с помощью плана службы приложений, не изменяется. В зависимости от выбранного плана после превышения количества ежедневных выполнений происходит регулирование, и счета не выставляются по количеству выполненных действий.

Планы службы приложений и ежедневное допустимое количество выполняемых действий

| |"Бесплатный", "Общий", "Базовый"|Стандарт|Premium|
|---|---|---|---|
|Выполняемых действий в день| 200|10 000|50 000|

### Смена плана с оплатой по мере использования на план службы приложений

Чтобы ознакомиться с планом службы приложений для использования приложений логики, [запустите представленный ниже сценарий PowerShell](https://github.com/logicappsio/ConsumptionToAppServicePlan). Убедитесь, что на вашем компьютере установлены [средства Azure PowerShell](https://github.com/Azure/azure-powershell).

``` powershell
Param(
    [string] $AppService_RG = '<app-service-resource-group>',
	[string] $AppService_Name = '<app-service-name>',
    [string] $LogicApp_RG = '<logic-app-resource-group>',
    [string] $LogicApp_Name = '<logic-app-name>',
    [string] $subscriptionId = '<azure-subscription-id>'
)

Login-AzureRmAccount 
$subscription = Get-AzureRmSubscription -SubscriptionId $subscriptionId
$appserviceplan = Get-AzureRmResource -ResourceType "Microsoft.Web/serverFarms" -ResourceGroupName $AppService_RG -ResourceName $AppService_Name
$logicapp = Get-AzureRmResource -ResourceType "Microsoft.Logic/workflows" -ResourceGroupName $LogicApp_RG -ResourceName $LogicApp_Name

$sku = @{
    "name" = $appservicePlan.Sku.tier;
    "plan" = @{
      "id" = $appserviceplan.ResourceId;
      "type" = "Microsoft.Web/ServerFarms";
      "name" = $appserviceplan.Name  
    }
}

$updatedProperties = $logicapp.Properties | Add-Member @{sku = $sku;} -PassThru

$updatedLA = Set-AzureRmResource -ResourceId $logicapp.ResourceId -Properties $updatedProperties -ApiVersion 2015-08-01-preview
```

### Смена плана службы приложений на план с оплатой по мере использования

Чтобы перейти на модель ценообразования с тарификацией по мере использования для приложения логики, связанного с планом службы приложений, необходимо удалить ссылку на план службы приложений в определении приложения логики. Чтобы сделать это, вызовите командлет PowerShell:

`Set-AzureRmLogicApp -ResourceGroupName ‘rgname’ -Name ‘wfname’ –UseConsumptionModel -Force`

## Цены

Дополнительные сведения о ценах см. [здесь](https://azure.microsoft.com/pricing/details/logic-apps/).

## Дальнейшие действия

- [Что такое приложения логики?][whatis]
- [Создание приложения логики][create]

[pricing]: https://azure.microsoft.com/pricing/details/logic-apps/
[whatis]: app-service-logic-what-are-logic-apps.md
[create]: app-service-logic-create-a-logic-app.md

<!---HONumber=AcomDC_0810_2016-->