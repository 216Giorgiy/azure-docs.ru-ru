<properties
   pageTitle="Использование соединителя машинного обучения Azure в приложениях логики | Служба приложений Microsoft Azure"
   description="Как создать и настроить соединитель машинного обучения Azure, чтобы использовать его в приложениях логики в службе приложений Azure"
   services="logic-apps"
   documentationCenter=".net,nodejs,java"
   authors="jeffhollan"
   manager="erikre"
   editor=""/>

<tags
   ms.service="logic-apps"
   ms.devlang="multiple"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="integration"
   ms.date="05/31/2016"
   ms.author="jehollan"/>
   
# Обзор
>[AZURE.NOTE] Эта версия статьи предназначена для приложений логики со схемой версии 2014-12-01-preview.

Соединитель машинного обучения Azure для приложений логики позволяет вызывать API-интерфейсы машинного обучения Azure для пакетной оценки (служба пакетного выполнения) и повторного обучения. Эти функции в сочетании с триггерами приложений логики позволяют планировать задания пакетного выполнения и настраивать повторное обучение моделей.

 ![][1]
 
## Начало работы с соединителем машинного обучения Azure и его добавление в приложение логики
Чтобы начать работу, создайте эксперимент в студии машинного обучения Azure, а затем настройте и разверните веб-службу. После этого вы сможете использовать URL-адрес API и ключ URL-адреса Post задания пакетного выполнения, расположенные на странице справки по выполнению пакета. ([Пошаговое руководство по машинному обучению](../machine-learning/machine-learning-walkthrough-5-publish-web-service.md))

Чтобы запустить задание пакетного выполнения с помощью соединителя, добавьте соединитель машинного обучения Azure в свое приложение логики. Затем введите требуемые сведения (подробнее об этом ниже). Чтобы настроить повторное обучение, добавьте второй соединитель машинного обучения Azure и укажите входные параметры (сведения о настройке модели для повторного обучения см. [здесь](../machine-learning/machine-learning-retrain-models-programmatically.md)).

## Запуск задания пакетного выполнения машинного обучения Azure
Соединитель машинного обучения Azure предоставляет четыре варианта запуска заданий пакетного выполнения:
1.	Пакетное задание с вводом и выводом: у эксперимента есть модули ввода и вывода веб-службы.
2.	Пакетное задание без ввода и вывода: у эксперимента нет модулей ввода и вывода веб-службы (например, используются модули чтения и записи).
3.	Пакетное задание только с вводом: у эксперимента есть модуль ввода веб-службы, но нет модуля вывода веб-службы (например, используются модуль записи).
4.	Пакетное задание только с выводом: у эксперимента нет модуля ввода веб-службы, но есть модуль вывода веб-службы (например, он использует модуль чтения). Обратите внимание, что задание пакетного выполнения представляет собой асинхронный запрос, и на его завершение может потребоваться определенное время, которое зависит от объема данных и сложности модели. Когда задание будет завершено, соединитель вернет результат вывода.

### Запуск задания пакетного выполнения: с вводом и выводом
Если у эксперимента в студии машинного обучения есть модули ввода и вывода веб-службы, необходимо [указать сведения об учетной записи хранения и расположении хранилища BLOB-объектов](../machine-learning/machine-learning-consume-web-services.md). Кроме того, можно включить глобальные параметры веб-службы, если они настроены в вашем эксперименте (см. статью [Параметры веб-службы машинного обучения Azure](../machine-learning/machine-learning-web-service-parameters.md)).

![][2]

Щелкните кнопку с многоточием для отображения и скрытия полей глобальных параметров. В них вы сможете указать один или несколько глобальных параметров веб-службы в разделенном запятыми списке полей и значений.

![][3]

Соединитель позволяет использовать и другие варианты заданий пакетного выполнения, включая задания без модулей ввода и вывода веб-службы.

## Настройка повторного обучения

Для настройки повторного обучения модели машинного обучения, выполняемого однократно или по расписанию, воспользуйтесь действием "Настройка повторного обучения". В сочетании с заданием пакетного выполнения, созданным с помощью соединителя, вы сможете выполнить необходимые действия для обучения и обновления модели веб-службы. В этом рабочем процессе соединитель используется дважды.
1.	Первый соединитель используется, чтобы запустить задание пакетного выполнения для повторного обучения модели и возврата результата. Выходные данные этого запуска будут содержать URL-адрес новой модели (.ilearner). При желании также можно — если это настроено в эксперименте — возвращать URL-адрес выходных данных модуля оценки, которые представляют собой CSV-файл. На следующем шаге на основе выходных данных модуля оценки можно принять решение о том, необходимо ли заменить модель в веб-службе (например если точность превышает 0,85).
1.	Второй соединитель используется для настройки повторного обучения. Он использует параметры вывода первого соединителя для необязательной проверки состояния обновления модели и обновления веб-службы новой моделью, прошедшей обучение.
  *	Например, с помощью URL-адреса обученной модели можно получить доступ к выходным данным задания пакетного выполнения, введя `@{body('besconnector').Results.output2.FullURL}` в поле "URL-адрес обученной модели". При этом предполагается, что выходные данные веб-службы в обучающем эксперименте называются output2.
  *	В качестве имени ресурса используйте полное имя сохраненной обученной модели в прогнозном эксперименте, например MyTrainedModel [обученная модель].
  *	В поле "Ключ результата оценки" можно ввести любой параметр, возвращенный модулем оценки обучающего эксперимента (если он имеется). Список доступных параметров можно увидеть, открыв результаты модуля оценки в обучающем эксперименте в Студии машинного обучения Azure. Для эксперимента по классификации они включают точность, прецизионность, отзыв, F-оценку, AUC, средние логарифмические потери и логарифмические потери обучения.

![][4]
 
### Повторное обучение по расписанию
 
С помощью триггеров приложений логики можно настраивать запуск соединителя по расписанию. Это позволяет выполнять повторное обучение модели на регулярной основе при поступлении новых данных. Задание пакетного выполнения выполнит повторное обучение модели, а действие повторного обучения обновит модель после завершения повторного обучения.
 
![][5]
 
## Выходные данные соединителя 
 
**Задание пакетного выполнения**: когда пакетное задание завершается, выходные данные соединителя будут содержать следующие сведения для вывода каждой веб-службы.
 
 ![][6]
 
Обратите внимание, что эта возможность будет недоступна, если вы не включили вывод веб-службы (например, если для записи в базу данных из эксперимента в Студии машинного обучения используется модуль записи).

**Повторное обучения**: после успешного завершения повторного обучения выходные данные будут содержать следующие сведения.

![][7]

## Сводка

С помощью соединителя машинного обучения Azure для приложений логики вы можете запускать задания пакетной оценки и повторного обучения по требованию или по расписанию. Сочетание этих двух действий позволит автоматически оценивать данные и проводить повторное обучение, оценку и обновление модели веб-службы без необходимости написания кода.

 <!--Image references-->
[1]: ./media/app-service-logic-connector-azureml/img1.png
[2]: ./media/app-service-logic-connector-azureml/img2.png
[3]: ./media/app-service-logic-connector-azureml/img3.png
[4]: ./media/app-service-logic-connector-azureml/img4.png
[5]: ./media/app-service-logic-connector-azureml/img5.png
[6]: ./media/app-service-logic-connector-azureml/img6.png
[7]: ./media/app-service-logic-connector-azureml/img7.png

<!---HONumber=AcomDC_0803_2016-->