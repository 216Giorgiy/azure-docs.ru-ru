<properties 
	pageTitle="Соединители «бизнес — бизнес» и приложения API в службе приложений Microsoft Azure | Microsoft Azure" 
	description="Узнайте, как создать и настроить соединители EDI, EDIFACT, AS2 и TPM; архитектура микрослужб." 
	services="app-service\logic" 
	documentationCenter="" 
	authors="MandiOhlinger" 
	manager="dwrede" 
	editor="cgronlun"/>

<tags 
	ms.service="app-service-logic" 
	ms.workload="integration" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="10/15/2015" 
	ms.author="mandia"/>

# Соединители «бизнес — бизнес» и приложения API в службе приложений Microsoft Azure
Служба приложений Microsoft Azure (или для краткости просто служба приложений) включает много приложений API BizTalk, которые крайне необходимы в средах интеграции. Эти приложения API построены на концепциях и инструментах, используемых в BizTalk Server, но теперь доступны как часть службы приложений Azure.

Одной из категорий таких приложений API являются приложения API «бизнес — бизнес» (B2B). Используя эти приложения API B2B, можно легко добавлять партнеров, создавать соглашения и выполнять все так же, как это делалось локально, с помощью EDI, AS2 и EDIFACT.

Эти приложения API B2B предлагают возможности «Триггер» и «Действие». Триггер запускает новый экземпляр на основе определенного события, такого, например, как поступление сообщения X12 от партнера. Действие — это результат, например, после получения сообщения X12 отправка этого сообщения с помощью AS2.


## Что такое соединитель или приложение API «бизнес — бизнес»
Компонент «бизнес — бизнес» (B2B) включает существующие, предварительно созданные приложения API, которые позволяют различным компаниям, отделениям, приложениям и т. п. взаимодействовать с использованием AS2, EDI и EDIFACT.

Приложения API B2B включают следующее.

Соединитель или приложение API | Описание
--- | ---
Управление торговыми партнерами BizTalk | Приложение API, которое создает отношения «бизнес — бизнес» (B2B) с использованием партнеров и соглашений. Эти отношения используют протокол AS2, EDIFACT и X12.<br/><br/>Это приложение API TPM является базовым требованием соединителя AS2, а также приложений API X12 и EDIFACT. 
Соединитель AS2 | Соединитель, который получает и отправляет сообщения с использованием транспорта AS2. Этот соединитель безопасно и надежно транспортирует данные через Интернет.
BizTalk EDIFACT | Приложение API, которое получает и отправляет сообщения с использованием EDIFACT. EDIFACT также известен как UN/EDIFACT (ООН/электронный обмен данными в управлении, торговле и на транспорте) и широко используется в различных отраслях.
BizTalk X12 | Приложение API, которое получает и отправляет сообщения с использованием протокола X12. X12 также известен как ASC X12 (X12 уполномоченного комитета по стандартам) и широко используется в различных отраслях. 


С помощью этих приложений API вы можете выполнять различные задачи обмена сообщениями EDI. Например, с помощью соединителя AS2 можно безопасно принимать и отправлять разные типы сообщений (EDI, XML, неструктурированные файлы и т. д.) клиенту, подразделению в организации, такому как отдел кадров, или любому пользователю, использующему AS2.

Вы можете легко создавать столько приложений API, сколько вам нужно. Вы также можете многократно использовать одно приложение API в разных сценариях и рабочих процессах.

Это можно делать без написания какого-либо кода. Давайте приступим.


## Требования для начала работы
При создании приложений API B2B требуются некоторые ресурсы. Вы должны создать эти элементы, которые затем можно использовать в других приложениях API. Эти требования приведены в следующей таблице.

Требование | Описание
--- | ---
База данных SQL Azure | Хранит элементы B2B, в том числе партнеров, схемы, сертификаты и соглашения. Каждому приложению API B2B требуется своя собственная база данных SQL Azure. <br/><br/>**Примечание.** Скопируйте строку подключения к этой базе данных.<br/><br/>[Создание базы данных SQL Azure](../sql-database-get-started.md)
Контейнер хранилища BLOB-объектов Azure | Хранит свойства сообщений, если включена архивация AS2. Если архивация сообщений AS2 не требуется, то контейнер хранилища не нужен. <br/><br/>**Примечание.** Если вы включаете архивирование, скопируйте строку подключения к этому хранилищу больших двоичных объектов.<br/><br/>[Об учетных записях хранения Azure](../storage-create-storage-account.md)
Пространство имен служебной шины и его значения ключа | Хранит данные пакетной обработки X12 и EDIFACT. Если пакетная обработка не требуется, пространство имен служебной шины не нужно.<br/><br/>**Примечание.** Если вы включаете пакетную обработку, скопируйте эти значения.<br/><br/>[Создание пространства имен служебной шины](http://msdn.microsoft.com/library/azure/hh690931.aspx)
Экземпляр TPM | Экземпляр приложения управления торговыми партнерами BizTalk (TPM) требуется для создания соединителя AS2 и приложения API X12 или EDIFACT. При создании приложения API TPM вы создаете экземпляр TPM.<br/><br/>**Примечание.** Узнайте имя вашего приложения API TPM. 


## Создание приложений API
Приложения API B2B можно создать на портале Azure или с помощью REST API.


### Создание приложений API с помощью REST API
[См. документацию по использованию REST API.](http://go.microsoft.com/fwlink/p/?LinkId=529766)


### Создание приложений API B2B на портале Azure
На портале Azure можно создать приложения API B2B при создании приложений логики, веб-приложений или мобильных приложений. Кроме того, эти приложения можно создавать с помощью их собственной колонки. Оба способа достаточно просты, поэтому выбор зависит от ваших потребностей или настроек. Некоторые пользователи предпочитают сначала создать все приложения API B2B с их конкретными свойствами. Затем создаются приложения логики, веб-приложения или мобильные приложения и добавляются созданные приложения API B2B.

С помощью следующих действий создаются приложения API B2B в колонке приложений API.


#### Создание приложений управления торговыми партнерами (TPM) BizTalk

> [AZURE.NOTE]Экземпляр приложения управления торговыми партнерами BizTalk (TPM) требуется для создания соединителя AS2 и приложения API X12 или EDIFACT. При создании приложения API TPM вы создаете экземпляр TPM.

С помощью следующих действий создается экземпляр TPM.

1. На начальной панели (домашней странице) портала Azure выберите **Marketplace**. В колонке **Приложения API** перечисляются все существующие приложения API и соединители. Вы также можете выполнить **поиск** конкретных приложений API B2B.
2. Выберите **Управление торговыми партнерами BizTalk**. В новой колонке нажмите кнопку **Создать**. 
3. Задайте следующие свойства. 

	Свойство | Описание
--- | ---
Имя | Введите имя для этого экземпляра TPM. Например, ему можно дать имя *AccountsPayableTPM*.
Параметры пакета | Введите **строку подключения к базе данных** ADO.NET для созданной базы данных SQL Azure. <br/><br/>При копировании строки подключения пароль в эту строку подключения не добавляется. Не забудьте ввести пароль в строку подключения.
План обслуживания приложения | Отображается ваш план платежей. Вы можете изменить его, если требуется больше или меньше ресурсов.
Ценовая категория | Свойство только для чтения, в котором указана ценовая категория в рамках вашей подписки Azure. 
Группа ресурсов | Создайте новую или используйте существующую группу. Все приложения API и соединители для ваших приложений логики, веб-приложений и мобильных приложений должны быть в одной группе ресурсов. <br/><br/>Это свойство объясняется в статье [Использование групп ресурсов](../resource-group-overview.md). 
Подписка | Свойство только для чтения, в котором указана ваша текущая подписка.
Расположение | Географическое расположение, в котором размещена ваша служба Azure. 
Добавить на начальную панель | Установите этот флажок, чтобы добавить приложение API B2B на начальную панель (домашнюю страницу).

4. Нажмите кнопку **Создать**.

После создания приложения API TPM (экземпляра TPM) вы можете создать соединитель AS2 и приложения API X12 или EDIFACT.


#### Создание соединителя AS2

1. На начальной панели (домашней странице) портала Azure выберите **Marketplace**. В колонке **Приложения API** перечисляются все существующие приложения API и соединители. Вы также можете выполнить **поиск** конкретных приложений API B2B.
2. Выберите **Соединитель AS2**. В новой колонке нажмите кнопку **Создать**. 
3. Задайте следующие свойства. 

	Свойство | Описание
--- | ---
Имя | Введите имя для соединителя AS2. Например, ему можно дать имя *AS2Connector*.
Параметры пакета | Введите параметры для этого приложения API, такие как имя экземпляра TPM. <br/><br/>Описание конкретных свойств см. в разделе [Добавление параметров пакета AS2](#AddAS2Conn) этой статьи. 
План обслуживания приложения | Отображается ваш план платежей. Вы можете изменить его, если требуется больше или меньше ресурсов.
Ценовая категория | Свойство только для чтения, в котором указана ценовая категория в рамках вашей подписки Azure. 
Группа ресурсов | Создайте новую или используйте существующую группу. Это свойство объясняется в разделе [Использование групп ресурсов](../resource-group-overview.md). 
Подписка | Свойство только для чтения, в котором указана ваша текущая подписка.
Расположение | Географическое расположение, в котором размещена ваша служба Azure. 
Добавить на начальную панель | Установите этот флажок, чтобы добавить приложение API B2B на начальную панель (домашнюю страницу).

	**<a name="AddAS2Conn"></a>Параметры пакета соединителя AS2**

	Свойство | Описание
--- | --- 
Строка подключения к базе данных | Введите строку подключения ADO.NET к созданной базе данных SQL Azure. При копировании строки подключения пароль в эту строку подключения не добавляется. Перед вставкой не забудьте указать пароль в строке подключения.
Включить архивацию для входящих сообщений | необязательный параметр. Включите это свойство, чтобы сохранять свойства входящего сообщения AS2, полученного от партнера. 
Строка подключения к хранилищу BLOB-объектов Azure | Введите строку подключения к созданному контейнеру хранилища BLOB-объектов Azure. Если архивация включена, закодированные и декодированные сообщения хранятся в этом контейнере хранилища.
Имя экземпляра TPM | Введите имя приложения API **управления торговыми партнерами BizTalk**, созданного ранее. При создании соединителя AS2 этот соединитель выполняет соглашения AS2 только в этом конкретном экземпляре TPM.

4. Нажмите кнопку **Создать**.


#### Создание приложений API X12 или EDIFACT

1. На начальной панели (домашней странице) портала Azure выберите **Marketplace**. В колонке **Приложения API** перечисляются все существующие приложения API и соединители. Вы также можете выполнить **поиск** конкретных приложений API B2B.
2. Выберите **BizTalk X12** или **BizTalk EDIFACT**. В новой колонке нажмите кнопку **Создать**. 
3. Задайте следующие свойства. 

	Свойство | Описание
--- | ---
Имя | Введите имя для этого приложения API B2B. Например, ему можно дать имя *EDI850APIApp*.
Параметры пакета | Введите параметры для этого приложения API, такие как имя экземпляра TPM. <br/><br/>Описание конкретных свойств см. в разделе [Параметры пакета X12 или EDIFACT](#AddX12) этой статьи. 
План обслуживания приложения | Отображается ваш план платежей. Вы можете изменить его, если требуется больше или меньше ресурсов.
Ценовая категория | Свойство только для чтения, в котором указана ценовая категория в рамках вашей подписки Azure. 
Группа ресурсов | Создайте новую или используйте существующую группу. Это свойство объясняется в разделе [Использование групп ресурсов](../resource-group-overview.md). 
Подписка | Свойство только для чтения, в котором указана ваша текущая подписка.
Расположение | Географическое расположение, в котором размещена ваша служба Azure. 
Добавить на начальную панель | Установите этот флажок, чтобы добавить приложение API B2B на начальную панель (домашнюю страницу).

	**<a name="AddX12"></a>Параметры пакета приложений API X12 и EDIFACT**

	Свойство | Описание
--- | --- 
Строка подключения к базе данных | Введите строку подключения ADO.NET к созданной базе данных SQL Azure. При копировании строки подключения пароль в эту строку подключения не добавляется. Перед вставкой не забудьте указать пароль в строке подключения.
Пространство имен служебной шины | Введите созданное пространство имен служебной шины. Требуется только в том случае, если включена пакетная обработка. 
Имя общего ключа доступа пространства имен служебной шины | Введите созданный вами ключ доступа пространства имен служебной шины. Требуется только в том случае, если включена пакетная обработка. 
Значение общего ключа доступа пространства имен служебной шины | Введите значение созданного вами ключа доступа пространства имен служебной шины. Требуется только в том случае, если включена пакетная обработка. 
Имя экземпляра TPM | Введите имя приложения API **управления торговыми партнерами BizTalk**, созданного ранее. При создании приложения API X12 или EDIFACT это приложение API выполняет только соглашения X12/EDFIACT в этом конкретном экземпляре TPM.

4. Нажмите кнопку **Создать**.


## Добавление партнеров, соглашений, сертификатов и схем 
На портале управления Azure откройте свое приложение API TPM. В разделе **Компоненты** добавьте партнеров, соглашения, сертификаты и схемы.

Вы также можете добавить соглашения в свои соединители AS2, приложения API X12 и приложения API EDIFACT.


## Мониторинг приложений API
На портале управления Azure откройте свое приложение API TPM. В разделе **Операции** можно просматривать разные операции управления. Например, вы можете просматривать:

- информационные события и ошибки;
- использование памяти и число потоков рабочего процесса (w3wp);
- журналы приложений и веб-сервера.

Дополнительные сведения см. в статье [Мониторинг приложений логики](app-service-logic-monitor-your-logic-apps.md).


## Добавление приложений API в приложение 
Служба приложений Microsoft Azure предоставляет разные типы приложений, которые могут использовать эти приложения API B2B. Вы можете создавать новые или добавлять существующие приложения API B2B в приложения логики, мобильные приложения или веб-приложения.

Просто выберите в своем приложении приложения API B2B из коллекции, и они будут автоматически добавлены в ваше приложение.

> [AZURE.IMPORTANT]Чтобы добавить соединители и приложения API, созданные ранее, создайте приложения логики, мобильные приложения или веб-приложения в той же группе ресурсов.

С помощью следующих действий можно добавить приложения API B2B в приложения логики, мобильные приложения и веб-приложения.

1. На начальной панели (домашней странице) портала Azure перейдите в раздел **Marketplace** и найдите свое приложение логики, мобильное приложение или веб-приложение. 

	Если вы создаете новое приложение, выполните поиск приложений логики, мобильных приложений или веб-приложений. Выберите это приложение и в новой колонке нажмите кнопку **Создать**. Эти действия приводятся в разделе [Создание приложения логики](app-service-logic-create-a-logic-app.md).

2. Откройте свое приложение и выберите элемент **Триггеры и действия**.

3. Выберите в **коллекции** приложение API B2B, и оно будет автоматически добавлено в ваше приложение. Вы также можете создать новое приложение API B2B.

	> [AZURE.IMPORTANT]Для соединителя AS2 и приложений API X12 и EDIFACT требуется экземпляр TPM. Поэтому при создании нового приложения API B2B сначала создайте приложение API TPM, а затем создайте соединитель AS2, приложение API X12 или приложение API EDIFACT.

4. Нажмите кнопку **ОК**, чтобы сохранить изменения.

>[AZURE.NOTE]Если вы хотите начать работу с приложениями логики Azure до создания учетной записи Azure, перейдите на веб-сайт [пробного использования приложений логики](https://tryappservice.azure.com/?appservice=logic). На этом сайте вы сможете быстро создать кратковременное приложение логики начального уровня в службе приложений. Никаких кредитных карт и обязательств.

## Дополнительные ресурсы B2B

[Создание процесса B2B](app-service-logic-create-a-b2b-process.md)<br/> [Создание соглашения между торговыми партнерами](app-service-logic-create-a-trading-partner-agreement.md)<br/> [Что такое соединители и приложения API BizTalk](app-service-logic-what-are-biztalk-api-apps.md)


## Дополнительные сведения о приложениях логики и веб-приложениях
[Что такое приложения логики?](app-service-logic-what-are-logic-apps.md)<br/> [Веб-сайты и веб-приложения в службе приложений Azure](../app-service-web/app-service-web-overview.md)


## Дополнительные сведения о соединителях

[Список соединителей и приложений API в приложениях логики](app-service-logic-connectors-list.md)<br/><br/> [Что такое соединители и приложения API BizTalk](app-service-logic-what-are-biztalk-api-apps.md)

<!---HONumber=Oct15_HO4-->