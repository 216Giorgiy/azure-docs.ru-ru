<properties
	pageTitle="Создание приложения логики | Microsoft Azure"
	description="Узнайте, как создать приложение логики, подключающее службы SaaS"
	authors="stepsic-microsoft-com"
	manager="dwrede"
	editor=""
	services="app-service\logic"
	documentationCenter=""/>

<tags
	ms.service="app-service-logic"
	ms.workload="na"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="get-started-article"
	ms.date="01/12/2016"
	ms.author="stepsic"/>

# Создание нового приложения логики, подключающего службы SaaS

| Краткий справочник |
| --------------- |
| [Язык описания приложений логики](https://msdn.microsoft.com/library/azure/dn948512.aspx?f=255&MSPPError=-2147217396) |
| [Документация по соединителям приложений логики](https://azure.microsoft.com/documentation/articles/app-service-logic-connectors-list/) |
| [Форум о приложениях логики](https://social.msdn.microsoft.com/Forums/ru-RU/home?forum=azurelogicapps) |

В этом разделе будет показано, как всего за несколько минут создать [приложение логики службы приложений](app-service-logic-what-are-logic-apps.md). Мы рассмотрим рабочий процесс, который позволяет получать набор интересующих твитов в папку Dropbox.

Для использования этого сценария вам понадобится:

- Подписка Azure
- учетная запись Twitter;
- учетная запись Dropbox.

<!--- TODO: Add try it now information here -->

## Создание соединителей

Сначала необходимо создать два соединителя, которые будут использоваться: [соединитель Dropbox](app-service-logic-connector-dropbox.md) и [соединитель Twitter](app-service-logic-connector-twitter.md). В связи с ограничениями API Twitter нам также потребуется регистрация в бесплатном приложении через Twitter. Чтобы создать их, выполните следующие действия.

1. Войдите на портал Azure.

2. Щелкните [Marketplace](https://portal.azure.com/#blade/HubsExtension/GalleryFeaturedMenuItemBlade/selectedMenuItemId/apiapps) на начальном экране и найдите Twitter (или [щелкните здесь](https://portal.azure.com/#create/microsoft_com.TwitterConnector.0.2.2)).

3. Выберите **Соединитель Twitter** и нажмите **Создать**. Откроется представление, в котором можно задать все параметры. Вы можете оставить имя **Соединитель Twitter**.
4. Выберите **Параметры пакета** и введите данные из своего приложения Twitter. Чтобы настроить бесплатное приложение, выполните следующие действия.
	1. Откройте [страницу регистрации приложения Twitter](http://apps.twitter.com).
	2. Создайте новое приложение.
	3. Присвойте ему имя и описание. Можно ввести любой URL-адрес веб-сайта, а также любой URL-адрес обратного вызова (не оставляйте это поле пустым).
	4. После регистрации скопируйте **ключ пользователя** и **секрет потребителя** в Twitter и вставьте их в поля **clientId** и **clientSecret** соответственно.
	5. Нажмите кнопку **ОК** в области Azure, чтобы вернуться к другим параметрам API.

5. В поле **Создать новый план обслуживания приложения** введите имя плана.

	>[AZURE.NOTE]В этом разделе предполагается, что вы создаете новый план обслуживания приложения. Если вы используете существующий план обслуживания приложения, нажмите **Выбрать существующий**, выберите существующий план и перейдите к последнему этапу в этом разделе. Чтобы размещать приложения, нужен план.

6.  Выберите **ценовую категорию** для этого нового плана.

	>[AZURE.NOTE]По умолчанию отображаются только планы, рекомендуемые для приложений логики. Нажмите **Просмотреть все**, чтобы увидеть все доступные планы. При выборе для приложения логики категории Free вы можете запускать его не чаще одного раза в час и использовать не более 1000 действий в месяц.

7. Создайте **группу ресурсов** для вашего потока.

	Группы ресурсов действуют как контейнеры для приложений. Все ресурсы для вашего приложения будут находиться в одной группе ресурсов.

8. Если у вас есть несколько подписок Azure, выберите ту, которую будете использовать.

9. Выберите **расположение** для запуска приложения логики.

	![Представление "Создание приложения API"](./media/app-service-logic-create-a-logic-app/gallery.png)

10. Щелкните **Создать**. Этап подготовки может занять одну-две минуты.

11. Теперь повторите эти действия для [Dropbox](https://portal.azure.com/#create/microsoft_com.DropboxConnector.0.2.2).

## Запуск приложения логики

Теперь необходимо создать новое приложение логики.

1. Нажмите кнопку **+ Создать** в нижнем левом углу экрана, разверните узел **Мобильные и веб-приложения**, а затем щелкните элемент **Приложение логики**.

 	Появляется представление "Создание приложения логики", в котором можно задать некоторые базовые параметры.

	![Представление "Создание приложения логики"](./media/app-service-logic-create-a-logic-app/createlogicapp.png)

2. В поле **Имя** введите понятное имя для приложения логики.

3. Выберите **план обслуживания приложения**, который использовался при создании соединителей. В результате расположение, подписка и группа ресурсов будут выбраны автоматически.

Таким образом делаются основные настройки, но пока не следует нажимать кнопку **Создать**. Далее вы будете добавлять триггеры и действия в рабочий процесс.

## Добавление триггера

Триггеры — это то, что делает ваше приложение логики. Затем вы добавите триггер повторения, который будет запускать ваш рабочий процесс по стандартному расписанию.

1. В представлении **Создание приложения логики** щелкните **Триггеры и действия**.

	Откроется полноэкранный конструктор, отображающий ваш поток и несколько шаблонов для начала.
	
2. В этом учебнике **мы создадим приложение с нуля**. Вы всегда сможете использовать шаблон, если он покажется вам полезным.
    
    Сейчас с правой стороны находится список всех служб, которые могут иметь триггеры.

3. В верхней части щелкните **Повторение**.

	Появится окно, в котором можно указать параметры повторения.

	![Периодичность](./media/app-service-logic-create-a-logic-app/recurrence.png)

4.  Выберите **частоту** и **интервал** повторения (например, один раз каждый час), затем щелкните зеленый флажок.

Теперь вы добавите действие в поток.

## Добавление действия Twitter

Действия — это то, что делает ваш рабочий процесс. Можно задавать любое количество действий, и их можно организовать так, чтобы сведения из одного действия передавались в следующее.

1. В области справа щелкните элемент **Соединитель Twitter**.

2. После его загрузки нажмите кнопку **Авторизовать**, войдите в свою учетную запись Twitter и щелкните **Авторизовать приложение**.

	Это предоставит соединителю доступ к вашей учетной записи Twitter. Отображается список возможных операций, предоставляемых соединителем Twitter.

	![Действия](./media/app-service-logic-create-a-logic-app/actions.png)

	> [AZURE.NOTE]Когда для подключения к службам SaaS, таким как Twitter, нажимается кнопка **Авторизовать**, используются средства защиты OAUTH. Дополнительные сведения об OAUTH см. в статье [Средства защиты OAUTH](app-service-logic-oauth-security.md).

3. Щелкните действие **Искать твиты**, затем в поле **Укажите запрос**, введите что-нибудь, аналогичное `#MicrosoftAzure`, и нажмите кнопку с зеленой галочкой.

	![Поиск Twitter](./media/app-service-logic-create-a-logic-app/twittersearch.png)

Соединитель Twitter теперь является частью рабочего процесса.

## Добавление действия Dropbox и создание приложения

Последний шаг заключается в добавлении действия, которое отправляет твиты в файл Dropbox.

1. В области справа щелкните пункт **Соединитель Dropbox**.

2. После завершения подготовки нажмите кнопку **Авторизовать**, войдите в свою учетную запись Dropbox и нажмите кнопку **Разрешить**.

	![Авторизация соединителя Dropbox.](./media/app-service-logic-create-a-logic-app/authorize.png)

	Это предоставит соединителю доступ к вашей учетной записи Dropbox. Отобразится список возможных операций, предоставляемых соединителем Dropbox.

4. Нажмите **Отправить файл**.

	Появится окно с параметрами Dropbox, которые необходимо установить, чтобы передавать данные из поиска Twitter в Dropbox.

	![DropBox](./media/app-service-logic-create-a-logic-app/dropbox.png)

3. В поле **FilePath** введите `/tweet.txt`.

4. В поле **Содержимое** нажмите кнопку `...` и выберите пункт **Текст твита**.

	Это вводит значение `@first(body('twitterconnector')).TweetText` в текстовое поле. Эта функция создает значение, содержащее следующие части.

	Часть содержимого | Описание
	------------------------------------------ | ------------
	 `@` | Указывает, что вы ввели функцию, а не фактическое значение.
	`actions('twitterconnector').outputs.body` | Получает твиты, извлеченные запросом соединителя Twitter.
	`first()` | Действие поиска твитов возвращает список, но вам нужно отправить один файл.
	`.TweetText` | Выбирает свойство сообщения твита.

5. Щелкните зеленую галочку, чтобы сохранить параметры соединителя.

5. Теперь, когда конструкция завершена, нажмите кнопку **Просмотр кода** в верхнем левом углу конструктора и обратите внимание, что это код JSON, который определяет рабочий процесс, только что созданный вами в конструкторе. Мы более подробно рассмотрим этот код в [следующем разделе][Use logic app features].

6. Нажмите кнопку **ОК** внизу экрана, а затем нажмите кнопку **Создать**.

	Новое приложение логики создано.

## Управление приложением логики после его создания

Теперь ваше приложение логики запущено и работает. Каждый раз, когда запускается запланированный рабочий процесс, он ищет твиты с конкретным хэш-тегом. Когда соответствующий твит обнаруживается, он отправляет его в вашу папку Dropbox. Теперь мы покажем, как отключать приложение, и вы увидите, как это работает.

1. Нажмите кнопку **Обзор** на левой стороне экрана и выберите пункт **Приложения логики**.

2. Щелкните новое приложение логики, которое вы только что создали, чтобы просмотреть его текущее состояние и общие сведения.

3. Чтобы изменить это новое приложение логики, нажмите **Триггеры и действия**.

5. Чтобы отключить приложение, нажмите кнопку **Отключить** в командной строке.

Менее чем за 5 минут вы смогли создать простое приложение логики, работающее в облаке. Дополнительные сведения об использовании функций приложений логики см. в статье [Использование функций приложения логики]. Дополнительные сведения об определениях логических приложений см. в статье [Создание определений приложений логики](app-service-logic-author-definitions.md).

<!-- Shared links -->
[Azure portal]: https://portal.azure.com
[Use logic app features]: app-service-logic-use-logic-app-features.md
[Использование функций приложения логики]: app-service-logic-use-logic-app-features.md

<!---HONumber=AcomDC_0114_2016-->