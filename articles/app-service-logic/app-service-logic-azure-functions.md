<properties
   pageTitle="Использование функций Azure с приложениями логики | Microsoft Azure"
   description="Узнайте, как использовать функции Azure с приложениями логики"
   services="logic-apps,functions"
   documentationCenter=".net,nodejs,java"
   authors="jeffhollan"
   manager="dwrede"
   editor=""/>

<tags
   ms.service="logic-apps"
   ms.devlang="multiple"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="integration"
   ms.date="09/01/2016"
   ms.author="jehollan"/>

# Использование функций Azure с приложениями логики

Настраиваемые фрагменты кода C# или Node.js можно выполнять с помощью функций Azure из приложения логики. [Функции Azure](../azure-functions/functions-overview.md) позволяют производить в Microsoft Azure вычисления без использования серверов. Это полезно для выполнения следующих задач.

* Форматирование значения действия (например, преобразование значения типа DateTime в строку даты).
* Выполнение вычислений в рабочем процессе
* Расширение функциональных возможностей приложений логики с помощью функций, поддерживаемых в C# или Node.js.

## Создание функции для приложения логики.

Мы рекомендуем создавать новые функции на портале функций Azure с помощью шаблонов **универсальный веб-перехватчик — узел** или **универсальный веб-перехватчик — C#**. Таким образом автоматически заполняется шаблон, который принимает `application/json` из приложения логики. Функции, которые используют эти шаблоны, обнаруживаются автоматически и включаются в список в разделе **Функции Azure в моем регионе** в конструкторе приложений логики.

Функции веб-перехватчика принимают запрос и передают его методу в виде переменной `data`. Для доступа к свойствам рабочей нагрузки можно использовать запись с точками типа `data.foo`. Вот пример простой функции JavaScript, которая преобразует значение DateTime в строку даты:

```
function start(req, res){
    var data = req.body;
    res = {
        body: data.date.ToDateString();
    }
}
```

## Вызов функций Azure из приложения логики

В меню **действий** в конструкторе вы можете выбрать пункт **Функции Azure в моем регионе**. Откроется список контейнеров в подписке, из которого вы сможете выбрать нужную функцию.

После выбора функции вам будет предложено указать объект входных данных. Это сообщение, которое должно быть объектом в формате JSON и которое приложение логики передает функции. Например, если вы хотите передать **дату последнего изменения** из триггера Salesforce, полезные данные функции могут выглядеть примерно так:

![Дата последнего изменения][1]

## Запуск приложения логики из функции

Приложение логики можно также запустить из самой функции. Для этого создайте приложение логики с ручным запуском. Дополнительные сведения см. в статье [Приложения логики как вызываемые конечные точки](app-service-logic-http-endpoint.md). Затем в функции создайте HTTP-запрос POST к URL-адресу ручного запуска, включающий полезные данные, которые нужно отправить в приложение логики.

### Создание функции из конструктора

Функцию веб-перехватчика node.js можно также создать из конструктора. Для начала выберите раздел **Функции Azure в моем регионе**, а затем контейнер для своей функции. Если у вас еще нет контейнера, его необходимо создать на [портале функций Azure](https://functions.azure.com/signin). Щелкните **Создать**.

Чтобы создать шаблон на основе данных для вычисления, укажите объект контекста, который будет передан в функцию. Это должен быть объект JSON. Например, если передать содержимое файла из действия FTP, полезные данные контекста будут выглядеть так:

![Полезные данные контекста][2]

>[AZURE.NOTE] Поскольку для объекта не выполнялось приведение к строковому типу, содержимое будет добавлено непосредственно в полезные данные JSON. Но если содержимое не является маркером JSON (т. е. строкой, объектом или массивом JSON), возникнет ошибка. Чтобы преобразовать содержимое в строку, просто заключите его в кавычки, как показано на первом рисунке в этой статье.

Затем конструктор создаст шаблон функции, который позволит создавать встроенные функции. Переменные создаются заранее в зависимости от содержимого, которое вы планируете передать в функцию.




<!--Image references-->
[1]: ./media/app-service-logic-azure-functions/callFunction.png
[2]: ./media/app-service-logic-azure-functions/createFunction.png

<!---HONumber=AcomDC_0907_2016-->