<properties
   pageTitle="Использование функций Azure с приложениями логики | Microsoft Azure"
   description="Узнайте, как использовать функции Azure с приложениями логики"
   services="app-service\logic,functions"
   documentationCenter=".net,nodejs,java"
   authors="jeffhollan"
   manager="dwrede"
   editor=""/>

<tags
   ms.service="app-service-logic"
   ms.devlang="multiple"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="integration"
   ms.date="05/14/2016"
   ms.author="jehollan"/>
   
# Использование функций Azure с приложениями логики

Настраиваемые фрагменты кода C# или Node.js можно выполнять с помощью функций Azure из приложения логики. [Функции Azure](../azure-functions/functions-overview.md) — это предложение, позволяющее выполнять бессерверные вычисления в Microsoft Azure. Их можно использовать в приложениях логики в многих из перечисленных ниже ситуаций:

* Форматирование значения действия (например, преобразование значения типа DateTime в строку даты)
* Выполнение вычислений в рабочем процессе
* Расширение функциональных возможностей приложения логики с помощью функций, поддерживаемых в C# или Node.js

## Создание функции Azure для приложений логики

Рекомендуется создать функцию Azure на портале функций, используя шаблон универсального веб-перехватчика узла или универсального веб-перехватчика C#. Это обеспечит автоматическое заполнение шаблона, принимающего `application/json` из приложения логики, а функции, использующие такие шаблоны, автоматически обнаруживаются и отображаются в конструкторе приложений логики в разделе "Функции Azure в моем регионе".

Функции веб-перехватчика принимают запрос и передают его методу в виде переменной `data`. Для доступа к свойствам рабочей нагрузки можно использовать запись с точками вида `data.foo`. Например, простая функция javascript, которая преобразует значение DateTime в строку даты, выглядит следующим образом:

```
function start(req, res){
    var data = req.body;
    res = {
        body: data.date.ToDateString();
    }
}
```

## Вызов функций Azure из приложения логики

Если щелкнуть раскрывающееся меню действий в конструкторе, можно выбрать раздел "Функции Azure в моем регионе". Откроется список контейнеров в подписке, где вы сможете выбрать нужную функцию. После выбора функции появится запрос на указание полезного объекта входных данных. Приложение логики отправляет это сообщение функции; оно должно представлять собой объект JSON. Например, если вы хотите передать дату последнего изменения из триггера Salesforce, полезные данные функции могут выглядеть следующим образом:

![][1]

## Запуск приложений логики из функции Azure

Приложение логики можно также запустить в самой функции. Для этого просто создайте приложение логики с ручным запуском (подробности см. [здесь](app-service-logic-http-endpoint.md)). Затем в функции Azure создайте HTTP-запрос POST к URL-адресу ручного запуска, включающий полезные данные, которые нужно отправить в приложение логики.

### Создание функции из конструктора

Функцию веб-перехватчика node.js можно также создать из конструктора. Для начала выберите раздел "Функции Azure в моем регионе", а затем контейнер для своей функции. Если у вас еще нет контейнера, его необходимо создать на [портале функций Azure](https://functions.azure.com/signin). Затем можно выбрать параметр "Создать". Чтобы создать шаблон на основе данных, которые нужно вычислить, укажите объект контекста для передачи в функцию. Это должен быть объект JSON. Например, при передаче содержимого файла из действия FTP полезные данные рабочей нагрузки будут выглядеть следующим образом:

![][2]

>[AZURE.NOTE] Так как этот объект не был выдан как строка за счет добавления кавычек, содержимое будет добавлено непосредственно в полезные данные JSON. Если это не маркер JSON (т. е. строка или объект либо массив JSON), возникнет ошибка. Чтобы получить строку, просто добавьте кавычки, как в приведенном выше примере Salesforce.

Затем конструктор автоматически создаст шаблон функции, который позволит создавать встроенные функции. Переменные создаются заранее в зависимости от содержимого, которое вы планируете передать в функцию.

<!--Image references-->
[1]: ./media/app-service-logic-azure-functions/callFunction.png
[2]: ./media/app-service-logic-azure-functions/createFunction.png

<!---HONumber=AcomDC_0525_2016-->