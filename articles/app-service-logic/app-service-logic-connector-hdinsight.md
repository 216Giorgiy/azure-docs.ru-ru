<properties 
   pageTitle="Соединитель HDInsight" 
   description="Использование соединителя HDInsight" 
   services="app-service\logic" 
   documentationCenter=".net,nodejs,java" 
   authors="anuragdalmia" 
   manager="dwrede" 
   editor=""/>

<tags
   ms.service="app-service-logic"
   ms.devlang="multiple"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="integration" 
   ms.date="03/20/2015"
   ms.author="sutalasi"/>


# Соединитель Microsoft HDInsight #

Соединители можно использовать в приложениях логики для извлечения, обработки или отправки данных в рамках потока. Соединитель HDInsight позволяет создавать кластеры Hadoop в Azure и отправлять различные задания Hadoop, такие как Hive, Pig, MapReduce и Streaming MapReduce. Azure HDInsight - служба, которая позволяет развернуть и подготовить в облаке кластеры Apache Hadoop, обеспечивая программную платформу для анализа, составления отчетов по большим данным и управления ими. Ядро Hadoop обеспечивает надежное хранение данных в распределенной файловой системе Hadoop (HDFS), а также простую модель программирования MapReduce для параллельной обработки и анализа данных, хранящихся в этой распределенной системе. С помощью соединителя HDInsight можно составлять кластер, отправлять задание и ожидать его завершения.

###Базовые действия
		
- Создать кластер
- Ожидать создания кластера
- Отправить задание Pig
- Отправить задание Hive
- Отправить задание MapReduce
- Ожидать завершения задания
- Удалить кластер


## Создание экземпляра приложения API соединителя HDInsight. ##

Чтобы использовать соединитель HDInsight, необходимо создать экземпляр приложения API соединителя HDInsight. Это можно сделать следующим образом.

1. Откройте Azure Marketplace, нажав кнопку '+ СОЗДАТЬ' в нижнем левом углу портала Azure.
2. Перейдите в раздел "Мобильные и веб-приложения > Приложения API" и найдите элемент "Соединитель HDInsight".
3. Предоставьте общие сведения, такие как имя, план обслуживания приложения и т. д., в первой колонке.
4. В рамках параметров пакета укажите имя пользователя и пароль кластера HDInsight


 ![][1]  

## Конфигурация сертификата (дополнительно) ##

Примечание. Этот шаг необходим только в том случае, если нужно выполнять операции управления (создание и удаление кластеров) в приложении логики.

Перейдите в только что созданное приложение API, последовательно выбрав "Обзор -> Приложения API -> <Имя созданного приложения API>". Далее произойдет следующее. Для компонента  'Безопасность' отобразится 0 - это означает, что сертификат управления не загружен.

![][2] 

Для загрузки сертификата управления в приложение API необходимо выполнить следующие действия.
1. Щелкните компонент  'Безопасность'.
2. Нажмите  Загрузить сертификат' в открывшейся области  'Безопасность'.
3. Найдите и выберите файл сертификата в области "Далее".
4. После выбора сертификата нажмите кнопку "ОК".

После успешной загрузки сертификата отобразятся сведения о сертификате.

![][3] 

Примечание. В случае если вы хотите изменить сертификат, можно загрузить другой сертификат, который заменит существующий.

## Использование в приложении логики ##

Соединитель HDInsight может использоваться только в качестве действия в приложении логики. Возьмем простое приложение логики, которое создает кластер, запускает задание  'Hive' и удаляет кластер по завершении задания.


- После создания и редактирования приложения логики выберите приложение API соединителя HDInsight, созданное в качестве действия. Отобразятся все доступные действия.

![][5] 


- Выберите 'Создать кластер', задайте все необходимые параметры кластера и нажмите кнопку ✓.

![][6] 



- Действие отобразится в приложении логики как настроенное. Будут показаны результаты действия, которые можно использовать в качестве входных данных в следующих действиях. 

![][7] 



- Выберите тот же соединитель HDInsight из коллекции в качестве действия. Выберите действие  'Ждать для создания кластера', укажите необходимые параметры и нажмите кнопку ✓.

![][8] 



- Выберите тот же соединитель HDInsight из коллекции в качестве действия. Выберите действие  'Отправить задание Hive', укажите все необходимые параметры и нажмите кнопку ✓.

![][9] 



- Выберите тот же соединитель HDInsight из коллекции в качестве действия. Выберите действие  'Ждать завершения задания', введите все необходимые параметры и нажмите кнопку ✓.

![][10] 



- Выберите тот же соединитель HDInsight из коллекции в качестве действия. Выберите действие  'Отправить задание Hive', укажите все необходимые параметры и нажмите кнопку ✓.

![][11] 


Можно нажать  'Запустить' для запуска приложения логики вручную для тестирования этого сценария.

<!--Image references-->
[1]: ./media/app-service-logic-connector-hdinsight/Create.jpg
[2]: ./media/app-service-logic-connector-hdinsight/CertNotConfigured.jpg
[3]: ./media/app-service-logic-connector-hdinsight/CertConfigured.jpg
[5]: ./media/app-service-logic-connector-hdinsight/LogicApp1.jpg
[6]: ./media/app-service-logic-connector-hdinsight/LogicApp2.jpg
[7]: ./media/app-service-logic-connector-hdinsight/LogicApp3.jpg
[8]: ./media/app-service-logic-connector-hdinsight/LogicApp4.jpg
[9]: ./media/app-service-logic-connector-hdinsight/LogicApp5.jpg
[10]: ./media/app-service-logic-connector-hdinsight/LogicApp6.jpg
[11]: ./media/app-service-logic-connector-hdinsight/LogicApp7.jpg


<!--HONumber=52--> 