<properties
   pageTitle="Соединитель HDInsight"
   description="Использование соединителя HDInsight"
   services="app-service\logic"
   documentationCenter=".net,nodejs,java"
   authors="anuragdalmia"
   manager="dwrede"
   editor=""/>

<tags
   ms.service="app-service-logic"
   ms.devlang="multiple"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="integration"
   ms.date="07/02/2015"
   ms.author="sameerch"/>


# Соединитель Microsoft HDInsight #

Соединители можно использовать в приложениях логики для извлечения, обработки или отправки данных в рамках потока. Соединитель HDInsight позволяет создавать кластеры Hadoop в Azure и отправлять различные задания Hadoop, такие как Hive, Pig, MapReduce и Streaming MapReduce. Azure HDInsight — служба, которая позволяет развернуть и подготовить в облаке кластеры Apache Hadoop, обеспечивая программную платформу для анализа, составления отчетов по большим данным и управления ими. Ядро Hadoop обеспечивает надежное хранение данных в распределенной файловой системе Hadoop (HDFS), а также простую модель программирования MapReduce для параллельной обработки и анализа данных, хранящихся в этой распределенной системе. С помощью соединителя HDInsight можно создать или удалить кластер, отправить задание и ожидать его завершения.

###Базовые действия

- Создать кластер
- Ожидать создания кластера
- Отправить задание Pig
- Отправить задание Hive
- Отправить задание MapReduce
- Ожидать завершения задания
- Удалить кластер


## Создание экземпляра приложения API соединителя HDInsight. ##

Чтобы использовать соединитель HDInsight, необходимо создать экземпляр приложения API соединителя HDInsight. Это можно сделать следующим образом.

1. Откройте Azure Marketplace с помощью параметра "+ СОЗДАТЬ" в левой части портала Azure и выберите Marketplace.
2. Перейдите в раздел "Приложения API" и найдите "Соединитель HDInsight", выберите его и щелкните "Создать".
3. Предоставьте общие сведения, такие как имя, план служб приложений и т. д., в первой колонке.
4. В рамках параметров пакета укажите имя пользователя и пароль кластера HDInsight, затем нажмите кнопку "ОК".
5. Щелкните "Создать".


 ![][1]

## Конфигурация сертификата (необязательно) ##

Примечание. Этот шаг требуется только в том случае, если необходимо выполнять операции управления (создание и удаление кластеров) в приложении логики.

Перейдите к только что созданному приложению API соединителя HDInsight, и вы увидите, что компонент "Безопасность" показывает 0. Это значит, что сертификат управления не передан.

![][2]

Для передачи сертификата управления в приложение API необходимо выполнить следующее. 1. Щелкните компонент "Безопасность". 2. В колонке "Безопасность" щелкните "ЗАГРУЗИТЬ СЕРТИФИКАТ". 3. Найдите и выберите файл сертификата в следующей колонке. 4. После выбора сертификата нажмите кнопку "ОК".

После успешной загрузки сертификата отобразятся сведения о сертификате.

![][3]

Примечание. Если вы хотите изменить сертификат, можно передать другой сертификат, который заменит существующий.

## Использование в приложении логики ##

Соединитель HDInsight может использоваться только в качестве действия в приложении логики. Возьмем простое приложение логики, которое создает кластер, запускает задание Hive и удаляет кластер по завершении задания.


- В карте "Запуск логики" щелкните "Выполнить эту логику вручную".
- Выберите приложение API соединителя HDInsight, созданное из коллекции, и будут показаны все доступные действия.

![][5]


- Выберите "Создать кластер", задайте все необходимые параметры кластера и щелкните ✓.

![][6]



- Действие отобразится в приложении логики как настроенное. Будут показаны результаты действия, которые можно использовать в качестве входных данных в следующих действиях.

![][7]



- Выберите тот же соединитель HDInsight из коллекции в качестве действия. Выберите действие "Ожидать создания кластера", укажите необходимые параметры и щелкните ✓.

![][8]



- Выберите тот же соединитель HDInsight из коллекции в качестве действия. Выберите действие "Отправить задание Hive", укажите все необходимые параметры и щелкните ✓.

![][9]



- Выберите тот же соединитель HDInsight из коллекции в качестве действия. Выберите действие "Ожидать завершения задания", введите все необходимые параметры и щелкните ✓.

![][10]



- Выберите тот же соединитель HDInsight из коллекции в качестве действия. Выберите действие "Удалить кластер", укажите все необходимые параметры и щелкните ✓.

![][11]

- Сохраните приложение логики с помощью команды сохранения в верхней части рабочей области конструктора.

Можно щелкнуть "Запустить", чтобы запустить приложение логики вручную для тестирования сценария.

<!--Image references-->
[1]: ./media/app-service-logic-connector-hdinsight/Create.jpg
[2]: ./media/app-service-logic-connector-hdinsight/CertNotConfigured.jpg
[3]: ./media/app-service-logic-connector-hdinsight/CertConfigured.jpg
[5]: ./media/app-service-logic-connector-hdinsight/LogicApp1.jpg
[6]: ./media/app-service-logic-connector-hdinsight/LogicApp2.jpg
[7]: ./media/app-service-logic-connector-hdinsight/LogicApp3.jpg
[8]: ./media/app-service-logic-connector-hdinsight/LogicApp4.jpg
[9]: ./media/app-service-logic-connector-hdinsight/LogicApp5.jpg
[10]: ./media/app-service-logic-connector-hdinsight/LogicApp6.jpg
[11]: ./media/app-service-logic-connector-hdinsight/LogicApp7.jpg

<!---HONumber=July15_HO4-->