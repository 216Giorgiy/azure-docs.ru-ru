<properties
   pageTitle="Использование соединителя HDInsight в приложениях логики | Служба приложений Microsoft Azure"
   description="Как создать и настроить соединитель HDInsight или приложение API и использовать его в приложении логики в службе приложений Azure"
   services="app-service\logic"
   documentationCenter=".net,nodejs,java"
   authors="anuragdalmia"
   manager="dwrede"
   editor=""/>

<tags
   ms.service="app-service-logic"
   ms.devlang="multiple"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="integration"
   ms.date="01/12/2016"
   ms.author="sameerch"/>


# Приступая к работе с соединителем HDInsight: добавление в приложение логики
Соединитель HDInsight позволяет создать кластер Hadoop в Azure и отправлять различные задания Hadoop, такие как Hive, Pig, MapReduce и Streaming MapReduce. Azure HDInsight — служба, которая позволяет развернуть и подготовить в облаке кластеры Apache Hadoop, обеспечивая программную платформу для анализа, составления отчетов по большим данным и управления ими. Ядро Hadoop обеспечивает надежное хранение данных в распределенной файловой системе Hadoop (HDFS), а также простую модель программирования MapReduce для параллельной обработки и анализа данных, хранящихся в этой распределенной системе. С помощью соединителя HDInsight можно создать или удалить кластер, отправить задание и ожидать его завершения.

Соединители можно использовать в приложениях логики для извлечения, обработки или отправки данных в рамках потока. Соединитель HDInsight можно добавить в рабочий процесс компании и обрабатывать данные в рамках этого процесса в приложении логики.

### Базовые действия

- Создать кластер
- Ожидать создания кластера
- Отправить задание Pig
- Отправить задание Hive
- Отправить задание MapReduce
- Ожидать завершения задания
- Удалить кластер


## Создание приложения API соединителя HDInsight ##

Соединитель можно создать в приложении логики или непосредственно в Azure Marketplace. Создание соединителя в Marketplace

1. На начальной панели Azure выберите **Marketplace**.
2. Выполните поиск по запросу «Соединитель HDInsight», выберите его, а затем щелкните **Создать**.
3. Введите имя, план службы приложений и другие свойства.
4. В параметрах пакета укажите имя пользователя и пароль кластера HDInsight. Нажмите кнопку **ОК**.
5. Нажмите кнопку **Создать**. ![][1]  

## Конфигурация сертификата (необязательно) ##

> [AZURE.NOTE]Этот шаг необходим только в том случае, если нужно выполнять операции управления (создание и удаление кластеров) в приложении логики.

Перейдите к только что созданному приложению API соединителя HDInsight, и вы увидите, что компонент «Безопасность» показывает 0. Это значит, что сертификат управления не передан. ![][2]

Чтобы загрузить сертификат управления в приложение API, выполните следующие действия:

1. выберите компонент "Безопасность";
2. В колонке «Безопасность» щелкните **ПЕРЕДАЧА СЕРТИФИКАТА**.
3. Найдите и выберите файл сертификата в следующей колонке.
4. Выбрав сертификат, нажмите кнопку **ОК**.

После успешной передачи отобразится информация о сертификате: ![][3]

> [AZURE.NOTE]Если вы хотите изменить сертификат, передайте другой сертификат, который заменит существующий.

## Использование соединителя в приложении логики ##

Соединитель HDInsight может использоваться только в качестве действия в приложении логики. Возьмем простое приложение логики, которое создает кластер, запускает задание Hive и удаляет кластер после завершения задания.


1. В карте "Запуск логики" щелкните "Выполнить эту логику вручную".
2. Выберите созданное ранее приложение API соединителя HDInsight в коллекции. (Созданный соединитель HDInsight можно найти в списке приложений API в правой части экрана.) Щелкните жирную стрелку вправо. Доступны следующие действия: ![][12]

3. Выберите действие «Создать кластер», задайте все необходимые параметры кластера и щелкните ✓: ![][6]

4. Действие будет показано в приложении логики как настроенное. Будут показаны результаты действия, которые можно использовать в качестве входных данных в следующих действиях: ![][7]

5. Выберите тот же соединитель HDInsight из коллекции в качестве действия. Выберите действие «Ожидать создания кластера», укажите необходимые параметры и щелкните ✓:![][8]

6. Выберите тот же соединитель HDInsight из коллекции в качестве действия. Выберите действие «Отправить задание Hive», укажите все необходимые параметры и щелкните ✓: ![][9]

7. Выберите тот же соединитель HDInsight из коллекции в качестве действия. Выберите действие «Ожидать завершения задания», укажите необходимые параметры и щелкните ✓: ![][10]

8. Выберите тот же соединитель HDInsight из коллекции в качестве действия. Выберите действие «Удалить кластер», укажите все необходимые параметры и щелкните ✓: ![][11]

9. Сохраните приложение логики с помощью команды сохранения в верхней части окна конструктора.

Чтобы протестировать сценарий, выберите команду **Выполнить сейчас**, которая позволяет запустить приложение логики вручную.

## Дополнительные возможности соединителя
После создания соединителя его можно добавить в рабочий бизнес-процесс с помощью приложения логики. См. раздел [Что такое приложения логики?](app-service-logic-what-are-logic-apps.md).

>[AZURE.NOTE]Если вы хотите начать работу с приложениями логики Azure до создания учетной записи Azure, перейдите на веб-сайт [пробного использования приложений логики](https://tryappservice.azure.com/?appservice=logic). На этом сайте вы сможете быстро создать кратковременное приложение логики начального уровня в службе приложений. Никаких кредитных карт и обязательств.

Справку по API REST Swagger см. в статье [Справочные материалы по соединителям и приложениям API](http://go.microsoft.com/fwlink/p/?LinkId=529766).

Можно также просматривать статистику производительности и управлять безопасностью соединителя. См. статью [Управление встроенными приложениями API и соединителями, а также их мониторинг](app-service-logic-monitor-your-connectors.md).


<!--Image references-->
[1]: ./media/app-service-logic-connector-hdinsight/Create.png
[2]: ./media/app-service-logic-connector-hdinsight/CertNotConfigured.png
[3]: ./media/app-service-logic-connector-hdinsight/CertConfigured.png
[5]: ./media/app-service-logic-connector-hdinsight/LogicApp1.png
[6]: ./media/app-service-logic-connector-hdinsight/LogicApp2.png
[7]: ./media/app-service-logic-connector-hdinsight/LogicApp3.png
[8]: ./media/app-service-logic-connector-hdinsight/LogicApp4.png
[9]: ./media/app-service-logic-connector-hdinsight/LogicApp5.png
[10]: ./media/app-service-logic-connector-hdinsight/LogicApp6.png
[11]: ./media/app-service-logic-connector-hdinsight/LogicApp7.png
[12]: ./media/app-service-logic-connector-hdinsight/LogicApp8.PNG

<!---HONumber=AcomDC_0114_2016-->