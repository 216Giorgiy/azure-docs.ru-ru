<properties
	pageTitle="Использование соединителя SFTP в приложениях логики | Служба приложений Microsoft Azure"
	description="Как создать и настроить соединитель SFTP или приложение API и использовать его в приложении логики в службе приложений Azure"
	authors="anuragdalmia"
	manager="erikre"
	editor=""
	services="app-service\logic"
	documentationCenter=""/>

<tags
	ms.service="app-service-logic"
	ms.workload="integration"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="03/16/2016"
	ms.author="sameerch"/>

# Приступая к работе с соединителем SFTP: добавление в приложение логики
>[AZURE.NOTE] Эта версия статьи предназначена для приложений логики со схемой версии 2014-12-01-preview. Чтобы узнать версию схемы 2015-08-01-preview, щелкните [API SFTP](../connectors/connectors-create-api-sftp.md).

Используйте соединитель SFTP, чтобы перемещать данные с SFTP-сервера и на него. Можно скачивать файлы с SFTP-сервера, передавать файлы на SFTP-сервер и перечислять их на нем.

Приложения логики могут запускаться на основе разных источников данных и предлагать соединители для получения и обработки данных в рамках потока. Соединитель SFTP можно добавить в рабочий процесс компании и обрабатывать данные в рамках этого процесса приложения логики.

## Создание соединителя SFTP для приложения логики ##
Соединитель можно создать в приложении логики или непосредственно в Azure Marketplace. Создание соединителя в Marketplace

1. На начальной панели Azure выберите **Marketplace**.
2. Выполните поиск по запросу «Соединитель SFTP», выберите его, а затем нажмите **Создать**.
3. Настройте соединитель SFTP следующим образом. ![][1]
	- **Расположение** — выберите географическое расположение, где планируется развернуть соединитель.
	- **Подписка** — выберите подписку, в которой нужно создать соединитель.
	- **Группа ресурсов** — выберите или создайте группу ресурсов, в которой следует разместить соединитель.
	- **План размещения веб-сайтов** — выберите или создайте план размещения веб-сайтов.
	- **Ценовая категория** — выберите ценовую категорию для соединителя.
	- **Имя** — назначьте имя этому соединителю SFTP.
	- **Параметры пакета**
		- **Адрес сервера** — укажите имя или IP-адрес SFTP-сервера.
		- **Принять любой HostKey сервера SSH** — определяет, должны ли приниматься все отпечатки открытого хост-ключа SSH с сервера. Если задано значение false, хост-ключ будет сопоставлен с ключом, указанным в свойстве "Отпечаток хост-ключа сервера SSH".
		- **Хост-ключ сервера SSH** — укажите отпечаток открытого хост-ключа для сервера SSH (*необязательно*).
		- **Корневая папка** — укажите путь к корневой папке. Если это значение пустое, используется корневой каталог по умолчанию.
		- **Шифр шифрования** — укажите шифр шифрования (*необязательно*).
		- **Порт сервера** — укажите номер порта SFTP-сервера.
4. Нажмите кнопку "Создать". Будет создан новый соединитель SFTP.

5. Перейдите в только что созданное приложение API, последовательно выбрав «Обзор» > «Приложения API» > <Name of the API App just created>. Вы увидите, что компонент «Безопасность» не настроен. ![][2]
6. Щелкните компонент "Безопасность" для настройки безопасности (имя пользователя, пароль, закрытый ключ, пароль файла PPK) для соединителя SFTP. Перейдите на вкладку авторизации «Пароль», «Закрытый ключ» или «Многофакторная проверка» в разделе «Безопасность» и укажите необходимые свойства. ![][3] ![][4] ![][5]  
6. После сохранения конфигурации безопасности можно создать логику приложения в той же группе ресурсов для использования соединителя SFTP.

## Использование соединителя SFTP в приложении логики ##
После создания приложения API можно будет использовать соединитель SFTP как триггер или действие для приложения логики. Для этого необходимо выполнить следующие действия.

1.	Создайте новое приложение логики и выберите ту же группу ресурсов, что и у соединителя SFTP. ![][6]
2.	Откройте раздел «Триггеры и действия», чтобы открыть конструктор приложений логики и настроить поток. ![][7]
3.	Соединитель SFTP отображается в разделе «Приложения API в этой группе ресурсов» в коллекции справа. ![][8]
4.	Приложение API соединителя SFTP можно удалить в редакторе, щелкнув «Соединитель SFTP».

5.	Теперь можно использовать соединитель SFTP в потоке. Можно использовать файл, извлеченный из триггера SFTP (TriggerOnFileAvailable), для других действий в потоке.

	> [AZURE.IMPORTANT] Триггер SFTP TriggerOnFileAvailable удаляет извлеченный файл после его обработки.

6.	Настройте входные свойства для триггера SFTP следующим образом.

	- **Путь к папке** — укажите путь к папке, из которой нужно извлечь файлы.
	- **Тип файла: текстовый или двоичный** — выберите тип файла.
	- **Маска файла** – укажите маску файла, которую необходимо применять для получения файлов. Символ * получает все файлы из указанной папки.
- **Маска исключения файлов** — укажите маску файла, которая будет применяться для исключения файлов. Если также задано свойство "Маска файла", сначала будет применено свойство "Маска исключения файлов".


	![][9] ![][10]

7.	Аналогичным образом вы можете использовать действия SFTP в потоке. Можно использовать действие "Передать файл" для передачи файла на SFTP-сервер. Настройте входные свойства для действия "Передать файл" следующим образом.

	- **Содержимое** — задает содержимое файла для отправки.
	- **Кодировка передачи содержимого** — укажите "нет" или base64.
	- **Путь к файлу** — задайте путь к файлу для передачи.
	- **Перезаписать** — укажите true, чтобы перезаписать файл, если он уже существует.
	- ****Добавить, если существует** — указать true или false. При установке значения true данные добавляются в этот файл, если он существует. При установке значения false существующий файл будет перезаписан.
- **Временная папка** — если значение указано, то адаптер отправит файл по пути к временной папке, а после завершения отправки этот файл будет перемещен в папку, указанную в параметре "Путь к папке". Папка, указанная в параметре "Путь к временной папке", должна находиться на одном физическом диске с папкой, указанной в параметре "Путь к папке", для обеспечения элементарной операции перемещения. Временная папка может использоваться, только если свойство "Добавить, если существует" отключено.

	![][11] ![][12]

## Дополнительные возможности соединителя
После создания соединителя его можно добавить в рабочий бизнес-процесс с помощью приложения логики. См. раздел [Что такое приложения логики?](app-service-logic-what-are-logic-apps.md).

>[AZURE.NOTE] Если вы хотите начать работу с приложениями логики Azure до создания учетной записи Azure, перейдите на веб-сайт [пробного использования приложений логики](https://tryappservice.azure.com/?appservice=logic). На этом сайте вы сможете быстро создать кратковременное приложение логики начального уровня в службе приложений. Никаких кредитных карт и обязательств.

Справку по API REST Swagger см. в статье [Справочные материалы по соединителям и приложениям API](http://go.microsoft.com/fwlink/p/?LinkId=529766).

Можно также просматривать статистику производительности и управлять безопасностью соединителя. См. статью [Управление встроенными приложениями API и соединителями, а также их мониторинг](app-service-logic-monitor-your-connectors.md).


<!-- Image reference -->
[1]: ./media/app-service-logic-connector-sftp/img1.PNG
[2]: ./media/app-service-logic-connector-sftp/img2.PNG
[3]: ./media/app-service-logic-connector-sftp/img3.PNG
[4]: ./media/app-service-logic-connector-sftp/img4.PNG
[5]: ./media/app-service-logic-connector-sftp/img5.PNG
[6]: ./media/app-service-logic-connector-sftp/img6.PNG
[7]: ./media/app-service-logic-connector-sftp/img7.png
[8]: ./media/app-service-logic-connector-sftp/img8.png
[9]: ./media/app-service-logic-connector-sftp/img9.PNG
[10]: ./media/app-service-logic-connector-sftp/img10.PNG
[11]: ./media/app-service-logic-connector-sftp/img11.PNG
[12]: ./media/app-service-logic-connector-sftp/img12.PNG

<!---HONumber=AcomDC_0323_2016-->