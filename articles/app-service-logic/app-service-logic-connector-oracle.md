<properties 
   pageTitle="Соединитель Oracle" 
   description="Использование соединителя Oracle" 
   services="app-service\logic" 
   documentationCenter=".net,nodejs,java" 
   authors="anuragdalmia" 
   manager="dwrede" 
   editor=""/>

<tags
   ms.service="app-service-logic"
   ms.devlang="multiple"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="integration" 
   ms.date="03/20/2015"
   ms.author="sutalasi"/>


# Соединитель баз данных Oracle #

Соединители можно использовать в приложениях логики для извлечения, обработки или отправки данных в рамках потока. Соединитель Oracle в потоке позволяет реализовать множество сценариев. Вот несколько примеров.  

1.	Предоставление раздела данных, размещенных в базе данных Oracle, через Интернет или внешний интерфейс мобильного пользователя.
2.	Вставка данных в таблицу базы данных Oracle для хранения (например, записи сотрудников, заказы на продажу и т. д.)
3.	Извлечение данных из Oracle для использования в бизнес-процессе

Для реализации этих сценариев необходимо выполнить следующее. 

1. Создание экземпляра приложения API соединителя Oracle
2. Установите гибридное подключение для приложения API в целях обмена данными с локальным сервером Oracle.
3. Использование созданного приложения API в приложении логики для реализации нужного бизнес-процесса

	###Основные триггеры и действия
		
    - Данные опроса (триггер) 
    - Вставить в таблицу
    - Обновить таблицу
    - Выбрать из таблицы
    - Удалить из таблицы
    - Вызов хранимой процедуры

## Создание экземпляра приложения API соединителя базы данных Oracle ##

Чтобы использовать соединитель Oracle, необходимо создать экземпляр приложения API соединителя Oracle. Это можно сделать следующим образом.

1. Откройте Azure Marketplace, нажав кнопку '+ СОЗДАТЬ' в нижнем левом углу портала Azure.
2. Перейдите в раздел "Мобильные и веб-приложения > Приложения API" и найдите элемент "Соединитель Oracle".
3. Предоставьте общие сведения, такие как имя, план обслуживания приложения и т. д., в первой колонке.
4. Укажите параметры пакета, представленные в следующей таблице.

<style type="text/css">
	table.tableizer-table {
	border: 1px solid #CCC; font-family: Arial, Helvetica, sans-serif;
	font-size: 12px;
} 
.tableizer-table td {
	padding: 4px;
	margin: 3px;
	border: 1px solid #ccc;
}
.tableizer-table th {
	background-color: #525B64; 
	color: #FFF;
	font-weight: bold;
}
</style><table class="tableizer-table">
<tr class="tableizer-firstrow"><th>Имя</th><th>Обязательно</th><th>Описание</th></tr>
 <tr><td>Источник данных</td><td>Да</td><td>Имя источника (сетевой службы) данных, которое указано в файле tnsnames.ora на компьютере, где установлен клиент Oracle. Дополнительные сведения об именах источников данных и файле tnsnames.ora см. в разделе [Настройка клиента Oracle]</td></tr>
 <tr><td>Имя пользователя</td><td>Да</td><td>Укажите допустимое имя пользователя для подключения к серверу Oracle.</td></tr>
 <tr><td>Пароль</td><td>Да</td><td>Укажите допустимый пароль для подключения к серверу Oracle.</td></tr>
 <tr><td>Строка подключения к служебной шине</td><td>Да</td><td>Необязательный параметр. Задайте этот параметр, если сервер Oracle является локальным. Это должна быть допустимая строка подключения к пространству имен служебной шины. Вам потребуется установить агент прослушивателя на сервере, который имеет доступ к вашему серверу Oracle. Можно перейти на страницу сводных данных по приложению API и выбрать команду "Гибридное подключение' для установки агента.</td></tr>
 <tr><td>Таблицы</td><td>Нет</td><td>Необязательный параметр. Укажите таблицы базы данных, которые можно изменить с помощью соединителя. Например: OrdersTable, EmployeeTable</td></tr>
 <tr><td>Хранимые процедуры</td><td>Нет</td><td>Необязательный параметр. Укажите хранимые процедуры в базе данных, которые могут вызываться с помощью соединителя. Например: IsEmployeeEligible, CalculateOrderDiscount</td></tr>
 <tr><td>Функции</td><td>Нет</td><td>Необязательный параметр. Укажите функции в базе данных, которые могут быть вызваны с помощью соединителя. Например: IsEmployeeEligible, CalculateOrderDiscount</td></tr>
 <tr><td>Пакет сущностей</td><td>Нет</td><td>Необязательный параметр. Укажите пакеты в базе данных, которые могут вызываться с помощью соединителя. Например: PackageOrderProcessing.CompleteOrder, PackageOrderProcessing.GenerateBill</td></tr>
 <tr><td>Инструкция доступных данных</td><td>Нет</td><td>Необязательный параметр. Укажите инструкцию для определения доступности данных для опроса. Пример: ВЫБЕРИТЕ * from table_name</td></tr>
 <tr><td>Тип опроса</td><td>Нет</td><td>Необязательный параметр. Укажите тип опроса. Допустимыми значениями являются "Выбор", "Процедура", "Функция" и "Пакет"</td></tr>
 <tr><td>Инструкция опроса</td><td>Нет</td><td>Необязательный параметр. Укажите инструкцию для опроса серверной базы данных Oracle. Пример: SELECT * from table_name</td></tr>
 <tr><td>Инструкция после опроса</td><td>Нет</td><td>Необязательный параметр. Укажите инструкцию для выполнения после опроса. Пример: DELETE * from table_name.</td></tr>
</table>



 ![][1]  

## Гибридная конфигурация ##

Перейдите в только что созданное приложение API, последовательно выбрав "Обзор" -> "Приложения API" -> <Имя созданного приложения API>, и вы увидите следующее поведение. Настройка не завершена, поскольку гибридное подключение еще не установлено.

![][2] 

Чтобы установить гибридное подключение, выполните следующие действия.

1. Скопируйте основную строку подключения.
2. Щелкните ссылку  Загрузить и настроить'.
3. Выполните инициированный процесс установки и при запросе предоставьте основную строку подключения.
4. После завершения процесса установки появится диалоговое окно, подобное приведенному ниже.

![][3] 

Теперь, если вы снова перейдете в созданное приложение API, то увидите, что гибридное подключение имеет состояние "Подключено". 

![][4] 

Примечание. Если вы хотите переключиться на дополнительную строку подключения, просто повторите установку гибридного подключения и вместо основной строки подключения предоставьте дополнительную.  

## Использование в приложении логики ##

Соединитель Oracle может быть использован в приложении логики только как триггер/действие. Триггер и все действия поддерживают формат данных JSON и XML. Для каждой таблицы, которая предоставляется в рамках параметров пакета, имеется набор действий JSON и XML. При использовании триггера/действия XML можно использовать приложение API преобразования для преобразования данных в другой формат XML-данных. 

Возьмем простое приложение логики, которое запрашивает данные из таблицы Oracle, добавляет данные в другую таблицу и обновляет данные.



-  При создании/изменении приложения логики выберите приложение API соединителя Oracle, созданное в качестве триггера. Будет выведен список доступных триггеров - данные опроса (JSON) и данные опроса (XML).

 ![][5] 


- Выберите триггер - данные опроса (JSON), укажите частоту и нажмите кнопку ✓.

![][6] 



- Триггер будет показан в приложении логики как настроенный. Будут отображены результаты триггера, которые можно использовать в качестве входных данных в следующих действиях. 

![][7] 


- Выберите тот же соединитель Oracle из коллекции в качестве действия. Выберите одно из действий вставки - "Вставить в TempEmployeeDetails (JSON)".

![][8] 



- Предоставьте входные данные записи для вставки и нажмите кнопку ✓. 

![][9] 



- Выберите тот же соединитель Oracle из коллекции в качестве действия. Выберите действие обновления для той же таблицы (например, Update EmployeeDetails)

![][11] 



- Предоставьте входные данные для действия обновления и нажмите кнопку ✓. 

![][12] 

Можно проверить логику приложения, добавив новую запись в опрашиваемой таблице.

<!--Image references-->
[1]: ./media/app-service-logic-connector-oracle/Create.jpg
[2]: ./media/app-service-logic-connector-oracle/BrowseSetupIncomplete.jpg
[3]: ./media/app-service-logic-connector-oracle/HybridSetup.jpg
[4]: ./media/app-service-logic-connector-oracle/BrowseSetupComplete.jpg
[5]: ./media/app-service-logic-connector-oracle/LogicApp1.jpg
[6]: ./media/app-service-logic-connector-oracle/LogicApp2.jpg
[7]: ./media/app-service-logic-connector-oracle/LogicApp3.jpg
[8]: ./media/app-service-logic-connector-oracle/LogicApp4.jpg
[9]: ./media/app-service-logic-connector-oracle/LogicApp5.jpg
[10]: ./media/app-service-logic-connector-oracle/LogicApp6.jpg
[11]: ./media/app-service-logic-connector-oracle/LogicApp7.jpg
[12]: ./media/app-service-logic-connector-oracle/LogicApp8.jpg

<!--Links-->
[Настройка клиента Oracle]: https://msdn.microsoft.com/ru-ru/library/dd787872.aspx



<!--HONumber=52--> 