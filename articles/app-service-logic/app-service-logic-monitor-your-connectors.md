<properties
	pageTitle="Управление соединителями и приложениями API и их мониторинг в службе приложений Azure | Microsoft Azure"
	description="Просмотр метрик производительности соединителей и приложений API в Logic Apps. Архитектура микрослужб."
	services="app-service\logic"
	documentationCenter=".net,nodejs,java"
	authors="MandiOhlinger"
	manager="dwrede"
	editor="cgronlun"/>

<tags
	ms.service="logic-apps"
	ms.workload="integration"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="07/28/2016"
	ms.author="mandia"/>

# Управление встроенными приложениями API и соединителями, а также их мониторинг

>[AZURE.NOTE] Эта версия статьи предназначена для приложений логики со схемой версии 2014-12-01-preview.

Вы создали встроенное приложение API. Что дальше?

Размещенные в Azure приложения API — это отдельные веб-сайты. Следовательно, вы можете без труда просматривать не только количество отправленных запросов, но и объем данных, используемых соединителем. Кроме того, вы можете выполнять резервное копирование приложения API, создавать оповещения, включать Tinfoil Security и добавлять пользователей и роли.

В этом разделе описаны некоторые из доступных возможностей управления приложением API.

Для отображения этих встроенных функций откройте приложение API на [портале Azure](http://go.microsoft.com/fwlink/p/?LinkID=525040). Если приложение API закреплено на начальной панели, выберите его, чтобы открыть окно свойств. Кроме того, можно нажать кнопку **Обзор**, щелкнуть **Приложения API** и выбрать необходимое приложение API.

![][browse]

## Просмотр заданных свойств

После открытия приложения API становятся доступными несколько функций и задач.

![][settings]

Вы можете:

- Элемент **Параметры** отображает определенные сведения о приложении API, включая сведения о подписке, а также список пользователей, имеющих доступ к этому приложению. Кроме того, вы можете увеличить или уменьшить количество экземпляров приложения API с помощью функции масштабирования (помимо других функций).
- С помощью кнопок **Запустить** и **Остановить** можно управлять приложением API.
- При обновлении базовых файлов, используемых приложением API, можно щелкнуть **Обновить**, чтобы получить последние версии. Например, если доступно выпущенное корпорацией Майкрософт исправление или обновление для системы безопасности, то можно щелкнуть **Обновить**, чтобы автоматически запустить обновление приложения API.
- Выберите элемент **Изменить план**, чтобы, в зависимости от использования данных приложения API, запустить обновление или перейти на использование более ранней версии. Кроме того, вы можете с помощью этой функции просматривать сведения об использовании данных.
- При создании соединителя, который содержит таблицы (например, соединителя SQL), при необходимости можно ввести имя таблицы для подключения. Если щелкнуть **Скачать схемы**, то будет автоматически создана и станет доступной схема на основе таблицы. Затем эту загруженную схему можно использовать для создания преобразования или карты.

## Изменение соединителя или заданных значений конфигурации API

После настройки или создания встроенного соединителя вы можете изменить введенные значения. Например, если после настройки соединителя SQL вам нужно изменить имя сервера SQL Server или имя таблицы, вы можете сделать это в колонке приложения API, относящейся к вашему соединителю.

Вот какие действия для этого нужно выполнить:

1. Откройте соединитель или приложение API. Отобразится колонка приложения API.
2. В списке **Основные компоненты** щелкните ссылку под свойством "Узел". У гиперссылки должно быть имя наподобие *slackconnector* или *microsoftsqlconnector123*.

	![][apiapphost]

3. В колонке узла приложения API выберите элемент **Параметры**. В колонке "Параметры" щелкните **Параметры приложения**. Значения конфигурации приведены в разделе **Параметры приложения**.

	![][hostsettings]

4. Выберите параметр, который необходимо изменить, введите новое значение и нажмите кнопку **Сохранить**.


## Установка диспетчера гибридного подключения (необязательно)

![][hcsetup]

Диспетчер гибридного подключения предоставляет возможность подключения к локальной системе, такой как SQL Server или SAP. Это гибридное подключение использует служебную шину Azure для подключения и управления безопасностью ресурсов Azure и локальных ресурсов.

См. статью [Подключение к локальным соединителям, размещенным в службе приложений Azure, с помощью диспетчера гибридных подключений](app-service-logic-hybrid-connection-manager.md).

> [AZURE.NOTE] Диспетчер локальных подключений необходим только для подключения к локальному ресурсу за брандмауэром. Если не вы подключены к локальной системе, диспетчер гибридного подключения может не отображаться в колонке соединителя.

## Мониторинг производительности
Метрики производительности — это встроенные функции, включенные в состав каждого создаваемого приложения API. Эти метрики относятся только к приложению API, размещенному в Azure. Пример метрик:

![][monitoring]

Вы можете:

- Добавлять разные метрики производительности, включая известные коды ошибок, такие как коды состояния HTTP 200, 400 или 500, щелкнув **Запросы и ошибки**. Просматривать время ответа, количество отправленных в приложение API запросов, а также объем входящих или исходящих данных. На основе метрик производительности можно создавать оповещения, рассылаемые по электронной почте, когда метрика превышает заданное вами пороговое значение.
- В разделе **Использование** вы можете отслеживать показатели загрузки **ЦП** приложением API, просматривать текущую **квоту использования** в мегабайтах, а также оценивать максимальный объем используемых данных на основе уровня затрат. В разделе **Ожидаемые затраты** вы можете определить потенциальные расходы, связанные с работой вашего приложения API.
- Открывать обозреватель процессов, выбрав **Процессы**. В нем отображаются веб-экземпляры и их свойства, включая число потоков и использование памяти.

С помощью этих средств вы можете на основе ваших бизнес-потребностей определять, в какую сторону нужно масштабировать план службы приложений. Эти функции встроены в портал, и установка дополнительных средств не требуется.

## Управление безопасностью

В приложениях API безопасность обеспечивается на основе ролей. Эти роли распространяются на все ресурсы Azure, включая приложения API. Существуют такие роли.

Роль | Описание
--- | ---
владелец; | Полный доступ к возможностям управления и предоставление доступа другим пользователям или группам.
Участник | Полный доступ к возможностям управления. Нет прав предоставления доступа другим пользователям или группам.
читатель. | Просмотр всех ресурсов, кроме секретных данных.
Администратор доступа пользователей | Просмотр всех ресурсов, создание ролей и управление ими, создание запросов в службу поддержки и управление ими.

См. статью [Управление доступом на основе ролей на портале Microsoft Azure](../active-directory/role-based-access-control-configure.md).

Вы можете без усилий добавлять пользователей и назначать им конкретные роли в рамках приложения API. Портал отображает сведения о пользователях с правом доступа, а также назначенные им роли.

![][access]

- В разделе **Пользователи** можно добавлять и удалять пользователей, а также назначать им роли.
- В разделе **Роли** можно отображать всех пользователей с определенной ролью, а также назначать им роли и отменять их.


## Дополнительные полезные сведения
- Выберите пункт **Определение API**, чтобы открыть автоматически созданный файл Swagger для конкретного приложения API.
- Выберите пункт **Зависимости**, чтобы просмотреть файлы, необходимые для приложения API. Например, если используется соединитель SAP, в локальный диспетчер гибридного подключения устанавливаются некоторые дополнительные файлы. Эти зависимости отображаются в колонке приложения API.

>[AZURE.IMPORTANT] Открыв свойства приложения API, в разделе **Основные компоненты** вы увидите ссылки **Узел** и **Шлюз**, с помощью которых можно открыть новые колонки.
>
> ![][host]
>
>Эти свойства относятся только к сайту, на котором размещено приложение API. При использовании встроенных приложений API или соединителя большая часть этих свойств не используется. Мы рекомендуем не обновлять эти свойства. Создав приложение API в Visual Studio и развернув его в среду, определяемую подпиской Azure, вы сможете использовать колонки с параметрами узла и шлюза. <br/><br/>


>[AZURE.NOTE] Чтобы начать работу с Logic Apps, не создавая учетную запись Azure, перейдите на [эту страницу](https://tryappservice.azure.com/?appservice=logic). Там вы сможете создать простое кратковременное приложение логики. Не требуется никаких кредитных карт и обязательств.

## Подробнее

[Мониторинг приложений логики](app-service-logic-monitor-your-logic-apps.md)<br/>[Список соединителей и приложений API в службе приложений Microsoft Azure](app-service-logic-connectors-list.md)<br/>[Управление доступом на основе ролей на портале Microsoft Azure](../active-directory/role-based-access-control-configure.md)<br/>[Использование диспетчера гибридных подключений в службе приложений Azure](app-service-logic-hybrid-connection-manager.md)


<!--Image references-->
[browse]: ./media/app-service-logic-monitor-your-connectors/browse.png
[settings]: ./media/app-service-logic-monitor-your-connectors/settings.png
[hcsetup]: ./media/app-service-logic-monitor-your-connectors/hcsetup.png
[monitoring]: ./media/app-service-logic-monitor-your-connectors/monitoring.png
[access]: ./media/app-service-logic-monitor-your-connectors/access.png
[host]: ./media/app-service-logic-monitor-your-connectors/host.png
[hostsettings]: ./media/app-service-logic-monitor-your-connectors/hostsettings.png
[apiapphost]: ./media/app-service-logic-monitor-your-connectors/apiapphost.png

<!---HONumber=AcomDC_0803_2016-->