<properties
   pageTitle="Соединитель и прослушиватель HTTP"
   description="Использование прослушивателя HTTP и действия HTTP в приложении логики"
   services="app-service\logic"
   documentationCenter=".net,nodejs,java"
   authors="anuragdalmia"
   manager="dwrede"
   editor=""/>

<tags
   ms.service="app-service-logic"
   ms.devlang="multiple"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="integration"
   ms.date="07/02/2015"
   ms.author="prkumar"/>


#Использование прослушивателя HTTP и действия HTTP в приложении логики#

Приложения логики могут запускаться на основе различных источников данных и предлагают соединители для получения и обработки данных в рамках потока. Однако в некоторых приведенных ниже сценариях может потребоваться работа с прямыми подключениями HTTP.

1.	Для разработки приложения логики, которое поддерживает интерактивный внешний интерфейс веб-пользователя или пользователя мобильных устройств.
2.	Для получения и обработки данных от веб-службы, в которой отсутствует встроенный соединитель.
3.	Для выполнения действий, уже предоставленных в качестве веб-службы, но не доступных в качестве приложения API.


Для этих сценариев в коллекции предоставляются два варианта.

1. Прослушиватель HTTP. Этот соединитель выступает в качестве триггера и прослушивает HTTP-запросы для настроенной конечной точки. При получении вызова в настроенной конечной точке он инициирует новый экземпляр потока и передает полученные в запросе данные в поток для обработки. Кроме того, его можно настроить, чтобы он автоматически отвечал на входящий запрос при запуске потока или позволял вам создать ответ на основе выполнения потока и отправить его вызывающей стороне.
2.	Действие HTTP. Это действие позволяет настроить веб-запрос к любой конечной точке, доступной в Интернете, получать ответ и делать его доступным для использования действиями в потоке.

##Создание прослушивателя HTTP для приложения логики
Чтобы использовать прослушиватель HTTP, необходимо сначала создать экземпляр приложения API прослушивателя HTTP. Это можно сделать следующим образом.

1.	Откройте Azure Marketplace с помощью кнопки «+ СОЗДАТЬ» в нижнем правом углу портала Azure.
2.	Перейдите в раздел «Мобильные и веб-приложения > Приложения API» и найдите элемент «Прослушиватель HTTP».
3.	Настройте прослушиватель HTTP следующим образом.

	![][1]

4.	При настройке параметров пакета вы увидите следующий параметр, задающий, должен ли прослушиватель отвечать автоматически или вы должны явно отправлять ответ. Установите значение False, чтобы можно было отправлять свой собственный ответ.

	![][2]

5.	Нажмите кнопку «ОК», чтобы создать прослушиватель.
6.	После создания этого экземпляра приложения API откройте параметры, чтобы настроить безопасность. В настоящее время прослушиватель HTTP поддерживает обычную проверку подлинности. Вы можете настроить ее с помощью параметра «Безопасность» при открытии прослушивателя HTTP.

	![][3] <br> <br> <b><u>Известная проблема</u></b><br> *В параметре безопасности отображается None как значение по умолчанию, однако он не определен. Необходимо изменить значение параметра на Basic и обратно на None, прежде чем сохранить его, чтобы убедиться, что прослушиватель HTTP настроен правильно.*

7. Наконец, необходимо задать для параметра безопасности приложения API значение «Общедоступный (анонимный)», чтобы обеспечить внешним клиентам доступ к конечной точке. Этот параметр находится в разделе «Все параметры > Параметры приложения» приложения API прослушивателя HTTP.

	![][10]

Сделав это, вы можете создать в той же группе ресурсов приложение логики для использования этого прослушивателя HTTP.

##Использование прослушивателя HTTP в приложении логики
После создания приложения API можно использовать прослушиватель HTTP как триггер для приложения логики. Для этого необходимо выполнить следующие действия.

4.	Создать новое приложение логики и выбрать ту же группу ресурсов, в которой имеется прослушиватель HTTP.
5.	Открыть раздел «Триггеры и действия», чтобы открыть конструктор приложения логики и настроить поток. Прослушиватель HTTP будет отображаться в разделе «Последние использованные» в коллекции с правой стороны. Выберите его.
6.	Теперь можно задать метод HTTP и относительный URL-адрес, в котором прослушиватель должен инициировать поток.<br>

	![][4] ![][5]

7.	Чтобы получить полный URI, дважды щелкните прослушиватель HTTP, чтобы просмотреть его параметры конфигурации и скопировать URL-адрес для «узла» вашего приложения API.


	![][6]
8.	Теперь вы можете использовать данные, полученные в запросе HTTP, в других действиях в потоке следующим образом:<br> ![][7] ![][8]
9.	Наконец, чтобы отправлять ответ, добавьте другой прослушиватель HTTP и выберите действие «Отправить HTTP-ответ». Установите в качестве идентификатора запроса RequestID, полученный от прослушивателя HTTP, и укажите в соответствующих полях текст ответа и состояние HTTP, которые вы ходите возвращать.![][9]

##Использование действия HTTP
В приложениях логики существует встроенная поддержка действий HTTP, поэтому для их использования не требуется предварительное создание приложения API. Вы можете вставить действие HTTP в любой точке в вашем приложении логики и выбрать URI, заголовки и текст для вызова. Действие HTTP поддерживает несколько вариантов безопасности на стороне клиента. Чтобы использовать их, изучите соответствующую статью [здесь](http://aka.ms/logicapphttpauth).

Результатом действия HTTP являются заголовки и текст, которые могут использоваться далее нисходящим потоком аналогично тому, как используется результат других действий и соединителей.

<!--Image references-->
[1]: ./media/app-service-logic-connector-http/1.png
[2]: ./media/app-service-logic-connector-http/2.png
[3]: ./media/app-service-logic-connector-http/3.png
[4]: ./media/app-service-logic-connector-http/4.png
[5]: ./media/app-service-logic-connector-http/5.png
[6]: ./media/app-service-logic-connector-http/6.png
[7]: ./media/app-service-logic-connector-http/7.png
[8]: ./media/app-service-logic-connector-http/8.png
[9]: ./media/app-service-logic-connector-http/9.png
[10]: ./media/app-service-logic-connector-http/10.png

<!---HONumber=July15_HO4-->