<properties
	pageTitle="Соединитель FTP"
	description="Начало работы с соединителем FTP"
	authors="rajram"
	manager="dwrede"
	editor=""
	services="app-service\logic"
	documentationCenter=""/>

<tags
	ms.service="app-service-logic"
	ms.workload="integration"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="08/19/2015"
	ms.author="rajram"/>

# Соединитель FTP

## Обзор
Соединитель FTP позволяет перемещать данные из FTP-сервера и на него. Соединитель FTP имеет следующие ключевые функции.

- Извлечение файлов с FTP-сервера по запросу.
- Выполнение опросов на основе настраиваемого расписания.
- Опрос FTP-сервера и запуск потока логики на основе новых документов на FTP-сервере.
- Указание FTP-сервера в виде IP-адреса, порта, пароля и имени узла.
- Возможность выполнения отправок по запросу.
- Возможность удаления файлов на FTP-сервере по запросу.

## Создание нового соединителя FTP
Чтобы создать новый соединитель FTP, выполните следующие действия. Запустите портал Azure. Откройте Azure Marketplace, последовательно выбрав параметры «+Создать» (внизу страницы) —> «Мобильные и веб-приложения» —> Azure Marketplace. ![Запуск Azure Marketplace][1]

- Щелкните пункт "Приложения API".
- Выполните поиск FTP и выберите соединитель FTP. ![Выбор соединителя FTP][2]

- Нажмите кнопку "Создать".
- В открывшейся колонке соединителя FTP укажите следующие данные. ![Создание соединителя FTP][3]

- **Расположение** — выберите географическое расположение, где планируется развернуть соединитель.
- **Подписка** — выберите подписку, в которой нужно создать соединитель.
- **Группа ресурсов** — выберите или создайте группу ресурсов, в которой следует разместить соединитель.
- **План размещения веб-сайтов** — выберите или создайте план размещения веб-сайтов.
- **Ценовая категория** — выберите ценовую категорию для соединителя.
- **Имя** — задайте имя для этого соединителя FTP.
- **Параметры пакета**
	- **Адрес сервера** — укажите имя или IP-адрес FTP-сервера.
	- **Имя пользователя** — укажите имя пользователя для подключения к FTP-серверу.
	- **Пароль** — укажите пароль для подключения к FTP-серверу.
	- **Корневая папка** — укажите путь к корневой папке.
	- **Использовать двоичный формат** — укажите значение true, чтобы использовать режим передачи в двоичном формате, или false, чтобы использовать ASCII.
	- **Использовать SSL** — укажите true, чтобы использовать FTP через защищенный канал SSL/TLS.
	- **Порт сервера** — укажите номер порта FTP-сервера.
- Нажмите кнопку "Создать". Будет создан новый соединитель FTP.

## Использование соединителя FTP в приложении логики
После создания соединителя FTP его можно использовать в потоке.

Создайте новый поток, последовательно выбрав +Создать -> Мобильные и веб-приложения -> Приложение логики. Предоставьте метаданные для потока, включая группу ресурсов. ![Создание приложения логики][4]

Щелкните *Триггеры и действия*. Откроется конструктор потока. ![Конструктор пустого потока приложения логики][5]

Соединитель FTP может использоваться и как триггер, и как действие.

### Триггер
В пустом конструкторе потока щелкните соединитель FTP в коллекции справа. ![Выберите триггер FTP][6]

Соединитель FTP содержит один триггер — "Доступный файл (прочтите и удалите)". Этот триггер:

- выполняет опрос по пути папки для обнаружения новых файлов;
- реализует поток логики каждый раз при появлении нового файла;
- удаляет файл из пути к папке после реализации потока логики.

Щелкните триггер «Доступный файл (прочтите и удалите)». ![Основные входные параметры триггера FTP][7]

Эти входные параметры помогают настроить конкретный путь к папке, который должен опрашиваться с заданной частотой. Далее приводятся основные входные параметры. Частота — задает частоту опроса FTP. Интервал — интервал для запланированной частоты. Путь к папке — путь к папке на FTP-сервере. Тип файла — задает текстовый или двоичный тип файла.

Если нажать кнопку с многоточием (...), отобразятся дополнительные входные параметры. ![Основные входные параметры триггера FTP][8]

Далее приводятся дополнительные входные параметры. Маска файла — задает маску файла при опросе. Исключить маску файла — указывает маски файла, которые должны исключаться при опросе.

Укажите входные параметры и щелкните значок флажка, чтобы завершить конфигурацию входных данных. ![Основные входные параметры триггера FTP][9]

Обратите внимание, что настроенный триггер FTP отображает как настроенные входные, так и выходные параметры.

#### Использование выходных данных триггера FTP в последующих действиях
Выходные данные соединителя FTP могут использоваться в качестве входных данных для некоторых других действий в потоке.

Вы можете нажать кнопку с многоточием (...) во входном диалоговом окне действия и выбрать выходные данные FTP непосредственно в раскрывающемся списке.

Вы также можете записать выражение напрямую во входном поле действия. Ниже показано выражение потока для ссылки на выходные данные триггера FTP.

	@triggers('ftpconnector').outputs.body.Content

### Действия
Щелкните соединитель FTP в области справа. Соединитель FTP отображает список поддерживаемых действий. ![Список действий FTP][10]

Соединитель FTP поддерживает следующие действия.

- **Получить файл** — получает содержимое указанного файла.
- **Отправить файл** — отправляет файл в путь папки FTP.
- **Удалить файл** — удаляет файл из пути к папке FTP.
- **Список файлов** — перечисляет все файлы в пути к папке FTP.

Давайте рассмотрим один пример — отправку файла. Щелкните действие «Отправить файл».

Сначала отображаются основные входные параметры. ![Основные входные параметры действия «Отправить файл»][11]


- **Содержимое** — задает содержимое файла для отправки.
- **Кодировка передачи содержимого** — укажите "нет" или base64.
- **Путь к файлу** — задает путь к файлу для отправки.

Нажмите многоточие (...), чтобы открыть дополнительные входные параметры. ![Основные входные параметры действия «Отправить файл»][12]


- **Добавить, если существует** — значение True или False для параметра "Добавить, если существует". Когда этот параметр включен, если файл существует, то данные добавляются в этот файл. Когда он отключен, если файл существует, то он перезаписывается.
- **Временная папка** — необязательный параметр. Если значение этого параметра указано, то адаптер отправит файл в «Путь ко временной папке», а после завершения отправки этот файл будет перемещен в «Путь к папке». Папка, указанная в параметре "Путь к временной папке", должна находиться на одном физическом диске с папкой, указанной в параметре "Путь к папке", для обеспечения элементарной операции перемещения. Временная папка может использоваться, только если свойство "Добавить, если существует" отключено.

Укажите входные параметры и щелкните значок флажка, чтобы завершить конфигурацию входных данных. ![Настроенное действие «Отправить файл»][13]

Для параметра «Путь к файлу» установлено следующее значение.

	@concat('/Output/',triggers().outputs.body.FileName)

Обратите внимание, что настроенное действие FTP "Отправить файл" отображает как входные, так и выходные параметры.

#### Использование выходных данных предыдущих действий в качестве входных данных для действия FTP
Обратите внимание, что на снимке экрана в качестве значения содержимого установлено выражение.

	@triggers().outputs.body.Content


Вы можете установить любое значение, которое вам нужно. Это только пример. Выражение принимает выходные данные триггера приложения логики и использует их в качестве содержимого файла для отправки. Предположим, что вам нужно использовать выходные данные предыдущего действия, например преобразования. В этом случае можно задать следующее выражение:

	@actions('transformservice').outputs.body.OutputXML

## Дополнительные возможности соединителя
После создания соединителя его можно добавить в рабочий бизнес-процесс с помощью приложения логики. См. раздел [Что такое приложения логики?](app-service-logic-what-are-logic-apps.md).

Справку по API REST Swagger см. в статье [Справочные материалы по соединителям и приложениям API](http://go.microsoft.com/fwlink/p/?LinkId=529766).

Можно также просматривать статистику производительности и управлять безопасностью соединителя. См. статью [Управление встроенными приложениями API и соединителями, а также их мониторинг](app-service-logic-monitor-your-connectors.md).

<!-- Image reference -->
[1]: ./media/app-service-logic-connector-ftp/LaunchAzureMarketplace.PNG
[2]: ./media/app-service-logic-connector-ftp/SelectFTPConnector.PNG
[3]: ./media/app-service-logic-connector-ftp/CreateFTPConnector.PNG
[4]: ./media/app-service-logic-connector-ftp/CreateLogicApp.PNG
[5]: ./media/app-service-logic-connector-ftp/LogicAppEmptyFlowDesigner.PNG
[6]: ./media/app-service-logic-connector-ftp/ChooseFTPTrigger.PNG
[7]: ./media/app-service-logic-connector-ftp/BasicInputsFTPTrigger.PNG
[8]: ./media/app-service-logic-connector-ftp/AdvancedInputsFTPTrigger.PNG
[9]: ./media/app-service-logic-connector-ftp/ConfiguredFTPTrigger.PNG
[10]: ./media/app-service-logic-connector-ftp/ListOfFTPActions.PNG
[11]: ./media/app-service-logic-connector-ftp/BasicInputsUploadFile.PNG
[12]: ./media/app-service-logic-connector-ftp/AdvancedInputsUploadFile.PNG
[13]: ./media/app-service-logic-connector-ftp/ConfiguredUploadFile.PNG
 

<!---HONumber=August15_HO8-->