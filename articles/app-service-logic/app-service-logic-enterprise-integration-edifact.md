---
title: "Интеграция Enterprise с EDIFACT | Документация Майкрософт"
description: "Сведения об использовании соглашений EDIFACT для создания приложений логики"
services: logic-apps
documentationcenter: .net,nodejs,java
author: jeffhollan
manager: erikre
editor: cgronlun
ms.assetid: 2257d2c8-1929-4390-b22c-f96ca8b291bc
ms.service: app-service-logic
ms.workload: integration
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/26/2016
ms.author: jonfan
translationtype: Human Translation
ms.sourcegitcommit: 219dcbfdca145bedb570eb9ef747ee00cc0342eb
ms.openlocfilehash: 7d54f02879638774db9436a87853eae8da108721


---
# <a name="enterprise-integration-with-edifact"></a>Интеграция Enterprise с EDIFACT
> [!NOTE]
> В этой статье описываются функции EDIFACT приложений логики. Сведения об X12 см. [здесь](app-service-logic-enterprise-integration-x12.md).
> 
> 

## <a name="create-an-edifact-agreement"></a>Создание соглашения EDIFACT
Прежде чем начать обмен сообщениями EDIFACT, необходимо создать соглашение EDIFACT и сохранить его в учетной записи интеграции. Ниже последовательно описывается создание соглашения EDIFACT.

### <a name="heres-what-you-need-before-you-get-started"></a>Вот что понадобится для начала работы
* В подписке Azure должна быть определена [учетная запись интеграции](app-service-logic-enterprise-integration-accounts.md).  
* В учетной записи интеграции должны быть определены по крайней мере два [партнера](app-service-logic-enterprise-integration-partners.md).  

> [!NOTE]
> При создании соглашения нужно учитывать, что содержимое сообщений, которыми вы будете обмениваться с партнером, должно соответствовать типу соглашения.    
> 
> 

После [настройки учетной записи интеграции](app-service-logic-enterprise-integration-accounts.md) и [добавления партнеров](app-service-logic-enterprise-integration-partners.md) можно создать соглашение EDIFACT, сделав следующее.  

### <a name="from-the-azure-portal-home-page"></a>На домашней странице портала Azure
Войдите на [портал Azure](http://portal.azure.com "портал Azure")и сделайте следующее:  

1. Выберите **Обзор** в меню слева.  

> [!TIP]
> Если вы не видите ссылку **Обзор** , возможно, сначала потребуется развернуть меню. Для этого щелкните ссылку **Показать меню** , расположенную в верхнем левом углу свернутого меню.  
> 
> 

![](./media/app-service-logic-enterprise-integration-edifact/EDIFACT-0.png)    

1. В поле фильтра поиска введите *интеграция* , а затем в списке результатов выберите **Учетные записи интеграции** .       
   ![](./media/app-service-logic-enterprise-integration-edifact/EDIFACT-1-3.png)    
2. В открывшейся колонке **Учетные записи интеграции** выберите учетную запись интеграции для создания соглашения. Если вы не видите списков учетных записей интеграции, [сначала создайте такую учетную запись](app-service-logic-enterprise-integration-accounts.md "All about integration accounts").  
   ![](./media/app-service-logic-enterprise-integration-edifact/EDIFACT-1-4.png)  
3. Выберите плитку **Соглашения** . Если вы не видите эту плитку, добавьте соглашение.   
   ![](./media/app-service-logic-enterprise-integration-edifact/EDIFACT-1-5.png)     
4. В открывшейся колонке "Соглашения" щелкните **Добавить** .  
   ![](./media/app-service-logic-enterprise-integration-edifact/EDIFACT-agreement-2.png)  
5. В открывшейся колонке "Соглашения" введите **имя** соглашения в соответствующем поле, а затем задайте значения параметров **Тип соглашения** (EDIFACT), **Главный партнер**, **Главный идентификатор**, **Гостевой партнер** и **Гостевой идентификатор**.  
   ![](./media/app-service-logic-enterprise-integration-edifact/EDIFACT-1.png)  
6. Как только вы зададите свойства соглашения, выберите **Настройки получения** , чтобы настроить обработку сообщений, получаемых в рамках этого соглашения.  
7. Элемент управления "Настройки получения" состоит из приведенных ниже разделов, в том числе "Идентификаторы", "Подтверждение", "Схемы", "Контрольные номера", "Проверки", "Внутренние параметры" и "Пакетная обработка". Настройте доступные в них свойства в соответствии с вашим соглашением с партнером, с которым вы будете обмениваться сообщениями. Ниже приведено представление этих элементов управления. Настройте их в зависимости от того, как с помощью соглашения должны идентифицироваться и обрабатываться входящие сообщения.  
   ![](./media/app-service-logic-enterprise-integration-edifact/EDIFACT-2.png)  
8. Нажмите кнопку **ОК** , чтобы сохранить параметры.  

### <a name="identifiers"></a>"Identifiers" (Идентификаторы)
| Свойство | Описание |
| --- | --- |
| UNB6.1 (эталонный пароль получателя) |Введите буквенно-цифровое значение, содержащее от 1 до 14 знаков |
| UNB6.2 (эталонный квалификатор получателя) |Введите буквенно-цифровое значение, содержащее от 1 до 2 знаков |

### <a name="acknowledgments"></a>Благодарности
| Свойство | Описание |
| --- | --- |
| Получение сообщения (CONTRL) |Установите этот флажок, чтобы возвращать техническое подтверждение (CONTRL) отправителю при обмене. Это подтверждение отсылается отправителю при обмене в зависимости от параметров отправки для соглашения |
| Подтверждение (CONTRL) |Установите этот флажок, чтобы возвращать функциональное подтверждение (CONTRL) отправителю при обмене. Это подтверждение отсылается отправителю при обмене в зависимости от параметров отправки для соглашения |

### <a name="schemas"></a>Схемы
| Свойство | Описание |
| --- | --- |
| UNH2.1 (ТИП) |Выберите тип набора транзакций |
| UNH2.2 (ВЕРСИЯ) |Введите номер версии сообщения (от 1 до 3 знаков) |
| UNH2.3 (ВЫПУСК) |Введите номер выпуска сообщения (от 1 до 3 знаков) |
| UNH2.5 (ASSOCIATED ASSIGNED CODE) (UNH2.5 (СВЯЗАННЫЙ НАЗНАЧЕННЫЙ КОД)) |Введите назначенный код (буквенно-цифровое значение, содержащее не более 6 знаков) |
| UNG2.1 (APP SENDER ID) (UNG2.1 (ИДЕНТИФИКАТОР ПРИЛОЖЕНИЯ-ОТПРАВИТЕЛЯ)) |Введите буквенно-цифровое значение, содержащее от 1 до 35 знаков |
| UNG2.2 (APP SENDER CODE QUALIFIER) (UNG2.2 (КВАЛИФИКАТОР КОДА ПРИЛОЖЕНИЯ-ОТПРАВИТЕЛЯ)) |Введите буквенно-цифровое значение, содержащее не более четырех знаков |
| SCHEMA (Схема) |Выберите ранее отправленную схему, которую вы хотите использовать, из связанной учетной записи интеграции |

### <a name="control-numbers"></a>Control Numbers (Контрольные номера)
| Свойство | Описание |
| --- | --- |
| Disallow Interchange Control Number duplicates (Запретить повторяющиеся контрольные номера обмена) |Установите этот флажок, чтобы запретить повторяющиеся операции обмена. Если флажок установлен, то действие декодирования EDIFACT проверяет, соответствует ли контрольный номер (UNB5) полученного обмена ранее обработанному контрольному номеру обмена. Если обнаружено совпадение, обмен не обрабатывается. |
| Проверять дубликаты UNB5 через (дн.) |Если вы решили запретить повторяющиеся контрольные номера, то можно указать число дней, в течение которых выполняется проверка, задав соответствующее значение для параметра **Проверять дубликаты UNB5 через (дн.)** |
| Disallow Group control number duplicates (Запретить повторяющиеся контрольные номера групп) |Установите этот флажок, чтобы запретить операции обмена с повторяющимися контрольными номерами групп (UNG5) |
| Disallow Transaction set control number duplicates (Запретить повторяющиеся контрольные номера наборов транзакций) |Установите этот флажок, чтобы запретить операции обмена с повторяющимися контрольными номерами наборов транзакций (UNH1) |
| Контрольный номер подтверждения EDIFACT |Чтобы назначить контрольные номера набора транзакций для использования в подтверждении, введите значение префикса, диапазон контрольных номеров и суффикс |

### <a name="validations"></a>Validations (Проверки)
| Свойство | Описание |
| --- | --- |
| Message Type (Тип сообщения) |Укажите тип сообщения. После завершения проверки каждой строки автоматически будет добавляться следующая. Если правила не заданы, то для проверки используется строка по умолчанию |
| EDI Validation (Проверка EDI) |Установите этот флажок, чтобы выполнять проверку EDI для типов данных в соответствии со свойствами EDI схемы, ограничениями длины, пустыми элементами данных и конечными разделителями |
| Extended Validation (Расширенная проверка) |Установите этот флажок, чтобы включить расширенную проверку обмена (XSD), получаемого от отправителя при обмене. В дополнение к проверке типов данных XSD она включает в себя проверку длины поля, необязательности и числа повторов. |
| Allow Leading/Trailing Zeroes (Разрешить начальные и конечные нули) |Выберите значение **Разрешить**, чтобы разрешить использовать начальные и конечные нули, **Запрещено** — чтобы запретить их использование, и **Обрезать** — чтобы обрезать начальные и конечные нули |
| Обрезать начальные и конечные нули |Установите этот флажок, чтобы обрезать все начальные и конечные нули |
| Trailing Separator Policy (Политика конечных разделителей) |Выберите значение **Запрещено** , чтобы запретить конечные разделители в обмене, получаемом от отправителя при обмене. Если обмен содержит конечные разделители, он будет объявлен недопустимым. Выберите значение **Необязательно** , чтобы принимать обмен с конечными разделителями или без них. Выберите значение **Обязательно** , если получаемый обмен должен содержать конечные разделители |

### <a name="internal-settings"></a>Internal Settings (Внутренние параметры)
| Свойство | Описание |
| --- | --- |
| Create empty XML tags if trailing separators are allowed (Создать пустые теги XML, если конечные разделители разрешены) |Установите этот флажок, чтобы отправитель при обмене добавлял пустые теги XML для конечных разделителей. |
| Inbound batching processing (Пакетная обработка входящего трафика) |Доступные параметры: </br></br>**Разделение документа Interchange на наборы транзакций — заблокировать наборы транзакций при ошибке**: позволяет анализировать каждый набор транзакций в операции обмена в виде отдельного XML-документа, применяя соответствующую оболочку к набору транзакций. Если этот параметр включен, то в случае, если один или несколько наборов транзакций в операции обмена не проходят проверку, приостанавливается обработка только этих наборов. "Разделение документа Interchange на наборы транзакций — заблокировать документ Interchange при ошибке": позволяет анализировать каждый набор транзакций в операции обмена в виде отдельного XML-документа, применяя соответствующую оболочку. Если этот параметр включен, то в случае, если один или несколько наборов транзакций в операции обмена не проходят проверку, весь обмен приостанавливается.</br></br>**Preserve Interchange - suspend transaction sets on error**(Сохранить обмен — приостанавливать обработку наборов транзакций в случае ошибки): позволяет не затрагивать операцию обмена, создавая XML-документ для всего пакетного обмена. Если этот параметр включен, то в случае, если один или несколько наборов транзакций в операции обмена не проходят проверку, приостанавливается обработка только этих наборов транзакций, а обработка всех прочих наборов транзакций продолжается.</br></br>**Сохранение документа Interchange — заблокировать документ Interchange при ошибке**(Сохранить обмен — приостанавливать обработку наборов транзакций в случае ошибки): позволяет не затрагивать операцию обмена, создавая XML-документ для всего пакетного обмена. Если этот параметр включен, то в случае, если один или несколько наборов транзакций в операции обмена не проходят проверку, весь обмен приостанавливается. |

Ваше соглашение готово к обработке входящих сообщений, которые соответствуют выбранным параметрам.

Для настройки параметров обработки сообщений, отправляемых партнерам, выполните следующее.  

1. Выберите **Настройки отправки** , чтобы настроить обработку сообщений, отправляемых при помощи данного соглашения.  

Элемент управления "Настройки отправки" состоит из приведенных ниже разделов, в том числе "Идентификаторы", "Подтверждение", "Схемы", Envelopes (Оболочки), "Кодировки и разделители", "Контрольные номера" и "Проверки". 

Ниже приведено представление этих элементов управления. Выберите параметры в соответствии с тем, как требуется обрабатывать сообщения, отправляемые партнерам с помощью этого соглашения.   
![](./media/app-service-logic-enterprise-integration-edifact/EDIFACT-3.png)    

1. Нажмите кнопку **ОК** , чтобы сохранить параметры.  

### <a name="identifiers"></a>"Identifiers" (Идентификаторы)
| Свойство | Описание |
| --- | --- |
| UNB1.2 (версия синтаксиса) |Выберите значение в диапазоне от **1** до **4**. |
| UNB2.3 (обратный адрес маршрутизации для отправителя) |Введите буквенно-цифровое значение, содержащее от 1 до 14 знаков |
| UNB3.3 (обратный адрес маршрутизации для получателя) |Введите буквенно-цифровое значение, содержащее от 1 до 14 знаков |
| UNB6.1 (эталонный пароль получателя) |Введите буквенно-цифровое значение, содержащее от 1 до 14 знаков |
| UNB6.2 (эталонный квалификатор получателя) |Введите буквенно-цифровое значение, содержащее от 1 до 2 знаков |
| UNB7 (эталонный ИД приложения) |Введите буквенно-цифровое значение, содержащее от 1 до 14 знаков |

### <a name="acknowledgment"></a>Acknowledgment (Подтверждение)
| Свойство | Описание |
| --- | --- |
| Получение сообщения (CONTRL) |Установите этот флажок, если размещаемому партнеру необходимо отправлять техническое подтверждение (CONTRL). Этот параметр указывает, что размещенный партнер, отправляющий сообщение, запрашивает подтверждение от гостевого партнера |
| Подтверждение (CONTRL) |Установите этот флажок, если размещаемому партнеру необходимо отправлять функциональное подтверждение (CONTRL). Этот параметр указывает, что размещенный партнер, отправляющий сообщение, запрашивает подтверждение от гостевого партнера |
| Создать цикл SG1/SG4 для принятых наборов транзакций |Если вы хотите получать функциональное подтверждение, установите этот флажок для принудительного создания циклов SG1/SG4 в функциональных подтверждениях CONTRL для принятых наборов транзакций |

### <a name="schemas"></a>Схемы
| Свойство | Описание |
| --- | --- |
| UNH2.1 (ТИП) |Выберите тип набора транзакций |
| UNH2.2 (ВЕРСИЯ) |Введите номер версии сообщения |
| UNH2.3 (ВЫПУСК) |Введите номер выпуска сообщения |
| SCHEMA (Схема) |Выберите схему для использования. Схемы находятся в вашей учетной записи интеграции. Для получения доступа к схемам следует сначала связать учетную запись интеграции с приложением логики. |

### <a name="envelopes"></a>Envelopes (Оболочка)
| Свойство | Описание |
| --- | --- |
| UNB8 (код приоритета обработки) |Введите буквенно-цифровое значение, содержащее один знак |
| UNB10 (соглашение о связи) |Введите буквенно-цифровое значение, содержащее от 1 до 40 знаков |
| UNB11 (тестовый индикатор) |Установите этот флажок, чтобы указать, что содержимое обмена данными представляет собой тестовые данные |
| Применить сегмент UNA (совет для строки службы) |Установите этот флажок, чтобы создать сегмент UNA для отправляемого обмена |
| Применить сегменты UNG (заголовок группы функций) |Установите этот флажок, чтобы создавать сегменты объединения в заголовке функциональной группы сообщений, отправляемых гостевому партнеру. Для создания сегментов UNG можно использовать следующие значения:</br></br>В качестве значения **UNG1** введите буквенно-цифровое значение, содержащее от 1 до 6 символов.</br></br>В качестве значения **UNG2.1** введите буквенно-цифровое значение, содержащее от 1 до 35 символов.</br></br>В качестве значения **UNG2.2** введите буквенно-цифровое значение, содержащее не более 4 символов.</br></br>В качестве значения **UNG3.1** введите буквенно-цифровое значение, содержащее от 1 до 35 символов.</br></br>В качестве значения **UNG3.2** введите буквенно-цифровое значение, содержащее не более 4 символов.</br></br>В качестве значения **UNG6** введите буквенно-цифровое значение, содержащее от 1 до 3 символов.</br></br>В качестве значения **UNG7.1** введите буквенно-цифровое значение, содержащее от 1 до 3 символов.</br></br>В качестве значения **UNG7.2** введите буквенно-цифровое значение, содержащее от 1 до 3 символов.</br></br>В качестве значения **UNG7.3** введите буквенно-цифровое значение, содержащее от 1 до 6 символов.</br></br>В качестве значения **UNG8**введите буквенно-цифровое значение, содержащее от 1 до 14 знаков |

### <a name="character-sets-and-separators"></a>Character Sets and Separators (Наборы символов и разделители)
Отдельно от набора символов можно ввести отличающийся набор разделителей для каждого типа сообщений. Если для заданной схемы сообщений набор символов не указан, то используется набор символов по умолчанию.

| Свойство | Описание |
| --- | --- |
| UNB1.1 (идентификатор системы) |Выберите набор знаков EDIFACT, который нужно применять к исходящему обмену |
| SCHEMA (Схема) |Выберите схему из раскрывающегося списка. По завершении каждой строки добавляется новая строка. Выберите разделители, которые будут использоваться для выбранной схемы:</br></br>**Разделитель элементов компонента** — введите один символ, чтобы разделить составные элементы данных.</br></br>**Разделитель элементов данных** — введите один символ, чтобы разделить простые элементы данных в составных элементах данных.</br></br></br></br>**Replacement Character** (Знак замены) — установите этот флажок, если полезные данные содержат знаки, которые используются также как разделители данных, сегментов или составляющих элементов. После этого вы сможете ввести знак для замены. При создании исходящего сообщения EDIFACT все экземпляры знаков разделителей в полезных данных будут заменены указанным знаком.</br></br>**Символ завершения сегмента** — введите один символ, чтобы указать конец сегмента EDI.</br></br>**Суффикс** — выберите знак, который будет использоваться с идентификатором сегмента. Если указывается суффикс, то элемент данных признака конца сегмента может быть пустым. Если признак конца сегмента оставить пустым, то необходимо будет указать суффикс. |

### <a name="control-numbers"></a>Control Numbers (Контрольные номера)
| Свойство | Описание |
| --- | --- |
| UNB5 (контрольный номер обмена) |Введите префикс, диапазон значений для контрольного номера обмена и суффикс. Эти значения используются для создания исходящего обмена. Префикс и суффикс указывать необязательно, однако нужно указать контрольный номер. Значение контрольного номера увеличивается для каждого нового сообщения. Префикс и суффикс не меняются |
| UNG5 (контрольный номер группы) |Введите префикс, диапазон значений для контрольного номера обмена и суффикс. Эти значения используются для создания контрольного номера группы. Префикс и суффикс указывать необязательно, однако нужно указать контрольный номер. Контрольный номер увеличивается для каждого нового сообщения до достижения максимального значения. Префикс и суффикс не меняются |
| UNH1 (эталонный номер заголовка сообщения) |Введите префикс, диапазон значений для контрольного номера обмена и суффикс. Эти значения используются для создания эталонного номера заголовка сообщения. Префикс и суффикс указывать необязательно, однако нужно указать эталонный номер. Значение эталонного номера увеличивается для каждого нового сообщения. Префикс и суффикс не меняются |

### <a name="validations"></a>Validations (Проверки)
| Свойство | Описание |
| --- | --- |
| Message Type (Тип сообщения) |Этот параметр позволяет включить проверку для получателя обмена. Эта позволяет выполнять проверку EDI для элементов данных набора транзакций, проверяя типы данных, ограничения длины, пустые элементы данных и конечных разделители. |
| EDI Validation (Проверка EDI) |Установите этот флажок, чтобы выполнять проверку EDI для типов данных в соответствии со свойствами EDI схемы, ограничениями длины, пустыми элементами данных и конечными разделителями |
| Extended Validation (Расширенная проверка) |Этот параметр позволяет включить расширенную проверку обмена, получаемого от отправителя при обмене. В дополнение к проверке типов данных XSD она включает в себя проверку длины поля, необязательности и числа повторов. Можно включить расширенную проверку, не включая проверку EDI, и наоборот. |
| Allow Leading/Trailing Zeroes (Разрешить начальные и конечные нули) |Если выбрать этот параметр, то обмен EDI, полученный от какой-либо стороны, пройдет проверку, если элемент данных в обмене EDI не соответствует требованиям к длине из-за конечных пробелов, но соответствует этим требованиям после их удаления. |
| Обрезать начальные и конечные нули |Если выбрать этот параметр, начальные и конечные нули будут обрезаться |
| Trailing Separator (Конечный разделитель) |Если выбрать этот параметр, то обмен EDI, полученный от какой-либо стороны, пройдет проверку, если элемент данных в обмене EDI не соответствует требованиям к длине из-за начальных (или конечных) нулей или конечных пробелов, но соответствует этим требованиям после их удаления.</br></br>Выберите значение **Запрещено** , чтобы запретить конечные разделители в обмене, получаемом от отправителя при обмене. Если обмен содержит конечные разделители, он будет объявлен недопустимым.</br></br>Выберите значение **Необязательно** , чтобы принимать обмен с конечными разделителями или без них.</br></br>Выберите значение **Обязательно** , если получаемый обмен должен содержать конечные разделители |

После нажатия кнопки **ОК** откроется колонка.  

1. Выберите элемент **Соглашения** в колонке "Учетная запись интеграции", и вы увидите новое соглашение в списке.  
   ![](./media/app-service-logic-enterprise-integration-edifact/EDIFACT-4.png)   

## <a name="learn-more"></a>Подробнее
* [Обзор пакета интеграции Enterprise](app-service-logic-enterprise-integration-overview.md "Обзор пакета интеграции Enterprise")  




<!--HONumber=Nov16_HO3-->


