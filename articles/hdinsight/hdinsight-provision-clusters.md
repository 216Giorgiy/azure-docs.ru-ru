---
title: "Создание кластеров Hadoop под управлением Windows в HDInsight | Документация Майкрософт"
description: "Сведения о создании кластеров для Azure HDInsight."
services: hdinsight
documentationcenter: 
tags: azure-portal
author: mumian
manager: jhubbard
editor: cgronlun
ms.assetid: a311f7e0-9333-4886-a726-def79e5db8cb
ms.service: hdinsight
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 02/17/2017
ms.author: jgao
translationtype: Human Translation
ms.sourcegitcommit: 6407c371bc51461a05429fabaf38d3f9bc80d32c
ms.openlocfilehash: f014b92516879a0255dda3736bf5af6142555d92
ms.lasthandoff: 02/07/2017


---
# <a name="create-windows-based-hadoop-clusters-in-hdinsight"></a>Создание кластеров Hadoop под управлением Windows в HDInsight

Кластер Hadoop включает в себя несколько виртуальных машин (узлов), которые используются для распределенной обработки задач в кластере. Azure абстрагирует сведения об установке и конфигурации отдельных узлов, поэтому вам нужно указать общие сведения о настройке. В этой статье вы изучите эти параметры конфигурации.

> [!IMPORTANT]
> Linux — единственная операционная система, используемая для работы с HDInsight 3.4 или более поздней версии. См. дополнительные сведения о [нерекомендуемых версиях HDInsight в Windows](hdinsight-component-versioning.md#hdi-version-32-and-33-nearing-deprecation-date). Информация, приведенная в этом документе, относится только к кластерам Azure HDInsight под управлением Windows. Сведения о кластерах под управлением Linux см. в статье [Создание кластеров Hadoop под управлением Linux в HDInsight](hdinsight-hadoop-provision-linux-clusters.md).



## <a name="access-control-requirements"></a>Требования к контролю доступа
[!INCLUDE [access-control](../../includes/hdinsight-access-control-requirements.md)]

## <a name="cluster-types"></a>Типы кластеров
Сейчас HDInsight предоставляет четыре различных типа кластера, каждый из которых имеет набор компонентов для предоставления определенных функциональных возможностей.

| Тип кластера | Функции |
| --- | --- |
| Hadoop |Запросы и анализ (пакетные задания) |
| HBase |Хранилище данных NoSQL |
| Storm |Обработка событий в режиме реального времени |
| Spark (Предварительная версия) |Обработка в памяти, интерактивные запросы, обработка потоков микро-пакетов |

Для каждого типа кластера используется своя терминология (узлы кластера называются по-разному). Кроме того, типы отличаются количеством узлов и стандартными размерами виртуальных машин. В следующей таблице число узлов каждого типа указано в скобках.

| Тип | Узлы (число узлов) | Схема |
| --- | --- | --- |
| Hadoop |Головной узел (2), узел данных (от&1;) |![Узлы кластера HDInsight Hadoop](./media/hdinsight-provision-clusters/HDInsight.Hadoop.roles.png) |
| HBase |Головной сервер (2), региональный сервер (от&1;), основной узел или узел Zookeeper (3) |![Узлы кластера HDInsight HBase](./media/hdinsight-provision-clusters/HDInsight.HBase.roles.png) |
| Storm |Узел Nimbus (2), сервер супервизора (от&1;), узел Zookeeper (3) |![Узлы кластера HDInsight Storm](./media/hdinsight-provision-clusters/HDInsight.Storm.roles.png) |
| Spark |Головной узел (2), рабочий узел (от&1;), узел Zookeeper (3) (кат. "Бесплатный" для размера виртуальной машины Zookeeper A1) |![Узлы кластера HDInsight Spark](./media/hdinsight-provision-clusters/HDInsight.Spark.roles.png) |

> [!IMPORTANT]
> Если вы планируете использовать более 32 рабочих узлов (при создании кластера или в ходе масштабирования после создания кластера), для головного узла потребуется минимум 8-ядерный процессор и 14 ГБ ОЗУ.
> 
> 

С помощью [действий сценария](#customize-clusters-using-script-action)вы можете добавлять к этим базовым типам другие компоненты, например Hue или R.

> [!IMPORTANT]
> Кластеры HDInsight представлены разными типами, соответствующими рабочей нагрузке или технологии, для которой настроен кластер. Создать кластер, в котором бы объединились несколько типов, например Storm и HBase, нельзя. 
> 
> 

Если для решения нужны технологии, распределенные по нескольким типам кластера HDInsight, нужно создать виртуальную сеть Azure, а в ней — необходимые типы кластера. Таким образом, как кластеры, так и любой развернутый в них код могут взаимодействовать друг с другом напрямую.

Подробные сведения об использовании виртуальных сетей Azure в HDInsight см. в статье [Расширение возможностей HDInsight с помощью виртуальной сети Azure](hdinsight-extend-hadoop-virtual-network.md).

Пример использования двух типов кластера в виртуальной сети Azure см. в статье об [анализе данных с датчиков с использованием Storm и HBase](hdinsight-storm-sensor-data-analysis.md).

## <a name="basic-configuration-options"></a>Базовые параметры конфигурации
Ниже приведены базовые параметры конфигурации, необходимые для создания кластера HDInsight.

### <a name="cluster-name"></a>Имя кластера
Имя кластера используется для его идентификации. Имя кластера должно быть глобально уникальным и соответствовать этим правилам именования:

* поле должно представлять собой строку длиной от 3 до 63 символов;
* поле может содержать только буквы, цифры и дефисы.

### <a name="cluster-type"></a>Тип кластера
Ознакомьтесь с разделом [Типы кластеров](#cluster-types).

### <a name="operating-system"></a>операционная система
Кластеры HDInsight можно создавать на основе одной из двух операционных систем:

* HDInsight на платформе Linux. HDInsight предоставляет возможность настроить кластеры Linux в Azure. Настройте кластер Linux, если вы знакомы с Linux или Unix, выполняете миграцию из существующего решения Hadoop на платформе Linux или хотите с легкостью выполнить интеграцию с компонентами экосистемы Hadoop, созданными для Linux. Подробные сведения см. в статье [Начало работы с Hadoop в Linux на платформе HDInsight](hdinsight-hadoop-linux-tutorial-get-started.md).
* HDInsight на платформе Windows (центр обработки данных Windows Server 2012 R2).

### <a name="hdinsight-version"></a>Версия HDInsight
Версия HDInsight используется для определения версии HDInsight, которую следует использовать для этого кластера. Подробные сведения см. в статье [Что представляют собой различные компоненты Hadoop, доступные в HDInsight?](https://go.microsoft.com/fwLink/?LinkID=320896&clcid=0x409).

### <a name="subscription-name"></a>Имя подписки
Каждый кластер HDInsight привязывается к одной подписке Azure.

### <a name="resource-group-name"></a>Имя группы ресурсов
С помощью [Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) можно развертывать, обновлять, отслеживать или удалять ресурсы для приложения.

### <a name="credentials"></a>Учетные данные
Во время создания кластера HDInsight можно настроить три учетные записи пользователя.

* [Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) позволяет работать с ресурсами в приложении в виде группы, которая называется группой ресурсов Azure. Вы можете развертывать, обновлять, отслеживать или удалять все ресурсы для приложения в рамках одной скоординированной операции.
* Пользователь HTTP. По умолчанию используется имя пользователя *admin* в базовой конфигурации на портале Azure. Иногда его называют "пользователем кластера".
* Пользователь RDP (кластеры Windows). Подключитесь к кластеру с помощью протокола удаленного рабочего стола (RDP). При создании учетной записи необходимо задать дату окончания срока действия не позднее 90 дней от даты создания учетной записи.
* Пользователь SSH (кластеры Linux). Подключитесь к кластеру с помощью SSH. Дополнительные учетные записи пользователей SSH можно создать после создания кластера, следуя инструкциям в статье [Использование SSH с Hadoop в HDInsight на платформе Linux в Linux, Unix или OS X (предварительная версия)](hdinsight-hadoop-linux-use-ssh-unix.md).

### <a name="data-source"></a>Источник данных
Исходная распределенная файловая система Hadoop использует несколько локальных дисков в кластере. HDInsight использует для хранения данных хранилище BLOB-объектов Azure. Хранилище BLOB-объектов Azure — это надежное, универсальное решение, которое полностью интегрируется с HDInsight. С помощью интерфейса HDFS все компоненты HDInsight могут напрямую взаимодействовать со структурированными или неструктурированными данными в хранилище BLOB-объектов. Хранение данных в хранилище BLOB-объектов позволяет безопасно и без потери пользовательских данных удалять используемые для расчетов кластеры HDInsight.

В процессе настройки необходимо задать учетную запись хранения Azure и контейнер для хранения BLOB-объектов. В некоторых сценариях создания учетную запись и контейнер потребуется подготовить заранее. Кластер будет использовать этот контейнер в качестве хранилища по умолчанию. Вы также можете указать дополнительные учетные записи хранения Azure (связанные хранилища), к которым кластер получит доступ. Кластер также сможет получать доступ к любым контейнерам хранилища BLOB-объектов, настроенным с полным общим доступом для чтения или общим доступом для чтения только на уровне больших двоичных объектов.  Подробные сведения см. в статье [Управление анонимным доступом на чтение к контейнерам и большим двоичным объектам](../storage/storage-manage-access-to-resources.md).

![Хранилище HDInsight](./media/hdinsight-provision-clusters/HDInsight.storage.png)

> [!NOTE]
> Большие двоичные объекты группируются в контейнерах хранилища BLOB-объектов следующим образом.
> 
> 

В процессе настройки необходимо задать учетную запись хранения Azure и контейнер для хранения BLOB-объектов. В некоторых сценариях создания учетную запись и контейнер потребуется подготовить заранее. Кластер будет использовать этот контейнер в качестве хранилища по умолчанию. Вы также можете указать дополнительные учетные записи хранения Azure (связанные хранилища), к которым кластер может получать доступ. Кластер также сможет получать доступ к любым контейнерам больших двоичных объектов, настроенным с полным общим доступом для чтения или общим доступом для чтения только на уровне больших двоичных объектов. Подробные сведения см. в статье [Управление анонимным доступом на чтение к контейнерам и большим двоичным объектам](../storage/storage-manage-access-to-resources.md).

![Хранилище больших двоичных объектов Azure](./media/hdinsight-provision-clusters/Azure.blob.storage.jpg)

Контейнер хранилища BLOB-объектов по умолчанию не рекомендуется использовать для хранения бизнес-данных. Чтобы сократить затраты на хранение, контейнер хранилища BLOB-объектов по умолчанию рекомендуется удалять после каждого использования. Контейнер по умолчанию содержит журналы приложений и системный журнал. Обязательно извлеките эти журналы перед удалением контейнера.

> [!WARNING]
> HDInsight не поддерживает совместное использование одного контейнера хранилища BLOB-объектов для нескольких кластеров.
> 
> 

Подробнее о дополнительном хранилище BLOB-объектов: [Использование хранилища BLOB-объектов Azure с HDInsight](hdinsight-hadoop-use-blob-storage.md).

Наряду с хранилищем BLOB-объектов Azure в качестве учетной записи хранения по умолчанию для кластера HBase в HDInsight, а также в качестве связанного хранилища для всех четырех типов кластера HDInsight можно использовать [Azure Data Lake Store](../data-lake-store/data-lake-store-overview.md). Подробные сведения см. в статье [Создание кластера HDInsight с Data Lake Store с помощью портала Azure](../data-lake-store/data-lake-store-hdinsight-hadoop-use-portal.md).

### <a name="location-region"></a>Расположение (регион)
Кластер HDInsight должен находиться в том же расположении Azure, что и его учетная запись хранения, используемая по умолчанию.

![Регионы Azure](./media/hdinsight-provision-clusters/Azure.regions.png)

Просмотреть поддерживаемые регионы можно в раскрывающемся списке **Регион** на странице [Цены на HDInsight](https://go.microsoft.com/fwLink/?LinkID=282635&clcid=0x409).

### <a name="node-pricing-tiers"></a>Ценовые категории узлов
Клиенты оплачивают использование этих узлов на протяжении всего срока существования кластера. Начисление оплаты начинается после создания кластера и прекращается только после его удаления. Перевести кластер в режим ожидания или отменить его выделение невозможно.

Кластеры разных типов отличаются типами, количеством и размерами узлов. Например, в кластере Hadoop есть два *головных узла* и четыре *узла данных* по умолчанию. А в кластере Storm — два *узла Nimbus*, три *узла Zookeeper* и четыре *узла супервизора* по умолчанию. Затраты на кластеры HDInsight определяются числом узлов и размерами виртуальных машин на узлах. Например, если вы знаете, что будете выполнять операции, требующие большого объема памяти, вам, возможно, следует выбрать вычислительный ресурс с большим объемом памяти. Для учебных целей рекомендуется использовать один узел данных. Подробные сведения о ценах на HDInsight см. на [этой странице](https://go.microsoft.com/fwLink/?LinkID=282635&clcid=0x409).

> [!NOTE]
> Максимальный размер кластера зависит от подписки Azure. Чтобы увеличить лимит, обратитесь в службу поддержки по вопросам выставления счетов.
> 
> Узлы, используемые кластером, не учитываются в общем количестве виртуальных машин, так как образы виртуальных машин, используемые для узлов, реализуются службой HDInsight. Однако вычислительные ядра, используемые узлами, учитываются в общем количестве вычислительных ядер, доступных для вашей подписки. В разделе сводки в колонке "Ценовые категории узлов" при создании кластера HDInsight можно просмотреть доступные ядра и количество ядер, которые будут использоваться кластером.
> 
> 

При настройке кластера на портале Azure размер узла можно выбрать в колонке **Ценовая категория для узлов** . Здесь также отображаются расценки на узлы разных размеров. На следующем снимке экрана показаны варианты для кластера Hadoop под управлением Linux.

![Размеры узла виртуальной машины HDInsight](./media/hdinsight-provision-clusters/hdinsight.node.sizes.png)

В таблицах ниже перечислены все размеры, поддерживаемые кластерами HDInsight, и предоставляемые ими возможности.

### <a name="standard-tier-a-series"></a>Уровень Standard: серия A
В классической модели развертывания некоторые размеры виртуальных машин немного отличаются в PowerShell и интерфейсе командной строки.

* Standard_A3 — "Крупный".
* Standard_A4 — "Очень крупный".

| Размер | Ядра ЦП | Память | Сетевые адаптеры (макс.) | Макс. размер диска | Макс. количество дисков данных (по&1023; ГБ) | Макс. количество операций ввода-вывода в секунду (500 на диск) |
| --- | --- | --- | --- | --- | --- | --- |
| Standard_A3\"Крупный" |4 |7 ГБ |2 |Временный: 285 ГБ |8 |8x500 |
| Standard_A4\"Очень крупный" |8 |14 ГБ |4 |Временный: 605 ГБ |16 |16x500 |
| Standard_A6 |4 |28 ГБ |2 |Временный: 285 ГБ |8 |8x500 |
| Standard_A7 |8 |56 ГБ |4 |Временный: 605 ГБ |16 |16x500 |

### <a name="standard-tier-d-series"></a>Уровень Standard: серия D
| Размер | Ядра ЦП | Память | Сетевые адаптеры (макс.) | Макс. размер диска | Макс. количество дисков данных (по&1023; ГБ) | Макс. количество операций ввода-вывода в секунду (500 на диск) |
| --- | --- | --- | --- | --- | --- | --- |
| Standard_D3 |4. |14 ГБ |4 |Временный (SSD):&200; ГБ |8 |8x500 |
| Standard_D4 |8 |28 ГБ |8 |Временный (SSD):&400; ГБ |16 |16x500 |
| Standard_D12 |4. |28 ГБ |4 |Временный (SSD):&200; ГБ |8 |8x500 |
| Standard_D13 |8 |56 ГБ |8 |Временный (SSD):&400; ГБ |16 |16x500 |
| Standard_D14 |16 |112 ГБ |8 |Временный (SSD):&800; ГБ |32 |32x500 |

### <a name="standard-tier-dv2-series"></a>Уровень Standard: серия Dv2
| Размер | Ядра ЦП | Память | Сетевые адаптеры (макс.) | Макс. размер диска | Макс. количество дисков данных (по&1023; ГБ) | Макс. количество операций ввода-вывода в секунду (500 на диск) |
| --- | --- | --- | --- | --- | --- | --- |
| Standard_D3_v2 |4. |14 ГБ |4 |Временный (SSD):&200; ГБ |8 |8x500 |
| Standard_D4_v2 |8 |28 ГБ |8 |Временный (SSD):&400; ГБ |16 |16x500 |
| Standard_D12_v2 |4. |28 ГБ |4 |Временный (SSD):&200; ГБ |8 |8x500 |
| Standard_D13_v2 |8 |56 ГБ |8 |Временный (SSD):&400; ГБ |16 |16x500 |
| Standard_D14_v2 |16 |112 ГБ |8 |Временный (SSD):&800; ГБ |32 |32x500 |

Рекомендации по развертыванию, которые нужно учитывать, если планируется использовать эти ресурсы, приведены в статье [Размеры виртуальных машин в Azure](../virtual-machines/virtual-machines-windows-sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json). Сведения о ценах на разные размеры см. [здесь](https://azure.microsoft.com/pricing/details/hdinsight).   

> [!IMPORTANT]
> Если вы планируете использовать более 32 рабочих узлов (при создании кластера или в ходе масштабирования после создания кластера), то для головного узла потребуется минимум 8-ядерный процессор и 14 ГБ ОЗУ.
> 
> 

Начисление оплаты начинается после создания кластера и прекращается только после его удаления. Дополнительные сведения о ценах см. [здесь](https://azure.microsoft.com/pricing/details/hdinsight/).

| Размер | Ядра ЦП | Память | Сетевые адаптеры (макс.) | Макс. размер диска | Макс. количество дисков данных (по&1023; ГБ) | Макс. количество операций ввода-вывода в секунду (500 на диск) |
| --- | --- | --- | --- | --- | --- | --- |
| Standard_D3_v2 |4. |14 ГБ |4 |Временный (SSD):&200; ГБ |8 |8x500 |
| Standard_D4_v2 |8 |28 ГБ |8 |Временный (SSD):&400; ГБ |16 |16x500 |
| Standard_D12_v2 |4. |28 ГБ |4 |Временный (SSD):&200; ГБ |8 |8x500 |
| Standard_D13_v2 |8 |56 ГБ |8 |Временный (SSD):&400; ГБ |16 |16x500 |
| Standard_D14_v2 |16 |112 ГБ |8 |Временный (SSD):&800; ГБ |32 |32x500 |

Рекомендации по развертыванию, которые нужно учитывать, если планируется использовать эти ресурсы, приведены в статье [Размеры виртуальных машин в Azure](../virtual-machines/virtual-machines-windows-sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json). Сведения о расценках на разные размеры см. [здесь](https://azure.microsoft.com/pricing/details/hdinsight).  

> [!IMPORTANT]
> Если вы планируете использовать более 32 рабочих узлов (при создании кластера или в ходе масштабирования после создания кластера), для головного узла потребуется минимум 8-ядерный процессор и 14 ГБ ОЗУ.
> 
> 

 Начисление оплаты начинается после создания кластера и прекращается только после его удаления. Дополнительные сведения о ценах см. на странице [цен на HDInsight](https://azure.microsoft.com/pricing/details/hdinsight/).

## <a name="add-more-storage"></a>Добавление объема хранилища
В некоторых случаях вам может понадобиться добавить дополнительный объем хранилища в кластер. Например, у вас есть несколько учетных записей хранения Azure для разных географических регионов или разных служб и вам нужно проанализировать их с помощью HDInsight.

Подробнее о дополнительном хранилище BLOB-объектов: [Использование хранилища BLOB-объектов Azure с HDInsight](hdinsight-hadoop-use-blob-storage.md). Подробнее о дополнительных хранилищах Data Lake Store: [Создание кластера HDInsight с хранилищем озера данных с помощью портала Azure](../data-lake-store/data-lake-store-hdinsight-hadoop-use-portal.md).

## <a name="use-a-hiveoozie-metastore"></a>Использование хранилища метаданных Hive/Oozie
Если вы хотите сохранить таблицы Hive после удаления кластера HDInsight, то мы настоятельно рекомендуем использовать пользовательское хранилище метаданных, чтобы в будущем подключить это хранилище к другому кластеру HDInsight.

> [!IMPORTANT]
> Метахранилище HDInsight не обладает обратной совместимостью. Например, вы не сможете использовать метахранилище кластера HDInsight 3.3 для создания кластера HDInsight 3.2.
> 
> 

Метахранилище содержит метаданные Hive и Oozie, такие как таблицы, секции, схемы и столбцы Hive. Использование хранилища метаданных помогает сохранять метаданные Hive и Oozie. Таким образом вам не придется создавать повторно таблицы Hive или задания Oozie при создании нового кластера. Для хранения подобной информации Hive по умолчанию использует встроенную базу данных SQL Azure. Встроенная база данных не сохраняет метаданные при удалении кластера. Например, если создать таблицы Hive в кластере, созданном с хранилищем метаданных Hive, то в случае удаления и повторного создания кластера с использованием того же хранилища метаданных Hive вы увидите эти же таблицы.

Возможность настройки метахранилища не поддерживается для кластеров типа HBase.

> [!IMPORTANT]
> Создавая пользовательское хранилище метаданных, не используйте для базы данных имя, которое содержит тире или дефисы. Это может привести к сбою при создании кластера.
> 
> 

## <a name="use-azure-virtual-network"></a>Использование виртуальной сети Azure
[Виртуальная сеть Azure](https://azure.microsoft.com/documentation/services/virtual-network/) помогает создать безопасную, стабильную сеть, в которой будут находиться все ресурсы, необходимые для успешного функционирования вашего решения. Виртуальная сеть позволяет:

* Соединить облачные ресурсы с частной сетью (только для облачных решений).
  
    ![Диаграмма конфигурации только для облачных решений](./media/hdinsight-hadoop-provision-linux-clusters/hdinsight-vnet-cloud-only.png)
* Соединить ваши облачные ресурсы с сетью локального центра обработки данных (типа «сеть — сеть» или «точка — сеть») при помощи виртуальной частной сети (VPN).

| Конфигурации «сеть — сеть» | Конфигурации «точка — сеть» |
| --- | --- |
| Конфигурация типа "сеть-сеть" позволяет соединить несколько ресурсов вашего центра обработки данных с виртуальной сетью Azure при помощи аппаратного обеспечения VPN или службы маршрутизации и удаленного доступа.<br />![Диаграмма конфигурации соединения "сервер-сервер"](./media/hdinsight-hadoop-provision-linux-clusters/hdinsight-vnet-site-to-site.png) |Конфигурация типа "точка-сеть" позволяет подключить конкретный ресурс к виртуальной сети Azure с использованием программного обеспечения VPN.<br />![Диаграмма конфигурации соединения "клиент-сервер"](./media/hdinsight-hadoop-provision-linux-clusters/hdinsight-vnet-point-to-site.png) |

Для кластеров на базе Windows требуется классическая виртуальная сеть, а для кластеров на базе Linux — виртуальная сеть Azure Resource Manager. Если у вас несоответствующий тип сети, она будет бесполезна при создании кластера.

Дополнительные сведения об использовании HDInsight в виртуальной сети, включая требования к конфигурации виртуальной сети, см. в статье [Расширение возможностей HDInsight с помощью виртуальной сети Azure](hdinsight-extend-hadoop-virtual-network.md).

## <a name="customize-clusters-by-using-hdinsight-cluster-customization-bootstrap"></a>Настройка кластеров HDInsight (служба начальной загрузки)
В некоторых случаях требуется изменить следующие файлы конфигурации:

* clusterIdentity.xml
* core-site.xml
* gateway.xml
* hbase-env.xml
* hbase-site.xml
* hdfs-site.xml
* hive-env.xml
* hive-site.xml
* mapred-site
* oozie-site.xml
* oozie-env.xml
* storm-site.xml
* tez-site.xml
* webhcat-site.xml
* yarn-site.xml

Чтобы они сохранялись в течение всего времени существования кластера, можно в процессе создания изменить файлы конфигурации кластера HDInsight. Также в кластерах под управлением Linux можно использовать Ambari. Дополнительные сведения см. в статье [Настройка кластеров HDInsight с помощью начальной загрузки](hdinsight-hadoop-customize-cluster-bootstrap.md).

> [!NOTE]
> При пересоздании образа в кластерах под управлением Windows изменения не сохраняются. Подробные сведения см. в статье [Role Instance Restarts Due to OS Upgrades](http://blogs.msdn.com/b/kwill/archive/2012/09/19/role-instance-restarts-due-to-os-upgrades.aspx) (Перезапуск экземпляра роли из-за обновлений ОС). Чтобы изменения сохранялись в течение всего времени существования кластера, необходимо изменить настройки кластера HDInsight во время его создания.
> 
> 

## <a name="customize-clusters-by-using-script-action"></a>Настройка кластеров с помощью действия сценария
Можно установить дополнительные компоненты или настроить конфигурацию кластера с помощью сценариев во время создания. Такие скрипты вызываются с помощью **действия скрипта** — параметра конфигурации, который может использоваться с помощью портала Azure, командлетов HDInsight PowerShell или пакета SDK для HDInsight .NET. Дополнительные сведения см. в статье [Настройка кластеров HDInsight под управлением Windows с помощью действия сценария](hdinsight-hadoop-customize-cluster.md).

## <a name="cluster-creation-methods"></a>Способы создания кластера
В этой статье мы рассмотрели основные сведения о создании кластера HDInsight под управлением Windows. Приведенная ниже таблица поможет вам получить дополнительные сведения о создании кластера с помощью метода, который наилучшим образом соответствует вашим потребностям.

| Метод создания кластеров | браузер | Команда | Интерфейс REST API | SDK | ОС Linux, Mac OS X и Unix | Windows |
| --- |:---:|:---:|:---:|:---:|:---:|:---:|
| [Портал Azure](hdinsight-hadoop-create-windows-clusters-portal.md) |✔ |&nbsp; |&nbsp; |&nbsp; |✔ |✔ |
| [Интерфейс командной строки Azure](hdinsight-hadoop-create-windows-clusters-cli.md) |&nbsp; |✔ |&nbsp; |&nbsp; |✔ |✔ |
| [Azure PowerShell](hdinsight-hadoop-create-windows-clusters-powershell.md) |&nbsp; |✔ |&nbsp; |&nbsp; |✔ |✔ |
| [cURL](hdinsight-hadoop-create-linux-clusters-curl-rest.md) |&nbsp; |✔ |✔ |&nbsp; |✔ |✔ |
| [Пакет SDK для .NET](hdinsight-hadoop-create-windows-clusters-dotnet-sdk.md) |&nbsp; |&nbsp; |&nbsp; |✔ |✔ |✔ |
| [Шаблоны диспетчера ресурсов Azure](hdinsight-hadoop-create-windows-clusters-arm-templates.md) |&nbsp; |✔ |&nbsp; |&nbsp; |✔ |✔ |


