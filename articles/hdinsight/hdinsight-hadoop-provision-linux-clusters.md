---
title: "Создание кластеров Hadoop, HBase, Kafka, Storm или Spark в Azure HDInsight | Документация Майкрософт"
description: "Узнайте, как создавать кластеры Hadoop, HBase, Storm или Spark на базе Linux для HDInsight с помощью браузера, Azure CLI, Azure PowerShell, REST или пакета SDK."
keywords: "настройка кластеров hadoop, настройка кластеров kafka, настройка кластеров spark, настройка кластеров hbase, настройка кластеров storm, что такое кластер hadoop"
services: hdinsight
documentationcenter: 
author: mumian
manager: jhubbard
editor: cgronlun
tags: azure-portal
ms.assetid: 23a01938-3fe5-4e2e-8e8b-3368e1bbe2ca
ms.service: hdinsight
ms.custom: hdinsightactive
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 05/01/2017
ms.author: jgao
ms.translationtype: Human Translation
ms.sourcegitcommit: 5e92b1b234e4ceea5e0dd5d09ab3203c4a86f633
ms.openlocfilehash: ed0a5cfc02572d537f4b179ad612ad153a2db1d4
ms.contentlocale: ru-ru
ms.lasthandoff: 05/10/2017


---
# <a name="create-hadoop-clusters-in-hdinsight"></a>Создание кластеров Hadoop в HDInsight
[!INCLUDE [selector](../../includes/hdinsight-create-linux-cluster-selector.md)]

Кластер Hadoop включает в себя несколько виртуальных машин (узлов), которые используются для распределенной обработки задач в кластере. Azure HDInsight абстрагирует сведения об установке и конфигурации отдельных узлов, поэтому вам нужно указать только общие сведения о настройке. В этой статье вы узнаете об этих параметрах конфигурации.

## <a name="basic-configurations"></a>Основные конфигурации

На [портале Azure](https://portal.azure.com) можно создать кластер HDInsight, выбрав *Быстрое создание* или *Пользовательский*. В этом разделе рассматриваются параметры базовой конфигурации, используемые для быстрого создания. Параметр "Пользовательский" содержит следующие дополнительные параметры конфигурации:

- [Приложения](#hdinsight-applications)
- [Размер кластера](#cluster-size)
- Дополнительные параметры

  - [Действия скриптов](#customize-clusters-using-script-action)
  - [Виртуальная сеть](#use-virtual-network)

### <a name="subscription"></a>Подписка 
Каждый кластер HDInsight привязывается к одной подписке Azure.

### <a name="resource-group-name"></a>Имя группы ресурсов
[Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) позволяет работать с ресурсами в приложении в виде группы, которая называется группой ресурсов Azure. Вы можете развертывать, обновлять, отслеживать или удалять все ресурсы для приложения в рамках одной скоординированной операции.

### <a name="cluster-name"></a>Имя кластера
Имя кластера используется для его идентификации. Имя кластера должно быть глобально уникальным и соответствовать следующим правилам именования:

* поле должно представлять собой строку длиной от 3 до 63 знаков;
* поле может содержать только буквы, цифры и дефисы.

### <a name="cluster-types"></a>Тип кластера
Сейчас Azure HDInsight предоставляет следующие типы кластеров, каждый из которых имеет набор компонентов для предоставления определенных функциональных возможностей.

| Тип кластера | Функции |
| --- | --- |
| [Hadoop](hdinsight-hadoop-introduction.md) |Запросы и анализ (пакетные задания) |
| [HBase](hdinsight-hbase-overview.md) |Хранилище данных NoSQL |
| [Storm](hdinsight-storm-overview.md) |Обработка событий в режиме реального времени |
| [Spark](hdinsight-apache-spark-overview.md) |Обработка в памяти, интерактивные запросы, обработка потоков микро-пакетов |
| [Kafka (предварительная версия)](hdinsight-apache-kafka-introduction.md) | Распределенная платформа потоковой передачи с открытым кодом, которую можно использовать для создания конвейеров и приложений потоковой передачи данных в режиме реального времени. |
| [R Server](hdinsight-hadoop-r-server-overview.md) |Разнообразный анализ больших данных, прогнозное моделирование и возможности машинного обучения |
| [Interactive Hive (предварительная версия)](hdinsight-hadoop-use-interactive-hive.md) |Кэширование в памяти для обеспечения интерактивных и ускоренных запросов Hive |

Для каждого типа кластера используется своя терминология (узлы кластера называются по-разному). Кроме того, типы отличаются количеством узлов и стандартными размерами виртуальных машин. В следующей таблице число узлов каждого типа указано в скобках.

| Тип | Nodes | Схема |
| --- | --- | --- |
| Hadoop |Головной узел (2), узел данных (от 1) |![Узлы кластера HDInsight Hadoop](./media/hdinsight-hadoop-provision-linux-clusters/HDInsight-Hadoop-roles.png) |
| HBase |Головной сервер (2), региональный сервер (от 1), основной узел или узел Zookeeper (3) |![Узлы кластера HDInsight HBase](./media/hdinsight-hadoop-provision-linux-clusters/HDInsight-HBase-roles.png) |
| Storm |Узел Nimbus (2), сервер супервизора (от 1), узел Zookeeper (3) |![Узлы кластера HDInsight Storm](./media/hdinsight-hadoop-provision-linux-clusters/HDInsight-Storm-roles.png) |
| Spark |Головной узел (2), рабочий узел (от 1), узел Zookeeper (3) (кат. "Бесплатный" для размера виртуальной машины Zookeeper A1) |![Узлы кластера HDInsight Spark](./media/hdinsight-hadoop-provision-linux-clusters/HDInsight-Spark-roles.png) |

В следующих таблицах перечислены размеры виртуальных машин по умолчанию для HDInsight:

* Все поддерживаемые регионы, кроме южной Бразилии и западной Японии:

  | Тип кластера | Hadoop | HBase | Storm | Spark | R Server |
  | --- | --- | --- | --- | --- | --- |
  | Головной узел: размер виртуальной машины по умолчанию |D3 v2 |D3 v2 |A3 |D12 v2 |D12 v2 |
  | Головной узел: рекомендуемые размеры виртуальных машин |D3 v2, D4 v2, D12 v2 |D3 v2, D4 v2, D12 v2 |A3, A4, A5 |D12 v2, D13 v2, D14 v2 |D12 v2, D13 v2, D14 v2 |
  | Рабочая роль: размер виртуальной машины по умолчанию |D3 v2 |D3 v2 |D3 v2 |Windows: D12 v2; Linux: D4 v2 |Windows: D12 v2; Linux: D4 v2 |
  | Рабочая роль: рекомендуемые размеры виртуальных машин |D3 v2, D4 v2, D12 v2 |D3 v2, D4 v2, D12 v2 |D3 v2, D4 v2, D12 v2 |Windows: D12 v2, D13 v2, D14 v2; Linux: D4 v2, D12 v2, D13 v2, D14 v2 |Windows: D12 v2, D13 v2, D14 v2; Linux: D4 v2, D12 v2, D13 v2, D14 v2 |
  | ZooKeeper: размер виртуальной машины по умолчанию | |A3 |A2 | | |
  | ZooKeeper: рекомендуемые размеры виртуальных машин | |A3, A4, A5 |A2, A3, A4 | | |
  | Граничный узел: размер виртуальной машины по умолчанию | | | | |Windows: D12 v2; Linux: D4 v2 |
  | Граничный узел: рекомендуемый размер виртуальной машины | | | | |Windows: D12 v2, D13 v2, D14 v2; Linux: D4 v2, D12 v2, D13 v2, D14 v2 |
* Только южная Бразилия и западная Япония (здесь нет размеров v2):

  | Тип кластера | Hadoop | HBase | Storm | Spark | R Server |
  | --- | --- | --- | --- | --- | --- |
  | Головной узел: размер виртуальной машины по умолчанию |D3 |D3 |A3 |D12 |D12 |
  | Головной узел: рекомендуемые размеры виртуальных машин |D3, D4, D12 |D3, D4, D12 |A3, A4, A5 |D12, D13, D14 |D12, D13, D14 |
  | Рабочая роль: размер виртуальной машины по умолчанию |D3 |D3 |D3 |Windows: D12; Linux: D4 |Windows: D12; Linux: D4 |
  | Рабочая роль: рекомендуемые размеры виртуальных машин |D3, D4, D12 |D3, D4, D12 |D3, D4, D12 |Windows: D12, D13, D14; Linux: D4, D12, D13, D14 |Windows: D12, D13, D14; Linux: D4, D12, D13, D14 |
  | ZooKeeper: размер виртуальной машины по умолчанию | |A2 |A2 | | |
  | ZooKeeper: рекомендуемые размеры виртуальных машин | |A2, A3, A4 |A2, A3, A4 | | |
  | Граничный узел: размеры виртуальных машин по умолчанию | | | | |Windows: D12; Linux: D4 |
  | Граничный узел: рекомендуемые размеры виртуальных машин | | | | |Windows: D12, D13, D14; Linux: D4, D12, D13, D14 |

> [!NOTE]
> Головной узел для типа кластера Storm называется *Nimbus*. Рабочая роль в кластерах типа HBase называется *регионом*, а в кластерах типа Storm — *супервизором*.

> [!IMPORTANT]
> Если вы планируете использовать более 32 рабочих узлов (при создании кластера или в ходе масштабирования после создания кластера), для головного узла потребуется минимум 8-ядерный процессор и 14 ГБ ОЗУ.
>
>

С помощью [действий сценария](#customize-clusters-using-script-action) вы можете добавлять к этим базовым типам другие компоненты, например Hue.

> [!IMPORTANT]
> Кластеры HDInsight представлены разными типами, соответствующими рабочей нагрузке или технологии, для которой настроен кластер. Создать кластер, в котором бы объединились несколько типов, например Storm и HBase, нельзя.
>
>

Если для решения нужны технологии, распределенные по нескольким типам кластера HDInsight, то нужно создать виртуальную сеть Azure, а в ней — необходимые типы кластера. Благодаря такой конфигурации кластеры и любой развернутый в них код могут взаимодействовать друг с другом напрямую.

Подробные сведения об использовании виртуальных сетей Azure в HDInsight см. в статье [Расширение возможностей HDInsight с помощью виртуальной сети Azure](hdinsight-extend-hadoop-virtual-network.md).

Пример использования двух типов кластера в виртуальной сети Azure см. в статье об [анализе данных с датчиков с использованием Storm и HBase](hdinsight-storm-sensor-data-analysis.md).

### <a name="operating-system"></a>операционная система
Кластеры HDInsight можно создать в Windows или Linux.  Дополнительные сведения о версиях операционной системы см. в разделе [Поддерживаемые версии HDInsight](hdinsight-component-versioning.md#supported-hdinsight-versions). HDInsight версии 3.4 и выше использует дистрибутив Ubuntu Linux в качестве базовой операционной системы для кластера. 

### <a name="version"></a>Version (версия)
Этот параметр используется для определения версии HDInsight для кластера. Дополнительные сведения см. в разделе [Поддерживаемые версии HDInsight](hdinsight-component-versioning.md#supported-hdinsight-versions).

### <a name="cluster-tiers"></a>Уровень кластера

Azure HDInsight предлагает облачные решения для работы с большими данными в двух категориях: "Стандартный" и "Премиум".  Дополнительные сведения см. в разделе [HDInsight "Стандартный" и HDInsight "Премиум"](hdinsight-component-versioning.md#hdinsight-standard-and-hdinsight-premium).

На следующем снимке экрана показаны сведения портала Azure для выбора типов кластера.

![Конфигурация HDInsight категории "Премиум"](./media/hdinsight-hadoop-provision-linux-clusters/hdinsight-cluster-type-configuration.png)


### <a name="credentials"></a>Учетные данные
Во время создания кластера HDInsight можно настроить две учетные записи пользователя.

* Пользователь HTTP. Имя пользователя по умолчанию — *admin*. Эта учетная запись использует базовую конфигурацию на портале Azure. Иногда его называют "пользователем кластера".
* Пользователь SSH (кластеры Linux). Эта учетная запись используется для подключения к кластеру через SSH. Дополнительные сведения см. в статье [Использование SSH с Hadoop на основе Linux в HDInsight из Linux, Unix или OS X](hdinsight-hadoop-linux-use-ssh-unix.md).

### <a name="location"></a>Расположение
Расположение кластера не обязательно указывать явным образом. Кластер использует то же место хранения по умолчанию. Просмотреть поддерживаемые регионы можно в раскрывающемся списке **Регион** на странице [Цены на HDInsight](https://go.microsoft.com/fwLink/?LinkID=282635&clcid=0x409).


### <a name="storage"></a>Хранилище

Исходная распределенная файловая система Hadoop (HDFS) использует несколько локальных дисков в кластере. В качестве хранилища HDInsight использует большие двоичные объекты в [службе хранилища Azure](hdinsight-hadoop-provision-linux-clusters.md#azure-storage) или [Azure Data Lake Store](hdinsight-hadoop-provision-linux-clusters.md#azure-data-lake-store). Существуют определенные требования к использованию хранилищ Data Lake Store для HDInsight. Дополнительные сведения см. в статье [Создание кластеров HDInsight, использующих Data Lake Store, с помощью портала Azure](../data-lake-store/data-lake-store-hdinsight-hadoop-use-portal.md).

![Хранилище HDInsight](./media/hdinsight-hadoop-provision-linux-clusters/hdinsight-cluster-creation-storage.png)


#### <a name="azure-storage"></a>Служба хранилища Azure
Служба хранилища Azure — это надежное универсальное решение, которое полностью интегрируется с HDInsight. С помощью интерфейса HDFS все компоненты HDInsight могут напрямую взаимодействовать со структурированными или неструктурированными данными в больших двоичных объектах. Хранение данных в службе хранилища Azure позволяет безопасно и без потери пользовательских данных удалять используемые для вычислений кластеры HDInsight. HDInsight поддерживает только учетные записи хранения Azure __общего назначения__. Учетные записи __хранилища BLOB-объектов__ сейчас не поддерживаются.

В процессе настройки необходимо задать учетную запись хранения Azure и контейнер больших двоичных объектов в этой учетной записи. Кластер будет использовать контейнер больших двоичных объектов в качестве хранилища по умолчанию. Вы также можете указать дополнительные учетные записи хранения Azure (связанные хранилища), к которым кластер может получать доступ. Кластер также сможет получать доступ к любым контейнерам больших двоичных объектов, настроенным с полным общим доступом для чтения или общим доступом для чтения только на уровне больших двоичных объектов.

Применяемый по умолчанию контейнер больших двоичных объектов не рекомендуется использовать для хранения бизнес-данных. Чтобы сократить затраты на хранение, контейнер больших двоичных объектов по умолчанию рекомендуется удалять после каждого использования. Обратите внимание, что контейнер по умолчанию содержит журналы приложений и системный журнал. Обязательно извлеките эти журналы перед удалением контейнера.

Совместное использование одного контейнера больших двоичных объектов для нескольких кластеров не поддерживается.

Подробные сведения об использовании учетной записи хранения Azure см. в статье [Использование HDFS-совместимой службы хранилища с Hadoop в HDInsight](hdinsight-hadoop-use-blob-storage.md).

#### <a name="azure-data-lake-store"></a>Azure Data Lake Store
Наряду со службой хранилища Azure в качестве учетной записи хранения по умолчанию для кластера HBase в HDInsight, а также в качестве связанного хранилища для всех четырех типов кластера HDInsight можно использовать [Azure Data Lake Store](../data-lake-store/data-lake-store-overview.md). Подробные сведения см. в статье [Создание кластера HDInsight с Data Lake Store с помощью портала Azure](../data-lake-store/data-lake-store-hdinsight-hadoop-use-portal.md).

#### <a name="use-additional-storage"></a>Дополнительное хранилище

В некоторых случаях вам может понадобиться добавить дополнительный объем хранилища в кластер. Например, у вас есть несколько учетных записей хранения Azure для разных географических регионов или разных служб и вам нужно проанализировать их с помощью HDInsight.

При создании кластера HDInsight или после создания кластера можно добавить учетные записи хранения.  См. статью [Настройка кластеров HDInsight под управлением Linux с помощью действия сценария](hdinsight-hadoop-customize-cluster-linux.md).

Подробные сведения о дополнительной учетной записи хранения Azure см. в статье [Использование HDFS-совместимой службы хранилища с Hadoop в HDInsight](hdinsight-hadoop-use-blob-storage.md). Подробные сведения о дополнительном Data Lake Store см. в статье [Создание кластера HDInsight с Data Lake Store с помощью портала Azure](../data-lake-store/data-lake-store-hdinsight-hadoop-use-portal.md).


#### <a name="use-hiveoozie-metastore"></a>Хранилище метаданных Hive

Если вы хотите сохранить таблицы Hive после удаления кластера HDInsight, рекомендуем использовать пользовательское хранилище метаданных, чтобы в будущем подключить это хранилище к другому кластеру HDInsight.

> [!IMPORTANT]
> Хранилище метаданных HDInsight, созданное для одной версии кластера HDInsight, не может использоваться в других версиях такого кластера. Список версий HDInsight см. в разделе [Поддерживаемые версии HDInsight](hdinsight-component-versioning.md#supported-hdinsight-versions).

Хранилище метаданных содержит метаданные Hive, такие как таблицы, секции, схемы и столбцы Hive. Хранилище метаданных помогает сохранять метаданные Hive, чтобы не создавать повторно таблицы Hive при создании кластера. Для хранения подобной информации Hive по умолчанию использует встроенную базу данных SQL Azure. Встроенная база данных не сохраняет метаданные при удалении кластера. Если создать таблицу Hive в кластере HDInsight с хранилищем метаданных Hive, то эти таблицы будут доступны в новом кластере, полученном в результате повторного создания кластера с использованием того же хранилища метаданных Hive.

Возможность настройки хранилища метаданных не поддерживается для всех типов кластеров, например для кластеров HBase или Kafka.

> [!IMPORTANT]
> Создавая пользовательское хранилище метаданных, не используйте для базы данных имя, которое содержит тире, дефисы или пробелы. Это может привести к сбою при создании кластера.

> [!WARNING]
> Хранилище данных SQL Azure не поддерживается для хранилища метаданных Hive.


#### <a name="oozie-metastore"></a>Хранилище метаданных Oozie

Для повышения производительности Oozie используйте пользовательское хранилище метаданных. Оно также пригодится, когда требуется доступ к данным задания Oozie после удаления кластера. Если вы не планируете использовать Oozie или планируете использовать его только периодически, вам не нужно создавать пользовательское хранилище метаданных.

> [!IMPORTANT]
> Повторно использовать хранилище метаданных Oozie невозможно. Чтобы использовать пользовательское хранилище метаданных Oozie, при создании кластера HDInsight необходимо предоставить пустую базу данных SQL Azure.

Возможность настройки хранилища метаданных не поддерживается для всех типов кластеров, например для кластеров HBase или Kafka.

> [!WARNING]
> Хранилище данных SQL Azure не поддерживается для хранилища метаданных Oozie.

## <a name="install-hdinsight-applications"></a>Установка приложений HDInsight

Пользователи могут устанавливать приложения HDInsight в кластере HDInsight под управлением Linux. Разработчиками этих приложений могут быть корпорация Майкрософт, независимые поставщики программного обеспечения или вы сами. Дополнительные сведения см. в статье [Установка сторонних приложений Hadoop в Azure HDInsight](hdinsight-apps-install-applications.md).

Большинство приложений HDInsight устанавливаются в пустой граничный узел.  Пустой граничный узел — это виртуальная машина Linux, на которой установлены и настроены те же клиентские инструменты, что и на головном узле. Граничный узел можно использовать для доступа к кластеру, а также тестирования и размещения клиентских приложений. Подробные сведения см. в статье [Использование пустых граничных узлов в HDInsight](hdinsight-apps-use-edge-node.md).

## <a name="configure-cluster-size"></a>Настройка размера кластера

Клиенты оплачивают использование этих узлов на протяжении всего срока существования кластера. Начисление оплаты начинается после создания кластера и прекращается только после его удаления. Перевести кластер в режим ожидания или отменить его выделение невозможно.

Кластеры разных типов отличаются типами, количеством и размерами узлов. Например, в кластере Hadoop есть два *головных узла* и четыре *узла данных* по умолчанию. А в кластере Storm — два *узла Nimbus*, три *узла ZooKeeper* и четыре *узла супервизора* по умолчанию. Затраты на кластеры HDInsight определяются числом узлов и размерами виртуальных машин на узлах. Например, если вы знаете, что будете выполнять операции, требующие большого объема памяти, вам, возможно, следует выбрать вычислительный ресурс с большим объемом памяти. Для учебных целей рекомендуется использовать один узел данных. Подробные сведения о ценах на HDInsight см. на [этой странице](https://go.microsoft.com/fwLink/?LinkID=282635&clcid=0x409).

> [!NOTE]
> Максимальный размер кластера зависит от подписки Azure. Чтобы увеличить лимит, обратитесь в службу поддержки по вопросам выставления счетов.
>
> Узлы, используемые кластером, не учитываются в общем количестве виртуальных машин, так как образы виртуальных машин, используемые для узлов, реализуются службой HDInsight. Вычислительные ядра, используемые узлами, учитываются в общем количестве вычислительных ядер, доступных для вашей подписки. В разделе сводки в колонке **Размер кластера** при создании кластера HDInsight можно просмотреть количество ядер, которые будут использоваться кластером, а также доступное количество ядер.
>
>

При настройке кластера на портале Azure размер узла можно выбрать в колонке **Ценовые категории узлов**. Здесь также отображаются расценки на узлы разных размеров. На следующем снимке экрана показаны варианты для кластера Hadoop под управлением Linux.

![Размеры узла виртуальной машины HDInsight](./media/hdinsight-hadoop-provision-linux-clusters/hdinsight-node-sizes.png)

В таблицах ниже перечислены размеры, поддерживаемые кластерами HDInsight, и предоставляемые ими возможности.

### <a name="standard-tier-a-series"></a>Уровень Standard: серия A
В классической модели развертывания некоторые размеры виртуальных машин немного отличаются в PowerShell и интерфейсе командной строки (CLI).

* Standard_A3 — "Крупный".
* Standard_A4 — "Очень крупный".

| Размер | Ядра ЦП | Память | Сетевые адаптеры (макс.) | Макс. размер диска | Макс. количество дисков данных (по 1023 ГБ) | Макс. количество операций ввода-вывода в секунду (500 на диск) |
| --- | --- | --- | --- | --- | --- | --- |
| Standard_A3\"Крупный" |4 |7 ГБ |2 |Временный: 285 ГБ |8 |8x500 |
| Standard_A4\"Очень крупный" |8 |14 ГБ |4 |Временный: 605 ГБ |16 |16x500 |
| Standard_A6 |4 |28 ГБ |2 |Временный: 285 ГБ |8 |8x500 |
| Standard_A7 |8 |56 ГБ |4 |Временный: 605 ГБ |16 |16x500 |

### <a name="standard-tier-d-series"></a>Уровень Standard: серия D
| Размер | Ядра ЦП | Память | Сетевые адаптеры (макс.) | Макс. размер диска | Макс. количество дисков данных (по 1023 ГБ) | Макс. количество операций ввода-вывода в секунду (500 на диск) |
| --- | --- | --- | --- | --- | --- | --- |
| Standard_D3 |4. |14 ГБ |4 |Временный (SSD): 200 ГБ |8 |8x500 |
| Standard_D4 |8 |28 ГБ |8 |Временный (SSD): 400 ГБ |16 |16x500 |
| Standard_D12 |4. |28 ГБ |4 |Временный (SSD): 200 ГБ |8 |8x500 |
| Standard_D13 |8 |56 ГБ |8 |Временный (SSD): 400 ГБ |16 |16x500 |
| Standard_D14 |16 |112 ГБ |8 |Временный (SSD): 800 ГБ |32 |32x500 |

### <a name="standard-tier-dv2-series"></a>Уровень Standard: серия Dv2
| Размер | Ядра ЦП | Память | Сетевые адаптеры (макс.) | Макс. размер диска | Макс. количество дисков данных (по 1023 ГБ) | Макс. количество операций ввода-вывода в секунду (500 на диск) |
| --- | --- | --- | --- | --- | --- | --- |
| Standard_D3_v2 |4. |14 ГБ |4 |Временный (SSD): 200 ГБ |8 |8x500 |
| Standard_D4_v2 |8 |28 ГБ |8 |Временный (SSD): 400 ГБ |16 |16x500 |
| Standard_D12_v2 |4. |28 ГБ |4 |Временный (SSD): 200 ГБ |8 |8x500 |
| Standard_D13_v2 |8 |56 ГБ |8 |Временный (SSD): 400 ГБ |16 |16x500 |
| Standard_D14_v2 |16 |112 ГБ |8 |Временный (SSD): 800 ГБ |32 |32x500 |

Рекомендации по развертыванию, которые нужно учитывать, если планируется использовать эти ресурсы, приведены в статье [Размеры виртуальных машин в Azure](../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json). Сведения о расценках на разные размеры см. [здесь](https://azure.microsoft.com/pricing/details/hdinsight).   

> [!IMPORTANT]
> Если вы планируете использовать более 32 рабочих узлов (при создании кластера или в ходе масштабирования после создания кластера), для головного узла потребуется минимум 8-ядерный процессор и 14 ГБ ОЗУ.
>
>

Начисление оплаты начинается после создания кластера и прекращается только после его удаления. Подробные сведения о ценах см. на странице [цен на HDInsight](https://azure.microsoft.com/pricing/details/hdinsight/).


> [!WARNING]
> Использование дополнительной учетной записи хранения, местоположение которой отличается от местоположения кластера HDInsight, не поддерживается.



## <a name="use-virtual-network"></a>Использование виртуальной сети
С помощью [виртуальной сети Azure](https://azure.microsoft.com/documentation/services/virtual-network/) можно создать безопасную, стабильную сеть, в которой будут находиться все ресурсы, необходимые для успешного функционирования вашего решения. Дополнительные сведения об использовании HDInsight в виртуальной сети, включая требования к конфигурации виртуальной сети, см. в статье [Расширение возможностей HDInsight с помощью виртуальной сети Azure](hdinsight-extend-hadoop-virtual-network.md).


## <a name="customize-clusters-using-script-action"></a>Настройка кластеров с помощью действия скрипта

Можно установить дополнительные компоненты или настроить конфигурацию кластера с помощью сценариев во время создания. Такие скрипты вызываются с помощью **действия скрипта** — параметра конфигурации, который может использоваться с помощью портала Azure, командлетов HDInsight PowerShell или пакета SDK для HDInsight .NET. Дополнительные сведения см. в статье [Настройка кластеров HDInsight под управлением Linux с помощью действия сценария](hdinsight-hadoop-customize-cluster-linux.md).

Некоторые собственные компоненты Java, такие как Mahout и Cascading, могут выполняться в кластере как JAR-файлы. Эти JAR-файлы можно распространить в службе хранилища Azure и отправить в кластеры HDInsight с помощью механизмов отправки заданий Hadoop. Подробные сведения см. в статье [Отправка заданий Hadoop в HDInsight](hdinsight-submit-hadoop-jobs-programmatically.md).

> [!NOTE]
> Если при развертывании или вызове JAR-файлов в кластерах HDInsight возникают проблемы, обратитесь в [службу поддержки Майкрософт](https://azure.microsoft.com/support/options/).
>
> Компонент Cascading не поддерживается службой HDInsight и на него не распространяется техническая поддержка Майкрософт. Списки поддерживаемых компонентов см. в статье [Что представляют собой различные компоненты Hadoop, доступные в HDInsight?](hdinsight-component-versioning.md)
>
>

В некоторых случаях требуется изменить следующие файлы конфигурации в процессе создания:

* clusterIdentity.xml
* core-site.xml
* gateway.xml
* hbase-env.xml
* hbase-site.xml
* hdfs-site.xml
* hive-env.xml
* hive-site.xml
* mapred-site
* oozie-site.xml
* oozie-env.xml
* storm-site.xml
* tez-site.xml
* webhcat-site.xml
* yarn-site.xml

Подробные сведения см. в статье [Настройка кластеров HDInsight с помощью начальной загрузки](hdinsight-hadoop-customize-cluster-bootstrap.md).

## <a name="cluster-creation-methods"></a>Способы создания кластера
В этой статье мы рассмотрели основные сведения о создании кластера HDInsight под управлением Linux. Приведенная ниже таблица поможет вам получить дополнительные сведения о создании кластера с помощью метода, который наилучшим образом соответствует вашим потребностям.

| Метод создания кластеров | браузер | Команда | Интерфейс REST API | SDK | ОС Linux, Mac OS X и Unix | Windows |
| --- |:---:|:---:|:---:|:---:|:---:|:---:|
| [Портал Azure](hdinsight-hadoop-create-linux-clusters-portal.md) |✔ |&nbsp; |&nbsp; |&nbsp; |✔ |✔ |
| [Фабрика данных Azure](hdinsight-hadoop-create-linux-clusters-adf.md) |✔ |✔ |✔ |✔ |✔ |✔ |
| [Интерфейс командной строки Azure](hdinsight-hadoop-create-linux-clusters-azure-cli.md) |&nbsp; |✔ |&nbsp; |&nbsp; |✔ |✔ |
| [Azure PowerShell](hdinsight-hadoop-create-linux-clusters-azure-powershell.md) |&nbsp; |✔ |&nbsp; |&nbsp; |✔ |✔ |
| [cURL](hdinsight-hadoop-create-linux-clusters-curl-rest.md) |&nbsp; |✔ |✔ |&nbsp; |✔ |✔ |
| [Пакет SDK для .NET](hdinsight-hadoop-create-linux-clusters-dotnet-sdk.md) |&nbsp; |&nbsp; |&nbsp; |✔ |✔ |✔ |
| [Шаблоны диспетчера ресурсов Azure](hdinsight-hadoop-create-linux-clusters-arm-templates.md) |&nbsp; |✔ |&nbsp; |&nbsp; |✔ |✔ |

## <a name="troubleshoot"></a>Устранение неполадок

Если при создании кластеров HDInsight возникли проблемы, см. раздел [Создание кластеров](hdinsight-administer-use-portal-linux.md#create-clusters).

## <a name="next-steps"></a>Дальнейшие действия

- [Введение в экосистему Hadoop в Azure HDInsight](hdinsight-hadoop-introduction.md).
- [Руководство по Hadoop. Приступая к работе с Hadoop в HDInsight](hdinsight-hadoop-linux-tutorial-get-started.md).
