---
title: "Мониторинг и управление кластерами Azure HDInsight с помощью веб-интерфейса Ambari | Документация Майкрософт"
description: "Узнайте, как использовать Ambari для наблюдения за кластерами HDInsight на платформе Linux и управления их функционированием. В этом документе рассказывается об использовании веб-интерфейса Ambari, предоставляемого с кластерами HDInsight."
services: hdinsight
documentationcenter: 
author: Blackmist
manager: jhubbard
editor: cgronlun
tags: azure-portal
ms.assetid: 4787f3cc-a650-4dc3-9d96-a19a67aad046
ms.service: hdinsight
ms.custom: hdinsightactive
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 02/08/2017
ms.author: larryfr
translationtype: Human Translation
ms.sourcegitcommit: 785d3a8920d48e11e80048665e9866f16c514cf7
ms.openlocfilehash: 290271855ac54af8c99311ff675a08d1e6942d93
ms.lasthandoff: 04/12/2017


---
# <a name="manage-hdinsight-clusters-by-using-the-ambari-web-ui"></a>Управление кластерами HDInsight с помощью веб-интерфейса Ambari

[!INCLUDE [ambari-selector](../../includes/hdinsight-ambari-selector.md)]

Apache Ambari упрощает управление кластером Hadoop и его мониторинг за счет удобного пользовательского веб-интерфейса и интерфейса REST API. Ambari предоставляется с кластерами HDInsight под управлением Linux и используется для мониторинга кластера и внесения изменений в его конфигурацию.

В этом документе рассказывается об использовании веб-интерфейса Ambari с кластером HDInsight.

## <a id="whatis"></a>Что такое Ambari

[Apache Ambari](http://ambari.apache.org) упрощает управление Hadoop, предоставляя простой в использовании веб-интерфейс, который можно использовать для подготовки и мониторинга кластеров Hadoop, а также управления их функционированием. Разработчики могут интегрировать эти возможности в своих приложениях с помощью [интерфейсов REST API Ambari](https://github.com/apache/ambari/blob/trunk/ambari-server/docs/api/v1/index.md).

Веб-интерфейс Ambari предоставляется по умолчанию с кластерами HDInsight, использующими операционную систему Linux.

> [!IMPORTANT]
> Linux — единственная операционная система, используемая для работы с HDInsight 3.4 или более поздней версии. См. дополнительные сведения о [нерекомендуемых версиях HDInsight в Windows](hdinsight-component-versioning.md#hdi-version-33-nearing-deprecation-date). 

## <a name="connectivity"></a>Соединение

Веб-интерфейс Ambari доступен по адресу HTTPS://CLUSTERNAME.azurehdidnsight.net, где **CLUSTERNAME** — это имя вашего кластера HDInsight.

> [!IMPORTANT]
> Подключение к Ambari в HDInsight выполняется по протоколу HTTPS. Кроме того, для входа в Ambari нужно использовать имя учетной записи администратора (по умолчанию используется **admin**) и пароль, указанные при создании кластера.

## <a name="ssh-tunnel-proxy"></a>Туннель SSH (прокси-сервер)

> [!NOTE]
> Хотя Ambari для кластера можно использовать непосредственно в Интернете, некоторые ссылки из веб-интерфейса Ambari (например, для JobTracker) не доступны в Интернете. Поэтому при попытке доступа к этим функциям может отображаться ошибка "сервер не найден", если вы не используете на головном узле кластера туннель Secure Shell (SSH) для проксирования веб-трафика.

Сведения о создании SSH-туннеля для работы с Ambari см. в статье [Использование туннелирования SSH для доступа к веб-интерфейсу Ambari, JobHistory, NameNode, Oozie и другим веб-интерфейсам](hdinsight-linux-ambari-ssh-tunnel.md).

## <a name="ambari-web-ui"></a>Веб-интерфейс Ambari

При подключении к веб-интерфейсу Ambari вам будет предложено ввести учетные данные для доступа к странице. Укажите имя администратора кластера (по умолчанию это Admin) и пароль, которые были указаны при создании кластера.

При открытии страницы обратите внимание на панель вверху. Она содержит следующую информацию и элементы управления:

![ambari-nav](./media/hdinsight-hadoop-manage-ambari/ambari-nav.png)

* **Логотип Ambari** — позволяет открыть панель мониторинга, которую можно использовать для мониторинга кластера.

* **Имя кластера, за которым следует поле «К-во операций»** — число текущих операций Ambari. Если выбрать имя кластера или **# ops** (К-во операций), отобразится список фоновых операций.

* **К-во оповещений** — число предупреждений или критических оповещений для кластера, если таковые имеются. При выборе этого элемента отобразится список оповещений.

* **Панель мониторинга** — позволяет отобразить панель мониторинга.

* **Службы** — информация и параметры конфигурации служб в кластере.

* **Узлы** — информация и параметры конфигурации узлов в кластере.

* **Оповещения** — журнал с информацией, предупреждениями и критическими оповещениями.

* **Администратор** — стек программного обеспечения и службы, которые установлены в кластере, информация об учетной записи службы и данные о безопасности Kerberos.

* **Кнопка «Администратор»** — управление Ambari, параметры пользователя и выход.

## <a name="monitoring"></a>Мониторинг

### <a name="alerts"></a>Оповещения

Ambari предоставляет множество предупреждений, которые могут находиться в одном из следующих состояний:

* **ОК;**
* **Предупреждение;**
* **КРИТИЧЕСКИЙ;**
* **НЕИЗВЕСТНО.**

При любых оповещениях, кроме **ОК**, в поле **# alerts** (К-во оповещений) в верхней части страницы будет отображаться их общее количество. Выберите эту запись, чтобы отобразить предупреждения и их состояние.

Оповещения разбиты на несколько групп по умолчанию, которые можно просмотреть на странице **Оповещения** .

![страница «Оповещения»](./media/hdinsight-hadoop-manage-ambari/alerts.png)

Группами можно управлять с помощью меню **Действия**, а также выбрав **Manage Alert Groups** (Управление группами оповещений). Это позволит изменить существующие группы или создать новые.

![диалоговое окно «Управление группами оповещений»](./media/hdinsight-hadoop-manage-ambari/manage-alerts.png)

Вы можете управлять способами оповещения и создавать уведомления об оповещениях в меню **Действия**, выбрав __Manage Alert Notifications__ (Управление уведомлениями об оповещениях). При этом отображаются текущие уведомления. Кроме того, здесь вы можете создавать уведомления. Уведомления можно отправлять по **электронной почте** или **протоколу SNMP** при возникновении определенного сочетания оповещения и уровня серьезности. Например, оповещение можно отправить, если для какого-либо оповещения в группе **YARN Default** (YARN по умолчанию) установлено значение **Критическое**.

![диалоговое окно создания оповещения](./media/hdinsight-hadoop-manage-ambari/create-alert-notification.png)

Наконец, выбрав __Manage Alert Settings__ (Управление параметрами оповещения) в меню __Действия__, вы сможете настроить, сколько раз должно появляться оповещение перед отправкой уведомления. Таким образом можно игнорировать уведомления о временных ошибках, например, когда происходит сбой службы на одном головном узле и она перезапускается на другом.

### <a name="cluster"></a>HDInsight

На вкладке **Метрики** панели мониторинга содержится ряд мини-приложений, которые позволяют легко определить состояние кластера с первого взгляда. Если щелкнуть некоторые мини-приложения, например **Загрузка ЦП**, отобразится дополнительная информация.

![панель мониторинга с метриками](./media/hdinsight-hadoop-manage-ambari/metrics.png)

На вкладке **Тепловые карты** метрики отображаются в виде цветных тепловых карт с переходом от зеленого к красному.

![панель мониторинга с тепловыми картами](./media/hdinsight-hadoop-manage-ambari/heatmap.png)

Чтобы узнать больше об узлах кластера, выберите **Узлы**, а затем — определенный узел, который вас интересует.

![информация об узле](./media/hdinsight-hadoop-manage-ambari/host-details.png)

### <a name="services"></a>Службы

Боковая панель **Службы** на панели мониторинга позволяет получить общее представление о состоянии служб, работающих в кластере. Для обозначения состояния или мер, которые необходимо предпринять, используются различные значки, например желтый значок циклического повторения, если нужно перезапустить службу.

![боковая панель «Службы»](./media/hdinsight-hadoop-manage-ambari/service-bar.png)

> [!NOTE]
> Для разных типов и версий кластера HDInsight отображаются разные службы. Службы, отображаемые здесь, могут отличаться от служб, отображаемых для вашего кластера.

При выборе службы для нее отобразятся более подробные сведения.

![сводные данные о службе](./media/hdinsight-hadoop-manage-ambari/service-details.png)

#### <a name="quick-links"></a>Быстрые ссылки

Для некоторых служб в верхней части страницы отображается ссылка **Быстрые ссылки** . Их можно использовать для доступа к определенным веб-интерфейсам службы, например:

* **Журнал заданий** — журнал заданий MapReduce;
* **Диспетчер ресурсов** — пользовательский интерфейс диспетчера ресурсов YARN;
* **NameNode** — пользовательский интерфейс NameNode распределенной файловой системы Hadoop (HDFS).
* **Веб-интерфейс Oozie** — пользовательский интерфейс Oozie.

При выборе любой из этих ссылок в браузере откроется новая вкладка с выбранной страницей.

> [!NOTE]
> Если не используется SSL-туннель для проксирования веб-трафика, поступающего в кластер, выбор ссылки **Быстрые ссылки** для любой службы приведет к ошибке "сервер не найден". Это связано с тем, что веб-приложения, используемые для отображения этих сведений, не доступны в Интернете.
>
> Сведения об использовании SSH-туннеля с HDInsight см. в статье [Использование туннелирования SSH для доступа к веб-интерфейсу Ambari, JobHistory, NameNode, Oozie и другим веб-интерфейсам](hdinsight-linux-ambari-ssh-tunnel.md).

## <a name="management"></a>управления

### <a name="ambari-users-groups-and-permissions"></a>Пользователи, группы и разрешения Ambari

Управление пользователями, группами и разрешениями поддерживается только в [присоединенных к домену](hdinsight-domain-joined-introduction.md) кластерах HDInsight. Сведения об использовании пользовательского интерфейса управления Ambari в присоединенном к домену кластере см. в статье [Введение в присоединенные к домену кластеры HDInsight (предварительная версия)](hdinsight-domain-joined-introduction.md).

> [!WARNING]
> Не изменяйте пароль модуля наблюдения Ambari (hdinsightwatchdog) в кластере HDInsight под управлением Linux. Это не позволит выполнять действия сценария или операции масштабирования в кластере.

### <a name="hosts"></a>Узлы

На странице **Узлы** перечислены все узлы в кластере. Для управления узлами, сделайте следующее.

![страница «Узлы»](./media/hdinsight-hadoop-manage-ambari/hosts.png)

> [!NOTE]
> В кластерах HDInsight не следует использовать добавление, списание или восстановление списанного узла.

1. Выберите узлы, которыми вы хотите управлять.

2. С помощью меню **Действия** выберите действие, которое необходимо выполнить.

   * **Запустить все компоненты** — запуск всех компонентов на узле.

   * **Остановить все компоненты** — остановка всех компонентов на узле.

   * **Перезапустить все компоненты** — остановка и запуск всех компонентов на узле.

   * **Включить режим обслуживания** — подавление оповещений для узла. Этот параметр должен быть включен при выполнении действий, которые будут создавать оповещения, например перезапуск службы, которую используют запущенные службы.

   * **Отключить режим обслуживания** — возврат узла к обычному режиму оповещений.

   * **Остановить** — остановка DataNode или NodeManagers на узле.

   * **Запуск** — запуск DataNode или NodeManagers на узле.

   * **Перезапустить** — остановка и запуск DataNode или NodeManagers на узле.

   * **Списать** — удаление узла из кластера.

     > [!NOTE]
     > Не используйте это действие в кластерах HDInsight.

   * **Восстановить списанные** — добавление списанных ранее узлов в кластер.

     > [!NOTE]
     > Не используйте это действие в кластерах HDInsight.

### <a id="service"></a>Службы

На странице **Панель мониторинга** или **Службы** нажмите кнопку **Действия** в нижней части списка служб, чтобы остановить и снова запустить все службы.

![Действия со службой](./media/hdinsight-hadoop-manage-ambari/service-actions.png)

> [!WARNING]
> Хотя в этом меню и есть пункт **Добавить службу**, не следует использовать его для добавления служб в кластер HDInsight. Для добавления новых служб следует использовать действие сценария во время подготовки кластера. Дополнительные сведения об использовании действий скрипта см. в статье [Настройка кластеров HDInsight под управлением Linux с помощью действия сценария](hdinsight-hadoop-customize-cluster-linux.md).

Хотя с помощью кнопки **Действия** можно перезапустить все службы, зачастую требуется запустить, остановить или перезапустить только одну из них. Чтобы выполнить действия для отдельной службы, сделайте следующее.

1. На странице **Панель мониторинга** или **Службы** выберите службу.

2. В верхней части вкладки **Сводка** нажмите кнопку **Service Actions** (Действия со службой) и выберите действие, которое необходимо выполнить. Это приведет к перезапуску службы на всех узлах.

    ![действие в службе](./media/hdinsight-hadoop-manage-ambari/individual-service-actions.png)

   > [!NOTE]
   > Перезапуск некоторых служб во время работы кластера может привести к формированию предупреждений. Чтобы избежать этого, можно использовать кнопку **Service Actions** (Действия со службой), чтобы включить **режим обслуживания** для службы перед выполнением перезагрузки.

3. После выбора действия значение в поле **# op** (К-во операций) в верхней части страницы увеличится, что будет свидетельствовать о выполнении фоновой операции. Если настроено отображение списка фоновых операций, этот список появится на экране.

   > [!NOTE]
   > Если для службы включен **режим обслуживания**, не забудьте отключить его. Для этого нажмите кнопку **Service Actions** (Действия со службой) после завершения операции.

Чтобы настроить службу, сделайте следующее:

1. На странице **Панель мониторинга** или **Службы** выберите службу.

2. Выберите вкладку **Конфигурации** . Отобразится текущая конфигурация. Отобразится также список предыдущих конфигураций.

    ![конфигурации](./media/hdinsight-hadoop-manage-ambari/service-configs.png)

3. Используйте отображаемые поля для изменения конфигурации, а затем выберите **Сохранить**. Можно также выбрать предыдущую конфигурацию, а затем выбрать **Сделать текущей** , чтобы выполнить откат к предыдущим настройкам.

## <a name="ambari-views"></a>Представления Ambari

Представления Ambari позволяют разработчикам подключать элементы пользовательского интерфейса к веб-интерфейсу Ambari, используя [Ambari Views Framework](https://cwiki.apache.org/confluence/display/AMBARI/Views). HDInsight предлагает следующие представления с типами кластеров Hadoop:

* Диспетчер очередей Yarn. Диспетчер очередей предоставляет простой пользовательский интерфейс для просмотра и изменения очередей Yarn.

* Представление Hive. Представление Hive позволяет выполнять запросы Hive прямо из браузера. Можно сохранять запросы, просматривать результаты, сохранять их в хранилище кластера или загружать результаты в локальную систему. Дополнительные сведения об использовании представлений Hive см. [здесь](hdinsight-hadoop-use-hive-ambari-view.md).

* Представление Tez. Представление Tez позволяет лучше понимать и оптимизировать задания, просматривая сведения о том, какие задания выполняются и какие ресурсы для этого используются.

