<properties
	pageTitle="Новые возможности версий кластеров Hadoop в HDInsight | Microsoft Azure"
	description="HDInsight поддерживает несколько версий кластеров Hadoop, которые могут быть развернуты в любое время. См. поддерживаемые версии платформы данных HortonWorks Data Platform (HDP) и Hadoop."
	services="hdinsight"
	editor="cgronlun"
	manager="jhubbard"
	authors="mumian"
	documentationCenter=""/>

<tags
	ms.service="hdinsight"
	ms.workload="big-data"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="07/25/2016"
	ms.author="jgao"/>


#Новые возможности в версиях кластеров Hadoop, предоставляемых в HDInsight

##Версии HDInsight и компоненты Hadoop
Azure HDInsight поддерживает несколько версий кластера Hadoop, которые могут быть развернуты в любое время. Каждая из версий содержит конкретную версию платформы HortonWorks Data Platform (HDP) и набор компонентов, содержащихся в этой версии. Версии компонентов, связанные с версиями кластера HDInsight, приведены в следующей таблице. Обратите внимание, что в настоящее время Azure HDInsight по умолчанию использует версию кластера 3.1 на основе HDP 2.1.7 (с 7.11.2014).


<table border="1">
<tr><th>Компонент</th><th>HDInsight версия 3.2</th><th>HDInsight версия 3.1 (по умолчанию)</th><th>HDInsight версия 3,0</th><th>HDInsight версия 2.1</th></tr>
<tr><td>Hortonworks Data Platform</td><td>2.2</td><td>2.1.7</td><td>2,0</td><td>1,3</td></tr>
<tr><td>Apache Hadoop &amp; YARN</td><td>2.6.0</td><td>2.4.0</td><td>2.2.0</td><td>1.2.0</td></tr>
<tr><td>Apache Tez</td><td>0.5.2</td><td>0.4.0</td><td></td><td></td></tr>
<tr><td>Apache Pig</td><td>0.14.0</td><td>0.12.1</td><td>0.12.0</td><td>0.11.0</td></tr>
<tr><td>Apache Hive &amp; HCatalog</td><td>0.14.0</td><td>0.13.1</td><td>0.12.0</td><td>0.11.0</td></tr>
<tr><td>Apache HBase </td><td>0.98.4</td><td>0.98.0</td><td></td><td></td></tr>
<tr><td>Apache Sqoop</td><td>1.4.5</td><td>1.4.4</td><td>1.4.4</td><td>1.4.3</td></tr>
<tr><td>Apache Oozie</td><td>4.1.0</td><td>4.0.0</td><td>4.0.0</td><td>3.3.2</td></tr>
<tr><td>Apache Zookeeper</td><td>3.4.6</td><td>3.4.5</td><td>3.4.5</td><td></td></tr>
<tr><td>Apache Storm</td><td>0.9.3</td><td>0.9.1</td><td></td><td></td></tr>
<tr><td>Apache Mahout</td><td>0.9.0</td><td>0.9.0</td><td></td><td></td></tr>
<tr><td>Apache Phoenix</td><td>4.2.0</td><td>4.0.0.2.1.7.0-2162</td><td></td><td></td></tr>
<tr><td>Apache Spark</td><td>1.3.1</td><td></td><td></td><td></td></tr>
</table>


**Получение сведений о текущей версии компонентов**

Версии компонентов, связанных с версиями кластера HDInsight, могут быть изменены в будущих обновлениях для HDInsight. Один из способов определения доступных компонентов и проверки версий,которые должны использоваться для кластера, заключается в применении интерфейса API REST Ambari. Для извлечения сведений о компоненте службы можно воспользоваться командой **GetComponentInformation**. Дополнительные сведения см. в [документации по Ambari][ambari-docs]. Еще один способ получения этих сведений — вход в кластер с помощью удаленного рабочего стола и непосредственное изучение содержимого каталога C:\\apps\\dist.


**Заметки о выпуске**

Дополнительные заметки о выпусках последних версий HDInsight см. в разделе [Заметки о выпуске НDInsight](hdinsight-release-notes.md).

### Выбор версии при подготовке кластера HDInsight

При создании кластера с использованием командлетов HDInsight Windows PowerShell или пакета SDK HDInsight .NET можно выбрать версию для кластера HDInsight Hadoop с помощью параметра Version.

Если вы используете вариант **Быстрое создание**, то получите версию 3.1 HDInsight, которая создает кластер Hadoop по умолчанию. Если вы используете вариант **Настраиваемое создание** на классическом портале Azure, вы можете выбрать версию кластера для развертывания в раскрывающемся списке **Версия HDInsight** на странице **Сведения о кластере**.

##Краткие сведения о возможностях
Ниже перечислены некоторые ключевые возможности платформы HDInsight.

- **Spark** (Apache Spark) — это платформа параллельной обработки с открытым исходным кодом, которая поддерживает обработку в памяти и тем самым значительно повышает производительность аналитических приложений, работающих с большими данными. Возможности вычисления в памяти Spark отлично подходят для итеративных алгоритмов в машинном обучении и графовых вычислениях.

	Spark также может использоваться для выполнения обычной обработки данных на диске. Spark оптимизирует традиционную платформу MapReduce, позволяя избежать операций записи на диск на промежуточных этапах. К тому же, Spark совместима с распределенной файловой системой Hadoop (HDFS) и хранилищем больших двоичных объектов Azure, поэтому существующие данные могут легко обрабатываться с помощью этой платформы.

	Spark можно также добавить с помощью действия сценария. Действие сценария добавляет либо Spark 1.2.0 в кластер HDInsight 3.2, либо Spark 1.0.2 в кластер HDInsight 3.1. Дополнительные сведения см. в статье [Установка и использование Spark в кластерах HDInsight Hadoop](hdinsight-hadoop-spark-install.md).


- **Storm**. Storm в Azure HDInsight теперь стал общедоступным. Он предоставляет быстрый и удобный способ развертывания аналитики в режиме реального времени всего лишь в несколько щелчков мышью и за несколько минут. Apache Storm в Azure HDInsight — это проект с открытым исходным кодом в экосистеме Apache Hadoop, который предоставляет доступ к платформе аналитики, способной достоверно обрабатывать миллионы событий. Теперь пользователи Hadoop могут получать аналитические сведения по мере возникновения событий, а также по прошлым событиям. Корпорация Майкрософт также предоставляет встроенную интеграцию с Visual Studio, что упрощает взаимодействие разработчика с Storm. Теперь вы можете разрабатывать, развертывать и отлаживать топологии Storm в среде Visual Studio.

- **HDInsight на платформе Linux**. Azure HDInsight предоставляет возможность подготовки кластеров Hadoop, работающих на виртуальных машинах Linux (Ubuntu). Используйте эту возможность, если вы знакомы с Linux или Unix, выполняете миграцию с существующего решения Hadoop на основе Linux или хотите с легкостью выполнить интеграцию с компонентами экосистемы Hadoop, созданными для Linux. Вы можете подготовить кластер HDInsight в Linux с клиентского компьютера под управлением Windows или Linux с помощью классического портала Azure, CLI Azure или пакета SDK HDInsight .NET (только в Windows).

- **Дополнительные размеры виртуальных машин**. Кластеры HDInsight теперь доступны для более широкого диапазона размеров и типов ВМ. Кластеры HDInsight теперь могут использовать размеры от A2 до A7, созданные для выполнения общих задач; узлы серии D, для которых характерны твердотельные накопители (SSD) и более быстрые процессоры (на 60 процентов); и размеры A8 и A9, имеющие поддержку InfiniBand для быстрых сетей. Клиенты Apache HBase в Azure HDInsight могут использовать преимущества конфигураций с большим объемом памяти серии D для повышения производительности. Клиентам Apache Storm в Azure HDInsight также доступна дополнительная память для загрузки более крупных наборов ссылочных данных, а также более быстрые процессоры для более высокой пропускной способности.

- **Масштабирование кластера**. Масштабирование кластера позволяет изменить число узлов работающего кластера HDInsight без необходимости его удаления или повторного создания. В настоящее время эта возможность имеется только в Hadoop Query и Apache Storm, но скоро она появится и в Apache HBase.

- **Действие скрипта**. Эта возможность настройки кластера позволяет изменять настройки кластеров Hadoop произвольным способом с помощью пользовательских скриптов. С помощью этой новой функции пользователи могут экспериментировать с проектами, доступными в экосистеме Apache Hadoop, а также выполнять их развертывание на кластерах Azure HDInsight. Эта возможность настройки доступна в кластерах HDInsight всех типов, в том числе Hadoop, HBase и Storm.

- **HBase**. HBase — это база данных NoSQL с низким уровнем задержки, позволяющая производить транзакционную обработку больших объемов данных. HBase предлагается в форме управляемого кластера, интегрированного в среду Azure. Кластеры настроены на хранение данных непосредственно в хранилище больших двоичных объектов Azure, что обеспечивает небольшую задержку и повышенную гибкость в выборе соотношения производительность/стоимость. Это позволяет клиентам создавать интерактивные веб-сайты, работающие с большими наборами данных, создавать службы, которые хранят данные с датчиков и телеметрию миллионов конечных точек, и анализировать эти данные с помощью заданий Hadoop.

- **Apache Phoenix**. Apache Phoenix — это уровень запросов языка SQL в HBase. Он поддерживает ограниченное подмножество спецификаций языка запросов SQL, в том числе вторичные индексы. Он предоставляется в качестве драйвера JDBC, встроенного в клиент, и предназначен для уменьшения задержек запросов к данным в HBase. Apache Phoenix принимает запрос SQL, компилирует его в ряд сканирований и вызовов сопроцессоров HBase и создает обычные результирующие наборы JDBC. Apache Phoenix — это уровень реляционной базы данных в HBase. Он предоставляется в качестве драйвера JDBC, встроенного в клиент, предназначенного для уменьшения задержек запросов к данным в HBase. Apache Phoenix принимает запрос SQL, компилирует его в серию сканирований HBase, а затем оркестрирует выполнение этих сканирований, чтобы создать регулярные результирующие наборы JDBC.

- **Панель мониторинга кластера**. Это новое веб-приложение, которое развертывается в кластере HDInsight. Его можно использовать для выполнения запросов Hive, проверки журналов заданий и просмотра хранилища больших двоичных объектов Azure. Для доступа к веб-приложению используется URL-адрес: <*ClusterName*>.azurehdinsight.net.

- **Библиотека Microsoft Avro**. Эта библиотека реализует систему сериализации данных Apache Avro для среды Microsoft.NET. Apache Avro обеспечивает компактный формат обмена двоичными данными для сериализации. Она использует нотацию объектов JavaScript для определения не зависящей от языка схемы, которая гарантирует взаимодействие языков. Данные, сериализованные в одном языке, могут быть прочитаны в другом. В настоящее время поддерживаются C, C++, C#, Java, PHP, Python и Ruby. Формат сериализации Apache Avro широко используется в Azure HDInsight для представления сложных структур данных в заданиях Hadoop MapReduce.

- **YARN**. Новая универсальная распределенная платформа управления приложениями, которая заменила классическую платформу Apache Hadoop MapReduce для обработки данных в кластерах Hadoop. Эффективно выступает в качестве операционной системы Hadoop и преобразует однозадачную платформу работы с данными с пакетной обработкой в многозадачную платформу, которая поддерживает пакетную интерактивную потоковую обработку и обработку в режиме реального времени. Эта новая платформа управления повышает масштабируемость и эффективность использования кластера в соответствии с такими критериями, как гарантии по мощности, достоверность и соглашения об уровнях обслуживания (SLA).

- **Tez (только для HDInsight 3.1 и последующих версий)**. Универсальная и настраиваемая платформа, которая используется для создания упрощенных задач обработки данных как для малых, так и для больших задач в Hadoop. Эта платформа обеспечивает возможность выполнения сложных направленных ациклических графов (DAG) задач для одного задания. Благодаря этому проекты экосистемы Apache Hadoop, такие как Apache Hive и Apache Pig, могут отвечать требованиям в отношении времени отклика при взаимодействии с человеком, а также максимально большой пропускной способности на уровне петабайт. Обратите внимание, что Hive 0.13 допускает выполнение запросов Hive поверх Tez, а не MapReduce.

- **Высокая доступность (HA)**. К кластерам Hadoop, развернутым в HDInsight, добавлен второй головной узел для повышения доступности службы. Стандартные реализации кластеров Hadoop обычно имеют один головной узел. HDInsight устраняет эту единственную точку отказа благодаря добавлению второго головного узла. Переход на новую конфигурацию кластера НA не изменяет цену кластера, если только клиенты не подготавливают кластеры с головным узлом очень большого размера вместо узла большого размера по умолчанию.

- **Производительность Hive**. На порядок улучшено время ответа на запрос Hive (до 40 раз) и степень сжатия данных (до 80 %) благодаря использованию формата **Optimized Row Columnar** (ORC).

- **Pig, Sqoop, Oozie, Ambari**. Обновления версий компонентов для кластера HDInsight версии 3.0 (HDP 2.0/Hadoop 2.2), которые обеспечивают согласование с кластером HDInsight версии 2.1 (HDP 1.3/Hadoop 1.2). Подробные сведения см. в таблице версий ниже.

- **Mahout**. Эта библиотека масштабируемых алгоритмов машинного обучения предварительно установленная в кластерах Hadoop HDInsight 3.1 (или последующих версий). Благодаря этому можно выполнять задания Mahout без необходимости дополнительно настраивать кластер.

- **Поддержка виртуальных сетей**. Кластеры HDInsight могут использоваться совместно с виртуальной сетью Azure для поддержки изоляции облачных ресурсов или гибридных сценариев, когда происходит привязка облачных ресурсов к ресурсам, размещенным в центре обработки данных.


## Поддерживаемые версии
В следующей таблице перечислены доступные в настоящее время версии HDInsight, соответствующие версии платформы Hortonworks Data Platform (HDP), которые они используют, и даты их выхода. Также указываются даты прекращения поддержки и даты устаревания, если они известны. Обратите внимание на следующее:

* Высокодоступные кластеры с двумя головными узлами развертываются по умолчанию для HDInsight 2.1 и последующих версий. Они недоступны для кластеров HDInsight 1.6.
* После прекращения поддержки для определенной версии она может стать недоступной на классическом портале Azure. В таблице ниже указаны версии, доступные на классическом портале Azure. Доступ к версиям кластера по-прежнему можно будет получить с помощью параметра `Version` в командлете Windows PowerShell [New-AzureHDInsightCluster](https://msdn.microsoft.com/library/mt619331.aspx) и пакета SDK .NET до даты его устаревания.

<table border="1">
<tr><th>Версия HDInsight</th><th>Версия HDP</a><th>Высокая доступность</th></th><th>Дата выпуска</th><th>Доступно на классическом портале Azure</th><th>Дата прекращения поддержки</th><th>Дата прекращения сопровождения</th></tr>
<tr><td>HDI 3.2</td><td>HDP 2.2</td><td>Да</td><td>18.02.2015</td><td>Да</td><td></td><td></td></tr>
<tr><td>HDI 3,1</td><td>HDP 2,1</td><td>Да</td><td>24.06.2014</td><td>Да</td><td></td><td></td></tr>
<tr><td>HDI 3,0</td><td>HDP 2,0</td><td>Да</td><td>11.02.2014</td><td>Да</td><td>17.09.2014</td><td>30.06.2015</td></tr>
<tr><td>HDI 2,1</td><td>HDP 1,3</td><td>Да</td><td>28.10.2013</td><td>Нет</td><td>12.05.2014</td><td>31.05.2015</td></tr>
<tr><td>HDI 1.6</td><td>HDP 1.1</td><td>Нет</td><td>28.10.2013</td><td>Нет</td><td>26.04.2014</td><td>31.05.2015</td></tr>
</table><br>

**Развертывание кластеров не по умолчанию**

Кластеры HDInsight 3.1 создаются в Hadoop 2.4 по умолчанию. Таким образом, пользователям необходимо использовать на портале вариант **Настраиваемое создание**, чтобы задать другие версии кластеров HDInsight, если их нужно создать.

### Соглашение об уровне обслуживания (SLA) для версий кластера HDInsight

Соглашение об уровне обслуживания определяется в терминах "Окна поддержки". Под окном поддержки понимается период времени, в течение которого определенная версия кластера HDInsight поддерживается службой поддержки клиентов корпорации Майкрософт. Кластер HDInsight находится вне окна поддержки, если **дата истечения срока технической поддержки его версии** уже миновала. Список поддерживаемых версий кластера HDInsight можно найти в приведенной выше таблице. Дата истечения срока действия технической поддержки для конкретной версии HDInsight (обозначается как версия X) рассчитывается как наиболее поздняя из следующих дат (в случае доступности более новой версии Х+1):

- Формула 1: добавьте 180 дней к дате выхода версии X кластера HDInsight.
- Формула 2: добавьте 90 дней к дате, когда версия X + 1 (следующая за версией X) кластера HDInsight стала доступной на классическом портале Azure.

**Дата устаревания** — это дата, после которой версия кластера не может быть создана в HDInsight.

> [AZURE.NOTE] Кластеры HDInsight 2.1 и 3.0 работают под управлением гостевой ОС Azure [семейства 4](../cloud-services/cloud-services-guestos-update-matrix.md), которая использует 64-разрядную версию Windows Server 2012 R2 и поддерживает .NET Framework 4.0, 4.5. и 4.5.1.

## Заметки о выпуске Hortonworks, связанные с версиями HDInsight##

* Кластер HDInsight версии 3.2 использует пакет Hadoop, построенный на платформе [Нortonworks Data Platform 2.2][hdp-2-2].

	* Заметки о выпуске для отдельных компонентов Apache — [Hive 0.14](https://issues.apache.org/jira/secure/ReleaseNote.jspa?projectId=12310843&version=12326450), [Pig 0.14](https://issues.apache.org/jira/secure/ReleaseNote.jspa?projectId=12310730&version=12326954), [HBase 0.98.4](https://issues.apache.org/jira/secure/ReleaseNote.jspa?projectId=12310753&version=12326810), [Phoenix 4.2.0](https://issues.apache.org/jira/secure/ReleaseNote.jspa?projectId=12315120&version=12327581), [M/R 2.6](https://issues.apache.org/jira/secure/ReleaseNote.jspa?projectId=12310941&version=12327180), [HDFS 2.6](https://issues.apache.org/jira/secure/ReleaseNote.jspa?projectId=12310942&version=12327181), [YARN 2.6](https://issues.apache.org/jira/secure/ReleaseNote.jspa?projectId=12313722&version=12327197), [Common](https://issues.apache.org/jira/secure/ReleaseNote.jspa?projectId=12310240&version=12327179), [Tez 0.5.2](https://issues.apache.org/jira/secure/ReleaseNote.jspa?projectId=12314426&version=12328742), [Ambari 2.0](https://issues.apache.org/jira/secure/ReleaseNote.jspa?projectId=12312020&version=12327486), [Storm 0.9.3](https://issues.apache.org/jira/secure/ReleaseNote.jspa?projectId=12314820&version=12327112), [Oozie 4.1.0](https://issues.apache.org/jira/secure/ReleaseNote.jspa?version=12324960&projectId=12311620).


* Кластер HDInsight версии 3.1 использует пакет Hadoop, построенный на платформе [Нortonworks Data Platform 2.1.7][hdp-2-1-7]. Это кластер Hadoop **по умолчанию**, который создается при использовании портала Azure HDInsight после 07.11.2014. Кластеры HDInsight 3.1, созданные до 07.11.2014 г., построены на платформе [Hortonworks Data Platform 2.1.1][hdp-2-1-1].

* Кластер HDInsight версии 3.0 использует пакет Hadoop, построенный на платформе [Нortonworks Data Platform 2.0][hdp-2-0-8].

* Кластер HDInsight версии 2.1 использует пакет Hadoop, построенный на платформе [Нortonworks Data Platform 1.3][hdp-1-3-0].

* Кластер HDInsight версии 1.6 использует пакет Hadoop, построенный на платформе [Нortonworks Data Platform 1.1][hdp-1-1-0].


[image-hdi-versioning-versionscreen]: ./media/hdinsight-component-versioning/hdi-versioning-version-screen.png

[wa-forums]: http://azure.microsoft.com/support/forums/

[connect-excel-with-hive-ODBC]: hdinsight-connect-excel-hive-ODBC-driver.md

[hdp-2-2]: http://docs.hortonworks.com/HDPDocuments/HDP2/HDP-2.2.0/HDP_2.2.0_Release_Notes_20141202_version/index.html

[hdp-2-1-7]: http://docs.hortonworks.com/HDPDocuments/HDP2/HDP-2.1.7-Win/bk_releasenotes_HDP-Win/content/ch_relnotes-HDP-2.1.7.html

[hdp-2-1-1]: http://docs.hortonworks.com/HDPDocuments/HDP2/HDP-2.1.1/bk_releasenotes_hdp_2.1/content/ch_relnotes-hdp-2.1.1.html

[hdp-2-0-8]: http://docs.hortonworks.com/HDPDocuments/HDP2/HDP-2.0.8.0/bk_releasenotes_hdp_2.0/content/ch_relnotes-hdp2.0.8.0.html

[hdp-1-3-0]: http://docs.hortonworks.com/HDPDocuments/HDP1/HDP-1.3.0/bk_releasenotes_hdp_1.x/content/ch_relnotes-hdp1.3.0_1.html

[hdp-1-1-0]: http://docs.hortonworks.com/HDPDocuments/HDP1/HDP-Win-1.1/bk_releasenotes_HDP-Win/content/ch_relnotes-hdp-win-1.1.0_1.html

[ambari-docs]: https://github.com/apache/ambari/blob/trunk/ambari-server/docs/api/v1/index.md

[zookeeper]: http://zookeeper.apache.org/

<!---HONumber=AcomDC_0914_2016-->