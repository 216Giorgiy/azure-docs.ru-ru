<properties
   pageTitle="Параметры контекста вычислений для R Server в HDInsight (предварительная версия) | Azure"
   description="Сведения о различных параметрах контекста вычислений, доступных для пользователей R Server в HDInsight (предварительная версия)"
   services="HDInsight"
   documentationCenter=""
   authors="jeffstokes72"
   manager="paulettem"
   editor="cgronlun"
/>

<tags
   ms.service="HDInsight"
   ms.devlang="R"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="data-services"
   ms.date="03/28/2016"
   ms.author="jeffstok"
/>

#Параметры контекста вычислений для R Server в HDInsight (предварительная версия)

R Server в кластере HDInsight (предварительная версия) предоставляет новейшие возможности для анализа данных, хранящихся в контейнере HDFS в учетной записи хранения [BLOB-объектов Azure](../storage/storage-introduction.md "Хранилище больших двоичных объектов Azure") или в локальной файловой системе Linux, с использованием языка R. Так как R Server использует открытый код на языке R, создавая приложения на базе языка R, вы можете использовать более 8000 пакетов R с открытым кодом, а также процедуры из [ScaleR](http://www.revolutionanalytics.com/revolution-r-enterprise-scaler "ScaleR от компании Revolution Analytics") — пакета аналитики больших данных от корпорации Майкрософт, который входит в состав R Server. Для подключения к кластеру и выполнения скриптов на языке R удобно использовать граничный узел кластеров Premium. Он позволяет выполнять распараллеленные распределенные функции ScaleR сразу во всех ядрах сервера граничного узла или сразу во всех узлах кластера, используя для этого ScaleR Hadoop MapReduce или контексты вычислений Spark.

## Контексты вычислений для граничного узла

Как правило, скрипт R, запущенный на граничном узле на сервере R, на этом узле будет выполняться в пределах интерпретатора R, за исключением этапов, при которых вызывается функция ScaleR. Вызовы ScaleR будут осуществляться в среде вычислений с учетом настройки контекста вычислений ScaleR. При выполнении скрипта R на граничном узле можно получить следующие значения контекста вычислений — локальный последовательный (local), локальный параллельный (localpar), Map Reduce и Spark, где:

| Контекст вычислений | Метод настройки | Контекст выполнения |
|------------------|---------------------------------|---------------------------------------------------------------------------------------|
| Локальный последовательный | rxSetComputeContext(‘local’) | Последовательное (не распараллеленное) выполнение на сервере граничного узла |
| Локальный параллельный | rxSetComputeContext(‘localpar’) | Распараллеленное выполнение во всех ядрах сервера граничного узла |
| Spark | RxSpark() | Распараллеленное распределенное выполнение с использованием Spark во всех узлах кластера HDI |
| Map Reduce | RxHadoopMR() | Распараллеленное распределенное выполнение с использованием Map Reduce во всех узлах кластера HDI |


Если вы хотите использовать распараллеленное выполнение для повышения производительности, у вас есть три варианта. Выбор будет зависеть от характера аналитического задания, а также размера и расположения данных.

## Выбор контекста вычислений

В настоящее время нет формулы, позволяющей выбрать контекст вычислений. Существуют, скорее, некоторые основные принципы, которые позволят сделать правильный выбор или, по крайней мере, сузить область выбора до выполнения теста производительности, если нужно выбрать оптимальный вариант. К ним относятся следующие:

1.	Локальная файловая система Linux будет выполняться быстрее, чем HDFS.
2.	Повторный анализ будет выполняться быстрее, если данные будут находиться в локальной среде и в XDF-файле. 
3.	Следует передавать данные небольшого размера потоком из текстового источника данных. В противном случае перед анализом преобразуйте данные в формат XDF. 
4.	Нагрузка при копировании или потоковой передаче больших объемов данных в граничный узел для анализа будет огромной. 
5.	Spark справляется с анализом данных в Hadoop быстрее, чем Map Reduce, но только до того момента, пока объем данных не становится слишком большим и они больше не могут поместиться в распределенной памяти.

С учетом этих принципов ниже приведены некоторые общие правила выбора контекста вычислений.

### Локальное параллельное выполнение

- Если нужно проанализировать данные небольшого размера, для которых не требуется повторный анализ, их следует передать посредством потока в процедуру анализа и использовать localpar. 
- Если нужно проанализировать данные небольшого размера, для которых требуется повторный анализ, или данные маленького размера, скопируйте их в локальную файловую систему, импортируйте в XDF-файл и проанализируйте с помощью localpar. 

### Hadoop Spark

- Если нужно проанализировать данные большего размера, импортируйте их в XDF-файл в HDFS (при условии достаточного пространства для хранения) и проанализируйте их с помощью Spark. 

### Hadoop Map Reduce

- Если нужно проанализировать данные очень большого размера, а производительность Spark начинает снижаться, воспользуйтесь Map Reduce.

## Встроенная справка по rxSetComputeContext

Чтобы получить дополнительные сведения по контекстам вычислений ScaleR и соответствующие примеры, воспользуйтесь встроенной справкой в консоли R по методу rxSetComputeContext, например:

    > ?rxSetComputeContext 

Можно также просмотреть руководство ScaleR Distributed Computing (Распределенные вычисления ScaleR), доступное в библиотеке [R Server MSDN](https://msdn.microsoft.com/library/mt674634.aspx "R Server в библиотеке MSDN").


## Дальнейшие действия

Теперь, когда вы знаете, как создать кластер HDInsight, который включает R Server, а также основные принципы использования консоли R в сеансе SSH, узнайте другие способы работы с R Server в HDInsight в следующих статьях.

- [Overview of R Server on Hadoop](hdinsight-hadoop-r-server-overview.md) (Общие сведения об R Server в Hadoop)
- [Get started with R server on Hadoop](hdinsight-hadoop-r-server-get-started.md) (Начало работы с R Server в Hadoop)
- [Add RStudio Server to HDInsight Premium](hdinsight-hadoop-r-server-install-r-studio.md) (Добавление RStudio Server в HDInsight Premium)
- [Azure Storage options for R Server on HDInsight premium](hdinsight-hadoop-r-server-storage.md)

<!---HONumber=AcomDC_0420_2016-->