---
title: "Руководство по Apache Storm. Начало работы со Storm | Документация Майкрософт"
description: "Начало работы с анализом больших объемов данных с помощью Apache Storm и примеров Storm Starter в HDInsight. Информация об использовании Storm для обработки данных в режиме реального времени."
keywords: "apache storm, учебник sapache storm, анализ больших данных, storm starter"
services: hdinsight
documentationcenter: 
author: Blackmist
manager: jhubbard
editor: cgronlun
tags: azure-portal
ms.assetid: 6f93f7ff-0736-4708-80ef-4289dae532a9
ms.service: hdinsight
ms.devlang: java
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 02/28/2017
ms.author: larryfr
ms.custom: H1Hack27Feb2017
translationtype: Human Translation
ms.sourcegitcommit: cfaade8249a643b77f3d7fdf466eb5ba38143f18
ms.openlocfilehash: e505d02895abd011661b3e4f66c7f4f7ea042358
ms.lasthandoff: 03/01/2017

---
# <a name="get-started-with-the-storm-starter-samples-for-big-data-analytics-on-hdinsight"></a>Приступая к работе с примерами Storm Starter для аналитики больших данных в HDInsight

Apache Storm — это масштабируемая отказоустойчивая распределенная система выполнения расчетов для обработки данных потоковой передачи в режиме реального времени. С помощью Storm в Microsoft Azure HDInsight можно создать облачный кластер Storm для анализа больших данных в режиме реального времени. 

> [!IMPORTANT]
> С помощью действий, описанных в данной статье, можно создать кластер HDInsight под управлением Windows. Для версий ниже HDInsight 3.4 кластер HDInsight доступен только в Windows. Linux — единственная операционная система, используемая для работы с HDInsight 3.4 или более поздней версии. См. дополнительные сведения о [нерекомендуемых версиях HDInsight в Windows](hdinsight-component-versioning.md#hdi-version-32-and-33-nearing-deprecation-date).
>
> Действия по созданию Storm под управлением Linux в кластере HDInsight см. в статье [Руководство по Apache Storm в HDInsight: начало работы с анализом больших объемов данных в HDInsight с помощью примеров Storm Starter](hdinsight-apache-storm-tutorial-get-started-linux.md).

## <a name="prerequisites"></a>Предварительные требования
[!INCLUDE [delete-cluster-warning](../../includes/hdinsight-delete-cluster-warning.md)]

Необходимое условие для успешного выполнения инструкций этого учебника:

* **Подписка Azure**. Ознакомьтесь с [бесплатной пробной версией Azure](https://azure.microsoft.com/documentation/videos/get-azure-free-trial-for-testing-hadoop-in-hdinsight/).

### <a name="access-control-requirements"></a>Требования к контролю доступа
[!INCLUDE [access-control](../../includes/hdinsight-access-control-requirements.md)]

## <a name="create-a-storm-cluster"></a>Создание кластера Storm

Чтобы создать Storm в кластере HDInsight, выполните следующие действия.

1. На [портале Azure](https://portal.azure.com) последовательно выберите элементы **+Создать**, **Аналитика** и **HDInsight**.
   
    ![Создание кластера HDInsight](./media/hdinsight-apache-storm-tutorial-get-started/create-hdinsight.png)

2. В колонке **Основные сведения** задайте следующие параметры.

    * **Имя кластера.** Имя кластера HDInsight.
    * **Подписка.** Выберите нужную подписку.
    * **Имя пользователя для входа в кластер** и **Пароль для входа в кластер**. Имя для входа в кластер по протоколу HTTPS. Эти учетные данные используются для доступа к таким службам, как веб-интерфейс Ambari или REST API.
    * **Имя пользователя для Secure Shell (SSH)**: оставьте в этих полях значения по умолчанию. Они не используются для кластеров HDInsight под управлением Windows.
    * **Группа ресурсов.** Группа ресурсов, в которой будет создан кластер.
    * **Расположение.** Регион Azure, в котором будет создан кластер.
   
    ![Выберите подписку.](./media/hdinsight-apache-storm-tutorial-get-started/hdinsight-basic-configuration.png)

3. Выберите **тип кластера** и в колонке **Конфигурация кластера** задайте следующие значения:
   
    * **Тип кластера**: Storm.

    * **Операционная система**: Windows.

    * **Версия**: Storm 0.10.0 (HDI 3.3).

        > [!NOTE]
        > HDInsight 3.4 и более поздних версий можно использовать только в операционной системе Linux.

    * **Ценовая категория кластера**: "Стандартный".
     
    Затем нажмите кнопку **Выбрать**, чтобы сохранить эти параметры.
     
    ![Выбор типа кластера](./media/hdinsight-apache-storm-tutorial-get-started/set-hdinsight-cluster-type.png)

4. Выбрав тип кластера, нажмите кнопку __Выбрать__, чтобы установить выбранный тип. Затем нажмите кнопку __Далее__, чтобы завершить настройку основных параметров.

5. В колонке **Хранилище** выберите или создайте учетную запись хранения. Для действий, описанных в этом документе, в других полях этой колонки оставьте значения по умолчанию. Нажмите кнопку __Далее__, чтобы сохранить конфигурацию хранилища.

    ![Настройка параметров учетной записи хранения для HDInsight](./media/hdinsight-apache-storm-tutorial-get-started/set-hdinsight-storage-account.png)

6. В колонке **Сводка** просмотрите конфигурацию для кластера. Используйте ссылки __Изменить__, чтобы изменить неправильные параметры. Наконец, нажмите кнопку "Создать" для создания кластера.
   
    ![Сводка по конфигурации кластера](./media/hdinsight-apache-storm-tutorial-get-started/hdinsight-configuration-summary.png)
   
    > [!NOTE]
    > Операция создания кластера может занять до 20 минут.

## <a name="run-a-storm-starter-sample-on-hdinsight"></a>Запуск образца Storm Starter в HDInsight
В этом учебнике Apache Storm вы познакомитесь с анализом больших объемов данных с использованием примеров Storm Starter на портале GitHub.

Каждый экземпляр Storm в кластере HDInsight поставляется с панелью мониторинга Storm, которую можно использоваться для загрузки и запуска топологий Storm в кластере. Каждый кластер также поставляется с примерами топологий, которые можно запускать непосредственно из панели мониторинга Storm.

### <a id="connect"></a>Подключение к панели мониторинга
Панель мониторинга находится по адресу **https://&lt;clustername>.azurehdinsight.net//**, где **clustername** — имя кластера. Чтобы воспользоваться ссылкой на панель мониторинга, выберите кластер на начальной панели, а затем — ссылку **Панель мониторинга** в верхней части колонки.

![Портал Azure со ссылкой на панель мониторинга Storm](./media/hdinsight-apache-storm-tutorial-get-started/dashboard.png)

> [!NOTE]
> При подключении к панели мониторинга отобразится запрос на ввод имени пользователя и пароля. Это имя администратора (**admin**) и пароль, который вы использовали при создании кластера.
> 
> 

После загрузки панели мониторинга Storm отобразится форма **Submit Topology** (Отправка топологии).

![Отправка топологии Storm Starter с панели мониторинга Storm.](./media/hdinsight-apache-storm-tutorial-get-started/submit.png)

C помощью формы **Отправка топологии** можно отправлять и запускать JAR-файлы, содержащие топологии Storm. Она также включает несколько основных примеров, входящих в состав кластера.

### <a id="run"></a>Запуск примера подсчета слов из проекта Storm Starter на портале GitHub
Образцы, поставляемые с кластером, включают несколько вариантов топологии подсчета слов. Эти примеры включают **воронку**, которая случайным образом создает предложения, и **сито**, которое разбивает каждое предложение на отдельные слова, а затем подсчитывает случаи употребления каждого слова. Эти примеры взяты из [примеров Storm Starter](https://github.com/apache/storm/tree/master/examples/storm-starter), которые являются частью Apache Storm.

Выполните следующие действия, чтобы запустить пример Storm Starter.

1. Выберите **StormStarter - WordCount** (StormStarter — Подсчет слов) из раскрывающегося списка **JAR-файл**. После этого действия в поля **Имя класса** и **Дополнительные параметры** будут внесены параметры, использующиеся в этом примере.
   
    ![Выбранный WordCount в Storm Starter на панели мониторинга Storm.](./media/hdinsight-apache-storm-tutorial-get-started/submit.png)
   
   * **Имя класса** — класс в JAR-файле, который отправляет топологии.
   * **Дополнительные параметры** — любые параметры, необходимые для топологии. В этом примере это поле используется для присвоения понятного имени отправленной топологии.
2. Нажмите кнопку **Отправить**. Через некоторое время в поле **Результат** отобразится команда, используемая для отправки задания, а также результаты ее выполнения. В поле **Ошибка** будут отображаться все ошибки, возникающие при отправке топологии.
   
    ![Кнопка отправки и результаты WordCount в Storm Starter.](./media/hdinsight-apache-storm-tutorial-get-started/submit-results.png)
   
   > [!NOTE]
   > Отображение результатов не означает завершение топологии — **топология Storm выполняется после запуска, пока вы ее не остановите** Топология подсчета слов генерирует случайные предложения и подсчитывает частоту употребления каждого слова в них, пока вы ее не остановите.
   > 
   > 

### <a id="monitor"></a>Мониторинг топологии
Пользовательский интерфейс Storm можно использовать для мониторинга топологии.

1. В верхней части панели мониторинга Storm выберите **Storm UI** (Пользовательский интерфейс Storm). Отобразится сводная информация о кластере и обо всех работающих топологиях.
   
    ![Панель мониторинга Storm, отображающая сводку топологии WordCount в Storm Starter.](./media/hdinsight-apache-storm-tutorial-get-started/stormui.png)
   
    На странице выше можно просмотреть время активности топологии, а также количество используемых рабочих процессов, исполнителей и задач.
   
   > [!NOTE]
   > Столбец **Имя** содержит понятное имя, введенное в поле **Дополнительные параметры**.
   > 
   > 
2. В разделе**Topology summary** (Сводка по топологии) выберите запись **wordcount** (количество слов) в столбце **Name** (Имя). После этого отобразится дополнительная информация о топологии.
   
    ![Панель мониторинга Storm, отображающая сведения о топологии WordCount в Storm Starter.](./media/hdinsight-apache-storm-tutorial-get-started/topology-summary.png)
   
    Эта страница содержит следующую информацию.
   
   * **Topology stats** (Статистика топологий) —основная информация о производительности топологии, упорядоченная по временным промежуткам.
     
     > [!NOTE]
     > При выборе определенного временного промежутка меняется информация, отображаемая в других разделах страницы.
     > 
     > 
   * **Spouts** (Воронки) — основная информация о воронках, в том числе последняя ошибка, возвращенная каждой воронкой.
   * **Bolts** (Сита) — основная информация о ситах.
   * **Topology configuration** (Конфигурация топологии) — подробная информация о конфигурации топологии.
     
     Эта страница также содержит действия, которые можно выполнять в топологии.
   * **Activate** (Включить) — возобновление обработки отключенной топологии.
   * **Deactivate** (Отключить) — приостановка выполняемой топологии.
   * **Rebalance**(Повторная балансировка) — корректировка параллелизма топологии. После изменения числа узлов в кластере необходимо выполнить повторную балансировку топологий. Это позволяет топологии скорректировать параллелизм для компенсации увеличения или уменьшения количества узлов в кластере. Дополнительные сведения см. в статье [Understanding the parallelism of a Storm topology](http://storm.apache.org/documentation/Understanding-the-parallelism-of-a-Storm-topology.html) (Общие сведения о параллелизме топологии Storm).
   * **Kill** (Удалить) — останавливает выполнение топологии Storm по истечении заданного времени ожидания.
3. На этой странице выберите запись и раздела **Spouts** (Воронки) или **Bolts** (Сита). Отобразится информация о выбранном компоненте.
   
    ![Панель мониторинга Storm со сведениями о выбранных компонентах.](./media/hdinsight-apache-storm-tutorial-get-started/component-summary.png)
   
    На этой странице отображается следующая информация.
   
   * **Spout/Bolt stats** (Статистика воронки/сита) —основная информация о производительности соответствующего компонента, упорядоченная по временным промежуткам.
     
     > [!NOTE]
     > При выборе определенного временного промежутка меняется информация, отображаемая в других разделах страницы.
     > 
     > 
   * **Input stats** (Статистика ввода, только для сита) — информация о компонентах, которые производят данные, используемые ситом.
   * **Output stats** (Статистика вывода) — информация о данных, созданных этим ситом.
   * **Executors** (Исполнители) — информация об экземплярах этого компонента.
   * **Errors** (Ошибки) — ошибки, созданные этим компонентом.
4. При просмотре информации о воронке и сите выберите запись из столбца **Port** (Порт) в разделе **Executors** (Исполнители), чтобы просмотреть информацию о конкретном экземпляре компонента.
   
        2015-01-27 14:18:02 b.s.d.task [INFO] Emitting: split default ["with"]
        2015-01-27 14:18:02 b.s.d.task [INFO] Emitting: split default ["nature"]
        2015-01-27 14:18:02 b.s.d.executor [INFO] Processing received message source: split:21, stream: default, id: {}, [snow]
        2015-01-27 14:18:02 b.s.d.task [INFO] Emitting: count default [snow, 747293]
        2015-01-27 14:18:02 b.s.d.executor [INFO] Processing received message source: split:21, stream: default, id: {}, [white]
        2015-01-27 14:18:02 b.s.d.task [INFO] Emitting: count default [white, 747293]
        2015-01-27 14:18:02 b.s.d.executor [INFO] Processing received message source: split:21, stream: default, id: {}, [seven]
        2015-01-27 14:18:02 b.s.d.task [INFO] Emitting: count default [seven, 1493957]
   
    Эти данные показывают, что слово **seven** (семь) использовалось 1 493 957 раз. Столько раз оно было обнаружено с момента запуска данной топологии.

### <a name="stop-the-topology"></a>Остановка топологии
Вернитесь на страницу **Topology summary** (Сводка топологии), найдите необходимую топологию подсчета слов, и в разделе **Topology actions** (Действия топологии) нажмите кнопку **Удалить**. При появлении запроса введите 10 секунд ожидания перед остановкой топологии. По истечении времени ожидания топология перестанет отображаться при переходе к разделу **Пользовательский интерфейс Storm** на панели мониторинга.

## <a name="delete-the-cluster"></a>Удаление кластера
[!INCLUDE [delete-cluster-warning](../../includes/hdinsight-delete-cluster-warning.md)]

## <a name="summary"></a>Сводка
В этом учебнике Apache Storm используется Storm Starter для объяснения принципов создания Storm в кластере HDInsight и использования панели мониторинга Storm для развертывания и отслеживания топологий Storm, а также управления ими.

## <a id="next"></a>Дальнейшие действия
* **Средства HDInsight для Visual Studio** —средства HDInsight позволяют использовать Visual Studio для отправки и отслеживания топологии Storm, а также управления ею, точно также как панель мониторинга Storm, которая упоминалась выше. Средства HDInsight также позволяют создавать топологии Storm C# и включает примеры топологий, которые можно развернуть и запустить в кластере.
  
    Дополнительную информацию см. в статье [Начало работы со средствами HDInsight Hadoop для Visual Studio](hdinsight-hadoop-visual-studio-tools-get-started.md).
* **Примеры файлов** — кластер HDInsight Storm приводит несколько примеров в каталоге **%STORM_HOME%\contrib**. Каждый пример должен содержать следующие элементы:
  
  * Исходный код, например, storm-starter-0.9.1.2.1.5.0-2057-sources.jar
  * Документы Java, например, storm-starter-0.9.1.2.1.5.0-2057-javadoc.jar
  * Пример, например, storm-starter-0.9.1.2.1.5.0-2057-jar-with-dependencies.jar
    
    Для извлечения исходного кода или документов Java используйте команду 'jar'. Например, 'jar -xvf storm-starter-0.9.1.2.1.5.0.2057-javadoc.jar'.
    
    > [!NOTE]
    > Документы Java состоят из веб-страниц. После извлечения откройте файл **index.html** браузером.
    > 
    > 
    
    Чтобы открыть эти образцы, необходимо включить удаленный рабочий стол для Storm в кластере HDInsight и скопировать файлы из папки **%STORM_HOME%\contrib**.
* Следующий документ содержит список других примеров, которые могут использоваться со Storm на HDInsight:
  
  * [Примеры топологий для Storm в HDInsight](hdinsight-storm-example-topology.md)

[apachestorm]: https://storm.incubator.apache.org
[stormdocs]: http://storm.incubator.apache.org/documentation/Documentation.html
[stormstarter]: https://github.com/apache/storm/tree/master/examples/storm-starter
[stormjavadocs]: https://storm.incubator.apache.org/apidocs/
[azureportal]: https://manage.windowsazure.com/
[hdinsight-provision]: hdinsight-provision-clusters.md
[preview-portal]: https://portal.azure.com/

