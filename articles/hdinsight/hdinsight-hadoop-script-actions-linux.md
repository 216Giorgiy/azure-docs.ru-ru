---
title: "Разработка действий скриптов с помощью HDInsight на основе Linux | Документация Майкрософт"
description: "Как настроить кластеры HDInsight на основе Linux с помощью действия скрипта. Действия сценариев предназначены для настройки кластеров Azure HDInsight. Для этого либо задаются параметры конфигурации кластера, либо в кластере устанавливаются дополнительные службы, инструменты или другое программное обеспечение. "
services: hdinsight
documentationcenter: 
author: Blackmist
manager: jhubbard
editor: cgronlun
ms.assetid: cf4c89cd-f7da-4a10-857f-838004965d3e
ms.service: hdinsight
ms.custom: hdinsightactive
ms.workload: big-data
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 02/10/2017
ms.author: larryfr
translationtype: Human Translation
ms.sourcegitcommit: 785d3a8920d48e11e80048665e9866f16c514cf7
ms.openlocfilehash: 9068e0e92e15491d3377a1b8f42071b56373396e
ms.lasthandoff: 04/12/2017


---
# <a name="script-action-development-with-hdinsight"></a>Разработка действий сценариев с помощью HDInsight

Действия сценариев предназначены для настройки кластеров Azure HDInsight. Для этого либо задаются параметры конфигурации кластера, либо в кластере устанавливаются дополнительные службы, инструменты или другое программное обеспечение. Действия сценария можно использовать во время создания кластера или в работающем кластере.

> [!IMPORTANT]
> Для выполнения действий, описанных в этом документе, необходим кластер HDInsight, который использует Linux. Linux — единственная операционная система, используемая для работы с HDInsight 3.4 или более поздней версии. См. дополнительные сведения о [нерекомендуемых версиях HDInsight в Windows](hdinsight-component-versioning.md#hdi-version-33-nearing-deprecation-date).

## <a name="what-are-script-actions"></a>Что такое действия сценариев?

Действия сценариев — это сценарии Bash, которые Azure выполняет на узлах кластера, чтобы вносить изменения в конфигурацию или устанавливать программное обеспечение. Действие сценария выполняется от имени привилегированного пользователя и предоставляет права полного доступа к узлам кластера.

Действия сценариев могут применяться следующими способами:

| Используется для применения сценария… | При создании кластера… | В работающем кластере… |
| --- |:---:|:---:|
| Портал Azure |✓ |✓ |
| Azure PowerShell |✓ |✓ |
| Инфраструктура CLI Azure |&nbsp; |✓ |
| Пакет SDK для HDInsight .NET |✓ |✓ |
| Шаблон Azure Resource Manager |✓ |&nbsp; |

Дополнительные сведения об использовании этих методов см. в статье [Настройка кластеров HDInsight с помощью действия сценария](hdinsight-hadoop-customize-cluster-linux.md).

## <a name="bestPracticeScripting"></a>Рекомендации по разработке сценариев

При разработке пользовательского скрипта для кластера HDInsight следует иметь в виду некоторые рекомендации.

* [Выбор версии Hadoop](#bPS1)
* [Выбор версии ОС](#bps10)
* [Предоставление стабильных ссылок на ресурсы сценария](#bPS2)
* [Использование предварительно скомпилированных ресурсов](#bPS4)
* [Обеспечение идемпотентности сценария настройки кластера](#bPS3)
* [Обеспечение высокого уровня доступности кластера](#bPS5)
* [Настройка пользовательских компонентов для использования хранилища больших двоичных объектов Azure](#bPS6)
* [Запись информации в STDOUT и STDERR](#bPS7)
* [Сохранение файлов в формате ASCII с использованием LF в качестве символа завершения строки](#bps8)
* [Использование логики повтора для восстановления после временных ошибок](#bps9)

> [!IMPORTANT]
> Действия скрипта должны быть завершены в течение 60 минут. В противном случае возникнет ошибка времени ожидания. Во время подготовки узла данный сценарий выполняется одновременно с другими процессами установки и настройки. Конкуренция за ресурсы, такие как ЦП или пропускная способность сети, может привести к затягиванию выполнения сценария по сравнению со временем его выполнения в среде разработки.

### <a name="bPS1"></a>Выбор целевой версии Hadoop

В различных версиях HDInsight используются различные версии служб Hadoop и компонентов. Если сценарий предполагает наличие определенной версии службы или компонента, то такой сценарий следует использовать только с версией HDInsight, включающей необходимые компоненты. Сведения о версиях компонентов, включенных в HDInsight, можно найти в документе [Версии компонентов HDInsight](hdinsight-component-versioning.md) .

### <a name="bps10"></a> Выбор версии ОС

HDInsight под управлением Linux основан на дистрибутиве Ubuntu под управлением Linux. Для разных версий HDInsight используются разные версии Ubuntu. Это может повлиять на поведение скрипта. Например, HDInsight версии 3.4 и более ранних версий основан на версии Ubuntu, в которой используется Upstart. Версия 3.5 основана на Ubuntu версии 16.04, в которой используется Systemd. Systemd и Upstart используют разные команды, поэтому скрипт нужно написать таким образом, чтобы он был совместим и с тем, и с другим.

Еще одно важное различие между HDInsight версии 3.4 и 3.5 заключается в том, что теперь `JAVA_HOME` указывает на Java 8.

Чтобы проверить версию операционной системы, используйте `lsb_release`. В следующих фрагментах кода из скрипта установки Hue показано, как определить версию Ubuntu (14 или 16), в которой выполняется скрипт:

```bash
OS_VERSION=$(lsb_release -sr)
if [[ $OS_VERSION == 14* ]]; then
    echo "OS verion is $OS_VERSION. Using hue-binaries-14-04."
    HUE_TARFILE=hue-binaries-14-04.tgz
elif [[ $OS_VERSION == 16* ]]; then
    echo "OS verion is $OS_VERSION. Using hue-binaries-16-04."
    HUE_TARFILE=hue-binaries-16-04.tgz
fi
...
if [[ $OS_VERSION == 16* ]]; then
    echo "Using systemd configuration"
    systemctl daemon-reload
    systemctl stop webwasb.service    
    systemctl start webwasb.service
else
    echo "Using upstart configuration"
    initctl reload-configuration
    stop webwasb
    start webwasb
fi
...
if [[ $OS_VERSION == 14* ]]; then
    export JAVA_HOME=/usr/lib/jvm/java-7-openjdk-amd64
elif [[ $OS_VERSION == 16* ]]; then
    export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
fi
```

Полный скрипт с этими фрагментами кода см. по адресу https://hdiconfigactions.blob.core.windows.net/linuxhueconfigactionv02/install-hue-uber-v02.sh.

Сведения о версии Ubuntu, используемой в HDInsight, см. в документе [HDInsight component version](hdinsight-component-versioning.md) (Версия компонента HDInsight).

Сведения о различиях между Systemd и Upstart см. в статье [Systemd for Upstart users](https://wiki.ubuntu.com/SystemdForUpstartUsers) (Systemd для пользователей Upstart).

### <a name="bPS2"></a>Предоставление стабильных ссылок на ресурсы сценария

Вам нужно обеспечить доступность сценариев и ресурсов, используемых сценарием, в период существования кластера, а также неизменность версий этих файлов. Эти ресурсы необходимы, если во время операций масштабирования в кластер добавляются новые узлы.

Мы советуем скачивать и архивировать все данные в свою учетную запись хранения Azure.

> [!IMPORTANT]
> Используемая учетная запись хранения должна быть учетной записью хранения по умолчанию для кластера или общедоступным и открытым только для чтения контейнером в другой учетной записи хранения.

В частности, примеры, предоставляемые корпорацией Майкрософт, хранятся в учетной записи хранения по адресу [https://hdiconfigactions.blob.core.windows.net/](https://hdiconfigactions.blob.core.windows.net/). Эта учетная запись является открытым и доступным только для чтения контейнером, который обслуживает группа HDInsight.

### <a name="bPS4"></a>Использование предварительно скомпилированных ресурсов

Чтобы сократить время выполнения сценария, избегайте операций, компилирующих ресурсы из исходного кода. Вместо этого выполните предварительную компиляцию ресурсов и сохраните версию в форме двоичного файла в хранилище больших двоичных объектов Azure, чтобы его можно быстро скачать в кластер из сценария.

### <a name="bPS3"></a>Обеспечение идемпотентности сценария настройки кластера

Сценарии должны быть идемпотентными. Имеется в виду, что при многократном выполнении в каждом случае сценарий должен обеспечивать возврат кластера к одному и тому же состоянию.

Например, если пользовательский сценарий во время своего первого запуска установил приложение в папку /usr/local/bin, то при каждом последующем запуске сценарий должен проверять, существует ли приложение в папке /usr/local/bin, и только после этого переходить к следующим шагам.

### <a name="bPS5"></a>Обеспечение высокого уровня доступности кластера

В кластерах HDInsight под управлением Linux есть два головных узла, активных в пределах кластера. Действия сценария выполняются на обоих узлах. Если устанавливаемым компонентам требуется только один головной узел, то сценарий должен предусматривать установку компонента только на один из двух головных узлов кластера.

> [!IMPORTANT]
> Стандартные службы, устанавливаемые вместе с HDInsight, выполняют отработку отказа между двумя узлами. Однако эта функция не распространяется на пользовательские компоненты, устанавливаемые при выполнении действий сценария. Если требуется высокая доступность компонентов, устанавливаемых с помощью действий сценария, необходимо реализовать собственный механизм отработки отказа, использующий два доступных головных узла.

### <a name="bPS6"></a>Настройка пользовательских компонентов для использования хранилища больших двоичных объектов Azure

Компоненты, устанавливаемые на кластере, могут по умолчанию использовать хранилище распределенной файловой системы Hadoop (HDFS). HDInsight в качестве хранилища по умолчанию использует хранилище BLOB-объектов Azure (WASB). Это обеспечивает совместимую с HDFS файловую систему, которая сохраняет данные даже после удаления кластера. Необходимо настроить устанавливаемые компоненты, чтобы использовать WASB вместо HDFS.

Пример ниже копирует файл giraph-examples.jar из локальной файловой системы в хранилище WASB.

```bash
hdfs dfs -put /usr/hdp/current/giraph/giraph-examples.jar /example/jars/
```

### <a name="bPS7"></a>Запись информации в STDOUT и STDERR

Данные, записываемые в STDOUT и STDERR при выполнении сценария, заносятся в журнал и могут быть просмотрены с помощью веб-интерфейса Ambari.

> [!NOTE]
> Веб-интерфейс Ambari доступен только в том случае, если кластер успешно создан. Если во время создания кластера используется действие сценария и создание завершается ошибкой, ознакомьтесь с другими способами доступа к данным журнала в разделе по устранению неполадок [Настройка кластеров HDInsight с помощью действия сценария](hdinsight-hadoop-customize-cluster-linux.md#troubleshooting) .

Большинство программ и пакетов установки добавляют данные в STDOUT и STDERR по умолчанию, однако вам может потребоваться добавить дополнительные записи в журнал. Для отправки текста в STDOUT используйте `echo`. Например:

```bash
echo "Getting ready to install Foo"
```

По умолчанию ключевое слово `echo` отправляет строку в STDOUT. Чтобы направить строку в STDERR, добавьте `>&2` перед `echo`. Например:

```bash
>&2 echo "An error occurred installing Foo"
```

Эта команда перенаправляет данные из STDOUT (значение 1, которое является значением по умолчанию, поэтому не указано здесь) в STDERR (2). Дополнительные сведения о перенаправлении ввода-вывода см. на странице [http://www.tldp.org/LDP/abs/html/io-redirection.html](http://www.tldp.org/LDP/abs/html/io-redirection.html).

Дополнительные сведения о просмотре журналов, созданных действиями скрипта, см. в статье [Настройка кластеров HDInsight с помощью действия сценария](hdinsight-hadoop-customize-cluster-linux.md#troubleshooting).

### <a name="bps8"></a> Сохранение файлов в формате ASCII с использованием LF в качестве символа завершения строки

Сценарии Bash должны храниться в формате ASCII. Для завершения строк в этом файле используется символ LF. Если в файлах используется кодировка UTF-8, которая допускает наличие метки порядка байтов в начале файла и использование символа CRLF для завершения строки (зачастую эта кодировка используется редакторами Windows), то сценарий завершится с ошибками, аналогичными приведенным ниже.

```
$'\r': command not found
line 1: #!/usr/bin/env: No such file or directory
```

### <a name="bps9"></a> Использование логики повтора для восстановления после временных ошибок

При скачивании файлов, установке пакетов с помощью apt-get или других действиях, которые передают данные через Интернет, операция может завершиться ошибкой из-за временной ошибки сети. Например, удаленный ресурс, с которым вы обмениваетесь данными, может находиться в процессе отработки отказа на резервный узел.

Чтобы сделать свой сценарий устойчивым к временным ошибкам, можно реализовать логику повтора. Ниже приведен пример функции, которая будет выполнять передаваемую в нее команду и (если команда завершается ошибкой) повторять ее до трех раз. Она будет ждать две секунды между попытками.

```bash
#retry
MAXATTEMPTS=3

retry() {
    local -r CMD="$@"
    local -i ATTMEPTNUM=1
    local -i RETRYINTERVAL=2

    until $CMD
    do
        if (( ATTMEPTNUM == MAXATTEMPTS ))
        then
                echo "Attempt $ATTMEPTNUM failed. no more attempts left."
                return 1
        else
                echo "Attempt $ATTMEPTNUM failed! Retrying in $RETRYINTERVAL seconds..."
                sleep $(( RETRYINTERVAL ))
                ATTMEPTNUM=$ATTMEPTNUM+1
        fi
    done
}
```

Ниже приведены примеры использования этой функции.

```bash
retry ls -ltr foo

retry wget -O ./tmpfile.sh https://hdiconfigactions.blob.core.windows.net/linuxhueconfigactionv02/install-hue-uber-v02.sh
```

## <a name="helpermethods"></a>Вспомогательные методы для пользовательских сценариев

Вспомогательные методы действий сценариев — это служебные программы, которые можно использовать при создании пользовательских скриптов. Их определение приведено на странице [https://hdiconfigactions.blob.core.windows.net/linuxconfigactionmodulev01/HDInsightUtilities-v01.sh](https://hdiconfigactions.blob.core.windows.net/linuxconfigactionmodulev01/HDInsightUtilities-v01.sh). Эти методы можно добавить в скрипты с помощью следующей команды:

```bash
# Import the helper method module.
wget -O /tmp/HDInsightUtilities-v01.sh -q https://hdiconfigactions.blob.core.windows.net/linuxconfigactionmodulev01/HDInsightUtilities-v01.sh && source /tmp/HDInsightUtilities-v01.sh && rm -f /tmp/HDInsightUtilities-v01.sh
```

Эта команда открывает доступ к следующим вспомогательным приложениям, доступным для использования в сценарии.

| Назначение вспомогательного приложения | Описание |
| --- | --- |
| `download_file SOURCEURL DESTFILEPATH [OVERWRITE]` |Скачивает файл из исходного универсального кода ресурса (URI) и сохраняет его в указанное расположение. При этом по умолчанию существующий файл не перезаписывается. |
| `untar_file TARFILE DESTDIR` |Извлекает TAR-файл (с помощью `-xf`) в папку назначения. |
| `test_is_headnode` |При запуске на головном узле кластера возвращает значение 1, в противном случае — 0. |
| `test_is_datanode` |Если текущий узел является узлом данных (рабочим узлом), то возвращается значение 1, в противном случае — 0. |
| `test_is_first_datanode` |Если текущий узел является первым узлом данных (рабочим узлом с именем workernode0), возвращается значение 1, в противном случае — 0. |
| `get_headnodes` |Возвращает полное доменное имя головных узлов в кластере. Имена содержат разделители-запятые. При возникновении ошибки возвращается пустая строка. |
| `get_primary_headnode` |Возвращает полное доменное имя основного головного узла. При возникновении ошибки возвращается пустая строка. |
| `get_secondary_headnode` |Возвращает полное доменное имя дополнительного головного узла. При возникновении ошибки возвращается пустая строка. |
| `get_primary_headnode_number` |Возвращает числовой суффикс основного головного узла. При возникновении ошибки возвращается пустая строка. |
| `get_secondary_headnode_number` |Возвращает числовой суффикс дополнительного головного узла. При возникновении ошибки возвращается пустая строка. |

## <a name="commonusage"></a>Общие варианты использования

В этом разделе содержится руководство по реализации некоторых общих вариантов использования, которые могут понадобиться при написании пользовательского сценария.

### <a name="passing-parameters-to-a-script"></a>Передача параметров в сценарий

В некоторых случаях для сценария требуется указывать параметры. Например, для извлечения сведений из интерфейса Ambari REST API может потребоваться пароль администратора кластера.

Параметры, передаваемые в скрипт, называются *позиционными параметрами*, т. е. `$1` соответствует первому параметру, `$2` — второму и т.д. Значение `$0` содержит имя самого скрипта.

Значения, передаваемые в сценарий в качестве параметров, должны быть заключены в одинарные кавычки ('). Эти значения будут рассматриваться как литералы, и такие символы, как «!», не будут интерпретироваться как специальные.

### <a name="setting-environment-variables"></a>Настройка переменных среды

Настройка переменной среды выполняется следующим образом.

    VARIABLENAME=value

Где VARIABLENAME — имя переменной. После этого вы можете использовать `$VARIABLENAME`для доступа к переменной. Например, чтобы присвоить значение позиционного параметра переменной среды с именем PASSWORD, воспользуйтесь следующей конструкцией.

    PASSWORD=$1

Для последующего доступа к данным используйте `$PASSWORD`.

Переменные среды, заданные в сценарии, существуют только в пределах области сценария. В некоторых случаях может потребоваться добавить переменные среды, которые значимы на уровне системы и значение которых сохранится после выполнения сценария. Обычно это нужно для того, чтобы пользователи, подключаемые к кластеру через SSH, могли использовать установленные сценарием компоненты. Системная переменная создается добавлением переменной среды в папку `/etc/environment`. Например, следующая конструкция добавляет переменную **HADOOP\_CONF\_DIR**:

```bash
echo "HADOOP_CONF_DIR=/etc/hadoop/conf" | sudo tee -a /etc/environment
```

### <a name="access-to-locations-where-the-custom-scripts-are-stored"></a>Доступ к расположениям, в которых хранятся пользовательские сценарии

Скрипты, используемые для настройки кластера, должны храниться в одном из следующих расположений:

* __учетной записи хранения по умолчанию__ для кластера;

* __дополнительной учетной записи хранения__, связанной с кластером;

* __ресурсе с общедоступным URI__, например OneDrive, Dropbox и т. д.;

* __учетной записи Azure Data Lake Store__, связанной с кластером HDInsight. Дополнительные сведения об использовании Azure Data Lake Store с HDInsight см. в статье [Создание кластера HDInsight с хранилищем озера данных с помощью портала Azure](../data-lake-store/data-lake-store-hdinsight-hadoop-use-portal.md).

    > [!NOTE]
    > Кластер HDInsight субъекта-службы с доступом к Data Lake Store должен иметь доступ на чтение к скрипту.

Если сценарий получает доступ к ресурсам в другом расположении, это расположение должно быть общедоступным (или по крайней мере открытым только для чтения). Например, может потребоваться загрузить файл в кластер с помощью метода `download_file`.

Сохранение файла в учетной записи хранения Azure, доступной кластеру (например, в учетной записи хранения по умолчанию), обеспечит быстрый доступ к нему, так как это хранилище находится в сети Azure.

> [!NOTE]
> Формат универсального кода ресурса (URI), используемый для ссылки на скрипт, отличается в зависимости от используемой службы. Для учетной записи хранения, связанной с кластером HDInsight, используйте `wasb://` или `wasbs://`, для общедоступного универсального кода ресурса (URI) — `http://` или `https://`, а для Data Lake Store — `adl://`.

### <a name="checking-the-operating-system-version"></a>Проверка версии операционной системы

Для разных версий HDInsight используются конкретные версии Ubuntu. В скрипте следует проверить различия между версиями ОС. Например, может потребоваться установить двоичный файл, привязанный к версии Ubuntu.

Чтобы проверить версию операционной системы, используйте `lsb_release`. Например, ниже показано, как создать ссылку на разные TAR-файлы в зависимости от версии операционной системы:

```bash
OS_VERSION=$(lsb_release -sr)
if [[ $OS_VERSION == 14* ]]; then
    echo "OS verion is $OS_VERSION. Using hue-binaries-14-04."
    HUE_TARFILE=hue-binaries-14-04.tgz
elif [[ $OS_VERSION == 16* ]]; then
    echo "OS verion is $OS_VERSION. Using hue-binaries-16-04."
    HUE_TARFILE=hue-binaries-16-04.tgz
fi
```

## <a name="deployScript"></a>Контрольный список для развертывания действия сценария

Ниже приведены шаги, которые использовались при подготовке к развертыванию этих скриптов.

* Поместите файлы, содержащие пользовательские скрипты, в месте, доступном из узлов кластера во время развертывания. Это может быть любая из используемых по умолчанию или дополнительных учетных записей хранения, указанных во время развертывания кластера, или другой общедоступный контейнер хранилища.
* Добавьте проверки в сценарии, чтобы гарантировать их идемпотентное выполнение, т. е. возможность многократного выполнения сценария на одном и том же узле.
* Используйте папку для временных файлов, например /tmp, чтобы хранить скачанные файлы, используемый сценариями. После выполнения сценариев очистите эту папку.
* В случае изменений параметров на уровне операционной системы или файлов конфигурации службы Hadoop может потребоваться перезапуск служб HDInsight. За счет этого службы HDInsight смогут автоматически установить любые параметры уровня операционной системы, например заданные в сценариях переменные среды.

## <a name="runScriptAction"></a>Как запустить действие сценария

Действия скрипта можно использовать для настройки кластеров HDInsight с помощью портала Azure, Azure PowerShell, шаблонов Azure Resource Manager или пакета SDK .NET для HDInsight. Инструкции см. в руководстве по [использованию действий скрипта](hdinsight-hadoop-customize-cluster-linux.md).

## <a name="sampleScripts"></a>Примеры пользовательских сценариев

Корпорация Майкрософт предоставляет примеры скриптов для установки компонентов в кластере HDInsight. Примеры скриптов и инструкции по их использованию доступны по приведенным ниже ссылкам:

* [Установка и использование Hue в кластерах HDInsight](hdinsight-hadoop-hue-linux.md)
* [Установка и использование R в кластерах HDInsight Hadoop](hdinsight-hadoop-r-scripts-linux.md)
* [Установка и использование Solr в кластерах HDInsight](hdinsight-hadoop-solr-install-linux.md)
* [Установка и использование Giraph в кластерах HDInsight](hdinsight-hadoop-giraph-install-linux.md)  

> [!NOTE]
> Приведенные выше документы относятся только к кластерам HDInsight под управлением Linux. Сведения о скриптах, предназначенных для HDInsight под управлением Windows, см. в статье [Разработка действий скриптов с помощью HDInsight (Windows)](hdinsight-hadoop-script-actions.md) или по ссылкам, приведенным в начале каждой статьи.

## <a name="troubleshooting"></a>Устранение неполадок

Ниже перечислены ошибки, которые могут возникнуть при использовании ваших сценариев.

**Ошибка**: `$'\r': command not found`. Иногда дополняется фразой `syntax error: unexpected end of file`.

*Причина.*Эта ошибка возникает, когда для завершения строк в сценарии используется символ CRLF. В системах UNIX для завершения строк допускается только символ LF.

Зачастую эта проблема возникает при написании сценария в среде Windows, так как в текстовых редакторах для этой системы CRLF является стандартным символом завершения строки.

*Решение.*Если в вашем текстовом редакторе имеется функция выбора формата Unix или использования символа LF для завершения строк, воспользуйтесь ею. Кроме того, в системе Unix вы можете использовать следующие команды изменения CRLF на LF.

> [!NOTE]
> Для замены символов CRLF на LF могут использоваться следующие аналогичные команды. Выберите подходящий вариант в зависимости от наличия в системе соответствующих служебных программ.

| Команда | Примечания |
| --- | --- |
| `unix2dos -b INFILE` |Для исходного файла будет создана резервная копия с расширением BAK. |
| `tr -d '\r' < INFILE > OUTFILE` |В файле OUTFILE для окончания строк будут использоваться только символы LF. |
| `perl -pi -e 's/\r\n/\n/g' INFILE` |Эта команда изменит исходный файл без создания нового файла. |
| ```sed 's/$'"/`echo \\\r`/" INFILE > OUTFILE``` |В файле OUTFILE для окончания строк будут использоваться только символы LF. |

**Ошибка**: `line 1: #!/usr/bin/env: No such file or directory`.

*Причина.*Эта ошибка возникает, если скрипт сохранен в кодировке UTF-8 с меткой порядка байтов (BOM).

*Решение.*Сохраните файл в формате ASCII или UTF-8 без метки порядка байтов. Кроме того, для создания нового файла без метки порядка байтов в системе Linux или Unix вы можете использовать следующую команду.

    awk 'NR==1{sub(/^\xef\xbb\xbf/,"")}{print}' INFILE > OUTFILE

В приведенной выше команде замените **INFILE** на файл с меткой порядка байтов. **OUTFILE** укажите новое имя файла, который будет содержать скрипт без метки порядка байтов.

## <a name="seeAlso"></a>Дальнейшие действия

* Узнайте, как [Настройка кластеров HDInsight с помощью действия сценария](hdinsight-hadoop-customize-cluster-linux.md)
* Используйте [справочник по пакету SDK .NET для HDInsight](https://msdn.microsoft.com/library/mt271028.aspx) , чтобы узнать больше о создании приложений .NET, которые управляют HDInsight.
* Используйте [REST API HDInsight](https://msdn.microsoft.com/library/azure/mt622197.aspx) , чтобы узнать, как использовать REST для выполнения операций управления кластерами HDInsight.

