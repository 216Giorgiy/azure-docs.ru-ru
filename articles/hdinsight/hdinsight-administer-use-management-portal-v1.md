<properties
	pageTitle="Управление кластерами Hadoop в HDInsight с помощью классического портала Azure | Microsoft Azure"
	description="Сведения об управлении службой HDInsight. Создайте кластер HDInsight, откройте интерактивную консоль JavaScript и командную консоль Hadoop."
	services="hdinsight"
	documentationCenter=""
	authors="mumian"
	manager="paulettm"
	editor="cgronlun"/>

<tags
	ms.service="hdinsight"
	ms.workload="big-data"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="02/04/2016"
	ms.author="jgao"/>

# Управление кластерами Hadoop в HDInsight с помощью классического портала Azure

С помощью [классического портала Azure](https://manage.windowsazure.com) можно подготовить кластеры Hadoop в HDInsight, изменить пароль пользователя Hadoop и включить протокол удаленного рабочего стола (RDP), чтобы получить доступ к командной консоли Hadoop в кластере.

[AZURE.INCLUDE [hdinsight-azure-portal](../../includes/hdinsight-azure-portal.md)]

* [Управление кластерами Hadoop в HDInsight с помощью портала Azure](hdinsight-administer-use-management-portal.md)

## Другие средства для администрирования HDInsight
Помимо классического портала Azure имеются и другие средства для администрирования HDInsight.

- Дополнительные сведения об администрировании HDInsight с помощью Azure PowerShell см. в разделе [Администрирование HDInsight с помощью Azure PowerShell](hdinsight-administer-use-powershell.md).

- Дополнительные сведения об администрировании HDInsight с помощью CLI Azure см. в разделе [Администрирование HDInsight с помощью CLI Azure](hdinsight-administer-use-command-line.md).

##Предварительные требования

Перед началом работы с этой статьей необходимо иметь следующее:

- **Подписка Azure.**. См. [Бесплатная пробная версия Azure](https://azure.microsoft.com/documentation/videos/get-azure-free-trial-for-testing-hadoop-in-hdinsight/).
- **Учетная запись хранения Azure**. Кластер HDInsight использует контейнер хранилища больших двоичных объектов Azure в качестве файловой системы по умолчанию. Дополнительные сведения о том, каким образом хранилище больших двоичных объектов Azure обеспечивает удобную работу с кластерами HDInsight, см. в разделе [Использование хранилища больших двоичных объектов Azure с HDInsight](../hdinsight-use-blob-storage.md). Сведения о создании учетной записи хранения Azure см. в разделе [Создание учетной записи хранения](../storage-create-storage-account.md).


##Подготовка кластеров HDInsight к работе

Вы можете подготавливать кластеры HDInsight на классическом портале Azure с помощью процедуры быстрого или настраиваемого создания. Инструкции см. по следующим ссылкам.

- [Подготовка кластера с помощью быстрого создания](../hdinsight-get-started.md#provision)
- [Подготовка кластера с помощью настраиваемого создания](hdinsight-provision-clusters.md#portal)

[AZURE.INCLUDE [список центров обработки данных](../../includes/hdinsight-pricing-data-centers-clusters.md)]


##Настройка кластеров HDInsight

HDInsight работает со множеством компонентов Hadoop. Список проверенных и поддерживаемых компонентов см. в разделе [Какая версия Hadoop включена в Azure HDInsight?](hdinsight-component-versioning.md). Вы можете настраивать HDInsight с использованием одного из следующих вариантов.

- Используйте действие скрипта для запуска пользовательских скриптов, которые могут настраивать кластер для изменения конфигурации кластера или для установки настраиваемых компонентов, таких как Giraph или Solr. Дополнительные сведения см. в разделе [Настройка кластера HDInsight с помощью действия скрипта](hdinsight-hadoop-customize-cluster.md).
- Используйте параметры настройки кластера в Azure PowerShell или в пакете SDK для HDInsight .NET во время подготовки кластера. Такие изменения конфигурации сохраняются на протяжении всего срока существования кластера и не попадают под воздействие операций повторного создания образа узла, которые периодически выполняет платформа Azure в рамках обслуживания. Дополнительные сведения об использовании параметров настройки кластера см. в разделе [Подготовка кластеров HDInsight](hdinsight-provision-clusters.md).
- Некоторые собственные компоненты Java, такие как Mahout и Cascading, могут выполняться в кластере как JAR-файлы. Эти JAR-файлы можно распространить в хранилище больших двоичных объектов Azure и отправить в кластеры HDInsight с помощью механизмов отправки заданий Hadoop. Дополнительные сведения см. в разделе [Отправка заданий Hadoop программными средствами](hdinsight-submit-hadoop-jobs-programmatically.md).


	>[AZURE.NOTE] Если при развертывании или вызове JAR-файлов в кластерах HDInsight возникают проблемы, обратитесь в [службу поддержки Майкрософт](https://azure.microsoft.com/support/options/).

	> Компонент Cascading не поддерживается службой HDInsight и на него не распространяется техническая поддержка Майкрософт. Списки поддерживаемых компонентов см. в разделе [Новые возможности версий кластеров, предоставляемых HDInsight](hdinsight-component-versioning.md).


Установка пользовательского программного обеспечения в кластере с помощью подключения к удаленному рабочему столу не поддерживается. Не храните файлы на дисках головного узла, поскольку в случае повторного создания кластеров эти файлы будут потеряны. Рекомендуется хранить файлы в хранилище больших двоичных объектов Azure. Хранилище BLOB-объектов остается неизменным.

##Изменение имени пользователя и пароля для кластера HDInsight
Кластер HDInsight может иметь две учетные записи пользователя. Учетная запись пользователя кластера HDInsight создается в процессе подготовки. Вы также можете создать учетную запись пользователя RDP для доступа к кластеру через RDP. См. [Включение удаленного рабочего стола](#connect-to-hdinsight-clusters-by-using-rdp).

**Изменение имени пользователя и пароля для кластера HDInsight**

1. Войдите на [классический портал Azure](https://manage.windowsazure.com/).
2. На левой панели щелкните **HDINSIGHT**. Появится список развернутых кластеров HDInsight.
3. Щелкните кластер HDInsight, для которого хотите переопределить имя пользователя и пароль.
4. В верхней части страницы щелкните **КОНФИГУРАЦИЯ**.
5. Щелкните **ВЫКЛ** рядом с элементом **СЛУЖБЫ HADOOP**.
6. В нижней части страницы нажмите кнопку **СОХРАНИТЬ** и дождитесь отключения.
7. После отключения службы щелкните **ВКЛ** рядом с элементом **СЛУЖБЫ HADOOP**.
8. В полях **ИМЯ ПОЛЬЗОВАТЕЛЯ** и **НОВЫЙ ПАРОЛЬ** введите новое имя пользователя и пароль (соответственно) для кластера.
8. Щелкните **СОХРАНИТЬ**.


##Подключение к кластерам HDInsight с помощью RDP

Учетные данные, указанные при создании кластера, предоставляют доступ к службам в кластере, но не к самому кластеру через удаленный рабочий стол. Доступ через удаленный рабочий стол по умолчанию отключен, поэтому для прямого доступа к кластеру с его помощью требуется некоторая дополнительная настройка после создания.

**Включение удаленного рабочего стола**

1. Войдите на [классический портал Azure](https://manage.windowsazure.com/).
2. На левой панели щелкните **HDINSIGHT**. Появится список развернутых кластеров HDInsight.
3. Щелкните кластер HDInsight, к которому хотите подключиться.
4. В верхней части страницы щелкните **КОНФИГУРАЦИЯ**.
5. В нижней части страницы щелкните **ВКЛЮЧИТЬ УДАЛЕННЫЙ ДОСТУП**.
6. В мастере **настройки удаленного рабочего стола** введите имя пользователя и пароль для удаленного рабочего стола. Обратите внимание, что имя пользователя должно отличаться от имени пользователя, которое использовалось для создания кластера (по умолчанию **admin** при выборе параметра «Быстрое создание»). Введите дату окончания срока действия в поле **ИСТЕКАЕТ**. Обратите внимание, что дата окончания срока действия должна быть в будущем и не позднее, чем через 90 дней от сегодняшнего дня. В качестве времени окончания срока действия по умолчанию предполагается полночь указанной даты. Затем щелкните значок флажка.

	![HDI.CreateRDPUser][image-hdi-create-rpd-user]


> [AZURE.NOTE] Можно также включить удаленный рабочий стол в кластере с помощью пакета SDK для HDInsight .NET. Используйте метод **EnableRdp** в клиентском объекте HDInsight следующим образом: **client.EnableRdp(имя\_кластера, расположение, "rdpuser", "rdppassword", DateTime.Now.AddDays(6))**. Аналогично, чтобы отключить удаленный рабочий стол в кластере, можно использовать **client.DisableRdp(имя\_кластера, расположение)**. Дополнительные сведения об этих методах см. в разделе [Справочник по пакету SDK для HDInsight .NET](http://go.microsoft.com/fwlink/?LinkId=529017). Это применимо только для кластеров HDInsight под управлением Windows.



> [AZURE.NOTE] После включения RDP для кластера прежде чем подключаться к кластеру, вам необходимо обновить страницу.

**Подключение к кластеру с помощью RDP**

1. Войдите на [классический портал Azure](https://manage.windowsazure.com/).
2. На левой панели щелкните **HDINSIGHT**. Появится список развернутых кластеров HDInsight.
3. Щелкните кластер HDInsight, к которому хотите подключиться.
4. В верхней части страницы щелкните **КОНФИГУРАЦИЯ**.
5. Щелкните **ПОДКЛЮЧИТЬСЯ**, а затем следуйте инструкциям.

##Создание самозаверяющего сертификата

Для выполнения любых операций в кластере с использованием пакета SDK .NET необходимо создать в рабочей станции самозаверяющий сертификат и отправить его в подписку Azure. Выполнить данную операцию достаточно всего один раз. Один и тот же сертификат можно устанавливать и на других машинах в течение всего срока его действия.

**Создание самозаверяющего сертификата**

1. Создайте самозаверяющий сертификат, который используется для проверки подлинности запросов. Для создания сертификата можно использовать IIS или [makecert](http://go.microsoft.com/fwlink/?LinkId=534000).

2. Выполните обзор местоположения сертификата, щелкните сертификат правой кнопкой мыши, щелкните **Установить сертификат** и установите сертификат в личное хранилище компьютера. Измените свойства сертификата, чтобы назначить ему понятное имя.

3. Импортируйте сертификат на классический портал Azure. На портале щелкните **ПАРАМЕТРЫ** в нижней левой части страницы, а затем нажмите **СЕРТИФИКАТЫ УПРАВЛЕНИЯ**. В нижней части страницы нажмите **ОТПРАВИТЬ** и следуйте инструкциям по отправке CER-файла, созданного на предыдущем шаге.

	![HDI.ClusterCreate.UploadCert][image-hdiclustercreate-uploadcert]


##Предоставление и отмена доступа к службам HTTP

В кластерах HDInsight имеются следующие веб-службы HTTP (все эти службы имеют конечные точки RESTful):

- ODBC
- JDBC
- Ambari
- Oozie
- Templeton

По умолчанию эти службы предоставляются для доступа. Вы можете предоставлять и отменять доступ на классическом портале Azure.

>[AZURE.NOTE] Предоставляя или отменяя доступ, вы сбрасываете имя пользователя и пароль кластера.

**Предоставление и отмена доступа к веб-службам HTTP**

1. Войдите на [классический портал Azure](https://manage.windowsazure.com/).
2. На левой панели щелкните **HDINSIGHT**. Появится список развернутых кластеров HDInsight.
3. Щелкните кластер HDInsight, который хотите настроить.
4. В верхней части страницы щелкните **КОНФИГУРАЦИЯ**.
5. Щелкните **ВКЛ** или **ВЫКЛ** рядом с элементом **СЛУЖБЫ HADOOP**.
6. В полях **ИМЯ ПОЛЬЗОВАТЕЛЯ** и **НОВЫЙ ПАРОЛЬ** введите новое имя пользователя и пароль (соответственно) для кластера.
7. Щелкните **СОХРАНИТЬ**.

См. раздел [Администрирование HDInsight с помощью Azure PowerShell](hdinsight-administer-use-powershell.md)

##Открытие командной строки Hadoop.

Чтобы подключиться к кластеру с помощью удаленного рабочего стола и использовать командную строку Hadoop, необходимо сначала включить доступ к кластеру с удаленного рабочего стола, как описано в предыдущем разделе.

**Открытие командной строки Hadoop.**

1. Войдите на [классический портал Azure](https://manage.windowsazure.com/).
2. На левой панели щелкните **HDINSIGHT**. Вы увидите список развернутых кластеров Hadoop.
3. Щелкните кластер HDInsight, к которому хотите подключиться.
3. В верхней части страницы щелкните **КОНФИГУРАЦИЯ**.
4. В нижней части страницы щелкните **ПОДКЛЮЧИТЬСЯ**.
5. Щелкните **Открыть**.
6. Введите свои учетные данные и нажмите кнопку **ОК**. Используйте имя пользователя и пароль, которые были настроены при создании кластера.
7. Щелкните **Да**.
8. На рабочем столе дважды щелкните элемент **Командная строка Hadoop**.

	![HDI.HadoopCommandLine][image-hadoopcommandline]


	Дополнительные сведения о командах Hadoop см. в [справочнике по командам Hadoop](http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/CommandsManual.html).

На предыдущем снимке экрана в имя папки включен номер версии Hadoop. Номер версии может меняться в зависимости от версии компонентов Hadoop, установленных в кластере. Для ссылки на эти папки можно использовать переменные среды Hadoop. Например:

	cd %hadoop_home%
	cd %hive_home%
	cd %pig_home%
	cd %sqoop_home%
	cd %hcatalog_home%

##Масштабирование кластеров
См. раздел [Масштабирование кластеров Hadoop в HDInsight](hdinsight-hadoop-cluster-scaling.md)

##Дальнейшие действия
Из этой статьи вы узнали, как создать кластер HDInsight с помощью классического портала Azure и как открыть программу командной строки Hadoop. Для получения дополнительных сведений ознакомьтесь со следующими статьями:

* [Администрирование HDInsight с помощью Azure PowerShell](hdinsight-administer-use-powershell.md)
* [Администрирование HDInsight с помощью CLI Azure](hdinsight-administer-use-command-line.md)
* [Подготовка кластеров HDInsight к работе](hdinsight-provision-clusters.md)
* [Отправка заданий Hadoop в HDInsight](hdinsight-submit-hadoop-jobs-programmatically.md)
* [Начало работы с Azure HDInsight](../hdinsight-get-started.md)
* [Какая версия Hadoop включена в Azure HDInsight?](hdinsight-component-versioning.md)

[image-hdi-create-rpd-user]: ./media/hdinsight-administer-use-management-portal-v1/hdi.createrdpuser.png
[image-hadoopcommandline]: ./media/hdinsight-administer-use-management-portal-v1/hdinsight-hadoop-command-line.png "Командная строка Hadoop"
[image-hdiclustercreate-uploadcert]: ./media/hdinsight-administer-use-management-portal-v1/hdi.clustercreate.uploadcert.png

<!---HONumber=AcomDC_0211_2016-->