<properties
pageTitle="Использование пользовательского интерфейса Tez в HDInsight на платформе Windows | Azure"
description="Узнайте, как отладить задания Tez в HDInsight на платформе Windows с помощью пользовательского интерфейса Tez."
services="hdinsight"
documentationCenter=""
authors="Blackmist"
manager="paulettm"
editor="cgronlun"/>

<tags
ms.service="hdinsight"
ms.devlang="na"
ms.topic="article"
ms.tgt_pltfrm="na"
ms.workload="big-data"
ms.date="07/19/2016"
ms.author="larryfr"/>

# Отладка заданий Tez в HDInsight на платформе Windows с помощью пользовательского интерфейса Tez

Пользовательский веб-интерфейс Tez является веб-страницей, которую можно использовать для получения общих сведений о заданиях и отладки заданий, использующих Tez в качестве подсистемы выполнения на кластерах HDInsight под управлением Windows. Пользовательский интерфейс Tez позволяет визуализировать задание в виде схемы связанных элементов, выполнять детализацию каждого элемента и получать статистические данные и данные журнала.

> [AZURE.NOTE] Информация, приведенная в этом документе, относится только к кластерам HDInsight под управлением Windows. Сведения о просмотре и отладке Tez в HDInsight на платформе Linux см. в статье [Отладка заданий Tez в HDInsight с помощью представлений Ambari](hdinsight-debug-ambari-tez-view.md).

##Предварительные требования

* Кластер HDInsight на платформе Windows Инструкции по созданию кластера см. в статье [Приступая к работе с HDInsight на платформе Windows](hdinsight-hadoop-tutorial-get-started-windows.md).

    > [AZURE.IMPORTANT] Пользовательский интерфейс Tez доступен только на кластерах HDInsight под управлением Windows, созданных после 8 февраля 2016.

* Клиент удаленного рабочего стола под управлением Windows.

##Общие сведения о Tez

Tez — это расширяемая платформа для обработки данных в Hadoop, которая характеризуется более высокими скоростями по сравнению с традиционной обработкой MapReduce. Для кластеров HDInsight под управлением Windows это необязательная подсистема, которую можно включить для Hive с помощью следующей команды рамках запроса Hive:

    set hive.execution.engine=tez;

При отправке работы в Tez подсистема создает направленный ациклический граф (DAG), описывающий порядок выполнения действий, необходимых для задания. Отдельные действия называются вершинами и выполняют часть всего задания. Фактическое выполнение работы, описываемое вершиной, называется задачей и может быть распределено среди нескольких узлов кластера.

###Общие сведения о пользовательском интерфейсе Tez

Пользовательский интерфейс Tez — это веб-страница, содержащая сведения о процессах, которые выполняются или выполнялись ранее с использованием Tez. Здесь можно просмотреть созданный Tez граф DAG, его распределение по кластерам, а также увидеть счетчики, например с данными о памяти, используемой задачами и вершинами, и сведения об ошибках. Отображаемые сведения могут быть полезными в следующих сценариях.

* Мониторинг длительных процессов, просмотр хода выполнения задач map и reduce.

* Анализ исторических данных успешных или неудачных процессов для получения сведений о причинах сбоев и возможностях улучшения обработки.

##Создание DAG

Пользовательский интерфейс Tez будет содержать данные только в том случае, если задание, которое использует подсистему Tez, выполняется в данный момент или было выполнено ранее. Простые запросы Hive обычно можно разрешить без использования Tez, однако эта подсистема потребуется для работы с более сложными запросами, которые выполняют фильтрацию, группировку, упорядочение, соединения и т. д.

Приведенные ниже действия предназначены для запуска запроса Hive, выполняемого с помощью Tez.

1. Откройте веб-браузер и перейдите по адресу https://CLUSTERNAME.azurehdinsight.net, где __CLUSTERNAME__ — это имя вашего кластера HDInsight.

2. В меню в верхней части страницы выберите __Редактор Hive__. Появится страница со следующим примером запроса:

        Select * from hivesampletable

    Сотрите пример запроса и замените его следующим:

        set hive.execution.engine=tez;
        select market, state, country from hivesampletable where deviceplatform='Android' group by market, country, state;

3. Нажмите кнопку __Отправить__. В разделе __Сеанс задания__ в нижней части страницы будет отображаться состояние запроса. После изменения состояния на __Завершено__ щелкните ссылку __Просмотр сведений__, чтобы просмотреть результаты. __Выходные данные задания__ должны иметь вид, аналогичный приведенному ниже:
        
        en-GB   Hessen      Germany
        en-GB   Kingston    Jamaica
        en-GB   Nairobi Area    Kenya

##Использование пользовательского интерфейса Tez

> [AZURE.NOTE] Пользовательский интерфейс Tez доступен только с рабочего стола головных узлов кластера, поэтому для подключения к этим узлам необходимо использовать удаленный рабочий стол.

1. На [портале Azure](https://portal.azure.com) выберите свой кластер HDInsight. В верхней части колонки HDInsight щелкните значок __Удаленный рабочий стол__. Появится колонка удаленного рабочего стола.

    ![Значок удаленного рабочего стола](./media/hdinsight-debug-tez-ui/remotedesktopicon.png)

2. В колонке удаленного рабочего стола щелкните __Подключить__, чтобы подключиться к головному узлу кластера. При появлении запроса используйте имя пользователя удаленного рабочего стола и пароль для кластера, чтобы проверить подлинность подключения.

    ![Значок подключения к удаленному рабочему столу](./media/hdinsight-debug-tez-ui/remotedesktopconnect.png)

    > [AZURE.NOTE] Если вы подключение к удаленному рабочему столу не включено, укажите имя пользователя, пароль и дату окончания срока действия, а затем выберите __Включить__, чтобы включить подключение. После его включения выполните предыдущие шаги для подключения к удаленному рабочему столу.

3. Затем на удаленном рабочем столе откройте Internet Explorer, щелкните значок шестеренки в правом верхнем углу браузера и выберите __Параметры режима представления совместимости__.

4. В нижней части __Параметры просмотра в режиме представления совместимости__ снимите флажок __Отображать сайты интрасети в режиме совместимости__ и __Использовать списки совместимости Майкрософт__, а затем нажмите кнопку __Закрыть__.

5. Запустите Internet Explorer и перейдите на страницу http://headnodehost:8188/tezui/#/. Отобразится веб-интерфейс Tez.

    ![Пользовательский интерфейс Tez](./media/hdinsight-debug-tez-ui/tezui.png)

    После загрузки пользовательского интерфейса Tez вы увидите список DAG, которые работают в данный момент или работали в кластере. В представлении по умолчанию находятся такие столбцы, как "Имя Dag", "ИД", "Отправитель", "Состояние", "Время начала", "Время окончания", "Продолжительность", "ИД приложения" и "Очередь". Чтобы добавить дополнительные столбцы, воспользуйтесь значком шестеренки в правом углу страницы.

    Если у вас имеется только одна запись, она будет использоваться для запроса, выполненного в предыдущем разделе. При наличии нескольких записей можно выполнить поиск, введя условие поиска в полях над DAG и нажав клавишу __ВВОД__.

4. Выберите __Имя Dag__ для самой последней записи DAG. Появятся сведения о DAG, а также возможность скачивания ZIP-архива JSON-файлов, содержащих информацию о DAG.

    ![Сведения о DAG](./media/hdinsight-debug-tez-ui/dagdetails.png)

5. Над разделом __Сведения о DAG__ находится несколько ссылок для отображения сведений о DAG.

    * __Счетчики DAG__ — отображение сведений о счетчиках для этого DAG.
    
    * __Графическое представление__ — отображение графического представления этого DAG.
    
    * __Все вершины__ — отображение списка вершин в этом DAG.
    
    * __Все задачи__ — отображение списка задач для всех вершин в этом DAG.
    
    * __Все попытки выполнения задач__ — отображение сведений о попытках выполнения задач для этого DAG.
    
    > [AZURE.NOTE] При просмотре столбцов "Вершины", "Задачи" и "Попытки выполнения задач" обратите внимание на ссылки для просмотра __счетчиков__ и __просмотра или загрузки журналов__ для каждой строки.

    Если при выполнении задания произошел сбой, в столбце "Сведения о DAG" будет отображаться состояние FAILED (Ошибка), а также ссылки на сведения о неудачной задаче. Под сведениями о DAG будут отображаться диагностические данные.

7. Выберите __Графическое представление__. Появится графическое представление DAG. Помещайте указатель мыши над каждой вершиной в представлении, чтобы получить о ней сведения.

    ![Графическое представление](./media/hdinsight-debug-tez-ui/dagdiagram.png)

8. Если щелкнуть вершину, загрузятся __сведения о вершине__ для этого элемента. Щелкните вершину __Map 1__, чтобы вывести подробные сведения для этого элемента. Щелкните __Подтвердить__ для подтверждения навигации.

    ![Сведения о вершинах](./media/hdinsight-debug-tez-ui/vertexdetails.png)

9. Обратите внимание, что в верхней части страницы находятся ссылки, связанные с вершинами и задачами.

    > [AZURE.NOTE] Эту страницу также можно открыть другим способом: вернитесь к столбцу __Сведения о DAG__, выберите __Сведения о вершине__, а затем вершину __Map 1__.

    * __Счетчики вершины__ — отображение сведений о счетчиках для этой вершины.
    
    * __Задачи__ — отображение задач для этой вершины.
    
    * __Попытки выполнения задач__ — отображение сведений о попытках выполнения задач для этой вершины.
    
    * __Источники и приемники__ — отображение источников и приемников данных для этой вершины.

    > [AZURE.NOTE] Как и в предыдущем меню, можно прокрутить отображение столбцов "Задачи", "Попытки выполнения задач" и "Источники и приемники" для отображения ссылок на дополнительные сведения для каждого элемента.

10. Выберите __Задачи__, а затем элемент с именем __00_000000_\_. Откроется окно __Сведения о задаче__ для этой задачи. В этом окне можно просмотреть __счетчики задачи__ и __попытки выполнения задачи\_\_.

    ![Сведения о задаче](./media/hdinsight-debug-tez-ui/taskdetails.png)

##Дальнейшие действия

Теперь, когда вы поняли, как работать с представлением Tez, узнайте больше об [использовании Hive в HDInsight](hdinsight-use-hive.md).

Более подробные технические сведения о Tez см. на [странице Tez на сайте Hortonworks](http://hortonworks.com/hadoop/tez/).

<!---HONumber=AcomDC_0720_2016-->