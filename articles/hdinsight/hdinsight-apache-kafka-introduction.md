---
title: "Основные сведения об Apache Kafka в Azure HDInsight | Документация Майкрософт"
description: "Данные об Apache Kafka в HDInsight: предназначение, выполняемые функции, а также сведения о том, где найти примеры и информацию по началу работы."
services: hdinsight
documentationcenter: 
author: Blackmist
manager: jhubbard
editor: cgronlun
ms.assetid: f284b6e3-5f3b-4a50-b455-917e77588069
ms.service: hdinsight
ms.custom: hdinsightactive
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 09/07/2017
ms.author: larryfr
ms.translationtype: HT
ms.sourcegitcommit: 2c6cf0eff812b12ad852e1434e7adf42c5eb7422
ms.openlocfilehash: 39234ca792983178cfd4304e001271ea30e28ae6
ms.contentlocale: ru-ru
ms.lasthandoff: 09/13/2017

---
# <a name="introducing-apache-kafka-on-hdinsight-preview"></a>Введение в Apache Kafka в HDInsight (предварительная версия)

[Apache Kafka](https://kafka.apache.org) — это распределенная платформа потоковой передачи с открытым исходным кодом, которую можно использовать для создания конвейеров и приложений потоковой передачи данных в режиме реального времени. Kafka также предоставляет функцию брокера сообщений, подобную очереди сообщений, с помощью которой можно выполнять публикацию и подписываться на именованные потоки данных. Kafka в HDInsight предоставляет управляемую, высокомасштабируемую службу с высоким уровнем доступности в облаке Microsoft Azure.

## <a name="why-use-kafka-on-hdinsight"></a>Преимущества Apache Kafka в HDInsight

Kafka предоставляет следующие возможности.

* Модель обмена сообщениями по схеме "публикация — подписка". Kafka предоставляет API производителя для публикации записей в разделе Kafka. При подписке на раздел используется API пользователя.

* Потоковая обработка. Kafka часто используется с Apache Storm или Spark для потоковой обработки в режиме реального времени. В Kafka 0.10.0.0 (HDInsight версии 3.5) представлен API, позволяющий создавать решения для потоковой передачи без использования Storm или Spark.

* Горизонтальное масштабирование. В Kafka потоки разделяются между узлами в кластере HDInsight. Процессы пользователя можно связать с отдельными секциями для обеспечения балансировки нагрузки при использовании записей.

* Порядок доставки. В каждой секции записи сохраняются в потоке в том порядке, в котором они были получены. Достаточно связать один процесс пользователя с секцией — и записи будут обрабатываться в определенном порядке.

* Отказоустойчивость. Для обеспечения отказоустойчивости секции могут реплицироваться между узлами.

* Интеграция со службой "Управляемые диски Azure". Управляемые диски обеспечивают высокие показатели масштабируемости и пропускной способности для дисков, используемых виртуальными машинами в кластере HDInsight.

    Управляемые диски по умолчанию включены для Kafka в HDInsight. Число используемых дисков для каждого узла можно настроить при создании кластера HDInsight. См. дополнительные сведения об [управляемых дисках Azure](../virtual-machines/windows/managed-disks-overview.md).

    См. сведения о [настройке числа управляемых дисков и повышении степени масштабируемости для Kafka в HDInsight](hdinsight-apache-kafka-scalability.md).

## <a name="use-cases"></a>Варианты использования

* **Обмен сообщениями.** Благодаря поддержке модели обмена сообщениями по схеме "публикация — подписка" Kafka часто используется как брокер сообщений.

* **Отслеживание действий.** Kafka предоставляет возможность ведения журнала записей в определенном порядке, поэтому его можно использовать для отслеживания и повторного создания действий. Например, действий пользователя на веб-сайте или в приложении.

* **Агрегирование.** С помощью потоковой обработки можно объединить информацию из разных потоков для ее централизации в качестве оперативных данных.

* **Преобразование.** С помощью потоковой обработки можно объединять и дополнять данные из нескольких входных разделов в один или несколько выходных разделов.

## <a name="architecture"></a>Архитектура

![Конфигурация кластера Kafka](./media/hdinsight-apache-kafka-introduction/kafka-cluster.png)

На этой схеме показана стандартная конфигурация Kafka, в которой предусмотрены группы объектов-получателей, секционирование и репликация, чтобы обеспечить параллельное считывание событий и отказоустойчивость. Служба Apache ZooKeeper разработана для параллельного выполнения надежных транзакций с низкой задержкой, так как она управляет состоянием кластера Kafka. В Kafka записи хранятся в *разделах*. Записи создаются *производителями*, а используются *потребителями*. Производители извлекают записи из *брокеров* Kafka. Каждый рабочий узел в кластере HDInsight — это брокер Kafka. Для каждого объекта-получателя создается одна секция, что позволяет параллельно обрабатывать данные потоковой передачи. Репликация используется для распределения секций между узлами, чтобы предотвратить сбои узлов (брокеров). Секция, обозначенная буквой *(L)*, является ведущей (leader) в определенном разделе. Трафик производителя направляется в ведущую секцию каждого узла в зависимости от состояния, которым управляет ZooKeeper.

> [!IMPORTANT]
> В Kafka нет сведений о базовом оборудовании (стойке) в центре обработки данных Azure. Чтобы обеспечить правильное распределение секций в базовом оборудовании, см. руководство по [настройке высокого уровня доступности данных (Kafka)](hdinsight-apache-kafka-high-availability.md).

## <a name="next-steps"></a>Дальнейшие действия

Ниже приведены ссылки на статьи об использовании Apache Kafka в HDInsight.

* [Get started with Apache Kafka on HDInsight (preview)](hdinsight-apache-kafka-get-started.md) (Приступая к работе с Apache Kafka в HDInsight (предварительная версия))

* [Use MirrorMaker to create a replica of a Kafka on HDInsight cluster (preview)](hdinsight-apache-kafka-mirroring.md) (Создание реплики Kafka в кластере HDInsight с помощью MirrorMaker (предварительная версия))

* [Совместное использование Apache Kafka (предварительная версия) и Storm в HDInsight](hdinsight-apache-storm-with-kafka.md)

* [Совместное использование Apache Spark и Kafka (предварительная версия) в HDInsight](hdinsight-apache-spark-with-kafka.md)

* [Подключение к Kafka через виртуальную сеть Azure](hdinsight-apache-kafka-connect-vpn-gateway.md)
