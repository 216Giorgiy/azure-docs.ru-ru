<properties 
	pageTitle="Использование Hue с Hadoop в кластерах HDInsight на платформе Linux | Microsoft Azure" 
	description="Узнайте, как установить и использовать Hue с кластерами Hadoop в HDInsight на платформе Linux." 
	services="hdinsight" 
	documentationCenter="" 
	authors="nitinme" 
	manager="paulettm" 
	editor="cgronlun"/>

<tags 
	ms.service="hdinsight" 
	ms.workload="big-data" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="09/11/2015" 
	ms.author="nitinme"/>

# Установка и использование Hue на кластерах HDInsight Hadoop

Узнайте, как установить Hue на кластер HDInsight на платформе Linux и задействовать туннелирование для направления запросов на Hue.

## Что такое Hue

Hue — это набор веб-приложений, используемых для взаимодействия с кластером Hadoop. Hue позволяет просматривать хранилище, связанное с кластером Hadoop (WASB в случае кластеров HDInsight), выполнять задания Hive, сценарии Pig и т. д. Установив Hue на кластер HDInsight Hadoop, вы получите поддержку следующих компонентов:

* редактор Beeswax Hive,
* Pig,
* диспетчер метахранилища,
* Oozie,
* FileBrowser (связывается с контейнером WASB по умолчанию),
* обозреватель заданий.


## Установка Hue с помощью действий сценария

Для установки Hue в кластере HDInsight используется действие сценария [https://hdiconfigactions.blob.core.windows.net/linuxhueconfigactionv01/install-hue-uber-v01.sh](https://hdiconfigactions.blob.core.windows.net/linuxhueconfigactionv01/install-hue-uber-v01.sh). Этот раздел содержит указания по использованию сценария при подготовке кластера с помощью портала Azure.

> [AZURE.NOTE]Для создания кластера с помощью этого сценария также можно использовать Azure PowerShell или пакет SDK HDInsight для .NET. Дополнительную информацию об использовании этих методов см. в статье [Настройка кластеров HDInsight с помощью действий сценария](hdinsight-hadoop-customize-cluster-linux.md).

1. Начните подготовку кластера с помощью действий, описанных в статье [Подготовка кластеров HDInsight под управлением Linux](hdinsight-hadoop-provision-linux-clusters.md#portal), но не завершайте ее.

	> [AZURE.NOTE]Для установки Hue в кластерах HDInsight рекомендуется размер головного узла не менее A4 (8 ядер, 14 ГБ памяти).

2. В колонке **Необязательная конфигурация** выберите **Действия сценария** и введите следующие сведения:

	* __ИМЯ__: введите понятное имя для действия сценария.
	* __URI-АДРЕС СЦЕНАРИЯ__: https://hdiconfigactions.blob.core.windows.net/linuxhueconfigactionv01/install-hue-uber-v01.sh
	* __ГОЛОВНОЙ__: установите флажок.
	* __РАБОЧАЯ РОЛЬ__: оставьте это поле пустым.
	* __ZOOKEEPER__: оставьте это поле пустым.
	* __ПАРАМЕТРЫ__: для сценария нужен **пароль администратора кластера** в качестве параметра. Это пароль, указанный при подготовке кластера. Заключите пароль в одинарные кавычки.


3. В нижней части раздела **Действия сценария** нажмите кнопку **Выбрать**, чтобы сохранить конфигурацию. Наконец, нажмите кнопку **Выбрать** в нижней части колонки **Необязательная конфигурация**, чтобы сохранить дополнительные настройки.

4. Продолжите подготовку кластера, как описано в статье [Подготовка кластеров HDInsight под управлением Linux](hdinsight-hadoop-provision-linux-clusters.md#portal).

## Использование Hue с кластерами HDInsight

Единственным способом доступа Hue к запущенному кластеру является туннелирование SSH. Туннелирование через SSH позволяет перейти непосредственно к головному узлу кластера, на котором работает Hue. После завершения подготовки кластера выполните следующие действия, чтобы начать использовать Hue в кластере HDInsight на платформе Linux.

> [AZURE.NOTE]Далее предполагается, что вы пользуетесь браузером Firefox с установленным расширением [FoxyProxy](https://addons.mozilla.org/ru-RU/firefox/addon/foxyproxy-standard/).

1. Включите туннелирование SSH на своем настольном компьютере и настройте в Firefox использование туннеля SSH. При настройке туннелирования используйте порт, отличный от 8888.

	* Инструкции по включению туннелирования SSH на компьютере под управлением Linux см. в статье [Использование SSH с Hadoop на платформе Linux в HDInsight в Linux, Unix или OS X](hdinsight-linux-ambari-ssh-tunnel.md#usessh).
	* Инструкции по включению туннелирования SSH на компьютере под управлением Windows см. в статье [Использование SSH с Hadoop на платформе Linux в HDInsight в Windows](hdinsight-linux-ambari-ssh-tunnel.md#useputty).

	Не завершайте сеанс PuTTY.
 
2. На своем компьютере запустите браузер Firefox с настроенным расширением FoxyProxy и перейдите на портал Hue по адресу http://headnode0:8888. При первом входе в систему вам будет предложено создать учетную запись для входа на портал Hue. Эти учетные данные будут связаны только с порталом и не будут иметь отношения к учетным данным администратора или SSH, указанным при подготовке кластера.

	![Вход на портал Hue](./media/hdinsight-hadoop-hue-linux/HDI.Hue.Portal.Login.png "Ввод учетных данных на портале Hue")

### Выполнение запроса Hive

1. На портале Hue нажмите **Редакторы запросов**, а затем **Hive**, чтобы открыть редактор Hive.

	![Использование Hive](./media/hdinsight-hadoop-hue-linux/HDI.Hue.Portal.Hive.png "Использование Hive")

2. На вкладке **Помощь**, в разделе **База данных** отобразится элемент **hivesampletable**. Это пример таблицы, входящей в состав всех кластеров Hadoop в HDInsight. В правой области введите запрос и просмотрите выходные данные на нижней вкладке **Результаты**, как показано на приведенном снимке экрана.

	![Выполнение запросов Hive](./media/hdinsight-hadoop-hue-linux/HDI.Hue.Portal.Hive.Query.png "Выполнение запросов Hive")

	Для визуального представления результатов вы можете использовать вкладку **Диаграмма**.

### Просмотр хранилища кластера

1. На портале Hue в правом верхнем углу панели меню выберите **Обозреватель файлов**.

2. По умолчанию обозреватель открывается в каталоге **/user/myuser**. Щелкните косую черту непосредственно перед каталогом пользователя, чтобы перейти в корневую папку контейнера хранилища Azure, связанного с кластером.

	![Использование обозревателя файлов](./media/hdinsight-hadoop-hue-linux/HDI.Hue.Portal.File.Browser.png "Использование обозревателя файлов")

3. Щелкните правой кнопкой мыши файл или папку, чтобы отобразились доступные операции. Для передачи файлов в текущую папку используйте кнопку **Передать** в правом углу. Для создания новых файлов и папок используйте кнопку **Создать**.

> [AZURE.NOTE]Обозреватель файлов Hue может показывать содержимое только контейнера по умолчанию, связанного с кластером HDInsight. У вас не будет доступа к другим учетным записям хранения и контейнерам, которые вы могли связать с кластером. Тем не менее задания Hive будут иметь доступ ко всем дополнительным контейнерам, связанным с кластером. Например, если в редакторе Hive ввести команду `dfs -ls wasb://newcontainer@mystore.blob.core.windows.net`, отобразится содержимое дополнительных контейнеров. В этой команде элемент **newcontainer** не является используемым по умолчанию контейнером, который связан с кластером.


## Важные сведения

1. Сценарий, который использовался для установки HUE, устанавливает этот набор веб-приложений только на головной узел HEADNODE0 кластера.

2. Во время установки некоторые службы Hadoop (HDFS, YARN, MR2, Oozie) перезапускаются для обновления конфигурации. После того как сценарий завершает установку Hue, для запуска прочих служб Hadoop иногда требуется некоторое время. Это может повлиять на первоначальную производительность Hue. После запуска всех служб набор Hue полностью готов к работе.

3.	Hue не может работать с заданиями Tez, которые по умолчанию используются в Hive. Если в качестве подсистемы выполнения в Hive вы хотите задействовать MapReduce, измените сценарий, добавив в него следующую команду.

		set hive.execution.engine=mr;

4.	Кластеры под управлением Linux могут быть настроены таким образом, что службы запускаются на узле HEADNODE0, а диспетчер ресурсов — на узле HEADNODE1. При таком сценарии попытка использования Hue для просмотра сведений о ЗАПУЩЕННЫХ заданиях на кластере может привести к ошибкам (показаны ниже). Тем не менее после завершения заданий вы можете просматривать сведения о них.

	![Ошибка портала Hue](./media/hdinsight-hadoop-hue-linux/HDI.Hue.Portal.Error.png "Ошибка портала Hue")

	Это известная проблема. В качестве решения вы можете изменить Ambari, чтобы активный диспетчер ресурсов запускался также на узле HEADNODE0.

5.	Hue понимает WebHDFS, если кластеры HDInsight используют хранилище Azure с приставкой `wasb://` в начале пути. Таким образом, пользовательский сценарий, используемый со сценарием действия, устанавливает службу WebWasb, совместимую с WebHDFS и предназначенную для обмена данными с WASB. Поэтому, несмотря на то что в некоторых местах на портале Hue используется надпись HDFS (например, при наведении указателя мыши на **Обозреватель файлов**), ее следует читать как WASB.


## Дальнейшие действия

- Статья [Установка и использование Spark в кластерах HDInsight](hdinsight-hadoop-spark-install-linux.md) содержит указания по применению настройки кластера для установки и использования Spark в кластерах HDInsight Hadoop. Spark — это платформа параллельной обработки с открытым исходным кодом, которая поддерживает обработку в памяти, чтобы повысить производительность приложений для анализа больших объемов данных.

- [Установка Giraph в кластерах HDInsight](hdinsight-hadoop-giraph-install-linux.md). Используйте настройки кластера для установки Giraph в кластерах HDInsight Hadoop. Giraph позволяет выполнять обработку графов с использованием Hadoop и может использоваться с Azure HDInsight.

- [Установка Solr в кластерах HDInsight](hdinsight-hadoop-solr-install-linux.md). Используйте настройки кластера для установки Solr в кластерах HDInsight Hadoop. Solr позволяет вести расширенный поиск по хранимым данным.

- [Установка R в кластерах HDInsight](hdinsight-hadoop-r-scripts-linux.md). Используйте настройки кластера для установки R в кластерах HDInsight Hadoop. R — это открытый язык программирования и свободная программная среда для статистических вычислений. Он предоставляет сотни встраиваемых статистических функций и собственный язык программирования, который сочетает аспекты функционального и объектно-ориентированного программирования. Этот проект также обеспечивает обширные графические возможности.

[powershell-install-configure]: install-configure-powershell-linux.md
[hdinsight-provision]: hdinsight-provision-clusters-linux.md
[hdinsight-cluster-customize]: hdinsight-hadoop-customize-cluster-linux.md
[hdinsight-install-spark]: hdinsight-hadoop-spark-install-linux.md
 

<!---HONumber=Sept15_HO3-->