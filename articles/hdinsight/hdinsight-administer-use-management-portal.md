<properties
	pageTitle="Управление кластерами Hadoop в HDInsight с помощью портала предварительной версии | Microsoft Azure"
	description="Сведения об управлении службой HDInsight. Создайте кластер HDInsight, откройте интерактивную консоль JavaScript и командную консоль Hadoop."
	services="hdinsight"
	documentationCenter=""
	tags="azure-portal"
	authors="mumian"
	manager="paulettm"
	editor="cgronlun"/>

<tags
	ms.service="hdinsight"
	ms.workload="big-data"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="08/11/2015"
	ms.author="jgao"/>

# Управление кластерами Hadoop в HDInsight с помощью портала предварительной версии Azure

[AZURE.INCLUDE [selector](../../includes/hdinsight-portal-management-selector.md)]

С помощью [портала предварительной версии Azure][azure-portal] можно подготовить кластеры Hadoop в HDInsight, изменить пароль пользователя Hadoop и включить протокол удаленного рабочего стола (RDP), чтобы получить доступ к командной консоли Hadoop в кластере.

[AZURE.INCLUDE [hdinsight-azure-preview-portal](../../includes/hdinsight-azure-preview-portal.md)]

* [Управление кластерами Hadoop в HDInsight с помощью портала Azure](hdinsight-administer-use-management-portal-v1.md)

> [AZURE.NOTE]Действия, описанные в этом документе, относятся только к работе с кластерами Hadoop под управлением Windows. Информацию о работе с кластерами под управлением Linux см. в статье [Управление кластерами Hadoop в HDInsight с помощью портала предварительной версии Azure](hdinsight-administer-use-portal-linux.md).



> [AZURE.NOTE]Помимо портала предварительной версии доступны и другие средства администрирования HDInsight.
>
> - [Администрирование HDInsight с помощью Azure PowerShell](hdinsight-administer-use-powershell.md)
> - [Администрирование HDInsight с помощью CLI Azure](hdinsight-administer-use-command-line.md)

**Предварительные требования**

Перед началом работы с этой статьей необходимо иметь следующее:

- **Подписка Azure.**. См. [Бесплатная пробная версия Azure](http://azure.microsoft.com/documentation/videos/get-azure-free-trial-for-testing-hadoop-in-hdinsight/).
- **Учетная запись хранения Azure**. Кластер HDInsight использует контейнер хранилища больших двоичных объектов Azure в качестве файловой системы по умолчанию. Дополнительные сведения о том, каким образом хранилище больших двоичных объектов Azure обеспечивает удобную работу с кластерами HDInsight, см. в разделе [Использование хранилища больших двоичных объектов Azure с HDInsight](../hdinsight-use-blob-storage.md). Сведения о создании учетной записи хранения Azure см. в разделе [Создание учетной записи хранения](../storage-create-storage-account.md).


##Подготовка кластеров HDInsight к работе

Инструкции по подготовке с помощью предварительной версии портала см. в статье [Подготовка кластеров HDInsight](hdinsight-provision-clusters.md#portal).

##Настройка подготовки кластеров HDInsight

HDInsight работает со множеством компонентов Hadoop. Список проверенных и поддерживаемых компонентов см. в разделе [Какая версия Hadoop включена в Azure HDInsight?](hdinsight-component-versioning.md). Вы можете настраивать HDInsight с использованием одного из следующих вариантов.

- Используйте действие скрипта для запуска пользовательских скриптов, которые могут настраивать кластер для изменения конфигурации кластера или для установки настраиваемых компонентов, таких как Giraph или Solr. Дополнительные сведения см. в разделе [Настройка кластера HDInsight с помощью действия скрипта](hdinsight-hadoop-customize-cluster.md).
- Используйте параметры настройки кластера в Azure PowerShell или в пакете SDK для HDInsight .NET во время подготовки кластера. Такие изменения конфигурации сохраняются на протяжении всего срока существования кластера и не попадают под воздействие операций повторного создания образа узла, которые периодически выполняет платформа Azure в рамках обслуживания. Дополнительные сведения об использовании параметров настройки кластера см. в разделе [Подготовка кластеров HDInsight](hdinsight-provision-clusters.md).
- Некоторые собственные компоненты Java, такие как Mahout и Cascading, могут выполняться в кластере как JAR-файлы. Эти JAR-файлы можно распространить в хранилище больших двоичных объектов Azure и отправить в кластеры HDInsight с помощью механизмов отправки заданий Hadoop. Дополнительные сведения см. в разделе [Отправка заданий Hadoop программными средствами](hdinsight-submit-hadoop-jobs-programmatically.md).


	>[AZURE.NOTE]Если при развертывании или вызове JAR-файлов в кластерах HDInsight возникают проблемы, обратитесь в [службу поддержки Майкрософт](http://azure.microsoft.com/support/options/).

	> Компонент Cascading не поддерживается службой HDInsight и на него не распространяется техническая поддержка Майкрософт. Списки поддерживаемых компонентов см. в разделе [Новые возможности версий кластеров, предоставляемых HDInsight](hdinsight-component-versioning.md).


Установка пользовательского программного обеспечения в кластере с помощью подключения к удаленному рабочему столу не поддерживается. Не храните файлы на дисках головного узла, поскольку в случае повторного создания кластеров эти файлы будут потеряны. Рекомендуется хранить файлы в хранилище больших двоичных объектов Azure. Хранилище BLOB-объектов остается неизменным.

## Знакомство с интерфейсом портала кластера

**Доступ к кластеру**

1. Войдите на [портал предварительной версии][azure-portal].
2. Щелкните **Просмотреть все** в меню слева, чтобы открыть колонку **Обзор**.
3. Щелкните **Кластеры HDInsight**, чтобы открыть колонку **Кластеры HDInsight**.
4. Выберите один из кластеров из списка, чтобы открыть колонку кластера.

	![Портал HDInsight](./media/hdinsight-administer-use-management-portal/hdinsight.portal.cluster.blade.png)

5. Щелкните **Параметры**, чтобы просмотреть сведения о конфигурации и настроить кластер:

	![Параметры кластера портала HDInsight](./media/hdinsight-administer-use-management-portal/hdinsight.portal.cluster.settings.png)

	|Настройка|Описание|
	|-----|-----|
	|Свойства| Отображение свойств кластера.|
	|Ключи хранилища Azure| Отображение сведений об учетной записи хранения Azure по умолчанию. |
	|Вход в кластер| Предоставление и отмена доступа к веб-службам HTTP и настройка сведений о данных для входа в кластер. |
	|Внешние метахранилища| Отображение сведений метахранилища Hive/Oozie.|
	|Масштабирование кластера| Увеличение или уменьшение количества рабочих узлов кластера.|
	|удаленный рабочий стол;| Включение или отключение подключения к удаленному рабочему столу, подключение к кластеру через удаленный рабочий стол.|


##Предоставление и отмена доступа к службам HTTP

В кластерах HDInsight имеются следующие веб-службы HTTP (все эти службы имеют конечные точки RESTful):

- ODBC
- JDBC
- Ambari
- Oozie
- Templeton

По умолчанию эти службы предоставляются для доступа. Вы можете отменять и предоставлять доступ на портале Azure.

>[AZURE.NOTE]Предоставляя или отменяя доступ, вы сбрасываете имя пользователя и пароль кластера.

**Предоставление и отмена доступа к веб-службам HTTP**

1. Войдите на [портал предварительной версии][azure-portal].
2. Щелкните **Просмотреть все** в меню слева, щелкните **Кластеры HDInsight** и выберите имя кластера.
3. Щелкните **Параметры** в верхнем меню и выберите **Вход в кластер**.
5. Выберите **ВКЛ.** или **ВЫКЛ.** для параметра **Доступ для входа в кластер**.  
6. В полях **Имя пользователя для входа в кластер** и **Пароль для входа в кластер** введите новое имя пользователя и пароль (соответственно) для кластера.
7. Щелкните **СОХРАНИТЬ**.

	![hdinsight, предоставление, отмена, http, веб-служба, доступ](./media/hdinsight-administer-use-management-portal/hdinsight.portal.change.username.password.png)


Это также можно сделать с помощью командлетов Azure PowerShell.

- Grant-AzureHDInsightHttpServicesAccess
- Revoke-AzureHDInsightHttpServicesAccess

См. раздел [Администрирование HDInsight с помощью Azure PowerShell](hdinsight-administer-use-powershell.md)

##Изменение имени пользователя и пароля для кластера HDInsight
Кластер HDInsight может иметь две учетные записи пользователя. Учетная запись пользователя кластера HDInsight создается в процессе подготовки. Вы также можете создать учетную запись пользователя RDP для доступа к кластеру через RDP. См. [Включение удаленного рабочего стола](#connect-to-hdinsight-clusters-by-using-rdp).

**Изменение имени пользователя и пароля для кластера HDInsight**

1. Войдите на [портал предварительной версии][azure-portal].
2. Щелкните **Просмотреть все** в меню слева, щелкните **Кластеры HDInsight** и выберите имя кластера.
3. Щелкните **Параметры** в верхнем меню и выберите **Вход в кластер**.
4. Измените **Имя пользователя для входа в кластер** и/или **Пароль для входа в кластер** и нажмите кнопку **Сохранить**.

	![hdinsight, изменение, пользователь кластера, имя пользователя, пароль, http пользователь](./media/hdinsight-administer-use-management-portal/hdinsight.portal.change.username.password.png)

##Масштабирование кластеров
Масштабирование кластера позволяет изменить количество рабочих узлов в кластере, который работает под управлением Azure HDInsight. При этом не требуется повторно создавать кластер.

>[AZURE.NOTE]Поддерживаются только кластеры HDInsight версии 3.1.3 или более поздней. Если вы не знаете версию кластера, см. страницу «Свойства». См. раздел [Знакомство с интерфейсом портала кластера](hdinsight-adminster-use-management-portal/#Get-familiar-with-the-cluster-portal-interface).

Ниже представлены возможности, связанные с изменением количества узлов данных в кластере каждого типа, поддерживаемого в HDInsight.

- Hadoop

	Вы можете легко увеличить количество рабочих узлов в работающем кластере Hadoop. Это не помешает обработке заданий в состоянии ожидания и выполнения. В ходе выполнения операции можно также отправлять новые задания. Сбои операции масштабирования обрабатываются корректно, поэтому кластер всегда пребывает в функциональном состоянии.

	Если уменьшить масштаб кластера Hadoop, сократив количество узлов данных, некоторые службы в нем будут перезапущены. Это приведет к сбою всех выполняющихся и ожидающих заданий при завершении операции масштабирования. Однако после завершения операции вы можете повторно отправить задания.

- HBase

	Вы можете с легкостью добавлять и удалять узлы данных в работающем кластере HBase. Балансировка региональных серверов выполняется автоматически в течение нескольких минут после завершения операции масштабирования. Но их также можно сбалансировать вручную, выполнив вход в головной узел кластера и выполнив следующие команды в окне командной строки:

		>pushd %HBASE_HOME%\bin
		>hbase shell
		>balancer

	Дополнительные сведения об использовании оболочки HBase см.
- Storm

	Вы можете с легкостью добавлять и удалять узлы данных в работающем кластере Storm. Но после успешного завершения операции масштабирования потребуется повторная балансировка топологии.

	Повторную балансировку можно выполнить двумя способами:

	* с помощью веб-интерфейса Storm;
	* с помощью программы командной строки.

	Дополнительную информацию см. в [документации по Apache Storm](http://storm.apache.org/documentation/Understanding-the-parallelism-of-a-Storm-topology.html).

	В кластере HDInsight доступен веб-интерфейс Storm.

	![hdinsight, storm, масштабирование, перераспределение](./media/hdinsight-administer-use-management-portal/hdinsight.portal.scale.cluster.storm.rebalance.png)

	Ниже приведен пример использования команды CLI для повторной балансировки топологии Storm:

		## Reconfigure the topology "mytopology" to use 5 worker processes,
		## the spout "blue-spout" to use 3 executors, and
		## the bolt "yellow-bolt" to use 10 executors

		$ storm rebalance mytopology -n 5 -e blue-spout=3 -e yellow-bolt=10


**Масштабирование кластеров**

1. Войдите на [портал предварительной версии][azure-portal].
2. Щелкните **Просмотреть все** в меню слева, щелкните **Кластеры HDInsight** и выберите имя кластера.
3. Щелкните **Параметры** в верхнем меню и выберите **Масштабировать кластер**.
4. Введите **Количество рабочих узлов**. Максимальное количество узлов кластера зависит от типа подписки Azure. Чтобы увеличить лимит, обратитесь в службу поддержки по вопросам выставления счетов. Сведения о затратах будут отражать внесенные изменения количества узлов.


	![hdinsight, hadoop, hbase, storm, spark, масштабирование](./media/hdinsight-administer-use-management-portal/hdinsight.portal.scale.cluster.png)



##Подключение к кластерам HDInsight с помощью RDP

Учетные данные, указанные при создании кластера, предоставляют доступ к службам в кластере, но не к самому кластеру через удаленный рабочий стол. Вы можете включить доступ к удаленному рабочему столу во время или после подготовки кластера. Инструкции о включении удаленного рабочего стола во время подготовки см. в статье [Подготовка кластера HDInsight](hdinsight-provision-clusters.md).

**Включение удаленного рабочего стола**

1. Войдите на [портал предварительной версии][azure-portal].
2. Щелкните **Просмотреть все** в меню слева, щелкните **Кластеры HDInsight** и выберите имя кластера.
3. Щелкните **Параметры** в верхнем меню и выберите **Удаленный рабочий стол**.
4. Введите значения в поля **Срок действия**, **Имя пользователя удаленного рабочего стола** и **Пароль удаленного рабочего стола**, а затем нажмите кнопку **Включить**.

	![hdinsight, включить, отключить, настроить, удаленный рабочий стол](./media/hdinsight-administer-use-management-portal/hdinsight.portal.remote.desktop.png)

	Для поля «Срок действия» значением по умолчанию является неделя.
> [AZURE.NOTE]Можно также включить удаленный рабочий стол в кластере с помощью пакета SDK для HDInsight .NET. Используйте метод **EnableRdp** в клиентском объекте HDInsight следующим образом: **client.EnableRdp(имя\_кластера, расположение, "rdpuser", "rdppassword", DateTime.Now.AddDays(6))**. Аналогично, чтобы отключить удаленный рабочий стол в кластере, можно использовать **client.DisableRdp(имя\_кластера, расположение)**. Дополнительные сведения об этих методах см. в разделе [Справочник по пакету SDK для HDInsight .NET](http://go.microsoft.com/fwlink/?LinkId=529017). Это применимо только для кластеров HDInsight под управлением Windows.

**Подключение к кластеру с помощью RDP**

1. Войдите на [портал предварительной версии][azure-portal].
2. Щелкните **Просмотреть все** в меню слева, щелкните **Кластеры HDInsight** и выберите имя кластера.
3. Щелкните **Параметры** в верхнем меню и выберите **Удаленный рабочий стол**.
4. Нажмите кнопку **Подключить**, а затем следуйте инструкциям. Если кнопка «Подключить» неактивна, сначала активируйте ее. Убедитесь, что вы используете имя пользователя и пароль удаленного рабочего стола. Нельзя использовать учетные данные пользователя кластера.

##Открытие командной строки Hadoop.

Чтобы подключиться к кластеру с помощью удаленного рабочего стола и использовать командную строку Hadoop, необходимо сначала включить доступ к кластеру с удаленного рабочего стола, как описано в предыдущем разделе.

**Открытие командной строки Hadoop.**

1. Подключитесь к кластеру с помощью удаленного рабочего стола.
8. На рабочем столе дважды щелкните элемент **Командная строка Hadoop**.

	![HDI.HadoopCommandLine][image-hadoopcommandline]


	Дополнительные сведения о командах Hadoop см. в [справочнике по командам Hadoop](http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/CommandsManual.html).

На предыдущем снимке экрана в имя папки включен номер версии Hadoop. Номер версии может меняться в зависимости от версии компонентов Hadoop, установленных в кластере. Для ссылки на эти папки можно использовать переменные среды Hadoop. Например:

	cd %hadoop_home%
	cd %hive_home%
	cd %hbase_home%
	cd %pig_home%
	cd %sqoop_home%
	cd %hcatalog_home%


##Дальнейшие действия
Из этой статьи вы узнали, как создать кластер HDInsight с помощью портала предварительной версии и как открыть средство командной строки Hadoop. Для получения дополнительных сведений ознакомьтесь со следующими статьями:

* [Администрирование HDInsight с помощью Azure PowerShell](hdinsight-administer-use-powershell.md)
* [Администрирование HDInsight с помощью CLI Azure](hdinsight-administer-use-command-line.md)
* [Подготовка кластеров HDInsight к работе](hdinsight-provision-clusters.md)
* [Отправка заданий Hadoop в HDInsight](hdinsight-submit-hadoop-jobs-programmatically.md)
* [Начало работы с Azure HDInsight](../hdinsight-get-started.md)
* [Какая версия Hadoop включена в Azure HDInsight?](hdinsight-component-versioning.md)

[azure-portal]: https://portal.azure.com
[image-cluster-quickcreate]: ./media/hdinsight-administer-use-management-portal/HDI.QuickCreateCluster.png
[image-cluster-landing]: ./media/hdinsight-administer-use-management-portal/HDI.ClusterLanding.PNG "Целевая страница кластера"
[image-hdi-create-rpd-user]: ./media/hdinsight-administer-use-management-portal/HDI.CreateRDPUser.png
[image-hadoopcommandline]: ./media/hdinsight-administer-use-management-portal/HDI.HadoopCommandLine.PNG "Командная строка Hadoop"
[image-hdiclustercreate-uploadcert]: ./media/hdinsight-administer-use-management-portal/HDI.ClusterCreate.UploadCert.png

<!---HONumber=August15_HO8-->