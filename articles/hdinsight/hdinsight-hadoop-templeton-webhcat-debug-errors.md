<properties
 pageTitle="Понимание и устранение ошибок WebHCat в HDInsight"
 description="Узнайте о наиболее распространенных ошибках, возвращаемых WebHCat в HDInsight, и о способах их устранения."
 services="hdinsight"
 documentationCenter=""
 authors="Blackmist"
 manager="paulettm"
 editor="cgronlun"
 tags="azure-portal"/>

<tags
 ms.service="hdinsight"
 ms.devlang="na"
 ms.topic="article"
 ms.tgt_pltfrm="na"
 ms.workload="big-data"
 ms.date="06/04/2015"
 ms.author="larryfr"/>

#Понимание и устранение ошибок, полученных из WebHCat (Templeton) в HDInsight

При использовании сервиса WebHCat (ранее известного как Templeton) для работы с HDInsight могут возникнуть ошибки. Этот документ содержит указания о наиболее распространенных ошибках, причинах их возникновения и способах их устранения.

##Что такое WebHCat?

[WebHCat](https://cwiki.apache.org/confluence/display/Hive/WebHCat) — это API-интерфейс REST для [HCatalog](https://cwiki.apache.org/confluence/display/Hive/HCatalog), уровень управления таблицей и хранилищем данных для Hadoop. WebHCat активирован по умолчанию в кластерах HDInsight и используется различными средствами для отправки заданий, получения состояния задания и т. д. без входа в кластер.

##Изменение конфигурации

> [AZURE.IMPORTANT]Некоторые из ошибок, приведенных в этом документе, возникают из-за превышения установленного максимума. Если на этапе разрешения ошибки упоминается, что можно изменить значение, необходимо сделать одно из следующих действий для внесения изменений:

* Для кластеров на основе **Windows**: используйте Action Script, чтобы настроить значение во время создания кластера. Для получения дополнительных сведений обратитесь к разделу [Разработка сценариев Action Script](hdinsight-hadoop-script-actions.md).

* Для кластеров на основе **Linux**: используйте Ambari (онлайн версию или API-Интерфейс REST) для изменения значения. Для получения дополнительных сведений обратитесь к разделу [Управления HDInsight с помощью Ambari](hdinsight-hadoop-manage-ambari.md)

###Конфигурация по умолчанию

Ниже приведены значения конфигурации по умолчанию, которые могут повлиять на производительность WebHCat или привести к ошибкам при превышении этих значений.

| Настройка | Действие | Значение по умолчанию |
| ------- | ------------ | ------------- |
| [yarn.scheduler.capacity.maximum-applications][maximum-applications] | Максимальное количество заданий, которые могут быть активны одновременно (в состоянии ожидания или выполнения) | 10 000 |
| [templeton.exec.max-procs][max-procs] | Максимальное число запросов, которые могут обрабатываться параллельно | 20 |
| [mapreduce.jobhistory.max-age-ms][max-age-ms] | Число дней, в течение которых будет храниться журнал заданий | 7 дней |

##Слишком много запросов

**Код состояния HTTP**: 429

| Причина: | Способы устранения: |
| ----- | ---------- |
| Превышено максимальное число одновременных запросов, обслуживаемых WebHCat в минуту (по умолчанию 20) | Уменьшить рабочую нагрузку, чтобы убедиться, что не будет отправлено больше, чем максимальное количество параллельных запросов, или увеличить количество одновременных запросов путем изменения `templeton.exec.max-procs`. См. [Изменение конфигурации](#modifying-configuration) для получения дополнительных сведений |

##Сервер недоступен

**Код состояния HTTP**: 503

| Причина: | Способы устранения: |
| ---------------- | ------------------- |
| Обычно это происходит во время обработки отказа между основным и дополнительным узлом HeadNode кластера | Подождите две минуты, а затем повторите операцию |

##Неправильный запрос содержимого: не удалось найти задание

**Код состояния HTTP**: 400

| Причина: | Способы устранения: |
| ---------------- | ------------------- |
| Сведения о задании были удалены утилитой очистки журнала заданий | Срок хранения по умолчанию для журнала заданий составляет 7 дней. Это можно изменить путем изменения `mapreduce.jobhistory.max-age-ms`. См. [Изменение конфигурации](#modifying-configuration) для получения дополнительных сведений |
| Задание был прекращено из-за отработки отказа | Повторить попытку отправки задания через две минуты. |
| Был использован недопустимый идентификатор задания | Проверьте правильность идентификатора задания |

##Недопустимый шлюз

**Код состояния HTTP**: 502

| Причина: | Способы устранения: |
| ---------------- | ------------------- |
| Внутренний сбор мусора происходит в процессе WebHCat | Дождитесь завершения процесса сбора мусора или перезапустите службу WebHCat |
| Превышено время ожидания ответа от службы диспетчера ресурсов. Это может произойти, когда число активных приложений становится выше заданного максимума (по умолчанию 10 000) | Дождитесь завершения выполняемых заданий или увеличьте ограничение на количество одновременно выполняемых заданий, изменив `yarn.scheduler.capacity.maximum-applications`. См. [Изменение конфигурации](#modifying-configuration) для получения дополнительных сведений |
| При попытке получить все задания командой [GET/Jobs](https://cwiki.apache.org/confluence/display/Hive/WebHCat+Reference+Jobs) при `Fields` имеющем значение `*` | Не пытайтесь получить *все* сведения о задании, вместо этого используйте `jobid` для получения сведений только о тех заданиях, идентификатор которых больше определенного значения. Или не используйте `Fields` |
| Служба WebHCat не работает во время отработки отказа узла HeadNode | Подождите 2 минуты и повторите попытку |
| В настоящий момент более 500 заданий, отправленных через WebHCat, находятся в режиме ожидания | Дождитесь завершения текущих заданий, находящихся в режиме ожидания, перед отправкой новых заданий |

[maximum-applications]: http://docs.hortonworks.com/HDPDocuments/HDP2/HDP-2.1.3/bk_system-admin-guide/content/setting_application_limits.html
[max-procs]: https://hive.apache.org/javadocs/hcat-r0.5.0/configuration.html
[max-age-ms]: http://docs.hortonworks.com/HDPDocuments/HDP2/HDP-2.0.6.0/ds_Hadoop/hadoop-mapreduce-client/hadoop-mapreduce-client-core/mapred-default.xml
 

<!---HONumber=August15_HO8-->