<properties 
	pageTitle="Обзор интерфейса REST API служб мультимедиа - Azure" 
	description="Обзор интерфейса REST API служб мультимедиа" 
	services="media-services" 
	documentationCenter="" 
	authors="Juliako" 
	manager="dwrede" 
	editor=""/>

<tags 
	ms.service="media-services" 
	ms.workload="media" 
	ms.tgt_pltfrm="na" 
	ms.devlang="dotnet" 
	ms.topic="article" 
	ms.date="02/02/2015" 
	ms.author="juliako"/>


# Обзор интерфейса REST API служб мультимедиа 

Службы мультимедиа Microsoft Azure - это службы, которые принимают HTTP-запросы на основе OData и могут отвечать с использованием подробного формата JSON или atom+pub. Так как службы мультимедиа соответствуют правилам проектирования Azure, для них предусмотрен набор обязательных HTTP-заголовков, которые каждый клиент должен использовать при подключении к службам мультимедиа, а также набор дополнительных заголовков, которые можно использовать при необходимости. В следующих разделах описываются заголовки и HTTP-команды, которые можно использовать при создании запросов и получения ответов из служб мультимедиа.


## Стандартные заголовки HTTP-запроса, поддерживаемые службами мультимедиа

Для каждого вызова, отправляемого в службы мультимедиа, предусмотрен набор обязательных заголовков, которые необходимо включить в запрос, а также набор дополнительных заголовков, которые можно включить при необходимости. Обязательные заголовки перечислены в следующей таблице:


<table border="1">
<tr><th>Заголовок</th><th>Тип</th><th>Значение</th></tr>
<tr><td>Авторизация</td><td>Носитель</td><td>Носитель - единственный принимаемый механизм авторизации. Значение должно содержать маркер доступа, предоставленный службой ACS.</td></tr>
<tr><td>x-ms-version</td><td>Decimal</td><td>2,9</td></tr>
<tr><td>DataServiceVersion</td><td>Decimal</td><td>3,0</td></tr>
<tr><td>MaxDataServiceVersion</td><td>Decimal</td><td>3,0</td></tr>
</table><br/>


>[AZURE.NOTE] Так как службы мультимедиа используют OData для предоставления своего базового репозитория метаданных ресурсов через REST API, заголовки DataServiceVersion и MaxDataServiceVersion должны быть включены во все запросы. Тем не менее, если они отсутствуют, в настоящее время в службах мультимедиа предполагается, что для DataServiceVersion используется значение 3.0.

Ниже приведен набор дополнительных заголовков.

<table border="1">
<tr><th>Заголовок</th><th>Тип</th><th>Значение</th></tr>
<tr><td>Дата</td><td>RFC 1123 date</td><td>Метка времени запроса</td></tr>
<tr><td>Принять</td><td>Тип содержимого</td><td>Запрошенный тип содержимого для ответа, например:
<ul><li>application/json;odata=verbose</li><li>application/atom+xml</li></ul></br> Ответы могут принадлежать к разным типам содержимого, например при получении больших двоичных объектов полезными данными в успешном ответе будет поток больших двоичных объектов.</td></tr>
<tr><td>Accept-Encoding</td><td>Gzip, deflate</td><td>Кодировка GZIP и, в соответствующих случаях, DEFLATE. Примечание. Для больших ресурсов службы мультимедиа могут пропустить этот заголовок и вернуть несжатые данные.
</td></tr>
<tr><td>Accept-Language</td><td>"en", "ru" и т. д.</td><td>Указывает предпочитаемый язык для ответа.</td></tr>
<tr><td>Accept-Charset</td><td>Тип кодировки, например "UTF-8"</td><td>По умолчанию - UTF-8.</td></tr>
<tr><td>X-HTTP-Method</td><td>Метод HTTP</td><td>Позволяет клиентам или брандмауэрам, которые не поддерживают методы HTTP, например PUT или DELETE, использовать эти методы, туннелированные посредством вызова GET.</td></tr>
<tr><td>Content-Type</td><td>Тип содержимого</td><td>Тип содержимого текста запросов PUT или POST.</td></tr>
<tr><td>client-request-id</td><td>Строковый</td><td>Определяемое вызывающим объектом значение, по которому можно идентифицировать данный запрос. Если это значение указано, оно будет включено в ответное сообщении в качестве способа сопоставления запроса. <br/><br/>
<b>Важно!</b><br/>
Значения должны превышать 2096 Б (2 КБ).</td></tr>
</table><br/>


## Стандартные ответы HTTP-запроса, поддерживаемые службами мультимедиа

Ниже приведен набор заголовков, которые могут быть возвращены в зависимости от запрошенного ресурса и действия, которое необходимо выполнить.


<table border="1">
<tr><th>Заголовок</th><th>Тип</th><th>Значение</th></tr>
<tr><td>request-id</td><td>Строковый</td><td>Уникальный идентификатор текущей операции, создаваемый службой.</td></tr>
<tr><td>client-request-id</td><td>Строковый</td><td>Идентификатор, указанный вызывающим объектом в исходном запросе, если он имеется.</td></tr>
<tr><td>Дата</td><td>RFC 1123 date</td><td>Дата обработки запроса.</td></tr>
<tr><td>Content-Type</td><td>Varies</td><td>Тип содержимого текста ответа.</td></tr>
<tr><td>Content-Encoding</td><td>Varies</td><td>Соответственно, Gzip или Deflate.</td></tr>
</table><br/>

## Стандартные HTTP-команды, поддерживаемые службами мультимедиа

Ниже приведен полный список HTTP-команд, которые могут использоваться при создании HTTP-запросов:


<table border="1">
<tr><th>Команда</th><th>Описание</th></tr>
<tr><td>GET</td><td>Возвращает текущее значение объекта.</td></tr>
<tr><td>POST</td><td>Создает объект на основе предоставленных данных или отправляет команду.</td></tr>
<tr><td>PUT</td><td>Заменяет объект или создает именованный объект (в зависимости от ситуации).</td></tr>
<tr><td>УДАЛИТЬ</td><td>Удаляет объект.</td></tr>
<tr><td>MERGE</td><td>Вносит в существующий объект изменения в именованном свойстве.</td></tr>
<tr><td>HEAD</td><td>Возвращает метаданные объекта для ответа GET.</td></tr>
</table><br/>

## Обнаружение модели служб мультимедиа

Чтобы упростить обнаружение сущностей служб мультимедиа, можно использовать операцию $metadata. Она позволяет получать все допустимые типы сущностей, свойства сущностей, ассоциации, функции, действия и т. д. В следующем примере показано, как создать универсальный код ресурса: https://media.windows.net/API/$metadata.

Чтобы метаданные можно было просмотреть в браузере, в конце универсального кода ресурса необходимо добавить выражение "?api-version=2.x" или не включать в запрос заголовок x-ms-version.


<!-- Anchors. -->


<!-- URLs. -->
  
  [Портал управления]: http://manage.windowsazure.com/




<!--HONumber=52-->