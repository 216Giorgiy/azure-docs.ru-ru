<properties
	pageTitle="Предварительная версия Azure AD B2C | Microsoft Azure"
	description="Как создавать приложения непосредственно с использованием протоколов, поддерживаемых предварительной версией Azure AD B2C."
	services="active-directory-b2c"
	documentationCenter=""
	authors="dstrockis"
	manager="msmbaldwin"
	editor=""/>

<tags
	ms.service="active-directory-b2c"
	ms.workload="identity"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="09/22/2015"
	ms.author="dastrock"/>

# Предварительная версия Azure AD B2C: протоколы проверки подлинности

Azure AD B2C предоставляет «идентификацию как услугу» для приложений за счет поддержки стандартных отраслевых протоколов, OpenID Connect и OAuth 2.0. Хотя эта служба соответствует стандартам, между любыми двумя реализациями этих протоколов могут быть незначительные различия. Сведения в этой статье могу оказаться полезными, если вы планируете писать код с использованием прямой отправки и обработки HTTP-запросов, а не использовать одну из наших библиотек с открытым кодом. Мы рекомендуем прочитать краткую информацию на этой странице, прежде чем углубляться в детали каждого конкретного протокола. Но если вы уже знакомы с Azure AD B2C, можно перейти непосредственно к [справочным руководствам по протоколам](#protocols).

<!-- TODO: Need link to libraries above -->

[AZURE.INCLUDE [active-directory-b2c-preview-note](../../includes/active-directory-b2c-preview-note.md)]
	
## Основы
Каждое приложение, использующее Azure AD B2C, потребуется зарегистрировать для использования вашего каталога B2C на [портале Azure](https://portal.azure.com). В процессе регистрации для приложения будет собрано и назначено несколько значений:

- **Идентификатор приложения**, определяющий конкретное приложение.
- **Универсальный код ресурса (URI) перенаправления** или **Идентификатор пакета**, которые можно использовать для возврата ответов к приложению.
- Несколько других зависящих от сценария значений. Вы можете подробнее узнать о процедуре [регистрации приложения](active-directory-b2c-app-registration.md).

После регистрации приложение взаимодействует с Azure AD, отправляя запросы к конечной точке версии 2.0:

```
https://login.microsoftonline.com/common/oauth2/v2.0/authorize
https://login.microsoftonline.com/common/oauth2/v2.0/token
```

Почти во всех потоках обмена данными в OAuth и OpenID Connect участвуют четыре стороны:

![Роли OAuth 2.0](./media/active-directory-b2c-reference-protocols/protocols_roles.png)

- **Сервер авторизации** — это конечная точка Azure AD версии 2.0. Он отвечает за удостоверение пользователя, предоставление и блокировку доступа к ресурсам, а также предоставление маркеров. Кроме того, этот сервер выполняет роль поставщика удостоверений: он безопасным способом обрабатывает любые данные, связанные со сведениями о пользователе, его доступом и отношениями доверия между участниками потока.
- **Владелец ресурса** — это, как правило, пользователь. Это сторона, владеющая данными, которая может предоставлять третьим сторонам доступ к этим данным или ресурсу.
- **Клиент OAuth** — это ваше приложение, определяемое идентификатором приложения. Обычно именно с этой стороной взаимодействует конечный пользователь. Она также запрашивает маркеры у сервера авторизации. Владелец ресурса должен предоставить клиенту разрешение на доступ к ресурсу.
- **Сервер ресурсов** — место размещения ресурса или данных. Он позволяет серверу авторизации выполнять безопасную проверку подлинности и авторизацию клиента OAuth и использует маркеры доступа носителя для обеспечения возможности предоставления доступа к ресурсу.

## Политики

Возможно, **политики** Azure AD B2C являются наиболее важной функцией службы. Azure AD B2C расширяет возможности стандартных протоколов OAuth 2.0 и OpenID Connect, вводя политики, которые позволяют Azure AD B2C выполнять гораздо больше, чем просто аутентификацию и авторизацию. Политики полностью описывают работу идентификации клиента: регистрацию, вход или редактирование профиля. Их можно определить в пользовательском интерфейсе администрирования и выполнять с помощью специального параметра в HTTP-запросах аутентификации. Политики не являются стандартным компонентом OAuth 2.0 и OpenID Connect, поэтому следует уделить время, чтобы понять, как они работают. Дополнительные сведения см. в [справочнике по политикам Azure AD B2C](active-directory-b2c-reference-policies.md).


## Маркеры
В реализации OAuth 0.2 и OpenID Connect в Azure AD B2C широко используются токены носителя, включая токены носителя в виде JWT. Маркер носителя — это упрощенный маркер безопасности, предоставляющий его носителя (предъявителю) доступ к защищенному ресурсу. В этом смысле предъявителем является любая сторона, которая может предъявить маркер. Несмотря на то, что для получения токена носителя сторона должны сначала пройти проверку подлинности в Azure AD, если действия, необходимые для защиты маркера при его передаче и хранении не выполняются, его может перехватить и использовать несанкционированная сторона. Хотя в некоторых маркерах безопасности для предотвращения несанкционированного использования применяется специальный встроенный механизм, в токенах носителя такого механизма нет, и они должны передаваться по защищенному каналу, например с использованием стандарта безопасности транспортного уровня (HTTPS). Если токен носителя передается в незашифрованном виде, злоумышленник может использовать атаку "злоумышленник в середине", чтобы получить токен и использовать его для несанкционированного доступа к защищенному ресурсу. Те же принципы безопасности применяются при сохранении или кэшировании токенов носителя для последующего использования. Необходимо всегда проверять, что приложение передает и сохраняет токены носителя безопасным образом. Дополнительные сведения о безопасности в случае применения маркеров носителя см. в [RFC 6750, раздел 5](http://tools.ietf.org/html/rfc6750).

Дополнительные сведения о различных типах токенов, используемых в Azure AD B2C, можно найти в [справочнике по токенам Azure AD](active-directory-b2c-reference-tokens.md).

## Протоколы

Если вы готовы рассмотреть несколько примеров запросов, приступите к одному из учебников ниже. Каждый из них соответствует определенному сценарию аутентификации. Сведения о том, как выбрать правильный поток, см. в статье о [типах приложений, которые можно создать с помощью Azure AD B2C](active-directory-b2c-apps.md).

- [Создание мобильного и собственного приложения с использованием OAuth 2.0](active-directory-b2c-reference-oauth-code.md)
- [Создание веб-приложений с использованием OpenID Connect](active-directory-b2c-reference-oidc.md)
- Создание одностраничных приложений с использованием неявного потока OAuth 2.0 (скоро)
- Создание управляющих программ или серверных процессов с использованием потока учетных данных клиентов OAuth 2.0 (скоро)
- Получение токенов с помощью имени пользователя и пароля с использованием потока учетных данных паролей владельцев ресурсов OAuth 2.0 (скоро)
- Получение токенов в веб-API потока «от имени» OAuth 2.0 (скоро)

<!-- [Call the Azure AD Graph API using the OAuth 2.0 Client Credentials Flow](active-directory-reference-graph.md) -->

<!---HONumber=Oct15_HO1-->