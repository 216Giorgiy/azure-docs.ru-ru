---
title: Что такое Azure Active Directory B2C | Документация Майкрософт
description: Узнайте, как настроить вход в приложение с помощью Azure Active Directory B2C и управлять им.
services: active-directory-b2c
author: davidmu1
manager: daveba
ms.service: active-directory
ms.workload: identity
ms.topic: overview
ms.date: 11/30/2018
ms.author: davidmu
ms.component: B2C
ms.openlocfilehash: b667934fefe0b9afb5aeca786839f5e105be2c4d
ms.sourcegitcommit: 8115c7fa126ce9bf3e16415f275680f4486192c1
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/24/2019
ms.locfileid: "54844999"
---
# <a name="what-is-azure-active-directory-b2c"></a>Что такое Azure Active Directory B2C

Azure Active Directory (Azure AD) B2C — это служба управления идентификацией, которая позволяет настраивать и контролировать процессы взаимодействия пользователей с приложением. Это взаимодействие включает процесс регистрации, входа и управления профилями пользователей при использовании приложений. Среди прочего, вы можете выбрать приложения, разработанные для iOS, Android и .NET. Azure AD B2C разрешает эти действия и в то же время защищает пользовательские удостоверения.

Настройте приложение, зарегистрированное в Azure AD B2C, чтобы выполнять различные задачи по управлению удостоверениями. Ниже приведены некоторые примеры.

- предоставление пользователю возможности регистрироваться, чтобы использовать зарегистрированное приложение;
- предоставление зарегистрированному пользователю возможности войти и начать использовать приложение;
- предоставление зарегистрированному пользователю возможности изменять свой профиль;
- включение многофакторной идентификации в приложении;
- предоставление пользователю возможности регистрироваться и выполнять вход с помощью определенных поставщиков удостоверений;
- предоставление доступа к созданным API из приложений;
- настройка интерфейса входа и регистрации;
- управление сеансами единого входа приложения.

## <a name="what-do-i-need-to-think-about-before-using-azure-ad-b2c"></a>О чем следует подумать перед использованием Azure AD B2C

- Как пользователь должен взаимодействовать с приложением?
- Какой пользовательский интерфейс необходимо предоставить пользователям?
- Каких поставщиков удостоверений можно позволить выбрать пользователям в приложении?
- Требуются ли процессу входа выполнение дополнительных API?

### <a name="customer-interaction"></a>Взаимодействие с пользователями

Azure AD B2C поддерживает [OpenID Connect](https://openid.net/connect/) для улучшения удобства работы пользователей. В реализации OpenID Connect в Azure AD B2C приложение запускает путь взаимодействия пользователя, отправляя запросы проверки подлинности в Azure AD B2C. Результат запроса — `id_token`. Этот маркер безопасности определяет идентификатор пользователя.

Каждое приложение, использующее Azure AD B2C, должно быть зарегистрировано в клиенте Azure AD B2C с помощью портала Azure. Процесс регистрации собирает значения и присваивает их приложению. Эти значения включают идентификатор приложения, который определяет конкретное приложение. Универсальный код ресурса (URI) перенаправления определяется как тот, который можно использовать для направления ответов к приложению.

Взаимодействие каждого приложения использует аналогичный высокоуровневый шаблон:

1. Приложение направляет пользователя для выполнения политики.
2. Пользователь выполняет политику в соответствии с ее определением.
3. Приложение получает маркер безопасности.
4. Приложение использует маркер безопасности при попытке доступа к защищенному ресурсу.
5. Сервер ресурсов проверяет маркер безопасности для подтверждения того, что доступ может быть предоставлен.
6. Приложение периодически обновляет маркер безопасности.

Эти шаги отличаются в зависимости от типа создаваемого приложения.

Azure AD B2C взаимодействует с поставщиками удостоверений, пользователями, другими системами и локальным каталогом в определенной последовательности, чтобы выполнить задачу идентификации. Например, выполнение входа, регистрация нового пользователя или сброс пароля. Базовая платформа, устанавливающая доверие между несколькими участниками и выполняющая эти шаги, называется инфраструктурой идентификации. Эта платформа и политика (которая также называется путем взаимодействия пользователя или политикой инфраструктуры доверия) явно определяют субъекты, действия, протоколы и последовательность шагов для завершения.

Azure AD B2C защищает ваши приложения от атак типа "отказ в обслуживании" и атак для взлома пароля. Для защиты ресурсов от атак типа "отказ в обслуживании" Azure AD B2C использует методики обнаружения и уменьшения негативных последствий, такие как файлы cookie SYN, ограничение скорости и количества подключений. Эти методики также действуют при атаках методом подбора пароля и при словарных атаках на пароль.

#### <a name="user-flows"></a>Маршруты пользователей

В каждом запросе, который отправляется в Azure AD B2C, определяется поток действий пользователя. Такой поток представляет собой политику, которая управляет поведением приложения при взаимодействии с Azure AD B2C. Предопределенные потоки для наиболее распространенных задач идентификации, таких как регистрация, вход в систему и редактирование профиля, доступны на портале Azure AD B2C.  К примеру, поток для регистрации позволяет управлять поведением с помощью таких параметров:

- учетная запись социальных сетей, которую пользователь использует для входа в приложение;
- данные, полученные от пользователя, такие как имя или почтовый индекс;
- Многофакторная Идентификация
- внешний вид и удобство использования всех страниц регистрации;
- сведения, возвращаемые в приложение.

#### <a name="custom-policies"></a>Пользовательские политики 

[Пользовательские политики](active-directory-b2c-overview-custom.md) — это файлы конфигурации, которые определяют поведение [инфраструктуры процедур идентификации](trustframeworkpolicy.md) в клиенте Azure AD B2C. Пользовательские политики можно полностью изменять, когда необходимо выполнить множество задач. Пользовательские политики являются одним или несколькими XML-файлами, которые ссылаются друг на друга в иерархической цепочке. 

При необходимости в клиенте Azure AD B2C можно использовать несколько пользовательских политик различных типов и повторно использовать их в приложениях. Такая гибкость позволяет определять и изменять процесс идентификации пользователя, внося лишь незначительные изменения в код или совсем не изменяя его. Политики используются путем добавления специального параметра запроса в HTTP-запросах проверки подлинности.

Пользовательские политики используются для управления путями взаимодействия пользователя следующими способами:

- Определение взаимодействия с API для сбора дополнительной информации, проверки предоставляемых пользователем утверждений или активации внешних процессов.
- Изменение поведения на основе утверждений из API или утверждений в каталоге, например *migrationStatus*.
- Любой рабочий процесс, который не регулируется встроенными политиками. Например, сбор дополнительной информации от пользователя во время процедуры входа и выполнение проверки авторизации для доступа к ресурсу.

### <a name="identity-providers"></a>Поставщики удостоверений

Поставщик удостоверений — это служба, которая проверяет подлинность идентификационных данных пользователя и выдает маркеры безопасности. В Azure AD B2C можно настроить ряд поставщиков удостоверений клиента, например [учетная запись Майкрософт](active-directory-b2c-setup-msa-app.md), [Facebook](active-directory-b2c-setup-fb-app.md), [Amazon](active-directory-b2c-setup-amzn-app.md) и др. 

Чтобы настроить поставщик удостоверений в клиенте Azure AD B2C, необходимо записать идентификатор приложения или идентификатор клиента и пароль или секрет клиента из созданного приложением поставщика удостоверений. Этот идентификатор и пароль затем используются для настройки приложения.

### <a name="user-interface-experience"></a>Пользовательский интерфейс

Большая часть содержимого HTML и CSS, которая отображается для пользователей, является управляемой. С помощью функции настройки пользовательского интерфейса страницы можно настроить оформление любой политики. Вы обеспечиваете согласованность фирменной символики и визуализации в приложении и службе Azure AD B2C, используя этот компонент настройки.

Служба Azure AD B2C выполняет код в браузере пользователя и использует современный метод — общий доступ к ресурсам независимо от источника (CORS). Сначала необходимо указать URL-адрес в политике с настраиваемым содержимым HTML. Azure AD B2C объединяет элементы пользовательского интерфейса с содержимым HTML, загруженным по указанному URL-адресу, и отображает страницу для пользователя.

В строке запроса вы отправляете параметры в Azure AD B2C. Передавая параметр в конечную точку HTML, содержимое страницы динамически изменяется. Например, можно изменить фоновое изображение страницы регистрации или входа в Azure AD B2C на основе параметра, передаваемого из веб-приложения или мобильного приложения.

## <a name="how-do-i-get-started-with-azure-ad-b2c"></a>Начало работы с Azure AD B2C

В Azure AD B2C клиент представляет организацию и ее каталог пользователей. Каждый клиент Azure AD B2C отделен от остальных клиентов Azure AD B2C. В клиенте содержится информация о пользователях, зарегистрировавшихся в приложении. Например, пароли, данные профиля и разрешения.

Свяжите клиент Azure AD B2C с подпиской Azure, чтобы включить все возможности и вносить плату за использование. Чтобы разрешить пользователям входить в приложение, зарегистрируйте его в клиенте Azure AD B2C.

Перед настройкой приложения для использования Azure AD B2C необходимо создать клиент Azure AD B2C и зарегистрировать приложение. Чтобы зарегистрировать приложение, выполните шаги из статьи [Руководство. Регистрация приложений в Azure Active Directory B2C](tutorial-register-applications.md).
  
Если вы являетесь разработчиком веб-приложений ASP.NET, настройте в приложении аутентификацию учетных записей, выполнив инструкции из статьи [Руководство. Включение в веб-приложении аутентификации на основе учетных записей с помощью Azure Active Directory B2C](active-directory-b2c-tutorials-web-app.md).

Если вы разрабатываете классические приложения, настройте в приложении аутентификацию учетных записей, выполнив инструкции из статьи [Руководство. Включение в классическом приложении аутентификации на основе учетных записей с помощью Azure Active Directory B2C](active-directory-b2c-tutorials-desktop-app.md).

Если вы разрабатываете одностраничные приложения на Node.js, настройте в приложении аутентификацию, выполнив инструкции из статьи [Руководство. Включение в одностраничном приложении аутентификации на основе учетных записей с помощью Azure Active Directory B2C](active-directory-b2c-tutorials-spa.md).

## <a name="next-steps"></a>Дополнительная информация

Приступите к настройке приложения для процедур регистрации и входа, перейдя к следующему руководству.

> [!div class="nextstepaction"]
> [Руководство. Создание клиента Azure Active Directory B2C](tutorial-create-tenant.md).
