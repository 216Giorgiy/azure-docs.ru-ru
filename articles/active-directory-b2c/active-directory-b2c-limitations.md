---
title: "Azure Active Directory B2C: пределы и ограничения | Документация Майкрософт"
description: "Перечень существующих пределов и ограничений в службе Azure Active Directory B2C"
services: active-directory-b2c
documentationcenter: 
author: parakhj
manager: krassk
editor: bryanla
ms.assetid: 04ec3310-98bb-4bb1-856d-ddc66913b390
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 3/17/2017
ms.author: parakhj
translationtype: Human Translation
ms.sourcegitcommit: 9553c9ed02fa198d210fcb64f4657f84ef3df801
ms.openlocfilehash: 610b72f9f979f76d2d9c5180cb51ddae82a3e823
ms.lasthandoff: 03/23/2017


---
# <a name="azure-active-directory-b2c-limitations-and-restrictions"></a>Azure Active Directory B2C: пределы и ограничения

Некоторые возможности и функции Azure Active Directory (Azure AD) B2C еще не поддерживаются. В дальнейшем многие из этих известных проблем и ограничений будут сняты. Но их следует учитывать, если вы создаете приложение для работы с клиентами в Azure AD B2C.

## <a name="issues-during-the-creation-of-azure-ad-b2c-tenants"></a>Проблемы при создании клиентов Azure AD B2C

Если во время [создания клиента Azure AD B2C](active-directory-b2c-get-started.md) у вас возникнут проблемы, см. статью [Создание клиента Azure Active Directory (Azure AD) или клиента Azure Active Directory B2C: проблемы и решения](active-directory-b2c-support-create-directory.md).

Обратите внимание, что при удалении существующего клиента B2C и его повторном создании с тем же доменным именем могут возникнуть известные проблемы. Создавайте клиент B2C с другим доменным именем.

## <a name="branding-issues-on-verification-email"></a>Проблемы с фирменной символикой в проверочном письме

Проверочное письмо по умолчанию содержит фирменную символику Microsoft. Она будет удалена в будущем. Сейчас ее можно удалить с помощью [функции фирменной символики](../active-directory/active-directory-add-company-branding.md).

## <a name="branding-issues-on-local-account-sign-in-page-in-a-sign-in-policy"></a>Проблемы с добавлением фирменной символики на страницу входа в локальную учетную запись в политике входа

Чтобы настроить страницу входа в локальную учетную запись в политике входа, следует использовать только [функцию фирменной символики компании](../active-directory/active-directory-add-company-branding.md), а не функцию настройки пользовательского интерфейса страницы, описанную [здесь](active-directory-b2c-reference-ui-customization.md). Кроме того, для полей имени пользователя и пароля недоступны метки или заполнители. В качестве альтернативного решения рекомендуем использовать полностью настраиваемые политики регистрации или входа. Если вы хотите полностью настроить страницу входа в локальную учетную запись в политике входа, проголосуйте за соответствующую функцию на странице [UserVoice](https://feedback.azure.com/forums/169401-azure-active-directory/suggestions/13062033-b2c-fully-customizable-sign-in-page).

## <a name="restrictions-on-applications"></a>Ограничения для приложений

Перечисленные ниже типы приложений пока что не поддерживаются в Azure AD B2C. Описание поддерживаемых типов приложений можно найти в статье [Azure Active Directory B2C: типы приложений](active-directory-b2c-apps.md).

### <a name="daemons--server-side-applications"></a>Управляющие программы и серверные приложения

Многие приложения работают без вмешательства пользователя или содержат процессы, выполняющиеся на протяжении долгого времени. Им также требуется возможность доступа к защищенным ресурсам, таким как веб-API. Эти приложения могут выполнять проверку подлинности и получать маркеры, используя идентификатор приложения (а не делегированный идентификатор клиента) с помощью [потока учетных данных клиента OAuth 2.0](active-directory-b2c-reference-protocols.md). Этот поток пока недоступен в Azure AD B2C. Это значит, что приложения могут получать маркеры только после запуска интерактивного потока входа пользователя.


### <a name="web-api-chains-on-behalf-of"></a>Цепочки веб-API ("от имени")

Многие архитектуры включают в себя веб-API, которому требуется вызывать другой нисходящий веб-API. При этом Azure AD B2C защищает оба интерфейса. Этот сценарий характерен для собственных клиентов с внутренним веб-API, который в свою очередь вызывает службу Microsoft Online, например API Graph Azure AD.

Этот сценарий веб-API с цепочками может поддерживаться с помощью предоставления учетных данных носителя маркера JWT OAuth 2.0 или потока On-Behalf-Of. Однако в Azure AD B2C поток On-Behalf-Of еще не реализован.

## <a name="restrictions-on-reply-urls"></a>Ограничения для URL-адресов ответа

В настоящее время приложения, зарегистрированные в службе Azure AD B2C, ограничены определенным набором значений для URL-адресов ответа. URL-адрес ответа для веб-приложений и служб должен начинаться со схемы `https`. Все его значения должны совместно использовать один домен DNS. Например, невозможно зарегистрировать веб-приложение с одним из следующих прямых URL-адресов:

`https://login-east.contoso.com`
`https://login-west.contoso.com`

Система регистрации сравнивает полное DNS-имя существующего URL-адреса ответа и DNS-имя добавляемого URL-адреса ответа. Запрос на добавление DNS-имени завершится ошибкой при выполнении любого из следующих условий.

* Если DNS-имя нового URL-адреса ответа не соответствует DNS-имени существующего URL-адреса ответа.
* Если DNS-имя нового URL-адреса ответа не является поддоменом существующего URL-адреса ответа.

Например, в приложении используется этот URL-адрес ответа:

`https://login.contoso.com`

Можно добавить его следующим образом.

`https://login.contoso.com/new`

В этом случае DNS-имя полностью совпадает. Или же можно сделать следующее.

`https://new.login.contoso.com`

В этом случае используется ссылка на поддомен DNS, login.contoso.com. Если требуется создать приложение с URL-адресами ответа login-east.contoso.com и login-west.contoso.com, то нужно добавить эти URL-адреса ответа в таком порядке:

`https://contoso.com`
`https://login-east.contoso.com`
`https://login-west.contoso.com`

Два последних значения являются поддоменами первого URL-адреса ответа (contoso.com), поэтому их можно добавить. Это ограничение будет снято в следующей версии.

Сведения о регистрации приложения в службе Azure AD B2C см. в статье [Azure Active Directory B2C: регистрация приложения](active-directory-b2c-app-registration.md).

## <a name="restriction-on-libraries-and-sdks"></a>Ограничения для библиотек и пакетов SDK

Сейчас набор поддерживаемых библиотек от Майкрософт, используемых в Azure AD B2C, весьма ограничен. Поддерживаются веб-приложения и службы на основе .NET и NodeJS.  Для работы с Azure AD B2C в приложениях для Windows и других приложениях .NET доступна клиентская библиотека .NET предварительной версии (также называемая MSAL).

Библиотеки для других языков или платформ, включая iOS и Android, в настоящее время не поддерживаются.  Если необходимо создать библиотеку на другой платформе (помимо упомянутых выше), рекомендуется использовать пакет SDK с открытым исходным кодом. При необходимости см. сведения в [справочнике по протоколам OAuth 2.0 и OpenID Connect](active-directory-b2c-reference-protocols.md).  Azure AD B2C реализует протоколы OAuth и OpenID Connect. Это позволяет использовать универсальную библиотеку OAuth или OpenID Connect для интеграции.

В кратких руководствах для iOS и Android описано использование библиотек с открытым исходным кодом, протестированных на совместимость с Azure AD B2C.  В разделе [Приступая к работе](active-directory-b2c-overview.md#get-started) приведены все доступные краткие руководства.

## <a name="restriction-on-protocols"></a>Ограничения для протоколов

Azure AD B2C поддерживает протоколы OpenID Connect и OAuth 2.0. Однако в ней реализованы не все функции и возможности этих протоколов. Подробные сведения о функциях, поддерживаемых для каждого протокола в Azure AD B2C, см. в [справочнике по протоколам OpenID Connect и OAuth 2.0](active-directory-b2c-reference-protocols.md). Поддержка протоколов SAML и WS-Fed недоступна.

## <a name="restriction-on-tokens"></a>Ограничения для маркеров

Многие маркеры, формируемые Azure AD B2C, реализуются в виде веб-маркеров JSON (JWT). Однако не все сведения, содержащиеся в маркерах JWT (также называемых утверждениями), являются правильными или полными. Например, утверждение preferred_username.  Так как значения, формат или значения утверждений со временем изменяются, маркеры для имеющихся политик не будут затрагиваться. Вы можете полагаться на их значения в рабочих приложениях.  Мы обеспечим возможность настройки изменений значений для всех политик.  Дополнительные сведения о маркерах, создаваемых в настоящее время службой Azure AD B2C, см. в [справочнике по маркерам](active-directory-b2c-reference-tokens.md).

## <a name="restriction-on-nested-groups"></a>Ограничения для вложенных групп

В клиентах Azure AD B2C членство во вложенных группах не поддерживается. Добавление этой возможности не планируется.

## <a name="restriction-on-differential-query-feature-on-azure-ad-graph-api"></a>Ограничения для функции дифференциального запроса в API Graph Azure AD

В клиентах Azure AD B2C [функция дифференциального запроса Azure AD Graph API](https://msdn.microsoft.com/library/azure/ad/graph/howto/azure-ad-graph-api-differential-query) не поддерживается. Однако мы планируем добавить ее в долгосрочной перспективе.

## <a name="issues-with-user-management-on-the-azure-classic-portal"></a>Проблемы с управлением пользователями на классическом портале Azure

Функции B2C доступны на портале Azure. При этом классический портал Azure можно использовать для доступа к другим функциям клиентов, включая функцию управления пользователями. В настоящее время известно о нескольких проблемах, связанных с управлением пользователями (вкладка **Пользователи** ) на классическом портале Azure.

* Пользователи с локальными учетными записями выполняют регистрацию с помощью электронного адреса и пароля или же имени пользователя и пароля. При этом поле **Имя пользователя** не соответствует идентификатору входа (электронному адресу или имени пользователя), который использовался при регистрации). Это происходит потому, что поле, отображаемое на классическом портале Azure, на самом деле предназначено для имени участника-пользователя, которое не используется в операциях B2C. Чтобы отобразить идентификатор входа локальной учетной записи, найдите объект пользователя в [Graph Explorer](https://graphexplorer.cloudapp.net/). Похожая проблема возникает с пользователями учетных записей социальных сетей, которые используют для регистрации учетные записи Facebook, Google+ и т. д. Но в этом случае идентификатор входа вообще отсутствует.

    ![Локальная учетная запись — имя участника-пользователя](./media/active-directory-b2c-limitations/limitations-user-mgmt.png)
* В случае с пользователем с локальной учетной записью вам не удастся изменить какое-либо поле либо сохранить изменения на вкладке **Профиль** .

## <a name="issues-with-admin-initiated-password-reset-on-the-azure-classic-portal"></a>Проблемы, связанные с инициированным администратором сбросом паролей на классическом портале Azure

На классическом портале Azure вы можете сбросить пароль пользователя с локальной учетной записью (команда **Сбросить пароль** на вкладке **Пользователи**). Такой пользователь не сможет изменить свой пароль при следующем входе, если вы используете политику регистрации или входа в систему. Кроме того, для него будет заблокирован доступ к вашим приложениям. Чтобы избежать этого, воспользуйтесь [API Graph Azure AD](active-directory-b2c-devquickstarts-graph-dotnet.md), чтобы сбросить пароль пользователя (без окончания срока действия пароля). Либо примените политику входа в систему вместо политики регистрации или входа в систему.

## <a name="issues-with-creating-a-custom-attribute"></a>Проблемы с созданием настраиваемого атрибута

[Настраиваемый атрибут, добавленный на портале Azure](active-directory-b2c-reference-custom-attr.md), не сразу создается в клиенте B2C. Для этого вам следует использовать настраиваемый атрибут как минимум в одной из политик. Он будет создан в клиенте B2C и станет доступен в API Graph.

## <a name="issues-with-verifying-a-domain-on-the-azure-classic-portal"></a>Проблемы с проверкой домена на классическом портале Azure

В настоящее время проверить домен на [классическом портале Azure](https://manage.windowsazure.com/)невозможно.

## <a name="issues-with-sign-in-with-mfa-policy-on-safari-browsers"></a>Проблемы входа в браузерах Safari, связанные с использованием политики MFA

В браузерах Safari запросы к политикам входа (со включенной многофакторной проверкой подлинности (MFA)) периодически заканчиваются сбоем, выдавая ошибку HTTP 400 (неверный запрос). Это происходит из-за низких ограничений Safari на размер файлов cookie. Существует несколько обходных путей для решения этой проблемы.

* Вместо "политики входа" используйте "политику регистрации или входа в систему".
* Уменьшите число **утверждений приложения** , запрашиваемых в политике.

## <a name="issues-with-windows-desktop-wpf-apps-using-azure-ad-b2c"></a>Проблемы с классическими приложениями Windows WPF, использующими службу Azure AD B2C

Запросы к службе Azure AD B2C из классического приложения Windows WPF иногда завершаются сбоем и отображается следующее сообщение об ошибке: "The browser based authentication dialog failed to complete. Reason: The protocol is not known and no pluggable protocols have been entered that match." (Не удалось выполнить аутентификацию на основе браузера. Причина: протокол неизвестен, и не были введены соответствующие подключаемые протоколы).

Это происходит из-за размера кодов авторизации, предоставляемых службой Azure AD B2C. Их размер связан с числом утверждений, запрашиваемых в маркере. Для решения этой проблемы необходимо сократить число утверждений, запрашиваемых в маркере, и отдельно выполнить запрос API Graph для других утверждений.

