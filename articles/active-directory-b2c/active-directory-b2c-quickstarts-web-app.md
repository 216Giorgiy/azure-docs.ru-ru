---
title: "Тестовый выпуск веб-приложения Azure AD B2C | Документация Майкрософт"
description: "Протестируйте вход, регистрацию, изменение профиля и сброс пароля с помощью тестовой среды Azure AD B2C"
services: active-directory-b2c
documentationcenter: .net
author: saraford
manager: krassk
editor: PatAltimore
ms.assetid: 2ffb780d-2c51-4c2e-b8d6-39c40a81a77e
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 10/31/2017
ms.author: saraford
ms.openlocfilehash: 2a51f15fd38a901548dcf4c56922f9715c328463
ms.sourcegitcommit: 43c3d0d61c008195a0177ec56bf0795dc103b8fa
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/01/2017
---
# <a name="test-drive-a-web-application-configured-with-azure-ad-b2c"></a>Тестовый выпуск веб-приложения, настроенного с помощью Azure AD B2C

Azure Active Directory B2C обеспечивает управление идентификаторами облака для защиты приложения, бизнеса и клиентов.  В этом кратком руководстве используется пример приложения списка текущих дел, чтобы продемонстрировать следующее:

* Использование политики **Регистрация или вход** для создания учетной записи социальной сети или входа с помощью поставщика удостоверений в социальных сетях или локальной учетной записи, используя адрес электронной почты. 
* Вызов API, защищенного Azure AD B2C, для создания и изменения элементов списка дел.

## <a name="prerequisites"></a>Предварительные требования

* Установите [Visual Studio 2017](https://www.visualstudio.com/downloads/) с указанными ниже рабочими нагрузками:
    - **ASP.NET и веб-разработка;**

* Учетная запись социальных сетей Facebook, Google, Microsoft или Twitter. При отсутствии учетной записи социальных сетей требуется допустимый адрес электронной почты.

[!INCLUDE [quickstarts-free-trial-note](../../includes/quickstarts-free-trial-note.md)]

## <a name="download-the-sample"></a>Скачивание примера приложения

[Скачайте или клонируйте образец приложения](https://github.com/Azure-Samples/active-directory-b2c-dotnet-webapp-and-webapi) из GitHub.

## <a name="run-the-app-in-visual-studio"></a>Запуск приложения в Visual Studio

В папке проекта образца приложения откройте решение `B2C-WebAPI-DotNet.sln` в Visual Studio. 

Решение состоит из двух проектов:

* **TaskWebApp** — веб-приложение ASP.NET MVC, в котором пользователь может управлять элементами списка дел.  
* **TaskService** — серверная часть веб-API ASP.NET, которая управляет всеми операциями CRUD, выполненными в элементах списка дел пользователя. Веб-приложение вызывает этот API и отображает результаты.

Для этого краткого руководства необходимо одновременно выполнить проекты `TaskWebApp` и `TaskService`. 

1. В обозревателе решений щелкните решение правой кнопкой мыши и выберите **Set StartUp Projects...** (Назначить запускаемые проекты...). 
2. Выберите переключатель **Multiple startup projects** (Несколько запускаемых проектов).
3. Установите **Запуск** в качестве **действия** для обоих проектов. Нажмите кнопку **ОК**.

![Назначение начальной страницы в Visual Studio](media/active-directory-b2c-quickstarts-web-app/setup-startup-projects.png)

Выберите **Debug > Start Debugging** (Отладка > Начать отладку), чтобы выполнить сборку и запустить оба приложения. Каждое приложение открывается в отдельной вкладке браузера.

* `https://localhost:44316/` — эта страница является веб-приложением ASP.NET. В этом кратком руководстве вы работаете непосредственно с этим приложением.
* `https://localhost:44332/` — эта страница является веб-API, который вызывается веб-приложением ASP.NET.

## <a name="create-an-account"></a>Создание учетной записи

Нажмите ссылку **Sign up / Sign in** (Вход / Регистрация) в веб-приложении ASP.NET, чтобы запустить рабочий процесс **регистрации или входа**. При создании учетной записи можно использовать имеющуюся учетную запись поставщика удостоверений в социальных сетях или учетную запись электронной почты.

![Образец веб-приложения ASP.NET](media/active-directory-b2c-quickstarts-web-app/web-app-sign-in.png)

### <a name="sign-up-using-a-social-identity-provider"></a>Регистрация с помощью поставщика удостоверений в социальных сетях

Чтобы зарегистрироваться с помощью поставщика удостоверений в социальных сетях, нажмите кнопку поставщика удостоверений, которого нужно использовать. Если вы предпочитаете использовать адрес электронной почты, перейдите к разделу [Регистрация с помощью адреса электронной почты](#sign-up-using-an-email-address).

![Поставщик входа или регистрации](media/active-directory-b2c-quickstarts-web-app/sign-in-or-sign-up-web.png)

В этом случае необходимо выполнить аутентификацию (вход) с помощью данных учетной записи социальных сетей и авторизовать приложение для чтения информации из учетной записи социальных сетей. Предоставляя доступ, приложение может получить сведения о профиле из учетной записи социальных сетей (например, имя и город). 

![Аутентификация и авторизация с помощью учетной записи социальных сетей](media/active-directory-b2c-quickstarts-web-app/twitter-authenticate-authorize-web.png)

Завершите процесс входа для поставщика удостоверений. Например, щелкните кнопку **Вход** для Twitter.

Сведения о профиле новой учетной записи будут заполнены информацией из учетной записи социальных сетей.

![Сведения о новом профиле регистрации учетной записи](media/active-directory-b2c-quickstarts-web-app/new-account-sign-up-profile-details-web.png)

Обновите поля "Отображаемое имя", "Должность" и "Город" и щелкните **Продолжить**.  Введенные значения используются для профиля учетной записи пользователя Azure AD B2C.

Учетная запись пользователя Azure AD B2C, использующая поставщик удостоверений, успешно создана. 

Далее перейдите к разделу [Просмотр утверждений](#view-your-claims).

### <a name="sign-up-using-an-email-address"></a>Регистрация с помощью адреса электронной почты

Если вы решили не использовать учетную запись социальных сетей для аутентификации, можно создать учетную запись пользователя Azure AD B2C, используя адрес электронной почты. Учетная запись локального пользователя Azure AD B2C использует Azure Active Directory в качестве поставщика удостоверений. Чтобы использовать свой адрес электронной почты, щелкните ссылку **Нет учетной записи?** Зарегистрируйтесь сейчас.

![Вход или регистрация с помощью электронной почты](media/active-directory-b2c-quickstarts-web-app/sign-in-or-sign-up-email-web.png)

Введите допустимый адрес электронной почты и нажмите кнопку **Отправить проверочный код**. Для получения проверочного кода из Azure AD B2C необходим допустимый адрес электронной почты. 

Введите проверочный код, полученный по электронной почте, и нажмите кнопку **Проверить код**.

Введите данные профиля и нажмите кнопку **Создать**.

![Регистрация новой учетной записи с использованием адреса электронной почты](media/active-directory-b2c-quickstarts-web-app/sign-up-new-account-profile-email-web.png)

Новая учетная запись локального пользователя Azure AD B2C успешно создана.

## <a name="reset-your-password"></a>Сброс пароля

Если учетная запись создана с помощью адреса электронной почты, Azure AD B2C предоставляет функцию, обеспечивающую пользователям возможность сброса пароля. Чтобы изменить созданный профиль, щелкните имя своего профиля в строке меню и выберите **Reset Password** (Сбросить пароль).

Подтвердите адрес электронной почты, введя его и нажав кнопку **Отправить проверочный код**. Проверочный код отправляется на адрес электронной почты.

Введите проверочный код, полученный по электронной почте, и щелкните **Проверить код**.

После проверки адреса электронной почты щелкните **Продолжить**.

Введите новый пароль и щелкните **Продолжить**.

## <a name="view-your-claims"></a>Просмотр утверждений

Щелкните **Утверждения** в строке меню веб-приложения, чтобы просмотреть утверждения, связанные с последним действием. 

![Регистрация новой учетной записи с использованием адреса электронной почты](media/active-directory-b2c-quickstarts-web-app/view-claims-sign-up-web.png)

В этом примере последним действием было *регистрация или вход*. Обратите внимание, что **тип утверждения** `http://schemas.microsoft.com/claims/authnclassreference` — `b2c_1_susi`, указывающий последнее действие регистрации или входа в систему. Если последнее действие — сброс пароля, **типом утверждения** будет `b2c_1_reset`.

## <a name="edit-your-profile"></a>Изменение профиля

Azure Active Directory B2C предоставляет функциональные возможности, обеспечивающие пользователям возможность обновления профилей. В строке меню веб-приложения, щелкните имя профиля и выберите **Edit profile** (Изменить профиль), чтобы изменить созданный профиль.

![Изменение профиля](media/active-directory-b2c-quickstarts-web-app/edit-profile-web.png)

Измените **отображаемое имя** и **город**.  Нажмите кнопку **Продолжить**, чтобы обновить профиль.

![Обновить профиль](media/active-directory-b2c-quickstarts-web-app/update-profile-web.png)

Обратите внимание, что после смены имени отображаемое имя обновляется в верхней правой части страницы. 

Нажмите кнопку **Утверждения**. Изменения, внесенные в поля **Отображаемое имя** и **Город**, отображаются в утверждениях.

![Просмотр утверждений](media/active-directory-b2c-quickstarts-web-app/view-claims-update-web.png)

 Обратите внимание, что **тип утверждения** `http://schemas.microsoft.com/claims/authnclassreference` был обновлен до `b2c_1_edit_profile` и указывает, что последним действием было изменение профиля, а также, что для полей "Имя" и "Город" заданы новые значения *Sara S.* и *Seattle*.

## <a name="access-a-resource"></a>Получение доступа к ресурсу

Щелкните **To-Do List** (Список дел), чтобы ввести и изменить элементы списка дел. Веб-приложение ASP.NET включает в себя маркер доступа в запросе к ресурсу веб-API на разрешение выполнения операций с элементами списка дел пользователя. 

Введите текст в текстовое поле **New Item** (Создать элемент). Щелкните **Добавить**, чтобы вызвать защищенный веб-API Azure AD B2C, добавляющий элемент списка дел.

![Добавление элемента списка дел](media/active-directory-b2c-quickstarts-web-app/add-todo-item-web.png)

## <a name="other-scenarios"></a>Другие сценарии

Другие сценарии тестирования:

* Выйдите из приложения и щелкните **To-do list** (Список дел). Обратите внимание, как вам будет предложено войти в систему, и как сохраняются ваши элементы списка. 
* Создайте учетную запись с помощью другого типа учетной записи. Например, используйте поставщик удостоверений в социальных сетях, если учетная запись создана с помощью ранее указанного адреса электронной почты.

## <a name="next-steps"></a>Дальнейшие действия

Следующим шагом является создание клиента Azure AD B2C и настройка образца для запуска с помощью клиента. 

> [!div class="nextstepaction"]
> [Создание клиента Azure Active Directory B2C на портале Azure](active-directory-b2c-get-started.md)