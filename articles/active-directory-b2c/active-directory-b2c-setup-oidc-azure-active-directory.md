---
title: Azure Active Directory B2C. Добавление поставщика Azure AD с помощью встроенных политик | Документы Майкрософт
description: Сведения о добавлении поставщика удостоверений Open ID Connect (Azure AD)
services: active-directory-b2c
documentationcenter: ''
author: parakhj
manager: krassk
editor: parakhj
ms.assetid: 7dac9545-d5f1-4136-a04d-1c5740aea499
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.topic: article
ms.devlang: na
ms.date: 04/27/2018
ms.author: parja
ms.openlocfilehash: 52a752df9cf199acf39596f49e7368bce27a8158
ms.sourcegitcommit: 6e43006c88d5e1b9461e65a73b8888340077e8a2
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/30/2018
ms.locfileid: "32309019"
---
# <a name="azure-active-directory-b2c-sign-in-using-azure-ad-accounts-through-a-built-in-policy"></a>Azure Active Directory B2C. Выполнение входа с помощью учетных записей Azure AD в рамках встроенной политики

>[!NOTE]
> Эта функция предоставляется в общедоступной предварительной версии. Ее не следует использовать в рабочих средах.

В этой статье описывается включение входа для пользователей из определенной организации Azure Active Directory (Azure AD) с помощью встроенных политик.

## <a name="create-an-azure-ad-app"></a>Создание приложения Azure AD

Чтобы включить вход для пользователей из определенной организации Azure AD, вам необходимо зарегистрировать приложение в клиенте организации Azure AD.

>[!NOTE]
> В следующих инструкциях клиент организации Azure AD будет называться "contoso.com", а клиент Azure AD B2C — "fabrikamb2c.onmicrosoft.com".

1. Войдите на [портале Azure](https://portal.azure.com).
1. На верхней панели выберите учетную запись. В списке **Каталог** выберите клиент организации Azure AD, в котором нужно зарегистрировать приложение (например, contoso.com).
1. В левой области щелкните **Все службы** и выполните поиск по запросу "регистрация приложений".
1. Выберите **Регистрация нового приложения**.
1. Введите значение имя для приложения (например, `Azure AD B2C App`).
1. Выберите в качестве типа приложения **Веб-приложение или API**.
1. В поле **URL-адрес входа** введите следующий URL-адрес, где `yourtenant` заменяется на имя вашего клиента Azure AD B2C (`fabrikamb2c.onmicrosoft.com`):

    >[!NOTE]
    >Значение для yourtenant в поле **URL-адрес входа** следует указывать в нижнем регистре.

    ```Console
    https://login.microsoftonline.com/te/yourtenant.onmicrosoft.com/oauth2/authresp
    ```

1. Сохраните идентификатор приложения, который в следующем разделе будет использоваться в качестве идентификатора клиента.
1. В колонке **Параметры** щелкните **Ключи**.
1. Введите **Описание ключа** в разделе **Пароли** и задайте для параметра **Длительность** значение "Срок действия неограничен". 
1. Нажмите кнопку **Сохранить** и запишите итоговое **Значение** ключа, которое будет использоваться в следующем разделе в качестве секрета клиента.

## <a name="configure-azure-ad-as-an-identity-provider-in-your-tenant"></a>Настройка Azure AD в качестве поставщика удостоверений для клиента

1. На верхней панели выберите учетную запись. В списке **Каталог** выберите клиента Azure AD B2C (fabrikamb2c.onmicrosoft.com).
1. [Перейдите в меню параметров Azure AD B2C](active-directory-b2c-app-registration.md#navigate-to-b2c-settings) на портале Azure.
1. В этом меню выберите пункт **Поставщики удостоверений**.
1. Нажмите **+Добавить** в верхней части колонки.
1. Укажите понятное **имя** конфигурации поставщика удостоверений. Например, введите "Contoso Azure AD".
1. Щелкните **Тип поставщика удостоверений**, выберите **Open ID Connect** и нажмите кнопку **ОК**.
1. Щелкните **Настроить этот поставщик удостоверений**.
1. В поле **URL-адрес метаданных** введите следующий URL-адрес, где `yourtenant` заменяется на имя вашего клиента Azure AD (например, `contoso.com`):

    ```Console
    https://login.microsoftonline.com/yourtenant/.well-known/openid-configuration
    ```
1. В полях **Идентификатор клиента** и **Секрет клиента** введите идентификатор приложения и ключ из предыдущего раздела.
1. Оставьте значение по умолчанию в поле **Область**, где должно быть задано `openid`.
1. Оставьте значение по умолчанию в поле **Тип ответа**, где должно быть задано `code`.
1. Оставьте значение по умолчанию в поле **Режим ответа**, где должно быть задано `form_post`.
1. При необходимости введите значение для параметра **Домен** (например, `ContosoAD`). Это значение используется при ссылке на этого поставщика удостоверений с помощью *domain_hint* в запросе. 
1. Последовательно выберите **ОК**.
1. Выберите **Сопоставление утверждений для этого поставщика удостоверений**.
1. В поле **Идентификатор пользователя** введите `oid`.
1. В поле **Отображаемое имя** введите `name`.
1. В поле **Имя** введите `given_name`.
1. В поле **Фамилия** введите `family_name`.
1. В поле **Электронная почта** введите `unique_name`.
1. Нажмите кнопку **ОК**, а затем — **Создать**, чтобы сохранить конфигурацию.

## <a name="next-steps"></a>Дополнительная информация

Добавьте только что созданный поставщик удостоверений Azure AD во встроенную политику и отправьте отзыв по адресу [AADB2CPreview@microsoft.com](mailto:AADB2CPreview@microsoft.com).
