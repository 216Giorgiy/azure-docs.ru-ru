---
title: "Azure Active Directory B2C: регистрация приложения | Документация Майкрософт"
description: "Как зарегистрировать приложение для использования Azure Active Directory B2C."
services: active-directory-b2c
documentationcenter: 
author: parakhj
manager: krassk
editor: parakhj
ms.assetid: 20e92275-b25d-45dd-9090-181a60c99f69
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 6/13/2017
ms.author: parakhj
ms.translationtype: Human Translation
ms.sourcegitcommit: 6dbb88577733d5ec0dc17acf7243b2ba7b829b38
ms.openlocfilehash: 3499ff57e650c70679dfa018eec5dbe1a6173a33
ms.contentlocale: ru-ru
ms.lasthandoff: 07/04/2017



---
# <a name="azure-active-directory-b2c-register-your-application"></a>Azure Active Directory B2C: регистрация приложения

> [!IMPORTANT]
> Управление приложениями, созданными в колонке Azure AD B2C на портале Azure, должно осуществляться в том же расположении. Если вы редактируете приложения B2C с помощью PowerShell или другого портала, их поддержка прекратится и они не будут работать с Azure AD B2C. Дополнительные сведения см. [ниже](#faulted-apps).
>

## <a name="prerequisite"></a>Предварительные требования

Чтобы создать приложение с поддержкой регистрации и входа пользователей, его сначала нужно зарегистрировать с использованием клиента Azure Active Directory B2C. Получите собственный клиент, следуя указаниям в статье о [создании клиента Azure AD B2C](active-directory-b2c-get-started.md). Если вы выполнили все шаги в этой статье, то к вашей начальной панели будет прикреплена колонка функций B2C.

[!INCLUDE [active-directory-b2c-devquickstarts-v2-apps](../../includes/active-directory-b2c-devquickstarts-v2-apps.md)]

## <a name="navigate-to-the-b2c-features-blade"></a>Переход в колонку функций B2C

Если колонка функций B2C закреплена на начальной панели, то она отобразится сразу же после входа на [портал Azure](https://portal.azure.com/) в качестве глобального администратора клиента B2C.

В колонку также можно перейти, щелкнув пункт **Больше служб** и выполнив поиск **Azure AD B2C** в области навигации слева на [портале Azure](https://portal.azure.com/).

> [!IMPORTANT]
> Вам необходимо быть глобальным администратором данного клиента B2C, чтобы получить доступ к колонке функций B2C. Доступ к ней невозможен для глобальных администраторов или пользователей из других клиентов.  Переключиться на клиент B2C можно с помощью переключателя клиента в правом верхнем углу портала Azure.
>
>

## <a name="register-a-web-application"></a>Регистрация веб-приложения

1. В колонке функций B2C на портале Azure щелкните **Приложения**.
1. Нажмите **+Добавить** в верхней части колонки.
1. Введите **имя** приложения, которое будет служить его описанием для пользователей. Например, введите "Приложение Contoso B2C".
1. Переведите переключатель **Include web app / web API** (Включить веб-приложение или веб-API) в положение **Да**.
1. Введите [правильное](#limitations) значение в поле **URL-адреса ответа**. Эти адреса представляют собой конечные точки, куда Azure AD B2C будет возвращать все токены, запрашиваемые вашим приложением. Например, введите `https://localhost:44316/`.
1. Чтобы зарегистрировать приложение, щелкните **Создать** .
1. Щелкните приложение, которое вы только что создали, и скопируйте глобальный уникальный **идентификатор клиента приложения**. Позже он вам потребуется в коде.
1. Если веб-приложение будет вызывать некоторые веб-API, защищенные с помощью Azure AD B2C, сделайте следующее:
    1. Создайте **секрет приложения**, перейдя в колонку **Ключи** и щелкнув **Создать ключ**.
    1. Щелкните **Доступ через API**, затем **Добавить** и выберите ваше веб-API и области (разрешения).

> [!NOTE]
> **Секрет приложения** — это важные учетные данные безопасности, которые должны быть надежно защищены.
>

## <a name="register-a-web-api"></a>Регистрация веб-API

1. В колонке функций B2C на портале Azure щелкните **Приложения**.
1. Нажмите **+Добавить** в верхней части колонки.
1. Введите **имя** приложения, которое будет служить его описанием для пользователей. Например, введите "Приложение Contoso B2C".
1. Переведите переключатель **Include web app / web API** (Включить веб-приложение или веб-API) в положение **Да**.
1. Введите [правильное](#choosing-a-web-app/api-reply-url) значение в поле **URL-адреса ответа**. Эти адреса представляют собой конечные точки, куда Azure AD B2C будет возвращать все токены, запрашиваемые вашим приложением. Например, введите `https://localhost:44316/`.
1. Введите **URI идентификатора приложения**. Это идентификатор, используемый для веб-API. Например, введите "примечания". Ниже будет создан полный URI идентификатора.
1. Чтобы зарегистрировать приложение, щелкните **Создать** .
1. Щелкните приложение, которое вы только что создали, и скопируйте глобальный уникальный **идентификатор клиента приложения**. Позже он вам потребуется в коде.
1. Щелкните **Опубликованные области**. Здесь вы определяете разрешения (области), которые могут быть предоставлены другим приложениям.
1. При необходимости можно добавить несколько областей. По умолчанию будут определены области user_impersonation. Так другим приложениям будет предоставлен доступ к этому API от имени пользователя, выполнившего вход. При необходимости это можно удалить.
1. Щелкните **Сохранить**.

## <a name="register-a-mobilenative-application"></a>Регистрация мобильного или собственного приложения

1. В колонке функций B2C на портале Azure щелкните **Приложения**.
1. Нажмите **+Добавить** в верхней части колонки.
1. Введите **имя** приложения, которое будет служить его описанием для пользователей. Например, введите "Приложение Contoso B2C".
1. Переведите переключатель **Include native client** (Включить собственный клиент) в положение **Да**.
1. Введите **URI перенаправления** с настраиваемой схемой. Например, com.onmicrosoft.contoso.appname://redirect/path. Укажите [правильный URI перенаправления](#choosing-a-native-application-redirect-uri), который не содержит специальных знаков, например символов подчеркивания.
1. Чтобы зарегистрировать приложение, щелкните **Сохранить**.
1. Щелкните приложение, которое вы только что создали, и скопируйте глобальный уникальный **идентификатор клиента приложения**. Позже он вам потребуется в коде.
1. Если собственное приложение будет вызывать веб-API, защищенные с помощью Azure AD B2C, сделайте следующее:
    1. Создайте **секрет приложения**, перейдя в колонку **Ключи** и щелкнув **Создать ключ**.
    1. Щелкните **Доступ через API**, затем **Добавить** и выберите ваше веб-API и области (разрешения).

> [!NOTE]
> **Секрет приложения** — это важные учетные данные безопасности, которые должны быть надежно защищены.
>

## <a name="limitations"></a>Ограничения

### <a name="choosing-a-web-appapi-reply-url"></a>Выбор URL-адреса ответа для веб-приложения или API

Сейчас приложения, зарегистрированные с помощью Azure AD B2C, ограничены определенным набором значений URL-адресов ответа. URL-адрес ответа для веб-приложений и служб должен начинаться со схемы `https`. Все его значения должны совместно использовать один домен DNS. Например, невозможно зарегистрировать веб-приложение с одним из следующих URL-адресов ответа:

`https://login-east.contoso.com`

`https://login-west.contoso.com`

Система регистрации сравнивает полное DNS-имя существующего URL-адреса ответа и DNS-имя добавляемого URL-адреса ответа. Запрос на добавление DNS-имени завершится ошибкой при выполнении любого из следующих условий.

* Если DNS-имя нового URL-адреса ответа не соответствует DNS-имени существующего URL-адреса ответа.
* Если DNS-имя нового URL-адреса ответа не является поддоменом существующего URL-адреса ответа.

Например, в приложении используется этот URL-адрес ответа:

`https://login.contoso.com`

Можно добавить его следующим образом.

`https://login.contoso.com/new`

В этом случае DNS-имя полностью совпадает. Или же можно сделать следующее.

`https://new.login.contoso.com`

В этом случае используется ссылка на поддомен DNS, login.contoso.com. Если требуется создать приложение с URL-адресами ответа login-east.contoso.com и login-west.contoso.com, то нужно добавить эти URL-адреса ответа в таком порядке:

`https://contoso.com`

`https://login-east.contoso.com`

`https://login-west.contoso.com`

Два последних значения являются поддоменами первого URL-адреса ответа (contoso.com), поэтому их можно добавить.

### <a name="choosing-a-native-application-redirect-uri"></a>Выбор URI перенаправления для собственного приложения

При выборе URI перенаправления для мобильных и собственных приложений нужно учитывать два важных момента:

* **Уникальность**. Схема URI перенаправления должна быть уникальной для каждого приложения. В нашем примере (com.onmicrosoft.contoso.appname://redirect/path) мы используем com.onmicrosoft.contoso.appname как схему. Рекомендуется следовать этому шаблону. Если два приложения используют одну и ту же схему, пользователь увидит диалоговое окно выбора приложения. Если пользователь делает неправильный выбор, произойдет ошибка входа.
* **Полнота**. URI перенаправления должен иметь схему и путь. Путь должен содержать по крайней мере одну косую черту после имени домена (например, //contoso/ будет работать, а при использовании //contoso произойдет ошибка).

Убедитесь, что URI перенаправления не содержит специальных знаков, например символов подчеркивания.

### <a name="faulted-apps"></a>Неисправные приложения

Не следует вносить изменения в приложения B2C:

* с помощью других порталов для управления приложениями, таких как [классический портал Azure](https://manage.windowsazure.com/) и [портал регистрации приложений](https://apps.dev.microsoft.com/);
* с помощью API Graph или PowerShell.

Если изменить приложение B2C, используя средства выше, а затем попытаться изменить его в колонке функций Azure AD B2C портала Azure, приложение станет неисправным и вы не сможете использовать его в Azure AD B2C. Вам придется удалить приложение и создать его заново.

Чтобы удалить приложение, перейдите на [портал регистрации приложений](https://apps.dev.microsoft.com/). Приложения отображаются только для владельцев. Прав администратора клиента недостаточно.

## <a name="next-steps"></a>Дальнейшие действия

Теперь, когда у вас есть приложение, зарегистрированное для использования Azure AD B2C, вы можете изучить одно из [кратких руководств](active-directory-b2c-overview.md#get-started), чтобы подготовить его к работе и запустить.

