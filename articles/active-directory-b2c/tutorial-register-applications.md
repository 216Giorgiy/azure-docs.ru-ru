---
title: Руководство по регистрации приложений в Azure Active Directory B2C | Документация Майкрософт
description: Сведения о регистрации приложений в Azure Active Directory B2C с помощью портала Azure.
services: active-directory-b2c
author: davidmu1
manager: mtillman
ms.service: active-directory-b2c
ms.workload: identity
ms.topic: article
ms.date: 01/11/2019
ms.author: davidmu
ms.openlocfilehash: 511e1e9f29e6ae7602a977819f5295f76236595d
ms.sourcegitcommit: f4b78e2c9962d3139a910a4d222d02cda1474440
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/12/2019
ms.locfileid: "54248726"
---
# <a name="tutorial-register-your-applications-in-azure-active-directory-b2c"></a>Руководство. Регистрация приложений в Azure Active Directory B2C

Чтобы [приложения](active-directory-b2c-apps.md) могли взаимодействовать с Azure Active Directory (Azure AD) B2C, их нужно зарегистрировать в клиенте, которым вы управляете. В этом руководстве показано, как зарегистрировать приложения с помощью портала Azure.

В этой статье раскрываются следующие темы:

> [!div class="checklist"]
> * Регистрация веб-приложения
> * Регистрация веб-API
> * Регистрация мобильного или собственного приложения

Если у вас еще нет подписки Azure, [создайте бесплатную учетную запись Azure](https://azure.microsoft.com/free/?WT.mc_id=A261C142F), прежде чем начинать работу.

## <a name="prerequisites"></a>Предварительные требования

Если вы еще не создали собственный [клиент Azure AD B2C](tutorial-create-tenant.md), создайте его сейчас. Вы можете использовать имеющийся клиент.

## <a name="register-a-web-application"></a>Регистрация веб-приложения

1. Убедитесь, что используете каталог, содержащий клиент Azure AD B2C, щелкнув **Фильтр каталога и подписки** в верхнем меню и выбрав каталог, содержащий ваш клиент.

    ![Переключение на каталог подписки](./media/tutorial-register-applications/switch-directories.png)

2. Выберите **Все службы** в левом верхнем углу окна портала Azure, а затем найдите и выберите **Azure AD B2C**.
3. Щелкните **Приложения**, а затем выберите **Добавить**.

    ![Добавить приложение](./media/tutorial-register-applications/add-application.png)

4. Введите имя приложения. Например, *webapp1*.
5. Для поля **Включить веб-приложение или веб-API** и **Разрешить неявный поток** выберите **Да**.
6. Для **URL-адреса ответа** введите конечные точки, куда Azure AD B2C возвращает все маркеры, запрашиваемые вашим приложением. Например, вы можете настроить локальное ожидание передачи данных в `https://localhost:44316`. Если вы еще не знаете номер порта, можно ввести значение заполнителя и изменить его позже. В целях тестирования вы можете задать значение `https://jwt.ms`, отображающее содержимое маркера для проверки. В рамках этого руководства задайте значение `https://jwt.ms`. 

    URL-адрес ответа должен начинаться со схемы `https`. Все его значения должны совместно использовать один домен DNS. Например, если приложению предоставлен URL-адрес ответа `https://login.contoso.com`, вы можете добавить к нему URL-адрес `https://login.contoso.com/new`. Вы также можете добавить поддомен DNS к домену `login.contoso.com` и ссылаться на новый домен, например `https://new.login.contoso.com`. Если необходимо приложение с URL-адресами ответа `login-east.contoso.com` и `login-west.contoso.com`, необходимо добавить эти URL-адреса в таком порядке: `https://contoso.com`, `https://login-east.contoso.com`, `https://login-west.contoso.com`. Два последних значения являются поддоменами первого URL-адреса ответа (`contoso.com`), поэтому их можно добавить.

7. Нажмите кнопку **Создать**.

    ![Настройка свойств приложения](./media/tutorial-register-applications/application-properties.png)

### <a name="create-a-client-secret"></a>Создание секрета клиента

Если вы обмениваете код приложения на маркер, вам нужно создать секрет приложения.

1. Выберите **Ключи** и щелкните **Создать ключ**.

    ![Создание ключей](./media/tutorial-register-applications/generate-keys.png)

2. Чтобы представить ключ, нажмите **Сохранить**. Запишите значение параметра **Ключ приложения**. Это значение используется в качестве секрета приложения в коде приложения.

    ![Сохранение ключа](./media/tutorial-register-applications/save-key.png)
    
3. Щелкните **Доступ через API**, **Добавить** и выберите свой веб-API и области (разрешения).

    ![Настройка доступа к API](./media/tutorial-register-applications/api-access.png)

## <a name="register-a-web-api"></a>Регистрация веб-API

1. Щелкните **Приложения**, а затем выберите **Добавить**.
3. Введите имя приложения. Например, *webapi1*.
4. Для поля **Включить веб-приложение или веб-API** и **Разрешить неявный поток** выберите **Да**.
5. Для **URL-адреса ответа** введите конечные точки, куда Azure AD B2C возвращает все маркеры, запрашиваемые вашим приложением. Например, можно задать его для локального ожидания передачи данных в `https://localhost:44316`. Если вы еще не знаете номер порта, можно ввести значение заполнителя и изменить его позже.
6. Для поля **URI идентификатора приложения** выберите идентификатор, используемый для веб-API. Полный URI код с доменом создается автоматически. Например, `https://contosotenant.onmicrosoft.com/api`.
7. Нажмите кнопку **Создать**.
8. Выберите созданное вами приложение *webapi1*, а затем щелкните **Опубликованные области**, чтобы добавить дополнительные области (при необходимости). Область `user_impersonation` определяется по умолчанию. Область `user_impersonation` предоставляет доступ другим приложениям к этому API от имени пользователя, выполнившего вход. При желании можно удалить область `user_impersonation`.

    ![Настройка опубликованных областей](./media/tutorial-register-applications/published-scopes.png)


## <a name="register-a-mobile-or-native-application"></a>Регистрация мобильного или собственного приложения

1. Щелкните **Приложения**, а затем выберите **Добавить**.
2. Введите имя приложения. Например, *nativeapp1*.
3. Для поля **Включить веб-приложение или веб-интерфейс API** выберите **Нет**.
4. Для поля **Включить собственный клиент** выберите **Да**.
5. Для **URI перенаправления** введите допустимый URI перенаправления с настраиваемой схемой. При выборе URI перенаправления нужно учитывать два важных момента:

    - **Уникальность**. Схема URI перенаправления должна быть уникальной для каждого приложения. В примере `com.onmicrosoft.contoso.appname://redirect/path` `com.onmicrosoft.contoso.appname` представляет собой схему. Рекомендуется придерживаться этого шаблона. Если два приложения используют ту же схему, пользователю предоставляется возможность выбрать приложение. Если пользователь сделает неправильный выбор, произойдет ошибка входа.
    - **Полнота**. В URI перенаправления должна быть схема и путь. Путь должен содержать по крайней мере одну косую черту после имени домена. `//contoso/` — правильно, `//contoso` — неправильно. Убедитесь, что URI перенаправления не содержит специальных знаков, например символов подчеркивания.

6. Нажмите кнопку **Создать**.

## <a name="next-steps"></a>Дополнительная информация

Из этой статьи вы узнали, как выполнять следующие задачи:

> [!div class="checklist"]
> * Регистрация веб-приложения
> * Регистрация веб-API
> * Регистрация мобильного или собственного приложения

> [!div class="nextstepaction"]
> [Руководство. Создание потоков пользователей в Azure Active Directory B2C ](tutorial-create-user-flows.md)