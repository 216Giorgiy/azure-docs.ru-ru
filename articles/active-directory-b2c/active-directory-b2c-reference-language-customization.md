---
title: "Azure AD B2C. Настройка языка | Документация Майкрософт"
description: 
services: active-directory-b2c
documentationcenter: 
author: sama
ms.assetid: eec4d418-453f-4755-8b30-5ed997841b56
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.topic: article
ms.devlang: na
ms.date: 02/26/2018
ms.author: sama
ms.openlocfilehash: 332c6b4ffd841a2c7aef9db5c8ba9e843790f4d6
ms.sourcegitcommit: 782d5955e1bec50a17d9366a8e2bf583559dca9e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/02/2018
---
# <a name="azure-active-directory-b2c-using-language-customization"></a>Azure Active Directory B2C. Настройка языка

>[!NOTE]
>Эта функция предоставляется в общедоступной предварительной версии.
>

Настройка языка позволяет политике поддерживать разные языки в соответствии с потребностями пользователей.  Корпорация Майкрософт предоставляет переводы на 36 языках (см. раздел [Дополнительная информация](#additional-information)). Кроме того, вы можете предоставить собственный перевод на любой язык.  Даже если вам требуется только один язык, на странице можно настроить любой текст.  

## <a name="how-does-language-customization-work"></a>Как работает настройка языка?
Настройка языка позволяет выбрать языки, доступные пользователю.  Если эта функция включена, в приложении можно предоставить параметр строки запроса ui_locales.  При вызове Azure AD B2C выполняется перевод страницы на указанный языковой стандарт.  Такой тип конфигурации предоставляет вам полный контроль над языками, доступными пользователю, а языковые параметры браузера клиента игнорируются. В некоторых случаях вам может не понадобиться такой уровень контроля за тем, какие языки будут доступны пользователю.  Если не предоставить параметр ui_locales, настройка языка будет зависеть от параметров браузера.  Вы сможете управлять тем, какие языки будут доступны пользователю, добавив их в качестве поддерживаемых.  Если браузер клиента настроен для отображения на языке, который не требуется поддерживать, вместо него будет отображаться язык, выбранный по умолчанию для поддерживаемых языков.

1. **Язык, указанный с помощью ui-locales**. После включения настройки языка путь взаимодействия пользователя переводится на указанный язык.
2. **Язык, запрашиваемый браузером**. Если параметр ui-locales не указан, используется язык, запрашиваемый браузером, **если он был включен в поддерживаемые языки**.
3. **Язык политики по умолчанию.** Если в браузере не указан язык или указан неподдерживаемый язык, будет использоваться язык политики по умолчанию.

>[!NOTE]
>Если используются пользовательские атрибуты, необходимо предоставить собственный перевод. Подробные сведения см. в разделе [Настройка строк](#customize-your-strings).
>

## <a name="support-uilocales-requested-languages"></a>Поддержка языков, запрашиваемых ui_locales 
Сначала необходимо включить функцию настройки языка для политик, которые были созданы до выхода общедоступного выпуска этой функции.  Для политик, созданных позже, настройка языка включена по умолчанию.  Включив в политике настройки языка, вы сможете управлять языками, доступными пользователю, добавив параметр ui_locales.
1. [Чтобы перейти на страницу функций B2C на портале Azure, выполните следующие действия.](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-app-registration#navigate-to-b2c-settings)
2. Перейдите к политике, которую нужно включить.
3. Щелкните **Настройка языка**.  
4. Сверху щелкните **Включение настройки языка**.
5. Прочитайте диалог и щелкните "Да".

## <a name="select-which-languages-in-your-user-journey-are-enabled"></a>Выбор языков для включения в путь взаимодействия пользователя 
Включите набор языков для пути взаимодействия пользователя, если параметр ui_locales не задан.
1. Убедитесь, что в политике включена настройка языка, описанная выше.
2. На странице **Изменение политики** выберите **Настройка языка**.
3. Выберите необходимый язык.
4. На панели свойств переведите переключатель **Включено** в положение "Да".  
5. Щелкните **Сохранить** в верхней части панели.

>[!NOTE]
>Если параметр ui_locales не указан, то страница будет переведена на язык браузера клиента, только если эта функция включена.
>

## <a name="customize-your-strings"></a>Настройка строк
Настройка языка позволяет настроить любую строку, с которой взаимодействует пользователь.
1. Убедитесь, что в политике включена настройка языка, описанная выше.
2. На странице **Изменение политики** выберите **Настройка языка**.
3. Выберите нужный язык.
4. Выберите страницу, которую требуется изменить.
5. Нажмите кнопку **Скачать значения по умолчанию** (или **Скачать переопределения**, если этот язык ранее изменялся). 

В результате будет создан JSON-файл, который можно использовать для изменения строк.

### <a name="changing-any-string-on-the-page"></a>Изменение любой строки на странице
1. Откройте скачанный JSON-файл в редакторе JSON.
2. Найдите элемент, который требуется изменить.  Вы можете найти `StringId` искомой строки или найти `Value`, которое вы хотите изменить.
3. Замените атрибут `Value` значением, которое требуется отобразить.
4. Для каждой строки, которую необходимо изменить, переведите переключатель `Override` в положение **True**.
5. Сохраните файл и отправьте изменения (элемент управления отправкой находится там же, где вы загружали JSON-файл). 

>[!IMPORTANT]
>Если необходимо переопределить строку, измените значение `Override` на `true`.  В противном случае запись не учитывается. 
>

### <a name="changing-extension-attributes"></a>Изменение атрибутов расширения
Если вы хотите изменить или добавить в JSON строку пользовательского атрибута, это нужно сделать в следующем формате:
```JSON
{
  "LocalizedStrings": [
    {
      "ElementType": "ClaimType",
      "ElementId": "extension_<ExtensionAttribute>",
      "StringId": "DisplayName",
      "Override": true,
      "Value": "<ExtensionAttributeValue>"
    }
    [...]
}
```

Замените `<ExtensionAttribute>` именем пользовательского атрибута.  

Замените `<ExtensionAttributeValue>` новой строкой для отображения.

### <a name="using-localizedcollections"></a>Использование LocalizedCollections
Если вы хотите предоставить список значений для ответов, необходимо создать `LocalizedCollections`.  `LocalizedCollections` является массивом пар `Name` и `Value`.  `Name` будет отображаться, а `Value` — возвращаться в утверждении.  Добавьте `LocalizedCollections` в следующем формате.

```JSON
{
  "LocalizedStrings": [...],
  "LocalizedCollections": [{
      "ElementType":"ClaimType", 
      "ElementId":"<UserAttribute>",
      "TargetCollection":"Restriction",
      "Override": true,
      "Items":[
           {
                "Name":"<Response1>",
                "Value":"<Value1>"
           },
           {
                "Name":"<Response2>",
                "Value":"<Value2>"
           }
     ]
  }]
}
```

* `ElementId` представляет собой пользовательский атрибут, ответом на который является `LocalizedCollections`.
* `Name` является значением, которое видит пользователь.
* `Value` возвращается в утверждении при выборе этого параметра.

### <a name="upload-your-changes"></a>Загрузка изменений
1. После завершения изменений в файле JSON перейдите обратно в клиент B2C.
2. На странице **Изменение политики** выберите **Настройка языка**.
3. Выберите язык, для которого вы хотите предоставить переводы.
4. Выберите страницу, которую вы хотите перевести.
5. Щелкните значок папки и выберите JSON-файл для отправки.
6. Это изменение автоматически сохраняется в политику.

## <a name="using-page-ui-customization-with-language-customization"></a>Использование настройки пользовательского интерфейса страницы с настройкой языка

Локализация HTML-содержимого выполняется двумя способами.  Это можно сделать, включив [настройку языка](active-directory-b2c-reference-language-customization.md).  Таким образом, Azure AD B2C сможет переадресовать параметр подключения Open ID Connect, `ui-locales` на конечную точку.  Сервер содержимого может использовать этот параметр для предоставления настроенных страниц HTML на конкретном языке.

Кроме того, можно извлечь содержимое из разных расположений, в зависимости от используемого языкового стандарта.  В конечной точке с поддержкой CORS можно настроить структуру папок для размещения содержимого для определенных языков. Мы выберем правильный язык, если вы укажите следующее подстановочное значение: `{Culture:RFC5646}`.  Например, если это код URI пользовательской страницы,

```
https://wingtiptoysb2c.blob.core.windows.net/{Culture:RFC5646}/wingtip/unified.html
```
можно загрузить страницу в `fr`, и она будет извлекать содержимое HTML и CSS из следующего адреса:
```
https://wingtiptoysb2c.blob.core.windows.net/fr/wingtip/unified.html
```

## <a name="custom-locales"></a>Пользовательские языковые стандарты

Вы также можете добавить языки, на которые корпорация Майкрософт в настоящее время не предоставляет переводы.  Необходимо будет предоставить переводы для всех строк в политике.

1. На странице **Изменение политики** выберите **Настройка языка**.
2. В верхней части страницы выберите **Добавить пользовательский язык**.
3. В открывшейся области контекста определите язык, для которого предоставляется перевод, введя код допустимого языкового стандарта.
4. Для каждой страницы можно загрузить набор переопределений для английского языка и начать работу над переводами.
5. После завершения работы с JSON-файлами их можно загрузить для каждой страницы.
6. Выберите **Включить**, после чего политика сможет отображать этот язык для пользователя.
7. Сохраните язык после его включения.

## <a name="additional-information"></a>Дополнительная информация

### <a name="page-ui-customization-labels-are-persisted-as-your-first-set-of-overrides-once-language-customization-is-enabled"></a>После включения параметра "Настройка языка" метки настройки пользовательского интерфейса страницы сохраняются в качестве первого набора переопределений.
При включении настройки языка все предыдущие изменения меток, использующих настройки пользовательского интерфейса страницы, сохраняются в JSON-файле для английского языка (en).  Вы можете продолжить изменять метки и другие текстовые строки, отправив языковые ресурсы в настройках языка.
### <a name="microsoft-is-committed-to-provide-the-most-up-to-date-translations-for-your-use"></a>Корпорация Майкрософт стремится предоставить наиболее актуальные переводы
Мы постоянно улучшаем переводы в соответствии с вашими требованиями.  Мы выявляем ошибки и изменения в глобальной терминологии и обновляем ее, обеспечивая непрерывную поддержку пользователей.
### <a name="support-for-right-to-left-languages"></a>Поддержка языков с написанием справа налево
Сейчас языки с написанием справа налево не поддерживаются. Если вам необходима эта функция, проголосуйте за нее на форуме [отзывов и предложений по Azure](https://feedback.azure.com/forums/169401-azure-active-directory/suggestions/19393000-provide-language-support-for-right-to-left-languag).
### <a name="social-identity-provider-translations"></a>Переводы для поставщиков удостоверений в социальных сетях
Мы предоставляем параметр OIDC ui_locales при входе в социальные сети, который не используется некоторыми поставщиками удостоверений, включая Facebook и Google. 
### <a name="browser-behavior"></a>Поведение браузера
Chrome и Firefox запрашивают настроенный в них язык, и если этот язык поддерживается, он отображается перед языком по умолчанию.  Сейчас Edge не запрашивает язык и сразу отображает язык по умолчанию.

### <a name="what-languages-are-supported"></a>Какие языки поддерживаются?

| Язык              | Код языка |
|-----------------------|---------------|
| Бенгальский                | bn            |
| Чешский                 | cs            |
| Датский                | da            |
| Немецкий                | de            |
| Греческий                 | el            |
| Английский               | en            |
| Испанский               | es            |
| Финский               | fi            |
| Французский                | fr            |
| Гуджарати              | gu            |
| Хинди                 | hi            |
| Хорватский              | hr            |
| Венгерский             | hu            |
| Итальянский               | it            |
| Японский              | ja            |
| Каннада               | kn            |
| Корейский                | ko            |
| Малаялам             | ml            |
| Маратхи               | mr            |
| Малайский                 | ms            |
| Норвежский (букмол)      | nb            |
| Нидерландский                 | nl            |
| Панджаби               | pa            |
| Польский                | pl            |
| Португальский (Бразилия)   | pt-br         |
| Португальский (Португалия) | pt-pt         |
| Румынский              | ro            |
| Русский               | ru            |
| Словацкий                | sk            |
| Шведский               | sv            |
| Тамильский                 | ta            |
| Телугу                | te            |
| Тайский                  | th            |
| Турецкий               | tr            |
| Китайский (упрощенное письмо)  | zh-hans       |
| Китайский (традиционное письмо) | zh-hant       |
