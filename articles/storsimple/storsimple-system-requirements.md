<properties 
   pageTitle="Требования к системе StorSimple | Microsoft Azure" 
   description="Описание требований к системе и рекомендаций по программному обеспечению, высокой доступности и сетям для решения Azure StorSimple." 
   services="storsimple" 
   documentationCenter="NA" 
   authors="alkohli" 
   manager="carolz" 
   editor=""/>

<tags
   ms.service="storsimple"
   ms.devlang="NA"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="TBD" 
   ms.date="10/30/2015"
   ms.author="alkohli"/>

# Программное обеспечение StorSimple, высокий уровень доступности и требования к сети

## Обзор

Добро пожаловать в Microsoft Azure StorSimple. В этой статье описываются важные требования к системе и рекомендации для устройства StorSimple и клиентов хранилища, получающих доступ к устройству. Прежде чем развертывать систему Azure StorSimple, советуем внимательно ознакомиться с приведенной ниже информацией и при необходимости возвращаться к ней во время развертывания и последующих действий.

В приведенных ниже разделах описаны требования к системе.

- В разделе **Требования к программному обеспечению для клиентов хранилища** перечислены поддерживаемые операционные системы и все дополнительные требования к этим системам.
- В разделе **Требования к сети для устройства StorSimple** представлена информация о портах, которые должны быть открыты в брандмауэре для предоставления разрешений для iSCSI, облака или трафика управления.
- В разделе **Требования к высокой доступности для StorSimple** описываются требования к высокой доступности и рекомендации для устройства StorSimple и главного компьютера. 


## Требования к программному обеспечению для клиентов хранилища 

Следующие требования к программному обеспечению предназначены для клиентов хранилища, которые получают доступ к устройству StorSimple.

| Поддерживаемые операционные системы | Требуемая версия | Дополнительные требования и примечания |
| --------------------------- | ---------------- | ------------- |
| Windows Server | 2008R2 с пакетом обновления 1 (SP1), 2012, 2012R2 |Тома StorSimple iSCSI поддерживаются только на следующих типах дисков Windows:<ul><li>простой том на базовом диске;</li><li>простой и зеркальный тома на динамическом диске.</li></ul>Тонкая подготовка Windows Server 2012 и функции ODX поддерживаются при использовании тома StorSimple iSCSI.<br><br>StorSimple может создавать только тома с тонкой подготовкой. Она не может создавать полностью или частично подготовленные тома.<br><br>Переформатирование тома с тонкой подготовкой может занять длительное время. Вместо переформатирования рекомендуется удалить том, а затем создать новый. Если все же требуется переформатировать том, выполните следующие действия.<ul><li>Выполните следующую команду до переформатирования, чтобы избежать задержек при реорганизации пространства: <br>`fsutil behavior set disabledeletenotify 1`</br></li><li>После завершения форматирования используйте следующую команду, чтобы реорганизовать пространство:<br>`fsutil behavior set disabledeletenotify 0`</br></li><li>Примените исправление Windows Server 2012 к компьютеру Windows Server в соответствии с указаниями в [статье 2878635 базы знаний](https://support.microsoft.com/kb/2870270).</li></ul></li></ul></ul> При настройке диспетчера моментальных снимков StorSimple или адаптера StorSimple для SharePoint см. раздел [Требования к программному обеспечению для дополнительных компонентов](#software-requirements-for-optional-components).|
| VMWare ESX | 5\.1 | Поддерживается при использовании VMware vSphere 5.1 в качестве клиента iSCSI. Функция блокировки VAAI поддерживается при использовании VMware vSphere версии 5.1 на устройствах StorSimple. 
| Linux RHEL/CentOS | 5 и 6 | Поддержка клиентов Linux iSCSI с инициатором Open-iSCSI версий 5 и 6. |
| Linux | SUSE Linux 11 | |
 >[AZURE.NOTE]StorSimple в настоящее время не поддерживает IBM AIX.

## Требования к программному обеспечению для дополнительных компонентов

Следующие требования к программному обеспечению применимы к дополнительным компонентам StorSimple (диспетчеру моментальных снимков StorSimple и адаптеру StorSimple для SharePoint).

| Компонент | Платформа узла | Дополнительные требования и примечания |
| --------------------------- | ---------------- | ------------- |
| Диспетчер моментальных снимков StorSimple | Windows Server 2008 R2 с пакетом обновления 1, 2012, 2012 R2 | Использование диспетчера моментальных снимков StorSimple в Windows Server требуется для создания резервных копий или восстановления зеркальных динамических дисков и всех резервных копий, согласованных с приложениями.<br> Диспетчер моментальных снимков StorSimple поддерживается только в Windows Server 2008 R2 с пакетом обновления 1 (64-разрядная версия), Windows 2012 R2 и Windows Server 2012.<ul><li>При использовании Window Server 2012 необходимо установить пакет .NET 3.5–4.5 до установки диспетчера моментальных снимков StorSimple.</li><li>При использовании Windows Server 2008 R2 с пакетом обновления 1 необходимо установить Windows Management Framework 3.0 до установки диспетчера моментальных снимков StorSimple.</li></ul> |
| Адаптер StorSimple для SharePoint | Windows Server 2008 R2 с пакетом обновления 1, 2012, 2012 R2 |<ul><li>Адаптер StorSimple для SharePoint поддерживается только в SharePoint 2010 и SharePoint 2013.</li><li>Для RBS требуется SQL Server Enterprise Edition версии 2008 R2 или 2012.</li></ul>|
 
## Требования к сети для устройства StorSimple

Устройство StorSimple является защищенным. Однако для разрешения использования iSCSI, облака или трафика управления необходимо открыть порты. В следующей таблице перечислены порты, которые необходимо открыть в брандмауэре. В этой таблице *входящий* относится к направлению, из которого клиент запрашивает доступ к вашему устройству. *Исходящий* указывает на направление, в котором устройство StorSimple отправляет данные за пределами развертывания, например в Интернет.

| Порт № <sup>1, 2</sup> | Входящий или исходящий | Область порта | Обязательно | Примечания |
|------------------------|-----------|------------|----------|-------| 
|TCP 80 (HTTP)<sup>3</sup>| Исходящий | WAN | Нет |<ul><li>Исходящий порт используется для доступа к Интернету и извлечения обновлений.</li><li>Исходящий веб-прокси доступен для настройки пользователями.</li><li>Чтобы разрешить системные обновления, необходимо также открыть порт для исправленных IP-адресов контроллера.</li></ul> |
|TCP 443 (HTTPS)<sup>3</sup>| Исходящий | WAN | Да |<ul><li>Исходящий порт используется для получения доступа к данным в облаке.</li><li>Исходящий веб-прокси доступен для настройки пользователями.</li><li>Чтобы разрешить системные обновления, необходимо также открыть порт для исправленных IP-адресов контроллера.</li></ul>|
|UDP 53 (DNS) | Исходящий | WAN | В некоторых случаях. См. примечания. |Этот порт требуется, только если вы используете веб-DNS-сервер. |
| UDP 123 (NTP) | Исходящий | WAN | В некоторых случаях. См. примечания. |Этот порт требуется, только если вы используете веб-NTP-сервер. |
| TCP 9354 | Исходящий | WAN | В некоторых случаях. См. примечания. |Исходящий порт используется устройством StorSimple Manager для взаимодействия с службой управления StorSimple. Этот порт требуется, если существующая сеть не поддерживает использование HTTP 1.1 для подключения к Интернету; например, если вы используете прокси-сервер на основе HTTP 1.0.<br> При подключении через прокси-сервер см. дополнительные сведения в разделе [Требования к служебной шине](https://msdn.microsoft.com/library/azure/ee706729.aspx). |
| 3260 (iSCSI) | В | Локальная сеть | Нет | Этот порт используется для доступа к данным по iSCSI.|
| 5985 | В | Локальная сеть | Нет | Диспетчер моментальных снимков StorSimple использует входящий порт для взаимодействия с устройством StorSimple.<br>Этот порт также используется при удаленном подключении к Windows PowerShell для StorSimple по протоколу HTTP. |
| 5986 | В | Локальная сеть | Нет | Этот порт используется, когда вы удаленно подключаетесь к Windows PowerShell для StorSimple по протоколу HTTPS. |

<sup>1</sup> Входящие порты не требуется открывать при общем доступе через Интернет.

<sup>2</sup> Если на нескольких портах настроена конфигурация шлюза, запрос на исходящий перенаправленный трафик будет основан на запросе маршрутизации порта, описанном в разделе [Маршрутизация порта](#port-routing) ниже.

<sup>3</sup> Исправленные IP-адреса контроллера на устройстве StorSimple должны быть маршрутизируемыми и иметь возможность подключения к Интернету. Исправленные IP-адреса используются для обслуживания обновлений устройства. Если контроллеры устройства не могут подключиться к Интернету по исправленным IP-адресам, вы не сможете обновить устройство StorSimple.

> [AZURE.IMPORTANT]Убедитесь, что брандмауэр не изменяет и не расшифровывает SSL-трафик между устройством StorSimple и средой Azure.

### Маршрутизация портов

Маршрутизация портов может быть разной в зависимости от версии программного обеспечения, выполняющейся на вашем устройстве StorSimple.

- Если на устройстве запущена версия программного обеспечения, более ранняя, чем обновление 1, например выпуск GA, 0.1, 0.2 или 0.3, то маршрутизация портов выполняется следующим образом.

     Последний настроенный сетевой интерфейс с Ethernet 10 Гбит/с > Другой сетевой интерфейс с Ethernet 10 Гбит/с > Последний настроенный сетевой интерфейс с Ethernet 1 Гбит/с > Другой сетевой интерфейс с Ethernet 1 Гбит/с

- Если на устройстве выполняется обновление 1, то маршрутизация портов происходит следующим образом.

     DATA 0 > Последний настроенный сетевой интерфейс с Ethernet 10 Гбит/с > Другой сетевой интерфейс с Ethernet 10 Гбит/с > Последний настроенный сетевой интерфейс с Ethernet 1 Гбит/с > Другой сетевой интерфейс с Ethernet 1 Гбит/с

    В обновлении 1 указаны самые низкие метрики маршрутизации DATA 0; следовательно, весь облачный трафик перенаправляется через DATA 0. На это следует обратить внимание, если на вашем устройстве StorSimple больше одного облачного сетевого интерфейса.

### Рекомендации по сетям

В дополнение к указанным выше требованиям к сети для оптимальной производительности решения StorSimple придерживайтесь следующих рекомендаций.

- Убедитесь, что на устройстве StorSimple всегда доступна выделенная пропускная способность в 40 Мбит/с (или больше). Эту пропускную способность не следует использовать совместно с другими приложениями.

- Убедитесь в наличии постоянного подключения к Интернету. Прерывающееся или ненадежное подключение к Интернету на устройстве приведет к неподдерживаемой конфигурации.

- Изолируйте iSCSI и облачный трафик, получив выделенные сетевые интерфейсы на устройстве для доступа к iSCSI и облаку. Дополнительную информацию см. в разделе об [изменении сетевых интерфейсов](storsimple-modify-device-config.md#modify-network-interfaces) на устройстве StorSimple.

- Не используйте конфигурацию протокола LACP для сетевых интерфейсов. Эта конфигурация не поддерживается.


## Требования к высокой доступности для StorSimple

Аппаратная платформа, входящая в состав решения StorSimple, содержит функции обеспечения доступности и надежности, на которых основана высокодоступная, отказоустойчивая инфраструктура хранилища в центре обработки данных. Однако для обеспечения доступности решения Azure StorSimple необходимо выполнять требования и рекомендации. Перед развертыванием Azure StorSimple внимательно ознакомьтесь со следующими требованиями и рекомендациями для устройства StorSimple и подключенных главных компьютеров.

Дополнительную информацию о мониторинге и обслуживании компонентов оборудования устройства StorSimple см. в статье [Использование службы диспетчера StorSimple для мониторинга компонентов оборудования и их состояния](storsimple-monitor-hardware-status.md) и [Замена компонентов оборудования StorSimple](storsimple-hardware-component-replacement.md).

### Требования к высокой доступности и процедуры для устройства StorSimple

Внимательно ознакомьтесь со следующими сведениями, чтобы обеспечить высокую доступность устройства StorSimple.

#### Блоки питания и охлаждения

В устройства StorSimple включены избыточные модули питания и охлаждения с возможностью горячей замены (PCM). Каждый модуль PCM имеет достаточную емкость для предоставления службы всему корпусу. Для высокой доступности необходимо установить оба модуля PCM.

- Подключите модули PCM к разным источникам питания, чтобы обеспечить доступность в случае выхода из строя одного из них.
- При сбое PCM немедленно запросите сменный модуль.
- Модуль PCM следует извлекать только тогда, когда у вас есть сменный модуль, который вы готовы установить.
- Не извлекайте оба модуля PCM одновременно. В модуль PCM входит модуль резервного аккумулятора. Удаление обоих модулей PCM приведет к завершению работы без защиты аккумулятора, и состояние устройства не будет сохранено. Дополнительную информацию об аккумуляторе см. в разделе [Обслуживание модуля резервного аккумулятора](storsimple-battery-replacement.md#maintain-the-backup-battery-module).

#### Модули контроллера

В устройства StorSimple включены избыточные модули контроллера с возможностью горячей замены. Модули контроллера работают в режиме "активный-пассивный". Один модуль контроллера всегда работает и предоставляет службу, тогда как другой модуль контроллера остается пассивным. Пассивный модуль контроллера включается при сбое или извлечении активного модуля контроллера. Каждый модуль контроллера содержит достаточную емкость для предоставления службы для всего корпуса. Для обеспечения высокой доступности необходимо установить оба модуля контроллера.

- Убедитесь, что оба модуля контроллера всегда установлены.

- При сбое модуля контроллера немедленно запросите сменный модуль.

- Модуль контроллера следует извлекать, только когда у вас есть сменный модуль, который вы готовы установить. Извлечение модуля на длительный период времени повлияет на воздушный поток и, следовательно, на охлаждение системы.

- Убедитесь, что сетевые подключения к обоим модулям контроллера идентичны, а подключенные сетевые интерфейсы содержат одинаковую конфигурацию сети.

- При сбое модуля контроллера или если требуется его замена, убедитесь, что другой модуль контроллера находится в активном состоянии перед заменой модуля контроллера со сбоем. Инструкции по проверке активности контроллера см. в разделе [Определение активного контроллера устройства](storsimple-controller-replacement.md#identify-the-active-controller-on-your-device).

- Не извлекайте одновременно оба модуля контроллера. При отработке отказа контроллера не завершайте работу модуля контроллера в ждущем режиме и не извлекайте его из корпуса.

- После отработки отказа контроллера подождите по крайней мере пять минут перед тем, как извлекать один из модулей контроллера.

#### Сетевые интерфейсы

Каждый модуль контроллера устройства StorSimple содержит четыре сетевых интерфейса с Ethernet 1 Гбит/с и Ethernet 10 Гбит/с.

- Убедитесь, что сетевые подключения к обоим модулям контроллера одинаковы, а сетевые интерфейсы, к которым подключены интерфейсы модуля, имеют одинаковую конфигурацию сети.

- По возможности развертывайте сетевые подключения в разных коммутаторах, чтобы обеспечить доступность службы при сбое сетевого устройства.

- При отключении единственного или последнего интерфейса с поддержкой iSCSI (с назначенными IP-адресами) сначала отключите интерфейс, а затем отсоедините кабели. Если интерфейс будет отключен первым, это вызовет отработку отказа активного контроллера в пассивном. Если в пассивном контроллере также отключены соответствующие интерфейсы, оба контроллера будут несколько раз перезагружены перед установкой на одном контроллере.

- Подключите по крайней мере два интерфейса DATA к сети из каждого модуля контроллера.

- Если вы включили два интерфейса с Ethernet 10 Гбит/с, разверните их на разных коммутаторах.

- По возможности используйте MPIO на серверах, чтобы убедиться, что серверы допускают сбой ссылки, сети или интерфейса.

Дополнительную информацию о настройке сети на устройстве для обеспечения высокой доступности и производительности см. в разделах [Установка устройства StorSimple 8100](storsimple-8100-hardware-installation.md#cable-your-storsimple-8100-device) и [Установка устройства StorSimple 8600](storsimple-8600-hardware-installation.md#cable-your-storsimple-8600-device).

#### SSD и HDD

Устройства StorSimple включают твердотельные накопители (SSD) и жесткие диски (HDD), которые защищены с помощью зеркальных пространств, а горячий резерв предоставляется для HDD. При использовании зеркальных пространств допускается сбой одного или нескольких SSD или HDD.

- Убедитесь, что все модули SSD и HDD установлены.

- При сбое SSD или HDD немедленно запросите замену.

- При сбое SSD или HDD, а также если требуется замена, убедитесь, что вы извлекли только SSD или HDD, требующие замены.

- Не извлекайте более одного SSD или HDD из системы одновременно. Сбой двух или более дисков определенного типа (HDD, SSD) или последовательный сбой в течение короткого периода времени может привести к неправильной работе системы и вероятности потери данных. В этом случае [обратитесь в службу поддержки Майкрософт](storsimple-contact-microsoft-support.md) за помощью.

- Во время замены отслеживайте **Состояние оборудования** на странице **Обслуживание** для дисков в SSD и HDD. Зеленый флажок проверки состояния означает, что диски работают, тогда как красный флажок указывает на сбой SSD или HDD.

- Рекомендуется настроить облачные моментальные снимки для всех томов, которые нужно защитить в случае сбоя системы.

#### Корпус EBOD

В модель устройства StorSimple 8600 кроме основного корпуса входит корпус EBOD. EBOD содержит контроллеры EBOD и жесткие диски (HDD), которые защищены с помощью зеркальных пространств. При использовании зеркальных пространств устройство может допустить сбой одного или нескольких HDD. Корпус EBOD подключен к основному корпусу с помощью резервных кабелей SAS.

- Убедитесь, что оба модуля контроллера для корпуса EBOD, оба кабеля SAS и все жесткие диски установлены.

- При сбое модуля контроллера для корпуса EBOD немедленно запросите сменный модуль.

- При сбое модуля контроллера для корпуса EBOD убедитесь, что модуль активный перед тем, как заменить модуль со сбоем. Инструкции по проверке активности контроллера см. в разделе [Определение активного контроллера устройства](storsimple-controller-replacement.md#identify-the-active-controller-on-your-device).

- Во время замены модуля контроллера EBOD постоянно отслеживайте состояние компонента в службе диспетчера StorSimple в разделе **Обслуживание** — **Оборудование**.

- При сбое кабеля SAS или необходимости замены (для определения этого нужно обратиться в службу поддержки Майкрософт) убедитесь, что вы удалили только тот кабель SAS, для которого требуется замена.

- Не отключайте одновременно оба кабеля SAS от системы.

### Рекомендации по обеспечению высокой доступности главных компьютеров

Внимательно ознакомьтесь с этими рекомендациями, чтобы обеспечить высокую доступность узлов, подключенных к устройству StorSimple.

- Настройте StorSimple с помощью [конфигураций кластера двухузлового файлового сервера][1]. При удалении одиночных точек сбоя и создании избыточности на стороне узла все решение становится высокодоступным.

- Используйте постоянно доступные общие папки в Windows Server 2012 (SMB 3.0) для обеспечения высокой доступности во время отработки отказа контроллеров хранилища. Дополнительные сведения о настройке кластеров для файловых серверов и общих папок в Windows Server 2012 см. в этом [видео](http://channel9.msdn.com/Events/IT-Camps/IT-Camps-On-Demand-Windows-Server-2012/DEMO-Continuously-Available-File-Shares).

## Дальнейшие действия

- [Узнайте о системных ограничениях StorSimple](storsimple-limits.md).
- [Узнайте о развертывании решения StorSimple](storsimple-deployment-walkthrough.md).
 
<!--Reference links-->
[1]: https://technet.microsoft.com/library/cc731844(v=WS.10).aspx

<!---HONumber=Nov15_HO2-->