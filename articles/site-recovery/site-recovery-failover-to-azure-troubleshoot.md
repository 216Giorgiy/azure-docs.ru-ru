---
title: Устранение ошибок отработки отказа в Azure| Документация Майкрософт
description: В этой статье описываются способы устранения распространенных ошибок при отработке отказа в Azure.
services: site-recovery
documentationcenter: ''
author: ponatara
manager: abhemraj
editor: ''
ms.assetid: ''
ms.service: site-recovery
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: storage-backup-recovery
ms.date: 07/06/2018
ms.author: ponatara
ms.openlocfilehash: b7b5dcd88b6e4e09dd9beb21e83ef405df148115
ms.sourcegitcommit: 1d850f6cae47261eacdb7604a9f17edc6626ae4b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/02/2018
ms.locfileid: "39443390"
---
# <a name="troubleshoot-errors-when-failing-over-a-virtual-machine-to-azure"></a>Устранение ошибок при отработке отказа виртуальной машины в Azure

Во время выполнения отработки отказа виртуальной машины в Azure может появиться одна из следующих ошибок. Для устранения неполадок используйте описанные действия для каждого условия ошибки.

## <a name="failover-failed-with-error-id-28031"></a>Сбой отработки отказа (идентификатор ошибки 28031)

Службе Site Recovery не удалось создать в Azure виртуальную машину, для которой выполнена отработка отказа. Это может произойти по одной из следующих причин:

* Недостаточно квоты для создания виртуальной машины. Чтобы проверить доступную квоту, выберите "Подписка -> Usage + quotas" (Использование + квоты). Чтобы запросить увеличение квоты, отправьте [новый запрос на поддержку](http://aka.ms/getazuresupport).

* Вы пытаетесь совершить отработку отказа для виртуальных машин из разных семейств размеров в одной группе доступности. Убедитесь, что для всех виртуальных машин в одной группе доступности выбрано одно семейство размеров. Чтобы изменить размер, выберите параметры "Вычисления" и "Сеть" виртуальной машины, а затем повторите отработку отказа.

* Существует политика подписки, которая не допускает создания виртуальной машины. Измените политику таким образом, чтобы она разрешала создание виртуальных машин, а затем повторите отработку отказа.

## <a name="failover-failed-with-error-id-28092"></a>Сбой отработки отказа (идентификатор ошибки 28092)

Службе Site Recovery не удалось создать сетевой интерфейс для виртуальной машины, для которой была выполнена отработка отказа. Убедитесь, что у вас достаточно квоты для создания сетевых интерфейсов в подписке. Чтобы проверить доступную квоту, выберите "Подписка -> Usage + quotas" (Использование + квоты). Чтобы запросить увеличение квоты, отправьте [новый запрос на поддержку](http://aka.ms/getazuresupport). Если квоты достаточно, ошибка вызвана кратковременной проблемой. Повторите операцию. Если вам не удалось устранить проблему даже после нескольких попыток, оставьте комментарий в конце этого документа.  

## <a name="failover-failed-with-error-id-70038"></a>Сбой отработки отказа (идентификатор ошибки 70038)

Службе Site Recovery не удалось создать в Azure классическую виртуальную машину, для которой выполнена отработка отказа. Это могло произойти по таким причинам:

* Один из необходимых для виртуальной машины ресурсов, такой как виртуальная сеть, не существует. Создайте виртуальную сеть согласно требованиям параметров "Вычисления" и "Сеть" виртуальной машины или измените параметр на имеющуюся виртуальную сеть, а затем повторите отработку отказа.

## <a name="unable-to-connectrdpssh-to-the-failed-over-virtual-machine-due-to-grayed-out-connect-button-on-the-virtual-machine"></a>Не удается подключиться по протоколу RDP или SSH к виртуальной машине, для которой выполнена отработка отказа, поскольку кнопка подключения неактивна на виртуальной машине

Если кнопка подключения не активна и вы не подключены к Azure через Express Route или VPN-подключение типа "сеть-сеть":

1. Перейдите в раздел **Виртуальная машина** > **Сеть** и нажмите на имя необходимого сетевого интерфейса.  ![сетевой интерфейс](media/site-recovery-failover-to-azure-troubleshoot/network-interface.PNG)
1. Откройте раздел **Конфигурации IP** и нажмите на поле имени необходимой конфигурации IP. ![Конфигурации IP](media/site-recovery-failover-to-azure-troubleshoot/IpConfigurations.png)
1. Чтобы включить общедоступный IP-адрес, нажмите **Включить**. ![Включить IP](media/site-recovery-failover-to-azure-troubleshoot/Enable-Public-IP.png)
1. Нажмите **Настроить обязательные параметры** > **Создать**. ![Создать](media/site-recovery-failover-to-azure-troubleshoot/Create-New-Public-IP.png)
1. Введите имя общедоступного адреса, выберите параметры по умолчанию для элементов **SKU** и **назначение** и нажмите **OK**.
1. Теперь нажмите **Сохранить**, чтобы сохранить изменения.
1. Закройте панели и перейдите в раздел **Обзор** виртуальной машины, чтобы подключиться по протоколу RDP.

## <a name="unable-to-connectrdpssh-to-the-failed-over-virtual-machine-even-though-connect-button-is-available-not-grayed-out-on-the-virtual-machine"></a>Не удается подключиться по протоколу RDP или SSH к виртуальной машине, для которой выполнена отработка отказа, хотя кнопка подключения активна на виртуальной машине

Проверьте **Диагностику загрузки** на виртуальной машине и ознакомьтесь с ошибками, описанными в этой статье.

1. Если виртуальная машина не запустилась, попробуйте выполнить отработку отказа до предыдущей точки восстановления.
1. Если работа приложения на виртуальной машине не восстановится, попробуйте выполнить отработку отказа до согласованной с приложениями точки восстановления.
1. Если виртуальная машина присоединена к домену, убедитесь, что контроллер домена работает правильно. Следуйте приведенным инструкциям.
    a. Создайте новую виртуальную машину в той же сети.

    b.  Убедитесь, что ее можно присоединить к тому же домену, где должна находиться виртуальная машина, для которой выполнена отработка отказа.

    c. Если контроллер домена работает **неправильно**, попробуйте войти на виртуальную машину, для которой выполнена отработка отказа, используя учетную запись локального администратора.
1. Если вы работаете с пользовательским DNS-сервером, убедитесь, что он доступен. Следуйте приведенным инструкциям.
    a. Создайте новую виртуальную машину в той же сети. б. Убедитесь, что виртуальная машина может выполнить разрешение имен с помощью пользовательского DNS-сервера.

>[!Note]
>Для включения любого другого параметра, помимо диагностики загрузки, потребуется установить агент виртуальной машины Azure на виртуальную машину до отработки отказа.

## <a name="next-steps"></a>Дополнительная информация

Если вам нужна дополнительная помощь, разместите свой запрос на [форуме Site Recovery](https://social.msdn.microsoft.com/Forums/azure/home?forum=hypervrecovmgr) или оставьте комментарий в конце этого документа. У нас есть активное сообщество, где вам смогут помочь.
