---
title: "Общие сведения о портах с высоким уровнем доступности в Azure | Документация Майкрософт"
description: "Сведения о балансировке нагрузки в портах с высоким уровнем доступности внутренней подсистемы балансировки нагрузки."
services: load-balancer
documentationcenter: na
author: rdhillon
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 46b152c5-6a27-4bfc-bea3-05de9ce06a57
ms.service: load-balancer
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 09/18/2017
ms.author: kumud
ms.translationtype: HT
ms.sourcegitcommit: c3a2462b4ce4e1410a670624bcbcec26fd51b811
ms.openlocfilehash: 2e41c70b982b97c6aab7b6c0322c193c61370a26
ms.contentlocale: ru-ru
ms.lasthandoff: 09/25/2017

---

# <a name="high-availability-ports-overview"></a>Общие сведения о портах с высоким уровнем доступности

При использовании номеров SKU уровня "Стандартный" в Azure Load Balancer доступны порты с высоким уровнем доступности — возможность распределять трафик со всех портов и для всех поддерживаемых протоколов. При настройке внутренней подсистемы балансировки нагрузки пользователи могут задать правила портов с высоким уровнем доступности. При этом они могут **заблокировать** интерфейсные и внутренние порты и разрешить **все** протоколы, за счет чего весь трафик будет проходить через внутреннюю подсистему балансировки нагрузки.

Алгоритм балансировки нагрузки по-прежнему остается таким же. Назначение определяется на основе пяти показателей: исходный IP-адрес, исходный порт, конечный IP-адрес, конечный порт, протокол. Однако эта конфигурация обеспечивает обработку всего трафика на основе одного правила балансировки нагрузки, а также уменьшает сложность конфигурации и устраняет все ограничения, наложенные максимальным количеством правил балансировки нагрузки, которые может добавить пользователь.

Один из важнейших сценариев, поддерживаемых портами с высоким уровнем доступности, заключается в развертывании с высоким уровнем доступности сетевых виртуальных модулей в виртуальных сетях Azure. Кроме того, эти порты поддерживают сценарий балансировка нагрузки в диапазоне портов. 

## <a name="why-use-high-ha-ports"></a>Причины использования портов с высоким уровнем доступности

Клиенты Azure полагаются на сетевые виртуальные модули при защите рабочих нагрузок от нескольких типов угроз. Кроме того, сетевые виртуальные модули должны быть надежными и иметь высокий уровень доступности.  

Порты с высоким уровнем доступности уменьшают сложность сценариев реализации сетевых виртуальных модулей с высоким уровнем доступности, так как они устраняют необходимость в использовании более сложных решений, например zookeeper, а также повышают надежность за счет более быстрой отработки отказа и параметров горизонтального масштабирования. Теперь, чтобы реализовать высокий уровень доступности сетевых виртуальных модулей, их можно добавить в серверный пул внутренней подсистемы балансировки нагрузки Azure, а затем настроить правила балансировки нагрузки в портах с высоким уровнем доступности.

На рисунке ниже представлена схема развертывания виртуальной сети со звездообразным подключением. В этом примере трафик из периферийных зон перед выходом из доверенного пространства принудительно туннелируется в центральную виртуальную сеть через сетевой виртуальный модуль. Сетевые виртуальные модули расположены за пределами внутренней подсистемы балансировки нагрузки с портами с высоким уровнем доступности. Поэтому они могут должным образом обрабатывать и перенаправлять весь трафик. 

![Пример портов с высоким уровнем доступности](./media/load-balancer-ha-ports-overview/nvaha.png)

Рис. 1. Виртуальная сеть со звездообразным подключением и сетевыми виртуальными модулями в режиме высокой доступности

## <a name="caveats"></a>Предупреждения

Ниже приведены поддерживаемые конфигурации или исключения портов с высоким уровнем доступности.

- Отдельная интерфейсная IP-конфигурация может иметь одно правило подсистемы балансировки нагрузки с прямым ответом от сервера и портами с высоким уровнем доступности (все порты) или одно правило подсистемы балансировки нагрузки без прямого ответа от сервера и с портами с высоким уровнем доступности (все порты). Оба правила применить невозможно.
- Отдельная IP-конфигурация сетевого интерфейса может только иметь одно правило подсистемы балансировки нагрузки без прямого ответа от сервера и с портами с высоким уровнем доступности. Другие правила недоступны в этой конфигурации.
- Отдельная IP-конфигурация сетевого интерфейса может только иметь несколько правил подсистемы балансировки нагрузки с прямым ответом от сервера и портами с высоким уровнем доступности. В этот случае все соответствующие интерфейсные IP-конфигурации уникальные.
- Несколько правил подсистемы балансировки нагрузки, указывающие на тот же серверный пул, могут существовать параллельно, если во всех правилах балансировки нагрузки используются порты с высоким уровнем доступности (только с прямым ответом от сервера) или порты без высокого уровня доступности (с прямым ответом от сервера или без него). Если в двух таких правилах используются разные типы портов, они не могут существовать параллельно.
- Порты с высоким уровнем доступности недоступны в клиентах с поддержкой IPv6.


## <a name="next-steps"></a>Дальнейшие действия

[Настройка портов с высоким уровнем доступности во внутренней подсистеме балансировки нагрузки](load-balancer-configure-ha-ports.md)


