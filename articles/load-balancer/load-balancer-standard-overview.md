---
title: "Обзор Azure Load Balancer уровня \"Стандартный\" | Документация Майкрософт"
description: "Обзор возможностей Azure Load Balancer уровня \"Стандартный\""
services: load-balancer
documentationcenter: na
author: KumudD
manager: timlt
editor: 
ms.assetid: 
ms.service: load-balancer
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 09/21/2017
ms.author: kumud
ms.translationtype: HT
ms.sourcegitcommit: c863dbdcb242bdea208f7e72f6c1f61b5ba04844
ms.openlocfilehash: 77d157800d71d1afc3411553b31c1182a1d0bc28
ms.contentlocale: ru-ru
ms.lasthandoff: 09/22/2017

---

# <a name="azure-load-balancer-standard-overview-preview"></a>Обзор Azure Load Balancer уровня "Стандартный" (предварительная версия)

Номер SKU уровня "Стандартный" Azure Load Balancer и номер SKU уровня "Стандартный" общедоступного IP-адреса позволяют создавать надежные архитектуры с высоким уровнем масштабируемости.  Приложения, использующие Load Balancer уровня "Стандартный", могут использовать новые возможности в дополнение к низкой задержке, высокой пропускной способности и масштабируемости миллионов потоков всех приложений TCP и UDP.

>[!NOTE]
> Номер SKU уровня "Стандартный" Load Balancer в настоящее время находится в предварительной версии. На период действия предварительной версии эта функция может не отличаться таким же уровнем доступности и надежности, как функции, предоставляемые в режиме общедоступной версии. Дополнительные сведения см. в статье [Дополнительные условия использования предварительных выпусков Microsoft Azure](https://azure.microsoft.com/support/legal/preview-supplemental-terms/). [Общедоступный номер SKU уровня "Базовый" Load Balancer](load-balancer-overview.md) можно использовать для производственных служб.

## <a name="why-use-load-balancer-standard"></a>Преимущества Load Balancer уровня "Стандартный"

Load Balancer уровня "Стандартный" можно использовать для широкого спектра виртуальных центров обработки данных от небольших развертываний до крупных и сложных многозонных архитектур, чтобы воспользоваться следующими возможностями:

- [Масштабирование корпоративного класса](#enterprisescale) можно достигнуть с помощью Load Balancer уровня "Стандартный".  Он может использоваться с любым экземпляром виртуальной машины в виртуальной сети (до 1000 экземпляров виртуальных машин).

- [Новая аналитика диагностики](#diagnosticinsights) позволяет понять этот важный компонент виртуального центра обработки данных, а также управлять им и устранять связанные с ним неполадки. Используйте Azure Monitor (предварительная версия), чтобы отображать, фильтровать и группировать новые многомерные метрики непрерывных измерений состояния пути данных от внешнего интерфейса до виртуальной машины для проверки работоспособности конечных точек, попыток TCP-подключений и исходящих подключений.

- [Группы безопасности сети](#nsg) обеспечивают повышенную безопасность и теперь необходимы для любого экземпляра виртуальной машины, связанного с номерами SKU уровня "Стандартный" Load Balancer или общедоступного IP-адреса.

- [Порты HA обеспечивают высокую надежность](#highreliability) и масштабирование виртуальных сетевых устройств и других сценариев приложений. Порты HA распределяют трафик на всех портах во внутреннем интерфейсе Load Balancer в пуле экземпляров виртуальной машины.

- [Исходящие подключения](#outboundconnections) теперь используют новую модель распределения портов SNAT, которая обеспечивает большую отказоустойчивость и масштабирование.

- [Load Balancer уровня "Стандартный" с зонами доступности](#availabilityzones) может использоваться для создания архитектуры, избыточной в пределах зоны, и зональной архитектуры с распределением нагрузки между зонами. Можно добиться избыточности в пределах зоны без зависимости от записей DNS: один IP-адрес по умолчанию является просто избыточным в пределах зоны и может связываться с любой виртуальной машиной в виртуальной сети региона во всех зонах доступности.


Load Balancer уровня "Стандартный" можно использовать в общедоступной или внутренней конфигурации, которая поддерживает следующие основные сценарии:

- распределение нагрузки входящего трафика между работоспособными экземплярами серверной части;
- перенаправление входящего трафика на один экземпляр серверной части;
- перевод исходящего трафика от частного IP-адреса в рамках виртуальной сети на общедоступный IP-адрес.

### <a name = "enterprisescale"></a>Масштабирование корпоративного класса

 Load Balancer уровня "Стандартный" можно использовать для проектирования высокопроизводительного виртуального центра обработки данных. Вы можете использовать автономные экземпляры виртуальных машин или до 1000 масштабируемых наборов экземпляров виртуальных машин в серверном пуле и поддерживать любое приложение TCP или UDP. С помощью Load Balancer уровня "Стандартный" ваше приложение по-прежнему сможет воспользоваться низкой задержкой пересылки, высокой пропускной способностью и масштабированием до миллионов потоков в полностью управляемой службе Azure.
 
Load Balancer уровня "Стандартный" может перенаправлять трафик в любой экземпляр виртуальной машины в виртуальной сети в регионе. Внутренний пул может вмещать до 1000 экземпляров с любой комбинацией:

- автономные виртуальные машины без групп доступности;
- автономные виртуальные машины с группами доступности;
- масштабируемые наборы виртуальных машин до 1000 экземпляров;
- множество масштабируемых наборов виртуальных машин;
- смешение виртуальных машин и масштабируемых наборов виртуальных машин.

Наборы доступности теперь не обязательны, но их можно использовать для получения других преимуществ, которые они предоставляют.

### <a name = "diagnosticinsights"></a>Аналитика диагностики

Load Balancer уровня "Стандартный" предоставляет новые многомерные возможности диагностики общедоступных и внутренних конфигураций Load Balancer. Эти новые метрики предоставляются посредством Azure Monitor (предварительная версия) и используют все соответствующие возможности, включая возможность интеграции с различными нисходящими потребителями.

| Метрика | Описание |
| --- | --- |
| Доступность виртуального IP-адреса | Load Balancer уровня "Стандартный" непрерывно использует путь к данным из региона к интерфейсу Load Balancer, а затем в стек SDN, поддерживающий виртуальную машину. Пока остаются работоспособные экземпляры, измерение выполняется по тому же пути, что и трафик приложения с балансировкой нагрузки и проверяется путь к данным, который могут использовать ваши клиенты. Измерение является невидимым для приложения и не влияет на работоспособность.|
| Доступность выделенного IP-адреса (DIP) | Load Balancer уровня "Стандартный" использует распределенную службу проверки работоспособности, которая контролирует состояние конечной точки приложения в соответствии с настройками.  Эта метрика обеспечивает агрегированное или отфильтрованное представление для каждой отдельной конечной точки экземпляра в пуле Load Balancer.  Вы можете видеть, как Load Balancer просматривает работоспособность вашего приложения, как указано в конфигурации зонда работоспособности.
| Пакеты SYN | Load Balancer уровня "Стандартный" не прерывает TCP-подключения и не взаимодействует с потоками пакетов TCP и UDP. Потоки и их подтверждения всегда происходят между источником и экземпляром виртуальной машины. Для оптимизации устранения неполадок всех сценариев протокола TCP можно использовать эту метрику, чтобы понять, сколько было выполнено попыток подключения TCP. Эта метрика указывает количество принятых пакетов TCP SYN и может отображать клиенты, пытающиеся установить соединение с вашей службой.|
| Подключения SNAT | Load Balancer уровня "Стандартный" передает число замаскированных исходящих подключений к интерфейсной части общедоступного IP-адреса.  SNAT-порты являются ограниченным ресурсом, и эта метрика может дать представление о том, насколько сильно ваше приложение полагается на SNAT для исходящих подключений.|
| Счетчики байтов | Load Balancer уровня "Стандартный" передает количество данных, обработанных каждым внешним интерфейсом.|
| Счетчики пакетов | Load Balancer уровня "Стандартный" передает количество пакетов, обработанных каждым внешним интерфейсом.|

### <a name = "highreliability"></a>Высокая надежность

Настройте правила балансировки нагрузки, чтобы масштабировать приложение и сделать его более надежным.  Можно настроить правила для отдельных портов или использовать новые порты HA для распределения всего трафика независимо от номера порта TCP или UDP.  

Новую функцию портов HA можно использовать для разблокирования различных сценариев, включая высокую доступность и масштабирование внутренних сетевых виртуальных устройств и других сценариев, где нецелесообразно или нежелательно указывать отдельные порты. Порты HA обеспечивают избыточность и масштабирование, позволяя использовать необходимое количество экземпляров, вместо того чтобы ограничиваться активными/пассивными сценариями. Конфигурации зонда работоспособности защищают вашу службу, перенаправляя трафик только на рабочие экземпляры.

Поставщики виртуальных сетевых модулей могут предложить полностью поддерживаемые производителем, отказоустойчивые сценарии, удалив единую точку отказа для своих клиентов и позволяя масштабировать до нескольких активных экземпляров. Можно масштабировать до двух или более экземпляров, если ваше устройство допускает такие конфигурации. Поставщик виртуальных сетевых модулей должен предоставить дополнительные рекомендации для этих сценариев.

### <a name = "availabilityzones"></a>Зоны доступности

[!INCLUDE [availability-zones-preview-statement](../../includes/availability-zones-preview-statement.md)]

Используя зоны доступности в поддерживаемых регионах, можно повысить отказоустойчивость вашего приложения. Зоны доступности в настоящее время находятся в режиме предварительной версии в определенных регионах и требуют дополнительной настройки.

### <a name="automatic-zone-redundancy"></a>Автоматическая избыточность в пределах зоны

Можно выбрать, должен ли Load Balancer предоставлять внешний интерфейс с избыточностью в пределах зоны или зональный интерфейс для каждого из ваших приложений.  С помощью Load Balancer уровня "Стандартный" можно легко создать избыточность в пределах зоны.  Один интерфейсный IP-адрес по умолчанию является избыточным в пределах зоны.  Внешний интерфейс с избыточностью в пределах зоны обслуживается всеми зонами доступности в регионе одновременно. При этом создается резервный путь к данным с избыточностью в пределах зоны для входящих и исходящих подключений. Для избыточности в пределах зоны в Azure не требуется несколько IP-адресов и записей DNS. 

Такая избыточность доступна для общедоступных и внутренних интерфейсов. Ваш общедоступный IP-адрес, а также частный IP-адрес внешнего интерфейса Load Balancer может быть избыточным в пределах зоны.

Создайте общедоступный IP-адрес с избыточностью в пределах зоны следующим образом (добавьте "sku" в любой существующий шаблон Resource Manager):

```json
            "apiVersion": "2017-08-01",
            "type": "Microsoft.Network/publicIPAddresses",
            "name": "public_ip_standard",
            "location": "region",
            "sku":
            {
                "name": "Standard"
            },
```

Создайте конфигурацию IP интерфейса внутреннего Load Balancer с избыточностью в пределах зоны следующим образом (добавьте "sku" в любой существующий шаблон Resource Manager):

```json
            "apiVersion": "2017-08-01",
            "type": "Microsoft.Network/loadBalancers",
            "name": "load_balancer_standard",
            "location": "region",
            "sku":
            {
                "name": "Standard"
            },
            "properties": {
                "frontendIPConfigurations": [
                    {
                        "name": "zone_redundant_frontend",
                        "properties": {
                            "subnet": {
                                "Id": "[variables('subnetRef')]"
                            },
                            "privateIPAddress": "10.0.0.6",
                            "privateIPAllocationMethod": "Static"
                        }
                    },
                ],
```

Если общедоступный IP-адрес внешнего интерфейса является избыточным в пределах зоны, любые исходящие подключения, установленные экземплярами виртуальных машин, автоматически становятся избыточными в пределах зоны и защищены от сбоя зоны.  Назначение портов SNAT сохраняется при сбое зоны.

#### <a name="cross-zone-load-balancing"></a>Распределение нагрузки между зонами

Распределение нагрузки между зонами доступно в пределах региона для серверного пула, что обеспечивает максимальную гибкость экземпляров виртуальной машины.  Внешний интерфейс может передавать потоки любой виртуальной машине в виртуальной сети независимо от зоны доступности экземпляра виртуальной машины.

Кроме того, вы также можете указать конкретную зону для своих интерфейсных и серверных экземпляров, чтобы сопоставить путь к данным и ресурсы с определенной зоной.

Так как виртуальные сети и подсети никогда не ограничены зоной, все, что вам нужно сделать, — это задать серверный пул с нужными экземплярами виртуальной машины.

#### <a name="zonal-deployments"></a>Зональные развертывания

При необходимости также можно сопоставить интерфейс с определенной зоной, указав внешний интерфейс зоны.  Внешний интерфейс зоны обслуживается только единственной назначенной зоной доступности, и при сочетании с экземплярами виртуальной машины зоны можно сопоставить ресурсы с определенными зонами.

Создайте общедоступный IP-адрес зоны в зоне доступности 1 следующим образом (добавьте "zones" и "sku" в любой существующий шаблон Resource Manager):

```json
            "apiVersion": "2017-08-01",
            "type": "Microsoft.Network/publicIPAddresses",
            "name": "public_ip_standard",
            "location": "region",
            "zones": [ "1" ],
            "sku":
            {
                "name": "Standard"
            },
```

Создайте внешний интерфейс внутреннего Load Balancer в зоне доступности 1 следующим образом (добавьте "sku" в любой существующий шаблон Resource Manager и добавьте "zones" в дочерний ресурс конфигурации IP интерфейса).

```json
            "apiVersion": "2017-08-01",
            "type": "Microsoft.Network/loadBalancers",
            "name": "load_balancer_standard",
            "location": "region",
            "sku":
            {
                "name": "Standard"
            },
            "properties": {
                "frontendIPConfigurations": [
                    {
                        "name": "zonal_frontend_in_az1",
                        "zones": [ "1" ],
                        "properties": {
                            "subnet": {
                                "Id": "[variables('subnetRef')]"
                            },
                            "privateIPAddress": "10.0.0.6",
                            "privateIPAllocationMethod": "Static"
                        }
                    },
                ],
```

Кроме того, вы можете использовать распределение нагрузки между зонами для серверной части, разместив экземпляры виртуальной машины в виртуальную сеть внутри серверного пула.

Сам ресурс Load Balancer уровня "Стандартный" всегда является региональным и избыточным в пределах зоны, когда поддерживаются зоны доступности. Общедоступный IP-адрес или внешний интерфейс внутреннего Load Balancer, который не был назначен зоне, может быть развернут в любом регионе независимо от поддержки зон доступности. Если в регионе снова появятся зоны доступности, уже развернутый общедоступный IP-адрес или внешний интерфейс внутреннего Load Balancer автоматически становится избыточным в пределах зоны. Избыточный в пределах зоны путь к данным не подразумевает полное отсутствие потери пакетов.

### <a name = "nsg"></a>Группы безопасности сети

Теперь требуется полное подключение Load Balancer уровня "Стандартный" и общедоступного стандартного IP-адреса к виртуальной сети и группам безопасности сети. Группа безопасности сети позволяет использовать список разрешенных потоков и конфигурации, в которых клиенты полностью контролируют, когда разрешить трафик для развертывания с помощью группы безопасности сети до завершения других конфигураций.

Свяжите группу безопасности сети с подсетями или с сетевыми адаптерами экземпляров виртуальной машины в серверном пуле.  Это относится к Load Balancer уровня "Стандартный" и общедоступному стандартному IP-адресу при использовании в качестве общедоступного IP-адреса уровня экземпляра. Необходимо явно указать в списке разрешений трафик, который вы хотите разрешить для группы безопасности сети, чтобы он мог проходить.

Дополнительные сведения о группах безопасности сети и способах их применения в вашем сценарии см. в статье [Фильтрация сетевого трафика с помощью групп безопасности сети](../virtual-network/virtual-networks-nsg.md).

### <a name ="outboundconnections"></a>Исходящие подключения

 Load Balancer уровня "Стандартный" обеспечивает исходящие подключения для виртуальных машин внутри виртуальной сети, когда они связаны с Load Balance, используя маскирующее порты преобразование адресов исходной сети (SNAT).

Когда общедоступный ресурс Load Balancer связан с экземплярами виртуальной машины, источник каждого исходящего подключения переписывается из частного IP-адреса виртуальной сети в общедоступный IP-адрес внешнего интерфейса Load Balancer.  Load Balancer уровня "Стандартный" использует новый алгоритм SNAT для маскирования портов, чтобы повысить надежность и масштабируемость.  

Кроме того, при использовании с внешним интерфейсом, избыточным в пределах зоны, исходящие соединения также являются избыточными в пределах зоны, а распределения портов SNAT выдерживают сбои зоны.

Новый алгоритм Load Balancer уровня "Стандартный" выделяет порты SNAT для каждого сетевого интерфейса виртуальной машины в момент их добавления в пул в соответствии со следующими уровнями:

| Размер серверного пула | Выделенные порты SNAT |
| --- | --- |
| 1–50 | 1024 |
| 51–100 | 512 |
| 101–200 | 256 |
| 201–400 | 128 |
| 401–800 | 64 |
| 801–1000 | 32 |

Порты SNAT не относятся напрямую к числу подключений. Порт SNAT могут использоваться повторно для нескольких уникальных назначений.  Дополнительные сведения см. в статье [Общие сведения об исходящих подключениях в Azure](load-balancer-outbound-connections.md).

Если серверный пул увеличен и перейдет с уровня одного размера на следующий больший размер, половина ваших выделенных портов будет освобождена. Любые подключения, связанные с освобожденным портом, будут отложены с необходимостью повторной установки. Все новые попытки подключения будет немедленно выполнены. Если ваш серверный пул уменьшается с размера одного уровня до следующего размера, количество доступных портов SNAT растет, а существующие подключения не затрагиваются.

Load Balancer уровня "Стандартный" также имеет дополнительный вариант конфигурации на основе каждого правила, который предоставляет управление внешним интерфейсом, используемым для подключений SNAT для маскирования портов, когда доступны несколько внешних интерфейсов.

Наконец, если только Load Balancer уровня "Стандартный" обслуживает экземпляры виртуальных машин, исходящие подключения SNAT недоступны. Можно явно восстановить эту возможность, назначив экземпляры виртуальной машины общедоступному Load Balancer, а также назначив общедоступные IP-адреса в качестве общедоступных IP-адресов уровня экземпляра непосредственно каждому экземпляру виртуальной машины. Это может потребоваться для некоторых сценариев операционных систем и приложений. 

### <a name="port-forwarding"></a>Перенаправление портов

 Load Balancer уровня "Стандартный" и "Базовый" предоставляют возможность настраивать входящие правила NAT для сопоставления интерфейсного порта с отдельным серверным экземпляром.  Существует много применений для этой возможности, включая предоставление конечных точек протокола удаленного рабочего стола, конечных точек SSH или других сценариев приложений.

Load Balancer уровня "Стандартный" обеспечивает возможность переадресации портов через входящие правила NAT.  При использовании с внешними интерфейсами, избыточными в пределах зоны, входящие правила NAT становятся избыточными в пределах зоны и выдержат сбой зоны.

### <a name="multiple-frontends"></a>Несколько внешних интерфейсов

Настройте несколько внешних интерфейсов для гибкости структуры, когда приложениям требуется несколько отдельных IP-адресов (например, веб-сайты TLS или конечные точки группы доступности SQL AlwaysOn).  Дополнительные сведения можно найти [здесь](load-balancer-multivip-overview.md).

Load Balancer уровня "Стандартный" предоставляет несколько внешних интерфейсов там, где необходимо предоставить конечную точку приложения с уникальным IP-адресом.

 Дополнительные сведения можно найти [здесь](load-balancer-multivip-overview.md).

## <a name = "sku"></a>О номерах SKU

Номера SKU доступны при использовании модели развертывания с помощью Azure Resource Manager.  Эта предварительная версия предоставляет два номера SKU (уровня "Базовый" и "Стандартный") для Load Balancer и ресурсов общедоступного IP-адреса.  Номера SKU отличаются способностями, характеристиками производительности, ограничениями и некоторыми внутренними реакциями на событие. Виртуальные машины можно использовать с любым номером SKU. Для ресурсов Load Balancer и ресурсов общедоступного IP-адреса номера SKU остаются необязательными атрибутами, и когда они не указаны по умолчанию, используется уровень "Базовый".

>[!IMPORTANT]
>Номер SKU ресурса неизменяемый.  Вы не можете изменить номер SKU существующего ресурса.  

### <a name="load-balancer"></a>Подсистема балансировки нагрузки

[Существующий ресурс Load Balancer](load-balancer-overview.md) переходит на номер SKU уровня "Базовый" и остается в общедоступной версии без изменений.

Номер SKU уровня "Стандартный" Load Balancer является новым предложением и в настоящее время находится в предварительной версии. Версия API 2017-08-01 для Microsoft.Network/loadBalancers представляет номера SKU для ресурса.

```json
            "apiVersion": "2017-08-01",
            "type": "Microsoft.Network/loadBalancers",
            "name": "load_balancer_standard",
            "location": "region",
            "sku":
            {
                "name": "Standard"
            },
```
При использовании в регионе, который также предлагает зоны доступности, Load Balancer уровня "Стандартный" автоматически становится отказоустойчивым в зоне, если он не был объявлен зональным.

### <a name="public-ip"></a>Общедоступный IP-адрес

[Существующий общедоступный IP-ресурс](../virtual-network/virtual-network-ip-addresses-overview-arm.md) переходит на номер SKU уровня "Базовый" и остается в общедоступной версии со всеми его возможностями, характеристиками производительности и ограничениями.

Номер SKU уровня "Стандартный" общедоступного IP является новым предложением и в настоящее время находится в предварительной версии. Версия API 2017-08-01 для ресурсов Microsoft.Network/publicIPAddresses вводит номера SKU.

```json
            "apiVersion": "2017-08-01",
            "type": "Microsoft.Network/publicIPAddresses",
            "name": "public_ip_standard",
            "location": "region",
            "sku":
            {
                "name": "Standard"
            },
```

В отличие от общедоступного IP-адреса уровня "Базовый", который предлагает несколько методов распределения, общедоступный IP-адрес уровня "Стандартный" всегда предусматривает статическое распределение.

При использовании в регионе, который также предлагает зоны доступности, общедоступный IP-адрес уровня "Стандартный" автоматически становится отказоустойчивым в зоне, если он не был объявлен зональным.

## <a name="migration-between-skus"></a>Переход между номерами SKU

Если вы хотите перейти с одного номера SKU ресурса на другой, выполните следующие действия.

### <a name="migrating-from-basic-to-standard-sku"></a>Переход с номера SKU "Базовый" на "Стандартный"

1. Создайте ресурс уровня "Стандартный" (Load Balancer и общедоступные IP-адреса по мере необходимости) и заново создайте свои правила и определения зонда.
2. Удалите ресурсы номера SKU уровня "Базовый" (общедоступный IP-адрес и Load Balancer) для всех экземпляров виртуальной машины (включая все экземпляры группы доступности).
3. Подключите все экземпляры виртуальной машины к новому ресурсу с номером SKU уровня "Стандартный".

### <a name="migrating-from-standard-to-basic-sku"></a>Переход с номера SKU "Стандартный" на "Базовый"

1. Создайте ресурс уровня "Базовый" (Load Balancer и общедоступные IP-адреса по мере необходимости) и заново создайте свои правила и определения зонда. 
2. Удалите ресурсы номера SKU уровня "Стандартный" (общедоступный IP-адрес и Load Balancer) для всех экземпляров виртуальной машины (включая все экземпляры группы доступности).
3. Подключите все экземпляры виртуальной машины к новому ресурсу с номером SKU уровня "Базовый".

  >[!NOTE]
  >Порты HA, диагностика номера SKU уровня "Стандартный" доступны только в номерах SKU уровня "Стандартный". Нельзя перейти с уровня "Стандартный" на уровень "Базовый" и сохранить эту функциональность.

Необходимо использовать соответствующие номера SKU для Load Balancer и общедоступных IP-ресурсов.  Невозможно объединить ресурсы номера SKU уровня"Базовый" и "Стандартный" или подключить виртуальную машину, виртуальные машины в наборе доступности или масштабируемом наборе виртуальных машин к обоим одновременно.

## <a name="region-availability"></a>Регионы доступности

Load Balancer уровня "Стандартный" в настоящее время доступен в следующих регионах:
- Восток США 2
- Центральный регион США
- Северная Европа
- Западно-центральная часть США
- Западная Европа
- Юго-Восточная Азия

## <a name="service-limits--abilities-comparison"></a>Сравнение ограничений и возможностей служб

[Ограничения служб для работы в сети](https://docs.microsoft.com/en-us/azure/azure-subscription-service-limits#networking-limits) Azure применяются к каждому региону для каждой подписки. 

В следующей таблице представлено сравнение ограничений и возможностей между номерами SKU уровней "Стандартный" и уровень "Базовый"для Load Balancer:

| Подсистема балансировки нагрузки | Basic | Standard |
| --- | --- | --- |
| Размер серверного пула | До 100 | До 1000 |
| Граница серверного пула | Группа доступности | Виртуальная сеть, регион |
| Структура серверного пула | Виртуальные машины в наборе доступности или масштабируемом наборе виртуальных машин в наборе доступности | Любой экземпляр виртуальной машины в виртуальной сети |
| Порты HA | Не поддерживается | Доступна |
| Диагностика | Ограниченные, только общедоступные | Доступна |
| Доступность виртуального IP-адреса  | Не поддерживается | Доступна |
| Быстрые операции мобильности с IP-адресом | Не поддерживается | Доступна |
|Сценарии зон доступности | Только зональные | Зональные, избыточные в пределах зоны, распределение нагрузки между зонами |
| Алгоритм исходящих SNAT-подключений | По запросу | Выделенный |
| Выбор интерфейса исходящих SNAT-подключений | Недоступно для настройки, несколько вариантов | Дополнительная настройка для уменьшения вариантов |
| Группа безопасности сети | Необязательно для сетевого адаптера и подсети | Обязательно |

В следующей таблице представлено сравнение ограничений и возможностей между номерами SKU уровней "Стандартный" и уровень "Базовый"для общедоступного IP-адреса:

| Общедоступный IP-адрес | Basic | Standard |
| --- | --- | --- |
| Сценарии зон доступности | Только зональные | Избыточные в пределах зоны (по умолчанию), зональные (необязательно) | 
| Быстрые операции мобильности с IP-адресом | Не поддерживается | Доступна |
| Доступность виртуального IP-адреса | Не поддерживается | Доступна |
| Counters | Не поддерживается | Доступна |
| Группа безопасности сети | Необязательно для сетевого адаптера | Обязательно |


## <a name="preview-sign-up"></a>Регистрация в предварительной версии

Чтобы зарегистрироваться в предварительной версии Load Balancer с номером SKU уровня "Стандартный" и версии общедоступного IP-адреса с номером SKU уровня "Стандартный", зарегистрируйте свою подписку, чтобы получить доступ, используя PowerShell или Azure CLI 2.0.

- Регистрация с помощью PowerShell

    ```powershell
    Register-AzureRmProviderFeature -FeatureName AllowLBPreview -ProviderNamespace Microsoft.Network
    ```

- Регистрация с помощью Azure CLI 2.0

    ```cli
    az feature register --name AllowLBPreview --namespace Microsoft.Network
    ```

>[!NOTE]
>Если вы хотите использовать зоны доступности вместе с Load Balancer и общедоступным IP-адресом, необходимо также зарегистрировать подписку для использования предварительной версии зон доступности.

## <a name="pricing"></a>Цены

Load Balancer с номером SKU уровня "Стандартный" оплачивается на основе настроенных правил и обработанных данных.  Плата не взимается во время использования предварительной версии.  Просмотрите страницы расценок на [Load Balancer](https://aka.ms/lbpreviewpricing) и [общедоступный IP-адрес](https://aka.ms/lbpreviewpippricing) для получения дополнительной информации.

Клиенты продолжат пользоваться преимуществами Load Balancer с номером SKU уровня "Стандартный" без оплаты.

## <a name="limitations"></a>Ограничения

Следующие ограничения применяются во время использования предварительной версии и могут быть изменены.

- Сейчас серверные экземпляры Load Balancer невозможно размещать в пиринговых виртуальных сетях. Все серверные экземпляры должны быть в одном регионе.
- Номера SKU неизменяемы. Вы не можете изменить номер SKU существующего ресурса.
- Номера SKU уровня "Базовый" или "Стандартный" можно использовать с автономной виртуальной машиной, всеми экземплярами виртуальной машины в группе доступности или масштабируемом наборе виртуальных машин. Автономная виртуальная машина, все экземпляры виртуальной машины в группе доступности или масштабируемом наборе виртуальных машин не используются одновременно с обоими уровнями номеров SKU. Смешивание номеров SKU не поддерживается.
- Использование внутреннего Load Balancer уровня "Стандартный" с экземпляром виртуальной машины (или любой частью набора доступности) отключает [исходящие подключения SNAT по умолчанию](load-balancer-outbound-connections.md).  Вы можете восстановить эту возможность для групп доступности автономных виртуальных машин или экземпляров виртуальных машин либо масштабируемых наборов виртуальных машин и установить исходящие подключения, одновременно назначив общедоступный Load Balancer уровня "Стандартный" или общедоступный IP-адрес уровня "Стандартный" в качестве общедоступного IP-адреса уровня экземпляра тому же экземпляру виртуальной машины. После завершения подключения SNAT для маскирования портов будут снова предоставляться для общедоступного IP-адреса.
- Например, экземпляры виртуальных машин могут быть сгруппированы в группы доступности для максимального масштабирования серверного пула. В один серверный пул можно поместить до 150 групп доступности и автономных виртуальных машин.
- IPv6 не поддерживается.
- В рамках зон доступности внешний интерфейс не может изменяться с зонального на избыточный в пределах зоны или наоборот. Если он создан как избыточный в пределах зоны, он всегда остается таким. Если он создан как зональный, он также не изменяется.
- В контексте зон доступности зональный общедоступный IP-адрес не может перемещаться из одной зоны в другую.


## <a name="next-steps"></a>Дальнейшие действия

- Узнайте об [Azure Load Balancer уровня "Базовый"](load-balancer-overview.md)
- Узнайте о [зонах доступности](../availability-zones/az-overview.md)
- Дополнительные сведения о некоторых других ключевых [сетевых возможностях](../networking/networking-overview.md) Azure


