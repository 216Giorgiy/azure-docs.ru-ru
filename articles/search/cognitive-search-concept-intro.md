---
title: Когнитивный поиск для извлечения данных и обработки естественной речи в службе "Поиск Azure" | Документация Майкрософт
description: Извлечение данных, обработка естественной речи и изображений для создания доступного для поиска содержимого при индексации в службе "Поиск Azure" с применением когнитивных навыков.
manager: cgronlun
author: HeidiSteen
services: search
ms.service: search
ms.devlang: NA
ms.topic: conceptual
ms.date: 05/04/2018
ms.author: heidist
ms.openlocfilehash: 64b4c0a315e206cd260f2f1108362e92f55d1843
ms.sourcegitcommit: ea5193f0729e85e2ddb11bb6d4516958510fd14c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/21/2018
ms.locfileid: "36304285"
---
# <a name="what-is-cognitive-search"></a>Что такое когнитивный поиск?

Функция когнитивного поиска доступна в режиме предварительной версии для всех уровней службы [Поиск Azure](search-what-is-azure-search.md) в регионах "Юго-центральный регион США" и "Западная Европа" и применяет искусственный интеллект для рабочих нагрузок индексирования. Извлечение данных, обработка естественной речи и изображений позволяют выделить в процессе индексирования скрытые данные из неструктурированного или недоступного для поиска содержимого, чтобы сделать его доступным в службе "Поиск Azure".

Интеграция искусственного интеллекта осуществляется через *когнитивные навыки* и обогащает исходные документы благодаря последовательным процессам при создании индекса для поиска. 

![Схема конвейера когнитивного поиска](./media/cognitive-search-intro/cogsearch-architecture.png "Cognitive Search pipeline overview")

Во время индексирования можно использовать стандартные или настраиваемые навыки:

+ [Стандартные навыки](cognitive-search-predefined-skills.md) основываются на тех же алгоритмах искусственного интеллекта, которые применяются в API-интерфейсах Cognitive Services. В их число входят [распознавание именованных сущностей](cognitive-search-skill-named-entity-recognition.md), [извлечение ключевых фраз](cognitive-search-skill-keyphrases.md) и [распознавание текста](cognitive-search-skill-ocr.md). 

+ [Пользовательские навыки](cognitive-search-create-custom-skill-example.md) вы можете самостоятельно разработать для любых интересующих вас задач специализированной обработки. Например, пользовательские навыки в модуле сущности или классификаторе документов могут выполнять задачи по специализированной области: финансы, научные публикации или медицина.

> [!NOTE]
> Когнитивный поиск доступен в общедоступной предварительной версии. Выполнение набора навыков сейчас предоставляется бесплатно. Цена на эту функцию будет объявлена позже.

## <a name="components-of-cognitive-search"></a>Компоненты когнитивного поиска

Конвейер когнитивного поиска основан на [*индексаторах* службы "Поиск Azure](search-indexer-overview.md), которые последовательно сканируют источники данных и создают по ним индексы. Теперь к этим индексаторам можно подключать навыки, которые отслеживают и обогащают определенные документы по настроенным вами наборам навыков. После индексации созданный контент будет доступен через поисковые запросы [любых типов, поддерживаемых в службе "Поиск Azure"](search-query-overview.md).  Если вы еще не знакомы с индексаторами, ознакомьтесь с простым примером, представленным в этом разделе.

### <a name="source-data-and-document-cracking-phase"></a>Исходные данные и этап открытия документов

На вход конвейера подается неструктурированный текст или нетекстовое содержимое (например, JPEG-файлы с изображениями или отсканированными документами). Эти данные нужно разместить в службе хранилища данных Azure, доступной для индексатора. Индексаторы умеют открывать исходные документы и извлекать из них текстовые данные.

![Этап открытия документов](./media/cognitive-search-intro/document-cracking-phase-blowup.png "document cracking")

 В качестве источников данных поддерживаются хранилища больших двоичных объектов Azure, хранилища таблиц Azure, база данных SQL Azure и Azure Cosmos DB. Текстовое содержимое можно извлечь из файлов следующих типов: PDF, Word, PowerPoint и CSV. Дополнительные сведения см. в разделе [Поддерживаемые форматы документов](search-howto-indexing-azure-blob-storage.md#supported-document-formats).

### <a name="cognitive-skills-and-enrichment-phase"></a>Когнитивных навыки и этап обогащения

Обогащение выполняется *когнитивными навыками* с атомарными операциями. Например, выделив текстовое содержимое из PDF-файла, к нему можно применить распознавание языка, распознавание сущностей или извлечение ключевых фраз, чтобы создать в индексе новые поля данных, не существующие в самом источнике. Совокупность таких возможностей, реализованная в вашем конвейере, называется *набором навыков*.  

![Этап обогащения](./media/cognitive-search-intro/enrichment-phase-blowup.png "enrichment phase")

Набор навыков основывается на [стандартных когнитивных навыках](cognitive-search-predefined-skills.md) или [пользовательских навыках](cognitive-search-create-custom-skill-example.md), которые вы создаете и подключаете к набору навыков. Можно использовать как минимальные, так и очень сложные наборы навыков. Они определяют не только типы обработки, но и порядок операций. Набор навыков в сочетании с сопоставлением полей, которые включены в индексатор, полностью определяют весь конвейер обогащения данных. Дополнительные сведения о том, как собрать все эти фрагменты в единое целое, вы найдете в статье [Создание набора навыков в конвейере обогащения](cognitive-search-defining-skillset.md).

В конвейере создается коллекция обогащенных документов. Вы можете выбрать, какие из элементов этих обогащенных документов нужно сопоставить с индексируемыми полями в индексе поиска. Например, если вы применили навыки извлечения ключевых фраз и распознавания сущностей, в обогащенных документах будут созданы соответствующие поля, которые можно будет сопоставить с полями индекса. В статье [Создание ссылок на аннотации в наборе навыков когнитивного поиска](cognitive-search-concept-annotations-syntax.md) вы найдете дополнительные сведения о структурах ввода и вывода.

### <a name="search-index-and-query-based-access"></a>Индекс поиска и доступа с помощью запросов

Когда обработка завершится, в службе "Поиск Azure" будет существовать набор данных поиска, состоящий из обогащенных документов с возможностью текстового поиска по ним. [Запросы по индексу](search-query-overview.md) позволяют разработчикам и пользователям получить доступ к обогащенному содержимому, созданному конвейером индексирования. 

![Индекс со значком поиска](./media/cognitive-search-intro/search-phase-blowup.png "Index with search icon")

Такой индекс действует так же, как любой другой индекс в службе "Поиск Azure", и вы можете дополнить его пользовательскими анализаторами, применить поисковые запросы нечетких соответствий, добавить фильтрацию или настроить профили оценки, чтобы сформировать результаты поиска.

Индексы создаются на основе схемы индекса, в которой определены поля, атрибуты и другие конструкции для конкретного индекса, в том числе профили оценки и карты синонимов. После создания и первичного заполнения индекса можно выполнять индивидуальные операции индексирования для учета новых и обновленных исходных документов. Некоторые изменения данных потребуют полного перестроения индекса. Пока структура схемы не будет достаточно стабильной, ограничьтесь небольшим набором данных. Дополнительные сведения см. в статье [How to rebuild an Azure Search index](search-howto-reindex.md) (Как перестроить индекс для службы "Поиск Azure").

<a name="feature-concepts"></a>

## <a name="key-features-and-concepts"></a>Основные возможности и концепции

| Концепция | ОПИСАНИЕ| Ссылки |
|---------|------------|-------|
| Набор навыков | Именованный ресурс верхнего уровня, содержащий коллекцию навыков. Набор навыков определяет конвейер обогащения. Он применяется индексатором во время индексирования. | [Определение набора навыков](cognitive-search-defining-skillset.md) |
| Когнитивный навык | Атомарное преобразование в конвейере обогащения. Часто этот компонент извлекает или предполагает структуру, расширяя доступное понимание входных данных. Результат преобразования почти всегда имеет текстовый вид, например при обработке естественной речи и обработке изображений извлекается текст из изображений или создается текст на их основе. Выходные данные навыка можно сопоставить с определенным полем индекса или передать в качестве входных данных для последующих операций обогащения. Вы можете использовать стандартные навыки, предоставленные корпорацией Майкрософт, или создать и развернуть собственные настраиваемые навыки. | [Предопределенные навыки](cognitive-search-predefined-skills.md) |
| Извлечение данных | Охватывает широкий спектр обработки, но при когнитивном поиске навык распознавания именованных сущностей чаще всего используется для извлечения данных (имени сущности) из источника, который не предоставляет эту информацию естественным образом. | [Навык распознавания именованных сущностей](cognitive-search-skill-named-entity-recognition.md)| 
| Обработка изображений | Формирует текст на основе изображения, например распознает ориентиры или извлекает текст из изображения. Самые стандартные варианты применения — это распознавание текста из файла отсканированного документа (например, JPEG) или поиск названий улиц на фотографиях со знаками и вывесками. | [Навык анализа изображений](cognitive-search-skill-image-analysis.md) или [навык распознавания текста](cognitive-search-skill-ocr.md)
| Обработка естественного языка | Обработка текста для получения аналитических сведений о текстовых входных данных. Определение языка, анализ тональности и извлечения ключевых фраз — вот основные примеры навыков, относящихся к обработке естественной речи.  | [Навык извлечения ключевых фраз](cognitive-search-skill-keyphrases.md), [навык распознавания языка](cognitive-search-skill-language-detection.md), [навык анализа тональности](cognitive-search-skill-sentiment.md) |
| Открытие документов | Процесс извлечения или создание текстового содержимого из нетекстовых источников во время индексирования. В качестве примера можно упомянуть оптическое распознавание символов, но чаще этот термин относится к базовой функциональности индексатора, то есть к извлечению содержимого из файлов приложения. Для успешного открытия документов важно, чтобы источник данных сообщал расположение исходных файлов, а в определении индексатора были настроены сопоставления для полей. | См. статью об [индексаторах](search-indexer-overview.md). |
| Формирование | Объединение фрагментов текста в более крупные структуры или разделение фрагментов текста на меньшие части для дальнейшей обработки. | [Навык формирования](cognitive-search-skill-shaper.md), [навык слияния текста](cognitive-search-skill-textmerger.md), [навык разделения текста](cognitive-search-skill-textsplit.md) |
| Обогащенные документы | Временная внутренняя структура, к которой нельзя напрямую обратиться из кода. Обогащенные документы создаются в процессе обработки, но только полученные на их основе выходные данные сохраняются в индексе поиска. Сопоставления полей определяют, какие элементы данных добавляются в индекс. | См. раздел [Доступ к обогащенному документу](cognitive-search-tutorial-blob.md#access-enriched-document). |
| Индексатор |  Программа-обходчик, которая извлекает доступные для поиска данные и метаданные из внешнего источника данных, а затем заполняет индекс, сопоставляя поля в индексе и источнике данных для открытия документа. Чтобы применить обогащения на основе когнитивного поиска, индексатор вызывает набор навыков и передает соответствующие обогащения в определенные целевые поля индекса. Определение индексатора содержит все инструкции и ссылки для операций конвейера, который вызывается при запуске индексатора. | [Индексаторы](search-indexer-overview.md) |
| источник данных  | Объект, используемый для подключения индексатора к внешнему источнику данных из числа поддерживаемых в Azure типов. | См. статью об [индексаторах](search-indexer-overview.md). |
| Индекс | Сохраняемые данные поиска в службе "Поиск Azure", составленные в соответствии со схемой индекса, в которой определяются структура и способы использования полей. | [Индексы в службе поиска Azure](search-what-is-an-index.md) | 


## <a name="where-do-i-start"></a>С чего начать?

**Шаг 1. Создание службы поиска в регионе, предоставляя API-интерфейсы** 

+ Южно-центральный регион США
+ Западная Европа

**Шаг 2. Практический опыт для овладения рабочим процессом**

+ [Краткое руководство (портал)](cognitive-search-quickstart-blob.md)
+ [Руководство (HTTP-запросы)](cognitive-search-tutorial-blob.md)
+ [Примеры пользовательских навыков (C#)](cognitive-search-create-custom-skill-example.md)

**Шаг 3. Изучение API (только REST)**

В настоящее время предоставляются только интерфейсы API REST. Используйте `api-version=2017-11-11-Preview` для всех запросов. Используйте следующие интерфейсы API, чтобы создать решения когнитивного поиска. Только два API-интерфейса можно добавить или расширить для когнитивного поиска. Все остальные API сохраняют тот же синтаксис, что и в общедоступной версии.

| ИНТЕРФЕЙС REST API | ОПИСАНИЕ |
|-----|-------------|
| [Создание источника данных](https://docs.microsoft.com/rest/api/searchservice/create-data-source)  | Ресурс, определяющий внешний источник данных с исходными данными, которые будут применены для создания обогащенных документов.  |
| [Создание набора навыков (api-version=2017-11-11-Preview)](https://docs.microsoft.com/rest/api/searchservice/create-skillset)  | Ресурс, описывающий использование [стандартных навыков](cognitive-search-predefined-skills.md) и [пользовательских когнитивных навыков](cognitive-search-custom-skill-interface.md) в конвейере обогащения данных во время индексирования. |
| [Создание индекса](https://docs.microsoft.com/rest/api/searchservice/create-index)  | Схема, описывающая индекс службы "Поиск Azure". Поля в этом индексе сопоставляются с полями в источнике данных или с полями, созданным на этапе обогащения (например, поле с названиями организаций, созданное навыком распознавания сущностей). |
| [Создание индексатора (api-version=2017-11-11-Preview)](https://docs.microsoft.com/rest/api/searchservice/create-skillset)  | Ресурс, определяющий компоненты для процесса индексирования, в том числе источник данных, набор навыков, сопоставлений полей источника и промежуточных структур с полями целевого индекса, определение индекса. При запуске индексатора активируется процесс приема и обогащения данных. На выходе формируются данные поиска со структурой, основанной на схеме индекса, заполненные исходными данными с обогащением, которое сформировано наборами навыков.  |

**Контрольный список: стандартный рабочий процесс**

1. Выделите репрезентативную выборку из набора исходных данных в Azure. Индексирование занимает немало времени, поэтому лучше начать с небольшого репрезентативного набора данных, который вы будете поэтапно развивать параллельно с разработкой решения.

1. Создайте [объект источника данных](https://docs.microsoft.com/rest/api/searchservice/create-data-source) в службе "Поиск Azure", чтобы указать строку подключения для получения данных.

1. Создайте [набор навыков](https://docs.microsoft.com/rest/api/searchservice/create-skillset) с действиями для обогащения.

1. Определите [схему индекса](https://docs.microsoft.com/rest/api/searchservice/create-index). Коллекция *Поля* содержит поля источника данных. Также здесь нужно предусмотреть заглушки для дополнительных полей, в которых будет сохраняться содержимое, созданное на этапе обогащения.

1. Определите [индексатор](https://docs.microsoft.com/rest/api/searchservice/create-skillset) со ссылками на источник данных, набор навыков и индекс.

1. Добавьте в этот индексатор *outputFieldMappings*. Этот раздел сопоставляет выходные данные, полученные от набора навыков (шаг 3), с полями входных данных в схеме индекса (шаг 4).

1. Отправьте только что созданный запрос на *создание индексатора* (запрос POST с определением индексатора в тексте запроса), чтобы определить индексатор в службе "Поиск Azure". Именно этот шаг запускает ваш индексатор и начинает работу конвейера.

1. Выполните тестовые запросы для оценки результатов, и при необходимости измените код, обновив набор навыков, схемы или конфигурацию индексатора.

1. Выполните [сброс индексатора](search-howto-reindex.md), прежде чем перестроить конвейер.

Дополнительные сведения о некоторых вопросах и проблемах см. в статье [Советы по устранению неполадок с когнитивным поиском](cognitive-search-concept-troubleshooting.md).

## <a name="next-steps"></a>Дополнительная информация

+ [Документация по когнитивному поиску](cognitive-search-resources-documentation.md)
+ [Краткое руководство по созданию конвейера когнитивного поиска с использованием навыков и примера данных](cognitive-search-quickstart-blob.md)
+ [Руководство по вызову API-интерфейсов когнитивного поиска (предварительная версия)](cognitive-search-tutorial-blob.md)
