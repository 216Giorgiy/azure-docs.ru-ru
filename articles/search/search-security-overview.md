---
title: "Защита данных и операций в поиске Azure | Документы Microsoft"
description: "Azure Search безопасность основана на соответствие SOC 2, шифрование, проверки подлинности и идентификации доступ через идентификаторов пользователей и групп безопасности в фильтрах поиска Azure."
services: search
documentationcenter: 
author: HeidiSteen
manager: jhubbard
editor: 
ms.assetid: 
ms.service: search
ms.devlang: 
ms.workload: search
ms.topic: article
ms.tgt_pltfrm: na
ms.date: 12/14/2017
ms.author: heidist
ms.openlocfilehash: 23616c70a5fd336b743f5acfad2601a6c3e23fc4
ms.sourcegitcommit: 357afe80eae48e14dffdd51224c863c898303449
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/15/2017
---
# <a name="data-security-and-controlled-access-to-azure-search-operations"></a>Безопасность данных и управляемый доступ к операциям поиска Azure

Поиск Azure — [SOC 2 соответствует](https://servicetrust.microsoft.com/ViewPage/MSComplianceGuide?command=Download&downloadType=Document&downloadId=93292f19-f43e-4c4e-8615-c38ab953cf95&docTab=4ce99610-c9c0-11e7-8c2c-f908a777fa4d_SOC%20%2F%20SSAE%2016%20Reports)с эффективной защиты архитектура связующего физической безопасности, зашифрованных передач данных, зашифрованного хранилища и меры безопасности для всей платформы программного обеспечения. С точки зрения, операций поиска Azure принимает только запросы с проверкой подлинности. При необходимости можно добавить элементы управления доступом на уровне пользователя на содержимое. В этой статье по безопасности на каждом уровне, но в основном ориентировано на способы защиты данных и операций в службе поиска Azure.

![Блок-схема уровни безопасности](media/search-security-overview/azsearch-security-diagram.png)

Во время поиска Azure наследует защиту и меры безопасности для платформы Azure, основной самой службой используется механизм проверки подлинности на основе ключей, где тип ключа определяет уровень доступа. Ключ является ключом администратора или ключ запроса для доступа только для чтения.

Доступ к службе основан на разрез разрешения, предоставляемые ключ (полной или только для чтения), а также контекст, который определяет объем операций. Каждый запрос состоит из обязательных ключ, операции и объекта. Когда друг с другом два уровня разрешений, а также в контексте достаточны для обеспечения безопасности полный спектр для операций службы. 

## <a name="physical-security"></a>Физическая безопасность

Центрах обработки данных Майкрософт предоставляют ведущие в отрасли физической безопасности и соответствующие расширенные портфелем стандарты и нормативные требования. Для получения дополнительных сведений перейдите к [глобальных центрах обработки данных](https://www.microsoft.com/cloud-platform/global-datacenters) страницы или ознакомьтесь с коротким видео на данных центра безопасности.

> [!VIDEO https://www.youtube.com/embed/r1cyTL8JqRg]

## <a name="encrypted-transmission-and-storage"></a>Зашифрованные передачи и хранения

Поиск Azure прослушивает HTTPS-порт 443. Подключения к службам Azure по всей платформе, будут зашифрованы. 

На внутреннего хранилища, используемый для индексов и другие конструкции поиск Azure использует средства шифрования этих платформ. Полный [AICPA SOC 2 соответствия](https://www.aicpa.org/interestareas/frc/assuranceadvisoryservices/aicpasoc2report.html) доступна для все совпадения при поиске служб (новые и существующие) во всех центрах обработки данных, предлагая поиска Azure. Чтобы просмотреть полный отчет, перейдите к [Azure и отчет Azure государственных SOC 2 типа II](https://servicetrust.microsoft.com/ViewPage/MSComplianceGuide?command=Download&downloadType=Document&downloadId=93292f19-f43e-4c4e-8615-c38ab953cf95&docTab=4ce99610-c9c0-11e7-8c2c-f908a777fa4d_SOC%20%2F%20SSAE%2016%20Reports).

Шифрование является прозрачным, используя ключи шифрования управляется внутренними системными механизмами и применяется ко всем компонентам. Нельзя отключить его для поиска определенной службы или индексы, и не осуществляет прямое управление ключами и создать собственные. 

## <a name="azure-wide-logical-security"></a>Логический безопасности на уровне Azure

Несколько механизмов безопасности доступны через стек Azure, таким образом, автоматически ставшие доступными для поиска Azure ресурсы, которые вы создаете.

+ [Блокировок на уровне ресурсов для предотвращения удаления или подписки](../azure-resource-manager/resource-group-lock-resources.md)
+ [На основе ролей управления доступом (RBAC) для управления доступом к информации и административные операции](../active-directory/role-based-access-control-what-is.md)

Все службы Azure поддерживают элементы управления доступом на основе ролей (RBAC) для задания уровней доступа согласованно во всех службах. Например Просмотр конфиденциальных данных, таких как ключ администратора ограничен ролями владельца и участника, тогда как просмотр состояния службы доступен членам любых ролей. RBAC предоставляет роли владельца, участника и чтения. По умолчанию все администраторы службы являются членами роли-владельца.

## <a name="service-authentication"></a>Проверка подлинности службы

Поиск Azure предоставляет свои собственные методы проверки подлинности. Происходит при каждом запросе проверки подлинности и основан на клавиши доступа, которая определяет область операции. Допустимый ключ считается доказательства запрос исходит от доверенного лица. 

Службы проверки подлинности существует на двух уровнях: полные права только для запроса. Тип ключа, определяет, какой уровень доступа в силе.

|Ключ|ОПИСАНИЕ|Ограничения|  
|---------|-----------------|------------|  
|Администратор|Предоставляет полные права доступа ко всем операциям, включая возможность управлять службой, создавать и удалять **индексы**, **индексаторы**, и **источники данных**.<br /><br /> Два администратора **ключи api**, которые называются *основной* и *получателя* ключи на портале, создаются при создании службы и по отдельности повторному по требованию . Наличие двух ключей позволяет при использовании второго ключа для непрерывный доступ к службе, наведите курсор на один ключ.<br /><br /> Администраторские ключи определяются только в заголовки HTTP-запросов. Не удается разместить администратора **ключ api** в URL-АДРЕСЕ.|Максимум 2 на службу|  
|Запрос|Предоставляет доступ только для чтения к индексам и документам и обычно распространяются на клиентские приложения, издающие запросы поиска.<br /><br /> Ключи запроса создаются по запросу. Их можно создать вручную на портале или программным путем с помощью [API REST управления](https://docs.microsoft.com/rest/api/searchmanagement/).<br /><br /> Ключи запроса можно указать в заголовке запроса HTTP для поиска, предложения или операция уточняющего запроса. Кроме того можно передать ключ запроса как параметр в URL-АДРЕСЕ. В зависимости от того, как клиентское приложение формирует запрос может быть проще для передачи ключа в качестве параметра запроса:<br /><br /> `GET /indexes/hotels/docs?search=*&$orderby=lastRenovationDate desc&api-version=2016-09-01&api-key=A8DA81E03F809FE166ADDB183E9ED84D`|50 на службу|  

 Визуально нет никакой разницы между ключ администратора или ключа запроса. Ключи создаются строк случайным образом из 32 алфавитно цифровых символов. Если потерять тип ключа, указанного в приложении можно [проверьте значения ключа на портале](https://portal.azure.com) или использовать [API-интерфейса REST](https://docs.microsoft.com/rest/api/searchmanagement/) в возвращаемое значение и тип ключа.  

> [!NOTE]  
>  Он считается плохой безопасности рекомендуется передавать конфиденциальные данные, например `api-key` в URI запроса. По этой причине поиск Azure принимает только ключ запроса как `api-key` в запросе строка и следует этого избегать, если только содержимое индекса должен быть общедоступным. Как правило, рекомендуется передавать вашей `api-key` как заголовок запроса.  

### <a name="how-to-find-the-access-keys-for-your-service"></a>Как найти ключи доступа для службы

Вы можете получить ключи доступа на портале или посредством [API REST управления](https://docs.microsoft.com/rest/api/searchmanagement/). Дополнительные сведения см. в разделе [управление ключами](search-manage.md#manage-api-keys).

1. Войдите на [портале Azure](https://portal.azure.com).
2. Список [службах](https://portal.azure.com/#blade/HubsExtension/BrowseResourceBlade/resourceType/Microsoft.Search%2FsearchServices) для вашей подписки.
3. Выберите службу и на странице службы поиска **параметры** >**ключей** для просмотра ключей администратора и запросов.

![Страница портала, параметры, ключи статьи](media/search-security-overview/settings-keys.png)

## <a name="index-access"></a>Индекс доступа

В поиске Azure конкретного индекса не защищаемого объекта. Вместо этого доступ к индексу определяется на уровне службы (чтение или запись), вместе с контекстом операции.

В случае с доступом пользователей можно структурировать запросов в приложении подключение с использованием запроса ключ, который делает любой запрос только для чтения и включать конкретного индекса, используемые приложением. В запросе отсутствует понятие объединение индексов и доступа к ним нескольких индексов одновременно, все запросы целевой отдельный индекс по определению. Таким образом структура запроса сам (ключ и один целевой индекс) определяет границы безопасности.

Администратор и разработчик доступ к индексам форматными: оба необходимо разрешение на запись для создания, удаления и обновления объектов, управляемых службой. Все, кто имеет ключ администратора к службе можно прочитать, изменить или удалить любой индекс в той же службе. Для защиты от случайного или злонамеренного удаления индексов управления версиями собственных средств код является решение для обращения индекс нежелательного удаления или изменения. Поиск Azure отказоустойчивого кластера для обеспечения доступности, а не хранить или выполните собственный код позволяет создать или загрузить индексов.

Мультитенантности решения, требующие границы безопасности на уровне индексов такие решения, как правило, включает среднего уровня, какие клиенты использовать для обработки индекса изоляции. Дополнительные сведения о многопользовательской вариант в разделе [шаблоны для многопользовательских приложений SaaS и поиска Azure проектирования](search-modeling-multitenant-saas-applications.md).

## <a name="admin-access-from-client-apps"></a>Административный доступ из клиентских приложений

Интерфейс управления поисковой службой Azure REST API является расширением диспетчера ресурсов Azure и использует те же зависимости. Таким образом, для администрирования службы поиска Azure необходимо наличие Active Directory. Все административные запросы из клиентского кода должны проходить проверку подлинности с помощью Azure Active Directory, прежде чем запрос достигнет диспетчера ресурсов.

Запросы данных от конечной точки службы поиска Azure, такие как Create Index (API REST службы поиска Azure) или поиск документов (Azure службы REST API поиска), используйте ключ api в заголовке запроса.

Если код приложения обрабатывает операции администрирования службы, а также операций с данными в документах или индексах поиска, реализуйте два способа проверки подлинности в коде: ключ доступа собственного поиска Azure и проверки подлинности Active Directory Методология необходимые диспетчером ресурсов. 

Сведения о структурировании запрос в поиске Azure см. в разделе [REST службы поиска Azure](https://docs.microsoft.com/rest/api/searchservice/). Дополнительные сведения о требованиях к проверки подлинности для диспетчера ресурсов см. в разделе [проверки подлинности с помощью диспетчера ресурсов API доступа к подпискам](../azure-resource-manager/resource-manager-api-authentication.md).

## <a name="user-access-to-index-content"></a>Доступ пользователя к содержимому индекса

Доступ пользователя к содержимому индекса реализуется с помощью фильтров безопасности на запросы, возвращая документы, связанные с удостоверением безопасности данного. Вместо стандартных ролей и назначения ролей управление доступом на основе удостоверений реализуется как фильтр, обрезка поиска результаты документов и содержимое на основе удостоверений. В следующей таблице описаны два подхода для результатов поиска усечения несанкционированного содержимого.

| Подход | ОПИСАНИЕ |
|----------|-------------|
|[Фильтрация по ролям безопасности на основе удостоверений фильтров](search-security-trimming-for-azure-search.md)  | Документирует базовый рабочий процесс для реализации управления доступом для идентификации пользователя. Описывается добавление идентификаторы безопасности для индекса и затем объясняется Фильтрация для усечения результаты запрещенное содержимое этого поля. |
|[Фильтрация по ролям безопасности на основе удостоверений Azure Active Directory](search-security-trimming-for-azure-search-with-aad.md)  | В этой статье расширяет предыдущей статьи, предоставляя действия для получения удостоверений с Azure Active Directory (AAD), один из [бесплатные услуги](https://azure.microsoft.com/free/) в Azure облачной платформы. |

## <a name="table-permissioned-operations"></a>Таблицы: Операции было предоставлено разрешение

В следующей таблице перечислены операции, разрешенные в поиске Azure и ключ, который разблокирует доступ конкретной операции.

| Операция | Разрешения |
|-----------|-------------------------|
| создание службы; | Владелец подписки Azure|
| Масштабирование службы | Ключ администратора RBAC владельцем или участником ресурса  |
| удаление службы; | Ключ администратора RBAC владельцем или участником ресурса |
| Создание, изменение, удаление объектов в службе: <br>Индексы и компонентов (включая определения анализатора, профилей оценки, параметры CORS), индексаторы, источников данных, синонимы, средств подбора. | Ключ администратора RBAC владельцем или участником ресурса  |
| Запрос индекса | Ключ администратора или запроса (RBAC не применяется) |
| Запрашивать сведения о системе, например возвращают статистику, количество и списки объектов. | Ключ администратора, RBAC на ресурс (владельца, участника чтения) |
| Управление ключами администратора | Ключ администратора, RBAC владельцем или участником ресурса. |
| Управление ключами запросов |  Ключ администратора, RBAC владельцем или участником ресурса. RBAC чтения можно просмотреть ключи запроса. |


## <a name="see-also"></a>См. также

+ [Получение запуска .NET (демонстрирует использование ключа администратора для создания индекса)](search-create-index-dotnet.md)
+ [Получение запуска REST (демонстрирует использование ключа администратора для создания индекса)](search-create-index-rest-api.md)
+ [Управление доступом на основе удостоверений, с помощью фильтров поиска Azure](search-security-trimming-for-azure-search.md)
+ [Контроль доступа на основе удостоверения Active Directory, с помощью фильтров поиска Azure](search-security-trimming-for-azure-search-with-aad.md)
+ [Фильтры в службе "Поиск Azure"](search-filters.md)