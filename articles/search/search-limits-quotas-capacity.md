---
title: Ограничения поиска Azure | Документация Майкрософт
description: Ограничения службы поиска Azure, используемые при планировании мощности, а также ограничения запросов и ответов на них.
author: HeidiSteen
manager: cgronlun
services: search
ms.service: search
ms.devlang: NA
ms.topic: conceptual
ms.date: 04/04/2018
ms.author: heidist
ms.openlocfilehash: 59b6efd8459f675bc44891d7b04251260fdd38e9
ms.sourcegitcommit: fa493b66552af11260db48d89e3ddfcdcb5e3152
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2018
---
# <a name="service-limits-in-azure-search"></a>Ограничения поиска Azure
Максимальные ограничения хранилища, рабочих нагрузок, количества индексов, документов и других объектов зависят от того, для какой ценовой категории вы [подготовили службу поиска Azure](search-create-service-portal.md): **Бесплатный**, **Базовый** или **Стандартный**.

+ **Бесплатный** представляет собой мультитенантную службу, которая предоставляется вместе с подпиской Azure.

+ Уровень **Базовый** предоставляет выделенные вычислительные ресурсы для небольших рабочих нагрузок в рабочей среде.

+ Для уровня **Стандартный** используются выделенные виртуальные машины. Это обеспечивает увеличение емкости хранилища и вычислительной мощности на всех уровнях. В категории "Стандартный" доступно четыре уровня: S1, S2, S3 и S3 HD (S3, высокая плотность).

  Уровень S3 HD (S3, высокая плотность) разработан для рабочих нагрузок с особыми характеристиками: [мультитенантность](search-modeling-multitenant-saas-applications.md) и большое количество небольших индексов (до миллиона документов на индекс, до трех тысяч индексов на каждую службу). На этом уровне не предоставляется [компонент индексатора](search-indexer-overview.md). На уровне S3 HD прием данных необходимо выполнять через механизм push, то есть передавать данные из источника в индекс с помощью вызовов API. 

> [!NOTE]
> Служба подготавливается на определенном уровне. Чтобы перейти к другому уровню для получения дополнительной емкости, нужно подготовить новую службу (обновление на месте не поддерживается). Дополнительные сведения см. в статье [Выбор SKU или ценовой категории для службы поиска Azure](search-sku-tier.md). Чтобы узнать больше о настройке емкости в уже подготовленной службе, ознакомьтесь с разделом [Масштабирование уровней ресурсов для рабочих нагрузок запросов и индексирования в Поиске Azure](search-capacity-planning.md).
>

## <a name="subscription-limits"></a>Ограничения подписки
[!INCLUDE [azure-search-limits-per-subscription](../../includes/azure-search-limits-per-subscription.md)]

## <a name="storage-limits"></a>Ограничения хранилища
[!INCLUDE [azure-search-limits-per-service](../../includes/azure-search-limits-per-service.md)]

<a name="index-limits"></a>

## <a name="index-limits"></a>Ограничения индексов

| Ресурс | Free | Базовый&nbsp;<sup>1</sup>  | S1 | S2 | S3 | S3&nbsp;HD |
| -------- | ---- | ------------------- | --- | --- | --- | --- |
| Максимальное число индексов |3 |5 или 15 |50 |200 |200 |1000 на секцию или 3000 на службу |
| Максимальное число полей на индекс |1000 |100 |1000 |1000 |1000 |1000 |
| Максимальное число профилей оценки на индекс |100 |100 |100 |100 |100 |100 |
| Максимальное число функций на профиль |8 |8 |8 |8 |8 |8 |

<sup>1</sup> В службах категории "Базовый", созданных в конце 2017 года или позднее, допустимое количество индексов, источников данных и индексаторов увеличено до 15. Для служб, созданных ранее, применяется ограничение 5. Уровень "Базовый" — единственный SKU с ограничением в минимум 100 полей на индекс.

## <a name="document-limits"></a>Ограничения документов 

В большинстве регионов все ценовые категории службы "Поиск Azure" ("Базовый", S1, S2, S3, S3 HD) поддерживают неограниченное количество документов для всех служб, созданных после ноября (или декабря) 2017 г. В этом разделе указано, в каких регионах применяются ограничения, и описан способ определить, применяются ли они для вашей службы. 

Чтобы определить, есть ли ограничения документов для вашей службы, откройте плитку "Использование" на странице общей информации о службе. Здесь, в зависимости от уровня, вы увидите применимое ограничение или отметку об отсутствии ограничений для количества документов.

  ![Плитка "Использование"](media/search-limits-quotas-capacity/portal-usage-tile.png)

### <a name="regions-and-services-having-document-limits"></a>Регионы и службы, для которых действуют ограничения по количеству документов

Ограничения применяются к службам, которые созданы раньше конца 2017 г. или выполняются в центрах обработки данных, где служба "Поиск Azure" размещается в кластерах с низкой мощностью. Сюда относятся центры обработки данных в следующих регионах:

+ Восточная часть Австралии
+ Восточная Азия
+ Центральная Индия
+ Западная часть Японии
+ Западно-центральная часть США

Для соответствующих служб применяются следующие ограничения:

|  Free | базовая; | S1 | S2 | S3 | S3&nbsp;HD |
|-------|-------|----|----|----|-------|
|  10 000 |1 млн |15 млн на секцию или 180 млн на службу |60 млн на секцию или 720 млн на службу |120 млн на секцию или 1,4 млрд на службу |1 млн на индекс или 200 млн на секцию |

> [!Note] 
> В службах уровня S3 с высокой плотностью, созданных в конце 2017 года, устранено ограничение в 200 миллионов документов на раздел, но ограничение в 1 миллион документов на индекс осталось.


### <a name="document-size-limits-per-api-call"></a>Ограничения размера документа на один вызов API

Максимальный размер документа при вызове API индекса составляет примерно 16 МБ.

Фактически размер документа ограничивает размер текста запроса API индекса. Так как API индекса позволяет одновременно передать пакет из нескольких документов, фактически предельный размер зависит от количества документов в таком пакете. Для пакета с одним документом максимальный размер документа составляет 16 МБ данных JSON.

Чтобы уменьшить размер документа, не забудьте исключить из запроса недоступные для запроса данные. Образы и другие двоичные данные не запрашиваются напрямую и не должны храниться в индексе. Чтобы добавить в результаты поиска недоступные для запроса данные, определите поле, недоступное для поиска, в котором хранится ссылка на URL-адрес ресурса.

## <a name="indexer-limits"></a>Ограничения индексатора

В службах уровня "Базовый", созданных в конце 2017 года, увеличено допустимое количество индексов, источников данных и индексаторов до 15.

| Ресурс | Бесплатный&nbsp;<sup>1</sup> | Базовый&nbsp;<sup>2</sup>| S1 | S2 | S3 | S3&nbsp;HD&nbsp;<sup>3</sup>|
| -------- | ----------------- | ----------------- | --- | --- | --- | --- |
| Максимальное число индексаторов |3 |5 или 15|50 |200 |200 |Недоступно |
| Максимальное количество источников данных |3 |5 или 15 |50 |200 |200 |Недоступно |
| Максимальная нагрузка индексирования на вызов |10 000 документов |Ограничивается только максимальным числом документов |Ограничивается только максимальным числом документов |Ограничивается только максимальным числом документов |Ограничивается только максимальным числом документов |Недоступно |
| Максимальное время выполнения | 1–3 мин |24 часа |24 часа |24 часа |24 часа |Недоступно  |
| Индексатор BLOB-объектов: максимальный размер BLOB-объектов в МБ |16 |16 |128 |256 |256 |Недоступно  |
| Индексатор BLOB-объектов: максимальное число символов в содержимом, извлеченном из BLOB-объекта |32 000 |64 000 |4 млн |4 млн |4 млн |Недоступно |

<sup>1</sup> Максимальное время выполнения индексатора для служб уровня "Бесплатный" составляет 3 минуты для источников больших двоичных объектов или 1 минуту для прочих источников данных.

<sup>2</sup> В службах уровня "Базовый", созданных в конце 2017 года или позднее, допустимое количество индексов, источников данных и индексаторов увеличено до 15. Для служб, созданных ранее, применяется ограничение 5.

<sup>3</sup> Службы уровня S3 HD не поддерживают индексаторы.

## <a name="queries-per-second-qps"></a>Число запросов в секунду (QPS)

Оценка QPS должна отдельно проводиться каждым клиентом. Основными определителями QPS являются размер и сложность индексов, размер и сложность запросов, а также объем трафика. Если такие факторы неизвестны, оценка не будет информативной.

Прогнозируемость показателей повышается, если оцениваются службы, работающие в выделенных ресурсах (категорий "Базовый" и "Стандартный"). Можно точнее оценить QPS, так как вы можете контролировать больше параметров. Рекомендации по оценке см. в разделе о [производительности и оптимизации службы "Поиск Azure"](search-performance-optimization.md).

## <a name="api-request-limits"></a>Ограничения запроса API
* Максимум 16 МБ на один запрос <sup>1</sup>
* Максимальная длина URL-адреса — 8 КБ.
* Максимум 1000 документов на одну операцию загрузки индексов, объединения или удаления.
* Максимум 32 поля в предложении $orderby.
* Максимальный размер поискового запроса — 32 766 байтов (32 КБ минус 2 байта) текста в кодировке UTF-8.

<sup>1</sup> В Поиске Azure размер текста запроса должен быть не больше 16 МБ. Это накладывает фактическое ограничение на отдельные поля или коллекции, для которых теоретические ограничения не установлены (дополнительные сведения о составе и ограничениях полей см. в разделе [Supported data types (Azure Search)](https://msdn.microsoft.com/library/azure/dn798938.aspx) (Поддерживаемые типы данных (Поиск Azure))).

## <a name="api-response-limits"></a>Ограничения ответа API
* Максимум 1000 документов на одну страницу результатов поиска.
* Максимум 100 предложений на один запрос API предложений.

## <a name="api-key-limits"></a>Ограничения ключа API
Ключи API используются для проверки подлинности в службе. Существует два типа ключей. Ключи администратора указываются в заголовке запроса и предоставляют доступ к службе на чтение и запись. Ключи запросов доступны только для чтения, они указываются в URL-адресе и обычно передаются в клиентские приложения.

* Максимум 2 ключа администратора на одну службу.
* Максимум 50 ключей запросов на одну службу.
