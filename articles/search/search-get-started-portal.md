---
title: "Начало работы со службой поиска Azure | Документация Майкрософт"
description: "Узнайте, как создать первый индекс службы поиска Azure с помощью этого пошагового руководства и примеров данных DocumentDB. Вы сможете это сделать без необходимости писать код, используя функции портала и мастер импорта данных."
services: search
documentationcenter: 
author: HeidiSteen
manager: jhubbard
editor: 
tags: azure-portal
ms.assetid: 21adc351-69bb-4a39-bc59-598c60c8f958
ms.service: search
ms.devlang: na
ms.workload: search
ms.topic: hero-article
ms.tgt_pltfrm: na
ms.date: 10/03/2016
ms.author: heidist
translationtype: Human Translation
ms.sourcegitcommit: 4fc33ba185122496661f7bc49d14f7522d6ee522
ms.openlocfilehash: 02623fc3d663a674e2184380915d651dff5760bc


---
# <a name="get-started-with-azure-search-in-the-portal"></a>Начало работы со службой поиска Azure на портале
В этой статье в общих чертах (без примеров кода) описывается использование службы поиска Microsoft Azure с помощью средств портала. 

Для работы с этим руководством вам понадобится [образец базы данных Azure DocumentDB](#apdx-sampledata), который легко создать с помощью наших инструкций и данных. Вы также можете адаптировать эти действия к имеющимся данным в базе данных DocumentDB или SQL.

> [!NOTE]
> Кроме того, вам понадобятся [подписка Azure](https://azure.microsoft.com/pricing/free-trial/?WT.mc_id=A261C142F) и [служба поиска Azure](search-create-service-portal.md). 
> 
> 

## <a name="find-your-service"></a>Поиск службы
1. Войдите на [портал Azure](https://portal.azure.com).
2. Откройте служебную панель службы поиска Azure. Найти панель мониторинга можно несколькими способами.
   
   * В указателе щелкните **Службы поиска**. В указателе отображаются все службы, подготовленные в вашей подписке. Если служба поиска определена, вы увидите в списке пункт **Службы поиска**.
   * В указателе щелкните **Обзор** и введите в поле поиска слово "поиск". Отобразится список всех служб поиска, созданных в ваших подписках.

## <a name="check-for-space"></a>Проверка доступного пространства
Многие пользователи предпочитают начать работу с бесплатной службой. В бесплатной версии можно использовать только три индекса, три источника данных и три индексатора. Перед началом работы убедитесь, что у вас достаточно места для дополнительных элементов. В этом руководстве каждый объект создается один раз.

## <a name="create-an-index-and-load-data"></a>Создание индекса и загрузка данных
Поисковые запросы выполняют итерацию по *индексу* , содержащему доступные для поиска данные, метаданные и конструкции, которые используются для оптимизации способов поиска. Для начала необходимо определить и заполнить индекс.

Создать индекс можно несколькими способами. Если ваши данные расположены в хранилище, которое может просканировать служба поиска Azure (это может быть база данных SQL Azure, SQL Server на виртуальной машине Azure или база данных DocumentDB), создайте и заполните индекс с помощью *индексатора*.

Чтобы выполнить эту задачу с помощью портала, мы будем использовать данные в базе данных DocumentDB. Индексатор сможет просканировать эту базу данных с помощью мастера **импорта данных**. 

Прежде чем продолжать работу с этим руководством, создайте [пример базы данных DocumentDB](#apdx-sampledata) , а затем вернитесь в этот раздел для выполнения указанных ниже действий.

<a id="defineDS"></a>

#### <a name="step-1-define-the-data-source"></a>Этап 1. Определение источника данных
1. На панели мониторинга службы поиска Azure щелкните в командной строке **Импорт данных**. Запустится мастер, который создает и заполняет индекс.
   
    ![][7]
2. В окне мастера щелкните **Источник данных** > **DocumentDB** > **Имя**, а затем введите имя источника данных. Источник данных — это объект подключения в службе поиска Azure, который может использоваться с другими индексаторами. После создания он будет доступен в службе как существующий источник данных.
3. Выберите существующую учетную запись DocumentDB, а также базу данных и коллекцию. Если вы используете наш пример данных, определение источника данных будет выглядеть так:
   
    ![][2]

Обратите внимание, что мы пропускаем поле запроса. Это связано с тем, что сейчас мы не внедряем отслеживание изменений в наш набор данных. Если набор данных включает поле, которое отвечает за отслеживание обновления записи, вы можете настроить индексатор поиска Azure и отслеживать выборочные изменения индекса.

Нажмите кнопку **ОК** , чтобы завершить этот этап работы мастера.

#### <a name="step-2-define-the-index"></a>Этап 2. Определение индекса
В окне мастера щелкните **Индекс**. Отобразится рабочая область конструирования, которая нужна для того, чтобы создать индекс службы поиска Azure. Для индекса необходимо указать как минимум имя и коллекцию полей, а одно поле отметить как ключ документа. Поскольку мы используем набор данных DocumentDB, поля определяются мастером автоматически, а индекс загружается с предварительно назначенными полями и типами данных. 

  ![][3]

Хотя поля и типы данных настроены, вам нужно назначить атрибуты. Флажки в верхней части списка полей — это *атрибуты индекса* , которые определяют, как используется поле. 

* **Доступный для получения** означает, что поле будет показано в списке результатов поиска. Вы можете снять этот флажок напротив отдельных полей, чтобы исключить их из результатов поиска (например, если такие поля используются только в выражениях фильтра). 
* Атрибуты **Фильтруемый**, **Сортируемый** и **Аспектируемый** определяют, может ли поле использоваться в структуре фильтруемой, сортируемой или фасетной навигации. 
* **Доступный для поиска** включает поле в полнотекстовый поиск. Строки обычно являются доступными для поиска. Поиск по числовым и логическим полям часто исключается. 

Прежде чем покинуть эту страницу, отметьте поля в индексе, используя перечисленные параметры ("Доступный для получения", "Доступный для поиска" и т. д.). Большинство полей отмечаются как доступные для получения. Большинство строковых полей отмечаются как доступные для поиска (вам не нужно делать ключ доступным для поиска). Несколько полей, включая genre, orderableOnline, rating и tags, также являются фильтруемыми, сортируемыми и аспектируемыми. 

| Поле | Тип | Параметры |
| --- | --- | --- |
| id |Edm.String | |
| albumTitle |Edm.String |Доступное для получения, доступное для поиска |
| albumUrl |Edm.String |Доступное для получения, доступное для поиска |
| genre |Edm.String |Доступное для получения, доступное для поиска, фильтруемое, сортируемое, аспектируемое |
| genreDescription |Edm.String |Доступное для получения, доступное для поиска |
| artistName |Edm.String |Доступное для получения, доступное для поиска |
| orderableOnline |Edm.Boolean |Доступное для получения, фильтруемое, сортируемое, аспектируемое |
| tags |Collection(Edm.String) |Доступное для получения, фильтруемое, аспектируемое |
| price |Edm.Double |Доступное для получения, фильтруемое, аспектируемое |
| margin |Edm.Int32 | |
| рейтинг |Edm.Int32 |Доступное для получения, фильтруемое, сортируемое, аспектируемое |
| inventory |Edm.Int32 |Доступный для получения |
| lastUpdated |Edm.DateTimeOffset | |

Для сравнения на следующем снимке экрана показан индекс, соответствующий спецификации в предыдущей таблице.

 ![][4]

Нажмите кнопку **ОК** , чтобы завершить этот этап работы мастера.

#### <a name="step-3-define-the-indexer"></a>Этап 3. Определение индексатора
В мастере **импорта данных** щелкните **Индексатор** > **Имя**, введите имя индексатора и оставьте значения по умолчанию для всех остальных параметров. Этот объект определяет исполняемый процесс. Создав его, вы можете задать для него повторяющееся расписание. А пока используйте параметр по умолчанию, чтобы однократно и немедленно запустить индексатор после нажатия кнопки **ОК**. 

Все импортируемые элементы данных должны быть заполнены и готовы к работе.

  ![][5]

Нажмите кнопку **ОК** , чтобы запустить мастер и начать импорт, а затем закройте мастер.

## <a name="check-progress"></a>Проверка хода выполнения
Чтобы проверить ход выполнения, на панели мониторинга службы прокрутите вниз и дважды щелкните плитку **Индексаторы**. Откроется список индексаторов. В списке вы увидите только что созданный индексатор, состояние, указывающее на выполнение или завершение, а также количество документов, проиндексированных в службе поиска Azure.

  ![][6]

## <a name="query-the-index"></a>Запрос индекса
Теперь индекс службы поиска может создавать запросы. 

**Проводник поиска** — это средство работы с запросами, встроенное в портал. Это поле для поиска, с помощью которого можно проверить, как условия поиска возвращают ожидаемые данные. 

1. Щелкните **Проводник поиска** на панели команд.
2. Проверьте, какой индекс является активным. Если это не тот индекс, который вы только что создали, на панели команд щелкните **Изменить индекс** и выберите нужный индекс.
3. Оставьте поле поиска пустым и нажмите кнопку **Поиск** , чтобы выполнить поиск с использованием подстановочных знаков, который возвращает все документы.
4. Введите несколько запросов для полнотекстового поиска. Просмотрев результаты поиска, в котором используются подстановочные знаки, вы можете ознакомиться с исполнителями, альбомами и жанрами и создавать на основе этих сведений запросы.
5. Попробуйте использовать другой синтаксис запросов (см. [примеры, приведенные в конце этой статьи](https://msdn.microsoft.com/library/azure/dn798927.aspx)), чтобы запрос включал строки поиска, которые предположительно можно найти в вашем индексе.

## <a name="next-steps"></a>Дальнейшие действия
После первого запуска мастера вы можете вернуться назад и просмотреть или изменить отдельные компоненты: индекс, индексатор или источник данных. Некоторые изменения, например изменение типа данных поля, недоступны в индексе, но большинство свойств и настроек можно изменять. Чтобы просмотреть отдельные компоненты, на панели мониторинга щелкните плитку **Индекс**, **Индексатор** или **Источники данных**. Отобразится список имеющихся объектов.

Дополнительные сведения о других возможностях, упоминаемых в этом руководстве, см. в следующих статьях.

* [Индексаторы](search-indexer-overview.md)
* [Create Index (Azure Search Service REST API) (Создание индекса (REST API службы поиска Azure)). Содержит подробное описание атрибутов индекса.](https://msdn.microsoft.com/library/azure/dn798941.aspx)
* [Обозреватель поиска](search-explorer.md)
* [Search Documents (Azure Search Service REST API) (Поиск по документам (REST API службы поиска Azure)). Содержит примеры синтаксиса запросов.](https://msdn.microsoft.com/library/azure/dn798927.aspx)

Попробуйте выполнить эти же действия, используя мастер импорта данных с другими источниками данных, например с базой данных SQL Azure или SQL Server на виртуальных машинах Azure.

> [!NOTE]
> Недавно на портале была реализована поддержка индексатора для сканирования хранилища BLOB-объектов Azure, но пока эта функция доступна только в режиме предварительной версии. Чтобы протестировать этот индексатор, необходимо написать код. Дополнительные сведения см. в статье [Индексирование документов в хранилище BLOB-объектов Azure с помощью службы поиска Azure](search-howto-indexing-azure-blob-storage.md).
> <a id="apdx-sampledata"></a>
> 
> 

## <a name="appendix-create-sample-data-in-documentdb"></a>Приложение. Создание демонстрационных данных в DocumentDB
В этом разделе описывается создание небольшой базы данных в DocumentDB, которую можно использовать для работы с руководством.

Приведенные ниже инструкции содержат общие рекомендации, но не являются исчерпывающими. Если вам нужна дополнительная помощь по навигации или задачам на портале DocumentDB, см. документацию по DocumentDB. Большинство нужных команд находится на панели команд службы в верхней части панели мониторинга или в колонке базы данных. 

  ![][1]

### <a name="create-musicstoredb-for-this-tutorial"></a>Создание базы данных musicstoredb для работы с этим руководством
1. [Щелкните здесь](https://github.com/HeidiSteen/azure-search-get-started-sample-data) , чтобы скачать ZIP-архив, содержащий JSON-файлы данных из магазина музыки. Для этого набора данных доступно 246 документов JSON.
2. Добавьте DocumentDB в свою подписку, а затем откройте панель мониторинга службы.
3. Щелкните **Добавить базу данных**, чтобы создать базу данных с идентификатором `musicstoredb`. Созданная база данных отобразится на плитке баз данных в нижней части страницы.
4. Щелкните имя базы данных, чтобы открыть колонку базы данных.
5. Щелкните **Добавить коллекцию**, чтобы создать коллекцию с идентификатором `musicstorecoll`.
6. Щелкните **Обозреватель документов**.
7. Щелкните **Отправить**.
8. В области **Отправка документа**перейдите к локальной папке, содержащей ранее скачанные JSON-файлы. JSON-файлы следует выбирать пакетами не более чем по 100.
   * 386.json
   * 387.json
   * . . .
   * 486.json
9. Повторите для получения следующего пакета файлов, пока не будет отправлен последний файл — 669.json.
10. Щелкните **Обозреватель запросов** и убедитесь, что данные загружаются в соответствии с требованиями обозревателя документов к отправке.

Проще всего это сделать с помощью запроса по умолчанию. Этот запрос можно изменить так, чтобы он выбирал 300 лучших результатов (всего в этом наборе данных доступно меньше 300 элементов).

Вы должны получить выходные данные JSON, представленные набором документов с номерами 386–669. После загрузки данных вы можете [вернуться к соответствующему разделу этого руководства](#defineDS), чтобы создать индекс с помощью **мастера импорта данных**.

<!--Image references-->
[1]: ./media/search-get-started-portal/AzureSearch-GetStart-Docdbmenu1.png
[2]: ./media/search-get-started-portal/AzureSearch-GetStart-DataSource.png
[3]: ./media/search-get-started-portal/AzureSearch-GetStart-DefaultIndex.png
[4]: ./media/search-get-started-portal/AzureSearch-GetStart-FinishedIndex.png
[5]: ./media/search-get-started-portal/AzureSearch-GetStart-ImportReady.png
[6]: ./media/search-get-started-portal/AzureSearch-GetStart-IndexerList.png
[7]: ./media/search-get-started-portal/search-data-import-wiz-btn.png



<!--HONumber=Dec16_HO1-->


