<properties
	pageTitle="Что такое поиск Azure"
	description="Технический обзор службы поиска Azure и обзор ее функций."
	services="search"
	documentationCenter=""
	authors="HeidiSteen"
	manager="mblythe"
	editor=""
    tags="azure-portal"/>

<tags
	ms.service="search"
	ms.devlang="NA"
	ms.workload="search"
	ms.topic="article" 
	ms.tgt_pltfrm="na"
	ms.date="07/08/2015"
	ms.author="heidist"/>

# Что такое поиск Azure?

Служба поиска Azure — это полностью управляемая облачная служба, которая позволяет разработчикам создавать приложения с широкими возможностями поиска, используя пакет SDK для .NET или API REST. Она включает полнотекстовый поиск по всему содержимому, а также расширенные стратегии поиска, аналогичные алгоритмам коммерческих поисковых систем в Интернете, такие как упреждающий ввод запросов на основе частично введенного условия поиска, выделение и фасетная навигация. Встроена поддержка естественного языка и использование лингвистических правил, соответствующих выбранному языку.

Службу можно масштабировать, расширяя возможности поиска и объем хранилища. Например, компании розничной торговли могут увеличивать емкость при повышении объема работы в праздничный сезон или на время проведения рекламных акций.

Поиск Azure — это служба на основе API, предназначенная для разработчиков и системных интеграторов, которые знают, как работать с веб-службам и HTTP. Служба поиска Azure берет на себя управление облачной службой поиска и упрощает создание веб- и мобильных приложений с функцией поиска.

##Принцип работы

Поиск Azure является [службой PaaS](https://wikipedia.org/wiki/Platform_as_a_service), делегирующей управление сервером и инфраструктурой корпорации Майкрософт и оставляющей вам готовое к работе решение, которое вы заполняете поисковыми данными и к которому обращаетесь из приложения. Вы можете выбрать либо бесплатную службу, которой будете пользоваться вместе с другими подписчиками службы поиска Azure, либо версию стандартной ценовой категории, предоставляющую выделенные ресурсы специально для вашей службы. Стандартный поиск можно масштабировать в соответствии с ростом потребностей в памяти или объемом запросов.

Служба поиска Azure хранит данные в индексе, поиск по которому осуществляется с помощью полнотекстовых запросов. Схему этих индексов можно создать на портале Azure или программным путем с помощью клиентской библиотеки или API REST. Определив схему, можно загрузить данные в службу поиска Azure, где они будут подвергнуты индексации.

Для добавления данных в индекс можно использовать модель проталкивания или модель вытягивания. Модель вытягивания реализуется через индексаторы, которые можно настроить на обновление по запросу или по расписанию (см. статью [Операции с индексаторами (API REST службы поиска Azure)](https://msdn.microsoft.com/library/azure/dn946891.aspx)), и позволяет легко принимать данные и их изменения из таких источников, как Azure DocumentDB, база данных SQL Azure или SQL Server на виртуальной машине Azure. Модель проталкивания реализуется через пакет SDK или API REST и используется для отправки в индекс обновленных документов. Данные можно проталкивать практически из любого набора данных в формате JSON. Инструкции по загрузке данных см. в статьях [Добавление, обновление или удаление документов](https://msdn.microsoft.com/library/azure/dn798930.aspx) и [Использование пакета SDK для .NET](search-howto-dotnet-sdk.md).

Одни разработчики выбирают удобство индексатора, другие считают, что модель проталкивания достойна дополнительных усилий. Модель проталкивания выбирают по двум причинам. Во-первых, она позволяет избежать дополнительной нагрузки, которую механизмы автоматического сбора данных накладывают на ваши серверы. Во-вторых, с ее помощью можно избежать задержки, неизбежной при индексировании по расписанию. В киберпонедельник или черную пятницу поиск должен точно отражать актуальные данные по доступности товаров. Модель проталкивания способна обеспечить необходимую степень точности.

##Что вы строите и храните

Как правило, разработчики создают схему и документы в локальной среде, а затем загружают, обрабатывают и запрашивают эти данные через пакет SDK для .NET или API REST. Все индексированные данные сохраняются в службе Azure, что дает повышение производительности и согласованность всех операций поиска.

Для создания схемы индекса и профилей оценки можно использовать встроенный редактор портала — идеальное решение для создания прототипов. Разработчики, которым нужен контролируемый, автоматизированный подход, предпочтут создать индекс в коде. Новые функции сначала добавляются в API, поэтому в зависимости от требований вашего приложения программный подход может стать для вас единственным решением.

Создавая схему, вы определяете поля и их атрибуты, поддерживаемые вашим приложением поиска. Поля содержат данные для поиска, такие как названия и описания продуктов, комментарии клиентов, торговые марки, цены, рекламные уведомления и т. д. Атрибуты сообщают, какие типы операций можно выполнять. В качестве примеров наиболее часто используемых атрибутов можно привести указание на поддержку полнотекстового поиска (если поиск поддерживается, значение true), фильтры (если фильтры поддерживаются, значение true) и аспекты (если аспекты поддерживаются, значение true).

Поля содержат также недоступные для поиска данные, которые относятся в вашему приложению поиска, такие как значения, предназначенные для внутреннего использования в фильтрах и профилях оценки, или URL-адреса содержимого, которое хранится на других платформах (например, видеофайлов или изображений, которые находятся в хранилище BLOB-объектов). Распространенный пример такого внутреннего поля — это норма прибыли или другое значение, которое указывает на потенциальный доход. Возможно, вашему приложению поиска нужно продвигать определенные позиции, более выгодные для компании с финансовой точки зрения. В этом случае схема может включать атрибуты полей, позволяющие задействовать соответствующие функции поиска.

Документы — подробные данные, которые выдаются поисковой системой в результатах поиска. Например, если приложение поиска представляет собой онлайн-каталог товаров, то для каждой позиции этого каталога создается отдельный документ, а страница с результатами поиска строится на основе значений, полученных из документов, которые соответствуют условиям поиска.

##Как это работает

Чтобы ознакомиться со сценариями и возможностями, посмотрите наши видеоролики. Ссылки на видеоматериалы см. на странице [Поиск Azure: учебники, видеодемонстрации и примеры](search-video-demo-tutorial-list.md).

##Подробное описание функций

Поиска Azure обладает широкими возможностями, включая подготовку и масштабирование, поддержку программирования, доступ и управление, а также функции, которые можно включать в приложения поиска.

Приведенный ниже перечень функций позволит оценить, соответствует ли служба поиска Azure потребностям вашего приложения поиска. Сообщения о новых функциях публикуются в разделе последних обновлений службы поиска Azure. Узнать о статусе еще не реализованных функций можно также на странице запроса функций службы поиска Azure.

Если у вас есть вопросы о какой-то функции, обратитесь к [форуму по службе поиска Azure на сайте MSDN](https://social.msdn.microsoft.com/forums/azure/home?forum=azuresearch). Узнать о статусе еще не реализованных функций можно также на [странице запроса функций службы поиска Azure](http://feedback.azure.com/forums/263029-azure-search).

###Возможности и ограничения емкости и масштабирования

Эта служба может работать как стандартная или как общая. Стандартный поиск поддерживает выделенный ресурс, который может масштабироваться в зависимости от рабочей нагрузки. Общая служба предоставляется бесплатно и предназначена только для тестирования функциональности служб, так как не дает никаких гарантий производительности.

Служба **масштабируется** за счет увеличения хранилища и количества документов (разделов) или объема запросов (реплик). Каждая реплика выполняет одну копию индекса. Высокий уровень доступности требует двух реплик для рабочей нагрузки запросов и трех реплик для чтения и записи данных (запросов и индексирования). Дополнительные сведения о планировании емкости см. в статье "Пределы и ограничения (поиск Azure)".

Служба поиска Azure автоматически распределяет индексы и документы между выделенными для нее разделами. Это значит, что привязывать индексы и документы к конкретному набору разделов нельзя.

Разделы и реплики используются всей службой, и все индексы работают во всех репликах. Если индекс необходимо изолировать или имеются требования к территориальному распределению служб и ресурсов в различных центрах обработки данных, можно создать вторую службу.

Существуют ограничения на объем хранилища и количество индексов и документов, загружаемых в службу. По факту действует ограничение, условия которого выполняются раньше: заполнение физического хранилища или достижение максимального количества индексов и документов. Дополнительные сведения см. в статье [Ограничения (служба поиска Azure)](search-limits-quotas-capacity.md).

###Поддержка программирования

API REST состоит из HTTP-запросов и ответов с содержимым в формате JSON. Существует API для доступа к службе и API для управления службой. Дополнительные сведения см. в статьях [API REST службы поиска Azure](https://msdn.microsoft.com/library/azure/dn798935.aspx) и [API REST управления службой поиска Azure](https://msdn.microsoft.com/library/azure/dn832684.aspx).

Пакет SDK для .NET включает классы, которые позволяют легко использовать службу поиска Azure без необходимости работы непосредственно с HTTP и JSON. Дополнительные сведения см. в статье [Использование SDK для .NET службы поиска Azure](search-howto-dotnet-sdk.md).

###Доступ и управление

Поиск доступен только по протоколу HTTPS.

Проверка подлинности в ведущем приложении службы поиска Azure выполняется по api-ключу администратора, указанному в заголовке HTTP. Проверка подлинности или авторизация отдельных пользователей не выполняются. Для ограничения доступа по удостоверению пользователя можно использовать $filter. Кроме того, различным клиентским приложениям можно назначить разные api-ключи запросов. Дополнительные сведения об управлении ключами см. в статье [Управление службой поиска в Microsoft Azure](search-manage.md). Дополнительные сведения о $filter см. в статье [Поиск документов (API REST службы поиска Azure)](https://msdn.microsoft.com/library/azure/dn798927.aspx).

###Индексы и документы

Индексов может быть несколько (ограничения для различных ценовых категорий см. в статье [Ограничения (служба поиска Azure)](search-limits-quotas-capacity.md)). Обратите внимание, что в настоящее время объединение индексов не поддерживается. В запросе поиска может указываться только один индекс.

**Документы** содержат поля и связанные с ними атрибуты. Поля включают доступный для поиска текст, значения, используемые преимущественно (или даже исключительно) в фильтрах и профилях оценки, и зачастую URL-адреса или указатели на такое содержимое, как изображения, размещенные в других хранилищах данных. Многие приложения поиска используют несколько видов хранения. Изображения или видеофайлы дешевле хранить на других платформах, таких как хранилище Azure для BLOB-объектов.

**Индексаторы** могут использоваться для планирования обновлений индекса с учетом измененных данных в базе данных SQL Azure, SQL Server на виртуальных машинах Azure и Azure DocumentDB. Дополнительные сведения см. в статье [Операции с индексаторами (API REST службы поиска Azure)]((https://msdn.microsoft.com/library/azure/dn946891.aspx).

**Запросы** можно формулировать с помощью синтаксиса OData для логических фильтров и синтаксиса простых запросов для полнотекстового поиска. Дополнительные сведения см. в статьях [Синтаксис выражений OData для службы поиска Azure](https://msdn.microsoft.com/library/azure/dn798921.aspx) и [Синтаксис простых запросов в службе поиска Azure](https://msdn.microsoft.com/library/azure/dn798920.aspx).

Документы можно искать по идентификаторам, что позволяет быстро находить искомые позиции. В этом случае пользователь сможет получить определенные сведения о документе, выбрав его в результатах поиска. Дополнительные сведения см. в статье [Поиск документов (API REST службы поиска Azure)](https://msdn.microsoft.com/library/azure/dn798929.aspx).

##Функции приложения поиска

**Полнотекстовый поиск** (включен по умолчанию для текстовых полей) включается для всех полей с атрибутом доступности для поиска. Полнотекстовый поиск выполняется путем сравнения префиксов, а значит, совпадения проверятся по первой части, а не по середине или концу искомого слова. Инструкции по определению индекса см. в статье [Создание индекса (API REST службы поиска Azure)](https://msdn.microsoft.com/library/azure/dn798941.aspx) или [Создание индекса на портале](search-create-index-portal.md).

**Профили оценки** используются для формирования моделей ранжирования, оптимизирующих поиск в соответствии с бизнес-целями. Например, можно на высокие позиции в результатах поиска вывести более новые товары или товары со скидкой. Профили оценки можно также формировать с помощью тегов, позволяющих персонализировать ранжирование в соответствии с предпочтениями клиентов, которые отслеживаются и хранятся отдельно. Дополнительную информацию см. в разделе [Добавление профилей оценки в индекс поиска (REST API службы поиска Azure)](https://msdn.microsoft.com/library/azure/dn798928.aspx).

**Поддержка языков** предусмотрена для 50 разных языков и использует различные параметры стеков обработки естественного языка, включая известные анализаторы Lucene и собственные анализаторы корпорации Майкрософт, которые используются в решениях Microsoft Office и Bing (только предварительный просмотр). Анализатор Lucene описывается в статье [Поддержка языков (API REST службы поиска Azure)](https://msdn.microsoft.com/library/azure/dn879793.aspx), а процессоры естественного языка — в статье [API REST службы поиска Azure, версия 2015-02-28-Preview](search-api-2015-02-28-Preview.md).

**Фасетная навигация** обращается к дереву классификации, которое используется для самоуправляемого поиска (обычно используется для поиска по торговым маркам, моделям, размеру и другим категориям данных). Фасетная навигация реализуется с помощью присутствующих в индексе атрибутов и поля аспекта, который указывается в запросе. Дополнительные сведения см. в разделе [Фасетная навигация](search-faceted-navigation.md).

**Предложения** для упреждающего ввода или автозаполнения запросов поддерживаются за счет присутствующих в индексе атрибутов. Поиск Azure поддерживает неполные и инфиксные соответствия (совпадение в любой части содержимого поля). Можно использовать оба варианта, они друг друга не исключают. Сведения о включении предложений см. в статье [Создание индекса (API REST службы поиска Azure)](https://msdn.microsoft.com/library/azure/dn798941.aspx), а сведения об их использовании — в статье [Предложения (API REST службы поиска Azure)](https://msdn.microsoft.com/library/azure/dn798936.aspx).

**Фильтры** можно использовать для выполнения фасетной навигации, используемый при создании запросов, или глобально для ограничения операций поиска в соответствии с установленными в коде условиями. Фильтры включаются для определенных полей через схему индекса, а также с помощью параметра поиска $filter. Дополнительные сведения см. в статьях [Создание индекса (API REST службы поиска Azure)](https://msdn.microsoft.com/library/azure/dn798941.aspx) и [Поиск документов (API REST службы поиска Azure)](https://msdn.microsoft.com/library/azure/dn798927.aspx).

**Сортировка** также включается для определенных полей через схему индекса, а затем реализуется как параметр поиска через параметр $orderBy. Дополнительные сведения также см. в статьях [Создание индекса (API REST службы поиска Azure)](https://msdn.microsoft.com/library/azure/dn798941.aspx) и [Поиск документов (API REST службы поиска Azure)](https://msdn.microsoft.com/library/azure/dn798927.aspx).

**Счетчик** показывает число результатов поиска по запросу, а также позволяет ограничить количество результатов, выдаваемых за один раз; реализуется с помощью параметров $top и $skip. Дополнительные сведения см. в статье [Поиск документов (API REST службы поиска Azure)](https://msdn.microsoft.com/library/azure/dn798927.aspx).

**Выделение совпадений** осуществляется путем выделения параметра запроса и позволяет показать пользователю фрагменты текста с выделенными цветом ключевыми словами, найденными по указанному условию поиска. Дополнительные сведения о параметрах запросов см. в статье [Поиск документов (API REST службы поиска Azure)](https://msdn.microsoft.com/library/azure/dn798927.aspx).

##Отчеты и анализ

Использование ресурсов отображается на панели мониторинга службы, что позволяет быстро получить представление об использовании хранилища.

Расход памяти, число документов и число индексов можно узнать в портале. Также для этой цели можно использовать API. Дополнительные сведения см. в статье [Получение статистики индексов (API REST службы поиска Azure)](https://msdn.microsoft.com/library/azure/dn798942.aspx).

Встроенного механизма для измерения общего количества выполненных запросов или других операций поиска нет. Кроме того, в настоящее время не поддерживается ведение журнала или анализ результатов поиска (например, получение списка условий поиска, которые не дали результатов, или отчетов по источникам запросов поиска).

##Попробуйте сейчас

Чтобы настроить службу, обратитесь к странице [Создание службы поиска Azure](search-create-service-portal.md) или воспользуйтесь сервисом [Попробуйте службы приложений Azure](http://go.microsoft.com/fwlink/p/?LinkId=618214) и получите бесплатный часовой сеанс, не требующий настройки или подписки.

Вам также могут пригодиться следующие учебники:

[Использование службы поиска Azure в .NET](search-howto-dotnet-sdk.md) [Начало работы со службой поиска Azure в .NET](search-get-started-dotnet.md) [Поиск Azure: учебники, видеодемонстрации и примеры](search-video-demo-tutorial-list.md)

<!---HONumber=Oct15_HO3-->