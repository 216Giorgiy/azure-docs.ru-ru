<properties
	pageTitle="Индексы в службе поиска Azure | Microsoft Azure | Размещенная облачная служба поиска"
	description="Что такое индекс в службе поиска Azure и как он используется?"
	services="search"
	documentationCenter=""
	authors="HeidiSteen"
	manager="mblythe"
	editor=""
    tags="azure-portal"/>

<tags
	ms.service="search"
	ms.devlang="na"
	ms.workload="search"
	ms.topic="get-started-article"
	ms.tgt_pltfrm="na"
	ms.date="11/09/2015"
	ms.author="heidist"/>

# Индексы в службе поиска Azure
> [AZURE.SELECTOR]
- [Overview](search-what-is-an-index.md)
- [Portal](search-create-index-portal.md)
- [.NET](search-create-index-dotnet.md)
- [REST](search-create-index-rest-api.md)

Поиск Azure — это размещенная облачная служба, состоящая из следующих компонентов: поисковая система; функции поиска, позволяющие выполнять поиск в пользовательском приложении так же, как в Bing или Google; программное обеспечение .NET и интерфейсы REST API для интеграции службы поиска Azure с веб-приложением или настольным приложением; хранилище данных для поиска, которые имеют формат *индексов*.

##Что такое индекс?

*Индекс* — это постоянное хранилище документов и других конструкций, используемое службой поиска Azure.

В частности, он содержит все данные для поиска, которые используются при обработке индекса, выполнении запроса или возвращении списка результатов поиска, структуры фасетной навигации или страницы сведений в ваше приложение. В службе поиска Azure индекс также содержит недоступные для поиска данные, которые используются в выражениях фильтра или профилях повышения (применяемых для уточнения запросов или повышения оценки поиска), а также структуры, относящиеся к пользовательскому приложению, которое интегрируется со службой поиска Azure.

Если вы знакомы с основными понятиями баз данных, индекс по существу напоминает таблицу, а документы можно приравнять к строкам в таблице.

Основные разделы индекса, описанные далее в этой статье: 1) поля, в которых определяется текст *документа*, закрепленные за определенными типами поведения; 2) профили повышения; 3) предложения; 4) параметры CORS; 5) анализатор по умолчанию.

При подготовке службы поиска для использования в приложении необходимо создать индекс. Создание индекса — это по сути определение его схемы. Для этого следует по меньшей мере определить поля и настроить атрибуты. Чтобы улучшить работу поисковой системы, можно определить профили повышения и предложения.

Для создания схемы можно использовать портал или написать код, который вызывает REST API или пакет SDK для .NET.

Определив схему и создав индекс, его следует заполнить. Это отдельная операция. Дополнительные сведения о передаче данных после создания индекса см. в статье [Импорт данных в службу поиска Azure](search-what-is-data-import.md).

##Использование индексов в службе поиска Azure

Все операции, связанные с данными, выполняемые в службе поиска Azure, используют или возвращают данные из индекса. Исключений нет: в качестве источника внешних данных в службе можно указать только индекс.

Для приложений, которые накапливают данные и оперируют ими (например, транзакции продаж в приложении интернет-магазина, данные которого хранятся в базе данных OLTP), индекс службы поиска Azure будет дополнительным источником данных в общем решении. Индекс — это выделенное хранилище данных, которое используется только службой поиска. Наличие выделенного источника данных, близкого к службе, гарантирует согласованность при поиске результатов, уменьшает изменчивость данных, уменьшает число круговых путей между вашим приложением и службой поиска Azure, а также повышает общую производительность операций поиска, поскольку конкуренция за ресурсы или данные отсутствует.

##Рекомендации по определению схемы

Схемы создаются в виде JSON-структур. Вам необходимо создать один индекс для каждого пользовательского решения, которое интегрируется со службой поиска Azure. Нельзя связывать или объединять несколько индексов, но можно создавать сложные индексы, которые могут использоваться в различных сценариях поиска, необходимых для вашего решения. Например, если ваши приложения поддерживают несколько языков, коллекция полей в индексе может содержать варианты на разных языках для каждого поля.

Проектируя индекс, тщательно продумайте каждое решение на этапе планирования. Изменение индекса после развертывания повлечет за собой перестройку и повторную загрузку данных. Создать индекс в коде гораздо проще, чем создать его вручную на портале.

Для создания эффективной схемы необходимо четкое понимание исходного источника данных. Необходимо сопоставить типы данных, знать, какие поля следует использовать в качестве *ключа*, который однозначно идентифицирует каждый документ в индексе, и какие поля должны быть представлены в списке результатов поиска или на странице сведений.

Изображения, аудио и видео должны храниться в других местах, URL-адреса которых представлены в соответствующем поле индекса. Любое (особенно двоичное) содержимое, недоступное для поиска, следует хранить в другом расположении. Ссылаться на такое содержимое можно с помощью URI в соответствующем поле индекса.

Как вы уже догадались, индекс должен регулярно синхронизироваться с другими источниками данных, которые используются в решении. В каталоге интернет-магазина база данных инвентаризации, в которой фиксируются транзакции продаж, должна содержать номера SKU, цены и данные о наличии, которые соответствуют данным, отображаемым в результатах поиска. В зависимости от времени задержки, приемлемого для вашего решения, можно настроить синхронизацию данных раз в неделю, раз в день или практически в реальном времени с помощью параллельных операций записи в базу данных инвентаризации и индекс службы поиска Azure. Подробные сведения приведены в статье [Импорт данных в службу поиска Azure](search-what-is-data-import.md).

##Элементы схемы

Индексы состоят из полей атрибутов, значений данных и других конструкций, которые определяют структуру запросов и результатов поиска.

- Поля определяют текст документа. Интернет-магазину нужны документы по каждому номеру SKU, агентству новостей — по каждой статье, а информационному порталу — по каждому поставщику или онлайн-магазину.
- Атрибуты (или свойства) — это аннотации к полю, указывающие тип данных, длину, значение и типы поведения, разрешенные для этого поля. Вы можете указать, доступно ли каждое из полей для поиска, извлечения или сортировки данных. Можно также указать, какой анализатор языка следует использовать на уровне полей. *Ключ* — это зарезервированное поле в схеме, содержащее уникальный идентификатор для каждого документа в коллекции полей.
- Профили повышения — это критерии, используемые для повышения оценки найденного совпадения, которое соответствует большему количеству характеристик, заданных в профиле. Например, в условии поиска задано имя продукта и описание продукта, а вы хотите, чтобы совпадения с названием продукта оценивались выше, чем совпадения с описанием.
- Предложения (также называемые автозавершением или упреждающим вводом запросов) определяются как раздел в индексе.
- Стандартные анализаторы языка можно задавать на уровне индекса и применять ко всем полям.
- Параметры CORS, позволяющие создавать междоменные сценарии, также являются частью определения индекса.

## Атрибуты индекса

|**Свойство**|Описание|
|------------|-----------|
|**Доступный для получения**|Указывает, может ли поле возвращаться в результатах поиска.|
|**Фильтруемый**|Позволяет использовать поле в запросах **$filter**.|
|**Сортируемый**|Позволяет использовать поле в качестве параметра сортировки.|
|**Аспектируемый**|Позволяет использовать поле в структуре фасетной навигации для автоматической фильтрации. Обычно для фасетной навигации подходят поля, содержащие повторяющиеся значения, которые можно использовать для объединения в группы различных документов (например, если несколько документов относятся к одной и той же категории продуктов или услуг).|
|**Ключ**|Уникальный идентификатор (ключ) каждого документа, используемый для поиска документов. У каждого индекса должен быть один ключ. Ключом может быть только одно поле, и это поле должно иметь значение Edm.String.|
|**Доступный для поиска**|Помечает поле как доступное для полнотекстового поиска.|

## Облачное хранилище

Поскольку служба поиска Azure является полностью управляемой, хранение данных обрабатывается как внутренняя операция. Программисты должны понимать, что нельзя обойти API-интерфейсы службы поиска Azure для прямого подключения к индексу. Кроме того, отслеживать размер или работоспособность индекса можно только с помощью уведомлений на портале или вызовов API. Нельзя создать резервную копию индекса, восстановить его, оптимизировать индекс или настроить его производительность на уровне хранилища. По сути данные хранятся в хранилище больших двоичных объектов, но лучше всего представить себе физическое хранение индекса и управление им в виде способа реализации, который в будущем может измениться. Одним из основных преимуществ службы является автоматическое администрирование данных.

Если объем запросов или требования к хранилищу данных изменятся со временем, можно увеличить или уменьшить емкость посредством добавления или перемещения реплик и разделов. Дополнительные сведения см. в статье [Управление службой поиска в Microsoft Azure](search-manage.md) или [Ограничения поиска Azure](search-limits-quotas-capacity.md).

<!---HONumber=Nov15_HO3-->