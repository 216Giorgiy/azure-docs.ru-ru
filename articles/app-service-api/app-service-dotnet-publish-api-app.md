<properties 
	pageTitle="Развертывание приложения API службы приложений Azure" 
	description="Развертывание проекта приложения API в подписке Azure." 
	services="app-service\api" 
	documentationCenter=".net" 
	authors="bradygaster" 
	manager="wpickett" 
	editor="jimbe"/>

<tags 
	ms.service="app-service-api" 
	ms.workload="web" 
	ms.tgt_pltfrm="dotnet" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="05/19/2015" 
	ms.author="bradyg;tarcher"/>

# Развертывание приложения API службы приложений Azure

## Обзор

Если вы разрабатываете собственное приложение API, используя Visual Studio, и вам нужно протестировать API в облаке, можно создать новое приложение API в подписке Azure и развернуть код с помощью удобных функций развертывания службы приложений Visual Studio.

Это второй из трех учебников серии:

1. В учебнике [Создание приложения API](app-service-dotnet-create-api-app.md) вы создали проект приложения API. 
* В этом учебнике вы развернете приложение API в подписке Azure.
* В учебнике [Отладка приложения API](../app-service-dotnet-remotely-debug-api-app.md) вы будете использовать Visual Studio для удаленной отладки кода во время его выполнения в Azure.

## Развертывание приложения API 

В **обозревателе решений** щелкните правой кнопкой мыши проект (не решение) и выберите пункт **Опубликовать...**.

![Пункт меню «Опубликовать проект»](./media/app-service-dotnet-publish-api-app/20-publish-gesture-v3.png)

Откройте вкладку **Профиль** и щелкните элемент **Приложения API Microsoft Azure (предварительная версия)**.

![Диалоговое окно «Публикация веб-проекта»](./media/app-service-dotnet-publish-api-app/21-select-api-apps-for-deployment-v2.png)

Нажмите кнопку **Создать**, чтобы подготовить новое приложение API в подписке Azure.

![Диалоговое окно «Выбор существующих служб API»](./media/app-service-dotnet-publish-api-app/23-publish-to-apiapps-v3.png)

В диалоговом окне **Создание приложения API** введите следующее.

- В поле **Имя приложения API** введите имя приложения. 
- Если у вас имеется несколько подписок Azure, выберите ту, которую хотите использовать. В меню «План службы приложений» выберите один из существующих планов службы приложений или щелкните **Создать план службы приложений** и введите имя нового плана. 
- В разделе **Группа ресурсов** выберите одну из существующих групп ресурсов или щелкните **Создать новую группу ресурсов** и введите имя. Имя должно быть уникальным; рассмотрите возможность использования имени приложения в качестве префикса и добавления персональных данных, например учетной записи Майкрософт (без символа «@»).  
- В разделе **Уровень доступа** выберите **Доступно всем пользователям**. Этот параметр сделает API общедоступным, что подходит для этого учебника. Вы можете ограничить доступ позже, на портале Azure.
- Выберите регион.  

![Диалоговое окно «Настройка веб-приложения Microsoft Azure»](./media/app-service-dotnet-publish-api-app/24-new-api-app-dialog-v3.png)

Нажмите кнопку **ОК**, чтобы создать приложение API в выбранной подписке. Процесс может занять несколько минут, поэтому в Visual Studio отобразится окно с уведомлением об инициации процесса.

![Подтверждающее сообщение запуска создания службы API](./media/app-service-dotnet-publish-api-app/25-api-provisioning-started-v3.png)

Процесс подготовки создаст группу ресурсов и приложение API в подписке Azure. Visual Studio отображает ход выполнения в окне **Действия службы приложений Azure **.

![Уведомление о состоянии через окно действий службы приложений Azure](./media/app-service-dotnet-publish-api-app/26-provisioning-success-v3.png)

После подготовки приложения API щелкните правой кнопкой мыши проект в обозревателе решений и выберите пункт **Опубликовать**, чтобы повторно открыть диалоговое окно публикации. Профиль публикации, созданный на предыдущем шаге, должен быть уже выбран. Нажмите кнопку **Опубликовать**, чтобы начать процесс развертывания.

![Развертывание приложения API](./media/app-service-dotnet-publish-api-app/26-5-deployment-success-v3.png)

В окне **Действия службы приложений Azure** отображается ход развертывания.

![Уведомление о состоянии окна действий службы приложений Azure](./media/app-service-dotnet-publish-api-app/26-5-deployment-success-v4.png)

## Просмотр приложения на портале Azure

В этом разделе вы перейдете на портал для просмотра основных параметров, доступных для приложений API, и внесете изменения в итерацию приложения API. После каждого развертывания на портале будут отображаться изменения, внесенные в приложение API.

В браузере перейдите на [портал Azure](https://portal.azure.com).

Нажмите кнопку **Обзор** на боковой панели и выберите **Приложения API**.

![Просмотр параметров на портале Azure](./media/app-service-dotnet-publish-api-app/27-browse-in-portal-v3.png)

Выберите созданный API из списка приложений API в подписке.

![Список приложений API](./media/app-service-dotnet-publish-api-app/28-view-api-list-v3.png)

Щелкните **Определение API**. В колонке **Определение API** приложения отобразится список операций API, определенных при создании приложения.

![Определение интерфейса API](./media/app-service-dotnet-publish-api-app/29-api-definition-v3.png)

Теперь вернитесь к проекту в Visual Studio. Добавьте следующий код в файл **ContactsController.cs**.

	[HttpPost]
	public HttpResponseMessage Post([FromBody] Contact contact)
	{
		// todo: save the contact somewhere
		return Request.CreateResponse(HttpStatusCode.Created);
	}

Этот код добавляет метод **Post**, который можно использовать для отправки новых экземпляров `Contact` в API.

![Добавление метода Post в контроллер](./media/app-service-dotnet-publish-api-app/30-post-method-added-v3.png)

В **обозревателе решений** щелкните правой кнопкой мыши проект и выберите команду **Опубликовать**.

![Контекстное меню публикации проекта](./media/app-service-dotnet-publish-api-app/31-publish-gesture-v3.png)

Выберите конфигурацию **Отладка** в раскрывающемся списке **Конфигурация** и щелкните **Опубликовать**, чтобы повторно развернуть приложение API.

![Параметры публикации веб-проекта](./media/app-service-dotnet-publish-api-app/36.5-select-debug-option-v3.png)

На вкладке **Предварительный просмотр** мастера **публикации в Интернете** щелкните **Опубликовать**.

![Диалоговое окно «Публикация веб-проекта»](./media/app-service-dotnet-publish-api-app/39-re-publish-preview-step-v2.png)

После завершения процесса публикации вернитесь на портал, закройте и снова откройте колонку **Определение API**. Вы увидите новую конечную точку API, которую только что создали и развернули напрямую в подписке Azure.

![Определение интерфейса API](./media/app-service-dotnet-publish-api-app/38-portal-with-post-method-v4.png)

## Дальнейшие действия

Вы увидели, как возможности прямого развертывания в Visual Studio упрощают итерацию и ускоряют развертывание и проверку правильности работы API. В [следующем учебнике](../app-service-dotnet-remotely-debug-api-app.md) будет показано, как отлаживать приложение API во время его выполнения в Azure.


 

<!---HONumber=62-->