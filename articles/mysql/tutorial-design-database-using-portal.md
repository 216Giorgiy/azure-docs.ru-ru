---
title: "Проектирование первой базы данных Azure для MySQL с помощью портала Azure | Документация Майкрософт"
description: "Это руководство содержит сведения о создании базы данных и сервера базы данных Azure для MySQL и управлении ими с помощью портала Azure."
services: mysql
author: v-chenyh
ms.author: v-chenyh
manager: jhubbard
editor: jasonh
ms.assetid: 
ms.service: mysql-database
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: portal
ms.date: 05/10/2017
ms.custom: mvc
ms.translationtype: Human Translation
ms.sourcegitcommit: 71fea4a41b2e3a60f2f610609a14372e678b7ec4
ms.openlocfilehash: 2958486a0ec055cf1fe334e97389536b2c2bb01f
ms.contentlocale: ru-ru
ms.lasthandoff: 05/10/2017

---

# <a name="design-your-first-azure-database-for-mysql-database"></a>Проектирование первой базы данных Azure для MySQL

База данных Azure для MySQL — это управляемая служба, которая позволяет вам запускать, администрировать и масштабировать высокодоступные базы данных MySQL в облаке. С помощью портала Azure можно легко управлять сервером и проектировать базы данных.

Из этого руководства вы узнаете, как с помощью портала Azure выполнять следующие операции:

> [!div class="checklist"]
> * создание базы данных Azure для MySQL;
> * настройка брандмауэра сервера;
> * использование [средства командной строки MySQL](https://dev.mysql.com/doc/refman/5.6/en/mysql.html) для создания базы данных;
> * Загрузка примера данных
> * Запрос данных
> * Обновление данных
> * восстановление данных.

## <a name="log-in-to-the-azure-portal"></a>Войдите на портал Azure.
Откройте предпочитаемый веб-браузер и перейдите на [портал Microsoft Azure](https://portal.azure.com/). Введите учетные данные, чтобы войти на портал. Панель мониторинга службы является представлением по умолчанию.

## <a name="create-an-azure-database-for-mysql-server"></a>Создание сервера базы данных Azure для MySQL
Сервер базы данных Azure для MySQL создается с определенным набором [вычислительных ресурсов и ресурсов хранения](./concepts-compute-unit-and-storage.md). Он создается в [группе ресурсов Azure](https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-overview).

1.    Перейдите к разделу **Базы данных** -> **MySQL**. Если сервер MySQL не отображается в категории **Базы данных**, щелкните **Показать все**, чтобы просмотреть все доступные службы баз данных. Кроме того, можно ввести **MySQL** в поле поиска, чтобы быстро найти службу.
![2.1. Переход к службе MySQL](./media/tutorial-design-database-using-portal/2_1-Navigate-to-MySQL.png)

2.    Щелкните значок **MySQL** и выберите команду **Создать**.

В нашем примере мы заполним форму базы данных Azure для MySQL, указав следующую информацию:

| **Поле формы** | **Описание поля** |
|----------------|-----------------------|
| *Server name* (Имя сервера) | mysqlserver4demo (глобально уникальное имя сервера) |
| *Подписка* | MySQLaaS (выберите из раскрывающегося списка) |
| *Группа ресурсов* | myresource (создайте группу ресурсов или используйте существующую) |
| *Имя для входа администратора сервера* | myadmin (укажите имя учетной записи администратора) |
| *Пароль* | Задайте пароль учетной записи администратора |
| *Подтверждение пароля.* | Подтвердите пароль учетной записи администратора |
| *Расположение* | Северная Европа (выберите **Северная Европа** или **западная часть США**) |
| *Версия* | 5.6 (выберите версию сервера MySQL) |
| *Настройка производительности* | Уровень "Базовый" (укажите **уровень производительности**, **единицы вычислений**, **объем хранилища** и нажмите кнопку **ОК**) |

Затем щелкните **Создать**. Через несколько минут в облаке будет сервер базы данных Azure для MySQL. На панели инструментов выберите **Уведомления**, чтобы отслеживать процесс развертывания.

> [!TIP]
> Мы советуем разместить службы Azure в одном регионе и выбрать ближайшее к вам расположение. Кроме того, можно установить флажок **Закрепить на панели мониторинга**, чтобы с легкостью отслеживать процесс развертывания.

![2.2. Создание сервера](./media/tutorial-design-database-using-portal/2_2-Create-server.png)

## <a name="configure-firewall"></a>Настройка брандмауэра
Базы данных Azure для MySQL защищены брандмауэром. По умолчанию все подключения к серверу и базам данных на сервере отклоняются. Перед первым подключением к базе данных Azure для MySQL из клиента необходимо настроить брандмауэр и добавить IP-адреса общедоступной сети клиента (или диапазон IP-адресов) в список разрешений.

1.    Щелкните созданный сервер и выберите **Безопасность подключения**.

![3.1. Безопасность подключения](./media/tutorial-design-database-using-portal/3_1-Connection-security.png)

2.    Здесь вы можете **добавить свой IP-адрес** или настроить правила брандмауэра. Не забудьте щелкнуть **Сохранить** после создания правил.

Теперь вы можете подключиться к серверу с помощью средства командной строки MySQL или с помощью средства графического пользовательского интерфейса MySQL Workbench.

> Сервер базы данных Azure для MySQL обменивается данными через порт 3306. Если вы пытаетесь подключиться из корпоративной сети, исходящий трафик через порт 3306 может быть запрещен сетевым брандмауэром. В таком случае вы не сможете подключиться к серверу Azure MySQL. Для этого ваш ИТ-отдел должен открыть порт 3306.

## <a name="get-connection-information"></a>Получение сведений о подключении
Получите полное имя сервера Azure MySQL на портале Azure. Оно используется для подключения к серверу с помощью средства командной строки MySQL.

1.    На [портале Azure](https://portal.azure.com/) в меню слева щелкните **Все ресурсы** и выберите свой сервер базы данных Azure для MySQL.

2.    Щелкните **Свойства**. Запишите значения параметров **Имя сервера** и **Имя для входа администратора сервера**.
![4.2. Свойства сервера](./media/tutorial-design-database-using-portal/4_2-server-properties.png)

В этом примере серверу присвоено имя *mysql4doc.database.windows.net*, а имя для входа администратора сервера имеет значение *mysqladmin@mysql4doc*.

## <a name="connect-to-the-server-using-mysql"></a>Подключение к серверу с помощью MySQL
Используйте [средство командной строки MySQL](https://dev.mysql.com/doc/refman/5.6/en/mysql.html), чтобы установить соединение с сервером базы данных Azure для MySQL. В этом примере используется следующая команда:
```cmd
mysql -h mysqlserver4demo.database.windows.net -u myadmin@mysqlserver4demo -p
```

## <a name="create-a-blank-database"></a>Создание пустой базы данных
Подключившись к серверу, создайте пустую базу данных для работы.
```sql
CREATE DATABASE mysampledb;
```

Выполните следующую команду в командной строке, чтобы подключиться к созданной базе данных:
```sql
USE mysampledb;
```

## <a name="create-tables-in-the-database"></a>Создание таблиц в базе данных
Теперь, когда вы знаете, как подключиться к базе данных Azure для MySQL, рассмотрим, как выполнить некоторые основные задачи.

Сначала можно создать таблицу и заполнить ее некоторыми данными. Давайте создадим таблицу, в которой хранятся данные инвентаризации.
```sql
CREATE TABLE inventory (
    id serial PRIMARY KEY, 
    name VARCHAR(50), 
    quantity INTEGER
);
```

## <a name="load-data-into-the-tables"></a>Загрузка данных в таблицу
Теперь, когда таблица создана, мы можем вставить в нее данные. Чтобы вставить некоторые строки данных, в открытом окне командной строки выполните следующий запрос:
```sql
INSERT INTO inventory (id, name, quantity) VALUES (1, 'banana', 150); 
INSERT INTO inventory (id, name, quantity) VALUES (2, 'orange', 154);
```

Итак, в созданной ранее таблице содержится две строки данных.

## <a name="query-and-update-the-data-in-the-tables"></a>Запрос и обновление данных в таблицах
Чтобы извлечь сведения из таблицы базы данных, выполните приведенный ниже запрос.
```sql
SELECT * FROM inventory;
```

Вы можете также обновить данные в таблицах, выполнив следующую команду:
```sql
UPDATE inventory SET quantity = 200 WHERE name = 'banana';
```

При извлечении данных строка будет обновляться соответствующим образом.
```sql
SELECT * FROM inventory;
```

## <a name="restore-a-database-to-a-previous-point-in-time"></a>Восстановление базы данных до предыдущей точки во времени
Представьте, что вы случайно удалили таблицу. Восстановить ее будет не просто. База данных Azure для MySQL позволяет вернуться в любой момент времени в течение последних 35 дней и восстановить данные на определенный момент времени на новом сервере. Вы можете восстановить удаленные данные с помощью нового сервера. Указанные ниже шаги позволяют восстановить сервер до точки во времени, когда была создана таблица.

Шаг 1. На странице базы данных Azure для сервера MySQL на панели инструментов щелкните **Восстановить**. Откроется страница **Восстановление**.
![10.1. Восстановление базы данных](./media/tutorial-design-database-using-portal/10_1-restore-a-db.png)

Шаг 2. Заполните форму **Восстановление**, указав следующие сведения.

-    Точка восстановления. Выберите время до того момента, когда был изменен сервер.
-    Целевой сервер. Укажите новое имя сервера, который нужно восстановить.
-    Расположение. Вы не сможете выбрать регион, по умолчанию он совпадает с исходным сервером.
-    Ценовая категория. Это значение нельзя изменить при восстановлении сервера. Она совпадает с ценовой категорией исходного сервера.
![10.2. Форма восстановления](./media/tutorial-design-database-using-portal/10_2-restore-form.png)

Шаг 3. Чтобы [восстановить сервер до точки во времени](./howto-restore-server-portal.md) перед удалением таблиц, нажмите кнопку **OК**. Восстановление сервера до точки во времени создает копию сервера, где расположен исходный сервер, с состоянием на момент указанной точки во времени (в пределах срока хранения, установленного для вашего уровня служб).

## <a name="next-steps"></a>Дальнейшие действия

Из этого руководства вы узнали, как с помощью портала Azure выполнять следующие операции:

> [!div class="checklist"]
> * создание базы данных Azure для MySQL;
> * настройка брандмауэра сервера;
> * использование [средства командной строки MySQL](https://dev.mysql.com/doc/refman/5.6/en/mysql.html) для создания базы данных;
> * Загрузка примера данных
> * Запрос данных
> * Обновление данных
> * восстановление данных.

[Создание правил брандмауэра базы данных Azure для MySQL и управление ими с помощью портала Azure](./howto-manage-firewall-using-portal.md)

