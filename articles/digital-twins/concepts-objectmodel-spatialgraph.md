---
title: Основные сведения об объектных моделях и пространственном интеллектуальном графе в Digital Twins | Документация Майкрософт
description: Моделирование связей между пользователями, расположениями и устройствами с помощью Azure Digital Twins
author: alinamstanciu
manager: bertvanhoof
ms.service: digital-twins
services: digital-twins
ms.topic: conceptual
ms.date: 10/26/2018
ms.author: alinast
ms.openlocfilehash: c1d66e0b58567244f8c1406ee258c9311994ff20
ms.sourcegitcommit: 6e09760197a91be564ad60ffd3d6f48a241e083b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/29/2018
ms.locfileid: "50215112"
---
# <a name="understanding-digital-twins-object-models-and-spatial-intelligence-graph"></a>Основные сведения об объектных моделях и пространственном интеллектуальном графе в Digital Twins

Azure Digital Twins — это служба Интернета вещей Azure, которая обладает полными виртуальными представлениями физических сред и связанных устройств, датчиков и пользователей. Это улучшает разработку путем организации специфичных для домена понятий в полезных моделях, которые расположены в пространственном интеллектуальном графе. Такие понятия эффективно моделируют взаимосвязи и взаимодействия между людьми, пространствами и устройствами.

_Объектные модели Digital Twins_ описывают понятия, категории и свойства, относящиеся к домену. Модели предопределены пользователями, которые хотят адаптировать решение к своим конкретным потребностям. Вместе эти предварительно определенные объектные модели Digital Twins составляют _онтологию_. Онтология умного здания будет описывать регионы, площадки, этажи, офисы, зоны, конференц-залы и фокус-комнаты. Онтология энергетической сети будет описывать различные электростанции, подстанции, энергетические ресурсы и потребителей. Эти объектные модели Digital Twins и онтологии позволяют подстраивать Azure Digital Twins под различные сценарии и потребности.

С помощью _объектных моделей Digital Twins_ и _онтологии_ можно заполнить _пространственный граф_. Пространственные графы — это виртуальные представления множества взаимосвязей между пространствами, устройствами и людьми, имеющими отношение к решению Интернета вещей. На приведенной ниже схеме показан пример пространственного графа с использованием умного здания.

![Создание пространственного графа Digital Twins][1]

<a id="model"></a>

Пространственный граф объединяет пространства, устройства, датчики и пользователей. Каждый из них связан между собой так, что это моделирует реальный мир: площадка 43 имеет четыре этажа с несколькими различными областями. Пользователи связаны со своими рабочими станциями и имеют доступ к частям графа.  Например, администратор имеет право вносить изменения в пространственный граф, а посетитель может иметь только права на просмотр определенных данных здания.

## <a name="digital-twins-object-models"></a>Объектные модели Digital Twins

Объектные модели Digital Twins поддерживают следующие основные категории объектов:

- **Пространства** являются виртуальными или физическими местоположениями, например `Tenant`, `Customer`, `Region` или `Venue`.
- **Устройства** являются виртуальными или физическими единицами оборудования, например `AwesomeCompany Device` или `Raspberry Pi 3`.
- **Датчики** являются объектами, которые позволяют обнаруживать события, например `AwesomeCompany Temperature Sensor` или `AwesomeCompany Presence Sensor`.
- **Пользователи** представляют собой жильцов и их характеристики.

Другие категории объектов:

- **Ресурсы** присоединены к пространству и обычно представляют ресурсы Azure для использования объектами в пространственном графе, например `IoTHub`.
- **Большие двоичные объекты** присоединяются к объектам (таким как пространства, устройства, датчики и пользователи) и используются в качестве файлов с типом MIME и метаданных, например `maps`, `pictures` или `manuals`.
- **Расширенные типы** являются расширяемыми перечислениями, которые дополняют сущности определенными характеристиками, например `SpaceType` или `SpaceSubtype`.
- **Онтологии** представляют набор расширенных типов, например `Default`, `Building`, `BACnet` или `EnergyGrid`.
- **Ключи свойств и значения** являются пользовательскими характеристиками пространств, устройств, датчиков и пользователей. Они могут использоваться в дополнение к встроенным характеристикам, например `DeltaProcessingRefreshTime` как ключ и `10` как значение.
- **Роли** — это набор разрешений, назначенных пользователям и устройствам в пространственном графе, например `Space Administrator`, `User Administrator` или `Device Administrator`.
- **Назначения ролей** — это связь между ролью и объектом в пространственном графе, например предоставление пользователю или субъекту-службе разрешения на управление пространством в пространственном графе.
- **Хранилища ключей безопасности** предоставляют ключи безопасности для всех устройств в иерархии в рамках заданного объекта пространства, чтобы обеспечить безопасное взаимодействие устройства со службой Digital Twins.
- **Определяемые пользователем функции** или **UDF** позволяют настраивать обработку телеметрии датчика в пространственном графе. Например, определяемая пользователем функция может задавать значение датчика, выполнять пользовательскую логику на основе показаний датчика и устанавливать выходные данные в пространстве, прикреплять метаданные к пространству и отправлять уведомления при соблюдении предопределенных условий. В настоящее время UDF можно написать на языке JavaScript.
- **Сопоставители** являются объектами, которые определяют, какие определяемые пользователем функции выполняются для заданного сообщения телеметрии.
- **Конечные точки** — это расположения, в которые направляются сообщения телеметрии и события Digital Twins, например `Event Hub`, `Service Bus` или `Event Grid`.

<a id="graph"></a>

## <a name="spatial-intelligence-graph"></a>Пространственный интеллектуальный граф

**Пространственный граф** — это иерархический граф пространств, устройств и людей, определенных в объектной модели **Digital Twins**. Пространственный граф поддерживает _наследование_, _фильтрацию_, _проход_, _масштабируемость_ и _расширяемость_. Пользователи могут взаимодействовать с пространственным графом и управлять им с помощью коллекции REST API (см. ниже).

Пользователь, который развертывает службу Digital Twins в своей подписке, становится глобальным администратором корневого узла, автоматически предоставляя полный доступ ко всей структуре. Затем этот пользователь может подготовить пространства в графе с помощью API Space. Устройства можно подготовить с помощью API Device, датчики — с помощью API Sensor и т. д. Мы также предлагаем [инструменты с открытым кодом](https://github.com/Azure-Samples/digital-twins-samples-csharp) для подготовки графа в пакетном режиме.

_Наследование_ графа применяется к разрешениям и свойствам, которые распространяются с родительского узла на все дочерние. Например, когда роль назначается пользователю на данном узле, пользователь будет иметь разрешения этой роли для данного узла и каждого дочернего узла. Кроме того, дочерние узлы заданного узла унаследуют все ключи свойств и расширенные типы, определенные для него.

_Фильтрация_ графа позволяет пользователям сузить результаты запроса по идентификаторам, именам, типам, подтипам, родительскому пространству, связанным пространствам, типам данных датчика, ключам свойств и значениям, *проходам*, *minLevel*, *maxLevel* и другим параметрам фильтра OData.

_Проход_ графа позволяет пользователям перемещаться по пространственному графу вертикально и горизонтально. Вертикально граф можно пройти сверху вниз или снизу вверх с помощью навигационных параметров *traverse*, *minLevel* и *maxLevel*. Горизонтально можно перемещаться по графу, чтобы получить одноуровневые узлы, непосредственно прикрепленные к родительскому пространству или к одному из его потомков. При запросе объекта можно получить все связанные с ним объекты с помощью параметра *includes* API-интерфейсов GET.

Служба Azure Digital Twins гарантирует возможность _масштабируемости_ графа для обработки реальных рабочих нагрузок. Azure Digital Twins можно использовать для представления больших портфелей недвижимости, инфраструктуры, устройств, датчиков, телеметрии и многого другого.

Благодаря _расширяемости_ графа пользователи могут настраивать базовые объектные модели Digital Twins, используя новые типы и онтологии. Данные Digital Twins также можно обновить за счет расширяемых свойств и значений.

### <a name="spatial-intelligence-graph-management-apis"></a>API управления пространственного интеллектуального графа

После развертывания Azure Digital Twins на портале [Azure](https://portal.azure.com) URL-адрес [Swagger](https://swagger.io/tools/swagger-ui/) для API управления автоматически создается и отображается в разделе **Обзор** портала Azure в следующем формате:

```plaintext
https://yourInstanceName.yourLocation.azuresmartspaces.net/management/swagger
```

| Имя настраиваемого атрибута | Заменить на |
| --- | --- |
| *yourInstanceName* | Имя вашего экземпляра Azure Digital Twins |
| *yourLocation* | Регион сервера, в котором размещен ваш экземпляр |

 Полный формат URL-адреса можно увидеть на изображении ниже:

![API управления Digital Twins на портале][2]

Дополнительные сведения об использовании пространственных интеллектуальных графов см. в кратком обзоре интерфейсов API управления Azure Digital Twins.

> [!TIP]
> Для демонстрации набора функций API предоставляется краткий обзор предварительной версии Swagger.
> Он размещен по адресу [docs.westcentralus.azuresmartspaces.net/management/swagger](https://docs.westcentralus.azuresmartspaces.net/management/swagger).

Дополнительные сведения об использовании [Swagger](how-to-use-swagger.md).

Все вызовы API должны пройти аутентификацию с помощью [OAuth](https://docs.microsoft.com/azure/active-directory/develop/v1-protocols-oauth-code). В API-интерфейсах выполняются [рекомендации по REST API от корпорации Майкрософт](https://github.com/Microsoft/api-guidelines/blob/master/Guidelines.md). Большинство API-интерфейсов, возвращающих коллекции, поддерживают параметры системного запроса [OData](http://www.odata.org/getting-started/basic-tutorial/#queryData).

## <a name="next-steps"></a>Дополнительная информация

Дополнительные сведения о подключении к устройству и отправке сообщений телеметрии в службу Azure Digital Twins см. в статье [Возможность подключения устройств и входящие данные телеметрии](concepts-device-ingress.md).

Дополнительные сведения об ограничениях и регулировании API управления см. в статье [Ограничения в общедоступной предварительной версии службы](concepts-service-limits.md).

<!-- Images -->
[1]: media/concepts/digital-twins-spatial-graph-building.png
[2]: media/concepts/digital-twins-spatial-graph-management-api-url.png
