---
title: Сведения об управлении доступом к Azure Digital Twins на основе ролей | Документация Майкрософт
description: Сведения об аутентификации в службе Digital Twins с управлением доступом на основе ролей.
author: lyrana
manager: alinast
ms.service: digital-twins
services: digital-twins
ms.topic: conceptual
ms.date: 10/10/2018
ms.author: lyrana
ms.openlocfilehash: 7a6d8565a0f85b4cb81d9f5f23b04fe6b2edc53e
ms.sourcegitcommit: 74941e0d60dbfd5ab44395e1867b2171c4944dbe
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/15/2018
ms.locfileid: "49323957"
---
# <a name="role-based-access-control"></a>Контроль доступа на основе ролей

Служба Azure Digital Twins предоставляет детализированное управление доступом для определенных данных, ресурсов и действий в пространственном графе. Эти функции предоставляются с помощью детализированных возможностей управления ролями и доступом (_управление доступом на основе ролей_). Управление доступом на основе ролей состоит из _ролей_ (уровень разрешений) и _назначения ролей_ (связь роли с пользователем или устройством).

С помощью управления доступом на основе ролей разрешение можно предоставлять пользователю, устройству, субъекту-службе, определяемой пользователем функции, всем пользователям, принадлежащим к домену, или клиенту. Кроме того, можно также настроить уровень доступа.

Управление доступом на основе ролей является уникальным, так как позволяет наследовать разрешения по пространственному графу.

## <a name="what-can-i-do-with-role-based-access-control"></a>Какие возможности предоставляет управление доступом на основе ролей?

Разработчик может использовать управление доступом на основе ролей для следующих целей:

* Предоставление пользователю возможности управления устройствами во всем здании или только в определенной комнате или на указанном этаже.
* Предоставление администратору глобального доступа ко всем узлам пространственного графа (всего графа или только определенного его раздела).
* Предоставление специалисту службы поддержки доступа на чтение к графу, за исключением ключей доступа.
* Предоставление всем участникам домена доступа на чтение для всех объектов графа.

## <a name="role-based-access-control-best-practices"></a>Рекомендации по управлению доступом на основе ролей

[!INCLUDE [digital-twins-permissions](../../includes/digital-twins-rbac-best-practices.md)]

## <a name="roles"></a>Роли

### <a name="role-definitions"></a>Определения ролей

**Определение роли** представляет собой коллекцию разрешений (это иногда называется **ролью**). Определение роли содержит список разрешенных операций, включая *создание*, *чтение*, *обновление* и *удаление*. Это определение также указывает, к каким типам объектов применяются данные разрешения.

В службе Azure Digital Twins доступны следующие роли:

* **Администратор пространства.** Разрешение на создание, чтение, обновление и удаление для указанного пространства и всех его узлов. Глобальное разрешение.
* **Администратор пользователей.** Разрешение на создание, чтение, обновление и удаление для пользователей и связанных с ними объектов. Разрешение на чтение для пространств.
* **Администратор устройств.** Разрешение на создание, чтение, обновление и удаление для устройств и связанных с ними объектов. Разрешение на чтение для пространств.
* **Администратор ключей.** Разрешение на создание, чтение, обновление и удаление для ключей доступа. Разрешение на чтение для пространств.
* **Администратор маркеров.** Разрешение на чтение и обновление для ключей доступа. Разрешение на чтение для пространств.
* **Пользователь.** Разрешение на чтение для пространств, датчиков и пользователей, включая соответствующие связанные объекты.
* **Специалист службы поддержки.** Разрешение на чтение для всех элементов, кроме ключей доступа.
* **Установщик устройств.** Разрешение на чтение и обновление для устройств и датчиков, включая соответствующие связанные объекты. Разрешение на чтение для пространств.
* **Устройство шлюза.** Разрешение на создание для датчиков. Разрешение на чтение для устройств и датчиков, включая соответствующие связанные объекты.

>[!NOTE]
> *Полные определения для указанных выше ролей можно получить путем запроса API системы или ролей.*

### <a name="object-types"></a>Типы объектов

Элемент `ObjectIdType` указывает на тип удостоверения, предоставленного для роли. Помимо типов `DeviceId` и `UserDefinedFunctionId`, типы соответствуют свойству объекта Azure Active Directory (Azure AD):
  
* Тип `UserId` назначает роли для пользователя.
* Тип `DeviceId` назначает роли для устройства.
* Тип `DomainName` назначает роли для доменного имени. Каждому пользователю с указанным именем домена предоставлены права на доступ к соответствующей роли.
* Тип `TenantId` назначает роли для клиента. Каждому пользователю, принадлежащему к указанному клиенту Azure Active Directory, будут предоставлены права на доступ к соответствующей роли.
* Тип `ServicePrincipalId` назначает роль для идентификатора объекта субъекта-службы.
* Тип `UserDefinedFunctionId` назначает роль для определяемой пользователем функции (UDF).

> [!div class="nextstepaction"]
> [Get-AzureADUser](https://docs.microsoft.com/powershell/module/azuread/get-azureaduser?view=azureadps-2.0)

> [!div class="nextstepaction"]
> [Get-AzureRmADServicePrincipal](https://docs.microsoft.com/powershell/module/azurerm.resources/get-azurermadserviceprincipal?view=azurermps-6.8.1)

> [!div class="nextstepaction"]
> [Краткое руководство: настройка среды разработки](https://docs.microsoft.com/azure/active-directory/develop/quickstart-create-new-tenant)

## <a name="role-assignments"></a>Назначения ролей

Разрешения предоставляются получателю путем создания назначения ролей, а отзываются путем их удаления. Назначение ролей Azure Digital Twins связывает объект (пользователь, клиент Azure Active Directory и т. д.), роли и пространство. Затем разрешения предоставляются для всех объектов, принадлежащих этому пространству, включая весь пространственный граф.

Например, пользователь получает назначение роли с ролью `DeviceInstaller` для корневого узла пространственного графа, представляющего здание. После этого пользователю будут предоставлены разрешения на чтение и обновление устройств не только для этого узла, но и для всех других дочерних пространств в здании.

## <a name="next-steps"></a>Дополнительная информация

Дополнительные сведения о безопасности Azure Digital Twins см. в статье [Создание назначений ролей и управление ими](./security-create-manage-role-assignments.md).
