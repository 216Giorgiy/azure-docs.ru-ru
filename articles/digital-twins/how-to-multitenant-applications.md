---
title: Включение мультитенантных приложений с помощью Azure Digital Twins | Документация Майкрософт
description: Основные сведения о регистрации клиентов Azure Active Directory ваших заказчиков с помощью Azure Digital Twins
author: mavoge
manager: bertvanhoof
ms.service: digital-twins
services: digital-twins
ms.topic: conceptual
ms.date: 10/08/2018
ms.author: mavoge
ms.openlocfilehash: a2d9ece119003c341f49ee03d735d5636b179a32
ms.sourcegitcommit: da3459aca32dcdbf6a63ae9186d2ad2ca2295893
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/07/2018
ms.locfileid: "51259893"
---
# <a name="enable-multitenant-applications-with-azure-digital-twins"></a>Включение мультитенантных приложений с помощью Azure Digital Twins

Разработчикам, использующим Azure Digital Twins, обычно требуется создавать мультитенантные приложения. *Мультитенантное приложение* — это единый подготовленный экземпляр, который поддерживает нескольких пользователей. У каждого пользователя есть собственные независимые данные и привилегии.

В этом документе описано, как создать мультитенантное приложение Azure Digital Twins, поддерживающее несколько клиентов и пользователей Azure Active Directory (Azure AD).

## <a name="scenario-summary"></a>Сводка сценария

В этом случае рассмотрим разработчика D и клиента C:

- У разработчика D есть подписка Azure с клиентом Azure AD.
- Разработчик D разворачивает экземпляр Azure Digital Twins в свою подписку Azure.
- Пользователи в клиенте Azure AD разработчика D могут получать токены от службы Azure Digital Twins, так как Azure AD создала субъект-службу в клиенте Azure AD разработчика D.
- Разработчик D теперь создает мобильное приложение, которое напрямую интегрируется с API управления Azure Digital Twins.
- Разработчик D позволяет клиенту C использовать мобильное приложение.
- Клиент C должен быть авторизован для использования API управления Azure Digital Twins в приложении разработчика D.

  > [!IMPORTANT]
  > - Когда клиент C входит в приложение разработчика D, приложение не может получать токены для пользователей клиента C, чтобы связываться с API управления.
  > - Azure AD выдает ошибку, которая указывает, что Azure Digital Twins не распознается в каталоге клиента C.

## <a name="solution"></a>Решение

Чтобы решить проблему описанного выше сценария, нужно предпринять следующие действия, чтобы создать субъект-службу Azure Digital Twins в клиенте Azure AD клиента C.

- Если у клиента C еще нет подписки Azure с клиентом Azure AD:

  - администратор клиента Azure AD пользователя C должен получить [подписку Azure с оплатой по мере использования](https://azure.microsoft.com/offers/ms-azr-0003p/);
  - после этого администратор клиента Azure AD пользователя C должен [связать свой клиент с новой подпиской](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect).

- На [портале Azure](https://portal.azure.com) администратор клиента Azure AD пользователя C должен выполнить описанные ниже действия.

  1. Открыть **подписки**.
  1. Выбрать подписку с клиентом Azure AD, который будет использоваться в приложении разработчика D.
  1. Выбрать **Поставщики ресурсов**.
  1. Найти **Microsoft.IoTSpaces**.
  1. Выберите **Зарегистрировать**.
  
## <a name="next-steps"></a>Дополнительная информация

Дополнительные сведения см. в статье [Использование определяемых пользователем функций в Azure Digital Twins](how-to-user-defined-functions.md).

Дополнительные сведения об использовании управления доступом на основе ролей для дальнейшей защиты приложения см. в статье [Создание назначений ролей и управление ими](security-create-manage-role-assignments.md).
