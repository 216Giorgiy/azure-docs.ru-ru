---
title: Как включить многопользовательские приложения с помощью Azure Digital Twins | Документация Майкрософт
description: Основные сведения о регистрации клиентов Azure Active Directory ваших заказчиков с помощью Azure Digital Twins
author: mavoge
manager: bertvanhoof
ms.service: digital-twins
services: digital-twins
ms.topic: conceptual
ms.date: 10/08/2018
ms.author: mavoge
ms.openlocfilehash: e465ab95b670268f8ef31472259783fce8f24b36
ms.sourcegitcommit: 74941e0d60dbfd5ab44395e1867b2171c4944dbe
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/15/2018
ms.locfileid: "49324017"
---
# <a name="how-to-enable-multitenant-applications-with-azure-digital-twins"></a>Как включить многопользовательские приложения с помощью Azure Digital Twins

Разработчики, использующие платформу Azure Digital Twins, скорее всего, захотят создавать мультитенантные приложения. *Мультитенантное приложение* является одним подготовленным экземпляром, используемым для поддержки нескольких клиентов с собственными независимыми данными и привилегиями.

В этом документе описано, как создать мультитенантное приложение Azure Digital Twins, поддерживающее несколько клиентов Azure Active Directory (AD).

## <a name="scenario-summary"></a>Сводка сценария

В этом случае рассмотрим разработчика D и клиента C:

- У разработчика D есть подписка Azure с клиентом Azure AD.
- Разработчик D развернул экземпляр Digital Twins в свою подписку Azure.
- Пользователи в клиенте Azure AD разработчика D могут получать токены от службы Digital Twins, так как Azure AD создала субъект-службу в клиенте Azure AD разработчика D.
- Разработчик D теперь создает мобильное приложение, которое напрямую интегрируется с API управления Digital Twins.
- Затем разработчик D позволяет клиенту C использовать мобильное приложение.
- Теперь клиент C должен быть авторизован для использования API управления Digital Twins в приложении разработчика D.

  > [!IMPORTANT]
  > - Когда клиент C входит в приложение разработчика D, приложение не сможет получить токены для пользователей клиента C, чтобы связаться с API управления.
  > - Затем Azure AD выдаст ошибку, указывающую на то, что Digital Twins не распознается в каталоге клиента C.

## <a name="solution"></a>Решение

Чтобы решить проблему описанного выше сценария, нужно создать субъект-службу Digital Twins в клиенте Azure AD клиента C, выполнив следующие действия.

- Если у клиента C еще нет подписки Azure с клиентом Azure AD:

  - Администратору клиента C Azure AD в клиенте необходимо будет получить [подписку Azure с оплатой по мере использования](https://azure.microsoft.com/offers/ms-azr-0003p/).
  - После этого администратор клиента C в Azure AD должен будет [связать свой клиент с новой подпиской](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect).

- С помощью [портала Azure](https://portal.azure.com) администратор клиента C Azure AD должен сделать следующее:
  1. Открыть **подписки**.
  1. Выбрать подписку с клиентом Azure AD, который будет использоваться в приложении разработчика D.
  1. Выбрать **Поставщики ресурсов**.
  1. Найти **Microsoft.IoTSpaces**.
  1. Щелкните **Зарегистрировать**.
  
## <a name="next-steps"></a>Дополнительная информация

Дополнительные сведения см. в статье [Использование определяемых пользователем функций в Azure Digital Twins](how-to-user-defined-functions.md).

Дополнительные сведения об использовании управления доступом на основе ролей см. в статье [Создание назначений ролей и управление ими](security-create-manage-role-assignments.md).
