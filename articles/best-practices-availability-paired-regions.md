<properties
	pageTitle="Обеспечение непрерывности бизнес-процессов с помощью парных регионов Azure"
	description="Используйте пары регионов для обеспечения отказоустойчивости приложений во время сбоев в центрах обработки данных."
	services="multiple"
	documentationCenter=""
	authors="rboucher"
	manager="jwhit"
	editor="tysonn"/>

<tags
    ms.service="backup"
    ms.workload="storage-backup-recovery"
    ms.tgt_pltfrm="na"
    ms.devlang="na"
    ms.topic="article"
    ms.date="07/07/2015"
    ms.author="robb"/>

# Улучшение доступности с помощью парных регионов Azure

## В этой статье описываются парные регионы Azure

Azure работает в различных странах по всему миру. Географическая территория Azure — это определенная область мира, содержащая по крайней мере один регион Azure. Регион Azure — это область в пределах географической территории, содержащая один или несколько центров обработки данных.

Каждый регион Azure образует пару с другим регионом в пределах той же географической территории (за исключением Южной Бразилии, которая образует пару с регионом за пределами своей территории). Эти два региона формируют пару регионов.


![AzureGeography](./media/best-practices-availability-paired-regions/GeoRegionDataCenter.png)

Рис. 1. Схема пар регионов Azure



| "География" | Пары регионов | |
| :-------------| :-------------   | :-------------   |
| Северная Америка | Северо-центральный регион США | Южно-центральный регион США |
| Северная Америка | Восток США | Запад США |
| Северная Америка | Восточная часть США 2 | Центральная часть США |
| Европа | Северная Европа | Западная Европа |
| Азия | Юго-Восточная Азия | Восточная Азия |
| Китай | Восточный Китай | Северный Китай |
| Япония | Восточная часть Японии | Западная часть Японии |
| Бразилия | Южная Бразилия (1) | Южно-центральный регион США |
| Австралия | Восточная часть Австралии | Юго-Восточная часть Австралии|
| Правительство США | Правительство штата Айова | Правительство штата Вирджиния |

Таблица 1. Сопоставление пар регионов Azure

> (1) Южная Бразилия является уникальным регионом, так как она образует пару за пределами собственной географической территории. Обратите внимание, что дополнительным регионом Южной Бразилии является Южно-центральный регион США, но дополнительным регионом Южно-центрального региона США не является Южная Бразилия.

Рекомендуется реплицировать рабочие нагрузки по парным регионам, чтобы пользоваться преимуществами политик изоляции и доступности Azure. Например, запланированные обновления системы Azure развертываются последовательно (не одновременно) в парных регионах. Это означает, что даже в редких случаях сбоя во время обновления этот сбой не произойдет в двух регионах одновременно. Кроме того, в маловероятном случае общего сбоя приоритетом становится восстановление по крайней мере одного региона из каждой пары.

## Пример пары регионов
Ниже на рисунке 2 показана гипотетическая пара регионов Зелеными числами выделены межрегиональные действия трех служб Azure (вычисления, хранилище и база данных Azure) и их настройка для репликации по регионам. Уникальные преимущества развертывания в парных регионах выделены оранжевыми числами.


![Обзор преимуществ парных регионов](./media/best-practices-availability-paired-regions/PairedRegionsOverview2.png)

Рис. 2. Гипотетическая пара регионов Azure

![1зеленый](./media/best-practices-availability-paired-regions/1Green.png) **Вычисления Azure**. Вы должны подготовить дополнительные вычислительные ресурсы заранее, чтобы обеспечить доступность ресурсов в другом регионе во время аварии. Рекомендуется развертывать эти ресурсы в парном регионе для аварийного восстановления.

![2зеленый](./media/best-practices-availability-paired-regions/2Green.png) **Хранилище Azure**. Геоизбыточное хранилище (GRS) настраивается по умолчанию при создании учетной записи хранилища Azure. При использовании GRS данные реплицируются трижды в основном регионе и трижды в парном регионе. GRS разрешает репликацию только в парном регионе и не может быть настроено иначе. Дополнительные сведения см. в статье [Варианты избыточности хранилища Azure](../storage/storage-redundancy.md).


![3зеленый](./media/best-practices-availability-paired-regions/3Green.png) **Базы данных SQL Azure**. Используя георепликацию SQL Azure, вы можете настроить асинхронную репликацию транзакций на других серверах базы данных Microsoft Azure. Стандартная георепликация позволяет выполнять асинхронную репликацию только в парный регион. Используя георепликацию Premium, вы можете настроить репликацию в любом регионе мира. Тем не менее рекомендуется развертывать эти ресурсы в парном регионе для аварийного восстановления. Дополнительную информацию см. в статье [Георепликация в базе SQL Azure](https://msdn.microsoft.com/library/azure/dn783447.aspx).

![4зеленый](./media/best-practices-availability-paired-regions/4Green.png) **Независимые службы управления**. Диспетчер ресурсов Azure (ARM) по определению обеспечивает логическую изоляцию компонентов управления службами в регионах, поэтому настройка не требуется. Это означает, что логические сбои в одном регионе едва ли затронут другой регион.

## Преимущества парного региона

Как показано на рисунке 2.

![5оранжевый](./media/best-practices-availability-paired-regions/5Orange.png) **Физическая изоляция**. По возможности Azure планирует центры обработки данных в паре регионов как минимум на расстоянии 483 км друг от друга, хотя это не практично и можно реализовать не во всех регионах. Физическое разделение центров обработки данных уменьшает вероятность последствий стихийных бедствий, массовых беспорядков, отключения электроэнергии или физического выхода сети из строя в обоих регионах одновременно. Уровень изоляции зависит от местных условий (размер географической территории, доступность инфраструктуры электропитания/сети, законодательство и т. д.).

![6оранжевый](./media/best-practices-availability-paired-regions/6Orange.png) **Согласованное состояние приложений**. Если вы используете службу, которая разрешает репликацию только в парном регионе (например, геоизбыточное хранилище), следует убедиться, что другие службы также используют парный регион в качестве целевого объекта для репликации. Это гарантирует согласованное состояние приложений во время отработки отказа.

![7оранжевый](./media/best-practices-availability-paired-regions/7Orange.png) **Порядок восстановления регионов**. В случае общего сбоя в каждой паре определяется приоритетный регион для восстановления. Для приложений, развернутых в парных регионах, один из регионов гарантированно восстанавливается в первую очередь. Если приложение развернуто в регионах, которые не являются парными, восстановление может происходить с задержкой. В худшем случае оба выбранных региона будут восстановлены в последнюю очередь.

![8оранжевый](./media/best-practices-availability-paired-regions/8Orange.png) **Последовательные обновления**. Запланированные обновления системы Azure распространяются среди парных регионов последовательно (не одновременно), чтобы свести к минимуму время простоя, последствия ошибок и логических сбоев в редких случаях неправильного обновления.


![9оранжевый](./media/best-practices-availability-paired-regions/9Orange.png) **Резидентство данных**. Регион находится в той же географической области, что и его пара (за исключением Южной Бразилии), чтобы соблюдать требования к резидентству данных, связанные с налогообложением и юрисдикцией применения законодательства.

<!---HONumber=July15_HO2-->